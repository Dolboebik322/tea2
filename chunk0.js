const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browserAll.O37FPeYp.js","./webworkerAll.BH4GUUzX.js","./colorToUniform.DbAAnll8.js","./spinner.c5kGSmvL.js","./runtime.COSI8KnQ.js","./index.iQGNPith.js","./scheduler.BKBFBD6y.js","./index.Cbtj8aXV.js","../assets/spinner.Bg36IOsD.css","./WebGPURenderer.BH06LTeT.js","./SharedSystems.JZXcjgm6.js","./WebGLRenderer.BEu8zExE.js"])))=>i.map(i=>d[i]);
import{n as dt,K as Ll,A as Ml,z as Pl,y as Tl,s as Tt,W as rs,J as Wt,i as G,B as bt,f as C,x as Re,k as yt,N as Ds,ad as we,ag as ns,e as P,c as T,b as I,r as x,h as A,U as vr,ac as Ze,Q as ri,a as N,g as j,H as Vs,I as Gs,D as Nt,R as as,t as at,d as ot,ah as jr,Z as Xr,j as mt,l as Da,u as Va,m as Ga,o as Ha,p as Qt,q as Jt,C as ks,F as Se,E as ge,M as ni,G as $e,T as mi,ai as El}from"./scheduler.BKBFBD6y.js";import{n as Il,l as Bl,o as Fl,p as Rl,S as Ft,i as Rt,t as B,g as Mt,a as V,d as Pt,h as ai,k as Yr,j as oi,c as lt,b as pt,m as ht,e as ct}from"./index.Cbtj8aXV.js";import{$ as De,g as Wa,b as Dl}from"./runtime.COSI8KnQ.js";import{b as pi,g as za,c as Vl,d as Gl,o as Hl}from"./TelegramApp.CeTAsAjr.js";import{a as qr,D as Wl,c as zl,b as Ul,o as Ol,s as Nl,f as jl,d as Xl}from"./dynamic-reward.DALTNLQl.js";import{s as Yl}from"./popup.D-ncQD2W.js";import{i as ql,g as xe}from"./stores.BOp1E1BV.js";import{i as Zl,g as Ua,a as Kl}from"./Modals.VQAdeXZJ.js";import{w as Oa}from"./index.iQGNPith.js";import{p as Cr}from"./ProgressBar.svelte_svelte_type_style_lang.DCD--dUd.js";import{g as Ps,a as li}from"./spread.CgU5AtxT.js";import{c as $l,f as hi,b as os,d as Ql}from"./index.BcQiTmlL.js";import{e as fe,u as Jl,f as th}from"./each.BpZv1T_1.js";import{p as $i}from"./stores.oF9ujnK_.js";import{g as Ts}from"./entry.Bvpd0RiF.js";import{i as Na,j as eh,g as ja,k as sh,l as ih,R as Zr}from"./meta.store.B9WS49uK.js";import{u as Xa}from"./auth.store.CI76qHLO.js";import{D as ee}from"./index.D-Atmbbj.js";import{B as We,a as Ya}from"./button.Dr2YNVu_.js";import{j as Qi}from"./jquery.DpvzNB0Q.js";import{_ as ci}from"./preload-helper.C1FmrZbK.js";import{E as ve,S as rh}from"./spinner.c5kGSmvL.js";import{s as nh}from"./sleep.DRvqvXpv.js";import{g as qa}from"./meta.DRmUPyeX.js";import{L as Ar}from"./LottiePlayer.CvGdcWAB.js";import{i as kr}from"./balance.store.C5txOop6.js";import{W as Sr}from"./whale-coin-icon.DL4YJfal.js";import{g as ah}from"./auth.C468mTRC.js";import{D as oh}from"./death.B0u8rRed.js";import{u as Kr}from"./index.Dt6NzSuo.js";import{c as $r,g as lh}from"./clicker.store.XlIS3kC5.js";const Za=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function hh(i,t,e,s){if(!t)return dt;const r=i.getBoundingClientRect();if(t.left===r.left&&t.right===r.right&&t.top===r.top&&t.bottom===r.bottom)return dt;const{delay:n=0,duration:a=300,easing:o=Ll,start:l=Il()+n,end:c=l+a,tick:h=dt,css:u}=e(i,{from:t,to:r},s);let f=!0,d=!1,m;function g(){u&&(m=Fl(i,0,1,a,n,o,u)),n||(d=!0)}function p(){u&&Rl(i,m),f=!1}return Bl(_=>{if(!d&&_>=l&&(d=!0),d&&_>=c&&(h(1,0),p()),!f)return!1;if(d){const y=_-l,w=0+1*o(y/a);h(w,1-w)}return!0}),g(),h(0,1),p}function ch(i){const t=getComputedStyle(i);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:e,height:s}=t,r=i.getBoundingClientRect();i.style.position="absolute",i.style.width=e,i.style.height=s,Ka(i,r)}}function Ka(i,t){const e=i.getBoundingClientRect();if(t.left!==e.left||t.top!==e.top){const s=getComputedStyle(i),r=s.transform==="none"?"":s.transform;i.style.transform=`${r} translate(${t.left-e.left}px, ${t.top-e.top}px)`}}const uh={message:"Missing Toast Message",autohide:!0,timeout:5e3},$a="toastStore";function dh(){const i=Pl($a);if(!i)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return i}function fh(){const i=ph();return Ml($a,i)}function mh(){const i=Math.random();return Number(i).toString(32)}function ph(){const{subscribe:i,set:t,update:e}=Oa([]),s=n=>e(a=>{if(a.length>0){const o=a.findIndex(c=>c.id===n),l=a[o];l&&(l.callback&&l.callback({id:n,status:"closed"}),l.timeoutId&&clearTimeout(l.timeoutId),a.splice(o,1))}return a});function r(n){if(n.autohide===!0)return setTimeout(()=>{s(n.id)},n.timeout)}return{subscribe:i,close:s,trigger:n=>{const a=mh();return e(o=>{n&&n.callback&&n.callback({id:a,status:"queued"}),n.hideDismiss&&(n.autohide=!0);const l={...uh,...n,id:a};return l.timeoutId=r(l),o.push(l),o}),a},freeze:n=>e(a=>(a.length>0&&clearTimeout(a[n].timeoutId),a)),unfreeze:n=>e(a=>(a.length>0&&(a[n].timeoutId=r(a[n])),a)),clear:()=>t([])}}function gh(){Zl(),fh(),ql()}function Qa(i,t){const e='a[href]:not([tabindex="-1"]), button:not([tabindex="-1"]), input:not([tabindex="-1"]), textarea:not([tabindex="-1"]), select:not([tabindex="-1"]), details:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])';let s,r;function n(d){d.shiftKey&&d.code==="Tab"&&(d.preventDefault(),r.focus())}function a(d){!d.shiftKey&&d.code==="Tab"&&(d.preventDefault(),s.focus())}const o=d=>d.filter(m=>m.tabIndex>=0).sort((m,g)=>m.tabIndex===0&&g.tabIndex>0?1:m.tabIndex>0&&g.tabIndex===0?-1:m.tabIndex-g.tabIndex),l=d=>{const m=[...i.querySelectorAll("[data-focusindex]")];return!m||m.length===0?d:m.sort((g,p)=>+g.dataset.focusindex-+p.dataset.focusindex)[0]||d},c=d=>{if(t===!1)return;const m=o(Array.from(i.querySelectorAll(e)));m.length&&(s=m[0],r=m[m.length-1],d||l(s).focus(),s.addEventListener("keydown",n),r.addEventListener("keydown",a))};c(!1);function h(){s&&s.removeEventListener("keydown",n),r&&r.removeEventListener("keydown",a)}const u=(d,m)=>(d.length&&(h(),c(!0)),m),f=new MutationObserver(u);return f.observe(i,{childList:!0,subtree:!0}),{update(d){t=d,d?c(!1):h()},destroy(){h(),f.disconnect()}}}function Le(i,t){const{transition:e,params:s,enabled:r}=t;return r?e(i,s):"duration"in s?e(i,{duration:0}):{duration:0}}function _h(i,{from:t,to:e},s={}){const r=getComputedStyle(i),n=r.transform==="none"?"":r.transform,[a,o]=r.transformOrigin.split(" ").map(parseFloat),l=t.left+t.width*a/e.width-(e.left+a),c=t.top+t.height*o/e.height-(e.top+o),{delay:h=0,duration:u=d=>Math.sqrt(d)*120,easing:f=$l}=s;return{delay:h,duration:Tl(u)?u(Math.sqrt(l*l+c*c)):u,easing:f,css:(d,m)=>{const g=m*l,p=m*c,_=d+m*t.width/e.width,y=d+m*t.height/e.height;return`transform: ${n} translate(${g}px, ${p}px) scale(${_}, ${y});`}}}function Qr(i){let t=i[14],e,s,r=sn(i);return{c(){r.c(),e=Wt()},l(n){r.l(n),e=Wt()},m(n,a){r.m(n,a),G(n,e,a),s=!0},p(n,a){a[0]&16384&&Tt(t,t=n[14])?(Mt(),V(r,1,1,dt),Pt(),r=sn(n),r.c(),B(r,1),r.m(e.parentNode,e)):r.p(n,a)},i(n){s||(B(r),s=!0)},o(n){V(r),s=!1},d(n){n&&C(e),r.d(n)}}}function yh(i){let t,e,s,r,n,a;const o=[xh,wh],l=[];function c(h,u){var f;return(f=h[16])!=null&&f.slot?0:1}return e=c(i),s=l[e]=o[e](i),{c(){t=P("div"),s.c(),this.h()},l(h){t=T(h,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var u=I(t);s.l(u),u.forEach(C),this.h()},h(){var h;x(t,"class",r="modal contents "+(((h=i[14][0])==null?void 0:h.modalClasses)??"")),x(t,"data-testid","modal-component"),x(t,"role","dialog"),x(t,"aria-modal","true"),x(t,"aria-label",n=i[14][0].title??"")},m(h,u){G(h,t,u),l[e].m(t,null),i[47](t),a=!0},p(h,u){var d;let f=e;e=c(h),e===f?l[e].p(h,u):(Mt(),V(l[f],1,1,()=>{l[f]=null}),Pt(),s=l[e],s?s.p(h,u):(s=l[e]=o[e](h),s.c()),B(s,1),s.m(t,null)),(!a||u[0]&16384&&r!==(r="modal contents "+(((d=h[14][0])==null?void 0:d.modalClasses)??"")))&&x(t,"class",r),(!a||u[0]&16384&&n!==(n=h[14][0].title??""))&&x(t,"aria-label",n)},i(h){a||(B(s),a=!0)},o(h){V(s),a=!1},d(h){h&&C(t),l[e].d(),i[47](null)}}}function bh(i){var d,m,g,p;let t,e,s,r,n,a,o=((d=i[14][0])==null?void 0:d.title)&&Jr(i),l=((m=i[14][0])==null?void 0:m.body)&&tn(i),c=((g=i[14][0])==null?void 0:g.image)&&typeof((p=i[14][0])==null?void 0:p.image)=="string"&&en(i);function h(_,y){if(_[14][0].type==="alert")return kh;if(_[14][0].type==="confirm")return Ah;if(_[14][0].type==="prompt")return Ch}let u=h(i),f=u&&u(i);return{c(){t=P("div"),o&&o.c(),e=N(),l&&l.c(),s=N(),c&&c.c(),r=N(),f&&f.c(),this.h()},l(_){t=T(_,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-label":!0});var y=I(t);o&&o.l(y),e=j(y),l&&l.l(y),s=j(y),c&&c.l(y),r=j(y),f&&f.l(y),y.forEach(C),this.h()},h(){x(t,"class",n="modal "+i[20]),x(t,"data-testid","modal"),x(t,"role","dialog"),x(t,"aria-modal","true"),x(t,"aria-label",a=i[14][0].title??"")},m(_,y){G(_,t,y),o&&o.m(t,null),A(t,e),l&&l.m(t,null),A(t,s),c&&c.m(t,null),A(t,r),f&&f.m(t,null),i[46](t)},p(_,y){var w,b,v,S;(w=_[14][0])!=null&&w.title?o?o.p(_,y):(o=Jr(_),o.c(),o.m(t,e)):o&&(o.d(1),o=null),(b=_[14][0])!=null&&b.body?l?l.p(_,y):(l=tn(_),l.c(),l.m(t,s)):l&&(l.d(1),l=null),(v=_[14][0])!=null&&v.image&&typeof((S=_[14][0])==null?void 0:S.image)=="string"?c?c.p(_,y):(c=en(_),c.c(),c.m(t,r)):c&&(c.d(1),c=null),u===(u=h(_))&&f?f.p(_,y):(f&&f.d(1),f=u&&u(_),f&&(f.c(),f.m(t,null))),y[0]&1048576&&n!==(n="modal "+_[20])&&x(t,"class",n),y[0]&16384&&a!==(a=_[14][0].title??"")&&x(t,"aria-label",a)},i:dt,o:dt,d(_){_&&C(t),o&&o.d(),l&&l.d(),c&&c.d(),f&&f.d(),i[46](null)}}}function wh(i){var o,l;let t,e,s;const r=[(o=i[16])==null?void 0:o.props,{parent:i[19]}];var n=(l=i[16])==null?void 0:l.ref;function a(c,h){var f;let u={};for(let d=0;d<r.length;d+=1)u=we(u,r[d]);return h!==void 0&&h[0]&589824&&(u=we(u,Ps(r,[h[0]&65536&&li((f=c[16])==null?void 0:f.props),h[0]&524288&&{parent:c[19]}]))),{props:u}}return n&&(t=as(n,a(i))),{c(){t&&lt(t.$$.fragment),e=Wt()},l(c){t&&pt(t.$$.fragment,c),e=Wt()},m(c,h){t&&ht(t,c,h),G(c,e,h),s=!0},p(c,h){var u,f;if(h[0]&65536&&n!==(n=(u=c[16])==null?void 0:u.ref)){if(t){Mt();const d=t;V(d.$$.fragment,1,0,()=>{ct(d,1)}),Pt()}n?(t=as(n,a(c,h)),lt(t.$$.fragment),B(t.$$.fragment,1),ht(t,e.parentNode,e)):t=null}else if(n){const d=h[0]&589824?Ps(r,[h[0]&65536&&li((f=c[16])==null?void 0:f.props),h[0]&524288&&{parent:c[19]}]):{};t.$set(d)}},i(c){s||(t&&B(t.$$.fragment,c),s=!0)},o(c){t&&V(t.$$.fragment,c),s=!1},d(c){c&&C(e),t&&ct(t,c)}}}function xh(i){var o,l;let t,e,s;const r=[(o=i[16])==null?void 0:o.props,{parent:i[19]}];var n=(l=i[16])==null?void 0:l.ref;function a(c,h){var f;let u={$$slots:{default:[vh]},$$scope:{ctx:c}};for(let d=0;d<r.length;d+=1)u=we(u,r[d]);return h!==void 0&&h[0]&589824&&(u=we(u,Ps(r,[h[0]&65536&&li((f=c[16])==null?void 0:f.props),h[0]&524288&&{parent:c[19]}]))),{props:u}}return n&&(t=as(n,a(i))),{c(){t&&lt(t.$$.fragment),e=Wt()},l(c){t&&pt(t.$$.fragment,c),e=Wt()},m(c,h){t&&ht(t,c,h),G(c,e,h),s=!0},p(c,h){var u,f;if(h[0]&65536&&n!==(n=(u=c[16])==null?void 0:u.ref)){if(t){Mt();const d=t;V(d.$$.fragment,1,0,()=>{ct(d,1)}),Pt()}n?(t=as(n,a(c,h)),lt(t.$$.fragment),B(t.$$.fragment,1),ht(t,e.parentNode,e)):t=null}else if(n){const d=h[0]&589824?Ps(r,[h[0]&65536&&li((f=c[16])==null?void 0:f.props),h[0]&524288&&{parent:c[19]}]):{};h[0]&65536|h[1]&16777216&&(d.$$scope={dirty:h,ctx:c}),t.$set(d)}},i(c){s||(t&&B(t.$$.fragment,c),s=!0)},o(c){t&&V(t.$$.fragment,c),s=!1},d(c){c&&C(e),t&&ct(t,c)}}}function vh(i){var r;let t,e=((r=i[16])==null?void 0:r.slot)+"",s;return{c(){t=new Vs(!1),s=Wt(),this.h()},l(n){t=Gs(n,!1),s=Wt(),this.h()},h(){t.a=s},m(n,a){t.m(e,n,a),G(n,s,a)},p(n,a){var o;a[0]&65536&&e!==(e=((o=n[16])==null?void 0:o.slot)+"")&&t.p(e)},d(n){n&&(C(s),t.d())}}}function Jr(i){let t,e,s=i[14][0].title+"",r;return{c(){t=P("header"),e=new Vs(!1),this.h()},l(n){t=T(n,"HEADER",{class:!0});var a=I(t);e=Gs(a,!1),a.forEach(C),this.h()},h(){e.a=null,x(t,"class",r="modal-header "+i[5])},m(n,a){G(n,t,a),e.m(s,t)},p(n,a){a[0]&16384&&s!==(s=n[14][0].title+"")&&e.p(s),a[0]&32&&r!==(r="modal-header "+n[5])&&x(t,"class",r)},d(n){n&&C(t)}}}function tn(i){let t,e,s=i[14][0].body+"",r;return{c(){t=P("article"),e=new Vs(!1),this.h()},l(n){t=T(n,"ARTICLE",{class:!0});var a=I(t);e=Gs(a,!1),a.forEach(C),this.h()},h(){e.a=null,x(t,"class",r="modal-body "+i[6])},m(n,a){G(n,t,a),e.m(s,t)},p(n,a){a[0]&16384&&s!==(s=n[14][0].body+"")&&e.p(s),a[0]&64&&r!==(r="modal-body "+n[6])&&x(t,"class",r)},d(n){n&&C(t)}}}function en(i){let t,e;return{c(){t=P("img"),this.h()},l(s){t=T(s,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var s;x(t,"class","modal-image "+Th),Nt(t.src,e=(s=i[14][0])==null?void 0:s.image)||x(t,"src",e),x(t,"alt","Modal")},m(s,r){G(s,t,r)},p(s,r){var n;r[0]&16384&&!Nt(t.src,e=(n=s[14][0])==null?void 0:n.image)&&x(t,"src",e)},d(s){s&&C(t)}}}function Ch(i){let t,e,s,r,n,a,o,l,c,h,u,f,d,m,g=[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},i[14][0].valueAttr],p={};for(let _=0;_<g.length;_+=1)p=we(p,g[_]);return{c(){t=P("form"),e=P("input"),s=N(),r=P("footer"),n=P("button"),a=at(i[0]),l=N(),c=P("button"),h=at(i[2]),this.h()},l(_){t=T(_,"FORM",{class:!0});var y=I(t);e=T(y,"INPUT",{class:!0,name:!0,type:!0}),s=j(y),r=T(y,"FOOTER",{class:!0});var w=I(r);n=T(w,"BUTTON",{type:!0,class:!0});var b=I(n);a=ot(b,i[0]),b.forEach(C),l=j(w),c=T(w,"BUTTON",{type:!0,class:!0});var v=I(c);h=ot(v,i[2]),v.forEach(C),w.forEach(C),y.forEach(C),this.h()},h(){jr(e,p),x(n,"type","button"),x(n,"class",o="btn "+i[3]),x(c,"type","submit"),x(c,"class",u="btn "+i[4]),x(r,"class",f="modal-footer "+i[7]),x(t,"class","space-y-4")},m(_,y){G(_,t,y),A(t,e),e.autofocus&&e.focus(),Xr(e,i[15]),A(t,s),A(t,r),A(r,n),A(n,a),A(r,l),A(r,c),A(c,h),d||(m=[bt(e,"input",i[45]),bt(n,"click",i[26]),bt(t,"submit",i[28])],d=!0)},p(_,y){jr(e,p=Ps(g,[{class:"modal-prompt-input input"},{name:"prompt"},{type:"text"},y[0]&16384&&_[14][0].valueAttr])),y[0]&32768&&e.value!==_[15]&&Xr(e,_[15]),y[0]&1&&mt(a,_[0]),y[0]&8&&o!==(o="btn "+_[3])&&x(n,"class",o),y[0]&4&&mt(h,_[2]),y[0]&16&&u!==(u="btn "+_[4])&&x(c,"class",u),y[0]&128&&f!==(f="modal-footer "+_[7])&&x(r,"class",f)},d(_){_&&C(t),d=!1,Re(m)}}}function Ah(i){let t,e,s,r,n,a,o,l,c,h,u;return{c(){t=P("footer"),e=P("button"),s=at(i[0]),n=N(),a=P("button"),o=at(i[1]),this.h()},l(f){t=T(f,"FOOTER",{class:!0});var d=I(t);e=T(d,"BUTTON",{type:!0,class:!0});var m=I(e);s=ot(m,i[0]),m.forEach(C),n=j(d),a=T(d,"BUTTON",{type:!0,class:!0});var g=I(a);o=ot(g,i[1]),g.forEach(C),d.forEach(C),this.h()},h(){x(e,"type","button"),x(e,"class",r="btn "+i[3]),x(a,"type","button"),x(a,"class",l="btn "+i[4]),x(t,"class",c="modal-footer "+i[7])},m(f,d){G(f,t,d),A(t,e),A(e,s),A(t,n),A(t,a),A(a,o),h||(u=[bt(e,"click",i[26]),bt(a,"click",i[27])],h=!0)},p(f,d){d[0]&1&&mt(s,f[0]),d[0]&8&&r!==(r="btn "+f[3])&&x(e,"class",r),d[0]&2&&mt(o,f[1]),d[0]&16&&l!==(l="btn "+f[4])&&x(a,"class",l),d[0]&128&&c!==(c="modal-footer "+f[7])&&x(t,"class",c)},d(f){f&&C(t),h=!1,Re(u)}}}function kh(i){let t,e,s,r,n,a,o;return{c(){t=P("footer"),e=P("button"),s=at(i[0]),this.h()},l(l){t=T(l,"FOOTER",{class:!0});var c=I(t);e=T(c,"BUTTON",{type:!0,class:!0});var h=I(e);s=ot(h,i[0]),h.forEach(C),c.forEach(C),this.h()},h(){x(e,"type","button"),x(e,"class",r="btn "+i[3]),x(t,"class",n="modal-footer "+i[7])},m(l,c){G(l,t,c),A(t,e),A(e,s),a||(o=bt(e,"click",i[26]),a=!0)},p(l,c){c[0]&1&&mt(s,l[0]),c[0]&8&&r!==(r="btn "+l[3])&&x(e,"class",r),c[0]&128&&n!==(n="modal-footer "+l[7])&&x(t,"class",n)},d(l){l&&C(t),a=!1,o()}}}function sn(i){let t,e,s,r,n,a,o,l,c,h,u,f;const d=[bh,yh],m=[];function g(p,_){return p[14][0].type!=="component"?0:1}return s=g(i),r=m[s]=d[s](i),{c(){t=P("div"),e=P("div"),r.c(),this.h()},l(p){t=T(p,"DIV",{class:!0,"data-testid":!0});var _=I(t);e=T(_,"DIV",{class:!0});var y=I(e);r.l(y),y.forEach(C),_.forEach(C),this.h()},h(){x(e,"class",n="modal-transition "+i[21]),x(t,"class",l="modal-backdrop "+i[22]+" "+i[18]),x(t,"data-testid","modal-backdrop")},m(p,_){G(p,t,_),A(t,e),m[s].m(e,null),h=!0,u||(f=[bt(t,"mousedown",i[24]),bt(t,"mouseup",i[25]),bt(t,"touchstart",i[42],{passive:!0}),bt(t,"touchend",i[43],{passive:!0}),vr(Qa.call(null,t,!0))],u=!0)},p(p,_){i=p;let y=s;s=g(i),s===y?m[s].p(i,_):(Mt(),V(m[y],1,1,()=>{m[y]=null}),Pt(),r=m[s],r?r.p(i,_):(r=m[s]=d[s](i),r.c()),B(r,1),r.m(e,null)),(!h||_[0]&2097152&&n!==(n="modal-transition "+i[21]))&&x(e,"class",n),(!h||_[0]&4456448&&l!==(l="modal-backdrop "+i[22]+" "+i[18]))&&x(t,"class",l)},i(p){h||(B(r),rs(()=>{h&&(o&&o.end(1),a=ai(e,Le,{transition:i[9],params:i[10],enabled:i[8]}),a.start())}),rs(()=>{h&&(c||(c=Yr(t,Le,{transition:hi,params:{duration:150},enabled:i[8]},!0)),c.run(1))}),h=!0)},o(p){V(r),a&&a.invalidate(),o=oi(e,Le,{transition:i[11],params:i[12],enabled:i[8]}),c||(c=Yr(t,Le,{transition:hi,params:{duration:150},enabled:i[8]},!1)),c.run(0),h=!1},d(p){p&&C(t),m[s].d(),p&&o&&o.end(),p&&c&&c.end(),u=!1,Re(f)}}}function Sh(i){let t,e,s,r;rs(i[44]);let n=i[14].length>0&&Qr(i);return{c(){n&&n.c(),t=Wt()},l(a){n&&n.l(a),t=Wt()},m(a,o){n&&n.m(a,o),G(a,t,o),e=!0,s||(r=[bt(window,"keydown",i[29]),bt(window,"resize",i[44])],s=!0)},p(a,o){a[14].length>0?n?(n.p(a,o),o[0]&16384&&B(n,1)):(n=Qr(a),n.c(),B(n,1),n.m(t.parentNode,t)):n&&(Mt(),V(n,1,1,()=>{n=null}),Pt())},i(a){e||(B(n),e=!0)},o(a){V(n),e=!1},d(a){a&&C(t),n&&n.d(a),s=!1,Re(r)}}}const Lh="fixed top-0 left-0 right-0 bottom-0 bg-surface-backdrop-token p-4",Mh="w-full h-fit min-h-full overflow-y-auto flex justify-center",Ph="block overflow-y-auto",Th="w-full h-auto";function Eh(i,t,e){let s,r,n,a,o,l,c;yt(i,Cr,R=>e(49,c=R));const h=Ds();let{components:u={}}=t,{position:f="items-center"}=t,{background:d="bg-surface-100-800-token"}=t,{width:m="w-modal"}=t,{height:g="h-auto"}=t,{padding:p="p-4"}=t,{spacing:_="space-y-4"}=t,{rounded:y="rounded-container-token"}=t,{shadow:w="shadow-xl"}=t,{zIndex:b="z-[999]"}=t,{buttonNeutral:v="variant-ghost-surface"}=t,{buttonPositive:S="variant-filled"}=t,{buttonTextCancel:k="Cancel"}=t,{buttonTextConfirm:L="Confirm"}=t,{buttonTextSubmit:M="Submit"}=t,{regionBackdrop:E=""}=t,{regionHeader:tt="text-2xl font-bold"}=t,{regionBody:it="max-h-[200px] overflow-hidden"}=t,{regionFooter:O="flex justify-end space-x-2"}=t,{transitions:W=!c}=t,{transitionIn:rt=os}=t,{transitionInParams:Z={duration:150,opacity:0,x:0,y:100}}=t,{transitionOut:$=os}=t,{transitionOutParams:ut={duration:150,opacity:0,x:0,y:100}}=t,H;const K={buttonTextCancel:k,buttonTextConfirm:L,buttonTextSubmit:M};let gt,ft=!1,St,z,q="overflow-y-hidden";const _t=Ua();yt(i,_t,R=>e(14,l=R));function wt(R){R[0].type==="prompt"&&e(15,H=R[0].value),e(0,k=R[0].buttonTextCancel||K.buttonTextCancel),e(1,L=R[0].buttonTextConfirm||K.buttonTextConfirm),e(2,M=R[0].buttonTextSubmit||K.buttonTextSubmit),e(16,gt=typeof R[0].component=="string"?u[R[0].component]:R[0].component)}function qt(R){var Te;let jt=R==null?void 0:R.clientHeight;jt||(jt=(Te=R==null?void 0:R.firstChild)==null?void 0:Te.clientHeight),jt&&(jt>z?e(18,q="overflow-y-auto"):e(18,q="overflow-y-hidden"))}function Lt(R){if(!(R.target instanceof Element))return;const jt=R.target.classList;(jt.contains("modal-backdrop")||jt.contains("modal-transition"))&&(ft=!0)}function Et(R){if(!(R.target instanceof Element))return;const jt=R.target.classList;(jt.contains("modal-backdrop")||jt.contains("modal-transition"))&&ft&&(l[0].response&&l[0].response(void 0),_t.close(),h("backdrop",R)),ft=!1}function D(){l[0].response&&l[0].response(!1),_t.close()}function $t(){l[0].response&&l[0].response(!0),_t.close()}function et(R){R.preventDefault(),l[0].response&&(l[0].valueAttr!==void 0&&"type"in l[0].valueAttr&&l[0].valueAttr.type==="number"?l[0].response(parseInt(H)):l[0].response(H)),_t.close()}function zt(R){l.length&&R.code==="Escape"&&D()}function It(R){Ze.call(this,i,R)}function ne(R){Ze.call(this,i,R)}function he(){e(17,z=window.innerHeight)}function ae(){H=this.value,e(15,H)}function Pe(R){ri[R?"unshift":"push"](()=>{St=R,e(13,St)})}function Ge(R){ri[R?"unshift":"push"](()=>{St=R,e(13,St)})}return i.$$set=R=>{e(54,t=we(we({},t),ns(R))),"components"in R&&e(30,u=R.components),"position"in R&&e(31,f=R.position),"background"in R&&e(32,d=R.background),"width"in R&&e(33,m=R.width),"height"in R&&e(34,g=R.height),"padding"in R&&e(35,p=R.padding),"spacing"in R&&e(36,_=R.spacing),"rounded"in R&&e(37,y=R.rounded),"shadow"in R&&e(38,w=R.shadow),"zIndex"in R&&e(39,b=R.zIndex),"buttonNeutral"in R&&e(3,v=R.buttonNeutral),"buttonPositive"in R&&e(4,S=R.buttonPositive),"buttonTextCancel"in R&&e(0,k=R.buttonTextCancel),"buttonTextConfirm"in R&&e(1,L=R.buttonTextConfirm),"buttonTextSubmit"in R&&e(2,M=R.buttonTextSubmit),"regionBackdrop"in R&&e(40,E=R.regionBackdrop),"regionHeader"in R&&e(5,tt=R.regionHeader),"regionBody"in R&&e(6,it=R.regionBody),"regionFooter"in R&&e(7,O=R.regionFooter),"transitions"in R&&e(8,W=R.transitions),"transitionIn"in R&&e(9,rt=R.transitionIn),"transitionInParams"in R&&e(10,Z=R.transitionInParams),"transitionOut"in R&&e(11,$=R.transitionOut),"transitionOutParams"in R&&e(12,ut=R.transitionOutParams)},i.$$.update=()=>{var R,jt,Te;i.$$.dirty[0]&16384&&l.length&&wt(l),i.$$.dirty[0]&8192&&qt(St),i.$$.dirty[0]&16384|i.$$.dirty[1]&1&&e(41,s=((R=l[0])==null?void 0:R.position)??f),e(22,r=`${Lh} ${E} ${b} ${t.class??""} ${((jt=l[0])==null?void 0:jt.backdropClasses)??""}`),i.$$.dirty[1]&1024&&e(21,n=`${Mh} ${s??""}`),i.$$.dirty[0]&16384|i.$$.dirty[1]&254&&e(20,a=`${Ph} ${d} ${m} ${g} ${p} ${_} ${y} ${w} ${((Te=l[0])==null?void 0:Te.modalClasses)??""}`),i.$$.dirty[0]&255|i.$$.dirty[1]&767&&e(19,o={position:f,background:d,width:m,height:g,padding:p,spacing:_,rounded:y,shadow:w,buttonNeutral:v,buttonPositive:S,buttonTextCancel:k,buttonTextConfirm:L,buttonTextSubmit:M,regionBackdrop:E,regionHeader:tt,regionBody:it,regionFooter:O,onClose:D})},t=ns(t),[k,L,M,v,S,tt,it,O,W,rt,Z,$,ut,St,l,H,gt,z,q,o,a,n,r,_t,Lt,Et,D,$t,et,zt,u,f,d,m,g,p,_,y,w,b,E,s,It,ne,he,ae,Pe,Ge]}class Ih extends Ft{constructor(t){super(),Rt(this,t,Eh,Sh,Tt,{components:30,position:31,background:32,width:33,height:34,padding:35,spacing:36,rounded:37,shadow:38,zIndex:39,buttonNeutral:3,buttonPositive:4,buttonTextCancel:0,buttonTextConfirm:1,buttonTextSubmit:2,regionBackdrop:40,regionHeader:5,regionBody:6,regionFooter:7,transitions:8,transitionIn:9,transitionInParams:10,transitionOut:11,transitionOutParams:12},null,[-1,-1])}}const{window:Bh}=Za;function rn(i){let t,e,s,r,n,a,o,l,c,h,u;const f=i[32].default,d=Da(f,i,i[31],null);return{c(){t=P("div"),e=P("div"),d&&d.c(),this.h()},l(m){t=T(m,"DIV",{class:!0,"data-testid":!0});var g=I(t);e=T(g,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-modal":!0,"aria-labelledby":!0,"aria-describedby":!0});var p=I(e);d&&d.l(p),p.forEach(C),g.forEach(C),this.h()},h(){x(e,"class",s="drawer "+i[8]),x(e,"data-testid","drawer"),x(e,"role","dialog"),x(e,"aria-modal","true"),x(e,"aria-labelledby",i[0]),x(e,"aria-describedby",i[1]),x(t,"class",a="drawer-backdrop "+i[9]),x(t,"data-testid","drawer-backdrop")},m(m,g){G(m,t,g),A(t,e),d&&d.m(e,null),i[36](e),i[37](t),c=!0,h||(u=[bt(t,"mousedown",i[12]),bt(t,"touchstart",i[33],{passive:!0}),bt(t,"touchend",i[34],{passive:!0}),bt(t,"keypress",i[35]),vr(Qa.call(null,t,!0))],h=!0)},p(m,g){i=m,d&&d.p&&(!c||g[1]&1)&&Va(d,f,i,i[31],c?Ha(f,i[31],g,null):Ga(i[31]),null),(!c||g[0]&256&&s!==(s="drawer "+i[8]))&&x(e,"class",s),(!c||g[0]&1)&&x(e,"aria-labelledby",i[0]),(!c||g[0]&2)&&x(e,"aria-describedby",i[1]),(!c||g[0]&512&&a!==(a="drawer-backdrop "+i[9]))&&x(t,"class",a)},i(m){c||(B(d,m),m&&rs(()=>{c&&(n&&n.end(1),r=ai(e,Le,{transition:os,params:{x:i[7].x,y:i[7].y,duration:i[2],opacity:i[3]?void 0:1},enabled:i[4]}),r.start())}),m&&rs(()=>{c&&(l&&l.end(1),o=ai(t,Le,{transition:hi,params:{duration:i[2]},enabled:i[4]&&i[3]}),o.start())}),c=!0)},o(m){V(d,m),r&&r.invalidate(),m&&(n=oi(e,Le,{transition:os,params:{x:i[7].x,y:i[7].y,duration:i[2],opacity:i[3]?void 0:1,easing:Ql},enabled:i[4]})),o&&o.invalidate(),m&&(l=oi(t,Le,{transition:hi,params:{duration:i[2]},enabled:i[4]&&i[3]})),c=!1},d(m){m&&C(t),d&&d.d(m),i[36](null),m&&n&&n.end(),i[37](null),m&&l&&l.end(),h=!1,Re(u)}}}function Fh(i){let t,e,s,r,n=i[10].open===!0&&rn(i);return{c(){n&&n.c(),t=Wt()},l(a){n&&n.l(a),t=Wt()},m(a,o){n&&n.m(a,o),G(a,t,o),e=!0,s||(r=bt(Bh,"keydown",i[13]),s=!0)},p(a,o){a[10].open===!0?n?(n.p(a,o),o[0]&1024&&B(n,1)):(n=rn(a),n.c(),B(n,1),n.m(t.parentNode,t)):n&&(Mt(),V(n,1,1,()=>{n=null}),Pt())},i(a){e||(B(n),e=!0)},o(a){V(n),e=!1},d(a){a&&C(t),n&&n.d(a),s=!1,r()}}}const Rh="fixed top-0 left-0 right-0 bottom-0 flex",Dh="overflow-y-auto transition-transform";function Vh(i,t,e){let s,r,n,a,o,l,c,h;yt(i,Cr,D=>e(38,h=D));let{$$slots:u={},$$scope:f}=t;const d=Ds();let{position:m="left"}=t,{bgDrawer:g="bg-surface-100-800-token"}=t,{border:p=""}=t,{rounded:_=""}=t,{shadow:y="shadow-xl"}=t,{width:w=""}=t,{height:b=""}=t,{bgBackdrop:v="bg-surface-backdrop-token"}=t,{blur:S=""}=t,{padding:k=""}=t,{zIndex:L="z-40"}=t,{regionBackdrop:M=""}=t,{regionDrawer:E=""}=t,{labelledby:tt=""}=t,{describedby:it=""}=t,{duration:O=200}=t,{transitions:W=!h}=t,{opacityTransition:rt=!0}=t;const Z={top:{alignment:"items-start",width:"w-full",height:"h-[50%]",rounded:"rounded-bl-container-token rounded-br-container-token"},bottom:{alignment:"items-end",width:"w-full",height:" h-[50%]",rounded:"rounded-tl-container-token rounded-tr-container-token"},left:{alignment:"justify-start",width:"w-[90%]",height:"h-full",rounded:"rounded-tr-container-token rounded-br-container-token"},right:{alignment:"justify-end",width:"w-[90%]",height:"h-full",rounded:"rounded-tl-container-token rounded-bl-container-token"}};let $,ut,H={x:0,y:0};const K=xe();yt(i,K,D=>e(10,c=D));const gt={position:m,bgBackdrop:v,blur:S,padding:k,bgDrawer:g,border:p,rounded:_,shadow:y,width:w,height:b,opacityTransition:rt,regionBackdrop:M,regionDrawer:E,labelledby:tt,describedby:it,duration:O};function ft(D){e(14,m=D.position||gt.position),e(21,v=D.bgBackdrop||gt.bgBackdrop),e(22,S=D.blur||gt.blur),e(23,k=D.padding||gt.padding),e(15,g=D.bgDrawer||gt.bgDrawer),e(16,p=D.border||gt.border),e(17,_=D.rounded||gt.rounded),e(18,y=D.shadow||gt.shadow),e(19,w=D.width||gt.width),e(20,b=D.height||gt.height),e(24,M=D.regionBackdrop||gt.regionBackdrop),e(25,E=D.regionDrawer||gt.regionDrawer),e(0,tt=D.labelledby||gt.labelledby),e(1,it=D.describedby||gt.describedby),e(3,rt=D.opacityTransition||gt.opacityTransition),e(2,O=D.duration||gt.duration)}function St(){switch(m){case"top":e(7,H={x:0,y:-window.innerWidth});break;case"bottom":e(7,H={x:0,y:window.innerWidth});break;case"left":e(7,H={x:-window.innerHeight,y:0});break;case"right":e(7,H={x:window.innerHeight,y:0});break;default:console.error("Error: unknown position property value.");break}}function z(D){D.target===$?(K.close(),d("backdrop",D)):d("drawer",D)}function q(D){c&&D.code==="Escape"&&K.close()}K.subscribe(D=>{D.open===!0&&(ft(D),St())});function _t(D){Ze.call(this,i,D)}function wt(D){Ze.call(this,i,D)}function qt(D){Ze.call(this,i,D)}function Lt(D){ri[D?"unshift":"push"](()=>{ut=D,e(6,ut)})}function Et(D){ri[D?"unshift":"push"](()=>{$=D,e(5,$)})}return i.$$set=D=>{e(44,t=we(we({},t),ns(D))),"position"in D&&e(14,m=D.position),"bgDrawer"in D&&e(15,g=D.bgDrawer),"border"in D&&e(16,p=D.border),"rounded"in D&&e(17,_=D.rounded),"shadow"in D&&e(18,y=D.shadow),"width"in D&&e(19,w=D.width),"height"in D&&e(20,b=D.height),"bgBackdrop"in D&&e(21,v=D.bgBackdrop),"blur"in D&&e(22,S=D.blur),"padding"in D&&e(23,k=D.padding),"zIndex"in D&&e(26,L=D.zIndex),"regionBackdrop"in D&&e(24,M=D.regionBackdrop),"regionDrawer"in D&&e(25,E=D.regionDrawer),"labelledby"in D&&e(0,tt=D.labelledby),"describedby"in D&&e(1,it=D.describedby),"duration"in D&&e(2,O=D.duration),"transitions"in D&&e(4,W=D.transitions),"opacityTransition"in D&&e(3,rt=D.opacityTransition),"$$scope"in D&&e(31,f=D.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&e(30,s=Z[m].alignment),i.$$.dirty[0]&540672&&e(29,r=w||Z[m].width),i.$$.dirty[0]&1064960&&e(28,n=b||Z[m].height),i.$$.dirty[0]&147456&&e(27,a=_||Z[m].rounded),e(9,o=`${Rh} ${v} ${k} ${S} ${s} ${M} ${L} ${t.class??""}`),i.$$.dirty[0]&973570048&&e(8,l=`${Dh} ${g} ${p} ${_} ${y} ${r} ${n} ${a} ${E}`)},t=ns(t),[tt,it,O,rt,W,$,ut,H,l,o,c,K,z,q,m,g,p,_,y,w,b,v,S,k,M,E,L,a,n,r,s,f,u,_t,wt,qt,Lt,Et]}class Gh extends Ft{constructor(t){super(),Rt(this,t,Vh,Fh,Tt,{position:14,bgDrawer:15,border:16,rounded:17,shadow:18,width:19,height:20,bgBackdrop:21,blur:22,padding:23,zIndex:26,regionBackdrop:24,regionDrawer:25,labelledby:0,describedby:1,duration:2,transitions:4,opacityTransition:3},null,[-1,-1])}}function nn(i,t,e){const s=i.slice();return s[38]=t[e],s[40]=e,s}function an(i){let t,e,s=[],r=new Map,n,a,o,l=fe(i[9]);const c=h=>h[38];for(let h=0;h<l.length;h+=1){let u=nn(i,l,h),f=c(u);r.set(f,s[h]=cn(f,u))}return{c(){t=P("div"),e=P("div");for(let h=0;h<s.length;h+=1)s[h].c();this.h()},l(h){t=T(h,"DIV",{class:!0,"data-testid":!0});var u=I(t);e=T(u,"DIV",{class:!0});var f=I(e);for(let d=0;d<s.length;d+=1)s[d].l(f);f.forEach(C),u.forEach(C),this.h()},h(){x(e,"class",n="snackbar "+i[13]),x(t,"class",a="snackbar-wrapper "+i[14]),x(t,"data-testid","snackbar-wrapper")},m(h,u){G(h,t,u),A(t,e);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);o=!0},p(h,u){if(u[0]&499615){l=fe(h[9]),Mt();for(let f=0;f<s.length;f+=1)s[f].r();s=Jl(s,u,c,1,h,l,r,e,th,cn,null,nn);for(let f=0;f<s.length;f+=1)s[f].a();Pt()}(!o||u[0]&8192&&n!==(n="snackbar "+h[13]))&&x(e,"class",n),(!o||u[0]&16384&&a!==(a="snackbar-wrapper "+h[14]))&&x(t,"class",a)},i(h){if(!o){for(let u=0;u<l.length;u+=1)B(s[u]);o=!0}},o(h){for(let u=0;u<s.length;u+=1)V(s[u]);o=!1},d(h){h&&C(t);for(let u=0;u<s.length;u+=1)s[u].d()}}}function on(i){let t,e,s=i[38].action&&ln(i),r=!i[38].hideDismiss&&hn(i);return{c(){t=P("div"),s&&s.c(),e=N(),r&&r.c(),this.h()},l(n){t=T(n,"DIV",{class:!0});var a=I(t);s&&s.l(a),e=j(a),r&&r.l(a),a.forEach(C),this.h()},h(){x(t,"class","toast-actions "+Oh)},m(n,a){G(n,t,a),s&&s.m(t,null),A(t,e),r&&r.m(t,null)},p(n,a){n[38].action?s?s.p(n,a):(s=ln(n),s.c(),s.m(t,e)):s&&(s.d(1),s=null),n[38].hideDismiss?r&&(r.d(1),r=null):r?r.p(n,a):(r=hn(n),r.c(),r.m(t,null))},d(n){n&&C(t),s&&s.d(),r&&r.d()}}}function ln(i){let t,e,s=i[38].action.label+"",r,n;function a(){return i[31](i[40])}return{c(){t=P("button"),e=new Vs(!1),this.h()},l(o){t=T(o,"BUTTON",{class:!0});var l=I(t);e=Gs(l,!1),l.forEach(C),this.h()},h(){e.a=null,x(t,"class",i[1])},m(o,l){G(o,t,l),e.m(s,t),r||(n=bt(t,"click",a),r=!0)},p(o,l){i=o,l[0]&512&&s!==(s=i[38].action.label+"")&&e.p(s),l[0]&2&&x(t,"class",i[1])},d(o){o&&C(t),r=!1,n()}}}function hn(i){let t,e,s,r;function n(){return i[32](i[38])}return{c(){t=P("button"),e=at(i[3]),this.h()},l(a){t=T(a,"BUTTON",{class:!0,"aria-label":!0});var o=I(t);e=ot(o,i[3]),o.forEach(C),this.h()},h(){x(t,"class",i[2]),x(t,"aria-label","Dismiss toast")},m(a,o){G(a,t,o),A(t,e),s||(r=bt(t,"click",n),s=!0)},p(a,o){i=a,o[0]&8&&mt(e,i[3]),o[0]&4&&x(t,"class",i[2])},d(a){a&&C(t),s=!1,r()}}}function cn(i,t){let e,s,r,n,a=t[38].message+"",o,l,c,h,u,f,d,m=dt,g,p,_,y=(t[38].action||!t[38].hideDismiss)&&on(t);function w(){return t[34](t[40])}function b(){return t[35](t[40])}return{key:i,first:null,c(){e=P("div"),s=P("div"),r=P("div"),n=new Vs(!1),o=N(),y&&y.c(),c=N(),this.h()},l(v){e=T(v,"DIV",{role:!0,"aria-live":!0});var S=I(e);s=T(S,"DIV",{class:!0,"data-testid":!0});var k=I(s);r=T(k,"DIV",{class:!0});var L=I(r);n=Gs(L,!1),L.forEach(C),o=j(k),y&&y.l(k),k.forEach(C),c=j(S),S.forEach(C),this.h()},h(){n.a=null,x(r,"class","text-base"),x(s,"class",l="toast "+t[12]+" "+(t[38].background??t[0])+" "+(t[38].classes??"")),x(s,"data-testid","toast"),x(e,"role",h=t[38].hideDismiss?"alert":"alertdialog"),x(e,"aria-live","polite"),this.first=e},m(v,S){G(v,e,S),A(e,s),A(s,r),n.m(a,r),A(s,o),y&&y.m(s,null),A(e,c),g=!0,p||(_=[bt(e,"outroend",t[33]),bt(e,"mouseenter",w),bt(e,"mouseleave",b)],p=!0)},p(v,S){t=v,(!g||S[0]&512)&&a!==(a=t[38].message+"")&&n.p(a),t[38].action||!t[38].hideDismiss?y?y.p(t,S):(y=on(t),y.c(),y.m(s,null)):y&&(y.d(1),y=null),(!g||S[0]&4609&&l!==(l="toast "+t[12]+" "+(t[38].background??t[0])+" "+(t[38].classes??"")))&&x(s,"class",l),(!g||S[0]&512&&h!==(h=t[38].hideDismiss?"alert":"alertdialog"))&&x(e,"role",h)},r(){d=e.getBoundingClientRect()},f(){ch(e),m(),Ka(e,d)},a(){m(),m=hh(e,d,_h,{duration:t[4]?250:0})},i(v){g||(rs(()=>{g&&(f&&f.end(1),u=ai(e,Le,{transition:t[5],params:{x:t[10].x,y:t[10].y,...t[6]},enabled:t[4]}),u.start())}),g=!0)},o(v){u&&u.invalidate(),f=oi(e,Le,{transition:t[7],params:{x:t[10].x,y:t[10].y,...t[8]},enabled:t[4]}),g=!1},d(v){v&&C(e),y&&y.d(),v&&f&&f.end(),p=!1,Re(_)}}}function Hh(i){let t,e,s=(i[9].length>0||i[11])&&an(i);return{c(){s&&s.c(),t=Wt()},l(r){s&&s.l(r),t=Wt()},m(r,n){s&&s.m(r,n),G(r,t,n),e=!0},p(r,n){r[9].length>0||r[11]?s?(s.p(r,n),n[0]&2560&&B(s,1)):(s=an(r),s.c(),B(s,1),s.m(t.parentNode,t)):s&&(Mt(),V(s,1,1,()=>{s=null}),Pt())},i(r){e||(B(s),e=!0)},o(r){V(s),e=!1},d(r){r&&C(t),s&&s.d(r)}}}const Wh="flex fixed top-0 left-0 right-0 bottom-0 pointer-events-none",zh="flex flex-col gap-y-2",Uh="flex justify-between items-center pointer-events-auto",Oh="flex items-center space-x-2";function Nh(i,t,e){let s,r,n,a,o,l;yt(i,Cr,z=>e(36,l=z));const c=dh();yt(i,c,z=>e(30,o=z));let{position:h="b"}=t,{max:u=3}=t,{background:f="variant-filled-secondary"}=t,{width:d="max-w-[640px]"}=t,{color:m=""}=t,{padding:g="p-4"}=t,{spacing:p="space-x-4"}=t,{rounded:_="rounded-container-token"}=t,{shadow:y="shadow-lg"}=t,{zIndex:w="z-[888]"}=t,{buttonAction:b="btn variant-filled"}=t,{buttonDismiss:v="btn-icon btn-icon-sm variant-filled"}=t,{buttonDismissLabel:S="âœ•"}=t,{transitions:k=!l}=t,{transitionIn:L=os}=t,{transitionInParams:M={duration:250}}=t,{transitionOut:E=os}=t,{transitionOutParams:tt={duration:250}}=t,it,O,W={x:0,y:0};switch(h){case"t":it="justify-center items-start",O="items-center",W={x:0,y:-100};break;case"b":it="justify-center items-end",O="items-center",W={x:0,y:100};break;case"l":it="justify-start items-center",O="items-start",W={x:-100,y:0};break;case"r":it="justify-end items-center",O="items-end",W={x:100,y:0};break;case"tl":it="justify-start items-start",O="items-start",W={x:-100,y:0};break;case"tr":it="justify-end items-start",O="items-end",W={x:100,y:0};break;case"bl":it="justify-start items-end",O="items-start",W={x:-100,y:0};break;case"br":it="justify-end items-end",O="items-end",W={x:100,y:0};break}function rt(z){var q,_t;(_t=(q=o[z])==null?void 0:q.action)==null||_t.response(),c.close(o[z].id)}function Z(z){var q;(q=o[z])!=null&&q.hoverable&&(c.freeze(z),e(13,r+=" scale-[105%]"))}function $(z){var q;(q=o[z])!=null&&q.hoverable&&(c.unfreeze(z),e(13,r=r.replace(" scale-[105%]","")))}let ut=!1;const H=z=>rt(z),K=z=>c.close(z.id),gt=()=>{a.length===0&&e(11,ut=!1)},ft=z=>Z(z),St=z=>$(z);return i.$$set=z=>{e(37,t=we(we({},t),ns(z))),"position"in z&&e(19,h=z.position),"max"in z&&e(20,u=z.max),"background"in z&&e(0,f=z.background),"width"in z&&e(21,d=z.width),"color"in z&&e(22,m=z.color),"padding"in z&&e(23,g=z.padding),"spacing"in z&&e(24,p=z.spacing),"rounded"in z&&e(25,_=z.rounded),"shadow"in z&&e(26,y=z.shadow),"zIndex"in z&&e(27,w=z.zIndex),"buttonAction"in z&&e(1,b=z.buttonAction),"buttonDismiss"in z&&e(2,v=z.buttonDismiss),"buttonDismissLabel"in z&&e(3,S=z.buttonDismissLabel),"transitions"in z&&e(4,k=z.transitions),"transitionIn"in z&&e(5,L=z.transitionIn),"transitionInParams"in z&&e(6,M=z.transitionInParams),"transitionOut"in z&&e(7,E=z.transitionOut),"transitionOutParams"in z&&e(8,tt=z.transitionOutParams)},i.$$.update=()=>{e(14,s=`${Wh} ${it} ${w} ${t.class||""}`),i.$$.dirty[0]&545259520&&e(13,r=`${zh} ${O} ${g}`),i.$$.dirty[0]&132120576&&e(12,n=`${Uh} ${d} ${m} ${g} ${p} ${_} ${y}`),i.$$.dirty[0]&1074790400&&e(9,a=Array.from(o).slice(0,u)),i.$$.dirty[0]&512&&a.length&&e(11,ut=!0)},t=ns(t),[f,b,v,S,k,L,M,E,tt,a,W,ut,n,r,s,c,rt,Z,$,h,u,d,m,g,p,_,y,w,it,O,o,H,K,gt,ft,St]}class jh extends Ft{constructor(t){super(),Rt(this,t,Nh,Hh,Tt,{position:19,max:20,background:0,width:21,color:22,padding:23,spacing:24,rounded:25,shadow:26,zIndex:27,buttonAction:1,buttonDismiss:2,buttonDismissLabel:3,transitions:4,transitionIn:5,transitionInParams:6,transitionOut:7,transitionOutParams:8},null,[-1,-1])}}function Xh(i){let t,e,s,r,n;return{c(){t=Qt("svg"),e=Qt("g"),s=Qt("g"),r=Qt("g"),n=Qt("path"),this.h()},l(a){t=Jt(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=I(t);e=Jt(o,"g",{id:!0});var l=I(e);s=Jt(l,"g",{id:!0});var c=I(s);r=Jt(c,"g",{id:!0});var h=I(r);n=Jt(h,"path",{id:!0,d:!0,fill:!0}),I(n).forEach(C),h.forEach(C),c.forEach(C),l.forEach(C),o.forEach(C),this.h()},h(){x(n,"id","_12.Play"),x(n,"d","M3.25708 13.1722V6.39662C3.25708 3.58942 6.25502 1.8334 8.65015 3.23903L14.4411 6.62885L20.232 10.0187C22.6311 11.4202 22.6311 14.9323 20.232 16.3338L14.4411 19.7237L8.65015 23.1135C6.25502 24.511 3.25708 22.759 3.25708 19.9518V13.1722Z"),x(n,"fill",i[0]),x(r,"id","Layer_1-2"),x(s,"id","Layer_2_00000070827265553928813150000015508787529661124756_"),x(e,"id","fi_9073187"),x(t,"width","26"),x(t,"height","26"),x(t,"viewBox","0 0 26 26"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(a,o){G(a,t,o),A(t,e),A(e,s),A(s,r),A(r,n)},p(a,[o]){o&1&&x(n,"fill",a[0])},i:dt,o:dt,d(a){a&&C(t)}}}function Yh(i,t,e){let{fill:s="#FFFFFF99"}=t;return i.$$set=r=>{"fill"in r&&e(0,s=r.fill)},[s]}class qh extends Ft{constructor(t){super(),Rt(this,t,Yh,Xh,Tt,{fill:0})}}function Zh(i){let t,e,s,r,n;return{c(){t=Qt("svg"),e=Qt("path"),s=Qt("path"),r=Qt("path"),n=Qt("path"),this.h()},l(a){t=Jt(a,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var o=I(t);e=Jt(o,"path",{d:!0,fill:!0}),I(e).forEach(C),s=Jt(o,"path",{d:!0,fill:!0}),I(s).forEach(C),r=Jt(o,"path",{d:!0,fill:!0}),I(r).forEach(C),n=Jt(o,"path",{d:!0,fill:!0}),I(n).forEach(C),o.forEach(C),this.h()},h(){x(e,"d","M8.64793 11.4216C9.47687 11.4216 10.2872 11.1746 10.9764 10.7119C11.6656 10.2492 12.2028 9.59151 12.52 8.82204C12.8372 8.05258 12.9201 7.20589 12.7584 6.38905C12.5966 5.57221 12.1974 4.82192 11.6112 4.23306C11.025 3.6442 10.2781 3.24321 9.46511 3.08082C8.65208 2.91843 7.80939 3.00192 7.0436 3.32074C6.27781 3.63956 5.62331 4.17939 5.16289 4.87195C4.70246 5.56451 4.45679 6.3787 4.45693 7.21154C4.4581 8.32789 4.90005 9.39817 5.68578 10.1875C6.47151 10.9768 7.53684 11.4206 8.64793 11.4216Z"),x(e,"fill",i[0]),x(s,"d","M14.1303 14.9C13.0683 13.8056 11.7057 13.0541 10.2166 12.7414C8.72741 12.4288 7.1793 12.5693 5.76998 13.1449C4.36067 13.7206 3.15413 14.7052 2.3045 15.9732C1.45486 17.2411 1.00069 18.7347 1 20.2632C1 20.4586 1.07726 20.646 1.21479 20.7842C1.35232 20.9224 1.53884 21 1.73333 21H15.564C15.7585 21 15.945 20.9224 16.0825 20.7842C16.2201 20.646 16.2973 20.4586 16.2973 20.2632C16.3002 19.4819 16.1801 18.7051 15.9417 17.9614C15.5866 16.8118 14.9659 15.7627 14.1303 14.9Z"),x(s,"fill",i[0]),x(r,"d","M17.5 11.79C19.2213 11.79 20.6167 10.388 20.6167 8.65862C20.6167 6.9292 19.2213 5.52722 17.5 5.52722C15.7787 5.52722 14.3833 6.9292 14.3833 8.65862C14.3833 10.388 15.7787 11.79 17.5 11.79Z"),x(r,"fill",i[0]),x(n,"d","M17.5 12.6521C16.517 12.6558 15.5531 12.9248 14.7089 13.4309C14.8681 13.5738 15.0287 13.7145 15.179 13.8693C16.1775 14.9004 16.9193 16.1542 17.3438 17.5282C17.4892 17.9806 17.5964 18.4444 17.6643 18.9149H22.2667C22.4612 18.9149 22.6477 18.8372 22.7852 18.6991C22.9227 18.5609 23 18.3735 23 18.1781C22.9984 16.713 22.4185 15.3083 21.3874 14.2723C20.3563 13.2363 18.9582 12.6536 17.5 12.6521Z"),x(n,"fill",i[0]),x(t,"width","24"),x(t,"height","24"),x(t,"viewBox","0 0 24 24"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(a,o){G(a,t,o),A(t,e),A(t,s),A(t,r),A(t,n)},p(a,[o]){o&1&&x(e,"fill",a[0]),o&1&&x(s,"fill",a[0]),o&1&&x(r,"fill",a[0]),o&1&&x(n,"fill",a[0])},i:dt,o:dt,d(a){a&&C(t)}}}function Kh(i,t,e){let{fill:s="#FFFFFF99"}=t;return i.$$set=r=>{"fill"in r&&e(0,s=r.fill)},[s]}class $h extends Ft{constructor(t){super(),Rt(this,t,Kh,Zh,Tt,{fill:0})}}function Qh(i){let t,e;return{c(){t=Qt("svg"),e=Qt("path"),this.h()},l(s){t=Jt(s,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var r=I(t);e=Jt(r,"path",{d:!0,fill:!0}),I(e).forEach(C),r.forEach(C),this.h()},h(){x(e,"d","M18 4.8V10.2H22.2C23.175 10.2 24 11.025 24 12V20.4C24 21.4125 23.175 22.2 22.2 22.2H16.2H12.6H11.4H1.8C0.7875 22.2 0 21.4125 0 20.4V12V8.4C0 7.425 0.7875 6.6 1.8 6.6H2.4V3.9C2.4 3.4125 2.775 3 3.3 3C3.7875 3 4.2 3.4125 4.2 3.9V6.6H6.6V3.9C6.6 3.4125 6.975 3 7.5 3C7.9875 3 8.4 3.4125 8.4 3.9V6.6H10.8V4.8C10.8 3.825 11.5875 3 12.6 3H16.2C17.175 3 18 3.825 18 4.8ZM21.6 16.8C21.6 16.5 21.3 16.2 21 16.2H19.8C19.4625 16.2 19.2 16.5 19.2 16.8V18C19.2 18.3375 19.4625 18.6 19.8 18.6H21C21.3 18.6 21.6 18.3375 21.6 18V16.8ZM9 18.6C9.3 18.6 9.6 18.3375 9.6 18V16.8C9.6 16.5 9.3 16.2 9 16.2H7.8C7.4625 16.2 7.2 16.5 7.2 16.8V18C7.2 18.3375 7.4625 18.6 7.8 18.6H9ZM4.8 18V16.8C4.8 16.5 4.5 16.2 4.2 16.2H3C2.6625 16.2 2.4 16.5 2.4 16.8V18C2.4 18.3375 2.6625 18.6 3 18.6H4.2C4.5 18.6 4.8 18.3375 4.8 18ZM21 12.6H19.8C19.4625 12.6 19.2 12.9 19.2 13.2V14.4C19.2 14.7375 19.4625 15 19.8 15H21C21.3 15 21.6 14.7375 21.6 14.4V13.2C21.6 12.9 21.3 12.6 21 12.6ZM9.6 9.6C9.6 9.3 9.3 9 9 9H7.8C7.4625 9 7.2 9.3 7.2 9.6V10.8C7.2 11.1375 7.4625 11.4 7.8 11.4H9C9.3 11.4 9.6 11.1375 9.6 10.8V9.6ZM4.2 9H3C2.6625 9 2.4 9.3 2.4 9.6V10.8C2.4 11.1375 2.6625 11.4 3 11.4H4.2C4.5 11.4 4.8 11.1375 4.8 10.8V9.6C4.8 9.3 4.5 9 4.2 9ZM9.6 14.4V13.2C9.6 12.9 9.3 12.6 9 12.6H7.8C7.4625 12.6 7.2 12.9 7.2 13.2V14.4C7.2 14.7375 7.4625 15 7.8 15H9C9.3 15 9.6 14.7375 9.6 14.4ZM4.2 15C4.5 15 4.8 14.7375 4.8 14.4V13.2C4.8 12.9 4.5 12.6 4.2 12.6H3C2.6625 12.6 2.4 12.9 2.4 13.2V14.4C2.4 14.7375 2.6625 15 3 15H4.2ZM15.6 13.2C15.6 12.9 15.3 12.6 15 12.6H13.8C13.4625 12.6 13.2 12.9 13.2 13.2V14.4C13.2 14.7375 13.4625 15 13.8 15H15C15.3 15 15.6 14.7375 15.6 14.4V13.2ZM15 5.4H13.8C13.4625 5.4 13.2 5.7 13.2 6V7.2C13.2 7.5375 13.4625 7.8 13.8 7.8H15C15.3 7.8 15.6 7.5375 15.6 7.2V6C15.6 5.7 15.3 5.4 15 5.4ZM15.6 9.6C15.6 9.3 15.3 9 15 9H13.8C13.4625 9 13.2 9.3 13.2 9.6V10.8C13.2 11.1375 13.4625 11.4 13.8 11.4H15C15.3 11.4 15.6 11.1375 15.6 10.8V9.6Z"),x(e,"fill",i[0]),x(t,"width","24"),x(t,"height","24"),x(t,"viewBox","0 0 24 24"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(s,r){G(s,t,r),A(t,e)},p(s,[r]){r&1&&x(e,"fill",s[0])},i:dt,o:dt,d(s){s&&C(t)}}}function Jh(i,t,e){let{fill:s="#FFFFFF99"}=t;return i.$$set=r=>{"fill"in r&&e(0,s=r.fill)},[s]}class tc extends Ft{constructor(t){super(),Rt(this,t,Jh,Qh,Tt,{fill:0})}}function ec(i){let t,e,s;return{c(){t=Qt("svg"),e=Qt("path"),s=Qt("path"),this.h()},l(r){t=Jt(r,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var n=I(t);e=Jt(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),I(e).forEach(C),s=Jt(n,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),I(s).forEach(C),n.forEach(C),this.h()},h(){x(e,"fill-rule","evenodd"),x(e,"clip-rule","evenodd"),x(e,"d","M14.2219 9.65934C14.1945 9.62767 14.1469 9.6245 14.1163 9.65195C14.0857 9.6794 14.0826 9.72796 14.1089 9.75963L14.925 10.7087C14.8859 10.7119 14.8405 10.715 14.7888 10.7193C14.6157 10.7309 14.3771 10.7414 14.1174 10.7361C13.8566 10.7309 13.5769 10.7108 13.3193 10.6622C13.0606 10.6137 12.8305 10.5366 12.6658 10.4226C12.632 10.3994 12.5856 10.4078 12.5624 10.4427C12.5391 10.4775 12.5476 10.525 12.5824 10.5482C12.7239 10.6464 12.9023 10.7171 13.0944 10.7668C13.0765 10.8597 13.0427 11.0771 13.0849 11.2735C13.2021 11.8203 13.7099 12.1233 14.1839 12.0283C14.8585 11.8932 14.8205 11.0951 14.7951 10.8702H14.8004C14.8891 10.8639 14.9598 10.8575 15.0105 10.8533C15.0358 10.8512 15.0548 10.8491 15.0686 10.848C15.0749 10.848 15.0802 10.847 15.0833 10.8459H15.0876C15.115 10.8428 15.1393 10.8238 15.1488 10.7974C15.1594 10.771 15.1541 10.7414 15.1351 10.7203L14.223 9.65934H14.2219ZM14.4499 11.4603C14.2895 11.5026 14.1216 11.3938 14.0773 11.2196C14.0445 11.094 14.0826 10.9673 14.166 10.8903C14.3021 10.8913 14.4309 10.8903 14.546 10.885C14.5988 10.9283 14.6389 10.9906 14.6579 11.0645C14.7044 11.2408 14.6104 11.4171 14.4499 11.4603Z"),x(e,"fill",i[0]),x(s,"fill-rule","evenodd"),x(s,"clip-rule","evenodd"),x(s,"d","M12 0C5.37239 0 0 5.37239 0 12C0 18.6276 5.37239 24 12 24C18.6276 24 24 18.6276 24 12C24 5.37239 18.6265 0 12 0ZM17.7567 13.7968C18.7891 13.7461 19.3064 13.7883 19.6263 13.9055C19.9335 14.0195 20.0169 14.2022 19.8818 14.464C19.5429 15.128 18.7648 15.5007 17.9678 15.8153C18.047 16.3199 18.0639 17.5307 17.6448 18.3331C17.2183 19.1491 16.4202 20.1045 15.0763 20.2449C14.408 20.3146 13.5318 20.1942 11.5344 19.3455C10.2412 18.7955 8.7981 19.7741 8.34732 20.0813C8.24914 20.1478 8.19741 20.1826 8.2048 20.1636C8.6218 19.052 9.02507 18.2423 9.87807 17.5455C10.5284 17.0145 11.1787 16.9237 11.8965 17.0166C12.0686 17.0388 12.2439 17.0525 12.4191 17.0589C12.3621 16.9522 12.3083 16.8435 12.2586 16.7337C12.114 16.7295 11.963 16.7253 11.8068 16.7189C11.2167 16.6978 10.6973 16.5511 10.1599 16.398L10.105 16.3822C9.70705 16.7759 9.37239 16.9712 9.11586 17.0451C8.96384 17.0884 8.83505 17.0905 8.73476 17.061C8.63552 17.0314 8.56057 16.9681 8.53523 16.8804C8.52151 16.834 8.52679 16.7833 8.5384 16.7358C8.55001 16.6873 8.56902 16.6324 8.59224 16.5764C8.63447 16.4761 8.69464 16.3579 8.75798 16.2312L8.77487 16.1974C8.76326 16.19 8.75165 16.1826 8.73792 16.1752L8.72631 16.1679L8.71681 16.1626L8.70942 16.1584C8.66825 16.133 8.6218 16.1035 8.5669 16.0591C8.35788 16.0391 8.13829 16.0306 7.90499 16.0369C7.63262 16.0443 6.69623 16.3199 6.50726 17.3439C6.42069 17.8063 6.3848 18.2644 6.35102 18.6709C6.29823 19.3317 6.25495 19.8564 6.03114 20.0443C5.8939 20.1594 5.48746 19.6537 5.29005 19.0087C5.21826 18.7754 5.1792 18.5674 5.1507 18.4112C5.11058 18.1948 5.08841 18.0786 5.02507 18.1367C4.25337 18.8324 3.65057 19.2093 3.48905 18.9158C3.3328 18.6329 3.90816 17.3861 4.50779 16.6176C4.78227 16.266 5.05885 16.0296 5.29744 15.8258C5.59409 15.5724 5.83056 15.3698 5.92663 15.0615C6.17683 14.2549 6.48825 13.4822 6.86513 12.7612C6.85036 12.6693 6.84297 12.5753 6.83874 12.4867C6.83135 12.303 6.84297 12.1341 6.8588 12.0296C6.89892 11.7656 6.98337 11.4648 7.30747 11.0467C7.36025 10.9781 7.49644 10.8166 7.67696 10.617C7.66535 10.6118 7.65373 10.6075 7.64212 10.6012C7.4331 10.503 7.27052 10.3478 7.17867 10.1715C7.08683 9.99525 7.06572 9.79467 7.14595 9.61626C7.30852 9.25732 7.79097 9.16337 8.20164 9.35445C8.20903 9.35761 8.21642 9.36184 8.22275 9.365C8.12985 9.10003 8.17313 8.81288 8.37899 8.64503C8.65452 8.42227 9.07152 8.53418 9.31644 8.84455C9.38084 8.92795 9.4294 9.01874 9.46107 9.11269C9.49274 9.09686 9.5223 9.08208 9.55186 9.06941C9.7271 8.9934 9.88335 8.96595 10.0227 9.02085C10.0744 9.04091 10.1188 9.06836 10.1568 9.1053C10.2106 9.07258 10.2644 9.04091 10.3183 9.00924C10.7026 8.78754 11.1755 8.54896 11.6833 8.31987C11.5492 8.10557 11.299 7.81209 10.7976 7.32119C10.6973 7.22301 10.483 7.07099 10.2412 6.90631C10.1705 6.85775 10.0966 6.80813 10.0248 6.75957C9.85484 6.64555 9.6891 6.53365 9.56242 6.44075C9.52864 6.41647 9.49802 6.38902 9.48007 6.35524C9.45896 6.31512 9.45896 6.27078 9.48113 6.23172C9.49907 6.20005 9.52969 6.17683 9.55608 6.15994C9.58353 6.14199 9.61731 6.12615 9.65321 6.10926C9.67643 6.09871 9.70071 6.08815 9.7271 6.07654C9.86223 6.01636 10.029 5.94247 10.1747 5.81789C10.4935 5.54447 10.8219 5.05885 11.015 4.51518C11.2082 3.97044 11.26 3.38137 11.0467 2.8947C11.0055 2.80179 10.9654 2.70995 10.9264 2.62338C10.8704 2.49776 10.8176 2.37952 10.7733 2.27501C10.6994 2.09976 10.6424 1.94774 10.6297 1.84217C10.6234 1.7915 10.6244 1.72816 10.6646 1.68171C10.7089 1.62998 10.7754 1.62893 10.8292 1.64159C10.8852 1.65426 10.9528 1.68382 11.0319 1.72816C11.1122 1.77356 11.2093 1.83584 11.3254 1.91818C12.5395 2.77751 12.7168 4.10135 12.8372 5.08841C12.9712 6.18105 12.8224 7.18606 12.6672 7.90921C12.8889 7.8237 13.1106 7.74241 13.3281 7.66851L13.3481 7.66112C13.2045 7.59673 13.0842 7.47849 13.0198 7.31908C12.8868 6.99182 13.0399 6.61599 13.3618 6.47981C13.3956 6.46609 13.4294 6.45447 13.4632 6.44708L13.2805 2.86091C13.2784 2.81869 13.3101 2.78279 13.3513 2.78068C13.3925 2.77857 13.4273 2.8113 13.4294 2.85247L13.611 6.43125C13.8548 6.43547 14.085 6.58327 14.1842 6.82819C14.2687 7.03616 14.2381 7.26419 14.1219 7.43732C15.8237 7.02138 18.3785 6.89047 19.7646 8.89839C21.1876 10.9623 20.3705 12.2798 19.4384 13.4326C19.4384 13.4326 18.579 13.1676 17.2478 13.4125C16.3083 13.5846 15.2346 14.3405 15.2346 14.3405C15.2346 14.3405 16.8076 13.8443 17.7535 13.7978L17.7567 13.7968Z"),x(s,"fill",i[0]),x(t,"width","24"),x(t,"height","24"),x(t,"viewBox","0 0 24 24"),x(t,"fill","none"),x(t,"xmlns","http://www.w3.org/2000/svg")},m(r,n){G(r,t,n),A(t,e),A(t,s)},p(r,[n]){n&1&&x(e,"fill",r[0]),n&1&&x(s,"fill",r[0])},i:dt,o:dt,d(r){r&&C(t)}}}function sc(i,t,e){let{fill:s="#FFFFFF99"}=t;return i.$$set=r=>{"fill"in r&&e(0,s=r.fill)},[s]}let ic=class extends Ft{constructor(t){super(),Rt(this,t,sc,ec,Tt,{fill:0})}};function un(i){let t,e;return{c(){t=P("p"),e=at(i[1]),this.h()},l(s){t=T(s,"P",{class:!0});var r=I(t);e=ot(r,i[1]),r.forEach(C),this.h()},h(){x(t,"class","tasks-bubble svelte-1b0dbw9")},m(s,r){G(s,t,r),A(t,e)},p(s,r){r&2&&mt(e,s[1])},d(s){s&&C(t)}}}function rc(i){let t,e,s,r=i[1]>0&&un(i);return{c(){r&&r.c(),t=N(),e=Qt("svg"),s=Qt("path"),this.h()},l(n){r&&r.l(n),t=j(n),e=Jt(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var a=I(e);s=Jt(a,"path",{d:!0,fill:!0}),I(s).forEach(C),a.forEach(C),this.h()},h(){x(s,"d","M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.19C2 19.83 4.17 22 7.81 22H16.19C19.83 22 22 19.83 22 16.19V7.81C22 4.17 19.83 2 16.19 2ZM9.97 14.9L7.72 17.15C7.57 17.3 7.38 17.37 7.19 17.37C7 17.37 6.8 17.3 6.66 17.15L5.91 16.4C5.61 16.11 5.61 15.63 5.91 15.34C6.2 15.05 6.67 15.05 6.97 15.34L7.19 15.56L8.91 13.84C9.2 13.55 9.67 13.55 9.97 13.84C10.26 14.13 10.26 14.61 9.97 14.9ZM9.97 7.9L7.72 10.15C7.57 10.3 7.38 10.37 7.19 10.37C7 10.37 6.8 10.3 6.66 10.15L5.91 9.4C5.61 9.11 5.61 8.63 5.91 8.34C6.2 8.05 6.67 8.05 6.97 8.34L7.19 8.56L8.91 6.84C9.2 6.55 9.67 6.55 9.97 6.84C10.26 7.13 10.26 7.61 9.97 7.9ZM17.56 16.62H12.31C11.9 16.62 11.56 16.28 11.56 15.87C11.56 15.46 11.9 15.12 12.31 15.12H17.56C17.98 15.12 18.31 15.46 18.31 15.87C18.31 16.28 17.98 16.62 17.56 16.62ZM17.56 9.62H12.31C11.9 9.62 11.56 9.28 11.56 8.87C11.56 8.46 11.9 8.12 12.31 8.12H17.56C17.98 8.12 18.31 8.46 18.31 8.87C18.31 9.28 17.98 9.62 17.56 9.62Z"),x(s,"fill",i[0]),x(e,"width","24"),x(e,"height","24"),x(e,"viewBox","0 0 24 24"),x(e,"fill","none"),x(e,"xmlns","http://www.w3.org/2000/svg")},m(n,a){r&&r.m(n,a),G(n,t,a),G(n,e,a),A(e,s)},p(n,[a]){n[1]>0?r?r.p(n,a):(r=un(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),a&1&&x(s,"fill",n[0])},i:dt,o:dt,d(n){n&&(C(t),C(e)),r&&r.d(n)}}}function nc(i,t,e){let s,r,{fill:n="#FFFFFF99"}=t;const a=Na();return yt(i,a,o=>e(3,r=o)),i.$$set=o=>{"fill"in o&&e(0,n=o.fill)},i.$$.update=()=>{i.$$.dirty&8&&e(1,s=r.tasks.filter(o=>!o.completed).length)},[n,s,a,r]}class ac extends Ft{constructor(t){super(),Rt(this,t,nc,rc,Tt,{fill:0})}}function dn(i,t,e){const s=i.slice();return s[7]=t[e],s}function fn(i){let t,e="New";return{c(){t=P("p"),t.textContent=e,this.h()},l(s){t=T(s,"P",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-3frq69"&&(t.textContent=e),this.h()},h(){x(t,"class","navbar__pages__item__icon__img__label svelte-17qvtv9"),Se(t,"active",i[0](i[7]))},m(s,r){G(s,t,r)},p(s,r){r&3&&Se(t,"active",s[0](s[7]))},d(s){s&&C(t)}}}function mn(i){let t,e,s,r,n,a,o,l=i[7].name+"",c,h,u,f;var d=i[7].icon;function m(_,y){return{props:{fill:_[0](_[7])?"white":"#FFFFFF99"}}}d&&(r=as(d,m(i)));let g=i[7].isNewLabel&&fn(i);function p(){return i[6](i[7])}return{c(){t=P("li"),e=P("div"),s=P("div"),r&&lt(r.$$.fragment),n=N(),g&&g.c(),a=N(),o=P("p"),c=at(l),this.h()},l(_){t=T(_,"LI",{class:!0});var y=I(t);e=T(y,"DIV",{class:!0});var w=I(e);s=T(w,"DIV",{class:!0});var b=I(s);r&&pt(r.$$.fragment,b),n=j(b),g&&g.l(b),b.forEach(C),w.forEach(C),a=j(y),o=T(y,"P",{class:!0});var v=I(o);c=ot(v,l),v.forEach(C),y.forEach(C),this.h()},h(){x(s,"class","navbar__pages__item__icon__img svelte-17qvtv9"),Se(s,"with-label",i[7].isNewLabel),x(e,"class","navbar__pages__item__icon svelte-17qvtv9"),x(o,"class","navbar__pages__item__name svelte-17qvtv9"),x(t,"class","navbar__pages__item svelte-17qvtv9"),Se(t,"active",i[0](i[7]))},m(_,y){G(_,t,y),A(t,e),A(e,s),r&&ht(r,s,null),A(s,n),g&&g.m(s,null),A(t,a),A(t,o),A(o,c),h=!0,u||(f=bt(t,"click",p),u=!0)},p(_,y){if(i=_,y&2&&d!==(d=i[7].icon)){if(r){Mt();const w=r;V(w.$$.fragment,1,0,()=>{ct(w,1)}),Pt()}d?(r=as(d,m(i)),lt(r.$$.fragment),B(r.$$.fragment,1),ht(r,s,n)):r=null}else if(d){const w={};y&3&&(w.fill=i[0](i[7])?"white":"#FFFFFF99"),r.$set(w)}i[7].isNewLabel?g?g.p(i,y):(g=fn(i),g.c(),g.m(s,null)):g&&(g.d(1),g=null),(!h||y&2)&&Se(s,"with-label",i[7].isNewLabel),(!h||y&2)&&l!==(l=i[7].name+"")&&mt(c,l),(!h||y&3)&&Se(t,"active",i[0](i[7]))},i(_){h||(r&&B(r.$$.fragment,_),h=!0)},o(_){r&&V(r.$$.fragment,_),h=!1},d(_){_&&C(t),r&&ct(r),g&&g.d(),u=!1,f()}}}function oc(i){let t,e,s,r,n,a,o,l,c=fe(i[1]),h=[];for(let f=0;f<c.length;f+=1)h[f]=mn(dn(i,c,f));const u=f=>V(h[f],1,1,()=>{h[f]=null});return{c(){t=P("nav"),e=P("ul"),s=P("div");for(let f=0;f<h.length;f+=1)h[f].c();r=N(),n=P("div"),a=N(),o=P("div"),this.h()},l(f){t=T(f,"NAV",{class:!0});var d=I(t);e=T(d,"UL",{class:!0});var m=I(e);s=T(m,"DIV",{class:!0});var g=I(s);for(let p=0;p<h.length;p+=1)h[p].l(g);r=j(g),n=T(g,"DIV",{class:!0}),I(n).forEach(C),g.forEach(C),m.forEach(C),a=j(d),o=T(d,"DIV",{class:!0}),I(o).forEach(C),d.forEach(C),this.h()},h(){x(n,"class","navbar__pages__back svelte-17qvtv9"),x(s,"class","navbar__pages__container svelte-17qvtv9"),x(e,"class","navbar__pages"),x(o,"class","navbar__back svelte-17qvtv9"),x(t,"class","navbar svelte-17qvtv9")},m(f,d){G(f,t,d),A(t,e),A(e,s);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(s,null);A(s,r),A(s,n),A(t,a),A(t,o),l=!0},p(f,[d]){if(d&7){c=fe(f[1]);let m;for(m=0;m<c.length;m+=1){const g=dn(f,c,m);h[m]?(h[m].p(g,d),B(h[m],1)):(h[m]=mn(g),h[m].c(),B(h[m],1),h[m].m(s,r))}for(Mt(),m=c.length;m<h.length;m+=1)u(m);Pt()}},i(f){if(!l){for(let d=0;d<c.length;d+=1)B(h[d]);l=!0}},o(f){h=h.filter(Boolean);for(let d=0;d<h.length;d+=1)V(h[d]);l=!1},d(f){f&&C(t),ks(h,f)}}}function lc(i,t,e){let s,r,n,a,o;yt(i,$i,h=>e(4,a=h)),yt(i,De,h=>e(5,o=h));const l=h=>{h.disabled||Ts(h.url)},c=h=>l(h);return i.$$.update=()=>{i.$$.dirty&32&&e(1,s=[{name:o("clicker.Navigation.play"),icon:qh,url:"/play"},{name:o("clicker.Passive.empire"),icon:tc,url:"/earn",isNewLabel:!0,isDirUrl:!0},{name:o("clicker.Navigation.tasks"),icon:ac,url:"/tasks"},{name:o("clicker.Navigation.friends"),icon:$h,url:"/friends",subUrl:"/tribe"},{name:o("clicker.Navigation.games"),icon:ic,url:"/games"}]),i.$$.dirty&16&&e(3,r=a.route.id),i.$$.dirty&8&&e(0,n=h=>h.url===r||h.subUrl&&r.startsWith(h.subUrl)||h.isDirUrl&&r.startsWith(h.url))},[n,s,l,r,a,o,c]}class hc extends Ft{constructor(t){super(),Rt(this,t,lc,oc,Tt,{})}}const cc=""+new URL("../assets/loading.FTBuRlTX.gif",import.meta.url).href;function uc(i){let t,e,s,r;return{c(){t=P("div"),e=P("img"),this.h()},l(n){t=T(n,"DIV",{class:!0});var a=I(t);e=T(a,"IMG",{src:!0,alt:!0}),a.forEach(C),this.h()},h(){Nt(e.src,s=cc)||x(e,"src",s),x(e,"alt",""),x(t,"class",r=ni(`loading-container ${i[0]}`)+" svelte-1eymkdy")},m(n,a){G(n,t,a),A(t,e)},p(n,[a]){a&1&&r!==(r=ni(`loading-container ${n[0]}`)+" svelte-1eymkdy")&&x(t,"class",r)},i:dt,o:dt,d(n){n&&C(t)}}}function dc(i,t,e){let{className:s=""}=t;return i.$$set=r=>{"className"in r&&e(0,s=r.className)},[s]}class Ja extends Ft{constructor(t){super(),Rt(this,t,dc,uc,Tt,{className:0})}}function pn(i){let t;function e(n,a){return n[0].username?mc:fc}let s=e(i),r=s(i);return{c(){t=P("span"),r.c(),this.h()},l(n){t=T(n,"SPAN",{class:!0});var a=I(t);r.l(a),a.forEach(C),this.h()},h(){x(t,"class","user-tag svelte-xr7977")},m(n,a){G(n,t,a),r.m(t,null)},p(n,a){s===(s=e(n))&&r?r.p(n,a):(r.d(1),r=s(n),r&&(r.c(),r.m(t,null)))},d(n){n&&C(t),r.d()}}}function fc(i){var s;let t=((s=i[0])==null?void 0:s.firstName)+"",e;return{c(){e=at(t)},l(r){e=ot(r,t)},m(r,n){G(r,e,n)},p(r,n){var a;n&1&&t!==(t=((a=r[0])==null?void 0:a.firstName)+"")&&mt(e,t)},d(r){r&&C(e)}}}function mc(i){var r;let t,e=((r=i[0])==null?void 0:r.username)+"",s;return{c(){t=at("@"),s=at(e)},l(n){t=ot(n,"@"),s=ot(n,e)},m(n,a){G(n,t,a),G(n,s,a)},p(n,a){var o;a&1&&e!==(e=((o=n[0])==null?void 0:o.username)+"")&&mt(s,e)},d(n){n&&(C(t),C(s))}}}function gn(i){let t,e=i[1]("clicker.Navigation.about_token")+"",s,r,n;return{c(){t=P("span"),s=at(e),this.h()},l(a){t=T(a,"SPAN",{class:!0,tabindex:!0,role:!0});var o=I(t);s=ot(o,e),o.forEach(C),this.h()},h(){x(t,"class","about-btn svelte-xr7977"),x(t,"tabindex","-1"),x(t,"role","button")},m(a,o){G(a,t,o),A(t,s),r||(n=[bt(t,"keydown",i[4]),bt(t,"click",i[3])],r=!0)},p(a,o){o&2&&e!==(e=a[1]("clicker.Navigation.about_token")+"")&&mt(s,e)},d(a){a&&C(t),r=!1,Re(n)}}}function pc(i){let t,e,s,r,n,a,o=i[0]&&pn(i),l=i[0]&&gn(i);return{c(){t=P("nav"),e=P("div"),o&&o.c(),s=N(),r=P("div"),l&&l.c(),this.h()},l(c){t=T(c,"NAV",{class:!0});var h=I(t);e=T(h,"DIV",{class:!0,tabindex:!0,role:!0});var u=I(e);o&&o.l(u),u.forEach(C),s=j(h),r=T(h,"DIV",{class:!0});var f=I(r);l&&l.l(f),f.forEach(C),h.forEach(C),this.h()},h(){x(e,"class","left animate__animated animate__fadeInLeft"),x(e,"tabindex","-1"),x(e,"role","button"),x(r,"class","right animate__animated animate__fadeInRight"),x(t,"class","top-bar svelte-xr7977")},m(c,h){G(c,t,h),A(t,e),o&&o.m(e,null),A(t,s),A(t,r),l&&l.m(r,null),n||(a=[bt(e,"keydown",i[5]),bt(e,"click",i[2])],n=!0)},p(c,[h]){c[0]?o?o.p(c,h):(o=pn(c),o.c(),o.m(e,null)):o&&(o.d(1),o=null),c[0]?l?l.p(c,h):(l=gn(c),l.c(),l.m(r,null)):l&&(l.d(1),l=null)},i:dt,o:dt,d(c){c&&C(t),o&&o.d(),l&&l.d(),n=!1,Re(a)}}}function gc(i,t,e){let s,r;yt(i,Xa,c=>e(0,s=c)),yt(i,De,c=>e(1,r=c));const n=()=>{s!=null&&s.isBanned||Ts("/profile")},a=()=>Ts("/about");function o(c){Ze.call(this,i,c)}function l(c){Ze.call(this,i,c)}return[s,r,n,a,o,l]}class _c extends Ft{constructor(t){super(),Rt(this,t,gc,pc,Tt,{})}}const yc="data:image/svg+xml,%3csvg%20width='64'%20height='64'%20viewBox='0%200%2064%2064'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='32'%20cy='32'%20r='32'%20fill='%23F02D20'%20fill-opacity='0.1'/%3e%3cg%20clip-path='url(%23clip0_239_564)'%3e%3cpath%20d='M30.6666%2036H33.3333V38.6667H30.6666V36ZM30.6666%2025.3333H33.3333V33.3333H30.6666V25.3333ZM31.9933%2018.6667C24.6266%2018.6667%2018.6666%2024.6333%2018.6666%2032C18.6666%2039.3667%2024.6266%2045.3333%2031.9933%2045.3333C39.36%2045.3333%2045.3333%2039.3667%2045.3333%2032C45.3333%2024.6333%2039.36%2018.6667%2031.9933%2018.6667ZM32%2042.6667C26.1066%2042.6667%2021.3333%2037.8933%2021.3333%2032C21.3333%2026.1067%2026.1066%2021.3333%2032%2021.3333C37.8933%2021.3333%2042.6666%2026.1067%2042.6666%2032C42.6666%2037.8933%2037.8933%2042.6667%2032%2042.6667Z'%20fill='%23F02D20'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_239_564'%3e%3crect%20width='32'%20height='32'%20fill='white'%20transform='translate(16%2016)'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e";function _n(i){let t,e;return{c(){t=P("img"),this.h()},l(s){t=T(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Nt(t.src,e=i[2])||x(t,"src",e),x(t,"alt",""),x(t,"class","svelte-13i3tq6")},m(s,r){G(s,t,r)},p(s,r){r&4&&!Nt(t.src,e=s[2])&&x(t,"src",e)},d(s){s&&C(t)}}}function bc(i){let t;return{c(){t=at(i[7])},l(e){t=ot(e,i[7])},m(e,s){G(e,t,s)},p(e,s){s&128&&mt(t,e[7])},d(e){e&&C(t)}}}function yn(i){let t,e;return t=new We({props:{variant:Ya.White,classes:["w-full","justify-center","mt-3"],track:"Cancel Action Confirmation",trackProperties:i[0],$$slots:{default:[wc]},$$scope:{ctx:i}}}),t.$on("click",i[12]),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},p(s,r){const n={};r&1&&(n.trackProperties=s[0]),r&16448&&(n.$$scope={dirty:r,ctx:s}),t.$set(n)},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function wc(i){let t;return{c(){t=at(i[6])},l(e){t=ot(e,i[6])},m(e,s){G(e,t,s)},p(e,s){s&64&&mt(t,e[6])},d(e){e&&C(t)}}}function xc(i){let t,e,s,r,n,a,o,l,c,h,u,f,d,m=i[3]&&_n(i);u=new We({props:{variant:i[4],classes:["w-full","justify-center"],track:i[1],trackProperties:i[0],$$slots:{default:[bc]},$$scope:{ctx:i}}}),u.$on("click",i[11]);let g=i[5]&&yn(i);return{c(){t=P("div"),e=P("div"),m&&m.c(),s=N(),r=P("h2"),n=at(i[9]),a=N(),o=P("p"),l=at(i[8]),c=N(),h=P("div"),lt(u.$$.fragment),f=N(),g&&g.c(),this.h()},l(p){t=T(p,"DIV",{class:!0});var _=I(t);e=T(_,"DIV",{class:!0});var y=I(e);m&&m.l(y),s=j(y),r=T(y,"H2",{class:!0});var w=I(r);n=ot(w,i[9]),w.forEach(C),a=j(y),o=T(y,"P",{class:!0});var b=I(o);l=ot(b,i[8]),b.forEach(C),y.forEach(C),c=j(_),h=T(_,"DIV",{class:!0});var v=I(h);pt(u.$$.fragment,v),f=j(v),g&&g.l(v),v.forEach(C),_.forEach(C),this.h()},h(){x(r,"class","svelte-13i3tq6"),x(o,"class","svelte-13i3tq6"),x(e,"class","content svelte-13i3tq6"),x(h,"class","buttons svelte-13i3tq6"),x(t,"class","action-confirmation svelte-13i3tq6")},m(p,_){G(p,t,_),A(t,e),m&&m.m(e,null),A(e,s),A(e,r),A(r,n),A(e,a),A(e,o),A(o,l),A(t,c),A(t,h),ht(u,h,null),A(h,f),g&&g.m(h,null),d=!0},p(p,[_]){p[3]?m?m.p(p,_):(m=_n(p),m.c(),m.m(e,s)):m&&(m.d(1),m=null),(!d||_&512)&&mt(n,p[9]),(!d||_&256)&&mt(l,p[8]);const y={};_&16&&(y.variant=p[4]),_&2&&(y.track=p[1]),_&1&&(y.trackProperties=p[0]),_&16512&&(y.$$scope={dirty:_,ctx:p}),u.$set(y),p[5]?g?(g.p(p,_),_&32&&B(g,1)):(g=yn(p),g.c(),B(g,1),g.m(h,null)):g&&(Mt(),V(g,1,1,()=>{g=null}),Pt())},i(p){d||(B(u.$$.fragment,p),B(g),d=!0)},o(p){V(u.$$.fragment,p),V(g),d=!1},d(p){p&&C(t),m&&m.d(),ct(u),g&&g.d()}}}const vc="Action requires confirmation",Cc="Are you sure you want to perform this action?",Ac="Proceed",kc="Cancel";function Sc(i,t,e){let s,r,n,a,o,l,c,h,u,f,d;const m=xe();yt(i,m,_=>e(13,d=_));const g=()=>{var _,y;(y=(_=d.meta).actionCallback)==null||y.call(_),p()},p=()=>{m.close()};return i.$$.update=()=>{i.$$.dirty&8192&&e(9,s=d.meta.title||vc),i.$$.dirty&8192&&e(8,r=d.meta.message||Cc),i.$$.dirty&8192&&e(7,n=d.meta.cta||Ac),i.$$.dirty&8192&&e(6,a=d.meta.cancel||kc),i.$$.dirty&8192&&e(5,o=d.meta.hideCancel!==!0),i.$$.dirty&8192&&e(4,l=d.meta.ctaVariant||Ya.Primary),i.$$.dirty&8192&&e(3,c=typeof d.meta.showVector=="boolean"?d.meta.showVector:!0),i.$$.dirty&8192&&e(2,h=d.meta.vector??yc),i.$$.dirty&8192&&e(1,u=d.meta.track||""),i.$$.dirty&8192&&e(0,f=d.meta.trackProperties||{})},[f,u,h,c,l,o,a,n,r,s,m,g,p,d]}class Lc extends Ft{constructor(t){super(),Rt(this,t,Sc,xc,Tt,{})}}const Mc=""+new URL("../assets/whale.B493POLn.svg",import.meta.url).href,Pc=""+new URL("../assets/fl-whale.DMrNRgd5.svg",import.meta.url).href,Tc=""+new URL("../assets/whale-3.CwHmkTYc.svg",import.meta.url).href;function Ec(i,t){if(Array.isArray(i)&&(t=i,i="bez_"+t.join("_").replace(/\./g,"p")),typeof Qi.easing[i]!="function"){var e=function(s,r){var n=[null,null],a=[null,null],o=[null,null],l=function(u,f){return o[f]=3*s[f],a[f]=3*(r[f]-s[f])-o[f],n[f]=1-o[f]-a[f],u*(o[f]+u*(a[f]+u*n[f]))},c=function(u){return o[0]+u*(2*a[0]+3*n[0]*u)},h=function(u){for(var f=u,d=0,m;++d<14&&(m=l(f,0)-u,!(Math.abs(m)<.001));)f-=m/c(f);return f};return function(u){return l(h(u),1)}};Qi.easing[i]=function(s,r,n,a,o){return a*e([t[0],t[1]],[t[2],t[3]])(r/o)+n}}return i}function bn(i,t,e){const s=i.slice();return s[13]=t[e],s}function wn(i,t,e){const s=i.slice();return s[13]=t[e],s}function xn(i,t,e){const s=i.slice();return s[13]=t[e],s}function vn(i){let t,e,s,r;return{c(){t=P("div"),e=P("img"),r=N(),this.h()},l(n){t=T(n,"DIV",{class:!0});var a=I(t);e=T(a,"IMG",{src:!0,alt:!0,class:!0}),r=j(a),a.forEach(C),this.h()},h(){Nt(e.src,s=i[13].image)||x(e,"src",s),x(e,"alt",""),x(e,"class","svelte-682cr5"),x(t,"class","gameroll__slot__game__line__item svelte-682cr5")},m(n,a){G(n,t,a),A(t,e),A(t,r)},p(n,a){a&1&&!Nt(e.src,s=n[13].image)&&x(e,"src",s)},d(n){n&&C(t)}}}function Cn(i){let t,e,s,r;return{c(){t=P("div"),e=P("img"),r=N(),this.h()},l(n){t=T(n,"DIV",{class:!0});var a=I(t);e=T(a,"IMG",{src:!0,alt:!0,class:!0}),r=j(a),a.forEach(C),this.h()},h(){Nt(e.src,s=i[13].image)||x(e,"src",s),x(e,"alt",""),x(e,"class","svelte-682cr5"),x(t,"class","gameroll__slot__game__line__item svelte-682cr5")},m(n,a){G(n,t,a),A(t,e),A(t,r)},p(n,a){a&1&&!Nt(e.src,s=n[13].image)&&x(e,"src",s)},d(n){n&&C(t)}}}function An(i){let t,e,s,r;return{c(){t=P("div"),e=P("img"),r=N(),this.h()},l(n){t=T(n,"DIV",{class:!0});var a=I(t);e=T(a,"IMG",{src:!0,alt:!0,class:!0}),r=j(a),a.forEach(C),this.h()},h(){Nt(e.src,s=i[13].image)||x(e,"src",s),x(e,"alt",""),x(e,"class","svelte-682cr5"),x(t,"class","gameroll__slot__game__line__item svelte-682cr5")},m(n,a){G(n,t,a),A(t,e),A(t,r)},p(n,a){a&1&&!Nt(e.src,s=n[13].image)&&x(e,"src",s)},d(n){n&&C(t)}}}function Ic(i){var H,K,gt,ft,St,z;let t,e,s,r,n,a='<div class="gameroll__slot__game__arrow__back svelte-682cr5"></div> <svg width="20" height="24" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 12L0 0V24L20 12Z" fill="white"></path></svg>',o,l,c='<div class="gameroll__slot__game__arrow__back svelte-682cr5"></div> <svg width="20" height="24" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 12L20 0V24L0 12Z" fill="white"></path></svg>',h,u,f,d,m,g,p,_,y,w,b,v,S,k,L,M,E="Spin",tt,it,O=fe(((K=(H=i[0])==null?void 0:H[0])==null?void 0:K.items)||[]),W=[];for(let q=0;q<O.length;q+=1)W[q]=vn(xn(i,O,q));let rt=fe(((ft=(gt=i[0])==null?void 0:gt[1])==null?void 0:ft.items)||[]),Z=[];for(let q=0;q<rt.length;q+=1)Z[q]=Cn(wn(i,rt,q));let $=fe(((z=(St=i[0])==null?void 0:St[2])==null?void 0:z.items)||[]),ut=[];for(let q=0;q<$.length;q+=1)ut[q]=An(bn(i,$,q));return{c(){t=P("div"),e=P("div"),s=P("div"),r=P("div"),n=P("div"),n.innerHTML=a,o=N(),l=P("div"),l.innerHTML=c,h=N(),u=P("div"),f=N(),d=P("div"),m=P("div");for(let q=0;q<W.length;q+=1)W[q].c();g=N(),p=P("div"),_=N(),y=P("div");for(let q=0;q<Z.length;q+=1)Z[q].c();w=N(),b=P("div"),v=N(),S=P("div");for(let q=0;q<ut.length;q+=1)ut[q].c();k=N(),L=P("div"),M=P("div"),M.textContent=E,this.h()},l(q){t=T(q,"DIV",{class:!0});var _t=I(t);e=T(_t,"DIV",{class:!0});var wt=I(e);s=T(wt,"DIV",{class:!0});var qt=I(s);r=T(qt,"DIV",{class:!0});var Lt=I(r);n=T(Lt,"DIV",{class:!0,"data-svelte-h":!0}),ge(n)!=="svelte-1by452r"&&(n.innerHTML=a),o=j(Lt),l=T(Lt,"DIV",{class:!0,"data-svelte-h":!0}),ge(l)!=="svelte-1thjk00"&&(l.innerHTML=c),h=j(Lt),u=T(Lt,"DIV",{class:!0}),I(u).forEach(C),f=j(Lt),d=T(Lt,"DIV",{class:!0});var Et=I(d);m=T(Et,"DIV",{class:!0});var D=I(m);for(let It=0;It<W.length;It+=1)W[It].l(D);D.forEach(C),g=j(Et),p=T(Et,"DIV",{class:!0}),I(p).forEach(C),_=j(Et),y=T(Et,"DIV",{class:!0});var $t=I(y);for(let It=0;It<Z.length;It+=1)Z[It].l($t);$t.forEach(C),w=j(Et),b=T(Et,"DIV",{class:!0}),I(b).forEach(C),v=j(Et),S=T(Et,"DIV",{class:!0});var et=I(S);for(let It=0;It<ut.length;It+=1)ut[It].l(et);et.forEach(C),Et.forEach(C),k=j(Lt),L=T(Lt,"DIV",{class:!0});var zt=I(L);M=T(zt,"DIV",{class:!0,"data-svelte-h":!0}),ge(M)!=="svelte-14deq24"&&(M.textContent=E),zt.forEach(C),Lt.forEach(C),qt.forEach(C),wt.forEach(C),_t.forEach(C),this.h()},h(){x(n,"class","gameroll__slot__game__arrow gameroll__slot__game__arrow_start svelte-682cr5"),x(l,"class","gameroll__slot__game__arrow gameroll__slot__game__arrow_end svelte-682cr5"),x(u,"class","gameroll__slot__game__lines-back svelte-682cr5"),x(m,"class","gameroll__slot__game__line svelte-682cr5"),x(p,"class","gameroll__slot__game__lines__border svelte-682cr5"),x(y,"class","gameroll__slot__game__line svelte-682cr5"),x(b,"class","gameroll__slot__game__lines__border svelte-682cr5"),x(S,"class","gameroll__slot__game__line svelte-682cr5"),x(d,"class","gameroll__slot__game__lines svelte-682cr5"),x(M,"class","gameroll__slot__game__button__item svelte-682cr5"),x(L,"class","gameroll__slot__game__button svelte-682cr5"),x(r,"class","gameroll__slot__game svelte-682cr5"),x(s,"class","gameroll__slot animate__animated animate__zoomIn"),x(e,"class","gameroll svelte-682cr5"),x(t,"class","game slot")},m(q,_t){G(q,t,_t),A(t,e),A(e,s),A(s,r),A(r,n),A(r,o),A(r,l),A(r,h),A(r,u),A(r,f),A(r,d),A(d,m);for(let wt=0;wt<W.length;wt+=1)W[wt]&&W[wt].m(m,null);A(d,g),A(d,p),A(d,_),A(d,y);for(let wt=0;wt<Z.length;wt+=1)Z[wt]&&Z[wt].m(y,null);A(d,w),A(d,b),A(d,v),A(d,S);for(let wt=0;wt<ut.length;wt+=1)ut[wt]&&ut[wt].m(S,null);A(r,k),A(r,L),A(L,M),tt||(it=bt(M,"click",i[1]),tt=!0)},p(q,[_t]){var wt,qt,Lt,Et,D,$t;if(_t&1){O=fe(((qt=(wt=q[0])==null?void 0:wt[0])==null?void 0:qt.items)||[]);let et;for(et=0;et<O.length;et+=1){const zt=xn(q,O,et);W[et]?W[et].p(zt,_t):(W[et]=vn(zt),W[et].c(),W[et].m(m,null))}for(;et<W.length;et+=1)W[et].d(1);W.length=O.length}if(_t&1){rt=fe(((Et=(Lt=q[0])==null?void 0:Lt[1])==null?void 0:Et.items)||[]);let et;for(et=0;et<rt.length;et+=1){const zt=wn(q,rt,et);Z[et]?Z[et].p(zt,_t):(Z[et]=Cn(zt),Z[et].c(),Z[et].m(y,null))}for(;et<Z.length;et+=1)Z[et].d(1);Z.length=rt.length}if(_t&1){$=fe((($t=(D=q[0])==null?void 0:D[2])==null?void 0:$t.items)||[]);let et;for(et=0;et<$.length;et+=1){const zt=bn(q,$,et);ut[et]?ut[et].p(zt,_t):(ut[et]=An(zt),ut[et].c(),ut[et].m(S,null))}for(;et<ut.length;et+=1)ut[et].d(1);ut.length=$.length}},i:dt,o:dt,d(q){q&&C(t),ks(W,q),ks(Z,q),ks(ut,q),tt=!1,it()}}}function Bc(i,t,e){const s=Ds();let{isWon:r=!1}=t;const n=[{image:Mc,key:1},{image:Pc,key:2},{image:Tc,key:3}],a=n[Math.floor(Math.random()*n.length)].key,o=[];let l=!1;$e(()=>{c(),pi(!1)});const c=()=>{for(let p=0;p!=3;p++){const _={items:[],key:p};o.push(_),h(_)}},h=(p,_=5)=>{const w=[...Array(_).fill(n).flat()].sort(()=>Math.random()-.5);e(0,o[p.key].items=o[p.key].items.concat(w),o)},u=p=>{const _=n[Math.floor(Math.random()*n.length)];return _.key==p?u(p):_.key},f=p=>{const _=document.querySelector(".gameroll__slot__game__line__item").getBoundingClientRect().height;return[...o].map(y=>{const w=y.items.findLastIndex(v=>r?v.key===p:y.key===2?v.key===u(a):!0),b=(_+25)*(w-1);return{key:y.key,scroll:b}})},d=(p=5)=>{for(const _ of o)h(_,p)},m=()=>{setTimeout(()=>{l=!1,s("gameEnded",{isWon:r,score:-1})},500)},g=()=>{if(l)return;window.Telegram.WebApp.HapticFeedback.impactOccurred("medium"),l=!0,d();const p=f(a);d(1);const _=[0,0,.2,.8+Math.random()*.4];for(const y of p){setTimeout(()=>{window.Telegram.WebApp.HapticFeedback.impactOccurred("medium")},(y.key+1)*1500);const w=document.querySelectorAll(".gameroll__slot__game__line");Qi(w[y.key]).animate({scrollTop:y.scroll},(y.key+1)*1500,Ec(_))}setTimeout(()=>{m()},o.length*1500)};return i.$$set=p=>{"isWon"in p&&e(2,r=p.isWon)},[o,g,r]}let Fc=class extends Ft{constructor(t){super(),Rt(this,t,Bc,Ic,Tt,{isWon:2})}};const Rc=()=>{const i=document.querySelector(".game-overlay__button"),t=document.querySelector(".game-overlay"),e=document.getElementById("flWhale");e.width=window.innerWidth,e.height=window.innerHeight;const s=e.getContext("2d"),r=[140,60,90,90,120,100],n=65;let a=0;const o=1e3/n;let l=e.height/2,c=0;const h=90,u=103,f=30+h/2;let d=[],m=!1,g=!1;const p=[[[0,157,212],[1,137,199]],[[0,157,212],[52,197,226]],[[158,241,249],[52,197,226]],[[0,157,212],[52,197,226]],[[0,157,212],[1,137,199]]],_=[],y=[],w=80;let b=[],v=0,S=-1,k=!1,L=!1,M=0,E=null,tt=null,it=-1,O=null,W=null,rt=null,Z=null,$=null,ut=0,H=0,K=[];const gt=U=>new Promise((Y,st)=>{let Bt=new Image;Bt.onload=()=>Y(Bt),Bt.onerror=st,Bt.src=U}),ft=U=>{const Y=new Path2D;return Y.moveTo(0,0),Y.lineTo(0,1e3),Y.lineTo(82,1e3),Y.lineTo(82,0),Y},St=()=>{const U=y[Math.round(Math.random()*1)],Y=Math.max(e.width+10,b.length>0?b[b.length-1].x+b[b.length-1].shark.width+50+Math.random()*50:0);b.push({shark:U,x:Y,y:100+Math.random()*(e.height-200)})},z=()=>{const U=-(e.height/3)+Math.random()*e.height*2/3,Y=250,st=Math.max(e.width+50,d.length>0?d[d.length-1].x+250+H*20+Math.random()*50:0),Bt=e.height/2-Y/2+U/2+20,Ct=e.height/2-Y/2-U/2+20;d.push({x:st,y:e.height-Bt-1+20,rotate:0,height:Bt,path:ft(),pointed:!0}),d.push({x:st+82,y:Ct-1-20,rotate:1,height:Ct,pointed:!1,path:ft()})},q=()=>{requestAnimationFrame(()=>{m||(m=!0,z(),z(),z(),St(),St()),k=!0,M=w,window.Telegram.WebApp.HapticFeedback.impactOccurred("medium")})},_t=()=>{if(L)return!0;L=!0,H=0,t.hidden=!1;const U=new CustomEvent("flappy.gameEnded",{detail:ut});window.dispatchEvent(U)},wt=()=>{g&&(t.hidden=!0,i.remove(),H=120/n,ut=0,d=[],b=[],m=!1,k=!1,L=!1,l=e.height/2,c=0,M=0,it=-1,a=performance.now(),$t())},qt=U=>{for(let Y=0;Y<d.length;Y++){const st=d[Y];s.save(),s.translate(st.x,st.y),st.rotate&&s.rotate(3.14159),s.drawImage(E,0,0,82,1e3),s.translate(-st.x,-st.y),s.restore()}},Lt=()=>{K=[];let U=0;const Y=e.height/4;do{const st=Y*U,Bt=60*U,Ct=U%2==0?v:-v,de=new Path2D;de.moveTo(0,st-Y),de.lineTo(e.width,st-Y),de.lineTo(e.width,st+100),de.bezierCurveTo(e.width+Bt-Ct,st+r[5]+Ct,250+Bt,st+r[4]+Ct,150+Bt,st+r[3]+Ct),de.bezierCurveTo(150+Bt,st+r[2]+Ct,90+Bt,st+r[1]+Ct,0,st+r[0]-Ct),de.lineTo(0,st),K.unshift(de),U++}while(Y*(U-1)<e.height)},Et=(U,Y)=>"rgb("+p[Y][U].join(",")+")",D=()=>{for(let U=0;U!=K.length;U++){const Y=s.createLinearGradient(0,0,500,500);Y.addColorStop(0,Et(0,U)),Y.addColorStop(1,Et(1,U)),s.lineWidth=5,s.fillStyle=Y,s.fill(K[U])}},$t=()=>{const U=performance.now(),Y=U-a;a=U,Pe(Y/o),ae(),H>0&&window.requestAnimationFrame($t)},et=U=>{if(!m)return!0;for(let Y=0;Y!=b.length;Y++)b[Y].x-=H*3*U,b[Y].x<-b[Y].shark.width&&(b.splice(Y,1),Y-=1,St())},zt=U=>{if(!m)return!0;it-=H*2*U,it<-978.5&&(it=d.findLast(Y=>Y.rotate).x-10)},It=()=>{b.forEach(U=>{const Y=new Path2D,st=new DOMMatrix;st.e=U.x,st.f=U.y,Y.addPath(U.shark.path,st),s.fillStyle="#135681",s.fill(Y)})},ne=()=>{const U=new Path2D,Y=new DOMMatrix;Y.e=it,Y.f=e.height-100,U.addPath(W,Y),s.fillStyle="#023054",s.fill(U)},he=()=>{const U=ut.toString().split("").map(Ct=>_[Ct]),Y=[...U].splice(0,Math.floor(U.length/2));let st=Y.reduce((Ct,de)=>Ct+de.width,0);if(U.length%2!=0){const Ct=U.length>1?Math.ceil(U.length/2):0;st+=U[Ct].width/2}let Bt=-st-Y.length*6+3;U.forEach((Ct,de)=>{const _s=e.width/2+Bt;Bt+=Ct.width+6,s.drawImage(Ct.img,_s,132)})},ae=()=>{s.clearRect(0,0,e.width,e.height),D(),It(),qt(),ne(),he(),Te()},Pe=(U=1)=>{H+=.025/n*U,jt(),Lt(),et(U),zt(U),Ci(U),R(U),Ge()},Ge=()=>{tt=new Path2D;const U=new Path2D;U.addPath(O,new DOMMatrix().translate(-h/2,-u/2).scale(h/113)),tt.addPath(U,new DOMMatrix().translate(f,l).rotate(c*180/Math.PI))},R=U=>{if(M-=200/n*U,k?(c>-.4&&(c+=-.4/(w/(200/n))),l-=200/n,M<=0&&(k=!1)):m&&(l+=200/n*U,c=-.4*((w+Math.max(M,-w))/w)),l>e.height-120||l<-20)return _t()},jt=(U=!0)=>{U&&((v<=-15||v>0)&&(S=-S),v+=S*.1)},Te=()=>{s.save(),s.translate(f,l),s.rotate(c),s.drawImage(Hs(),-h/2,-u/2,h,u),s.translate(-f,-l),s.restore()},Hs=()=>L?$:k?Z:rt,vi=U=>{const Y=[],st=U.rotate?U.x-82:U.x,Bt=U.rotate?-1:1;for(let Ct=0;Ct!=82;Ct++)Y.push({x:st+Ct,y:U.y});for(let Ct=0;Ct<U.height;Ct++)Y.push({x:st,y:U.y+Ct*Bt}),Y.push({x:st+82,y:U.y+Ct*Bt});return Y},Ws=U=>{const Y=vi(U);for(const st of Y)if(s.isPointInPath(tt,st.x,st.y))return!0},Ci=U=>{for(let Y=0;Y<d.length;Y++){const st=d[Y];st.rotate?st.height-35:st.y;const Bt=(st.rotate?st.x-82:st.x)-10;if(Bt>f-h&&Bt<f+h&&Ws(st))return _t();if(Bt<30&&!st.pointed&&(d[Y].pointed=!0,ut++),st.x-=H*2*U,d[Y].x=st.x,st.x<-82){d.splice(Y,1),Y-=1,st.rotate&&z();continue}}};return(async()=>{window.addEventListener("flappy.whaleJump",q),window.addEventListener("minigames.startGame",wt),window.addEventListener("resize",()=>{e.width=window.innerWidth,e.height=window.innerHeight}),E=await gt("/assets/flappy/pipe.svg"),rt=await gt("/assets/flappy/fl-whale.svg"),Z=await gt("/assets/flappy/fl-whale-up.svg"),O=new Path2D("M39.5 1.5L39 3L40 5.5L41 7.5L42 9.5L43 11.5L44 14V17V19L43 22.5L42.5 24L42 25L40.5 28L38.5 30.5L36.5 32L34.5 33L33.5 34.5L34 36L36 37L39 39L41 40L43.5 41.5L42.5 42.5L41.5 43L40.5 43.5L39.5 44.5L38.5 43.5L38 42.5L37 41.5L35.5 41L33.5 40.5L32.5 41L31 41.5L30 43L29.5 44.5L29 46.5H28.5L26.5 45.5L25.5 46L25 45.5L24 44.5L23 42.5L22 40.5L21.5 38.5L21 37V34.5L21.5 33V32V31L22 29L23 26.5L24 24.5L24.5 23L25 21.5L26 19L27 17L27.5 15L28 12.5V9V6.5L27.5 5.5L26.5 4.5L25.5 4L24.5 4.5L23.5 5.5L22 7L21 8.5L19.5 10.5L17 14L14.5 17.5L11.5 21L10.5 22L8 22.5L6.5 21L5 19.5L3.5 17.5L2.5 16.5H1L0 17.5V18.5V20.5V22.5V24.5L0.5 26L1.5 28.5L3 31L5 33.5L8 36L10 39L10.5 41V43L10 46L9.5 50L9 54L9.5 59L10 62L11 67.5L12 71L12.5 73L12 74V75L12.5 75.5L13 76L13.5 77L14 78.5L13 79L10.5 80.5L8.5 81.5L7 82.5L6 84L5.5 85L6 86L7 87L8.5 87.5L11 88H12.5H15L18 87.5L18.5 88L19.5 89.5L21 91.5L23 94L26 97L29 100L33 103L31 103.5L28 104.5L25 106L22 108L20 110L18.5 112L17 114L16.5 115.5L17.5 116.5L19.5 116L22.5 114.5L26 113.5L28 113L30 112.5H32H34L36 113L39 114L42 116.5L45 119L49 122L52 124L56 126.5L62 129L64 130H67H72.5H75.5L77 129.5L78.5 129L80 128.5L82 127.5L84 126L86 124.5L87.5 123L89 121.5L90 122L91.5 123.5L93 125L95 125.5L96.5 125L97.5 124V122L96.5 119L95.5 116L94.5 113L93.5 110.5L94 109V106.5V103.5H96L98 102.5L99.5 101L100 100L102 99L103.5 98L105 97L107 95L108.5 93.5L110 91.5L111.5 89L111 87.5L110 86L108.5 85.5H105.5L108.5 81L109 80L110 78.5L111 76.5L112 74L113 71.5V69V67V64.5V61.5L112.5 59L112 57L111 55L110 53.5L107 49L106 48L104 46L101 43.5L99 42.5L95 40.5L92 39.5L88 38.5L85 38H83H82H80H78L74 38.5L71.5 39L69 39.5L67 40L62.5 41.5L59.5 43V41.5V39.5V37V35.5V33L59 29L58.5 24.5L58 23L57.5 21L56.5 17L56 15L55 13L54 11L52.5 9L51 7L50 6L48.5 4.5L46 3L44 2L42 1H41L39.5 1.5Z"),W=new Path2D("M0.922363 22.2308C0.922363 38.2308 0.922363 54.2308 0.922363 70.2308C0.922363 95.7692 0.922363 121 0.922363 146.538C0.922363 152.385 0.922363 158.231 0.922363 163.769C3.07621 163.769 5.53775 163.769 7.6916 163.769C14.1531 163.769 20.6147 163.769 27.0762 163.769C37.2301 163.769 47.3839 163.769 57.5377 163.769C71.0762 163.769 84.6147 163.769 98.1531 163.769C114.461 163.769 130.769 163.769 147.384 163.769C166.153 163.769 184.922 163.769 203.692 163.769C224.307 163.769 244.922 163.769 265.845 163.769C287.999 163.769 309.845 163.769 331.999 163.769C355.076 163.769 378.461 163.769 401.538 163.769C425.23 163.769 448.922 163.769 472.922 163.769C496.615 163.769 520.307 163.769 544.307 163.769C567.692 163.769 591.384 163.769 614.769 163.769C637.538 163.769 660.307 163.769 682.768 163.769C704.307 163.769 725.538 163.769 747.076 163.769C766.769 163.769 786.461 163.769 806.153 163.769C823.692 163.769 841.23 163.769 858.768 163.769C873.845 163.769 888.615 163.769 903.692 163.769C915.692 163.769 927.384 163.769 939.384 163.769C947.692 163.769 955.999 163.769 964.307 163.769C968.615 163.769 972.922 163.769 977.538 163.769C978.153 163.769 978.768 163.769 979.076 163.769C976.922 161.615 978.153 158.538 976.922 156.077C974.768 151.769 967.692 152.385 962.768 152.077C959.999 151.769 957.845 150.846 956.615 149C955.692 147.154 956.307 145.308 955.384 143.462C954.153 141 950.461 141.308 947.692 141.615C945.538 141.615 941.538 142.231 940.615 140.077C939.999 138.538 941.23 136.692 941.845 135.462C942.768 133.615 942.769 131.462 942.461 129.308C942.153 126.538 941.23 123.769 937.538 122.846C935.076 122.231 932.307 122.231 929.845 122.538C927.384 122.538 925.845 122.538 924.615 123.769C922.153 125.923 919.999 128.692 916.615 130.538C911.692 132.692 912.615 127.462 911.999 125.308C911.076 120.692 903.076 123.154 899.076 120.692C894.768 117.923 894.461 112.385 888.615 110.846C885.845 110.231 882.461 111.769 880.307 110.231C878.461 109 878.153 106.538 877.845 105C877.23 102.538 877.23 100.077 875.384 97.9231C870.153 91.4615 856.922 94.8462 849.23 91.4616C846.153 89.9231 842.769 87.1539 842.461 84.3846C842.153 82.8462 842.461 82.2308 840.307 81.6154C837.845 80.6923 835.076 80.0769 832.615 79.4615C830.768 78.8462 829.845 78.8462 828.615 77.6154C827.692 76.6923 826.461 76.077 825.538 75.1539C824.615 74.5385 823.384 73.9231 822.768 73C822.153 72.077 822.153 71.1539 821.845 70.2308C820.922 67.7692 818.461 65.9231 815.076 65.6154C811.384 65.3077 807.384 65.3077 803.692 64.6923C799.999 64.0769 796.307 64.077 792.307 63.7693C789.538 63.4616 787.692 62.2308 786.461 60.6923C785.538 59.4616 784.922 58.2308 783.076 57.6154C780.615 56.6923 778.768 55.7693 776.615 54.5385C774.768 53.6154 772.615 52.6923 770.461 53.3077C768.307 54.2308 767.692 56.3846 765.538 57C763.692 57.3077 761.23 57 759.076 57C755.076 57 750.769 57 746.769 56.6923C744.307 56.3846 740.615 55.7693 738.153 56.6923C735.999 57.6154 737.23 60.0769 736.615 61.6154C735.384 64.6923 730.153 62.2308 727.384 61.6154C723.999 60.6923 720.307 59.7692 716.922 60.0769C714.153 60.3846 712.307 61.6154 710.461 62.8462C707.692 64.6923 704.922 64.6923 701.538 65.3077C699.999 65.6154 698.769 65.9231 697.538 65.3077C696.307 65 695.384 64.077 694.461 63.7693C691.999 62.2308 689.845 60.6923 687.999 58.5385C686.153 56.6923 685.23 55.1539 682.768 53.6154C679.999 52.077 676.922 50.8462 674.769 49C671.999 46.8462 668.307 46.8462 664.615 47.4616C662.768 47.7693 661.23 48.3846 659.384 48.6923C657.538 49 655.692 48.3846 654.153 47.4616C651.692 46.2308 649.538 44.6923 646.769 44.0769C642.769 43.1539 638.769 43.4616 634.769 42.5385C630.461 41.6154 626.461 40.0769 622.461 38.5385C619.076 37.3077 615.692 36.3846 612.307 35.4615C609.845 34.8462 606.769 34.2308 605.538 32.077C603.692 28.6923 598.461 28.3846 593.538 28.0769C590.769 27.7693 588.307 27.7692 585.538 27.7692C584.615 27.7692 583.692 27.7693 583.076 27.4616C581.845 26.8462 581.23 26.2308 579.692 25.6154C575.692 24.3846 569.23 25 567.999 21C567.384 18.8462 567.999 16.3847 565.845 14.5385C564.307 13 562.153 12.3846 559.692 12.077C556.922 11.7693 553.845 12.0769 551.076 12.6923C548.307 13 544.307 13.3077 542.461 14.8462C541.23 15.7692 540.922 17.9231 539.076 16.077C537.23 14.5385 536.615 13.6154 534.153 15.4615C532.307 17 531.692 17.9231 528.615 18.2308C525.538 18.2308 522.153 18.2308 519.384 19.4615C515.076 21.6154 516.307 26.2308 512.615 29C508.922 31.4616 501.538 30.5385 496.922 30.8462C495.076 30.8462 492.615 31.4616 490.769 30.5385C488.922 29.6154 489.23 27.1539 487.692 26.5385C486.461 25.9231 482.769 26.5385 481.23 26.5385C479.384 26.5385 477.538 26.5385 475.999 26.5385C474.461 26.8462 473.23 27.1539 471.692 27.4616C470.769 27.7693 469.23 28.3847 468.307 28.3847C466.461 28.3847 463.999 26.5385 462.461 25.9231C460.615 25 457.845 23.7693 455.384 24.3846C452.615 24.6923 453.538 26.8462 451.999 28.0769C448.922 30.8462 440.615 28.3846 437.538 27.4616C432.922 25.9231 427.692 24.3846 423.384 22.5385C417.538 19.4615 414.461 16.0769 413.845 10.8462C413.23 6.53846 407.384 4.07693 402.153 4.07693C395.999 3.76924 392.307 6.84618 387.076 9.00003C375.384 13.3077 360.307 14.2308 347.999 11.4616C341.845 10.2308 336.922 8.07693 332.307 4.69231C328.307 1.92308 323.384 0.692319 317.845 1.00001C306.769 2.23078 298.153 8.07693 287.692 10.8462C285.845 11.4615 283.692 11.7692 281.538 11.7692C279.999 11.7692 278.461 10.8462 276.615 11.1539C273.845 11.1539 273.23 13.6154 273.23 15.4615C272.615 21.3077 275.076 28.0769 271.076 33.3077C268.922 36.0769 265.23 37 260.922 36.6923C258.153 36.6923 254.769 36.077 252.307 36.6923C249.538 37.6154 249.845 40.0769 248.922 41.9231C246.461 45.6154 240.615 45.9231 235.692 45.6154C232.615 45.3077 229.845 44.6923 227.076 44.0769C224.615 43.4616 221.23 43.4616 219.692 41.9231C215.999 37.6154 217.23 31.7692 212.922 27.7692C210.153 25 203.999 26.8462 200.615 27.7692C196.615 28.6923 191.076 29.9231 187.999 32.077C185.845 33.6154 184.615 35.1539 181.538 34.8462C177.538 34.8462 174.461 32.3846 171.692 30.8462C166.153 28.0769 160.307 26.5385 153.538 26.2308C146.153 25.9231 140.307 25.6154 133.538 23.4616C130.769 22.5385 128.307 21.6154 125.23 21C122.769 20.3846 118.769 20.6923 117.538 19.1539C115.999 17 117.845 11.4615 113.845 10.8462C111.999 10.5385 109.845 10.8462 107.692 10.5385C105.538 10.2308 103.076 9.9231 100.922 9.61541C96.307 9.00002 91.6916 8.69235 87.0762 8.38466C84.307 8.07696 80.9224 7.46157 78.7685 9.00003C77.2301 9.92311 76.9224 11.1538 74.7685 10.8462C73.5378 10.8462 72.6147 10.2308 71.3839 9.92312C69.23 9.61542 67.0762 9.92312 64.9224 9.92312C61.2301 9.92312 58.4608 8.38466 55.0762 8.38466C49.5377 7.76927 48.9224 17 46.1531 19.1539C44.6147 20.6923 41.8454 19.7692 40.6147 21C39.0762 22.2308 39.0762 25.3077 38.4608 26.8462C37.8454 28.3847 37.2301 28.6923 35.0762 29C32.6147 29.3077 29.8454 29.3077 27.3839 29.3077C25.5377 29.3077 22.7685 29.3077 21.2301 28.6923C19.3839 28.0769 18.7685 26.8462 16.307 26.5385C13.5377 26.2308 8.92236 27.1538 6.46082 26.2308C2.46082 23.7692 3.99929 22.2308 0.922363 22.2308Z"),$=await gt("/assets/flappy/fl-whale-dead.svg");for(let U=0;U<=9;U++){const Y=await gt("/assets/numbers/"+U+".png");_[U]={img:Y,width:Y.width}}y[0]={width:263,path:new Path2D("M109.307 2.6153C109 0.76915 107.153 -0.153917 105.615 0.461467C102.538 1.69224 98.8456 4.4615 96.6918 7.84611C93.9226 12.4615 88.0764 22.923 84.3841 25.0769C78.2303 28.4615 70.538 29.0769 62.8456 31.2307C51.7687 34.3076 40.6918 38.6153 30.8457 42.6153C25.6149 44.7691 0.691815 52.7692 0.0764302 58.923C-0.538954 64.1538 12.3841 65.0769 16.0764 65.3846C16.6918 65.3846 16.9995 65.6922 17.6148 65.9999C18.5379 66.923 21.3071 68.4615 25.3071 69.0769C30.8456 69.9999 44.0764 71.2307 54.2302 70.923C64.384 70.6153 68.3841 70 70.8457 70.923C73.3072 71.5384 83.7687 79.8461 90.2302 82.3076C96.6918 84.4615 104.384 85.6922 104.384 84.4615C104.384 83.2307 96.6918 76.7692 95.4611 75.5384C95.4611 75.5384 95.1533 75.2307 95.1533 74.923C93.6149 73.0768 94.538 70.3076 96.9995 70.3076C102.23 69.9999 110.23 69.0769 116.692 68.1538C127.461 66.3076 139.461 63.2307 141.615 63.5384C143.769 63.8461 150.846 68.4615 152.999 68.4615C155.461 68.4615 153.615 64.4615 155.461 63.5384C156.076 63.2307 156.692 62.923 157.307 62.3076C160.999 60.4615 164.999 59.2307 168.999 59.2307C169.615 59.2307 169.923 59.2307 170.23 59.2307C172.076 59.5384 178.538 66.923 181.307 68.1538C184.076 69.0769 186.23 69.9999 186.538 68.7691C186.538 67.5384 182.846 63.8461 183.153 62.6153C183.153 61.6922 186.538 60.1538 188.384 60.1538C190.23 60.1538 194.846 59.2307 196.692 60.7692C198.538 62.3076 203.461 76.1538 208.076 80.7692C212.384 85.3846 219.461 93.0769 221.307 91.5384C223.461 89.9999 220.384 86.3076 220.384 84.4615C220.384 82.6153 220.692 81.9999 220.692 80.4615C220.692 78.923 218.538 77.6922 218.846 76.4615C219.153 75.2307 220.076 73.6923 219.461 72.4615C219.153 71.5384 217.923 70.923 217.307 69.3846C216.999 68.4615 217.307 66.6153 217.307 65.3846C217.615 62.923 237.923 45.6922 240.999 43.5384C243.461 41.9999 247.153 38.6153 248.999 36.7692C249.615 36.1538 250.538 36.1538 251.461 36.1538C252.076 36.1538 252.692 36.1538 253.307 35.8461C254.846 35.2307 253.923 33.6922 255.153 32.7692C256.384 31.8461 263.769 28.7692 262.23 27.5384C261.923 27.2307 258.23 26.6153 252.999 28.4615C236.076 34.6153 201.615 50.3076 200.076 49.9999C197.923 49.6923 189.307 47.2307 188.076 45.3846C186.846 43.5384 185.615 42.923 185.923 41.3846C186.23 39.8461 188.384 38.3076 187.153 37.0769C186.538 36.4615 183.769 36.4615 181.307 37.3845C178.846 38.3076 176.692 39.8461 174.846 39.8461C171.153 39.5384 151.461 33.6923 146.538 32.4615C141.615 31.2307 123.769 29.0769 120.692 26.923C117.615 25.0769 112.692 22.6153 111.769 18.3076C110.846 13.6922 111.769 9.99996 110.846 6.30765C109.307 4.76919 109.307 3.53838 109.307 2.6153Z")},y[1]={width:404,path:new Path2D("M168.615 5.99991C168 1.69222 163.077 -0.76932 159.385 1.38453C155.385 3.53837 151.385 6.923 148.923 11.2307C144.615 18.3076 136 34.3076 129.846 37.6922C120.308 42.923 108.615 44.1538 96.9229 47.2307C79.9999 51.8461 62.7691 58.3076 47.6922 64.7692C39.6922 68.1538 1.53834 80.4614 0.307568 89.6922C-0.615508 96.4614 12.923 98.6153 20.6153 99.2307C23.6922 99.5384 26.4614 100.154 29.2306 101.692C31.3845 102.923 34.4614 104.154 38.7691 105.077C47.3845 106.615 67.6922 108.461 83.0768 108.154C98.4614 107.846 104.923 106.923 108.615 108.154C112.308 109.077 128.308 122 138.461 125.385C148.308 128.769 160.308 130.615 160 128.769C160 126.923 148.308 117.077 146.461 114.923C144.615 112.769 139.692 107.538 139.692 107.538C139.692 107.538 162.154 106.308 178.769 103.538C195.384 100.769 213.846 96.1538 217.231 96.4615C220.615 96.7692 231.077 103.846 234.769 104.154C238.461 104.461 235.692 98.3076 238.769 96.4615C241.846 94.6153 249.231 90.6153 249.231 90.6153C249.231 90.6153 258.461 89.6922 261.538 89.9999C264.615 90.3076 274.154 102 278.461 103.538C282.769 105.077 286.154 106.308 286.461 104.461C286.769 102.615 280.923 96.7691 281.231 95.2307C281.538 93.6922 286.461 91.2307 289.231 91.2307C292 91.2307 299.077 89.9999 301.846 92.1538C304.615 94.3076 312.308 115.538 319.077 122.923C325.846 130.308 336.308 141.692 339.692 139.538C342.769 137.385 338.461 131.538 338.461 128.769C338.461 126 339.077 125.077 339.077 122.615C339.077 120.154 336 118.615 336.308 116.461C336.615 114.308 338.461 112.461 337.231 110.308C336.615 109.077 334.769 107.846 334.154 105.385C333.846 103.846 333.846 101.077 334.154 99.5384C334.769 95.5384 365.538 69.3845 370.461 65.9999C375.385 62.6153 384.615 54.3076 384.615 54.3076C384.615 54.3076 387.077 55.5384 389.538 54.6153C391.692 53.6922 390.461 51.2307 392.308 49.6922C394.154 48.1537 405.231 43.2307 403.077 41.9999C402.461 41.6922 396.923 40.7691 389.231 43.5384C363.384 52.7691 310.461 76.7692 308 76.4615C304.615 76.1538 291.692 72.1538 289.538 69.3845C287.385 66.6153 285.846 65.3845 286.154 63.2307C286.461 60.7692 289.846 58.6153 288 56.4615C287.077 55.5384 282.769 55.5384 278.769 56.7691C275.077 57.9999 271.692 60.7691 268.923 60.4614C263.385 60.1537 232.923 50.923 225.231 49.0768C217.538 47.2307 190.461 43.8461 185.538 40.7691C180.615 37.6922 173.231 34.3076 172 27.2307C170.769 20.4615 172 14.6153 170.461 8.76915C168.923 8.15376 168.615 6.92299 168.615 5.99991Z")},Pe(),ae(),g=!0,pi(!1)})(),()=>{window.removeEventListener("flappy.whaleJump",q),window.removeEventListener("minigames.startGame",wt)}};function Dc(i){let t,e,s,r='<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-53rovw"><path d="M3.5 13.9977V6.41883C3.5 3.27884 6.85335 1.31464 9.53243 2.88691L16.0099 6.6786L22.4873 10.4703C25.1709 12.038 25.1709 15.9664 22.4873 17.5341L16.0099 21.3258L9.53243 25.1175C6.85335 26.6807 3.5 24.721 3.5 21.581V13.9977Z" fill="white"></path></svg>Play',n,a,o,l;return{c(){t=P("div"),e=P("div"),s=P("p"),s.innerHTML=r,n=N(),a=P("div"),this.h()},l(c){t=T(c,"DIV",{class:!0});var h=I(t);e=T(h,"DIV",{class:!0});var u=I(e);s=T(u,"P",{class:!0,"data-svelte-h":!0}),ge(s)!=="svelte-1lecp10"&&(s.innerHTML=r),u.forEach(C),n=j(h),a=T(h,"DIV",{class:!0}),I(a).forEach(C),h.forEach(C),this.h()},h(){x(s,"class","game-overlay__button svelte-53rovw"),x(e,"class","game-overlay__content svelte-53rovw"),x(a,"class","game-overlay__back svelte-53rovw"),x(t,"class","game-overlay svelte-53rovw")},m(c,h){G(c,t,h),A(t,e),A(e,s),A(t,n),A(t,a),o||(l=bt(s,"click",i[0]),o=!0)},p:dt,i:dt,o:dt,d(c){c&&C(t),o=!1,l()}}}function Vc(i){return[()=>{window.dispatchEvent(new Event("minigames.startGame"))}]}class to extends Ft{constructor(t){super(),Rt(this,t,Vc,Dc,Tt,{})}}function Gc(i){let t,e,s,r,n,a,o,l,c;return a=new to({}),{c(){t=P("div"),e=P("canvas"),s=N(),r=P("div"),n=N(),lt(a.$$.fragment),this.h()},l(h){t=T(h,"DIV",{class:!0});var u=I(t);e=T(u,"CANVAS",{id:!0,class:!0}),I(e).forEach(C),s=j(u),r=T(u,"DIV",{class:!0}),I(r).forEach(C),n=j(u),pt(a.$$.fragment,u),u.forEach(C),this.h()},h(){x(e,"id","flWhale"),x(e,"class","fl-whale__game svelte-1or92z3"),x(r,"class","fl-whale__game-blur svelte-1or92z3"),x(t,"class","fl-whale")},m(h,u){G(h,t,u),A(t,e),A(t,s),A(t,r),A(t,n),ht(a,t,null),o=!0,l||(c=bt(e,"click",i[0]),l=!0)},p:dt,i(h){o||(B(a.$$.fragment,h),o=!0)},o(h){V(a.$$.fragment,h),o=!1},d(h){h&&C(t),ct(a),l=!1,c()}}}function Hc(i){const t=Ds();let e;$e(()=>{window.addEventListener("flappy.gameEnded",({detail:n})=>{s(n)},{once:!0}),e=Rc()}),mi(()=>{e()});const s=n=>t("gameEnded",{isWon:!0,score:n});return[()=>{window.dispatchEvent(new Event("flappy.whaleJump"))}]}let Wc=class extends Ft{constructor(t){super(),Rt(this,t,Hc,Gc,Tt,{})}};var J=(i=>(i.Application="application",i.WebGLPipes="webgl-pipes",i.WebGLPipesAdaptor="webgl-pipes-adaptor",i.WebGLSystem="webgl-system",i.WebGPUPipes="webgpu-pipes",i.WebGPUPipesAdaptor="webgpu-pipes-adaptor",i.WebGPUSystem="webgpu-system",i.CanvasSystem="canvas-system",i.CanvasPipesAdaptor="canvas-pipes-adaptor",i.CanvasPipes="canvas-pipes",i.Asset="asset",i.LoadParser="load-parser",i.ResolveParser="resolve-parser",i.CacheParser="cache-parser",i.DetectionParser="detection-parser",i.MaskEffect="mask-effect",i.BlendMode="blend-mode",i.TextureSource="texture-source",i.Environment="environment",i.ShapeBuilder="shape-builder",i.Batcher="batcher",i))(J||{});const Ji=i=>{if(typeof i=="function"||typeof i=="object"&&i.extension){if(!i.extension)throw new Error("Extension class must have an extension object");i={...typeof i.extension!="object"?{type:i.extension}:i.extension,ref:i}}if(typeof i=="object")i={...i};else throw new Error("Invalid extension type");return typeof i.type=="string"&&(i.type=[i.type]),i},zs=(i,t)=>Ji(i).priority??t,re={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...i){return i.map(Ji).forEach(t=>{t.type.forEach(e=>{var s,r;return(r=(s=this._removeHandlers)[e])==null?void 0:r.call(s,t)})}),this},add(...i){return i.map(Ji).forEach(t=>{t.type.forEach(e=>{var n,a;const s=this._addHandlers,r=this._queue;s[e]?(a=s[e])==null||a.call(s,t):(r[e]=r[e]||[],(n=r[e])==null||n.push(t))})}),this},handle(i,t,e){var a;const s=this._addHandlers,r=this._removeHandlers;if(s[i]||r[i])throw new Error(`Extension type ${i} already has a handler`);s[i]=t,r[i]=e;const n=this._queue;return n[i]&&((a=n[i])==null||a.forEach(o=>t(o)),delete n[i]),this},handleByMap(i,t){return this.handle(i,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByNamedList(i,t,e=-1){return this.handle(i,s=>{t.findIndex(n=>n.name===s.name)>=0||(t.push({name:s.name,value:s.ref}),t.sort((n,a)=>zs(a.value,e)-zs(n.value,e)))},s=>{const r=t.findIndex(n=>n.name===s.name);r!==-1&&t.splice(r,1)})},handleByList(i,t,e=-1){return this.handle(i,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((r,n)=>zs(n,e)-zs(r,e)))},s=>{const r=t.indexOf(s.ref);r!==-1&&t.splice(r,1)})}},zc={extension:{type:J.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await ci(()=>import("./browserAll.O37FPeYp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)}},Uc={extension:{type:J.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await ci(()=>import("./webworkerAll.BH4GUUzX.js"),__vite__mapDeps([1,2]),import.meta.url)}};class oe{constructor(t,e,s){this._x=e||0,this._y=s||0,this._observer=t}clone(t){return new oe(t??this._observer,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}const Oc=Math.PI*2,Nc=180/Math.PI,jc=Math.PI/180;class se{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new se(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Ai.x=0,Ai.y=0,Ai}}const Ai=new se;class vt{constructor(t=1,e=0,s=0,r=1,n=0,a=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=a}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,r,n,a){return this.a=t,this.b=e,this.c=s,this.d=r,this.tx=n,this.ty=a,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new se;const s=t.x,r=t.y;return e.x=this.a*s+this.c*r+this.tx,e.y=this.b*s+this.d*r+this.ty,e}applyInverse(t,e){e=e||new se;const s=this.a,r=this.b,n=this.c,a=this.d,o=this.tx,l=this.ty,c=1/(s*a+n*-r),h=t.x,u=t.y;return e.x=a*c*h+-n*c*u+(l*n-o*a)*c,e.y=s*c*u+-r*c*h+(-l*s+o*r)*c,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),r=this.a,n=this.c,a=this.tx;return this.a=r*e-this.b*s,this.b=r*s+this.b*e,this.c=n*e-this.d*s,this.d=n*s+this.d*e,this.tx=a*e-this.ty*s,this.ty=a*s+this.ty*e,this}append(t){const e=this.a,s=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*s+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*s+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*s+t.ty*n+this.ty,this}appendFrom(t,e){const s=t.a,r=t.b,n=t.c,a=t.d,o=t.tx,l=t.ty,c=e.a,h=e.b,u=e.c,f=e.d;return this.a=s*c+r*u,this.b=s*h+r*f,this.c=n*c+a*u,this.d=n*h+a*f,this.tx=o*c+l*u+e.tx,this.ty=o*h+l*f+e.ty,this}setTransform(t,e,s,r,n,a,o,l,c){return this.a=Math.cos(o+c)*n,this.b=Math.sin(o+c)*n,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=t-(s*this.a+r*this.c),this.ty=e-(s*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,r=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,r=this.c,n=this.d,a=t.pivot,o=-Math.atan2(-r,n),l=Math.atan2(s,e),c=Math.abs(o+l);return c<1e-5||Math.abs(Oc-c)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=l),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx+(a.x*e+a.y*r),t.position.y=this.ty+(a.x*s+a.y*n),t}invert(){const t=this.a,e=this.b,s=this.c,r=this.d,n=this.tx,a=t*r-e*s;return this.a=r/a,this.b=-e/a,this.c=-s/a,this.d=t/a,this.tx=(s*this.ty-r*n)/a,this.ty=-(t*this.ty-e*n)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new vt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return Yc.identity()}static get shared(){return Xc.identity()}}const Xc=new vt,Yc=new vt,Oe=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ne=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],je=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Xe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tr=[],eo=[],Us=Math.sign;function qc(){for(let i=0;i<16;i++){const t=[];tr.push(t);for(let e=0;e<16;e++){const s=Us(Oe[i]*Oe[e]+je[i]*Ne[e]),r=Us(Ne[i]*Oe[e]+Xe[i]*Ne[e]),n=Us(Oe[i]*je[e]+je[i]*Xe[e]),a=Us(Ne[i]*je[e]+Xe[i]*Xe[e]);for(let o=0;o<16;o++)if(Oe[o]===s&&Ne[o]===r&&je[o]===n&&Xe[o]===a){t.push(o);break}}}for(let i=0;i<16;i++){const t=new vt;t.set(Oe[i],Ne[i],je[i],Xe[i],0,0),eo.push(t)}}qc();const Dt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:i=>Oe[i],uY:i=>Ne[i],vX:i=>je[i],vY:i=>Xe[i],inv:i=>i&8?i&15:-i&7,add:(i,t)=>tr[i][t],sub:(i,t)=>tr[i][Dt.inv(t)],rotate180:i=>i^4,isVertical:i=>(i&3)===2,byDirection:(i,t)=>Math.abs(i)*2<=Math.abs(t)?t>=0?Dt.S:Dt.N:Math.abs(t)*2<=Math.abs(i)?i>0?Dt.E:Dt.W:t>0?i>0?Dt.SE:Dt.SW:i>0?Dt.NE:Dt.NW,matrixAppendRotationInv:(i,t,e=0,s=0)=>{const r=eo[Dt.inv(t)];r.tx=e,r.ty=s,i.append(r)}},Os=[new se,new se,new se,new se];class Xt{constructor(t=0,e=0,s=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Xt(0,0,0,0)}clone(){return new Xt(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,s){const{width:r,height:n}=this;if(r<=0||n<=0)return!1;const a=this.x,o=this.y,l=a-s/2,c=a+r+s/2,h=o-s/2,u=o+n+s/2,f=a+s/2,d=a+r-s/2,m=o+s/2,g=o+n-s/2;return t>=l&&t<=c&&e>=h&&e<=u&&!(t>f&&t<d&&e>m&&e<g)}intersects(t,e){if(!e){const L=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=L)return!1;const E=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>E}const s=this.left,r=this.right,n=this.top,a=this.bottom;if(r<=s||a<=n)return!1;const o=Os[0].set(t.left,t.top),l=Os[1].set(t.left,t.bottom),c=Os[2].set(t.right,t.top),h=Os[3].set(t.right,t.bottom);if(c.x<=o.x||l.y<=o.y)return!1;const u=Math.sign(e.a*e.d-e.b*e.c);if(u===0||(e.apply(o,o),e.apply(l,l),e.apply(c,c),e.apply(h,h),Math.max(o.x,l.x,c.x,h.x)<=s||Math.min(o.x,l.x,c.x,h.x)>=r||Math.max(o.y,l.y,c.y,h.y)<=n||Math.min(o.y,l.y,c.y,h.y)>=a))return!1;const f=u*(l.y-o.y),d=u*(o.x-l.x),m=f*s+d*n,g=f*r+d*n,p=f*s+d*a,_=f*r+d*a;if(Math.max(m,g,p,_)<=f*o.x+d*o.y||Math.min(m,g,p,_)>=f*h.x+d*h.y)return!1;const y=u*(o.y-c.y),w=u*(c.x-o.x),b=y*s+w*n,v=y*r+w*n,S=y*s+w*a,k=y*r+w*a;return!(Math.max(b,v,S,k)<=y*o.x+w*o.y||Math.min(b,v,S,k)>=y*h.x+w*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=r,this.height=n-r,this}getBounds(t){return t=t||new Xt,t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const ki={default:-1};function Yt(i="default"){return ki[i]===void 0&&(ki[i]=-1),++ki[i]}const kn={},kt="8.0.0",Zc="8.3.4";function At(i,t,e=3){if(kn[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${i}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${i}`),console.warn(s))),kn[t]=!0}const so=()=>{};function Sn(i){return i+=i===0?1:0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1}function Ln(i){return!(i&i-1)&&!!i}function Kc(i){const t={};for(const e in i)i[e]!==void 0&&(t[e]=i[e]);return t}const Mn=Object.create(null);function $c(i){const t=Mn[i];return t===void 0&&(Mn[i]=Yt("resource")),t}const io=class ro extends ve{constructor(t={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,t={...ro.defaultOptions,...t},this.addressMode=t.addressMode,this.addressModeU=t.addressModeU??this.addressModeU,this.addressModeV=t.addressModeV??this.addressModeV,this.addressModeW=t.addressModeW??this.addressModeW,this.scaleMode=t.scaleMode,this.magFilter=t.magFilter??this.magFilter,this.minFilter=t.minFilter??this.minFilter,this.mipmapFilter=t.mipmapFilter??this.mipmapFilter,this.lodMinClamp=t.lodMinClamp,this.lodMaxClamp=t.lodMaxClamp,this.compare=t.compare,this.maxAnisotropy=t.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){At(kt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=$c(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};io.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Qc=io;const no=class ao extends ve{constructor(t={}){super(),this.options=t,this.uid=Yt("textureSource"),this._resourceType="textureSource",this._resourceId=Yt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,t={...ao.defaultOptions,...t},this.label=t.label??"",this.resource=t.resource,this.autoGarbageCollect=t.autoGarbageCollect,this._resolution=t.resolution,t.width?this.pixelWidth=t.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,t.height?this.pixelHeight=t.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=t.format,this.dimension=t.dimensions,this.mipLevelCount=t.mipLevelCount,this.autoGenerateMipmaps=t.autoGenerateMipmaps,this.sampleCount=t.sampleCount,this.antialias=t.antialias,this.alphaMode=t.alphaMode,this.style=new Qc(Kc(t)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){var e,s;this.style!==t&&((e=this._style)==null||e.off("change",this._onStyleChange,this),this._style=t,(s=this._style)==null||s.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Yt("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,s){s=s||this._resolution,t=t||this.width,e=e||this.height;const r=Math.round(t*s),n=Math.round(e*s);return this.width=r/s,this.height=n/s,this._resolution=s,this.pixelWidth===r&&this.pixelHeight===n?!1:(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId=Yt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Ln(this.pixelWidth)&&Ln(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};no.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Ve=no;class Lr extends Ve{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let s=t.format;s||(e instanceof Float32Array?s="rgba32float":e instanceof Int32Array||e instanceof Uint32Array?s="rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?s="rgba16uint":(e instanceof Int8Array,s="bgra8unorm")),super({...t,resource:e,format:s}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}Lr.extension=J.TextureSource;const Pn=new vt;class Jc{constructor(t,e){this.mapCoord=new vt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof e>"u"?this.clampMargin=t.width<10?0:.5:this.clampMargin=e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){var e;this.texture!==t&&((e=this._texture)==null||e.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],a=t[r+1];e[r]=n*s.a+a*s.c+s.tx,e[r+1]=n*s.b+a*s.d+s.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const s=t.orig,r=t.trim;r&&(Pn.set(s.width/r.width,0,0,s.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(Pn));const n=t.source,a=this.uClampFrame,o=this.clampMargin/n._resolution,l=this.clampOffset/n._resolution;return a[0]=(t.frame.x+o+l)/n.width,a[1]=(t.frame.y+o+l)/n.height,a[2]=(t.frame.x+t.frame.width-o+l)/n.width,a[3]=(t.frame.y+t.frame.height-o+l)/n.height,this.uClampOffset[0]=this.clampOffset/n.pixelWidth,this.uClampOffset[1]=this.clampOffset/n.pixelHeight,this.isSimple=t.frame.width===n.width&&t.frame.height===n.height&&t.rotate===0,!0}}class xt extends ve{constructor({source:t,label:e,frame:s,orig:r,trim:n,defaultAnchor:a,defaultBorders:o,rotate:l,dynamic:c}={}){if(super(),this.uid=Yt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Xt,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=(t==null?void 0:t.source)??new Ve,this.noFrame=!s,s)this.frame.copyFrom(s);else{const{width:h,height:u}=this._source;this.frame.width=h,this.frame.height=u}this.orig=r||this.frame,this.trim=n,this.rotate=l??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new Jc(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:s,height:r}=this._source,n=e.x/s,a=e.y/r,o=e.width/s,l=e.height/r;let c=this.rotate;if(c){const h=o/2,u=l/2,f=n+h,d=a+u;c=Dt.add(c,Dt.NW),t.x0=f+h*Dt.uX(c),t.y0=d+u*Dt.uY(c),c=Dt.add(c,2),t.x1=f+h*Dt.uX(c),t.y1=d+u*Dt.uY(c),c=Dt.add(c,2),t.x2=f+h*Dt.uX(c),t.y2=d+u*Dt.uY(c),c=Dt.add(c,2),t.x3=f+h*Dt.uX(c),t.y3=d+u*Dt.uY(c)}else t.x0=n,t.y0=a,t.x1=n+o,t.y1=a,t.x2=n+o,t.y2=a+l,t.x3=n,t.y3=a+l}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return At(kt,"Texture.baseTexture is now Texture.source"),this._source}}xt.EMPTY=new xt({label:"EMPTY",source:new Ve({label:"EMPTY"})});xt.EMPTY.destroy=so;xt.WHITE=new xt({source:new Lr({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});xt.WHITE.destroy=so;function tu(i,t,e,s){const{width:r,height:n}=e.orig,a=e.trim;if(a){const o=a.width,l=a.height;i.minX=a.x-t._x*r-s,i.maxX=i.minX+o,i.minY=a.y-t._y*n-s,i.maxY=i.minY+l}else i.minX=-t._x*r-s,i.maxX=i.minX+r,i.minY=-t._y*n-s,i.maxY=i.minY+n}const Tn=new vt;class Me{constructor(t=1/0,e=1/0,s=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Tn,this.minX=t,this.minY=e,this.maxX=s,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Xt);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Tn,this}set(t,e,s,r){this.minX=t,this.minY=e,this.maxX=s,this.maxY=r}addFrame(t,e,s,r,n){n||(n=this.matrix);const a=n.a,o=n.b,l=n.c,c=n.d,h=n.tx,u=n.ty;let f=this.minX,d=this.minY,m=this.maxX,g=this.maxY,p=a*t+l*e+h,_=o*t+c*e+u;p<f&&(f=p),_<d&&(d=_),p>m&&(m=p),_>g&&(g=_),p=a*s+l*e+h,_=o*s+c*e+u,p<f&&(f=p),_<d&&(d=_),p>m&&(m=p),_>g&&(g=_),p=a*t+l*r+h,_=o*t+c*r+u,p<f&&(f=p),_<d&&(d=_),p>m&&(m=p),_>g&&(g=_),p=a*s+l*r+h,_=o*s+c*r+u,p<f&&(f=p),_<d&&(d=_),p>m&&(m=p),_>g&&(g=_),this.minX=f,this.minY=d,this.maxX=m,this.maxY=g}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,s=this.minY,r=this.maxX,n=this.maxY,{a,b:o,c:l,d:c,tx:h,ty:u}=t;let f=a*e+l*s+h,d=o*e+c*s+u;this.minX=f,this.minY=d,this.maxX=f,this.maxY=d,f=a*r+l*s+h,d=o*r+c*s+u,this.minX=f<this.minX?f:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=d>this.maxY?d:this.maxY,f=a*e+l*n+h,d=o*e+c*n+u,this.minX=f<this.minX?f:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=d>this.maxY?d:this.maxY,f=a*r+l*n+h,d=o*r+c*n+u,this.minX=f<this.minX?f:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=f>this.maxX?f:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,s,r){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<s&&(this.minY=s),this.maxY>r&&(this.maxY=r),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Me(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,s,r){let n=this.minX,a=this.minY,o=this.maxX,l=this.maxY;r||(r=this.matrix);const c=r.a,h=r.b,u=r.c,f=r.d,d=r.tx,m=r.ty;for(let g=e;g<s;g+=2){const p=t[g],_=t[g+1],y=c*p+u*_+d,w=h*p+f*_+m;n=y<n?y:n,a=w<a?w:a,o=y>o?y:o,l=w>l?w:l}this.minX=n,this.minY=a,this.maxX=o,this.maxY=l}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}}var eu={grad:.9,turn:360,rad:360/(2*Math.PI)},Ee=function(i){return typeof i=="string"?i.length>0:typeof i=="number"},Kt=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*i)/e+0},pe=function(i,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),i>e?e:i>t?i:t},oo=function(i){return(i=isFinite(i)?i%360:0)>0?i:i+360},En=function(i){return{r:pe(i.r,0,255),g:pe(i.g,0,255),b:pe(i.b,0,255),a:pe(i.a)}},Si=function(i){return{r:Kt(i.r),g:Kt(i.g),b:Kt(i.b),a:Kt(i.a,3)}},su=/^#([0-9a-f]{3,8})$/i,Ns=function(i){var t=i.toString(16);return t.length<2?"0"+t:t},lo=function(i){var t=i.r,e=i.g,s=i.b,r=i.a,n=Math.max(t,e,s),a=n-Math.min(t,e,s),o=a?n===t?(e-s)/a:n===e?2+(s-t)/a:4+(t-e)/a:0;return{h:60*(o<0?o+6:o),s:n?a/n*100:0,v:n/255*100,a:r}},ho=function(i){var t=i.h,e=i.s,s=i.v,r=i.a;t=t/360*6,e/=100,s/=100;var n=Math.floor(t),a=s*(1-e),o=s*(1-(t-n)*e),l=s*(1-(1-t+n)*e),c=n%6;return{r:255*[s,o,a,a,l,s][c],g:255*[l,s,s,o,a,a][c],b:255*[a,a,l,s,s,o][c],a:r}},In=function(i){return{h:oo(i.h),s:pe(i.s,0,100),l:pe(i.l,0,100),a:pe(i.a)}},Bn=function(i){return{h:Kt(i.h),s:Kt(i.s),l:Kt(i.l),a:Kt(i.a,3)}},Fn=function(i){return ho((e=(t=i).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},Ss=function(i){return{h:(t=lo(i)).h,s:(r=(200-(e=t.s))*(s=t.v)/100)>0&&r<200?e*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,s,r},iu=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ru=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nu=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,au=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,er={string:[[function(i){var t=su.exec(i);return t?(i=t[1]).length<=4?{r:parseInt(i[0]+i[0],16),g:parseInt(i[1]+i[1],16),b:parseInt(i[2]+i[2],16),a:i.length===4?Kt(parseInt(i[3]+i[3],16)/255,2):1}:i.length===6||i.length===8?{r:parseInt(i.substr(0,2),16),g:parseInt(i.substr(2,2),16),b:parseInt(i.substr(4,2),16),a:i.length===8?Kt(parseInt(i.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(i){var t=nu.exec(i)||au.exec(i);return t?t[2]!==t[4]||t[4]!==t[6]?null:En({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(i){var t=iu.exec(i)||ru.exec(i);if(!t)return null;var e,s,r=In({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(eu[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Fn(r)},"hsl"]],object:[[function(i){var t=i.r,e=i.g,s=i.b,r=i.a,n=r===void 0?1:r;return Ee(t)&&Ee(e)&&Ee(s)?En({r:Number(t),g:Number(e),b:Number(s),a:Number(n)}):null},"rgb"],[function(i){var t=i.h,e=i.s,s=i.l,r=i.a,n=r===void 0?1:r;if(!Ee(t)||!Ee(e)||!Ee(s))return null;var a=In({h:Number(t),s:Number(e),l:Number(s),a:Number(n)});return Fn(a)},"hsl"],[function(i){var t=i.h,e=i.s,s=i.v,r=i.a,n=r===void 0?1:r;if(!Ee(t)||!Ee(e)||!Ee(s))return null;var a=function(o){return{h:oo(o.h),s:pe(o.s,0,100),v:pe(o.v,0,100),a:pe(o.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(n)});return ho(a)},"hsv"]]},Rn=function(i,t){for(var e=0;e<t.length;e++){var s=t[e][0](i);if(s)return[s,t[e][1]]}return[null,void 0]},ou=function(i){return typeof i=="string"?Rn(i.trim(),er.string):typeof i=="object"&&i!==null?Rn(i,er.object):[null,void 0]},Li=function(i,t){var e=Ss(i);return{h:e.h,s:pe(e.s+100*t,0,100),l:e.l,a:e.a}},Mi=function(i){return(299*i.r+587*i.g+114*i.b)/1e3/255},Dn=function(i,t){var e=Ss(i);return{h:e.h,s:e.s,l:pe(e.l+100*t,0,100),a:e.a}},sr=function(){function i(t){this.parsed=ou(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return i.prototype.isValid=function(){return this.parsed!==null},i.prototype.brightness=function(){return Kt(Mi(this.rgba),2)},i.prototype.isDark=function(){return Mi(this.rgba)<.5},i.prototype.isLight=function(){return Mi(this.rgba)>=.5},i.prototype.toHex=function(){return t=Si(this.rgba),e=t.r,s=t.g,r=t.b,a=(n=t.a)<1?Ns(Kt(255*n)):"","#"+Ns(e)+Ns(s)+Ns(r)+a;var t,e,s,r,n,a},i.prototype.toRgb=function(){return Si(this.rgba)},i.prototype.toRgbString=function(){return t=Si(this.rgba),e=t.r,s=t.g,r=t.b,(n=t.a)<1?"rgba("+e+", "+s+", "+r+", "+n+")":"rgb("+e+", "+s+", "+r+")";var t,e,s,r,n},i.prototype.toHsl=function(){return Bn(Ss(this.rgba))},i.prototype.toHslString=function(){return t=Bn(Ss(this.rgba)),e=t.h,s=t.s,r=t.l,(n=t.a)<1?"hsla("+e+", "+s+"%, "+r+"%, "+n+")":"hsl("+e+", "+s+"%, "+r+"%)";var t,e,s,r,n},i.prototype.toHsv=function(){return t=lo(this.rgba),{h:Kt(t.h),s:Kt(t.s),v:Kt(t.v),a:Kt(t.a,3)};var t},i.prototype.invert=function(){return Ae({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},i.prototype.saturate=function(t){return t===void 0&&(t=.1),Ae(Li(this.rgba,t))},i.prototype.desaturate=function(t){return t===void 0&&(t=.1),Ae(Li(this.rgba,-t))},i.prototype.grayscale=function(){return Ae(Li(this.rgba,-1))},i.prototype.lighten=function(t){return t===void 0&&(t=.1),Ae(Dn(this.rgba,t))},i.prototype.darken=function(t){return t===void 0&&(t=.1),Ae(Dn(this.rgba,-t))},i.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},i.prototype.alpha=function(t){return typeof t=="number"?Ae({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Kt(this.rgba.a,3);var e},i.prototype.hue=function(t){var e=Ss(this.rgba);return typeof t=="number"?Ae({h:t,s:e.s,l:e.l,a:e.a}):Kt(e.h)},i.prototype.isEqual=function(t){return this.toHex()===Ae(t).toHex()},i}(),Ae=function(i){return i instanceof sr?i:new sr(i)},Vn=[],lu=function(i){i.forEach(function(t){Vn.indexOf(t)<0&&(t(sr,er),Vn.push(t))})};function hu(i,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in e)s[e[r]]=r;var n={};i.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,c=s[this.toHex()];if(c)return c;if(a!=null&&a.closest){var h=this.toRgb(),u=1/0,f="black";if(!n.length)for(var d in e)n[d]=new i(e[d]).toRgb();for(var m in e){var g=(o=h,l=n[m],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));g<u&&(u=g,f=m)}return f}},t.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":e[o];return l?new i(l).toRgb():null},"name"])}lu([hu]);const ls=class vs{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof vs)this._value=this._cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,t))&&(this._value=this._cloneSource(t),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}_isSourceEqual(t,e){const s=typeof t;if(s!==typeof e)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((n,a)=>n===e[a]);if(t!==null&&e!==null){const n=Object.keys(t),a=Object.keys(e);return n.length!==a.length?!1:n.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,s,r]=this._components;return{r:t,g:e,b:s,a:r}}toRgb(){const[t,e,s]=this._components;return{r:t,g:e,b:s}}toRgbaString(){const[t,e,s]=this.toUint8RgbArray();return`rgba(${t},${e},${s},${this.alpha})`}toUint8RgbArray(t){const[e,s,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb,t[0]=Math.round(e*255),t[1]=Math.round(s*255),t[2]=Math.round(r*255),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t=t||this._arrayRgba;const[e,s,r,n]=this._components;return t[0]=e,t[1]=s,t[2]=r,t[3]=n,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t=t||this._arrayRgb;const[e,s,r]=this._components;return t[0]=e,t[1]=s,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,e,s]=this.toUint8RgbArray();return(s<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,s,r,n]=vs._temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=s,this._components[2]*=r,this._components[3]*=n,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let s=this._int>>16&255,r=this._int>>8&255,n=this._int&255;return e&&(s=s*t+.5|0,r=r*t+.5|0,n=n*t+.5|0),(t*255<<24)+(s<<16)+(r<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(t){let e,s,r,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const a=t;e=(a>>16&255)/255,s=(a>>8&255)/255,r=(a&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,s,r,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,s,r,n=255]=t,e/=255,s/=255,r/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=vs.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const a=Ae(t);a.isValid()&&({r:e,g:s,b:r,a:n}=a.rgba,e/=255,s/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=s,this._components[2]=r,this._components[3]=n,this._refreshInt();else throw new Error(`Unable to convert color ${t}`)}_refreshInt(){this._clamp(this._components);const[t,e,s]=this._components;this._int=(t*255<<16)+(e*255<<8)+(s*255|0)}_clamp(t,e=0,s=1){return typeof t=="number"?Math.min(Math.max(t,e),s):(t.forEach((r,n)=>{t[n]=Math.min(Math.max(r,e),s)}),t)}static isColorLike(t){return typeof t=="number"||typeof t=="string"||t instanceof Number||t instanceof vs||Array.isArray(t)||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t.r!==void 0&&t.g!==void 0&&t.b!==void 0||t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0||t.h!==void 0&&t.s!==void 0&&t.l!==void 0&&t.a!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0||t.h!==void 0&&t.s!==void 0&&t.v!==void 0&&t.a!==void 0}};ls.shared=new ls;ls._temp=new ls;ls.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Ut=ls;const cu={cullArea:null,cullable:!1,cullableChildren:!0};class Mr{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){var s;let e;return this._index>0?e=this._pool[--this._index]:e=new this._classType,(s=e.init)==null||s.call(e,t),e}return(t){var e;(e=t.reset)==null||e.call(t),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class uu{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new Mr(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const s=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[s]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}const Be=new uu;function du(i,t,e){const s=i.length;let r;if(t>=s||e===0)return;e=t+e>s?s-t:e;const n=s-e;for(r=t;r<n;++r)i[r]=i[r+e];i.length=n}const fu={allowChildren:!0,removeChildren(i=0,t){const e=t??this.children.length,s=e-i,r=[];if(s>0&&s<=e){for(let a=e-1;a>=i;a--){const o=this.children[a];o&&(r.push(o),o.parent=null)}du(this.children,i,e);const n=this.renderGroup||this.parentRenderGroup;n&&n.removeChildren(r);for(let a=0;a<r.length;++a)this.emit("childRemoved",r[a],this,a),r[a].emit("removed",this);return r}else if(s===0&&this.children.length===0)return r;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(i){const t=this.getChildAt(i);return this.removeChild(t)},getChildAt(i){if(i<0||i>=this.children.length)throw new Error(`getChildAt: Index (${i}) does not exist.`);return this.children[i]},setChildIndex(i,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);this.getChildIndex(i),this.addChildAt(i,t)},getChildIndex(i){const t=this.children.indexOf(i);if(t===-1)throw new Error("The supplied Container must be a child of the caller");return t},addChildAt(i,t){this.allowChildren||At(kt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:e}=this;if(t<0||t>e.length)throw new Error(`${i}addChildAt: The index ${t} supplied is out of bounds ${e.length}`);if(i.parent){const r=i.parent.children.indexOf(i);if(i.parent===this&&r===t)return i;r!==-1&&i.parent.children.splice(r,1)}t===e.length?e.push(i):e.splice(t,0,i),i.parent=this,i.didChange=!0,i.didViewUpdate=!1,i._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(i),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",i,this,t),i.emit("added",this),i},swapChildren(i,t){if(i===t)return;const e=this.getChildIndex(i),s=this.getChildIndex(t);this.children[e]=t,this.children[s]=i;const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var i;(i=this.parent)==null||i.removeChild(this)},reparentChild(...i){return i.length===1?this.reparentChildAt(i[0],this.children.length):(i.forEach(t=>this.reparentChildAt(t,this.children.length)),i[0])},reparentChildAt(i,t){if(i.parent===this)return this.setChildIndex(i,t),i;const e=i.worldTransform.clone();i.removeFromParent(),this.addChildAt(i,t);const s=this.worldTransform.clone();return s.invert(),e.prepend(s),i.setFromMatrix(e),i}};class Gn{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}class mu{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const s=this._tests[e];if(s.test(t))return Be.get(s.maskClass,t)}return t}returnMaskEffect(t){Be.return(t)}}const ir=new mu;re.handleByList(J.MaskEffect,ir._effectClasses);const pu={_maskEffect:null,_filterEffect:null,effects:[],addEffect(i){if(this.effects.indexOf(i)!==-1)return;this.effects.push(i),this.effects.sort((s,r)=>s.priority-r.priority);const e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0),this._updateIsSimple()},removeEffect(i){const t=this.effects.indexOf(i);t!==-1&&(this.effects.splice(t,1),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateIsSimple())},set mask(i){const t=this._maskEffect;(t==null?void 0:t.mask)!==i&&(t&&(this.removeEffect(t),ir.returnMaskEffect(t),this._maskEffect=null),i!=null&&(this._maskEffect=ir.getMaskEffect(i),this.addEffect(this._maskEffect)))},get mask(){var i;return(i=this._maskEffect)==null?void 0:i.mask},set filters(i){var n;!Array.isArray(i)&&i&&(i=[i]);const t=this._filterEffect||(this._filterEffect=new Gn);i=i;const e=(i==null?void 0:i.length)>0,s=((n=t.filters)==null?void 0:n.length)>0,r=e!==s;i=Array.isArray(i)?i.slice(0):i,t.filters=Object.freeze(i),r&&(e?this.addEffect(t):(this.removeEffect(t),t.filters=i??null))},get filters(){var i;return(i=this._filterEffect)==null?void 0:i.filters},set filterArea(i){this._filterEffect||(this._filterEffect=new Gn),this._filterEffect.filterArea=i},get filterArea(){var i;return(i=this._filterEffect)==null?void 0:i.filterArea}},gu={label:null,get name(){return At(kt,"Container.name property has been removed, use Container.label instead"),this.label},set name(i){At(kt,"Container.name property has been removed, use Container.label instead"),this.label=i},getChildByName(i,t=!1){return this.getChildByLabel(i,t)},getChildByLabel(i,t=!1){const e=this.children;for(let s=0;s<e.length;s++){const r=e[s];if(r.label===i||i instanceof RegExp&&i.test(r.label))return r}if(t)for(let s=0;s<e.length;s++){const n=e[s].getChildByLabel(i,!0);if(n)return n}return null},getChildrenByLabel(i,t=!1,e=[]){const s=this.children;for(let r=0;r<s.length;r++){const n=s[r];(n.label===i||i instanceof RegExp&&i.test(n.label))&&e.push(n)}if(t)for(let r=0;r<s.length;r++)s[r].getChildrenByLabel(i,!0,e);return e}},Fe=new Mr(vt),hs=new Mr(Me);function co(i,t,e){e.clear();let s,r;return i.parent?t?s=i.parent.worldTransform:(r=Fe.get().identity(),s=ui(i,r)):s=vt.IDENTITY,uo(i,e,s,t),r&&Fe.return(r),e.isValid||e.set(0,0,0,0),e}function uo(i,t,e,s){var o,l;if(!i.visible||!i.measurable)return;let r;s?r=i.worldTransform:(i.updateLocalTransform(),r=Fe.get(),r.appendFrom(i.localTransform,e));const n=t,a=!!i.effects.length;if(a&&(t=hs.get().clear()),i.boundsArea)t.addRect(i.boundsArea,r);else{i.addBounds&&(t.matrix=r,i.addBounds(t));for(let c=0;c<i.children.length;c++)uo(i.children[c],t,r,s)}if(a){for(let c=0;c<i.effects.length;c++)(l=(o=i.effects[c]).addBounds)==null||l.call(o,t);n.addBounds(t,vt.IDENTITY),hs.return(t)}s||Fe.return(r)}function ui(i,t){const e=i.parent;return e&&(ui(e,t),e.updateLocalTransform(),t.append(e.localTransform)),t}let Pi=0;const Hn=500;function Ot(...i){Pi!==Hn&&(Pi++,Pi===Hn?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...i))}function fo(i,t,e){return t.clear(),e||(e=vt.IDENTITY),mo(i,t,e,i,!0),t.isValid||t.set(0,0,0,0),t}function mo(i,t,e,s,r){var l,c;let n;if(r)n=Fe.get(),n=e.copyTo(n);else{if(!i.visible||!i.measurable)return;i.updateLocalTransform();const h=i.localTransform;n=Fe.get(),n.appendFrom(h,e)}const a=t,o=!!i.effects.length;if(o&&(t=hs.get().clear()),i.boundsArea)t.addRect(i.boundsArea,n);else{i.renderPipeId&&(t.matrix=n,i.addBounds(t));const h=i.children;for(let u=0;u<h.length;u++)mo(h[u],t,n,s,!1)}if(o){for(let h=0;h<i.effects.length;h++)(c=(l=i.effects[h]).addLocalBounds)==null||c.call(l,t,s);a.addBounds(t,vt.IDENTITY),hs.return(t)}Fe.return(n)}function po(i,t){const e=i.children;for(let s=0;s<e.length;s++){const r=e[s],n=r.uid,a=(r._didViewChangeTick&65535)<<16|r._didContainerChangeTick&65535,o=t.index;(t.data[o]!==n||t.data[o+1]!==a)&&(t.data[t.index]=n,t.data[t.index+1]=a,t.didChange=!0),t.index=o+2,r.children.length&&po(r,t)}return t.didChange}const _u=new vt,yu={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(i,t){const e=Math.sign(this.scale.x)||1;t!==0?this.scale.x=i/t*e:this.scale.x=e},_setHeight(i,t){const e=Math.sign(this.scale.y)||1;t!==0?this.scale.y=i/t*e:this.scale.y=e},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Me});const i=this._localBoundsCacheData;return i.index=1,i.didChange=!1,i.data[0]!==this._didViewChangeTick&&(i.didChange=!0,i.data[0]=this._didViewChangeTick),po(this,i),i.didChange&&fo(this,i.localBounds,_u),i.localBounds},getBounds(i,t){return co(this,i,t||new Me)}},bu={_onRender:null,set onRender(i){const t=this.renderGroup||this.parentRenderGroup;if(!i){this._onRender&&(t==null||t.removeOnRender(this)),this._onRender=null;return}this._onRender||t==null||t.addOnRender(this),this._onRender=i},get onRender(){return this._onRender}},wu={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(i){this._zIndex!==i&&(this._zIndex=i,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(xu))}};function xu(i,t){return i._zIndex-t._zIndex}const vu={getGlobalPosition(i=new se,t=!1){return this.parent?this.parent.toGlobal(this._position,i,t):(i.x=this._position.x,i.y=this._position.y),i},toGlobal(i,t,e=!1){if(!e){this.updateLocalTransform();const s=ui(this,new vt);return s.append(this.localTransform),s.apply(i,t)}return this.worldTransform.apply(i,t)},toLocal(i,t,e,s){if(t&&(i=t.toGlobal(i,e,s)),!s){this.updateLocalTransform();const r=ui(this,new vt);return r.append(this.localTransform),r.applyInverse(i,e)}return this.worldTransform.applyInverse(i,e)}};let Cu=0;class go{constructor(){this.uid=Yt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.tick=0}reset(){this.instructionSize=0,this.tick=Cu++}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}class Au{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new vt,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new go,this._onRenderContainers=[]}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let s=0;s<e.length;s++)this.addChild(e[s])}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup){this.addRenderGroupChild(t.renderGroup);return}t._onRender&&this.addOnRender(t);const e=t.children;for(let s=0;s<e.length;s++)this.addChild(e[s])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup){this._removeRenderGroupChild(t.renderGroup);return}const e=t.children;for(let s=0;s<e.length;s++)this.removeChild(e[s])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(t.didViewUpdate=!1,this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t))}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender()}destroy(){this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let s=0;s<e.length;s++)this._getChildren(e[s],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const s=t.children;for(let r=0;r<s.length;r++)this._getChildren(s[r],e);return e}}function ku(i,t,e={}){for(const s in t)!e[s]&&t[s]!==void 0&&(i[s]=t[s])}const Ti=new oe(null),Ei=new oe(null),Ii=new oe(null,1,1),Wn=1,Su=2,Bi=4;class ie extends ve{constructor(t={}){var e,s;super(),this.uid=Yt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new vt,this.relativeGroupTransform=new vt,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new oe(this,0,0),this._scale=Ii,this._pivot=Ei,this._skew=Ti,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],ku(this,t,{children:!0,parent:!0,effects:!0}),(e=t.children)==null||e.forEach(r=>this.addChild(r)),(s=t.parent)==null||s.addChild(this)}static mixin(t){Object.defineProperties(ie.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=t&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...t){if(this.allowChildren||At(kt,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let r=0;r<t.length;r++)this.addChild(t[r]);return t[0]}const e=t[0];if(e.parent===this)return this.children.splice(this.children.indexOf(e),1),this.children.push(e),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),e;e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e.didViewUpdate=!1,e._updateFlags=15;const s=this.renderGroup||this.parentRenderGroup;return s&&s.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,e._zIndex!==0&&e.depthOfChildModified(),e}removeChild(...t){if(t.length>1){for(let r=0;r<t.length;r++)this.removeChild(t[r]);return t[0]}const e=t[0],s=this.children.indexOf(e);return s>-1&&(this._didViewChangeTick++,this.children.splice(s,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parent=null,this.emit("childRemoved",e,this,s),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),this.renderGroup=Be.get(Au,this),this.groupTransform=vt.IDENTITY,t==null||t.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t==null||t.removeChild(this),Be.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t==null||t.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new vt),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*Nc}set angle(t){this.rotation=t*jc}get pivot(){return this._pivot===Ei&&(this._pivot=new oe(this,0,0)),this._pivot}set pivot(t){this._pivot===Ei&&(this._pivot=new oe(this,0,0)),typeof t=="number"?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===Ti&&(this._skew=new oe(this,0,0)),this._skew}set skew(t){this._skew===Ti&&(this._skew=new oe(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===Ii&&(this._scale=new oe(this,1,1)),this._scale}set scale(t){this._scale===Ii&&(this._scale=new oe(this,0,0)),typeof t=="number"?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const s=this.getLocalBounds();typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,s.width),e!==void 0&&this._setHeight(e,s.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set(typeof t.x=="number"?t.x:this.position.x,typeof t.y=="number"?t.y:this.position.y),this.scale.set(typeof t.scaleX=="number"?t.scaleX||1:this.scale.x,typeof t.scaleY=="number"?t.scaleY||1:this.scale.y),this.rotation=typeof t.rotation=="number"?t.rotation:this.rotation,this.skew.set(typeof t.skewX=="number"?t.skewX:this.skew.x,typeof t.skewY=="number"?t.skewY:this.skew.y),this.pivot.set(typeof t.pivotX=="number"?t.pivotX:this.pivot.x,typeof t.pivotY=="number"?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,s=this._scale,r=this._pivot,n=this._position,a=s._x,o=s._y,l=r._x,c=r._y;e.a=this._cx*a,e.b=this._sx*a,e.c=this._cy*o,e.d=this._sy*o,e.tx=n._x-(l*e.a+c*e.c),e.ty=n._y-(l*e.b+c*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=Wn,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const s=Ut.shared.setValue(t??16777215).toBgrNumber();s!==this.localColor&&(this.localColor=s,this._updateFlags|=Wn,this._onUpdate())}get tint(){const t=this.localColor;return((t&255)<<16)+(t&65280)+(t>>16&255)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Su,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(t){const e=t?2:0;(this.localDisplayStatus&2)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Bi,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(t){const e=t?0:4;(this.localDisplayStatus&4)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Bi,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(t){const e=t?1:0;(this.localDisplayStatus&1)!==e&&(this._updateFlags|=Bi,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(t=!1){var r;if(this.destroyed)return;this.destroyed=!0;const e=this.removeChildren(0,this.children.length);if(this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.children)for(let n=0;n<e.length;++n)e[n].destroy(t);(r=this.renderGroup)==null||r.destroy(),this.renderGroup=null}}ie.mixin(fu);ie.mixin(vu);ie.mixin(bu);ie.mixin(yu);ie.mixin(pu);ie.mixin(gu);ie.mixin(wu);ie.mixin(cu);class Pr extends ie{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=0,this._lastInstructionTick=-1,this._bounds=new Me(0,1,0,0),this._boundsDirty=!0}_updateBounds(){}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:s,y:r}=t;return s>=e.minX&&s<=e.maxX&&r>=e.minY&&r<=e.maxY}destroy(t){super.destroy(t),this._bounds=null}}class Ie extends Pr{constructor(t=xt.EMPTY){t instanceof xt&&(t={texture:t});const{texture:e=xt.EMPTY,anchor:s,roundPixels:r,width:n,height:a,...o}=t;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._didSpriteUpdate=!1,this._sourceBounds={minX:0,maxX:1,minY:0,maxY:0},this._sourceBoundsDirty=!0,this._anchor=new oe({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=r??!1,n!==void 0&&(this.width=n),a!==void 0&&(this.height=a)}static from(t,e=!1){return t instanceof xt?new Ie(t):new Ie(xt.from(t,e))}set texture(t){t||(t=xt.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get sourceBounds(){return this._sourceBoundsDirty&&(this._updateSourceBounds(),this._sourceBoundsDirty=!1),this._sourceBounds}containsPoint(t){const e=this.sourceBounds;return t.x>=e.maxX&&t.x<=e.minX&&t.y>=e.maxY&&t.y<=e.minY}addBounds(t){const e=this._texture.trim?this.sourceBounds:this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}onViewUpdate(){if(this._didViewChangeTick++,this._didSpriteUpdate=!0,this._sourceBoundsDirty=this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}_updateBounds(){tu(this._bounds,this._anchor,this._texture,0)}_updateSourceBounds(){const t=this._anchor,e=this._texture,s=this._sourceBounds,{width:r,height:n}=e.orig;s.maxX=-t._x*r,s.minX=s.maxX+r,s.maxY=-t._y*n,s.minY=s.maxY+n}destroy(t=!1){if(super.destroy(t),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._texture.destroy(s)}this._texture=null,this._bounds=null,this._sourceBounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this._texture.orig.width),e!==void 0&&this._setHeight(e,this._texture.orig.height)}}const Lu=new Me;function _o(i,t,e){const s=Lu;i.measurable=!0,co(i,e,s),t.addBoundsMask(s),i.measurable=!1}function yo(i,t,e){const s=hs.get();i.measurable=!0;const r=Fe.get().identity(),n=bo(i,e,r);fo(i,s,n),i.measurable=!1,t.addBoundsMask(s),Fe.return(r),hs.return(s)}function bo(i,t,e){return i?(i!==t&&(bo(i.parent,t,e),i.updateLocalTransform(),e.append(i.localTransform)),e):(Ot("Mask bounds, renderable is not inside the root container"),e)}class wo{constructor(t){this.priority=0,this.pipe="alphaMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof Ie),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){_o(this.mask,t,e)}addLocalBounds(t,e){yo(this.mask,t,e)}containsPoint(t,e){const s=this.mask;return e(s,t)}destroy(){this.reset()}static test(t){return t instanceof Ie}}wo.extension=J.MaskEffect;class xo{constructor(t){this.priority=0,this.pipe="colorMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return typeof t=="number"}}xo.extension=J.MaskEffect;class vo{constructor(t){this.priority=0,this.pipe="stencilMask",t!=null&&t.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){_o(this.mask,t,e)}addLocalBounds(t,e){yo(this.mask,t,e)}containsPoint(t,e){const s=this.mask;return e(s,t)}destroy(){this.reset()}static test(t){return t instanceof ie}}vo.extension=J.MaskEffect;const Mu={createCanvas:(i,t)=>{const e=document.createElement("canvas");return e.width=i,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(i,t)=>fetch(i,t),parseXML:i=>new DOMParser().parseFromString(i,"text/xml")};let zn=Mu;const Ht={get(){return zn},set(i){zn=i}};class Co extends Ve{constructor(t){t.resource||(t.resource=Ht.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity;const e=t.resource;(this.pixelWidth!==e.width||this.pixelWidth!==e.height)&&this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,s=this._resolution){const r=super.resize(t,e,s);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Co.extension=J.TextureSource;class fs extends Ve{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=Ht.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,Ot("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}fs.extension=J.TextureSource;var rr=(i=>(i[i.INTERACTION=50]="INTERACTION",i[i.HIGH=25]="HIGH",i[i.NORMAL=0]="NORMAL",i[i.LOW=-25]="LOW",i[i.UTILITY=-50]="UTILITY",i))(rr||{});class Fi{constructor(t,e=null,s=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=s,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Ao=class ce{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Fi(null,null,1/0),this.deltaMS=1/ce.targetFPMS,this.elapsedMS=1/ce.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=rr.NORMAL){return this._addListener(new Fi(t,e,s))}addOnce(t,e,s=rr.NORMAL){return this._addListener(new Fi(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(!e)t.connect(s);else{for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s.match(t,e)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ce.targetFPMS;const s=this._head;let r=s.next;for(;r;)r=r.emit(this);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,e)/1e3,ce.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ce._shared){const t=ce._shared=new ce;t.autoStart=!0,t._protected=!0}return ce._shared}static get system(){if(!ce._system){const t=ce._system=new ce;t.autoStart=!0,t._protected=!0}return ce._system}};Ao.targetFPMS=.06;let js=Ao,Ri;async function ko(){return Ri??(Ri=(async()=>{var a;const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(o=>{const l=document.createElement("video");l.onloadeddata=()=>o(l),l.onerror=()=>o(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!e)return"premultiply-alpha-on-upload";const s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(r),t.deleteTexture(s),(a=t.getExtension("WEBGL_lose_context"))==null||a.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),Ri}const gi=class So extends Ve{constructor(t){super(t),this.isReady=!1,this.uploadMethodId="video",t={...So.defaultOptions,...t},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this.alphaMode=t.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=js.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await ko(),this._load=new Promise((s,r)=>{this.isValid?s(this):(this._resolve=s,this._reject=r,e.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(js.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(js.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(js.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};gi.extension=J.TextureSource;gi.defaultOptions={...Ve.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};gi.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ei=gi;const be=(i,t,e=!1)=>(Array.isArray(i)||(i=[i]),t?i.map(s=>typeof s=="string"||e?t(s):s):i);class Pu{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||Ot(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=be(t);let r;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.test(e)){r=c.getCacheableAssets(s,e);break}}const n=new Map(Object.entries(r||{}));r||s.forEach(l=>{n.set(l,e)});const a=[...n.keys()],o={cacheKeys:a,keys:s};s.forEach(l=>{this._cacheMap.set(l,o)}),a.forEach(l=>{const c=r?r[l]:e;this._cache.has(l)&&this._cache.get(l)!==c&&Ot("[Cache] already has key:",l),this._cache.set(l,n.get(l))})}remove(t){if(!this._cacheMap.has(t)){Ot(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(r=>{this._cache.delete(r)}),e.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Vt=new Pu,nr=[];re.handleByList(J.TextureSource,nr);function Lo(i={}){const t=i&&i.resource,e=t?i.resource:i,s=t?i:{resource:i};for(let r=0;r<nr.length;r++){const n=nr[r];if(n.test(e))return new n(s)}throw new Error(`Could not find a source type for resource: ${s.resource}`)}function Tu(i={},t=!1){const e=i&&i.resource,s=e?i.resource:i,r=e?i:{resource:i};if(!t&&Vt.has(s))return Vt.get(s);const n=new xt({source:Lo(r)});return n.on("destroy",()=>{Vt.has(s)&&Vt.remove(s)}),t||Vt.set(s,n),n}function Eu(i,t=!1){return typeof i=="string"?Vt.get(i):i instanceof Ve?new xt({source:i}):Tu(i,t)}xt.from=Eu;Ve.from=Lo;re.add(wo,xo,vo,ei,fs,Co,Lr);var ze=(i=>(i[i.Low=0]="Low",i[i.Normal=1]="Normal",i[i.High=2]="High",i))(ze||{});function _e(i){if(typeof i!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(i)}`)}function ys(i){return i.split("?")[0].split("#")[0]}function Iu(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bu(i,t,e){return i.replace(new RegExp(Iu(t),"g"),e)}function Fu(i,t){let e="",s=0,r=-1,n=0,a=-1;for(let o=0;o<=i.length;++o){if(o<i.length)a=i.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(r===o-1||n===1))if(r!==o-1&&n===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",s=0):(e=e.slice(0,l),s=e.length-1-e.lastIndexOf("/")),r=o,n=0;continue}}else if(e.length===2||e.length===1){e="",s=0,r=o,n=0;continue}}}else e.length>0?e+=`/${i.slice(r+1,o)}`:e=i.slice(r+1,o),s=o-r-1;r=o,n=0}else a===46&&n!==-1?++n:n=-1}return e}const ue={toPosix(i){return Bu(i,"\\","/")},isUrl(i){return/^https?:/.test(this.toPosix(i))},isDataUrl(i){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(i)},isBlobUrl(i){return i.startsWith("blob:")},hasProtocol(i){return/^[^/:]+:/.test(this.toPosix(i))},getProtocol(i){_e(i),i=this.toPosix(i);const t=/^file:\/\/\//.exec(i);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(i);return e?e[0]:""},toAbsolute(i,t,e){if(_e(i),this.isDataUrl(i)||this.isBlobUrl(i))return i;const s=ys(this.toPosix(t??Ht.get().getBaseUrl())),r=ys(this.toPosix(e??this.rootname(s)));return i=this.toPosix(i),i.startsWith("/")?ue.join(r,i.slice(1)):this.isAbsolute(i)?i:this.join(s,i)},normalize(i){if(_e(i),i.length===0)return".";if(this.isDataUrl(i)||this.isBlobUrl(i))return i;i=this.toPosix(i);let t="";const e=i.startsWith("/");this.hasProtocol(i)&&(t=this.rootname(i),i=i.slice(t.length));const s=i.endsWith("/");return i=Fu(i),i.length>0&&s&&(i+="/"),e?`/${i}`:t+i},isAbsolute(i){return _e(i),i=this.toPosix(i),this.hasProtocol(i)?!0:i.startsWith("/")},join(...i){if(i.length===0)return".";let t;for(let e=0;e<i.length;++e){const s=i[e];if(_e(s),s.length>0)if(t===void 0)t=s;else{const r=i[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(i){if(_e(i),i.length===0)return".";i=this.toPosix(i);let t=i.charCodeAt(0);const e=t===47;let s=-1,r=!0;const n=this.getProtocol(i),a=i;i=i.slice(n.length);for(let o=i.length-1;o>=1;--o)if(t=i.charCodeAt(o),t===47){if(!r){s=o;break}}else r=!1;return s===-1?e?"/":this.isUrl(a)?n+i:n:e&&s===1?"//":n+i.slice(0,s)},rootname(i){_e(i),i=this.toPosix(i);let t="";if(i.startsWith("/")?t="/":t=this.getProtocol(i),this.isUrl(i)){const e=i.indexOf("/",t.length);e!==-1?t=i.slice(0,e):t=i,t.endsWith("/")||(t+="/")}return t},basename(i,t){_e(i),t&&_e(t),i=ys(this.toPosix(i));let e=0,s=-1,r=!0,n;if(t!==void 0&&t.length>0&&t.length<=i.length){if(t.length===i.length&&t===i)return"";let a=t.length-1,o=-1;for(n=i.length-1;n>=0;--n){const l=i.charCodeAt(n);if(l===47){if(!r){e=n+1;break}}else o===-1&&(r=!1,o=n+1),a>=0&&(l===t.charCodeAt(a)?--a===-1&&(s=n):(a=-1,s=o))}return e===s?s=o:s===-1&&(s=i.length),i.slice(e,s)}for(n=i.length-1;n>=0;--n)if(i.charCodeAt(n)===47){if(!r){e=n+1;break}}else s===-1&&(r=!1,s=n+1);return s===-1?"":i.slice(e,s)},extname(i){_e(i),i=ys(this.toPosix(i));let t=-1,e=0,s=-1,r=!0,n=0;for(let a=i.length-1;a>=0;--a){const o=i.charCodeAt(a);if(o===47){if(!r){e=a+1;break}continue}s===-1&&(r=!1,s=a+1),o===46?t===-1?t=a:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||s===-1||n===0||n===1&&t===s-1&&t===e+1?"":i.slice(t,s)},parse(i){_e(i);const t={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return t;i=ys(this.toPosix(i));let e=i.charCodeAt(0);const s=this.isAbsolute(i);let r;t.root=this.rootname(i),s||this.hasProtocol(i)?r=1:r=0;let n=-1,a=0,o=-1,l=!0,c=i.length-1,h=0;for(;c>=r;--c){if(e=i.charCodeAt(c),e===47){if(!l){a=c+1;break}continue}o===-1&&(l=!1,o=c+1),e===46?n===-1?n=c:h!==1&&(h=1):n!==-1&&(h=-1)}return n===-1||o===-1||h===0||h===1&&n===o-1&&n===a+1?o!==-1&&(a===0&&s?t.base=t.name=i.slice(1,o):t.base=t.name=i.slice(a,o)):(a===0&&s?(t.name=i.slice(1,n),t.base=i.slice(1,o)):(t.name=i.slice(a,n),t.base=i.slice(a,o)),t.ext=i.slice(n,o)),t.dir=this.dirname(i),t},sep:"/",delimiter:":",joinExtensions:[".html"]};function Mo(i,t,e,s,r){const n=t[e];for(let a=0;a<n.length;a++){const o=n[a];e<t.length-1?Mo(i.replace(s[e],o),t,e+1,s,r):r.push(i.replace(s[e],o))}}function Ru(i){const t=/\{(.*?)\}/g,e=i.match(t),s=[];if(e){const r=[];e.forEach(n=>{const a=n.substring(1,n.length-1).split(",");r.push(a)}),Mo(i,r,0,e,s)}else s.push(i);return s}const di=i=>!Array.isArray(i);class ms{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}getAlias(t){const{alias:e,src:s}=t;return be(e||s,n=>typeof n=="string"?n:Array.isArray(n)?n.map(a=>(a==null?void 0:a.src)??a):n!=null&&n.src?n.src:n,!0)}addManifest(t){this._manifest&&Ot("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];let r=e;Array.isArray(e)||(r=Object.entries(e).map(([n,a])=>typeof a=="string"||Array.isArray(a)?{alias:n,src:a}:{alias:n,...a})),r.forEach(n=>{const a=n.src,o=n.alias;let l;if(typeof o=="string"){const c=this._createBundleAssetId(t,o);s.push(c),l=[o,c]}else{const c=o.map(h=>this._createBundleAssetId(t,h));s.push(...c),l=[...o,...c]}this.add({...n,alias:l,src:a})}),this._bundles[t]=s}add(t){const e=[];Array.isArray(t)?e.push(...t):e.push(t);let s;s=n=>{this.hasKey(n)&&Ot(`[Resolver] already has key: ${n} overwriting`)},be(e).forEach(n=>{const{src:a}=n;let{data:o,format:l,loadParser:c}=n;const h=be(a).map(d=>typeof d=="string"?Ru(d):Array.isArray(d)?d:[d]),u=this.getAlias(n);Array.isArray(u)?u.forEach(s):s(u);const f=[];h.forEach(d=>{d.forEach(m=>{let g={};if(typeof m!="object"){g.src=m;for(let p=0;p<this._parsers.length;p++){const _=this._parsers[p];if(_.test(m)){g=_.parse(m);break}}}else o=m.data??o,l=m.format??l,c=m.loadParser??c,g={...g,...m};if(!u)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this._buildResolvedAsset(g,{aliases:u,data:o,format:l,loadParser:c}),f.push(g)})}),u.forEach(d=>{this._assetMap[d]=f})})}resolveBundle(t){const e=di(t);t=be(t);const s={};return t.forEach(r=>{const n=this._bundles[r];if(n){const a=this.resolve(n),o={};for(const l in a){const c=a[l];o[this._extractAssetIdFromBundle(r,l)]=c}s[r]=o}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const r in e)s[r]=e[r].src;return s}return e.src}resolve(t){const e=di(t);t=be(t);const s={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let n=this._assetMap[r];const a=this._getPreferredOrder(n);a==null||a.priority.forEach(o=>{a.params[o].forEach(l=>{const c=n.filter(h=>h[o]?h[o]===l:!1);c.length&&(n=c)})}),this._resolverHash[r]=n[0]}else this._resolverHash[r]=this._buildResolvedAsset({alias:[r],src:r},{});s[r]=this._resolverHash[r]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[0],r=this._preferredOrder.find(n=>n.params.format.includes(s.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){const{aliases:s,data:r,loadParser:n,format:a}=e;return(this._basePath||this._rootPath)&&(t.src=ue.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=n??t.loadParser,t.format=a??t.format??Du(t.src),t}}ms.RETINA_PREFIX=/@([0-9\.]+)x/;function Du(i){return i.split(".").pop().split("?").shift().split("#").shift()}const ar=(i,t)=>{const e=t.split("?")[1];return e&&(i+=`?${e}`),i},Po=class Cs{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof xt?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const s=parseFloat(e.meta.scale);s?(this.resolution=s,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=Cs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const s=Cs.BATCH_SIZE;for(;e-t<s&&e<this._frameKeys.length;){const r=this._frameKeys[e],n=this._frames[r],a=n.frame;if(a){let o=null,l=null;const c=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,h=new Xt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);n.rotated?o=new Xt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new Xt(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new Xt(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new xt({source:this.textureSource,frame:o,orig:h,trim:l,rotate:n.rotated?2:0,defaultAnchor:n.anchor,defaultBorders:n.borders,label:r.toString()})}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const r=t[e][s];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Cs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Cs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};Po.BATCH_SIZE=1e3;let Un=Po;const Vu=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function To(i,t,e){const s={};if(i.forEach(r=>{s[r]=t}),Object.keys(t.textures).forEach(r=>{s[r]=t.textures[r]}),!e){const r=ue.dirname(i[0]);t.linkedSheets.forEach((n,a)=>{const o=To([`${r}/${t.data.meta.related_multi_packs[a]}`],n,!0);Object.assign(s,o)})}return s}const Gu={extension:J.Asset,cache:{test:i=>i instanceof Un,getCacheableAssets:(i,t)=>To(i,t,!1)},resolver:{extension:{type:J.ResolveParser,name:"resolveSpritesheet"},test:i=>{const e=i.split("?")[0].split("."),s=e.pop(),r=e.pop();return s==="json"&&Vu.includes(r)},parse:i=>{var e;const t=i.split(".");return{resolution:parseFloat(((e=ms.RETINA_PREFIX.exec(i))==null?void 0:e[1])??"1"),format:t[t.length-2],src:i}}},loader:{name:"spritesheetLoader",extension:{type:J.LoadParser,priority:ze.Normal,name:"spritesheetLoader"},async testParse(i,t){return ue.extname(t.src).toLowerCase()===".json"&&!!i.frames},async parse(i,t,e){var c,h;const{texture:s,imageFilename:r}=(t==null?void 0:t.data)??{};let n=ue.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let a;if(s instanceof xt)a=s;else{const u=ar(n+(r??i.meta.image),t.src);a=(await e.load([u]))[u]}const o=new Un(a.source,i);await o.parse();const l=(c=i==null?void 0:i.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const u=[];for(const d of l){if(typeof d!="string")continue;let m=n+d;(h=t.data)!=null&&h.ignoreMultiPack||(m=ar(m,t.src),u.push(e.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(u);o.linkedSheets=f,f.forEach(d=>{d.linkedSheets=[o].concat(o.linkedSheets.filter(m=>m!==d))})}return o},async unload(i,t,e){await e.unload(i.textureSource._sourceOrigin),i.destroy(!1)}}};re.add(Gu);const Di=Object.create(null),On=Object.create(null);function Tr(i,t){let e=On[i];return e===void 0&&(Di[t]===void 0&&(Di[t]=1),On[i]=e=Di[t]++),e}let Qe;function Eo(){return(!Qe||Qe!=null&&Qe.isContextLost())&&(Qe=Ht.get().createCanvas().getContext("webgl",{})),Qe}let Xs;function Hu(){if(!Xs){Xs="mediump";const i=Eo();i&&i.getShaderPrecisionFormat&&(Xs=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision?"highp":"mediump")}return Xs}function Wu(i,t,e){return t?i:e?(i=i.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${i}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${i}
        `}function zu(i,t,e){const s=e?t.maxSupportedFragmentPrecision:t.maxSupportedVertexPrecision;if(i.substring(0,9)!=="precision"){let r=e?t.requestedFragmentPrecision:t.requestedVertexPrecision;return r==="highp"&&s!=="highp"&&(r="mediump"),`precision ${r} float;
${i}`}else if(s!=="highp"&&i.substring(0,15)==="precision highp")return i.replace("precision highp","precision mediump");return i}function Uu(i,t){return t?`#version 300 es
${i}`:i}const Ou={},Nu={};function ju(i,{name:t="pixi-program"},e=!0){t=t.replace(/\s+/g,"-"),t+=e?"-fragment":"-vertex";const s=e?Ou:Nu;return s[t]?(s[t]++,t+=`-${s[t]}`):s[t]=1,i.indexOf("#define SHADER_NAME")!==-1?i:`${`#define SHADER_NAME ${t}`}
${i}`}function Xu(i,t){return t?i.replace("#version 300 es",""):i}const Vi={stripVersion:Xu,ensurePrecision:zu,addProgramDefines:Wu,setProgramName:ju,insertVersion:Uu},Gi=Object.create(null),Io=class or{constructor(t){t={...or.defaultOptions,...t};const e=t.fragment.indexOf("#version 300 es")!==-1,s={stripVersion:e,ensurePrecision:{requestedFragmentPrecision:t.preferredFragmentPrecision,requestedVertexPrecision:t.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:Hu()},setProgramName:{name:t.name},addProgramDefines:e,insertVersion:e};let r=t.fragment,n=t.vertex;Object.keys(Vi).forEach(a=>{const o=s[a];r=Vi[a](r,o,!0),n=Vi[a](n,o,!1)}),this.fragment=r,this.vertex=n,this._key=Tr(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(t){const e=`${t.vertex}:${t.fragment}`;return Gi[e]||(Gi[e]=new or(t)),Gi[e]}};Io.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let Bo=Io;const Nn={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function Yu(i){return Nn[i]??Nn.float32}const qu={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function Zu({source:i,entryPoint:t}){const e={},s=i.indexOf(`fn ${t}`);if(s!==-1){const r=i.indexOf("->",s);if(r!==-1){const n=i.substring(s,r),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(n))!==null;){const l=qu[o[3]]??"float32";e[o[2]]={location:parseInt(o[1],10),format:l,stride:Yu(l).stride,offset:0,instance:!1,start:0}}}}return e}function Hi(i){var u,f;const t=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,e=/@group\((\d+)\)/,s=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,n=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,c=(u=i.match(t))==null?void 0:u.map(d=>({group:parseInt(d.match(e)[1],10),binding:parseInt(d.match(s)[1],10),name:d.match(r)[2],isUniform:d.match(r)[1]==="<uniform>",type:d.match(n)[1]}));if(!c)return{groups:[],structs:[]};const h=((f=i.match(a))==null?void 0:f.map(d=>{const m=d.match(l)[1],g=d.match(o).reduce((p,_)=>{const[y,w]=_.split(":");return p[y.trim()]=w.trim(),p},{});return g?{name:m,members:g}:null}).filter(({name:d})=>c.some(m=>m.type===d)))??[];return{groups:c,structs:h}}var As=(i=>(i[i.VERTEX=1]="VERTEX",i[i.FRAGMENT=2]="FRAGMENT",i[i.COMPUTE=4]="COMPUTE",i))(As||{});function Ku({groups:i}){const t=[];for(let e=0;e<i.length;e++){const s=i[e];t[s.group]||(t[s.group]=[]),s.isUniform?t[s.group].push({binding:s.binding,visibility:As.VERTEX|As.FRAGMENT,buffer:{type:"uniform"}}):s.type==="sampler"?t[s.group].push({binding:s.binding,visibility:As.FRAGMENT,sampler:{type:"filtering"}}):s.type==="texture_2d"&&t[s.group].push({binding:s.binding,visibility:As.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return t}function $u({groups:i}){const t=[];for(let e=0;e<i.length;e++){const s=i[e];t[s.group]||(t[s.group]={}),t[s.group][s.name]=s.binding}return t}function Qu(i,t){const e=new Set,s=new Set,r=[...i.structs,...t.structs].filter(a=>e.has(a.name)?!1:(e.add(a.name),!0)),n=[...i.groups,...t.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return s.has(o)?!1:(s.add(o),!0)});return{structs:r,groups:n}}const Wi=Object.create(null);class _i{constructor(t){var o,l;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:s,layout:r,gpuLayout:n,name:a}=t;if(this.name=a,this.fragment=e,this.vertex=s,e.source===s.source){const c=Hi(e.source);this.structsAndGroups=c}else{const c=Hi(s.source),h=Hi(e.source);this.structsAndGroups=Qu(c,h)}this.layout=r??$u(this.structsAndGroups),this.gpuLayout=n??Ku(this.structsAndGroups),this.autoAssignGlobalUniforms=((o=this.layout[0])==null?void 0:o.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((l=this.layout[1])==null?void 0:l.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,s=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=Tr(s,"program")}get attributeData(){return this._attributeData??(this._attributeData=Zu(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return Wi[e]||(Wi[e]=new _i(t)),Wi[e]}}const Fo=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>"],Ju=Fo.reduce((i,t)=>(i[t]=!0,i),{});function td(i,t){switch(i){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*t);case"vec3<f32>":return new Float32Array(3*t);case"vec4<f32>":return new Float32Array(4*t);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ro=class Do{constructor(t,e){this._touched=0,this.uid=Yt("uniform"),this._resourceType="uniformGroup",this._resourceId=Yt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,e={...Do.defaultOptions,...e},this.uniformStructures=t;const s={};for(const r in t){const n=t[r];if(n.name=r,n.size=n.size??1,!Ju[n.type])throw new Error(`Uniform type ${n.type} is not supported. Supported uniform types are: ${Fo.join(", ")}`);n.value??(n.value=td(n.type,n.size)),s[r]=n.value}this.uniforms=s,this._dirtyId=1,this.ubo=e.ubo,this.isStatic=e.isStatic,this._signature=Tr(Object.keys(s).map(r=>`${r}-${t[r].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};Ro.defaultOptions={ubo:!1,isStatic:!1};let Vo=Ro;class si{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const s in t){const r=t[s];this.setResource(r,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const s in this.resources)t[e++]=this.resources[s]._resourceId;this._key=t.join("|")}setResource(t,e){var r,n;const s=this.resources[e];t!==s&&(s&&((r=t.off)==null||r.call(t,"change",this.onResourceChange,this)),(n=t.on)==null||n.call(t,"change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const s in e)e[s]._touched=t}destroy(){var e;const t=this.resources;for(const s in t){const r=t[s];(e=r.off)==null||e.call(r,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const s in e)e[s]===t&&(e[s]=null)}else this._updateKey()}}var lr=(i=>(i[i.WEBGL=1]="WEBGL",i[i.WEBGPU=2]="WEBGPU",i[i.BOTH=3]="BOTH",i))(lr||{});class Er extends ve{constructor(t){super(),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:s,groups:r,resources:n,compatibleRenderers:a,groupMap:o}=t;this.gpuProgram=e,this.glProgram=s,a===void 0&&(a=0,e&&(a|=lr.WEBGPU),s&&(a|=lr.WEBGL)),this.compatibleRenderers=a;const l={};if(!n&&!r&&(n={}),n&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&r&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&r&&o)for(const c in o)for(const h in o[c]){const u=o[c][h];l[u]={group:c,binding:h,name:u}}else if(e&&r&&!o){const c=e.structsAndGroups.groups;o={},c.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,l[h.name]=h})}else if(n){r={},o={},e&&e.structsAndGroups.groups.forEach(u=>{o[u.group]=o[u.group]||{},o[u.group][u.binding]=u.name,l[u.name]=u});let c=0;for(const h in n)l[h]||(r[99]||(r[99]=new si,this._ownedBindGroups.push(r[99])),l[h]={group:99,binding:c,name:h},o[99]=o[99]||{},o[99][c]=h,c++);for(const h in n){const u=h;let f=n[h];!f.source&&!f._resourceType&&(f=new Vo(f));const d=l[u];d&&(r[d.group]||(r[d.group]=new si,this._ownedBindGroups.push(r[d.group])),r[d.group].setResource(f,d.binding))}}this.groups=r,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(r,l)}addResource(t,e,s){var r,n;(r=this._uniformBindMap)[e]||(r[e]={}),(n=this._uniformBindMap[e])[s]||(n[s]=t),this.groups[e]||(this.groups[e]=new si,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const s={};for(const r in e){const n=e[r];Object.defineProperty(s,n.name,{get(){return t[n.group].getResource(n.binding)},set(a){t[n.group].setResource(a,n.binding)}})}return s}destroy(t=!1){var e,s;this.emit("destroy",this),t&&((e=this.gpuProgram)==null||e.destroy(),(s=this.glProgram)==null||s.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(r=>{r.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:s,...r}=t;let n,a;return e&&(n=_i.from(e)),s&&(a=Bo.from(s)),new Er({gpuProgram:n,glProgram:a,...r})}}const hr=[];re.handleByNamedList(J.Environment,hr);async function ed(i){if(!i)for(let t=0;t<hr.length;t++){const e=hr[t];if(e.value.test()){await e.value.load();return}}}let bs;function sd(){if(typeof bs=="boolean")return bs;try{bs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{bs=!1}return bs}var Ir={exports:{}};Ir.exports=yi;Ir.exports.default=yi;function yi(i,t,e){e=e||2;var s=t&&t.length,r=s?t[0]*e:i.length,n=Go(i,0,r,e,!0),a=[];if(!n||n.next===n.prev)return a;var o,l,c,h,u,f,d;if(s&&(n=od(i,t,n,e)),i.length>80*e){o=c=i[0],l=h=i[1];for(var m=e;m<r;m+=e)u=i[m],f=i[m+1],u<o&&(o=u),f<l&&(l=f),u>c&&(c=u),f>h&&(h=f);d=Math.max(c-o,h-l),d=d!==0?32767/d:0}return Es(n,a,e,o,l,d,0),a}function Go(i,t,e,s,r){var n,a;if(r===dr(i,t,e,s)>0)for(n=t;n<e;n+=s)a=jn(n,i[n],i[n+1],a);else for(n=e-s;n>=t;n-=s)a=jn(n,i[n],i[n+1],a);return a&&bi(a,a.next)&&(Bs(a),a=a.next),a}function Ke(i,t){if(!i)return i;t||(t=i);var e=i,s;do if(s=!1,!e.steiner&&(bi(e,e.next)||Gt(e.prev,e,e.next)===0)){if(Bs(e),e=t=e.prev,e===e.next)break;s=!0}else e=e.next;while(s||e!==t);return t}function Es(i,t,e,s,r,n,a){if(i){!a&&n&&dd(i,s,r,n);for(var o=i,l,c;i.prev!==i.next;){if(l=i.prev,c=i.next,n?rd(i,s,r,n):id(i)){t.push(l.i/e|0),t.push(i.i/e|0),t.push(c.i/e|0),Bs(i),i=c.next,o=c.next;continue}if(i=c,i===o){a?a===1?(i=nd(Ke(i),t,e),Es(i,t,e,s,r,n,2)):a===2&&ad(i,t,e,s,r,n):Es(Ke(i),t,e,s,r,n,1);break}}}}function id(i){var t=i.prev,e=i,s=i.next;if(Gt(t,e,s)>=0)return!1;for(var r=t.x,n=e.x,a=s.x,o=t.y,l=e.y,c=s.y,h=r<n?r<a?r:a:n<a?n:a,u=o<l?o<c?o:c:l<c?l:c,f=r>n?r>a?r:a:n>a?n:a,d=o>l?o>c?o:c:l>c?l:c,m=s.next;m!==t;){if(m.x>=h&&m.x<=f&&m.y>=u&&m.y<=d&&es(r,o,n,l,a,c,m.x,m.y)&&Gt(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function rd(i,t,e,s){var r=i.prev,n=i,a=i.next;if(Gt(r,n,a)>=0)return!1;for(var o=r.x,l=n.x,c=a.x,h=r.y,u=n.y,f=a.y,d=o<l?o<c?o:c:l<c?l:c,m=h<u?h<f?h:f:u<f?u:f,g=o>l?o>c?o:c:l>c?l:c,p=h>u?h>f?h:f:u>f?u:f,_=cr(d,m,t,e,s),y=cr(g,p,t,e,s),w=i.prevZ,b=i.nextZ;w&&w.z>=_&&b&&b.z<=y;){if(w.x>=d&&w.x<=g&&w.y>=m&&w.y<=p&&w!==r&&w!==a&&es(o,h,l,u,c,f,w.x,w.y)&&Gt(w.prev,w,w.next)>=0||(w=w.prevZ,b.x>=d&&b.x<=g&&b.y>=m&&b.y<=p&&b!==r&&b!==a&&es(o,h,l,u,c,f,b.x,b.y)&&Gt(b.prev,b,b.next)>=0))return!1;b=b.nextZ}for(;w&&w.z>=_;){if(w.x>=d&&w.x<=g&&w.y>=m&&w.y<=p&&w!==r&&w!==a&&es(o,h,l,u,c,f,w.x,w.y)&&Gt(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;b&&b.z<=y;){if(b.x>=d&&b.x<=g&&b.y>=m&&b.y<=p&&b!==r&&b!==a&&es(o,h,l,u,c,f,b.x,b.y)&&Gt(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function nd(i,t,e){var s=i;do{var r=s.prev,n=s.next.next;!bi(r,n)&&Ho(r,s,s.next,n)&&Is(r,n)&&Is(n,r)&&(t.push(r.i/e|0),t.push(s.i/e|0),t.push(n.i/e|0),Bs(s),Bs(s.next),s=i=n),s=s.next}while(s!==i);return Ke(s)}function ad(i,t,e,s,r,n){var a=i;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&pd(a,o)){var l=Wo(a,o);a=Ke(a,a.next),l=Ke(l,l.next),Es(a,t,e,s,r,n,0),Es(l,t,e,s,r,n,0);return}o=o.next}a=a.next}while(a!==i)}function od(i,t,e,s){var r=[],n,a,o,l,c;for(n=0,a=t.length;n<a;n++)o=t[n]*s,l=n<a-1?t[n+1]*s:i.length,c=Go(i,o,l,s,!1),c===c.next&&(c.steiner=!0),r.push(md(c));for(r.sort(ld),n=0;n<r.length;n++)e=hd(r[n],e);return e}function ld(i,t){return i.x-t.x}function hd(i,t){var e=cd(i,t);if(!e)return t;var s=Wo(e,i);return Ke(s,s.next),Ke(e,e.next)}function cd(i,t){var e=t,s=i.x,r=i.y,n=-1/0,a;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var o=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=s&&o>n&&(n=o,a=e.x<e.next.x?e:e.next,o===s))return a}e=e.next}while(e!==t);if(!a)return null;var l=a,c=a.x,h=a.y,u=1/0,f;e=a;do s>=e.x&&e.x>=c&&s!==e.x&&es(r<h?s:n,r,c,h,r<h?n:s,r,e.x,e.y)&&(f=Math.abs(r-e.y)/(s-e.x),Is(e,i)&&(f<u||f===u&&(e.x>a.x||e.x===a.x&&ud(a,e)))&&(a=e,u=f)),e=e.next;while(e!==l);return a}function ud(i,t){return Gt(i.prev,i,t.prev)<0&&Gt(t.next,i,i.next)<0}function dd(i,t,e,s){var r=i;do r.z===0&&(r.z=cr(r.x,r.y,t,e,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,fd(r)}function fd(i){var t,e,s,r,n,a,o,l,c=1;do{for(e=i,i=null,n=null,a=0;e;){for(a++,s=e,o=0,t=0;t<c&&(o++,s=s.nextZ,!!s);t++);for(l=c;o>0||l>0&&s;)o!==0&&(l===0||!s||e.z<=s.z)?(r=e,e=e.nextZ,o--):(r=s,s=s.nextZ,l--),n?n.nextZ=r:i=r,r.prevZ=n,n=r;e=s}n.nextZ=null,c*=2}while(a>1);return i}function cr(i,t,e,s,r){return i=(i-e)*r|0,t=(t-s)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i|t<<1}function md(i){var t=i,e=i;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==i);return e}function es(i,t,e,s,r,n,a,o){return(r-a)*(t-o)>=(i-a)*(n-o)&&(i-a)*(s-o)>=(e-a)*(t-o)&&(e-a)*(n-o)>=(r-a)*(s-o)}function pd(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!gd(i,t)&&(Is(i,t)&&Is(t,i)&&_d(i,t)&&(Gt(i.prev,i,t.prev)||Gt(i,t.prev,t))||bi(i,t)&&Gt(i.prev,i,i.next)>0&&Gt(t.prev,t,t.next)>0)}function Gt(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function bi(i,t){return i.x===t.x&&i.y===t.y}function Ho(i,t,e,s){var r=qs(Gt(i,t,e)),n=qs(Gt(i,t,s)),a=qs(Gt(e,s,i)),o=qs(Gt(e,s,t));return!!(r!==n&&a!==o||r===0&&Ys(i,e,t)||n===0&&Ys(i,s,t)||a===0&&Ys(e,i,s)||o===0&&Ys(e,t,s))}function Ys(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function qs(i){return i>0?1:i<0?-1:0}function gd(i,t){var e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&Ho(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}function Is(i,t){return Gt(i.prev,i,i.next)<0?Gt(i,t,i.next)>=0&&Gt(i,i.prev,t)>=0:Gt(i,t,i.prev)<0||Gt(i,i.next,t)<0}function _d(i,t){var e=i,s=!1,r=(i.x+t.x)/2,n=(i.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&r<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==i);return s}function Wo(i,t){var e=new ur(i.i,i.x,i.y),s=new ur(t.i,t.x,t.y),r=i.next,n=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,s.next=e,e.prev=s,n.next=s,s.prev=n,s}function jn(i,t,e,s){var r=new ur(i,t,e);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Bs(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function ur(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}yi.deviation=function(i,t,e,s){var r=t&&t.length,n=r?t[0]*e:i.length,a=Math.abs(dr(i,0,n,e));if(r)for(var o=0,l=t.length;o<l;o++){var c=t[o]*e,h=o<l-1?t[o+1]*e:i.length;a-=Math.abs(dr(i,c,h,e))}var u=0;for(o=0;o<s.length;o+=3){var f=s[o]*e,d=s[o+1]*e,m=s[o+2]*e;u+=Math.abs((i[f]-i[m])*(i[d+1]-i[f+1])-(i[f]-i[d])*(i[m+1]-i[f+1]))}return a===0&&u===0?0:Math.abs((u-a)/a)};function dr(i,t,e,s){for(var r=0,n=t,a=e-s;n<e;n+=s)r+=(i[a]-i[n])*(i[n+1]+i[a+1]),a=n;return r}yi.flatten=function(i){for(var t=i[0][0].length,e={vertices:[],holes:[],dimensions:t},s=0,r=0;r<i.length;r++){for(var n=0;n<i[r].length;n++)for(var a=0;a<t;a++)e.vertices.push(i[r][n][a]);r>0&&(s+=i[r-1].length,e.holes.push(s))}return e};var yd=Ir.exports;const bd=Wa(yd);var zo=(i=>(i[i.NONE=0]="NONE",i[i.COLOR=16384]="COLOR",i[i.STENCIL=1024]="STENCIL",i[i.DEPTH=256]="DEPTH",i[i.COLOR_DEPTH=16640]="COLOR_DEPTH",i[i.COLOR_STENCIL=17408]="COLOR_STENCIL",i[i.DEPTH_STENCIL=1280]="DEPTH_STENCIL",i[i.ALL=17664]="ALL",i))(zo||{});class wd{constructor(t){this.items=[],this._name=t}emit(t,e,s,r,n,a,o,l){const{name:c,items:h}=this;for(let u=0,f=h.length;u<f;u++)h[u][c](t,e,s,r,n,a,o,l);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&this.items.splice(e,1),this}contains(t){return this.items.indexOf(t)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const xd=["init","destroy","contextChange","resolutionChange","reset","renderEnd","renderStart","render","update","postrender","prerender"],Uo=class Oo extends ve{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...xd,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(t={}){const e=t.skipExtensionImports===!0?!0:t.manageImports===!1;await ed(e),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const s in this._systemsHash)t={...this._systemsHash[s].constructor.defaultOptions,...t};t={...Oo.defaultOptions,...t},this._roundPixels=t.roundPixels?1:0;for(let s=0;s<this.runners.init.items.length;s++)await this.runners.init.items[s].init(t);this._initOptions=t}render(t,e){let s=t;if(s instanceof ie&&(s={container:s},e&&(At(kt,"passing a second argument is deprecated, please use render options instead"),s.target=e.renderTexture)),s.target||(s.target=this.view.renderTarget),s.target===this.view.renderTarget&&(this._lastObjectRendered=s.container,s.clearColor=this.background.colorRgba),s.clearColor){const r=Array.isArray(s.clearColor)&&s.clearColor.length===4;s.clearColor=r?s.clearColor:Ut.shared.setValue(s.clearColor).toArray()}s.transform||(s.container.updateLocalTransform(),s.transform=s.container.localTransform),this.runners.prerender.emit(s),this.runners.renderStart.emit(s),this.runners.render.emit(s),this.runners.renderEnd.emit(s),this.runners.postrender.emit(s)}resize(t,e,s){const r=this.view.resolution;this.view.resize(t,e,s),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),s!==void 0&&s!==r&&this.runners.resolutionChange.emit(s)}clear(t={}){const e=this;t.target||(t.target=e.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=zo.ALL);const{clear:s,clearColor:r,target:n}=t;Ut.shared.setValue(r??this.background.colorRgba),e.renderTarget.clear(n,s,Ut.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(e=>{this.runners[e]=new wd(e)})}_addSystems(t){let e;for(e in t){const s=t[e];this._addSystem(s.value,s.name)}}_addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const r in this.runners)this.runners[r].add(s);return this}_addPipes(t,e){const s=e.reduce((r,n)=>(r[n.name]=n.value,r),{});t.forEach(r=>{const n=r.value,a=r.name,o=s[a];this.renderPipes[a]=new n(this,o?new o:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!sd())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}};Uo.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let No=Uo,Zs;function vd(i){return Zs!==void 0||(Zs=(()=>{var e;const t={stencil:!0,failIfMajorPerformanceCaveat:i??No.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ht.get().getWebGLRenderingContext())return!1;let r=Ht.get().createCanvas().getContext("webgl",t);const n=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const a=r.getExtension("WEBGL_lose_context");a&&a.loseContext()}return r=null,n}catch{return!1}})()),Zs}let Ks;async function Cd(i={}){return Ks!==void 0||(Ks=await(async()=>{const t=Ht.get().getNavigator().gpu;if(!t)return!1;try{return await(await t.requestAdapter(i)).requestDevice(),!0}catch{return!1}})()),Ks}const Xn=["webgl","webgpu","canvas"];async function Ad(i){let t=[];i.preference?(t.push(i.preference),Xn.forEach(n=>{n!==i.preference&&t.push(n)})):t=Xn.slice();let e,s={};for(let n=0;n<t.length;n++){const a=t[n];if(a==="webgpu"&&await Cd()){const{WebGPURenderer:o}=await ci(async()=>{const{WebGPURenderer:l}=await import("./WebGPURenderer.BH06LTeT.js");return{WebGPURenderer:l}},__vite__mapDeps([9,2,10,3,4,5,6,7,8]),import.meta.url);e=o,s={...i,...i.webgpu};break}else if(a==="webgl"&&vd(i.failIfMajorPerformanceCaveat??No.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await ci(async()=>{const{WebGLRenderer:l}=await import("./WebGLRenderer.BEu8zExE.js");return{WebGLRenderer:l}},__vite__mapDeps([11,2,10,3,4,5,6,7,8]),import.meta.url);e=o,s={...i,...i.webgl};break}else if(a==="canvas")throw s={...i},new Error("CanvasRenderer is not yet implemented")}if(delete s.webgpu,delete s.webgl,!e)throw new Error("No available renderer for the current environment");const r=new e;return await r.init(s),r}const jo="8.4.1";class Xo{static init(){var t;(t=globalThis.__PIXI_APP_INIT__)==null||t.call(globalThis,this,jo)}static destroy(){}}Xo.extension=J.Application;class kd{constructor(t){this._renderer=t}init(){var t;(t=globalThis.__PIXI_RENDERER_INIT__)==null||t.call(globalThis,this._renderer,jo)}destroy(){this._renderer=null}}kd.extension={type:[J.WebGLSystem,J.WebGPUSystem],name:"initHook",priority:-10};const Yo=class fr{constructor(...t){this.stage=new ie,t[0]!==void 0&&At(kt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(t){t={...t},this.renderer=await Ad(t),fr._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return At(kt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(t=!1,e=!1){const s=fr._plugins.slice(0);s.reverse(),s.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Yo._plugins=[];let qo=Yo;re.handleByList(J.Application,qo._plugins);re.add(Xo);class Zo extends ve{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return At(kt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return At(kt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return At(kt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return At(kt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return At(kt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){var e;this.emit("destroy",this),this.removeAllListeners();for(const s in this.chars)(e=this.chars[s].texture)==null||e.destroy();this.chars=null,t&&(this.pages.forEach(s=>s.texture.destroy(!0)),this.pages=null)}}const Ko=class mr{constructor(t,e,s,r){this.uid=Yt("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=s,this.y1=r}addColorStop(t,e){return this.gradientStops.push({offset:t,color:Ut.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){const t=mr.defaultTextureSize,{gradientStops:e}=this,s=Ht.get().createCanvas();s.width=t,s.height=t;const r=s.getContext("2d"),n=r.createLinearGradient(0,0,mr.defaultTextureSize,1);for(let g=0;g<e.length;g++){const p=e[g];n.addColorStop(p.offset,p.color)}r.fillStyle=n,r.fillRect(0,0,t,t),this.texture=new xt({source:new fs({resource:s,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:a,y0:o,x1:l,y1:c}=this,h=new vt,u=l-a,f=c-o,d=Math.sqrt(u*u+f*f),m=Math.atan2(f,u);h.translate(-a,-o),h.scale(1/t,1/t),h.rotate(-m),h.scale(256/d,1),this.transform=h,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map(r=>`${r.offset}-${r.color}`).join("-"),e=this.texture.uid,s=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${s}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};Ko.defaultTextureSize=256;let cs=Ko;const Yn={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class wi{constructor(t,e){this.uid=Yt("fillPattern"),this.transform=new vt,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=Yn[e].addressModeU,t.source.style.addressModeV=Yn[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var Sd=Md,zi={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},Ld=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function Md(i){var t=[];return i.replace(Ld,function(e,s,r){var n=s.toLowerCase();for(r=Td(r),n=="m"&&r.length>2&&(t.push([s].concat(r.splice(0,2))),n="l",s=s=="m"?"l":"L");;){if(r.length==zi[n])return r.unshift(s),t.push(r);if(r.length<zi[n])throw new Error("malformed path data");t.push([s].concat(r.splice(0,zi[n])))}}),t}var Pd=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function Td(i){var t=i.match(Pd);return t?t.map(Number):[]}const Ed=Wa(Sd);function Id(i,t){const e=Ed(i),s=[];let r=null,n=0,a=0;for(let o=0;o<e.length;o++){const l=e[o],c=l[0],h=l;switch(c){case"M":n=h[1],a=h[2],t.moveTo(n,a);break;case"m":n+=h[1],a+=h[2],t.moveTo(n,a);break;case"H":n=h[1],t.lineTo(n,a);break;case"h":n+=h[1],t.lineTo(n,a);break;case"V":a=h[1],t.lineTo(n,a);break;case"v":a+=h[1],t.lineTo(n,a);break;case"L":n=h[1],a=h[2],t.lineTo(n,a);break;case"l":n+=h[1],a+=h[2],t.lineTo(n,a);break;case"C":n=h[5],a=h[6],t.bezierCurveTo(h[1],h[2],h[3],h[4],n,a);break;case"c":t.bezierCurveTo(n+h[1],a+h[2],n+h[3],a+h[4],n+h[5],a+h[6]),n+=h[5],a+=h[6];break;case"S":n=h[3],a=h[4],t.bezierCurveToShort(h[1],h[2],n,a);break;case"s":t.bezierCurveToShort(n+h[1],a+h[2],n+h[3],a+h[4]),n+=h[3],a+=h[4];break;case"Q":n=h[3],a=h[4],t.quadraticCurveTo(h[1],h[2],n,a);break;case"q":t.quadraticCurveTo(n+h[1],a+h[2],n+h[3],a+h[4]),n+=h[3],a+=h[4];break;case"T":n=h[1],a=h[2],t.quadraticCurveToShort(n,a);break;case"t":n+=h[1],a+=h[2],t.quadraticCurveToShort(n,a);break;case"A":n=h[6],a=h[7],t.arcToSvg(h[1],h[2],h[3],h[4],h[5],n,a);break;case"a":n+=h[6],a+=h[7],t.arcToSvg(h[1],h[2],h[3],h[4],h[5],n,a);break;case"Z":case"z":t.closePath(),s.length>0&&(r=s.pop(),r?(n=r.startX,a=r.startY):(n=0,a=0)),r=null;break;default:Ot(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&r===null&&(r={startX:n,startY:a},s.push(r))}return t}class Br{constructor(t=0,e=0,s=0){this.type="circle",this.x=t,this.y=e,this.radius=s}clone(){return new Br(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=s}strokeContains(t,e,s){if(this.radius===0)return!1;const r=this.x-t,n=this.y-e,a=this.radius,o=s/2,l=Math.sqrt(r*r+n*n);return l<a+o&&l>a-o}getBounds(t){return t=t||new Xt,t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=this.radius*2,t.height=this.radius*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Fr{constructor(t=0,e=0,s=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=s,this.halfHeight=r}clone(){return new Fr(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let s=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return s*=s,r*=r,s+r<=1}strokeContains(t,e,s){const{halfWidth:r,halfHeight:n}=this;if(r<=0||n<=0)return!1;const a=s/2,o=r-a,l=n-a,c=r+a,h=n+a,u=t-this.x,f=e-this.y,d=u*u/(o*o)+f*f/(l*l),m=u*u/(c*c)+f*f/(h*h);return d>1&&m<=1}getBounds(t){return t=t||new Xt,t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=this.halfWidth*2,t.height=this.halfHeight*2,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Bd(i,t,e,s,r,n){const a=i-e,o=t-s,l=r-e,c=n-s,h=a*l+o*c,u=l*l+c*c;let f=-1;u!==0&&(f=h/u);let d,m;f<0?(d=e,m=s):f>1?(d=r,m=n):(d=e+f*l,m=s+f*c);const g=i-d,p=t-m;return g*g+p*p}class Ls{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let r=0,n=e.length;r<n;r++)s.push(e[r].x,e[r].y);e=s}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new Ls(t);return e.closePath=this.closePath,e}contains(t,e){let s=!1;const r=this.points.length/2;for(let n=0,a=r-1;n<r;a=n++){const o=this.points[n*2],l=this.points[n*2+1],c=this.points[a*2],h=this.points[a*2+1];l>e!=h>e&&t<(c-o)*((e-l)/(h-l))+o&&(s=!s)}return s}strokeContains(t,e,s){const r=s/2,n=r*r,{points:a}=this,o=a.length-(this.closePath?0:2);for(let l=0;l<o;l+=2){const c=a[l],h=a[l+1],u=a[(l+2)%a.length],f=a[(l+3)%a.length];if(Bd(t,e,c,h,u,f)<=n)return!0}return!1}getBounds(t){t=t||new Xt;const e=this.points;let s=1/0,r=-1/0,n=1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=2){const c=e[o],h=e[o+1];s=c<s?c:s,r=c>r?c:r,n=h<n?h:n,a=h>a?h:a}return t.x=s,t.width=r-s,t.y=n,t.height=a-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const $s=(i,t,e,s,r,n)=>{const a=i-e,o=t-s,l=Math.sqrt(a*a+o*o);return l>=r-n&&l<=r+n};class Rr{constructor(t=0,e=0,s=0,r=0,n=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=s,this.height=r,this.radius=n}getBounds(t){return t=t||new Xt,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new Rr(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let r=t-(this.x+s),n=e-(this.y+s);const a=s*s;if(r*r+n*n<=a||(r=t-(this.x+this.width-s),r*r+n*n<=a)||(n=e-(this.y+this.height-s),r*r+n*n<=a)||(r=t-(this.x+s),r*r+n*n<=a))return!0}return!1}strokeContains(t,e,s){const{x:r,y:n,width:a,height:o,radius:l}=this,c=s/2,h=r+l,u=n+l,f=a-l*2,d=o-l*2,m=r+a,g=n+o;return(t>=r-c&&t<=r+c||t>=m-c&&t<=m+c)&&e>=u&&e<=u+d||(e>=n-c&&e<=n+c||e>=g-c&&e<=g+c)&&t>=h&&t<=h+f?!0:t<h&&e<u&&$s(t,e,h,u,l,c)||t>m-l&&e<u&&$s(t,e,m-l,u,l,c)||t>m-l&&e>g-l&&$s(t,e,m-l,g-l,l,c)||t<h&&e>g-l&&$s(t,e,h,g-l,l,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const Fd=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Rd(i){let t="";for(let e=0;e<i;++e)e>0&&(t+=`
else `),e<i-1&&(t+=`if(test == ${e}.0){}`);return t}function Dd(i,t){if(i===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);try{for(;;){const s=Fd.replace(/%forloop%/gi,Rd(i));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))i=i/2|0;else break}}finally{t.deleteShader(e)}return i}let Je=null;function $o(){var t;if(Je)return Je;const i=Eo();return Je=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),Je=Dd(Je,i),(t=i.getExtension("WEBGL_lose_context"))==null||t.loseContext(),Je}const Qo={};function Vd(i,t){let e=2166136261;for(let s=0;s<t;s++)e^=i[s].uid,e=Math.imul(e,16777619),e>>>=0;return Qo[e]||Gd(i,t,e)}let Ui=0;function Gd(i,t,e){const s={};let r=0;Ui||(Ui=$o());for(let a=0;a<Ui;a++){const o=a<t?i[a]:xt.EMPTY.source;s[r++]=o.source,s[r++]=o.style}const n=new si(s);return Qo[e]=n,n}class qn{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}function Zn(i,t){const e=i.byteLength/8|0,s=new Float64Array(i,0,e);new Float64Array(t,0,e).set(s);const n=i.byteLength-e*8;if(n>0){const a=new Uint8Array(i,e*8,n);new Uint8Array(t,e*8,n).set(a)}}const Hd={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Wd=(i=>(i[i.DISABLED=0]="DISABLED",i[i.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",i[i.MASK_ACTIVE=2]="MASK_ACTIVE",i[i.RENDERING_MASK_REMOVE=3]="RENDERING_MASK_REMOVE",i[i.NONE=4]="NONE",i))(Wd||{});function Kn(i,t){return t.alphaMode==="no-premultiply-alpha"&&Hd[i]||i}class zd{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class Ud{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new zd,this.blendMode="normal",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const Jo=[];let pr=0;function $n(){return pr>0?Jo[--pr]:new Ud}function Qn(i){Jo[pr++]=i}let ws=0;const tl=class ii{constructor(t={}){this.uid=Yt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],ii.defaultOptions.maxTextures=ii.defaultOptions.maxTextures??$o(),t={...ii.defaultOptions,...t};const{maxTextures:e,attributesInitialSize:s,indicesInitialSize:r}=t;this.attributeBuffer=new qn(s*4),this.indexBuffer=new Uint16Array(r),this.maxTextures=e}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)Qn(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const s=t._batch.textures.ids[e._source.uid];return!s&&s!==0?!1:(t._textureId=s,t.texture=e,!0)}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let s=$n(),r=s.textures;r.clear();const n=e[this.elementStart];let a=Kn(n.blendMode,n.texture._source);this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const o=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,c=this.indexBuffer;let h=this._batchIndexSize,u=this._batchIndexStart,f="startBatch";const d=this.maxTextures;for(let m=this.elementStart;m<this.elementSize;++m){const g=e[m];e[m]=null;const _=g.texture._source,y=Kn(g.blendMode,_),w=a!==y;if(_._batchTick===ws&&!w){g._textureId=_._textureBindLocation,h+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,o,l,g._attributeStart,g._textureId),this.packQuadIndex(c,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,o,l,g._attributeStart,g._textureId),this.packIndex(g,c,g._indexStart,g._attributeStart/this.vertexSize)),g._batch=s;continue}_._batchTick=ws,(r.count>=d||w)&&(this._finishBatch(s,u,h-u,r,a,t,f),f="renderBatch",u=h,a=y,s=$n(),r=s.textures,r.clear(),++ws),g._textureId=_._textureBindLocation=r.count,r.ids[_.uid]=r.count,r.textures[r.count++]=_,g._batch=s,h+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,o,l,g._attributeStart,g._textureId),this.packQuadIndex(c,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,o,l,g._attributeStart,g._textureId),this.packIndex(g,c,g._indexStart,g._attributeStart/this.vertexSize))}r.count>0&&(this._finishBatch(s,u,h-u,r,a,t,f),u=h,++ws),this.elementStart=this.elementSize,this._batchIndexStart=u,this._batchIndexSize=h}_finishBatch(t,e,s,r,n,a,o){t.gpuBindGroup=null,t.bindGroup=null,t.action=o,t.batcher=this,t.textures=r,t.blendMode=n,t.start=e,t.size=s,++ws,this.batches[this.batchIndex++]=t,a.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){t*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(t*4)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,this.attributeBuffer.size*2),s=new qn(e);Zn(this.attributeBuffer.rawBinaryData,s.rawBinaryData),this.attributeBuffer=s}_resizeIndexBuffer(t){const e=this.indexBuffer;let s=Math.max(t,e.length*1.5);s+=s%2;const r=s>65535?new Uint32Array(s):new Uint16Array(s);if(r.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let n=0;n<e.length;n++)r[n]=e[n];else Zn(e.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(t,e,s){t[e]=s+0,t[e+1]=s+1,t[e+2]=s+2,t[e+3]=s+0,t[e+4]=s+2,t[e+5]=s+3}packIndex(t,e,s,r){const n=t.indices,a=t.indexSize,o=t.indexOffset,l=t.attributeOffset;for(let c=0;c<a;c++)e[s++]=r+n[c+o]-l}destroy(){for(let t=0;t<this.batches.length;t++)Qn(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};tl.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Od=tl;var le=(i=>(i[i.MAP_READ=1]="MAP_READ",i[i.MAP_WRITE=2]="MAP_WRITE",i[i.COPY_SRC=4]="COPY_SRC",i[i.COPY_DST=8]="COPY_DST",i[i.INDEX=16]="INDEX",i[i.VERTEX=32]="VERTEX",i[i.UNIFORM=64]="UNIFORM",i[i.STORAGE=128]="STORAGE",i[i.INDIRECT=256]="INDIRECT",i[i.QUERY_RESOLVE=512]="QUERY_RESOLVE",i[i.STATIC=1024]="STATIC",i))(le||{});class Fs extends ve{constructor(t){let{data:e,size:s}=t;const{usage:r,label:n,shrinkToFit:a}=t;super(),this.uid=Yt("buffer"),this._resourceType="buffer",this._resourceId=Yt("resource"),this._touched=0,this._updateID=1,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,s=s??(e==null?void 0:e.byteLength);const o=!!e;this.descriptor={size:s,usage:r,mappedAtCreation:o,label:n},this.shrinkToFit=a??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get static(){return!!(this.descriptor.usage&le.STATIC)}set static(t){t?this.descriptor.usage|=le.STATIC:this.descriptor.usage&=~le.STATIC}setDataWithSize(t,e,s){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t){s&&this.emit("update",this);return}const r=this._data;if(this._data=t,r.length!==t.length){!this.shrinkToFit&&t.byteLength<r.byteLength?s&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=Yt("resource"),this.emit("change",this));return}s&&this.emit("update",this)}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function el(i,t){if(!(i instanceof Fs)){let e=t?le.INDEX:le.VERTEX;i instanceof Array&&(t?(i=new Uint32Array(i),e=le.INDEX|le.COPY_DST):(i=new Float32Array(i),e=le.VERTEX|le.COPY_DST)),i=new Fs({data:i,label:t?"index-mesh-buffer":"vertex-mesh-buffer",usage:e})}return i}function Nd(i,t,e){const s=i.getAttribute(t);if(!s)return e.minX=0,e.minY=0,e.maxX=0,e.maxY=0,e;const r=s.buffer.data;let n=1/0,a=1/0,o=-1/0,l=-1/0;const c=r.BYTES_PER_ELEMENT,h=(s.offset||0)/c,u=(s.stride||2*4)/c;for(let f=h;f<r.length;f+=u){const d=r[f],m=r[f+1];d>o&&(o=d),m>l&&(l=m),d<n&&(n=d),m<a&&(a=m)}return e.minX=n,e.minY=a,e.maxX=o,e.maxY=l,e}function jd(i){return(i instanceof Fs||Array.isArray(i)||i.BYTES_PER_ELEMENT)&&(i={buffer:i}),i.buffer=el(i.buffer,!1),i}class Xd extends ve{constructor(t){const{attributes:e,indexBuffer:s,topology:r}=t;super(),this.uid=Yt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Me,this._boundsDirty=!0,this.attributes=e,this.buffers=[],this.instanceCount=t.instanceCount||1;for(const n in e){const a=e[n]=jd(e[n]);this.buffers.indexOf(a.buffer)===-1&&(this.buffers.push(a.buffer),a.buffer.on("update",this.onBufferUpdate,this),a.buffer.on("change",this.onBufferUpdate,this))}s&&(this.indexBuffer=el(s,!0),this.buffers.push(this.indexBuffer)),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,Nd(this,"aPosition",this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(e=>e.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const Yd=new Float32Array(1),qd=new Uint32Array(1);class Zd extends Xd{constructor(){const e=new Fs({data:Yd,label:"attribute-batch-buffer",usage:le.VERTEX|le.COPY_DST,shrinkToFit:!1}),s=new Fs({data:qd,label:"index-batch-buffer",usage:le.INDEX|le.COPY_DST,shrinkToFit:!1}),r=6*4;super({attributes:{aPosition:{buffer:e,format:"float32x2",stride:r,offset:0},aUV:{buffer:e,format:"float32x2",stride:r,offset:2*4},aColor:{buffer:e,format:"unorm8x4",stride:r,offset:4*4},aTextureIdAndRound:{buffer:e,format:"uint16x2",stride:r,offset:5*4}},indexBuffer:s})}}function Jn(i,t,e){if(i)for(const s in i){const r=s.toLocaleLowerCase(),n=t[r];if(n){let a=i[s];s==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),e&&n.push(`//----${e}----//`),n.push(a)}else Ot(`${s} placement hook does not exist in shader`)}}const Kd=/\{\{(.*?)\}\}/g;function ta(i){var s;const t={};return(((s=i.match(Kd))==null?void 0:s.map(r=>r.replace(/[{()}]/g,"")))??[]).forEach(r=>{t[r]=[]}),t}function ea(i,t){let e;const s=/@in\s+([^;]+);/g;for(;(e=s.exec(i))!==null;)t.push(e[1])}function sa(i,t,e=!1){const s=[];ea(t,s),i.forEach(o=>{o.header&&ea(o.header,s)});const r=s;e&&r.sort();const n=r.map((o,l)=>`       @location(${l}) ${o},`).join(`
`);let a=t.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${n}
`),a}function ia(i,t){let e;const s=/@out\s+([^;]+);/g;for(;(e=s.exec(i))!==null;)t.push(e[1])}function $d(i){const e=/\b(\w+)\s*:/g.exec(i);return e?e[1]:""}function Qd(i){const t=/@.*?\s+/g;return i.replace(t,"")}function Jd(i,t){const e=[];ia(t,e),i.forEach(l=>{l.header&&ia(l.header,e)});let s=0;const r=e.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${s++}) ${l}`).join(`,
`),n=e.sort().map(l=>`       var ${Qd(l)};`).join(`
`),a=`return VSOutput(
                ${e.sort().map(l=>` ${$d(l)}`).join(`,
`)});`;let o=t.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${r}
`),o=o.replace("{{start}}",`
${n}
`),o=o.replace("{{return}}",`
${a}
`),o}function ra(i,t){let e=i;for(const s in t){const r=t[s];r.join(`
`).length?e=e.replace(`{{${s}}}`,`//-----${s} START-----//
${r.join(`
`)}
//----${s} FINISH----//`):e=e.replace(`{{${s}}}`,"")}return e}const He=Object.create(null),Oi=new Map;let tf=0;function ef({template:i,bits:t}){const e=sl(i,t);if(He[e])return He[e];const{vertex:s,fragment:r}=rf(i,t);return He[e]=il(s,r,t),He[e]}function sf({template:i,bits:t}){const e=sl(i,t);return He[e]||(He[e]=il(i.vertex,i.fragment,t)),He[e]}function rf(i,t){const e=t.map(a=>a.vertex).filter(a=>!!a),s=t.map(a=>a.fragment).filter(a=>!!a);let r=sa(e,i.vertex,!0);r=Jd(e,r);const n=sa(s,i.fragment,!0);return{vertex:r,fragment:n}}function sl(i,t){return t.map(e=>(Oi.has(e)||Oi.set(e,tf++),Oi.get(e))).sort((e,s)=>e-s).join("-")+i.vertex+i.fragment}function il(i,t,e){const s=ta(i),r=ta(t);return e.forEach(n=>{Jn(n.vertex,s,n.name),Jn(n.fragment,r,n.name)}),{vertex:ra(i,s),fragment:ra(t,r)}}const nf=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,af=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,of=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,lf=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,hf={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},cf={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function uf({bits:i,name:t}){const e=ef({template:{fragment:af,vertex:nf},bits:[hf,...i]});return _i.from({name:t,vertex:{source:e.vertex,entryPoint:"main"},fragment:{source:e.fragment,entryPoint:"main"}})}function df({bits:i,name:t}){return new Bo({name:t,...sf({template:{vertex:of,fragment:lf},bits:[cf,...i]})})}const ff={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},mf={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},Ni={};function pf(i){const t=[];if(i===1)t.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),t.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let e=0;for(let s=0;s<i;s++)t.push(`@group(1) @binding(${e++}) var textureSource${s+1}: texture_2d<f32>;`),t.push(`@group(1) @binding(${e++}) var textureSampler${s+1}: sampler;`)}return t.join(`
`)}function gf(i){const t=[];if(i===1)t.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{t.push("switch vTextureId {");for(let e=0;e<i;e++)e===i-1?t.push("  default:{"):t.push(`  case ${e}:{`),t.push(`      outColor = textureSampleGrad(textureSource${e+1}, textureSampler${e+1}, vUV, uvDx, uvDy);`),t.push("      break;}");t.push("}")}return t.join(`
`)}function _f(i){return Ni[i]||(Ni[i]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${pf(i)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${gf(i)}
            `}}),Ni[i]}const ji={};function yf(i){const t=[];for(let e=0;e<i;e++)e>0&&t.push("else"),e<i-1&&t.push(`if(vTextureId < ${e}.5)`),t.push("{"),t.push(`	outColor = texture(uTextures[${e}], vUV);`),t.push("}");return t.join(`
`)}function bf(i){return ji[i]||(ji[i]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${i}];

            `,main:`

                ${yf(i)}
            `}}),ji[i]}const wf={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},xf={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},na={};function vf(i){let t=na[i];if(t)return t;const e=new Int32Array(i);for(let s=0;s<i;s++)e[s]=s;return t=na[i]=new Vo({uTextures:{value:e,type:"i32",size:i}},{isStatic:!0}),t}class Cf extends Er{constructor(t){const e=df({name:"batch",bits:[mf,bf(t),xf]}),s=uf({name:"batch",bits:[ff,_f(t),wf]});super({glProgram:e,gpuProgram:s,resources:{batchSamplers:vf(t)}})}}let aa=null;const rl=class nl extends Od{constructor(){super(...arguments),this.geometry=new Zd,this.shader=aa||(aa=new Cf(this.maxTextures)),this.name=nl.extension.name,this.vertexSize=6}packAttributes(t,e,s,r,n){const a=n<<16|t.roundPixels&65535,o=t.transform,l=o.a,c=o.b,h=o.c,u=o.d,f=o.tx,d=o.ty,{positions:m,uvs:g}=t,p=t.color,_=t.attributeOffset,y=_+t.attributeSize;for(let w=_;w<y;w++){const b=w*2,v=m[b],S=m[b+1];e[r++]=l*v+h*S+f,e[r++]=u*S+c*v+d,e[r++]=g[b],e[r++]=g[b+1],s[r++]=p,s[r++]=a}}packQuadAttributes(t,e,s,r,n){const a=t.texture,o=t.transform,l=o.a,c=o.b,h=o.c,u=o.d,f=o.tx,d=o.ty,m=t.bounds,g=m.maxX,p=m.minX,_=m.maxY,y=m.minY,w=a.uvs,b=t.color,v=n<<16|t.roundPixels&65535;e[r+0]=l*p+h*y+f,e[r+1]=u*y+c*p+d,e[r+2]=w.x0,e[r+3]=w.y0,s[r+4]=b,s[r+5]=v,e[r+6]=l*g+h*y+f,e[r+7]=u*y+c*g+d,e[r+8]=w.x1,e[r+9]=w.y1,s[r+10]=b,s[r+11]=v,e[r+12]=l*g+h*_+f,e[r+13]=u*_+c*g+d,e[r+14]=w.x2,e[r+15]=w.y2,s[r+16]=b,s[r+17]=v,e[r+18]=l*p+h*_+f,e[r+19]=u*_+c*p+d,e[r+20]=w.x3,e[r+21]=w.y3,s[r+22]=b,s[r+23]=v}};rl.extension={type:[J.Batcher],name:"default"};let Af=rl;function kf(i,t,e,s,r,n,a,o=null){let l=0;e*=t,r*=n;const c=o.a,h=o.b,u=o.c,f=o.d,d=o.tx,m=o.ty;for(;l<a;){const g=i[e],p=i[e+1];s[r]=c*g+u*p+d,s[r+1]=h*g+f*p+m,r+=n,e+=t,l++}}function Sf(i,t,e,s){let r=0;for(t*=e;r<s;)i[t]=0,i[t+1]=0,t+=e,r++}function al(i,t,e,s,r){const n=t.a,a=t.b,o=t.c,l=t.d,c=t.tx,h=t.ty;e=e||0,s=s||2,r=r||i.length/s-e;let u=e*s;for(let f=0;f<r;f++){const d=i[u],m=i[u+1];i[u]=n*d+o*m+c,i[u+1]=a*d+l*m+h,u+=s}}function Lf(i,t){if(i===16777215||!t)return t;if(t===16777215||!i)return i;const e=i>>16&255,s=i>>8&255,r=i&255,n=t>>16&255,a=t>>8&255,o=t&255,l=e*n/255,c=s*a/255,h=r*o/255;return(l<<16)+(c<<8)+h}const Mf=new vt;class ol{constructor(){this.packAsQuad=!1,this.batcherName="default",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|t&65280|(t&255)<<16,s=this.renderable;return s?Lf(e,s.groupColor)+(this.alpha*s.groupAlpha*255<<24):e+(this.alpha*255<<24)}get transform(){var t;return((t=this.renderable)==null?void 0:t.groupTransform)||Mf}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0,this.renderable=null}}const Rs={extension:{type:J.ShapeBuilder,name:"circle"},build(i,t){let e,s,r,n,a,o;if(i.type==="circle"){const b=i;e=b.x,s=b.y,a=o=b.radius,r=n=0}else if(i.type==="ellipse"){const b=i;e=b.x,s=b.y,a=b.halfWidth,o=b.halfHeight,r=n=0}else{const b=i,v=b.width/2,S=b.height/2;e=b.x+v,s=b.y+S,a=o=Math.max(0,Math.min(b.radius,Math.min(v,S))),r=v-a,n=S-o}if(!(a>=0&&o>=0&&r>=0&&n>=0))return t;const l=Math.ceil(2.3*Math.sqrt(a+o)),c=l*8+(r?4:0)+(n?4:0);if(c===0)return t;if(l===0)return t[0]=t[6]=e+r,t[1]=t[3]=s+n,t[2]=t[4]=e-r,t[5]=t[7]=s-n,t;let h=0,u=l*4+(r?2:0)+2,f=u,d=c,m=r+a,g=n,p=e+m,_=e-m,y=s+g;if(t[h++]=p,t[h++]=y,t[--u]=y,t[--u]=_,n){const b=s-g;t[f++]=_,t[f++]=b,t[--d]=b,t[--d]=p}for(let b=1;b<l;b++){const v=Math.PI/2*(b/l),S=r+Math.cos(v)*a,k=n+Math.sin(v)*o,L=e+S,M=e-S,E=s+k,tt=s-k;t[h++]=L,t[h++]=E,t[--u]=E,t[--u]=M,t[f++]=M,t[f++]=tt,t[--d]=tt,t[--d]=L}m=r,g=n+o,p=e+m,_=e-m,y=s+g;const w=s-g;return t[h++]=p,t[h++]=y,t[--d]=w,t[--d]=p,r&&(t[h++]=_,t[h++]=y,t[--d]=w,t[--d]=_),t},triangulate(i,t,e,s,r,n){if(i.length===0)return;let a=0,o=0;for(let h=0;h<i.length;h+=2)a+=i[h],o+=i[h+1];a/=i.length/2,o/=i.length/2;let l=s;t[l*e]=a,t[l*e+1]=o;const c=l++;for(let h=0;h<i.length;h+=2)t[l*e]=i[h],t[l*e+1]=i[h+1],h>0&&(r[n++]=l,r[n++]=c,r[n++]=l-1),l++;r[n++]=c+1,r[n++]=c,r[n++]=l-1}},Pf={...Rs,extension:{...Rs.extension,name:"ellipse"}},Tf={...Rs,extension:{...Rs.extension,name:"roundedRectangle"}},Ef=1e-4,oa=1e-4;function If(i){const t=i.length;if(t<6)return 1;let e=0;for(let s=0,r=i[t-2],n=i[t-1];s<t;s+=2){const a=i[s],o=i[s+1];e+=(a-r)*(o+n),r=a,n=o}return e<0?-1:1}function la(i,t,e,s,r,n,a,o){const l=i-e*r,c=t-s*r,h=i+e*n,u=t+s*n;let f,d;a?(f=s,d=-e):(f=-s,d=e);const m=l+f,g=c+d,p=h+f,_=u+d;return o.push(m,g),o.push(p,_),2}function Ue(i,t,e,s,r,n,a,o){const l=e-i,c=s-t;let h=Math.atan2(l,c),u=Math.atan2(r-i,n-t);o&&h<u?h+=Math.PI*2:!o&&h>u&&(u+=Math.PI*2);let f=h;const d=u-h,m=Math.abs(d),g=Math.sqrt(l*l+c*c),p=(15*m*Math.sqrt(g)/Math.PI>>0)+1,_=d/p;if(f+=_,o){a.push(i,t),a.push(e,s);for(let y=1,w=f;y<p;y++,w+=_)a.push(i,t),a.push(i+Math.sin(w)*g,t+Math.cos(w)*g);a.push(i,t),a.push(r,n)}else{a.push(e,s),a.push(i,t);for(let y=1,w=f;y<p;y++,w+=_)a.push(i+Math.sin(w)*g,t+Math.cos(w)*g),a.push(i,t);a.push(r,n),a.push(i,t)}return p*2}function Bf(i,t,e,s,r,n,a,o,l){const c=Ef;if(i.length===0)return;const h=t;let u=h.alignment;if(t.alignment!==.5){let ft=If(i);u=(u-.5)*ft+.5}const f=new se(i[0],i[1]),d=new se(i[i.length-2],i[i.length-1]),m=s,g=Math.abs(f.x-d.x)<c&&Math.abs(f.y-d.y)<c;if(m){i=i.slice(),g&&(i.pop(),i.pop(),d.set(i[i.length-2],i[i.length-1]));const ft=(f.x+d.x)*.5,St=(d.y+f.y)*.5;i.unshift(ft,St),i.push(ft,St)}const p=r,_=i.length/2;let y=i.length;const w=p.length/2,b=h.width/2,v=b*b,S=h.miterLimit*h.miterLimit;let k=i[0],L=i[1],M=i[2],E=i[3],tt=0,it=0,O=-(L-E),W=k-M,rt=0,Z=0,$=Math.sqrt(O*O+W*W);O/=$,W/=$,O*=b,W*=b;const ut=u,H=(1-ut)*2,K=ut*2;m||(h.cap==="round"?y+=Ue(k-O*(H-K)*.5,L-W*(H-K)*.5,k-O*H,L-W*H,k+O*K,L+W*K,p,!0)+2:h.cap==="square"&&(y+=la(k,L,O,W,H,K,!0,p))),p.push(k-O*H,L-W*H),p.push(k+O*K,L+W*K);for(let ft=1;ft<_-1;++ft){k=i[(ft-1)*2],L=i[(ft-1)*2+1],M=i[ft*2],E=i[ft*2+1],tt=i[(ft+1)*2],it=i[(ft+1)*2+1],O=-(L-E),W=k-M,$=Math.sqrt(O*O+W*W),O/=$,W/=$,O*=b,W*=b,rt=-(E-it),Z=M-tt,$=Math.sqrt(rt*rt+Z*Z),rt/=$,Z/=$,rt*=b,Z*=b;const St=M-k,z=L-E,q=M-tt,_t=it-E,wt=St*q+z*_t,qt=z*q-_t*St,Lt=qt<0;if(Math.abs(qt)<.001*Math.abs(wt)){p.push(M-O*H,E-W*H),p.push(M+O*K,E+W*K),wt>=0&&(h.join==="round"?y+=Ue(M,E,M-O*H,E-W*H,M-rt*H,E-Z*H,p,!1)+4:y+=2,p.push(M-rt*K,E-Z*K),p.push(M+rt*H,E+Z*H));continue}const Et=(-O+k)*(-W+E)-(-O+M)*(-W+L),D=(-rt+tt)*(-Z+E)-(-rt+M)*(-Z+it),$t=(St*D-q*Et)/qt,et=(_t*Et-z*D)/qt,zt=($t-M)*($t-M)+(et-E)*(et-E),It=M+($t-M)*H,ne=E+(et-E)*H,he=M-($t-M)*K,ae=E-(et-E)*K,Pe=Math.min(St*St+z*z,q*q+_t*_t),Ge=Lt?H:K,R=Pe+Ge*Ge*v;zt<=R?h.join==="bevel"||zt/v>S?(Lt?(p.push(It,ne),p.push(M+O*K,E+W*K),p.push(It,ne),p.push(M+rt*K,E+Z*K)):(p.push(M-O*H,E-W*H),p.push(he,ae),p.push(M-rt*H,E-Z*H),p.push(he,ae)),y+=2):h.join==="round"?Lt?(p.push(It,ne),p.push(M+O*K,E+W*K),y+=Ue(M,E,M+O*K,E+W*K,M+rt*K,E+Z*K,p,!0)+4,p.push(It,ne),p.push(M+rt*K,E+Z*K)):(p.push(M-O*H,E-W*H),p.push(he,ae),y+=Ue(M,E,M-O*H,E-W*H,M-rt*H,E-Z*H,p,!1)+4,p.push(M-rt*H,E-Z*H),p.push(he,ae)):(p.push(It,ne),p.push(he,ae)):(p.push(M-O*H,E-W*H),p.push(M+O*K,E+W*K),h.join==="round"?Lt?y+=Ue(M,E,M+O*K,E+W*K,M+rt*K,E+Z*K,p,!0)+2:y+=Ue(M,E,M-O*H,E-W*H,M-rt*H,E-Z*H,p,!1)+2:h.join==="miter"&&zt/v<=S&&(Lt?(p.push(he,ae),p.push(he,ae)):(p.push(It,ne),p.push(It,ne)),y+=2),p.push(M-rt*H,E-Z*H),p.push(M+rt*K,E+Z*K),y+=2)}k=i[(_-2)*2],L=i[(_-2)*2+1],M=i[(_-1)*2],E=i[(_-1)*2+1],O=-(L-E),W=k-M,$=Math.sqrt(O*O+W*W),O/=$,W/=$,O*=b,W*=b,p.push(M-O*H,E-W*H),p.push(M+O*K,E+W*K),m||(h.cap==="round"?y+=Ue(M-O*(H-K)*.5,E-W*(H-K)*.5,M-O*H,E-W*H,M+O*K,E+W*K,p,!1)+2:h.cap==="square"&&(y+=la(M,E,O,W,H,K,!1,p)));const gt=oa*oa;for(let ft=w;ft<y+w-2;++ft)k=p[ft*2],L=p[ft*2+1],M=p[(ft+1)*2],E=p[(ft+1)*2+1],tt=p[(ft+2)*2],it=p[(ft+2)*2+1],!(Math.abs(k*(E-it)+M*(it-L)+tt*(L-E))<gt)&&o.push(ft,ft+1,ft+2)}function ll(i,t,e,s,r,n,a){const o=bd(i,t,2);if(!o)return;for(let c=0;c<o.length;c+=3)n[a++]=o[c]+r,n[a++]=o[c+1]+r,n[a++]=o[c+2]+r;let l=r*s;for(let c=0;c<i.length;c+=2)e[l]=i[c],e[l+1]=i[c+1],l+=s}const Ff=[],Rf={extension:{type:J.ShapeBuilder,name:"polygon"},build(i,t){for(let e=0;e<i.points.length;e++)t[e]=i.points[e];return t},triangulate(i,t,e,s,r,n){ll(i,Ff,t,e,s,r,n)}},Df={extension:{type:J.ShapeBuilder,name:"rectangle"},build(i,t){const e=i,s=e.x,r=e.y,n=e.width,a=e.height;return n>=0&&a>=0&&(t[0]=s,t[1]=r,t[2]=s+n,t[3]=r,t[4]=s+n,t[5]=r+a,t[6]=s,t[7]=r+a),t},triangulate(i,t,e,s,r,n){let a=0;s*=e,t[s+a]=i[0],t[s+a+1]=i[1],a+=e,t[s+a]=i[2],t[s+a+1]=i[3],a+=e,t[s+a]=i[6],t[s+a+1]=i[7],a+=e,t[s+a]=i[4],t[s+a+1]=i[5],a+=e;const o=s/e;r[n++]=o,r[n++]=o+1,r[n++]=o+2,r[n++]=o+1,r[n++]=o+3,r[n++]=o+2}},Vf={extension:{type:J.ShapeBuilder,name:"triangle"},build(i,t){return t[0]=i.x,t[1]=i.y,t[2]=i.x2,t[3]=i.y2,t[4]=i.x3,t[5]=i.y3,t},triangulate(i,t,e,s,r,n){let a=0;s*=e,t[s+a]=i[0],t[s+a+1]=i[1],a+=e,t[s+a]=i[2],t[s+a+1]=i[3],a+=e,t[s+a]=i[4],t[s+a+1]=i[5];const o=s/e;r[n++]=o,r[n++]=o+1,r[n++]=o+2}},xi={};re.handleByMap(J.ShapeBuilder,xi);re.add(Df,Rf,Vf,Rs,Pf,Tf);const Gf=new Xt;function Hf(i,t){const{geometryData:e,batches:s}=t;s.length=0,e.indices.length=0,e.vertices.length=0,e.uvs.length=0;for(let r=0;r<i.instructions.length;r++){const n=i.instructions[r];if(n.action==="texture")Wf(n.data,s,e);else if(n.action==="fill"||n.action==="stroke"){const a=n.action==="stroke",o=n.data.path.shapePath,l=n.data.style,c=n.data.hole;a&&c&&ha(c.shapePath,l,null,!0,s,e),ha(o,l,c,a,s,e)}}}function Wf(i,t,e){const{vertices:s,uvs:r,indices:n}=e,a=n.length,o=s.length/2,l=[],c=xi.rectangle,h=Gf,u=i.image;h.x=i.dx,h.y=i.dy,h.width=i.dw,h.height=i.dh;const f=i.transform;c.build(h,l),f&&al(l,f),c.triangulate(l,s,2,o,n,a);const d=u.uvs;r.push(d.x0,d.y0,d.x1,d.y1,d.x3,d.y3,d.x2,d.y2);const m=Be.get(ol);m.indexOffset=a,m.indexSize=n.length-a,m.attributeOffset=o,m.attributeSize=s.length/2-o,m.baseColor=i.style,m.alpha=i.alpha,m.texture=u,m.geometryData=e,t.push(m)}function ha(i,t,e,s,r,n){const{vertices:a,uvs:o,indices:l}=n,c=i.shapePrimitives.length-1;i.shapePrimitives.forEach(({shape:h,transform:u},f)=>{const d=l.length,m=a.length/2,g=[],p=xi[h.type];if(p.build(h,g),u&&al(g,u),s){const b=h.closePath??!0;Bf(g,t,!1,b,a,2,m,l)}else if(e&&c===f){c!==0&&console.warn("[Pixi Graphics] only the last shape have be cut out");const b=[],v=g.slice();zf(e.shapePath).forEach(k=>{b.push(v.length/2),v.push(...k)}),ll(v,b,a,2,m,l,d)}else p.triangulate(g,a,2,m,l,d);const _=o.length/2,y=t.texture;if(y!==xt.WHITE){const b=t.matrix;b&&(u&&b.append(u.clone().invert()),kf(a,2,m,o,_,2,a.length/2-m,b))}else Sf(o,_,2,a.length/2-m);const w=Be.get(ol);w.indexOffset=d,w.indexSize=l.length-d,w.attributeOffset=m,w.attributeSize=a.length/2-m,w.baseColor=t.color,w.alpha=t.alpha,w.texture=y,w.geometryData=n,r.push(w)})}function zf(i){if(!i)return[];const t=i.shapePrimitives,e=[];for(let s=0;s<t.length;s++){const r=t[s].shape,n=[];xi[r.type].build(r,n),e.push(n)}return e}class Uf{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Of{constructor(){this.batcher=new Af,this.instructions=new go}init(){this.instructions.reset()}get geometry(){return At(Zc,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const Dr=class gr{constructor(){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null)}init(t){gr.defaultOptions.bezierSmoothness=(t==null?void 0:t.bezierSmoothness)??gr.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),Hf(t,e);const s=t.batchMode;t.customShader||s==="no-batch"?e.isBatchable=!1:s==="auto"&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=Be.get(Of),{batches:s,geometryData:r}=this._gpuContextHash[t.uid],n=r.vertices.length,a=r.indices.length;for(let h=0;h<s.length;h++)s[h].applyTransform=!1;const o=e.batcher;o.ensureAttributeBuffer(n),o.ensureIndexBuffer(a),o.begin();for(let h=0;h<s.length;h++){const u=s[h];o.add(u)}o.finish(e.instructions);const l=o.geometry;l.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),l.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const c=o.batches;for(let h=0;h<c.length;h++){const u=c[h];u.bindGroup=Vd(u.textures.textures,u.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new Uf;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(Be.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(s=>{Be.return(s)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};Dr.extension={type:[J.WebGLSystem,J.WebGPUSystem,J.CanvasSystem],name:"graphicsContext"};Dr.defaultOptions={bezierSmoothness:.5};let hl=Dr;const Nf=8,Qs=11920929e-14,jf=1;function cl(i,t,e,s,r,n,a,o,l,c){const u=Math.min(.99,Math.max(0,c??hl.defaultOptions.bezierSmoothness));let f=(jf-u)/1;return f*=f,Xf(t,e,s,r,n,a,o,l,i,f),i}function Xf(i,t,e,s,r,n,a,o,l,c){_r(i,t,e,s,r,n,a,o,l,c,0),l.push(a,o)}function _r(i,t,e,s,r,n,a,o,l,c,h){if(h>Nf)return;const u=(i+e)/2,f=(t+s)/2,d=(e+r)/2,m=(s+n)/2,g=(r+a)/2,p=(n+o)/2,_=(u+d)/2,y=(f+m)/2,w=(d+g)/2,b=(m+p)/2,v=(_+w)/2,S=(y+b)/2;if(h>0){let k=a-i,L=o-t;const M=Math.abs((e-a)*L-(s-o)*k),E=Math.abs((r-a)*L-(n-o)*k);if(M>Qs&&E>Qs){if((M+E)*(M+E)<=c*(k*k+L*L)){l.push(v,S);return}}else if(M>Qs){if(M*M<=c*(k*k+L*L)){l.push(v,S);return}}else if(E>Qs){if(E*E<=c*(k*k+L*L)){l.push(v,S);return}}else if(k=v-(i+a)/2,L=S-(t+o)/2,k*k+L*L<=c){l.push(v,S);return}}_r(i,t,u,f,_,y,v,S,l,c,h+1),_r(v,S,w,b,g,p,a,o,l,c,h+1)}const Yf=8,qf=11920929e-14,Zf=1;function Kf(i,t,e,s,r,n,a,o){const c=Math.min(.99,Math.max(0,o??hl.defaultOptions.bezierSmoothness));let h=(Zf-c)/1;return h*=h,$f(t,e,s,r,n,a,i,h),i}function $f(i,t,e,s,r,n,a,o){yr(a,i,t,e,s,r,n,o,0),a.push(r,n)}function yr(i,t,e,s,r,n,a,o,l){if(l>Yf)return;const c=(t+s)/2,h=(e+r)/2,u=(s+n)/2,f=(r+a)/2,d=(c+u)/2,m=(h+f)/2;let g=n-t,p=a-e;const _=Math.abs((s-n)*p-(r-a)*g);if(_>qf){if(_*_<=o*(g*g+p*p)){i.push(d,m);return}}else if(g=d-(t+n)/2,p=m-(e+a)/2,g*g+p*p<=o){i.push(d,m);return}yr(i,t,e,c,h,d,m,o,l+1),yr(i,d,m,u,f,n,a,o,l+1)}function ul(i,t,e,s,r,n,a,o){let l=Math.abs(r-n);(!a&&r>n||a&&n>r)&&(l=2*Math.PI-l),o=o||Math.max(6,Math.floor(6*Math.pow(s,1/3)*(l/Math.PI))),o=Math.max(o,3);let c=l/o,h=r;c*=a?-1:1;for(let u=0;u<o+1;u++){const f=Math.cos(h),d=Math.sin(h),m=t+f*s,g=e+d*s;i.push(m,g),h+=c}}function Qf(i,t,e,s,r,n){const a=i[i.length-2],l=i[i.length-1]-e,c=a-t,h=r-e,u=s-t,f=Math.abs(l*u-c*h);if(f<1e-8||n===0){(i[i.length-2]!==t||i[i.length-1]!==e)&&i.push(t,e);return}const d=l*l+c*c,m=h*h+u*u,g=l*h+c*u,p=n*Math.sqrt(d)/f,_=n*Math.sqrt(m)/f,y=p*g/d,w=_*g/m,b=p*u+_*c,v=p*h+_*l,S=c*(_+y),k=l*(_+y),L=u*(p+w),M=h*(p+w),E=Math.atan2(k-v,S-b),tt=Math.atan2(M-v,L-b);ul(i,b+t,v+e,n,E,tt,c*h>u*l)}const Ms=Math.PI*2,Xi={centerX:0,centerY:0,ang1:0,ang2:0},Yi=({x:i,y:t},e,s,r,n,a,o,l)=>{i*=e,t*=s;const c=r*i-n*t,h=n*i+r*t;return l.x=c+a,l.y=h+o,l};function Jf(i,t){const e=t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),s=t===1.5707963267948966?.551915024494:e,r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+t),o=Math.sin(i+t);return[{x:r-n*s,y:n+r*s},{x:a+o*s,y:o-a*s},{x:a,y:o}]}const ca=(i,t,e,s)=>{const r=i*s-t*e<0?-1:1;let n=i*e+t*s;return n>1&&(n=1),n<-1&&(n=-1),r*Math.acos(n)},t1=(i,t,e,s,r,n,a,o,l,c,h,u,f)=>{const d=Math.pow(r,2),m=Math.pow(n,2),g=Math.pow(h,2),p=Math.pow(u,2);let _=d*m-d*p-m*g;_<0&&(_=0),_/=d*p+m*g,_=Math.sqrt(_)*(a===o?-1:1);const y=_*r/n*u,w=_*-n/r*h,b=c*y-l*w+(i+e)/2,v=l*y+c*w+(t+s)/2,S=(h-y)/r,k=(u-w)/n,L=(-h-y)/r,M=(-u-w)/n,E=ca(1,0,S,k);let tt=ca(S,k,L,M);o===0&&tt>0&&(tt-=Ms),o===1&&tt<0&&(tt+=Ms),f.centerX=b,f.centerY=v,f.ang1=E,f.ang2=tt};function e1(i,t,e,s,r,n,a,o=0,l=0,c=0){if(n===0||a===0)return;const h=Math.sin(o*Ms/360),u=Math.cos(o*Ms/360),f=u*(t-s)/2+h*(e-r)/2,d=-h*(t-s)/2+u*(e-r)/2;if(f===0&&d===0)return;n=Math.abs(n),a=Math.abs(a);const m=Math.pow(f,2)/Math.pow(n,2)+Math.pow(d,2)/Math.pow(a,2);m>1&&(n*=Math.sqrt(m),a*=Math.sqrt(m)),t1(t,e,s,r,n,a,l,c,h,u,f,d,Xi);let{ang1:g,ang2:p}=Xi;const{centerX:_,centerY:y}=Xi;let w=Math.abs(p)/(Ms/4);Math.abs(1-w)<1e-7&&(w=1);const b=Math.max(Math.ceil(w),1);p/=b;let v=i[i.length-2],S=i[i.length-1];const k={x:0,y:0};for(let L=0;L<b;L++){const M=Jf(g,p),{x:E,y:tt}=Yi(M[0],n,a,u,h,_,y,k),{x:it,y:O}=Yi(M[1],n,a,u,h,_,y,k),{x:W,y:rt}=Yi(M[2],n,a,u,h,_,y,k);cl(i,v,S,E,tt,it,O,W,rt),v=W,S=rt,g+=p}}function s1(i,t,e){const s=(a,o)=>{const l=o.x-a.x,c=o.y-a.y,h=Math.sqrt(l*l+c*c),u=l/h,f=c/h;return{len:h,nx:u,ny:f}},r=(a,o)=>{a===0?i.moveTo(o.x,o.y):i.lineTo(o.x,o.y)};let n=t[t.length-1];for(let a=0;a<t.length;a++){const o=t[a%t.length],l=o.radius??e;if(l<=0){r(a,o),n=o;continue}const c=t[(a+1)%t.length],h=s(o,n),u=s(o,c);if(h.len<1e-4||u.len<1e-4){r(a,o),n=o;continue}let f=Math.asin(h.nx*u.ny-h.ny*u.nx),d=1,m=!1;h.nx*u.nx-h.ny*-u.ny<0?f<0?f=Math.PI+f:(f=Math.PI-f,d=-1,m=!0):f>0&&(d=-1,m=!0);const g=f/2;let p,_=Math.abs(Math.cos(g)*l/Math.sin(g));_>Math.min(h.len/2,u.len/2)?(_=Math.min(h.len/2,u.len/2),p=Math.abs(_*Math.sin(g)/Math.cos(g))):p=l;const y=o.x+u.nx*_+-u.ny*p*d,w=o.y+u.ny*_+u.nx*p*d,b=Math.atan2(h.ny,h.nx)+Math.PI/2*d,v=Math.atan2(u.ny,u.nx)-Math.PI/2*d;a===0&&i.moveTo(y+Math.cos(b)*p,w+Math.sin(b)*p),i.arc(y,w,p,b,v,m),n=o}}function i1(i,t,e,s){const r=(o,l)=>Math.sqrt((o.x-l.x)**2+(o.y-l.y)**2),n=(o,l,c)=>({x:o.x+(l.x-o.x)*c,y:o.y+(l.y-o.y)*c}),a=t.length;for(let o=0;o<a;o++){const l=t[(o+1)%a],c=l.radius??e;if(c<=0){o===0?i.moveTo(l.x,l.y):i.lineTo(l.x,l.y);continue}const h=t[o],u=t[(o+2)%a],f=r(h,l);let d;if(f<1e-4)d=l;else{const p=Math.min(f/2,c);d=n(l,h,p/f)}const m=r(u,l);let g;if(m<1e-4)g=l;else{const p=Math.min(m/2,c);g=n(l,u,p/m)}o===0?i.moveTo(d.x,d.y):i.lineTo(d.x,d.y),i.quadraticCurveTo(l.x,l.y,g.x,g.y,s)}}const r1=new Xt;class n1{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Me,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const s=this._currentPoly.points,r=s[s.length-2],n=s[s.length-1];return(r!==t||n!==e)&&s.push(t,e),this}arc(t,e,s,r,n,a){this._ensurePoly(!1);const o=this._currentPoly.points;return ul(o,t,e,s,r,n,a),this}arcTo(t,e,s,r,n){this._ensurePoly();const a=this._currentPoly.points;return Qf(a,t,e,s,r,n),this}arcToSvg(t,e,s,r,n,a,o){const l=this._currentPoly.points;return e1(l,this._currentPoly.lastX,this._currentPoly.lastY,a,o,t,e,s,r,n),this}bezierCurveTo(t,e,s,r,n,a,o){this._ensurePoly();const l=this._currentPoly;return cl(this._currentPoly.points,l.lastX,l.lastY,t,e,s,r,n,a,o),this}quadraticCurveTo(t,e,s,r,n){this._ensurePoly();const a=this._currentPoly;return Kf(this._currentPoly.points,a.lastX,a.lastY,t,e,s,r,n),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0),t.transform(e));for(let s=0;s<t.instructions.length;s++){const r=t.instructions[s];this[r.action](...r.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,s,r,n){return this.drawShape(new Xt(t,e,s,r),n),this}circle(t,e,s,r){return this.drawShape(new Br(t,e,s),r),this}poly(t,e,s){const r=new Ls(t);return r.closePath=e,this.drawShape(r,s),this}regularPoly(t,e,s,r,n=0,a){r=Math.max(r|0,3);const o=-1*Math.PI/2+n,l=Math.PI*2/r,c=[];for(let h=0;h<r;h++){const u=h*l+o;c.push(t+s*Math.cos(u),e+s*Math.sin(u))}return this.poly(c,!0,a),this}roundPoly(t,e,s,r,n,a=0,o){if(r=Math.max(r|0,3),n<=0)return this.regularPoly(t,e,s,r,a);const l=s*Math.sin(Math.PI/r)-.001;n=Math.min(n,l);const c=-1*Math.PI/2+a,h=Math.PI*2/r,u=(r-2)*Math.PI/r/2;for(let f=0;f<r;f++){const d=f*h+c,m=t+s*Math.cos(d),g=e+s*Math.sin(d),p=d+Math.PI+u,_=d-Math.PI-u,y=m+n*Math.cos(p),w=g+n*Math.sin(p),b=m+n*Math.cos(_),v=g+n*Math.sin(_);f===0?this.moveTo(y,w):this.lineTo(y,w),this.quadraticCurveTo(m,g,b,v,o)}return this.closePath()}roundShape(t,e,s=!1,r){return t.length<3?this:(s?i1(this,t,e,r):s1(this,t,e),this.closePath())}filletRect(t,e,s,r,n){if(n===0)return this.rect(t,e,s,r);const a=Math.min(s,r)/2,o=Math.min(a,Math.max(-a,n)),l=t+s,c=e+r,h=o<0?-o:0,u=Math.abs(o);return this.moveTo(t,e+u).arcTo(t+h,e+h,t+u,e,u).lineTo(l-u,e).arcTo(l-h,e+h,l,e+u,u).lineTo(l,c-u).arcTo(l-h,c-h,t+s-u,c,u).lineTo(t+u,c).arcTo(t+h,c-h,t,c-u,u).closePath()}chamferRect(t,e,s,r,n,a){if(n<=0)return this.rect(t,e,s,r);const o=Math.min(n,Math.min(s,r)/2),l=t+s,c=e+r,h=[t+o,e,l-o,e,l,e+o,l,c-o,l-o,c,t+o,c,t,c-o,t,e+o];for(let u=h.length-1;u>=2;u-=2)h[u]===h[u-2]&&h[u-1]===h[u-3]&&h.splice(u-1,2);return this.poly(h,!0,a)}ellipse(t,e,s,r,n){return this.drawShape(new Fr(t,e,s,r),n),this}roundRect(t,e,s,r,n,a){return this.drawShape(new Rr(t,e,s,r,n),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let s=this._currentPoly;return s&&this.endPoly(),s=new Ls,s.points.push(t,e),this._currentPoly=s,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new Ls,t)){const e=this.shapePrimitives[this.shapePrimitives.length-1];if(e){let s=e.shape.x,r=e.shape.y;if(e.transform&&!e.transform.isIdentity()){const n=e.transform,a=s;s=n.a*s+n.c*r+n.tx,r=n.b*a+n.d*r+n.ty}this._currentPoly.points.push(s,r)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const s=t.instructions[e];this[s.action](...s.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let s=0;s<e.length;s++){const r=e[s],n=r.shape.getBounds(r1);r.transform?t.addRect(n,r.transform):t.addRect(n)}return t}}class us{constructor(t){this.instructions=[],this.uid=Yt("graphicsPath"),this._dirty=!0,typeof t=="string"?Id(t,this):this.instructions=(t==null?void 0:t.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new n1(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,s,r,n){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(se.shared);let l=0,c=0;if(!a||a.action!=="bezierCurveTo")l=o.x,c=o.y;else{l=a.data[2],c=a.data[3];const h=o.x,u=o.y;l=h+(h-l),c=u+(u-c)}return this.instructions.push({action:"bezierCurveTo",data:[l,c,t,e,s,r,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,s){const r=this.instructions[this.instructions.length-1],n=this.getLastPoint(se.shared);let a=0,o=0;if(!r||r.action!=="quadraticCurveTo")a=n.x,o=n.y;else{a=r.data[0],o=r.data[1];const l=n.x,c=n.y;a=l+(l-a),o=c+(c-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,t,e,s]}),this._dirty=!0,this}rect(t,e,s,r,n){return this.instructions.push({action:"rect",data:[t,e,s,r,n]}),this._dirty=!0,this}circle(t,e,s,r){return this.instructions.push({action:"circle",data:[t,e,s,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,s,r,n,a,o){n=n||r/2;const l=-1*Math.PI/2+a,c=s*2,h=Math.PI*2/c,u=[];for(let f=0;f<c;f++){const d=f%2?n:r,m=f*h+l;u.push(t+d*Math.cos(m),e+d*Math.sin(m))}return this.poly(u,!0,o),this}clone(t=!1){const e=new us;if(!t)e.instructions=this.instructions.slice();else for(let s=0;s<this.instructions.length;s++){const r=this.instructions[s];e.instructions.push({action:r.action,data:r.data.slice()})}return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,s=t.b,r=t.c,n=t.d,a=t.tx,o=t.ty;let l=0,c=0,h=0,u=0,f=0,d=0,m=0,g=0;for(let p=0;p<this.instructions.length;p++){const _=this.instructions[p],y=_.data;switch(_.action){case"moveTo":case"lineTo":l=y[0],c=y[1],y[0]=e*l+r*c+a,y[1]=s*l+n*c+o;break;case"bezierCurveTo":h=y[0],u=y[1],f=y[2],d=y[3],l=y[4],c=y[5],y[0]=e*h+r*u+a,y[1]=s*h+n*u+o,y[2]=e*f+r*d+a,y[3]=s*f+n*d+o,y[4]=e*l+r*c+a,y[5]=s*l+n*c+o;break;case"quadraticCurveTo":h=y[0],u=y[1],l=y[2],c=y[3],y[0]=e*h+r*u+a,y[1]=s*h+n*u+o,y[2]=e*l+r*c+a,y[3]=s*l+n*c+o;break;case"arcToSvg":l=y[5],c=y[6],m=y[0],g=y[1],y[0]=e*m+r*g,y[1]=s*m+n*g,y[5]=e*l+r*c+a,y[6]=s*l+n*c+o;break;case"circle":y[4]=xs(y[3],t);break;case"rect":y[4]=xs(y[4],t);break;case"ellipse":y[8]=xs(y[8],t);break;case"roundRect":y[5]=xs(y[5],t);break;case"addPath":y[0].transform(t);break;case"poly":y[2]=xs(y[2],t);break;default:Ot("unknown transform action",_.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,s=this.instructions[e];if(!s)return t.x=0,t.y=0,t;for(;s.action==="closePath";){if(e--,e<0)return t.x=0,t.y=0,t;s=this.instructions[e]}switch(s.action){case"moveTo":case"lineTo":t.x=s.data[0],t.y=s.data[1];break;case"quadraticCurveTo":t.x=s.data[2],t.y=s.data[3];break;case"bezierCurveTo":t.x=s.data[4],t.y=s.data[5];break;case"arc":case"arcToSvg":t.x=s.data[5],t.y=s.data[6];break;case"addPath":s.data[0].getLastPoint(t);break}return t}}function xs(i,t){return i?i.prepend(t):t.clone()}function a1(i,t){if(typeof i=="string"){const s=document.createElement("div");s.innerHTML=i.trim(),i=s.querySelector("svg")}const e={context:t,path:new us};return dl(i,e,null,null),t}function dl(i,t,e,s){const r=i.children,{fillStyle:n,strokeStyle:a}=o1(i);n&&e?e={...e,...n}:n&&(e=n),a&&s?s={...s,...a}:a&&(s=a),t.context.fillStyle=e,t.context.strokeStyle=s;let o,l,c,h,u,f,d,m,g,p,_,y,w,b,v,S,k;switch(i.nodeName.toLowerCase()){case"path":b=i.getAttribute("d"),v=new us(b),t.context.path(v),e&&t.context.fill(),s&&t.context.stroke();break;case"circle":d=Zt(i,"cx",0),m=Zt(i,"cy",0),g=Zt(i,"r",0),t.context.ellipse(d,m,g,g),e&&t.context.fill(),s&&t.context.stroke();break;case"rect":o=Zt(i,"x",0),l=Zt(i,"y",0),S=Zt(i,"width",0),k=Zt(i,"height",0),p=Zt(i,"rx",0),_=Zt(i,"ry",0),p||_?t.context.roundRect(o,l,S,k,p||_):t.context.rect(o,l,S,k),e&&t.context.fill(),s&&t.context.stroke();break;case"ellipse":d=Zt(i,"cx",0),m=Zt(i,"cy",0),p=Zt(i,"rx",0),_=Zt(i,"ry",0),t.context.beginPath(),t.context.ellipse(d,m,p,_),e&&t.context.fill(),s&&t.context.stroke();break;case"line":c=Zt(i,"x1",0),h=Zt(i,"y1",0),u=Zt(i,"x2",0),f=Zt(i,"y2",0),t.context.beginPath(),t.context.moveTo(c,h),t.context.lineTo(u,f),s&&t.context.stroke();break;case"polygon":w=i.getAttribute("points"),y=w.match(/\d+/g).map(L=>parseInt(L,10)),t.context.poly(y,!0),e&&t.context.fill(),s&&t.context.stroke();break;case"polyline":w=i.getAttribute("points"),y=w.match(/\d+/g).map(L=>parseInt(L,10)),t.context.poly(y,!1),s&&t.context.stroke();break;case"g":case"svg":break;default:{console.info(`[SVG parser] <${i.nodeName}> elements unsupported`);break}}for(let L=0;L<r.length;L++)dl(r[L],t,e,s)}function Zt(i,t,e){const s=i.getAttribute(t);return s?Number(s):e}function o1(i){const t=i.getAttribute("style"),e={},s={};let r=!1,n=!1;if(t){const a=t.split(";");for(let o=0;o<a.length;o++){const l=a[o],[c,h]=l.split(":");switch(c){case"stroke":h!=="none"&&(e.color=Ut.shared.setValue(h).toNumber(),n=!0);break;case"stroke-width":e.width=Number(h);break;case"fill":h!=="none"&&(r=!0,s.color=Ut.shared.setValue(h).toNumber());break;case"fill-opacity":s.alpha=Number(h);break;case"stroke-opacity":e.alpha=Number(h);break;case"opacity":s.alpha=Number(h),e.alpha=Number(h);break}}}else{const a=i.getAttribute("stroke");a&&a!=="none"&&(n=!0,e.color=Ut.shared.setValue(a).toNumber(),e.width=Zt(i,"stroke-width",1));const o=i.getAttribute("fill");o&&o!=="none"&&(r=!0,s.color=Ut.shared.setValue(o).toNumber())}return{strokeStyle:n?e:null,fillStyle:r?s:null}}function l1(i){return Ut.isColorLike(i)}function ua(i){return i instanceof wi}function da(i){return i instanceof cs}function h1(i,t,e){const s=Ut.shared.setValue(t??0);return i.color=s.toNumber(),i.alpha=s.alpha===1?e.alpha:s.alpha,i.texture=xt.WHITE,{...e,...i}}function fa(i,t,e){return i.fill=t,i.color=16777215,i.texture=t.texture,i.matrix=t.transform,{...e,...i}}function ma(i,t,e){return t.buildLinearGradient(),i.fill=t,i.color=16777215,i.texture=t.texture,i.matrix=t.transform,{...e,...i}}function c1(i,t){var r;const e={...t,...i};if(e.texture){if(e.texture!==xt.WHITE){const a=((r=e.matrix)==null?void 0:r.invert())||new vt;a.translate(e.texture.frame.x,e.texture.frame.y),a.scale(1/e.texture.source.width,1/e.texture.source.height),e.matrix=a}const n=e.texture.source.style;n.addressMode==="clamp-to-edge"&&(n.addressMode="repeat",n.update())}const s=Ut.shared.setValue(e.color);return e.alpha*=s.alpha,e.color=s.toNumber(),e.matrix=e.matrix?e.matrix.clone():null,e}function Ye(i,t){if(i==null)return null;const e={},s=i;return l1(i)?h1(e,i,t):ua(i)?fa(e,i,t):da(i)?ma(e,i,t):s.fill&&ua(s.fill)?fa(s,s.fill,t):s.fill&&da(s.fill)?ma(s,s.fill,t):c1(s,t)}function fi(i,t){const{width:e,alignment:s,miterLimit:r,cap:n,join:a,...o}=t,l=Ye(i,o);return l?{width:e,alignment:s,miterLimit:r,cap:n,join:a,...l}:null}const u1=new se,pa=new vt,Vr=class ke extends ve{constructor(){super(...arguments),this.uid=Yt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new us,this._transform=new vt,this._fillStyle={...ke.defaultFillStyle},this._strokeStyle={...ke.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Me,this._boundsDirty=!0}clone(){const t=new ke;return t.batchMode=this.batchMode,t.instructions=this.instructions.slice(),t._activePath=this._activePath.clone(),t._transform=this._transform.clone(),t._fillStyle={...this._fillStyle},t._strokeStyle={...this._strokeStyle},t._stateStack=this._stateStack.slice(),t._bounds=this._bounds.clone(),t._boundsDirty=!0,t}get fillStyle(){return this._fillStyle}set fillStyle(t){this._fillStyle=Ye(t,ke.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(t){this._strokeStyle=fi(t,ke.defaultStrokeStyle)}setFillStyle(t){return this._fillStyle=Ye(t,ke.defaultFillStyle),this}setStrokeStyle(t){return this._strokeStyle=Ye(t,ke.defaultStrokeStyle),this}texture(t,e,s,r,n,a){return this.instructions.push({action:"texture",data:{image:t,dx:s||0,dy:r||0,dw:n||t.frame.width,dh:a||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?Ut.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new us,this}fill(t,e){let s;const r=this.instructions[this.instructions.length-1];return this._tick===0&&r&&r.action==="stroke"?s=r.data.path:s=this._activePath.clone(),s?(t!=null&&(e!==void 0&&typeof t=="number"&&(At(kt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),t={color:t,alpha:e}),this._fillStyle=Ye(t,ke.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:s}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(se.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(t){let e;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="fill"?e=s.data.path:e=this._activePath.clone(),e?(t!=null&&(this._strokeStyle=fi(t,ke.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:e}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],s=this._activePath.clone();if(e&&(e.action==="stroke"||e.action==="fill"))if(e.data.hole)e.data.hole.addPath(s);else{e.data.hole=s;break}}return this._initNextPathLocation(),this}arc(t,e,s,r,n,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,s,r,n,a),this}arcTo(t,e,s,r,n){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*s+a.c*r+a.tx,a.b*s+a.d*r+a.ty,n),this}arcToSvg(t,e,s,r,n,a,o){this._tick++;const l=this._transform;return this._activePath.arcToSvg(t,e,s,r,n,l.a*a+l.c*o+l.tx,l.b*a+l.d*o+l.ty),this}bezierCurveTo(t,e,s,r,n,a,o){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*t+l.c*e+l.tx,l.b*t+l.d*e+l.ty,l.a*s+l.c*r+l.tx,l.b*s+l.d*r+l.ty,l.a*n+l.c*a+l.tx,l.b*n+l.d*a+l.ty,o),this}closePath(){var t;return this._tick++,(t=this._activePath)==null||t.closePath(),this}ellipse(t,e,s,r){return this._tick++,this._activePath.ellipse(t,e,s,r,this._transform.clone()),this}circle(t,e,s){return this._tick++,this._activePath.circle(t,e,s,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const s=this._transform;return this._activePath.lineTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty),this}moveTo(t,e){this._tick++;const s=this._transform,r=this._activePath.instructions,n=s.a*t+s.c*e+s.tx,a=s.b*t+s.d*e+s.ty;return r.length===1&&r[0].action==="moveTo"?(r[0].data[0]=n,r[0].data[1]=a,this):(this._activePath.moveTo(n,a),this)}quadraticCurveTo(t,e,s,r,n){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*s+a.c*r+a.tx,a.b*s+a.d*r+a.ty,n),this}rect(t,e,s,r){return this._tick++,this._activePath.rect(t,e,s,r,this._transform.clone()),this}roundRect(t,e,s,r,n){return this._tick++,this._activePath.roundRect(t,e,s,r,n,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,s,r,n=0,a){return this._tick++,this._activePath.regularPoly(t,e,s,r,n,a),this}roundPoly(t,e,s,r,n,a){return this._tick++,this._activePath.roundPoly(t,e,s,r,n,a),this}roundShape(t,e,s,r){return this._tick++,this._activePath.roundShape(t,e,s,r),this}filletRect(t,e,s,r,n){return this._tick++,this._activePath.filletRect(t,e,s,r,n),this}chamferRect(t,e,s,r,n,a){return this._tick++,this._activePath.chamferRect(t,e,s,r,n,a),this}star(t,e,s,r,n=0,a=0){return this._tick++,this._activePath.star(t,e,s,r,n,a,this._transform.clone()),this}svg(t){return this._tick++,a1(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,s,r,n,a){return t instanceof vt?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,s,r,n,a),this)}transform(t,e,s,r,n,a){return t instanceof vt?(this._transform.append(t),this):(pa.set(t,e,s,r,n,a),this._transform.append(pa),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const s=this.instructions[e],r=s.action;if(r==="fill"){const n=s.data;t.addBounds(n.path.bounds)}else if(r==="texture"){const n=s.data;t.addFrame(n.dx,n.dy,n.dx+n.dw,n.dy+n.dh,n.transform)}if(r==="stroke"){const n=s.data,a=n.style.width/2,o=n.path.bounds;t.addFrame(o.minX-a,o.minY-a,o.maxX+a,o.maxY+a)}}return t}containsPoint(t){var r;if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let s=!1;for(let n=0;n<e.length;n++){const a=e[n],o=a.data,l=o.path;if(!a.action||!l)continue;const c=o.style,h=l.shapePath.shapePrimitives;for(let u=0;u<h.length;u++){const f=h[u].shape;if(!c||!f)continue;const d=h[u].transform,m=d?d.applyInverse(t,u1):t;a.action==="fill"?s=f.contains(m.x,m.y):s=f.strokeContains(m.x,m.y,c.width);const g=o.hole;if(g){const p=(r=g.shapePath)==null?void 0:r.shapePrimitives;if(p)for(let _=0;_<p.length;_++)p[_].shape.contains(m.x,m.y)&&(s=!1)}if(s)return!0}}return s}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const s=typeof t=="boolean"?t:t==null?void 0:t.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(s),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(s)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};Vr.defaultFillStyle={color:16777215,alpha:1,texture:xt.WHITE,matrix:null,fill:null};Vr.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:xt.WHITE,matrix:null,fill:null};let me=Vr;const ga=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function d1(i){const t=[];let e=0;for(let s=0;s<ga.length;s++){const r=`_${ga[s]}`;t[e++]=i[r]}return e=fl(i._fill,t,e),e=f1(i._stroke,t,e),e=m1(i.dropShadow,t,e),t.join("-")}function fl(i,t,e){var s;return i&&(t[e++]=i.color,t[e++]=i.alpha,t[e++]=(s=i.fill)==null?void 0:s.styleKey),e}function f1(i,t,e){return i&&(e=fl(i,t,e),t[e++]=i.width,t[e++]=i.alignment,t[e++]=i.cap,t[e++]=i.join,t[e++]=i.miterLimit),e}function m1(i,t,e){return i&&(t[e++]=i.alpha,t[e++]=i.angle,t[e++]=i.blur,t[e++]=i.distance,t[e++]=Ut.shared.setValue(i.color).toNumber()),e}const Gr=class ts extends ve{constructor(t={}){super(),p1(t);const e={...ts.defaultTextStyle,...t};for(const s in e){const r=s;this[r]=e[s]}this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(t){t!==null&&typeof t=="object"?this._dropShadow=this._createProxy({...ts.defaultDropShadow,...t}):this._dropShadow=t?this._createProxy({...ts.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){typeof t=="string"?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...me.defaultFillStyle,...t},()=>{this._fill=Ye({...this._originalFill},me.defaultFillStyle)})),this._fill=Ye(t===0?"black":t,me.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...me.defaultStrokeStyle,...t},()=>{this._stroke=fi({...this._originalStroke},me.defaultStrokeStyle)})),this._stroke=fi(t,me.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=d1(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const t=ts.defaultTextStyle;for(const e in t)this[e]=t[e]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ts({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){var s,r,n,a;if(this.removeAllListeners(),typeof t=="boolean"?t:t==null?void 0:t.texture){const o=typeof t=="boolean"?t:t==null?void 0:t.textureSource;(s=this._fill)!=null&&s.texture&&this._fill.texture.destroy(o),(r=this._originalFill)!=null&&r.texture&&this._originalFill.texture.destroy(o),(n=this._stroke)!=null&&n.texture&&this._stroke.texture.destroy(o),(a=this._originalStroke)!=null&&a.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(s,r,n)=>(s[r]=n,e==null||e(r,n),this.update(),!0)})}_isFillStyle(t){return(t??null)!==null&&!(Ut.isColorLike(t)||t instanceof cs||t instanceof wi)}};Gr.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};Gr.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ds=Gr;function p1(i){const t=i;if(typeof t.dropShadow=="boolean"&&t.dropShadow){const e=ds.defaultDropShadow;i.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness!==void 0){At(kt,"strokeThickness is now a part of stroke");const e=t.stroke;let s={};if(Ut.isColorLike(e))s.color=e;else if(e instanceof cs||e instanceof wi)s.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))s=e;else throw new Error("Invalid stroke value.");i.stroke={...s,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){At(kt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e;i.fontSize==null?i.fontSize=ds.defaultTextStyle.fontSize:typeof i.fontSize=="string"?e=parseInt(i.fontSize,10):e=i.fontSize;const s=new cs(0,0,0,e*1.7),r=t.fillGradientStops.map(n=>Ut.shared.setValue(n).toNumber());r.forEach((n,a)=>{const o=a/(r.length-1);s.addColorStop(o,n)}),i.fill={fill:s}}}class g1{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const s=Ht.get().createCanvas();s.width=t,s.height=e;const r=s.getContext("2d");return{canvas:s,context:r}}getOptimalCanvasAndContext(t,e,s=1){t=Math.ceil(t*s-1e-6),e=Math.ceil(e*s-1e-6),t=Sn(t),e=Sn(e);const r=(t<<17)+(e<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let n=this._canvasPool[r].pop();return n||(n=this._createCanvasAndContext(t,e)),n}returnCanvasAndContext(t){const e=t.canvas,{width:s,height:r}=e,n=(s<<17)+(r<<1);this._canvasPool[n].push(t)}clear(){this._canvasPool={}}}const _a=new g1,_1=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function br(i){const t=typeof i.fontSize=="number"?`${i.fontSize}px`:i.fontSize;let e=i.fontFamily;Array.isArray(i.fontFamily)||(e=i.fontFamily.split(","));for(let s=e.length-1;s>=0;s--){let r=e[s].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!_1.includes(r)&&(r=`"${r}"`),e[s]=r}return`${i.fontStyle} ${i.fontVariant} ${i.fontWeight} ${t} ${e.join(",")}`}const qi={willReadFrequently:!0},Ce=class Q{static get experimentalLetterSpacingSupported(){let t=Q._experimentalLetterSpacingSupported;if(t!==void 0){const e=Ht.get().getCanvasRenderingContext2D().prototype;t=Q._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,s,r,n,a,o,l,c){this.text=t,this.style=e,this.width=s,this.height=r,this.lines=n,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=c}static measureText(t=" ",e,s=Q._canvas,r=e.wordWrap){var y;const n=`${t}:${e.styleKey}`;if(Q._measurementCache[n])return Q._measurementCache[n];const a=br(e),o=Q.measureFont(a);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const l=Q.__context;l.font=a;const h=(r?Q._wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),u=new Array(h.length);let f=0;for(let w=0;w<h.length;w++){const b=Q._measureText(h[w],e.letterSpacing,l);u[w]=b,f=Math.max(f,b)}const d=((y=e._stroke)==null?void 0:y.width)||0;let m=f+d;e.dropShadow&&(m+=e.dropShadow.distance);const g=e.lineHeight||o.fontSize;let p=Math.max(g,o.fontSize+d)+(h.length-1)*(g+e.leading);return e.dropShadow&&(p+=e.dropShadow.distance),new Q(t,e,m,p,h,u,g+e.leading,f,o)}static _measureText(t,e,s){let r=!1;Q.experimentalLetterSpacingSupported&&(Q.experimentalLetterSpacing?(s.letterSpacing=`${e}px`,s.textLetterSpacing=`${e}px`,r=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let n=s.measureText(t).width;return n>0&&(r?n-=e:n+=(Q.graphemeSegmenter(t).length-1)*e),n}static _wordWrap(t,e,s=Q._canvas){const r=s.getContext("2d",qi);let n=0,a="",o="";const l=Object.create(null),{letterSpacing:c,whiteSpace:h}=e,u=Q._collapseSpaces(h),f=Q._collapseNewlines(h);let d=!u;const m=e.wordWrapWidth+c,g=Q._tokenize(t);for(let p=0;p<g.length;p++){let _=g[p];if(Q._isNewline(_)){if(!f){o+=Q._addLine(a),d=!u,a="",n=0;continue}_=" "}if(u){const w=Q.isBreakingSpace(_),b=Q.isBreakingSpace(a[a.length-1]);if(w&&b)continue}const y=Q._getFromCache(_,c,l,r);if(y>m)if(a!==""&&(o+=Q._addLine(a),a="",n=0),Q.canBreakWords(_,e.breakWords)){const w=Q.wordWrapSplit(_);for(let b=0;b<w.length;b++){let v=w[b],S=v,k=1;for(;w[b+k];){const M=w[b+k];if(!Q.canBreakChars(S,M,_,b,e.breakWords))v+=M;else break;S=M,k++}b+=k-1;const L=Q._getFromCache(v,c,l,r);L+n>m&&(o+=Q._addLine(a),d=!1,a="",n=0),a+=v,n+=L}}else{a.length>0&&(o+=Q._addLine(a),a="",n=0);const w=p===g.length-1;o+=Q._addLine(_,!w),d=!1,a="",n=0}else y+n>m&&(d=!1,o+=Q._addLine(a),a="",n=0),(a.length>0||!Q.isBreakingSpace(_)||d)&&(a+=_,n+=y)}return o+=Q._addLine(a,!1),o}static _addLine(t,e=!0){return t=Q._trimRight(t),t=e?`${t}
`:t,t}static _getFromCache(t,e,s,r){let n=s[t];return typeof n!="number"&&(n=Q._measureText(t,e,r)+e,s[t]=n),n}static _collapseSpaces(t){return t==="normal"||t==="pre-line"}static _collapseNewlines(t){return t==="normal"}static _trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const s=t[e];if(!Q.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static _isNewline(t){return typeof t!="string"?!1:Q._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:Q._breakingSpaces.includes(t.charCodeAt(0))}static _tokenize(t){const e=[];let s="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const n=t[r],a=t[r+1];if(Q.isBreakingSpace(n,a)||Q._isNewline(n)){s!==""&&(e.push(s),s=""),e.push(n);continue}s+=n}return s!==""&&e.push(s),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,s,r,n){return!0}static wordWrapSplit(t){return Q.graphemeSegmenter(t)}static measureFont(t){if(Q._fonts[t])return Q._fonts[t];const e=Q._context;e.font=t;const s=e.measureText(Q.METRICS_STRING+Q.BASELINE_SYMBOL),r={ascent:s.actualBoundingBoxAscent,descent:s.actualBoundingBoxDescent,fontSize:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent};return Q._fonts[t]=r,r}static clearMetrics(t=""){t?delete Q._fonts[t]:Q._fonts={}}static get _canvas(){if(!Q.__canvas){let t;try{const e=new OffscreenCanvas(0,0),s=e.getContext("2d",qi);if(s!=null&&s.measureText)return Q.__canvas=e,e;t=Ht.get().createCanvas()}catch{t=Ht.get().createCanvas()}t.width=t.height=10,Q.__canvas=t}return Q.__canvas}static get _context(){return Q.__context||(Q.__context=Q._canvas.getContext("2d",qi)),Q.__context}};Ce.METRICS_STRING="|Ã‰qÃ…";Ce.BASELINE_SYMBOL="M";Ce.BASELINE_MULTIPLIER=1.4;Ce.HEIGHT_MULTIPLIER=2;Ce.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const i=new Intl.Segmenter;return t=>[...i.segment(t)].map(e=>e.segment)}return i=>[...i]})();Ce.experimentalLetterSpacing=!1;Ce._fonts={};Ce._newlines=[10,13];Ce._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];Ce._measurementCache={};let ya=Ce;function ba(i,t){if(i.texture===xt.WHITE&&!i.fill)return Ut.shared.setValue(i.color).setAlpha(i.alpha??1).toHexa();if(i.fill){if(i.fill instanceof wi){const e=i.fill,s=t.createPattern(e.texture.source.resource,"repeat"),r=e.transform.copyTo(vt.shared);return r.scale(e.texture.frame.width,e.texture.frame.height),s.setTransform(r),s}else if(i.fill instanceof cs){const e=i.fill;if(e.type==="linear"){const s=t.createLinearGradient(e.x0,e.y0,e.x1,e.y1);return e.gradientStops.forEach(r=>{s.addColorStop(r.offset,Ut.shared.setValue(r.color).toHex())}),s}}}else{const e=t.createPattern(i.texture.source.resource,"repeat"),s=i.matrix.copyTo(vt.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),e.setTransform(s),e}return Ot("FillStyle not recognised",i),"red"}function ml(i){if(i==="")return[];typeof i=="string"&&(i=[i]);const t=[];for(let e=0,s=i.length;e<s;e++){const r=i[e];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(r[0].length===0||r[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const n=r[0].charCodeAt(0),a=r[1].charCodeAt(0);if(a<n)throw new Error("[BitmapFont]: Invalid character range.");for(let o=n,l=a;o<=l;o++)t.push(String.fromCharCode(o))}else t.push(...Array.from(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const pl=class gl extends Zo{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const e={...gl.defaultOptions,...t};this._textureSize=e.textureSize,this._mipmap=e.mipmap;const s=e.style.clone();e.overrideFill&&(s._fill.color=16777215,s._fill.alpha=1,s._fill.texture=xt.WHITE,s._fill.fill=null),this.applyFillAsTint=e.overrideFill;const r=s.fontSize;s.fontSize=this.baseMeasurementFontSize;const n=br(s);e.overrideSize?s._stroke&&(s._stroke.width*=this.baseRenderedFontSize/r):s.fontSize=this.baseRenderedFontSize=r,this._style=s,this._skipKerning=e.skipKerning??!1,this.resolution=e.resolution??1,this._padding=e.padding??4,this.fontMetrics=ya.measureFont(n),this.lineHeight=s.lineHeight||this.fontMetrics.fontSize||s.fontSize}ensureCharacters(t){var g,p;const e=ml(t).filter(_=>!this._currentChars.includes(_)).filter((_,y,w)=>w.indexOf(_)===y);if(!e.length)return;this._currentChars=[...this._currentChars,...e];let s;this._currentPageIndex===-1?s=this._nextPage():s=this.pages[this._currentPageIndex];let{canvas:r,context:n}=s.canvasAndContext,a=s.texture.source;const o=this._style;let l=this._currentX,c=this._currentY;const h=this.baseRenderedFontSize/this.baseMeasurementFontSize,u=this._padding*h,f=o.fontStyle==="italic"?2:1;let d=0,m=!1;for(let _=0;_<e.length;_++){const y=e[_],w=ya.measureText(y,o,r,!1);w.lineHeight=w.height;const b=f*w.width*h,v=w.height*h,S=b+u*2,k=v+u*2;if(m=!1,y!==`
`&&y!=="\r"&&y!=="	"&&y!==" "&&(m=!0,d=Math.ceil(Math.max(k,d))),l+S>this._textureSize&&(c+=d,d=k,l=0,c+d>this._textureSize)){a.update();const M=this._nextPage();r=M.canvasAndContext.canvas,n=M.canvasAndContext.context,a=M.texture.source,c=0}const L=b/h-(((g=o.dropShadow)==null?void 0:g.distance)??0)-(((p=o._stroke)==null?void 0:p.width)??0);if(this.chars[y]={id:y.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:L,kerning:{}},m){this._drawGlyph(n,w,l+u,c+u,h,o);const M=a.width*h,E=a.height*h,tt=new Xt(l/M*a.width,c/E*a.height,S/M*a.width,k/E*a.height);this.chars[y].texture=new xt({source:a,frame:tt}),l+=Math.ceil(S)}}a.update(),this._currentX=l,this._currentY=c,this._skipKerning&&this._applyKerning(e,n)}get pageTextures(){return At(kt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const s=this._measureCache;for(let r=0;r<t.length;r++){const n=t[r];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let l=s[n];l||(l=s[n]=e.measureText(n).width);let c=s[o];c||(c=s[o]=e.measureText(o).width);let h=e.measureText(n+o).width,u=h-(l+c);u&&(this.chars[n].kerning[o]=u),h=e.measureText(n+o).width,u=h-(l+c),u&&(this.chars[o].kerning[n]=u)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=_a.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const s=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new xt({source:new fs({resource:e.canvas,resolution:s,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),n={canvasAndContext:e,texture:r};return this.pages[this._currentPageIndex]=n,n}_setupContext(t,e,s){e.fontSize=this.baseRenderedFontSize,t.scale(s,s),t.font=br(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const r=e._stroke,n=(r==null?void 0:r.width)??0;if(r&&(t.lineWidth=n,t.lineJoin=r.join,t.miterLimit=r.miterLimit,t.strokeStyle=ba(r,t)),e._fill&&(t.fillStyle=ba(e._fill,t)),e.dropShadow){const a=e.dropShadow,o=Ut.shared.setValue(a.color).toArray(),l=a.blur*s,c=a.distance*s;t.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,t.shadowBlur=l,t.shadowOffsetX=Math.cos(a.angle)*c,t.shadowOffsetY=Math.sin(a.angle)*c}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,s,r,n,a){const o=e.text,l=e.fontProperties,c=a._stroke,h=((c==null?void 0:c.width)??0)*n,u=s+h/2,f=r-h/2,d=l.descent*n,m=e.lineHeight*n;a.stroke&&h&&t.strokeText(o,u,f+m-d),a._fill&&t.fillText(o,u,f+m-d)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:s}=this.pages[t];e.canvas.width=e.canvas.width,_a.returnCanvasAndContext(e),s.destroy(!0)}this.pages=null}};pl.defaultOptions={textureSize:512,style:new ds,mipmap:!0};let wa=pl;function y1(i,t,e,s){const r={width:0,height:0,offsetY:0,scale:t.fontSize/e.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=e.baseLineOffset;let n=r.lines[0],a=null,o=!0;const l={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},c=m=>{const g=n.width;for(let p=0;p<l.index;p++){const _=m.positions[p];n.chars.push(m.chars[p]),n.charPositions.push(_+g)}n.width+=m.width,o=!1,l.width=0,l.index=0,l.chars.length=0},h=()=>{let m=n.chars.length-1;if(s){let g=n.chars[m];for(;g===" ";)n.width-=e.chars[g].xAdvance,g=n.chars[--m]}r.width=Math.max(r.width,n.width),n={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,r.lines.push(n),r.height+=e.lineHeight},u=e.baseMeasurementFontSize/t.fontSize,f=t.letterSpacing*u,d=t.wordWrapWidth*u;for(let m=0;m<i.length+1;m++){let g;const p=m===i.length;p||(g=i[m]);const _=e.chars[g]||e.chars[" "];if(/(?:\s)/.test(g)||g==="\r"||g===`
`||p){if(!o&&t.wordWrap&&n.width+l.width-f>d?(h(),c(l),p||n.charPositions.push(0)):(l.start=n.width,c(l),p||n.charPositions.push(0)),g==="\r"||g===`
`)n.width!==0&&h();else if(!p){const v=_.xAdvance+(_.kerning[a]||0)+f;n.width+=v,n.spaceWidth=v,n.spacesIndex.push(n.charPositions.length),n.chars.push(g)}}else{const b=_.kerning[a]||0,v=_.xAdvance+b+f;l.positions[l.index++]=l.width+b,l.chars.push(g),l.width+=v}a=g}return h(),t.align==="center"?b1(r):t.align==="right"?w1(r):t.align==="justify"&&x1(r),r}function b1(i){for(let t=0;t<i.lines.length;t++){const e=i.lines[t],s=i.width/2-e.width/2;for(let r=0;r<e.charPositions.length;r++)e.charPositions[r]+=s}}function w1(i){for(let t=0;t<i.lines.length;t++){const e=i.lines[t],s=i.width-e.width;for(let r=0;r<e.charPositions.length;r++)e.charPositions[r]+=s}}function x1(i){const t=i.width;for(let e=0;e<i.lines.length;e++){const s=i.lines[e];let r=0,n=s.spacesIndex[r++],a=0;const o=s.spacesIndex.length,c=(t-s.width)/o;for(let h=0;h<s.charPositions.length;h++)h===n&&(n=s.spacesIndex[r++],a+=c),s.charPositions[h]+=a}}let Js=0;class v1{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){var a;let s=`${e.fontFamily}-bitmap`,r=!0;if(e._fill.fill&&!e._stroke)s+=e._fill.fill.styleKey,r=!1;else if(e._stroke||e.dropShadow){let o=e.styleKey;o=o.substring(0,o.lastIndexOf("-")),s=`${o}-bitmap`,r=!1}if(!Vt.has(s)){const o=new wa({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});Js++,Js>50&&Ot("BitmapText",`You have dynamically created ${Js} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Js--,Vt.remove(s)}),Vt.set(s,o)}const n=Vt.get(s);return(a=n.ensureCharacters)==null||a.call(n,t),n}getLayout(t,e,s=!0){const r=this.getFont(t,e);return y1([...t],e,r,s)}measureText(t,e,s=!0){return this.getLayout(t,e,s)}install(...t){var c,h,u,f;let e=t[0];typeof e=="string"&&(e={name:e,style:t[1],chars:(c=t[2])==null?void 0:c.chars,resolution:(h=t[2])==null?void 0:h.resolution,padding:(u=t[2])==null?void 0:u.padding,skipKerning:(f=t[2])==null?void 0:f.skipKerning},At(kt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const s=e==null?void 0:e.name;if(!s)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const r=e.style,n=r instanceof ds?r:new ds(r),a=n._fill.fill!==null&&n._fill.fill!==void 0,o=new wa({style:n,overrideFill:a,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),l=ml(e.chars);return o.ensureCharacters(l.join("")),Vt.set(`${s}-bitmap`,o),o.once("destroy",()=>Vt.remove(`${s}-bitmap`)),o}uninstall(t){const e=`${t}-bitmap`,s=Vt.get(e);s&&(Vt.remove(e),s.destroy())}}const wr=new v1;class _l extends Zo{constructor(t,e){super();const{textures:s,data:r}=t;Object.keys(r.pages).forEach(n=>{const a=r.pages[parseInt(n,10)],o=s[a.id];this.pages.push({texture:o})}),Object.keys(r.chars).forEach(n=>{const a=r.chars[n],{frame:o,source:l}=s[a.page],c=new Xt(a.x+o.x,a.y+o.y,a.width,a.height),h=new xt({source:l,frame:c});this.chars[n]={id:n.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:h}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){wr.install(t)}static uninstall(t){wr.uninstall(t)}}const Zi={test(i){return typeof i=="string"&&i.startsWith("info face=")},parse(i){const t=i.match(/^[a-z]+\s+.+$/gm),e={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const u in t){const f=t[u].match(/^[a-z]+/gm)[0],d=t[u].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const g in d){const p=d[g].split("="),_=p[0],y=p[1].replace(/"/gm,""),w=parseFloat(y),b=isNaN(w)?y:w;m[_]=b}e[f].push(m)}const s={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[r]=e.info,[n]=e.common,[a]=e.distanceField??[];a&&(s.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),s.fontSize=parseInt(r.size,10),s.fontFamily=r.face,s.lineHeight=parseInt(n.lineHeight,10);const o=e.page;for(let u=0;u<o.length;u++)s.pages.push({id:parseInt(o[u].id,10)||0,file:o[u].file});const l={};s.baseLineOffset=s.lineHeight-parseInt(n.base,10);const c=e.char;for(let u=0;u<c.length;u++){const f=c[u],d=parseInt(f.id,10);let m=f.letter??f.char??String.fromCharCode(d);m==="space"&&(m=" "),l[d]=m,s.chars[m]={id:d,page:parseInt(f.page,10)||0,x:parseInt(f.x,10),y:parseInt(f.y,10),width:parseInt(f.width,10),height:parseInt(f.height,10),xOffset:parseInt(f.xoffset,10),yOffset:parseInt(f.yoffset,10),xAdvance:parseInt(f.xadvance,10),kerning:{}}}const h=e.kerning||[];for(let u=0;u<h.length;u++){const f=parseInt(h[u].first,10),d=parseInt(h[u].second,10),m=parseInt(h[u].amount,10);s.chars[l[d]].kerning[l[f]]=m}return s}},xa={test(i){const t=i;return typeof t!="string"&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(i){const t={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},e=i.getElementsByTagName("info")[0],s=i.getElementsByTagName("common")[0],r=i.getElementsByTagName("distanceField")[0];r&&(t.distanceField={type:r.getAttribute("fieldType"),range:parseInt(r.getAttribute("distanceRange"),10)});const n=i.getElementsByTagName("page"),a=i.getElementsByTagName("char"),o=i.getElementsByTagName("kerning");t.fontSize=parseInt(e.getAttribute("size"),10),t.fontFamily=e.getAttribute("face"),t.lineHeight=parseInt(s.getAttribute("lineHeight"),10);for(let c=0;c<n.length;c++)t.pages.push({id:parseInt(n[c].getAttribute("id"),10)||0,file:n[c].getAttribute("file")});const l={};t.baseLineOffset=t.lineHeight-parseInt(s.getAttribute("base"),10);for(let c=0;c<a.length;c++){const h=a[c],u=parseInt(h.getAttribute("id"),10);let f=h.getAttribute("letter")??h.getAttribute("char")??String.fromCharCode(u);f==="space"&&(f=" "),l[u]=f,t.chars[f]={id:u,page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xOffset:parseInt(h.getAttribute("xoffset"),10),yOffset:parseInt(h.getAttribute("yoffset"),10),xAdvance:parseInt(h.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<o.length;c++){const h=parseInt(o[c].getAttribute("first"),10),u=parseInt(o[c].getAttribute("second"),10),f=parseInt(o[c].getAttribute("amount"),10);t.chars[l[u]].kerning[l[h]]=f}return t}},va={test(i){return typeof i=="string"&&i.includes("<font>")?xa.test(Ht.get().parseXML(i)):!1},parse(i){return xa.parse(Ht.get().parseXML(i))}},C1=[".xml",".fnt"],A1={extension:{type:J.CacheParser,name:"cacheBitmapFont"},test:i=>i instanceof _l,getCacheableAssets(i,t){const e={};return i.forEach(s=>{e[s]=t,e[`${s}-bitmap`]=t}),e[`${t.fontFamily}-bitmap`]=t,e}},k1={extension:{type:J.LoadParser,priority:ze.Normal},name:"loadBitmapFont",test(i){return C1.includes(ue.extname(i).toLowerCase())},async testParse(i){return Zi.test(i)||va.test(i)},async parse(i,t,e){const s=Zi.test(i)?Zi.parse(i):va.parse(i),{src:r}=t,{pages:n}=s,a=[],o=s.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let u=0;u<n.length;++u){const f=n[u].file;let d=ue.join(ue.dirname(r),f);d=ar(d,r),a.push({src:d,data:o})}const l=await e.load(a),c=a.map(u=>l[u.src]);return new _l({data:s,textures:c},r)},async load(i,t){return await(await Ht.get().fetch(i)).text()},async unload(i,t,e){await Promise.all(i.pages.map(s=>e.unload(s.texture.source._sourceOrigin))),i.destroy()}};class S1{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}const L1={extension:{type:J.CacheParser,name:"cacheTextureArray"},test:i=>Array.isArray(i)&&i.every(t=>t instanceof xt),getCacheableAssets:(i,t)=>{const e={};return i.forEach(s=>{t.forEach((r,n)=>{e[s+(n===0?"":n+1)]=r})}),e}};async function yl(i){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=i});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(i)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const M1={extension:{type:J.DetectionParser,priority:1},test:async()=>yl("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async i=>[...i,"avif"],remove:async i=>i.filter(t=>t!=="avif")},Ca=["png","jpg","jpeg"],P1={extension:{type:J.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async i=>[...i,...Ca],remove:async i=>i.filter(t=>!Ca.includes(t))},T1="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Hr(i){return T1?!1:document.createElement("video").canPlayType(i)!==""}const E1={extension:{type:J.DetectionParser,priority:0},test:async()=>Hr("video/mp4"),add:async i=>[...i,"mp4","m4v"],remove:async i=>i.filter(t=>t!=="mp4"&&t!=="m4v")},I1={extension:{type:J.DetectionParser,priority:0},test:async()=>Hr("video/ogg"),add:async i=>[...i,"ogv"],remove:async i=>i.filter(t=>t!=="ogv")},B1={extension:{type:J.DetectionParser,priority:0},test:async()=>Hr("video/webm"),add:async i=>[...i,"webm"],remove:async i=>i.filter(t=>t!=="webm")},F1={extension:{type:J.DetectionParser,priority:0},test:async()=>yl("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async i=>[...i,"webp"],remove:async i=>i.filter(t=>t!=="webp")};class R1{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{var a,o;let r=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||Ot(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((a=c.test)!=null&&a.call(c,t,e,this))){n=c;break}}if(!n)return Ot(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await n.load(t,e,this),s.parser=n;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((o=c.testParse)==null?void 0:o.call(c,r,e,this))&&(r=await c.parse(r,e,this)||r,s.parser=c)}return r})(),s}async load(t,e){this._parsersValidated||this._validateParsers();let s=0;const r={},n=di(t),a=be(t,c=>({alias:[c],src:c,data:{}})),o=a.length,l=a.map(async c=>{const h=ue.toAbsolute(c.src);if(!r[c.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,c)),r[c.src]=await this.promiseCache[h].promise,e&&e(++s/o)}catch(u){throw delete this.promiseCache[h],delete r[c.src],new Error(`[Loader.load] Failed to load ${h}.
${u}`)}});return await Promise.all(l),n?r[a[0].src]:r}async unload(t){const s=be(t,r=>({alias:[r],src:r})).map(async r=>{var o,l;const n=ue.toAbsolute(r.src),a=this.promiseCache[n];if(a){const c=await a.promise;delete this.promiseCache[n],await((l=(o=a.parser)==null?void 0:o.unload)==null?void 0:l.call(o,c,r,this))}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&Ot(`[Assets] loadParser name conflict "${e.name}"`):Ot("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function ps(i,t){if(Array.isArray(t)){for(const e of t)if(i.startsWith(`data:${e}`))return!0;return!1}return i.startsWith(`data:${t}`)}function gs(i,t){const e=i.split("?")[0],s=ue.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const D1=".json",V1="application/json",G1={extension:{type:J.LoadParser,priority:ze.Low},name:"loadJson",test(i){return ps(i,V1)||gs(i,D1)},async load(i){return await(await Ht.get().fetch(i)).json()}},H1=".txt",W1="text/plain",z1={name:"loadTxt",extension:{type:J.LoadParser,priority:ze.Low,name:"loadTxt"},test(i){return ps(i,W1)||gs(i,H1)},async load(i){return await(await Ht.get().fetch(i)).text()}},U1=["normal","bold","100","200","300","400","500","600","700","800","900"],O1=[".ttf",".otf",".woff",".woff2"],N1=["font/ttf","font/otf","font/woff","font/woff2"],j1=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function X1(i){const t=ue.extname(i),r=ue.basename(i,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let n=r.length>0;for(const o of r)if(!o.match(j1)){n=!1;break}let a=r.join(" ");return n||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const Y1=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function q1(i){return Y1.test(i)?i:encodeURI(i)}const Z1={extension:{type:J.LoadParser,priority:ze.Low},name:"loadWebFont",test(i){return ps(i,N1)||gs(i,O1)},async load(i,t){var s,r,n;const e=Ht.get().getFontFaceSet();if(e){const a=[],o=((s=t.data)==null?void 0:s.family)??X1(i),l=((n=(r=t.data)==null?void 0:r.weights)==null?void 0:n.filter(h=>U1.includes(h)))??["normal"],c=t.data??{};for(let h=0;h<l.length;h++){const u=l[h],f=new FontFace(o,`url(${q1(i)})`,{...c,weight:u});await f.load(),e.add(f),a.push(f)}return Vt.set(`${o}-and-url`,{url:i,fontFaces:a}),a.length===1?a[0]:a}return Ot("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(i){(Array.isArray(i)?i:[i]).forEach(t=>{Vt.remove(t.family),Ht.get().getFontFaceSet().delete(t)})}};function Wr(i,t=1){var s;const e=(s=ms.RETINA_PREFIX)==null?void 0:s.exec(i);return e?parseFloat(e[1]):t}function zr(i,t,e){i.label=e,i._sourceOrigin=e;const s=new xt({source:i,label:e}),r=()=>{delete t.promiseCache[e],Vt.has(e)&&Vt.remove(e)};return s.source.once("destroy",()=>{t.promiseCache[e]&&(Ot("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),r())}),s.once("destroy",()=>{i.destroyed||(Ot("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),s}const K1=".svg",$1="image/svg+xml",Q1={extension:{type:J.LoadParser,priority:ze.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(i){return ps(i,$1)||gs(i,K1)},async load(i,t,e){return t.data.parseAsGraphicsContext??this.config.parseAsGraphicsContext?t0(i):J1(i,t,e,this.config.crossOrigin)},unload(i){i.destroy(!0)}};async function J1(i,t,e,s){var p,_,y;const n=await(await Ht.get().fetch(i)).blob(),a=URL.createObjectURL(n),o=new Image;o.src=a,o.crossOrigin=s,await o.decode(),URL.revokeObjectURL(a);const l=document.createElement("canvas"),c=l.getContext("2d"),h=((p=t.data)==null?void 0:p.resolution)||Wr(i),u=((_=t.data)==null?void 0:_.width)??o.width,f=((y=t.data)==null?void 0:y.height)??o.height;l.width=u*h,l.height=f*h,c.drawImage(o,0,0,u*h,f*h);const{parseAsGraphicsContext:d,...m}=t.data,g=new fs({resource:l,alphaMode:"premultiply-alpha-on-upload",resolution:h,...m});return zr(g,e,i)}async function t0(i){const e=await(await Ht.get().fetch(i)).text(),s=new me;return s.svg(e),s}const e0=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let ss=null,xr=class{constructor(){ss||(ss=URL.createObjectURL(new Blob([e0],{type:"application/javascript"}))),this.worker=new Worker(ss)}};xr.revokeObjectURL=function(){ss&&(URL.revokeObjectURL(ss),ss=null)};const s0=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let is=null;class bl{constructor(){is||(is=URL.createObjectURL(new Blob([s0],{type:"application/javascript"}))),this.worker=new Worker(is)}}bl.revokeObjectURL=function(){is&&(URL.revokeObjectURL(is),is=null)};let Aa=0,Ki;class i0{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new xr;e.addEventListener("message",s=>{e.terminate(),xr.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t,e){var s;return this._run("loadImageBitmap",[t,(s=e==null?void 0:e.data)==null?void 0:s.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){Ki===void 0&&(Ki=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<Ki&&(this._createdWorkers++,t=new bl().worker,t.addEventListener("message",e=>{this._complete(e.data),this._returnWorker(e.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){t.error!==void 0?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const s=new Promise((r,n)=>{this._queue.push({id:t,arguments:e,resolve:r,reject:n})});return this._next(),s}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),s=e.id;this._resolveHash[Aa]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Aa++,id:s})}}const ka=new i0,r0=[".jpeg",".jpg",".png",".webp",".avif"],n0=["image/jpeg","image/png","image/webp","image/avif"];async function a0(i,t){var r;const e=await Ht.get().fetch(i);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${i}: ${e.status} ${e.statusText}`);const s=await e.blob();return((r=t==null?void 0:t.data)==null?void 0:r.alphaMode)==="premultiplied-alpha"?createImageBitmap(s,{premultiplyAlpha:"none"}):createImageBitmap(s)}const wl={name:"loadTextures",extension:{type:J.LoadParser,priority:ze.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(i){return ps(i,n0)||gs(i,r0)},async load(i,t,e){var n;let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await ka.isImageBitmapSupported()?s=await ka.loadImageBitmap(i,t):s=await a0(i,t):s=await new Promise(a=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=i,s.complete?a(s):s.onload=()=>{a(s)}});const r=new fs({resource:s,alphaMode:"premultiply-alpha-on-upload",resolution:((n=t.data)==null?void 0:n.resolution)||Wr(i),...t.data});return zr(r,e,i)},unload(i){i.destroy(!0)}},xl=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],o0=xl.map(i=>`video/${i.substring(1)}`);function l0(i,t,e){e===void 0&&!t.startsWith("data:")?i.crossOrigin=c0(t):e!==!1&&(i.crossOrigin=typeof e=="string"?e:"anonymous")}function h0(i){return new Promise((t,e)=>{i.addEventListener("canplaythrough",s),i.addEventListener("error",r),i.load();function s(){n(),t()}function r(a){n(),e(a)}function n(){i.removeEventListener("canplaythrough",s),i.removeEventListener("error",r)}})}function c0(i,t=globalThis.location){if(i.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(i,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}const u0={name:"loadVideo",extension:{type:J.LoadParser,name:"loadVideo"},test(i){const t=ps(i,o0),e=gs(i,xl);return t||e},async load(i,t,e){var l,c;const s={...ei.defaultOptions,resolution:((l=t.data)==null?void 0:l.resolution)||Wr(i),alphaMode:((c=t.data)==null?void 0:c.alphaMode)||await ko(),...t.data},r=document.createElement("video"),n={preload:s.autoLoad!==!1?"auto":void 0,"webkit-playsinline":s.playsinline!==!1?"":void 0,playsinline:s.playsinline!==!1?"":void 0,muted:s.muted===!0?"":void 0,loop:s.loop===!0?"":void 0,autoplay:s.autoPlay!==!1?"":void 0};Object.keys(n).forEach(h=>{const u=n[h];u!==void 0&&r.setAttribute(h,u)}),s.muted===!0&&(r.muted=!0),l0(r,i,s.crossorigin);const a=document.createElement("source");let o;if(i.startsWith("data:"))o=i.slice(5,i.indexOf(";"));else if(!i.startsWith("blob:")){const h=i.split("?")[0].slice(i.lastIndexOf(".")+1).toLowerCase();o=ei.MIME_TYPES[h]||`video/${h}`}return a.src=i,o&&(a.type=o),new Promise(h=>{const u=async()=>{const f=new ei({...s,resource:r});r.removeEventListener("canplay",u),t.data.preload&&await h0(r),h(zr(f,e,i))};r.addEventListener("canplay",u),r.appendChild(a)})},unload(i){i.destroy(!0)}},vl={extension:{type:J.ResolveParser,name:"resolveTexture"},test:wl.test,parse:i=>{var t;return{resolution:parseFloat(((t=ms.RETINA_PREFIX.exec(i))==null?void 0:t[1])??"1"),format:i.split(".").pop(),src:i}}},d0={extension:{type:J.ResolveParser,priority:-2,name:"resolveJson"},test:i=>ms.RETINA_PREFIX.test(i)&&i.endsWith(".json"),parse:vl.parse};class f0{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ms,this.loader=new R1,this.cache=Vt,this._backgroundLoader=new S1(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,a;if(this._initialized){Ot("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let o=t.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const e=((n=t.texturePreference)==null?void 0:n.resolution)??1,s=typeof e=="number"?[e]:e,r=await this._detectFormats({preferredFormats:(a=t.texturePreference)==null?void 0:a.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const s=di(t),r=be(t).map(o=>{if(typeof o!="string"){const l=this.resolver.getAlias(o);return l.some(c=>!this.resolver.hasKey(c))&&this.add(o),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),n=this.resolver.resolve(r),a=await this._mapLoadToResolve(n,e);return s?a[r[0]]:a}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const r=this.resolver.resolveBundle(t),n={},a=Object.keys(r);let o=0,l=0;const c=()=>{e==null||e(++o/l)},h=a.map(u=>{const f=r[u];return l+=Object.keys(f).length,this._mapLoadToResolve(f,c).then(d=>{n[u]=d})});return await Promise.all(h),s?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Vt.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=Vt.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const r=await this.loader.load(s,e);this._backgroundLoader.active=!0;const n={};return s.forEach(a=>{const o=r[a.src],l=[a.src];a.alias&&l.push(...a.alias),l.forEach(c=>{n[c]=o}),Vt.set(l,o)}),n}async unload(t){this._initialized||await this.init();const e=be(t).map(r=>typeof r!="string"?r.src:r),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=be(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(r=>this._unloadFromResolved(e[r]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{Vt.remove(s.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?e=await s.add(e):t.skipDetections||(e=await s.remove(e));return e=e.filter((s,r)=>e.indexOf(s)===r),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const ye=new f0;re.handleByList(J.LoadParser,ye.loader.parsers).handleByList(J.ResolveParser,ye.resolver.parsers).handleByList(J.CacheParser,ye.cache.parsers).handleByList(J.DetectionParser,ye.detections);re.add(L1,P1,M1,F1,E1,I1,B1,G1,z1,Z1,Q1,wl,u0,k1,A1,vl,d0);const Sa={loader:J.LoadParser,resolver:J.ResolveParser,cache:J.CacheParser,detection:J.DetectionParser};re.handle(J.Asset,i=>{const t=i.ref;Object.entries(Sa).filter(([e])=>!!t[e]).forEach(([e,s])=>re.add(Object.assign(t[e],{extension:t[e].extension??s})))},i=>{const t=i.ref;Object.keys(Sa).filter(e=>!!t[e]).forEach(e=>re.remove(t[e]))});class qe extends Pr{constructor(t){t instanceof me&&(t={context:t});const{context:e,roundPixels:s,...r}=t||{};super({label:"Graphics",...r}),this.renderPipeId="graphics",e?this._context=e:this._context=this._ownedContext=new me,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=s??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}onViewUpdate(){if(this._didViewChangeTick++,this._didGraphicsUpdate=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(t===!0||(t==null?void 0:t.context)===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new qe(this._context.clone()):(this._ownedContext=null,new qe(this._context))}lineStyle(t,e,s){At(kt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const r={};return t&&(r.width=t),e&&(r.color=e),s&&(r.alpha=s),this.context.strokeStyle=r,this}beginFill(t,e){At(kt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const s={};return t&&(s.color=t),e&&(s.alpha=e),this.context.fillStyle=s,this}endFill(){At(kt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const t=this.context.strokeStyle;return(t.width!==me.defaultStrokeStyle.width||t.color!==me.defaultStrokeStyle.color||t.alpha!==me.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return At(kt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return At(kt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return At(kt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return At(kt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return At(kt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return At(kt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}class m0 extends Pr{constructor(t,e){const{text:s,resolution:r,style:n,anchor:a,width:o,height:l,roundPixels:c,...h}=t;super({...h}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=e,this.text=s??"",this.style=n,this.resolution=r??null,this.allowChildren=!1,this._anchor=new oe({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=c??!1,o!==void 0&&(this.width=o),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}set text(t){t=t.toString(),this._text!==t&&(this._text=t,this.onViewUpdate())}get text(){return this._text}set resolution(t){this._autoResolution=t===null,this._resolution=t,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(t){var e;t=t||{},(e=this._style)==null||e.off("update",this.onViewUpdate,this),t instanceof this._styleClass?this._style=t:this._style=new this._styleClass(t),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get bounds(){return this._boundsDirty&&(this._updateBounds(),this._boundsDirty=!1),this._bounds}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(t){this._setWidth(t,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(t){this._setHeight(t,this.bounds.height)}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this.bounds.width,t.height=Math.abs(this.scale.y)*this.bounds.height,t}setSize(t,e){typeof t=="object"?(e=t.height??t.width,t=t.width):e??(e=t),t!==void 0&&this._setWidth(t,this.bounds.width),e!==void 0&&this._setHeight(e,this.bounds.height)}addBounds(t){const e=this.bounds;t.addFrame(e.minX,e.minY,e.maxX,e.maxY)}containsPoint(t){const e=this.bounds.width,s=this.bounds.height,r=-e*this.anchor.x;let n=0;return t.x>=r&&t.x<=r+e&&(n=-s*this.anchor.y,t.y>=n&&t.y<=n+s)}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0,this._didTextUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(t=!1){super.destroy(t),this.owner=null,this._bounds=null,this._anchor=null,(typeof t=="boolean"?t:t!=null&&t.style)&&this._style.destroy(t),this._style=null,this._text=null}}function p0(i,t){let e=i[0]??{};return(typeof e=="string"||i[1])&&(At(kt,`use new ${t}({ text: "hi!", style }) instead`),e={text:e,style:i[1]}),e}class g0 extends m0{constructor(...t){var e;const s=p0(t,"BitmapText");s.style??(s.style=s.style||{}),(e=s.style).fill??(e.fill=16777215),super(s,ds),this.renderPipeId="bitmapText"}_updateBounds(){const t=this._bounds,e=this._anchor,s=wr.measureText(this.text,this._style),r=s.scale,n=s.offsetY*r;let a=s.width*r,o=s.height*r;const l=this._style._stroke;l&&(a+=l.width,o+=l.width),t.minX=-e._x*a,t.maxX=t.minX+a,t.minY=-e._y*(o+n),t.maxY=t.minY+o}}re.add(zc,Uc);const _0=()=>{const i=new qo,t=document.querySelector(".sw-whale__canvas"),e=document.querySelector(".game-overlay"),s=document.querySelector(".game-overlay__button");let r,n,a,o,l,c,h,u,f,d=0,m=.15;const p=1e3/65,_=[],y=[280,160,190,190,220,200],w=[-100,50,200,200,350,window.innerWidth+50];let b=[],v=0,S=-1;const k=85,L=98;let M=!1,E=0,tt=0;const it=[];let O=!1,W=!1,rt=!1;const Z=["M104.32 32.0301C104.32 32.0301 107.904 16.67 98.944 15.262C90.112 13.854 86.144 21.79 86.144 21.79C86.144 21.79 88.576 3.48605 74.368 0.286051C60.16 -2.91395 51.968 21.79 51.968 21.79C51.968 21.79 47.744 9.50205 39.552 13.47C34.816 15.774 32.64 20.51 31.488 24.094C29.056 22.814 26.624 22.046 24.576 22.814C20.352 24.35 19.328 29.342 18.944 31.774L0 36.766H122.368C122.496 36.766 115.712 33.9501 104.32 32.0301Z","M40.0001 65.9234H206.272C206.272 65.9234 194.112 60.9314 173.632 57.6034C173.632 57.6034 180.032 29.9554 164.032 27.3954C148.032 24.8354 140.992 39.1714 140.992 39.1714C140.992 39.1714 145.472 6.27544 119.872 0.515437C94.4001 -5.24456 79.6801 39.1714 79.6801 39.1714C79.6801 39.1714 72.0001 17.1554 57.2801 24.1954C48.7041 28.2914 44.7361 36.7394 42.9441 43.2674C42.0481 42.7554 30.5001 43.5 29.5001 58.5L0.5 65.9234H40.0001Z","M93.1519 21.5439C91.2319 20.7759 88.9279 21.5439 86.6239 22.8239C85.5999 19.4959 83.5519 15.0159 79.0719 12.8399C71.3919 9.12793 67.2959 20.7759 67.2959 20.7759C67.2959 20.7759 59.6159 -2.52006 46.0479 0.423937C32.6079 3.49594 34.9119 20.7759 34.9119 20.7759C34.9119 20.7759 31.1999 13.2239 22.7519 14.6319C14.3039 16.0399 17.7599 30.5039 17.7599 30.5039C7.0079 32.2959 0.60791 34.8559 0.60791 34.8559H116.32L98.3999 30.1199C98.1439 27.6879 97.1199 22.9519 93.1519 21.5439Z"],$=[],ut=[],H=[{image:"/assets/dino/shark.svg",outline:"M6.99029 13.012L1.94175 12.237L1 15V18.8242L2.5 29L17.8641 47.4979V48.6604H20.5825L29.9029 52.5352L33.3981 58.7349L41.165 67.2595L44.2718 68.0345L42.3301 62.2222V54.4726H47.3786L59.0291 57.5725L69.1262 58.7349L73.0097 57.5725L64.8544 50.9853L76.1165 46.3355L86.2136 48.6604L81.9417 42.4606L88.1553 37.8108H96.3107L93.2039 33.1611L96.3107 29.6737L105.631 37.0359L120 42.4606L108.35 22.699L113.786 1L103.689 11.462L94.7573 24.6364H85.8252L86.2136 19.5992L79.2233 24.249L60.9709 22.699L61.7476 18.8242L63.6893 12.237L62.5243 10.2996L53.9806 14.1744L46.6019 21.5366L29.1262 18.8242L15.9223 16.1118L6.99029 13.012Z",offsetY:25,height:67,width:120,onWawe:!0},{image:"/assets/dino/ship.svg",outline:"M53.5 0.500008V16.5M53.5 16.5H60L58.5 24L86.5 29.5L88.5 73.5L98 81L108 79.5L106 87L99 89L93 102L61.5 105L41 104L28 100L17.5 86L-0.5 79.5L0.5 78L3 79.5L37 40.5L36 34H33V32L49 25.5L46.5 16.5H53.5Z",offsetY:5,height:106,width:109,onWawe:!0},{image:"/assets/dino/plane.png",outline:"M7.5 48.5L0.5 55.5L15.5 64.5L36 67H74.5L76 72H90L103 69V67H118H137L192 61.5L205.5 58.5L230.5 48.5L232.5 45L239 43H228L250 -0.5L240.5 1L232.5 5.5L205.5 29L181 41H172.5L174 38.5H169.5L166.5 41H159H111H56.5L20 42.5L7.5 48.5Z",height:75,width:253,onWawe:!1}],K=async()=>{for(let F=0;F!=H.length;F++){const X=H[F];H[F].sprite=Ie.from(await ye.load(X.image)),H[F].sprite.height=X.height,H[F].sprite.width=X.width,H[F].sprite.anchor.set(.5),H[F].outline=new qe().svg(`<svg><path d="${X.outline}" fill="red" /></svg>`),H[F].outline.pivot.x=H[F].outline.width/2,H[F].outline.pivot.y=H[F].outline.height/2}},gt=()=>{for(let F=0;F!=Z.length;F++)Z[F]=new qe().svg(`<svg><path d="${Z[F]}" fill="white" /></svg>`),Z[F].x=i.screen.width/2*F-Z[F].width/2,Z[F].y=50+100*F},ft=async()=>{l={default:await ye.load("/assets/dino/whale.svg"),up:await ye.load("/assets/dino/whale-up.svg"),dead:await ye.load("/assets/dino/whale-dead.svg")},c=await Ie.from(l.default),c.height=L,c.width=k,c.x=30,f=new qe().svg('<svg><path d="M29.7124 0.376106L29.3363 1.50442L30.0885 3.38496L30.8407 4.88938L31.5929 6.3938L32.3451 7.89823L33.0973 9.77876V12.0354V13.5398L32.3451 16.1726L31.969 17.3009L31.5929 18.0531L30.4646 20.3097L28.9602 22.1903L27.4558 23.3186L25.9513 24.0708L25.1991 25.1991L25.5752 26.3274L27.0796 27.0796L29.3363 28.5841L30.8407 29.3363L32.7212 30.4646L31.969 31.2168L31.2168 31.5929L30.4646 31.969L29.7124 32.7212L28.9602 31.969L28.5841 31.2168L27.8319 30.4646L26.7035 30.0885L25.1991 29.7124L24.4469 30.0885L23.3186 30.4646L22.5664 31.5929L22.1903 32.7212L21.8142 34.2257H21.4381L19.9336 33.4734L19.1814 33.8496L18.8053 33.4734L18.0531 32.7212L17.3009 31.2168L16.5487 29.7124L16.1726 28.208L15.7965 27.0796V25.1991L16.1726 24.0708V23.3186V22.5664L16.5487 21.0619L17.3009 19.1814L18.0531 17.677L18.4292 16.5487L18.8053 15.4204L19.5575 13.5398L20.3097 12.0354L20.6858 10.531L21.0619 8.65044V6.0177V4.13717L20.6858 3.38496L19.9336 2.63274L19.1814 2.25664L18.4292 2.63274L17.677 3.38496L16.5487 4.51327L15.7965 5.64159L14.6681 7.14602L12.7876 9.77876L10.9071 12.4115L8.65044 15.0442L7.89823 15.7965L6.0177 16.1726L4.88938 15.0442L3.76106 13.9159L2.63274 12.4115L1.88053 11.6593H0.752212L0 12.4115V13.1637V14.6681V16.1726V17.677L0.376106 18.8053L1.12832 20.6858L2.25664 22.5664L3.76106 24.4469L6.0177 26.3274L7.52212 28.5841L7.89823 30.0885V31.5929L7.52212 33.8496L7.14602 36.8584L6.76991 39.8673L7.14602 43.6283L7.52212 45.885L8.27434 50.0221L9.02655 52.6549L9.40266 54.1593L9.02655 54.9115V55.6637L9.40266 56.0398L9.77876 56.4159L10.1549 57.1681L10.531 58.2965L9.77876 58.6726L7.89823 59.8009L6.39381 60.5531L5.26549 61.3053L4.51327 62.4336L4.13717 63.1858L4.51327 63.938L5.26549 64.6903L6.39381 65.0664L8.27434 65.4425H9.40266H11.2832L13.5398 65.0664L13.9159 65.4425L14.6681 66.5708L15.7965 68.0752L17.3009 69.9557L19.5575 72.2124L21.8142 74.469L24.823 76.7257L23.3186 77.1018L21.0619 77.854L18.8053 78.9823L16.5487 80.4867L15.0442 81.9911L13.9159 83.4956L12.7876 85L12.4115 86.1283L13.1637 86.8805L14.6681 86.5044L16.9248 85.3761L19.5575 84.6239L21.0619 84.2478L22.5664 83.8717H24.0708H25.5752L27.0796 84.2478L29.3363 85L31.5929 86.8805L33.8496 88.7611L36.8584 91.0177L39.115 92.5221L42.1239 94.4026L46.6372 96.2832L48.1416 97.0354H50.3982H54.5354H56.792L57.9204 96.6593L59.0487 96.2832L60.177 95.9071L61.6814 95.1549L63.1858 94.0265L64.6903 92.8982L65.8186 91.7699L66.9469 90.6416L67.6991 91.0177L68.8274 92.146L69.9558 93.2743L71.4602 93.6504L72.5885 93.2743L73.3407 92.5221V91.0177L72.5885 88.7611L71.8363 86.5044L71.0841 84.2478L70.3319 82.3673L70.708 81.2389V79.3584V77.1018H72.2124L73.7168 76.3496L74.8451 75.2212L75.2212 74.469L76.7257 73.7168L77.854 72.9646L78.9823 72.2124L80.4867 70.708L81.615 69.5796L82.7434 68.0752L83.8717 66.1947L83.4956 65.0664L82.7434 63.938L81.615 63.5619H79.3584L81.615 60.177L81.9912 59.4248L82.7434 58.2965L83.4956 56.792L84.2478 54.9115L85 53.031V51.1504V49.646V47.7655V45.5088L84.6239 43.6283L84.2478 42.1239L83.4956 40.6195L82.7434 39.4911L80.4867 36.1062L79.7345 35.354L78.2301 33.8496L75.9735 31.969L74.469 31.2168L71.4602 29.7124L69.2035 28.9602L66.1947 28.208L63.9381 27.8319H62.4336H61.6814H60.177H58.6726L55.6637 28.208L53.7832 28.5841L51.9027 28.9602L50.3982 29.3363L47.0133 30.4646L44.7566 31.5929V30.4646V28.9602V27.0796V25.9513V24.0708L44.3805 21.0619L44.0044 17.677L43.6283 16.5487L43.2522 15.0442L42.5 12.0354L42.1239 10.531L41.3717 9.02655L40.6195 7.52212L39.4912 6.0177L38.3628 4.51327L37.6106 3.76106L36.4823 2.63274L34.6018 1.50442L33.0973 0.752212L31.5929 0H30.8407L29.7124 0.376106Z" stroke="white" /></svg>'),f.x=30},St=()=>{const F=[1,.5,.3],X=[[88,227,255],[5,151,203]];o=F.map(nt=>{const te=new cs(i.screen.width/2,i.screen.height-290,i.screen.width/2,i.screen.height);return te.addColorStop(0,`rgba(${[...X[0],nt].join()})`),te.addColorStop(.7,`rgba(${[...X[1],nt].join()})`),te})},z=async()=>{r=Ie.from(await ye.load("/assets/dino/sun.svg")),r.anchor.set(.5),n=Ie.from(await ye.load("/assets/dino/mounts.svg")),n.anchor.set(.5),await ye.load("/assets/dino/fonts/numbers/numbers.xml"),a=new g0({text:d,style:{fontFamily:"numbers",letterSpacing:6,fontSize:72,align:"center"}}),a.anchor.set(.5,.5),gt(),St(),await ft(),await K()},q=()=>{r.x=i.screen.width/2,r.y=150,i.stage.addChild(r)},_t=()=>{n.x=i.screen.width/2,n.y=i.screen.height-y[3]-100,i.stage.addChild(n)},wt=()=>{a.x=i.screen.width/2+3,a.y=160,i.stage.addChild(a)},qt=()=>{Z.forEach(F=>{i.stage.addChild(F)})},Lt=()=>{_[1].x=50,_[1].y=-30,i.stage.addChild(_[1]),_[2].x=70,_[2].y=-40,i.stage.addChild(_[2])},Et=()=>{i.stage.addChild(_[0])},D=()=>{i.stage.addChild(c)},$t=F=>{u.addChild(F.sprite)},et=F=>{u.removeChild(F.sprite)},zt=()=>{i.stage.addChild(u)},It=()=>{_t(),qt(),q(),wt(),Lt(),zt(),D(),Et()},ne=()=>{const F=H[Math.floor(Math.random()*H.length)],X=i.screen.width+F.width/2,nt={pointed:!1,...F};nt.sprite.x=X,$.push(nt),$t(nt)},he=(F,X)=>{const nt=(X-1)*3;return{x:Math.pow(1-F,2)*w[0+nt]+2*(1-F)*F*w[1+nt]+Math.pow(F,2)*w[2+nt],y:Math.pow(1-F,2)*b[0+nt]+2*(1-F)*F*b[1+nt]+Math.pow(F,2)*b[2+nt]}},ae=F=>F>w[3]?2:1,Pe=F=>{const nt=((F>w[3]?2:1)-1)*3;return(F-w[nt])/(w[nt+2]-w[nt])},Ge=F=>{F>w[2]&&F<w[2]+10?F=w[2]:F<135&&(F=135);const X=F>w[3]?2:1,nt=(X-1)*3,te=Pe(F);let Or=w[0],Nr=y[2];X==2&&(Or=w[2],Nr=b[3]);const kl=Math.pow(1-te,2)*(w[0+nt]-Or)+2*te*(1-te)*(w[1+nt]-w[0+nt])+te*te*(w[2+nt]-w[1+nt]),Sl=Math.pow(1-te,2)*(b[0+nt]-Nr)+2*te*(1-te)*(b[1+nt]-b[0+nt])+te*te*(b[2+nt]-b[1+nt]);return-Math.atan2(kl,Sl)+.5*Math.PI},R=()=>{for(let F=0;F!=3;F++){if(_[F]||(_[F]=new ie),F in ut||(ut[F]=[]),!(v in ut[F])){const X=F==1?-v*2:0,nt=new qe;nt.moveTo(w[0],b[0]),nt.bezierCurveTo(w[0],b[0]-X,w[1],b[1]+X,w[2],b[2]+X),nt.bezierCurveTo(w[3],b[3]+X,w[4],b[4]+X,w[5],b[5]-X),nt.lineTo(w[5],i.screen.height+5),nt.lineTo(w[0],i.screen.height+5),nt.fill(o[F]),ut[F][v]=nt}_[F].removeChildren(),_[F].addChild(ut[F][v])}},jt=()=>{(v<=-30||v>0)&&(S=-S),v+=S*.25,b=[i.screen.height-y[0]-v,i.screen.height-y[1]+v,i.screen.height-y[2]+v,i.screen.height-y[3]+v,i.screen.height-y[4]+v,i.screen.height-y[5]-v],R()},Te=(F=1)=>{for(let X=0;X<Z.length;X++)Z[X].x-=m*F,Z[X].x<-Z[X].width&&(Z[X].x=i.screen.width)},Hs=()=>{if(!W)return _s();if(M)return!0;window.Telegram.WebApp.HapticFeedback.impactOccurred("medium"),M=!0,E=0,h=-3},vi=()=>{let F;O?F=l.dead:M&&h<0?F=l.up:F=l.default,c.texture!=F&&(c.texture=F)},Ws=(F=1)=>{vi();let X=b[2]-90;M&&(E==0&&(E=X,tt=X),E+=h*F,h<0&&E<=tt-150&&(h=-h),E>=X&&(M=!1),X=E),c.y=X,f.y=X},Ci=F=>{m+=.005/60*F},Ur=()=>{if(it.length==0)for(let F=30;F<30+k;F+=3)for(let{y:X}=c;X<c.y+L;X+=3){const nt={x:F-30,y:X-c.y};f.containsPoint(nt)&&it.push(nt)}return it.map(F=>({x:F.x+30,y:F.y+c.y}))},U=F=>{for(const X of Ur())if(F.outline.containsPoint({x:X.x-F.outline.position.x+F.outline.width/2,y:X.y-F.outline.position.y+F.outline.height/2}))return!0;return!1},Y=()=>{if(O)return!0;O=!0,e.hidden=!1;const F=new CustomEvent("dino.gameEnded",{detail:d});window.dispatchEvent(F)},st=(F=1)=>{for(let X=0;X<$.length;X++){const nt=$[X],te=Math.max(m*3,4);if($[X].sprite.x-=te*F,nt.onWawe?($[X].sprite.rotation=Ge($[X].sprite.x),$[X].sprite.y=he(Pe($[X].sprite.x),ae($[X].sprite.x)).y-nt.height/2+nt.offsetY):$[X].sprite.y=i.screen.height-400,$[X].sprite.x-nt.width/2<30+k&&$[X].sprite.x+nt.width/2>30&&U($[X]))return Y();if(!$[X].pointed&&$[X].sprite.x<30&&(d++,$[X].pointed=!0),$[X].sprite.x<-$[X].width){X-=1,$.splice(X,1),et(nt),ne();continue}$[X].outline.x=$[X].sprite.x,$[X].outline.y=$[X].sprite.y,$[X].outline.rotation=$[X].sprite.rotation}},Bt=()=>{a.text=d},Ct=F=>{const X=F.elapsedMS/p;Ci(X),Bt(),Te(X),jt(),st(X),Ws(X),O&&i.stop()},de=async()=>{await i.init({background:"#36c6e3",resizeTo:window,antialias:!0,resolution:2,autoDensity:!0,autoStart:!1}),t.appendChild(i.canvas),window.addEventListener("dino.whaleJump",Hs),window.addEventListener("minigames.startGame",_s),u=new ie,await z(),jt(),Ws(),It(),i.ticker.add(Ct),ne(),i.render(),rt=!0,pi(!1)},_s=()=>{rt&&(W=!0,m=.15,d=0,e.hidden=!0,s.remove(),i.start())};return de(),()=>{window.removeEventListener("dino.whaleJump",Hs),window.removeEventListener("minigames.startGame",_s)}};function y0(i){let t,e,s,r,n,a,o,l,c;return a=new to({}),{c(){t=P("div"),e=P("div"),s=N(),r=P("div"),n=N(),lt(a.$$.fragment),this.h()},l(h){t=T(h,"DIV",{class:!0});var u=I(t);e=T(u,"DIV",{class:!0}),I(e).forEach(C),s=j(u),r=T(u,"DIV",{class:!0}),I(r).forEach(C),n=j(u),pt(a.$$.fragment,u),u.forEach(C),this.h()},h(){x(e,"class","sw-whale__canvas svelte-10158ld"),x(r,"class","sw-whale__game-blur svelte-10158ld"),x(t,"class","sw-whale")},m(h,u){G(h,t,u),A(t,e),A(t,s),A(t,r),A(t,n),ht(a,t,null),o=!0,l||(c=bt(e,"click",i[0]),l=!0)},p:dt,i(h){o||(B(a.$$.fragment,h),o=!0)},o(h){V(a.$$.fragment,h),o=!1},d(h){h&&C(t),ct(a),l=!1,c()}}}function b0(i){const t=Ds();let e;$e(()=>{window.addEventListener("dino.gameEnded",({detail:n})=>{s(n)},{once:!0}),e=_0()}),mi(()=>{e()});const s=n=>t("gameEnded",{isWon:!0,score:n});return[()=>{window.dispatchEvent(new Event("dino.whaleJump"))}]}class w0 extends Ft{constructor(t){super(),Rt(this,t,b0,y0,Tt,{})}}function x0(i){let t,e;return t=new Fc({props:{isWon:i[1]}}),t.$on("gameEnded",i[3]),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},p(s,r){const n={};r&2&&(n.isWon=s[1]),t.$set(n)},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function v0(i){let t,e;return t=new w0({}),t.$on("gameEnded",i[3]),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},p:dt,i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function C0(i){let t,e;return t=new Wc({}),t.$on("gameEnded",i[3]),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},p:dt,i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function A0(i){let t,e,s,r;const n=[C0,v0,x0],a=[];function o(l,c){return l[0]==="flappy"?0:l[0]==="dino"?1:l[0]==="slot"?2:-1}return~(e=o(i))&&(s=a[e]=n[e](i)),{c(){t=P("div"),s&&s.c(),this.h()},l(l){t=T(l,"DIV",{class:!0});var c=I(t);s&&s.l(c),c.forEach(C),this.h()},h(){x(t,"class","game-drawer-content")},m(l,c){G(l,t,c),~e&&a[e].m(t,null),r=!0},p(l,[c]){let h=e;e=o(l),e===h?~e&&a[e].p(l,c):(s&&(Mt(),V(a[h],1,1,()=>{a[h]=null}),Pt()),~e?(s=a[e],s?s.p(l,c):(s=a[e]=n[e](l),s.c()),B(s,1),s.m(t,null)):s=null)},i(l){r||(B(s),r=!0)},o(l){V(s),r=!1},d(l){l&&C(t),~e&&a[e].d()}}}function k0(i,t,e){let s,r,n;const a=xe();yt(i,a,d=>e(4,n=d));let o=0;const l=async(d,m)=>{const{error:g,data:p}=await qa().saveMinigameScore(d,m);if(!g)return p},c=async({detail:d})=>{if(r==="flappy"||r==="dino"){const m=await l(r,d.score);m.winAmount&&(o=m.winAmount)}await h(d)},h=async d=>{if(a.close(),s||d!=null&&d.isWon){await nh(300),r=="slot"&&(o=1e5),u();return}f()},u=()=>{const d={amount:o};a.open({id:ee.Winnings,bgDrawer:"bg-white",height:"h-auto",position:"bottom",meta:d})},f=()=>{a.open({id:ee.Loss,bgDrawer:"bg-white",height:"h-auto",position:"bottom"})};return i.$$.update=()=>{i.$$.dirty&16&&e(1,s=n.meta.isWon||!1),i.$$.dirty&16&&e(0,r=n.meta.gameId)},[r,s,a,c,n]}class S0 extends Ft{constructor(t){super(),Rt(this,t,k0,A0,Tt,{})}}function L0(i){let t=i[0]("clicker.Passive.modal.cta")+"",e;return{c(){e=at(t)},l(s){e=ot(s,t)},m(s,r){G(s,e,r)},p(s,r){r&1&&t!==(t=s[0]("clicker.Passive.modal.cta")+"")&&mt(e,t)},d(s){s&&C(e)}}}function M0(i){let t,e,s='<img src="/assets/earn/business/underground_card_games.webp" class="svelte-1ah98lb"/>',r,n,a=i[0]("clicker.Passive.modal.title")+"",o,l,c,h=i[0]("clicker.Passive.modal.desc_1")+"",u,f,d,m,g,p=i[0]("clicker.Passive.modal.desc_2")+"",_,y;return d=new We({props:{$$slots:{default:[L0]},$$scope:{ctx:i}}}),d.$on("click",i[1]),{c(){t=P("div"),e=P("div"),e.innerHTML=s,r=N(),n=P("p"),o=at(a),l=N(),c=P("p"),u=at(h),f=N(),lt(d.$$.fragment),m=N(),g=P("p"),_=at(p),this.h()},l(w){t=T(w,"DIV",{class:!0});var b=I(t);e=T(b,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-16j2w01"&&(e.innerHTML=s),r=j(b),n=T(b,"P",{class:!0});var v=I(n);o=ot(v,a),v.forEach(C),l=j(b),c=T(b,"P",{class:!0});var S=I(c);u=ot(S,h),S.forEach(C),f=j(b),pt(d.$$.fragment,b),m=j(b),g=T(b,"P",{class:!0});var k=I(g);_=ot(k,p),k.forEach(C),b.forEach(C),this.h()},h(){x(e,"class","empire-drawer-content__img svelte-1ah98lb"),x(n,"class","empire-drawer-content__title svelte-1ah98lb"),x(c,"class","empire-drawer-content__desc svelte-1ah98lb"),x(g,"class","empire-drawer-content__desc svelte-1ah98lb"),x(t,"class","empire-drawer-content svelte-1ah98lb")},m(w,b){G(w,t,b),A(t,e),A(t,r),A(t,n),A(n,o),A(t,l),A(t,c),A(c,u),A(t,f),ht(d,t,null),A(t,m),A(t,g),A(g,_),y=!0},p(w,[b]){(!y||b&1)&&a!==(a=w[0]("clicker.Passive.modal.title")+"")&&mt(o,a),(!y||b&1)&&h!==(h=w[0]("clicker.Passive.modal.desc_1")+"")&&mt(u,h);const v={};b&9&&(v.$$scope={dirty:b,ctx:w}),d.$set(v),(!y||b&1)&&p!==(p=w[0]("clicker.Passive.modal.desc_2")+"")&&mt(_,p)},i(w){y||(B(d.$$.fragment,w),y=!0)},o(w){V(d.$$.fragment,w),y=!1},d(w){w&&C(t),ct(d)}}}function P0(i,t,e){let s;yt(i,De,a=>e(0,s=a));const r=xe();return[s,()=>{eh(!0),r.close(),Ts("/earn")}]}class T0 extends Ft{constructor(t){super(),Rt(this,t,P0,M0,Tt,{})}}const Cl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAsJSURBVHgB7Vh7jFxlHT33OXceOzO73UfLbum2soW+oNhSlLTGINEmakSrERIxASIaX03UCDFYMaCJ+AeRSAhEKJRGEFIQRQUKtFJIa22lFiiW2nbbfc3uzM577tz39Xx3dmtbobTG1n/4kpvO3t57v3PP75zz+80A76+zvP7+3MXJ/Y/N/yb+T0t+rwt6M/7PSvsn7jz5fAhIuVcXXTP64sCvt9+eWoCztNRT/efwtpWXNEaOfKM86lZPOP/Cihk5w9oom9XVR1/JozgW+Dx9Hc41QMkz75jYX4EUhoemzx1+amlWTTpbg2p18cFteZRyHhxbHsBZWu9a4kNPX3ihU6p+qjbhIpGScqO7Ptopzuvd4b1B01x8ZHsBk6MuPCdE6COGcw1QTXffYhVK8MwQ7QOpD8JqjA9tXrBD9p1rcrsnUBh0EBCcRDEqCjycpfWOJd65vn+mqrhrrJKL9NwktM5YtyRl0BwfvTxoOhjbZyJ0Q8iSuDqEIoUOziXAVJt6bUw32+SEhnRXnBAk+I6LybdrKI9YkAhOJbhQAOQhKwhOtYlw/NDLSz+jSt5aTXbac7vLa5Z8e+Ig/huAuQ0XJ82kt9ZzbCjZGKYwsJxAedSBbAcRc6EkQVIAn7unZ6f783suWyeF8uLQaw6EnunLkrtPCaV1IxMJdSgdPkhwq/w6mbctTAya1/ORt+I01gkAv75oUepwtfGTns7EnNK4BVmlRAUQUuTZPmSPXIpAUSLdITO3HX1XXoFk7+w+BMGPXbMAuz4Gq1qjBOxlCQOr2jOJjtD10rVR6pnyCBoOmhWvF6e5TgB42Yziz42E8bVmpSKKSmwSZNKl6AY8y0XIQgbCFDw6FvZg4AvXRvy65jicRpEAanQ1r5MSCCQNxfFSf9gc5T0B7w2jPaxagIYth6eJ70QX969OLNcNAqOkBDhxkD7oyXaW2G5dzUNJKJh91ZXcNIBVHkSznCPIKjzXawFh7SVF53VpVAtNAvcReAEC6sG1Ar5sMIHTXMcYfOORD1wQSv5ySRLg0AKoyFC0GGLpWTBH90XnhQBT52cQy/TAYTkds4zSG2WUD5A93pucpaH9okRkLJn3KvEYQbnQEy0ubNOHH8gHThfgMQb9MLxdln1Mu6IFTkcsmY0AanGxoRTdkb2gl2xYZKYSuXtkQxnhbg3S9gAjDw+jUbAj64o3UlMJuDSWqIRg17VCAgxOy8HHAL62fmkWYbhGpK4/6OLIAypCS4EaS5Kp86jBNDL9feiY3wZoMrJz58C3WVLPQuHlPNQaC9HQENhpxEZDDG4ao+7CiEXFiIHvMMVCK41UTR9+N0CilQ5tXfatIy8sXBgB3LK+39AMayfv1sRrO/tdyGaS2aZH2tNTXXx5FbGupZi9agDzPrEARkc/XV2nrjwkFqdQqeajViIMLoK8jeEuDCUOSVHhMjfFZz4GelxmJbKTJwPbdd8y7fDvF31f7ZAOa6p5t52vrI1eplNXb4ln4gNOxWZS+NAuNzBrRQNGVxe0ZCcfluJO7BpyAqm+1dSYz9LmWVozMonepmDGx5MYfeoQQhqhbb6OnpUdUYkFh8IY4hDPMLI6+jp1eGqtj3uXpsHtf3TuKi1V/aViKBczPyHZDob2VCIjqWHg3QR2KiMTR7NoQ29XoCViLG8KqpElMB3RVgQf+sKNDUZKAb5rRwDFxuddPRPdn+wmaL/Vm9lmeDoCVp00oastBhOz+shgDfPS2o/2PJxcG/ODOYohfUfR3DVwmADUvMx4yr9dRm7IfSUqcRj6NadRgRpXEU+zrXksVFSOGMsci4QeRjnGkHVrcBt5uM0qN/db5wUS0Y8VCbohdNvynTCExVCuDpVgJFW+UIDmZIP52E0NNtdkMtqwFNdenThsrvEadmQ2kRjOZBUjb5lHD8y3N0cAPRt3c1yK0l9vM5BIJ8hQgyDq3FwoS4AQ7NnUXZUuJDjPidgTICKAEcbW5+myWg0XY2+OoSOr0GRqZJjqcB751w/C9wyMHvWwfXMBe/dazFjRFJga7FzFg2WMjYcP3XDFJTdt/8XsbfKyrwzdw2o9K/Tj+zqM9nYOCF2wCiNo5Pkwh0DpVt9tMGBr/Juffa/FHlrawhSw6bLaTQ+5t0bRRb3FKB3VYGhrKozONJL9vdi/p4I3dhVRawRwImdx+EgaAEnJHXbqyz8371Lfrd+7ZWvlYBTU+dHwSzPnhK9Qdhfp7YuYXSW6N4vq2DA7RB2p7tkRY57NEnku7Bwb/ksNqH0+Oi/LRMAQtMoqtFYcnkQbJdPW20UNiRdxEcvGKTMNb+4YIXsVRg/P8tp4LJrZmLMy3FITfct7Uums8+knN07m944lbosEc9UPRibLRfNjjXJjf8Cax9qXQM/2It0zC3CamDywJ2pngj3h9PIutq+9BopPF1n6KfYwTWaIODWnJT0kMxaf40Fpi6FSCXFgzwjGR6hjDh0e72NKIRlHlJWyqkDOppGeKePZTZPYtk9f99iO3KAybfUH/2TWPv+h2GMIrBXJju5+LTELCnNQ8nJ0loH6xDgkXW+9bbcMs1RCdlUKsR79GDAErTKr1JwIPduWCUKHWQ+QP1pmpWqw2YsFQJfhzQ6IgV4JHd2UQFuK8WXipd+V8NJr8v2P7yrcJvZSjg/Lh5+vmV0Lc4+cD9swUm0rFS3OXtrBFBrj1CwGgwYnFYre0JBakIDRM/VVZMoo0T9ByzOiSXmsoVm3Uc7XUZyoo8k+LEpLlRAkAToSVlwaR+YDnfDrNWx+sogtr2uDTSn+xX+M1Jr/AVCsrVsR3vP4+AufXVIZVzV3pSz5BuOYErM5RZscENxo9JI0Nh5I0x6Z0t+Uk2k4AU7ETK1kolqyYJkeXIfnBXsE50StR8LCJRnU8zW8+EwFOw9qsHz9I5t2jQ1O45FwirX9rpn9iZ7OP2Z72qMv5qEvBk52ETZ8i706ZDvUUskIYdR7RdegmURg26ZNcA0eTbLo8nq+IocGNomIRZss+q6EdhbBJOijVQ0lL3bn4zsLNx+P4ZQAI1C8ZvcDA7emOtvXMYjVKP9Em6uX4bJ9N5tyxKYm1M6LfQa9R3rMKpljMNfLLHFBxqHtFuLnBUj1SC0GCdAjg8x71BwFFUcftPzs0id2H6ocv/97/vQhvn4sv/HA7c1idaA8Xt8uQj2UCaZtJluijoTBXGSwV4YLqOYZ5K4fldflVwTb8vl3gCMH6OJxPsxuDTStg0D5rIYriwkbo8P2ppPBTe1/ZuvPd827obM380M1pvYLzYmJJmyUUS/UUa/T3SxlwK7A/cmiA9N0UZgIUK+GSLeTtaBlEJvltXiYrkJwMnJW7Lq/TkxsPHk/BWe4Hnqu9NriTn1DOglXVpSlzK9YoBhiyBPjMtyahUbVRXnSaenOFYwzmox/s+Z4EjuIACij7mn+WCFcvWOi+Nt32u+MAYr1h10V68FnCltWzbQeDVU5rkjyEkXX1EDWaAIPUuBBZR3Nhs9oCVvR4ktRWxPgbK/FXsNTw7qv3/z8P4sb322vMy7xO61f3Zid0zk7/d1kQrnWs6zOWrEZxYrPWAno3IYZoFQHGImokzV+a6b2mKeKtuM3fyt++FTP/p8AnF4//XLbjJ6UdrXveN/j2HaRF4VyGGVf9AOd0B5/z7EcgvQUMqh/9b6/FO/HuQJ4/LpjTWa5IvnXc8i9isPPfB7HzGGSxZrHWDm/eMETT0TfFM49wOPX2tVtFypuuDQI5EWWG2SavjIUJlLrN7w4Mon311le/wJoGUO3taeL1QAAAABJRU5ErkJggg==";function E0(i){let t,e,s,r,n,a=new Intl.NumberFormat("en-US").format(i[0].amount)+"",o,l;return e=new Sr({props:{size:24}}),{c(){t=P("h5"),lt(e.$$.fragment),s=N(),r=P("span"),n=at("+"),o=at(a),this.h()},l(c){t=T(c,"H5",{class:!0});var h=I(t);pt(e.$$.fragment,h),s=j(h),r=T(h,"SPAN",{});var u=I(r);n=ot(u,"+"),o=ot(u,a),u.forEach(C),h.forEach(C),this.h()},h(){x(t,"class","svelte-1mgd05r")},m(c,h){G(c,t,h),ht(e,t,null),A(t,s),A(t,r),A(r,n),A(r,o),l=!0},p(c,h){(!l||h&1)&&a!==(a=new Intl.NumberFormat("en-US").format(c[0].amount)+"")&&mt(o,a)},i(c){l||(B(e.$$.fragment,c),l=!0)},o(c){V(e.$$.fragment,c),l=!1},d(c){c&&C(t),ct(e)}}}function I0(i){let t,e,s=i[1]("clicker.Winnings.free_spins")+"",r;return{c(){t=P("h5"),e=P("span"),r=at(s),this.h()},l(n){t=T(n,"H5",{class:!0});var a=I(t);e=T(a,"SPAN",{});var o=I(e);r=ot(o,s),o.forEach(C),a.forEach(C),this.h()},h(){x(t,"class","svelte-1mgd05r")},m(n,a){G(n,t,a),A(t,e),A(e,r)},p(n,a){a&2&&s!==(s=n[1]("clicker.Winnings.free_spins")+"")&&mt(r,s)},i:dt,o:dt,d(n){n&&C(t)}}}function B0(i){let t=i[1]("clicker.Winnings.claim")+"",e;return{c(){e=at(t)},l(s){e=ot(s,t)},m(s,r){G(s,e,r)},p(s,r){r&2&&t!==(t=s[1]("clicker.Winnings.claim")+"")&&mt(e,t)},d(s){s&&C(e)}}}function F0(i){let t,e,s=`<img src="${Cl}" alt=""/>`,r,n,a=i[1]("clicker.Winnings.you_won")+"",o,l,c,h,u,f,d,m,g,p;const _=[I0,E0],y=[];function w(b,v){var S;return((S=b[0])==null?void 0:S.type)==="whale_free_spin"?0:1}return c=w(i),h=y[c]=_[c](i),f=new We({props:{$$slots:{default:[B0]},$$scope:{ctx:i}}}),f.$on("click",i[4]),g=new Ar({props:{src:"/confetti-gold.json",autoplay:!0,loop:!1,controls:!1,renderer:"svg",background:"transparent",height:1e3,width:1e3,controlsLayout:i[3]}}),{c(){t=P("div"),e=P("div"),e.innerHTML=s,r=N(),n=P("h4"),o=at(a),l=N(),h.c(),u=N(),lt(f.$$.fragment),d=N(),m=P("div"),lt(g.$$.fragment),this.h()},l(b){t=T(b,"DIV",{class:!0});var v=I(t);e=T(v,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-xx0t48"&&(e.innerHTML=s),r=j(v),n=T(v,"H4",{class:!0});var S=I(n);o=ot(S,a),S.forEach(C),l=j(v),h.l(v),u=j(v),pt(f.$$.fragment,v),d=j(v),m=T(v,"DIV",{class:!0});var k=I(m);pt(g.$$.fragment,k),k.forEach(C),v.forEach(C),this.h()},h(){x(e,"class","icon-wrapper svelte-1mgd05r"),x(n,"class","svelte-1mgd05r"),x(m,"class","lottie-wrapper svelte-1mgd05r"),x(t,"class","winnings-drawer-content svelte-1mgd05r")},m(b,v){G(b,t,v),A(t,e),A(t,r),A(t,n),A(n,o),A(t,l),y[c].m(t,null),A(t,u),ht(f,t,null),A(t,d),A(t,m),ht(g,m,null),p=!0},p(b,[v]){(!p||v&2)&&a!==(a=b[1]("clicker.Winnings.you_won")+"")&&mt(o,a);let S=c;c=w(b),c===S?y[c].p(b,v):(Mt(),V(y[S],1,1,()=>{y[S]=null}),Pt(),h=y[c],h?h.p(b,v):(h=y[c]=_[c](b),h.c()),B(h,1),h.m(t,u));const k={};v&130&&(k.$$scope={dirty:v,ctx:b}),f.$set(k)},i(b){p||(B(h),B(f.$$.fragment,b),B(g.$$.fragment,b),p=!0)},o(b){V(h),V(f.$$.fragment,b),V(g.$$.fragment,b),p=!1},d(b){b&&C(t),y[c].d(),ct(f),ct(g)}}}function R0(i,t,e){let s,r;yt(i,De,h=>e(1,r=h));const n=xe();yt(i,n,h=>e(5,s=h));let a={amount:0};const o=[];$e(()=>{e(0,a=s.meta)}),mi(()=>{kr(a.amount)});const l=()=>{var h;(a==null?void 0:a.type)==="whale_free_spin"&&((h=window.Telegram)==null||h.WebApp.openLink("https://whaleapp.gg?utm_source=wow&utm_medium=organic&utm_campaign=acq-wow2whale-wow")),c()},c=()=>{n.close()};return[a,r,n,o,l]}class D0 extends Ft{constructor(t){super(),Rt(this,t,R0,F0,Tt,{})}}function V0(i){let t,e;return{c(){t=P("img"),this.h()},l(s){t=T(s,"IMG",{src:!0,alt:!0}),this.h()},h(){Nt(t.src,e=Cl)||x(t,"src",e),x(t,"alt","")},m(s,r){G(s,t,r)},d(s){s&&C(t)}}}function G0(i){let t,e;return{c(){t=P("img"),this.h()},l(s){t=T(s,"IMG",{src:!0,alt:!0}),this.h()},h(){Nt(t.src,e="/assets/missions/casino.webp")||x(t,"src",e),x(t,"alt","")},m(s,r){G(s,t,r)},d(s){s&&C(t)}}}function H0(i){let t,e,s,r,n=new Intl.NumberFormat("en-US").format(i[0])+"",a,o;return t=new Sr({props:{size:24}}),{c(){lt(t.$$.fragment),e=N(),s=P("span"),r=at("+"),a=at(n)},l(l){pt(t.$$.fragment,l),e=j(l),s=T(l,"SPAN",{});var c=I(s);r=ot(c,"+"),a=ot(c,n),c.forEach(C)},m(l,c){ht(t,l,c),G(l,e,c),G(l,s,c),A(s,r),A(s,a),o=!0},p(l,c){(!o||c&1)&&n!==(n=new Intl.NumberFormat("en-US").format(l[0])+"")&&mt(a,n)},i(l){o||(B(t.$$.fragment,l),o=!0)},o(l){V(t.$$.fragment,l),o=!1},d(l){l&&(C(e),C(s)),ct(t,l)}}}function W0(i){let t,e=i[1]("clicker.Passive.businesses.casino_hotel.levels.unlock_hotel")+"",s;return{c(){t=P("span"),s=at(e)},l(r){t=T(r,"SPAN",{});var n=I(t);s=ot(n,e),n.forEach(C)},m(r,n){G(r,t,n),A(t,s)},p(r,n){n&2&&e!==(e=r[1]("clicker.Passive.businesses.casino_hotel.levels.unlock_hotel")+"")&&mt(s,e)},i:dt,o:dt,d(r){r&&C(t)}}}function z0(i){let t=i[1]("clicker.Winnings.claim")+"",e;return{c(){e=at(t)},l(s){e=ot(s,t)},m(s,r){G(s,e,r)},p(s,r){r&2&&t!==(t=s[1]("clicker.Winnings.claim")+"")&&mt(e,t)},d(s){s&&C(e)}}}function U0(i){let t,e,s,r,n=i[1]("clicker.Missions.completed")+"",a,o,l,c,h,u,f,d,m,g,p;function _(k,L){return k[0]===qr.UnlockHotel?G0:V0}let y=_(i),w=y(i);const b=[W0,H0],v=[];function S(k,L){return k[0]===qr.UnlockHotel?0:1}return c=S(i),h=v[c]=b[c](i),f=new We({props:{$$slots:{default:[z0]},$$scope:{ctx:i}}}),f.$on("click",i[4]),g=new Ar({props:{src:"/confetti-gold.json",autoplay:!0,loop:!1,controls:!1,renderer:"svg",background:"transparent",height:1e3,width:1e3,controlsLayout:i[3]}}),{c(){t=P("div"),e=P("div"),w.c(),s=N(),r=P("h4"),a=at(n),o=N(),l=P("h5"),h.c(),u=N(),lt(f.$$.fragment),d=N(),m=P("div"),lt(g.$$.fragment),this.h()},l(k){t=T(k,"DIV",{class:!0});var L=I(t);e=T(L,"DIV",{class:!0});var M=I(e);w.l(M),M.forEach(C),s=j(L),r=T(L,"H4",{class:!0});var E=I(r);a=ot(E,n),E.forEach(C),o=j(L),l=T(L,"H5",{class:!0});var tt=I(l);h.l(tt),tt.forEach(C),u=j(L),pt(f.$$.fragment,L),d=j(L),m=T(L,"DIV",{class:!0});var it=I(m);pt(g.$$.fragment,it),it.forEach(C),L.forEach(C),this.h()},h(){x(e,"class","icon-wrapper svelte-1mgd05r"),x(r,"class","svelte-1mgd05r"),x(l,"class","svelte-1mgd05r"),x(m,"class","lottie-wrapper svelte-1mgd05r"),x(t,"class","winnings-drawer-content svelte-1mgd05r")},m(k,L){G(k,t,L),A(t,e),w.m(e,null),A(t,s),A(t,r),A(r,a),A(t,o),A(t,l),v[c].m(l,null),A(t,u),ht(f,t,null),A(t,d),A(t,m),ht(g,m,null),p=!0},p(k,[L]){y!==(y=_(k))&&(w.d(1),w=y(k),w&&(w.c(),w.m(e,null))),(!p||L&2)&&n!==(n=k[1]("clicker.Missions.completed")+"")&&mt(a,n);let M=c;c=S(k),c===M?v[c].p(k,L):(Mt(),V(v[M],1,1,()=>{v[M]=null}),Pt(),h=v[c],h?h.p(k,L):(h=v[c]=b[c](k),h.c()),B(h,1),h.m(l,null));const E={};L&130&&(E.$$scope={dirty:L,ctx:k}),f.$set(E)},i(k){p||(B(h),B(f.$$.fragment,k),B(g.$$.fragment,k),p=!0)},o(k){V(h),V(f.$$.fragment,k),V(g.$$.fragment,k),p=!1},d(k){k&&C(t),w.d(),v[c].d(),ct(f),ct(g)}}}function O0(i,t,e){let s,r;yt(i,De,h=>e(1,r=h));const n=xe();yt(i,n,h=>e(5,s=h));let a;const o=[];$e(()=>{e(0,a=s.meta.reward)}),mi(()=>{typeof a=="number"&&kr(a)});const l=()=>{c()},c=()=>{n.close()};return[a,r,n,o,l]}class N0 extends Ft{constructor(t){super(),Rt(this,t,O0,U0,Tt,{})}}const j0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABGSURBVHgBrYrBDQAhCAQ96AXCz1Is6UqyFH8EeoEYE7UC5zXZnU9VfwAYzNzLZm3HEbET0Vju7jUi2vlE5HZm1jKzQnnMBL50FwkDMVG2AAAAAElFTkSuQmCC",X0=""+new URL("../assets/calendar.qbVlW0Me.svg",import.meta.url).href,La={1:1e3,2:2e3,3:3e3,4:4e3,5:5e3,6:7500,7:1e4,8:12e3,9:15e3,10:2e4,11:25e3,12:32e3,13:39e3,14:5e4,15:6e4,16:7e4,17:9e4,18:11e4,19:13e4,20:15e4,21:2e5,22:25e4,23:3e5,24:37e4,25:45e4,26:5e5,27:57e4,28:65e4};function Ma(i,t,e){const s=i.slice();return s[13]=t[e],s}function Pa(i){let t,e;return t=new Wl({props:{theme:"light"}}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Ta(i){let t,e,s=i[4]("clicker.General.day")+"",r,n,a=i[13].day+"",o,l,c,h,u,f,d=new Intl.NumberFormat("en-US").format(i[3]>0?i[13].amount*(1+i[3]):i[13].amount)+"",m,g,p,_,y,w;return h=new Sr({props:{size:20}}),{c(){t=P("div"),e=P("span"),r=at(s),n=N(),o=at(a),l=N(),c=P("span"),lt(h.$$.fragment),u=N(),f=P("span"),m=at(d),p=N(),_=P("img"),this.h()},l(b){t=T(b,"DIV",{class:!0});var v=I(t);e=T(v,"SPAN",{});var S=I(e);r=ot(S,s),n=j(S),o=ot(S,a),S.forEach(C),l=j(v),c=T(v,"SPAN",{class:!0});var k=I(c);pt(h.$$.fragment,k),u=j(k),f=T(k,"SPAN",{class:!0});var L=I(f);m=ot(L,d),L.forEach(C),k.forEach(C),v.forEach(C),p=j(b),_=T(b,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){x(f,"class","reward-tag svelte-zycfd7"),x(c,"class","inline svelte-zycfd7"),Se(c,"boosted",i[3]>0),x(t,"class",g=ni(`bonus-tag ${i[13].active?"active":""}`)+" svelte-zycfd7"),Nt(_.src,y=j0)||x(_,"src",y),x(_,"alt",""),x(_,"class","breakline svelte-zycfd7")},m(b,v){G(b,t,v),A(t,e),A(e,r),A(e,n),A(e,o),A(t,l),A(t,c),ht(h,c,null),A(c,u),A(c,f),A(f,m),G(b,p,v),G(b,_,v),w=!0},p(b,v){(!w||v&16)&&s!==(s=b[4]("clicker.General.day")+"")&&mt(r,s),(!w||v&4)&&a!==(a=b[13].day+"")&&mt(o,a),(!w||v&12)&&d!==(d=new Intl.NumberFormat("en-US").format(b[3]>0?b[13].amount*(1+b[3]):b[13].amount)+"")&&mt(m,d),(!w||v&8)&&Se(c,"boosted",b[3]>0),(!w||v&4&&g!==(g=ni(`bonus-tag ${b[13].active?"active":""}`)+" svelte-zycfd7"))&&x(t,"class",g)},i(b){w||(B(h.$$.fragment,b),w=!0)},o(b){V(h.$$.fragment,b),w=!1},d(b){b&&(C(t),C(p),C(_)),ct(h)}}}function Y0(i){let t,e=i[4]("clicker.DailyBonus.cta")+"",s;return{c(){t=P("span"),s=at(e)},l(r){t=T(r,"SPAN",{});var n=I(t);s=ot(n,e),n.forEach(C)},m(r,n){G(r,t,n),A(t,s)},p(r,n){n&16&&e!==(e=r[4]("clicker.DailyBonus.cta")+"")&&mt(s,e)},i:dt,o:dt,d(r){r&&C(t)}}}function q0(i){let t,e;return t=new rh({props:{fill:"fill-white-v3"}}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},p:dt,i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Z0(i){let t,e,s,r;const n=[q0,Y0],a=[];function o(l,c){return l[0]?0:1}return t=o(i),e=a[t]=n[t](i),{c(){e.c(),s=Wt()},l(l){e.l(l),s=Wt()},m(l,c){a[t].m(l,c),G(l,s,c),r=!0},p(l,c){let h=t;t=o(l),t===h?a[t].p(l,c):(Mt(),V(a[h],1,1,()=>{a[h]=null}),Pt(),e=a[t],e?e.p(l,c):(e=a[t]=n[t](l),e.c()),B(e,1),e.m(s.parentNode,s))},i(l){r||(B(e),r=!0)},o(l){V(e),r=!1},d(l){l&&C(s),a[t].d(l)}}}function K0(i){let t,e,s,r,n,a,o=i[4]("clicker.DailyBonus.heading")+"",l,c,h,u=i[4]("clicker.DailyBonus.paragraph")+"",f,d,m,g,p,_,y,w=i[3]>0&&Pa(),b=fe(i[2]()),v=[];for(let k=0;k<b.length;k+=1)v[k]=Ta(Ma(i,b,k));const S=k=>V(v[k],1,1,()=>{v[k]=null});return _=new We({props:{$$slots:{default:[Z0]},$$scope:{ctx:i}}}),_.$on("click",i[7]),{c(){t=P("div"),w&&w.c(),e=N(),s=P("img"),n=N(),a=P("h1"),l=at(o),c=N(),h=P("p"),f=at(u),d=N(),m=P("div");for(let k=0;k<v.length;k+=1)v[k].c();p=N(),lt(_.$$.fragment),this.h()},l(k){t=T(k,"DIV",{class:!0});var L=I(t);w&&w.l(L),e=j(L),s=T(L,"IMG",{src:!0,alt:!0,class:!0}),n=j(L),a=T(L,"H1",{class:!0});var M=I(a);l=ot(M,o),M.forEach(C),c=j(L),h=T(L,"P",{class:!0});var E=I(h);f=ot(E,u),E.forEach(C),d=j(L),m=T(L,"DIV",{class:!0,style:!0});var tt=I(m);for(let it=0;it<v.length;it+=1)v[it].l(tt);tt.forEach(C),p=j(L),pt(_.$$.fragment,L),L.forEach(C),this.h()},h(){Nt(s.src,r=X0)||x(s,"src",r),x(s,"alt",""),x(s,"class","calendar svelte-zycfd7"),x(a,"class","svelte-zycfd7"),x(h,"class","svelte-zycfd7"),x(m,"class","bonus-tags svelte-zycfd7"),x(m,"style",g=i[1]()),x(t,"class","daily-bonus-drawer-content svelte-zycfd7")},m(k,L){G(k,t,L),w&&w.m(t,null),A(t,e),A(t,s),A(t,n),A(t,a),A(a,l),A(t,c),A(t,h),A(h,f),A(t,d),A(t,m);for(let M=0;M<v.length;M+=1)v[M]&&v[M].m(m,null);A(t,p),ht(_,t,null),y=!0},p(k,[L]){if(k[3]>0?w?L&8&&B(w,1):(w=Pa(),w.c(),B(w,1),w.m(t,e)):w&&(Mt(),V(w,1,1,()=>{w=null}),Pt()),(!y||L&16)&&o!==(o=k[4]("clicker.DailyBonus.heading")+"")&&mt(l,o),(!y||L&16)&&u!==(u=k[4]("clicker.DailyBonus.paragraph")+"")&&mt(f,u),L&28){b=fe(k[2]());let E;for(E=0;E<b.length;E+=1){const tt=Ma(k,b,E);v[E]?(v[E].p(tt,L),B(v[E],1)):(v[E]=Ta(tt),v[E].c(),B(v[E],1),v[E].m(m,null))}for(Mt(),E=b.length;E<v.length;E+=1)S(E);Pt()}(!y||L&2&&g!==(g=k[1]()))&&x(m,"style",g);const M={};L&65553&&(M.$$scope={dirty:L,ctx:k}),_.$set(M)},i(k){if(!y){B(w);for(let L=0;L<b.length;L+=1)B(v[L]);B(_.$$.fragment,k),y=!0}},o(k){V(w),v=v.filter(Boolean);for(let L=0;L<v.length;L+=1)V(v[L]);V(_.$$.fragment,k),y=!1},d(k){k&&C(t),w&&w.d(),ks(v,k),ct(_)}}}function $0(i,t,e){let s,r,n,a,o,l,c;yt(i,De,p=>e(4,c=p));const h=za();yt(i,h,p=>e(9,o=p));const u=ja();yt(i,u,p=>e(10,l=p));const f=xe(),d=Ua();let m=!1;const g=async()=>{if(m)return;e(0,m=!0);const{data:p,error:_}=await ah().claimBonus();if(_){e(0,m=!1),Kl(d,(_==null?void 0:_.message)??(_==null?void 0:_.error)??"Can not claim daily bonus");return}Vl({amount:-1,streak:o.streak}),p.incrementBy&&kr(p.incrementBy),f.close(),e(0,m=!1)};return i.$$.update=()=>{i.$$.dirty&512&&e(8,s=o.streak),i.$$.dirty&1024&&e(3,r=(l==null?void 0:l.dynamicReward)||0),i.$$.dirty&256&&e(2,n=()=>{const p=Object.keys(La).map(y=>Number(y)),_=p.filter(y=>Math.abs(s-y)<=1);return s==p[p.length-1]&&_.push(1),_.map(y=>({day:y,amount:La[y],active:s==y}))}),i.$$.dirty&256&&e(1,a=()=>{switch(s){case 1:return"margin: 1.5rem 0 1.5rem calc(100% - 128px);";default:return"justify-content: center;"}})},[m,a,n,r,c,h,u,g,s,o,l]}class Q0 extends Ft{constructor(t){super(),Rt(this,t,$0,K0,Tt,{})}}function J0(i){let t=i[0]("clicker.Verb.close")+"",e;return{c(){e=at(t)},l(s){e=ot(s,t)},m(s,r){G(s,e,r)},p(s,r){r&1&&t!==(t=s[0]("clicker.Verb.close")+"")&&mt(e,t)},d(s){s&&C(e)}}}function tm(i){let t,e,s=`<img src="${oh}" alt=""/>`,r,n,a=i[0]("clicker.Loss.heading")+"",o,l,c,h=i[0]("clicker.sometimes_lose_always_win")+"",u,f,d,m;return d=new We({props:{$$slots:{default:[J0]},$$scope:{ctx:i}}}),d.$on("click",i[1]),{c(){t=P("div"),e=P("div"),e.innerHTML=s,r=N(),n=P("h4"),o=at(a),l=N(),c=P("p"),u=at(h),f=N(),lt(d.$$.fragment),this.h()},l(g){t=T(g,"DIV",{class:!0});var p=I(t);e=T(p,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-15ui1fn"&&(e.innerHTML=s),r=j(p),n=T(p,"H4",{class:!0});var _=I(n);o=ot(_,a),_.forEach(C),l=j(p),c=T(p,"P",{class:!0});var y=I(c);u=ot(y,h),y.forEach(C),f=j(p),pt(d.$$.fragment,p),p.forEach(C),this.h()},h(){x(e,"class","icon-wrapper svelte-lejn6m"),x(n,"class","svelte-lejn6m"),x(c,"class","svelte-lejn6m"),x(t,"class","loss-drawer-content svelte-lejn6m")},m(g,p){G(g,t,p),A(t,e),A(t,r),A(t,n),A(n,o),A(t,l),A(t,c),A(c,u),A(t,f),ht(d,t,null),m=!0},p(g,[p]){(!m||p&1)&&a!==(a=g[0]("clicker.Loss.heading")+"")&&mt(o,a),(!m||p&1)&&h!==(h=g[0]("clicker.sometimes_lose_always_win")+"")&&mt(u,h);const _={};p&9&&(_.$$scope={dirty:p,ctx:g}),d.$set(_)},i(g){m||(B(d.$$.fragment,g),m=!0)},o(g){V(d.$$.fragment,g),m=!1},d(g){g&&C(t),ct(d)}}}function em(i,t,e){let s;yt(i,De,a=>e(0,s=a));const r=xe();return[s,()=>{r.close()}]}class sm extends Ft{constructor(t){super(),Rt(this,t,em,tm,Tt,{})}}function im(i){let t=i[1](`clicker.ExternalPlay.${i[0]}.cta`)+"",e;return{c(){e=at(t)},l(s){e=ot(s,t)},m(s,r){G(s,e,r)},p(s,r){r&3&&t!==(t=s[1](`clicker.ExternalPlay.${s[0]}.cta`)+"")&&mt(e,t)},d(s){s&&C(e)}}}function rm(i){let t,e,s='<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_4345_8613)"><path d="M14.25 4.81125L13.1887 3.75L9 7.93875L4.81125 3.75L3.75 4.81125L7.93875 9L3.75 13.1887L4.81125 14.25L9 10.0612L13.1887 14.25L14.25 13.1887L10.0612 9L14.25 4.81125Z" fill="black"></path></g><defs><clipPath id="clip0_4345_8613"><rect width="18" height="18" fill="white"></rect></clipPath></defs></svg>',r,n,a,o,l,c,h=i[1]("clicker.ExternalPlay.title")+"",u,f,d,m=i[1](`clicker.ExternalPlay.${i[0]}.desc`)+"",g,p,_,y,w,b;return _=new We({props:{$$slots:{default:[im]},$$scope:{ctx:i}}}),_.$on("click",i[3]),{c(){t=P("div"),e=P("div"),e.innerHTML=s,r=N(),n=P("div"),a=P("img"),l=N(),c=P("p"),u=at(h),f=N(),d=P("p"),g=at(m),p=N(),lt(_.$$.fragment),this.h()},l(v){t=T(v,"DIV",{class:!0});var S=I(t);e=T(S,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1rwg6tp"&&(e.innerHTML=s),r=j(S),n=T(S,"DIV",{class:!0});var k=I(n);a=T(k,"IMG",{src:!0,alt:!0,class:!0}),k.forEach(C),l=j(S),c=T(S,"P",{class:!0});var L=I(c);u=ot(L,h),L.forEach(C),f=j(S),d=T(S,"P",{class:!0});var M=I(d);g=ot(M,m),M.forEach(C),p=j(S),pt(_.$$.fragment,S),S.forEach(C),this.h()},h(){x(e,"class","external-play-drawer-content__close svelte-i8hqpf"),Nt(a.src,o=`/assets/external-play/${i[0]}.webp`)||x(a,"src",o),x(a,"alt","Icon"),x(a,"class","svelte-i8hqpf"),x(n,"class","external-play-drawer-content__icon svelte-i8hqpf"),x(c,"class","external-play-drawer-content__title svelte-i8hqpf"),x(d,"class","external-play-drawer-content__desc svelte-i8hqpf"),x(t,"class","external-play-drawer-content svelte-i8hqpf")},m(v,S){G(v,t,S),A(t,e),A(t,r),A(t,n),A(n,a),A(t,l),A(t,c),A(c,u),A(t,f),A(t,d),A(d,g),A(t,p),ht(_,t,null),y=!0,w||(b=bt(e,"click",i[4]),w=!0)},p(v,[S]){(!y||S&1&&!Nt(a.src,o=`/assets/external-play/${v[0]}.webp`))&&x(a,"src",o),(!y||S&2)&&h!==(h=v[1]("clicker.ExternalPlay.title")+"")&&mt(u,h),(!y||S&3)&&m!==(m=v[1](`clicker.ExternalPlay.${v[0]}.desc`)+"")&&mt(g,m);const k={};S&131&&(k.$$scope={dirty:S,ctx:v}),_.$set(k)},i(v){y||(B(_.$$.fragment,v),y=!0)},o(v){V(_.$$.fragment,v),y=!1},d(v){v&&C(t),ct(_),w=!1,b()}}}function nm(i,t,e){let s,r,n,a;yt(i,De,h=>e(1,a=h));const o=xe();yt(i,o,h=>e(6,n=h));const l=()=>{if(s){window.open("https://play.google.com/store/apps/details?id=com.wheelofwhales.app");return}window.open("https://wheelofwhales.io/")},c=()=>{o.close()};return i.$$.update=()=>{i.$$.dirty&64&&e(5,s=n.meta.isAndroid),i.$$.dirty&32&&e(0,r=s?"apk":"web")},[r,a,o,l,c,s,n]}class am extends Ft{constructor(t){super(),Rt(this,t,nm,rm,Tt,{})}}var Al=(i=>(i.Page="page",i.Component="component",i))(Al||{});const om=Oa({history:[]}),lm=i=>{window.Telegram.WebApp.HapticFeedback.impactOccurred("soft"),om.update(t=>{var n,a,o,l,c;const e=(n=t.history)==null?void 0:n[t.history.length-2],s=window.location.pathname==="/play";if(s&&(t.history=[]),e&&(e==null?void 0:e.identifier)===i.identifier)return t.history=t.history.slice(0,t.history.length-1),Kr({close:s,back:{url:((o=(a=t.history)==null?void 0:a[t.history.length-2])==null?void 0:o.identifier)||"/play"}}),t;t.history.push(i);let r={};return i.callback?r.callback=i.callback:r={close:s,back:{url:t.history.length>1?(c=(l=t.history)==null?void 0:l[t.history.length-2])==null?void 0:c.identifier:"/play"}},Kr(r),t})};function hm(i){let t;if(window.turnstile)t||s();else{const r=document.createElement("script"),n=i.getAttribute("turnstile-script-src")??"https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit";r.setAttribute("src",n),document.head.appendChild(r),r.addEventListener("load",s)}function e(r,n){n={widgetId:t,turnstile:window.turnstile,...n},i.dispatchEvent(new CustomEvent(r,{detail:n}))}function s(){var a;const r=i.getAttribute("turnstile-sitekey");if(!r)throw new Error("Attribute `turnstile-sitekey` is required but not provided");const n={sitekey:r,action:i.getAttribute("turnstile-action")??void 0,cData:i.getAttribute("turnstile-cData")??void 0,execution:i.getAttribute("turnstile-execution")??void 0,theme:i.getAttribute("turnstile-theme")??void 0,language:i.getAttribute("turnstile-language")??void 0,tabindex:i.hasAttribute("turnstile-tabindex")?parseInt(i.getAttribute("turnstile-tabindex")||"0")||0:void 0,"response-field":i.hasAttribute("turnstile-response-field"),"response-field-name":i.getAttribute("turnstile-response-field-name")??void 0,size:i.getAttribute("turnstile-size")??void 0,retry:i.getAttribute("turnstile-retry")??void 0,"retry-interval":i.hasAttribute("turnstile-retry-interval")?parseInt(i.getAttribute("turnstile-retry-interval")||"8000")||8e3:void 0,"refresh-expired":i.getAttribute("turnstile-refresh-expired")??void 0,appearance:i.getAttribute("turnstile-appearance")??void 0,callback:o=>{e("turnstile",{token:o}),i.toggleAttribute("turnstile-rendered",!0)},"error-callback":o=>{e("turnstile:error",{code:o})},"expired-callback":(...o)=>{e("turnstile:expired",{...o.length?{params:o}:{}})},"before-interactive-callback":()=>{e("turnstile:before-interactive",{})},"after-interactive-callback":()=>{e("turnstile:after-interactive",{})},"unsupported-callback":(...o)=>{e("turnstile:unsupported",{...o.length?{params:o}:{}})},"timeout-callback":(...o)=>{e("turnstile:timeout",{...o.length?{params:o}:{}})}};t=(a=window.turnstile)==null?void 0:a.render(i,n),t&&i.setAttribute("turnstile-widget-id",t)}return{destroy(){var r;t&&((r=window.turnstile)==null||r.remove(t),t=void 0)}}}function cm(i){let t,e,s;return{c(){t=P("div"),this.h()},l(r){t=T(r,"DIV",{"turnstile-sitekey":!0,"turnstile-theme":!0}),I(t).forEach(C),this.h()},h(){x(t,"turnstile-sitekey",fm),x(t,"turnstile-theme","auto")},m(r,n){G(r,t,n),e||(s=[vr(hm.call(null,t)),bt(t,"turnstile",i[3])],e=!0)},p:dt,i:dt,o:dt,d(r){r&&C(t),e=!1,Re(s)}}}function um(i){let t,e="Contact Whale support to Claim your Reward.",s,r,n,a;return n=new Ar({props:{src:"/confetti-gold.json",autoplay:!0,loop:!1,controls:!1,renderer:"svg",background:"transparent",height:1e3,width:1e3,controlsLayout:[]}}),{c(){t=P("p"),t.textContent=e,s=N(),r=P("div"),lt(n.$$.fragment),this.h()},l(o){t=T(o,"P",{class:!0,"data-svelte-h":!0}),ge(t)!=="svelte-182de76"&&(t.textContent=e),s=j(o),r=T(o,"DIV",{class:!0});var l=I(r);pt(n.$$.fragment,l),l.forEach(C),this.h()},h(){x(t,"class","contact-support svelte-icnk74"),x(r,"class","lottie-wrapper svelte-icnk74")},m(o,l){G(o,t,l),G(o,s,l),G(o,r,l),ht(n,r,null),a=!0},p:dt,i(o){a||(B(n.$$.fragment,o),a=!0)},o(o){V(n.$$.fragment,o),a=!1},d(o){o&&(C(t),C(s),C(r)),ct(n)}}}function dm(i){let t,e,s,r,n,a,o=i[1]("clicker.Winnings.you_won")+"",l,c,h,u,f=i[1](`clicker.Wheel.rewards.${i[0]}`)+"",d,m,g,p,_;const y=[um,cm],w=[];function b(v,S){return v[0]==="ton"?0:1}return g=b(i),p=w[g]=y[g](i),{c(){t=P("div"),e=P("div"),s=P("img"),n=N(),a=P("h4"),l=at(o),c=N(),h=P("h5"),u=P("span"),d=at(f),m=N(),p.c(),this.h()},l(v){t=T(v,"DIV",{class:!0});var S=I(t);e=T(S,"DIV",{class:!0});var k=I(e);s=T(k,"IMG",{src:!0,alt:!0,class:!0}),k.forEach(C),n=j(S),a=T(S,"H4",{class:!0});var L=I(a);l=ot(L,o),L.forEach(C),c=j(S),h=T(S,"H5",{class:!0});var M=I(h);u=T(M,"SPAN",{});var E=I(u);d=ot(E,f),E.forEach(C),M.forEach(C),m=j(S),p.l(S),S.forEach(C),this.h()},h(){Nt(s.src,r=`/assets/wheel/${i[0]}.png`)||x(s,"src",r),x(s,"alt",""),x(s,"class","svelte-icnk74"),x(e,"class","icon-wrapper svelte-icnk74"),x(a,"class","svelte-icnk74"),x(h,"class","svelte-icnk74"),x(t,"class","winnings-drawer-content svelte-icnk74")},m(v,S){G(v,t,S),A(t,e),A(e,s),A(t,n),A(t,a),A(a,l),A(t,c),A(t,h),A(h,u),A(u,d),A(t,m),w[g].m(t,null),_=!0},p(v,[S]){(!_||S&1&&!Nt(s.src,r=`/assets/wheel/${v[0]}.png`))&&x(s,"src",r),(!_||S&2)&&o!==(o=v[1]("clicker.Winnings.you_won")+"")&&mt(l,o),(!_||S&3)&&f!==(f=v[1](`clicker.Wheel.rewards.${v[0]}`)+"")&&mt(d,f);let k=g;g=b(v),g===k?w[g].p(v,S):(Mt(),V(w[k],1,1,()=>{w[k]=null}),Pt(),p=w[g],p?p.p(v,S):(p=w[g]=y[g](v),p.c()),B(p,1),p.m(t,null))},i(v){_||(B(p),_=!0)},o(v){V(p),_=!1},d(v){v&&C(t),w[g].d()}}}const fm="0x4AAAAAAA_hDCKUax2VetBe";function mm(i,t,e){let s,r;yt(i,De,f=>e(1,r=f));const n=xe();yt(i,n,f=>e(4,s=f));let a;$e(()=>{e(0,a=s.meta.pendingSpinId)});const o=async f=>{const{data:d,error:m}=await qa().acknowledgeWheelSpin(f.detail.token);if(m){u(),$r(!1);return}switch(window.Telegram.WebApp.HapticFeedback.impactOccurred("soft"),u(),$r(!1),d.opensGame){case"slot":h(d);break;case"flappy":h(d);break;case"dino":h(d);break;case"prize":l(d.winAmount);break;case"whale_free_spin":{c();break}}},l=f=>{n.open({id:ee.Winnings,bgDrawer:"bg-white",height:"h-auto",position:"bottom",meta:{amount:f}})},c=()=>{n.open({id:ee.Winnings,bgDrawer:"bg-white",height:"h-auto",position:"bottom",meta:{type:"whale_free_spin",amount:5}})},h=f=>{pi(!0),n.open({id:ee.Game,bgDrawer:"bg-surface-backdrop-token",height:"h-full",position:"bottom",meta:{isWon:f.predeterminedResult==="WON",gameId:f.opensGame}})},u=()=>{n.close()};return[a,r,n,o]}class pm extends Ft{constructor(t){super(),Rt(this,t,mm,dm,Tt,{})}}const{document:ti}=Za;function Ea(i){var m,g;let t,e,s,r,n,a,o,l,c=i[4].isGameLoading&&Ia();const h=[_m,gm],u=[];function f(p,_){return p[4].isLoading?0:1}s=f(i),r=u[s]=h[s](i),a=new Ih({});let d=((g=(m=i[1])==null?void 0:m.route)==null?void 0:g.id)!=="/qr"&&Ra(i);return{c(){t=P("div"),c&&c.c(),e=N(),r.c(),n=N(),lt(a.$$.fragment),o=N(),d&&d.c(),this.h()},l(p){t=T(p,"DIV",{class:!0});var _=I(t);c&&c.l(_),e=j(_),r.l(_),n=j(_),pt(a.$$.fragment,_),o=j(_),d&&d.l(_),_.forEach(C),this.h()},h(){x(t,"class","content-layout svelte-rwctxx"),Se(t,"without-padding",!i[2])},m(p,_){G(p,t,_),c&&c.m(t,null),A(t,e),u[s].m(t,null),A(t,n),ht(a,t,null),A(t,o),d&&d.m(t,null),l=!0},p(p,_){var w,b;p[4].isGameLoading?c?_&16&&B(c,1):(c=Ia(),c.c(),B(c,1),c.m(t,e)):c&&(Mt(),V(c,1,1,()=>{c=null}),Pt());let y=s;s=f(p),s===y?u[s].p(p,_):(Mt(),V(u[y],1,1,()=>{u[y]=null}),Pt(),r=u[s],r?r.p(p,_):(r=u[s]=h[s](p),r.c()),B(r,1),r.m(t,n)),((b=(w=p[1])==null?void 0:w.route)==null?void 0:b.id)!=="/qr"?d?(d.p(p,_),_&2&&B(d,1)):(d=Ra(p),d.c(),B(d,1),d.m(t,null)):d&&(Mt(),V(d,1,1,()=>{d=null}),Pt()),(!l||_&4)&&Se(t,"without-padding",!p[2])},i(p){l||(B(c),B(r),B(a.$$.fragment,p),B(d),l=!0)},o(p){V(c),V(r),V(a.$$.fragment,p),V(d),l=!1},d(p){p&&C(t),c&&c.d(),u[s].d(),ct(a),d&&d.d()}}}function Ia(i){let t,e;return t=new Ja({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function gm(i){let t,e,s,r,n=i[2]&&Ba();const a=i[11].default,o=Da(a,i,i[12],null);let l=i[0]&&Fa();return{c(){n&&n.c(),t=N(),o&&o.c(),e=N(),l&&l.c(),s=Wt()},l(c){n&&n.l(c),t=j(c),o&&o.l(c),e=j(c),l&&l.l(c),s=Wt()},m(c,h){n&&n.m(c,h),G(c,t,h),o&&o.m(c,h),G(c,e,h),l&&l.m(c,h),G(c,s,h),r=!0},p(c,h){c[2]?n?h&4&&B(n,1):(n=Ba(),n.c(),B(n,1),n.m(t.parentNode,t)):n&&(Mt(),V(n,1,1,()=>{n=null}),Pt()),o&&o.p&&(!r||h&4096)&&Va(o,a,c,c[12],r?Ha(a,c[12],h,null):Ga(c[12]),null),c[0]?l?h&1&&B(l,1):(l=Fa(),l.c(),B(l,1),l.m(s.parentNode,s)):l&&(Mt(),V(l,1,1,()=>{l=null}),Pt())},i(c){r||(B(n),B(o,c),B(l),r=!0)},o(c){V(n),V(o,c),V(l),r=!1},d(c){c&&(C(t),C(e),C(s)),n&&n.d(c),o&&o.d(c),l&&l.d(c)}}}function _m(i){let t,e;return t=new Ja({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},p:dt,i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Ba(i){let t,e;return t=new _c({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Fa(i){let t,e;return t=new hc({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Ra(i){let t,e,s,r;return t=new jh({}),s=new Gh({props:{$$slots:{default:[Lm]},$$scope:{ctx:i}}}),{c(){lt(t.$$.fragment),e=N(),lt(s.$$.fragment)},l(n){pt(t.$$.fragment,n),e=j(n),pt(s.$$.fragment,n)},m(n,a){ht(t,n,a),G(n,e,a),ht(s,n,a),r=!0},p(n,a){const o={};a&4128&&(o.$$scope={dirty:a,ctx:n}),s.$set(o)},i(n){r||(B(t.$$.fragment,n),B(s.$$.fragment,n),r=!0)},o(n){V(t.$$.fragment,n),V(s.$$.fragment,n),r=!1},d(n){n&&C(e),ct(t,n),ct(s,n)}}}function ym(i){let t,e;return t=new am({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function bm(i){let t,e;return t=new pm({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function wm(i){let t,e;return t=new Lc({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function xm(i){let t,e;return t=new sm({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function vm(i){let t,e;return t=new T0({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Cm(i){let t,e;return t=new Q0({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Am(i){let t,e;return t=new N0({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function km(i){let t,e;return t=new D0({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Sm(i){let t,e;return t=new S0({}),{c(){lt(t.$$.fragment)},l(s){pt(t.$$.fragment,s)},m(s,r){ht(t,s,r),e=!0},i(s){e||(B(t.$$.fragment,s),e=!0)},o(s){V(t.$$.fragment,s),e=!1},d(s){ct(t,s)}}}function Lm(i){let t,e,s,r;const n=[Sm,km,Am,Cm,vm,xm,wm,bm,ym],a=[];function o(l,c){return l[5].id===ee.Game?0:l[5].id===ee.Winnings?1:l[5].id===ee.Mission?2:l[5].id===ee.DailyBonus?3:l[5].id===ee.Empire?4:l[5].id===ee.Loss?5:l[5].id===ee.ActionConfirmation?6:l[5].id===ee.WheelConfirmation?7:l[5].id===ee.ExternalPlay?8:-1}return~(t=o(i))&&(e=a[t]=n[t](i)),{c(){e&&e.c(),s=Wt()},l(l){e&&e.l(l),s=Wt()},m(l,c){~t&&a[t].m(l,c),G(l,s,c),r=!0},p(l,c){let h=t;t=o(l),t!==h&&(e&&(Mt(),V(a[h],1,1,()=>{a[h]=null}),Pt()),~t?(e=a[t],e||(e=a[t]=n[t](l),e.c()),B(e,1),e.m(s.parentNode,s)):e=null)},i(l){r||(B(e),r=!0)},o(l){V(e),r=!1},d(l){l&&C(s),~t&&a[t].d(l)}}}function Mm(i){let t,e,s="",r,n,a=`window.dataLayer = window.dataLayer || [];
		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());

		gtag('config', 'G-0J9WZQDB8R');`,o,l,c,h=!i[3]&&Ea(i);return{c(){t=P("meta"),e=P("script"),e.innerHTML=s,n=P("script"),n.textContent=a,o=N(),h&&h.c(),l=Wt(),this.h()},l(u){const f=El("svelte-jc51fr",ti.head);t=T(f,"META",{name:!0,content:!0}),e=T(f,"SCRIPT",{src:!0,"data-svelte-h":!0}),ge(e)!=="svelte-72aaue"&&(e.innerHTML=s),n=T(f,"SCRIPT",{"data-svelte-h":!0}),ge(n)!=="svelte-1u24ev0"&&(n.textContent=a),f.forEach(C),o=j(u),h&&h.l(u),l=Wt(),this.h()},h(){x(t,"name","viewport"),x(t,"content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),e.async=!0,Nt(e.src,r="https://www.googletagmanager.com/gtag/js?id=G-0J9WZQDB8R")||x(e,"src",r)},m(u,f){A(ti.head,t),A(ti.head,e),A(ti.head,n),G(u,o,f),h&&h.m(u,f),G(u,l,f),c=!0},p(u,[f]){u[3]?h&&(Mt(),V(h,1,1,()=>{h=null}),Pt()):h?(h.p(u,f),f&8&&B(h,1)):(h=Ea(u),h.c(),B(h,1),h.m(l.parentNode,l))},i(u){c||(B(h),c=!0)},o(u){V(h),c=!1},d(u){u&&(C(o),C(l)),C(t),C(e),C(n),h&&h.d(u)}}}function Pm(i,t,e){let s,r,n,a,o,l,c,h,u,f;yt(i,Xa,b=>e(16,o=b)),yt(i,$i,b=>e(1,l=b)),yt(i,Dl,b=>e(3,h=b)),yt(i,Gl,b=>e(4,u=b));let{$$slots:d={},$$scope:m}=t;gh(),Yl.set({computePosition:zl,autoUpdate:Ul,offset:Ol,shift:Nl,flip:jl,arrow:Xl});const g=xe();yt(i,g,b=>e(5,f=b));const p=ja();yt(i,p,b=>e(14,n=b));const _=Na(),y=za();yt(i,y,b=>e(15,a=b));const w=lh();return yt(i,w,b=>e(10,c=b)),$e(async()=>{if(await Hl(),$i.subscribe(()=>{lm({type:Al.Page,identifier:window.location.href})}),window.navigator.userAgent==="WoW APK"&&(document.documentElement.style.setProperty("--tg-safe-area-inset-top","2rem"),document.documentElement.style.setProperty("--offset-bottom-nav","2rem")),sh(g,_),ih(),document.addEventListener("contextmenu",b=>b.preventDefault()),!!o){if(!(o!=null&&o.isOnboardingCompleted))return Ts("/onboarding");if(a.amount>0&&a.streak>=1)g.open({id:ee.DailyBonus,bgDrawer:"bg-white",height:"h-auto",position:"bottom",meta:{amount:a.amount,streak:a.streak}});else if(!window.isExternalLoad){const b=window.navigator.userAgent.toLocaleLowerCase().includes("android"),v=b?Zr.PlayInApk:Zr.PlayOnWeb;n!=null&&n.regularTasks[v]||g.open({id:ee.ExternalPlay,bgDrawer:"bg-white",height:"h-auto",position:"bottom",meta:{isAndroid:b}})}}}),i.$$set=b=>{"$$scope"in b&&e(12,m=b.$$scope)},i.$$.update=()=>{var b,v;i.$$.dirty&1026&&e(0,s=!c.isWheelShown&&((b=l==null?void 0:l.route)==null?void 0:b.id)&&!["/connect-wallet","/approved","/error","/qr","/error/banned","/onboarding","/golden-invite","/about","/games/mines","/games/tokenflip","/games/duck","/games/whale-cup","/login","/privacy","/claim"].includes(l.route.id)),i.$$.dirty&3&&e(2,r=l.route.id==="/claim"||s&&((v=l==null?void 0:l.route)==null?void 0:v.id)&&!l.route.id.includes("/earn"))},[s,l,r,h,u,f,g,p,y,w,c,d,m]}class u2 extends Ft{constructor(t){super(),Rt(this,t,Pm,Mm,Tt,{})}}export{kt as $,No as A,le as B,ie as C,Ht as D,J as E,Me as F,_i as G,Gn as H,Ie as I,Yu as J,sd as K,Yt as L,vt as M,Xt as N,wd as O,se as P,Wn as Q,lr as R,Wd as S,Ve as T,rr as U,Su as V,Bi as W,Ut as X,fo as Y,jo as Z,At as _,xt as a,kd as a0,Xd as a1,df as a2,mf as a3,bf as a4,xf as a5,vf as a6,hs as a7,ds as a8,d1 as a9,ya as aa,ol as ab,Kn as ac,wr as ad,y1 as ae,qe as af,Vt as ag,tu as ah,br as ai,ba as aj,hl as ak,u2 as al,js as b,Fs as c,si as d,re as e,Zn as f,Vd as g,Tr as h,zo as i,Co as j,Vo as k,_a as l,uf as m,Sn as n,ff as o,_f as p,$o as q,du as r,wf as s,Er as t,Bo as u,Jc as v,Ot as w,Af as x,Be as y,co as z};
