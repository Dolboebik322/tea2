const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Cap3DWrapper-BO9bI_Z_.js","assets/Cap3DWrapper.css"])))=>i.map(i=>d[i]);
function _mergeNamespaces(_,d){for(var v=0;v<d.length;v++){const A=d[v];if(typeof A!="string"&&!Array.isArray(A)){for(const C in A)if(C!=="default"&&!(C in _)){const w=Object.getOwnPropertyDescriptor(A,C);w&&Object.defineProperty(_,C,w.get?w:{enumerable:!0,get:()=>A[C]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))A(C);new MutationObserver(C=>{for(const w of C)if(w.type==="childList")for(const T of w.addedNodes)T.tagName==="LINK"&&T.rel==="modulepreload"&&A(T)}).observe(document,{childList:!0,subtree:!0});function v(C){const w={};return C.integrity&&(w.integrity=C.integrity),C.referrerPolicy&&(w.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?w.credentials="include":C.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function A(C){if(C.ep)return;C.ep=!0;const w=v(C);fetch(C.href,w)}})();const scriptRel="modulepreload",assetsURL=function(_){return"/"+_},seen={},__vitePreload=function(d,v,A){let C=Promise.resolve();if(v&&v.length>0){let G=function(I){return Promise.all(I.map(z=>Promise.resolve(z).then(H=>({status:"fulfilled",value:H}),H=>({status:"rejected",reason:H}))))};document.getElementsByTagName("link");const T=document.querySelector("meta[property=csp-nonce]"),R=T?.nonce||T?.getAttribute("nonce");C=G(v.map(I=>{if(I=assetsURL(I),I in seen)return;seen[I]=!0;const z=I.endsWith(".css"),H=z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${I}"]${H}`))return;const Y=document.createElement("link");if(Y.rel=z?"stylesheet":scriptRel,z||(Y.as="script"),Y.crossOrigin="",Y.href=I,R&&Y.setAttribute("nonce",R),document.head.appendChild(Y),z)return new Promise((ee,ie)=>{Y.addEventListener("load",ee),Y.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${I}`)))})}))}function w(T){const R=new Event("vite:preloadError",{cancelable:!0});if(R.payload=T,window.dispatchEvent(R),!R.defaultPrevented)throw T}return C.then(T=>{for(const R of T||[])R.status==="rejected"&&w(R.reason);return d().catch(w)})};var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getAugmentedNamespace(_){if(Object.prototype.hasOwnProperty.call(_,"__esModule"))return _;var d=_.default;if(typeof d=="function"){var v=function A(){var C=!1;try{C=this instanceof A}catch{}return C?Reflect.construct(d,arguments,this.constructor):d.apply(this,arguments)};v.prototype=d.prototype}else v={};return Object.defineProperty(v,"__esModule",{value:!0}),Object.keys(_).forEach(function(A){var C=Object.getOwnPropertyDescriptor(_,A);Object.defineProperty(v,A,C.get?C:{enumerable:!0,get:function(){return _[A]}})}),v}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function v(A,C,w){var T=null;if(w!==void 0&&(T=""+w),C.key!==void 0&&(T=""+C.key),"key"in C){w={};for(var R in C)R!=="key"&&(w[R]=C[R])}else w=C;return C=w.ref,{$$typeof:_,type:A,key:T,ref:C!==void 0?C:null,props:w}}return reactJsxRuntime_production.Fragment=d,reactJsxRuntime_production.jsx=v,reactJsxRuntime_production.jsxs=v,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),H=Symbol.iterator;function Y(We){return We===null||typeof We!="object"?null:(We=H&&We[H]||We["@@iterator"],typeof We=="function"?We:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,oe={};function se(We,nt,Qt){this.props=We,this.context=nt,this.refs=oe,this.updater=Qt||ee}se.prototype.isReactComponent={},se.prototype.setState=function(We,nt){if(typeof We!="object"&&typeof We!="function"&&We!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,We,nt,"setState")},se.prototype.forceUpdate=function(We){this.updater.enqueueForceUpdate(this,We,"forceUpdate")};function re(){}re.prototype=se.prototype;function fe(We,nt,Qt){this.props=We,this.context=nt,this.refs=oe,this.updater=Qt||ee}var ue=fe.prototype=new re;ue.constructor=fe,ie(ue,se.prototype),ue.isPureReactComponent=!0;var ge=Array.isArray,ye={H:null,A:null,T:null,S:null,V:null},be=Object.prototype.hasOwnProperty;function ve(We,nt,Qt,Wt,Bn,Lt){return Qt=Lt.ref,{$$typeof:_,type:We,key:nt,ref:Qt!==void 0?Qt:null,props:Lt}}function Me(We,nt){return ve(We.type,nt,void 0,void 0,void 0,We.props)}function we(We){return typeof We=="object"&&We!==null&&We.$$typeof===_}function Be(We){var nt={"=":"=0",":":"=2"};return"$"+We.replace(/[=:]/g,function(Qt){return nt[Qt]})}var De=/\/+/g;function Fe(We,nt){return typeof We=="object"&&We!==null&&We.key!=null?Be(""+We.key):nt.toString(36)}function Oe(){}function Ge(We){switch(We.status){case"fulfilled":return We.value;case"rejected":throw We.reason;default:switch(typeof We.status=="string"?We.then(Oe,Oe):(We.status="pending",We.then(function(nt){We.status==="pending"&&(We.status="fulfilled",We.value=nt)},function(nt){We.status==="pending"&&(We.status="rejected",We.reason=nt)})),We.status){case"fulfilled":return We.value;case"rejected":throw We.reason}}throw We}function ze(We,nt,Qt,Wt,Bn){var Lt=typeof We;(Lt==="undefined"||Lt==="boolean")&&(We=null);var Mn=!1;if(We===null)Mn=!0;else switch(Lt){case"bigint":case"string":case"number":Mn=!0;break;case"object":switch(We.$$typeof){case _:case d:Mn=!0;break;case z:return Mn=We._init,ze(Mn(We._payload),nt,Qt,Wt,Bn)}}if(Mn)return Bn=Bn(We),Mn=Wt===""?"."+Fe(We,0):Wt,ge(Bn)?(Qt="",Mn!=null&&(Qt=Mn.replace(De,"$&/")+"/"),ze(Bn,nt,Qt,"",function(Zn){return Zn})):Bn!=null&&(we(Bn)&&(Bn=Me(Bn,Qt+(Bn.key==null||We&&We.key===Bn.key?"":(""+Bn.key).replace(De,"$&/")+"/")+Mn)),nt.push(Bn)),1;Mn=0;var cr=Wt===""?".":Wt+":";if(ge(We))for(var In=0;In<We.length;In++)Wt=We[In],Lt=cr+Fe(Wt,In),Mn+=ze(Wt,nt,Qt,Lt,Bn);else if(In=Y(We),typeof In=="function")for(We=In.call(We),In=0;!(Wt=We.next()).done;)Wt=Wt.value,Lt=cr+Fe(Wt,In++),Mn+=ze(Wt,nt,Qt,Lt,Bn);else if(Lt==="object"){if(typeof We.then=="function")return ze(Ge(We),nt,Qt,Wt,Bn);throw nt=String(We),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(We).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.")}return Mn}function je(We,nt,Qt){if(We==null)return We;var Wt=[],Bn=0;return ze(We,Wt,"","",function(Lt){return nt.call(Qt,Lt,Bn++)}),Wt}function He(We){if(We._status===-1){var nt=We._result;nt=nt(),nt.then(function(Qt){(We._status===0||We._status===-1)&&(We._status=1,We._result=Qt)},function(Qt){(We._status===0||We._status===-1)&&(We._status=2,We._result=Qt)}),We._status===-1&&(We._status=0,We._result=nt)}if(We._status===1)return We._result.default;throw We._result}var Xe=typeof reportError=="function"?reportError:function(We){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var nt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof We=="object"&&We!==null&&typeof We.message=="string"?String(We.message):String(We),error:We});if(!window.dispatchEvent(nt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",We);return}console.error(We)};function $e(){}return react_production.Children={map:je,forEach:function(We,nt,Qt){je(We,function(){nt.apply(this,arguments)},Qt)},count:function(We){var nt=0;return je(We,function(){nt++}),nt},toArray:function(We){return je(We,function(nt){return nt})||[]},only:function(We){if(!we(We))throw Error("React.Children.only expected to receive a single React element child.");return We}},react_production.Component=se,react_production.Fragment=v,react_production.Profiler=C,react_production.PureComponent=fe,react_production.StrictMode=A,react_production.Suspense=G,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ye,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(We){return ye.H.useMemoCache(We)}},react_production.cache=function(We){return function(){return We.apply(null,arguments)}},react_production.cloneElement=function(We,nt,Qt){if(We==null)throw Error("The argument must be a React element, but you passed "+We+".");var Wt=ie({},We.props),Bn=We.key,Lt=void 0;if(nt!=null)for(Mn in nt.ref!==void 0&&(Lt=void 0),nt.key!==void 0&&(Bn=""+nt.key),nt)!be.call(nt,Mn)||Mn==="key"||Mn==="__self"||Mn==="__source"||Mn==="ref"&&nt.ref===void 0||(Wt[Mn]=nt[Mn]);var Mn=arguments.length-2;if(Mn===1)Wt.children=Qt;else if(1<Mn){for(var cr=Array(Mn),In=0;In<Mn;In++)cr[In]=arguments[In+2];Wt.children=cr}return ve(We.type,Bn,void 0,void 0,Lt,Wt)},react_production.createContext=function(We){return We={$$typeof:T,_currentValue:We,_currentValue2:We,_threadCount:0,Provider:null,Consumer:null},We.Provider=We,We.Consumer={$$typeof:w,_context:We},We},react_production.createElement=function(We,nt,Qt){var Wt,Bn={},Lt=null;if(nt!=null)for(Wt in nt.key!==void 0&&(Lt=""+nt.key),nt)be.call(nt,Wt)&&Wt!=="key"&&Wt!=="__self"&&Wt!=="__source"&&(Bn[Wt]=nt[Wt]);var Mn=arguments.length-2;if(Mn===1)Bn.children=Qt;else if(1<Mn){for(var cr=Array(Mn),In=0;In<Mn;In++)cr[In]=arguments[In+2];Bn.children=cr}if(We&&We.defaultProps)for(Wt in Mn=We.defaultProps,Mn)Bn[Wt]===void 0&&(Bn[Wt]=Mn[Wt]);return ve(We,Lt,void 0,void 0,null,Bn)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(We){return{$$typeof:R,render:We}},react_production.isValidElement=we,react_production.lazy=function(We){return{$$typeof:z,_payload:{_status:-1,_result:We},_init:He}},react_production.memo=function(We,nt){return{$$typeof:I,type:We,compare:nt===void 0?null:nt}},react_production.startTransition=function(We){var nt=ye.T,Qt={};ye.T=Qt;try{var Wt=We(),Bn=ye.S;Bn!==null&&Bn(Qt,Wt),typeof Wt=="object"&&Wt!==null&&typeof Wt.then=="function"&&Wt.then($e,Xe)}catch(Lt){Xe(Lt)}finally{ye.T=nt}},react_production.unstable_useCacheRefresh=function(){return ye.H.useCacheRefresh()},react_production.use=function(We){return ye.H.use(We)},react_production.useActionState=function(We,nt,Qt){return ye.H.useActionState(We,nt,Qt)},react_production.useCallback=function(We,nt){return ye.H.useCallback(We,nt)},react_production.useContext=function(We){return ye.H.useContext(We)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(We,nt){return ye.H.useDeferredValue(We,nt)},react_production.useEffect=function(We,nt,Qt){var Wt=ye.H;if(typeof Qt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Wt.useEffect(We,nt)},react_production.useId=function(){return ye.H.useId()},react_production.useImperativeHandle=function(We,nt,Qt){return ye.H.useImperativeHandle(We,nt,Qt)},react_production.useInsertionEffect=function(We,nt){return ye.H.useInsertionEffect(We,nt)},react_production.useLayoutEffect=function(We,nt){return ye.H.useLayoutEffect(We,nt)},react_production.useMemo=function(We,nt){return ye.H.useMemo(We,nt)},react_production.useOptimistic=function(We,nt){return ye.H.useOptimistic(We,nt)},react_production.useReducer=function(We,nt,Qt){return ye.H.useReducer(We,nt,Qt)},react_production.useRef=function(We){return ye.H.useRef(We)},react_production.useState=function(We){return ye.H.useState(We)},react_production.useSyncExternalStore=function(We,nt,Qt){return ye.H.useSyncExternalStore(We,nt,Qt)},react_production.useTransition=function(){return ye.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={exports:{}},reactDomClient_production={},scheduler$1={exports:{}},scheduler_production$1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production$1;function requireScheduler_production$1(){return hasRequiredScheduler_production$1||(hasRequiredScheduler_production$1=1,function(_){function d(je,He){var Xe=je.length;je.push(He);e:for(;0<Xe;){var $e=Xe-1>>>1,We=je[$e];if(0<C(We,He))je[$e]=He,je[Xe]=We,Xe=$e;else break e}}function v(je){return je.length===0?null:je[0]}function A(je){if(je.length===0)return null;var He=je[0],Xe=je.pop();if(Xe!==He){je[0]=Xe;e:for(var $e=0,We=je.length,nt=We>>>1;$e<nt;){var Qt=2*($e+1)-1,Wt=je[Qt],Bn=Qt+1,Lt=je[Bn];if(0>C(Wt,Xe))Bn<We&&0>C(Lt,Wt)?(je[$e]=Lt,je[Bn]=Xe,$e=Bn):(je[$e]=Wt,je[Qt]=Xe,$e=Qt);else if(Bn<We&&0>C(Lt,Xe))je[$e]=Lt,je[Bn]=Xe,$e=Bn;else break e}}return He}function C(je,He){var Xe=je.sortIndex-He.sortIndex;return Xe!==0?Xe:je.id-He.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var w=performance;_.unstable_now=function(){return w.now()}}else{var T=Date,R=T.now();_.unstable_now=function(){return T.now()-R}}var G=[],I=[],z=1,H=null,Y=3,ee=!1,ie=!1,oe=!1,se=!1,re=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function ge(je){for(var He=v(I);He!==null;){if(He.callback===null)A(I);else if(He.startTime<=je)A(I),He.sortIndex=He.expirationTime,d(G,He);else break;He=v(I)}}function ye(je){if(oe=!1,ge(je),!ie)if(v(G)!==null)ie=!0,be||(be=!0,Fe());else{var He=v(I);He!==null&&ze(ye,He.startTime-je)}}var be=!1,ve=-1,Me=5,we=-1;function Be(){return se?!0:!(_.unstable_now()-we<Me)}function De(){if(se=!1,be){var je=_.unstable_now();we=je;var He=!0;try{e:{ie=!1,oe&&(oe=!1,fe(ve),ve=-1),ee=!0;var Xe=Y;try{t:{for(ge(je),H=v(G);H!==null&&!(H.expirationTime>je&&Be());){var $e=H.callback;if(typeof $e=="function"){H.callback=null,Y=H.priorityLevel;var We=$e(H.expirationTime<=je);if(je=_.unstable_now(),typeof We=="function"){H.callback=We,ge(je),He=!0;break t}H===v(G)&&A(G),ge(je)}else A(G);H=v(G)}if(H!==null)He=!0;else{var nt=v(I);nt!==null&&ze(ye,nt.startTime-je),He=!1}}break e}finally{H=null,Y=Xe,ee=!1}He=void 0}}finally{He?Fe():be=!1}}}var Fe;if(typeof ue=="function")Fe=function(){ue(De)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Ge=Oe.port2;Oe.port1.onmessage=De,Fe=function(){Ge.postMessage(null)}}else Fe=function(){re(De,0)};function ze(je,He){ve=re(function(){je(_.unstable_now())},He)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(je){je.callback=null},_.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<je?Math.floor(1e3/je):5},_.unstable_getCurrentPriorityLevel=function(){return Y},_.unstable_next=function(je){switch(Y){case 1:case 2:case 3:var He=3;break;default:He=Y}var Xe=Y;Y=He;try{return je()}finally{Y=Xe}},_.unstable_requestPaint=function(){se=!0},_.unstable_runWithPriority=function(je,He){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var Xe=Y;Y=je;try{return He()}finally{Y=Xe}},_.unstable_scheduleCallback=function(je,He,Xe){var $e=_.unstable_now();switch(typeof Xe=="object"&&Xe!==null?(Xe=Xe.delay,Xe=typeof Xe=="number"&&0<Xe?$e+Xe:$e):Xe=$e,je){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=Xe+We,je={id:z++,callback:He,priorityLevel:je,startTime:Xe,expirationTime:We,sortIndex:-1},Xe>$e?(je.sortIndex=Xe,d(I,je),v(G)===null&&je===v(I)&&(oe?(fe(ve),ve=-1):oe=!0,ze(ye,Xe-$e))):(je.sortIndex=We,d(G,je),ie||ee||(ie=!0,be||(be=!0,Fe()))),je},_.unstable_shouldYield=Be,_.unstable_wrapCallback=function(je){var He=Y;return function(){var Xe=Y;Y=He;try{return je.apply(this,arguments)}finally{Y=Xe}}}}(scheduler_production$1)),scheduler_production$1}var hasRequiredScheduler$1;function requireScheduler$1(){return hasRequiredScheduler$1||(hasRequiredScheduler$1=1,scheduler$1.exports=requireScheduler_production$1()),scheduler$1.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function d(G){var I="https://react.dev/errors/"+G;if(1<arguments.length){I+="?args[]="+encodeURIComponent(arguments[1]);for(var z=2;z<arguments.length;z++)I+="&args[]="+encodeURIComponent(arguments[z])}return"Minified React error #"+G+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function v(){}var A={d:{f:v,r:function(){throw Error(d(522))},D:v,C:v,L:v,m:v,X:v,S:v,M:v},p:0,findDOMNode:null},C=Symbol.for("react.portal");function w(G,I,z){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:H==null?null:""+H,children:G,containerInfo:I,implementation:z}}var T=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function R(G,I){if(G==="font")return"";if(typeof I=="string")return I==="use-credentials"?I:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,reactDom_production.createPortal=function(G,I){var z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I||I.nodeType!==1&&I.nodeType!==9&&I.nodeType!==11)throw Error(d(299));return w(G,I,null,z)},reactDom_production.flushSync=function(G){var I=T.T,z=A.p;try{if(T.T=null,A.p=2,G)return G()}finally{T.T=I,A.p=z,A.d.f()}},reactDom_production.preconnect=function(G,I){typeof G=="string"&&(I?(I=I.crossOrigin,I=typeof I=="string"?I==="use-credentials"?I:"":void 0):I=null,A.d.C(G,I))},reactDom_production.prefetchDNS=function(G){typeof G=="string"&&A.d.D(G)},reactDom_production.preinit=function(G,I){if(typeof G=="string"&&I&&typeof I.as=="string"){var z=I.as,H=R(z,I.crossOrigin),Y=typeof I.integrity=="string"?I.integrity:void 0,ee=typeof I.fetchPriority=="string"?I.fetchPriority:void 0;z==="style"?A.d.S(G,typeof I.precedence=="string"?I.precedence:void 0,{crossOrigin:H,integrity:Y,fetchPriority:ee}):z==="script"&&A.d.X(G,{crossOrigin:H,integrity:Y,fetchPriority:ee,nonce:typeof I.nonce=="string"?I.nonce:void 0})}},reactDom_production.preinitModule=function(G,I){if(typeof G=="string")if(typeof I=="object"&&I!==null){if(I.as==null||I.as==="script"){var z=R(I.as,I.crossOrigin);A.d.M(G,{crossOrigin:z,integrity:typeof I.integrity=="string"?I.integrity:void 0,nonce:typeof I.nonce=="string"?I.nonce:void 0})}}else I==null&&A.d.M(G)},reactDom_production.preload=function(G,I){if(typeof G=="string"&&typeof I=="object"&&I!==null&&typeof I.as=="string"){var z=I.as,H=R(z,I.crossOrigin);A.d.L(G,z,{crossOrigin:H,integrity:typeof I.integrity=="string"?I.integrity:void 0,nonce:typeof I.nonce=="string"?I.nonce:void 0,type:typeof I.type=="string"?I.type:void 0,fetchPriority:typeof I.fetchPriority=="string"?I.fetchPriority:void 0,referrerPolicy:typeof I.referrerPolicy=="string"?I.referrerPolicy:void 0,imageSrcSet:typeof I.imageSrcSet=="string"?I.imageSrcSet:void 0,imageSizes:typeof I.imageSizes=="string"?I.imageSizes:void 0,media:typeof I.media=="string"?I.media:void 0})}},reactDom_production.preloadModule=function(G,I){if(typeof G=="string")if(I){var z=R(I.as,I.crossOrigin);A.d.m(G,{as:typeof I.as=="string"&&I.as!=="script"?I.as:void 0,crossOrigin:z,integrity:typeof I.integrity=="string"?I.integrity:void 0})}else A.d.m(G)},reactDom_production.requestFormReset=function(G){A.d.r(G)},reactDom_production.unstable_batchedUpdates=function(G,I){return G(I)},reactDom_production.useFormState=function(G,I,z){return T.H.useFormState(G,I,z)},reactDom_production.useFormStatus=function(){return T.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(d){console.error(d)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler$1(),d=requireReact(),v=requireReactDom();function A(Z){var te="https://react.dev/errors/"+Z;if(1<arguments.length){te+="?args[]="+encodeURIComponent(arguments[1]);for(var de=2;de<arguments.length;de++)te+="&args[]="+encodeURIComponent(arguments[de])}return"Minified React error #"+Z+"; visit "+te+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function C(Z){return!(!Z||Z.nodeType!==1&&Z.nodeType!==9&&Z.nodeType!==11)}function w(Z){var te=Z,de=Z;if(Z.alternate)for(;te.return;)te=te.return;else{Z=te;do te=Z,(te.flags&4098)!==0&&(de=te.return),Z=te.return;while(Z)}return te.tag===3?de:null}function T(Z){if(Z.tag===13){var te=Z.memoizedState;if(te===null&&(Z=Z.alternate,Z!==null&&(te=Z.memoizedState)),te!==null)return te.dehydrated}return null}function R(Z){if(w(Z)!==Z)throw Error(A(188))}function G(Z){var te=Z.alternate;if(!te){if(te=w(Z),te===null)throw Error(A(188));return te!==Z?null:Z}for(var de=Z,ke=te;;){var Ue=de.return;if(Ue===null)break;var Ke=Ue.alternate;if(Ke===null){if(ke=Ue.return,ke!==null){de=ke;continue}break}if(Ue.child===Ke.child){for(Ke=Ue.child;Ke;){if(Ke===de)return R(Ue),Z;if(Ke===ke)return R(Ue),te;Ke=Ke.sibling}throw Error(A(188))}if(de.return!==ke.return)de=Ue,ke=Ke;else{for(var pn=!1,Vn=Ue.child;Vn;){if(Vn===de){pn=!0,de=Ue,ke=Ke;break}if(Vn===ke){pn=!0,ke=Ue,de=Ke;break}Vn=Vn.sibling}if(!pn){for(Vn=Ke.child;Vn;){if(Vn===de){pn=!0,de=Ke,ke=Ue;break}if(Vn===ke){pn=!0,ke=Ke,de=Ue;break}Vn=Vn.sibling}if(!pn)throw Error(A(189))}}if(de.alternate!==ke)throw Error(A(190))}if(de.tag!==3)throw Error(A(188));return de.stateNode.current===de?Z:te}function I(Z){var te=Z.tag;if(te===5||te===26||te===27||te===6)return Z;for(Z=Z.child;Z!==null;){if(te=I(Z),te!==null)return te;Z=Z.sibling}return null}var z=Object.assign,H=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),fe=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),Be=Symbol.for("react.memo_cache_sentinel"),De=Symbol.iterator;function Fe(Z){return Z===null||typeof Z!="object"?null:(Z=De&&Z[De]||Z["@@iterator"],typeof Z=="function"?Z:null)}var Oe=Symbol.for("react.client.reference");function Ge(Z){if(Z==null)return null;if(typeof Z=="function")return Z.$$typeof===Oe?null:Z.displayName||Z.name||null;if(typeof Z=="string")return Z;switch(Z){case ie:return"Fragment";case se:return"Profiler";case oe:return"StrictMode";case ye:return"Suspense";case be:return"SuspenseList";case we:return"Activity"}if(typeof Z=="object")switch(Z.$$typeof){case ee:return"Portal";case ue:return(Z.displayName||"Context")+".Provider";case fe:return(Z._context.displayName||"Context")+".Consumer";case ge:var te=Z.render;return Z=Z.displayName,Z||(Z=te.displayName||te.name||"",Z=Z!==""?"ForwardRef("+Z+")":"ForwardRef"),Z;case ve:return te=Z.displayName||null,te!==null?te:Ge(Z.type)||"Memo";case Me:te=Z._payload,Z=Z._init;try{return Ge(Z(te))}catch{}}return null}var ze=Array.isArray,je=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,He=v.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Xe={pending:!1,data:null,method:null,action:null},$e=[],We=-1;function nt(Z){return{current:Z}}function Qt(Z){0>We||(Z.current=$e[We],$e[We]=null,We--)}function Wt(Z,te){We++,$e[We]=Z.current,Z.current=te}var Bn=nt(null),Lt=nt(null),Mn=nt(null),cr=nt(null);function In(Z,te){switch(Wt(Mn,te),Wt(Lt,Z),Wt(Bn,null),te.nodeType){case 9:case 11:Z=(Z=te.documentElement)&&(Z=Z.namespaceURI)?dm(Z):0;break;default:if(Z=te.tagName,te=te.namespaceURI)te=dm(te),Z=fm(te,Z);else switch(Z){case"svg":Z=1;break;case"math":Z=2;break;default:Z=0}}Qt(Bn),Wt(Bn,Z)}function Zn(){Qt(Bn),Qt(Lt),Qt(Mn)}function $n(Z){Z.memoizedState!==null&&Wt(cr,Z);var te=Bn.current,de=fm(te,Z.type);te!==de&&(Wt(Lt,Z),Wt(Bn,de))}function Rn(Z){Lt.current===Z&&(Qt(Bn),Qt(Lt)),cr.current===Z&&(Qt(cr),oh._currentValue=Xe)}var Dn=Object.prototype.hasOwnProperty,Gt=_.unstable_scheduleCallback,Jn=_.unstable_cancelCallback,Nn=_.unstable_shouldYield,Xn=_.unstable_requestPaint,jn=_.unstable_now,Un=_.unstable_getCurrentPriorityLevel,bn=_.unstable_ImmediatePriority,Kn=_.unstable_UserBlockingPriority,Qn=_.unstable_NormalPriority,pr=_.unstable_LowPriority,fn=_.unstable_IdlePriority,Mt=_.log,yn=_.unstable_setDisableYieldValue,kn=null,nr=null;function dr(Z){if(typeof Mt=="function"&&yn(Z),nr&&typeof nr.setStrictMode=="function")try{nr.setStrictMode(kn,Z)}catch{}}var Qr=Math.clz32?Math.clz32:Hr,Wr=Math.log,Gr=Math.LN2;function Hr(Z){return Z>>>=0,Z===0?32:31-(Wr(Z)/Gr|0)|0}var Kr=256,ti=4194304;function Mi(Z){var te=Z&42;if(te!==0)return te;switch(Z&-Z){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Z&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return Z&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return Z}}function Ci(Z,te,de){var ke=Z.pendingLanes;if(ke===0)return 0;var Ue=0,Ke=Z.suspendedLanes,pn=Z.pingedLanes;Z=Z.warmLanes;var Vn=ke&134217727;return Vn!==0?(ke=Vn&~Ke,ke!==0?Ue=Mi(ke):(pn&=Vn,pn!==0?Ue=Mi(pn):de||(de=Vn&~Z,de!==0&&(Ue=Mi(de))))):(Vn=ke&~Ke,Vn!==0?Ue=Mi(Vn):pn!==0?Ue=Mi(pn):de||(de=ke&~Z,de!==0&&(Ue=Mi(de)))),Ue===0?0:te!==0&&te!==Ue&&(te&Ke)===0&&(Ke=Ue&-Ue,de=te&-te,Ke>=de||Ke===32&&(de&4194048)!==0)?te:Ue}function oi(Z,te){return(Z.pendingLanes&~(Z.suspendedLanes&~Z.pingedLanes)&te)===0}function Ii(Z,te){switch(Z){case 1:case 2:case 4:case 8:case 64:return te+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return te+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(){var Z=Kr;return Kr<<=1,(Kr&4194048)===0&&(Kr=256),Z}function Br(){var Z=ti;return ti<<=1,(ti&62914560)===0&&(ti=4194304),Z}function ui(Z){for(var te=[],de=0;31>de;de++)te.push(Z);return te}function vi(Z,te){Z.pendingLanes|=te,te!==268435456&&(Z.suspendedLanes=0,Z.pingedLanes=0,Z.warmLanes=0)}function qr(Z,te,de,ke,Ue,Ke){var pn=Z.pendingLanes;Z.pendingLanes=de,Z.suspendedLanes=0,Z.pingedLanes=0,Z.warmLanes=0,Z.expiredLanes&=de,Z.entangledLanes&=de,Z.errorRecoveryDisabledLanes&=de,Z.shellSuspendCounter=0;var Vn=Z.entanglements,Tr=Z.expirationTimes,ei=Z.hiddenUpdates;for(de=pn&~de;0<de;){var pi=31-Qr(de),yi=1<<pi;Vn[pi]=0,Tr[pi]=-1;var ri=ei[pi];if(ri!==null)for(ei[pi]=null,pi=0;pi<ri.length;pi++){var ai=ri[pi];ai!==null&&(ai.lane&=-536870913)}de&=~yi}ke!==0&&br(Z,ke,0),Ke!==0&&Ue===0&&Z.tag!==0&&(Z.suspendedLanes|=Ke&~(pn&~te))}function br(Z,te,de){Z.pendingLanes|=te,Z.suspendedLanes&=~te;var ke=31-Qr(te);Z.entangledLanes|=te,Z.entanglements[ke]=Z.entanglements[ke]|1073741824|de&4194090}function er(Z,te){var de=Z.entangledLanes|=te;for(Z=Z.entanglements;de;){var ke=31-Qr(de),Ue=1<<ke;Ue&te|Z[ke]&te&&(Z[ke]|=te),de&=~Ue}}function Gn(Z){switch(Z){case 2:Z=1;break;case 8:Z=4;break;case 32:Z=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Z=128;break;case 268435456:Z=134217728;break;default:Z=0}return Z}function Er(Z){return Z&=-Z,2<Z?8<Z?(Z&134217727)!==0?32:268435456:8:2}function mn(){var Z=He.p;return Z!==0?Z:(Z=window.event,Z===void 0?32:km(Z.type))}function tr(Z,te){var de=He.p;try{return He.p=Z,te()}finally{He.p=de}}var vr=Math.random().toString(36).slice(2),Ar="__reactFiber$"+vr,Tn="__reactProps$"+vr,tt="__reactContainer$"+vr,$t="__reactEvents$"+vr,dn="__reactListeners$"+vr,Qe="__reactHandles$"+vr,gn="__reactResources$"+vr,sr="__reactMarker$"+vr;function rr(Z){delete Z[Ar],delete Z[Tn],delete Z[$t],delete Z[dn],delete Z[Qe]}function it(Z){var te=Z[Ar];if(te)return te;for(var de=Z.parentNode;de;){if(te=de[tt]||de[Ar]){if(de=te.alternate,te.child!==null||de!==null&&de.child!==null)for(Z=gm(Z);Z!==null;){if(de=Z[Ar])return de;Z=gm(Z)}return te}Z=de,de=Z.parentNode}return null}function At(Z){if(Z=Z[Ar]||Z[tt]){var te=Z.tag;if(te===5||te===6||te===13||te===26||te===27||te===3)return Z}return null}function An(Z){var te=Z.tag;if(te===5||te===26||te===27||te===6)return Z.stateNode;throw Error(A(33))}function Ft(Z){var te=Z[gn];return te||(te=Z[gn]={hoistableStyles:new Map,hoistableScripts:new Map}),te}function Hn(Z){Z[sr]=!0}var wn=new Set,lr={};function rt(Z,te){ln(Z,te),ln(Z+"Capture",te)}function ln(Z,te){for(lr[Z]=te,Z=0;Z<te.length;Z++)wn.add(te[Z])}var Cn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zn={},Sn={};function yr(Z){return Dn.call(Sn,Z)?!0:Dn.call(zn,Z)?!1:Cn.test(Z)?Sn[Z]=!0:(zn[Z]=!0,!1)}function ur(Z,te,de){if(yr(te))if(de===null)Z.removeAttribute(te);else{switch(typeof de){case"undefined":case"function":case"symbol":Z.removeAttribute(te);return;case"boolean":var ke=te.toLowerCase().slice(0,5);if(ke!=="data-"&&ke!=="aria-"){Z.removeAttribute(te);return}}Z.setAttribute(te,""+de)}}function hr(Z,te,de){if(de===null)Z.removeAttribute(te);else{switch(typeof de){case"undefined":case"function":case"symbol":case"boolean":Z.removeAttribute(te);return}Z.setAttribute(te,""+de)}}function fr(Z,te,de,ke){if(ke===null)Z.removeAttribute(de);else{switch(typeof ke){case"undefined":case"function":case"symbol":case"boolean":Z.removeAttribute(de);return}Z.setAttributeNS(te,de,""+ke)}}var Sr,Lr;function Nr(Z){if(Sr===void 0)try{throw Error()}catch(de){var te=de.stack.trim().match(/\n( *(at )?)/);Sr=te&&te[1]||"",Lr=-1<de.stack.indexOf(`
    at`)?" (<anonymous>)":-1<de.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sr+Z+Lr}var xr=!1;function Cr(Z,te){if(!Z||xr)return"";xr=!0;var de=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var ke={DetermineComponentFrameRoot:function(){try{if(te){var yi=function(){throw Error()};if(Object.defineProperty(yi.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yi,[])}catch(ai){var ri=ai}Reflect.construct(Z,[],yi)}else{try{yi.call()}catch(ai){ri=ai}Z.call(yi.prototype)}}else{try{throw Error()}catch(ai){ri=ai}(yi=Z())&&typeof yi.catch=="function"&&yi.catch(function(){})}}catch(ai){if(ai&&ri&&typeof ai.stack=="string")return[ai.stack,ri.stack]}return[null,null]}};ke.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Ue=Object.getOwnPropertyDescriptor(ke.DetermineComponentFrameRoot,"name");Ue&&Ue.configurable&&Object.defineProperty(ke.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ke=ke.DetermineComponentFrameRoot(),pn=Ke[0],Vn=Ke[1];if(pn&&Vn){var Tr=pn.split(`
`),ei=Vn.split(`
`);for(Ue=ke=0;ke<Tr.length&&!Tr[ke].includes("DetermineComponentFrameRoot");)ke++;for(;Ue<ei.length&&!ei[Ue].includes("DetermineComponentFrameRoot");)Ue++;if(ke===Tr.length||Ue===ei.length)for(ke=Tr.length-1,Ue=ei.length-1;1<=ke&&0<=Ue&&Tr[ke]!==ei[Ue];)Ue--;for(;1<=ke&&0<=Ue;ke--,Ue--)if(Tr[ke]!==ei[Ue]){if(ke!==1||Ue!==1)do if(ke--,Ue--,0>Ue||Tr[ke]!==ei[Ue]){var pi=`
`+Tr[ke].replace(" at new "," at ");return Z.displayName&&pi.includes("<anonymous>")&&(pi=pi.replace("<anonymous>",Z.displayName)),pi}while(1<=ke&&0<=Ue);break}}}finally{xr=!1,Error.prepareStackTrace=de}return(de=Z?Z.displayName||Z.name:"")?Nr(de):""}function Or(Z){switch(Z.tag){case 26:case 27:case 5:return Nr(Z.type);case 16:return Nr("Lazy");case 13:return Nr("Suspense");case 19:return Nr("SuspenseList");case 0:case 15:return Cr(Z.type,!1);case 11:return Cr(Z.type.render,!1);case 1:return Cr(Z.type,!0);case 31:return Nr("Activity");default:return""}}function Ur(Z){try{var te="";do te+=Or(Z),Z=Z.return;while(Z);return te}catch(de){return`
Error generating stack: `+de.message+`
`+de.stack}}function Pr(Z){switch(typeof Z){case"bigint":case"boolean":case"number":case"string":case"undefined":return Z;case"object":return Z;default:return""}}function Vr(Z){var te=Z.type;return(Z=Z.nodeName)&&Z.toLowerCase()==="input"&&(te==="checkbox"||te==="radio")}function xi(Z){var te=Vr(Z)?"checked":"value",de=Object.getOwnPropertyDescriptor(Z.constructor.prototype,te),ke=""+Z[te];if(!Z.hasOwnProperty(te)&&typeof de<"u"&&typeof de.get=="function"&&typeof de.set=="function"){var Ue=de.get,Ke=de.set;return Object.defineProperty(Z,te,{configurable:!0,get:function(){return Ue.call(this)},set:function(pn){ke=""+pn,Ke.call(this,pn)}}),Object.defineProperty(Z,te,{enumerable:de.enumerable}),{getValue:function(){return ke},setValue:function(pn){ke=""+pn},stopTracking:function(){Z._valueTracker=null,delete Z[te]}}}}function Ai(Z){Z._valueTracker||(Z._valueTracker=xi(Z))}function Ti(Z){if(!Z)return!1;var te=Z._valueTracker;if(!te)return!0;var de=te.getValue(),ke="";return Z&&(ke=Vr(Z)?Z.checked?"true":"false":Z.value),Z=ke,Z!==de?(te.setValue(Z),!0):!1}function Si(Z){if(Z=Z||(typeof document<"u"?document:void 0),typeof Z>"u")return null;try{return Z.activeElement||Z.body}catch{return Z.body}}var ir=/[\n"\\]/g;function bi(Z){return Z.replace(ir,function(te){return"\\"+te.charCodeAt(0).toString(16)+" "})}function vn(Z,te,de,ke,Ue,Ke,pn,Vn){Z.name="",pn!=null&&typeof pn!="function"&&typeof pn!="symbol"&&typeof pn!="boolean"?Z.type=pn:Z.removeAttribute("type"),te!=null?pn==="number"?(te===0&&Z.value===""||Z.value!=te)&&(Z.value=""+Pr(te)):Z.value!==""+Pr(te)&&(Z.value=""+Pr(te)):pn!=="submit"&&pn!=="reset"||Z.removeAttribute("value"),te!=null?ar(Z,pn,Pr(te)):de!=null?ar(Z,pn,Pr(de)):ke!=null&&Z.removeAttribute("value"),Ue==null&&Ke!=null&&(Z.defaultChecked=!!Ke),Ue!=null&&(Z.checked=Ue&&typeof Ue!="function"&&typeof Ue!="symbol"),Vn!=null&&typeof Vn!="function"&&typeof Vn!="symbol"&&typeof Vn!="boolean"?Z.name=""+Pr(Vn):Z.removeAttribute("name")}function Ln(Z,te,de,ke,Ue,Ke,pn,Vn){if(Ke!=null&&typeof Ke!="function"&&typeof Ke!="symbol"&&typeof Ke!="boolean"&&(Z.type=Ke),te!=null||de!=null){if(!(Ke!=="submit"&&Ke!=="reset"||te!=null))return;de=de!=null?""+Pr(de):"",te=te!=null?""+Pr(te):de,Vn||te===Z.value||(Z.value=te),Z.defaultValue=te}ke=ke??Ue,ke=typeof ke!="function"&&typeof ke!="symbol"&&!!ke,Z.checked=Vn?Z.checked:!!ke,Z.defaultChecked=!!ke,pn!=null&&typeof pn!="function"&&typeof pn!="symbol"&&typeof pn!="boolean"&&(Z.name=pn)}function ar(Z,te,de){te==="number"&&Si(Z.ownerDocument)===Z||Z.defaultValue===""+de||(Z.defaultValue=""+de)}function Mr(Z,te,de,ke){if(Z=Z.options,te){te={};for(var Ue=0;Ue<de.length;Ue++)te["$"+de[Ue]]=!0;for(de=0;de<Z.length;de++)Ue=te.hasOwnProperty("$"+Z[de].value),Z[de].selected!==Ue&&(Z[de].selected=Ue),Ue&&ke&&(Z[de].defaultSelected=!0)}else{for(de=""+Pr(de),te=null,Ue=0;Ue<Z.length;Ue++){if(Z[Ue].value===de){Z[Ue].selected=!0,ke&&(Z[Ue].defaultSelected=!0);return}te!==null||Z[Ue].disabled||(te=Z[Ue])}te!==null&&(te.selected=!0)}}function kr(Z,te,de){if(te!=null&&(te=""+Pr(te),te!==Z.value&&(Z.value=te),de==null)){Z.defaultValue!==te&&(Z.defaultValue=te);return}Z.defaultValue=de!=null?""+Pr(de):""}function gi(Z,te,de,ke){if(te==null){if(ke!=null){if(de!=null)throw Error(A(92));if(ze(ke)){if(1<ke.length)throw Error(A(93));ke=ke[0]}de=ke}de==null&&(de=""),te=de}de=Pr(te),Z.defaultValue=de,ke=Z.textContent,ke===de&&ke!==""&&ke!==null&&(Z.value=ke)}function di(Z,te){if(te){var de=Z.firstChild;if(de&&de===Z.lastChild&&de.nodeType===3){de.nodeValue=te;return}}Z.textContent=te}var _i=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hi(Z,te,de){var ke=te.indexOf("--")===0;de==null||typeof de=="boolean"||de===""?ke?Z.setProperty(te,""):te==="float"?Z.cssFloat="":Z[te]="":ke?Z.setProperty(te,de):typeof de!="number"||de===0||_i.has(te)?te==="float"?Z.cssFloat=de:Z[te]=(""+de).trim():Z[te]=de+"px"}function fi(Z,te,de){if(te!=null&&typeof te!="object")throw Error(A(62));if(Z=Z.style,de!=null){for(var ke in de)!de.hasOwnProperty(ke)||te!=null&&te.hasOwnProperty(ke)||(ke.indexOf("--")===0?Z.setProperty(ke,""):ke==="float"?Z.cssFloat="":Z[ke]="");for(var Ue in te)ke=te[Ue],te.hasOwnProperty(Ue)&&de[Ue]!==ke&&Hi(Z,Ue,ke)}else for(var Ke in te)te.hasOwnProperty(Ke)&&Hi(Z,Ke,te[Ke])}function qi(Z){if(Z.indexOf("-")===-1)return!1;switch(Z){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$i=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wi(Z){return $i.test(""+Z)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":Z}var Oi=null;function Gi(Z){return Z=Z.target||Z.srcElement||window,Z.correspondingUseElement&&(Z=Z.correspondingUseElement),Z.nodeType===3?Z.parentNode:Z}var wa=null,Fi=null;function Ba(Z){var te=At(Z);if(te&&(Z=te.stateNode)){var de=Z[Tn]||null;e:switch(Z=te.stateNode,te.type){case"input":if(vn(Z,de.value,de.defaultValue,de.defaultValue,de.checked,de.defaultChecked,de.type,de.name),te=de.name,de.type==="radio"&&te!=null){for(de=Z;de.parentNode;)de=de.parentNode;for(de=de.querySelectorAll('input[name="'+bi(""+te)+'"][type="radio"]'),te=0;te<de.length;te++){var ke=de[te];if(ke!==Z&&ke.form===Z.form){var Ue=ke[Tn]||null;if(!Ue)throw Error(A(90));vn(ke,Ue.value,Ue.defaultValue,Ue.defaultValue,Ue.checked,Ue.defaultChecked,Ue.type,Ue.name)}}for(te=0;te<de.length;te++)ke=de[te],ke.form===Z.form&&Ti(ke)}break e;case"textarea":kr(Z,de.value,de.defaultValue);break e;case"select":te=de.value,te!=null&&Mr(Z,!!de.multiple,te,!1)}}}var ta=!1;function Ua(Z,te,de){if(ta)return Z(te,de);ta=!0;try{var ke=Z(te);return ke}finally{if(ta=!1,(wa!==null||Fi!==null)&&(Wl(),wa&&(te=wa,Z=Fi,Fi=wa=null,Ba(te),Z)))for(te=0;te<Z.length;te++)Ba(Z[te])}}function Ss(Z,te){var de=Z.stateNode;if(de===null)return null;var ke=de[Tn]||null;if(ke===null)return null;de=ke[te];e:switch(te){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ke=!ke.disabled)||(Z=Z.type,ke=!(Z==="button"||Z==="input"||Z==="select"||Z==="textarea")),Z=!ke;break e;default:Z=!1}if(Z)return null;if(de&&typeof de!="function")throw Error(A(231,te,typeof de));return de}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=!1;if(Gs)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Cs=!1}var ws=null,No=null,po=null;function ji(){if(po)return po;var Z,te=No,de=te.length,ke,Ue="value"in ws?ws.value:ws.textContent,Ke=Ue.length;for(Z=0;Z<de&&te[Z]===Ue[Z];Z++);var pn=de-Z;for(ke=1;ke<=pn&&te[de-ke]===Ue[Ke-ke];ke++);return po=Ue.slice(Z,1<ke?1-ke:void 0)}function Da(Z){var te=Z.keyCode;return"charCode"in Z?(Z=Z.charCode,Z===0&&te===13&&(Z=13)):Z=te,Z===10&&(Z=13),32<=Z||Z===13?Z:0}function ha(){return!0}function ao(){return!1}function ms(Z){function te(de,ke,Ue,Ke,pn){this._reactName=de,this._targetInst=Ue,this.type=ke,this.nativeEvent=Ke,this.target=pn,this.currentTarget=null;for(var Vn in Z)Z.hasOwnProperty(Vn)&&(de=Z[Vn],this[Vn]=de?de(Ke):Ke[Vn]);return this.isDefaultPrevented=(Ke.defaultPrevented!=null?Ke.defaultPrevented:Ke.returnValue===!1)?ha:ao,this.isPropagationStopped=ao,this}return z(te.prototype,{preventDefault:function(){this.defaultPrevented=!0;var de=this.nativeEvent;de&&(de.preventDefault?de.preventDefault():typeof de.returnValue!="unknown"&&(de.returnValue=!1),this.isDefaultPrevented=ha)},stopPropagation:function(){var de=this.nativeEvent;de&&(de.stopPropagation?de.stopPropagation():typeof de.cancelBubble!="unknown"&&(de.cancelBubble=!0),this.isPropagationStopped=ha)},persist:function(){},isPersistent:ha}),te}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(Z){return Z.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=ms(ka),Po=z({},ka,{view:0,detail:0}),Xl=ms(Po),so,Bo,Eo,Do=z({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(Z){return Z.relatedTarget===void 0?Z.fromElement===Z.srcElement?Z.toElement:Z.fromElement:Z.relatedTarget},movementX:function(Z){return"movementX"in Z?Z.movementX:(Z!==Eo&&(Eo&&Z.type==="mousemove"?(so=Z.screenX-Eo.screenX,Bo=Z.screenY-Eo.screenY):Bo=so=0,Eo=Z),so)},movementY:function(Z){return"movementY"in Z?Z.movementY:Bo}}),Di=ms(Do),Xi=z({},Do,{dataTransfer:0}),On=ms(Xi),Fn=z({},Po,{relatedTarget:0}),mr=ms(Fn),Xr=z({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Ei=ms(Xr),ci=z({},ka,{clipboardData:function(Z){return"clipboardData"in Z?Z.clipboardData:window.clipboardData}}),Ri=ms(ci),Ui=z({},ka,{data:0}),ki=ms(Ui),Yi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ea={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fa(Z){var te=this.nativeEvent;return te.getModifierState?te.getModifierState(Z):(Z=qa[Z])?!!te[Z]:!1}function va(){return Fa}var $a=z({},Po,{key:function(Z){if(Z.key){var te=Yi[Z.key]||Z.key;if(te!=="Unidentified")return te}return Z.type==="keypress"?(Z=Da(Z),Z===13?"Enter":String.fromCharCode(Z)):Z.type==="keydown"||Z.type==="keyup"?Ea[Z.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(Z){return Z.type==="keypress"?Da(Z):0},keyCode:function(Z){return Z.type==="keydown"||Z.type==="keyup"?Z.keyCode:0},which:function(Z){return Z.type==="keypress"?Da(Z):Z.type==="keydown"||Z.type==="keyup"?Z.keyCode:0}}),Ts=ms($a),Za=z({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rs=ms(Za),us=z({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),Qs=ms(us),Ao=z({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),xs=ms(Ao),Ms=z({},Do,{deltaX:function(Z){return"deltaX"in Z?Z.deltaX:"wheelDeltaX"in Z?-Z.wheelDeltaX:0},deltaY:function(Z){return"deltaY"in Z?Z.deltaY:"wheelDeltaY"in Z?-Z.wheelDeltaY:"wheelDelta"in Z?-Z.wheelDelta:0},deltaZ:0,deltaMode:0}),Js=ms(Ms),es=z({},ka,{newState:0,oldState:0}),js=ms(es),zs=[9,13,27,32],Ls=Gs&&"CompositionEvent"in window,Le=null;Gs&&"documentMode"in document&&(Le=document.documentMode);var st=Gs&&"TextEvent"in window&&!Le,zt=Gs&&(!Ls||Le&&8<Le&&11>=Le),qn=" ",zr=!1;function ii(Z,te){switch(Z){case"keyup":return zs.indexOf(te.keyCode)!==-1;case"keydown":return te.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pi(Z){return Z=Z.detail,typeof Z=="object"&&"data"in Z?Z.data:null}var xa=!1;function da(Z,te){switch(Z){case"compositionend":return Pi(te);case"keypress":return te.which!==32?null:(zr=!0,qn);case"textInput":return Z=te.data,Z===qn&&zr?null:Z;default:return null}}function Aa(Z,te){if(xa)return Z==="compositionend"||!Ls&&ii(Z,te)?(Z=ji(),po=No=ws=null,xa=!1,Z):null;switch(Z){case"paste":return null;case"keypress":if(!(te.ctrlKey||te.altKey||te.metaKey)||te.ctrlKey&&te.altKey){if(te.char&&1<te.char.length)return te.char;if(te.which)return String.fromCharCode(te.which)}return null;case"compositionend":return zt&&te.locale!=="ko"?null:te.data;default:return null}}var ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ds(Z){var te=Z&&Z.nodeName&&Z.nodeName.toLowerCase();return te==="input"?!!ns[Z.type]:te==="textarea"}function ps(Z,te,de,ke){wa?Fi?Fi.push(ke):Fi=[ke]:wa=ke,te=ap(te,"onChange"),0<te.length&&(de=new Uo("onChange","change",null,de,ke),Z.push({event:de,listeners:te}))}var Is=null,oo=null;function hc(Z){sm(Z,0)}function pc(Z){var te=An(Z);if(Ti(te))return Z}function Eu(Z,te){if(Z==="change")return te}var Au=!1;if(Gs){var Su;if(Gs){var mc="oninput"in document;if(!mc){var ml=document.createElement("div");ml.setAttribute("oninput","return;"),mc=typeof ml.oninput=="function"}Su=mc}else Su=!1;Au=Su&&(!document.documentMode||9<document.documentMode)}function rs(){Is&&(Is.detachEvent("onpropertychange",Cu),oo=Is=null)}function Cu(Z){if(Z.propertyName==="value"&&pc(oo)){var te=[];ps(te,oo,Z,Gi(Z)),Ua(hc,te)}}function gl(Z,te,de){Z==="focusin"?(rs(),Is=te,oo=de,Is.attachEvent("onpropertychange",Cu)):Z==="focusout"&&rs()}function Vd(Z){if(Z==="selectionchange"||Z==="keyup"||Z==="keydown")return pc(oo)}function Gc(Z,te){if(Z==="click")return pc(te)}function Il(Z,te){if(Z==="input"||Z==="change")return pc(te)}function ud(Z,te){return Z===te&&(Z!==0||1/Z===1/te)||Z!==Z&&te!==te}var lo=typeof Object.is=="function"?Object.is:ud;function Vo(Z,te){if(lo(Z,te))return!0;if(typeof Z!="object"||Z===null||typeof te!="object"||te===null)return!1;var de=Object.keys(Z),ke=Object.keys(te);if(de.length!==ke.length)return!1;for(ke=0;ke<de.length;ke++){var Ue=de[ke];if(!Dn.call(te,Ue)||!lo(Z[Ue],te[Ue]))return!1}return!0}function mo(Z){for(;Z&&Z.firstChild;)Z=Z.firstChild;return Z}function dd(Z,te){var de=mo(Z);Z=0;for(var ke;de;){if(de.nodeType===3){if(ke=Z+de.textContent.length,Z<=te&&ke>=te)return{node:de,offset:te-Z};Z=ke}e:{for(;de;){if(de.nextSibling){de=de.nextSibling;break e}de=de.parentNode}de=void 0}de=mo(de)}}function hd(Z,te){return Z&&te?Z===te?!0:Z&&Z.nodeType===3?!1:te&&te.nodeType===3?hd(Z,te.parentNode):"contains"in Z?Z.contains(te):Z.compareDocumentPosition?!!(Z.compareDocumentPosition(te)&16):!1:!1}function wu(Z){Z=Z!=null&&Z.ownerDocument!=null&&Z.ownerDocument.defaultView!=null?Z.ownerDocument.defaultView:window;for(var te=Si(Z.document);te instanceof Z.HTMLIFrameElement;){try{var de=typeof te.contentWindow.location.href=="string"}catch{de=!1}if(de)Z=te.contentWindow;else break;te=Si(Z.document)}return te}function zc(Z){var te=Z&&Z.nodeName&&Z.nodeName.toLowerCase();return te&&(te==="input"&&(Z.type==="text"||Z.type==="search"||Z.type==="tel"||Z.type==="url"||Z.type==="password")||te==="textarea"||Z.contentEditable==="true")}var Hc=Gs&&"documentMode"in document&&11>=document.documentMode,vl=null,Tu=null,gc=null,Ql=!1;function vc(Z,te,de){var ke=de.window===de?de.document:de.nodeType===9?de:de.ownerDocument;Ql||vl==null||vl!==Si(ke)||(ke=vl,"selectionStart"in ke&&zc(ke)?ke={start:ke.selectionStart,end:ke.selectionEnd}:(ke=(ke.ownerDocument&&ke.ownerDocument.defaultView||window).getSelection(),ke={anchorNode:ke.anchorNode,anchorOffset:ke.anchorOffset,focusNode:ke.focusNode,focusOffset:ke.focusOffset}),gc&&Vo(gc,ke)||(gc=ke,ke=ap(Tu,"onSelect"),0<ke.length&&(te=new Uo("onSelect","select",null,te,de),Z.push({event:te,listeners:ke}),te.target=vl)))}function Hs(Z,te){var de={};return de[Z.toLowerCase()]=te.toLowerCase(),de["Webkit"+Z]="webkit"+te,de["Moz"+Z]="moz"+te,de}var kl={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},qc={},pd={};Gs&&(pd=document.createElement("div").style,"AnimationEvent"in window||(delete kl.animationend.animation,delete kl.animationiteration.animation,delete kl.animationstart.animation),"TransitionEvent"in window||delete kl.transitionend.transition);function jo(Z){if(qc[Z])return qc[Z];if(!kl[Z])return Z;var te=kl[Z],de;for(de in te)if(te.hasOwnProperty(de)&&de in pd)return qc[Z]=te[de];return Z}var co=jo("animationend"),md=jo("animationiteration"),go=jo("animationstart"),Gd=jo("transitionrun"),tl=jo("transitionstart"),Jl=jo("transitioncancel"),_l=jo("transitionend"),Ru=new Map,$c="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$c.push("scrollEnd");function ks(Z,te){Ru.set(Z,te),rt(te,[Z])}var Mu=new WeakMap;function qs(Z,te){if(typeof Z=="object"&&Z!==null){var de=Mu.get(Z);return de!==void 0?de:(te={value:Z,source:te,stack:Ur(te)},Mu.set(Z,te),te)}return{value:Z,source:te,stack:Ur(te)}}var Zs=[],Lo=0,Iu=0;function Wc(){for(var Z=Lo,te=Iu=Lo=0;te<Z;){var de=Zs[te];Zs[te++]=null;var ke=Zs[te];Zs[te++]=null;var Ue=Zs[te];Zs[te++]=null;var Ke=Zs[te];if(Zs[te++]=null,ke!==null&&Ue!==null){var pn=ke.pending;pn===null?Ue.next=Ue:(Ue.next=pn.next,pn.next=Ue),ke.pending=Ue}Ke!==0&&Yc(de,Ue,Ke)}}function Nl(Z,te,de,ke){Zs[Lo++]=Z,Zs[Lo++]=te,Zs[Lo++]=de,Zs[Lo++]=ke,Iu|=ke,Z.lanes|=ke,Z=Z.alternate,Z!==null&&(Z.lanes|=ke)}function Kc(Z,te,de,ke){return Nl(Z,te,de,ke),xc(Z)}function nl(Z,te){return Nl(Z,null,null,te),xc(Z)}function Yc(Z,te,de){Z.lanes|=de;var ke=Z.alternate;ke!==null&&(ke.lanes|=de);for(var Ue=!1,Ke=Z.return;Ke!==null;)Ke.childLanes|=de,ke=Ke.alternate,ke!==null&&(ke.childLanes|=de),Ke.tag===22&&(Z=Ke.stateNode,Z===null||Z._visibility&1||(Ue=!0)),Z=Ke,Ke=Ke.return;return Z.tag===3?(Ke=Z.stateNode,Ue&&te!==null&&(Ue=31-Qr(de),Z=Ke.hiddenUpdates,ke=Z[Ue],ke===null?Z[Ue]=[te]:ke.push(te),te.lane=de|536870912),Ke):null}function xc(Z){if(50<$l)throw $l=0,_u=null,Error(A(185));for(var te=Z.return;te!==null;)Z=te,te=Z.return;return Z.tag===3?Z.stateNode:null}var Pl={};function ku(Z,te,de,ke){this.tag=Z,this.key=de,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=te,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ke,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $s(Z,te,de,ke){return new ku(Z,te,de,ke)}function Xc(Z){return Z=Z.prototype,!(!Z||!Z.isReactComponent)}function gs(Z,te){var de=Z.alternate;return de===null?(de=$s(Z.tag,te,Z.key,Z.mode),de.elementType=Z.elementType,de.type=Z.type,de.stateNode=Z.stateNode,de.alternate=Z,Z.alternate=de):(de.pendingProps=te,de.type=Z.type,de.flags=0,de.subtreeFlags=0,de.deletions=null),de.flags=Z.flags&65011712,de.childLanes=Z.childLanes,de.lanes=Z.lanes,de.child=Z.child,de.memoizedProps=Z.memoizedProps,de.memoizedState=Z.memoizedState,de.updateQueue=Z.updateQueue,te=Z.dependencies,de.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext},de.sibling=Z.sibling,de.index=Z.index,de.ref=Z.ref,de.refCleanup=Z.refCleanup,de}function gd(Z,te){Z.flags&=65011714;var de=Z.alternate;return de===null?(Z.childLanes=0,Z.lanes=te,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=de.childLanes,Z.lanes=de.lanes,Z.child=de.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=de.memoizedProps,Z.memoizedState=de.memoizedState,Z.updateQueue=de.updateQueue,Z.type=de.type,te=de.dependencies,Z.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext}),Z}function Os(Z,te,de,ke,Ue,Ke){var pn=0;if(ke=Z,typeof Z=="function")Xc(Z)&&(pn=1);else if(typeof Z=="string")pn=fg(Z,de,Bn.current)?26:Z==="html"||Z==="head"||Z==="body"?27:5;else e:switch(Z){case we:return Z=$s(31,de,te,Ue),Z.elementType=we,Z.lanes=Ke,Z;case ie:return Bl(de.children,Ue,Ke,te);case oe:pn=8,Ue|=24;break;case se:return Z=$s(12,de,te,Ue|2),Z.elementType=se,Z.lanes=Ke,Z;case ye:return Z=$s(13,de,te,Ue),Z.elementType=ye,Z.lanes=Ke,Z;case be:return Z=$s(19,de,te,Ue),Z.elementType=be,Z.lanes=Ke,Z;default:if(typeof Z=="object"&&Z!==null)switch(Z.$$typeof){case re:case ue:pn=10;break e;case fe:pn=9;break e;case ge:pn=11;break e;case ve:pn=14;break e;case Me:pn=16,ke=null;break e}pn=29,de=Error(A(130,Z===null?"null":typeof Z,"")),ke=null}return te=$s(pn,de,te,Ue),te.elementType=Z,te.type=ke,te.lanes=Ke,te}function Bl(Z,te,de,ke){return Z=$s(7,Z,ke,te),Z.lanes=de,Z}function Qc(Z,te,de){return Z=$s(6,Z,null,te),Z.lanes=de,Z}function Nu(Z,te,de){return te=$s(4,Z.children!==null?Z.children:[],Z.key,te),te.lanes=de,te.stateNode={containerInfo:Z.containerInfo,pendingChildren:null,implementation:Z.implementation},te}var En=[],Yn=0,Ze=null,jt=0,xn=[],gr=0,Ir=null,Dr=1,$r="";function li(Z,te){En[Yn++]=jt,En[Yn++]=Ze,Ze=Z,jt=te}function Li(Z,te,de){xn[gr++]=Dr,xn[gr++]=$r,xn[gr++]=Ir,Ir=Z;var ke=Dr;Z=$r;var Ue=32-Qr(ke)-1;ke&=~(1<<Ue),de+=1;var Ke=32-Qr(te)+Ue;if(30<Ke){var pn=Ue-Ue%5;Ke=(ke&(1<<pn)-1).toString(32),ke>>=pn,Ue-=pn,Dr=1<<32-Qr(te)+Ue|de<<Ue|ke,$r=Ke+Z}else Dr=1<<Ke|de<<Ue|ke,$r=Z}function aa(Z){Z.return!==null&&(li(Z,1),Li(Z,1,0))}function pa(Z){for(;Z===Ze;)Ze=En[--Yn],En[Yn]=null,jt=En[--Yn],En[Yn]=null;for(;Z===Ir;)Ir=xn[--gr],xn[gr]=null,$r=xn[--gr],xn[gr]=null,Dr=xn[--gr],xn[gr]=null}var la=null,Ji=null,sa=!1,vs=null,vo=!1,Jc=Error(A(519));function So(Z){var te=Error(A(418,""));throw eu(qs(te,Z)),Jc}function Zc(Z){var te=Z.stateNode,de=Z.type,ke=Z.memoizedProps;switch(te[Ar]=Z,te[Tn]=ke,de){case"dialog":Na("cancel",te),Na("close",te);break;case"iframe":case"object":case"embed":Na("load",te);break;case"video":case"audio":for(de=0;de<th.length;de++)Na(th[de],te);break;case"source":Na("error",te);break;case"img":case"image":case"link":Na("error",te),Na("load",te);break;case"details":Na("toggle",te);break;case"input":Na("invalid",te),Ln(te,ke.value,ke.defaultValue,ke.checked,ke.defaultChecked,ke.type,ke.name,!0),Ai(te);break;case"select":Na("invalid",te);break;case"textarea":Na("invalid",te),gi(te,ke.value,ke.defaultValue,ke.children),Ai(te)}de=ke.children,typeof de!="string"&&typeof de!="number"&&typeof de!="bigint"||te.textContent===""+de||ke.suppressHydrationWarning===!0||um(te.textContent,de)?(ke.popover!=null&&(Na("beforetoggle",te),Na("toggle",te)),ke.onScroll!=null&&Na("scroll",te),ke.onScrollEnd!=null&&Na("scrollend",te),ke.onClick!=null&&(te.onclick=sp),te=!0):te=!1,te||So(Z)}function yc(Z){for(la=Z.return;la;)switch(la.tag){case 5:case 13:vo=!1;return;case 27:case 3:vo=!0;return;default:la=la.return}}function xl(Z){if(Z!==la)return!1;if(!sa)return yc(Z),sa=!0,!1;var te=Z.tag,de;if((de=te!==3&&te!==27)&&((de=te===5)&&(de=Z.type,de=!(de!=="form"&&de!=="button")||Fp(Z.type,Z.memoizedProps)),de=!de),de&&Ji&&So(Z),yc(Z),te===13){if(Z=Z.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(A(317));e:{for(Z=Z.nextSibling,te=0;Z;){if(Z.nodeType===8)if(de=Z.data,de==="/$"){if(te===0){Ji=fc(Z.nextSibling);break e}te--}else de!=="$"&&de!=="$!"&&de!=="$?"||te++;Z=Z.nextSibling}Ji=null}}else te===27?(te=Ji,id(Z.type)?(Z=zp,zp=null,Ji=Z):Ji=te):Ji=la?fc(Z.stateNode.nextSibling):null;return!0}function Pu(){Ji=la=null,sa=!1}function Va(){var Z=vs;return Z!==null&&(ra===null?ra=Z:ra.push.apply(ra,Z),vs=null),Z}function eu(Z){vs===null?vs=[Z]:vs.push(Z)}var wf=nt(null),bc=null,Zl=null;function Ec(Z,te,de){Wt(wf,te._currentValue),te._currentValue=de}function ec(Z){Z._currentValue=wf.current,Qt(wf)}function Tf(Z,te,de){for(;Z!==null;){var ke=Z.alternate;if((Z.childLanes&te)!==te?(Z.childLanes|=te,ke!==null&&(ke.childLanes|=te)):ke!==null&&(ke.childLanes&te)!==te&&(ke.childLanes|=te),Z===de)break;Z=Z.return}}function vd(Z,te,de,ke){var Ue=Z.child;for(Ue!==null&&(Ue.return=Z);Ue!==null;){var Ke=Ue.dependencies;if(Ke!==null){var pn=Ue.child;Ke=Ke.firstContext;e:for(;Ke!==null;){var Vn=Ke;Ke=Ue;for(var Tr=0;Tr<te.length;Tr++)if(Vn.context===te[Tr]){Ke.lanes|=de,Vn=Ke.alternate,Vn!==null&&(Vn.lanes|=de),Tf(Ke.return,de,Z),ke||(pn=null);break e}Ke=Vn.next}}else if(Ue.tag===18){if(pn=Ue.return,pn===null)throw Error(A(341));pn.lanes|=de,Ke=pn.alternate,Ke!==null&&(Ke.lanes|=de),Tf(pn,de,Z),pn=null}else pn=Ue.child;if(pn!==null)pn.return=Ue;else for(pn=Ue;pn!==null;){if(pn===Z){pn=null;break}if(Ue=pn.sibling,Ue!==null){Ue.return=pn.return,pn=Ue;break}pn=pn.return}Ue=pn}}function rl(Z,te,de,ke){Z=null;for(var Ue=te,Ke=!1;Ue!==null;){if(!Ke){if((Ue.flags&524288)!==0)Ke=!0;else if((Ue.flags&262144)!==0)break}if(Ue.tag===10){var pn=Ue.alternate;if(pn===null)throw Error(A(387));if(pn=pn.memoizedProps,pn!==null){var Vn=Ue.type;lo(Ue.pendingProps.value,pn.value)||(Z!==null?Z.push(Vn):Z=[Vn])}}else if(Ue===cr.current){if(pn=Ue.alternate,pn===null)throw Error(A(387));pn.memoizedState.memoizedState!==Ue.memoizedState.memoizedState&&(Z!==null?Z.push(oh):Z=[oh])}Ue=Ue.return}Z!==null&&vd(te,Z,de,ke),te.flags|=262144}function xd(Z){for(Z=Z.firstContext;Z!==null;){if(!lo(Z.context._currentValue,Z.memoizedValue))return!0;Z=Z.next}return!1}function Dl(Z){bc=Z,Zl=null,Z=Z.dependencies,Z!==null&&(Z.firstContext=null)}function ys(Z){return zd(bc,Z)}function yd(Z,te){return bc===null&&Dl(Z),zd(Z,te)}function zd(Z,te){var de=te._currentValue;if(te={context:te,memoizedValue:de,next:null},Zl===null){if(Z===null)throw Error(A(308));Zl=te,Z.dependencies={lanes:0,firstContext:te},Z.flags|=524288}else Zl=Zl.next=te;return de}var Rf=typeof AbortController<"u"?AbortController:function(){var Z=[],te=this.signal={aborted:!1,addEventListener:function(de,ke){Z.push(ke)}};this.abort=function(){te.aborted=!0,Z.forEach(function(de){return de()})}},yp=_.unstable_scheduleCallback,hh=_.unstable_NormalPriority,Fs={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hd(){return{controller:new Rf,data:new Map,refCount:0}}function Bu(Z){Z.refCount--,Z.refCount===0&&yp(hh,function(){Z.controller.abort()})}var Du=null,bd=0,ya=0,ju=null;function Go(Z,te){if(Du===null){var de=Du=[];bd=0,ya=Ip(),ju={status:"pending",value:void 0,then:function(ke){de.push(ke)}}}return bd++,te.then(qd,qd),te}function qd(){if(--bd===0&&Du!==null){ju!==null&&(ju.status="fulfilled");var Z=Du;Du=null,ya=0,ju=null;for(var te=0;te<Z.length;te++)(0,Z[te])()}}function bp(Z,te){var de=[],ke={status:"pending",value:null,reason:null,then:function(Ue){de.push(Ue)}};return Z.then(function(){ke.status="fulfilled",ke.value=te;for(var Ue=0;Ue<de.length;Ue++)(0,de[Ue])(te)},function(Ue){for(ke.status="rejected",ke.reason=Ue,Ue=0;Ue<de.length;Ue++)(0,de[Ue])(void 0)}),ke}var Ed=je.S;je.S=function(Z,te){typeof te=="object"&&te!==null&&typeof te.then=="function"&&Go(Z,te),Ed!==null&&Ed(Z,te)};var il=nt(null);function Ac(){var Z=il.current;return Z!==null?Z:ma.pooledCache}function Ad(Z,te){te===null?Wt(il,il.current):Wt(il,te.pool)}function $d(){var Z=Ac();return Z===null?null:{parent:Fs._currentValue,pool:Z}}var Sd=Error(A(460)),Mf=Error(A(474)),yl=Error(A(542)),Cd={then:function(){}};function Wd(Z){return Z=Z.status,Z==="fulfilled"||Z==="rejected"}function Lu(){}function Kd(Z,te,de){switch(de=Z[de],de===void 0?Z.push(te):de!==te&&(te.then(Lu,Lu),te=de),te.status){case"fulfilled":return te.value;case"rejected":throw Z=te.reason,ph(Z),Z;default:if(typeof te.status=="string")te.then(Lu,Lu);else{if(Z=ma,Z!==null&&100<Z.shellSuspendCounter)throw Error(A(482));Z=te,Z.status="pending",Z.then(function(ke){if(te.status==="pending"){var Ue=te;Ue.status="fulfilled",Ue.value=ke}},function(ke){if(te.status==="pending"){var Ue=te;Ue.status="rejected",Ue.reason=ke}})}switch(te.status){case"fulfilled":return te.value;case"rejected":throw Z=te.reason,ph(Z),Z}throw al=te,Sd}}var al=null;function If(){if(al===null)throw Error(A(459));var Z=al;return al=null,Z}function ph(Z){if(Z===Sd||Z===yl)throw Error(A(483))}var tc=!1;function kf(Z){Z.updateQueue={baseState:Z.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ca(Z,te){Z=Z.updateQueue,te.updateQueue===Z&&(te.updateQueue={baseState:Z.baseState,firstBaseUpdate:Z.firstBaseUpdate,lastBaseUpdate:Z.lastBaseUpdate,shared:Z.shared,callbacks:null})}function jl(Z){return{lane:Z,tag:0,payload:null,callback:null,next:null}}function nc(Z,te,de){var ke=Z.updateQueue;if(ke===null)return null;if(ke=ke.shared,(Ga&2)!==0){var Ue=ke.pending;return Ue===null?te.next=te:(te.next=Ue.next,Ue.next=te),ke.pending=te,te=xc(Z),Yc(Z,null,de),te}return Nl(Z,ke,te,de),xc(Z)}function tu(Z,te,de){if(te=te.updateQueue,te!==null&&(te=te.shared,(de&4194048)!==0)){var ke=te.lanes;ke&=Z.pendingLanes,de|=ke,te.lanes=de,er(Z,de)}}function Ou(Z,te){var de=Z.updateQueue,ke=Z.alternate;if(ke!==null&&(ke=ke.updateQueue,de===ke)){var Ue=null,Ke=null;if(de=de.firstBaseUpdate,de!==null){do{var pn={lane:de.lane,tag:de.tag,payload:de.payload,callback:null,next:null};Ke===null?Ue=Ke=pn:Ke=Ke.next=pn,de=de.next}while(de!==null);Ke===null?Ue=Ke=te:Ke=Ke.next=te}else Ue=Ke=te;de={baseState:ke.baseState,firstBaseUpdate:Ue,lastBaseUpdate:Ke,shared:ke.shared,callbacks:ke.callbacks},Z.updateQueue=de;return}Z=de.lastBaseUpdate,Z===null?de.firstBaseUpdate=te:Z.next=te,de.lastBaseUpdate=te}var Nf=!1;function wd(){if(Nf){var Z=ju;if(Z!==null)throw Z}}function Fu(Z,te,de,ke){Nf=!1;var Ue=Z.updateQueue;tc=!1;var Ke=Ue.firstBaseUpdate,pn=Ue.lastBaseUpdate,Vn=Ue.shared.pending;if(Vn!==null){Ue.shared.pending=null;var Tr=Vn,ei=Tr.next;Tr.next=null,pn===null?Ke=ei:pn.next=ei,pn=Tr;var pi=Z.alternate;pi!==null&&(pi=pi.updateQueue,Vn=pi.lastBaseUpdate,Vn!==pn&&(Vn===null?pi.firstBaseUpdate=ei:Vn.next=ei,pi.lastBaseUpdate=Tr))}if(Ke!==null){var yi=Ue.baseState;pn=0,pi=ei=Tr=null,Vn=Ke;do{var ri=Vn.lane&-536870913,ai=ri!==Vn.lane;if(ai?(ea&ri)===ri:(ke&ri)===ri){ri!==0&&ri===ya&&(Nf=!0),pi!==null&&(pi=pi.next={lane:0,tag:Vn.tag,payload:Vn.payload,callback:null,next:null});e:{var fa=Z,ia=Vn;ri=te;var cs=de;switch(ia.tag){case 1:if(fa=ia.payload,typeof fa=="function"){yi=fa.call(cs,yi,ri);break e}yi=fa;break e;case 3:fa.flags=fa.flags&-65537|128;case 0:if(fa=ia.payload,ri=typeof fa=="function"?fa.call(cs,yi,ri):fa,ri==null)break e;yi=z({},yi,ri);break e;case 2:tc=!0}}ri=Vn.callback,ri!==null&&(Z.flags|=64,ai&&(Z.flags|=8192),ai=Ue.callbacks,ai===null?Ue.callbacks=[ri]:ai.push(ri))}else ai={lane:ri,tag:Vn.tag,payload:Vn.payload,callback:Vn.callback,next:null},pi===null?(ei=pi=ai,Tr=yi):pi=pi.next=ai,pn|=ri;if(Vn=Vn.next,Vn===null){if(Vn=Ue.shared.pending,Vn===null)break;ai=Vn,Vn=ai.next,ai.next=null,Ue.lastBaseUpdate=ai,Ue.shared.pending=null}}while(!0);pi===null&&(Tr=yi),Ue.baseState=Tr,Ue.firstBaseUpdate=ei,Ue.lastBaseUpdate=pi,Ke===null&&(Ue.shared.lanes=0),Rl|=pn,Z.lanes=pn,Z.memoizedState=yi}}function Uu(Z,te){if(typeof Z!="function")throw Error(A(191,Z));Z.call(te)}function mh(Z,te){var de=Z.callbacks;if(de!==null)for(Z.callbacks=null,Z=0;Z<de.length;Z++)Uu(de[Z],te)}var Vu=nt(null),Yd=nt(0);function gh(Z,te){Z=dl,Wt(Yd,Z),Wt(Vu,te),dl=Z|te.baseLanes}function Pf(){Wt(Yd,dl),Wt(Vu,Vu.current)}function Td(){dl=Yd.current,Qt(Vu),Qt(Yd)}var rc=0,ba=null,Wa=null,Us=null,Xd=!1,Sc=!1,Co=!1,Ws=0,sl=0,uo=null,vh=0;function Ns(){throw Error(A(321))}function _o(Z,te){if(te===null)return!1;for(var de=0;de<te.length&&de<Z.length;de++)if(!lo(Z[de],te[de]))return!1;return!0}function ic(Z,te,de,ke,Ue,Ke){return rc=Ke,ba=te,te.memoizedState=null,te.updateQueue=null,te.lanes=0,je.H=Z===null||Z.memoizedState===null?sf:Yf,Co=!1,Ke=de(ke,Ue),Co=!1,Sc&&(Ke=yh(te,de,ke,Ue)),xh(Z),Ke}function xh(Z){je.H=Id;var te=Wa!==null&&Wa.next!==null;if(rc=0,Us=Wa=ba=null,Xd=!1,sl=0,uo=null,te)throw Error(A(300));Z===null||eo||(Z=Z.dependencies,Z!==null&&xd(Z)&&(eo=!0))}function yh(Z,te,de,ke){ba=Z;var Ue=0;do{if(Sc&&(uo=null),sl=0,Sc=!1,25<=Ue)throw Error(A(301));if(Ue+=1,Us=Wa=null,Z.updateQueue!=null){var Ke=Z.updateQueue;Ke.lastEffect=null,Ke.events=null,Ke.stores=null,Ke.memoCache!=null&&(Ke.memoCache.index=0)}je.H=$h,Ke=te(de,ke)}while(Sc);return Ke}function Ep(){var Z=je.H,te=Z.useState()[0];return te=typeof te.then=="function"?bl(te):te,Z=Z.useState()[0],(Wa!==null?Wa.memoizedState:null)!==Z&&(ba.flags|=1024),te}function Bf(){var Z=Ws!==0;return Ws=0,Z}function Qd(Z,te,de){te.updateQueue=Z.updateQueue,te.flags&=-2053,Z.lanes&=~de}function Df(Z){if(Xd){for(Z=Z.memoizedState;Z!==null;){var te=Z.queue;te!==null&&(te.pending=null),Z=Z.next}Xd=!1}rc=0,Us=Wa=ba=null,Sc=!1,sl=Ws=0,uo=null}function wo(){var Z={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Us===null?ba.memoizedState=Us=Z:Us=Us.next=Z,Us}function Vs(){if(Wa===null){var Z=ba.alternate;Z=Z!==null?Z.memoizedState:null}else Z=Wa.next;var te=Us===null?ba.memoizedState:Us.next;if(te!==null)Us=te,Wa=Z;else{if(Z===null)throw ba.alternate===null?Error(A(467)):Error(A(310));Wa=Z,Z={memoizedState:Wa.memoizedState,baseState:Wa.baseState,baseQueue:Wa.baseQueue,queue:Wa.queue,next:null},Us===null?ba.memoizedState=Us=Z:Us=Us.next=Z}return Us}function Cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(Z){var te=sl;return sl+=1,uo===null&&(uo=[]),Z=Kd(uo,Z,te),te=ba,(Us===null?te.memoizedState:Us.next)===null&&(te=te.alternate,je.H=te===null||te.memoizedState===null?sf:Yf),Z}function Jd(Z){if(Z!==null&&typeof Z=="object"){if(typeof Z.then=="function")return bl(Z);if(Z.$$typeof===ue)return ys(Z)}throw Error(A(438,String(Z)))}function jf(Z){var te=null,de=ba.updateQueue;if(de!==null&&(te=de.memoCache),te==null){var ke=ba.alternate;ke!==null&&(ke=ke.updateQueue,ke!==null&&(ke=ke.memoCache,ke!=null&&(te={data:ke.data.map(function(Ue){return Ue.slice()}),index:0})))}if(te==null&&(te={data:[],index:0}),de===null&&(de=Cc(),ba.updateQueue=de),de.memoCache=te,de=te.data[te.index],de===void 0)for(de=te.data[te.index]=Array(Z),ke=0;ke<Z;ke++)de[ke]=Be;return te.index++,de}function ac(Z,te){return typeof te=="function"?te(Z):te}function wc(Z){var te=Vs();return Lf(te,Wa,Z)}function Lf(Z,te,de){var ke=Z.queue;if(ke===null)throw Error(A(311));ke.lastRenderedReducer=de;var Ue=Z.baseQueue,Ke=ke.pending;if(Ke!==null){if(Ue!==null){var pn=Ue.next;Ue.next=Ke.next,Ke.next=pn}te.baseQueue=Ue=Ke,ke.pending=null}if(Ke=Z.baseState,Ue===null)Z.memoizedState=Ke;else{te=Ue.next;var Vn=pn=null,Tr=null,ei=te,pi=!1;do{var yi=ei.lane&-536870913;if(yi!==ei.lane?(ea&yi)===yi:(rc&yi)===yi){var ri=ei.revertLane;if(ri===0)Tr!==null&&(Tr=Tr.next={lane:0,revertLane:0,action:ei.action,hasEagerState:ei.hasEagerState,eagerState:ei.eagerState,next:null}),yi===ya&&(pi=!0);else if((rc&ri)===ri){ei=ei.next,ri===ya&&(pi=!0);continue}else yi={lane:0,revertLane:ei.revertLane,action:ei.action,hasEagerState:ei.hasEagerState,eagerState:ei.eagerState,next:null},Tr===null?(Vn=Tr=yi,pn=Ke):Tr=Tr.next=yi,ba.lanes|=ri,Rl|=ri;yi=ei.action,Co&&de(Ke,yi),Ke=ei.hasEagerState?ei.eagerState:de(Ke,yi)}else ri={lane:yi,revertLane:ei.revertLane,action:ei.action,hasEagerState:ei.hasEagerState,eagerState:ei.eagerState,next:null},Tr===null?(Vn=Tr=ri,pn=Ke):Tr=Tr.next=ri,ba.lanes|=yi,Rl|=yi;ei=ei.next}while(ei!==null&&ei!==te);if(Tr===null?pn=Ke:Tr.next=Vn,!lo(Ke,Z.memoizedState)&&(eo=!0,pi&&(de=ju,de!==null)))throw de;Z.memoizedState=Ke,Z.baseState=pn,Z.baseQueue=Tr,ke.lastRenderedState=Ke}return Ue===null&&(ke.lanes=0),[Z.memoizedState,ke.dispatch]}function Of(Z){var te=Vs(),de=te.queue;if(de===null)throw Error(A(311));de.lastRenderedReducer=Z;var ke=de.dispatch,Ue=de.pending,Ke=te.memoizedState;if(Ue!==null){de.pending=null;var pn=Ue=Ue.next;do Ke=Z(Ke,pn.action),pn=pn.next;while(pn!==Ue);lo(Ke,te.memoizedState)||(eo=!0),te.memoizedState=Ke,te.baseQueue===null&&(te.baseState=Ke),de.lastRenderedState=Ke}return[Ke,ke]}function bh(Z,te,de){var ke=ba,Ue=Vs(),Ke=sa;if(Ke){if(de===void 0)throw Error(A(407));de=de()}else de=te();var pn=!lo((Wa||Ue).memoizedState,de);pn&&(Ue.memoizedState=de,eo=!0),Ue=Ue.queue;var Vn=Ah.bind(null,ke,Ue,Z);if(Hu(2048,8,Vn,[Z]),Ue.getSnapshot!==te||pn||Us!==null&&Us.memoizedState.tag&1){if(ke.flags|=2048,zu(9,Rd(),Eh.bind(null,ke,Ue,de,te),null),ma===null)throw Error(A(349));Ke||(rc&124)!==0||Gu(ke,te,de)}return de}function Gu(Z,te,de){Z.flags|=16384,Z={getSnapshot:te,value:de},te=ba.updateQueue,te===null?(te=Cc(),ba.updateQueue=te,te.stores=[Z]):(de=te.stores,de===null?te.stores=[Z]:de.push(Z))}function Eh(Z,te,de,ke){te.value=de,te.getSnapshot=ke,Sh(te)&&Ch(Z)}function Ah(Z,te,de){return de(function(){Sh(te)&&Ch(Z)})}function Sh(Z){var te=Z.getSnapshot;Z=Z.value;try{var de=te();return!lo(Z,de)}catch{return!0}}function Ch(Z){var te=nl(Z,2);te!==null&&Mo(te,Z,2)}function Ff(Z){var te=wo();if(typeof Z=="function"){var de=Z;if(Z=de(),Co){dr(!0);try{de()}finally{dr(!1)}}}return te.memoizedState=te.baseState=Z,te.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:Z},te}function wh(Z,te,de,ke){return Z.baseState=de,Lf(Z,Wa,typeof ke=="function"?ke:ac)}function Ap(Z,te,de,ke,Ue){if(af(Z))throw Error(A(485));if(Z=te.action,Z!==null){var Ke={payload:Ue,action:Z,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(pn){Ke.listeners.push(pn)}};je.T!==null?de(!0):Ke.isTransition=!1,ke(Ke),de=te.pending,de===null?(Ke.next=te.pending=Ke,Th(te,Ke)):(Ke.next=de.next,te.pending=de.next=Ke)}}function Th(Z,te){var de=te.action,ke=te.payload,Ue=Z.state;if(te.isTransition){var Ke=je.T,pn={};je.T=pn;try{var Vn=de(Ue,ke),Tr=je.S;Tr!==null&&Tr(pn,Vn),Rh(Z,te,Vn)}catch(ei){Uf(Z,te,ei)}finally{je.T=Ke}}else try{Ke=de(Ue,ke),Rh(Z,te,Ke)}catch(ei){Uf(Z,te,ei)}}function Rh(Z,te,de){de!==null&&typeof de=="object"&&typeof de.then=="function"?de.then(function(ke){Mh(Z,te,ke)},function(ke){return Uf(Z,te,ke)}):Mh(Z,te,de)}function Mh(Z,te,de){te.status="fulfilled",te.value=de,Ih(te),Z.state=de,te=Z.pending,te!==null&&(de=te.next,de===te?Z.pending=null:(de=de.next,te.next=de,Th(Z,de)))}function Uf(Z,te,de){var ke=Z.pending;if(Z.pending=null,ke!==null){ke=ke.next;do te.status="rejected",te.reason=de,Ih(te),te=te.next;while(te!==ke)}Z.action=null}function Ih(Z){Z=Z.listeners;for(var te=0;te<Z.length;te++)(0,Z[te])()}function Vf(Z,te){return te}function kh(Z,te){if(sa){var de=ma.formState;if(de!==null){e:{var ke=ba;if(sa){if(Ji){t:{for(var Ue=Ji,Ke=vo;Ue.nodeType!==8;){if(!Ke){Ue=null;break t}if(Ue=fc(Ue.nextSibling),Ue===null){Ue=null;break t}}Ke=Ue.data,Ue=Ke==="F!"||Ke==="F"?Ue:null}if(Ue){Ji=fc(Ue.nextSibling),ke=Ue.data==="F!";break e}}So(ke)}ke=!1}ke&&(te=de[0])}}return de=wo(),de.memoizedState=de.baseState=te,ke={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vf,lastRenderedState:te},de.queue=ke,de=Hh.bind(null,ba,ke),ke.dispatch=de,ke=Ff(!1),Ke=rf.bind(null,ba,!1,ke.queue),ke=wo(),Ue={state:te,dispatch:null,action:Z,pending:null},ke.queue=Ue,de=Ap.bind(null,ba,Ue,Ke,de),Ue.dispatch=de,ke.memoizedState=Z,[te,de,!1]}function Nh(Z){var te=Vs();return Ph(te,Wa,Z)}function Ph(Z,te,de){if(te=Lf(Z,te,Vf)[0],Z=wc(ac)[0],typeof te=="object"&&te!==null&&typeof te.then=="function")try{var ke=bl(te)}catch(pn){throw pn===Sd?yl:pn}else ke=te;te=Vs();var Ue=te.queue,Ke=Ue.dispatch;return de!==te.memoizedState&&(ba.flags|=2048,zu(9,Rd(),Sp.bind(null,Ue,de),null)),[ke,Ke,Z]}function Sp(Z,te){Z.action=te}function Bh(Z){var te=Vs(),de=Wa;if(de!==null)return Ph(te,de,Z);Vs(),te=te.memoizedState,de=Vs();var ke=de.queue.dispatch;return de.memoizedState=Z,[te,ke,!1]}function zu(Z,te,de,ke){return Z={tag:Z,create:de,deps:ke,inst:te,next:null},te=ba.updateQueue,te===null&&(te=Cc(),ba.updateQueue=te),de=te.lastEffect,de===null?te.lastEffect=Z.next=Z:(ke=de.next,de.next=Z,Z.next=ke,te.lastEffect=Z),Z}function Rd(){return{destroy:void 0,resource:void 0}}function Gf(){return Vs().memoizedState}function Zd(Z,te,de,ke){var Ue=wo();ke=ke===void 0?null:ke,ba.flags|=Z,Ue.memoizedState=zu(1|te,Rd(),de,ke)}function Hu(Z,te,de,ke){var Ue=Vs();ke=ke===void 0?null:ke;var Ke=Ue.memoizedState.inst;Wa!==null&&ke!==null&&_o(ke,Wa.memoizedState.deps)?Ue.memoizedState=zu(te,Ke,de,ke):(ba.flags|=Z,Ue.memoizedState=zu(1|te,Ke,de,ke))}function zf(Z,te){Zd(8390656,8,Z,te)}function Hf(Z,te){Hu(2048,8,Z,te)}function ef(Z,te){return Hu(4,2,Z,te)}function tf(Z,te){return Hu(4,4,Z,te)}function Dh(Z,te){if(typeof te=="function"){Z=Z();var de=te(Z);return function(){typeof de=="function"?de():te(null)}}if(te!=null)return Z=Z(),te.current=Z,function(){te.current=null}}function jh(Z,te,de){de=de!=null?de.concat([Z]):null,Hu(4,4,Dh.bind(null,te,Z),de)}function qf(){}function Lh(Z,te){var de=Vs();te=te===void 0?null:te;var ke=de.memoizedState;return te!==null&&_o(te,ke[1])?ke[0]:(de.memoizedState=[Z,te],Z)}function $f(Z,te){var de=Vs();te=te===void 0?null:te;var ke=de.memoizedState;if(te!==null&&_o(te,ke[1]))return ke[0];if(ke=Z(),Co){dr(!0);try{Z()}finally{dr(!1)}}return de.memoizedState=[ke,te],ke}function nf(Z,te,de){return de===void 0||(rc&1073741824)!==0?Z.memoizedState=te:(Z.memoizedState=de,Z=vf(),ba.lanes|=Z,Rl|=Z,de)}function Oh(Z,te,de,ke){return lo(de,te)?de:Vu.current!==null?(Z=nf(Z,de,ke),lo(Z,te)||(eo=!0),Z):(rc&42)===0?(eo=!0,Z.memoizedState=de):(Z=vf(),ba.lanes|=Z,Rl|=Z,te)}function Fh(Z,te,de,ke,Ue){var Ke=He.p;He.p=Ke!==0&&8>Ke?Ke:8;var pn=je.T,Vn={};je.T=Vn,rf(Z,!1,te,de);try{var Tr=Ue(),ei=je.S;if(ei!==null&&ei(Vn,Tr),Tr!==null&&typeof Tr=="object"&&typeof Tr.then=="function"){var pi=bp(Tr,ke);Md(Z,te,pi,As(Z))}else Md(Z,te,ke,As(Z))}catch(yi){Md(Z,te,{then:function(){},status:"rejected",reason:yi},As())}finally{He.p=Ke,je.T=pn}}function Cp(){}function Wf(Z,te,de,ke){if(Z.tag!==5)throw Error(A(476));var Ue=Uh(Z).queue;Fh(Z,Ue,te,Xe,de===null?Cp:function(){return Vh(Z),de(ke)})}function Uh(Z){var te=Z.memoizedState;if(te!==null)return te;te={memoizedState:Xe,baseState:Xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:Xe},next:null};var de={};return te.next={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:de},next:null},Z.memoizedState=te,Z=Z.alternate,Z!==null&&(Z.memoizedState=te),te}function Vh(Z){var te=Uh(Z).next.queue;Md(Z,te,{},As())}function Kf(){return ys(oh)}function Gh(){return Vs().memoizedState}function zh(){return Vs().memoizedState}function wp(Z){for(var te=Z.return;te!==null;){switch(te.tag){case 24:case 3:var de=As();Z=jl(de);var ke=nc(te,Z,de);ke!==null&&(Mo(ke,te,de),tu(ke,te,de)),te={cache:Hd()},Z.payload=te;return}te=te.return}}function Tp(Z,te,de){var ke=As();de={lane:ke,revertLane:0,action:de,hasEagerState:!1,eagerState:null,next:null},af(Z)?qh(te,de):(de=Kc(Z,te,de,ke),de!==null&&(Mo(de,Z,ke),zo(de,te,ke)))}function Hh(Z,te,de){var ke=As();Md(Z,te,de,ke)}function Md(Z,te,de,ke){var Ue={lane:ke,revertLane:0,action:de,hasEagerState:!1,eagerState:null,next:null};if(af(Z))qh(te,Ue);else{var Ke=Z.alternate;if(Z.lanes===0&&(Ke===null||Ke.lanes===0)&&(Ke=te.lastRenderedReducer,Ke!==null))try{var pn=te.lastRenderedState,Vn=Ke(pn,de);if(Ue.hasEagerState=!0,Ue.eagerState=Vn,lo(Vn,pn))return Nl(Z,te,Ue,0),ma===null&&Wc(),!1}catch{}finally{}if(de=Kc(Z,te,Ue,ke),de!==null)return Mo(de,Z,ke),zo(de,te,ke),!0}return!1}function rf(Z,te,de,ke){if(ke={lane:2,revertLane:Ip(),action:ke,hasEagerState:!1,eagerState:null,next:null},af(Z)){if(te)throw Error(A(479))}else te=Kc(Z,de,ke,2),te!==null&&Mo(te,Z,2)}function af(Z){var te=Z.alternate;return Z===ba||te!==null&&te===ba}function qh(Z,te){Sc=Xd=!0;var de=Z.pending;de===null?te.next=te:(te.next=de.next,de.next=te),Z.pending=te}function zo(Z,te,de){if((de&4194048)!==0){var ke=te.lanes;ke&=Z.pendingLanes,de|=ke,te.lanes=de,er(Z,de)}}var Id={readContext:ys,use:Jd,useCallback:Ns,useContext:Ns,useEffect:Ns,useImperativeHandle:Ns,useLayoutEffect:Ns,useInsertionEffect:Ns,useMemo:Ns,useReducer:Ns,useRef:Ns,useState:Ns,useDebugValue:Ns,useDeferredValue:Ns,useTransition:Ns,useSyncExternalStore:Ns,useId:Ns,useHostTransitionStatus:Ns,useFormState:Ns,useActionState:Ns,useOptimistic:Ns,useMemoCache:Ns,useCacheRefresh:Ns},sf={readContext:ys,use:Jd,useCallback:function(Z,te){return wo().memoizedState=[Z,te===void 0?null:te],Z},useContext:ys,useEffect:zf,useImperativeHandle:function(Z,te,de){de=de!=null?de.concat([Z]):null,Zd(4194308,4,Dh.bind(null,te,Z),de)},useLayoutEffect:function(Z,te){return Zd(4194308,4,Z,te)},useInsertionEffect:function(Z,te){Zd(4,2,Z,te)},useMemo:function(Z,te){var de=wo();te=te===void 0?null:te;var ke=Z();if(Co){dr(!0);try{Z()}finally{dr(!1)}}return de.memoizedState=[ke,te],ke},useReducer:function(Z,te,de){var ke=wo();if(de!==void 0){var Ue=de(te);if(Co){dr(!0);try{de(te)}finally{dr(!1)}}}else Ue=te;return ke.memoizedState=ke.baseState=Ue,Z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Z,lastRenderedState:Ue},ke.queue=Z,Z=Z.dispatch=Tp.bind(null,ba,Z),[ke.memoizedState,Z]},useRef:function(Z){var te=wo();return Z={current:Z},te.memoizedState=Z},useState:function(Z){Z=Ff(Z);var te=Z.queue,de=Hh.bind(null,ba,te);return te.dispatch=de,[Z.memoizedState,de]},useDebugValue:qf,useDeferredValue:function(Z,te){var de=wo();return nf(de,Z,te)},useTransition:function(){var Z=Ff(!1);return Z=Fh.bind(null,ba,Z.queue,!0,!1),wo().memoizedState=Z,[!1,Z]},useSyncExternalStore:function(Z,te,de){var ke=ba,Ue=wo();if(sa){if(de===void 0)throw Error(A(407));de=de()}else{if(de=te(),ma===null)throw Error(A(349));(ea&124)!==0||Gu(ke,te,de)}Ue.memoizedState=de;var Ke={value:de,getSnapshot:te};return Ue.queue=Ke,zf(Ah.bind(null,ke,Ke,Z),[Z]),ke.flags|=2048,zu(9,Rd(),Eh.bind(null,ke,Ke,de,te),null),de},useId:function(){var Z=wo(),te=ma.identifierPrefix;if(sa){var de=$r,ke=Dr;de=(ke&~(1<<32-Qr(ke)-1)).toString(32)+de,te=""+te+"R"+de,de=Ws++,0<de&&(te+="H"+de.toString(32)),te+=""}else de=vh++,te=""+te+"r"+de.toString(32)+"";return Z.memoizedState=te},useHostTransitionStatus:Kf,useFormState:kh,useActionState:kh,useOptimistic:function(Z){var te=wo();te.memoizedState=te.baseState=Z;var de={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return te.queue=de,te=rf.bind(null,ba,!0,de),de.dispatch=te,[Z,te]},useMemoCache:jf,useCacheRefresh:function(){return wo().memoizedState=wp.bind(null,ba)}},Yf={readContext:ys,use:Jd,useCallback:Lh,useContext:ys,useEffect:Hf,useImperativeHandle:jh,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:$f,useReducer:wc,useRef:Gf,useState:function(){return wc(ac)},useDebugValue:qf,useDeferredValue:function(Z,te){var de=Vs();return Oh(de,Wa.memoizedState,Z,te)},useTransition:function(){var Z=wc(ac)[0],te=Vs().memoizedState;return[typeof Z=="boolean"?Z:bl(Z),te]},useSyncExternalStore:bh,useId:Gh,useHostTransitionStatus:Kf,useFormState:Nh,useActionState:Nh,useOptimistic:function(Z,te){var de=Vs();return wh(de,Wa,Z,te)},useMemoCache:jf,useCacheRefresh:zh},$h={readContext:ys,use:Jd,useCallback:Lh,useContext:ys,useEffect:Hf,useImperativeHandle:jh,useInsertionEffect:ef,useLayoutEffect:tf,useMemo:$f,useReducer:Of,useRef:Gf,useState:function(){return Of(ac)},useDebugValue:qf,useDeferredValue:function(Z,te){var de=Vs();return Wa===null?nf(de,Z,te):Oh(de,Wa.memoizedState,Z,te)},useTransition:function(){var Z=Of(ac)[0],te=Vs().memoizedState;return[typeof Z=="boolean"?Z:bl(Z),te]},useSyncExternalStore:bh,useId:Gh,useHostTransitionStatus:Kf,useFormState:Bh,useActionState:Bh,useOptimistic:function(Z,te){var de=Vs();return Wa!==null?wh(de,Wa,Z,te):(de.baseState=Z,[Z,de.queue.dispatch])},useMemoCache:jf,useCacheRefresh:zh},nu=null,kd=0;function Nd(Z){var te=kd;return kd+=1,nu===null&&(nu=[]),Kd(nu,Z,te)}function qu(Z,te){te=te.props.ref,Z.ref=te!==void 0?te:null}function of(Z,te){throw te.$$typeof===H?Error(A(525)):(Z=Object.prototype.toString.call(te),Error(A(31,Z==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":Z)))}function Wh(Z){var te=Z._init;return te(Z._payload)}function Kh(Z){function te(Yr,Fr){if(Z){var Zr=Yr.deletions;Zr===null?(Yr.deletions=[Fr],Yr.flags|=16):Zr.push(Fr)}}function de(Yr,Fr){if(!Z)return null;for(;Fr!==null;)te(Yr,Fr),Fr=Fr.sibling;return null}function ke(Yr){for(var Fr=new Map;Yr!==null;)Yr.key!==null?Fr.set(Yr.key,Yr):Fr.set(Yr.index,Yr),Yr=Yr.sibling;return Fr}function Ue(Yr,Fr){return Yr=gs(Yr,Fr),Yr.index=0,Yr.sibling=null,Yr}function Ke(Yr,Fr,Zr){return Yr.index=Zr,Z?(Zr=Yr.alternate,Zr!==null?(Zr=Zr.index,Zr<Fr?(Yr.flags|=67108866,Fr):Zr):(Yr.flags|=67108866,Fr)):(Yr.flags|=1048576,Fr)}function pn(Yr){return Z&&Yr.alternate===null&&(Yr.flags|=67108866),Yr}function Vn(Yr,Fr,Zr,mi){return Fr===null||Fr.tag!==6?(Fr=Qc(Zr,Yr.mode,mi),Fr.return=Yr,Fr):(Fr=Ue(Fr,Zr),Fr.return=Yr,Fr)}function Tr(Yr,Fr,Zr,mi){var Wi=Zr.type;return Wi===ie?pi(Yr,Fr,Zr.props.children,mi,Zr.key):Fr!==null&&(Fr.elementType===Wi||typeof Wi=="object"&&Wi!==null&&Wi.$$typeof===Me&&Wh(Wi)===Fr.type)?(Fr=Ue(Fr,Zr.props),qu(Fr,Zr),Fr.return=Yr,Fr):(Fr=Os(Zr.type,Zr.key,Zr.props,null,Yr.mode,mi),qu(Fr,Zr),Fr.return=Yr,Fr)}function ei(Yr,Fr,Zr,mi){return Fr===null||Fr.tag!==4||Fr.stateNode.containerInfo!==Zr.containerInfo||Fr.stateNode.implementation!==Zr.implementation?(Fr=Nu(Zr,Yr.mode,mi),Fr.return=Yr,Fr):(Fr=Ue(Fr,Zr.children||[]),Fr.return=Yr,Fr)}function pi(Yr,Fr,Zr,mi,Wi){return Fr===null||Fr.tag!==7?(Fr=Bl(Zr,Yr.mode,mi,Wi),Fr.return=Yr,Fr):(Fr=Ue(Fr,Zr),Fr.return=Yr,Fr)}function yi(Yr,Fr,Zr){if(typeof Fr=="string"&&Fr!==""||typeof Fr=="number"||typeof Fr=="bigint")return Fr=Qc(""+Fr,Yr.mode,Zr),Fr.return=Yr,Fr;if(typeof Fr=="object"&&Fr!==null){switch(Fr.$$typeof){case Y:return Zr=Os(Fr.type,Fr.key,Fr.props,null,Yr.mode,Zr),qu(Zr,Fr),Zr.return=Yr,Zr;case ee:return Fr=Nu(Fr,Yr.mode,Zr),Fr.return=Yr,Fr;case Me:var mi=Fr._init;return Fr=mi(Fr._payload),yi(Yr,Fr,Zr)}if(ze(Fr)||Fe(Fr))return Fr=Bl(Fr,Yr.mode,Zr,null),Fr.return=Yr,Fr;if(typeof Fr.then=="function")return yi(Yr,Nd(Fr),Zr);if(Fr.$$typeof===ue)return yi(Yr,yd(Yr,Fr),Zr);of(Yr,Fr)}return null}function ri(Yr,Fr,Zr,mi){var Wi=Fr!==null?Fr.key:null;if(typeof Zr=="string"&&Zr!==""||typeof Zr=="number"||typeof Zr=="bigint")return Wi!==null?null:Vn(Yr,Fr,""+Zr,mi);if(typeof Zr=="object"&&Zr!==null){switch(Zr.$$typeof){case Y:return Zr.key===Wi?Tr(Yr,Fr,Zr,mi):null;case ee:return Zr.key===Wi?ei(Yr,Fr,Zr,mi):null;case Me:return Wi=Zr._init,Zr=Wi(Zr._payload),ri(Yr,Fr,Zr,mi)}if(ze(Zr)||Fe(Zr))return Wi!==null?null:pi(Yr,Fr,Zr,mi,null);if(typeof Zr.then=="function")return ri(Yr,Fr,Nd(Zr),mi);if(Zr.$$typeof===ue)return ri(Yr,Fr,yd(Yr,Zr),mi);of(Yr,Zr)}return null}function ai(Yr,Fr,Zr,mi,Wi){if(typeof mi=="string"&&mi!==""||typeof mi=="number"||typeof mi=="bigint")return Yr=Yr.get(Zr)||null,Vn(Fr,Yr,""+mi,Wi);if(typeof mi=="object"&&mi!==null){switch(mi.$$typeof){case Y:return Yr=Yr.get(mi.key===null?Zr:mi.key)||null,Tr(Fr,Yr,mi,Wi);case ee:return Yr=Yr.get(mi.key===null?Zr:mi.key)||null,ei(Fr,Yr,mi,Wi);case Me:var Ia=mi._init;return mi=Ia(mi._payload),ai(Yr,Fr,Zr,mi,Wi)}if(ze(mi)||Fe(mi))return Yr=Yr.get(Zr)||null,pi(Fr,Yr,mi,Wi,null);if(typeof mi.then=="function")return ai(Yr,Fr,Zr,Nd(mi),Wi);if(mi.$$typeof===ue)return ai(Yr,Fr,Zr,yd(Fr,mi),Wi);of(Fr,mi)}return null}function fa(Yr,Fr,Zr,mi){for(var Wi=null,Ia=null,Zi=Fr,oa=Fr=0,bo=null;Zi!==null&&oa<Zr.length;oa++){Zi.index>oa?(bo=Zi,Zi=null):bo=Zi.sibling;var Ha=ri(Yr,Zi,Zr[oa],mi);if(Ha===null){Zi===null&&(Zi=bo);break}Z&&Zi&&Ha.alternate===null&&te(Yr,Zi),Fr=Ke(Ha,Fr,oa),Ia===null?Wi=Ha:Ia.sibling=Ha,Ia=Ha,Zi=bo}if(oa===Zr.length)return de(Yr,Zi),sa&&li(Yr,oa),Wi;if(Zi===null){for(;oa<Zr.length;oa++)Zi=yi(Yr,Zr[oa],mi),Zi!==null&&(Fr=Ke(Zi,Fr,oa),Ia===null?Wi=Zi:Ia.sibling=Zi,Ia=Zi);return sa&&li(Yr,oa),Wi}for(Zi=ke(Zi);oa<Zr.length;oa++)bo=ai(Zi,Yr,oa,Zr[oa],mi),bo!==null&&(Z&&bo.alternate!==null&&Zi.delete(bo.key===null?oa:bo.key),Fr=Ke(bo,Fr,oa),Ia===null?Wi=bo:Ia.sibling=bo,Ia=bo);return Z&&Zi.forEach(function(cd){return te(Yr,cd)}),sa&&li(Yr,oa),Wi}function ia(Yr,Fr,Zr,mi){if(Zr==null)throw Error(A(151));for(var Wi=null,Ia=null,Zi=Fr,oa=Fr=0,bo=null,Ha=Zr.next();Zi!==null&&!Ha.done;oa++,Ha=Zr.next()){Zi.index>oa?(bo=Zi,Zi=null):bo=Zi.sibling;var cd=ri(Yr,Zi,Ha.value,mi);if(cd===null){Zi===null&&(Zi=bo);break}Z&&Zi&&cd.alternate===null&&te(Yr,Zi),Fr=Ke(cd,Fr,oa),Ia===null?Wi=cd:Ia.sibling=cd,Ia=cd,Zi=bo}if(Ha.done)return de(Yr,Zi),sa&&li(Yr,oa),Wi;if(Zi===null){for(;!Ha.done;oa++,Ha=Zr.next())Ha=yi(Yr,Ha.value,mi),Ha!==null&&(Fr=Ke(Ha,Fr,oa),Ia===null?Wi=Ha:Ia.sibling=Ha,Ia=Ha);return sa&&li(Yr,oa),Wi}for(Zi=ke(Zi);!Ha.done;oa++,Ha=Zr.next())Ha=ai(Zi,Yr,oa,Ha.value,mi),Ha!==null&&(Z&&Ha.alternate!==null&&Zi.delete(Ha.key===null?oa:Ha.key),Fr=Ke(Ha,Fr,oa),Ia===null?Wi=Ha:Ia.sibling=Ha,Ia=Ha);return Z&&Zi.forEach(function(Cg){return te(Yr,Cg)}),sa&&li(Yr,oa),Wi}function cs(Yr,Fr,Zr,mi){if(typeof Zr=="object"&&Zr!==null&&Zr.type===ie&&Zr.key===null&&(Zr=Zr.props.children),typeof Zr=="object"&&Zr!==null){switch(Zr.$$typeof){case Y:e:{for(var Wi=Zr.key;Fr!==null;){if(Fr.key===Wi){if(Wi=Zr.type,Wi===ie){if(Fr.tag===7){de(Yr,Fr.sibling),mi=Ue(Fr,Zr.props.children),mi.return=Yr,Yr=mi;break e}}else if(Fr.elementType===Wi||typeof Wi=="object"&&Wi!==null&&Wi.$$typeof===Me&&Wh(Wi)===Fr.type){de(Yr,Fr.sibling),mi=Ue(Fr,Zr.props),qu(mi,Zr),mi.return=Yr,Yr=mi;break e}de(Yr,Fr);break}else te(Yr,Fr);Fr=Fr.sibling}Zr.type===ie?(mi=Bl(Zr.props.children,Yr.mode,mi,Zr.key),mi.return=Yr,Yr=mi):(mi=Os(Zr.type,Zr.key,Zr.props,null,Yr.mode,mi),qu(mi,Zr),mi.return=Yr,Yr=mi)}return pn(Yr);case ee:e:{for(Wi=Zr.key;Fr!==null;){if(Fr.key===Wi)if(Fr.tag===4&&Fr.stateNode.containerInfo===Zr.containerInfo&&Fr.stateNode.implementation===Zr.implementation){de(Yr,Fr.sibling),mi=Ue(Fr,Zr.children||[]),mi.return=Yr,Yr=mi;break e}else{de(Yr,Fr);break}else te(Yr,Fr);Fr=Fr.sibling}mi=Nu(Zr,Yr.mode,mi),mi.return=Yr,Yr=mi}return pn(Yr);case Me:return Wi=Zr._init,Zr=Wi(Zr._payload),cs(Yr,Fr,Zr,mi)}if(ze(Zr))return fa(Yr,Fr,Zr,mi);if(Fe(Zr)){if(Wi=Fe(Zr),typeof Wi!="function")throw Error(A(150));return Zr=Wi.call(Zr),ia(Yr,Fr,Zr,mi)}if(typeof Zr.then=="function")return cs(Yr,Fr,Nd(Zr),mi);if(Zr.$$typeof===ue)return cs(Yr,Fr,yd(Yr,Zr),mi);of(Yr,Zr)}return typeof Zr=="string"&&Zr!==""||typeof Zr=="number"||typeof Zr=="bigint"?(Zr=""+Zr,Fr!==null&&Fr.tag===6?(de(Yr,Fr.sibling),mi=Ue(Fr,Zr),mi.return=Yr,Yr=mi):(de(Yr,Fr),mi=Qc(Zr,Yr.mode,mi),mi.return=Yr,Yr=mi),pn(Yr)):de(Yr,Fr)}return function(Yr,Fr,Zr,mi){try{kd=0;var Wi=cs(Yr,Fr,Zr,mi);return nu=null,Wi}catch(Zi){if(Zi===Sd||Zi===yl)throw Zi;var Ia=$s(29,Zi,null,Yr.mode);return Ia.lanes=mi,Ia.return=Yr,Ia}finally{}}}var iu=Kh(!0),Yh=Kh(!1),Ya=nt(null),El=null;function Tc(Z){var te=Z.alternate;Wt(Ps,Ps.current&1),Wt(Ya,Z),El===null&&(te===null||Vu.current!==null||te.memoizedState!==null)&&(El=Z)}function Xh(Z){if(Z.tag===22){if(Wt(Ps,Ps.current),Wt(Ya,Z),El===null){var te=Z.alternate;te!==null&&te.memoizedState!==null&&(El=Z)}}else Rc()}function Rc(){Wt(Ps,Ps.current),Wt(Ya,Ya.current)}function Ll(Z){Qt(Ya),El===Z&&(El=null),Qt(Ps)}var Ps=nt(0);function sc(Z){for(var te=Z;te!==null;){if(te.tag===13){var de=te.memoizedState;if(de!==null&&(de=de.dehydrated,de===null||de.data==="$?"||Gp(de)))return te}else if(te.tag===19&&te.memoizedProps.revealOrder!==void 0){if((te.flags&128)!==0)return te}else if(te.child!==null){te.child.return=te,te=te.child;continue}if(te===Z)break;for(;te.sibling===null;){if(te.return===null||te.return===Z)return null;te=te.return}te.sibling.return=te.return,te=te.sibling}return null}function Mc(Z,te,de,ke){te=Z.memoizedState,de=de(ke,te),de=de==null?te:z({},te,de),Z.memoizedState=de,Z.lanes===0&&(Z.updateQueue.baseState=de)}var To={enqueueSetState:function(Z,te,de){Z=Z._reactInternals;var ke=As(),Ue=jl(ke);Ue.payload=te,de!=null&&(Ue.callback=de),te=nc(Z,Ue,ke),te!==null&&(Mo(te,Z,ke),tu(te,Z,ke))},enqueueReplaceState:function(Z,te,de){Z=Z._reactInternals;var ke=As(),Ue=jl(ke);Ue.tag=1,Ue.payload=te,de!=null&&(Ue.callback=de),te=nc(Z,Ue,ke),te!==null&&(Mo(te,Z,ke),tu(te,Z,ke))},enqueueForceUpdate:function(Z,te){Z=Z._reactInternals;var de=As(),ke=jl(de);ke.tag=2,te!=null&&(ke.callback=te),te=nc(Z,ke,de),te!==null&&(Mo(te,Z,de),tu(te,Z,de))}};function Qh(Z,te,de,ke,Ue,Ke,pn){return Z=Z.stateNode,typeof Z.shouldComponentUpdate=="function"?Z.shouldComponentUpdate(ke,Ke,pn):te.prototype&&te.prototype.isPureReactComponent?!Vo(de,ke)||!Vo(Ue,Ke):!0}function Jh(Z,te,de,ke){Z=te.state,typeof te.componentWillReceiveProps=="function"&&te.componentWillReceiveProps(de,ke),typeof te.UNSAFE_componentWillReceiveProps=="function"&&te.UNSAFE_componentWillReceiveProps(de,ke),te.state!==Z&&To.enqueueReplaceState(te,te.state,null)}function Ol(Z,te){var de=te;if("ref"in te){de={};for(var ke in te)ke!=="ref"&&(de[ke]=te[ke])}if(Z=Z.defaultProps){de===te&&(de=z({},de));for(var Ue in Z)de[Ue]===void 0&&(de[Ue]=Z[Ue])}return de}var au=typeof reportError=="function"?reportError:function(Z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Z=="object"&&Z!==null&&typeof Z.message=="string"?String(Z.message):String(Z),error:Z});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Z);return}console.error(Z)};function Pd(Z){au(Z)}function lf(Z){console.error(Z)}function Zh(Z){au(Z)}function cf(Z,te){try{var de=Z.onUncaughtError;de(te.value,{componentStack:te.stack})}catch(ke){setTimeout(function(){throw ke})}}function ol(Z,te,de){try{var ke=Z.onCaughtError;ke(de.value,{componentStack:de.stack,errorBoundary:te.tag===1?te.stateNode:null})}catch(Ue){setTimeout(function(){throw Ue})}}function uf(Z,te,de){return de=jl(de),de.tag=3,de.payload={element:null},de.callback=function(){cf(Z,te)},de}function ep(Z){return Z=jl(Z),Z.tag=3,Z}function df(Z,te,de,ke){var Ue=de.type.getDerivedStateFromError;if(typeof Ue=="function"){var Ke=ke.value;Z.payload=function(){return Ue(Ke)},Z.callback=function(){ol(te,de,ke)}}var pn=de.stateNode;pn!==null&&typeof pn.componentDidCatch=="function"&&(Z.callback=function(){ol(te,de,ke),typeof Ue!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var Vn=ke.stack;this.componentDidCatch(ke.value,{componentStack:Vn!==null?Vn:""})})}function Rp(Z,te,de,ke,Ue){if(de.flags|=32768,ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){if(te=de.alternate,te!==null&&rl(te,de,Ue,!0),de=Ya.current,de!==null){switch(de.tag){case 13:return El===null?ae():de.alternate===null&&fs===0&&(fs=3),de.flags&=-257,de.flags|=65536,de.lanes=Ue,ke===Cd?de.flags|=16384:(te=de.updateQueue,te===null?de.updateQueue=new Set([ke]):te.add(ke),si(Z,ke,Ue)),!1;case 22:return de.flags|=65536,ke===Cd?de.flags|=16384:(te=de.updateQueue,te===null?(te={transitions:null,markerInstances:null,retryQueue:new Set([ke])},de.updateQueue=te):(de=te.retryQueue,de===null?te.retryQueue=new Set([ke]):de.add(ke)),si(Z,ke,Ue)),!1}throw Error(A(435,de.tag))}return si(Z,ke,Ue),ae(),!1}if(sa)return te=Ya.current,te!==null?((te.flags&65536)===0&&(te.flags|=256),te.flags|=65536,te.lanes=Ue,ke!==Jc&&(Z=Error(A(422),{cause:ke}),eu(qs(Z,de)))):(ke!==Jc&&(te=Error(A(423),{cause:ke}),eu(qs(te,de))),Z=Z.current.alternate,Z.flags|=65536,Ue&=-Ue,Z.lanes|=Ue,ke=qs(ke,de),Ue=uf(Z.stateNode,ke,Ue),Ou(Z,Ue),fs!==4&&(fs=2)),!1;var Ke=Error(A(520),{cause:ke});if(Ke=qs(Ke,de),za===null?za=[Ke]:za.push(Ke),fs!==4&&(fs=2),te===null)return!0;ke=qs(ke,de),de=te;do{switch(de.tag){case 3:return de.flags|=65536,Z=Ue&-Ue,de.lanes|=Z,Z=uf(de.stateNode,ke,Z),Ou(de,Z),!1;case 1:if(te=de.type,Ke=de.stateNode,(de.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Qo===null||!Qo.has(Ke))))return de.flags|=65536,Ue&=-Ue,de.lanes|=Ue,Ue=ep(Ue),df(Ue,Z,de,ke),Ou(de,Ue),!1}de=de.return}while(de!==null);return!1}var tp=Error(A(461)),eo=!1;function Bs(Z,te,de,ke){te.child=Z===null?Yh(te,null,de,ke):iu(te,Z.child,de,ke)}function Oo(Z,te,de,ke,Ue){de=de.render;var Ke=te.ref;if("ref"in ke){var pn={};for(var Vn in ke)Vn!=="ref"&&(pn[Vn]=ke[Vn])}else pn=ke;return Dl(te),ke=ic(Z,te,de,pn,Ke,Ue),Vn=Bf(),Z!==null&&!eo?(Qd(Z,te,Ue),ro(Z,te,Ue)):(sa&&Vn&&aa(te),te.flags|=1,Bs(Z,te,ke,Ue),te.child)}function Fo(Z,te,de,ke,Ue){if(Z===null){var Ke=de.type;return typeof Ke=="function"&&!Xc(Ke)&&Ke.defaultProps===void 0&&de.compare===null?(te.tag=15,te.type=Ke,Xf(Z,te,Ke,ke,Ue)):(Z=Os(de.type,null,ke,te,te.mode,Ue),Z.ref=te.ref,Z.return=te,te.child=Z)}if(Ke=Z.child,!Bd(Z,Ue)){var pn=Ke.memoizedProps;if(de=de.compare,de=de!==null?de:Vo,de(pn,ke)&&Z.ref===te.ref)return ro(Z,te,Ue)}return te.flags|=1,Z=gs(Ke,ke),Z.ref=te.ref,Z.return=te,te.child=Z}function Xf(Z,te,de,ke,Ue){if(Z!==null){var Ke=Z.memoizedProps;if(Vo(Ke,ke)&&Z.ref===te.ref)if(eo=!1,te.pendingProps=ke=Ke,Bd(Z,Ue))(Z.flags&131072)!==0&&(eo=!0);else return te.lanes=Z.lanes,ro(Z,te,Ue)}return $u(Z,te,de,ke,Ue)}function su(Z,te,de){var ke=te.pendingProps,Ue=ke.children,Ke=Z!==null?Z.memoizedState:null;if(ke.mode==="hidden"){if((te.flags&128)!==0){if(ke=Ke!==null?Ke.baseLanes|de:de,Z!==null){for(Ue=te.child=Z.child,Ke=0;Ue!==null;)Ke=Ke|Ue.lanes|Ue.childLanes,Ue=Ue.sibling;te.childLanes=Ke&~ke}else te.childLanes=0,te.child=null;return ou(Z,te,ke,de)}if((de&536870912)!==0)te.memoizedState={baseLanes:0,cachePool:null},Z!==null&&Ad(te,Ke!==null?Ke.cachePool:null),Ke!==null?gh(te,Ke):Pf(),Xh(te);else return te.lanes=te.childLanes=536870912,ou(Z,te,Ke!==null?Ke.baseLanes|de:de,de)}else Ke!==null?(Ad(te,Ke.cachePool),gh(te,Ke),Rc(),te.memoizedState=null):(Z!==null&&Ad(te,null),Pf(),Rc());return Bs(Z,te,Ue,de),te.child}function ou(Z,te,de,ke){var Ue=Ac();return Ue=Ue===null?null:{parent:Fs._currentValue,pool:Ue},te.memoizedState={baseLanes:de,cachePool:Ue},Z!==null&&Ad(te,null),Pf(),Xh(te),Z!==null&&rl(Z,te,ke,!0),null}function lu(Z,te){var de=te.ref;if(de===null)Z!==null&&Z.ref!==null&&(te.flags|=4194816);else{if(typeof de!="function"&&typeof de!="object")throw Error(A(284));(Z===null||Z.ref!==de)&&(te.flags|=4194816)}}function $u(Z,te,de,ke,Ue){return Dl(te),de=ic(Z,te,de,ke,void 0,Ue),ke=Bf(),Z!==null&&!eo?(Qd(Z,te,Ue),ro(Z,te,Ue)):(sa&&ke&&aa(te),te.flags|=1,Bs(Z,te,de,Ue),te.child)}function Ho(Z,te,de,ke,Ue,Ke){return Dl(te),te.updateQueue=null,de=yh(te,ke,de,Ue),xh(Z),ke=Bf(),Z!==null&&!eo?(Qd(Z,te,Ke),ro(Z,te,Ke)):(sa&&ke&&aa(te),te.flags|=1,Bs(Z,te,de,Ke),te.child)}function qo(Z,te,de,ke,Ue){if(Dl(te),te.stateNode===null){var Ke=Pl,pn=de.contextType;typeof pn=="object"&&pn!==null&&(Ke=ys(pn)),Ke=new de(ke,Ke),te.memoizedState=Ke.state!==null&&Ke.state!==void 0?Ke.state:null,Ke.updater=To,te.stateNode=Ke,Ke._reactInternals=te,Ke=te.stateNode,Ke.props=ke,Ke.state=te.memoizedState,Ke.refs={},kf(te),pn=de.contextType,Ke.context=typeof pn=="object"&&pn!==null?ys(pn):Pl,Ke.state=te.memoizedState,pn=de.getDerivedStateFromProps,typeof pn=="function"&&(Mc(te,de,pn,ke),Ke.state=te.memoizedState),typeof de.getDerivedStateFromProps=="function"||typeof Ke.getSnapshotBeforeUpdate=="function"||typeof Ke.UNSAFE_componentWillMount!="function"&&typeof Ke.componentWillMount!="function"||(pn=Ke.state,typeof Ke.componentWillMount=="function"&&Ke.componentWillMount(),typeof Ke.UNSAFE_componentWillMount=="function"&&Ke.UNSAFE_componentWillMount(),pn!==Ke.state&&To.enqueueReplaceState(Ke,Ke.state,null),Fu(te,ke,Ke,Ue),wd(),Ke.state=te.memoizedState),typeof Ke.componentDidMount=="function"&&(te.flags|=4194308),ke=!0}else if(Z===null){Ke=te.stateNode;var Vn=te.memoizedProps,Tr=Ol(de,Vn);Ke.props=Tr;var ei=Ke.context,pi=de.contextType;pn=Pl,typeof pi=="object"&&pi!==null&&(pn=ys(pi));var yi=de.getDerivedStateFromProps;pi=typeof yi=="function"||typeof Ke.getSnapshotBeforeUpdate=="function",Vn=te.pendingProps!==Vn,pi||typeof Ke.UNSAFE_componentWillReceiveProps!="function"&&typeof Ke.componentWillReceiveProps!="function"||(Vn||ei!==pn)&&Jh(te,Ke,ke,pn),tc=!1;var ri=te.memoizedState;Ke.state=ri,Fu(te,ke,Ke,Ue),wd(),ei=te.memoizedState,Vn||ri!==ei||tc?(typeof yi=="function"&&(Mc(te,de,yi,ke),ei=te.memoizedState),(Tr=tc||Qh(te,de,Tr,ke,ri,ei,pn))?(pi||typeof Ke.UNSAFE_componentWillMount!="function"&&typeof Ke.componentWillMount!="function"||(typeof Ke.componentWillMount=="function"&&Ke.componentWillMount(),typeof Ke.UNSAFE_componentWillMount=="function"&&Ke.UNSAFE_componentWillMount()),typeof Ke.componentDidMount=="function"&&(te.flags|=4194308)):(typeof Ke.componentDidMount=="function"&&(te.flags|=4194308),te.memoizedProps=ke,te.memoizedState=ei),Ke.props=ke,Ke.state=ei,Ke.context=pn,ke=Tr):(typeof Ke.componentDidMount=="function"&&(te.flags|=4194308),ke=!1)}else{Ke=te.stateNode,ca(Z,te),pn=te.memoizedProps,pi=Ol(de,pn),Ke.props=pi,yi=te.pendingProps,ri=Ke.context,ei=de.contextType,Tr=Pl,typeof ei=="object"&&ei!==null&&(Tr=ys(ei)),Vn=de.getDerivedStateFromProps,(ei=typeof Vn=="function"||typeof Ke.getSnapshotBeforeUpdate=="function")||typeof Ke.UNSAFE_componentWillReceiveProps!="function"&&typeof Ke.componentWillReceiveProps!="function"||(pn!==yi||ri!==Tr)&&Jh(te,Ke,ke,Tr),tc=!1,ri=te.memoizedState,Ke.state=ri,Fu(te,ke,Ke,Ue),wd();var ai=te.memoizedState;pn!==yi||ri!==ai||tc||Z!==null&&Z.dependencies!==null&&xd(Z.dependencies)?(typeof Vn=="function"&&(Mc(te,de,Vn,ke),ai=te.memoizedState),(pi=tc||Qh(te,de,pi,ke,ri,ai,Tr)||Z!==null&&Z.dependencies!==null&&xd(Z.dependencies))?(ei||typeof Ke.UNSAFE_componentWillUpdate!="function"&&typeof Ke.componentWillUpdate!="function"||(typeof Ke.componentWillUpdate=="function"&&Ke.componentWillUpdate(ke,ai,Tr),typeof Ke.UNSAFE_componentWillUpdate=="function"&&Ke.UNSAFE_componentWillUpdate(ke,ai,Tr)),typeof Ke.componentDidUpdate=="function"&&(te.flags|=4),typeof Ke.getSnapshotBeforeUpdate=="function"&&(te.flags|=1024)):(typeof Ke.componentDidUpdate!="function"||pn===Z.memoizedProps&&ri===Z.memoizedState||(te.flags|=4),typeof Ke.getSnapshotBeforeUpdate!="function"||pn===Z.memoizedProps&&ri===Z.memoizedState||(te.flags|=1024),te.memoizedProps=ke,te.memoizedState=ai),Ke.props=ke,Ke.state=ai,Ke.context=Tr,ke=pi):(typeof Ke.componentDidUpdate!="function"||pn===Z.memoizedProps&&ri===Z.memoizedState||(te.flags|=4),typeof Ke.getSnapshotBeforeUpdate!="function"||pn===Z.memoizedProps&&ri===Z.memoizedState||(te.flags|=1024),ke=!1)}return Ke=ke,lu(Z,te),ke=(te.flags&128)!==0,Ke||ke?(Ke=te.stateNode,de=ke&&typeof de.getDerivedStateFromError!="function"?null:Ke.render(),te.flags|=1,Z!==null&&ke?(te.child=iu(te,Z.child,null,Ue),te.child=iu(te,null,de,Ue)):Bs(Z,te,de,Ue),te.memoizedState=Ke.state,Z=te.child):Z=ro(Z,te,Ue),Z}function Ic(Z,te,de,ke){return Pu(),te.flags|=256,Bs(Z,te,de,ke),te.child}var Al={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sl(Z){return{baseLanes:Z,cachePool:$d()}}function Ks(Z,te,de){return Z=Z!==null?Z.childLanes&~de:0,te&&(Z|=hl),Z}function Wu(Z,te,de){var ke=te.pendingProps,Ue=!1,Ke=(te.flags&128)!==0,pn;if((pn=Ke)||(pn=Z!==null&&Z.memoizedState===null?!1:(Ps.current&2)!==0),pn&&(Ue=!0,te.flags&=-129),pn=(te.flags&32)!==0,te.flags&=-33,Z===null){if(sa){if(Ue?Tc(te):Rc(),sa){var Vn=Ji,Tr;if(Tr=Vn){e:{for(Tr=Vn,Vn=vo;Tr.nodeType!==8;){if(!Vn){Vn=null;break e}if(Tr=fc(Tr.nextSibling),Tr===null){Vn=null;break e}}Vn=Tr}Vn!==null?(te.memoizedState={dehydrated:Vn,treeContext:Ir!==null?{id:Dr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},Tr=$s(18,null,null,0),Tr.stateNode=Vn,Tr.return=te,te.child=Tr,la=te,Ji=null,Tr=!0):Tr=!1}Tr||So(te)}if(Vn=te.memoizedState,Vn!==null&&(Vn=Vn.dehydrated,Vn!==null))return Gp(Vn)?te.lanes=32:te.lanes=536870912,null;Ll(te)}return Vn=ke.children,ke=ke.fallback,Ue?(Rc(),Ue=te.mode,Vn=cu({mode:"hidden",children:Vn},Ue),ke=Bl(ke,Ue,de,null),Vn.return=te,ke.return=te,Vn.sibling=ke,te.child=Vn,Ue=te.child,Ue.memoizedState=Sl(de),Ue.childLanes=Ks(Z,pn,de),te.memoizedState=Al,ke):(Tc(te),Fl(te,Vn))}if(Tr=Z.memoizedState,Tr!==null&&(Vn=Tr.dehydrated,Vn!==null)){if(Ke)te.flags&256?(Tc(te),te.flags&=-257,te=fo(Z,te,de)):te.memoizedState!==null?(Rc(),te.child=Z.child,te.flags|=128,te=null):(Rc(),Ue=ke.fallback,Vn=te.mode,ke=cu({mode:"visible",children:ke.children},Vn),Ue=Bl(Ue,Vn,de,null),Ue.flags|=2,ke.return=te,Ue.return=te,ke.sibling=Ue,te.child=ke,iu(te,Z.child,null,de),ke=te.child,ke.memoizedState=Sl(de),ke.childLanes=Ks(Z,pn,de),te.memoizedState=Al,te=Ue);else if(Tc(te),Gp(Vn)){if(pn=Vn.nextSibling&&Vn.nextSibling.dataset,pn)var ei=pn.dgst;pn=ei,ke=Error(A(419)),ke.stack="",ke.digest=pn,eu({value:ke,source:null,stack:null}),te=fo(Z,te,de)}else if(eo||rl(Z,te,de,!1),pn=(de&Z.childLanes)!==0,eo||pn){if(pn=ma,pn!==null&&(ke=de&-de,ke=(ke&42)!==0?1:Gn(ke),ke=(ke&(pn.suspendedLanes|de))!==0?0:ke,ke!==0&&ke!==Tr.retryLane))throw Tr.retryLane=ke,nl(Z,ke),Mo(pn,Z,ke),tp;Vn.data==="$?"||ae(),te=fo(Z,te,de)}else Vn.data==="$?"?(te.flags|=192,te.child=Z.child,te=null):(Z=Tr.treeContext,Ji=fc(Vn.nextSibling),la=te,sa=!0,vs=null,vo=!1,Z!==null&&(xn[gr++]=Dr,xn[gr++]=$r,xn[gr++]=Ir,Dr=Z.id,$r=Z.overflow,Ir=te),te=Fl(te,ke.children),te.flags|=4096);return te}return Ue?(Rc(),Ue=ke.fallback,Vn=te.mode,Tr=Z.child,ei=Tr.sibling,ke=gs(Tr,{mode:"hidden",children:ke.children}),ke.subtreeFlags=Tr.subtreeFlags&65011712,ei!==null?Ue=gs(ei,Ue):(Ue=Bl(Ue,Vn,de,null),Ue.flags|=2),Ue.return=te,ke.return=te,ke.sibling=Ue,te.child=ke,ke=Ue,Ue=te.child,Vn=Z.child.memoizedState,Vn===null?Vn=Sl(de):(Tr=Vn.cachePool,Tr!==null?(ei=Fs._currentValue,Tr=Tr.parent!==ei?{parent:ei,pool:ei}:Tr):Tr=$d(),Vn={baseLanes:Vn.baseLanes|de,cachePool:Tr}),Ue.memoizedState=Vn,Ue.childLanes=Ks(Z,pn,de),te.memoizedState=Al,ke):(Tc(te),de=Z.child,Z=de.sibling,de=gs(de,{mode:"visible",children:ke.children}),de.return=te,de.sibling=null,Z!==null&&(pn=te.deletions,pn===null?(te.deletions=[Z],te.flags|=16):pn.push(Z)),te.child=de,te.memoizedState=null,de)}function Fl(Z,te){return te=cu({mode:"visible",children:te},Z.mode),te.return=Z,Z.child=te}function cu(Z,te){return Z=$s(22,Z,null,te),Z.lanes=0,Z.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},Z}function fo(Z,te,de){return iu(te,Z.child,null,de),Z=Fl(te,te.pendingProps.children),Z.flags|=2,te.memoizedState=null,Z}function ho(Z,te,de){Z.lanes|=te;var ke=Z.alternate;ke!==null&&(ke.lanes|=te),Tf(Z.return,te,de)}function Pa(Z,te,de,ke,Ue){var Ke=Z.memoizedState;Ke===null?Z.memoizedState={isBackwards:te,rendering:null,renderingStartTime:0,last:ke,tail:de,tailMode:Ue}:(Ke.isBackwards=te,Ke.rendering=null,Ke.renderingStartTime=0,Ke.last=ke,Ke.tail=de,Ke.tailMode=Ue)}function ll(Z,te,de){var ke=te.pendingProps,Ue=ke.revealOrder,Ke=ke.tail;if(Bs(Z,te,ke.children,de),ke=Ps.current,(ke&2)!==0)ke=ke&1|2,te.flags|=128;else{if(Z!==null&&(Z.flags&128)!==0)e:for(Z=te.child;Z!==null;){if(Z.tag===13)Z.memoizedState!==null&&ho(Z,de,te);else if(Z.tag===19)ho(Z,de,te);else if(Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===te)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===te)break e;Z=Z.return}Z.sibling.return=Z.return,Z=Z.sibling}ke&=1}switch(Wt(Ps,ke),Ue){case"forwards":for(de=te.child,Ue=null;de!==null;)Z=de.alternate,Z!==null&&sc(Z)===null&&(Ue=de),de=de.sibling;de=Ue,de===null?(Ue=te.child,te.child=null):(Ue=de.sibling,de.sibling=null),Pa(te,!1,Ue,de,Ke);break;case"backwards":for(de=null,Ue=te.child,te.child=null;Ue!==null;){if(Z=Ue.alternate,Z!==null&&sc(Z)===null){te.child=Ue;break}Z=Ue.sibling,Ue.sibling=de,de=Ue,Ue=Z}Pa(te,!0,de,null,Ke);break;case"together":Pa(te,!1,null,null,void 0);break;default:te.memoizedState=null}return te.child}function ro(Z,te,de){if(Z!==null&&(te.dependencies=Z.dependencies),Rl|=te.lanes,(de&te.childLanes)===0)if(Z!==null){if(rl(Z,te,de,!1),(de&te.childLanes)===0)return null}else return null;if(Z!==null&&te.child!==Z.child)throw Error(A(153));if(te.child!==null){for(Z=te.child,de=gs(Z,Z.pendingProps),te.child=de,de.return=te;Z.sibling!==null;)Z=Z.sibling,de=de.sibling=gs(Z,Z.pendingProps),de.return=te;de.sibling=null}return te.child}function Bd(Z,te){return(Z.lanes&te)!==0?!0:(Z=Z.dependencies,!!(Z!==null&&xd(Z)))}function cl(Z,te,de){switch(te.tag){case 3:In(te,te.stateNode.containerInfo),Ec(te,Fs,Z.memoizedState.cache),Pu();break;case 27:case 5:$n(te);break;case 4:In(te,te.stateNode.containerInfo);break;case 10:Ec(te,te.type,te.memoizedProps.value);break;case 13:var ke=te.memoizedState;if(ke!==null)return ke.dehydrated!==null?(Tc(te),te.flags|=128,null):(de&te.child.childLanes)!==0?Wu(Z,te,de):(Tc(te),Z=ro(Z,te,de),Z!==null?Z.sibling:null);Tc(te);break;case 19:var Ue=(Z.flags&128)!==0;if(ke=(de&te.childLanes)!==0,ke||(rl(Z,te,de,!1),ke=(de&te.childLanes)!==0),Ue){if(ke)return ll(Z,te,de);te.flags|=128}if(Ue=te.memoizedState,Ue!==null&&(Ue.rendering=null,Ue.tail=null,Ue.lastEffect=null),Wt(Ps,Ps.current),ke)break;return null;case 22:case 23:return te.lanes=0,su(Z,te,de);case 24:Ec(te,Fs,Z.memoizedState.cache)}return ro(Z,te,de)}function uu(Z,te,de){if(Z!==null)if(Z.memoizedProps!==te.pendingProps)eo=!0;else{if(!Bd(Z,de)&&(te.flags&128)===0)return eo=!1,cl(Z,te,de);eo=(Z.flags&131072)!==0}else eo=!1,sa&&(te.flags&1048576)!==0&&Li(te,jt,te.index);switch(te.lanes=0,te.tag){case 16:e:{Z=te.pendingProps;var ke=te.elementType,Ue=ke._init;if(ke=Ue(ke._payload),te.type=ke,typeof ke=="function")Xc(ke)?(Z=Ol(ke,Z),te.tag=1,te=qo(null,te,ke,Z,de)):(te.tag=0,te=$u(null,te,ke,Z,de));else{if(ke!=null){if(Ue=ke.$$typeof,Ue===ge){te.tag=11,te=Oo(null,te,ke,Z,de);break e}else if(Ue===ve){te.tag=14,te=Fo(null,te,ke,Z,de);break e}}throw te=Ge(ke)||ke,Error(A(306,te,""))}}return te;case 0:return $u(Z,te,te.type,te.pendingProps,de);case 1:return ke=te.type,Ue=Ol(ke,te.pendingProps),qo(Z,te,ke,Ue,de);case 3:e:{if(In(te,te.stateNode.containerInfo),Z===null)throw Error(A(387));ke=te.pendingProps;var Ke=te.memoizedState;Ue=Ke.element,ca(Z,te),Fu(te,ke,null,de);var pn=te.memoizedState;if(ke=pn.cache,Ec(te,Fs,ke),ke!==Ke.cache&&vd(te,[Fs],de,!0),wd(),ke=pn.element,Ke.isDehydrated)if(Ke={element:ke,isDehydrated:!1,cache:pn.cache},te.updateQueue.baseState=Ke,te.memoizedState=Ke,te.flags&256){te=Ic(Z,te,ke,de);break e}else if(ke!==Ue){Ue=qs(Error(A(424)),te),eu(Ue),te=Ic(Z,te,ke,de);break e}else{switch(Z=te.stateNode.containerInfo,Z.nodeType){case 9:Z=Z.body;break;default:Z=Z.nodeName==="HTML"?Z.ownerDocument.body:Z}for(Ji=fc(Z.firstChild),la=te,sa=!0,vs=null,vo=!0,de=Yh(te,null,ke,de),te.child=de;de;)de.flags=de.flags&-3|4096,de=de.sibling}else{if(Pu(),ke===Ue){te=ro(Z,te,de);break e}Bs(Z,te,ke,de)}te=te.child}return te;case 26:return lu(Z,te),Z===null?(de=ym(te.type,null,te.pendingProps,null))?te.memoizedState=de:sa||(de=te.type,Z=te.pendingProps,ke=op(Mn.current).createElement(de),ke[Ar]=te,ke[Tn]=Z,Io(ke,de,Z),Hn(ke),te.stateNode=ke):te.memoizedState=ym(te.type,Z.memoizedProps,te.pendingProps,Z.memoizedState),null;case 27:return $n(te),Z===null&&sa&&(ke=te.stateNode=vm(te.type,te.pendingProps,Mn.current),la=te,vo=!0,Ue=Ji,id(te.type)?(zp=Ue,Ji=fc(ke.firstChild)):Ji=Ue),Bs(Z,te,te.pendingProps.children,de),lu(Z,te),Z===null&&(te.flags|=4194304),te.child;case 5:return Z===null&&sa&&((Ue=ke=Ji)&&(ke=Zm(ke,te.type,te.pendingProps,vo),ke!==null?(te.stateNode=ke,la=te,Ji=fc(ke.firstChild),vo=!1,Ue=!0):Ue=!1),Ue||So(te)),$n(te),Ue=te.type,Ke=te.pendingProps,pn=Z!==null?Z.memoizedProps:null,ke=Ke.children,Fp(Ue,Ke)?ke=null:pn!==null&&Fp(Ue,pn)&&(te.flags|=32),te.memoizedState!==null&&(Ue=ic(Z,te,Ep,null,null,de),oh._currentValue=Ue),lu(Z,te),Bs(Z,te,ke,de),te.child;case 6:return Z===null&&sa&&((Z=de=Ji)&&(de=eg(de,te.pendingProps,vo),de!==null?(te.stateNode=de,la=te,Ji=null,Z=!0):Z=!1),Z||So(te)),null;case 13:return Wu(Z,te,de);case 4:return In(te,te.stateNode.containerInfo),ke=te.pendingProps,Z===null?te.child=iu(te,null,ke,de):Bs(Z,te,ke,de),te.child;case 11:return Oo(Z,te,te.type,te.pendingProps,de);case 7:return Bs(Z,te,te.pendingProps,de),te.child;case 8:return Bs(Z,te,te.pendingProps.children,de),te.child;case 12:return Bs(Z,te,te.pendingProps.children,de),te.child;case 10:return ke=te.pendingProps,Ec(te,te.type,ke.value),Bs(Z,te,ke.children,de),te.child;case 9:return Ue=te.type._context,ke=te.pendingProps.children,Dl(te),Ue=ys(Ue),ke=ke(Ue),te.flags|=1,Bs(Z,te,ke,de),te.child;case 14:return Fo(Z,te,te.type,te.pendingProps,de);case 15:return Xf(Z,te,te.type,te.pendingProps,de);case 19:return ll(Z,te,de);case 31:return ke=te.pendingProps,de=te.mode,ke={mode:ke.mode,children:ke.children},Z===null?(de=cu(ke,de),de.ref=te.ref,te.child=de,de.return=te,te=de):(de=gs(Z.child,ke),de.ref=te.ref,te.child=de,de.return=te,te=de),te;case 22:return su(Z,te,de);case 24:return Dl(te),ke=ys(Fs),Z===null?(Ue=Ac(),Ue===null&&(Ue=ma,Ke=Hd(),Ue.pooledCache=Ke,Ke.refCount++,Ke!==null&&(Ue.pooledCacheLanes|=de),Ue=Ke),te.memoizedState={parent:ke,cache:Ue},kf(te),Ec(te,Fs,Ue)):((Z.lanes&de)!==0&&(ca(Z,te),Fu(te,null,null,de),wd()),Ue=Z.memoizedState,Ke=te.memoizedState,Ue.parent!==ke?(Ue={parent:ke,cache:ke},te.memoizedState=Ue,te.lanes===0&&(te.memoizedState=te.updateQueue.baseState=Ue),Ec(te,Fs,ke)):(ke=Ke.cache,Ec(te,Fs,ke),ke!==Ue.cache&&vd(te,[Fs],de,!0))),Bs(Z,te,te.pendingProps.children,de),te.child;case 29:throw te.pendingProps}throw Error(A(156,te.tag))}function Cl(Z){Z.flags|=4}function Dd(Z,te){if(te.type!=="stylesheet"||(te.state.loading&4)!==0)Z.flags&=-16777217;else if(Z.flags|=16777216,!Cm(te)){if(te=Ya.current,te!==null&&((ea&4194048)===ea?El!==null:(ea&62914560)!==ea&&(ea&536870912)===0||te!==El))throw al=Cd,Mf;Z.flags|=8192}}function oc(Z,te){te!==null&&(Z.flags|=4),Z.flags&16384&&(te=Z.tag!==22?Br():536870912,Z.lanes|=te,La|=te)}function du(Z,te){if(!sa)switch(Z.tailMode){case"hidden":te=Z.tail;for(var de=null;te!==null;)te.alternate!==null&&(de=te),te=te.sibling;de===null?Z.tail=null:de.sibling=null;break;case"collapsed":de=Z.tail;for(var ke=null;de!==null;)de.alternate!==null&&(ke=de),de=de.sibling;ke===null?te||Z.tail===null?Z.tail=null:Z.tail.sibling=null:ke.sibling=null}}function as(Z){var te=Z.alternate!==null&&Z.alternate.child===Z.child,de=0,ke=0;if(te)for(var Ue=Z.child;Ue!==null;)de|=Ue.lanes|Ue.childLanes,ke|=Ue.subtreeFlags&65011712,ke|=Ue.flags&65011712,Ue.return=Z,Ue=Ue.sibling;else for(Ue=Z.child;Ue!==null;)de|=Ue.lanes|Ue.childLanes,ke|=Ue.subtreeFlags,ke|=Ue.flags,Ue.return=Z,Ue=Ue.sibling;return Z.subtreeFlags|=ke,Z.childLanes=de,te}function Qf(Z,te,de){var ke=te.pendingProps;switch(pa(te),te.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(te),null;case 1:return as(te),null;case 3:return de=te.stateNode,ke=null,Z!==null&&(ke=Z.memoizedState.cache),te.memoizedState.cache!==ke&&(te.flags|=2048),ec(Fs),Zn(),de.pendingContext&&(de.context=de.pendingContext,de.pendingContext=null),(Z===null||Z.child===null)&&(xl(te)?Cl(te):Z===null||Z.memoizedState.isDehydrated&&(te.flags&256)===0||(te.flags|=1024,Va())),as(te),null;case 26:return de=te.memoizedState,Z===null?(Cl(te),de!==null?(as(te),Dd(te,de)):(as(te),te.flags&=-16777217)):de?de!==Z.memoizedState?(Cl(te),as(te),Dd(te,de)):(as(te),te.flags&=-16777217):(Z.memoizedProps!==ke&&Cl(te),as(te),te.flags&=-16777217),null;case 27:Rn(te),de=Mn.current;var Ue=te.type;if(Z!==null&&te.stateNode!=null)Z.memoizedProps!==ke&&Cl(te);else{if(!ke){if(te.stateNode===null)throw Error(A(166));return as(te),null}Z=Bn.current,xl(te)?Zc(te):(Z=vm(Ue,ke,de),te.stateNode=Z,Cl(te))}return as(te),null;case 5:if(Rn(te),de=te.type,Z!==null&&te.stateNode!=null)Z.memoizedProps!==ke&&Cl(te);else{if(!ke){if(te.stateNode===null)throw Error(A(166));return as(te),null}if(Z=Bn.current,xl(te))Zc(te);else{switch(Ue=op(Mn.current),Z){case 1:Z=Ue.createElementNS("http://www.w3.org/2000/svg",de);break;case 2:Z=Ue.createElementNS("http://www.w3.org/1998/Math/MathML",de);break;default:switch(de){case"svg":Z=Ue.createElementNS("http://www.w3.org/2000/svg",de);break;case"math":Z=Ue.createElementNS("http://www.w3.org/1998/Math/MathML",de);break;case"script":Z=Ue.createElement("div"),Z.innerHTML="<script><\/script>",Z=Z.removeChild(Z.firstChild);break;case"select":Z=typeof ke.is=="string"?Ue.createElement("select",{is:ke.is}):Ue.createElement("select"),ke.multiple?Z.multiple=!0:ke.size&&(Z.size=ke.size);break;default:Z=typeof ke.is=="string"?Ue.createElement(de,{is:ke.is}):Ue.createElement(de)}}Z[Ar]=te,Z[Tn]=ke;e:for(Ue=te.child;Ue!==null;){if(Ue.tag===5||Ue.tag===6)Z.appendChild(Ue.stateNode);else if(Ue.tag!==4&&Ue.tag!==27&&Ue.child!==null){Ue.child.return=Ue,Ue=Ue.child;continue}if(Ue===te)break e;for(;Ue.sibling===null;){if(Ue.return===null||Ue.return===te)break e;Ue=Ue.return}Ue.sibling.return=Ue.return,Ue=Ue.sibling}te.stateNode=Z;e:switch(Io(Z,de,ke),de){case"button":case"input":case"select":case"textarea":Z=!!ke.autoFocus;break e;case"img":Z=!0;break e;default:Z=!1}Z&&Cl(te)}}return as(te),te.flags&=-16777217,null;case 6:if(Z&&te.stateNode!=null)Z.memoizedProps!==ke&&Cl(te);else{if(typeof ke!="string"&&te.stateNode===null)throw Error(A(166));if(Z=Mn.current,xl(te)){if(Z=te.stateNode,de=te.memoizedProps,ke=null,Ue=la,Ue!==null)switch(Ue.tag){case 27:case 5:ke=Ue.memoizedProps}Z[Ar]=te,Z=!!(Z.nodeValue===de||ke!==null&&ke.suppressHydrationWarning===!0||um(Z.nodeValue,de)),Z||So(te)}else Z=op(Z).createTextNode(ke),Z[Ar]=te,te.stateNode=Z}return as(te),null;case 13:if(ke=te.memoizedState,Z===null||Z.memoizedState!==null&&Z.memoizedState.dehydrated!==null){if(Ue=xl(te),ke!==null&&ke.dehydrated!==null){if(Z===null){if(!Ue)throw Error(A(318));if(Ue=te.memoizedState,Ue=Ue!==null?Ue.dehydrated:null,!Ue)throw Error(A(317));Ue[Ar]=te}else Pu(),(te.flags&128)===0&&(te.memoizedState=null),te.flags|=4;as(te),Ue=!1}else Ue=Va(),Z!==null&&Z.memoizedState!==null&&(Z.memoizedState.hydrationErrors=Ue),Ue=!0;if(!Ue)return te.flags&256?(Ll(te),te):(Ll(te),null)}if(Ll(te),(te.flags&128)!==0)return te.lanes=de,te;if(de=ke!==null,Z=Z!==null&&Z.memoizedState!==null,de){ke=te.child,Ue=null,ke.alternate!==null&&ke.alternate.memoizedState!==null&&ke.alternate.memoizedState.cachePool!==null&&(Ue=ke.alternate.memoizedState.cachePool.pool);var Ke=null;ke.memoizedState!==null&&ke.memoizedState.cachePool!==null&&(Ke=ke.memoizedState.cachePool.pool),Ke!==Ue&&(ke.flags|=2048)}return de!==Z&&de&&(te.child.flags|=8192),oc(te,te.updateQueue),as(te),null;case 4:return Zn(),Z===null&&Bp(te.stateNode.containerInfo),as(te),null;case 10:return ec(te.type),as(te),null;case 19:if(Qt(Ps),Ue=te.memoizedState,Ue===null)return as(te),null;if(ke=(te.flags&128)!==0,Ke=Ue.rendering,Ke===null)if(ke)du(Ue,!1);else{if(fs!==0||Z!==null&&(Z.flags&128)!==0)for(Z=te.child;Z!==null;){if(Ke=sc(Z),Ke!==null){for(te.flags|=128,du(Ue,!1),Z=Ke.updateQueue,te.updateQueue=Z,oc(te,Z),te.subtreeFlags=0,Z=de,de=te.child;de!==null;)gd(de,Z),de=de.sibling;return Wt(Ps,Ps.current&1|2),te.child}Z=Z.sibling}Ue.tail!==null&&jn()>xo&&(te.flags|=128,ke=!0,du(Ue,!1),te.lanes=4194304)}else{if(!ke)if(Z=sc(Ke),Z!==null){if(te.flags|=128,ke=!0,Z=Z.updateQueue,te.updateQueue=Z,oc(te,Z),du(Ue,!0),Ue.tail===null&&Ue.tailMode==="hidden"&&!Ke.alternate&&!sa)return as(te),null}else 2*jn()-Ue.renderingStartTime>xo&&de!==536870912&&(te.flags|=128,ke=!0,du(Ue,!1),te.lanes=4194304);Ue.isBackwards?(Ke.sibling=te.child,te.child=Ke):(Z=Ue.last,Z!==null?Z.sibling=Ke:te.child=Ke,Ue.last=Ke)}return Ue.tail!==null?(te=Ue.tail,Ue.rendering=te,Ue.tail=te.sibling,Ue.renderingStartTime=jn(),te.sibling=null,Z=Ps.current,Wt(Ps,ke?Z&1|2:Z&1),te):(as(te),null);case 22:case 23:return Ll(te),Td(),ke=te.memoizedState!==null,Z!==null?Z.memoizedState!==null!==ke&&(te.flags|=8192):ke&&(te.flags|=8192),ke?(de&536870912)!==0&&(te.flags&128)===0&&(as(te),te.subtreeFlags&6&&(te.flags|=8192)):as(te),de=te.updateQueue,de!==null&&oc(te,de.retryQueue),de=null,Z!==null&&Z.memoizedState!==null&&Z.memoizedState.cachePool!==null&&(de=Z.memoizedState.cachePool.pool),ke=null,te.memoizedState!==null&&te.memoizedState.cachePool!==null&&(ke=te.memoizedState.cachePool.pool),ke!==de&&(te.flags|=2048),Z!==null&&Qt(il),null;case 24:return de=null,Z!==null&&(de=Z.memoizedState.cache),te.memoizedState.cache!==de&&(te.flags|=2048),ec(Fs),as(te),null;case 25:return null;case 30:return null}throw Error(A(156,te.tag))}function Ku(Z,te){switch(pa(te),te.tag){case 1:return Z=te.flags,Z&65536?(te.flags=Z&-65537|128,te):null;case 3:return ec(Fs),Zn(),Z=te.flags,(Z&65536)!==0&&(Z&128)===0?(te.flags=Z&-65537|128,te):null;case 26:case 27:case 5:return Rn(te),null;case 13:if(Ll(te),Z=te.memoizedState,Z!==null&&Z.dehydrated!==null){if(te.alternate===null)throw Error(A(340));Pu()}return Z=te.flags,Z&65536?(te.flags=Z&-65537|128,te):null;case 19:return Qt(Ps),null;case 4:return Zn(),null;case 10:return ec(te.type),null;case 22:case 23:return Ll(te),Td(),Z!==null&&Qt(il),Z=te.flags,Z&65536?(te.flags=Z&-65537|128,te):null;case 24:return ec(Fs),null;case 25:return null;default:return null}}function Yu(Z,te){switch(pa(te),te.tag){case 3:ec(Fs),Zn();break;case 26:case 27:case 5:Rn(te);break;case 4:Zn();break;case 13:Ll(te);break;case 19:Qt(Ps);break;case 10:ec(te.type);break;case 22:case 23:Ll(te),Td(),Z!==null&&Qt(il);break;case 24:ec(Fs)}}function fu(Z,te){try{var de=te.updateQueue,ke=de!==null?de.lastEffect:null;if(ke!==null){var Ue=ke.next;de=Ue;do{if((de.tag&Z)===Z){ke=void 0;var Ke=de.create,pn=de.inst;ke=Ke(),pn.destroy=ke}de=de.next}while(de!==Ue)}}catch(Vn){jr(te,te.return,Vn)}}function $o(Z,te,de){try{var ke=te.updateQueue,Ue=ke!==null?ke.lastEffect:null;if(Ue!==null){var Ke=Ue.next;ke=Ke;do{if((ke.tag&Z)===Z){var pn=ke.inst,Vn=pn.destroy;if(Vn!==void 0){pn.destroy=void 0,Ue=te;var Tr=de,ei=Vn;try{ei()}catch(pi){jr(Ue,Tr,pi)}}}ke=ke.next}while(ke!==Ke)}}catch(pi){jr(te,te.return,pi)}}function hu(Z){var te=Z.updateQueue;if(te!==null){var de=Z.stateNode;try{mh(te,de)}catch(ke){jr(Z,Z.return,ke)}}}function lc(Z,te,de){de.props=Ol(Z.type,Z.memoizedProps),de.state=Z.memoizedState;try{de.componentWillUnmount()}catch(ke){jr(Z,te,ke)}}function pu(Z,te){try{var de=Z.ref;if(de!==null){switch(Z.tag){case 26:case 27:case 5:var ke=Z.stateNode;break;case 30:ke=Z.stateNode;break;default:ke=Z.stateNode}typeof de=="function"?Z.refCleanup=de(ke):de.current=ke}}catch(Ue){jr(Z,te,Ue)}}function Ul(Z,te){var de=Z.ref,ke=Z.refCleanup;if(de!==null)if(typeof ke=="function")try{ke()}catch(Ue){jr(Z,te,Ue)}finally{Z.refCleanup=null,Z=Z.alternate,Z!=null&&(Z.refCleanup=null)}else if(typeof de=="function")try{de(null)}catch(Ue){jr(Z,te,Ue)}else de.current=null}function Xu(Z){var te=Z.type,de=Z.memoizedProps,ke=Z.stateNode;try{e:switch(te){case"button":case"input":case"select":case"textarea":de.autoFocus&&ke.focus();break e;case"img":de.src?ke.src=de.src:de.srcSet&&(ke.srcset=de.srcSet)}}catch(Ue){jr(Z,Z.return,Ue)}}function jd(Z,te,de){try{var ke=Z.stateNode;Km(ke,Z.type,de,te),ke[Tn]=te}catch(Ue){jr(Z,Z.return,Ue)}}function Ld(Z){return Z.tag===5||Z.tag===3||Z.tag===26||Z.tag===27&&id(Z.type)||Z.tag===4}function kc(Z){e:for(;;){for(;Z.sibling===null;){if(Z.return===null||Ld(Z.return))return null;Z=Z.return}for(Z.sibling.return=Z.return,Z=Z.sibling;Z.tag!==5&&Z.tag!==6&&Z.tag!==18;){if(Z.tag===27&&id(Z.type)||Z.flags&2||Z.child===null||Z.tag===4)continue e;Z.child.return=Z,Z=Z.child}if(!(Z.flags&2))return Z.stateNode}}function Nc(Z,te,de){var ke=Z.tag;if(ke===5||ke===6)Z=Z.stateNode,te?(de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de).insertBefore(Z,te):(te=de.nodeType===9?de.body:de.nodeName==="HTML"?de.ownerDocument.body:de,te.appendChild(Z),de=de._reactRootContainer,de!=null||te.onclick!==null||(te.onclick=sp));else if(ke!==4&&(ke===27&&id(Z.type)&&(de=Z.stateNode,te=null),Z=Z.child,Z!==null))for(Nc(Z,te,de),Z=Z.sibling;Z!==null;)Nc(Z,te,de),Z=Z.sibling}function Pc(Z,te,de){var ke=Z.tag;if(ke===5||ke===6)Z=Z.stateNode,te?de.insertBefore(Z,te):de.appendChild(Z);else if(ke!==4&&(ke===27&&id(Z.type)&&(de=Z.stateNode),Z=Z.child,Z!==null))for(Pc(Z,te,de),Z=Z.sibling;Z!==null;)Pc(Z,te,de),Z=Z.sibling}function Bc(Z){var te=Z.stateNode,de=Z.memoizedProps;try{for(var ke=Z.type,Ue=te.attributes;Ue.length;)te.removeAttributeNode(Ue[0]);Io(te,ke,de),te[Ar]=Z,te[Tn]=de}catch(Ke){jr(Z,Z.return,Ke)}}var Vl=!1,ss=!1,Qu=!1,Wo=typeof WeakSet=="function"?WeakSet:Set,Xa=null;function Ys(Z,te){if(Z=Z.containerInfo,Lp=hp,Z=wu(Z),zc(Z)){if("selectionStart"in Z)var de={start:Z.selectionStart,end:Z.selectionEnd};else e:{de=(de=Z.ownerDocument)&&de.defaultView||window;var ke=de.getSelection&&de.getSelection();if(ke&&ke.rangeCount!==0){de=ke.anchorNode;var Ue=ke.anchorOffset,Ke=ke.focusNode;ke=ke.focusOffset;try{de.nodeType,Ke.nodeType}catch{de=null;break e}var pn=0,Vn=-1,Tr=-1,ei=0,pi=0,yi=Z,ri=null;t:for(;;){for(var ai;yi!==de||Ue!==0&&yi.nodeType!==3||(Vn=pn+Ue),yi!==Ke||ke!==0&&yi.nodeType!==3||(Tr=pn+ke),yi.nodeType===3&&(pn+=yi.nodeValue.length),(ai=yi.firstChild)!==null;)ri=yi,yi=ai;for(;;){if(yi===Z)break t;if(ri===de&&++ei===Ue&&(Vn=pn),ri===Ke&&++pi===ke&&(Tr=pn),(ai=yi.nextSibling)!==null)break;yi=ri,ri=yi.parentNode}yi=ai}de=Vn===-1||Tr===-1?null:{start:Vn,end:Tr}}else de=null}de=de||{start:0,end:0}}else de=null;for(Op={focusedElem:Z,selectionRange:de},hp=!1,Xa=te;Xa!==null;)if(te=Xa,Z=te.child,(te.subtreeFlags&1024)!==0&&Z!==null)Z.return=te,Xa=Z;else for(;Xa!==null;){switch(te=Xa,Ke=te.alternate,Z=te.flags,te.tag){case 0:break;case 11:case 15:break;case 1:if((Z&1024)!==0&&Ke!==null){Z=void 0,de=te,Ue=Ke.memoizedProps,Ke=Ke.memoizedState,ke=de.stateNode;try{var fa=Ol(de.type,Ue,de.elementType===de.type);Z=ke.getSnapshotBeforeUpdate(fa,Ke),ke.__reactInternalSnapshotBeforeUpdate=Z}catch(ia){jr(de,de.return,ia)}}break;case 3:if((Z&1024)!==0){if(Z=te.stateNode.containerInfo,de=Z.nodeType,de===9)Vp(Z);else if(de===1)switch(Z.nodeName){case"HEAD":case"HTML":case"BODY":Vp(Z);break;default:Z.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((Z&1024)!==0)throw Error(A(163))}if(Z=te.sibling,Z!==null){Z.return=te.return,Xa=Z;break}Xa=te.return}}function cc(Z,te,de){var ke=de.flags;switch(de.tag){case 0:case 11:case 15:Ro(Z,de),ke&4&&fu(5,de);break;case 1:if(Ro(Z,de),ke&4)if(Z=de.stateNode,te===null)try{Z.componentDidMount()}catch(pn){jr(de,de.return,pn)}else{var Ue=Ol(de.type,te.memoizedProps);te=te.memoizedState;try{Z.componentDidUpdate(Ue,te,Z.__reactInternalSnapshotBeforeUpdate)}catch(pn){jr(de,de.return,pn)}}ke&64&&hu(de),ke&512&&pu(de,de.return);break;case 3:if(Ro(Z,de),ke&64&&(Z=de.updateQueue,Z!==null)){if(te=null,de.child!==null)switch(de.child.tag){case 27:case 5:te=de.child.stateNode;break;case 1:te=de.child.stateNode}try{mh(Z,te)}catch(pn){jr(de,de.return,pn)}}break;case 27:te===null&&ke&4&&Bc(de);case 26:case 5:Ro(Z,de),te===null&&ke&4&&Xu(de),ke&512&&pu(de,de.return);break;case 12:Ro(Z,de);break;case 13:Ro(Z,de),ke&4&&Dc(Z,de),ke&64&&(Z=de.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null&&(de=hs.bind(null,de),tg(Z,de))));break;case 22:if(ke=de.memoizedState!==null||Vl,!ke){te=te!==null&&te.memoizedState!==null||ss,Ue=Vl;var Ke=ss;Vl=ke,(ss=te)&&!Ke?Gl(Z,de,(de.subtreeFlags&8772)!==0):Ro(Z,de),Vl=Ue,ss=Ke}break;case 30:break;default:Ro(Z,de)}}function Ca(Z){var te=Z.alternate;te!==null&&(Z.alternate=null,Ca(te)),Z.child=null,Z.deletions=null,Z.sibling=null,Z.tag===5&&(te=Z.stateNode,te!==null&&rr(te)),Z.stateNode=null,Z.return=null,Z.dependencies=null,Z.memoizedProps=null,Z.memoizedState=null,Z.pendingProps=null,Z.stateNode=null,Z.updateQueue=null}var na=null,ja=!1;function ul(Z,te,de){for(de=de.child;de!==null;)mu(Z,te,de),de=de.sibling}function mu(Z,te,de){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(kn,de)}catch{}switch(de.tag){case 26:ss||Ul(de,te),ul(Z,te,de),de.memoizedState?de.memoizedState.count--:de.stateNode&&(de=de.stateNode,de.parentNode.removeChild(de));break;case 27:ss||Ul(de,te);var ke=na,Ue=ja;id(de.type)&&(na=de.stateNode,ja=!1),ul(Z,te,de),rh(de.stateNode),na=ke,ja=Ue;break;case 5:ss||Ul(de,te);case 6:if(ke=na,Ue=ja,na=null,ul(Z,te,de),na=ke,ja=Ue,na!==null)if(ja)try{(na.nodeType===9?na.body:na.nodeName==="HTML"?na.ownerDocument.body:na).removeChild(de.stateNode)}catch(Ke){jr(de,te,Ke)}else try{na.removeChild(de.stateNode)}catch(Ke){jr(de,te,Ke)}break;case 18:na!==null&&(ja?(Z=na,mm(Z.nodeType===9?Z.body:Z.nodeName==="HTML"?Z.ownerDocument.body:Z,de.stateNode),dh(Z)):mm(na,de.stateNode));break;case 4:ke=na,Ue=ja,na=de.stateNode.containerInfo,ja=!0,ul(Z,te,de),na=ke,ja=Ue;break;case 0:case 11:case 14:case 15:ss||$o(2,de,te),ss||$o(4,de,te),ul(Z,te,de);break;case 1:ss||(Ul(de,te),ke=de.stateNode,typeof ke.componentWillUnmount=="function"&&lc(de,te,ke)),ul(Z,te,de);break;case 21:ul(Z,te,de);break;case 22:ss=(ke=ss)||de.memoizedState!==null,ul(Z,te,de),ss=ke;break;default:ul(Z,te,de)}}function Dc(Z,te){if(te.memoizedState===null&&(Z=te.alternate,Z!==null&&(Z=Z.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))))try{dh(Z)}catch(de){jr(te,te.return,de)}}function ff(Z){switch(Z.tag){case 13:case 19:var te=Z.stateNode;return te===null&&(te=Z.stateNode=new Wo),te;case 22:return Z=Z.stateNode,te=Z._retryCache,te===null&&(te=Z._retryCache=new Wo),te;default:throw Error(A(435,Z.tag))}}function gu(Z,te){var de=ff(Z);te.forEach(function(ke){var Ue=ua.bind(null,Z,ke);de.has(ke)||(de.add(ke),ke.then(Ue,Ue))})}function io(Z,te){var de=te.deletions;if(de!==null)for(var ke=0;ke<de.length;ke++){var Ue=de[ke],Ke=Z,pn=te,Vn=pn;e:for(;Vn!==null;){switch(Vn.tag){case 27:if(id(Vn.type)){na=Vn.stateNode,ja=!1;break e}break;case 5:na=Vn.stateNode,ja=!1;break e;case 3:case 4:na=Vn.stateNode.containerInfo,ja=!0;break e}Vn=Vn.return}if(na===null)throw Error(A(160));mu(Ke,pn,Ue),na=null,ja=!1,Ke=Ue.alternate,Ke!==null&&(Ke.return=null),Ue.return=null}if(te.subtreeFlags&13878)for(te=te.child;te!==null;)hf(te,Z),te=te.sibling}var wl=null;function hf(Z,te){var de=Z.alternate,ke=Z.flags;switch(Z.tag){case 0:case 11:case 14:case 15:io(te,Z),bs(Z),ke&4&&($o(3,Z,Z.return),fu(3,Z),$o(5,Z,Z.return));break;case 1:io(te,Z),bs(Z),ke&512&&(ss||de===null||Ul(de,de.return)),ke&64&&Vl&&(Z=Z.updateQueue,Z!==null&&(ke=Z.callbacks,ke!==null&&(de=Z.shared.hiddenCallbacks,Z.shared.hiddenCallbacks=de===null?ke:de.concat(ke))));break;case 26:var Ue=wl;if(io(te,Z),bs(Z),ke&512&&(ss||de===null||Ul(de,de.return)),ke&4){var Ke=de!==null?de.memoizedState:null;if(ke=Z.memoizedState,de===null)if(ke===null)if(Z.stateNode===null){e:{ke=Z.type,de=Z.memoizedProps,Ue=Ue.ownerDocument||Ue;t:switch(ke){case"title":Ke=Ue.getElementsByTagName("title")[0],(!Ke||Ke[sr]||Ke[Ar]||Ke.namespaceURI==="http://www.w3.org/2000/svg"||Ke.hasAttribute("itemprop"))&&(Ke=Ue.createElement(ke),Ue.head.insertBefore(Ke,Ue.querySelector("head > title"))),Io(Ke,ke,de),Ke[Ar]=Z,Hn(Ke),ke=Ke;break e;case"link":var pn=Am("link","href",Ue).get(ke+(de.href||""));if(pn){for(var Vn=0;Vn<pn.length;Vn++)if(Ke=pn[Vn],Ke.getAttribute("href")===(de.href==null||de.href===""?null:de.href)&&Ke.getAttribute("rel")===(de.rel==null?null:de.rel)&&Ke.getAttribute("title")===(de.title==null?null:de.title)&&Ke.getAttribute("crossorigin")===(de.crossOrigin==null?null:de.crossOrigin)){pn.splice(Vn,1);break t}}Ke=Ue.createElement(ke),Io(Ke,ke,de),Ue.head.appendChild(Ke);break;case"meta":if(pn=Am("meta","content",Ue).get(ke+(de.content||""))){for(Vn=0;Vn<pn.length;Vn++)if(Ke=pn[Vn],Ke.getAttribute("content")===(de.content==null?null:""+de.content)&&Ke.getAttribute("name")===(de.name==null?null:de.name)&&Ke.getAttribute("property")===(de.property==null?null:de.property)&&Ke.getAttribute("http-equiv")===(de.httpEquiv==null?null:de.httpEquiv)&&Ke.getAttribute("charset")===(de.charSet==null?null:de.charSet)){pn.splice(Vn,1);break t}}Ke=Ue.createElement(ke),Io(Ke,ke,de),Ue.head.appendChild(Ke);break;default:throw Error(A(468,ke))}Ke[Ar]=Z,Hn(Ke),ke=Ke}Z.stateNode=ke}else Sm(Ue,Z.type,Z.stateNode);else Z.stateNode=Em(Ue,ke,Z.memoizedProps);else Ke!==ke?(Ke===null?de.stateNode!==null&&(de=de.stateNode,de.parentNode.removeChild(de)):Ke.count--,ke===null?Sm(Ue,Z.type,Z.stateNode):Em(Ue,ke,Z.memoizedProps)):ke===null&&Z.stateNode!==null&&jd(Z,Z.memoizedProps,de.memoizedProps)}break;case 27:io(te,Z),bs(Z),ke&512&&(ss||de===null||Ul(de,de.return)),de!==null&&ke&4&&jd(Z,Z.memoizedProps,de.memoizedProps);break;case 5:if(io(te,Z),bs(Z),ke&512&&(ss||de===null||Ul(de,de.return)),Z.flags&32){Ue=Z.stateNode;try{di(Ue,"")}catch(ai){jr(Z,Z.return,ai)}}ke&4&&Z.stateNode!=null&&(Ue=Z.memoizedProps,jd(Z,Ue,de!==null?de.memoizedProps:Ue)),ke&1024&&(Qu=!0);break;case 6:if(io(te,Z),bs(Z),ke&4){if(Z.stateNode===null)throw Error(A(162));ke=Z.memoizedProps,de=Z.stateNode;try{de.nodeValue=ke}catch(ai){jr(Z,Z.return,ai)}}break;case 3:if(up=null,Ue=wl,wl=lp(te.containerInfo),io(te,Z),wl=Ue,bs(Z),ke&4&&de!==null&&de.memoizedState.isDehydrated)try{dh(te.containerInfo)}catch(ai){jr(Z,Z.return,ai)}Qu&&(Qu=!1,jc(Z));break;case 4:ke=wl,wl=lp(Z.stateNode.containerInfo),io(te,Z),bs(Z),wl=ke;break;case 12:io(te,Z),bs(Z);break;case 13:io(te,Z),bs(Z),Z.child.flags&8192&&Z.memoizedState!==null!=(de!==null&&de.memoizedState!==null)&&(Ka=jn()),ke&4&&(ke=Z.updateQueue,ke!==null&&(Z.updateQueue=null,gu(Z,ke)));break;case 22:Ue=Z.memoizedState!==null;var Tr=de!==null&&de.memoizedState!==null,ei=Vl,pi=ss;if(Vl=ei||Ue,ss=pi||Tr,io(te,Z),ss=pi,Vl=ei,bs(Z),ke&8192)e:for(te=Z.stateNode,te._visibility=Ue?te._visibility&-2:te._visibility|1,Ue&&(de===null||Tr||Vl||ss||Ko(Z)),de=null,te=Z;;){if(te.tag===5||te.tag===26){if(de===null){Tr=de=te;try{if(Ke=Tr.stateNode,Ue)pn=Ke.style,typeof pn.setProperty=="function"?pn.setProperty("display","none","important"):pn.display="none";else{Vn=Tr.stateNode;var yi=Tr.memoizedProps.style,ri=yi!=null&&yi.hasOwnProperty("display")?yi.display:null;Vn.style.display=ri==null||typeof ri=="boolean"?"":(""+ri).trim()}}catch(ai){jr(Tr,Tr.return,ai)}}}else if(te.tag===6){if(de===null){Tr=te;try{Tr.stateNode.nodeValue=Ue?"":Tr.memoizedProps}catch(ai){jr(Tr,Tr.return,ai)}}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===Z)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===Z)break e;for(;te.sibling===null;){if(te.return===null||te.return===Z)break e;de===te&&(de=null),te=te.return}de===te&&(de=null),te.sibling.return=te.return,te=te.sibling}ke&4&&(ke=Z.updateQueue,ke!==null&&(de=ke.retryQueue,de!==null&&(ke.retryQueue=null,gu(Z,de))));break;case 19:io(te,Z),bs(Z),ke&4&&(ke=Z.updateQueue,ke!==null&&(Z.updateQueue=null,gu(Z,ke)));break;case 30:break;case 21:break;default:io(te,Z),bs(Z)}}function bs(Z){var te=Z.flags;if(te&2){try{for(var de,ke=Z.return;ke!==null;){if(Ld(ke)){de=ke;break}ke=ke.return}if(de==null)throw Error(A(160));switch(de.tag){case 27:var Ue=de.stateNode,Ke=kc(Z);Pc(Z,Ke,Ue);break;case 5:var pn=de.stateNode;de.flags&32&&(di(pn,""),de.flags&=-33);var Vn=kc(Z);Pc(Z,Vn,pn);break;case 3:case 4:var Tr=de.stateNode.containerInfo,ei=kc(Z);Nc(Z,ei,Tr);break;default:throw Error(A(161))}}catch(pi){jr(Z,Z.return,pi)}Z.flags&=-3}te&4096&&(Z.flags&=-4097)}function jc(Z){if(Z.subtreeFlags&1024)for(Z=Z.child;Z!==null;){var te=Z;jc(te),te.tag===5&&te.flags&1024&&te.stateNode.reset(),Z=Z.sibling}}function Ro(Z,te){if(te.subtreeFlags&8772)for(te=te.child;te!==null;)cc(Z,te.alternate,te),te=te.sibling}function Ko(Z){for(Z=Z.child;Z!==null;){var te=Z;switch(te.tag){case 0:case 11:case 14:case 15:$o(4,te,te.return),Ko(te);break;case 1:Ul(te,te.return);var de=te.stateNode;typeof de.componentWillUnmount=="function"&&lc(te,te.return,de),Ko(te);break;case 27:rh(te.stateNode);case 26:case 5:Ul(te,te.return),Ko(te);break;case 22:te.memoizedState===null&&Ko(te);break;case 30:Ko(te);break;default:Ko(te)}Z=Z.sibling}}function Gl(Z,te,de){for(de=de&&(te.subtreeFlags&8772)!==0,te=te.child;te!==null;){var ke=te.alternate,Ue=Z,Ke=te,pn=Ke.flags;switch(Ke.tag){case 0:case 11:case 15:Gl(Ue,Ke,de),fu(4,Ke);break;case 1:if(Gl(Ue,Ke,de),ke=Ke,Ue=ke.stateNode,typeof Ue.componentDidMount=="function")try{Ue.componentDidMount()}catch(ei){jr(ke,ke.return,ei)}if(ke=Ke,Ue=ke.updateQueue,Ue!==null){var Vn=ke.stateNode;try{var Tr=Ue.shared.hiddenCallbacks;if(Tr!==null)for(Ue.shared.hiddenCallbacks=null,Ue=0;Ue<Tr.length;Ue++)Uu(Tr[Ue],Vn)}catch(ei){jr(ke,ke.return,ei)}}de&&pn&64&&hu(Ke),pu(Ke,Ke.return);break;case 27:Bc(Ke);case 26:case 5:Gl(Ue,Ke,de),de&&ke===null&&pn&4&&Xu(Ke),pu(Ke,Ke.return);break;case 12:Gl(Ue,Ke,de);break;case 13:Gl(Ue,Ke,de),de&&pn&4&&Dc(Ue,Ke);break;case 22:Ke.memoizedState===null&&Gl(Ue,Ke,de),pu(Ke,Ke.return);break;case 30:break;default:Gl(Ue,Ke,de)}te=te.sibling}}function pf(Z,te){var de=null;Z!==null&&Z.memoizedState!==null&&Z.memoizedState.cachePool!==null&&(de=Z.memoizedState.cachePool.pool),Z=null,te.memoizedState!==null&&te.memoizedState.cachePool!==null&&(Z=te.memoizedState.cachePool.pool),Z!==de&&(Z!=null&&Z.refCount++,de!=null&&Bu(de))}function mf(Z,te){Z=null,te.alternate!==null&&(Z=te.alternate.memoizedState.cache),te=te.memoizedState.cache,te!==Z&&(te.refCount++,Z!=null&&Bu(Z))}function Qa(Z,te,de,ke){if(te.subtreeFlags&10256)for(te=te.child;te!==null;)gf(Z,te,de,ke),te=te.sibling}function gf(Z,te,de,ke){var Ue=te.flags;switch(te.tag){case 0:case 11:case 15:Qa(Z,te,de,ke),Ue&2048&&fu(9,te);break;case 1:Qa(Z,te,de,ke);break;case 3:Qa(Z,te,de,ke),Ue&2048&&(Z=null,te.alternate!==null&&(Z=te.alternate.memoizedState.cache),te=te.memoizedState.cache,te!==Z&&(te.refCount++,Z!=null&&Bu(Z)));break;case 12:if(Ue&2048){Qa(Z,te,de,ke),Z=te.stateNode;try{var Ke=te.memoizedProps,pn=Ke.id,Vn=Ke.onPostCommit;typeof Vn=="function"&&Vn(pn,te.alternate===null?"mount":"update",Z.passiveEffectDuration,-0)}catch(Tr){jr(te,te.return,Tr)}}else Qa(Z,te,de,ke);break;case 13:Qa(Z,te,de,ke);break;case 23:break;case 22:Ke=te.stateNode,pn=te.alternate,te.memoizedState!==null?Ke._visibility&2?Qa(Z,te,de,ke):Tl(Z,te):Ke._visibility&2?Qa(Z,te,de,ke):(Ke._visibility|=2,uc(Z,te,de,ke,(te.subtreeFlags&10256)!==0)),Ue&2048&&pf(pn,te);break;case 24:Qa(Z,te,de,ke),Ue&2048&&mf(te.alternate,te);break;default:Qa(Z,te,de,ke)}}function uc(Z,te,de,ke,Ue){for(Ue=Ue&&(te.subtreeFlags&10256)!==0,te=te.child;te!==null;){var Ke=Z,pn=te,Vn=de,Tr=ke,ei=pn.flags;switch(pn.tag){case 0:case 11:case 15:uc(Ke,pn,Vn,Tr,Ue),fu(8,pn);break;case 23:break;case 22:var pi=pn.stateNode;pn.memoizedState!==null?pi._visibility&2?uc(Ke,pn,Vn,Tr,Ue):Tl(Ke,pn):(pi._visibility|=2,uc(Ke,pn,Vn,Tr,Ue)),Ue&&ei&2048&&pf(pn.alternate,pn);break;case 24:uc(Ke,pn,Vn,Tr,Ue),Ue&&ei&2048&&mf(pn.alternate,pn);break;default:uc(Ke,pn,Vn,Tr,Ue)}te=te.sibling}}function Tl(Z,te){if(te.subtreeFlags&10256)for(te=te.child;te!==null;){var de=Z,ke=te,Ue=ke.flags;switch(ke.tag){case 22:Tl(de,ke),Ue&2048&&pf(ke.alternate,ke);break;case 24:Tl(de,ke),Ue&2048&&mf(ke.alternate,ke);break;default:Tl(de,ke)}te=te.sibling}}var Yo=8192;function Ju(Z){if(Z.subtreeFlags&Yo)for(Z=Z.child;Z!==null;)np(Z),Z=Z.sibling}function np(Z){switch(Z.tag){case 26:Ju(Z),Z.flags&Yo&&Z.memoizedState!==null&&pg(wl,Z.memoizedState,Z.memoizedProps);break;case 5:Ju(Z);break;case 3:case 4:var te=wl;wl=lp(Z.stateNode.containerInfo),Ju(Z),wl=te;break;case 22:Z.memoizedState===null&&(te=Z.alternate,te!==null&&te.memoizedState!==null?(te=Yo,Yo=16777216,Ju(Z),Yo=te):Ju(Z));break;default:Ju(Z)}}function rp(Z){var te=Z.alternate;if(te!==null&&(Z=te.child,Z!==null)){te.child=null;do te=Z.sibling,Z.sibling=null,Z=te;while(Z!==null)}}function os(Z){var te=Z.deletions;if((Z.flags&16)!==0){if(te!==null)for(var de=0;de<te.length;de++){var ke=te[de];Xa=ke,Hl(ke,Z)}rp(Z)}if(Z.subtreeFlags&10256)for(Z=Z.child;Z!==null;)Jf(Z),Z=Z.sibling}function Jf(Z){switch(Z.tag){case 0:case 11:case 15:os(Z),Z.flags&2048&&$o(9,Z,Z.return);break;case 3:os(Z);break;case 12:os(Z);break;case 22:var te=Z.stateNode;Z.memoizedState!==null&&te._visibility&2&&(Z.return===null||Z.return.tag!==13)?(te._visibility&=-3,zl(Z)):os(Z);break;default:os(Z)}}function zl(Z){var te=Z.deletions;if((Z.flags&16)!==0){if(te!==null)for(var de=0;de<te.length;de++){var ke=te[de];Xa=ke,Hl(ke,Z)}rp(Z)}for(Z=Z.child;Z!==null;){switch(te=Z,te.tag){case 0:case 11:case 15:$o(8,te,te.return),zl(te);break;case 22:de=te.stateNode,de._visibility&2&&(de._visibility&=-3,zl(te));break;default:zl(te)}Z=Z.sibling}}function Hl(Z,te){for(;Xa!==null;){var de=Xa;switch(de.tag){case 0:case 11:case 15:$o(8,de,te);break;case 23:case 22:if(de.memoizedState!==null&&de.memoizedState.cachePool!==null){var ke=de.memoizedState.cachePool.pool;ke!=null&&ke.refCount++}break;case 24:Bu(de.memoizedState.cache)}if(ke=de.child,ke!==null)ke.return=de,Xa=ke;else e:for(de=Z;Xa!==null;){ke=Xa;var Ue=ke.sibling,Ke=ke.return;if(Ca(ke),ke===de){Xa=null;break e}if(Ue!==null){Ue.return=Ke,Xa=Ue;break e}Xa=Ke}}}var Es={getCacheForType:function(Z){var te=ys(Fs),de=te.data.get(Z);return de===void 0&&(de=Z(),te.data.set(Z,de)),de}},Zf=typeof WeakMap=="function"?WeakMap:Map,Ga=0,ma=null,Ta=null,ea=0,Sa=0,_s=null,Xo=!1,Zu=!1,ed=!1,dl=0,fs=0,Rl=0,ql=0,vu=0,hl=0,La=0,za=null,ra=null,Ma=!1,Ka=0,xo=1/0,pl=null,Qo=null,Xs=0,yo=null,Ja=null,Jo=0,dc=0,Od=null,Zo=null,$l=0,_u=null;function As(){if((Ga&2)!==0&&ea!==0)return ea&-ea;if(je.T!==null){var Z=ya;return Z!==0?Z:Ip()}return mn()}function vf(){hl===0&&(hl=(ea&536870912)===0||sa?wr():536870912);var Z=Ya.current;return Z!==null&&(Z.flags|=32),hl}function Mo(Z,te,de){(Z===ma&&(Sa===2||Sa===9)||Z.cancelPendingCommit!==null)&&(Oc(Z,0),Ml(Z,ea,hl,!1)),vi(Z,de),((Ga&2)===0||Z!==ma)&&(Z===ma&&((Ga&2)===0&&(ql|=de),fs===4&&Ml(Z,ea,hl,!1)),Vc(Z))}function nd(Z,te,de){if((Ga&6)!==0)throw Error(A(327));var ke=!de&&(te&124)===0&&(te&Z.expiredLanes)===0||oi(Z,te),Ue=ke?Ve(Z,te):le(Z,te,!0),Ke=ke;do{if(Ue===0){Zu&&!ke&&Ml(Z,te,0,!1);break}else{if(de=Z.current.alternate,Ke&&!Lc(de)){Ue=le(Z,te,!1),Ke=!1;continue}if(Ue===2){if(Ke=te,Z.errorRecoveryDisabledLanes&Ke)var pn=0;else pn=Z.pendingLanes&-536870913,pn=pn!==0?pn:pn&536870912?536870912:0;if(pn!==0){te=pn;e:{var Vn=Z;Ue=za;var Tr=Vn.current.memoizedState.isDehydrated;if(Tr&&(Oc(Vn,pn).flags|=256),pn=le(Vn,pn,!1),pn!==2){if(ed&&!Tr){Vn.errorRecoveryDisabledLanes|=Ke,ql|=Ke,Ue=4;break e}Ke=ra,ra=Ue,Ke!==null&&(ra===null?ra=Ke:ra.push.apply(ra,Ke))}Ue=pn}if(Ke=!1,Ue!==2)continue}}if(Ue===1){Oc(Z,0),Ml(Z,te,0,!0);break}e:{switch(ke=Z,Ke=Ue,Ke){case 0:case 1:throw Error(A(345));case 4:if((te&4194048)!==te)break;case 6:Ml(ke,te,hl,!Xo);break e;case 2:ra=null;break;case 3:case 5:break;default:throw Error(A(329))}if((te&62914560)===te&&(Ue=Ka+300-jn(),10<Ue)){if(Ml(ke,te,hl,!Xo),Ci(ke,0,!0)!==0)break e;ke.timeoutHandle=hm(Fd.bind(null,ke,de,ra,pl,Ma,te,hl,ql,La,Xo,Ke,2,-0,0),Ue);break e}Fd(ke,de,ra,pl,Ma,te,hl,ql,La,Xo,Ke,0,-0,0)}}break}while(!0);Vc(Z)}function Fd(Z,te,de,ke,Ue,Ke,pn,Vn,Tr,ei,pi,yi,ri,ai){if(Z.timeoutHandle=-1,yi=te.subtreeFlags,(yi&8192||(yi&16785408)===16785408)&&(sh={stylesheets:null,count:0,unsuspend:hg},np(te),yi=mg(),yi!==null)){Z.cancelPendingCommit=yi(Bi.bind(null,Z,te,Ke,de,ke,Ue,pn,Vn,Tr,pi,1,ri,ai)),Ml(Z,Ke,pn,!ei);return}Bi(Z,te,Ke,de,ke,Ue,pn,Vn,Tr)}function Lc(Z){for(var te=Z;;){var de=te.tag;if((de===0||de===11||de===15)&&te.flags&16384&&(de=te.updateQueue,de!==null&&(de=de.stores,de!==null)))for(var ke=0;ke<de.length;ke++){var Ue=de[ke],Ke=Ue.getSnapshot;Ue=Ue.value;try{if(!lo(Ke(),Ue))return!1}catch{return!1}}if(de=te.child,te.subtreeFlags&16384&&de!==null)de.return=te,te=de;else{if(te===Z)break;for(;te.sibling===null;){if(te.return===null||te.return===Z)return!0;te=te.return}te.sibling.return=te.return,te=te.sibling}}return!0}function Ml(Z,te,de,ke){te&=~vu,te&=~ql,Z.suspendedLanes|=te,Z.pingedLanes&=~te,ke&&(Z.warmLanes|=te),ke=Z.expirationTimes;for(var Ue=te;0<Ue;){var Ke=31-Qr(Ue),pn=1<<Ke;ke[Ke]=-1,Ue&=~pn}de!==0&&br(Z,de,te)}function Wl(){return(Ga&6)===0?(eh(0),!1):!0}function xu(){if(Ta!==null){if(Sa===0)var Z=Ta.return;else Z=Ta,Zl=bc=null,Df(Z),nu=null,kd=0,Z=Ta;for(;Z!==null;)Yu(Z.alternate,Z),Z=Z.return;Ta=null}}function Oc(Z,te){var de=Z.timeoutHandle;de!==-1&&(Z.timeoutHandle=-1,Xm(de)),de=Z.cancelPendingCommit,de!==null&&(Z.cancelPendingCommit=null,de()),xu(),ma=Z,Ta=de=gs(Z.current,null),ea=te,Sa=0,_s=null,Xo=!1,Zu=oi(Z,te),ed=!1,La=hl=vu=ql=Rl=fs=0,ra=za=null,Ma=!1,(te&8)!==0&&(te|=te&32);var ke=Z.entangledLanes;if(ke!==0)for(Z=Z.entanglements,ke&=te;0<ke;){var Ue=31-Qr(ke),Ke=1<<Ue;te|=Z[Ue],ke&=~Ke}return dl=te,Wc(),de}function xf(Z,te){ba=null,je.H=Id,te===Sd||te===yl?(te=If(),Sa=3):te===Mf?(te=If(),Sa=4):Sa=te===tp?8:te!==null&&typeof te=="object"&&typeof te.then=="function"?6:1,_s=te,Ta===null&&(fs=1,cf(Z,qs(te,Z.current)))}function rd(){var Z=je.H;return je.H=Id,Z===null?Id:Z}function yf(){var Z=je.A;return je.A=Es,Z}function ae(){fs=4,Xo||(ea&4194048)!==ea&&Ya.current!==null||(Zu=!0),(Rl&134217727)===0&&(ql&134217727)===0||ma===null||Ml(ma,ea,hl,!1)}function le(Z,te,de){var ke=Ga;Ga|=2;var Ue=rd(),Ke=yf();(ma!==Z||ea!==te)&&(pl=null,Oc(Z,te)),te=!1;var pn=fs;e:do try{if(Sa!==0&&Ta!==null){var Vn=Ta,Tr=_s;switch(Sa){case 8:xu(),pn=6;break e;case 3:case 2:case 9:case 6:Ya.current===null&&(te=!0);var ei=Sa;if(Sa=0,_s=null,Rr(Z,Vn,Tr,ei),de&&Zu){pn=0;break e}break;default:ei=Sa,Sa=0,_s=null,Rr(Z,Vn,Tr,ei)}}Ne(),pn=fs;break}catch(pi){xf(Z,pi)}while(!0);return te&&Z.shellSuspendCounter++,Zl=bc=null,Ga=ke,je.H=Ue,je.A=Ke,Ta===null&&(ma=null,ea=0,Wc()),pn}function Ne(){for(;Ta!==null;)kt(Ta)}function Ve(Z,te){var de=Ga;Ga|=2;var ke=rd(),Ue=yf();ma!==Z||ea!==te?(pl=null,xo=jn()+500,Oc(Z,te)):Zu=oi(Z,te);e:do try{if(Sa!==0&&Ta!==null){te=Ta;var Ke=_s;t:switch(Sa){case 1:Sa=0,_s=null,Rr(Z,te,Ke,1);break;case 2:case 9:if(Wd(Ke)){Sa=0,_s=null,Wn(te);break}te=function(){Sa!==2&&Sa!==9||ma!==Z||(Sa=7),Vc(Z)},Ke.then(te,te);break e;case 3:Sa=7;break e;case 4:Sa=5;break e;case 7:Wd(Ke)?(Sa=0,_s=null,Wn(te)):(Sa=0,_s=null,Rr(Z,te,Ke,7));break;case 5:var pn=null;switch(Ta.tag){case 26:pn=Ta.memoizedState;case 5:case 27:var Vn=Ta;if(!pn||Cm(pn)){Sa=0,_s=null;var Tr=Vn.sibling;if(Tr!==null)Ta=Tr;else{var ei=Vn.return;ei!==null?(Ta=ei,Jr(ei)):Ta=null}break t}}Sa=0,_s=null,Rr(Z,te,Ke,5);break;case 6:Sa=0,_s=null,Rr(Z,te,Ke,6);break;case 8:xu(),fs=6;break e;default:throw Error(A(462))}}Je();break}catch(pi){xf(Z,pi)}while(!0);return Zl=bc=null,je.H=ke,je.A=Ue,Ga=de,Ta!==null?0:(ma=null,ea=0,Wc(),fs)}function Je(){for(;Ta!==null&&!Nn();)kt(Ta)}function kt(Z){var te=uu(Z.alternate,Z,dl);Z.memoizedProps=Z.pendingProps,te===null?Jr(Z):Ta=te}function Wn(Z){var te=Z,de=te.alternate;switch(te.tag){case 15:case 0:te=Ho(de,te,te.pendingProps,te.type,void 0,ea);break;case 11:te=Ho(de,te,te.pendingProps,te.type.render,te.ref,ea);break;case 5:Df(te);default:Yu(de,te),te=Ta=gd(te,dl),te=uu(de,te,dl)}Z.memoizedProps=Z.pendingProps,te===null?Jr(Z):Ta=te}function Rr(Z,te,de,ke){Zl=bc=null,Df(te),nu=null,kd=0;var Ue=te.return;try{if(Rp(Z,Ue,te,de,ea)){fs=1,cf(Z,qs(de,Z.current)),Ta=null;return}}catch(Ke){if(Ue!==null)throw Ta=Ue,Ke;fs=1,cf(Z,qs(de,Z.current)),Ta=null;return}te.flags&32768?(sa||ke===1?Z=!0:Zu||(ea&536870912)!==0?Z=!1:(Xo=Z=!0,(ke===2||ke===9||ke===3||ke===6)&&(ke=Ya.current,ke!==null&&ke.tag===13&&(ke.flags|=16384))),hi(te,Z)):Jr(te)}function Jr(Z){var te=Z;do{if((te.flags&32768)!==0){hi(te,Xo);return}Z=te.return;var de=Qf(te.alternate,te,dl);if(de!==null){Ta=de;return}if(te=te.sibling,te!==null){Ta=te;return}Ta=te=Z}while(te!==null);fs===0&&(fs=5)}function hi(Z,te){do{var de=Ku(Z.alternate,Z);if(de!==null){de.flags&=32767,Ta=de;return}if(de=Z.return,de!==null&&(de.flags|=32768,de.subtreeFlags=0,de.deletions=null),!te&&(Z=Z.sibling,Z!==null)){Ta=Z;return}Ta=Z=de}while(Z!==null);fs=6,Ta=null}function Bi(Z,te,de,ke,Ue,Ke,pn,Vn,Tr){Z.cancelPendingCommit=null;do Fc();while(Xs!==0);if((Ga&6)!==0)throw Error(A(327));if(te!==null){if(te===Z.current)throw Error(A(177));if(Ke=te.lanes|te.childLanes,Ke|=Iu,qr(Z,de,Ke,pn,Vn,Tr),Z===ma&&(Ta=ma=null,ea=0),Ja=te,yo=Z,Jo=de,dc=Ke,Od=Ue,Zo=ke,(te.subtreeFlags&10256)!==0||(te.flags&10256)!==0?(Z.callbackNode=null,Z.callbackPriority=0,Oa(Qn,function(){return Uc(),null})):(Z.callbackNode=null,Z.callbackPriority=0),ke=(te.flags&13878)!==0,(te.subtreeFlags&13878)!==0||ke){ke=je.T,je.T=null,Ue=He.p,He.p=2,pn=Ga,Ga|=4;try{Ys(Z,te,de)}finally{Ga=pn,He.p=Ue,je.T=ke}}Xs=1,Vi(),zi(),ga()}}function Vi(){if(Xs===1){Xs=0;var Z=yo,te=Ja,de=(te.flags&13878)!==0;if((te.subtreeFlags&13878)!==0||de){de=je.T,je.T=null;var ke=He.p;He.p=2;var Ue=Ga;Ga|=4;try{hf(te,Z);var Ke=Op,pn=wu(Z.containerInfo),Vn=Ke.focusedElem,Tr=Ke.selectionRange;if(pn!==Vn&&Vn&&Vn.ownerDocument&&hd(Vn.ownerDocument.documentElement,Vn)){if(Tr!==null&&zc(Vn)){var ei=Tr.start,pi=Tr.end;if(pi===void 0&&(pi=ei),"selectionStart"in Vn)Vn.selectionStart=ei,Vn.selectionEnd=Math.min(pi,Vn.value.length);else{var yi=Vn.ownerDocument||document,ri=yi&&yi.defaultView||window;if(ri.getSelection){var ai=ri.getSelection(),fa=Vn.textContent.length,ia=Math.min(Tr.start,fa),cs=Tr.end===void 0?ia:Math.min(Tr.end,fa);!ai.extend&&ia>cs&&(pn=cs,cs=ia,ia=pn);var Yr=dd(Vn,ia),Fr=dd(Vn,cs);if(Yr&&Fr&&(ai.rangeCount!==1||ai.anchorNode!==Yr.node||ai.anchorOffset!==Yr.offset||ai.focusNode!==Fr.node||ai.focusOffset!==Fr.offset)){var Zr=yi.createRange();Zr.setStart(Yr.node,Yr.offset),ai.removeAllRanges(),ia>cs?(ai.addRange(Zr),ai.extend(Fr.node,Fr.offset)):(Zr.setEnd(Fr.node,Fr.offset),ai.addRange(Zr))}}}}for(yi=[],ai=Vn;ai=ai.parentNode;)ai.nodeType===1&&yi.push({element:ai,left:ai.scrollLeft,top:ai.scrollTop});for(typeof Vn.focus=="function"&&Vn.focus(),Vn=0;Vn<yi.length;Vn++){var mi=yi[Vn];mi.element.scrollLeft=mi.left,mi.element.scrollTop=mi.top}}hp=!!Lp,Op=Lp=null}finally{Ga=Ue,He.p=ke,je.T=de}}Z.current=te,Xs=2}}function zi(){if(Xs===2){Xs=0;var Z=yo,te=Ja,de=(te.flags&8772)!==0;if((te.subtreeFlags&8772)!==0||de){de=je.T,je.T=null;var ke=He.p;He.p=2;var Ue=Ga;Ga|=4;try{cc(Z,te.alternate,te)}finally{Ga=Ue,He.p=ke,je.T=de}}Xs=3}}function ga(){if(Xs===4||Xs===3){Xs=0,Xn();var Z=yo,te=Ja,de=Jo,ke=Zo;(te.subtreeFlags&10256)!==0||(te.flags&10256)!==0?Xs=5:(Xs=0,Ja=yo=null,el(Z,Z.pendingLanes));var Ue=Z.pendingLanes;if(Ue===0&&(Qo=null),Er(de),te=te.stateNode,nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(kn,te,void 0,(te.current.flags&128)===128)}catch{}if(ke!==null){te=je.T,Ue=He.p,He.p=2,je.T=null;try{for(var Ke=Z.onRecoverableError,pn=0;pn<ke.length;pn++){var Vn=ke[pn];Ke(Vn.value,{componentStack:Vn.stack})}}finally{je.T=te,He.p=Ue}}(Jo&3)!==0&&Fc(),Vc(Z),Ue=Z.pendingLanes,(de&4194090)!==0&&(Ue&42)!==0?Z===_u?$l++:($l=0,_u=Z):$l=0,eh(0)}}function el(Z,te){(Z.pooledCacheLanes&=te)===0&&(te=Z.pooledCache,te!=null&&(Z.pooledCache=null,Bu(te)))}function Fc(Z){return Vi(),zi(),ga(),Uc()}function Uc(){if(Xs!==5)return!1;var Z=yo,te=dc;dc=0;var de=Er(Jo),ke=je.T,Ue=He.p;try{He.p=32>de?32:de,je.T=null,de=Od,Od=null;var Ke=yo,pn=Jo;if(Xs=0,Ja=yo=null,Jo=0,(Ga&6)!==0)throw Error(A(331));var Vn=Ga;if(Ga|=4,Jf(Ke.current),gf(Ke,Ke.current,pn,de),Ga=Vn,eh(0,!1),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(kn,Ke)}catch{}return!0}finally{He.p=Ue,je.T=ke,el(Z,te)}}function ni(Z,te,de){te=qs(de,te),te=uf(Z.stateNode,te,2),Z=nc(Z,te,2),Z!==null&&(vi(Z,2),Vc(Z))}function jr(Z,te,de){if(Z.tag===3)ni(Z,Z,de);else for(;te!==null;){if(te.tag===3){ni(te,Z,de);break}else if(te.tag===1){var ke=te.stateNode;if(typeof te.type.getDerivedStateFromError=="function"||typeof ke.componentDidCatch=="function"&&(Qo===null||!Qo.has(ke))){Z=qs(de,Z),de=ep(2),ke=nc(te,de,2),ke!==null&&(df(de,ke,te,Z),vi(ke,2),Vc(ke));break}}te=te.return}}function si(Z,te,de){var ke=Z.pingCache;if(ke===null){ke=Z.pingCache=new Zf;var Ue=new Set;ke.set(te,Ue)}else Ue=ke.get(te),Ue===void 0&&(Ue=new Set,ke.set(te,Ue));Ue.has(de)||(ed=!0,Ue.add(de),Z=Ni.bind(null,Z,te,de),te.then(Z,Z))}function Ni(Z,te,de){var ke=Z.pingCache;ke!==null&&ke.delete(te),Z.pingedLanes|=Z.suspendedLanes&de,Z.warmLanes&=~de,ma===Z&&(ea&de)===de&&(fs===4||fs===3&&(ea&62914560)===ea&&300>jn()-Ka?(Ga&2)===0&&Oc(Z,0):vu|=de,La===ea&&(La=0)),Vc(Z)}function Qi(Z,te){te===0&&(te=Br()),Z=nl(Z,te),Z!==null&&(vi(Z,te),Vc(Z))}function hs(Z){var te=Z.memoizedState,de=0;te!==null&&(de=te.retryLane),Qi(Z,de)}function ua(Z,te){var de=0;switch(Z.tag){case 13:var ke=Z.stateNode,Ue=Z.memoizedState;Ue!==null&&(de=Ue.retryLane);break;case 19:ke=Z.stateNode;break;case 22:ke=Z.stateNode._retryCache;break;default:throw Error(A(314))}ke!==null&&ke.delete(te),Qi(Z,de)}function Oa(Z,te){return Gt(Z,te)}var Ds=null,Ra=null,Kl=!1,bf=!1,Mp=!1,Ud=0;function Vc(Z){Z!==Ra&&Z.next===null&&(Ra===null?Ds=Ra=Z:Ra=Ra.next=Z),bf=!0,Kl||(Kl=!0,Vm())}function eh(Z,te){if(!Mp&&bf){Mp=!0;do for(var de=!1,ke=Ds;ke!==null;){if(Z!==0){var Ue=ke.pendingLanes;if(Ue===0)var Ke=0;else{var pn=ke.suspendedLanes,Vn=ke.pingedLanes;Ke=(1<<31-Qr(42|Z)+1)-1,Ke&=Ue&~(pn&~Vn),Ke=Ke&201326741?Ke&201326741|1:Ke?Ke|2:0}Ke!==0&&(de=!0,rm(ke,Ke))}else Ke=ea,Ke=Ci(ke,ke===ma?Ke:0,ke.cancelPendingCommit!==null||ke.timeoutHandle!==-1),(Ke&3)===0||oi(ke,Ke)||(de=!0,rm(ke,Ke));ke=ke.next}while(de);Mp=!1}}function Um(){em()}function em(){bf=Kl=!1;var Z=0;Ud!==0&&(Ym()&&(Z=Ud),Ud=0);for(var te=jn(),de=null,ke=Ds;ke!==null;){var Ue=ke.next,Ke=tm(ke,te);Ke===0?(ke.next=null,de===null?Ds=Ue:de.next=Ue,Ue===null&&(Ra=de)):(de=ke,(Z!==0||(Ke&3)!==0)&&(bf=!0)),ke=Ue}eh(Z)}function tm(Z,te){for(var de=Z.suspendedLanes,ke=Z.pingedLanes,Ue=Z.expirationTimes,Ke=Z.pendingLanes&-62914561;0<Ke;){var pn=31-Qr(Ke),Vn=1<<pn,Tr=Ue[pn];Tr===-1?((Vn&de)===0||(Vn&ke)!==0)&&(Ue[pn]=Ii(Vn,te)):Tr<=te&&(Z.expiredLanes|=Vn),Ke&=~Vn}if(te=ma,de=ea,de=Ci(Z,Z===te?de:0,Z.cancelPendingCommit!==null||Z.timeoutHandle!==-1),ke=Z.callbackNode,de===0||Z===te&&(Sa===2||Sa===9)||Z.cancelPendingCommit!==null)return ke!==null&&ke!==null&&Jn(ke),Z.callbackNode=null,Z.callbackPriority=0;if((de&3)===0||oi(Z,de)){if(te=de&-de,te===Z.callbackPriority)return te;switch(ke!==null&&Jn(ke),Er(de)){case 2:case 8:de=Kn;break;case 32:de=Qn;break;case 268435456:de=fn;break;default:de=Qn}return ke=nm.bind(null,Z),de=Gt(de,ke),Z.callbackPriority=te,Z.callbackNode=de,te}return ke!==null&&ke!==null&&Jn(ke),Z.callbackPriority=2,Z.callbackNode=null,2}function nm(Z,te){if(Xs!==0&&Xs!==5)return Z.callbackNode=null,Z.callbackPriority=0,null;var de=Z.callbackNode;if(Fc()&&Z.callbackNode!==de)return null;var ke=ea;return ke=Ci(Z,Z===ma?ke:0,Z.cancelPendingCommit!==null||Z.timeoutHandle!==-1),ke===0?null:(nd(Z,ke,te),tm(Z,jn()),Z.callbackNode!=null&&Z.callbackNode===de?nm.bind(null,Z):null)}function rm(Z,te){if(Fc())return null;nd(Z,te,!0)}function Vm(){Qm(function(){(Ga&6)!==0?Gt(bn,Um):em()})}function Ip(){return Ud===0&&(Ud=wr()),Ud}function im(Z){return Z==null||typeof Z=="symbol"||typeof Z=="boolean"?null:typeof Z=="function"?Z:wi(""+Z)}function am(Z,te){var de=te.ownerDocument.createElement("input");return de.name=te.name,de.value=te.value,Z.id&&de.setAttribute("form",Z.id),te.parentNode.insertBefore(de,te),Z=new FormData(Z),de.parentNode.removeChild(de),Z}function Gm(Z,te,de,ke,Ue){if(te==="submit"&&de&&de.stateNode===Ue){var Ke=im((Ue[Tn]||null).action),pn=ke.submitter;pn&&(te=(te=pn[Tn]||null)?im(te.formAction):pn.getAttribute("formAction"),te!==null&&(Ke=te,pn=null));var Vn=new Uo("action","action",null,ke,Ue);Z.push({event:Vn,listeners:[{instance:null,listener:function(){if(ke.defaultPrevented){if(Ud!==0){var Tr=pn?am(Ue,pn):new FormData(Ue);Wf(de,{pending:!0,data:Tr,method:Ue.method,action:Ke},null,Tr)}}else typeof Ke=="function"&&(Vn.preventDefault(),Tr=pn?am(Ue,pn):new FormData(Ue),Wf(de,{pending:!0,data:Tr,method:Ue.method,action:Ke},Ke,Tr))},currentTarget:Ue}]})}}for(var kp=0;kp<$c.length;kp++){var Np=$c[kp],zm=Np.toLowerCase(),Hm=Np[0].toUpperCase()+Np.slice(1);ks(zm,"on"+Hm)}ks(co,"onAnimationEnd"),ks(md,"onAnimationIteration"),ks(go,"onAnimationStart"),ks("dblclick","onDoubleClick"),ks("focusin","onFocus"),ks("focusout","onBlur"),ks(Gd,"onTransitionRun"),ks(tl,"onTransitionStart"),ks(Jl,"onTransitionCancel"),ks(_l,"onTransitionEnd"),ln("onMouseEnter",["mouseout","mouseover"]),ln("onMouseLeave",["mouseout","mouseover"]),ln("onPointerEnter",["pointerout","pointerover"]),ln("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var th="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(th));function sm(Z,te){te=(te&4)!==0;for(var de=0;de<Z.length;de++){var ke=Z[de],Ue=ke.event;ke=ke.listeners;e:{var Ke=void 0;if(te)for(var pn=ke.length-1;0<=pn;pn--){var Vn=ke[pn],Tr=Vn.instance,ei=Vn.currentTarget;if(Vn=Vn.listener,Tr!==Ke&&Ue.isPropagationStopped())break e;Ke=Vn,Ue.currentTarget=ei;try{Ke(Ue)}catch(pi){au(pi)}Ue.currentTarget=null,Ke=Tr}else for(pn=0;pn<ke.length;pn++){if(Vn=ke[pn],Tr=Vn.instance,ei=Vn.currentTarget,Vn=Vn.listener,Tr!==Ke&&Ue.isPropagationStopped())break e;Ke=Vn,Ue.currentTarget=ei;try{Ke(Ue)}catch(pi){au(pi)}Ue.currentTarget=null,Ke=Tr}}}}function Na(Z,te){var de=te[$t];de===void 0&&(de=te[$t]=new Set);var ke=Z+"__bubble";de.has(ke)||(om(te,Z,2,!1),de.add(ke))}function Pp(Z,te,de){var ke=0;te&&(ke|=4),om(de,Z,ke,te)}var ip="_reactListening"+Math.random().toString(36).slice(2);function Bp(Z){if(!Z[ip]){Z[ip]=!0,wn.forEach(function(de){de!=="selectionchange"&&(qm.has(de)||Pp(de,!1,Z),Pp(de,!0,Z))});var te=Z.nodeType===9?Z:Z.ownerDocument;te===null||te[ip]||(te[ip]=!0,Pp("selectionchange",!1,te))}}function om(Z,te,de,ke){switch(km(te)){case 2:var Ue=xg;break;case 8:Ue=yg;break;default:Ue=Kp}de=Ue.bind(null,te,de,Z),Ue=void 0,!Cs||te!=="touchstart"&&te!=="touchmove"&&te!=="wheel"||(Ue=!0),ke?Ue!==void 0?Z.addEventListener(te,de,{capture:!0,passive:Ue}):Z.addEventListener(te,de,!0):Ue!==void 0?Z.addEventListener(te,de,{passive:Ue}):Z.addEventListener(te,de,!1)}function Dp(Z,te,de,ke,Ue){var Ke=ke;if((te&1)===0&&(te&2)===0&&ke!==null)e:for(;;){if(ke===null)return;var pn=ke.tag;if(pn===3||pn===4){var Vn=ke.stateNode.containerInfo;if(Vn===Ue)break;if(pn===4)for(pn=ke.return;pn!==null;){var Tr=pn.tag;if((Tr===3||Tr===4)&&pn.stateNode.containerInfo===Ue)return;pn=pn.return}for(;Vn!==null;){if(pn=it(Vn),pn===null)return;if(Tr=pn.tag,Tr===5||Tr===6||Tr===26||Tr===27){ke=Ke=pn;continue e}Vn=Vn.parentNode}}ke=ke.return}Ua(function(){var ei=Ke,pi=Gi(de),yi=[];e:{var ri=Ru.get(Z);if(ri!==void 0){var ai=Uo,fa=Z;switch(Z){case"keypress":if(Da(de)===0)break e;case"keydown":case"keyup":ai=Ts;break;case"focusin":fa="focus",ai=mr;break;case"focusout":fa="blur",ai=mr;break;case"beforeblur":case"afterblur":ai=mr;break;case"click":if(de.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ai=Di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ai=On;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ai=Qs;break;case co:case md:case go:ai=Ei;break;case _l:ai=xs;break;case"scroll":case"scrollend":ai=Xl;break;case"wheel":ai=Js;break;case"copy":case"cut":case"paste":ai=Ri;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ai=Rs;break;case"toggle":case"beforetoggle":ai=js}var ia=(te&4)!==0,cs=!ia&&(Z==="scroll"||Z==="scrollend"),Yr=ia?ri!==null?ri+"Capture":null:ri;ia=[];for(var Fr=ei,Zr;Fr!==null;){var mi=Fr;if(Zr=mi.stateNode,mi=mi.tag,mi!==5&&mi!==26&&mi!==27||Zr===null||Yr===null||(mi=Ss(Fr,Yr),mi!=null&&ia.push(nh(Fr,mi,Zr))),cs)break;Fr=Fr.return}0<ia.length&&(ri=new ai(ri,fa,null,de,pi),yi.push({event:ri,listeners:ia}))}}if((te&7)===0){e:{if(ri=Z==="mouseover"||Z==="pointerover",ai=Z==="mouseout"||Z==="pointerout",ri&&de!==Oi&&(fa=de.relatedTarget||de.fromElement)&&(it(fa)||fa[tt]))break e;if((ai||ri)&&(ri=pi.window===pi?pi:(ri=pi.ownerDocument)?ri.defaultView||ri.parentWindow:window,ai?(fa=de.relatedTarget||de.toElement,ai=ei,fa=fa?it(fa):null,fa!==null&&(cs=w(fa),ia=fa.tag,fa!==cs||ia!==5&&ia!==27&&ia!==6)&&(fa=null)):(ai=null,fa=ei),ai!==fa)){if(ia=Di,mi="onMouseLeave",Yr="onMouseEnter",Fr="mouse",(Z==="pointerout"||Z==="pointerover")&&(ia=Rs,mi="onPointerLeave",Yr="onPointerEnter",Fr="pointer"),cs=ai==null?ri:An(ai),Zr=fa==null?ri:An(fa),ri=new ia(mi,Fr+"leave",ai,de,pi),ri.target=cs,ri.relatedTarget=Zr,mi=null,it(pi)===ei&&(ia=new ia(Yr,Fr+"enter",fa,de,pi),ia.target=Zr,ia.relatedTarget=cs,mi=ia),cs=mi,ai&&fa)t:{for(ia=ai,Yr=fa,Fr=0,Zr=ia;Zr;Zr=Ef(Zr))Fr++;for(Zr=0,mi=Yr;mi;mi=Ef(mi))Zr++;for(;0<Fr-Zr;)ia=Ef(ia),Fr--;for(;0<Zr-Fr;)Yr=Ef(Yr),Zr--;for(;Fr--;){if(ia===Yr||Yr!==null&&ia===Yr.alternate)break t;ia=Ef(ia),Yr=Ef(Yr)}ia=null}else ia=null;ai!==null&&lm(yi,ri,ai,ia,!1),fa!==null&&cs!==null&&lm(yi,cs,fa,ia,!0)}}e:{if(ri=ei?An(ei):window,ai=ri.nodeName&&ri.nodeName.toLowerCase(),ai==="select"||ai==="input"&&ri.type==="file")var Wi=Eu;else if(ds(ri))if(Au)Wi=Il;else{Wi=Vd;var Ia=gl}else ai=ri.nodeName,!ai||ai.toLowerCase()!=="input"||ri.type!=="checkbox"&&ri.type!=="radio"?ei&&qi(ei.elementType)&&(Wi=Eu):Wi=Gc;if(Wi&&(Wi=Wi(Z,ei))){ps(yi,Wi,de,pi);break e}Ia&&Ia(Z,ri,ei),Z==="focusout"&&ei&&ri.type==="number"&&ei.memoizedProps.value!=null&&ar(ri,"number",ri.value)}switch(Ia=ei?An(ei):window,Z){case"focusin":(ds(Ia)||Ia.contentEditable==="true")&&(vl=Ia,Tu=ei,gc=null);break;case"focusout":gc=Tu=vl=null;break;case"mousedown":Ql=!0;break;case"contextmenu":case"mouseup":case"dragend":Ql=!1,vc(yi,de,pi);break;case"selectionchange":if(Hc)break;case"keydown":case"keyup":vc(yi,de,pi)}var Zi;if(Ls)e:{switch(Z){case"compositionstart":var oa="onCompositionStart";break e;case"compositionend":oa="onCompositionEnd";break e;case"compositionupdate":oa="onCompositionUpdate";break e}oa=void 0}else xa?ii(Z,de)&&(oa="onCompositionEnd"):Z==="keydown"&&de.keyCode===229&&(oa="onCompositionStart");oa&&(zt&&de.locale!=="ko"&&(xa||oa!=="onCompositionStart"?oa==="onCompositionEnd"&&xa&&(Zi=ji()):(ws=pi,No="value"in ws?ws.value:ws.textContent,xa=!0)),Ia=ap(ei,oa),0<Ia.length&&(oa=new ki(oa,Z,null,de,pi),yi.push({event:oa,listeners:Ia}),Zi?oa.data=Zi:(Zi=Pi(de),Zi!==null&&(oa.data=Zi)))),(Zi=st?da(Z,de):Aa(Z,de))&&(oa=ap(ei,"onBeforeInput"),0<oa.length&&(Ia=new ki("onBeforeInput","beforeinput",null,de,pi),yi.push({event:Ia,listeners:oa}),Ia.data=Zi)),Gm(yi,Z,ei,de,pi)}sm(yi,te)})}function nh(Z,te,de){return{instance:Z,listener:te,currentTarget:de}}function ap(Z,te){for(var de=te+"Capture",ke=[];Z!==null;){var Ue=Z,Ke=Ue.stateNode;if(Ue=Ue.tag,Ue!==5&&Ue!==26&&Ue!==27||Ke===null||(Ue=Ss(Z,de),Ue!=null&&ke.unshift(nh(Z,Ue,Ke)),Ue=Ss(Z,te),Ue!=null&&ke.push(nh(Z,Ue,Ke))),Z.tag===3)return ke;Z=Z.return}return[]}function Ef(Z){if(Z===null)return null;do Z=Z.return;while(Z&&Z.tag!==5&&Z.tag!==27);return Z||null}function lm(Z,te,de,ke,Ue){for(var Ke=te._reactName,pn=[];de!==null&&de!==ke;){var Vn=de,Tr=Vn.alternate,ei=Vn.stateNode;if(Vn=Vn.tag,Tr!==null&&Tr===ke)break;Vn!==5&&Vn!==26&&Vn!==27||ei===null||(Tr=ei,Ue?(ei=Ss(de,Ke),ei!=null&&pn.unshift(nh(de,ei,Tr))):Ue||(ei=Ss(de,Ke),ei!=null&&pn.push(nh(de,ei,Tr)))),de=de.return}pn.length!==0&&Z.push({event:te,listeners:pn})}var $m=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function cm(Z){return(typeof Z=="string"?Z:""+Z).replace($m,`
`).replace(Wm,"")}function um(Z,te){return te=cm(te),cm(Z)===te}function sp(){}function ls(Z,te,de,ke,Ue,Ke){switch(de){case"children":typeof ke=="string"?te==="body"||te==="textarea"&&ke===""||di(Z,ke):(typeof ke=="number"||typeof ke=="bigint")&&te!=="body"&&di(Z,""+ke);break;case"className":hr(Z,"class",ke);break;case"tabIndex":hr(Z,"tabindex",ke);break;case"dir":case"role":case"viewBox":case"width":case"height":hr(Z,de,ke);break;case"style":fi(Z,ke,Ke);break;case"data":if(te!=="object"){hr(Z,"data",ke);break}case"src":case"href":if(ke===""&&(te!=="a"||de!=="href")){Z.removeAttribute(de);break}if(ke==null||typeof ke=="function"||typeof ke=="symbol"||typeof ke=="boolean"){Z.removeAttribute(de);break}ke=wi(""+ke),Z.setAttribute(de,ke);break;case"action":case"formAction":if(typeof ke=="function"){Z.setAttribute(de,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Ke=="function"&&(de==="formAction"?(te!=="input"&&ls(Z,te,"name",Ue.name,Ue,null),ls(Z,te,"formEncType",Ue.formEncType,Ue,null),ls(Z,te,"formMethod",Ue.formMethod,Ue,null),ls(Z,te,"formTarget",Ue.formTarget,Ue,null)):(ls(Z,te,"encType",Ue.encType,Ue,null),ls(Z,te,"method",Ue.method,Ue,null),ls(Z,te,"target",Ue.target,Ue,null)));if(ke==null||typeof ke=="symbol"||typeof ke=="boolean"){Z.removeAttribute(de);break}ke=wi(""+ke),Z.setAttribute(de,ke);break;case"onClick":ke!=null&&(Z.onclick=sp);break;case"onScroll":ke!=null&&Na("scroll",Z);break;case"onScrollEnd":ke!=null&&Na("scrollend",Z);break;case"dangerouslySetInnerHTML":if(ke!=null){if(typeof ke!="object"||!("__html"in ke))throw Error(A(61));if(de=ke.__html,de!=null){if(Ue.children!=null)throw Error(A(60));Z.innerHTML=de}}break;case"multiple":Z.multiple=ke&&typeof ke!="function"&&typeof ke!="symbol";break;case"muted":Z.muted=ke&&typeof ke!="function"&&typeof ke!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(ke==null||typeof ke=="function"||typeof ke=="boolean"||typeof ke=="symbol"){Z.removeAttribute("xlink:href");break}de=wi(""+ke),Z.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",de);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":ke!=null&&typeof ke!="function"&&typeof ke!="symbol"?Z.setAttribute(de,""+ke):Z.removeAttribute(de);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ke&&typeof ke!="function"&&typeof ke!="symbol"?Z.setAttribute(de,""):Z.removeAttribute(de);break;case"capture":case"download":ke===!0?Z.setAttribute(de,""):ke!==!1&&ke!=null&&typeof ke!="function"&&typeof ke!="symbol"?Z.setAttribute(de,ke):Z.removeAttribute(de);break;case"cols":case"rows":case"size":case"span":ke!=null&&typeof ke!="function"&&typeof ke!="symbol"&&!isNaN(ke)&&1<=ke?Z.setAttribute(de,ke):Z.removeAttribute(de);break;case"rowSpan":case"start":ke==null||typeof ke=="function"||typeof ke=="symbol"||isNaN(ke)?Z.removeAttribute(de):Z.setAttribute(de,ke);break;case"popover":Na("beforetoggle",Z),Na("toggle",Z),ur(Z,"popover",ke);break;case"xlinkActuate":fr(Z,"http://www.w3.org/1999/xlink","xlink:actuate",ke);break;case"xlinkArcrole":fr(Z,"http://www.w3.org/1999/xlink","xlink:arcrole",ke);break;case"xlinkRole":fr(Z,"http://www.w3.org/1999/xlink","xlink:role",ke);break;case"xlinkShow":fr(Z,"http://www.w3.org/1999/xlink","xlink:show",ke);break;case"xlinkTitle":fr(Z,"http://www.w3.org/1999/xlink","xlink:title",ke);break;case"xlinkType":fr(Z,"http://www.w3.org/1999/xlink","xlink:type",ke);break;case"xmlBase":fr(Z,"http://www.w3.org/XML/1998/namespace","xml:base",ke);break;case"xmlLang":fr(Z,"http://www.w3.org/XML/1998/namespace","xml:lang",ke);break;case"xmlSpace":fr(Z,"http://www.w3.org/XML/1998/namespace","xml:space",ke);break;case"is":ur(Z,"is",ke);break;case"innerText":case"textContent":break;default:(!(2<de.length)||de[0]!=="o"&&de[0]!=="O"||de[1]!=="n"&&de[1]!=="N")&&(de=Ki.get(de)||de,ur(Z,de,ke))}}function jp(Z,te,de,ke,Ue,Ke){switch(de){case"style":fi(Z,ke,Ke);break;case"dangerouslySetInnerHTML":if(ke!=null){if(typeof ke!="object"||!("__html"in ke))throw Error(A(61));if(de=ke.__html,de!=null){if(Ue.children!=null)throw Error(A(60));Z.innerHTML=de}}break;case"children":typeof ke=="string"?di(Z,ke):(typeof ke=="number"||typeof ke=="bigint")&&di(Z,""+ke);break;case"onScroll":ke!=null&&Na("scroll",Z);break;case"onScrollEnd":ke!=null&&Na("scrollend",Z);break;case"onClick":ke!=null&&(Z.onclick=sp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lr.hasOwnProperty(de))e:{if(de[0]==="o"&&de[1]==="n"&&(Ue=de.endsWith("Capture"),te=de.slice(2,Ue?de.length-7:void 0),Ke=Z[Tn]||null,Ke=Ke!=null?Ke[de]:null,typeof Ke=="function"&&Z.removeEventListener(te,Ke,Ue),typeof ke=="function")){typeof Ke!="function"&&Ke!==null&&(de in Z?Z[de]=null:Z.hasAttribute(de)&&Z.removeAttribute(de)),Z.addEventListener(te,ke,Ue);break e}de in Z?Z[de]=ke:ke===!0?Z.setAttribute(de,""):ur(Z,de,ke)}}}function Io(Z,te,de){switch(te){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Na("error",Z),Na("load",Z);var ke=!1,Ue=!1,Ke;for(Ke in de)if(de.hasOwnProperty(Ke)){var pn=de[Ke];if(pn!=null)switch(Ke){case"src":ke=!0;break;case"srcSet":Ue=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(A(137,te));default:ls(Z,te,Ke,pn,de,null)}}Ue&&ls(Z,te,"srcSet",de.srcSet,de,null),ke&&ls(Z,te,"src",de.src,de,null);return;case"input":Na("invalid",Z);var Vn=Ke=pn=Ue=null,Tr=null,ei=null;for(ke in de)if(de.hasOwnProperty(ke)){var pi=de[ke];if(pi!=null)switch(ke){case"name":Ue=pi;break;case"type":pn=pi;break;case"checked":Tr=pi;break;case"defaultChecked":ei=pi;break;case"value":Ke=pi;break;case"defaultValue":Vn=pi;break;case"children":case"dangerouslySetInnerHTML":if(pi!=null)throw Error(A(137,te));break;default:ls(Z,te,ke,pi,de,null)}}Ln(Z,Ke,Vn,Tr,ei,pn,Ue,!1),Ai(Z);return;case"select":Na("invalid",Z),ke=pn=Ke=null;for(Ue in de)if(de.hasOwnProperty(Ue)&&(Vn=de[Ue],Vn!=null))switch(Ue){case"value":Ke=Vn;break;case"defaultValue":pn=Vn;break;case"multiple":ke=Vn;default:ls(Z,te,Ue,Vn,de,null)}te=Ke,de=pn,Z.multiple=!!ke,te!=null?Mr(Z,!!ke,te,!1):de!=null&&Mr(Z,!!ke,de,!0);return;case"textarea":Na("invalid",Z),Ke=Ue=ke=null;for(pn in de)if(de.hasOwnProperty(pn)&&(Vn=de[pn],Vn!=null))switch(pn){case"value":ke=Vn;break;case"defaultValue":Ue=Vn;break;case"children":Ke=Vn;break;case"dangerouslySetInnerHTML":if(Vn!=null)throw Error(A(91));break;default:ls(Z,te,pn,Vn,de,null)}gi(Z,ke,Ue,Ke),Ai(Z);return;case"option":for(Tr in de)if(de.hasOwnProperty(Tr)&&(ke=de[Tr],ke!=null))switch(Tr){case"selected":Z.selected=ke&&typeof ke!="function"&&typeof ke!="symbol";break;default:ls(Z,te,Tr,ke,de,null)}return;case"dialog":Na("beforetoggle",Z),Na("toggle",Z),Na("cancel",Z),Na("close",Z);break;case"iframe":case"object":Na("load",Z);break;case"video":case"audio":for(ke=0;ke<th.length;ke++)Na(th[ke],Z);break;case"image":Na("error",Z),Na("load",Z);break;case"details":Na("toggle",Z);break;case"embed":case"source":case"link":Na("error",Z),Na("load",Z);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ei in de)if(de.hasOwnProperty(ei)&&(ke=de[ei],ke!=null))switch(ei){case"children":case"dangerouslySetInnerHTML":throw Error(A(137,te));default:ls(Z,te,ei,ke,de,null)}return;default:if(qi(te)){for(pi in de)de.hasOwnProperty(pi)&&(ke=de[pi],ke!==void 0&&jp(Z,te,pi,ke,de,void 0));return}}for(Vn in de)de.hasOwnProperty(Vn)&&(ke=de[Vn],ke!=null&&ls(Z,te,Vn,ke,de,null))}function Km(Z,te,de,ke){switch(te){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var Ue=null,Ke=null,pn=null,Vn=null,Tr=null,ei=null,pi=null;for(ai in de){var yi=de[ai];if(de.hasOwnProperty(ai)&&yi!=null)switch(ai){case"checked":break;case"value":break;case"defaultValue":Tr=yi;default:ke.hasOwnProperty(ai)||ls(Z,te,ai,null,ke,yi)}}for(var ri in ke){var ai=ke[ri];if(yi=de[ri],ke.hasOwnProperty(ri)&&(ai!=null||yi!=null))switch(ri){case"type":Ke=ai;break;case"name":Ue=ai;break;case"checked":ei=ai;break;case"defaultChecked":pi=ai;break;case"value":pn=ai;break;case"defaultValue":Vn=ai;break;case"children":case"dangerouslySetInnerHTML":if(ai!=null)throw Error(A(137,te));break;default:ai!==yi&&ls(Z,te,ri,ai,ke,yi)}}vn(Z,pn,Vn,Tr,ei,pi,Ke,Ue);return;case"select":ai=pn=Vn=ri=null;for(Ke in de)if(Tr=de[Ke],de.hasOwnProperty(Ke)&&Tr!=null)switch(Ke){case"value":break;case"multiple":ai=Tr;default:ke.hasOwnProperty(Ke)||ls(Z,te,Ke,null,ke,Tr)}for(Ue in ke)if(Ke=ke[Ue],Tr=de[Ue],ke.hasOwnProperty(Ue)&&(Ke!=null||Tr!=null))switch(Ue){case"value":ri=Ke;break;case"defaultValue":Vn=Ke;break;case"multiple":pn=Ke;default:Ke!==Tr&&ls(Z,te,Ue,Ke,ke,Tr)}te=Vn,de=pn,ke=ai,ri!=null?Mr(Z,!!de,ri,!1):!!ke!=!!de&&(te!=null?Mr(Z,!!de,te,!0):Mr(Z,!!de,de?[]:"",!1));return;case"textarea":ai=ri=null;for(Vn in de)if(Ue=de[Vn],de.hasOwnProperty(Vn)&&Ue!=null&&!ke.hasOwnProperty(Vn))switch(Vn){case"value":break;case"children":break;default:ls(Z,te,Vn,null,ke,Ue)}for(pn in ke)if(Ue=ke[pn],Ke=de[pn],ke.hasOwnProperty(pn)&&(Ue!=null||Ke!=null))switch(pn){case"value":ri=Ue;break;case"defaultValue":ai=Ue;break;case"children":break;case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(A(91));break;default:Ue!==Ke&&ls(Z,te,pn,Ue,ke,Ke)}kr(Z,ri,ai);return;case"option":for(var fa in de)if(ri=de[fa],de.hasOwnProperty(fa)&&ri!=null&&!ke.hasOwnProperty(fa))switch(fa){case"selected":Z.selected=!1;break;default:ls(Z,te,fa,null,ke,ri)}for(Tr in ke)if(ri=ke[Tr],ai=de[Tr],ke.hasOwnProperty(Tr)&&ri!==ai&&(ri!=null||ai!=null))switch(Tr){case"selected":Z.selected=ri&&typeof ri!="function"&&typeof ri!="symbol";break;default:ls(Z,te,Tr,ri,ke,ai)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ia in de)ri=de[ia],de.hasOwnProperty(ia)&&ri!=null&&!ke.hasOwnProperty(ia)&&ls(Z,te,ia,null,ke,ri);for(ei in ke)if(ri=ke[ei],ai=de[ei],ke.hasOwnProperty(ei)&&ri!==ai&&(ri!=null||ai!=null))switch(ei){case"children":case"dangerouslySetInnerHTML":if(ri!=null)throw Error(A(137,te));break;default:ls(Z,te,ei,ri,ke,ai)}return;default:if(qi(te)){for(var cs in de)ri=de[cs],de.hasOwnProperty(cs)&&ri!==void 0&&!ke.hasOwnProperty(cs)&&jp(Z,te,cs,void 0,ke,ri);for(pi in ke)ri=ke[pi],ai=de[pi],!ke.hasOwnProperty(pi)||ri===ai||ri===void 0&&ai===void 0||jp(Z,te,pi,ri,ke,ai);return}}for(var Yr in de)ri=de[Yr],de.hasOwnProperty(Yr)&&ri!=null&&!ke.hasOwnProperty(Yr)&&ls(Z,te,Yr,null,ke,ri);for(yi in ke)ri=ke[yi],ai=de[yi],!ke.hasOwnProperty(yi)||ri===ai||ri==null&&ai==null||ls(Z,te,yi,ri,ke,ai)}var Lp=null,Op=null;function op(Z){return Z.nodeType===9?Z:Z.ownerDocument}function dm(Z){switch(Z){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fm(Z,te){if(Z===0)switch(te){case"svg":return 1;case"math":return 2;default:return 0}return Z===1&&te==="foreignObject"?0:Z}function Fp(Z,te){return Z==="textarea"||Z==="noscript"||typeof te.children=="string"||typeof te.children=="number"||typeof te.children=="bigint"||typeof te.dangerouslySetInnerHTML=="object"&&te.dangerouslySetInnerHTML!==null&&te.dangerouslySetInnerHTML.__html!=null}var Up=null;function Ym(){var Z=window.event;return Z&&Z.type==="popstate"?Z===Up?!1:(Up=Z,!0):(Up=null,!1)}var hm=typeof setTimeout=="function"?setTimeout:void 0,Xm=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,Qm=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(Z){return pm.resolve(null).then(Z).catch(Jm)}:hm;function Jm(Z){setTimeout(function(){throw Z})}function id(Z){return Z==="head"}function mm(Z,te){var de=te,ke=0,Ue=0;do{var Ke=de.nextSibling;if(Z.removeChild(de),Ke&&Ke.nodeType===8)if(de=Ke.data,de==="/$"){if(0<ke&&8>ke){de=ke;var pn=Z.ownerDocument;if(de&1&&rh(pn.documentElement),de&2&&rh(pn.body),de&4)for(de=pn.head,rh(de),pn=de.firstChild;pn;){var Vn=pn.nextSibling,Tr=pn.nodeName;pn[sr]||Tr==="SCRIPT"||Tr==="STYLE"||Tr==="LINK"&&pn.rel.toLowerCase()==="stylesheet"||de.removeChild(pn),pn=Vn}}if(Ue===0){Z.removeChild(Ke),dh(te);return}Ue--}else de==="$"||de==="$?"||de==="$!"?Ue++:ke=de.charCodeAt(0)-48;else ke=0;de=Ke}while(de);dh(te)}function Vp(Z){var te=Z.firstChild;for(te&&te.nodeType===10&&(te=te.nextSibling);te;){var de=te;switch(te=te.nextSibling,de.nodeName){case"HTML":case"HEAD":case"BODY":Vp(de),rr(de);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(de.rel.toLowerCase()==="stylesheet")continue}Z.removeChild(de)}}function Zm(Z,te,de,ke){for(;Z.nodeType===1;){var Ue=de;if(Z.nodeName.toLowerCase()!==te.toLowerCase()){if(!ke&&(Z.nodeName!=="INPUT"||Z.type!=="hidden"))break}else if(ke){if(!Z[sr])switch(te){case"meta":if(!Z.hasAttribute("itemprop"))break;return Z;case"link":if(Ke=Z.getAttribute("rel"),Ke==="stylesheet"&&Z.hasAttribute("data-precedence"))break;if(Ke!==Ue.rel||Z.getAttribute("href")!==(Ue.href==null||Ue.href===""?null:Ue.href)||Z.getAttribute("crossorigin")!==(Ue.crossOrigin==null?null:Ue.crossOrigin)||Z.getAttribute("title")!==(Ue.title==null?null:Ue.title))break;return Z;case"style":if(Z.hasAttribute("data-precedence"))break;return Z;case"script":if(Ke=Z.getAttribute("src"),(Ke!==(Ue.src==null?null:Ue.src)||Z.getAttribute("type")!==(Ue.type==null?null:Ue.type)||Z.getAttribute("crossorigin")!==(Ue.crossOrigin==null?null:Ue.crossOrigin))&&Ke&&Z.hasAttribute("async")&&!Z.hasAttribute("itemprop"))break;return Z;default:return Z}}else if(te==="input"&&Z.type==="hidden"){var Ke=Ue.name==null?null:""+Ue.name;if(Ue.type==="hidden"&&Z.getAttribute("name")===Ke)return Z}else return Z;if(Z=fc(Z.nextSibling),Z===null)break}return null}function eg(Z,te,de){if(te==="")return null;for(;Z.nodeType!==3;)if((Z.nodeType!==1||Z.nodeName!=="INPUT"||Z.type!=="hidden")&&!de||(Z=fc(Z.nextSibling),Z===null))return null;return Z}function Gp(Z){return Z.data==="$!"||Z.data==="$?"&&Z.ownerDocument.readyState==="complete"}function tg(Z,te){var de=Z.ownerDocument;if(Z.data!=="$?"||de.readyState==="complete")te();else{var ke=function(){te(),de.removeEventListener("DOMContentLoaded",ke)};de.addEventListener("DOMContentLoaded",ke),Z._reactRetry=ke}}function fc(Z){for(;Z!=null;Z=Z.nextSibling){var te=Z.nodeType;if(te===1||te===3)break;if(te===8){if(te=Z.data,te==="$"||te==="$!"||te==="$?"||te==="F!"||te==="F")break;if(te==="/$")return null}}return Z}var zp=null;function gm(Z){Z=Z.previousSibling;for(var te=0;Z;){if(Z.nodeType===8){var de=Z.data;if(de==="$"||de==="$!"||de==="$?"){if(te===0)return Z;te--}else de==="/$"&&te++}Z=Z.previousSibling}return null}function vm(Z,te,de){switch(te=op(de),Z){case"html":if(Z=te.documentElement,!Z)throw Error(A(452));return Z;case"head":if(Z=te.head,!Z)throw Error(A(453));return Z;case"body":if(Z=te.body,!Z)throw Error(A(454));return Z;default:throw Error(A(451))}}function rh(Z){for(var te=Z.attributes;te.length;)Z.removeAttributeNode(te[0]);rr(Z)}var Yl=new Map,_m=new Set;function lp(Z){return typeof Z.getRootNode=="function"?Z.getRootNode():Z.nodeType===9?Z:Z.ownerDocument}var yu=He.d;He.d={f:ng,r:rg,D:ig,C:ag,L:sg,m:og,X:cg,S:lg,M:ug};function ng(){var Z=yu.f(),te=Wl();return Z||te}function rg(Z){var te=At(Z);te!==null&&te.tag===5&&te.type==="form"?Vh(te):yu.r(Z)}var Af=typeof document>"u"?null:document;function xm(Z,te,de){var ke=Af;if(ke&&typeof te=="string"&&te){var Ue=bi(te);Ue='link[rel="'+Z+'"][href="'+Ue+'"]',typeof de=="string"&&(Ue+='[crossorigin="'+de+'"]'),_m.has(Ue)||(_m.add(Ue),Z={rel:Z,crossOrigin:de,href:te},ke.querySelector(Ue)===null&&(te=ke.createElement("link"),Io(te,"link",Z),Hn(te),ke.head.appendChild(te)))}}function ig(Z){yu.D(Z),xm("dns-prefetch",Z,null)}function ag(Z,te){yu.C(Z,te),xm("preconnect",Z,te)}function sg(Z,te,de){yu.L(Z,te,de);var ke=Af;if(ke&&Z&&te){var Ue='link[rel="preload"][as="'+bi(te)+'"]';te==="image"&&de&&de.imageSrcSet?(Ue+='[imagesrcset="'+bi(de.imageSrcSet)+'"]',typeof de.imageSizes=="string"&&(Ue+='[imagesizes="'+bi(de.imageSizes)+'"]')):Ue+='[href="'+bi(Z)+'"]';var Ke=Ue;switch(te){case"style":Ke=Sf(Z);break;case"script":Ke=Cf(Z)}Yl.has(Ke)||(Z=z({rel:"preload",href:te==="image"&&de&&de.imageSrcSet?void 0:Z,as:te},de),Yl.set(Ke,Z),ke.querySelector(Ue)!==null||te==="style"&&ke.querySelector(ih(Ke))||te==="script"&&ke.querySelector(ah(Ke))||(te=ke.createElement("link"),Io(te,"link",Z),Hn(te),ke.head.appendChild(te)))}}function og(Z,te){yu.m(Z,te);var de=Af;if(de&&Z){var ke=te&&typeof te.as=="string"?te.as:"script",Ue='link[rel="modulepreload"][as="'+bi(ke)+'"][href="'+bi(Z)+'"]',Ke=Ue;switch(ke){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Ke=Cf(Z)}if(!Yl.has(Ke)&&(Z=z({rel:"modulepreload",href:Z},te),Yl.set(Ke,Z),de.querySelector(Ue)===null)){switch(ke){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(de.querySelector(ah(Ke)))return}ke=de.createElement("link"),Io(ke,"link",Z),Hn(ke),de.head.appendChild(ke)}}}function lg(Z,te,de){yu.S(Z,te,de);var ke=Af;if(ke&&Z){var Ue=Ft(ke).hoistableStyles,Ke=Sf(Z);te=te||"default";var pn=Ue.get(Ke);if(!pn){var Vn={loading:0,preload:null};if(pn=ke.querySelector(ih(Ke)))Vn.loading=5;else{Z=z({rel:"stylesheet",href:Z,"data-precedence":te},de),(de=Yl.get(Ke))&&Hp(Z,de);var Tr=pn=ke.createElement("link");Hn(Tr),Io(Tr,"link",Z),Tr._p=new Promise(function(ei,pi){Tr.onload=ei,Tr.onerror=pi}),Tr.addEventListener("load",function(){Vn.loading|=1}),Tr.addEventListener("error",function(){Vn.loading|=2}),Vn.loading|=4,cp(pn,te,ke)}pn={type:"stylesheet",instance:pn,count:1,state:Vn},Ue.set(Ke,pn)}}}function cg(Z,te){yu.X(Z,te);var de=Af;if(de&&Z){var ke=Ft(de).hoistableScripts,Ue=Cf(Z),Ke=ke.get(Ue);Ke||(Ke=de.querySelector(ah(Ue)),Ke||(Z=z({src:Z,async:!0},te),(te=Yl.get(Ue))&&qp(Z,te),Ke=de.createElement("script"),Hn(Ke),Io(Ke,"link",Z),de.head.appendChild(Ke)),Ke={type:"script",instance:Ke,count:1,state:null},ke.set(Ue,Ke))}}function ug(Z,te){yu.M(Z,te);var de=Af;if(de&&Z){var ke=Ft(de).hoistableScripts,Ue=Cf(Z),Ke=ke.get(Ue);Ke||(Ke=de.querySelector(ah(Ue)),Ke||(Z=z({src:Z,async:!0,type:"module"},te),(te=Yl.get(Ue))&&qp(Z,te),Ke=de.createElement("script"),Hn(Ke),Io(Ke,"link",Z),de.head.appendChild(Ke)),Ke={type:"script",instance:Ke,count:1,state:null},ke.set(Ue,Ke))}}function ym(Z,te,de,ke){var Ue=(Ue=Mn.current)?lp(Ue):null;if(!Ue)throw Error(A(446));switch(Z){case"meta":case"title":return null;case"style":return typeof de.precedence=="string"&&typeof de.href=="string"?(te=Sf(de.href),de=Ft(Ue).hoistableStyles,ke=de.get(te),ke||(ke={type:"style",instance:null,count:0,state:null},de.set(te,ke)),ke):{type:"void",instance:null,count:0,state:null};case"link":if(de.rel==="stylesheet"&&typeof de.href=="string"&&typeof de.precedence=="string"){Z=Sf(de.href);var Ke=Ft(Ue).hoistableStyles,pn=Ke.get(Z);if(pn||(Ue=Ue.ownerDocument||Ue,pn={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Ke.set(Z,pn),(Ke=Ue.querySelector(ih(Z)))&&!Ke._p&&(pn.instance=Ke,pn.state.loading=5),Yl.has(Z)||(de={rel:"preload",as:"style",href:de.href,crossOrigin:de.crossOrigin,integrity:de.integrity,media:de.media,hrefLang:de.hrefLang,referrerPolicy:de.referrerPolicy},Yl.set(Z,de),Ke||dg(Ue,Z,de,pn.state))),te&&ke===null)throw Error(A(528,""));return pn}if(te&&ke!==null)throw Error(A(529,""));return null;case"script":return te=de.async,de=de.src,typeof de=="string"&&te&&typeof te!="function"&&typeof te!="symbol"?(te=Cf(de),de=Ft(Ue).hoistableScripts,ke=de.get(te),ke||(ke={type:"script",instance:null,count:0,state:null},de.set(te,ke)),ke):{type:"void",instance:null,count:0,state:null};default:throw Error(A(444,Z))}}function Sf(Z){return'href="'+bi(Z)+'"'}function ih(Z){return'link[rel="stylesheet"]['+Z+"]"}function bm(Z){return z({},Z,{"data-precedence":Z.precedence,precedence:null})}function dg(Z,te,de,ke){Z.querySelector('link[rel="preload"][as="style"]['+te+"]")?ke.loading=1:(te=Z.createElement("link"),ke.preload=te,te.addEventListener("load",function(){return ke.loading|=1}),te.addEventListener("error",function(){return ke.loading|=2}),Io(te,"link",de),Hn(te),Z.head.appendChild(te))}function Cf(Z){return'[src="'+bi(Z)+'"]'}function ah(Z){return"script[async]"+Z}function Em(Z,te,de){if(te.count++,te.instance===null)switch(te.type){case"style":var ke=Z.querySelector('style[data-href~="'+bi(de.href)+'"]');if(ke)return te.instance=ke,Hn(ke),ke;var Ue=z({},de,{"data-href":de.href,"data-precedence":de.precedence,href:null,precedence:null});return ke=(Z.ownerDocument||Z).createElement("style"),Hn(ke),Io(ke,"style",Ue),cp(ke,de.precedence,Z),te.instance=ke;case"stylesheet":Ue=Sf(de.href);var Ke=Z.querySelector(ih(Ue));if(Ke)return te.state.loading|=4,te.instance=Ke,Hn(Ke),Ke;ke=bm(de),(Ue=Yl.get(Ue))&&Hp(ke,Ue),Ke=(Z.ownerDocument||Z).createElement("link"),Hn(Ke);var pn=Ke;return pn._p=new Promise(function(Vn,Tr){pn.onload=Vn,pn.onerror=Tr}),Io(Ke,"link",ke),te.state.loading|=4,cp(Ke,de.precedence,Z),te.instance=Ke;case"script":return Ke=Cf(de.src),(Ue=Z.querySelector(ah(Ke)))?(te.instance=Ue,Hn(Ue),Ue):(ke=de,(Ue=Yl.get(Ke))&&(ke=z({},de),qp(ke,Ue)),Z=Z.ownerDocument||Z,Ue=Z.createElement("script"),Hn(Ue),Io(Ue,"link",ke),Z.head.appendChild(Ue),te.instance=Ue);case"void":return null;default:throw Error(A(443,te.type))}else te.type==="stylesheet"&&(te.state.loading&4)===0&&(ke=te.instance,te.state.loading|=4,cp(ke,de.precedence,Z));return te.instance}function cp(Z,te,de){for(var ke=de.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),Ue=ke.length?ke[ke.length-1]:null,Ke=Ue,pn=0;pn<ke.length;pn++){var Vn=ke[pn];if(Vn.dataset.precedence===te)Ke=Vn;else if(Ke!==Ue)break}Ke?Ke.parentNode.insertBefore(Z,Ke.nextSibling):(te=de.nodeType===9?de.head:de,te.insertBefore(Z,te.firstChild))}function Hp(Z,te){Z.crossOrigin==null&&(Z.crossOrigin=te.crossOrigin),Z.referrerPolicy==null&&(Z.referrerPolicy=te.referrerPolicy),Z.title==null&&(Z.title=te.title)}function qp(Z,te){Z.crossOrigin==null&&(Z.crossOrigin=te.crossOrigin),Z.referrerPolicy==null&&(Z.referrerPolicy=te.referrerPolicy),Z.integrity==null&&(Z.integrity=te.integrity)}var up=null;function Am(Z,te,de){if(up===null){var ke=new Map,Ue=up=new Map;Ue.set(de,ke)}else Ue=up,ke=Ue.get(de),ke||(ke=new Map,Ue.set(de,ke));if(ke.has(Z))return ke;for(ke.set(Z,null),de=de.getElementsByTagName(Z),Ue=0;Ue<de.length;Ue++){var Ke=de[Ue];if(!(Ke[sr]||Ke[Ar]||Z==="link"&&Ke.getAttribute("rel")==="stylesheet")&&Ke.namespaceURI!=="http://www.w3.org/2000/svg"){var pn=Ke.getAttribute(te)||"";pn=Z+pn;var Vn=ke.get(pn);Vn?Vn.push(Ke):ke.set(pn,[Ke])}}return ke}function Sm(Z,te,de){Z=Z.ownerDocument||Z,Z.head.insertBefore(de,te==="title"?Z.querySelector("head > title"):null)}function fg(Z,te,de){if(de===1||te.itemProp!=null)return!1;switch(Z){case"meta":case"title":return!0;case"style":if(typeof te.precedence!="string"||typeof te.href!="string"||te.href==="")break;return!0;case"link":if(typeof te.rel!="string"||typeof te.href!="string"||te.href===""||te.onLoad||te.onError)break;switch(te.rel){case"stylesheet":return Z=te.disabled,typeof te.precedence=="string"&&Z==null;default:return!0}case"script":if(te.async&&typeof te.async!="function"&&typeof te.async!="symbol"&&!te.onLoad&&!te.onError&&te.src&&typeof te.src=="string")return!0}return!1}function Cm(Z){return!(Z.type==="stylesheet"&&(Z.state.loading&3)===0)}var sh=null;function hg(){}function pg(Z,te,de){if(sh===null)throw Error(A(475));var ke=sh;if(te.type==="stylesheet"&&(typeof de.media!="string"||matchMedia(de.media).matches!==!1)&&(te.state.loading&4)===0){if(te.instance===null){var Ue=Sf(de.href),Ke=Z.querySelector(ih(Ue));if(Ke){Z=Ke._p,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"&&(ke.count++,ke=dp.bind(ke),Z.then(ke,ke)),te.state.loading|=4,te.instance=Ke,Hn(Ke);return}Ke=Z.ownerDocument||Z,de=bm(de),(Ue=Yl.get(Ue))&&Hp(de,Ue),Ke=Ke.createElement("link"),Hn(Ke);var pn=Ke;pn._p=new Promise(function(Vn,Tr){pn.onload=Vn,pn.onerror=Tr}),Io(Ke,"link",de),te.instance=Ke}ke.stylesheets===null&&(ke.stylesheets=new Map),ke.stylesheets.set(te,Z),(Z=te.state.preload)&&(te.state.loading&3)===0&&(ke.count++,te=dp.bind(ke),Z.addEventListener("load",te),Z.addEventListener("error",te))}}function mg(){if(sh===null)throw Error(A(475));var Z=sh;return Z.stylesheets&&Z.count===0&&$p(Z,Z.stylesheets),0<Z.count?function(te){var de=setTimeout(function(){if(Z.stylesheets&&$p(Z,Z.stylesheets),Z.unsuspend){var ke=Z.unsuspend;Z.unsuspend=null,ke()}},6e4);return Z.unsuspend=te,function(){Z.unsuspend=null,clearTimeout(de)}}:null}function dp(){if(this.count--,this.count===0){if(this.stylesheets)$p(this,this.stylesheets);else if(this.unsuspend){var Z=this.unsuspend;this.unsuspend=null,Z()}}}var fp=null;function $p(Z,te){Z.stylesheets=null,Z.unsuspend!==null&&(Z.count++,fp=new Map,te.forEach(gg,Z),fp=null,dp.call(Z))}function gg(Z,te){if(!(te.state.loading&4)){var de=fp.get(Z);if(de)var ke=de.get(null);else{de=new Map,fp.set(Z,de);for(var Ue=Z.querySelectorAll("link[data-precedence],style[data-precedence]"),Ke=0;Ke<Ue.length;Ke++){var pn=Ue[Ke];(pn.nodeName==="LINK"||pn.getAttribute("media")!=="not all")&&(de.set(pn.dataset.precedence,pn),ke=pn)}ke&&de.set(null,ke)}Ue=te.instance,pn=Ue.getAttribute("data-precedence"),Ke=de.get(pn)||ke,Ke===ke&&de.set(null,Ue),de.set(pn,Ue),this.count++,ke=dp.bind(this),Ue.addEventListener("load",ke),Ue.addEventListener("error",ke),Ke?Ke.parentNode.insertBefore(Ue,Ke.nextSibling):(Z=Z.nodeType===9?Z.head:Z,Z.insertBefore(Ue,Z.firstChild)),te.state.loading|=4}}var oh={$$typeof:ue,Provider:null,Consumer:null,_currentValue:Xe,_currentValue2:Xe,_threadCount:0};function vg(Z,te,de,ke,Ue,Ke,pn,Vn){this.tag=1,this.containerInfo=Z,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ui(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.hiddenUpdates=ui(null),this.identifierPrefix=ke,this.onUncaughtError=Ue,this.onCaughtError=Ke,this.onRecoverableError=pn,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Vn,this.incompleteTransitions=new Map}function wm(Z,te,de,ke,Ue,Ke,pn,Vn,Tr,ei,pi,yi){return Z=new vg(Z,te,de,pn,Vn,Tr,ei,yi),te=1,Ke===!0&&(te|=24),Ke=$s(3,null,null,te),Z.current=Ke,Ke.stateNode=Z,te=Hd(),te.refCount++,Z.pooledCache=te,te.refCount++,Ke.memoizedState={element:ke,isDehydrated:de,cache:te},kf(Ke),Z}function Tm(Z){return Z?(Z=Pl,Z):Pl}function Rm(Z,te,de,ke,Ue,Ke){Ue=Tm(Ue),ke.context===null?ke.context=Ue:ke.pendingContext=Ue,ke=jl(te),ke.payload={element:de},Ke=Ke===void 0?null:Ke,Ke!==null&&(ke.callback=Ke),de=nc(Z,ke,te),de!==null&&(Mo(de,Z,te),tu(de,Z,te))}function Mm(Z,te){if(Z=Z.memoizedState,Z!==null&&Z.dehydrated!==null){var de=Z.retryLane;Z.retryLane=de!==0&&de<te?de:te}}function Wp(Z,te){Mm(Z,te),(Z=Z.alternate)&&Mm(Z,te)}function Im(Z){if(Z.tag===13){var te=nl(Z,67108864);te!==null&&Mo(te,Z,67108864),Wp(Z,67108864)}}var hp=!0;function xg(Z,te,de,ke){var Ue=je.T;je.T=null;var Ke=He.p;try{He.p=2,Kp(Z,te,de,ke)}finally{He.p=Ke,je.T=Ue}}function yg(Z,te,de,ke){var Ue=je.T;je.T=null;var Ke=He.p;try{He.p=8,Kp(Z,te,de,ke)}finally{He.p=Ke,je.T=Ue}}function Kp(Z,te,de,ke){if(hp){var Ue=Yp(ke);if(Ue===null)Dp(Z,te,ke,pp,de),Nm(Z,ke);else if(Eg(Ue,Z,te,de,ke))ke.stopPropagation();else if(Nm(Z,ke),te&4&&-1<bg.indexOf(Z)){for(;Ue!==null;){var Ke=At(Ue);if(Ke!==null)switch(Ke.tag){case 3:if(Ke=Ke.stateNode,Ke.current.memoizedState.isDehydrated){var pn=Mi(Ke.pendingLanes);if(pn!==0){var Vn=Ke;for(Vn.pendingLanes|=2,Vn.entangledLanes|=2;pn;){var Tr=1<<31-Qr(pn);Vn.entanglements[1]|=Tr,pn&=~Tr}Vc(Ke),(Ga&6)===0&&(xo=jn()+500,eh(0))}}break;case 13:Vn=nl(Ke,2),Vn!==null&&Mo(Vn,Ke,2),Wl(),Wp(Ke,2)}if(Ke=Yp(ke),Ke===null&&Dp(Z,te,ke,pp,de),Ke===Ue)break;Ue=Ke}Ue!==null&&ke.stopPropagation()}else Dp(Z,te,ke,null,de)}}function Yp(Z){return Z=Gi(Z),Xp(Z)}var pp=null;function Xp(Z){if(pp=null,Z=it(Z),Z!==null){var te=w(Z);if(te===null)Z=null;else{var de=te.tag;if(de===13){if(Z=T(te),Z!==null)return Z;Z=null}else if(de===3){if(te.stateNode.current.memoizedState.isDehydrated)return te.tag===3?te.stateNode.containerInfo:null;Z=null}else te!==Z&&(Z=null)}}return pp=Z,null}function km(Z){switch(Z){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Un()){case bn:return 2;case Kn:return 8;case Qn:case pr:return 32;case fn:return 268435456;default:return 32}default:return 32}}var Qp=!1,ad=null,sd=null,od=null,lh=new Map,ch=new Map,ld=[],bg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nm(Z,te){switch(Z){case"focusin":case"focusout":ad=null;break;case"dragenter":case"dragleave":sd=null;break;case"mouseover":case"mouseout":od=null;break;case"pointerover":case"pointerout":lh.delete(te.pointerId);break;case"gotpointercapture":case"lostpointercapture":ch.delete(te.pointerId)}}function uh(Z,te,de,ke,Ue,Ke){return Z===null||Z.nativeEvent!==Ke?(Z={blockedOn:te,domEventName:de,eventSystemFlags:ke,nativeEvent:Ke,targetContainers:[Ue]},te!==null&&(te=At(te),te!==null&&Im(te)),Z):(Z.eventSystemFlags|=ke,te=Z.targetContainers,Ue!==null&&te.indexOf(Ue)===-1&&te.push(Ue),Z)}function Eg(Z,te,de,ke,Ue){switch(te){case"focusin":return ad=uh(ad,Z,te,de,ke,Ue),!0;case"dragenter":return sd=uh(sd,Z,te,de,ke,Ue),!0;case"mouseover":return od=uh(od,Z,te,de,ke,Ue),!0;case"pointerover":var Ke=Ue.pointerId;return lh.set(Ke,uh(lh.get(Ke)||null,Z,te,de,ke,Ue)),!0;case"gotpointercapture":return Ke=Ue.pointerId,ch.set(Ke,uh(ch.get(Ke)||null,Z,te,de,ke,Ue)),!0}return!1}function Pm(Z){var te=it(Z.target);if(te!==null){var de=w(te);if(de!==null){if(te=de.tag,te===13){if(te=T(de),te!==null){Z.blockedOn=te,tr(Z.priority,function(){if(de.tag===13){var ke=As();ke=Gn(ke);var Ue=nl(de,ke);Ue!==null&&Mo(Ue,de,ke),Wp(de,ke)}});return}}else if(te===3&&de.stateNode.current.memoizedState.isDehydrated){Z.blockedOn=de.tag===3?de.stateNode.containerInfo:null;return}}}Z.blockedOn=null}function mp(Z){if(Z.blockedOn!==null)return!1;for(var te=Z.targetContainers;0<te.length;){var de=Yp(Z.nativeEvent);if(de===null){de=Z.nativeEvent;var ke=new de.constructor(de.type,de);Oi=ke,de.target.dispatchEvent(ke),Oi=null}else return te=At(de),te!==null&&Im(te),Z.blockedOn=de,!1;te.shift()}return!0}function Bm(Z,te,de){mp(Z)&&de.delete(te)}function Ag(){Qp=!1,ad!==null&&mp(ad)&&(ad=null),sd!==null&&mp(sd)&&(sd=null),od!==null&&mp(od)&&(od=null),lh.forEach(Bm),ch.forEach(Bm)}function gp(Z,te){Z.blockedOn===te&&(Z.blockedOn=null,Qp||(Qp=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Ag)))}var vp=null;function Dm(Z){vp!==Z&&(vp=Z,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){vp===Z&&(vp=null);for(var te=0;te<Z.length;te+=3){var de=Z[te],ke=Z[te+1],Ue=Z[te+2];if(typeof ke!="function"){if(Xp(ke||de)===null)continue;break}var Ke=At(de);Ke!==null&&(Z.splice(te,3),te-=3,Wf(Ke,{pending:!0,data:Ue,method:de.method,action:ke},ke,Ue))}}))}function dh(Z){function te(Tr){return gp(Tr,Z)}ad!==null&&gp(ad,Z),sd!==null&&gp(sd,Z),od!==null&&gp(od,Z),lh.forEach(te),ch.forEach(te);for(var de=0;de<ld.length;de++){var ke=ld[de];ke.blockedOn===Z&&(ke.blockedOn=null)}for(;0<ld.length&&(de=ld[0],de.blockedOn===null);)Pm(de),de.blockedOn===null&&ld.shift();if(de=(Z.ownerDocument||Z).$$reactFormReplay,de!=null)for(ke=0;ke<de.length;ke+=3){var Ue=de[ke],Ke=de[ke+1],pn=Ue[Tn]||null;if(typeof Ke=="function")pn||Dm(de);else if(pn){var Vn=null;if(Ke&&Ke.hasAttribute("formAction")){if(Ue=Ke,pn=Ke[Tn]||null)Vn=pn.formAction;else if(Xp(Ue)!==null)continue}else Vn=pn.action;typeof Vn=="function"?de[ke+1]=Vn:(de.splice(ke,3),ke-=3),Dm(de)}}}function Jp(Z){this._internalRoot=Z}_p.prototype.render=Jp.prototype.render=function(Z){var te=this._internalRoot;if(te===null)throw Error(A(409));var de=te.current,ke=As();Rm(de,ke,Z,te,null,null)},_p.prototype.unmount=Jp.prototype.unmount=function(){var Z=this._internalRoot;if(Z!==null){this._internalRoot=null;var te=Z.containerInfo;Rm(Z.current,2,null,Z,null,null),Wl(),te[tt]=null}};function _p(Z){this._internalRoot=Z}_p.prototype.unstable_scheduleHydration=function(Z){if(Z){var te=mn();Z={blockedOn:null,target:Z,priority:te};for(var de=0;de<ld.length&&te!==0&&te<ld[de].priority;de++);ld.splice(de,0,Z),de===0&&Pm(Z)}};var jm=d.version;if(jm!=="19.1.1")throw Error(A(527,jm,"19.1.1"));He.findDOMNode=function(Z){var te=Z._reactInternals;if(te===void 0)throw typeof Z.render=="function"?Error(A(188)):(Z=Object.keys(Z).join(","),Error(A(268,Z)));return Z=G(te),Z=Z!==null?I(Z):null,Z=Z===null?null:Z.stateNode,Z};var Sg={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:je,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{kn=xp.inject(Sg),nr=xp}catch{}}return reactDomClient_production.createRoot=function(Z,te){if(!C(Z))throw Error(A(299));var de=!1,ke="",Ue=Pd,Ke=lf,pn=Zh,Vn=null;return te!=null&&(te.unstable_strictMode===!0&&(de=!0),te.identifierPrefix!==void 0&&(ke=te.identifierPrefix),te.onUncaughtError!==void 0&&(Ue=te.onUncaughtError),te.onCaughtError!==void 0&&(Ke=te.onCaughtError),te.onRecoverableError!==void 0&&(pn=te.onRecoverableError),te.unstable_transitionCallbacks!==void 0&&(Vn=te.unstable_transitionCallbacks)),te=wm(Z,1,!1,null,null,de,ke,Ue,Ke,pn,Vn,null),Z[tt]=te.current,Bp(Z),new Jp(te)},reactDomClient_production.hydrateRoot=function(Z,te,de){if(!C(Z))throw Error(A(299));var ke=!1,Ue="",Ke=Pd,pn=lf,Vn=Zh,Tr=null,ei=null;return de!=null&&(de.unstable_strictMode===!0&&(ke=!0),de.identifierPrefix!==void 0&&(Ue=de.identifierPrefix),de.onUncaughtError!==void 0&&(Ke=de.onUncaughtError),de.onCaughtError!==void 0&&(pn=de.onCaughtError),de.onRecoverableError!==void 0&&(Vn=de.onRecoverableError),de.unstable_transitionCallbacks!==void 0&&(Tr=de.unstable_transitionCallbacks),de.formState!==void 0&&(ei=de.formState)),te=wm(Z,1,!0,te,de??null,ke,Ue,Ke,pn,Vn,Tr,ei),te.context=Tm(null),de=te.current,ke=As(),ke=Gn(ke),Ue=jl(ke),Ue.callback=null,nc(de,Ue,ke),de=ke,te.current.lanes=de,vi(te,de),Vc(te),Z[tt]=te.current,Bp(Z),new _p(te)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(d){console.error(d)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const isString$1=_=>typeof _=="string",defer=()=>{let _,d;const v=new Promise((A,C)=>{_=A,d=C});return v.resolve=_,v.reject=d,v},makeString=_=>_==null?"":""+_,copy=(_,d,v)=>{_.forEach(A=>{d[A]&&(v[A]=d[A])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=_=>_&&_.indexOf("###")>-1?_.replace(lastOfPathSeparatorRegExp,"."):_,canNotTraverseDeeper=_=>!_||isString$1(_),getLastOfPath=(_,d,v)=>{const A=isString$1(d)?d.split("."):d;let C=0;for(;C<A.length-1;){if(canNotTraverseDeeper(_))return{};const w=cleanKey(A[C]);!_[w]&&v&&(_[w]=new v),Object.prototype.hasOwnProperty.call(_,w)?_=_[w]:_={},++C}return canNotTraverseDeeper(_)?{}:{obj:_,k:cleanKey(A[C])}},setPath=(_,d,v)=>{const{obj:A,k:C}=getLastOfPath(_,d,Object);if(A!==void 0||d.length===1){A[C]=v;return}let w=d[d.length-1],T=d.slice(0,d.length-1),R=getLastOfPath(_,T,Object);for(;R.obj===void 0&&T.length;)w=`${T[T.length-1]}.${w}`,T=T.slice(0,T.length-1),R=getLastOfPath(_,T,Object),R?.obj&&typeof R.obj[`${R.k}.${w}`]<"u"&&(R.obj=void 0);R.obj[`${R.k}.${w}`]=v},pushPath=(_,d,v,A)=>{const{obj:C,k:w}=getLastOfPath(_,d,Object);C[w]=C[w]||[],C[w].push(v)},getPath=(_,d)=>{const{obj:v,k:A}=getLastOfPath(_,d);if(v&&Object.prototype.hasOwnProperty.call(v,A))return v[A]},getPathWithDefaults=(_,d,v)=>{const A=getPath(_,v);return A!==void 0?A:getPath(d,v)},deepExtend=(_,d,v)=>{for(const A in d)A!=="__proto__"&&A!=="constructor"&&(A in _?isString$1(_[A])||_[A]instanceof String||isString$1(d[A])||d[A]instanceof String?v&&(_[A]=d[A]):deepExtend(_[A],d[A],v):_[A]=d[A]);return _},regexEscape=_=>_.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape$1=_=>isString$1(_)?_.replace(/[&<>"'\/]/g,d=>_entityMap[d]):_;class RegExpCache{constructor(d){this.capacity=d,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(d){const v=this.regExpMap.get(d);if(v!==void 0)return v;const A=new RegExp(d);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(d,A),this.regExpQueue.push(d),A}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(_,d,v)=>{d=d||"",v=v||"";const A=chars.filter(T=>d.indexOf(T)<0&&v.indexOf(T)<0);if(A.length===0)return!0;const C=looksLikeObjectPathRegExpCache.getRegExp(`(${A.map(T=>T==="?"?"\\?":T).join("|")})`);let w=!C.test(_);if(!w){const T=_.indexOf(v);T>0&&!C.test(_.substring(0,T))&&(w=!0)}return w},deepFind=(_,d,v=".")=>{if(!_)return;if(_[d])return Object.prototype.hasOwnProperty.call(_,d)?_[d]:void 0;const A=d.split(v);let C=_;for(let w=0;w<A.length;){if(!C||typeof C!="object")return;let T,R="";for(let G=w;G<A.length;++G)if(G!==w&&(R+=v),R+=A[G],T=C[R],T!==void 0){if(["string","number","boolean"].indexOf(typeof T)>-1&&G<A.length-1)continue;w+=G-w+1;break}C=T}return C},getCleanedCode=_=>_?.replace("_","-"),consoleLogger={type:"logger",log(_){this.output("log",_)},warn(_){this.output("warn",_)},error(_){this.output("error",_)},output(_,d){console?.[_]?.apply?.(console,d)}};let Logger$1=class Zp{constructor(d,v={}){this.init(d,v)}init(d,v={}){this.prefix=v.prefix||"i18next:",this.logger=d||consoleLogger,this.options=v,this.debug=v.debug}log(...d){return this.forward(d,"log","",!0)}warn(...d){return this.forward(d,"warn","",!0)}error(...d){return this.forward(d,"error","")}deprecate(...d){return this.forward(d,"warn","WARNING DEPRECATED: ",!0)}forward(d,v,A,C){return C&&!this.debug?null:(isString$1(d[0])&&(d[0]=`${A}${this.prefix} ${d[0]}`),this.logger[v](d))}create(d){return new Zp(this.logger,{prefix:`${this.prefix}:${d}:`,...this.options})}clone(d){return d=d||this.options,d.prefix=d.prefix||this.prefix,new Zp(this.logger,d)}};var baseLogger=new Logger$1;class EventEmitter{constructor(){this.observers={}}on(d,v){return d.split(" ").forEach(A=>{this.observers[A]||(this.observers[A]=new Map);const C=this.observers[A].get(v)||0;this.observers[A].set(v,C+1)}),this}off(d,v){if(this.observers[d]){if(!v){delete this.observers[d];return}this.observers[d].delete(v)}}emit(d,...v){this.observers[d]&&Array.from(this.observers[d].entries()).forEach(([C,w])=>{for(let T=0;T<w;T++)C(...v)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([C,w])=>{for(let T=0;T<w;T++)C.apply(C,[d,...v])})}}class ResourceStore extends EventEmitter{constructor(d,v={ns:["translation"],defaultNS:"translation"}){super(),this.data=d||{},this.options=v,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(d){this.options.ns.indexOf(d)<0&&this.options.ns.push(d)}removeNamespaces(d){const v=this.options.ns.indexOf(d);v>-1&&this.options.ns.splice(v,1)}getResource(d,v,A,C={}){const w=C.keySeparator!==void 0?C.keySeparator:this.options.keySeparator,T=C.ignoreJSONStructure!==void 0?C.ignoreJSONStructure:this.options.ignoreJSONStructure;let R;d.indexOf(".")>-1?R=d.split("."):(R=[d,v],A&&(Array.isArray(A)?R.push(...A):isString$1(A)&&w?R.push(...A.split(w)):R.push(A)));const G=getPath(this.data,R);return!G&&!v&&!A&&d.indexOf(".")>-1&&(d=R[0],v=R[1],A=R.slice(2).join(".")),G||!T||!isString$1(A)?G:deepFind(this.data?.[d]?.[v],A,w)}addResource(d,v,A,C,w={silent:!1}){const T=w.keySeparator!==void 0?w.keySeparator:this.options.keySeparator;let R=[d,v];A&&(R=R.concat(T?A.split(T):A)),d.indexOf(".")>-1&&(R=d.split("."),C=v,v=R[1]),this.addNamespaces(v),setPath(this.data,R,C),w.silent||this.emit("added",d,v,A,C)}addResources(d,v,A,C={silent:!1}){for(const w in A)(isString$1(A[w])||Array.isArray(A[w]))&&this.addResource(d,v,w,A[w],{silent:!0});C.silent||this.emit("added",d,v,A)}addResourceBundle(d,v,A,C,w,T={silent:!1,skipCopy:!1}){let R=[d,v];d.indexOf(".")>-1&&(R=d.split("."),C=A,A=v,v=R[1]),this.addNamespaces(v);let G=getPath(this.data,R)||{};T.skipCopy||(A=JSON.parse(JSON.stringify(A))),C?deepExtend(G,A,w):G={...G,...A},setPath(this.data,R,G),T.silent||this.emit("added",d,v,A)}removeResourceBundle(d,v){this.hasResourceBundle(d,v)&&delete this.data[d][v],this.removeNamespaces(v),this.emit("removed",d,v)}hasResourceBundle(d,v){return this.getResource(d,v)!==void 0}getResourceBundle(d,v){return v||(v=this.options.defaultNS),this.getResource(d,v)}getDataByLanguage(d){return this.data[d]}hasLanguageSomeTranslations(d){const v=this.getDataByLanguage(d);return!!(v&&Object.keys(v)||[]).find(C=>v[C]&&Object.keys(v[C]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(_){this.processors[_.name]=_},handle(_,d,v,A,C){return _.forEach(w=>{d=this.processors[w]?.process(d,v,A,C)??d}),d}};const checkedLoadedFor={},shouldHandleAsObject=_=>!isString$1(_)&&typeof _!="boolean"&&typeof _!="number";class Translator extends EventEmitter{constructor(d,v={}){super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],d,this),this.options=v,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(d){d&&(this.language=d)}exists(d,v={interpolation:{}}){const A={...v};return d==null?!1:this.resolve(d,A)?.res!==void 0}extractFromKey(d,v){let A=v.nsSeparator!==void 0?v.nsSeparator:this.options.nsSeparator;A===void 0&&(A=":");const C=v.keySeparator!==void 0?v.keySeparator:this.options.keySeparator;let w=v.ns||this.options.defaultNS||[];const T=A&&d.indexOf(A)>-1,R=!this.options.userDefinedKeySeparator&&!v.keySeparator&&!this.options.userDefinedNsSeparator&&!v.nsSeparator&&!looksLikeObjectPath(d,A,C);if(T&&!R){const G=d.match(this.interpolator.nestingRegexp);if(G&&G.length>0)return{key:d,namespaces:isString$1(w)?[w]:w};const I=d.split(A);(A!==C||A===C&&this.options.ns.indexOf(I[0])>-1)&&(w=I.shift()),d=I.join(C)}return{key:d,namespaces:isString$1(w)?[w]:w}}translate(d,v,A){let C=typeof v=="object"?{...v}:v;if(typeof C!="object"&&this.options.overloadTranslationOptionHandler&&(C=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(C={...C}),C||(C={}),d==null)return"";Array.isArray(d)||(d=[String(d)]);const w=C.returnDetails!==void 0?C.returnDetails:this.options.returnDetails,T=C.keySeparator!==void 0?C.keySeparator:this.options.keySeparator,{key:R,namespaces:G}=this.extractFromKey(d[d.length-1],C),I=G[G.length-1];let z=C.nsSeparator!==void 0?C.nsSeparator:this.options.nsSeparator;z===void 0&&(z=":");const H=C.lng||this.language,Y=C.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(H?.toLowerCase()==="cimode")return Y?w?{res:`${I}${z}${R}`,usedKey:R,exactUsedKey:R,usedLng:H,usedNS:I,usedParams:this.getUsedParamsDetails(C)}:`${I}${z}${R}`:w?{res:R,usedKey:R,exactUsedKey:R,usedLng:H,usedNS:I,usedParams:this.getUsedParamsDetails(C)}:R;const ee=this.resolve(d,C);let ie=ee?.res;const oe=ee?.usedKey||R,se=ee?.exactUsedKey||R,re=["[object Number]","[object Function]","[object RegExp]"],fe=C.joinArrays!==void 0?C.joinArrays:this.options.joinArrays,ue=!this.i18nFormat||this.i18nFormat.handleAsObject,ge=C.count!==void 0&&!isString$1(C.count),ye=Translator.hasDefaultValue(C),be=ge?this.pluralResolver.getSuffix(H,C.count,C):"",ve=C.ordinal&&ge?this.pluralResolver.getSuffix(H,C.count,{ordinal:!1}):"",Me=ge&&!C.ordinal&&C.count===0,we=Me&&C[`defaultValue${this.options.pluralSeparator}zero`]||C[`defaultValue${be}`]||C[`defaultValue${ve}`]||C.defaultValue;let Be=ie;ue&&!ie&&ye&&(Be=we);const De=shouldHandleAsObject(Be),Fe=Object.prototype.toString.apply(Be);if(ue&&Be&&De&&re.indexOf(Fe)<0&&!(isString$1(fe)&&Array.isArray(Be))){if(!C.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Oe=this.options.returnedObjectHandler?this.options.returnedObjectHandler(oe,Be,{...C,ns:G}):`key '${R} (${this.language})' returned an object instead of string.`;return w?(ee.res=Oe,ee.usedParams=this.getUsedParamsDetails(C),ee):Oe}if(T){const Oe=Array.isArray(Be),Ge=Oe?[]:{},ze=Oe?se:oe;for(const je in Be)if(Object.prototype.hasOwnProperty.call(Be,je)){const He=`${ze}${T}${je}`;ye&&!ie?Ge[je]=this.translate(He,{...C,defaultValue:shouldHandleAsObject(we)?we[je]:void 0,joinArrays:!1,ns:G}):Ge[je]=this.translate(He,{...C,joinArrays:!1,ns:G}),Ge[je]===He&&(Ge[je]=Be[je])}ie=Ge}}else if(ue&&isString$1(fe)&&Array.isArray(ie))ie=ie.join(fe),ie&&(ie=this.extendTranslation(ie,d,C,A));else{let Oe=!1,Ge=!1;!this.isValidLookup(ie)&&ye&&(Oe=!0,ie=we),this.isValidLookup(ie)||(Ge=!0,ie=R);const je=(C.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ge?void 0:ie,He=ye&&we!==ie&&this.options.updateMissing;if(Ge||Oe||He){if(this.logger.log(He?"updateKey":"missingKey",H,I,R,He?we:ie),T){const nt=this.resolve(R,{...C,keySeparator:!1});nt&&nt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Xe=[];const $e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,C.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$e&&$e[0])for(let nt=0;nt<$e.length;nt++)Xe.push($e[nt]);else this.options.saveMissingTo==="all"?Xe=this.languageUtils.toResolveHierarchy(C.lng||this.language):Xe.push(C.lng||this.language);const We=(nt,Qt,Wt)=>{const Bn=ye&&Wt!==ie?Wt:je;this.options.missingKeyHandler?this.options.missingKeyHandler(nt,I,Qt,Bn,He,C):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(nt,I,Qt,Bn,He,C),this.emit("missingKey",nt,I,Qt,ie)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ge?Xe.forEach(nt=>{const Qt=this.pluralResolver.getSuffixes(nt,C);Me&&C[`defaultValue${this.options.pluralSeparator}zero`]&&Qt.indexOf(`${this.options.pluralSeparator}zero`)<0&&Qt.push(`${this.options.pluralSeparator}zero`),Qt.forEach(Wt=>{We([nt],R+Wt,C[`defaultValue${Wt}`]||we)})}):We(Xe,R,we))}ie=this.extendTranslation(ie,d,C,ee,A),Ge&&ie===R&&this.options.appendNamespaceToMissingKey&&(ie=`${I}${z}${R}`),(Ge||Oe)&&this.options.parseMissingKeyHandler&&(ie=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${I}${z}${R}`:R,Oe?ie:void 0,C))}return w?(ee.res=ie,ee.usedParams=this.getUsedParamsDetails(C),ee):ie}extendTranslation(d,v,A,C,w){if(this.i18nFormat?.parse)d=this.i18nFormat.parse(d,{...this.options.interpolation.defaultVariables,...A},A.lng||this.language||C.usedLng,C.usedNS,C.usedKey,{resolved:C});else if(!A.skipInterpolation){A.interpolation&&this.interpolator.init({...A,interpolation:{...this.options.interpolation,...A.interpolation}});const G=isString$1(d)&&(A?.interpolation?.skipOnVariables!==void 0?A.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let I;if(G){const H=d.match(this.interpolator.nestingRegexp);I=H&&H.length}let z=A.replace&&!isString$1(A.replace)?A.replace:A;if(this.options.interpolation.defaultVariables&&(z={...this.options.interpolation.defaultVariables,...z}),d=this.interpolator.interpolate(d,z,A.lng||this.language||C.usedLng,A),G){const H=d.match(this.interpolator.nestingRegexp),Y=H&&H.length;I<Y&&(A.nest=!1)}!A.lng&&C&&C.res&&(A.lng=this.language||C.usedLng),A.nest!==!1&&(d=this.interpolator.nest(d,(...H)=>w?.[0]===H[0]&&!A.context?(this.logger.warn(`It seems you are nesting recursively key: ${H[0]} in key: ${v[0]}`),null):this.translate(...H,v),A)),A.interpolation&&this.interpolator.reset()}const T=A.postProcess||this.options.postProcess,R=isString$1(T)?[T]:T;return d!=null&&R?.length&&A.applyPostProcessor!==!1&&(d=postProcessor.handle(R,d,v,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...C,usedParams:this.getUsedParamsDetails(A)},...A}:A,this)),d}resolve(d,v={}){let A,C,w,T,R;return isString$1(d)&&(d=[d]),d.forEach(G=>{if(this.isValidLookup(A))return;const I=this.extractFromKey(G,v),z=I.key;C=z;let H=I.namespaces;this.options.fallbackNS&&(H=H.concat(this.options.fallbackNS));const Y=v.count!==void 0&&!isString$1(v.count),ee=Y&&!v.ordinal&&v.count===0,ie=v.context!==void 0&&(isString$1(v.context)||typeof v.context=="number")&&v.context!=="",oe=v.lngs?v.lngs:this.languageUtils.toResolveHierarchy(v.lng||this.language,v.fallbackLng);H.forEach(se=>{this.isValidLookup(A)||(R=se,!checkedLoadedFor[`${oe[0]}-${se}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(R)&&(checkedLoadedFor[`${oe[0]}-${se}`]=!0,this.logger.warn(`key "${C}" for languages "${oe.join(", ")}" won't get resolved as namespace "${R}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),oe.forEach(re=>{if(this.isValidLookup(A))return;T=re;const fe=[z];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(fe,z,re,se,v);else{let ge;Y&&(ge=this.pluralResolver.getSuffix(re,v.count,v));const ye=`${this.options.pluralSeparator}zero`,be=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(Y&&(fe.push(z+ge),v.ordinal&&ge.indexOf(be)===0&&fe.push(z+ge.replace(be,this.options.pluralSeparator)),ee&&fe.push(z+ye)),ie){const ve=`${z}${this.options.contextSeparator}${v.context}`;fe.push(ve),Y&&(fe.push(ve+ge),v.ordinal&&ge.indexOf(be)===0&&fe.push(ve+ge.replace(be,this.options.pluralSeparator)),ee&&fe.push(ve+ye))}}let ue;for(;ue=fe.pop();)this.isValidLookup(A)||(w=ue,A=this.getResource(re,se,ue,v))}))})}),{res:A,usedKey:C,exactUsedKey:w,usedLng:T,usedNS:R}}isValidLookup(d){return d!==void 0&&!(!this.options.returnNull&&d===null)&&!(!this.options.returnEmptyString&&d==="")}getResource(d,v,A,C={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(d,v,A,C):this.resourceStore.getResource(d,v,A,C)}getUsedParamsDetails(d={}){const v=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],A=d.replace&&!isString$1(d.replace);let C=A?d.replace:d;if(A&&typeof d.count<"u"&&(C.count=d.count),this.options.interpolation.defaultVariables&&(C={...this.options.interpolation.defaultVariables,...C}),!A){C={...C};for(const w of v)delete C[w]}return C}static hasDefaultValue(d){const v="defaultValue";for(const A in d)if(Object.prototype.hasOwnProperty.call(d,A)&&v===A.substring(0,v.length)&&d[A]!==void 0)return!0;return!1}}class LanguageUtil{constructor(d){this.options=d,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(d){if(d=getCleanedCode(d),!d||d.indexOf("-")<0)return null;const v=d.split("-");return v.length===2||(v.pop(),v[v.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(v.join("-"))}getLanguagePartFromCode(d){if(d=getCleanedCode(d),!d||d.indexOf("-")<0)return d;const v=d.split("-");return this.formatLanguageCode(v[0])}formatLanguageCode(d){if(isString$1(d)&&d.indexOf("-")>-1){let v;try{v=Intl.getCanonicalLocales(d)[0]}catch{}return v&&this.options.lowerCaseLng&&(v=v.toLowerCase()),v||(this.options.lowerCaseLng?d.toLowerCase():d)}return this.options.cleanCode||this.options.lowerCaseLng?d.toLowerCase():d}isSupportedCode(d){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(d=this.getLanguagePartFromCode(d)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(d)>-1}getBestMatchFromCodes(d){if(!d)return null;let v;return d.forEach(A=>{if(v)return;const C=this.formatLanguageCode(A);(!this.options.supportedLngs||this.isSupportedCode(C))&&(v=C)}),!v&&this.options.supportedLngs&&d.forEach(A=>{if(v)return;const C=this.getScriptPartFromCode(A);if(this.isSupportedCode(C))return v=C;const w=this.getLanguagePartFromCode(A);if(this.isSupportedCode(w))return v=w;v=this.options.supportedLngs.find(T=>{if(T===w)return T;if(!(T.indexOf("-")<0&&w.indexOf("-")<0)&&(T.indexOf("-")>0&&w.indexOf("-")<0&&T.substring(0,T.indexOf("-"))===w||T.indexOf(w)===0&&w.length>1))return T})}),v||(v=this.getFallbackCodes(this.options.fallbackLng)[0]),v}getFallbackCodes(d,v){if(!d)return[];if(typeof d=="function"&&(d=d(v)),isString$1(d)&&(d=[d]),Array.isArray(d))return d;if(!v)return d.default||[];let A=d[v];return A||(A=d[this.getScriptPartFromCode(v)]),A||(A=d[this.formatLanguageCode(v)]),A||(A=d[this.getLanguagePartFromCode(v)]),A||(A=d.default),A||[]}toResolveHierarchy(d,v){const A=this.getFallbackCodes((v===!1?[]:v)||this.options.fallbackLng||[],d),C=[],w=T=>{T&&(this.isSupportedCode(T)?C.push(T):this.logger.warn(`rejecting language code not found in supportedLngs: ${T}`))};return isString$1(d)&&(d.indexOf("-")>-1||d.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&w(this.formatLanguageCode(d)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&w(this.getScriptPartFromCode(d)),this.options.load!=="currentOnly"&&w(this.getLanguagePartFromCode(d))):isString$1(d)&&w(this.formatLanguageCode(d)),A.forEach(T=>{C.indexOf(T)<0&&w(this.formatLanguageCode(T))}),C}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:_=>_===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(d,v={}){this.languageUtils=d,this.options=v,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(d,v){this.rules[d]=v}clearCache(){this.pluralRulesCache={}}getRule(d,v={}){const A=getCleanedCode(d==="dev"?"en":d),C=v.ordinal?"ordinal":"cardinal",w=JSON.stringify({cleanedCode:A,type:C});if(w in this.pluralRulesCache)return this.pluralRulesCache[w];let T;try{T=new Intl.PluralRules(A,{type:C})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!d.match(/-|_/))return dummyRule;const G=this.languageUtils.getLanguagePartFromCode(d);T=this.getRule(G,v)}return this.pluralRulesCache[w]=T,T}needsPlural(d,v={}){let A=this.getRule(d,v);return A||(A=this.getRule("dev",v)),A?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(d,v,A={}){return this.getSuffixes(d,A).map(C=>`${v}${C}`)}getSuffixes(d,v={}){let A=this.getRule(d,v);return A||(A=this.getRule("dev",v)),A?A.resolvedOptions().pluralCategories.sort((C,w)=>suffixesOrder[C]-suffixesOrder[w]).map(C=>`${this.options.prepend}${v.ordinal?`ordinal${this.options.prepend}`:""}${C}`):[]}getSuffix(d,v,A={}){const C=this.getRule(d,A);return C?`${this.options.prepend}${A.ordinal?`ordinal${this.options.prepend}`:""}${C.select(v)}`:(this.logger.warn(`no plural rule found for: ${d}`),this.getSuffix("dev",v,A))}}const deepFindWithDefaults=(_,d,v,A=".",C=!0)=>{let w=getPathWithDefaults(_,d,v);return!w&&C&&isString$1(v)&&(w=deepFind(_,v,A),w===void 0&&(w=deepFind(d,v,A))),w},regexSafe=_=>_.replace(/\$/g,"$$$$");class Interpolator{constructor(d={}){this.logger=baseLogger.create("interpolator"),this.options=d,this.format=d?.interpolation?.format||(v=>v),this.init(d)}init(d={}){d.interpolation||(d.interpolation={escapeValue:!0});const{escape:v,escapeValue:A,useRawValueToEscape:C,prefix:w,prefixEscaped:T,suffix:R,suffixEscaped:G,formatSeparator:I,unescapeSuffix:z,unescapePrefix:H,nestingPrefix:Y,nestingPrefixEscaped:ee,nestingSuffix:ie,nestingSuffixEscaped:oe,nestingOptionsSeparator:se,maxReplaces:re,alwaysFormat:fe}=d.interpolation;this.escape=v!==void 0?v:escape$1,this.escapeValue=A!==void 0?A:!0,this.useRawValueToEscape=C!==void 0?C:!1,this.prefix=w?regexEscape(w):T||"{{",this.suffix=R?regexEscape(R):G||"}}",this.formatSeparator=I||",",this.unescapePrefix=z?"":H||"-",this.unescapeSuffix=this.unescapePrefix?"":z||"",this.nestingPrefix=Y?regexEscape(Y):ee||regexEscape("$t("),this.nestingSuffix=ie?regexEscape(ie):oe||regexEscape(")"),this.nestingOptionsSeparator=se||",",this.maxReplaces=re||1e3,this.alwaysFormat=fe!==void 0?fe:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const d=(v,A)=>v?.source===A?(v.lastIndex=0,v):new RegExp(A,"g");this.regexp=d(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=d(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=d(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(d,v,A,C){let w,T,R;const G=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},I=ee=>{if(ee.indexOf(this.formatSeparator)<0){const re=deepFindWithDefaults(v,G,ee,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(re,void 0,A,{...C,...v,interpolationkey:ee}):re}const ie=ee.split(this.formatSeparator),oe=ie.shift().trim(),se=ie.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(v,G,oe,this.options.keySeparator,this.options.ignoreJSONStructure),se,A,{...C,...v,interpolationkey:oe})};this.resetRegExp();const z=C?.missingInterpolationHandler||this.options.missingInterpolationHandler,H=C?.interpolation?.skipOnVariables!==void 0?C.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:ee=>regexSafe(ee)},{regex:this.regexp,safeValue:ee=>this.escapeValue?regexSafe(this.escape(ee)):regexSafe(ee)}].forEach(ee=>{for(R=0;w=ee.regex.exec(d);){const ie=w[1].trim();if(T=I(ie),T===void 0)if(typeof z=="function"){const se=z(d,w,C);T=isString$1(se)?se:""}else if(C&&Object.prototype.hasOwnProperty.call(C,ie))T="";else if(H){T=w[0];continue}else this.logger.warn(`missed to pass in variable ${ie} for interpolating ${d}`),T="";else!isString$1(T)&&!this.useRawValueToEscape&&(T=makeString(T));const oe=ee.safeValue(T);if(d=d.replace(w[0],oe),H?(ee.regex.lastIndex+=T.length,ee.regex.lastIndex-=w[0].length):ee.regex.lastIndex=0,R++,R>=this.maxReplaces)break}}),d}nest(d,v,A={}){let C,w,T;const R=(G,I)=>{const z=this.nestingOptionsSeparator;if(G.indexOf(z)<0)return G;const H=G.split(new RegExp(`${z}[ ]*{`));let Y=`{${H[1]}`;G=H[0],Y=this.interpolate(Y,T);const ee=Y.match(/'/g),ie=Y.match(/"/g);((ee?.length??0)%2===0&&!ie||ie.length%2!==0)&&(Y=Y.replace(/'/g,'"'));try{T=JSON.parse(Y),I&&(T={...I,...T})}catch(oe){return this.logger.warn(`failed parsing options string in nesting for key ${G}`,oe),`${G}${z}${Y}`}return T.defaultValue&&T.defaultValue.indexOf(this.prefix)>-1&&delete T.defaultValue,G};for(;C=this.nestingRegexp.exec(d);){let G=[];T={...A},T=T.replace&&!isString$1(T.replace)?T.replace:T,T.applyPostProcessor=!1,delete T.defaultValue;const I=/{.*}/.test(C[1])?C[1].lastIndexOf("}")+1:C[1].indexOf(this.formatSeparator);if(I!==-1&&(G=C[1].slice(I).split(this.formatSeparator).map(z=>z.trim()).filter(Boolean),C[1]=C[1].slice(0,I)),w=v(R.call(this,C[1].trim(),T),T),w&&C[0]===d&&!isString$1(w))return w;isString$1(w)||(w=makeString(w)),w||(this.logger.warn(`missed to resolve ${C[1]} for nesting ${d}`),w=""),G.length&&(w=G.reduce((z,H)=>this.format(z,H,A.lng,{...A,interpolationkey:C[1].trim()}),w.trim())),d=d.replace(C[0],w),this.regexp.lastIndex=0}return d}}const parseFormatStr=_=>{let d=_.toLowerCase().trim();const v={};if(_.indexOf("(")>-1){const A=_.split("(");d=A[0].toLowerCase().trim();const C=A[1].substring(0,A[1].length-1);d==="currency"&&C.indexOf(":")<0?v.currency||(v.currency=C.trim()):d==="relativetime"&&C.indexOf(":")<0?v.range||(v.range=C.trim()):C.split(";").forEach(T=>{if(T){const[R,...G]=T.split(":"),I=G.join(":").trim().replace(/^'+|'+$/g,""),z=R.trim();v[z]||(v[z]=I),I==="false"&&(v[z]=!1),I==="true"&&(v[z]=!0),isNaN(I)||(v[z]=parseInt(I,10))}})}return{formatName:d,formatOptions:v}},createCachedFormatter=_=>{const d={};return(v,A,C)=>{let w=C;C&&C.interpolationkey&&C.formatParams&&C.formatParams[C.interpolationkey]&&C[C.interpolationkey]&&(w={...w,[C.interpolationkey]:void 0});const T=A+JSON.stringify(w);let R=d[T];return R||(R=_(getCleanedCode(A),C),d[T]=R),R(v)}},createNonCachedFormatter=_=>(d,v,A)=>_(getCleanedCode(v),A)(d);class Formatter{constructor(d={}){this.logger=baseLogger.create("formatter"),this.options=d,this.init(d)}init(d,v={interpolation:{}}){this.formatSeparator=v.interpolation.formatSeparator||",";const A=v.cacheInBuiltFormats?createCachedFormatter:createNonCachedFormatter;this.formats={number:A((C,w)=>{const T=new Intl.NumberFormat(C,{...w});return R=>T.format(R)}),currency:A((C,w)=>{const T=new Intl.NumberFormat(C,{...w,style:"currency"});return R=>T.format(R)}),datetime:A((C,w)=>{const T=new Intl.DateTimeFormat(C,{...w});return R=>T.format(R)}),relativetime:A((C,w)=>{const T=new Intl.RelativeTimeFormat(C,{...w});return R=>T.format(R,w.range||"day")}),list:A((C,w)=>{const T=new Intl.ListFormat(C,{...w});return R=>T.format(R)})}}add(d,v){this.formats[d.toLowerCase().trim()]=v}addCached(d,v){this.formats[d.toLowerCase().trim()]=createCachedFormatter(v)}format(d,v,A,C={}){const w=v.split(this.formatSeparator);if(w.length>1&&w[0].indexOf("(")>1&&w[0].indexOf(")")<0&&w.find(R=>R.indexOf(")")>-1)){const R=w.findIndex(G=>G.indexOf(")")>-1);w[0]=[w[0],...w.splice(1,R)].join(this.formatSeparator)}return w.reduce((R,G)=>{const{formatName:I,formatOptions:z}=parseFormatStr(G);if(this.formats[I]){let H=R;try{const Y=C?.formatParams?.[C.interpolationkey]||{},ee=Y.locale||Y.lng||C.locale||C.lng||A;H=this.formats[I](R,ee,{...z,...C,...Y})}catch(Y){this.logger.warn(Y)}return H}else this.logger.warn(`there was no format function for ${I}`);return R},d)}}const removePending=(_,d)=>{_.pending[d]!==void 0&&(delete _.pending[d],_.pendingCount--)};class Connector extends EventEmitter{constructor(d,v,A,C={}){super(),this.backend=d,this.store=v,this.services=A,this.languageUtils=A.languageUtils,this.options=C,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=C.maxParallelReads||10,this.readingCalls=0,this.maxRetries=C.maxRetries>=0?C.maxRetries:5,this.retryTimeout=C.retryTimeout>=1?C.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(A,C.backend,C)}queueLoad(d,v,A,C){const w={},T={},R={},G={};return d.forEach(I=>{let z=!0;v.forEach(H=>{const Y=`${I}|${H}`;!A.reload&&this.store.hasResourceBundle(I,H)?this.state[Y]=2:this.state[Y]<0||(this.state[Y]===1?T[Y]===void 0&&(T[Y]=!0):(this.state[Y]=1,z=!1,T[Y]===void 0&&(T[Y]=!0),w[Y]===void 0&&(w[Y]=!0),G[H]===void 0&&(G[H]=!0)))}),z||(R[I]=!0)}),(Object.keys(w).length||Object.keys(T).length)&&this.queue.push({pending:T,pendingCount:Object.keys(T).length,loaded:{},errors:[],callback:C}),{toLoad:Object.keys(w),pending:Object.keys(T),toLoadLanguages:Object.keys(R),toLoadNamespaces:Object.keys(G)}}loaded(d,v,A){const C=d.split("|"),w=C[0],T=C[1];v&&this.emit("failedLoading",w,T,v),!v&&A&&this.store.addResourceBundle(w,T,A,void 0,void 0,{skipCopy:!0}),this.state[d]=v?-1:2,v&&A&&(this.state[d]=0);const R={};this.queue.forEach(G=>{pushPath(G.loaded,[w],T),removePending(G,d),v&&G.errors.push(v),G.pendingCount===0&&!G.done&&(Object.keys(G.loaded).forEach(I=>{R[I]||(R[I]={});const z=G.loaded[I];z.length&&z.forEach(H=>{R[I][H]===void 0&&(R[I][H]=!0)})}),G.done=!0,G.errors.length?G.callback(G.errors):G.callback())}),this.emit("loaded",R),this.queue=this.queue.filter(G=>!G.done)}read(d,v,A,C=0,w=this.retryTimeout,T){if(!d.length)return T(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:d,ns:v,fcName:A,tried:C,wait:w,callback:T});return}this.readingCalls++;const R=(I,z)=>{if(this.readingCalls--,this.waitingReads.length>0){const H=this.waitingReads.shift();this.read(H.lng,H.ns,H.fcName,H.tried,H.wait,H.callback)}if(I&&z&&C<this.maxRetries){setTimeout(()=>{this.read.call(this,d,v,A,C+1,w*2,T)},w);return}T(I,z)},G=this.backend[A].bind(this.backend);if(G.length===2){try{const I=G(d,v);I&&typeof I.then=="function"?I.then(z=>R(null,z)).catch(R):R(null,I)}catch(I){R(I)}return}return G(d,v,R)}prepareLoading(d,v,A={},C){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),C&&C();isString$1(d)&&(d=this.languageUtils.toResolveHierarchy(d)),isString$1(v)&&(v=[v]);const w=this.queueLoad(d,v,A,C);if(!w.toLoad.length)return w.pending.length||C(),null;w.toLoad.forEach(T=>{this.loadOne(T)})}load(d,v,A){this.prepareLoading(d,v,{},A)}reload(d,v,A){this.prepareLoading(d,v,{reload:!0},A)}loadOne(d,v=""){const A=d.split("|"),C=A[0],w=A[1];this.read(C,w,"read",void 0,void 0,(T,R)=>{T&&this.logger.warn(`${v}loading namespace ${w} for language ${C} failed`,T),!T&&R&&this.logger.log(`${v}loaded namespace ${w} for language ${C}`,R),this.loaded(d,T,R)})}saveMissing(d,v,A,C,w,T={},R=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(v)){this.logger.warn(`did not save key "${A}" as the namespace "${v}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(A==null||A==="")){if(this.backend?.create){const G={...T,isUpdate:w},I=this.backend.create.bind(this.backend);if(I.length<6)try{let z;I.length===5?z=I(d,v,A,C,G):z=I(d,v,A,C),z&&typeof z.then=="function"?z.then(H=>R(null,H)).catch(R):R(null,z)}catch(z){R(z)}else I(d,v,A,C,R,G)}!d||!d[0]||this.store.addResource(d[0],v,A,C)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:_=>{let d={};if(typeof _[1]=="object"&&(d=_[1]),isString$1(_[1])&&(d.defaultValue=_[1]),isString$1(_[2])&&(d.tDescription=_[2]),typeof _[2]=="object"||typeof _[3]=="object"){const v=_[3]||_[2];Object.keys(v).forEach(A=>{d[A]=v[A]})}return d},interpolation:{escapeValue:!0,format:_=>_,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),transformOptions=_=>(isString$1(_.ns)&&(_.ns=[_.ns]),isString$1(_.fallbackLng)&&(_.fallbackLng=[_.fallbackLng]),isString$1(_.fallbackNS)&&(_.fallbackNS=[_.fallbackNS]),_.supportedLngs?.indexOf?.("cimode")<0&&(_.supportedLngs=_.supportedLngs.concat(["cimode"])),typeof _.initImmediate=="boolean"&&(_.initAsync=_.initImmediate),_),noop$3=()=>{},bindMemberFunctions=_=>{Object.getOwnPropertyNames(Object.getPrototypeOf(_)).forEach(v=>{typeof _[v]=="function"&&(_[v]=_[v].bind(_))})};class I18n extends EventEmitter{constructor(d={},v){if(super(),this.options=transformOptions(d),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),v&&!this.isInitialized&&!d.isClone){if(!this.options.initAsync)return this.init(d,v),this;setTimeout(()=>{this.init(d,v)},0)}}init(d={},v){this.isInitializing=!0,typeof d=="function"&&(v=d,d={}),d.defaultNS==null&&d.ns&&(isString$1(d.ns)?d.defaultNS=d.ns:d.ns.indexOf("translation")<0&&(d.defaultNS=d.ns[0]));const A=get();this.options={...A,...this.options,...transformOptions(d)},this.options.interpolation={...A.interpolation,...this.options.interpolation},d.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=d.keySeparator),d.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=d.nsSeparator);const C=I=>I?typeof I=="function"?new I:I:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(C(this.modules.logger),this.options):baseLogger.init(null,this.options);let I;this.modules.formatter?I=this.modules.formatter:I=Formatter;const z=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const H=this.services;H.logger=baseLogger,H.resourceStore=this.store,H.languageUtils=z,H.pluralResolver=new PluralResolver(z,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==A.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),I&&(!this.options.interpolation.format||this.options.interpolation.format===A.interpolation.format)&&(H.formatter=C(I),H.formatter.init&&H.formatter.init(H,this.options),this.options.interpolation.format=H.formatter.format.bind(H.formatter)),H.interpolator=new Interpolator(this.options),H.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},H.backendConnector=new Connector(C(this.modules.backend),H.resourceStore,H,this.options),H.backendConnector.on("*",(ee,...ie)=>{this.emit(ee,...ie)}),this.modules.languageDetector&&(H.languageDetector=C(this.modules.languageDetector),H.languageDetector.init&&H.languageDetector.init(H,this.options.detection,this.options)),this.modules.i18nFormat&&(H.i18nFormat=C(this.modules.i18nFormat),H.i18nFormat.init&&H.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",(ee,...ie)=>{this.emit(ee,...ie)}),this.modules.external.forEach(ee=>{ee.init&&ee.init(this)})}if(this.format=this.options.interpolation.format,v||(v=noop$3),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const I=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);I.length>0&&I[0]!=="dev"&&(this.options.lng=I[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(I=>{this[I]=(...z)=>this.store[I](...z)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(I=>{this[I]=(...z)=>(this.store[I](...z),this)});const R=defer(),G=()=>{const I=(z,H)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),R.resolve(H),v(z,H)};if(this.languages&&!this.isInitialized)return I(null,this.t.bind(this));this.changeLanguage(this.options.lng,I)};return this.options.resources||!this.options.initAsync?G():setTimeout(G,0),R}loadResources(d,v=noop$3){let A=v;const C=isString$1(d)?d:this.language;if(typeof d=="function"&&(A=d),!this.options.resources||this.options.partialBundledLanguages){if(C?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return A();const w=[],T=R=>{if(!R||R==="cimode")return;this.services.languageUtils.toResolveHierarchy(R).forEach(I=>{I!=="cimode"&&w.indexOf(I)<0&&w.push(I)})};C?T(C):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(G=>T(G)),this.options.preload?.forEach?.(R=>T(R)),this.services.backendConnector.load(w,this.options.ns,R=>{!R&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),A(R)})}else A(null)}reloadResources(d,v,A){const C=defer();return typeof d=="function"&&(A=d,d=void 0),typeof v=="function"&&(A=v,v=void 0),d||(d=this.languages),v||(v=this.options.ns),A||(A=noop$3),this.services.backendConnector.reload(d,v,w=>{C.resolve(),A(w)}),C}use(d){if(!d)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!d.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return d.type==="backend"&&(this.modules.backend=d),(d.type==="logger"||d.log&&d.warn&&d.error)&&(this.modules.logger=d),d.type==="languageDetector"&&(this.modules.languageDetector=d),d.type==="i18nFormat"&&(this.modules.i18nFormat=d),d.type==="postProcessor"&&postProcessor.addPostProcessor(d),d.type==="formatter"&&(this.modules.formatter=d),d.type==="3rdParty"&&this.modules.external.push(d),this}setResolvedLanguage(d){if(!(!d||!this.languages)&&!(["cimode","dev"].indexOf(d)>-1)){for(let v=0;v<this.languages.length;v++){const A=this.languages[v];if(!(["cimode","dev"].indexOf(A)>-1)&&this.store.hasLanguageSomeTranslations(A)){this.resolvedLanguage=A;break}}!this.resolvedLanguage&&this.languages.indexOf(d)<0&&this.store.hasLanguageSomeTranslations(d)&&(this.resolvedLanguage=d,this.languages.unshift(d))}}changeLanguage(d,v){this.isLanguageChangingTo=d;const A=defer();this.emit("languageChanging",d);const C=R=>{this.language=R,this.languages=this.services.languageUtils.toResolveHierarchy(R),this.resolvedLanguage=void 0,this.setResolvedLanguage(R)},w=(R,G)=>{G?this.isLanguageChangingTo===d&&(C(G),this.translator.changeLanguage(G),this.isLanguageChangingTo=void 0,this.emit("languageChanged",G),this.logger.log("languageChanged",G)):this.isLanguageChangingTo=void 0,A.resolve((...I)=>this.t(...I)),v&&v(R,(...I)=>this.t(...I))},T=R=>{!d&&!R&&this.services.languageDetector&&(R=[]);const G=isString$1(R)?R:R&&R[0],I=this.store.hasLanguageSomeTranslations(G)?G:this.services.languageUtils.getBestMatchFromCodes(isString$1(R)?[R]:R);I&&(this.language||C(I),this.translator.language||this.translator.changeLanguage(I),this.services.languageDetector?.cacheUserLanguage?.(I)),this.loadResources(I,z=>{w(z,I)})};return!d&&this.services.languageDetector&&!this.services.languageDetector.async?T(this.services.languageDetector.detect()):!d&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(T):this.services.languageDetector.detect(T):T(d),A}getFixedT(d,v,A){const C=(w,T,...R)=>{let G;typeof T!="object"?G=this.options.overloadTranslationOptionHandler([w,T].concat(R)):G={...T},G.lng=G.lng||C.lng,G.lngs=G.lngs||C.lngs,G.ns=G.ns||C.ns,G.keyPrefix!==""&&(G.keyPrefix=G.keyPrefix||A||C.keyPrefix);const I=this.options.keySeparator||".";let z;return G.keyPrefix&&Array.isArray(w)?z=w.map(H=>`${G.keyPrefix}${I}${H}`):z=G.keyPrefix?`${G.keyPrefix}${I}${w}`:w,this.t(z,G)};return isString$1(d)?C.lng=d:C.lngs=d,C.ns=v,C.keyPrefix=A,C}t(...d){return this.translator?.translate(...d)}exists(...d){return this.translator?.exists(...d)}setDefaultNamespace(d){this.options.defaultNS=d}hasLoadedNamespace(d,v={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const A=v.lng||this.resolvedLanguage||this.languages[0],C=this.options?this.options.fallbackLng:!1,w=this.languages[this.languages.length-1];if(A.toLowerCase()==="cimode")return!0;const T=(R,G)=>{const I=this.services.backendConnector.state[`${R}|${G}`];return I===-1||I===0||I===2};if(v.precheck){const R=v.precheck(this,T);if(R!==void 0)return R}return!!(this.hasResourceBundle(A,d)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||T(A,d)&&(!C||T(w,d)))}loadNamespaces(d,v){const A=defer();return this.options.ns?(isString$1(d)&&(d=[d]),d.forEach(C=>{this.options.ns.indexOf(C)<0&&this.options.ns.push(C)}),this.loadResources(C=>{A.resolve(),v&&v(C)}),A):(v&&v(),Promise.resolve())}loadLanguages(d,v){const A=defer();isString$1(d)&&(d=[d]);const C=this.options.preload||[],w=d.filter(T=>C.indexOf(T)<0&&this.services.languageUtils.isSupportedCode(T));return w.length?(this.options.preload=C.concat(w),this.loadResources(T=>{A.resolve(),v&&v(T)}),A):(v&&v(),Promise.resolve())}dir(d){if(d||(d=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!d)return"rtl";try{const C=new Intl.Locale(d);if(C&&C.getTextInfo){const w=C.getTextInfo();if(w&&w.direction)return w.direction}}catch{}const v=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],A=this.services?.languageUtils||new LanguageUtil(get());return d.toLowerCase().indexOf("-latn")>1?"ltr":v.indexOf(A.getLanguagePartFromCode(d))>-1||d.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(d={},v){return new I18n(d,v)}cloneInstance(d={},v=noop$3){const A=d.forkResourceStore;A&&delete d.forkResourceStore;const C={...this.options,...d,isClone:!0},w=new I18n(C);if((d.debug!==void 0||d.prefix!==void 0)&&(w.logger=w.logger.clone(d)),["store","services","language"].forEach(R=>{w[R]=this[R]}),w.services={...this.services},w.services.utils={hasLoadedNamespace:w.hasLoadedNamespace.bind(w)},A){const R=Object.keys(this.store.data).reduce((G,I)=>(G[I]={...this.store.data[I]},G[I]=Object.keys(G[I]).reduce((z,H)=>(z[H]={...G[I][H]},z),G[I]),G),{});w.store=new ResourceStore(R,C),w.services.resourceStore=w.store}return w.translator=new Translator(w.services,C),w.translator.on("*",(R,...G)=>{w.emit(R,...G)}),w.init(C,v),w.translator.options=C,w.translator.backendConnector.services.utils={hasLoadedNamespace:w.hasLoadedNamespace.bind(w)},w}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;var voidElements,hasRequiredVoidElements;function requireVoidElements(){return hasRequiredVoidElements||(hasRequiredVoidElements=1,voidElements={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),voidElements}var voidElementsExports=requireVoidElements();const e$1=getDefaultExportFromCjs(voidElementsExports);var t$1=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n$1(_){var d={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},v=_.match(/<\/?([^\s]+?)[/\s>]/);if(v&&(d.name=v[1],(e$1[v[1]]||_.charAt(_.length-2)==="/")&&(d.voidElement=!0),d.name.startsWith("!--"))){var A=_.indexOf("-->");return{type:"comment",comment:A!==-1?_.slice(4,A):""}}for(var C=new RegExp(t$1),w=null;(w=C.exec(_))!==null;)if(w[0].trim())if(w[1]){var T=w[1].trim(),R=[T,""];T.indexOf("=")>-1&&(R=T.split("=")),d.attrs[R[0]]=R[1],C.lastIndex--}else w[2]&&(d.attrs[w[2]]=w[3].trim().substring(1,w[3].length-1));return d}var r=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,i$5=/^\s*$/,s$1=Object.create(null);function a$2(_,d){switch(d.type){case"text":return _+d.content;case"tag":return _+="<"+d.name+(d.attrs?function(v){var A=[];for(var C in v)A.push(C+'="'+v[C]+'"');return A.length?" "+A.join(" "):""}(d.attrs):"")+(d.voidElement?"/>":">"),d.voidElement?_:_+d.children.reduce(a$2,"")+"</"+d.name+">";case"comment":return _+"<!--"+d.comment+"-->"}}var c$2={parse:function(_,d){d||(d={}),d.components||(d.components=s$1);var v,A=[],C=[],w=-1,T=!1;if(_.indexOf("<")!==0){var R=_.indexOf("<");A.push({type:"text",content:R===-1?_:_.substring(0,R)})}return _.replace(r,function(G,I){if(T){if(G!=="</"+v.name+">")return;T=!1}var z,H=G.charAt(1)!=="/",Y=G.startsWith("<!--"),ee=I+G.length,ie=_.charAt(ee);if(Y){var oe=n$1(G);return w<0?(A.push(oe),A):((z=C[w]).children.push(oe),A)}if(H&&(w++,(v=n$1(G)).type==="tag"&&d.components[v.name]&&(v.type="component",T=!0),v.voidElement||T||!ie||ie==="<"||v.children.push({type:"text",content:_.slice(ee,_.indexOf("<",ee))}),w===0&&A.push(v),(z=C[w-1])&&z.children.push(v),C[w]=v),(!H||v.voidElement)&&(w>-1&&(v.voidElement||v.name===G.slice(2,-1))&&(w--,v=w===-1?A:C[w]),!T&&ie!=="<"&&ie)){z=w===-1?A:C[w].children;var se=_.indexOf("<",ee),re=_.slice(ee,se===-1?void 0:se);i$5.test(re)&&(re=" "),(se>-1&&w+z.length>=0||re!==" ")&&z.push({type:"text",content:re})}}),A},stringify:function(_){return _.reduce(function(d,v){return d+a$2("",v)},"")}};const warn=(_,d,v,A)=>{const C=[v,{code:d,...A||{}}];if(_?.services?.logger?.forward)return _.services.logger.forward(C,"warn","react-i18next::",!0);isString(C[0])&&(C[0]=`react-i18next:: ${C[0]}`),_?.services?.logger?.warn?_.services.logger.warn(...C):console?.warn&&console.warn(...C)},alreadyWarned$1={},warnOnce$2=(_,d,v,A)=>{isString(v)&&alreadyWarned$1[v]||(isString(v)&&(alreadyWarned$1[v]=new Date),warn(_,d,v,A))},loadedClb=(_,d)=>()=>{if(_.isInitialized)d();else{const v=()=>{setTimeout(()=>{_.off("initialized",v)},0),d()};_.on("initialized",v)}},loadNamespaces=(_,d,v)=>{_.loadNamespaces(d,loadedClb(_,v))},loadLanguages=(_,d,v,A)=>{if(isString(v)&&(v=[v]),_.options.preload&&_.options.preload.indexOf(d)>-1)return loadNamespaces(_,v,A);v.forEach(C=>{_.options.ns.indexOf(C)<0&&_.options.ns.push(C)}),_.loadLanguages(d,loadedClb(_,A))},hasLoadedNamespace=(_,d,v={})=>!d.languages||!d.languages.length?(warnOnce$2(d,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:d.languages}),!0):d.hasLoadedNamespace(_,{lng:v.lng,precheck:(A,C)=>{if(v.bindI18n&&v.bindI18n.indexOf("languageChanging")>-1&&A.services.backendConnector.backend&&A.isLanguageChangingTo&&!C(A.isLanguageChangingTo,_))return!1}}),isString=_=>typeof _=="string",isObject$5=_=>typeof _=="object"&&_!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=_=>htmlEntities[_],unescape$1=_=>_.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};const setDefaults=(_={})=>{defaultOptions={...defaultOptions,..._}},getDefaults$1=()=>defaultOptions;let i18nInstance;const setI18n=_=>{i18nInstance=_},getI18n=()=>i18nInstance,hasChildren=(_,d)=>{if(!_)return!1;const v=_.props?.children??_.children;return d?v.length>0:!!v},getChildren$1=_=>{if(!_)return[];const d=_.props?.children??_.children;return _.props?.i18nIsDynamicList?getAsArray(d):d},hasValidReactChildren=_=>Array.isArray(_)&&_.every(reactExports.isValidElement),getAsArray=_=>Array.isArray(_)?_:[_],mergeProps$1=(_,d)=>{const v={...d};return v.props=Object.assign(_.props,d.props),v},nodesToString=(_,d,v,A)=>{if(!_)return"";let C="";const w=getAsArray(_),T=d?.transSupportBasicHtmlNodes?d.transKeepBasicHtmlNodesFor??[]:[];return w.forEach((R,G)=>{if(isString(R)){C+=`${R}`;return}if(reactExports.isValidElement(R)){const{props:I,type:z}=R,H=Object.keys(I).length,Y=T.indexOf(z)>-1,ee=I.children;if(!ee&&Y&&!H){C+=`<${z}/>`;return}if(!ee&&(!Y||H)||I.i18nIsDynamicList){C+=`<${G}></${G}>`;return}if(Y&&H===1&&isString(ee)){C+=`<${z}>${ee}</${z}>`;return}const ie=nodesToString(ee,d,v,A);C+=`<${G}>${ie}</${G}>`;return}if(R===null){warn(v,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:A});return}if(isObject$5(R)){const{format:I,...z}=R,H=Object.keys(z);if(H.length===1){const Y=I?`${H[0]}, ${I}`:H[0];C+=`{{${Y}}}`;return}warn(v,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:A,child:R});return}warn(v,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:A,child:R})}),C},renderNodes=(_,d,v,A,C,w,T)=>{if(v==="")return[];const R=C.transKeepBasicHtmlNodesFor||[],G=v&&new RegExp(R.map(re=>`<${re}`).join("|")).test(v);if(!_&&!d&&!G&&!T)return[v];const I=d??{},z=re=>{getAsArray(re).forEach(ue=>{isString(ue)||(hasChildren(ue)?z(getChildren$1(ue)):isObject$5(ue)&&!reactExports.isValidElement(ue)&&Object.assign(I,ue))})};z(_);const H=c$2.parse(`<0>${v}</0>`),Y={...I,...w},ee=(re,fe,ue)=>{const ge=getChildren$1(re),ye=oe(ge,fe.children,ue);return hasValidReactChildren(ge)&&ye.length===0||re.props?.i18nIsDynamicList?ge:ye},ie=(re,fe,ue,ge,ye)=>{re.dummy?(re.children=fe,ue.push(reactExports.cloneElement(re,{key:ge},ye?void 0:fe))):ue.push(...reactExports.Children.map([re],be=>{const ve={...be.props};return delete ve.i18nIsDynamicList,reactExports.createElement(be.type,{...ve,key:ge,ref:be.props.ref??be.ref},ye?null:fe)}))},oe=(re,fe,ue)=>{const ge=getAsArray(re);return getAsArray(fe).reduce((be,ve,Me)=>{const we=ve.children?.[0]?.content&&A.services.interpolator.interpolate(ve.children[0].content,Y,A.language);if(ve.type==="tag"){let Be=ge[parseInt(ve.name,10)];!Be&&d&&(Be=d[ve.name]),ue.length===1&&!Be&&(Be=ue[0][ve.name]),Be||(Be={});const De=Object.keys(ve.attrs).length!==0?mergeProps$1({props:ve.attrs},Be):Be,Fe=reactExports.isValidElement(De),Oe=Fe&&hasChildren(ve,!0)&&!ve.voidElement,Ge=G&&isObject$5(De)&&De.dummy&&!Fe,ze=isObject$5(d)&&Object.hasOwnProperty.call(d,ve.name);if(isString(De)){const je=A.services.interpolator.interpolate(De,Y,A.language);be.push(je)}else if(hasChildren(De)||Oe){const je=ee(De,ve,ue);ie(De,je,be,Me)}else if(Ge){const je=oe(ge,ve.children,ue);ie(De,je,be,Me)}else if(Number.isNaN(parseFloat(ve.name)))if(ze){const je=ee(De,ve,ue);ie(De,je,be,Me,ve.voidElement)}else if(C.transSupportBasicHtmlNodes&&R.indexOf(ve.name)>-1)if(ve.voidElement)be.push(reactExports.createElement(ve.name,{key:`${ve.name}-${Me}`}));else{const je=oe(ge,ve.children,ue);be.push(reactExports.createElement(ve.name,{key:`${ve.name}-${Me}`},je))}else if(ve.voidElement)be.push(`<${ve.name} />`);else{const je=oe(ge,ve.children,ue);be.push(`<${ve.name}>${je}</${ve.name}>`)}else if(isObject$5(De)&&!Fe){const je=ve.children[0]?we:null;je&&be.push(je)}else ie(De,we,be,Me,ve.children.length!==1||!we)}else if(ve.type==="text"){const Be=C.transWrapTextNodes,De=T?C.unescape(A.services.interpolator.interpolate(ve.content,Y,A.language)):A.services.interpolator.interpolate(ve.content,Y,A.language);Be?be.push(reactExports.createElement(Be,{key:`${ve.name}-${Me}`},De)):be.push(De)}return be},[])},se=oe([{dummy:!0,children:_||[]}],H,getAsArray(_||[]));return getChildren$1(se[0])},fixComponentProps=(_,d,v)=>{const A=_.key||d,C=reactExports.cloneElement(_,{key:A});if(!C.props||!C.props.children||v.indexOf(`${d}/>`)<0&&v.indexOf(`${d} />`)<0)return C;function w(){return reactExports.createElement(reactExports.Fragment,null,C)}return reactExports.createElement(w,{key:A})},generateArrayComponents=(_,d)=>_.map((v,A)=>fixComponentProps(v,A,d)),generateObjectComponents=(_,d)=>{const v={};return Object.keys(_).forEach(A=>{Object.assign(v,{[A]:fixComponentProps(_[A],A,d)})}),v},generateComponents=(_,d,v,A)=>_?Array.isArray(_)?generateArrayComponents(_,d):isObject$5(_)?generateObjectComponents(_,d):(warnOnce$2(v,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:A}),null):null,isComponentsMap=_=>!isObject$5(_)||Array.isArray(_)?!1:Object.keys(_).reduce((d,v)=>d&&Number.isNaN(Number.parseFloat(v)),!0);function Trans$1({children:_,count:d,parent:v,i18nKey:A,context:C,tOptions:w={},values:T,defaults:R,components:G,ns:I,i18n:z,t:H,shouldUnescape:Y,...ee}){const ie=z||getI18n();if(!ie)return warnOnce$2(ie,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:A}),_;const oe=H||ie.t.bind(ie)||(Ge=>Ge),se={...getDefaults$1(),...ie.options?.react};let re=I||oe.ns||ie.options?.defaultNS;re=isString(re)?[re]:re||["translation"];const fe=nodesToString(_,se,ie,A),ue=R||fe||se.transEmptyNodeValue||A,{hashTransKey:ge}=se,ye=A||(ge?ge(fe||ue):fe||ue);ie.options?.interpolation?.defaultVariables&&(T=T&&Object.keys(T).length>0?{...T,...ie.options.interpolation.defaultVariables}:{...ie.options.interpolation.defaultVariables});const be=T||d!==void 0&&!ie.options?.interpolation?.alwaysFormat||!_?w.interpolation:{interpolation:{...w.interpolation,prefix:"#$?",suffix:"?$#"}},ve={...w,context:C||w.context,count:d,...T,...be,defaultValue:ue,ns:re},Me=ye?oe(ye,ve):ue,we=generateComponents(G,Me,ie,A);let Be=we||_,De=null;isComponentsMap(we)&&(De=we,Be=_);const Fe=renderNodes(Be,De,Me,ie,se,ve,Y),Oe=v??se.defaultTransParent;return Oe?reactExports.createElement(Oe,ee,Fe):Fe}const initReactI18next={type:"3rdParty",init(_){setDefaults(_.options.react),setI18n(_)}},I18nContext$1=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(d){d.forEach(v=>{this.usedNamespaces[v]||(this.usedNamespaces[v]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function Trans({children:_,count:d,parent:v,i18nKey:A,context:C,tOptions:w={},values:T,defaults:R,components:G,ns:I,i18n:z,t:H,shouldUnescape:Y,...ee}){const{i18n:ie,defaultNS:oe}=reactExports.useContext(I18nContext$1)||{},se=z||ie||getI18n(),re=H||se?.t.bind(se);return Trans$1({children:_,count:d,parent:v,i18nKey:A,context:C,tOptions:w,values:T,defaults:R,components:G,ns:I||re?.ns||oe||se?.options?.defaultNS,i18n:se,t:H,shouldUnescape:Y,...ee})}const usePrevious=(_,d)=>{const v=reactExports.useRef();return reactExports.useEffect(()=>{v.current=_},[_,d]),v.current},alwaysNewT=(_,d,v,A)=>_.getFixedT(d,v,A),useMemoizedT=(_,d,v,A)=>reactExports.useCallback(alwaysNewT(_,d,v,A),[_,d,v,A]),useTranslation=(_,d={})=>{const{i18n:v}=d,{i18n:A,defaultNS:C}=reactExports.useContext(I18nContext$1)||{},w=v||A||getI18n();if(w&&!w.reportNamespaces&&(w.reportNamespaces=new ReportNamespaces),!w){warnOnce$2(w,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const ge=(be,ve)=>isString(ve)?ve:isObject$5(ve)&&isString(ve.defaultValue)?ve.defaultValue:Array.isArray(be)?be[be.length-1]:be,ye=[ge,{},!1];return ye.t=ge,ye.i18n={},ye.ready=!1,ye}w.options.react?.wait&&warnOnce$2(w,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const T={...getDefaults$1(),...w.options.react,...d},{useSuspense:R,keyPrefix:G}=T;let I=C||w.options?.defaultNS;I=isString(I)?[I]:I||["translation"],w.reportNamespaces.addUsedNamespaces?.(I);const z=(w.isInitialized||w.initializedStoreOnce)&&I.every(ge=>hasLoadedNamespace(ge,w,T)),H=useMemoizedT(w,d.lng||null,T.nsMode==="fallback"?I:I[0],G),Y=()=>H,ee=()=>alwaysNewT(w,d.lng||null,T.nsMode==="fallback"?I:I[0],G),[ie,oe]=reactExports.useState(Y);let se=I.join();d.lng&&(se=`${d.lng}${se}`);const re=usePrevious(se),fe=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:ge,bindI18nStore:ye}=T;fe.current=!0,!z&&!R&&(d.lng?loadLanguages(w,d.lng,I,()=>{fe.current&&oe(ee)}):loadNamespaces(w,I,()=>{fe.current&&oe(ee)})),z&&re&&re!==se&&fe.current&&oe(ee);const be=()=>{fe.current&&oe(ee)};return ge&&w?.on(ge,be),ye&&w?.store.on(ye,be),()=>{fe.current=!1,w&&ge&&ge?.split(" ").forEach(ve=>w.off(ve,be)),ye&&w&&ye.split(" ").forEach(ve=>w.store.off(ve,be))}},[w,se]),reactExports.useEffect(()=>{fe.current&&z&&oe(Y)},[w,G,z]);const ue=[ie,w,z];if(ue.t=ie,ue.i18n=w,ue.ready=z,z||!z&&!R)return ue;throw new Promise(ge=>{d.lng?loadLanguages(w,d.lng,I,()=>ge()):loadNamespaces(w,I,()=>ge())})},loading$2="Loading...",startGame$1="Play",playToEarn$1="Play to earn",grade$1="Grade",noDesktop$1="Desktop is boring, Go mobile",hide$1="Hide",justNow$1="just now",hoursAgo$1="h ago",minutesAgo$1="m ago",datetime$1={d:"d",h:"h",m:"m",s:"s",thisWeek:"This week",thisMonth:"This month",older:"Older",minutes:"minutes"},yes$1="Yes",no$1="No",ok$1="OK",nav$1={home:"Home",tasks:"Quests",shop:"Shop",profile:"Profile",caps:"Caps",pvp:"PVP",pvpDescription:"Play with other players",pve:"PVE",pveDescription:"Battle against the bot, mix up your tactics, and earn $GUM",exchange:"SWAP",exchangeDescription:"Swap with other players",leaderboard:"Leaders",for:"For",madness:"Madness",madnessDescription:"Fight the bot in an endless battle, unlocking power-ups and $GUM",madnessDescriptionWithRecord:"Today, you reached the {{record}} round. Try to get higher for an extra reward!",continue:"Continue",token:"Token"},info$1={gumDescription:"$GUM helps upgrade your caps! Collect it in PvE, Cap Madness, your backpack, or the shop.",goToShop:"Shop",energyTitle:"Energy Recharge",energyDescription:"Energy is needed for Cap Madness. But dont worryit regenerates over time.",energyStorage:"Energy accumulation",notcoinDescription:"Collect rewards according to your Notcoin level",tonstationDescription:"Get Prizes for Spins in TON STATION",memhustleDescription:"Get Prizes for tasks in MemHustle",pack:"Pack",invite:"Invite",inviteFriend:"Frens",inviteDescription:"Invite friends and get rewards! Invite {{friends}} {{friend}} and earn {{reward}} $GUM",inviteFriendFriendSingle:"friend",inviteFriendFriendPlural:"friends",cancel:"Later",sellTitle:"Enter price",sellDescription:"The sales commission is {{percent}}% of the amount",sellFee:"Service Fee: {{fee}}%",sellReceive:"You will receive:",sellButton:"List for Sale",soldOut:"Sold out"},profile$1={caps:"caps",myWallet:"My wallet",myCaps:"Caps",collections:"Collections",collection:"Collection",communities:"Communities",grade:"Grade",gradeHighest:"Grade (highest first)",gradeLowest:"Grade (lowest  first)",priceHighest:"Price (highest first)",priceLowest:"Price (lowest  first)",nftOnly:"NFTs",date:"Date",number:"Number",upgradeAvailable:"Upgrade available",upgradeAvailableLabel:"Upgrade",address:"Address",upgradeTo:"Upgrade",finishEditing:"Remint",sell:"Sell",unstake:"Unstake",sellCancel:"Remove from sale ({{price}} TON)",status:"Status",processing:"Processing...",power:"Power",gum:"$GUM",remain:"Supply",soldOut:"Sold out",health:"Health",price:"Price",applySkin:"Customize",skinBkg:"Skin",skinOutline:"Outline",skins:{addSkin:"Add Skin",replaceSkin:"Replace Skin",addFrame:"Add Frame",replaceFrame:"Replace Frame",rerollSkin:"Reroll Skin: {{price}}",rerollFrame:"Reroll Frame: {{price}}",floopyDisk:"Floopy Disk",rerolls:"Rerolls"}},shop$1={banner:{buyCapsTitle:"Buy caps",dealsToday_one:"{{count}} deal today",dealsToday_other:"{{count}} deals today",viewButton:"View"},all:"All",soldOut:"Sold Out",buyCaps:"Caps",buyPacks:"Packs",buyCommunityPacks:"Communities",buyGum:"GUM",buyCoins:"Buy coins",buyBoosters:"Boosters",buySkins:"Skins",goBuySkins:"Buy disks",buyTitle:"Exchange gum for Caps and for packs",buySkinsTitle:"Insert the floppy disk and upgrade your cap!",buyBooster:"Use boosters in PvE and madness!",buyStarter:"CapsGame Starter Pack",starterDescription:"An Epic pack ready for staking, $GUM and 1 booster of each type!",buySeason:"Special",play:"Play",shop:"Shop",pack:"pack",caps:"caps",ordinary:"ordinary",rare:"rare",random:"random",collectionsInsidePack:"Collections inside",buyPack:"Buy the Pack",buyCap:"Buy for {{price}} TON",buyPackForTon:"Buy for {{price}} TON",buyPackForGum:"Buy for {{price}} GUM",buyPackForSeasonCoins:"Buy for {{price}}",buyPackForStars:"Buy for {{price}}",swipeToOpen:"Swipe to open",viewAllMyCaps:"See all my caps",claimFailed:"The task isnt completed yet",problemsDuringPackOpening:"Problems during pack opening, try a bit later",shopIsDisabled:"Purchases are temporary disabled, try again later",mintIsDisabled:"NFT Mint is temporary disabled, try again later",gumPurchased:"Your purchase was successful. You will receive $GUM when we confirm the transaction",skinsPurchased:"Your purchase was successful. The skin added to your inventory!",starterPurchased:"Your purchase was successful. Your inventory has been updated!",starterPurchasedLater:"Your purchase was successful. You will receive all items when we confirm the transaction",openStarterCapsPack:"Open Epic pack",openStarterCapsPackLater:"Done",capsPurchased:"Your purchase was successful. You will receive the pack once the transaction is confirmed",boostersTonPurchased:"Your purchase was successful. You will receive boosters when we confirm the transaction",boosterPurchased:`Your boosters are ready in 
your inventory. Use them in battles!`,purchaseCompleted:"Purchase completed",yourBalance:"Your balance",idleLevelUpedStars:"Level Up!",idleLevelUpedTon:"Your purchase was successful. Your level will go up as soon as we confirm the transaction.",problemsPackPurchase:"There was a problem with your pack purchase. Please try again later.",boosterDescription:"Boosters will help you climb higher in madness and the tower!",okBack:"OK, Go Back to Shop",problemsSell:"There was a problem with sale. Please try again later.",problemsCancelSell:"There was a problem with sale. Please try again later.",problemsBuyCap:"There was a problem with sale. Please try again later.",capIsSold:" Congratulations! The cap is purchased!",buyCapConfirmation:"Are you sure you want to buy the cap for {{price}} TON?",skinTypes:{background:"Skin",outline:"Frame"},skinApplicableFor:"Applicable to:",skinApplicableForEverything:"Everything",skinType:"Type",openAllPacks:"Open {{count}} Packs"},tasks$1={done:"Done",claim:"Claim",claimed:"Claimed",daily:"Daily",weekly:"Weekly",onboarding:"All-time",youReceived:"You received",yourBalance:"Your balance",upgradeCapTask:"Upgrade a cap",upgrade3CapTask:"Upgrade 3 caps",playPvPGame:"Play  PvP game",playSwapText:"Swap caps",passPvELevel:"Pass a level against the bot",buyAnyPackText:"Open any pack",makePublicBetText:"Make a bet in a game",inviteFirst3Friends:"Invite 3 friends",makeFirst3Games:"Play 3 games",open3Packs:"Open 3 packs",inviteFriendText:"Invite a friend",invite3Friends:"Invite 3 friends",invite5Friends:"Invite 5 friends",subscribeTo:"Subscribe to",shareStory:"Share CapsGame story in Telegram",subscribeChannel:"channel",capsChannel:"https://t.me/CapsGame",joinChat:"Join the chat",capsChat:"https://t.me/CapsGameChat",connectWalletText:"Connect wallet",connectWalletButton:"Connect",getYourFirstNft:"Get the first NFT-cap in the game",getTelegramPremiumText:"Get Telegram Premium",brobotChannel:"https://t.me/+IW8OKCLeWY9hMWNi",trendingChannel:"https://t.me/+T8SYbbizV7dkMzY6",exploreTrending:"Explore",passMadnessRound:"Pass a madness round",okBack:"OK, Go Back to Quests",publish:"Publish",storyConfirmation:"After publishing, you must forward the story to @CapsGameBot to confirm the completion",tonStationSpin1Text:"x1 Lucky Wheel",tonStationSpin2Text:"x10 Lucky Wheels",tonStationSpin3Text:"x15 Lucky Wheels",spinLuckyWheel:"Lucky Wheel",memhustleFollowText:"Follow TG",memhustleOnboardingText:"Reach lvl 5",memhustleFortText:"Buy Fort",memhustleMergeText:"100 merges",memhustleAllText:"Complete all",memhustle:"MemHustle",duckygram:"Duckygram",trendingApps:"Apps Center",trendingAppsCompleteCollectionText:"Complete 1 collection",nutsFarm:"Nuts Farm",nutsFarmFollowText:"Follow",nutsFarmReachBalance10Text:"10k points",nutsFarmReachBalance30Text:"30k points"},game$1={challenged:"challenged you to a fight.",swapChallenged:"offered a swap.",place:"Place your bet!",placeOffer:"Make your offer!",chooseOpponent:"Choose an opponent",createExchangeOffer:"Create a swap",bet:"bet",reject:"Reject",counterBet:"Bet",counterOffer:"Offer",yourBid:"Your Caps",yourBet:"Your bet",yourExchangeCaps:"Your Caps",setCounterBid:"Done",waiting1:"We are waiting for the",waiting2:"to accept your bet",waitingOffer2:"to accept your offer",goHome:"Home",betsArePlaced:"Bets are placed!",acceptAndStart:"Accept and start",acceptAndExchange:"Accept",yourGameIsOver:"Your game is over",yourExchangeIsOver:"Your exchange is over",seeAllMyCaps:"See all my caps",playAgain:"Play again",maxCapsBid:"You've selected the maximum number of caps",wrongGrades:"The caps must be of the same grade as in the swap.",selectGameType:"Select the game type",publicGame:" Public",privateGame:" Private",createPublicGame:"Create",deleteGameQuestion:"Are you sure you want to delete the game?",deleteBetsQuestion:"Are you sure you want to delete all bets?",deleteOffersQuestion:"Are you sure you want to delete all offers?",deleteGameBtn:"Yes, delete",inProgress:"Your battle with",inSwapProgress:"Your swap with",openBet:"Open",pickTheBestBid:"Choose the best bet!",pickTheBestOffer:"Choose the best offer!",placedHisBid:"placed his bet! Accept and play!",placedHisOffer:"placed his offer! Accept and swap!",noBidsYet:"No bets yet",noOffersYet:"No offers yet",failedToPlaceBetMsg:"Failed to place a bet, the game is no longer available",capCantBePlayedPendingMsg:"The cap isnt available yet. Please wait a bit...",allBets:"All bets",allOffers:"All offers",waitingForOpponent:"Awaiting approval",noAccessGame:"The game is no longer available",removeAllBets:"Cancel all bets",removeAllOffers:"Cancel all offers"},nft$1={convertToNftBth:"Convert to NFT",convertInProgressBtn:"Minting...",convertToNftTxt:"Any cap can be converted into an NFT for a fee. Once converted, NFTs can be withdrawn to your wallet. Would you like to proceed?",editNftTxt:"The NFT cap can only be modified in edit mode. Switching the NFT to this mode costs {{price}} Exiting the mode is free. In edit mode, the cap is not available for gameplay. Switch the cap to edit mode?",editedToNft:"Now you can edit your NFT cap!",nftRemintConfirmation:"Reminting will complete the NFT editing; further changes to the NFT cap will require a fee. Would you like to proceed?",convertedToNft:"The minting process is underway! This may take up to 10 minutes, during which your cap will be unavailable for play.",tonConvertedToNft:"The minting process will begin once we confirm the transaction. This may take up to 20 minutes.",tonEditedToNft:"The NFT can be edited once we confirm the transaction. This may take 20 minutes!",convertToNftFailed:"Minting has failed. Please try again later.",editNftFailed:"The request has failed. Please try again later."},withdraw$1={withdrawBtn:"Withdraw",confirmWithdraw:"Are you sure you want to withdraw the cap to the wallet {{wallet}}? This action will remove the cap from the app.",withdrawIsDisabled:"NFT withdrawal is temporty disabled, try again later",withdrawIsSuccessful:"NFT withdrawal is completed, you will receive the NFT cap in your wallet shortly",withdrawError:"The NFT withdrawal has failed. Please contact the support team in the chat."},upgrade$1={upgradeBtn:"Upgrade",upgradeForBtn:"Upgrade for {{price}}",upgradeConfirmation:"Are you sure that you want to burn the caps and spend {{price}} $GUM to upgrade the cap #{{number}}? The caps will become unavailable in the app",noUpgradeResources:"You dont have a suitable cap to upgrade. But you can earn one!",goToEarn:"Earn more",any:"Collection: Any",upgraded:"The cap is upgraded!",resourcesList:"Upgrade Resources",youScore:"You balance",noFloopy:"No suitable floopy disks",skinConfirmation:"Are you sure that you want to spend floopy disk to upgrade the cap #{{number}}?",rerollConfirmation:"Are you sure that you want to spend {{price}} $CG to upgrade the cap #{{number}}?",insertAnotherFloopy:"Insert another Floopy Disk"},battle$1={loadMore:"Load more",openBattle:"Open the game",myGames:"My",allGames:"All",betIsPlaced:"The bet is placed!",requestIsCreated:"The request is created!",cancelGameBtn:"Delete the game",cancelSwapBtn:"Delete the swap",seeBets:"Bets",seeOffers:"Offers",bet:"Bet",history:"History",seeDetails:"Details",private:"Private",noGames:"No battles yet, but you can create one!",startNewGame:"Start the game, place a bet!",startNewExchange:"Create a swap request!",firstMessage:"PvP mode lets you battle other players to win or lose caps. Be careful!",apply:"Apply filter",filterByGrade:"Filter by grade",filterByCapNumber:"Filter by cap number",filterByCollection:"Filter by collection",searchPlaceholder:"Cap's number",comment:"Comment",enterComment:"Enter comment",confirmComment:"Confirm",next:"Next",preferenceTitle:"What collections would you like to receive in return?",standard:"Standard",communities:"Communities",chooseNumber:"Select numbers",chooseCaps:"Select",anyCaps:"Any Caps",acceptBets:"Accepts bets",acceptOffers:"Accepts offers"},pve$1={level:"Level",title:"Challenge the bot and earn $GUM!",enemyTitle:"Enemy: CapsGame bot",startBattle:"Start the battle",factions:"Factions",factionsAttackBoost:"Factions attack boost",factionsTitle:"Faction Hierarchy",factionsDescription1:"Factions have a hierarchy. Attacking with a cap of a certain faction enhances its attack power.",factionsDescription2:"When choosing three caps of the same collection, the attack power of each also increases.",power:"Power",battle:"Attack",win:"You've won!",lose:"Youve lost!",yourReward:"Your reward",nextLevel:"Go to the next level",totalScore:"Total balance",goHome:"Go home",tryAgain:"Try again",firstMessage:"In battles with the bot, your caps are safe. You can't lose them!",health:"Health",onlyMinters:"Only NFT minters are allowed to use NFT caps in PvE",leaveQuestion:"Are you sure you want to leave the battle?",yes:"Leave",no:"Cancel",boosters:"Boosters",buyBoosterButton:"Buy {{count}} for {{price}}"},boosters$1={description:"Boosters will help you climb higher in madness and the tower!","max-attack":"Max Attack","max-attack-description":"After use, the cap will deal maximum damage.","max-heal":"Max Heal","max-heal-description":"After use, all caps will fully restore their health.","skip-counter-attack":"Skip Counterattack","skip-counter-attack-description":"After use, the bot will not counter-attack."},idle$1={reward:"Reward",level:"Level",perHour:"per hour",description:"The higher the level, the greater the reward. Maximum time {{hours}} hours.",upgrade:"Upgrade",extraReward:"Extra bonus",extraDescription:"Collect rewards regularly and get bonus",totalScore:"Total score",claim:"CLAIM",problemsLevelPurchase:"There was a problem with your level purchase. Please try again later."},leaderboard$1={league:"League",from:"From",to:"to",points:"points",players:"Players",squads:"Squads",loadMore:"Load more",noSquadTitle:"You dont have a squad yet",noSquadText:"Create a new one or join",open:"Open",join:"Join",sendRequest:"Send request",sentRequest:"Request sent",leave:"Leave",you:"You",yourSquad:"Your squad",members:"Members",requests:"Requests",manageSquad:"Manage {{user}}",manageAdminSquad:"Manage squad",makePublic:"Make squad public",makePrivate:"Make squad private",share:"Share",kick:"Kick",promote:"Make admin",downgrade:"Remoke admin",treasurer:"Make treasurer",treasurerRevoke:"Remoke treasurer",info:{link:"Info",title:"How to earn points",title1:"Collect caps",description1:"Score points with every cap from any collection.",title2:"Upgrade your caps",description2:"The higher their grade, the more points you rack up.",title3:"Gather full collections",description3:"Completing each collection boosts your score significantly."},squadsTypes:{all:"Daily"},squadRewards:"Squad rewards",position:"#{{position}} place",countdown:{beforeStart:"Before the start",beforeEnd:"Before the end"}},squad$1={level:"Level",bank:"Treasury",cancel:"Cancel",topupGum:"Send $GUM to the squad",topupTokens:"Send $CG to the squad",withdrawGum:"Withdraw $GUM from the squad",withdrawTokens:"Withdraw $CG from the squad",send:"Send",topup:"Top-up",caps:"Burned caps",burn:" Burn",burnMainAction:" Burn {{score}}",burnConfirmation:"Are you sure that you want to burn caps to top-up squad's bank? The caps will become unavailable in the app",burnError:"Problems during burn, try a bit later",upgrade:"Upgrade to lvl {{level}}",upgradeError:"Problems during upgrade, try a bit later",maxSeats:"No free slots, upgrade the courtyard level to increase the number of participants",activity:"Activity",allMembers:"All",squadActivity:{thisWeek:"This week",pastWeek:"Past week",thisMonth:"This month",pastMonth:"Past month"},role:{owner:"Owner",admin:"Admin",member:"Member",treasurer:"Treasurer"},add:"Add",noRequests:"No requests",packs:"Packs",sendQuestion:"Are you sure you want to send {{name}} to {{userName}}?"},madness$1={choose:"Choose",selectBoost:"Pick the bonus",health:"Health",heal:"Heal",power:"Damage",leaveQuestion:"Are you sure you want to end the battle?",yes:"End",no:"No",finish:"Leave",round:"Round",total:"earned"},onboarding$1={steppack:"Open packs and collect caps",stepcaps:"Battle or swap with other players",stepgum:"Defeat the bot and earn",stepupgrade1:"Upgrade your caps with",stepupgrade2:"to boost their stats",stepfinish:"Play, earn, and build your ultimate collection!"},staking$1={banner:{title:"Buy <1>STARTERPACK</1> and farm more!",subtitle:"Guaranteed Epic cap for staking"},title:"Staking",profile:"Profile",info:"Staked caps generate tokens. The speed depends on the cap's grade and the rarity of the collection.",perDay:"per hour",remove:"Remove",replace:"Replace",description:"The speed depends on the cap's grade and the rarity of the collection",error:"Problems during staking, try a bit later",unlockError:"Problems during unlock, try a bit later",unlockDescription:"Unlocking a slot allows you to use more caps in staking",unlockDescriptionForBurn:"To unlock the slot burn caps in total {{score}} score.",unlockMainAction:"Burn {{score}}/{{target}}",burnConfirmation:"Are you sure that you want to burn caps to unlock the slot #{{slot}}? The caps will become unavailable in the app",farming:"Speed",nothing:"Nothing",save:"Save",bonus:"Bonus",noGifts:"No gifts yet",unlockForTokens:"Unlock for {{tokens}}",unlockForBurn:"Burn caps",cancel:"Cancel",onlyEpicCanBeBurned:"Only caps from the EPIC grade can be burned. ",farmSpeed:"Farm Speed",noFarmSpeed:"Not farming tokens"},settings$1={title:"Settings",sound:"Sound",on:"On",off:"Off",change:"Change",disconnect:"Disconnect",topup:"Top-up",withdraw:"Withdraw",topupFinished:"You will receive funds once we confirm the transaction. This may take up to 20 minutes.",topupFailed:"Topup has failed. Please try again later.",walletEnterAmount:"Enter the amount",topupDescription:"Transaction confirmation may take up to 20 minutes",topupAmountPrompt:"Enter the amount to top-up",withdrawAmountPrompt:"Enter the amount to withdraw",withdrawFinished:"Withdraw is finished, you will receive funds within 20 minutes",withdrawTonFailed:"Withdraw has failed. Please try again later.",withdrawFee:"Service Fee: {{fee}} TON",withdrawDescription:"Withdrawal of balance may take up to 20 minutes",invalidAmount:"Invalid amount",wallet:"Wallet",transactions:"Transactions",noTransactions:"No transactions yet",transaction:{withdraw:"Withdraw",topup:"Top-up",sale:"Sold",buy:"Bought"}},achievement$1={achievement:"Achievement",material:"Material",unlockReq:"Unlock requirement",collector:"Completed {{number}} collections",dealMaker:"Completed {{number}} swaps",pvpChampion:"Win {{number}} caps in a row",marketMover:"Trade on marketplace for {{number}} TON",cgHustler:"Get a farming speed of {{number}} $CG per hour",intoTheMadness:"Reach {{number}} in madness",towerClimber:"Complete {{number}} level in PvE",gumTycoon:"Hold {{number}} $GUM on balance",betAndRegret:"Have lost streak for {{number}} caps",rerollsMachine:"Have {{number}} rerolls on a cap",diamondDead:"Lost {{number}} diamonds"},pvenew$1={mydeck:"My Deck",editDeck:"Change",createDeck:"Create",selectCapFromDeck:"Select cap",abilities:"Abilities",enemyTitle:"Enemy: {{health}} ",health:"{{health}} "},en$2={loading:loading$2,startGame:startGame$1,playToEarn:playToEarn$1,grade:grade$1,new:"WON",noDesktop:noDesktop$1,hide:hide$1,justNow:justNow$1,hoursAgo:hoursAgo$1,minutesAgo:minutesAgo$1,datetime:datetime$1,yes:yes$1,no:no$1,ok:ok$1,nav:nav$1,info:info$1,profile:profile$1,shop:shop$1,tasks:tasks$1,game:game$1,nft:nft$1,withdraw:withdraw$1,upgrade:upgrade$1,battle:battle$1,pve:pve$1,boosters:boosters$1,idle:idle$1,leaderboard:leaderboard$1,squad:squad$1,madness:madness$1,onboarding:onboarding$1,staking:staking$1,settings:settings$1,achievement:achievement$1,pvenew:pvenew$1},loading$1="...",startGame="",playToEarn="Play to earn",grade="",noDesktop="Desktop is boring, Go mobile",justNow=" ",hoursAgo=". ",minutesAgo=". ",hide="",datetime={d:"",h:"",m:"",s:"",thisWeek:" ",thisMonth:" ",older:"Older",minutes:""},yes="",no="",ok="OK",nav={home:"",tasks:"",shop:"",profile:"",caps:"",pvp:"PVP",pvpDescription:"   ",pve:"PVE",pveDescription:"  ,  ,   $GUM",exchange:"",exchangeDescription:"   ",leaderboard:"",for:"For",madness:" ",madnessDescription:"     ,    $GUM",madnessDescriptionWithRecord:"    {{record}} .      !",continue:"",token:""},info={gumDescription:"$GUM    .   PvE,  ,   .",goToShop:" ",energyTitle:" ",energyDescription:"    .     .",energyStorage:" ",notcoinDescription:"   Notcoin-",tonstationDescription:"     TON STATION",memhustleDescription:"     MemHustle",pack:"",invite:"",inviteFriend:"",inviteDescription:"      .   {{friends}} {{friend}}   {{reward}} $GUM",inviteFriendFriendSingle:"",inviteFriendFriendPlural:"",cancel:"",sellTitle:" ",sellDescription:"     {{percent}}%  ",sellFee:": {{fee}}%",sellReceive:" :",sellButton:"  ",soldOut:"Sold out"},profile={caps:"",myWallet:"",myCaps:"",collections:"",collection:"",communities:"",grade:"",gradeHighest:" ( )",gradeLowest:" ( )",priceHighest:" ( )",priceLowest:" ( )",nftOnly:"NFT",date:"",number:"",upgradeAvailable:" ",upgradeAvailableLabel:"",address:"",upgradeTo:"",unstake:"  ",finishEditing:"",sell:"",sellCancel:"   ({{price}} TON)",status:"",processing:"...",power:"",gum:"$GUM",remain:"",soldOut:"Sold out",health:"",price:"",applySkin:"c",skinBkg:"",skinOutline:"",skins:{addSkin:" ",replaceSkin:" ",addFrame:" ",replaceFrame:" ",rerollSkin:" : {{price}}",rerollFrame:" : {{price}}",floopyDisk:"Floopy Disk",rerolls:""}},shop={banner:{buyCapsTitle:" ",dealsToday_one:"{{count}}  ",dealsToday_few:"{{count}}  ",dealsToday_many:"{{count}}  ",dealsToday_other:"{{count}}  ",viewButton:""},all:"",soldOut:"",buyPacks:"",buyCaps:"",buyCommunityPacks:"",buyGum:"GUM",buyBoosters:"",buySkins:"",goBuySkins:" ",buyCoins:"",buyTitle:"     ",buySkinsTitle:"    ",buyBooster:"   !",buySeason:"Special",buyStarter:"CapsGame Starter Pack",starterDescription:"Epic-   , $GUM    !",play:"Play",shop:"",caps:"caps",ordinary:"ordinary",rare:"rare",random:"random",collectionsInsidePack:" ",buyPack:" ",buyCap:"  {{price}} TON",buyPackForTon:"  {{price}} TON",buyPackForGum:"  {{price}} $GUM",buyPackForSeasonCoins:"  {{price}}",buyPackForStars:"  {{price}}",swipeToOpen:",  ",viewAllMyCaps:" ",claimFailed:"   ",problemsDuringPackOpening:"  ,  ",shopIsDisabled:"  ,  ",mintIsDisabled:" NFT  ,  ",gumPurchased:"  .   $GUM,    ",skinsPurchased:"  .     !",starterPurchased:"  .   !",starterPurchasedLater:"  .   ,    ",openStarterCapsPack:" Epic ",openStarterCapsPackLater:"",capsPurchased:"  .    ,    ",boostersTonPurchased:"  .   ,    ",boosterPurchased:"         !",purchaseCompleted:" ",yourBalance:" ",idleLevelUpedStars:" !",idleLevelUpedTon:"   .   ,     .",problemsPackPurchase:"   ,  ",boosterDescription:"       !",okBack:"OK,   ",problemsSell:"    ,  ",problemsCancelSell:"    ,  ",problemsBuyCap:"   ,  ",capIsSold:" !  !",buyCapConfirmation:"Are you sure you want to buy the cap for {{price}} TON?",skinTypes:{background:"",outline:""},skinApplicableFor:" ",skinApplicableForEverything:"",skinType:"",openAllPacks_few:" {{count}} ",openAllPacks_many:" {{count}} "},tasks={done:"",claim:"",claimed:"",daily:"",weekly:"",onboarding:"",youReceived:"",yourBalance:" ",upgradeCapTask:" ",upgrade3CapTask:" 3 ",playPvPGame:"  PvP",playSwapText:" ",passPvELevel:"   ",buyAnyPackText:"  ",makePublicBetText:"   ",inviteFirst3Friends:" 3 ",makeFirst3Games:" 3 ",open3Packs:" 3 ",invite3Friends:" 3 ",invite5Friends:" 5 ",inviteFriendText:" ",subscribeTo:"  ",shareStory:"  CapsGame  ",subscribeChannel:"",capsChannel:"https://t.me/CapsGameRu",capsChat:"https://t.me/CapsGameChat",joinChat:"  ",connectWalletText:" ",connectWalletButton:"Connect",getYourFirstNft:"  NFT-  ",getTelegramPremiumText:" Telegram Premium",brobotChannel:"https://t.me/+IW8OKCLeWY9hMWNi",trendingChannel:"https://t.me/+T8SYbbizV7dkMzY6",exploreTrending:"Explore Telegram Apps",passMadnessRound:"  ",okBack:"OK,   ",publish:"",storyConfirmation:"     @CapsGameBot,   ",tonStationSpin1Text:"x1 Lucky Wheel",tonStationSpin2Text:"x10 Lucky Wheels",tonStationSpin3Text:"x15 Lucky Wheels",spinLuckyWheel:"Lucky Wheel",memhustleFollowText:"Follow TG",memhustleOnboardingText:" 5 lvl",memhustleFortText:" ",memhustleMergeText:"100 ",memhustleAllText:" ",memhustle:"MemHustle",duckygram:"Duckygram",trendingApps:"Apps Center",trendingAppsCompleteCollectionText:" 1 ",nutsFarm:"Nuts Farm",nutsFarmFollowText:"",nutsFarmReachBalance10Text:"10 ",nutsFarmReachBalance30Text:"30 "},game={challenged:"   !",swapChallenged:" !",place:"  !",placeOffer:"  !",chooseOpponent:" ",createExchangeOffer:" ",bet:" ",reject:"",counterBet:" ",counterOffer:"",yourBid:" ",yourBet:" ",yourExchangeCaps:" ",setCounterBid:"",waiting1:"",waiting2:"   ",waitingOffer2:"  ",goHome:"",betsArePlaced:" !",acceptAndStart:" ",acceptAndExchange:"",yourGameIsOver:" ",yourExchangeIsOver:" ",seeAllMyCaps:" ",playAgain:" ",maxCapsBid:"   ",wrongGrades:"      ,   ",selectGameType:"  ",publicGame:" ",privateGame:" ",createPublicGame:" ",deleteGameQuestion:"  ?",deleteBetsQuestion:"   ?",deleteOffersQuestion:"   ?",deleteGameBtn:"",inProgress:"  ",inSwapProgress:"  ",openBet:"",pickTheBestBid:"  !",pickTheBestOffer:"  !",placedHisBid:"  ,   !",placedHisOffer:"  ,   !",noBidsYet:"  ",noOffersYet:"  ",failedToPlaceBetMsg:"   ,    ",capCantBePlayedPendingMsg:"  ,  ...",allBets:" ",allOffers:" ",waitingForOpponent:"",noAccessGame:"  ",removeAllBets:"  ",removeAllOffers:"  "},nft={convertToNftBth:" NFT",convertInProgressBtn:"...",convertToNftTxt:"     NFT,  . NFT     . ?",editNftTxt:"NFT-      .  NFT     {{price}}    .        .     ?",editedToNft:"    NFT !",nftRemintConfirmation:"   NFT,       . ?",convertedToNft:"  !     10 ,         .",tonConvertedToNft:"  ,     .    20 !",tonEditedToNft:"NFT   ,     .    20 !",convertToNftFailed:"   ,  .",editNftFailed:"   ,  ."},withdraw={withdrawBtn:"",confirmWithdraw:" NFT-   {{wallet}}?       ",withdrawIsDisabled:"  NFT    ,  ",withdrawIsSuccessful:" NFT ,      NFT   ",withdrawError:" NFT  ,      "},upgrade={upgradeBtn:"",upgradeForBtn:"  {{price}}",upgradeConfirmation:" ,       {{price}} $GUM,    #{{number}}?    ",noUpgradeResources:" ,     .     !",goToEarn:" ",any:"",upgraded:"    !",resourcesList:" ",youScore:" ",noFloopy:"  ",skinConfirmation:" ,    ,    #{{number}}?",rerollConfirmation:" ,    {{price}} $CG,    #{{number}}?",insertAnotherFloopy:"  "},battle={loadMore:" ",myGames:"",allGames:"",betIsPlaced:" !",requestIsCreated:"   !",cancelGameBtn:" ",cancelSwapBtn:" ",seeBets:"",seeOffers:"",bet:" ",history:"",seeDetails:"",private:"",noGames:"  ,    !",startNewGame:"     !",startNewExchange:"   !",firstMessage:" PvP     .  !",apply:" ",filterByGrade:"  ",filterByCollection:"  ",filterByCapNumber:"  ",searchPlaceholder:" ",comment:"",enterComment:" ",confirmComment:"",next:"",preferenceTitle:"     ?",standard:"",communities:"",chooseNumber:" ",chooseCaps:"",anyCaps:"",acceptBets:" ",acceptOffers:" "},pve={level:"",title:"     $GUM!",enemyTitle:": CapsGame ",startBattle:" ",factions:"",factionsAttackBoost:"  ",factionsTitle:" ",factionsDescription1:"  .        .",factionsDescription2:"          .",power:"",battle:"",win:"!",lose:"!",yourReward:"",nextLevel:"  ",totalScore:" ",goHome:"",tryAgain:"",firstMessage:"       ,     ",health:"",onlyMinters:"     NFT  PvE ",leaveQuestion:" ,    ?",yes:"",no:"",boosters:"",buyBoosterButton:" {{count}}  {{price}}"},boosters={description:"       !","max-attack":"Max Attack","max-attack-description":"      ","max-heal":"Max Heal","max-heal-description":"      ","skip-counter-attack":"Skip Counterattack","skip-counter-attack-description":"     -     "},idle={reward:"",level:"",perHour:" ",description:"  ,   .   {{hours}} .",upgrade:"",extraReward:" ",extraDescription:"     ",totalScore:" ",claim:"",problemsLevelPurchase:"   ,  "},leaderboard={league:"",from:"",to:"",points:"",players:"",squads:"",loadMore:" ",noSquadTitle:"    ",noSquadText:"  ",open:"",join:"",sendRequest:" ",sentRequest:" ",leave:"",you:"",yourSquad:" ",members:"",requests:"",manageSquad:" {{user}}",manageAdminSquad:" ",makePublic:"  ",makePrivate:"  ",share:"",kick:"",promote:" ",downgrade:"  ",treasurer:" ",treasurerRevoke:"  ",info:{link:"",title:" ",title1:" ",description1:"     .",title2:" ",description2:"   ,     .",title3:"  ",description3:"      ."},squadsTypes:{all:" "},squadRewards:" ",position:"#{{position}} ",countdown:{beforeStart:" ",beforeEnd:" "}},squad={level:"",bank:"",cancel:"",topupGum:" $GUM  ",topupTokens:" $CG  ",withdrawGum:" $GUM  ",withdrawTokens:" $CG  ",send:"",topup:"",caps:" ",burn:" ",burnMainAction:"  {{score}}",burnConfirmation:" ,    ,    ?    ",burnError:"   ,  ",upgrade:"   {{level}}",upgradeError:"   ,  ",maxSeats:"  ,   ,    ",activity:"",allMembers:"",squadActivity:{thisWeek:" ",pastWeek:" ",thisMonth:" ",pastMonth:" "},role:{owner:"",admin:"",treasurer:"",member:""},add:"",noRequests:" ",packs:"",sendQuestion:" ,    {{name}}  {{userName}}?"},madness={choose:"",selectBoost:" ",health:"",heal:"",power:"",leaveQuestion:" ,    ?",yes:"",no:"",finish:"",round:"",total:""},onboarding={steppack:"    ",stepcaps:"     ",stepgum:"   ",stepupgrade1:"  ",stepupgrade2:"   ",stepfinish:",     !"},staking={banner:{title:" <1>STARTERPACK</1>   !",subtitle:" -  "},title:"Staking",profile:"",info:"    .        .",perDay:" ",remove:"",replace:"",description:"       ",error:"   ",unlockError:"   ,  ",unlockDescription:"       ",unlockDescriptionForBurn:"       {{score}}",unlockMainAction:" {{score}}/{{target}}",burnConfirmation:" ,    ,    #{{slot}}?    ",farming:"Speed",nothing:"",save:"Save",bonus:"Bonus",noGifts:"No gifts yet",unlockForTokens:"  {{tokens}}",unlockForBurn:" ",cancel:"",onlyEpicCanBeBurned:"     EPIC ",farmSpeed:" ",noFarmSpeed:"  "},settings={title:"",sound:"",on:"",off:"",change:"",disconnect:"",topup:"",withdraw:"",topupFinished:"  ,     .     20 !",topupFailed:"   ,  .",walletEnterAmount:" ",topupDescription:"     20 ",topupAmountPrompt:"  ",withdrawAmountPrompt:"  ",withdrawFinished:"  ,      20 ",withdrawTonFailed:"   ,  .",withdrawFee:": {{fee}} TON",withdrawDescription:"     20 ",invalidAmount:" ",wallet:"",transactions:"",noTransactions:" ",transaction:{withdraw:"",topup:"",sale:"",buy:""}},achievement={achievement:"",material:"",unlockReq:" ",collector:" {{number}} ",dealMaker:" {{number}} ",pvpChampion:" {{number}}  ",marketMover:"     {{number}} TON",cgHustler:"   {{number}} $CG  ",intoTheMadness:" {{number}}   ",towerClimber:" {{number}}   PvE",gumTycoon:" {{number}} $GUM  ",betAndRegret:" {{number}}   PvP ",rerollsMachine:" {{number}}   ",diamondDead:" {{number}}   PvP"},pvenew={mydeck:" ",editDeck:"",createDeck:"",selectCapFromDeck:" ",abilities:"",enemyTitle:": {{health}} ",health:"{{health}} "},ru$1={loading:loading$1,startGame,playToEarn,grade,new:"NEW",noDesktop,justNow,hoursAgo,minutesAgo,hide,datetime,yes,no,ok,nav,info,profile,shop,tasks,game,nft,withdraw,upgrade,battle,pve,boosters,idle,leaderboard,squad,madness,onboarding,staking,settings,achievement,pvenew};instance.use(initReactI18next).init({resources:{en:{translation:en$2},ru:{translation:ru$1}},lng:"en",interpolation:{escapeValue:!1}});/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var __typeError=_=>{throw TypeError(_)},__accessCheck=(_,d,v)=>d.has(_)||__typeError("Cannot "+v),__privateGet=(_,d,v)=>(__accessCheck(_,d,"read from private field"),v?v.call(_):d.get(_)),__privateAdd=(_,d,v)=>d.has(_)?__typeError("Cannot add the same private member more than once"):d instanceof WeakSet?d.add(_):d.set(_,v),PopStateEventType="popstate";function createBrowserHistory(_={}){function d(A,C){let{pathname:w,search:T,hash:R}=A.location;return createLocation("",{pathname:w,search:T,hash:R},C.state&&C.state.usr||null,C.state&&C.state.key||"default")}function v(A,C){return typeof C=="string"?C:createPath(C)}return getUrlBasedHistory(d,v,null,_)}function invariant(_,d){if(_===!1||_===null||typeof _>"u")throw new Error(d)}function warning$1(_,d){if(!_){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(_,d){return{usr:_.state,key:_.key,idx:d}}function createLocation(_,d,v=null,A){return{pathname:typeof _=="string"?_:_.pathname,search:"",hash:"",...typeof d=="string"?parsePath(d):d,state:v,key:d&&d.key||A||createKey()}}function createPath({pathname:_="/",search:d="",hash:v=""}){return d&&d!=="?"&&(_+=d.charAt(0)==="?"?d:"?"+d),v&&v!=="#"&&(_+=v.charAt(0)==="#"?v:"#"+v),_}function parsePath(_){let d={};if(_){let v=_.indexOf("#");v>=0&&(d.hash=_.substring(v),_=_.substring(0,v));let A=_.indexOf("?");A>=0&&(d.search=_.substring(A),_=_.substring(0,A)),_&&(d.pathname=_)}return d}function getUrlBasedHistory(_,d,v,A={}){let{window:C=document.defaultView,v5Compat:w=!1}=A,T=C.history,R="POP",G=null,I=z();I==null&&(I=0,T.replaceState({...T.state,idx:I},""));function z(){return(T.state||{idx:null}).idx}function H(){R="POP";let se=z(),re=se==null?null:se-I;I=se,G&&G({action:R,location:oe.location,delta:re})}function Y(se,re){R="PUSH";let fe=createLocation(oe.location,se,re);I=z()+1;let ue=getHistoryState(fe,I),ge=oe.createHref(fe);try{T.pushState(ue,"",ge)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;C.location.assign(ge)}w&&G&&G({action:R,location:oe.location,delta:1})}function ee(se,re){R="REPLACE";let fe=createLocation(oe.location,se,re);I=z();let ue=getHistoryState(fe,I),ge=oe.createHref(fe);T.replaceState(ue,"",ge),w&&G&&G({action:R,location:oe.location,delta:0})}function ie(se){return createBrowserURLImpl(se)}let oe={get action(){return R},get location(){return _(C,T)},listen(se){if(G)throw new Error("A history only accepts one active listener");return C.addEventListener(PopStateEventType,H),G=se,()=>{C.removeEventListener(PopStateEventType,H),G=null}},createHref(se){return d(C,se)},createURL:ie,encodeLocation(se){let re=ie(se);return{pathname:re.pathname,search:re.search,hash:re.hash}},push:Y,replace:ee,go(se){return T.go(se)}};return oe}function createBrowserURLImpl(_,d=!1){let v="http://localhost";typeof window<"u"&&(v=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(v,"No window.location.(origin|href) available to create URL");let A=typeof _=="string"?_:createPath(_);return A=A.replace(/ $/,"%20"),!d&&A.startsWith("//")&&(A=v+A),new URL(A,v)}var _map,unstable_RouterContextProvider=class{constructor(_){if(__privateAdd(this,_map,new Map),_)for(let[d,v]of _)this.set(d,v)}get(_){if(__privateGet(this,_map).has(_))return __privateGet(this,_map).get(_);if(_.defaultValue!==void 0)return _.defaultValue;throw new Error("No value found for context")}set(_,d){__privateGet(this,_map).set(_,d)}};_map=new WeakMap;var unsupportedLazyRouteObjectKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isUnsupportedLazyRouteObjectKey(_){return unsupportedLazyRouteObjectKeys.has(_)}var unsupportedLazyRouteFunctionKeys=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function isUnsupportedLazyRouteFunctionKey(_){return unsupportedLazyRouteFunctionKeys.has(_)}function isIndexRoute(_){return _.index===!0}function convertRoutesToDataRoutes(_,d,v=[],A={},C=!1){return _.map((w,T)=>{let R=[...v,String(T)],G=typeof w.id=="string"?w.id:R.join("-");if(invariant(w.index!==!0||!w.children,"Cannot specify children on an index route"),invariant(C||!A[G],`Found a route id collision on id "${G}".  Route id's must be globally unique within Data Router usages`),isIndexRoute(w)){let I={...w,...d(w),id:G};return A[G]=I,I}else{let I={...w,...d(w),id:G,children:void 0};return A[G]=I,w.children&&(I.children=convertRoutesToDataRoutes(w.children,d,R,A,C)),I}})}function matchRoutes(_,d,v="/"){return matchRoutesImpl(_,d,v,!1)}function matchRoutesImpl(_,d,v,A){let C=typeof d=="string"?parsePath(d):d,w=stripBasename(C.pathname||"/",v);if(w==null)return null;let T=flattenRoutes(_);rankRouteBranches(T);let R=null;for(let G=0;R==null&&G<T.length;++G){let I=decodePath(w);R=matchRouteBranch(T[G],I,A)}return R}function convertRouteMatchToUiMatch(_,d){let{route:v,pathname:A,params:C}=_;return{id:v.id,pathname:A,params:C,data:d[v.id],loaderData:d[v.id],handle:v.handle}}function flattenRoutes(_,d=[],v=[],A=""){let C=(w,T,R)=>{let G={relativePath:R===void 0?w.path||"":R,caseSensitive:w.caseSensitive===!0,childrenIndex:T,route:w};G.relativePath.startsWith("/")&&(invariant(G.relativePath.startsWith(A),`Absolute route path "${G.relativePath}" nested under path "${A}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),G.relativePath=G.relativePath.slice(A.length));let I=joinPaths([A,G.relativePath]),z=v.concat(G);w.children&&w.children.length>0&&(invariant(w.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),flattenRoutes(w.children,d,z,I)),!(w.path==null&&!w.index)&&d.push({path:I,score:computeScore(I,w.index),routesMeta:z})};return _.forEach((w,T)=>{if(w.path===""||!w.path?.includes("?"))C(w,T);else for(let R of explodeOptionalSegments(w.path))C(w,T,R)}),d}function explodeOptionalSegments(_){let d=_.split("/");if(d.length===0)return[];let[v,...A]=d,C=v.endsWith("?"),w=v.replace(/\?$/,"");if(A.length===0)return C?[w,""]:[w];let T=explodeOptionalSegments(A.join("/")),R=[];return R.push(...T.map(G=>G===""?w:[w,G].join("/"))),C&&R.push(...T),R.map(G=>_.startsWith("/")&&G===""?"/":G)}function rankRouteBranches(_){_.sort((d,v)=>d.score!==v.score?v.score-d.score:compareIndexes(d.routesMeta.map(A=>A.childrenIndex),v.routesMeta.map(A=>A.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_=>_==="*";function computeScore(_,d){let v=_.split("/"),A=v.length;return v.some(isSplat)&&(A+=splatPenalty),d&&(A+=indexRouteValue),v.filter(C=>!isSplat(C)).reduce((C,w)=>C+(paramRe.test(w)?dynamicSegmentValue:w===""?emptySegmentValue:staticSegmentValue),A)}function compareIndexes(_,d){return _.length===d.length&&_.slice(0,-1).every((A,C)=>A===d[C])?_[_.length-1]-d[d.length-1]:0}function matchRouteBranch(_,d,v=!1){let{routesMeta:A}=_,C={},w="/",T=[];for(let R=0;R<A.length;++R){let G=A[R],I=R===A.length-1,z=w==="/"?d:d.slice(w.length)||"/",H=matchPath({path:G.relativePath,caseSensitive:G.caseSensitive,end:I},z),Y=G.route;if(!H&&I&&v&&!A[A.length-1].route.index&&(H=matchPath({path:G.relativePath,caseSensitive:G.caseSensitive,end:!1},z)),!H)return null;Object.assign(C,H.params),T.push({params:C,pathname:joinPaths([w,H.pathname]),pathnameBase:normalizePathname(joinPaths([w,H.pathnameBase])),route:Y}),H.pathnameBase!=="/"&&(w=joinPaths([w,H.pathnameBase]))}return T}function matchPath(_,d){typeof _=="string"&&(_={path:_,caseSensitive:!1,end:!0});let[v,A]=compilePath(_.path,_.caseSensitive,_.end),C=d.match(v);if(!C)return null;let w=C[0],T=w.replace(/(.)\/+$/,"$1"),R=C.slice(1);return{params:A.reduce((I,{paramName:z,isOptional:H},Y)=>{if(z==="*"){let ie=R[Y]||"";T=w.slice(0,w.length-ie.length).replace(/(.)\/+$/,"$1")}const ee=R[Y];return H&&!ee?I[z]=void 0:I[z]=(ee||"").replace(/%2F/g,"/"),I},{}),pathname:w,pathnameBase:T,pattern:_}}function compilePath(_,d=!1,v=!0){warning$1(_==="*"||!_.endsWith("*")||_.endsWith("/*"),`Route path "${_}" will be treated as if it were "${_.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${_.replace(/\*$/,"/*")}".`);let A=[],C="^"+_.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(T,R,G)=>(A.push({paramName:R,isOptional:G!=null}),G?"/?([^\\/]+)?":"/([^\\/]+)"));return _.endsWith("*")?(A.push({paramName:"*"}),C+=_==="*"||_==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):v?C+="\\/*$":_!==""&&_!=="/"&&(C+="(?:(?=\\/|$))"),[new RegExp(C,d?void 0:"i"),A]}function decodePath(_){try{return _.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return warning$1(!1,`The URL path "${_}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${d}).`),_}}function stripBasename(_,d){if(d==="/")return _;if(!_.toLowerCase().startsWith(d.toLowerCase()))return null;let v=d.endsWith("/")?d.length-1:d.length,A=_.charAt(v);return A&&A!=="/"?null:_.slice(v)||"/"}function prependBasename({basename:_,pathname:d}){return d==="/"?_:joinPaths([_,d])}function resolvePath(_,d="/"){let{pathname:v,search:A="",hash:C=""}=typeof _=="string"?parsePath(_):_;return{pathname:v?v.startsWith("/")?v:resolvePathname(v,d):d,search:normalizeSearch(A),hash:normalizeHash(C)}}function resolvePathname(_,d){let v=d.replace(/\/+$/,"").split("/");return _.split("/").forEach(C=>{C===".."?v.length>1&&v.pop():C!=="."&&v.push(C)}),v.length>1?v.join("/"):"/"}function getInvalidPathError(_,d,v,A){return`Cannot include a '${_}' character in a manually specified \`to.${d}\` field [${JSON.stringify(A)}].  Please separate it out to the \`to.${v}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(_){return _.filter((d,v)=>v===0||d.route.path&&d.route.path.length>0)}function getResolveToMatches(_){let d=getPathContributingMatches(_);return d.map((v,A)=>A===d.length-1?v.pathname:v.pathnameBase)}function resolveTo(_,d,v,A=!1){let C;typeof _=="string"?C=parsePath(_):(C={..._},invariant(!C.pathname||!C.pathname.includes("?"),getInvalidPathError("?","pathname","search",C)),invariant(!C.pathname||!C.pathname.includes("#"),getInvalidPathError("#","pathname","hash",C)),invariant(!C.search||!C.search.includes("#"),getInvalidPathError("#","search","hash",C)));let w=_===""||C.pathname==="",T=w?"/":C.pathname,R;if(T==null)R=v;else{let H=d.length-1;if(!A&&T.startsWith("..")){let Y=T.split("/");for(;Y[0]==="..";)Y.shift(),H-=1;C.pathname=Y.join("/")}R=H>=0?d[H]:"/"}let G=resolvePath(C,R),I=T&&T!=="/"&&T.endsWith("/"),z=(w||T===".")&&v.endsWith("/");return!G.pathname.endsWith("/")&&(I||z)&&(G.pathname+="/"),G}var joinPaths=_=>_.join("/").replace(/\/\/+/g,"/"),normalizePathname=_=>_.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_=>!_||_==="?"?"":_.startsWith("?")?_:"?"+_,normalizeHash=_=>!_||_==="#"?"":_.startsWith("#")?_:"#"+_,ErrorResponseImpl=class{constructor(_,d,v,A=!1){this.status=_,this.statusText=d||"",this.internal=A,v instanceof Error?(this.data=v.toString(),this.error=v):this.data=v}};function isRouteErrorResponse(_){return _!=null&&typeof _.status=="number"&&typeof _.statusText=="string"&&typeof _.internal=="boolean"&&"data"in _}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["GET",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,isAbsoluteUrl=_=>ABSOLUTE_URL_REGEX.test(_),defaultMapRouteProperties=_=>({hasErrorBoundary:!!_.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions",ResetLoaderDataSymbol=Symbol("ResetLoaderData");function createRouter$1(_){const d=_.window?_.window:typeof window<"u"?window:void 0,v=typeof d<"u"&&typeof d.document<"u"&&typeof d.document.createElement<"u";invariant(_.routes.length>0,"You must provide a non-empty routes array to createRouter");let A=_.hydrationRouteProperties||[],C=_.mapRouteProperties||defaultMapRouteProperties,w={},T=convertRoutesToDataRoutes(_.routes,C,void 0,w),R,G=_.basename||"/",I=_.dataStrategy||defaultDataStrategyWithMiddleware,z={unstable_middleware:!1,..._.future},H=null,Y=new Set,ee=null,ie=null,oe=null,se=_.hydrationData!=null,re=matchRoutes(T,_.history.location,G),fe=!1,ue=null,ge;if(re==null&&!_.patchRoutesOnNavigation){let mn=getInternalRouterError(404,{pathname:_.history.location.pathname}),{matches:tr,route:vr}=getShortCircuitMatches(T);ge=!0,re=tr,ue={[vr.id]:mn}}else if(re&&!_.hydrationData&&br(re,T,_.history.location.pathname).active&&(re=null),re)if(re.some(mn=>mn.route.lazy))ge=!1;else if(!re.some(mn=>mn.route.loader))ge=!0;else{let mn=_.hydrationData?_.hydrationData.loaderData:null,tr=_.hydrationData?_.hydrationData.errors:null;if(tr){let vr=re.findIndex(Ar=>tr[Ar.route.id]!==void 0);ge=re.slice(0,vr+1).every(Ar=>!shouldLoadRouteOnHydration(Ar.route,mn,tr))}else ge=re.every(vr=>!shouldLoadRouteOnHydration(vr.route,mn,tr))}else{ge=!1,re=[];let mn=br(null,T,_.history.location.pathname);mn.active&&mn.matches&&(fe=!0,re=mn.matches)}let ye,be={historyAction:_.history.action,location:_.history.location,matches:re,initialized:ge,navigation:IDLE_NAVIGATION,restoreScrollPosition:_.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:_.hydrationData&&_.hydrationData.loaderData||{},actionData:_.hydrationData&&_.hydrationData.actionData||null,errors:_.hydrationData&&_.hydrationData.errors||ue,fetchers:new Map,blockers:new Map},ve="POP",Me=!1,we,Be=!1,De=new Map,Fe=null,Oe=!1,Ge=!1,ze=new Set,je=new Map,He=0,Xe=-1,$e=new Map,We=new Set,nt=new Map,Qt=new Map,Wt=new Set,Bn=new Map,Lt,Mn=null;function cr(){if(H=_.history.listen(({action:mn,location:tr,delta:vr})=>{if(Lt){Lt(),Lt=void 0;return}warning$1(Bn.size===0||vr!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ar=Ii({currentLocation:be.location,nextLocation:tr,historyAction:mn});if(Ar&&vr!=null){let Tn=new Promise(tt=>{Lt=tt});_.history.go(vr*-1),oi(Ar,{state:"blocked",location:tr,proceed(){oi(Ar,{state:"proceeding",proceed:void 0,reset:void 0,location:tr}),Tn.then(()=>_.history.go(vr))},reset(){let tt=new Map(be.blockers);tt.set(Ar,IDLE_BLOCKER),$n({blockers:tt})}});return}return Jn(mn,tr)}),v){restoreAppliedTransitions(d,De);let mn=()=>persistAppliedTransitions(d,De);d.addEventListener("pagehide",mn),Fe=()=>d.removeEventListener("pagehide",mn)}return be.initialized||Jn("POP",be.location,{initialHydration:!0}),ye}function In(){H&&H(),Fe&&Fe(),Y.clear(),we&&we.abort(),be.fetchers.forEach((mn,tr)=>Qr(tr)),be.blockers.forEach((mn,tr)=>Ci(tr))}function Zn(mn){return Y.add(mn),()=>Y.delete(mn)}function $n(mn,tr={}){mn.matches&&(mn.matches=mn.matches.map(Tn=>{let tt=w[Tn.route.id],$t=Tn.route;return $t.element!==tt.element||$t.errorElement!==tt.errorElement||$t.hydrateFallbackElement!==tt.hydrateFallbackElement?{...Tn,route:tt}:Tn})),be={...be,...mn};let vr=[],Ar=[];be.fetchers.forEach((Tn,tt)=>{Tn.state==="idle"&&(Wt.has(tt)?vr.push(tt):Ar.push(tt))}),Wt.forEach(Tn=>{!be.fetchers.has(Tn)&&!je.has(Tn)&&vr.push(Tn)}),[...Y].forEach(Tn=>Tn(be,{deletedFetchers:vr,viewTransitionOpts:tr.viewTransitionOpts,flushSync:tr.flushSync===!0})),vr.forEach(Tn=>Qr(Tn)),Ar.forEach(Tn=>be.fetchers.delete(Tn))}function Rn(mn,tr,{flushSync:vr}={}){let Ar=be.actionData!=null&&be.navigation.formMethod!=null&&isMutationMethod(be.navigation.formMethod)&&be.navigation.state==="loading"&&mn.state?._isRedirect!==!0,Tn;tr.actionData?Object.keys(tr.actionData).length>0?Tn=tr.actionData:Tn=null:Ar?Tn=be.actionData:Tn=null;let tt=tr.loaderData?mergeLoaderData(be.loaderData,tr.loaderData,tr.matches||[],tr.errors):be.loaderData,$t=be.blockers;$t.size>0&&($t=new Map($t),$t.forEach((sr,rr)=>$t.set(rr,IDLE_BLOCKER)));let dn=Oe?!1:qr(mn,tr.matches||be.matches),Qe=Me===!0||be.navigation.formMethod!=null&&isMutationMethod(be.navigation.formMethod)&&mn.state?._isRedirect!==!0;R&&(T=R,R=void 0),Oe||ve==="POP"||(ve==="PUSH"?_.history.push(mn,mn.state):ve==="REPLACE"&&_.history.replace(mn,mn.state));let gn;if(ve==="POP"){let sr=De.get(be.location.pathname);sr&&sr.has(mn.pathname)?gn={currentLocation:be.location,nextLocation:mn}:De.has(mn.pathname)&&(gn={currentLocation:mn,nextLocation:be.location})}else if(Be){let sr=De.get(be.location.pathname);sr?sr.add(mn.pathname):(sr=new Set([mn.pathname]),De.set(be.location.pathname,sr)),gn={currentLocation:be.location,nextLocation:mn}}$n({...tr,actionData:Tn,loaderData:tt,historyAction:ve,location:mn,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:dn,preventScrollReset:Qe,blockers:$t},{viewTransitionOpts:gn,flushSync:vr===!0}),ve="POP",Me=!1,Be=!1,Oe=!1,Ge=!1,Mn?.resolve(),Mn=null}async function Dn(mn,tr){if(typeof mn=="number"){_.history.go(mn);return}let vr=normalizeTo(be.location,be.matches,G,mn,tr?.fromRouteId,tr?.relative),{path:Ar,submission:Tn,error:tt}=normalizeNavigateOptions(!1,vr,tr),$t=be.location,dn=createLocation(be.location,Ar,tr&&tr.state);dn={...dn,..._.history.encodeLocation(dn)};let Qe=tr&&tr.replace!=null?tr.replace:void 0,gn="PUSH";Qe===!0?gn="REPLACE":Qe===!1||Tn!=null&&isMutationMethod(Tn.formMethod)&&Tn.formAction===be.location.pathname+be.location.search&&(gn="REPLACE");let sr=tr&&"preventScrollReset"in tr?tr.preventScrollReset===!0:void 0,rr=(tr&&tr.flushSync)===!0,it=Ii({currentLocation:$t,nextLocation:dn,historyAction:gn});if(it){oi(it,{state:"blocked",location:dn,proceed(){oi(it,{state:"proceeding",proceed:void 0,reset:void 0,location:dn}),Dn(mn,tr)},reset(){let At=new Map(be.blockers);At.set(it,IDLE_BLOCKER),$n({blockers:At})}});return}await Jn(gn,dn,{submission:Tn,pendingError:tt,preventScrollReset:sr,replace:tr&&tr.replace,enableViewTransition:tr&&tr.viewTransition,flushSync:rr})}function Gt(){Mn||(Mn=createDeferred()),yn(),$n({revalidation:"loading"});let mn=Mn.promise;return be.navigation.state==="submitting"?mn:be.navigation.state==="idle"?(Jn(be.historyAction,be.location,{startUninterruptedRevalidation:!0}),mn):(Jn(ve||be.historyAction,be.navigation.location,{overrideNavigation:be.navigation,enableViewTransition:Be===!0}),mn)}async function Jn(mn,tr,vr){we&&we.abort(),we=null,ve=mn,Oe=(vr&&vr.startUninterruptedRevalidation)===!0,vi(be.location,be.matches),Me=(vr&&vr.preventScrollReset)===!0,Be=(vr&&vr.enableViewTransition)===!0;let Ar=R||T,Tn=vr&&vr.overrideNavigation,tt=vr?.initialHydration&&be.matches&&be.matches.length>0&&!fe?be.matches:matchRoutes(Ar,tr,G),$t=(vr&&vr.flushSync)===!0;if(tt&&be.initialized&&!Ge&&isHashChangeOnly(be.location,tr)&&!(vr&&vr.submission&&isMutationMethod(vr.submission.formMethod))){Rn(tr,{matches:tt},{flushSync:$t});return}let dn=br(tt,Ar,tr.pathname);if(dn.active&&dn.matches&&(tt=dn.matches),!tt){let{error:Ft,notFoundMatches:Hn,route:wn}=wr(tr.pathname);Rn(tr,{matches:Hn,loaderData:{},errors:{[wn.id]:Ft}},{flushSync:$t});return}we=new AbortController;let Qe=createClientSideRequest(_.history,tr,we.signal,vr&&vr.submission),gn=_.unstable_getContext?await _.unstable_getContext():new unstable_RouterContextProvider,sr;if(vr&&vr.pendingError)sr=[findNearestBoundary(tt).route.id,{type:"error",error:vr.pendingError}];else if(vr&&vr.submission&&isMutationMethod(vr.submission.formMethod)){let Ft=await Nn(Qe,tr,vr.submission,tt,gn,dn.active,vr&&vr.initialHydration===!0,{replace:vr.replace,flushSync:$t});if(Ft.shortCircuited)return;if(Ft.pendingActionResult){let[Hn,wn]=Ft.pendingActionResult;if(isErrorResult(wn)&&isRouteErrorResponse(wn.error)&&wn.error.status===404){we=null,Rn(tr,{matches:Ft.matches,loaderData:{},errors:{[Hn]:wn.error}});return}}tt=Ft.matches||tt,sr=Ft.pendingActionResult,Tn=getLoadingNavigation(tr,vr.submission),$t=!1,dn.active=!1,Qe=createClientSideRequest(_.history,Qe.url,Qe.signal)}let{shortCircuited:rr,matches:it,loaderData:At,errors:An}=await Xn(Qe,tr,tt,gn,dn.active,Tn,vr&&vr.submission,vr&&vr.fetcherSubmission,vr&&vr.replace,vr&&vr.initialHydration===!0,$t,sr);rr||(we=null,Rn(tr,{matches:it||tt,...getActionDataForCommit(sr),loaderData:At,errors:An}))}async function Nn(mn,tr,vr,Ar,Tn,tt,$t,dn={}){yn();let Qe=getSubmittingNavigation(tr,vr);if($n({navigation:Qe},{flushSync:dn.flushSync===!0}),tt){let rr=await er(Ar,tr.pathname,mn.signal);if(rr.type==="aborted")return{shortCircuited:!0};if(rr.type==="error"){let it=findNearestBoundary(rr.partialMatches).route.id;return{matches:rr.partialMatches,pendingActionResult:[it,{type:"error",error:rr.error}]}}else if(rr.matches)Ar=rr.matches;else{let{notFoundMatches:it,error:At,route:An}=wr(tr.pathname);return{matches:it,pendingActionResult:[An.id,{type:"error",error:At}]}}}let gn,sr=getTargetMatch(Ar,tr);if(!sr.route.action&&!sr.route.lazy)gn={type:"error",error:getInternalRouterError(405,{method:mn.method,pathname:tr.pathname,routeId:sr.route.id})};else{let rr=getTargetedDataStrategyMatches(C,w,mn,Ar,sr,$t?[]:A,Tn),it=await fn(mn,rr,Tn,null);if(gn=it[sr.route.id],!gn){for(let At of Ar)if(it[At.route.id]){gn=it[At.route.id];break}}if(mn.signal.aborted)return{shortCircuited:!0}}if(isRedirectResult(gn)){let rr;return dn&&dn.replace!=null?rr=dn.replace:rr=normalizeRedirectLocation(gn.response.headers.get("Location"),new URL(mn.url),G)===be.location.pathname+be.location.search,await pr(mn,gn,!0,{submission:vr,replace:rr}),{shortCircuited:!0}}if(isErrorResult(gn)){let rr=findNearestBoundary(Ar,sr.route.id);return(dn&&dn.replace)!==!0&&(ve="PUSH"),{matches:Ar,pendingActionResult:[rr.route.id,gn,sr.route.id]}}return{matches:Ar,pendingActionResult:[sr.route.id,gn]}}async function Xn(mn,tr,vr,Ar,Tn,tt,$t,dn,Qe,gn,sr,rr){let it=tt||getLoadingNavigation(tr,$t),At=$t||dn||getSubmissionFromNavigation(it),An=!Oe&&!gn;if(Tn){if(An){let Sr=jn(rr);$n({navigation:it,...Sr!==void 0?{actionData:Sr}:{}},{flushSync:sr})}let fr=await er(vr,tr.pathname,mn.signal);if(fr.type==="aborted")return{shortCircuited:!0};if(fr.type==="error"){let Sr=findNearestBoundary(fr.partialMatches).route.id;return{matches:fr.partialMatches,loaderData:{},errors:{[Sr]:fr.error}}}else if(fr.matches)vr=fr.matches;else{let{error:Sr,notFoundMatches:Lr,route:Nr}=wr(tr.pathname);return{matches:Lr,loaderData:{},errors:{[Nr.id]:Sr}}}}let Ft=R||T,{dsMatches:Hn,revalidatingFetchers:wn}=getMatchesToLoad(mn,Ar,C,w,_.history,be,vr,At,tr,gn?[]:A,gn===!0,Ge,ze,Wt,nt,We,Ft,G,_.patchRoutesOnNavigation!=null,rr);if(Xe=++He,!_.dataStrategy&&!Hn.some(fr=>fr.shouldLoad)&&!Hn.some(fr=>fr.route.unstable_middleware)&&wn.length===0){let fr=Kr();return Rn(tr,{matches:vr,loaderData:{},errors:rr&&isErrorResult(rr[1])?{[rr[0]]:rr[1].error}:null,...getActionDataForCommit(rr),...fr?{fetchers:new Map(be.fetchers)}:{}},{flushSync:sr}),{shortCircuited:!0}}if(An){let fr={};if(!Tn){fr.navigation=it;let Sr=jn(rr);Sr!==void 0&&(fr.actionData=Sr)}wn.length>0&&(fr.fetchers=Un(wn)),$n(fr,{flushSync:sr})}wn.forEach(fr=>{Gr(fr.key),fr.controller&&je.set(fr.key,fr.controller)});let lr=()=>wn.forEach(fr=>Gr(fr.key));we&&we.signal.addEventListener("abort",lr);let{loaderResults:rt,fetcherResults:ln}=await Mt(Hn,wn,mn,Ar);if(mn.signal.aborted)return{shortCircuited:!0};we&&we.signal.removeEventListener("abort",lr),wn.forEach(fr=>je.delete(fr.key));let Cn=findRedirect(rt);if(Cn)return await pr(mn,Cn.result,!0,{replace:Qe}),{shortCircuited:!0};if(Cn=findRedirect(ln),Cn)return We.add(Cn.key),await pr(mn,Cn.result,!0,{replace:Qe}),{shortCircuited:!0};let{loaderData:zn,errors:Sn}=processLoaderData(be,vr,rt,rr,wn,ln);gn&&be.errors&&(Sn={...be.errors,...Sn});let yr=Kr(),ur=ti(Xe),hr=yr||ur||wn.length>0;return{matches:vr,loaderData:zn,errors:Sn,...hr?{fetchers:new Map(be.fetchers)}:{}}}function jn(mn){if(mn&&!isErrorResult(mn[1]))return{[mn[0]]:mn[1].data};if(be.actionData)return Object.keys(be.actionData).length===0?null:be.actionData}function Un(mn){return mn.forEach(tr=>{let vr=be.fetchers.get(tr.key),Ar=getLoadingFetcher(void 0,vr?vr.data:void 0);be.fetchers.set(tr.key,Ar)}),new Map(be.fetchers)}async function bn(mn,tr,vr,Ar){Gr(mn);let Tn=(Ar&&Ar.flushSync)===!0,tt=R||T,$t=normalizeTo(be.location,be.matches,G,vr,tr,Ar?.relative),dn=matchRoutes(tt,$t,G),Qe=br(dn,tt,$t);if(Qe.active&&Qe.matches&&(dn=Qe.matches),!dn){nr(mn,tr,getInternalRouterError(404,{pathname:$t}),{flushSync:Tn});return}let{path:gn,submission:sr,error:rr}=normalizeNavigateOptions(!0,$t,Ar);if(rr){nr(mn,tr,rr,{flushSync:Tn});return}let it=_.unstable_getContext?await _.unstable_getContext():new unstable_RouterContextProvider,At=(Ar&&Ar.preventScrollReset)===!0;if(sr&&isMutationMethod(sr.formMethod)){await Kn(mn,tr,gn,dn,it,Qe.active,Tn,At,sr);return}nt.set(mn,{routeId:tr,path:gn}),await Qn(mn,tr,gn,dn,it,Qe.active,Tn,At,sr)}async function Kn(mn,tr,vr,Ar,Tn,tt,$t,dn,Qe){yn(),nt.delete(mn);let gn=be.fetchers.get(mn);kn(mn,getSubmittingFetcher(Qe,gn),{flushSync:$t});let sr=new AbortController,rr=createClientSideRequest(_.history,vr,sr.signal,Qe);if(tt){let xr=await er(Ar,new URL(rr.url).pathname,rr.signal,mn);if(xr.type==="aborted")return;if(xr.type==="error"){nr(mn,tr,xr.error,{flushSync:$t});return}else if(xr.matches)Ar=xr.matches;else{nr(mn,tr,getInternalRouterError(404,{pathname:vr}),{flushSync:$t});return}}let it=getTargetMatch(Ar,vr);if(!it.route.action&&!it.route.lazy){let xr=getInternalRouterError(405,{method:Qe.formMethod,pathname:vr,routeId:tr});nr(mn,tr,xr,{flushSync:$t});return}je.set(mn,sr);let At=He,An=getTargetedDataStrategyMatches(C,w,rr,Ar,it,A,Tn),Hn=(await fn(rr,An,Tn,mn))[it.route.id];if(rr.signal.aborted){je.get(mn)===sr&&je.delete(mn);return}if(Wt.has(mn)){if(isRedirectResult(Hn)||isErrorResult(Hn)){kn(mn,getDoneFetcher(void 0));return}}else{if(isRedirectResult(Hn))if(je.delete(mn),Xe>At){kn(mn,getDoneFetcher(void 0));return}else return We.add(mn),kn(mn,getLoadingFetcher(Qe)),pr(rr,Hn,!1,{fetcherSubmission:Qe,preventScrollReset:dn});if(isErrorResult(Hn)){nr(mn,tr,Hn.error);return}}let wn=be.navigation.location||be.location,lr=createClientSideRequest(_.history,wn,sr.signal),rt=R||T,ln=be.navigation.state!=="idle"?matchRoutes(rt,be.navigation.location,G):be.matches;invariant(ln,"Didn't find any matches after fetcher action");let Cn=++He;$e.set(mn,Cn);let zn=getLoadingFetcher(Qe,Hn.data);be.fetchers.set(mn,zn);let{dsMatches:Sn,revalidatingFetchers:yr}=getMatchesToLoad(lr,Tn,C,w,_.history,be,ln,Qe,wn,A,!1,Ge,ze,Wt,nt,We,rt,G,_.patchRoutesOnNavigation!=null,[it.route.id,Hn]);yr.filter(xr=>xr.key!==mn).forEach(xr=>{let Cr=xr.key,Or=be.fetchers.get(Cr),Ur=getLoadingFetcher(void 0,Or?Or.data:void 0);be.fetchers.set(Cr,Ur),Gr(Cr),xr.controller&&je.set(Cr,xr.controller)}),$n({fetchers:new Map(be.fetchers)});let ur=()=>yr.forEach(xr=>Gr(xr.key));sr.signal.addEventListener("abort",ur);let{loaderResults:hr,fetcherResults:fr}=await Mt(Sn,yr,lr,Tn);if(sr.signal.aborted)return;if(sr.signal.removeEventListener("abort",ur),$e.delete(mn),je.delete(mn),yr.forEach(xr=>je.delete(xr.key)),be.fetchers.has(mn)){let xr=getDoneFetcher(Hn.data);be.fetchers.set(mn,xr)}let Sr=findRedirect(hr);if(Sr)return pr(lr,Sr.result,!1,{preventScrollReset:dn});if(Sr=findRedirect(fr),Sr)return We.add(Sr.key),pr(lr,Sr.result,!1,{preventScrollReset:dn});let{loaderData:Lr,errors:Nr}=processLoaderData(be,ln,hr,void 0,yr,fr);ti(Cn),be.navigation.state==="loading"&&Cn>Xe?(invariant(ve,"Expected pending action"),we&&we.abort(),Rn(be.navigation.location,{matches:ln,loaderData:Lr,errors:Nr,fetchers:new Map(be.fetchers)})):($n({errors:Nr,loaderData:mergeLoaderData(be.loaderData,Lr,ln,Nr),fetchers:new Map(be.fetchers)}),Ge=!1)}async function Qn(mn,tr,vr,Ar,Tn,tt,$t,dn,Qe){let gn=be.fetchers.get(mn);kn(mn,getLoadingFetcher(Qe,gn?gn.data:void 0),{flushSync:$t});let sr=new AbortController,rr=createClientSideRequest(_.history,vr,sr.signal);if(tt){let wn=await er(Ar,new URL(rr.url).pathname,rr.signal,mn);if(wn.type==="aborted")return;if(wn.type==="error"){nr(mn,tr,wn.error,{flushSync:$t});return}else if(wn.matches)Ar=wn.matches;else{nr(mn,tr,getInternalRouterError(404,{pathname:vr}),{flushSync:$t});return}}let it=getTargetMatch(Ar,vr);je.set(mn,sr);let At=He,An=getTargetedDataStrategyMatches(C,w,rr,Ar,it,A,Tn),Hn=(await fn(rr,An,Tn,mn))[it.route.id];if(je.get(mn)===sr&&je.delete(mn),!rr.signal.aborted){if(Wt.has(mn)){kn(mn,getDoneFetcher(void 0));return}if(isRedirectResult(Hn))if(Xe>At){kn(mn,getDoneFetcher(void 0));return}else{We.add(mn),await pr(rr,Hn,!1,{preventScrollReset:dn});return}if(isErrorResult(Hn)){nr(mn,tr,Hn.error);return}kn(mn,getDoneFetcher(Hn.data))}}async function pr(mn,tr,vr,{submission:Ar,fetcherSubmission:Tn,preventScrollReset:tt,replace:$t}={}){tr.response.headers.has("X-Remix-Revalidate")&&(Ge=!0);let dn=tr.response.headers.get("Location");invariant(dn,"Expected a Location header on the redirect Response"),dn=normalizeRedirectLocation(dn,new URL(mn.url),G);let Qe=createLocation(be.location,dn,{_isRedirect:!0});if(v){let An=!1;if(tr.response.headers.has("X-Remix-Reload-Document"))An=!0;else if(isAbsoluteUrl(dn)){const Ft=createBrowserURLImpl(dn,!0);An=Ft.origin!==d.location.origin||stripBasename(Ft.pathname,G)==null}if(An){$t?d.location.replace(dn):d.location.assign(dn);return}}we=null;let gn=$t===!0||tr.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:sr,formAction:rr,formEncType:it}=be.navigation;!Ar&&!Tn&&sr&&rr&&it&&(Ar=getSubmissionFromNavigation(be.navigation));let At=Ar||Tn;if(redirectPreserveMethodStatusCodes.has(tr.response.status)&&At&&isMutationMethod(At.formMethod))await Jn(gn,Qe,{submission:{...At,formAction:dn},preventScrollReset:tt||Me,enableViewTransition:vr?Be:void 0});else{let An=getLoadingNavigation(Qe,Ar);await Jn(gn,Qe,{overrideNavigation:An,fetcherSubmission:Tn,preventScrollReset:tt||Me,enableViewTransition:vr?Be:void 0})}}async function fn(mn,tr,vr,Ar){let Tn,tt={};try{Tn=await callDataStrategyImpl(I,mn,tr,Ar,vr,!1)}catch($t){return tr.filter(dn=>dn.shouldLoad).forEach(dn=>{tt[dn.route.id]={type:"error",error:$t}}),tt}if(mn.signal.aborted)return tt;for(let[$t,dn]of Object.entries(Tn))if(isRedirectDataStrategyResult(dn)){let Qe=dn.result;tt[$t]={type:"redirect",response:normalizeRelativeRoutingRedirectResponse(Qe,mn,$t,tr,G)}}else tt[$t]=await convertDataStrategyResultToDataResult(dn);return tt}async function Mt(mn,tr,vr,Ar){let Tn=fn(vr,mn,Ar,null),tt=Promise.all(tr.map(async Qe=>{if(Qe.matches&&Qe.match&&Qe.request&&Qe.controller){let sr=(await fn(Qe.request,Qe.matches,Ar,Qe.key))[Qe.match.route.id];return{[Qe.key]:sr}}else return Promise.resolve({[Qe.key]:{type:"error",error:getInternalRouterError(404,{pathname:Qe.path})}})})),$t=await Tn,dn=(await tt).reduce((Qe,gn)=>Object.assign(Qe,gn),{});return{loaderResults:$t,fetcherResults:dn}}function yn(){Ge=!0,nt.forEach((mn,tr)=>{je.has(tr)&&ze.add(tr),Gr(tr)})}function kn(mn,tr,vr={}){be.fetchers.set(mn,tr),$n({fetchers:new Map(be.fetchers)},{flushSync:(vr&&vr.flushSync)===!0})}function nr(mn,tr,vr,Ar={}){let Tn=findNearestBoundary(be.matches,tr);Qr(mn),$n({errors:{[Tn.route.id]:vr},fetchers:new Map(be.fetchers)},{flushSync:(Ar&&Ar.flushSync)===!0})}function dr(mn){return Qt.set(mn,(Qt.get(mn)||0)+1),Wt.has(mn)&&Wt.delete(mn),be.fetchers.get(mn)||IDLE_FETCHER}function Qr(mn){let tr=be.fetchers.get(mn);je.has(mn)&&!(tr&&tr.state==="loading"&&$e.has(mn))&&Gr(mn),nt.delete(mn),$e.delete(mn),We.delete(mn),Wt.delete(mn),ze.delete(mn),be.fetchers.delete(mn)}function Wr(mn){let tr=(Qt.get(mn)||0)-1;tr<=0?(Qt.delete(mn),Wt.add(mn)):Qt.set(mn,tr),$n({fetchers:new Map(be.fetchers)})}function Gr(mn){let tr=je.get(mn);tr&&(tr.abort(),je.delete(mn))}function Hr(mn){for(let tr of mn){let vr=dr(tr),Ar=getDoneFetcher(vr.data);be.fetchers.set(tr,Ar)}}function Kr(){let mn=[],tr=!1;for(let vr of We){let Ar=be.fetchers.get(vr);invariant(Ar,`Expected fetcher: ${vr}`),Ar.state==="loading"&&(We.delete(vr),mn.push(vr),tr=!0)}return Hr(mn),tr}function ti(mn){let tr=[];for(let[vr,Ar]of $e)if(Ar<mn){let Tn=be.fetchers.get(vr);invariant(Tn,`Expected fetcher: ${vr}`),Tn.state==="loading"&&(Gr(vr),$e.delete(vr),tr.push(vr))}return Hr(tr),tr.length>0}function Mi(mn,tr){let vr=be.blockers.get(mn)||IDLE_BLOCKER;return Bn.get(mn)!==tr&&Bn.set(mn,tr),vr}function Ci(mn){be.blockers.delete(mn),Bn.delete(mn)}function oi(mn,tr){let vr=be.blockers.get(mn)||IDLE_BLOCKER;invariant(vr.state==="unblocked"&&tr.state==="blocked"||vr.state==="blocked"&&tr.state==="blocked"||vr.state==="blocked"&&tr.state==="proceeding"||vr.state==="blocked"&&tr.state==="unblocked"||vr.state==="proceeding"&&tr.state==="unblocked",`Invalid blocker state transition: ${vr.state} -> ${tr.state}`);let Ar=new Map(be.blockers);Ar.set(mn,tr),$n({blockers:Ar})}function Ii({currentLocation:mn,nextLocation:tr,historyAction:vr}){if(Bn.size===0)return;Bn.size>1&&warning$1(!1,"A router only supports one blocker at a time");let Ar=Array.from(Bn.entries()),[Tn,tt]=Ar[Ar.length-1],$t=be.blockers.get(Tn);if(!($t&&$t.state==="proceeding")&&tt({currentLocation:mn,nextLocation:tr,historyAction:vr}))return Tn}function wr(mn){let tr=getInternalRouterError(404,{pathname:mn}),vr=R||T,{matches:Ar,route:Tn}=getShortCircuitMatches(vr);return{notFoundMatches:Ar,route:Tn,error:tr}}function Br(mn,tr,vr){if(ee=mn,oe=tr,ie=vr||null,!se&&be.navigation===IDLE_NAVIGATION){se=!0;let Ar=qr(be.location,be.matches);Ar!=null&&$n({restoreScrollPosition:Ar})}return()=>{ee=null,oe=null,ie=null}}function ui(mn,tr){return ie&&ie(mn,tr.map(Ar=>convertRouteMatchToUiMatch(Ar,be.loaderData)))||mn.key}function vi(mn,tr){if(ee&&oe){let vr=ui(mn,tr);ee[vr]=oe()}}function qr(mn,tr){if(ee){let vr=ui(mn,tr),Ar=ee[vr];if(typeof Ar=="number")return Ar}return null}function br(mn,tr,vr){if(_.patchRoutesOnNavigation)if(mn){if(Object.keys(mn[0].params).length>0)return{active:!0,matches:matchRoutesImpl(tr,vr,G,!0)}}else return{active:!0,matches:matchRoutesImpl(tr,vr,G,!0)||[]};return{active:!1,matches:null}}async function er(mn,tr,vr,Ar){if(!_.patchRoutesOnNavigation)return{type:"success",matches:mn};let Tn=mn;for(;;){let tt=R==null,$t=R||T,dn=w;try{await _.patchRoutesOnNavigation({signal:vr,path:tr,matches:Tn,fetcherKey:Ar,patch:(sr,rr)=>{vr.aborted||patchRoutesImpl(sr,rr,$t,dn,C,!1)}})}catch(sr){return{type:"error",error:sr,partialMatches:Tn}}finally{tt&&!vr.aborted&&(T=[...T])}if(vr.aborted)return{type:"aborted"};let Qe=matchRoutes($t,tr,G);if(Qe)return{type:"success",matches:Qe};let gn=matchRoutesImpl($t,tr,G,!0);if(!gn||Tn.length===gn.length&&Tn.every((sr,rr)=>sr.route.id===gn[rr].route.id))return{type:"success",matches:null};Tn=gn}}function Gn(mn){w={},R=convertRoutesToDataRoutes(mn,C,void 0,w)}function Er(mn,tr,vr=!1){let Ar=R==null;patchRoutesImpl(mn,tr,R||T,w,C,vr),Ar&&(T=[...T],$n({}))}return ye={get basename(){return G},get future(){return z},get state(){return be},get routes(){return T},get window(){return d},initialize:cr,subscribe:Zn,enableScrollRestoration:Br,navigate:Dn,fetch:bn,revalidate:Gt,createHref:mn=>_.history.createHref(mn),encodeLocation:mn=>_.history.encodeLocation(mn),getFetcher:dr,deleteFetcher:Wr,dispose:In,getBlocker:Mi,deleteBlocker:Ci,patchRoutes:Er,_internalFetchControllers:je,_internalSetRoutes:Gn,_internalSetStateDoNotUseOrYouWillBreakYourApp(mn){$n(mn)}},ye}function isSubmissionNavigation(_){return _!=null&&("formData"in _&&_.formData!=null||"body"in _&&_.body!==void 0)}function normalizeTo(_,d,v,A,C,w){let T,R;if(C){T=[];for(let I of d)if(T.push(I),I.route.id===C){R=I;break}}else T=d,R=d[d.length-1];let G=resolveTo(A||".",getResolveToMatches(T),stripBasename(_.pathname,v)||_.pathname,w==="path");if(A==null&&(G.search=_.search,G.hash=_.hash),(A==null||A===""||A===".")&&R){let I=hasNakedIndexQuery(G.search);if(R.route.index&&!I)G.search=G.search?G.search.replace(/^\?/,"?index&"):"?index";else if(!R.route.index&&I){let z=new URLSearchParams(G.search),H=z.getAll("index");z.delete("index"),H.filter(ee=>ee).forEach(ee=>z.append("index",ee));let Y=z.toString();G.search=Y?`?${Y}`:""}}return v!=="/"&&(G.pathname=prependBasename({basename:v,pathname:G.pathname})),createPath(G)}function normalizeNavigateOptions(_,d,v){if(!v||!isSubmissionNavigation(v))return{path:d};if(v.formMethod&&!isValidMethod(v.formMethod))return{path:d,error:getInternalRouterError(405,{method:v.formMethod})};let A=()=>({path:d,error:getInternalRouterError(400,{type:"invalid-body"})}),w=(v.formMethod||"get").toUpperCase(),T=stripHashFromPath(d);if(v.body!==void 0){if(v.formEncType==="text/plain"){if(!isMutationMethod(w))return A();let H=typeof v.body=="string"?v.body:v.body instanceof FormData||v.body instanceof URLSearchParams?Array.from(v.body.entries()).reduce((Y,[ee,ie])=>`${Y}${ee}=${ie}
`,""):String(v.body);return{path:d,submission:{formMethod:w,formAction:T,formEncType:v.formEncType,formData:void 0,json:void 0,text:H}}}else if(v.formEncType==="application/json"){if(!isMutationMethod(w))return A();try{let H=typeof v.body=="string"?JSON.parse(v.body):v.body;return{path:d,submission:{formMethod:w,formAction:T,formEncType:v.formEncType,formData:void 0,json:H,text:void 0}}}catch{return A()}}}invariant(typeof FormData=="function","FormData is not available in this environment");let R,G;if(v.formData)R=convertFormDataToSearchParams(v.formData),G=v.formData;else if(v.body instanceof FormData)R=convertFormDataToSearchParams(v.body),G=v.body;else if(v.body instanceof URLSearchParams)R=v.body,G=convertSearchParamsToFormData(R);else if(v.body==null)R=new URLSearchParams,G=new FormData;else try{R=new URLSearchParams(v.body),G=convertSearchParamsToFormData(R)}catch{return A()}let I={formMethod:w,formAction:T,formEncType:v&&v.formEncType||"application/x-www-form-urlencoded",formData:G,json:void 0,text:void 0};if(isMutationMethod(I.formMethod))return{path:d,submission:I};let z=parsePath(d);return _&&z.search&&hasNakedIndexQuery(z.search)&&R.append("index",""),z.search=`?${R}`,{path:createPath(z),submission:I}}function getMatchesToLoad(_,d,v,A,C,w,T,R,G,I,z,H,Y,ee,ie,oe,se,re,fe,ue){let ge=ue?isErrorResult(ue[1])?ue[1].error:ue[1].data:void 0,ye=C.createURL(w.location),be=C.createURL(G),ve;if(z&&w.errors){let Oe=Object.keys(w.errors)[0];ve=T.findIndex(Ge=>Ge.route.id===Oe)}else if(ue&&isErrorResult(ue[1])){let Oe=ue[0];ve=T.findIndex(Ge=>Ge.route.id===Oe)-1}let Me=ue?ue[1].statusCode:void 0,we=Me&&Me>=400,Be={currentUrl:ye,currentParams:w.matches[0]?.params||{},nextUrl:be,nextParams:T[0].params,...R,actionResult:ge,actionStatus:Me},De=T.map((Oe,Ge)=>{let{route:ze}=Oe,je=null;if(ve!=null&&Ge>ve?je=!1:ze.lazy?je=!0:ze.loader==null?je=!1:z?je=shouldLoadRouteOnHydration(ze,w.loaderData,w.errors):isNewLoader(w.loaderData,w.matches[Ge],Oe)&&(je=!0),je!==null)return getDataStrategyMatch(v,A,_,Oe,I,d,je);let He=we?!1:H||ye.pathname+ye.search===be.pathname+be.search||ye.search!==be.search||isNewRouteInstance(w.matches[Ge],Oe),Xe={...Be,defaultShouldRevalidate:He},$e=shouldRevalidateLoader(Oe,Xe);return getDataStrategyMatch(v,A,_,Oe,I,d,$e,Xe)}),Fe=[];return ie.forEach((Oe,Ge)=>{if(z||!T.some(Qt=>Qt.route.id===Oe.routeId)||ee.has(Ge))return;let ze=w.fetchers.get(Ge),je=ze&&ze.state!=="idle"&&ze.data===void 0,He=matchRoutes(se,Oe.path,re);if(!He){if(fe&&je)return;Fe.push({key:Ge,routeId:Oe.routeId,path:Oe.path,matches:null,match:null,request:null,controller:null});return}if(oe.has(Ge))return;let Xe=getTargetMatch(He,Oe.path),$e=new AbortController,We=createClientSideRequest(C,Oe.path,$e.signal),nt=null;if(Y.has(Ge))Y.delete(Ge),nt=getTargetedDataStrategyMatches(v,A,We,He,Xe,I,d);else if(je)H&&(nt=getTargetedDataStrategyMatches(v,A,We,He,Xe,I,d));else{let Qt={...Be,defaultShouldRevalidate:we?!1:H};shouldRevalidateLoader(Xe,Qt)&&(nt=getTargetedDataStrategyMatches(v,A,We,He,Xe,I,d,Qt))}nt&&Fe.push({key:Ge,routeId:Oe.routeId,path:Oe.path,matches:nt,match:Xe,request:We,controller:$e})}),{dsMatches:De,revalidatingFetchers:Fe}}function shouldLoadRouteOnHydration(_,d,v){if(_.lazy)return!0;if(!_.loader)return!1;let A=d!=null&&_.id in d,C=v!=null&&v[_.id]!==void 0;return!A&&C?!1:typeof _.loader=="function"&&_.loader.hydrate===!0?!0:!A&&!C}function isNewLoader(_,d,v){let A=!d||v.route.id!==d.route.id,C=!_.hasOwnProperty(v.route.id);return A||C}function isNewRouteInstance(_,d){let v=_.route.path;return _.pathname!==d.pathname||v!=null&&v.endsWith("*")&&_.params["*"]!==d.params["*"]}function shouldRevalidateLoader(_,d){if(_.route.shouldRevalidate){let v=_.route.shouldRevalidate(d);if(typeof v=="boolean")return v}return d.defaultShouldRevalidate}function patchRoutesImpl(_,d,v,A,C,w){let T;if(_){let I=A[_];invariant(I,`No route found to patch children into: routeId = ${_}`),I.children||(I.children=[]),T=I.children}else T=v;let R=[],G=[];if(d.forEach(I=>{let z=T.find(H=>isSameRoute(I,H));z?G.push({existingRoute:z,newRoute:I}):R.push(I)}),R.length>0){let I=convertRoutesToDataRoutes(R,C,[_||"_","patch",String(T?.length||"0")],A);T.push(...I)}if(w&&G.length>0)for(let I=0;I<G.length;I++){let{existingRoute:z,newRoute:H}=G[I],Y=z,[ee]=convertRoutesToDataRoutes([H],C,[],{},!0);Object.assign(Y,{element:ee.element?ee.element:Y.element,errorElement:ee.errorElement?ee.errorElement:Y.errorElement,hydrateFallbackElement:ee.hydrateFallbackElement?ee.hydrateFallbackElement:Y.hydrateFallbackElement})}}function isSameRoute(_,d){return"id"in _&&"id"in d&&_.id===d.id?!0:_.index===d.index&&_.path===d.path&&_.caseSensitive===d.caseSensitive?(!_.children||_.children.length===0)&&(!d.children||d.children.length===0)?!0:_.children.every((v,A)=>d.children?.some(C=>isSameRoute(v,C))):!1}var lazyRoutePropertyCache=new WeakMap,loadLazyRouteProperty=({key:_,route:d,manifest:v,mapRouteProperties:A})=>{let C=v[d.id];if(invariant(C,"No route found in manifest"),!C.lazy||typeof C.lazy!="object")return;let w=C.lazy[_];if(!w)return;let T=lazyRoutePropertyCache.get(C);T||(T={},lazyRoutePropertyCache.set(C,T));let R=T[_];if(R)return R;let G=(async()=>{let I=isUnsupportedLazyRouteObjectKey(_),H=C[_]!==void 0&&_!=="hasErrorBoundary";if(I)warning$1(!I,"Route property "+_+" is not a supported lazy route property. This property will be ignored."),T[_]=Promise.resolve();else if(H)warning$1(!1,`Route "${C.id}" has a static property "${_}" defined. The lazy property will be ignored.`);else{let Y=await w();Y!=null&&(Object.assign(C,{[_]:Y}),Object.assign(C,A(C)))}typeof C.lazy=="object"&&(C.lazy[_]=void 0,Object.values(C.lazy).every(Y=>Y===void 0)&&(C.lazy=void 0))})();return T[_]=G,G},lazyRouteFunctionCache=new WeakMap;function loadLazyRoute(_,d,v,A,C){let w=v[_.id];if(invariant(w,"No route found in manifest"),!_.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof _.lazy=="function"){let z=lazyRouteFunctionCache.get(w);if(z)return{lazyRoutePromise:z,lazyHandlerPromise:z};let H=(async()=>{invariant(typeof _.lazy=="function","No lazy route function found");let Y=await _.lazy(),ee={};for(let ie in Y){let oe=Y[ie];if(oe===void 0)continue;let se=isUnsupportedLazyRouteFunctionKey(ie),fe=w[ie]!==void 0&&ie!=="hasErrorBoundary";se?warning$1(!se,"Route property "+ie+" is not a supported property to be returned from a lazy route function. This property will be ignored."):fe?warning$1(!fe,`Route "${w.id}" has a static property "${ie}" defined but its lazy function is also returning a value for this property. The lazy route property "${ie}" will be ignored.`):ee[ie]=oe}Object.assign(w,ee),Object.assign(w,{...A(w),lazy:void 0})})();return lazyRouteFunctionCache.set(w,H),H.catch(()=>{}),{lazyRoutePromise:H,lazyHandlerPromise:H}}let T=Object.keys(_.lazy),R=[],G;for(let z of T){if(C&&C.includes(z))continue;let H=loadLazyRouteProperty({key:z,route:_,manifest:v,mapRouteProperties:A});H&&(R.push(H),z===d&&(G=H))}let I=R.length>0?Promise.all(R).then(()=>{}):void 0;return I?.catch(()=>{}),G?.catch(()=>{}),{lazyRoutePromise:I,lazyHandlerPromise:G}}async function defaultDataStrategy(_){let d=_.matches.filter(C=>C.shouldLoad),v={};return(await Promise.all(d.map(C=>C.resolve()))).forEach((C,w)=>{v[d[w].route.id]=C}),v}async function defaultDataStrategyWithMiddleware(_){if(!_.matches.some(v=>v.route.unstable_middleware))return defaultDataStrategy(_);let d=!1;return runClientMiddlewarePipeline(_,()=>(d=!0,defaultDataStrategy(_)),(v,A)=>clientMiddlewareErrorHandler(v,A,_.matches,d))}function clientMiddlewareErrorHandler(_,d,v,A){return A?{[d]:{type:"error",result:_}}:{[findNearestBoundary(v,v.find(w=>w.route.id===d||w.route.loader)?.route.id||d).route.id]:{type:"error",result:_}}}async function runClientMiddlewarePipeline(_,d,v){let{matches:A,request:C,params:w,context:T}=_,R=A.flatMap(I=>I.route.unstable_middleware?I.route.unstable_middleware.map(z=>[I.route.id,z]):[]),G={};return await callClientRouteMiddleware({request:C,params:w,context:T},R,d,v,G),G}async function callClientRouteMiddleware(_,d,v,A,C={},w=0){let{request:T}=_;if(T.signal.aborted)throw T.signal.reason?T.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${T.method} ${T.url}`);let R=d[w];if(!R){let Y=await v();Object.assign(C,Y);return}let[G,I]=R,z=!1,H=async()=>{if(z)throw new Error("You may only call `next()` once per middleware");z=!0;try{let Y=await callClientRouteMiddleware(_,d,v,A,C,w+1);Object.assign(C,Y)}catch(Y){let ee=await A(Y,G);Object.assign(C,ee)}};try{let Y=await I({request:_.request,params:_.params,context:_.context},H);typeof Y<"u"&&console.warn("client middlewares are not intended to return values, the value will be ignored",Y),z||await H()}catch(Y){let ee=await A(Y,G);Object.assign(C,ee)}}function getDataStrategyMatchLazyPromises(_,d,v,A,C){let w=loadLazyRouteProperty({key:"unstable_middleware",route:A.route,manifest:d,mapRouteProperties:_}),T=loadLazyRoute(A.route,isMutationMethod(v.method)?"action":"loader",d,_,C);return{middleware:w,route:T.lazyRoutePromise,handler:T.lazyHandlerPromise}}function getDataStrategyMatch(_,d,v,A,C,w,T,R=null){let G=!1,I=getDataStrategyMatchLazyPromises(_,d,v,A,C);return{...A,_lazyPromises:I,shouldLoad:T,unstable_shouldRevalidateArgs:R,unstable_shouldCallHandler(z){return G=!0,R?typeof z=="boolean"?shouldRevalidateLoader(A,{...R,defaultShouldRevalidate:z}):shouldRevalidateLoader(A,R):T},resolve(z){return G||T||z&&!isMutationMethod(v.method)&&(A.route.lazy||A.route.loader)?callLoaderOrAction({request:v,match:A,lazyHandlerPromise:I?.handler,lazyRoutePromise:I?.route,handlerOverride:z,scopedContext:w}):Promise.resolve({type:"data",result:void 0})}}}function getTargetedDataStrategyMatches(_,d,v,A,C,w,T,R=null){return A.map(G=>G.route.id!==C.route.id?{...G,shouldLoad:!1,unstable_shouldRevalidateArgs:R,unstable_shouldCallHandler:()=>!1,_lazyPromises:getDataStrategyMatchLazyPromises(_,d,v,G,w),resolve:()=>Promise.resolve({type:"data",result:void 0})}:getDataStrategyMatch(_,d,v,G,w,T,!0,R))}async function callDataStrategyImpl(_,d,v,A,C,w){v.some(I=>I._lazyPromises?.middleware)&&await Promise.all(v.map(I=>I._lazyPromises?.middleware));let T={request:d,params:v[0].params,context:C,matches:v},G=await _({...T,fetcherKey:A,unstable_runClientMiddleware:I=>{let z=T,H=!1;return runClientMiddlewarePipeline(z,()=>(H=!0,I({...z,fetcherKey:A,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}})),(Y,ee)=>clientMiddlewareErrorHandler(Y,ee,v,H))}});try{await Promise.all(v.flatMap(I=>[I._lazyPromises?.handler,I._lazyPromises?.route]))}catch{}return G}async function callLoaderOrAction({request:_,match:d,lazyHandlerPromise:v,lazyRoutePromise:A,handlerOverride:C,scopedContext:w}){let T,R,G=isMutationMethod(_.method),I=G?"action":"loader",z=H=>{let Y,ee=new Promise((se,re)=>Y=re);R=()=>Y(),_.signal.addEventListener("abort",R);let ie=se=>typeof H!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${I}" [routeId: ${d.route.id}]`)):H({request:_,params:d.params,context:w},...se!==void 0?[se]:[]),oe=(async()=>{try{return{type:"data",result:await(C?C(re=>ie(re)):ie())}}catch(se){return{type:"error",result:se}}})();return Promise.race([oe,ee])};try{let H=G?d.route.action:d.route.loader;if(v||A)if(H){let Y,[ee]=await Promise.all([z(H).catch(ie=>{Y=ie}),v,A]);if(Y!==void 0)throw Y;T=ee}else{await v;let Y=G?d.route.action:d.route.loader;if(Y)[T]=await Promise.all([z(Y),A]);else if(I==="action"){let ee=new URL(_.url),ie=ee.pathname+ee.search;throw getInternalRouterError(405,{method:_.method,pathname:ie,routeId:d.route.id})}else return{type:"data",result:void 0}}else if(H)T=await z(H);else{let Y=new URL(_.url),ee=Y.pathname+Y.search;throw getInternalRouterError(404,{pathname:ee})}}catch(H){return{type:"error",result:H}}finally{R&&_.signal.removeEventListener("abort",R)}return T}async function convertDataStrategyResultToDataResult(_){let{result:d,type:v}=_;if(isResponse(d)){let A;try{let C=d.headers.get("Content-Type");C&&/\bapplication\/json\b/.test(C)?d.body==null?A=null:A=await d.json():A=await d.text()}catch(C){return{type:"error",error:C}}return v==="error"?{type:"error",error:new ErrorResponseImpl(d.status,d.statusText,A),statusCode:d.status,headers:d.headers}:{type:"data",data:A,statusCode:d.status,headers:d.headers}}return v==="error"?isDataWithResponseInit(d)?d.data instanceof Error?{type:"error",error:d.data,statusCode:d.init?.status,headers:d.init?.headers?new Headers(d.init.headers):void 0}:{type:"error",error:new ErrorResponseImpl(d.init?.status||500,void 0,d.data),statusCode:isRouteErrorResponse(d)?d.status:void 0,headers:d.init?.headers?new Headers(d.init.headers):void 0}:{type:"error",error:d,statusCode:isRouteErrorResponse(d)?d.status:void 0}:isDataWithResponseInit(d)?{type:"data",data:d.data,statusCode:d.init?.status,headers:d.init?.headers?new Headers(d.init.headers):void 0}:{type:"data",data:d}}function normalizeRelativeRoutingRedirectResponse(_,d,v,A,C){let w=_.headers.get("Location");if(invariant(w,"Redirects returned/thrown from loaders/actions must have a Location header"),!isAbsoluteUrl(w)){let T=A.slice(0,A.findIndex(R=>R.route.id===v)+1);w=normalizeTo(new URL(d.url),T,C,w),_.headers.set("Location",w)}return _}function normalizeRedirectLocation(_,d,v){if(isAbsoluteUrl(_)){let A=_,C=A.startsWith("//")?new URL(d.protocol+A):new URL(A),w=stripBasename(C.pathname,v)!=null;if(C.origin===d.origin&&w)return C.pathname+C.search+C.hash}return _}function createClientSideRequest(_,d,v,A){let C=_.createURL(stripHashFromPath(d)).toString(),w={signal:v};if(A&&isMutationMethod(A.formMethod)){let{formMethod:T,formEncType:R}=A;w.method=T.toUpperCase(),R==="application/json"?(w.headers=new Headers({"Content-Type":R}),w.body=JSON.stringify(A.json)):R==="text/plain"?w.body=A.text:R==="application/x-www-form-urlencoded"&&A.formData?w.body=convertFormDataToSearchParams(A.formData):w.body=A.formData}return new Request(C,w)}function convertFormDataToSearchParams(_){let d=new URLSearchParams;for(let[v,A]of _.entries())d.append(v,typeof A=="string"?A:A.name);return d}function convertSearchParamsToFormData(_){let d=new FormData;for(let[v,A]of _.entries())d.append(v,A);return d}function processRouteLoaderData(_,d,v,A=!1,C=!1){let w={},T=null,R,G=!1,I={},z=v&&isErrorResult(v[1])?v[1].error:void 0;return _.forEach(H=>{if(!(H.route.id in d))return;let Y=H.route.id,ee=d[Y];if(invariant(!isRedirectResult(ee),"Cannot handle redirect results in processLoaderData"),isErrorResult(ee)){let ie=ee.error;if(z!==void 0&&(ie=z,z=void 0),T=T||{},C)T[Y]=ie;else{let oe=findNearestBoundary(_,Y);T[oe.route.id]==null&&(T[oe.route.id]=ie)}A||(w[Y]=ResetLoaderDataSymbol),G||(G=!0,R=isRouteErrorResponse(ee.error)?ee.error.status:500),ee.headers&&(I[Y]=ee.headers)}else w[Y]=ee.data,ee.statusCode&&ee.statusCode!==200&&!G&&(R=ee.statusCode),ee.headers&&(I[Y]=ee.headers)}),z!==void 0&&v&&(T={[v[0]]:z},v[2]&&(w[v[2]]=void 0)),{loaderData:w,errors:T,statusCode:R||200,loaderHeaders:I}}function processLoaderData(_,d,v,A,C,w){let{loaderData:T,errors:R}=processRouteLoaderData(d,v,A);return C.filter(G=>!G.matches||G.matches.some(I=>I.shouldLoad)).forEach(G=>{let{key:I,match:z,controller:H}=G;if(H&&H.signal.aborted)return;let Y=w[I];if(invariant(Y,"Did not find corresponding fetcher result"),isErrorResult(Y)){let ee=findNearestBoundary(_.matches,z?.route.id);R&&R[ee.route.id]||(R={...R,[ee.route.id]:Y.error}),_.fetchers.delete(I)}else if(isRedirectResult(Y))invariant(!1,"Unhandled fetcher revalidation redirect");else{let ee=getDoneFetcher(Y.data);_.fetchers.set(I,ee)}}),{loaderData:T,errors:R}}function mergeLoaderData(_,d,v,A){let C=Object.entries(d).filter(([,w])=>w!==ResetLoaderDataSymbol).reduce((w,[T,R])=>(w[T]=R,w),{});for(let w of v){let T=w.route.id;if(!d.hasOwnProperty(T)&&_.hasOwnProperty(T)&&w.route.loader&&(C[T]=_[T]),A&&A.hasOwnProperty(T))break}return C}function getActionDataForCommit(_){return _?isErrorResult(_[1])?{actionData:{}}:{actionData:{[_[0]]:_[1].data}}:{}}function findNearestBoundary(_,d){return(d?_.slice(0,_.findIndex(A=>A.route.id===d)+1):[..._]).reverse().find(A=>A.route.hasErrorBoundary===!0)||_[0]}function getShortCircuitMatches(_){let d=_.length===1?_[0]:_.find(v=>v.index||!v.path||v.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:d}],route:d}}function getInternalRouterError(_,{pathname:d,routeId:v,method:A,type:C,message:w}={}){let T="Unknown Server Error",R="Unknown @remix-run/router error";return _===400?(T="Bad Request",A&&d&&v?R=`You made a ${A} request to "${d}" but did not provide a \`loader\` for route "${v}", so there is no way to handle the request.`:C==="invalid-body"&&(R="Unable to encode submission body")):_===403?(T="Forbidden",R=`Route "${v}" does not match URL "${d}"`):_===404?(T="Not Found",R=`No route matches URL "${d}"`):_===405&&(T="Method Not Allowed",A&&d&&v?R=`You made a ${A.toUpperCase()} request to "${d}" but did not provide an \`action\` for route "${v}", so there is no way to handle the request.`:A&&(R=`Invalid request method "${A.toUpperCase()}"`)),new ErrorResponseImpl(_||500,T,new Error(R),!0)}function findRedirect(_){let d=Object.entries(_);for(let v=d.length-1;v>=0;v--){let[A,C]=d[v];if(isRedirectResult(C))return{key:A,result:C}}}function stripHashFromPath(_){let d=typeof _=="string"?parsePath(_):_;return createPath({...d,hash:""})}function isHashChangeOnly(_,d){return _.pathname!==d.pathname||_.search!==d.search?!1:_.hash===""?d.hash!=="":_.hash===d.hash?!0:d.hash!==""}function isRedirectDataStrategyResult(_){return isResponse(_.result)&&redirectStatusCodes.has(_.result.status)}function isErrorResult(_){return _.type==="error"}function isRedirectResult(_){return(_&&_.type)==="redirect"}function isDataWithResponseInit(_){return typeof _=="object"&&_!=null&&"type"in _&&"data"in _&&"init"in _&&_.type==="DataWithResponseInit"}function isResponse(_){return _!=null&&typeof _.status=="number"&&typeof _.statusText=="string"&&typeof _.headers=="object"&&typeof _.body<"u"}function isValidMethod(_){return validRequestMethods.has(_.toUpperCase())}function isMutationMethod(_){return validMutationMethods.has(_.toUpperCase())}function hasNakedIndexQuery(_){return new URLSearchParams(_).getAll("index").some(d=>d==="")}function getTargetMatch(_,d){let v=typeof d=="string"?parsePath(d).search:d.search;if(_[_.length-1].route.index&&hasNakedIndexQuery(v||""))return _[_.length-1];let A=getPathContributingMatches(_);return A[A.length-1]}function getSubmissionFromNavigation(_){let{formMethod:d,formAction:v,formEncType:A,text:C,formData:w,json:T}=_;if(!(!d||!v||!A)){if(C!=null)return{formMethod:d,formAction:v,formEncType:A,formData:void 0,json:void 0,text:C};if(w!=null)return{formMethod:d,formAction:v,formEncType:A,formData:w,json:void 0,text:void 0};if(T!==void 0)return{formMethod:d,formAction:v,formEncType:A,formData:void 0,json:T,text:void 0}}}function getLoadingNavigation(_,d){return d?{state:"loading",location:_,formMethod:d.formMethod,formAction:d.formAction,formEncType:d.formEncType,formData:d.formData,json:d.json,text:d.text}:{state:"loading",location:_,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(_,d){return{state:"submitting",location:_,formMethod:d.formMethod,formAction:d.formAction,formEncType:d.formEncType,formData:d.formData,json:d.json,text:d.text}}function getLoadingFetcher(_,d){return _?{state:"loading",formMethod:_.formMethod,formAction:_.formAction,formEncType:_.formEncType,formData:_.formData,json:_.json,text:_.text,data:d}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:d}}function getSubmittingFetcher(_,d){return{state:"submitting",formMethod:_.formMethod,formAction:_.formAction,formEncType:_.formEncType,formData:_.formData,json:_.json,text:_.text,data:d?d.data:void 0}}function getDoneFetcher(_){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:_}}function restoreAppliedTransitions(_,d){try{let v=_.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(v){let A=JSON.parse(v);for(let[C,w]of Object.entries(A||{}))w&&Array.isArray(w)&&d.set(C,new Set(w||[]))}}catch{}}function persistAppliedTransitions(_,d){if(d.size>0){let v={};for(let[A,C]of d)v[A]=[...C];try{_.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(v))}catch(A){warning$1(!1,`Failed to save applied view transitions in sessionStorage (${A}).`)}}}function createDeferred(){let _,d,v=new Promise((A,C)=>{_=async w=>{A(w);try{await v}catch{}},d=async w=>{C(w);try{await v}catch{}}});return{promise:v,resolve:_,reject:d}}var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";reactExports.createContext(!1);var ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(_,{relative:d}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:v,navigator:A}=reactExports.useContext(NavigationContext),{hash:C,pathname:w,search:T}=useResolvedPath(_,{relative:d}),R=w;return v!=="/"&&(R=w==="/"?v:joinPaths([v,w])),A.createHref({pathname:R,search:T,hash:C})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$3(_){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(_)}function useNavigate(){let{isDataRoute:_}=reactExports.useContext(RouteContext);return _?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let _=reactExports.useContext(DataRouterContext),{basename:d,navigator:v}=reactExports.useContext(NavigationContext),{matches:A}=reactExports.useContext(RouteContext),{pathname:C}=useLocation(),w=JSON.stringify(getResolveToMatches(A)),T=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{T.current=!0}),reactExports.useCallback((G,I={})=>{if(warning$1(T.current,navigateEffectWarning),!T.current)return;if(typeof G=="number"){v.go(G);return}let z=resolveTo(G,JSON.parse(w),C,I.relative==="path");_==null&&d!=="/"&&(z.pathname=z.pathname==="/"?d:joinPaths([d,z.pathname])),(I.replace?v.replace:v.push)(z,I.state,I)},[d,v,w,C,_])}reactExports.createContext(null);function useParams(){let{matches:_}=reactExports.useContext(RouteContext),d=_[_.length-1];return d?d.params:{}}function useResolvedPath(_,{relative:d}={}){let{matches:v}=reactExports.useContext(RouteContext),{pathname:A}=useLocation(),C=JSON.stringify(getResolveToMatches(v));return reactExports.useMemo(()=>resolveTo(_,JSON.parse(C),A,d==="path"),[_,C,A,d])}function useRoutesImpl(_,d,v,A){invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:C}=reactExports.useContext(NavigationContext),{matches:w}=reactExports.useContext(RouteContext),T=w[w.length-1],R=T?T.params:{},G=T?T.pathname:"/",I=T?T.pathnameBase:"/",z=T&&T.route;{let re=z&&z.path||"";warningOnce(G,!z||re.endsWith("*")||re.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${G}" (under <Route path="${re}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${re}"> to <Route path="${re==="/"?"*":`${re}/*`}">.`)}let H=useLocation(),Y;Y=H;let ee=Y.pathname||"/",ie=ee;if(I!=="/"){let re=I.replace(/^\//,"").split("/");ie="/"+ee.replace(/^\//,"").split("/").slice(re.length).join("/")}let oe=matchRoutes(_,{pathname:ie});return warning$1(z||oe!=null,`No routes matched location "${Y.pathname}${Y.search}${Y.hash}" `),warning$1(oe==null||oe[oe.length-1].route.element!==void 0||oe[oe.length-1].route.Component!==void 0||oe[oe.length-1].route.lazy!==void 0,`Matched leaf route at location "${Y.pathname}${Y.search}${Y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),_renderMatches(oe&&oe.map(re=>Object.assign({},re,{params:Object.assign({},R,re.params),pathname:joinPaths([I,C.encodeLocation?C.encodeLocation(re.pathname).pathname:re.pathname]),pathnameBase:re.pathnameBase==="/"?I:joinPaths([I,C.encodeLocation?C.encodeLocation(re.pathnameBase).pathname:re.pathnameBase])})),w,v,A)}function DefaultErrorComponent(){let _=useRouteError(),d=isRouteErrorResponse(_)?`${_.status} ${_.statusText}`:_ instanceof Error?_.message:JSON.stringify(_),v=_ instanceof Error?_.stack:null,A="rgba(200,200,200, 0.5)",C={padding:"0.5rem",backgroundColor:A},w={padding:"2px 4px",backgroundColor:A},T=null;return console.error("Error handled by React Router default ErrorBoundary:",_),T=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:w},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:w},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},d),v?reactExports.createElement("pre",{style:C},v):null,T)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(_){super(_),this.state={location:_.location,revalidation:_.revalidation,error:_.error}}static getDerivedStateFromError(_){return{error:_}}static getDerivedStateFromProps(_,d){return d.location!==_.location||d.revalidation!=="idle"&&_.revalidation==="idle"?{error:_.error,location:_.location,revalidation:_.revalidation}:{error:_.error!==void 0?_.error:d.error,location:d.location,revalidation:_.revalidation||d.revalidation}}componentDidCatch(_,d){console.error("React Router caught the following error during render",_,d)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:_,match:d,children:v}){let A=reactExports.useContext(DataRouterContext);return A&&A.static&&A.staticContext&&(d.route.errorElement||d.route.ErrorBoundary)&&(A.staticContext._deepestRenderedBoundaryId=d.route.id),reactExports.createElement(RouteContext.Provider,{value:_},v)}function _renderMatches(_,d=[],v=null,A=null){if(_==null){if(!v)return null;if(v.errors)_=v.matches;else if(d.length===0&&!v.initialized&&v.matches.length>0)_=v.matches;else return null}let C=_,w=v?.errors;if(w!=null){let G=C.findIndex(I=>I.route.id&&w?.[I.route.id]!==void 0);invariant(G>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(w).join(",")}`),C=C.slice(0,Math.min(C.length,G+1))}let T=!1,R=-1;if(v)for(let G=0;G<C.length;G++){let I=C[G];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(R=G),I.route.id){let{loaderData:z,errors:H}=v,Y=I.route.loader&&!z.hasOwnProperty(I.route.id)&&(!H||H[I.route.id]===void 0);if(I.route.lazy||Y){T=!0,R>=0?C=C.slice(0,R+1):C=[C[0]];break}}}return C.reduceRight((G,I,z)=>{let H,Y=!1,ee=null,ie=null;v&&(H=w&&I.route.id?w[I.route.id]:void 0,ee=I.route.errorElement||defaultErrorElement,T&&(R<0&&z===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,ie=null):R===z&&(Y=!0,ie=I.route.hydrateFallbackElement||null)));let oe=d.concat(C.slice(0,z+1)),se=()=>{let re;return H?re=ee:Y?re=ie:I.route.Component?re=reactExports.createElement(I.route.Component,null):I.route.element?re=I.route.element:re=G,reactExports.createElement(RenderedRoute,{match:I,routeContext:{outlet:G,matches:oe,isDataRoute:v!=null},children:re})};return v&&(I.route.ErrorBoundary||I.route.errorElement||z===0)?reactExports.createElement(RenderErrorBoundary,{location:v.location,revalidation:v.revalidation,component:ee,error:H,children:se(),routeContext:{outlet:null,matches:oe,isDataRoute:!0}}):se()},null)}function getDataRouterConsoleError(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(_){let d=reactExports.useContext(DataRouterContext);return invariant(d,getDataRouterConsoleError(_)),d}function useDataRouterState(_){let d=reactExports.useContext(DataRouterStateContext);return invariant(d,getDataRouterConsoleError(_)),d}function useRouteContext(_){let d=reactExports.useContext(RouteContext);return invariant(d,getDataRouterConsoleError(_)),d}function useCurrentRouteId(_){let d=useRouteContext(_),v=d.matches[d.matches.length-1];return invariant(v.route.id,`${_} can only be used on routes that contain a unique "id"`),v.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let _=reactExports.useContext(RouteErrorContext),d=useDataRouterState("useRouteError"),v=useCurrentRouteId("useRouteError");return _!==void 0?_:d.errors?.[v]}function useNavigateStable(){let{router:_}=useDataRouterContext("useNavigate"),d=useCurrentRouteId("useNavigate"),v=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{v.current=!0}),reactExports.useCallback(async(C,w={})=>{warning$1(v.current,navigateEffectWarning),v.current&&(typeof C=="number"?_.navigate(C):await _.navigate(C,{fromRouteId:d,...w}))},[_,d])}var alreadyWarned={};function warningOnce(_,d,v){!d&&!alreadyWarned[_]&&(alreadyWarned[_]=!0,warning$1(!1,v))}var alreadyWarned2={};function warnOnce$1(_,d){!_&&!alreadyWarned2[d]&&(alreadyWarned2[d]=!0,console.warn(d))}function mapRouteProperties(_){let d={hasErrorBoundary:_.hasErrorBoundary||_.ErrorBoundary!=null||_.errorElement!=null};return _.Component&&(_.element&&warning$1(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(d,{element:reactExports.createElement(_.Component),Component:void 0})),_.HydrateFallback&&(_.hydrateFallbackElement&&warning$1(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(d,{hydrateFallbackElement:reactExports.createElement(_.HydrateFallback),HydrateFallback:void 0})),_.ErrorBoundary&&(_.errorElement&&warning$1(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(d,{errorElement:reactExports.createElement(_.ErrorBoundary),ErrorBoundary:void 0})),d}var hydrationRouteProperties=["HydrateFallback","hydrateFallbackElement"],Deferred$1=class{constructor(){this.status="pending",this.promise=new Promise((d,v)=>{this.resolve=A=>{this.status==="pending"&&(this.status="resolved",d(A))},this.reject=A=>{this.status==="pending"&&(this.status="rejected",v(A))}})}};function RouterProvider({router:_,flushSync:d}){let[v,A]=reactExports.useState(_.state),[C,w]=reactExports.useState(),[T,R]=reactExports.useState({isTransitioning:!1}),[G,I]=reactExports.useState(),[z,H]=reactExports.useState(),[Y,ee]=reactExports.useState(),ie=reactExports.useRef(new Map),oe=reactExports.useCallback((ue,{deletedFetchers:ge,flushSync:ye,viewTransitionOpts:be})=>{ue.fetchers.forEach((Me,we)=>{Me.data!==void 0&&ie.current.set(we,Me.data)}),ge.forEach(Me=>ie.current.delete(Me)),warnOnce$1(ye===!1||d!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let ve=_.window!=null&&_.window.document!=null&&typeof _.window.document.startViewTransition=="function";if(warnOnce$1(be==null||ve,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!be||!ve){d&&ye?d(()=>A(ue)):reactExports.startTransition(()=>A(ue));return}if(d&&ye){d(()=>{z&&(G&&G.resolve(),z.skipTransition()),R({isTransitioning:!0,flushSync:!0,currentLocation:be.currentLocation,nextLocation:be.nextLocation})});let Me=_.window.document.startViewTransition(()=>{d(()=>A(ue))});Me.finished.finally(()=>{d(()=>{I(void 0),H(void 0),w(void 0),R({isTransitioning:!1})})}),d(()=>H(Me));return}z?(G&&G.resolve(),z.skipTransition(),ee({state:ue,currentLocation:be.currentLocation,nextLocation:be.nextLocation})):(w(ue),R({isTransitioning:!0,flushSync:!1,currentLocation:be.currentLocation,nextLocation:be.nextLocation}))},[_.window,d,z,G]);reactExports.useLayoutEffect(()=>_.subscribe(oe),[_,oe]),reactExports.useEffect(()=>{T.isTransitioning&&!T.flushSync&&I(new Deferred$1)},[T]),reactExports.useEffect(()=>{if(G&&C&&_.window){let ue=C,ge=G.promise,ye=_.window.document.startViewTransition(async()=>{reactExports.startTransition(()=>A(ue)),await ge});ye.finished.finally(()=>{I(void 0),H(void 0),w(void 0),R({isTransitioning:!1})}),H(ye)}},[C,G,_.window]),reactExports.useEffect(()=>{G&&C&&v.location.key===C.location.key&&G.resolve()},[G,z,v.location,C]),reactExports.useEffect(()=>{!T.isTransitioning&&Y&&(w(Y.state),R({isTransitioning:!0,flushSync:!1,currentLocation:Y.currentLocation,nextLocation:Y.nextLocation}),ee(void 0))},[T.isTransitioning,Y]);let se=reactExports.useMemo(()=>({createHref:_.createHref,encodeLocation:_.encodeLocation,go:ue=>_.navigate(ue),push:(ue,ge,ye)=>_.navigate(ue,{state:ge,preventScrollReset:ye?.preventScrollReset}),replace:(ue,ge,ye)=>_.navigate(ue,{replace:!0,state:ge,preventScrollReset:ye?.preventScrollReset})}),[_]),re=_.basename||"/",fe=reactExports.useMemo(()=>({router:_,navigator:se,static:!1,basename:re}),[_,se,re]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:fe},reactExports.createElement(DataRouterStateContext.Provider,{value:v},reactExports.createElement(FetchersContext.Provider,{value:ie.current},reactExports.createElement(ViewTransitionContext.Provider,{value:T},reactExports.createElement(Router,{basename:re,location:v.location,navigationType:v.historyAction,navigator:se},reactExports.createElement(MemoizedDataRoutes,{routes:_.routes,future:_.future,state:v})))))),null)}var MemoizedDataRoutes=reactExports.memo(DataRoutes);function DataRoutes({routes:_,future:d,state:v}){return useRoutesImpl(_,void 0,v,d)}function Navigate({to:_,replace:d,state:v,relative:A}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:C}=reactExports.useContext(NavigationContext);warning$1(!C,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:w}=reactExports.useContext(RouteContext),{pathname:T}=useLocation(),R=useNavigate(),G=resolveTo(_,getResolveToMatches(w),T,A==="path"),I=JSON.stringify(G);return reactExports.useEffect(()=>{R(JSON.parse(I),{replace:d,state:v,relative:A})},[R,I,A,d,v]),null}function Route(_){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:_="/",children:d=null,location:v,navigationType:A="POP",navigator:C,static:w=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let T=_.replace(/^\/*/,"/"),R=reactExports.useMemo(()=>({basename:T,navigator:C,static:w,future:{}}),[T,C,w]);typeof v=="string"&&(v=parsePath(v));let{pathname:G="/",search:I="",hash:z="",state:H=null,key:Y="default"}=v,ee=reactExports.useMemo(()=>{let ie=stripBasename(G,T);return ie==null?null:{location:{pathname:ie,search:I,hash:z,state:H,key:Y},navigationType:A}},[T,G,I,z,H,Y,A]);return warning$1(ee!=null,`<Router basename="${T}"> is not able to match the URL "${G}${I}${z}" because it does not start with the basename, so the <Router> won't render anything.`),ee==null?null:reactExports.createElement(NavigationContext.Provider,{value:R},reactExports.createElement(LocationContext.Provider,{children:d,value:ee}))}function createRoutesFromChildren(_,d=[]){let v=[];return reactExports.Children.forEach(_,(A,C)=>{if(!reactExports.isValidElement(A))return;let w=[...d,C];if(A.type===reactExports.Fragment){v.push.apply(v,createRoutesFromChildren(A.props.children,w));return}invariant(A.type===Route,`[${typeof A.type=="string"?A.type:A.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!A.props.index||!A.props.children,"An index route cannot have child routes.");let T={id:A.props.id||w.join("-"),caseSensitive:A.props.caseSensitive,element:A.props.element,Component:A.props.Component,index:A.props.index,path:A.props.path,loader:A.props.loader,action:A.props.action,hydrateFallbackElement:A.props.hydrateFallbackElement,HydrateFallback:A.props.HydrateFallback,errorElement:A.props.errorElement,ErrorBoundary:A.props.ErrorBoundary,hasErrorBoundary:A.props.hasErrorBoundary===!0||A.props.ErrorBoundary!=null||A.props.errorElement!=null,shouldRevalidate:A.props.shouldRevalidate,handle:A.props.handle,lazy:A.props.lazy};A.props.children&&(T.children=createRoutesFromChildren(A.props.children,w)),v.push(T)}),v}var createRoutesFromElements=createRoutesFromChildren,defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(_){return _!=null&&typeof _.tagName=="string"}function isButtonElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="button"}function isFormElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="form"}function isInputElement(_){return isHtmlElement(_)&&_.tagName.toLowerCase()==="input"}function isModifiedEvent(_){return!!(_.metaKey||_.altKey||_.ctrlKey||_.shiftKey)}function shouldProcessLinkClick(_,d){return _.button===0&&(!d||d==="_self")&&!isModifiedEvent(_)}function createSearchParams(_=""){return new URLSearchParams(typeof _=="string"||Array.isArray(_)||_ instanceof URLSearchParams?_:Object.keys(_).reduce((d,v)=>{let A=_[v];return d.concat(Array.isArray(A)?A.map(C=>[v,C]):[[v,A]])},[]))}function getSearchParamsForLocation(_,d){let v=createSearchParams(_);return d&&d.forEach((A,C)=>{v.has(C)||d.getAll(C).forEach(w=>{v.append(C,w)})}),v}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(_){return _!=null&&!supportedFormEncTypes.has(_)?(warning$1(!1,`"${_}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):_}function getFormSubmissionInfo(_,d){let v,A,C,w,T;if(isFormElement(_)){let R=_.getAttribute("action");A=R?stripBasename(R,d):null,v=_.getAttribute("method")||defaultMethod,C=getFormEncType(_.getAttribute("enctype"))||defaultEncType,w=new FormData(_)}else if(isButtonElement(_)||isInputElement(_)&&(_.type==="submit"||_.type==="image")){let R=_.form;if(R==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let G=_.getAttribute("formaction")||R.getAttribute("action");if(A=G?stripBasename(G,d):null,v=_.getAttribute("formmethod")||R.getAttribute("method")||defaultMethod,C=getFormEncType(_.getAttribute("formenctype"))||getFormEncType(R.getAttribute("enctype"))||defaultEncType,w=new FormData(R,_),!isFormDataSubmitterSupported()){let{name:I,type:z,value:H}=_;if(z==="image"){let Y=I?`${I}.`:"";w.append(`${Y}x`,"0"),w.append(`${Y}y`,"0")}else I&&w.append(I,H)}}else{if(isHtmlElement(_))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');v=defaultMethod,A=null,C=defaultEncType,T=_}return w&&C==="text/plain"&&(T=w,w=void 0),{action:A,method:v.toLowerCase(),encType:C,formData:w,body:T}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(_,d){if(_===!1||_===null||typeof _>"u")throw new Error(d)}function singleFetchUrl(_,d,v){let A=typeof _=="string"?new URL(_,typeof window>"u"?"server://singlefetch/":window.location.origin):_;return A.pathname==="/"?A.pathname=`_root.${v}`:d&&stripBasename(A.pathname,d)==="/"?A.pathname=`${d.replace(/\/$/,"")}/_root.${v}`:A.pathname=`${A.pathname.replace(/\/$/,"")}.${v}`,A}async function loadRouteModule(_,d){if(_.id in d)return d[_.id];try{let v=await import(_.module);return d[_.id]=v,v}catch(v){return console.error(`Error loading route module \`${_.module}\`, reloading page...`),console.error(v),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(_){return _==null?!1:_.href==null?_.rel==="preload"&&typeof _.imageSrcSet=="string"&&typeof _.imageSizes=="string":typeof _.rel=="string"&&typeof _.href=="string"}async function getKeyedPrefetchLinks(_,d,v){let A=await Promise.all(_.map(async C=>{let w=d.routes[C.route.id];if(w){let T=await loadRouteModule(w,v);return T.links?T.links():[]}return[]}));return dedupeLinkDescriptors(A.flat(1).filter(isHtmlLinkDescriptor).filter(C=>C.rel==="stylesheet"||C.rel==="preload").map(C=>C.rel==="stylesheet"?{...C,rel:"prefetch",as:"style"}:{...C,rel:"prefetch"}))}function getNewMatchesForLinks(_,d,v,A,C,w){let T=(G,I)=>v[I]?G.route.id!==v[I].route.id:!0,R=(G,I)=>v[I].pathname!==G.pathname||v[I].route.path?.endsWith("*")&&v[I].params["*"]!==G.params["*"];return w==="assets"?d.filter((G,I)=>T(G,I)||R(G,I)):w==="data"?d.filter((G,I)=>{let z=A.routes[G.route.id];if(!z||!z.hasLoader)return!1;if(T(G,I)||R(G,I))return!0;if(G.route.shouldRevalidate){let H=G.route.shouldRevalidate({currentUrl:new URL(C.pathname+C.search+C.hash,window.origin),currentParams:v[0]?.params||{},nextUrl:new URL(_,window.origin),nextParams:G.params,defaultShouldRevalidate:!0});if(typeof H=="boolean")return H}return!0}):[]}function getModuleLinkHrefs(_,d,{includeHydrateFallback:v}={}){return dedupeHrefs(_.map(A=>{let C=d.routes[A.route.id];if(!C)return[];let w=[C.module];return C.clientActionModule&&(w=w.concat(C.clientActionModule)),C.clientLoaderModule&&(w=w.concat(C.clientLoaderModule)),v&&C.hydrateFallbackModule&&(w=w.concat(C.hydrateFallbackModule)),C.imports&&(w=w.concat(C.imports)),w}).flat(1))}function dedupeHrefs(_){return[...new Set(_)]}function sortKeys(_){let d={},v=Object.keys(_).sort();for(let A of v)d[A]=_[A];return d}function dedupeLinkDescriptors(_,d){let v=new Set;return new Set(d),_.reduce((A,C)=>{let w=JSON.stringify(sortKeys(C));return v.has(w)||(v.add(w),A.push({key:w,link:C})),A},[])}function useDataRouterContext2(){let _=reactExports.useContext(DataRouterContext);return invariant2(_,"You must render this element inside a <DataRouterContext.Provider> element"),_}function useDataRouterStateContext(){let _=reactExports.useContext(DataRouterStateContext);return invariant2(_,"You must render this element inside a <DataRouterStateContext.Provider> element"),_}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let _=reactExports.useContext(FrameworkContext);return invariant2(_,"You must render this element inside a <HydratedRouter> element"),_}function usePrefetchBehavior(_,d){let v=reactExports.useContext(FrameworkContext),[A,C]=reactExports.useState(!1),[w,T]=reactExports.useState(!1),{onFocus:R,onBlur:G,onMouseEnter:I,onMouseLeave:z,onTouchStart:H}=d,Y=reactExports.useRef(null);reactExports.useEffect(()=>{if(_==="render"&&T(!0),_==="viewport"){let oe=re=>{re.forEach(fe=>{T(fe.isIntersecting)})},se=new IntersectionObserver(oe,{threshold:.5});return Y.current&&se.observe(Y.current),()=>{se.disconnect()}}},[_]),reactExports.useEffect(()=>{if(A){let oe=setTimeout(()=>{T(!0)},100);return()=>{clearTimeout(oe)}}},[A]);let ee=()=>{C(!0)},ie=()=>{C(!1),T(!1)};return v?_!=="intent"?[w,Y,{}]:[w,Y,{onFocus:composeEventHandlers(R,ee),onBlur:composeEventHandlers(G,ie),onMouseEnter:composeEventHandlers(I,ee),onMouseLeave:composeEventHandlers(z,ie),onTouchStart:composeEventHandlers(H,ee)}]:[!1,Y,{}]}function composeEventHandlers(_,d){return v=>{_&&_(v),v.defaultPrevented||d(v)}}function PrefetchPageLinks({page:_,...d}){let{router:v}=useDataRouterContext2(),A=reactExports.useMemo(()=>matchRoutes(v.routes,_,v.basename),[v.routes,_,v.basename]);return A?reactExports.createElement(PrefetchPageLinksImpl,{page:_,matches:A,...d}):null}function useKeyedPrefetchLinks(_){let{manifest:d,routeModules:v}=useFrameworkContext(),[A,C]=reactExports.useState([]);return reactExports.useEffect(()=>{let w=!1;return getKeyedPrefetchLinks(_,d,v).then(T=>{w||C(T)}),()=>{w=!0}},[_,d,v]),A}function PrefetchPageLinksImpl({page:_,matches:d,...v}){let A=useLocation(),{manifest:C,routeModules:w}=useFrameworkContext(),{basename:T}=useDataRouterContext2(),{loaderData:R,matches:G}=useDataRouterStateContext(),I=reactExports.useMemo(()=>getNewMatchesForLinks(_,d,G,C,A,"data"),[_,d,G,C,A]),z=reactExports.useMemo(()=>getNewMatchesForLinks(_,d,G,C,A,"assets"),[_,d,G,C,A]),H=reactExports.useMemo(()=>{if(_===A.pathname+A.search+A.hash)return[];let ie=new Set,oe=!1;if(d.forEach(re=>{let fe=C.routes[re.route.id];!fe||!fe.hasLoader||(!I.some(ue=>ue.route.id===re.route.id)&&re.route.id in R&&w[re.route.id]?.shouldRevalidate||fe.hasClientLoader?oe=!0:ie.add(re.route.id))}),ie.size===0)return[];let se=singleFetchUrl(_,T,"data");return oe&&ie.size>0&&se.searchParams.set("_routes",d.filter(re=>ie.has(re.route.id)).map(re=>re.route.id).join(",")),[se.pathname+se.search]},[T,R,A,C,I,d,_,w]),Y=reactExports.useMemo(()=>getModuleLinkHrefs(z,C),[z,C]),ee=useKeyedPrefetchLinks(z);return reactExports.createElement(reactExports.Fragment,null,H.map(ie=>reactExports.createElement("link",{key:ie,rel:"prefetch",as:"fetch",href:ie,...v})),Y.map(ie=>reactExports.createElement("link",{key:ie,rel:"modulepreload",href:ie,...v})),ee.map(({key:ie,link:oe})=>reactExports.createElement("link",{key:ie,nonce:v.nonce,...oe})))}function mergeRefs(..._){return d=>{_.forEach(v=>{typeof v=="function"?v(d):v!=null&&(v.current=d)})}}var isBrowser$3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser$3&&(window.__reactRouterVersion="7.8.0")}catch{}function createBrowserRouter(_,d){return createRouter$1({basename:d?.basename,unstable_getContext:d?.unstable_getContext,future:d?.future,history:createBrowserHistory({window:d?.window}),hydrationData:parseHydrationData(),routes:_,mapRouteProperties,hydrationRouteProperties,dataStrategy:d?.dataStrategy,patchRoutesOnNavigation:d?.patchRoutesOnNavigation,window:d?.window}).initialize()}function parseHydrationData(){let _=window?.__staticRouterHydrationData;return _&&_.errors&&(_={..._,errors:deserializeErrors(_.errors)}),_}function deserializeErrors(_){if(!_)return null;let d=Object.entries(_),v={};for(let[A,C]of d)if(C&&C.__type==="RouteErrorResponse")v[A]=new ErrorResponseImpl(C.status,C.statusText,C.data,C.internal===!0);else if(C&&C.__type==="Error"){if(C.__subType){let w=window[C.__subType];if(typeof w=="function")try{let T=new w(C.message);T.stack="",v[A]=T}catch{}}if(v[A]==null){let w=new Error(C.message);w.stack="",v[A]=w}}else v[A]=C;return v}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link$1=reactExports.forwardRef(function({onClick:d,discover:v="render",prefetch:A="none",relative:C,reloadDocument:w,replace:T,state:R,target:G,to:I,preventScrollReset:z,viewTransition:H,...Y},ee){let{basename:ie}=reactExports.useContext(NavigationContext),oe=typeof I=="string"&&ABSOLUTE_URL_REGEX2.test(I),se,re=!1;if(typeof I=="string"&&oe&&(se=I,isBrowser$3))try{let we=new URL(window.location.href),Be=I.startsWith("//")?new URL(we.protocol+I):new URL(I),De=stripBasename(Be.pathname,ie);Be.origin===we.origin&&De!=null?I=De+Be.search+Be.hash:re=!0}catch{warning$1(!1,`<Link to="${I}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let fe=useHref(I,{relative:C}),[ue,ge,ye]=usePrefetchBehavior(A,Y),be=useLinkClickHandler(I,{replace:T,state:R,target:G,preventScrollReset:z,relative:C,viewTransition:H});function ve(we){d&&d(we),we.defaultPrevented||be(we)}let Me=reactExports.createElement("a",{...Y,...ye,href:se||fe,onClick:re||w?d:ve,ref:mergeRefs(ee,ge),target:G,"data-discover":!oe&&v==="render"?"true":void 0});return ue&&!oe?reactExports.createElement(reactExports.Fragment,null,Me,reactExports.createElement(PrefetchPageLinks,{page:fe})):Me});Link$1.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":d="page",caseSensitive:v=!1,className:A="",end:C=!1,style:w,to:T,viewTransition:R,children:G,...I},z){let H=useResolvedPath(T,{relative:I.relative}),Y=useLocation(),ee=reactExports.useContext(DataRouterStateContext),{navigator:ie,basename:oe}=reactExports.useContext(NavigationContext),se=ee!=null&&useViewTransitionState(H)&&R===!0,re=ie.encodeLocation?ie.encodeLocation(H).pathname:H.pathname,fe=Y.pathname,ue=ee&&ee.navigation&&ee.navigation.location?ee.navigation.location.pathname:null;v||(fe=fe.toLowerCase(),ue=ue?ue.toLowerCase():null,re=re.toLowerCase()),ue&&oe&&(ue=stripBasename(ue,oe)||ue);const ge=re!=="/"&&re.endsWith("/")?re.length-1:re.length;let ye=fe===re||!C&&fe.startsWith(re)&&fe.charAt(ge)==="/",be=ue!=null&&(ue===re||!C&&ue.startsWith(re)&&ue.charAt(re.length)==="/"),ve={isActive:ye,isPending:be,isTransitioning:se},Me=ye?d:void 0,we;typeof A=="function"?we=A(ve):we=[A,ye?"active":null,be?"pending":null,se?"transitioning":null].filter(Boolean).join(" ");let Be=typeof w=="function"?w(ve):w;return reactExports.createElement(Link$1,{...I,"aria-current":Me,className:we,ref:z,style:Be,to:T,viewTransition:R},typeof G=="function"?G(ve):G)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:_="render",fetcherKey:d,navigate:v,reloadDocument:A,replace:C,state:w,method:T=defaultMethod,action:R,onSubmit:G,relative:I,preventScrollReset:z,viewTransition:H,...Y},ee)=>{let ie=useSubmit(),oe=useFormAction(R,{relative:I}),se=T.toLowerCase()==="get"?"get":"post",re=typeof R=="string"&&ABSOLUTE_URL_REGEX2.test(R),fe=ue=>{if(G&&G(ue),ue.defaultPrevented)return;ue.preventDefault();let ge=ue.nativeEvent.submitter,ye=ge?.getAttribute("formmethod")||T;ie(ge||ue.currentTarget,{fetcherKey:d,method:ye,navigate:v,replace:C,state:w,relative:I,preventScrollReset:z,viewTransition:H})};return reactExports.createElement("form",{ref:ee,method:se,action:oe,onSubmit:A?G:fe,...Y,"data-discover":!re&&_==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(_){return`${_} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(_){let d=reactExports.useContext(DataRouterContext);return invariant(d,getDataRouterConsoleError2(_)),d}function useLinkClickHandler(_,{target:d,replace:v,state:A,preventScrollReset:C,relative:w,viewTransition:T}={}){let R=useNavigate(),G=useLocation(),I=useResolvedPath(_,{relative:w});return reactExports.useCallback(z=>{if(shouldProcessLinkClick(z,d)){z.preventDefault();let H=v!==void 0?v:createPath(G)===createPath(I);R(_,{replace:H,state:A,preventScrollReset:C,relative:w,viewTransition:T})}},[G,R,I,v,A,d,_,C,w,T])}function useSearchParams(_){warning$1(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let d=reactExports.useRef(createSearchParams(_)),v=reactExports.useRef(!1),A=useLocation(),C=reactExports.useMemo(()=>getSearchParamsForLocation(A.search,v.current?null:d.current),[A.search]),w=useNavigate(),T=reactExports.useCallback((R,G)=>{const I=createSearchParams(typeof R=="function"?R(new URLSearchParams(C)):R);v.current=!0,w("?"+I,G)},[w,C]);return[C,T]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:_}=useDataRouterContext3("useSubmit"),{basename:d}=reactExports.useContext(NavigationContext),v=useRouteId();return reactExports.useCallback(async(A,C={})=>{let{action:w,method:T,encType:R,formData:G,body:I}=getFormSubmissionInfo(A,d);if(C.navigate===!1){let z=C.fetcherKey||getUniqueFetcherId();await _.fetch(z,v,C.action||w,{preventScrollReset:C.preventScrollReset,formData:G,body:I,formMethod:C.method||T,formEncType:C.encType||R,flushSync:C.flushSync})}else await _.navigate(C.action||w,{preventScrollReset:C.preventScrollReset,formData:G,body:I,formMethod:C.method||T,formEncType:C.encType||R,replace:C.replace,state:C.state,fromRouteId:v,flushSync:C.flushSync,viewTransition:C.viewTransition})},[_,d,v])}function useFormAction(_,{relative:d}={}){let{basename:v}=reactExports.useContext(NavigationContext),A=reactExports.useContext(RouteContext);invariant(A,"useFormAction must be used inside a RouteContext");let[C]=A.matches.slice(-1),w={...useResolvedPath(_||".",{relative:d})},T=useLocation();if(_==null){w.search=T.search;let R=new URLSearchParams(w.search),G=R.getAll("index");if(G.some(z=>z==="")){R.delete("index"),G.filter(H=>H).forEach(H=>R.append("index",H));let z=R.toString();w.search=z?`?${z}`:""}}return(!_||_===".")&&C.route.index&&(w.search=w.search?w.search.replace(/^\?/,"?index&"):"?index"),v!=="/"&&(w.pathname=w.pathname==="/"?v:joinPaths([v,w.pathname])),createPath(w)}function useViewTransitionState(_,{relative:d}={}){let v=reactExports.useContext(ViewTransitionContext);invariant(v!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:A}=useDataRouterContext3("useViewTransitionState"),C=useResolvedPath(_,{relative:d});if(!v.isTransitioning)return!1;let w=stripBasename(v.currentLocation.pathname,A)||v.currentLocation.pathname,T=stripBasename(v.nextLocation.pathname,A)||v.nextLocation.pathname;return matchPath(C.pathname,T)!=null||matchPath(C.pathname,w)!=null}var reactDomExports=requireReactDom();function RouterProvider2(_){return reactExports.createElement(RouterProvider,{flushSync:reactDomExports.flushSync,..._})}const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(_){const d=[];let v=0;for(let A=0;A<_.length;A++){let C=_.charCodeAt(A);C<128?d[v++]=C:C<2048?(d[v++]=C>>6|192,d[v++]=C&63|128):(C&64512)===55296&&A+1<_.length&&(_.charCodeAt(A+1)&64512)===56320?(C=65536+((C&1023)<<10)+(_.charCodeAt(++A)&1023),d[v++]=C>>18|240,d[v++]=C>>12&63|128,d[v++]=C>>6&63|128,d[v++]=C&63|128):(d[v++]=C>>12|224,d[v++]=C>>6&63|128,d[v++]=C&63|128)}return d},byteArrayToString=function(_){const d=[];let v=0,A=0;for(;v<_.length;){const C=_[v++];if(C<128)d[A++]=String.fromCharCode(C);else if(C>191&&C<224){const w=_[v++];d[A++]=String.fromCharCode((C&31)<<6|w&63)}else if(C>239&&C<365){const w=_[v++],T=_[v++],R=_[v++],G=((C&7)<<18|(w&63)<<12|(T&63)<<6|R&63)-65536;d[A++]=String.fromCharCode(55296+(G>>10)),d[A++]=String.fromCharCode(56320+(G&1023))}else{const w=_[v++],T=_[v++];d[A++]=String.fromCharCode((C&15)<<12|(w&63)<<6|T&63)}}return d.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(_,d){if(!Array.isArray(_))throw Error("encodeByteArray takes an array as a parameter");this.init_();const v=d?this.byteToCharMapWebSafe_:this.byteToCharMap_,A=[];for(let C=0;C<_.length;C+=3){const w=_[C],T=C+1<_.length,R=T?_[C+1]:0,G=C+2<_.length,I=G?_[C+2]:0,z=w>>2,H=(w&3)<<4|R>>4;let Y=(R&15)<<2|I>>6,ee=I&63;G||(ee=64,T||(Y=64)),A.push(v[z],v[H],v[Y],v[ee])}return A.join("")},encodeString(_,d){return this.HAS_NATIVE_SUPPORT&&!d?btoa(_):this.encodeByteArray(stringToByteArray$1(_),d)},decodeString(_,d){return this.HAS_NATIVE_SUPPORT&&!d?atob(_):byteArrayToString(this.decodeStringToByteArray(_,d))},decodeStringToByteArray(_,d){this.init_();const v=d?this.charToByteMapWebSafe_:this.charToByteMap_,A=[];for(let C=0;C<_.length;){const w=v[_.charAt(C++)],R=C<_.length?v[_.charAt(C)]:0;++C;const I=C<_.length?v[_.charAt(C)]:64;++C;const H=C<_.length?v[_.charAt(C)]:64;if(++C,w==null||R==null||I==null||H==null)throw new DecodeBase64StringError;const Y=w<<2|R>>4;if(A.push(Y),I!==64){const ee=R<<4&240|I>>2;if(A.push(ee),H!==64){const ie=I<<6&192|H;A.push(ie)}}}return A},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let _=0;_<this.ENCODED_VALS.length;_++)this.byteToCharMap_[_]=this.ENCODED_VALS.charAt(_),this.charToByteMap_[this.byteToCharMap_[_]]=_,this.byteToCharMapWebSafe_[_]=this.ENCODED_VALS_WEBSAFE.charAt(_),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_]]=_,_>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_)]=_,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_)]=_)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(_){const d=stringToByteArray$1(_);return base64.encodeByteArray(d,!0)},base64urlEncodeWithoutPadding=function(_){return base64Encode(_).replace(/\./g,"")},base64Decode=function(_){try{return base64.decodeString(_,!0)}catch(d){console.error("base64Decode failed: ",d)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const _=define_process_env_default.__FIREBASE_DEFAULTS__;if(_)return JSON.parse(_)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let _;try{_=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const d=_&&base64Decode(_[1]);return d&&JSON.parse(d)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(_){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${_}`);return}},getDefaultEmulatorHost=_=>getDefaults()?.emulatorHosts?.[_],getDefaultEmulatorHostnameAndPort=_=>{const d=getDefaultEmulatorHost(_);if(!d)return;const v=d.lastIndexOf(":");if(v<=0||v+1===d.length)throw new Error(`Invalid host ${d} with no separate hostname and port!`);const A=parseInt(d.substring(v+1),10);return d[0]==="["?[d.substring(1,v-1),A]:[d.substring(0,v),A]},getDefaultAppConfig=()=>getDefaults()?.config,getExperimentalSetting=_=>getDefaults()?.[`_${_}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((d,v)=>{this.resolve=d,this.reject=v})}wrapCallback(d){return(v,A)=>{v?this.reject(v):this.resolve(A),typeof d=="function"&&(this.promise.catch(()=>{}),d.length===1?d(v):d(v,A))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(_){try{return(_.startsWith("http://")||_.startsWith("https://")?new URL(_).hostname:_).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(_){return(await fetch(_,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(_,d){if(_.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const v={alg:"none",type:"JWT"},A=d||"demo-project",C=_.iat||0,w=_.sub||_.user_id;if(!w)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const T={iss:`https://securetoken.google.com/${A}`,aud:A,iat:C,exp:C+3600,auth_time:C,sub:w,user_id:w,firebase:{sign_in_provider:"custom",identities:{}},..._};return[base64urlEncodeWithoutPadding(JSON.stringify(v)),base64urlEncodeWithoutPadding(JSON.stringify(T)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const _={prod:[],emulator:[]};for(const d of Object.keys(emulatorStatus))emulatorStatus[d]?_.emulator.push(d):_.prod.push(d);return _}function getOrCreateEl(_){let d=document.getElementById(_),v=!1;return d||(d=document.createElement("div"),d.setAttribute("id",_),v=!0),{created:v,element:d}}let previouslyDismissed=!1;function updateEmulatorBanner(_,d){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[_]===d||emulatorStatus[_]||previouslyDismissed)return;emulatorStatus[_]=d;function v(Y){return`__firebase__banner__${Y}`}const A="__firebase__banner",w=getEmulatorSummary().prod.length>0;function T(){const Y=document.getElementById(A);Y&&Y.remove()}function R(Y){Y.style.display="flex",Y.style.background="#7faaf0",Y.style.position="fixed",Y.style.bottom="5px",Y.style.left="5px",Y.style.padding=".5em",Y.style.borderRadius="5px",Y.style.alignItems="center"}function G(Y,ee){Y.setAttribute("width","24"),Y.setAttribute("id",ee),Y.setAttribute("height","24"),Y.setAttribute("viewBox","0 0 24 24"),Y.setAttribute("fill","none"),Y.style.marginLeft="-6px"}function I(){const Y=document.createElement("span");return Y.style.cursor="pointer",Y.style.marginLeft="16px",Y.style.fontSize="24px",Y.innerHTML=" &times;",Y.onclick=()=>{previouslyDismissed=!0,T()},Y}function z(Y,ee){Y.setAttribute("id",ee),Y.innerText="Learn more",Y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Y.setAttribute("target","__blank"),Y.style.paddingLeft="5px",Y.style.textDecoration="underline"}function H(){const Y=getOrCreateEl(A),ee=v("text"),ie=document.getElementById(ee)||document.createElement("span"),oe=v("learnmore"),se=document.getElementById(oe)||document.createElement("a"),re=v("preprendIcon"),fe=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Y.created){const ue=Y.element;R(ue),z(se,oe);const ge=I();G(fe,re),ue.append(fe,ie,se,ge),document.body.appendChild(ue)}w?(ie.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ie.innerText="Preview backend running in this workspace."),ie.setAttribute("id",ee)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",H):H()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode$2(){const _=getDefaults()?.forceEnvironment;if(_==="node")return!0;if(_==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const _=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof _=="object"&&_.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const _=getUA();return _.indexOf("MSIE ")>=0||_.indexOf("Trident/")>=0}function isSafari(){return!isNode$2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((_,d)=>{try{let v=!0;const A="validate-browser-context-for-indexeddb-analytics-module",C=self.indexedDB.open(A);C.onsuccess=()=>{C.result.close(),v||self.indexedDB.deleteDatabase(A),_(!0)},C.onupgradeneeded=()=>{v=!1},C.onerror=()=>{d(C.error?.message||"")}}catch(v){d(v)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(d,v,A){super(v),this.code=d,this.customData=A,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(d,v,A){this.service=d,this.serviceName=v,this.errors=A}create(d,...v){const A=v[0]||{},C=`${this.service}/${d}`,w=this.errors[d],T=w?replaceTemplate(w,A):"Error",R=`${this.serviceName}: ${T} (${C}).`;return new FirebaseError(C,R,A)}}function replaceTemplate(_,d){return _.replace(PATTERN,(v,A)=>{const C=d[A];return C!=null?String(C):`<${A}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(_){for(const d in _)if(Object.prototype.hasOwnProperty.call(_,d))return!1;return!0}function deepEqual(_,d){if(_===d)return!0;const v=Object.keys(_),A=Object.keys(d);for(const C of v){if(!A.includes(C))return!1;const w=_[C],T=d[C];if(isObject$4(w)&&isObject$4(T)){if(!deepEqual(w,T))return!1}else if(w!==T)return!1}for(const C of A)if(!v.includes(C))return!1;return!0}function isObject$4(_){return _!==null&&typeof _=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(_){const d=[];for(const[v,A]of Object.entries(_))Array.isArray(A)?A.forEach(C=>{d.push(encodeURIComponent(v)+"="+encodeURIComponent(C))}):d.push(encodeURIComponent(v)+"="+encodeURIComponent(A));return d.length?"&"+d.join("&"):""}function createSubscribe(_,d){const v=new ObserverProxy(_,d);return v.subscribe.bind(v)}class ObserverProxy{constructor(d,v){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=v,this.task.then(()=>{d(this)}).catch(A=>{this.error(A)})}next(d){this.forEachObserver(v=>{v.next(d)})}error(d){this.forEachObserver(v=>{v.error(d)}),this.close(d)}complete(){this.forEachObserver(d=>{d.complete()}),this.close()}subscribe(d,v,A){let C;if(d===void 0&&v===void 0&&A===void 0)throw new Error("Missing Observer.");implementsAnyMethods(d,["next","error","complete"])?C=d:C={next:d,error:v,complete:A},C.next===void 0&&(C.next=noop$2),C.error===void 0&&(C.error=noop$2),C.complete===void 0&&(C.complete=noop$2);const w=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?C.error(this.finalError):C.complete()}catch{}}),this.observers.push(C),w}unsubscribeOne(d){this.observers===void 0||this.observers[d]===void 0||(delete this.observers[d],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(d){if(!this.finalized)for(let v=0;v<this.observers.length;v++)this.sendOne(v,d)}sendOne(d,v){this.task.then(()=>{if(this.observers!==void 0&&this.observers[d]!==void 0)try{v(this.observers[d])}catch(A){typeof console<"u"&&console.error&&console.error(A)}})}close(d){this.finalized||(this.finalized=!0,d!==void 0&&(this.finalError=d),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(_,d){if(typeof _!="object"||_===null)return!1;for(const v of d)if(v in _&&typeof _[v]=="function")return!0;return!1}function noop$2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(_){return _&&_._delegate?_._delegate:_}class Component{constructor(d,v,A){this.name=d,this.instanceFactory=v,this.type=A,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(d){return this.instantiationMode=d,this}setMultipleInstances(d){return this.multipleInstances=d,this}setServiceProps(d){return this.serviceProps=d,this}setInstanceCreatedCallback(d){return this.onInstanceCreated=d,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider$1=class{constructor(d,v){this.name=d,this.container=v,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(d){const v=this.normalizeInstanceIdentifier(d);if(!this.instancesDeferred.has(v)){const A=new Deferred;if(this.instancesDeferred.set(v,A),this.isInitialized(v)||this.shouldAutoInitialize())try{const C=this.getOrInitializeService({instanceIdentifier:v});C&&A.resolve(C)}catch{}}return this.instancesDeferred.get(v).promise}getImmediate(d){const v=this.normalizeInstanceIdentifier(d?.identifier),A=d?.optional??!1;if(this.isInitialized(v)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:v})}catch(C){if(A)return null;throw C}else{if(A)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(d){if(d.name!==this.name)throw Error(`Mismatching Component ${d.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=d,!!this.shouldAutoInitialize()){if(isComponentEager(d))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[v,A]of this.instancesDeferred.entries()){const C=this.normalizeInstanceIdentifier(v);try{const w=this.getOrInitializeService({instanceIdentifier:C});A.resolve(w)}catch{}}}}clearInstance(d=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(d),this.instancesOptions.delete(d),this.instances.delete(d)}async delete(){const d=Array.from(this.instances.values());await Promise.all([...d.filter(v=>"INTERNAL"in v).map(v=>v.INTERNAL.delete()),...d.filter(v=>"_delete"in v).map(v=>v._delete())])}isComponentSet(){return this.component!=null}isInitialized(d=DEFAULT_ENTRY_NAME$1){return this.instances.has(d)}getOptions(d=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(d)||{}}initialize(d={}){const{options:v={}}=d,A=this.normalizeInstanceIdentifier(d.instanceIdentifier);if(this.isInitialized(A))throw Error(`${this.name}(${A}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const C=this.getOrInitializeService({instanceIdentifier:A,options:v});for(const[w,T]of this.instancesDeferred.entries()){const R=this.normalizeInstanceIdentifier(w);A===R&&T.resolve(C)}return C}onInit(d,v){const A=this.normalizeInstanceIdentifier(v),C=this.onInitCallbacks.get(A)??new Set;C.add(d),this.onInitCallbacks.set(A,C);const w=this.instances.get(A);return w&&d(w,A),()=>{C.delete(d)}}invokeOnInitCallbacks(d,v){const A=this.onInitCallbacks.get(v);if(A)for(const C of A)try{C(d,v)}catch{}}getOrInitializeService({instanceIdentifier:d,options:v={}}){let A=this.instances.get(d);if(!A&&this.component&&(A=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(d),options:v}),this.instances.set(d,A),this.instancesOptions.set(d,v),this.invokeOnInitCallbacks(A,d),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,d,A)}catch{}return A||null}normalizeInstanceIdentifier(d=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?d:DEFAULT_ENTRY_NAME$1:d}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(_){return _===DEFAULT_ENTRY_NAME$1?void 0:_}function isComponentEager(_){return _.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(d){this.name=d,this.providers=new Map}addComponent(d){const v=this.getProvider(d.name);if(v.isComponentSet())throw new Error(`Component ${d.name} has already been registered with ${this.name}`);v.setComponent(d)}addOrOverwriteComponent(d){this.getProvider(d.name).isComponentSet()&&this.providers.delete(d.name),this.addComponent(d)}getProvider(d){if(this.providers.has(d))return this.providers.get(d);const v=new Provider$1(d,this);return this.providers.set(d,v),v}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(_){_[_.DEBUG=0]="DEBUG",_[_.VERBOSE=1]="VERBOSE",_[_.INFO=2]="INFO",_[_.WARN=3]="WARN",_[_.ERROR=4]="ERROR",_[_.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(_,d,...v)=>{if(d<_.logLevel)return;const A=new Date().toISOString(),C=ConsoleMethod[d];if(C)console[C](`[${A}]  ${_.name}:`,...v);else throw new Error(`Attempted to log a message with an invalid logType (value: ${d})`)};class Logger{constructor(d){this.name=d,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(d){if(!(d in LogLevel))throw new TypeError(`Invalid value "${d}" assigned to \`logLevel\``);this._logLevel=d}setLogLevel(d){this._logLevel=typeof d=="string"?levelStringToEnum[d]:d}get logHandler(){return this._logHandler}set logHandler(d){if(typeof d!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=d}get userLogHandler(){return this._userLogHandler}set userLogHandler(d){this._userLogHandler=d}debug(...d){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...d),this._logHandler(this,LogLevel.DEBUG,...d)}log(...d){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...d),this._logHandler(this,LogLevel.VERBOSE,...d)}info(...d){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...d),this._logHandler(this,LogLevel.INFO,...d)}warn(...d){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...d),this._logHandler(this,LogLevel.WARN,...d)}error(...d){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...d),this._logHandler(this,LogLevel.ERROR,...d)}}const instanceOfAny=(_,d)=>d.some(v=>_ instanceof v);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(_){const d=new Promise((v,A)=>{const C=()=>{_.removeEventListener("success",w),_.removeEventListener("error",T)},w=()=>{v(wrap(_.result)),C()},T=()=>{A(_.error),C()};_.addEventListener("success",w),_.addEventListener("error",T)});return d.then(v=>{v instanceof IDBCursor&&cursorRequestMap.set(v,_)}).catch(()=>{}),reverseTransformCache.set(d,_),d}function cacheDonePromiseForTransaction(_){if(transactionDoneMap.has(_))return;const d=new Promise((v,A)=>{const C=()=>{_.removeEventListener("complete",w),_.removeEventListener("error",T),_.removeEventListener("abort",T)},w=()=>{v(),C()},T=()=>{A(_.error||new DOMException("AbortError","AbortError")),C()};_.addEventListener("complete",w),_.addEventListener("error",T),_.addEventListener("abort",T)});transactionDoneMap.set(_,d)}let idbProxyTraps={get(_,d,v){if(_ instanceof IDBTransaction){if(d==="done")return transactionDoneMap.get(_);if(d==="objectStoreNames")return _.objectStoreNames||transactionStoreNamesMap.get(_);if(d==="store")return v.objectStoreNames[1]?void 0:v.objectStore(v.objectStoreNames[0])}return wrap(_[d])},set(_,d,v){return _[d]=v,!0},has(_,d){return _ instanceof IDBTransaction&&(d==="done"||d==="store")?!0:d in _}};function replaceTraps(_){idbProxyTraps=_(idbProxyTraps)}function wrapFunction(_){return _===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(d,...v){const A=_.call(unwrap$1(this),d,...v);return transactionStoreNamesMap.set(A,d.sort?d.sort():[d]),wrap(A)}:getCursorAdvanceMethods().includes(_)?function(...d){return _.apply(unwrap$1(this),d),wrap(cursorRequestMap.get(this))}:function(...d){return wrap(_.apply(unwrap$1(this),d))}}function transformCachableValue(_){return typeof _=="function"?wrapFunction(_):(_ instanceof IDBTransaction&&cacheDonePromiseForTransaction(_),instanceOfAny(_,getIdbProxyableTypes())?new Proxy(_,idbProxyTraps):_)}function wrap(_){if(_ instanceof IDBRequest)return promisifyRequest(_);if(transformCache.has(_))return transformCache.get(_);const d=transformCachableValue(_);return d!==_&&(transformCache.set(_,d),reverseTransformCache.set(d,_)),d}const unwrap$1=_=>reverseTransformCache.get(_);function openDB(_,d,{blocked:v,upgrade:A,blocking:C,terminated:w}={}){const T=indexedDB.open(_,d),R=wrap(T);return A&&T.addEventListener("upgradeneeded",G=>{A(wrap(T.result),G.oldVersion,G.newVersion,wrap(T.transaction),G)}),v&&T.addEventListener("blocked",G=>v(G.oldVersion,G.newVersion,G)),R.then(G=>{w&&G.addEventListener("close",()=>w()),C&&G.addEventListener("versionchange",I=>C(I.oldVersion,I.newVersion,I))}).catch(()=>{}),R}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(_,d){if(!(_ instanceof IDBDatabase&&!(d in _)&&typeof d=="string"))return;if(cachedMethods.get(d))return cachedMethods.get(d);const v=d.replace(/FromIndex$/,""),A=d!==v,C=writeMethods.includes(v);if(!(v in(A?IDBIndex:IDBObjectStore).prototype)||!(C||readMethods.includes(v)))return;const w=async function(T,...R){const G=this.transaction(T,C?"readwrite":"readonly");let I=G.store;return A&&(I=I.index(R.shift())),(await Promise.all([I[v](...R),C&&G.done]))[0]};return cachedMethods.set(d,w),w}replaceTraps(_=>({..._,get:(d,v,A)=>getMethod(d,v)||_.get(d,v,A),has:(d,v)=>!!getMethod(d,v)||_.has(d,v)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(d){this.container=d}getPlatformInfoString(){return this.container.getProviders().map(v=>{if(isVersionServiceProvider(v)){const A=v.getImmediate();return`${A.library}/${A.version}`}else return null}).filter(v=>v).join(" ")}}function isVersionServiceProvider(_){return _.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2="@firebase/ai",name$1="@firebase/firestore-compat",name$r="firebase",version$2="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1]:"fire-fst-compat",[name$2]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(_,d){try{_.container.addComponent(d)}catch(v){logger.debug(`Component ${d.name} failed to register with FirebaseApp ${_.name}`,v)}}function _registerComponent(_){const d=_.name;if(_components.has(d))return logger.debug(`There were multiple attempts to register component ${d}.`),!1;_components.set(d,_);for(const v of _apps.values())_addComponent(v,_);for(const v of _serverApps.values())_addComponent(v,_);return!0}function _getProvider(_,d){const v=_.container.getProvider("heartbeat").getImmediate({optional:!0});return v&&v.triggerHeartbeat(),_.container.getProvider(d)}function _isFirebaseServerApp(_){return _==null?!1:_.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(d,v,A){this._isDeleted=!1,this._options={...d},this._config={...v},this._name=v.name,this._automaticDataCollectionEnabled=v.automaticDataCollectionEnabled,this._container=A,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(d){this.checkDestroyed(),this._automaticDataCollectionEnabled=d}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(d){this._isDeleted=d}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp$1(_,d={}){let v=_;typeof d!="object"&&(d={name:d});const A={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...d},C=A.name;if(typeof C!="string"||!C)throw ERROR_FACTORY.create("bad-app-name",{appName:String(C)});if(v||(v=getDefaultAppConfig()),!v)throw ERROR_FACTORY.create("no-options");const w=_apps.get(C);if(w){if(deepEqual(v,w.options)&&deepEqual(A,w.config))return w;throw ERROR_FACTORY.create("duplicate-app",{appName:C})}const T=new ComponentContainer(C);for(const G of _components.values())T.addComponent(G);const R=new FirebaseAppImpl(v,A,T);return _apps.set(C,R),R}function getApp(_=DEFAULT_ENTRY_NAME){const d=_apps.get(_);if(!d&&_===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp$1();if(!d)throw ERROR_FACTORY.create("no-app",{appName:_});return d}function registerVersion(_,d,v){let A=PLATFORM_LOG_STRING[_]??_;v&&(A+=`-${v}`);const C=A.match(/\s|\//),w=d.match(/\s|\//);if(C||w){const T=[`Unable to register library "${A}" with version "${d}":`];C&&T.push(`library name "${A}" contains illegal characters (whitespace or "/")`),C&&w&&T.push("and"),w&&T.push(`version name "${d}" contains illegal characters (whitespace or "/")`),logger.warn(T.join(" "));return}_registerComponent(new Component(`${A}-version`,()=>({library:A,version:d}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(_,d)=>{switch(d){case 0:try{_.createObjectStore(STORE_NAME)}catch(v){console.warn(v)}}}}).catch(_=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:_.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(_){try{const v=(await getDbPromise()).transaction(STORE_NAME),A=await v.objectStore(STORE_NAME).get(computeKey(_));return await v.done,A}catch(d){if(d instanceof FirebaseError)logger.warn(d.message);else{const v=ERROR_FACTORY.create("idb-get",{originalErrorMessage:d?.message});logger.warn(v.message)}}}async function writeHeartbeatsToIndexedDB(_,d){try{const A=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await A.objectStore(STORE_NAME).put(d,computeKey(_)),await A.done}catch(v){if(v instanceof FirebaseError)logger.warn(v.message);else{const A=ERROR_FACTORY.create("idb-set",{originalErrorMessage:v?.message});logger.warn(A.message)}}}function computeKey(_){return`${_.name}!${_.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(d){this.container=d,this._heartbeatsCache=null;const v=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(v),this._heartbeatsCachePromise=this._storage.read().then(A=>(this._heartbeatsCache=A,A))}async triggerHeartbeat(){try{const v=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),A=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===A||this._heartbeatsCache.heartbeats.some(C=>C.date===A))return;if(this._heartbeatsCache.heartbeats.push({date:A,agent:v}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const C=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(C,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(d){logger.warn(d)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const d=getUTCDateString(),{heartbeatsToSend:v,unsentEntries:A}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),C=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:v}));return this._heartbeatsCache.lastSentHeartbeatDate=d,A.length>0?(this._heartbeatsCache.heartbeats=A,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),C}catch(d){return logger.warn(d),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(_,d=MAX_HEADER_BYTES){const v=[];let A=_.slice();for(const C of _){const w=v.find(T=>T.agent===C.agent);if(w){if(w.dates.push(C.date),countBytes(v)>d){w.dates.pop();break}}else if(v.push({agent:C.agent,dates:[C.date]}),countBytes(v)>d){v.pop();break}A=A.slice(1)}return{heartbeatsToSend:v,unsentEntries:A}}class HeartbeatStorageImpl{constructor(d){this.app=d,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const v=await readHeartbeatsFromIndexedDB(this.app);return v?.heartbeats?v:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(d){if(await this._canUseIndexedDBPromise){const A=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:d.lastSentHeartbeatDate??A.lastSentHeartbeatDate,heartbeats:d.heartbeats})}else return}async add(d){if(await this._canUseIndexedDBPromise){const A=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:d.lastSentHeartbeatDate??A.lastSentHeartbeatDate,heartbeats:[...A.heartbeats,...d.heartbeats]})}else return}}function countBytes(_){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:_})).length}function getEarliestHeartbeatIdx(_){if(_.length===0)return-1;let d=0,v=_[0].date;for(let A=1;A<_.length;A++)_[A].date<v&&(v=_[A].date,d=A);return d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(_){_registerComponent(new Component("platform-logger",d=>new PlatformLoggerServiceImpl(d),"PRIVATE")),_registerComponent(new Component("heartbeat",d=>new HeartbeatServiceImpl(d),"PRIVATE")),registerVersion(name$q,version$1$1,_),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(_,...d){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${_}`,...d)}function _logError(_,...d){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${_}`,...d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(_,...d){throw createErrorInternal(_,...d)}function _createError(_,...d){return createErrorInternal(_,...d)}function _errorWithCustomMessage(_,d,v){const A={...prodErrorMap(),[d]:v};return new ErrorFactory("auth","Firebase",A).create(d,{appName:_.name})}function _serverAppCurrentUserOperationNotSupportedError(_){return _errorWithCustomMessage(_,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(_,...d){if(typeof _!="string"){const v=d[0],A=[...d.slice(1)];return A[0]&&(A[0].appName=_.name),_._errorFactory.create(v,...A)}return _DEFAULT_AUTH_ERROR_FACTORY.create(_,...d)}function _assert(_,d,...v){if(!_)throw createErrorInternal(d,...v)}function debugFail(_){const d="INTERNAL ASSERTION FAILED: "+_;throw _logError(d),new Error(d)}function debugAssert(_,d){_||debugFail(d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){return typeof self<"u"&&self.location?.href||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(d,v){this.shortDelay=d,this.longDelay=v,debugAssert(v>d,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(_,d){debugAssert(_.emulator,"Emulator should always be set here");const{url:v}=_.emulator;return d?`${v}${d.startsWith("/")?d.slice(1):d}`:v}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(d,v,A){this.fetchImpl=d,v&&(this.headersImpl=v),A&&(this.responseImpl=A)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(_,d){return _.tenantId&&!d.tenantId?{...d,tenantId:_.tenantId}:d}async function _performApiRequest(_,d,v,A,C={}){return _performFetchWithErrorHandling(_,C,async()=>{let w={},T={};A&&(d==="GET"?T=A:w={body:JSON.stringify(A)});const R=querystring({key:_.config.apiKey,...T}).slice(1),G=await _._getAdditionalHeaders();G["Content-Type"]="application/json",_.languageCode&&(G["X-Firebase-Locale"]=_.languageCode);const I={method:d,headers:G,...w};return isCloudflareWorker()||(I.referrerPolicy="no-referrer"),_.emulatorConfig&&isCloudWorkstation(_.emulatorConfig.host)&&(I.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(_,_.config.apiHost,v,R),I)})}async function _performFetchWithErrorHandling(_,d,v){_._canInitEmulator=!1;const A={...SERVER_ERROR_MAP,...d};try{const C=new NetworkTimeout(_),w=await Promise.race([v(),C.promise]);C.clearNetworkTimeout();const T=await w.json();if("needConfirmation"in T)throw _makeTaggedError(_,"account-exists-with-different-credential",T);if(w.ok&&!("errorMessage"in T))return T;{const R=w.ok?T.errorMessage:T.error.message,[G,I]=R.split(" : ");if(G==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(_,"credential-already-in-use",T);if(G==="EMAIL_EXISTS")throw _makeTaggedError(_,"email-already-in-use",T);if(G==="USER_DISABLED")throw _makeTaggedError(_,"user-disabled",T);const z=A[G]||G.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw _errorWithCustomMessage(_,z,I);_fail(_,z)}}catch(C){if(C instanceof FirebaseError)throw C;_fail(_,"network-request-failed",{message:String(C)})}}async function _performSignInRequest(_,d,v,A,C={}){const w=await _performApiRequest(_,d,v,A,C);return"mfaPendingCredential"in w&&_fail(_,"multi-factor-auth-required",{_serverResponse:w}),w}async function _getFinalTarget(_,d,v,A){const C=`${d}${v}?${A}`,w=_,T=w.config.emulator?_emulatorUrl(_.config,C):`${_.config.apiScheme}://${C}`;return CookieAuthProxiedEndpoints.includes(v)&&(await w._persistenceManagerAvailable,w._getPersistenceType()==="COOKIE")?w._getPersistence()._getFinalTarget(T).toString():T}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((v,A)=>{this.timer=setTimeout(()=>A(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(_,d,v){const A={appName:_.name};v.email&&(A.email=v.email),v.phoneNumber&&(A.phoneNumber=v.phoneNumber);const C=_createError(_,d,A);return C.customData._tokenResponse=v,C}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(_,d){return _performApiRequest(_,"POST","/v1/accounts:delete",d)}async function getAccountInfo(_,d){return _performApiRequest(_,"POST","/v1/accounts:lookup",d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(_){if(_)try{const d=new Date(Number(_));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getIdToken(_,d=!1){return getModularInstance(_).getIdToken(d)}async function getIdTokenResult(_,d=!1){const v=getModularInstance(_),A=await v.getIdToken(d),C=_parseToken(A);_assert(C&&C.exp&&C.auth_time&&C.iat,v.auth,"internal-error");const w=typeof C.firebase=="object"?C.firebase:void 0,T=w?.sign_in_provider;return{claims:C,token:A,authTime:utcTimestampToDateString(secondsStringToMilliseconds(C.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(C.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(C.exp)),signInProvider:T||null,signInSecondFactor:w?.sign_in_second_factor||null}}function secondsStringToMilliseconds(_){return Number(_)*1e3}function _parseToken(_){const[d,v,A]=_.split(".");if(d===void 0||v===void 0||A===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const C=base64Decode(v);return C?JSON.parse(C):(_logError("Failed to decode base64 JWT payload"),null)}catch(C){return _logError("Caught error parsing JWT payload as JSON",C?.toString()),null}}function _tokenExpiresIn(_){const d=_parseToken(_);return _assert(d,"internal-error"),_assert(typeof d.exp<"u","internal-error"),_assert(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(_,d,v=!1){if(v)return d;try{return await d}catch(A){throw A instanceof FirebaseError&&isUserInvalidated(A)&&_.auth.currentUser===_&&await _.auth.signOut(),A}}function isUserInvalidated({code:_}){return _==="auth/user-disabled"||_==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(d){if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),v}else{this.errorBackoff=3e4;const A=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,A)}}schedule(d=!1){if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout(async()=>{await this.iteration()},v)}async iteration(){try{await this.user.getIdToken(!0)}catch(d){d?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(d,v){this.createdAt=d,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(_){const d=_.auth,v=await _.getIdToken(),A=await _logoutIfInvalidated(_,getAccountInfo(d,{idToken:v}));_assert(A?.users.length,d,"internal-error");const C=A.users[0];_._notifyReloadListener(C);const w=C.providerUserInfo?.length?extractProviderData(C.providerUserInfo):[],T=mergeProviderData(_.providerData,w),R=_.isAnonymous,G=!(_.email&&C.passwordHash)&&!T?.length,I=R?G:!1,z={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:T,metadata:new UserMetadata(C.createdAt,C.lastLoginAt),isAnonymous:I};Object.assign(_,z)}async function reload(_){const d=getModularInstance(_);await _reloadWithoutSaving(d),await d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)}function mergeProviderData(_,d){return[..._.filter(A=>!d.some(C=>C.providerId===A.providerId)),...d]}function extractProviderData(_){return _.map(({providerId:d,...v})=>({providerId:d,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(_,d){const v=await _performFetchWithErrorHandling(_,{},async()=>{const A=querystring({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:C,apiKey:w}=_.config,T=await _getFinalTarget(_,C,"/v1/token",`key=${w}`),R=await _._getAdditionalHeaders();R["Content-Type"]="application/x-www-form-urlencoded";const G={method:"POST",headers:R,body:A};return _.emulatorConfig&&isCloudWorkstation(_.emulatorConfig.host)&&(G.credentials="include"),FetchProvider.fetch()(T,G)});return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}}async function revokeToken(_,d){return _performApiRequest(_,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(_,d))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){_assert(d.idToken,"internal-error"),_assert(typeof d.idToken<"u","internal-error"),_assert(typeof d.refreshToken<"u","internal-error");const v="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):_tokenExpiresIn(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,v)}updateFromIdToken(d){_assert(d.length!==0,"internal-error");const v=_tokenExpiresIn(d);this.updateTokensAndExpiration(d,null,v)}async getToken(d,v=!1){return!v&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,d,"user-token-expired"),this.refreshToken?(await this.refresh(d,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(d,v){const{accessToken:A,refreshToken:C,expiresIn:w}=await requestStsToken(d,v);this.updateTokensAndExpiration(A,C,Number(w))}updateTokensAndExpiration(d,v,A){this.refreshToken=v||null,this.accessToken=d||null,this.expirationTime=Date.now()+A*1e3}static fromJSON(d,v){const{refreshToken:A,accessToken:C,expirationTime:w}=v,T=new StsTokenManager;return A&&(_assert(typeof A=="string","internal-error",{appName:d}),T.refreshToken=A),C&&(_assert(typeof C=="string","internal-error",{appName:d}),T.accessToken=C),w&&(_assert(typeof w=="number","internal-error",{appName:d}),T.expirationTime=w),T}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(_,d){_assert(typeof _=="string"||typeof _>"u","internal-error",{appName:d})}class UserImpl{constructor({uid:d,auth:v,stsTokenManager:A,...C}){this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=v,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=C.displayName||null,this.email=C.email||null,this.emailVerified=C.emailVerified||!1,this.phoneNumber=C.phoneNumber||null,this.photoURL=C.photoURL||null,this.isAnonymous=C.isAnonymous||!1,this.tenantId=C.tenantId||null,this.providerData=C.providerData?[...C.providerData]:[],this.metadata=new UserMetadata(C.createdAt||void 0,C.lastLoginAt||void 0)}async getIdToken(d){const v=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,d));return _assert(v,this.auth,"internal-error"),this.accessToken!==v&&(this.accessToken=v,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),v}getIdTokenResult(d){return getIdTokenResult(this,d)}reload(){return reload(this)}_assign(d){this!==d&&(_assert(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(v=>({...v})),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const v=new UserImpl({...this,auth:d,stsTokenManager:this.stsTokenManager._clone()});return v.metadata._copy(this.metadata),v}_onReload(d){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(d,v=!1){let A=!1;d.idToken&&d.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(d),A=!0),v&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),A&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const d=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:d})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>({...d})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,v){const A=v.displayName??void 0,C=v.email??void 0,w=v.phoneNumber??void 0,T=v.photoURL??void 0,R=v.tenantId??void 0,G=v._redirectEventId??void 0,I=v.createdAt??void 0,z=v.lastLoginAt??void 0,{uid:H,emailVerified:Y,isAnonymous:ee,providerData:ie,stsTokenManager:oe}=v;_assert(H&&oe,d,"internal-error");const se=StsTokenManager.fromJSON(this.name,oe);_assert(typeof H=="string",d,"internal-error"),assertStringOrUndefined(A,d.name),assertStringOrUndefined(C,d.name),_assert(typeof Y=="boolean",d,"internal-error"),_assert(typeof ee=="boolean",d,"internal-error"),assertStringOrUndefined(w,d.name),assertStringOrUndefined(T,d.name),assertStringOrUndefined(R,d.name),assertStringOrUndefined(G,d.name),assertStringOrUndefined(I,d.name),assertStringOrUndefined(z,d.name);const re=new UserImpl({uid:H,auth:d,email:C,emailVerified:Y,displayName:A,isAnonymous:ee,photoURL:T,phoneNumber:w,tenantId:R,stsTokenManager:se,createdAt:I,lastLoginAt:z});return ie&&Array.isArray(ie)&&(re.providerData=ie.map(fe=>({...fe}))),G&&(re._redirectEventId=G),re}static async _fromIdTokenResponse(d,v,A=!1){const C=new StsTokenManager;C.updateFromServerResponse(v);const w=new UserImpl({uid:v.localId,auth:d,stsTokenManager:C,isAnonymous:A});return await _reloadWithoutSaving(w),w}static async _fromGetAccountInfoResponse(d,v,A){const C=v.users[0];_assert(C.localId!==void 0,"internal-error");const w=C.providerUserInfo!==void 0?extractProviderData(C.providerUserInfo):[],T=!(C.email&&C.passwordHash)&&!w?.length,R=new StsTokenManager;R.updateFromIdToken(A);const G=new UserImpl({uid:C.localId,auth:d,stsTokenManager:R,isAnonymous:T}),I={uid:C.localId,displayName:C.displayName||null,photoURL:C.photoUrl||null,email:C.email||null,emailVerified:C.emailVerified||!1,phoneNumber:C.phoneNumber||null,tenantId:C.tenantId||null,providerData:w,metadata:new UserMetadata(C.createdAt,C.lastLoginAt),isAnonymous:!(C.email&&C.passwordHash)&&!w?.length};return Object.assign(G,I),G}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(_){debugAssert(_ instanceof Function,"Expected a class definition");let d=instanceCache.get(_);return d?(debugAssert(d instanceof _,"Instance stored in cache mismatched with class"),d):(d=new _,instanceCache.set(_,d),d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(d,v){this.storage[d]=v}async _get(d){const v=this.storage[d];return v===void 0?null:v}async _remove(d){delete this.storage[d]}_addListener(d,v){}_removeListener(d,v){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(_,d,v){return`firebase:${_}:${d}:${v}`}class PersistenceUserManager{constructor(d,v,A){this.persistence=d,this.auth=v,this.userKey=A;const{config:C,name:w}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,C.apiKey,w),this.fullPersistenceKey=_persistenceKeyName("persistence",C.apiKey,w),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}async getCurrentUser(){const d=await this.persistence._get(this.fullUserKey);if(!d)return null;if(typeof d=="string"){const v=await getAccountInfo(this.auth,{idToken:d}).catch(()=>{});return v?UserImpl._fromGetAccountInfoResponse(this.auth,v,d):null}return UserImpl._fromJSON(this.auth,d)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(d){if(this.persistence===d)return;const v=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=d,v)return this.setCurrentUser(v)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(d,v,A="authUser"){if(!v.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),d,A);const C=(await Promise.all(v.map(async I=>{if(await I._isAvailable())return I}))).filter(I=>I);let w=C[0]||_getInstance(inMemoryPersistence);const T=_persistenceKeyName(A,d.config.apiKey,d.name);let R=null;for(const I of v)try{const z=await I._get(T);if(z){let H;if(typeof z=="string"){const Y=await getAccountInfo(d,{idToken:z}).catch(()=>{});if(!Y)break;H=await UserImpl._fromGetAccountInfoResponse(d,Y,z)}else H=UserImpl._fromJSON(d,z);I!==w&&(R=H),w=I;break}}catch{}const G=C.filter(I=>I._shouldAllowMigration);return!w._shouldAllowMigration||!G.length?new PersistenceUserManager(w,d,A):(w=G[0],R&&await w._set(T,R.toJSON()),await Promise.all(v.map(async I=>{if(I!==w)try{await I._remove(T)}catch{}})),new PersistenceUserManager(w,d,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(_){const d=_.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(_isIEMobile(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(_isFirefox(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(_isBlackBerry(d))return"Blackberry";if(_isWebOS(d))return"Webos";if(_isSafari(d))return"Safari";if((d.includes("chrome/")||_isChromeIOS(d))&&!d.includes("edge/"))return"Chrome";if(_isAndroid(d))return"Android";{const v=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,A=_.match(v);if(A?.length===2)return A[1]}return"Other"}function _isFirefox(_=getUA()){return/firefox\//i.test(_)}function _isSafari(_=getUA()){const d=_.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function _isChromeIOS(_=getUA()){return/crios\//i.test(_)}function _isIEMobile(_=getUA()){return/iemobile/i.test(_)}function _isAndroid(_=getUA()){return/android/i.test(_)}function _isBlackBerry(_=getUA()){return/blackberry/i.test(_)}function _isWebOS(_=getUA()){return/webos/i.test(_)}function _isIOS(_=getUA()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function _isIOSStandalone(_=getUA()){return _isIOS(_)&&!!window.navigator?.standalone}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(_=getUA()){return _isIOS(_)||_isAndroid(_)||_isWebOS(_)||_isBlackBerry(_)||/windows phone/i.test(_)||_isIEMobile(_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(_,d=[]){let v;switch(_){case"Browser":v=_getBrowserName(getUA());break;case"Worker":v=`${_getBrowserName(getUA())}-${_}`;break;default:v=_}const A=d.length?d.join(","):"FirebaseCore-web";return`${v}/JsCore/${SDK_VERSION}/${A}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,v){const A=w=>new Promise((T,R)=>{try{const G=d(w);T(G)}catch(G){R(G)}});A.onAbort=v,this.queue.push(A);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}async runMiddleware(d){if(this.auth.currentUser===d)return;const v=[];try{for(const A of this.queue)await A(d),A.onAbort&&v.push(A.onAbort)}catch(A){v.reverse();for(const C of v)try{C()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(_,d={}){return _performApiRequest(_,"GET","/v2/passwordPolicy",_addTidIfNecessary(_,d))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(d){const v=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=v.minPasswordLength??MINIMUM_MIN_PASSWORD_LENGTH,v.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=v.maxPasswordLength),v.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=v.containsLowercaseCharacter),v.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=v.containsUppercaseCharacter),v.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=v.containsNumericCharacter),v.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=v.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=d.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=d.forceUpgradeOnSignin??!1,this.schemaVersion=d.schemaVersion}validatePassword(d){const v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,v),this.validatePasswordCharacterOptions(d,v),v.isValid&&(v.isValid=v.meetsMinPasswordLength??!0),v.isValid&&(v.isValid=v.meetsMaxPasswordLength??!0),v.isValid&&(v.isValid=v.containsLowercaseLetter??!0),v.isValid&&(v.isValid=v.containsUppercaseLetter??!0),v.isValid&&(v.isValid=v.containsNumericCharacter??!0),v.isValid&&(v.isValid=v.containsNonAlphanumericCharacter??!0),v}validatePasswordLengthOptions(d,v){const A=this.customStrengthOptions.minPasswordLength,C=this.customStrengthOptions.maxPasswordLength;A&&(v.meetsMinPasswordLength=d.length>=A),C&&(v.meetsMaxPasswordLength=d.length<=C)}validatePasswordCharacterOptions(d,v){this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);let A;for(let C=0;C<d.length;C++)A=d.charAt(C),this.updatePasswordCharacterOptionsStatuses(v,A>="a"&&A<="z",A>="A"&&A<="Z",A>="0"&&A<="9",this.allowedNonAlphanumericCharacters.includes(A))}updatePasswordCharacterOptionsStatuses(d,v,A,C,w){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=A)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=C)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(d,v,A,C){this.app=d,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=A,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=C.sdkClientVersion,this._persistenceManagerAvailable=new Promise(w=>this._resolvePersistenceManagerAvailable=w)}_initializeWithPersistence(d,v){return v&&(this._popupRedirectResolver=_getInstance(v)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,d),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(v),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const d=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!d)){if(this.currentUser&&d&&this.currentUser.uid===d.uid){this._currentUser._assign(d),await this.currentUser.getIdToken();return}await this._updateCurrentUser(d,!0)}}async initializeCurrentUserFromIdToken(d){try{const v=await getAccountInfo(this,{idToken:d}),A=await UserImpl._fromGetAccountInfoResponse(this,v,d);await this.directlySetCurrentUser(A)}catch(v){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",v),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(d){if(_isFirebaseServerApp(this.app)){const w=this.app.settings.authIdToken;return w?new Promise(T=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(w).then(T,T))}):this.directlySetCurrentUser(null)}const v=await this.assertedPersistence.getCurrentUser();let A=v,C=!1;if(d&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const w=this.redirectUser?._redirectEventId,T=A?._redirectEventId,R=await this.tryRedirectSignIn(d);(!w||w===T)&&R?.user&&(A=R.user,C=!0)}if(!A)return this.directlySetCurrentUser(null);if(!A._redirectEventId){if(C)try{await this.beforeStateQueue.runMiddleware(A)}catch(w){A=v,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(w))}return A?this.reloadAndSetCurrentUserOrClear(A):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===A._redirectEventId?this.directlySetCurrentUser(A):this.reloadAndSetCurrentUserOrClear(A)}async tryRedirectSignIn(d){let v=null;try{v=await this._popupRedirectResolver._completeRedirectFn(this,d,!0)}catch{await this._setRedirectUser(null)}return v}async reloadAndSetCurrentUserOrClear(d){try{await _reloadWithoutSaving(d)}catch(v){if(v?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(d)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(d){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const v=d?getModularInstance(d):null;return v&&_assert(v.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(v&&v._clone(this))}async _updateCurrentUser(d,v=!1){if(!this._deleted)return d&&_assert(this.tenantId===d.tenantId,this,"tenant-id-mismatch"),v||await this.beforeStateQueue.runMiddleware(d),this.queue(async()=>{await this.directlySetCurrentUser(d),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(d){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(d))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(d){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const v=this._getPasswordPolicyInternal();return v.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):v.validatePassword(d)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const d=await _getPasswordPolicy(this),v=new PasswordPolicyImpl(d);this.tenantId===null?this._projectPasswordPolicy=v:this._tenantPasswordPolicies[this.tenantId]=v}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(d){this._errorFactory=new ErrorFactory("auth","Firebase",d())}onAuthStateChanged(d,v,A){return this.registerStateListener(this.authStateSubscription,d,v,A)}beforeAuthStateChanged(d,v){return this.beforeStateQueue.pushCallback(d,v)}onIdTokenChanged(d,v,A){return this.registerStateListener(this.idTokenSubscription,d,v,A)}authStateReady(){return new Promise((d,v)=>{if(this.currentUser)d();else{const A=this.onAuthStateChanged(()=>{A(),d()},v)}})}async revokeAccessToken(d){if(this.currentUser){const v=await this.currentUser.getIdToken(),A={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:v};this.tenantId!=null&&(A.tenantId=this.tenantId),await revokeToken(this,A)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(d,v){const A=await this.getOrInitRedirectPersistenceManager(v);return d===null?A.removeCurrentUser():A.setCurrentUser(d)}async getOrInitRedirectPersistenceManager(d){if(!this.redirectPersistenceManager){const v=d&&_getInstance(d)||this._popupRedirectResolver;_assert(v,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(v._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(d){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===d?this._currentUser:this.redirectUser?._redirectEventId===d?this.redirectUser:null}async _persistUserIfCurrent(d){if(d===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(d))}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const d=this.currentUser?.uid??null;this.lastNotifiedUid!==d&&(this.lastNotifiedUid=d,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,v,A,C){if(this._deleted)return()=>{};const w=typeof v=="function"?v:v.next.bind(v);let T=!1;const R=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(R,this,"internal-error"),R.then(()=>{T||w(this.currentUser)}),typeof v=="function"){const G=d.addObserver(v,A,C);return()=>{T=!0,G()}}else{const G=d.addObserver(v);return()=>{T=!0,G()}}}async directlySetCurrentUser(d){this.currentUser&&this.currentUser!==d&&this._currentUser._stopProactiveRefresh(),d&&this.isProactiveRefreshEnabled&&d._startProactiveRefresh(),this.currentUser=d,d?await this.assertedPersistence.setCurrentUser(d):await this.assertedPersistence.removeCurrentUser()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const d={"X-Client-Version":this.clientVersion};this.app.options.appId&&(d["X-Firebase-gmpid"]=this.app.options.appId);const v=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();v&&(d["X-Firebase-Client"]=v);const A=await this._getAppCheckToken();return A&&(d["X-Firebase-AppCheck"]=A),d}async _getAppCheckToken(){if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const d=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return d?.error&&_logWarn(`Error while retrieving App Check token: ${d.error}`),d?.token}}function _castAuth(_){return getModularInstance(_)}class Subscription{constructor(d){this.auth=d,this.observer=null,this.addObserver=createSubscribe(v=>this.observer=v)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(_){externalJSProvider=_}function _loadJS(_){return externalJSProvider.loadJS(_)}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(_){return`__${_}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(_,d){const v=_getProvider(_,"auth");if(v.isInitialized()){const C=v.getImmediate(),w=v.getOptions();if(deepEqual(w,d??{}))return C;_fail(C,"already-initialized")}return v.initialize({options:d})}function _initializeAuthInstance(_,d){const v=d?.persistence||[],A=(Array.isArray(v)?v:[v]).map(_getInstance);d?.errorMap&&_._updateErrorMap(d.errorMap),_._initializeWithPersistence(A,d?.popupRedirectResolver)}function connectAuthEmulator(_,d,v){const A=_castAuth(_);_assert(/^https?:\/\//.test(d),A,"invalid-emulator-scheme");const C=!1,w=extractProtocol(d),{host:T,port:R}=extractHostAndPort(d),G=R===null?"":`:${R}`,I={url:`${w}//${T}${G}/`},z=Object.freeze({host:T,port:R,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:C})});if(!A._canInitEmulator){_assert(A.config.emulator&&A.emulatorConfig,A,"emulator-config-failed"),_assert(deepEqual(I,A.config.emulator)&&deepEqual(z,A.emulatorConfig),A,"emulator-config-failed");return}A.config.emulator=I,A.emulatorConfig=z,A.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(T)?(pingServer(`${w}//${T}${G}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(_){const d=_.indexOf(":");return d<0?"":_.substr(0,d+1)}function extractHostAndPort(_){const d=extractProtocol(_),v=/(\/\/)?([^?#/]+)/.exec(_.substr(d.length));if(!v)return{host:"",port:null};const A=v[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(A);if(C){const w=C[1];return{host:w,port:parsePort(A.substr(w.length+1))}}else{const[w,T]=A.split(":");return{host:w,port:parsePort(T)}}}function parsePort(_){if(!_)return null;const d=Number(_);return isNaN(d)?null:d}function emitEmulatorWarning(){function _(){const d=document.createElement("p"),v=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(d,v){this.providerId=d,this.signInMethod=v}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(d){return debugFail("not implemented")}_linkToIdToken(d,v){return debugFail("not implemented")}_getReauthenticationResolver(d){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(_,d){return _performSignInRequest(_,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(_,d))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const v=new OAuthCredential(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(v.idToken=d.idToken),d.accessToken&&(v.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(v.nonce=d.nonce),d.pendingToken&&(v.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(v.accessToken=d.oauthToken,v.secret=d.oauthTokenSecret):_fail("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const v=typeof d=="string"?JSON.parse(d):d,{providerId:A,signInMethod:C,...w}=v;if(!A||!C)return null;const T=new OAuthCredential(A,C);return T.idToken=w.idToken||void 0,T.accessToken=w.accessToken||void 0,T.secret=w.secret,T.nonce=w.nonce,T.pendingToken=w.pendingToken||null,T}_getIdTokenResponse(d){const v=this.buildRequest();return signInWithIdp(d,v)}_linkToIdToken(d,v){const A=this.buildRequest();return A.idToken=v,signInWithIdp(d,A)}_getReauthenticationResolver(d){const v=this.buildRequest();return v.autoCreate=!1,signInWithIdp(d,v)}buildRequest(){const d={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),d.postBody=querystring(v)}return d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(d){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return FacebookAuthProvider.credentialFromTaggedObject(d)}static credentialFromError(d){return FacebookAuthProvider.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(d.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(d,v){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:v})}static credentialFromResult(d){return GoogleAuthProvider.credentialFromTaggedObject(d)}static credentialFromError(d){return GoogleAuthProvider.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:v,oauthAccessToken:A}=d;if(!v&&!A)return null;try{return GoogleAuthProvider.credential(v,A)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(d){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return GithubAuthProvider.credentialFromTaggedObject(d)}static credentialFromError(d){return GithubAuthProvider.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return GithubAuthProvider.credential(d.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(d,v){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:v})}static credentialFromResult(d){return TwitterAuthProvider.credentialFromTaggedObject(d)}static credentialFromError(d){return TwitterAuthProvider.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:v,oauthTokenSecret:A}=d;if(!v||!A)return null;try{return TwitterAuthProvider.credential(v,A)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static async _fromIdTokenResponse(d,v,A,C=!1){const w=await UserImpl._fromIdTokenResponse(d,A,C),T=providerIdForResponse(A);return new UserCredentialImpl({user:w,providerId:T,_tokenResponse:A,operationType:v})}static async _forOperation(d,v,A){await d._updateTokensIfNecessary(A,!0);const C=providerIdForResponse(A);return new UserCredentialImpl({user:d,providerId:C,_tokenResponse:A,operationType:v})}}function providerIdForResponse(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(d,v,A,C){super(v.code,v.message),this.operationType=A,this.user=C,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:d.name,tenantId:d.tenantId??void 0,_serverResponse:v.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(d,v,A,C){return new MultiFactorError(d,v,A,C)}}function _processCredentialSavingMfaContextIfNecessary(_,d,v,A){return(d==="reauthenticate"?v._getReauthenticationResolver(_):v._getIdTokenResponse(_)).catch(w=>{throw w.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(_,w,d,A):w})}async function _link$1(_,d,v=!1){const A=await _logoutIfInvalidated(_,d._linkToIdToken(_.auth,await _.getIdToken()),v);return UserCredentialImpl._forOperation(_,"link",A)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(_,d,v=!1){const{auth:A}=_;if(_isFirebaseServerApp(A.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(A));const C="reauthenticate";try{const w=await _logoutIfInvalidated(_,_processCredentialSavingMfaContextIfNecessary(A,C,d,_),v);_assert(w.idToken,A,"internal-error");const T=_parseToken(w.idToken);_assert(T,A,"internal-error");const{sub:R}=T;return _assert(_.uid===R,A,"user-mismatch"),UserCredentialImpl._forOperation(_,C,w)}catch(w){throw w?.code==="auth/user-not-found"&&_fail(A,"user-mismatch"),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(_,d,v=!1){if(_isFirebaseServerApp(_.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_));const A="signIn",C=await _processCredentialSavingMfaContextIfNecessary(_,A,d),w=await UserCredentialImpl._fromIdTokenResponse(_,A,C);return v||await _._updateCurrentUser(w.user),w}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithCustomToken$1(_,d){return _performSignInRequest(_,"POST","/v1/accounts:signInWithCustomToken",_addTidIfNecessary(_,d))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithCustomToken(_,d){if(_isFirebaseServerApp(_.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_));const v=_castAuth(_),A=await signInWithCustomToken$1(v,{token:d,returnSecureToken:!0}),C=await UserCredentialImpl._fromIdTokenResponse(v,"signIn",A);return await v._updateCurrentUser(C.user),C}function onIdTokenChanged(_,d,v,A){return getModularInstance(_).onIdTokenChanged(d,v,A)}function beforeAuthStateChanged(_,d,v){return getModularInstance(_).beforeAuthStateChanged(d,v)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(d,v){this.storageRetriever=d,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,v){return this.storage.setItem(d,JSON.stringify(v)),Promise.resolve()}_get(d){const v=this.storage.getItem(d);return Promise.resolve(v?JSON.parse(v):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,v)=>this.onStorageEvent(d,v),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const v of Object.keys(this.listeners)){const A=this.storage.getItem(v),C=this.localCache[v];A!==C&&d(v,C,A)}}onStorageEvent(d,v=!1){if(!d.key){this.forAllChangedKeys((T,R,G)=>{this.notifyListeners(T,G)});return}const A=d.key;v?this.detachListener():this.stopPolling();const C=()=>{const T=this.storage.getItem(A);!v&&this.localCache[A]===T||this.notifyListeners(A,T)},w=this.storage.getItem(A);_isIE10()&&w!==d.newValue&&d.newValue!==d.oldValue?setTimeout(C,IE10_LOCAL_STORAGE_SYNC_DELAY):C()}notifyListeners(d,v){this.localCache[d]=v;const A=this.listeners[d];if(A)for(const C of Array.from(A))C(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,v,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:v,newValue:A}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,v){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(v)}_removeListener(d,v){this.listeners[d]&&(this.listeners[d].delete(v),this.listeners[d].size===0&&delete this.listeners[d]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(d,v){await super._set(d,v),this.localCache[d]=JSON.stringify(v)}async _get(d){const v=await super._get(d);return this.localCache[d]=JSON.stringify(v),v}async _remove(d){await super._remove(d),delete this.localCache[d]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,v){}_removeListener(d,v){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(_){return Promise.all(_.map(async d=>{try{return{fulfilled:!0,value:await d}}catch(v){return{fulfilled:!1,reason:v}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const v=this.receivers.find(C=>C.isListeningto(d));if(v)return v;const A=new Receiver(d);return this.receivers.push(A),A}isListeningto(d){return this.eventTarget===d}async handleEvent(d){const v=d,{eventId:A,eventType:C,data:w}=v.data,T=this.handlersMap[C];if(!T?.size)return;v.ports[0].postMessage({status:"ack",eventId:A,eventType:C});const R=Array.from(T).map(async I=>I(v.origin,w)),G=await _allSettled(R);v.ports[0].postMessage({status:"done",eventId:A,eventType:C,response:G})}_subscribe(d,v){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(v)}_unsubscribe(d,v){this.handlersMap[d]&&v&&this.handlersMap[d].delete(v),(!v||this.handlersMap[d].size===0)&&delete this.handlersMap[d],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(_="",d=10){let v="";for(let A=0;A<d;A++)v+=Math.floor(Math.random()*10);return _+v}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}async _send(d,v,A=50){const C=typeof MessageChannel<"u"?new MessageChannel:null;if(!C)throw new Error("connection_unavailable");let w,T;return new Promise((R,G)=>{const I=_generateEventId("",20);C.port1.start();const z=setTimeout(()=>{G(new Error("unsupported_event"))},A);T={messageChannel:C,onMessage(H){const Y=H;if(Y.data.eventId===I)switch(Y.data.status){case"ack":clearTimeout(z),w=setTimeout(()=>{G(new Error("timeout"))},3e3);break;case"done":clearTimeout(w),R(Y.data.response);break;default:clearTimeout(z),clearTimeout(w),G(new Error("invalid_response"));break}}},this.handlers.add(T),C.port1.addEventListener("message",T.onMessage),this.target.postMessage({eventType:d,eventId:I,data:v},[C.port2])}).finally(()=>{T&&this.removeMessageHandler(T)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(_){_window().location.href=_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){return navigator?.serviceWorker?.controller||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(d){this.request=d}toPromise(){return new Promise((d,v)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function getObjectStore(_,d){return _.transaction([DB_OBJECTSTORE_NAME],d?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const _=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(_).toPromise()}function _openDatabase(){const _=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((d,v)=>{_.addEventListener("error",()=>{v(_.error)}),_.addEventListener("upgradeneeded",()=>{const A=_.result;try{A.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(C){v(C)}}),_.addEventListener("success",async()=>{const A=_.result;A.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?d(A):(A.close(),await _deleteDatabase(),d(await _openDatabase()))})})}async function _putObject(_,d,v){const A=getObjectStore(_,!0).put({[DB_DATA_KEYPATH]:d,value:v});return new DBPromise(A).toPromise()}async function getObject(_,d){const v=getObjectStore(_,!1).get(d),A=await new DBPromise(v).toPromise();return A===void 0?null:A.value}function _deleteObject(_,d){const v=getObjectStore(_,!0).delete(d);return new DBPromise(v).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(d){let v=0;for(;;)try{const A=await this._openDb();return await d(A)}catch(A){if(v++>_TRANSACTION_RETRY_COUNT)throw A;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(d,v)=>({keyProcessed:(await this._poll()).includes(v.key)})),this.receiver._subscribe("ping",async(d,v)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const d=await this.sender._send("ping",{},800);d&&d[0]?.fulfilled&&d[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(d){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:d},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const d=await _openDatabase();return await _putObject(d,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(d,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(d){this.pendingWrites++;try{await d()}finally{this.pendingWrites--}}async _set(d,v){return this._withPendingWrite(async()=>(await this._withRetries(A=>_putObject(A,d,v)),this.localCache[d]=v,this.notifyServiceWorker(d)))}async _get(d){const v=await this._withRetries(A=>getObject(A,d));return this.localCache[d]=v,v}async _remove(d){return this._withPendingWrite(async()=>(await this._withRetries(v=>_deleteObject(v,d)),delete this.localCache[d],this.notifyServiceWorker(d)))}async _poll(){const d=await this._withRetries(C=>{const w=getObjectStore(C,!1).getAll();return new DBPromise(w).toPromise()});if(!d)return[];if(this.pendingWrites!==0)return[];const v=[],A=new Set;if(d.length!==0)for(const{fbase_key:C,value:w}of d)A.add(C),JSON.stringify(this.localCache[C])!==JSON.stringify(w)&&(this.notifyListeners(C,w),v.push(C));for(const C of Object.keys(this.localCache))this.localCache[C]&&!A.has(C)&&(this.notifyListeners(C,null),v.push(C));return v}notifyListeners(d,v){this.localCache[d]=v;const A=this.listeners[d];if(A)for(const C of Array.from(A))C(v)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,v){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(v)}_removeListener(d,v){this.listeners[d]&&(this.listeners[d].delete(v),this.listeners[d].size===0&&delete this.listeners[d]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(_,d){return d?_getInstance(d):(_assert(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return signInWithIdp(d,this._buildIdpRequest())}_linkToIdToken(d,v){return signInWithIdp(d,this._buildIdpRequest(v))}_getReauthenticationResolver(d){return signInWithIdp(d,this._buildIdpRequest())}_buildIdpRequest(d){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(v.idToken=d),v}}function _signIn(_){return _signInWithCredential(_.auth,new IdpCredential(_),_.bypassAuthState)}function _reauth(_){const{auth:d,user:v}=_;return _assert(v,d,"internal-error"),_reauthenticate(v,new IdpCredential(_),_.bypassAuthState)}async function _link(_){const{auth:d,user:v}=_;return _assert(v,d,"internal-error"),_link$1(v,new IdpCredential(_),_.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(d,v,A,C,w=!1){this.auth=d,this.resolver=A,this.user=C,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){return new Promise(async(d,v)=>{this.pendingPromise={resolve:d,reject:v};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(A){this.reject(A)}})}async onAuthEvent(d){const{urlResponse:v,sessionId:A,postBody:C,tenantId:w,error:T,type:R}=d;if(T){this.reject(T);return}const G={auth:this.auth,requestUri:v,sessionId:A,tenantId:w||void 0,postBody:C||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(R)(G))}catch(I){this.reject(I)}}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(d){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(d,v,A,C,w){super(d,v,C,w),this.provider=A,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const d=await this.execute();return _assert(d,this.auth,"internal-error"),d}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const d=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],d),this.authWindow.associatedEvent=d,this.resolver._originValidation(this.auth).catch(v=>{this.reject(v)}),this.resolver._isIframeWebStorageSupported(this.auth,v=>{v||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const d=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(d,_POLL_WINDOW_CLOSE_TIMEOUT.get())};d()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(d,v,A=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,A),this.eventId=null}async execute(){let d=redirectOutcomeMap.get(this.auth._key());if(!d){try{const A=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;d=()=>Promise.resolve(A)}catch(v){d=()=>Promise.reject(v)}redirectOutcomeMap.set(this.auth._key(),d)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),d()}async onAuthEvent(d){if(d.type==="signInViaRedirect")return super.onAuthEvent(d);if(d.type==="unknown"){this.resolve(null);return}if(d.eventId){const v=await this.auth._redirectUserForId(d.eventId);if(v)return this.user=v,super.onAuthEvent(d);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(_,d){const v=pendingRedirectKey(d),A=resolverPersistence(_);if(!await A._isAvailable())return!1;const C=await A._get(v)==="true";return await A._remove(v),C}function _overrideRedirectResult(_,d){redirectOutcomeMap.set(_._key(),d)}function resolverPersistence(_){return _getInstance(_._redirectPersistence)}function pendingRedirectKey(_){return _persistenceKeyName(PENDING_REDIRECT_KEY,_.config.apiKey,_.name)}async function _getRedirectResult(_,d,v=!1){if(_isFirebaseServerApp(_.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(_));const A=_castAuth(_),C=_withDefaultResolver(A,d),T=await new RedirectAction(A,C,v).execute();return T&&!v&&(delete T.user._redirectEventId,await A._persistUserIfCurrent(T.user),await A._setRedirectUser(null,d)),T}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let v=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(d,A)&&(v=!0,this.sendToConsumer(d,A),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!isRedirectEvent(d)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=d,v=!0)),v}sendToConsumer(d,v){if(d.error&&!isNullRedirectEvent(d)){const A=d.error.code?.split("auth/")[1]||"internal-error";v.onError(_createError(this.auth,A))}else v.onAuthEvent(d)}isEventForConsumer(d,v){const A=v.eventId===null||!!d.eventId&&d.eventId===v.eventId;return v.filter.includes(d.type)&&A}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(d))}saveEventToCache(d){this.cachedEventUids.add(eventUid(d)),this.lastProcessedEventTime=Date.now()}}function eventUid(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(d=>d).join("-")}function isNullRedirectEvent({type:_,error:d}){return _==="unknown"&&d?.code==="auth/no-auth-event"}function isRedirectEvent(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(_);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(_,d={}){return _performApiRequest(_,"GET","/v1/projects",d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(_){if(_.config.emulator)return;const{authorizedDomains:d}=await _getProjectConfig(_);for(const v of d)try{if(matchDomain(v))return}catch{}_fail(_,"unauthorized-domain")}function matchDomain(_){const d=_getCurrentUrl(),{protocol:v,hostname:A}=new URL(d);if(_.startsWith("chrome-extension://")){const T=new URL(_);return T.hostname===""&&A===""?v==="chrome-extension:"&&_.replace("chrome-extension://","")===d.replace("chrome-extension://",""):v==="chrome-extension:"&&T.hostname===A}if(!HTTP_REGEX.test(v))return!1;if(IP_ADDRESS_REGEX.test(_))return A===_;const C=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(A)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const _=_window().___jsl;if(_?.H){for(const d of Object.keys(_.H))if(_.H[d].r=_.H[d].r||[],_.H[d].L=_.H[d].L||[],_.H[d].r=[..._.H[d].L],_.CP)for(let v=0;v<_.CP.length;v++)_.CP[v]=null}}function loadGapi(_){return new Promise((d,v)=>{function A(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),v(_createError(_,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(_window().gapi?.iframes?.Iframe)d(gapi.iframes.getContext());else if(_window().gapi?.load)A();else{const C=_generateCallbackName("iframefcb");return _window()[C]=()=>{gapi.load?A():v(_createError(_,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${C}`).catch(w=>v(w))}}).catch(d=>{throw cachedGApiLoader=null,d})}let cachedGApiLoader=null;function _loadGapi(_){return cachedGApiLoader=cachedGApiLoader||loadGapi(_),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(_){const d=_.config;_assert(d.authDomain,_,"auth-domain-config-required");const v=d.emulator?_emulatorUrl(d,EMULATED_IFRAME_PATH):`https://${_.config.authDomain}/${IFRAME_PATH}`,A={apiKey:d.apiKey,appName:_.name,v:SDK_VERSION},C=EID_FROM_APIHOST.get(_.config.apiHost);C&&(A.eid=C);const w=_._getFrameworks();return w.length&&(A.fw=w.join(",")),`${v}?${querystring(A).slice(1)}`}async function _openIframe(_){const d=await _loadGapi(_),v=_window().gapi;return _assert(v,_,"internal-error"),d.open({where:document.body,url:getIframeUrl(_),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},A=>new Promise(async(C,w)=>{await A.restyle({setHideOnLeave:!1});const T=_createError(_,"network-request-failed"),R=_window().setTimeout(()=>{w(T)},PING_TIMEOUT.get());function G(){_window().clearTimeout(R),C(A)}A.ping(G).then(G,()=>{w(T)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(_,d,v,A=DEFAULT_WIDTH,C=DEFAULT_HEIGHT){const w=Math.max((window.screen.availHeight-C)/2,0).toString(),T=Math.max((window.screen.availWidth-A)/2,0).toString();let R="";const G={...BASE_POPUP_OPTIONS,width:A.toString(),height:C.toString(),top:w,left:T},I=getUA().toLowerCase();v&&(R=_isChromeIOS(I)?TARGET_BLANK:v),_isFirefox(I)&&(d=d||FIREFOX_EMPTY_URL,G.scrollbars="yes");const z=Object.entries(G).reduce((Y,[ee,ie])=>`${Y}${ee}=${ie},`,"");if(_isIOSStandalone(I)&&R!=="_self")return openAsNewWindowIOS(d||"",R),new AuthPopup(null);const H=window.open(d||"",R,z);_assert(H,_,"popup-blocked");try{H.focus()}catch{}return new AuthPopup(H)}function openAsNewWindowIOS(_,d){const v=document.createElement("a");v.href=_,v.target=d;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(A)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(_,d,v,A,C,w){_assert(_.config.authDomain,_,"auth-domain-config-required"),_assert(_.config.apiKey,_,"invalid-api-key");const T={apiKey:_.config.apiKey,appName:_.name,authType:v,redirectUrl:A,v:SDK_VERSION,eventId:C};if(d instanceof FederatedAuthProvider){d.setDefaultLanguage(_.languageCode),T.providerId=d.providerId||"",isEmpty$1(d.getCustomParameters())||(T.customParameters=JSON.stringify(d.getCustomParameters()));for(const[z,H]of Object.entries({}))T[z]=H}if(d instanceof BaseOAuthProvider){const z=d.getScopes().filter(H=>H!=="");z.length>0&&(T.scopes=z.join(","))}_.tenantId&&(T.tid=_.tenantId);const R=T;for(const z of Object.keys(R))R[z]===void 0&&delete R[z];const G=await _._getAppCheckToken(),I=G?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(G)}`:"";return`${getHandlerBase(_)}?${querystring(R).slice(1)}${I}`}function getHandlerBase({config:_}){return _.emulator?_emulatorUrl(_,EMULATOR_WIDGET_PATH):`https://${_.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(d,v,A,C){debugAssert(this.eventManagers[d._key()]?.manager,"_initialize() not called before _openPopup()");const w=await _getRedirectUrl(d,v,A,_getCurrentUrl(),C);return _open(d,w,_generateEventId())}async _openRedirect(d,v,A,C){await this._originValidation(d);const w=await _getRedirectUrl(d,v,A,_getCurrentUrl(),C);return _setWindowLocation(w),new Promise(()=>{})}_initialize(d){const v=d._key();if(this.eventManagers[v]){const{manager:C,promise:w}=this.eventManagers[v];return C?Promise.resolve(C):(debugAssert(w,"If manager is not set, promise should be"),w)}const A=this.initAndGetManager(d);return this.eventManagers[v]={promise:A},A.catch(()=>{delete this.eventManagers[v]}),A}async initAndGetManager(d){const v=await _openIframe(d),A=new AuthEventManager(d);return v.register("authEvent",C=>(_assert(C?.authEvent,d,"invalid-auth-event"),{status:A.onEvent(C.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[d._key()]={manager:A},this.iframes[d._key()]=v,A}_isIframeWebStorageSupported(d,v){this.iframes[d._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},C=>{const w=C?.[0]?.[WEB_STORAGE_SUPPORT_KEY];w!==void 0&&v(!!w),_fail(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const v=d._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=_validateOrigin(d)),this.originValidationPromises[v]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name="@firebase/auth",version$1="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(d){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(d)}:null}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const v=this.auth.onIdTokenChanged(A=>{d(A?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,v),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const v=this.internalListeners.get(d);v&&(this.internalListeners.delete(d),v(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(_){_registerComponent(new Component("auth",(d,{options:v})=>{const A=d.getProvider("app").getImmediate(),C=d.getProvider("heartbeat"),w=d.getProvider("app-check-internal"),{apiKey:T,authDomain:R}=A.options;_assert(T&&!T.includes(":"),"invalid-api-key",{appName:A.name});const G={apiKey:T,authDomain:R,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(_)},I=new AuthImpl(A,C,w,G);return _initializeAuthInstance(I,v),I},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,v,A)=>{d.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",d=>{const v=_castAuth(d.getProvider("auth").getImmediate());return(A=>new AuthInterop(A))(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name,version$1,getVersionForPlatform(_)),registerVersion(name,version$1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=_=>async d=>{const v=d&&await d.getIdTokenResult(),A=v&&(new Date().getTime()-Date.parse(v.issuedAtTime))/1e3;if(A&&A>authIdTokenMaxAge)return;const C=v?.token;lastPostedIdToken!==C&&(lastPostedIdToken=C,await fetch(_,{method:C?"POST":"DELETE",headers:C?{Authorization:`Bearer ${C}`}:{}}))};function getAuth(_=getApp()){const d=_getProvider(_,"auth");if(d.isInitialized())return d.getImmediate();const v=initializeAuth(_,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),A=getExperimentalSetting("authTokenSyncURL");if(A&&typeof isSecureContext=="boolean"&&isSecureContext){const w=new URL(A,location.origin);if(location.origin===w.origin){const T=mintCookieFactory(w.toString());beforeAuthStateChanged(v,T,()=>T(v.currentUser)),onIdTokenChanged(v,R=>T(R))}}const C=getDefaultEmulatorHost("auth");return C&&connectAuthEmulator(v,`http://${C}`),v}function getScriptParentElement(){return document.getElementsByTagName("head")?.[0]??document}_setExternalJSProvider({loadJS(_){return new Promise((d,v)=>{const A=document.createElement("script");A.setAttribute("src",_),A.onload=d,A.onerror=C=>{const w=_createError("internal-error");w.customData=C,v(w)},A.type="text/javascript",A.charset="UTF-8",getScriptParentElement().appendChild(A)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var _;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function d(ve,Me){function we(){}we.prototype=Me.prototype,ve.D=Me.prototype,ve.prototype=new we,ve.prototype.constructor=ve,ve.C=function(Be,De,Fe){for(var Oe=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Oe[Ge-2]=arguments[Ge];return Me.prototype[De].apply(Be,Oe)}}function v(){this.blockSize=-1}function A(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}d(A,v),A.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function C(ve,Me,we){we||(we=0);var Be=Array(16);if(typeof Me=="string")for(var De=0;16>De;++De)Be[De]=Me.charCodeAt(we++)|Me.charCodeAt(we++)<<8|Me.charCodeAt(we++)<<16|Me.charCodeAt(we++)<<24;else for(De=0;16>De;++De)Be[De]=Me[we++]|Me[we++]<<8|Me[we++]<<16|Me[we++]<<24;Me=ve.g[0],we=ve.g[1],De=ve.g[2];var Fe=ve.g[3],Oe=Me+(Fe^we&(De^Fe))+Be[0]+3614090360&4294967295;Me=we+(Oe<<7&4294967295|Oe>>>25),Oe=Fe+(De^Me&(we^De))+Be[1]+3905402710&4294967295,Fe=Me+(Oe<<12&4294967295|Oe>>>20),Oe=De+(we^Fe&(Me^we))+Be[2]+606105819&4294967295,De=Fe+(Oe<<17&4294967295|Oe>>>15),Oe=we+(Me^De&(Fe^Me))+Be[3]+3250441966&4294967295,we=De+(Oe<<22&4294967295|Oe>>>10),Oe=Me+(Fe^we&(De^Fe))+Be[4]+4118548399&4294967295,Me=we+(Oe<<7&4294967295|Oe>>>25),Oe=Fe+(De^Me&(we^De))+Be[5]+1200080426&4294967295,Fe=Me+(Oe<<12&4294967295|Oe>>>20),Oe=De+(we^Fe&(Me^we))+Be[6]+2821735955&4294967295,De=Fe+(Oe<<17&4294967295|Oe>>>15),Oe=we+(Me^De&(Fe^Me))+Be[7]+4249261313&4294967295,we=De+(Oe<<22&4294967295|Oe>>>10),Oe=Me+(Fe^we&(De^Fe))+Be[8]+1770035416&4294967295,Me=we+(Oe<<7&4294967295|Oe>>>25),Oe=Fe+(De^Me&(we^De))+Be[9]+2336552879&4294967295,Fe=Me+(Oe<<12&4294967295|Oe>>>20),Oe=De+(we^Fe&(Me^we))+Be[10]+4294925233&4294967295,De=Fe+(Oe<<17&4294967295|Oe>>>15),Oe=we+(Me^De&(Fe^Me))+Be[11]+2304563134&4294967295,we=De+(Oe<<22&4294967295|Oe>>>10),Oe=Me+(Fe^we&(De^Fe))+Be[12]+1804603682&4294967295,Me=we+(Oe<<7&4294967295|Oe>>>25),Oe=Fe+(De^Me&(we^De))+Be[13]+4254626195&4294967295,Fe=Me+(Oe<<12&4294967295|Oe>>>20),Oe=De+(we^Fe&(Me^we))+Be[14]+2792965006&4294967295,De=Fe+(Oe<<17&4294967295|Oe>>>15),Oe=we+(Me^De&(Fe^Me))+Be[15]+1236535329&4294967295,we=De+(Oe<<22&4294967295|Oe>>>10),Oe=Me+(De^Fe&(we^De))+Be[1]+4129170786&4294967295,Me=we+(Oe<<5&4294967295|Oe>>>27),Oe=Fe+(we^De&(Me^we))+Be[6]+3225465664&4294967295,Fe=Me+(Oe<<9&4294967295|Oe>>>23),Oe=De+(Me^we&(Fe^Me))+Be[11]+643717713&4294967295,De=Fe+(Oe<<14&4294967295|Oe>>>18),Oe=we+(Fe^Me&(De^Fe))+Be[0]+3921069994&4294967295,we=De+(Oe<<20&4294967295|Oe>>>12),Oe=Me+(De^Fe&(we^De))+Be[5]+3593408605&4294967295,Me=we+(Oe<<5&4294967295|Oe>>>27),Oe=Fe+(we^De&(Me^we))+Be[10]+38016083&4294967295,Fe=Me+(Oe<<9&4294967295|Oe>>>23),Oe=De+(Me^we&(Fe^Me))+Be[15]+3634488961&4294967295,De=Fe+(Oe<<14&4294967295|Oe>>>18),Oe=we+(Fe^Me&(De^Fe))+Be[4]+3889429448&4294967295,we=De+(Oe<<20&4294967295|Oe>>>12),Oe=Me+(De^Fe&(we^De))+Be[9]+568446438&4294967295,Me=we+(Oe<<5&4294967295|Oe>>>27),Oe=Fe+(we^De&(Me^we))+Be[14]+3275163606&4294967295,Fe=Me+(Oe<<9&4294967295|Oe>>>23),Oe=De+(Me^we&(Fe^Me))+Be[3]+4107603335&4294967295,De=Fe+(Oe<<14&4294967295|Oe>>>18),Oe=we+(Fe^Me&(De^Fe))+Be[8]+1163531501&4294967295,we=De+(Oe<<20&4294967295|Oe>>>12),Oe=Me+(De^Fe&(we^De))+Be[13]+2850285829&4294967295,Me=we+(Oe<<5&4294967295|Oe>>>27),Oe=Fe+(we^De&(Me^we))+Be[2]+4243563512&4294967295,Fe=Me+(Oe<<9&4294967295|Oe>>>23),Oe=De+(Me^we&(Fe^Me))+Be[7]+1735328473&4294967295,De=Fe+(Oe<<14&4294967295|Oe>>>18),Oe=we+(Fe^Me&(De^Fe))+Be[12]+2368359562&4294967295,we=De+(Oe<<20&4294967295|Oe>>>12),Oe=Me+(we^De^Fe)+Be[5]+4294588738&4294967295,Me=we+(Oe<<4&4294967295|Oe>>>28),Oe=Fe+(Me^we^De)+Be[8]+2272392833&4294967295,Fe=Me+(Oe<<11&4294967295|Oe>>>21),Oe=De+(Fe^Me^we)+Be[11]+1839030562&4294967295,De=Fe+(Oe<<16&4294967295|Oe>>>16),Oe=we+(De^Fe^Me)+Be[14]+4259657740&4294967295,we=De+(Oe<<23&4294967295|Oe>>>9),Oe=Me+(we^De^Fe)+Be[1]+2763975236&4294967295,Me=we+(Oe<<4&4294967295|Oe>>>28),Oe=Fe+(Me^we^De)+Be[4]+1272893353&4294967295,Fe=Me+(Oe<<11&4294967295|Oe>>>21),Oe=De+(Fe^Me^we)+Be[7]+4139469664&4294967295,De=Fe+(Oe<<16&4294967295|Oe>>>16),Oe=we+(De^Fe^Me)+Be[10]+3200236656&4294967295,we=De+(Oe<<23&4294967295|Oe>>>9),Oe=Me+(we^De^Fe)+Be[13]+681279174&4294967295,Me=we+(Oe<<4&4294967295|Oe>>>28),Oe=Fe+(Me^we^De)+Be[0]+3936430074&4294967295,Fe=Me+(Oe<<11&4294967295|Oe>>>21),Oe=De+(Fe^Me^we)+Be[3]+3572445317&4294967295,De=Fe+(Oe<<16&4294967295|Oe>>>16),Oe=we+(De^Fe^Me)+Be[6]+76029189&4294967295,we=De+(Oe<<23&4294967295|Oe>>>9),Oe=Me+(we^De^Fe)+Be[9]+3654602809&4294967295,Me=we+(Oe<<4&4294967295|Oe>>>28),Oe=Fe+(Me^we^De)+Be[12]+3873151461&4294967295,Fe=Me+(Oe<<11&4294967295|Oe>>>21),Oe=De+(Fe^Me^we)+Be[15]+530742520&4294967295,De=Fe+(Oe<<16&4294967295|Oe>>>16),Oe=we+(De^Fe^Me)+Be[2]+3299628645&4294967295,we=De+(Oe<<23&4294967295|Oe>>>9),Oe=Me+(De^(we|~Fe))+Be[0]+4096336452&4294967295,Me=we+(Oe<<6&4294967295|Oe>>>26),Oe=Fe+(we^(Me|~De))+Be[7]+1126891415&4294967295,Fe=Me+(Oe<<10&4294967295|Oe>>>22),Oe=De+(Me^(Fe|~we))+Be[14]+2878612391&4294967295,De=Fe+(Oe<<15&4294967295|Oe>>>17),Oe=we+(Fe^(De|~Me))+Be[5]+4237533241&4294967295,we=De+(Oe<<21&4294967295|Oe>>>11),Oe=Me+(De^(we|~Fe))+Be[12]+1700485571&4294967295,Me=we+(Oe<<6&4294967295|Oe>>>26),Oe=Fe+(we^(Me|~De))+Be[3]+2399980690&4294967295,Fe=Me+(Oe<<10&4294967295|Oe>>>22),Oe=De+(Me^(Fe|~we))+Be[10]+4293915773&4294967295,De=Fe+(Oe<<15&4294967295|Oe>>>17),Oe=we+(Fe^(De|~Me))+Be[1]+2240044497&4294967295,we=De+(Oe<<21&4294967295|Oe>>>11),Oe=Me+(De^(we|~Fe))+Be[8]+1873313359&4294967295,Me=we+(Oe<<6&4294967295|Oe>>>26),Oe=Fe+(we^(Me|~De))+Be[15]+4264355552&4294967295,Fe=Me+(Oe<<10&4294967295|Oe>>>22),Oe=De+(Me^(Fe|~we))+Be[6]+2734768916&4294967295,De=Fe+(Oe<<15&4294967295|Oe>>>17),Oe=we+(Fe^(De|~Me))+Be[13]+1309151649&4294967295,we=De+(Oe<<21&4294967295|Oe>>>11),Oe=Me+(De^(we|~Fe))+Be[4]+4149444226&4294967295,Me=we+(Oe<<6&4294967295|Oe>>>26),Oe=Fe+(we^(Me|~De))+Be[11]+3174756917&4294967295,Fe=Me+(Oe<<10&4294967295|Oe>>>22),Oe=De+(Me^(Fe|~we))+Be[2]+718787259&4294967295,De=Fe+(Oe<<15&4294967295|Oe>>>17),Oe=we+(Fe^(De|~Me))+Be[9]+3951481745&4294967295,ve.g[0]=ve.g[0]+Me&4294967295,ve.g[1]=ve.g[1]+(De+(Oe<<21&4294967295|Oe>>>11))&4294967295,ve.g[2]=ve.g[2]+De&4294967295,ve.g[3]=ve.g[3]+Fe&4294967295}A.prototype.u=function(ve,Me){Me===void 0&&(Me=ve.length);for(var we=Me-this.blockSize,Be=this.B,De=this.h,Fe=0;Fe<Me;){if(De==0)for(;Fe<=we;)C(this,ve,Fe),Fe+=this.blockSize;if(typeof ve=="string"){for(;Fe<Me;)if(Be[De++]=ve.charCodeAt(Fe++),De==this.blockSize){C(this,Be),De=0;break}}else for(;Fe<Me;)if(Be[De++]=ve[Fe++],De==this.blockSize){C(this,Be),De=0;break}}this.h=De,this.o+=Me},A.prototype.v=function(){var ve=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);ve[0]=128;for(var Me=1;Me<ve.length-8;++Me)ve[Me]=0;var we=8*this.o;for(Me=ve.length-8;Me<ve.length;++Me)ve[Me]=we&255,we/=256;for(this.u(ve),ve=Array(16),Me=we=0;4>Me;++Me)for(var Be=0;32>Be;Be+=8)ve[we++]=this.g[Me]>>>Be&255;return ve};function w(ve,Me){var we=R;return Object.prototype.hasOwnProperty.call(we,ve)?we[ve]:we[ve]=Me(ve)}function T(ve,Me){this.h=Me;for(var we=[],Be=!0,De=ve.length-1;0<=De;De--){var Fe=ve[De]|0;Be&&Fe==Me||(we[De]=Fe,Be=!1)}this.g=we}var R={};function G(ve){return-128<=ve&&128>ve?w(ve,function(Me){return new T([Me|0],0>Me?-1:0)}):new T([ve|0],0>ve?-1:0)}function I(ve){if(isNaN(ve)||!isFinite(ve))return H;if(0>ve)return se(I(-ve));for(var Me=[],we=1,Be=0;ve>=we;Be++)Me[Be]=ve/we|0,we*=4294967296;return new T(Me,0)}function z(ve,Me){if(ve.length==0)throw Error("number format error: empty string");if(Me=Me||10,2>Me||36<Me)throw Error("radix out of range: "+Me);if(ve.charAt(0)=="-")return se(z(ve.substring(1),Me));if(0<=ve.indexOf("-"))throw Error('number format error: interior "-" character');for(var we=I(Math.pow(Me,8)),Be=H,De=0;De<ve.length;De+=8){var Fe=Math.min(8,ve.length-De),Oe=parseInt(ve.substring(De,De+Fe),Me);8>Fe?(Fe=I(Math.pow(Me,Fe)),Be=Be.j(Fe).add(I(Oe))):(Be=Be.j(we),Be=Be.add(I(Oe)))}return Be}var H=G(0),Y=G(1),ee=G(16777216);_=T.prototype,_.m=function(){if(oe(this))return-se(this).m();for(var ve=0,Me=1,we=0;we<this.g.length;we++){var Be=this.i(we);ve+=(0<=Be?Be:4294967296+Be)*Me,Me*=4294967296}return ve},_.toString=function(ve){if(ve=ve||10,2>ve||36<ve)throw Error("radix out of range: "+ve);if(ie(this))return"0";if(oe(this))return"-"+se(this).toString(ve);for(var Me=I(Math.pow(ve,6)),we=this,Be="";;){var De=ge(we,Me).g;we=re(we,De.j(Me));var Fe=((0<we.g.length?we.g[0]:we.h)>>>0).toString(ve);if(we=De,ie(we))return Fe+Be;for(;6>Fe.length;)Fe="0"+Fe;Be=Fe+Be}},_.i=function(ve){return 0>ve?0:ve<this.g.length?this.g[ve]:this.h};function ie(ve){if(ve.h!=0)return!1;for(var Me=0;Me<ve.g.length;Me++)if(ve.g[Me]!=0)return!1;return!0}function oe(ve){return ve.h==-1}_.l=function(ve){return ve=re(this,ve),oe(ve)?-1:ie(ve)?0:1};function se(ve){for(var Me=ve.g.length,we=[],Be=0;Be<Me;Be++)we[Be]=~ve.g[Be];return new T(we,~ve.h).add(Y)}_.abs=function(){return oe(this)?se(this):this},_.add=function(ve){for(var Me=Math.max(this.g.length,ve.g.length),we=[],Be=0,De=0;De<=Me;De++){var Fe=Be+(this.i(De)&65535)+(ve.i(De)&65535),Oe=(Fe>>>16)+(this.i(De)>>>16)+(ve.i(De)>>>16);Be=Oe>>>16,Fe&=65535,Oe&=65535,we[De]=Oe<<16|Fe}return new T(we,we[we.length-1]&-2147483648?-1:0)};function re(ve,Me){return ve.add(se(Me))}_.j=function(ve){if(ie(this)||ie(ve))return H;if(oe(this))return oe(ve)?se(this).j(se(ve)):se(se(this).j(ve));if(oe(ve))return se(this.j(se(ve)));if(0>this.l(ee)&&0>ve.l(ee))return I(this.m()*ve.m());for(var Me=this.g.length+ve.g.length,we=[],Be=0;Be<2*Me;Be++)we[Be]=0;for(Be=0;Be<this.g.length;Be++)for(var De=0;De<ve.g.length;De++){var Fe=this.i(Be)>>>16,Oe=this.i(Be)&65535,Ge=ve.i(De)>>>16,ze=ve.i(De)&65535;we[2*Be+2*De]+=Oe*ze,fe(we,2*Be+2*De),we[2*Be+2*De+1]+=Fe*ze,fe(we,2*Be+2*De+1),we[2*Be+2*De+1]+=Oe*Ge,fe(we,2*Be+2*De+1),we[2*Be+2*De+2]+=Fe*Ge,fe(we,2*Be+2*De+2)}for(Be=0;Be<Me;Be++)we[Be]=we[2*Be+1]<<16|we[2*Be];for(Be=Me;Be<2*Me;Be++)we[Be]=0;return new T(we,0)};function fe(ve,Me){for(;(ve[Me]&65535)!=ve[Me];)ve[Me+1]+=ve[Me]>>>16,ve[Me]&=65535,Me++}function ue(ve,Me){this.g=ve,this.h=Me}function ge(ve,Me){if(ie(Me))throw Error("division by zero");if(ie(ve))return new ue(H,H);if(oe(ve))return Me=ge(se(ve),Me),new ue(se(Me.g),se(Me.h));if(oe(Me))return Me=ge(ve,se(Me)),new ue(se(Me.g),Me.h);if(30<ve.g.length){if(oe(ve)||oe(Me))throw Error("slowDivide_ only works with positive integers.");for(var we=Y,Be=Me;0>=Be.l(ve);)we=ye(we),Be=ye(Be);var De=be(we,1),Fe=be(Be,1);for(Be=be(Be,2),we=be(we,2);!ie(Be);){var Oe=Fe.add(Be);0>=Oe.l(ve)&&(De=De.add(we),Fe=Oe),Be=be(Be,1),we=be(we,1)}return Me=re(ve,De.j(Me)),new ue(De,Me)}for(De=H;0<=ve.l(Me);){for(we=Math.max(1,Math.floor(ve.m()/Me.m())),Be=Math.ceil(Math.log(we)/Math.LN2),Be=48>=Be?1:Math.pow(2,Be-48),Fe=I(we),Oe=Fe.j(Me);oe(Oe)||0<Oe.l(ve);)we-=Be,Fe=I(we),Oe=Fe.j(Me);ie(Fe)&&(Fe=Y),De=De.add(Fe),ve=re(ve,Oe)}return new ue(De,ve)}_.A=function(ve){return ge(this,ve).h},_.and=function(ve){for(var Me=Math.max(this.g.length,ve.g.length),we=[],Be=0;Be<Me;Be++)we[Be]=this.i(Be)&ve.i(Be);return new T(we,this.h&ve.h)},_.or=function(ve){for(var Me=Math.max(this.g.length,ve.g.length),we=[],Be=0;Be<Me;Be++)we[Be]=this.i(Be)|ve.i(Be);return new T(we,this.h|ve.h)},_.xor=function(ve){for(var Me=Math.max(this.g.length,ve.g.length),we=[],Be=0;Be<Me;Be++)we[Be]=this.i(Be)^ve.i(Be);return new T(we,this.h^ve.h)};function ye(ve){for(var Me=ve.g.length+1,we=[],Be=0;Be<Me;Be++)we[Be]=ve.i(Be)<<1|ve.i(Be-1)>>>31;return new T(we,ve.h)}function be(ve,Me){var we=Me>>5;Me%=32;for(var Be=ve.g.length-we,De=[],Fe=0;Fe<Be;Fe++)De[Fe]=0<Me?ve.i(Fe+we)>>>Me|ve.i(Fe+we+1)<<32-Me:ve.i(Fe+we);return new T(De,ve.h)}A.prototype.digest=A.prototype.v,A.prototype.reset=A.prototype.s,A.prototype.update=A.prototype.u,Md5=A,T.prototype.add=T.prototype.add,T.prototype.multiply=T.prototype.j,T.prototype.modulo=T.prototype.A,T.prototype.compare=T.prototype.l,T.prototype.toNumber=T.prototype.m,T.prototype.toString=T.prototype.toString,T.prototype.getBits=T.prototype.i,T.fromNumber=I,T.fromString=z,Integer=T}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var _,d=typeof Object.defineProperties=="function"?Object.defineProperty:function(Le,st,zt){return Le==Array.prototype||Le==Object.prototype||(Le[st]=zt.value),Le};function v(Le){Le=[typeof globalThis=="object"&&globalThis,Le,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var st=0;st<Le.length;++st){var zt=Le[st];if(zt&&zt.Math==Math)return zt}throw Error("Cannot find global object")}var A=v(this);function C(Le,st){if(st)e:{var zt=A;Le=Le.split(".");for(var qn=0;qn<Le.length-1;qn++){var zr=Le[qn];if(!(zr in zt))break e;zt=zt[zr]}Le=Le[Le.length-1],qn=zt[Le],st=st(qn),st!=qn&&st!=null&&d(zt,Le,{configurable:!0,writable:!0,value:st})}}function w(Le,st){Le instanceof String&&(Le+="");var zt=0,qn=!1,zr={next:function(){if(!qn&&zt<Le.length){var ii=zt++;return{value:st(ii,Le[ii]),done:!1}}return qn=!0,{done:!0,value:void 0}}};return zr[Symbol.iterator]=function(){return zr},zr}C("Array.prototype.values",function(Le){return Le||function(){return w(this,function(st,zt){return zt})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var T=T||{},R=this||self;function G(Le){var st=typeof Le;return st=st!="object"?st:Le?Array.isArray(Le)?"array":st:"null",st=="array"||st=="object"&&typeof Le.length=="number"}function I(Le){var st=typeof Le;return st=="object"&&Le!=null||st=="function"}function z(Le,st,zt){return Le.call.apply(Le.bind,arguments)}function H(Le,st,zt){if(!Le)throw Error();if(2<arguments.length){var qn=Array.prototype.slice.call(arguments,2);return function(){var zr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(zr,qn),Le.apply(st,zr)}}return function(){return Le.apply(st,arguments)}}function Y(Le,st,zt){return Y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?z:H,Y.apply(null,arguments)}function ee(Le,st){var zt=Array.prototype.slice.call(arguments,1);return function(){var qn=zt.slice();return qn.push.apply(qn,arguments),Le.apply(this,qn)}}function ie(Le,st){function zt(){}zt.prototype=st.prototype,Le.aa=st.prototype,Le.prototype=new zt,Le.prototype.constructor=Le,Le.Qb=function(qn,zr,ii){for(var Pi=Array(arguments.length-2),xa=2;xa<arguments.length;xa++)Pi[xa-2]=arguments[xa];return st.prototype[zr].apply(qn,Pi)}}function oe(Le){const st=Le.length;if(0<st){const zt=Array(st);for(let qn=0;qn<st;qn++)zt[qn]=Le[qn];return zt}return[]}function se(Le,st){for(let zt=1;zt<arguments.length;zt++){const qn=arguments[zt];if(G(qn)){const zr=Le.length||0,ii=qn.length||0;Le.length=zr+ii;for(let Pi=0;Pi<ii;Pi++)Le[zr+Pi]=qn[Pi]}else Le.push(qn)}}class re{constructor(st,zt){this.i=st,this.j=zt,this.h=0,this.g=null}get(){let st;return 0<this.h?(this.h--,st=this.g,this.g=st.next,st.next=null):st=this.i(),st}}function fe(Le){return/^[\s\xa0]*$/.test(Le)}function ue(){var Le=R.navigator;return Le&&(Le=Le.userAgent)?Le:""}function ge(Le){return ge[" "](Le),Le}ge[" "]=function(){};var ye=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function be(Le,st,zt){for(const qn in Le)st.call(zt,Le[qn],qn,Le)}function ve(Le,st){for(const zt in Le)st.call(void 0,Le[zt],zt,Le)}function Me(Le){const st={};for(const zt in Le)st[zt]=Le[zt];return st}const we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Be(Le,st){let zt,qn;for(let zr=1;zr<arguments.length;zr++){qn=arguments[zr];for(zt in qn)Le[zt]=qn[zt];for(let ii=0;ii<we.length;ii++)zt=we[ii],Object.prototype.hasOwnProperty.call(qn,zt)&&(Le[zt]=qn[zt])}}function De(Le){var st=1;Le=Le.split(":");const zt=[];for(;0<st&&Le.length;)zt.push(Le.shift()),st--;return Le.length&&zt.push(Le.join(":")),zt}function Fe(Le){R.setTimeout(()=>{throw Le},0)}function Oe(){var Le=$e;let st=null;return Le.g&&(st=Le.g,Le.g=Le.g.next,Le.g||(Le.h=null),st.next=null),st}class Ge{constructor(){this.h=this.g=null}add(st,zt){const qn=ze.get();qn.set(st,zt),this.h?this.h.next=qn:this.g=qn,this.h=qn}}var ze=new re(()=>new je,Le=>Le.reset());class je{constructor(){this.next=this.g=this.h=null}set(st,zt){this.h=st,this.g=zt,this.next=null}reset(){this.next=this.g=this.h=null}}let He,Xe=!1,$e=new Ge,We=()=>{const Le=R.Promise.resolve(void 0);He=()=>{Le.then(nt)}};var nt=()=>{for(var Le;Le=Oe();){try{Le.h.call(Le.g)}catch(zt){Fe(zt)}var st=ze;st.j(Le),100>st.h&&(st.h++,Le.next=st.g,st.g=Le)}Xe=!1};function Qt(){this.s=this.s,this.C=this.C}Qt.prototype.s=!1,Qt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Wt(Le,st){this.type=Le,this.g=this.target=st,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var Bn=function(){if(!R.addEventListener||!Object.defineProperty)return!1;var Le=!1,st=Object.defineProperty({},"passive",{get:function(){Le=!0}});try{const zt=()=>{};R.addEventListener("test",zt,st),R.removeEventListener("test",zt,st)}catch{}return Le}();function Lt(Le,st){if(Wt.call(this,Le?Le.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,Le){var zt=this.type=Le.type,qn=Le.changedTouches&&Le.changedTouches.length?Le.changedTouches[0]:null;if(this.target=Le.target||Le.srcElement,this.g=st,st=Le.relatedTarget){if(ye){e:{try{ge(st.nodeName);var zr=!0;break e}catch{}zr=!1}zr||(st=null)}}else zt=="mouseover"?st=Le.fromElement:zt=="mouseout"&&(st=Le.toElement);this.relatedTarget=st,qn?(this.clientX=qn.clientX!==void 0?qn.clientX:qn.pageX,this.clientY=qn.clientY!==void 0?qn.clientY:qn.pageY,this.screenX=qn.screenX||0,this.screenY=qn.screenY||0):(this.clientX=Le.clientX!==void 0?Le.clientX:Le.pageX,this.clientY=Le.clientY!==void 0?Le.clientY:Le.pageY,this.screenX=Le.screenX||0,this.screenY=Le.screenY||0),this.button=Le.button,this.key=Le.key||"",this.ctrlKey=Le.ctrlKey,this.altKey=Le.altKey,this.shiftKey=Le.shiftKey,this.metaKey=Le.metaKey,this.pointerId=Le.pointerId||0,this.pointerType=typeof Le.pointerType=="string"?Le.pointerType:Mn[Le.pointerType]||"",this.state=Le.state,this.i=Le,Le.defaultPrevented&&Lt.aa.h.call(this)}}ie(Lt,Wt);var Mn={2:"touch",3:"pen",4:"mouse"};Lt.prototype.h=function(){Lt.aa.h.call(this);var Le=this.i;Le.preventDefault?Le.preventDefault():Le.returnValue=!1};var cr="closure_listenable_"+(1e6*Math.random()|0),In=0;function Zn(Le,st,zt,qn,zr){this.listener=Le,this.proxy=null,this.src=st,this.type=zt,this.capture=!!qn,this.ha=zr,this.key=++In,this.da=this.fa=!1}function $n(Le){Le.da=!0,Le.listener=null,Le.proxy=null,Le.src=null,Le.ha=null}function Rn(Le){this.src=Le,this.g={},this.h=0}Rn.prototype.add=function(Le,st,zt,qn,zr){var ii=Le.toString();Le=this.g[ii],Le||(Le=this.g[ii]=[],this.h++);var Pi=Gt(Le,st,qn,zr);return-1<Pi?(st=Le[Pi],zt||(st.fa=!1)):(st=new Zn(st,this.src,ii,!!qn,zr),st.fa=zt,Le.push(st)),st};function Dn(Le,st){var zt=st.type;if(zt in Le.g){var qn=Le.g[zt],zr=Array.prototype.indexOf.call(qn,st,void 0),ii;(ii=0<=zr)&&Array.prototype.splice.call(qn,zr,1),ii&&($n(st),Le.g[zt].length==0&&(delete Le.g[zt],Le.h--))}}function Gt(Le,st,zt,qn){for(var zr=0;zr<Le.length;++zr){var ii=Le[zr];if(!ii.da&&ii.listener==st&&ii.capture==!!zt&&ii.ha==qn)return zr}return-1}var Jn="closure_lm_"+(1e6*Math.random()|0),Nn={};function Xn(Le,st,zt,qn,zr){if(Array.isArray(st)){for(var ii=0;ii<st.length;ii++)Xn(Le,st[ii],zt,qn,zr);return null}return zt=yn(zt),Le&&Le[cr]?Le.K(st,zt,I(qn)?!!qn.capture:!1,zr):jn(Le,st,zt,!1,qn,zr)}function jn(Le,st,zt,qn,zr,ii){if(!st)throw Error("Invalid event type");var Pi=I(zr)?!!zr.capture:!!zr,xa=fn(Le);if(xa||(Le[Jn]=xa=new Rn(Le)),zt=xa.add(st,zt,qn,Pi,ii),zt.proxy)return zt;if(qn=Un(),zt.proxy=qn,qn.src=Le,qn.listener=zt,Le.addEventListener)Bn||(zr=Pi),zr===void 0&&(zr=!1),Le.addEventListener(st.toString(),qn,zr);else if(Le.attachEvent)Le.attachEvent(Qn(st.toString()),qn);else if(Le.addListener&&Le.removeListener)Le.addListener(qn);else throw Error("addEventListener and attachEvent are unavailable.");return zt}function Un(){function Le(zt){return st.call(Le.src,Le.listener,zt)}const st=pr;return Le}function bn(Le,st,zt,qn,zr){if(Array.isArray(st))for(var ii=0;ii<st.length;ii++)bn(Le,st[ii],zt,qn,zr);else qn=I(qn)?!!qn.capture:!!qn,zt=yn(zt),Le&&Le[cr]?(Le=Le.i,st=String(st).toString(),st in Le.g&&(ii=Le.g[st],zt=Gt(ii,zt,qn,zr),-1<zt&&($n(ii[zt]),Array.prototype.splice.call(ii,zt,1),ii.length==0&&(delete Le.g[st],Le.h--)))):Le&&(Le=fn(Le))&&(st=Le.g[st.toString()],Le=-1,st&&(Le=Gt(st,zt,qn,zr)),(zt=-1<Le?st[Le]:null)&&Kn(zt))}function Kn(Le){if(typeof Le!="number"&&Le&&!Le.da){var st=Le.src;if(st&&st[cr])Dn(st.i,Le);else{var zt=Le.type,qn=Le.proxy;st.removeEventListener?st.removeEventListener(zt,qn,Le.capture):st.detachEvent?st.detachEvent(Qn(zt),qn):st.addListener&&st.removeListener&&st.removeListener(qn),(zt=fn(st))?(Dn(zt,Le),zt.h==0&&(zt.src=null,st[Jn]=null)):$n(Le)}}}function Qn(Le){return Le in Nn?Nn[Le]:Nn[Le]="on"+Le}function pr(Le,st){if(Le.da)Le=!0;else{st=new Lt(st,this);var zt=Le.listener,qn=Le.ha||Le.src;Le.fa&&Kn(Le),Le=zt.call(qn,st)}return Le}function fn(Le){return Le=Le[Jn],Le instanceof Rn?Le:null}var Mt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(Le){return typeof Le=="function"?Le:(Le[Mt]||(Le[Mt]=function(st){return Le.handleEvent(st)}),Le[Mt])}function kn(){Qt.call(this),this.i=new Rn(this),this.M=this,this.F=null}ie(kn,Qt),kn.prototype[cr]=!0,kn.prototype.removeEventListener=function(Le,st,zt,qn){bn(this,Le,st,zt,qn)};function nr(Le,st){var zt,qn=Le.F;if(qn)for(zt=[];qn;qn=qn.F)zt.push(qn);if(Le=Le.M,qn=st.type||st,typeof st=="string")st=new Wt(st,Le);else if(st instanceof Wt)st.target=st.target||Le;else{var zr=st;st=new Wt(qn,Le),Be(st,zr)}if(zr=!0,zt)for(var ii=zt.length-1;0<=ii;ii--){var Pi=st.g=zt[ii];zr=dr(Pi,qn,!0,st)&&zr}if(Pi=st.g=Le,zr=dr(Pi,qn,!0,st)&&zr,zr=dr(Pi,qn,!1,st)&&zr,zt)for(ii=0;ii<zt.length;ii++)Pi=st.g=zt[ii],zr=dr(Pi,qn,!1,st)&&zr}kn.prototype.N=function(){if(kn.aa.N.call(this),this.i){var Le=this.i,st;for(st in Le.g){for(var zt=Le.g[st],qn=0;qn<zt.length;qn++)$n(zt[qn]);delete Le.g[st],Le.h--}}this.F=null},kn.prototype.K=function(Le,st,zt,qn){return this.i.add(String(Le),st,!1,zt,qn)},kn.prototype.L=function(Le,st,zt,qn){return this.i.add(String(Le),st,!0,zt,qn)};function dr(Le,st,zt,qn){if(st=Le.i.g[String(st)],!st)return!0;st=st.concat();for(var zr=!0,ii=0;ii<st.length;++ii){var Pi=st[ii];if(Pi&&!Pi.da&&Pi.capture==zt){var xa=Pi.listener,da=Pi.ha||Pi.src;Pi.fa&&Dn(Le.i,Pi),zr=xa.call(da,qn)!==!1&&zr}}return zr&&!qn.defaultPrevented}function Qr(Le,st,zt){if(typeof Le=="function")zt&&(Le=Y(Le,zt));else if(Le&&typeof Le.handleEvent=="function")Le=Y(Le.handleEvent,Le);else throw Error("Invalid listener argument");return 2147483647<Number(st)?-1:R.setTimeout(Le,st||0)}function Wr(Le){Le.g=Qr(()=>{Le.g=null,Le.i&&(Le.i=!1,Wr(Le))},Le.l);const st=Le.h;Le.h=null,Le.m.apply(null,st)}class Gr extends Qt{constructor(st,zt){super(),this.m=st,this.l=zt,this.h=null,this.i=!1,this.g=null}j(st){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(R.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hr(Le){Qt.call(this),this.h=Le,this.g={}}ie(Hr,Qt);var Kr=[];function ti(Le){be(Le.g,function(st,zt){this.g.hasOwnProperty(zt)&&Kn(st)},Le),Le.g={}}Hr.prototype.N=function(){Hr.aa.N.call(this),ti(this)},Hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mi=R.JSON.stringify,Ci=R.JSON.parse,oi=class{stringify(Le){return R.JSON.stringify(Le,void 0)}parse(Le){return R.JSON.parse(Le,void 0)}};function Ii(){}Ii.prototype.h=null;function wr(Le){return Le.h||(Le.h=Le.i())}function Br(){}var ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){Wt.call(this,"d")}ie(vi,Wt);function qr(){Wt.call(this,"c")}ie(qr,Wt);var br={},er=null;function Gn(){return er=er||new kn}br.La="serverreachability";function Er(Le){Wt.call(this,br.La,Le)}ie(Er,Wt);function mn(Le){const st=Gn();nr(st,new Er(st))}br.STAT_EVENT="statevent";function tr(Le,st){Wt.call(this,br.STAT_EVENT,Le),this.stat=st}ie(tr,Wt);function vr(Le){const st=Gn();nr(st,new tr(st,Le))}br.Ma="timingevent";function Ar(Le,st){Wt.call(this,br.Ma,Le),this.size=st}ie(Ar,Wt);function Tn(Le,st){if(typeof Le!="function")throw Error("Fn must not be null and must be a function");return R.setTimeout(function(){Le()},st)}function tt(){this.g=!0}tt.prototype.xa=function(){this.g=!1};function $t(Le,st,zt,qn,zr,ii){Le.info(function(){if(Le.g)if(ii)for(var Pi="",xa=ii.split("&"),da=0;da<xa.length;da++){var Aa=xa[da].split("=");if(1<Aa.length){var ns=Aa[0];Aa=Aa[1];var ds=ns.split("_");Pi=2<=ds.length&&ds[1]=="type"?Pi+(ns+"="+Aa+"&"):Pi+(ns+"=redacted&")}}else Pi=null;else Pi=ii;return"XMLHTTP REQ ("+qn+") [attempt "+zr+"]: "+st+`
`+zt+`
`+Pi})}function dn(Le,st,zt,qn,zr,ii,Pi){Le.info(function(){return"XMLHTTP RESP ("+qn+") [ attempt "+zr+"]: "+st+`
`+zt+`
`+ii+" "+Pi})}function Qe(Le,st,zt,qn){Le.info(function(){return"XMLHTTP TEXT ("+st+"): "+sr(Le,zt)+(qn?" "+qn:"")})}function gn(Le,st){Le.info(function(){return"TIMEOUT: "+st})}tt.prototype.info=function(){};function sr(Le,st){if(!Le.g)return st;if(!st)return null;try{var zt=JSON.parse(st);if(zt){for(Le=0;Le<zt.length;Le++)if(Array.isArray(zt[Le])){var qn=zt[Le];if(!(2>qn.length)){var zr=qn[1];if(Array.isArray(zr)&&!(1>zr.length)){var ii=zr[0];if(ii!="noop"&&ii!="stop"&&ii!="close")for(var Pi=1;Pi<zr.length;Pi++)zr[Pi]=""}}}}return Mi(zt)}catch{return st}}var rr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},it={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},At;function An(){}ie(An,Ii),An.prototype.g=function(){return new XMLHttpRequest},An.prototype.i=function(){return{}},At=new An;function Ft(Le,st,zt,qn){this.j=Le,this.i=st,this.l=zt,this.R=qn||1,this.U=new Hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hn}function Hn(){this.i=null,this.g="",this.h=!1}var wn={},lr={};function rt(Le,st,zt){Le.L=1,Le.v=gi(vn(st)),Le.m=zt,Le.P=!0,ln(Le,null)}function ln(Le,st){Le.F=Date.now(),Sn(Le),Le.A=vn(Le.v);var zt=Le.A,qn=Le.R;Array.isArray(qn)||(qn=[String(qn)]),Ba(zt.i,"t",qn),Le.C=0,zt=Le.j.J,Le.h=new Hn,Le.g=xs(Le.j,zt?st:null,!Le.m),0<Le.O&&(Le.M=new Gr(Y(Le.Y,Le,Le.g),Le.O)),st=Le.U,zt=Le.g,qn=Le.ca;var zr="readystatechange";Array.isArray(zr)||(zr&&(Kr[0]=zr.toString()),zr=Kr);for(var ii=0;ii<zr.length;ii++){var Pi=Xn(zt,zr[ii],qn||st.handleEvent,!1,st.h||st);if(!Pi)break;st.g[Pi.key]=Pi}st=Le.H?Me(Le.H):{},Le.m?(Le.u||(Le.u="POST"),st["Content-Type"]="application/x-www-form-urlencoded",Le.g.ea(Le.A,Le.u,Le.m,st)):(Le.u="GET",Le.g.ea(Le.A,Le.u,null,st)),mn(),$t(Le.i,Le.u,Le.A,Le.l,Le.R,Le.m)}Ft.prototype.ca=function(Le){Le=Le.target;const st=this.M;st&&Di(Le)==3?st.j():this.Y(Le)},Ft.prototype.Y=function(Le){try{if(Le==this.g)e:{const ds=Di(this.g);var st=this.g.Ba();const ps=this.g.Z();if(!(3>ds)&&(ds!=3||this.g&&(this.h.h||this.g.oa()||Xi(this.g)))){this.J||ds!=4||st==7||(st==8||0>=ps?mn(3):mn(2)),ur(this);var zt=this.g.Z();this.X=zt;t:if(Cn(this)){var qn=Xi(this.g);Le="";var zr=qn.length,ii=Di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fr(this),hr(this);var Pi="";break t}this.h.i=new R.TextDecoder}for(st=0;st<zr;st++)this.h.h=!0,Le+=this.h.i.decode(qn[st],{stream:!(ii&&st==zr-1)});qn.length=0,this.h.g+=Le,this.C=0,Pi=this.h.g}else Pi=this.g.oa();if(this.o=zt==200,dn(this.i,this.u,this.A,this.l,this.R,ds,zt),this.o){if(this.T&&!this.K){t:{if(this.g){var xa,da=this.g;if((xa=da.g?da.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fe(xa)){var Aa=xa;break t}}Aa=null}if(zt=Aa)Qe(this.i,this.l,zt,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sr(this,zt);else{this.o=!1,this.s=3,vr(12),fr(this),hr(this);break e}}if(this.P){zt=!0;let Is;for(;!this.J&&this.C<Pi.length;)if(Is=zn(this,Pi),Is==lr){ds==4&&(this.s=4,vr(14),zt=!1),Qe(this.i,this.l,null,"[Incomplete Response]");break}else if(Is==wn){this.s=4,vr(15),Qe(this.i,this.l,Pi,"[Invalid Chunk]"),zt=!1;break}else Qe(this.i,this.l,Is,null),Sr(this,Is);if(Cn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ds!=4||Pi.length!=0||this.h.h||(this.s=1,vr(16),zt=!1),this.o=this.o&&zt,!zt)Qe(this.i,this.l,Pi,"[Invalid Chunked Response]"),fr(this),hr(this);else if(0<Pi.length&&!this.W){this.W=!0;var ns=this.j;ns.g==this&&ns.ba&&!ns.M&&(ns.j.info("Great, no buffering proxy detected. Bytes received: "+Pi.length),va(ns),ns.M=!0,vr(11))}}else Qe(this.i,this.l,Pi,null),Sr(this,Pi);ds==4&&fr(this),this.o&&!this.J&&(ds==4?Za(this.j,this):(this.o=!1,Sn(this)))}else On(this.g),zt==400&&0<Pi.indexOf("Unknown SID")?(this.s=3,vr(12)):(this.s=0,vr(13)),fr(this),hr(this)}}}catch{}finally{}};function Cn(Le){return Le.g?Le.u=="GET"&&Le.L!=2&&Le.j.Ca:!1}function zn(Le,st){var zt=Le.C,qn=st.indexOf(`
`,zt);return qn==-1?lr:(zt=Number(st.substring(zt,qn)),isNaN(zt)?wn:(qn+=1,qn+zt>st.length?lr:(st=st.slice(qn,qn+zt),Le.C=qn+zt,st)))}Ft.prototype.cancel=function(){this.J=!0,fr(this)};function Sn(Le){Le.S=Date.now()+Le.I,yr(Le,Le.I)}function yr(Le,st){if(Le.B!=null)throw Error("WatchDog timer not null");Le.B=Tn(Y(Le.ba,Le),st)}function ur(Le){Le.B&&(R.clearTimeout(Le.B),Le.B=null)}Ft.prototype.ba=function(){this.B=null;const Le=Date.now();0<=Le-this.S?(gn(this.i,this.A),this.L!=2&&(mn(),vr(17)),fr(this),this.s=2,hr(this)):yr(this,this.S-Le)};function hr(Le){Le.j.G==0||Le.J||Za(Le.j,Le)}function fr(Le){ur(Le);var st=Le.M;st&&typeof st.ma=="function"&&st.ma(),Le.M=null,ti(Le.U),Le.g&&(st=Le.g,Le.g=null,st.abort(),st.ma())}function Sr(Le,st){try{var zt=Le.j;if(zt.G!=0&&(zt.g==Le||Or(zt.h,Le))){if(!Le.K&&Or(zt.h,Le)&&zt.G==3){try{var qn=zt.Da.g.parse(st)}catch{qn=null}if(Array.isArray(qn)&&qn.length==3){var zr=qn;if(zr[0]==0){e:if(!zt.u){if(zt.g)if(zt.g.F+3e3<Le.F)Ts(zt),Ei(zt);else break e;Fa(zt),vr(18)}}else zt.za=zr[1],0<zt.za-zt.T&&37500>zr[2]&&zt.F&&zt.v==0&&!zt.C&&(zt.C=Tn(Y(zt.Za,zt),6e3));if(1>=Cr(zt.h)&&zt.ca){try{zt.ca()}catch{}zt.ca=void 0}}else us(zt,11)}else if((Le.K||zt.g==Le)&&Ts(zt),!fe(st))for(zr=zt.Da.g.parse(st),st=0;st<zr.length;st++){let Aa=zr[st];if(zt.T=Aa[0],Aa=Aa[1],zt.G==2)if(Aa[0]=="c"){zt.K=Aa[1],zt.ia=Aa[2];const ns=Aa[3];ns!=null&&(zt.la=ns,zt.j.info("VER="+zt.la));const ds=Aa[4];ds!=null&&(zt.Aa=ds,zt.j.info("SVER="+zt.Aa));const ps=Aa[5];ps!=null&&typeof ps=="number"&&0<ps&&(qn=1.5*ps,zt.L=qn,zt.j.info("backChannelRequestTimeoutMs_="+qn)),qn=zt;const Is=Le.g;if(Is){const oo=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var ii=qn.h;ii.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(ii.j=ii.l,ii.g=new Set,ii.h&&(Ur(ii,ii.h),ii.h=null))}if(qn.D){const hc=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;hc&&(qn.ya=hc,kr(qn.I,qn.D,hc))}}zt.G=3,zt.l&&zt.l.ua(),zt.ba&&(zt.R=Date.now()-Le.F,zt.j.info("Handshake RTT: "+zt.R+"ms")),qn=zt;var Pi=Le;if(qn.qa=Ao(qn,qn.J?qn.ia:null,qn.W),Pi.K){Pr(qn.h,Pi);var xa=Pi,da=qn.L;da&&(xa.I=da),xa.B&&(ur(xa),Sn(xa)),qn.g=Pi}else qa(qn);0<zt.i.length&&Ri(zt)}else Aa[0]!="stop"&&Aa[0]!="close"||us(zt,7);else zt.G==3&&(Aa[0]=="stop"||Aa[0]=="close"?Aa[0]=="stop"?us(zt,7):Xr(zt):Aa[0]!="noop"&&zt.l&&zt.l.ta(Aa),zt.v=0)}}mn(4)}catch{}}var Lr=class{constructor(Le,st){this.g=Le,this.map=st}};function Nr(Le){this.l=Le||10,R.PerformanceNavigationTiming?(Le=R.performance.getEntriesByType("navigation"),Le=0<Le.length&&(Le[0].nextHopProtocol=="hq"||Le[0].nextHopProtocol=="h2")):Le=!!(R.chrome&&R.chrome.loadTimes&&R.chrome.loadTimes()&&R.chrome.loadTimes().wasFetchedViaSpdy),this.j=Le?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xr(Le){return Le.h?!0:Le.g?Le.g.size>=Le.j:!1}function Cr(Le){return Le.h?1:Le.g?Le.g.size:0}function Or(Le,st){return Le.h?Le.h==st:Le.g?Le.g.has(st):!1}function Ur(Le,st){Le.g?Le.g.add(st):Le.h=st}function Pr(Le,st){Le.h&&Le.h==st?Le.h=null:Le.g&&Le.g.has(st)&&Le.g.delete(st)}Nr.prototype.cancel=function(){if(this.i=Vr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const Le of this.g.values())Le.cancel();this.g.clear()}};function Vr(Le){if(Le.h!=null)return Le.i.concat(Le.h.D);if(Le.g!=null&&Le.g.size!==0){let st=Le.i;for(const zt of Le.g.values())st=st.concat(zt.D);return st}return oe(Le.i)}function xi(Le){if(Le.V&&typeof Le.V=="function")return Le.V();if(typeof Map<"u"&&Le instanceof Map||typeof Set<"u"&&Le instanceof Set)return Array.from(Le.values());if(typeof Le=="string")return Le.split("");if(G(Le)){for(var st=[],zt=Le.length,qn=0;qn<zt;qn++)st.push(Le[qn]);return st}st=[],zt=0;for(qn in Le)st[zt++]=Le[qn];return st}function Ai(Le){if(Le.na&&typeof Le.na=="function")return Le.na();if(!Le.V||typeof Le.V!="function"){if(typeof Map<"u"&&Le instanceof Map)return Array.from(Le.keys());if(!(typeof Set<"u"&&Le instanceof Set)){if(G(Le)||typeof Le=="string"){var st=[];Le=Le.length;for(var zt=0;zt<Le;zt++)st.push(zt);return st}st=[],zt=0;for(const qn in Le)st[zt++]=qn;return st}}}function Ti(Le,st){if(Le.forEach&&typeof Le.forEach=="function")Le.forEach(st,void 0);else if(G(Le)||typeof Le=="string")Array.prototype.forEach.call(Le,st,void 0);else for(var zt=Ai(Le),qn=xi(Le),zr=qn.length,ii=0;ii<zr;ii++)st.call(void 0,qn[ii],zt&&zt[ii],Le)}var Si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ir(Le,st){if(Le){Le=Le.split("&");for(var zt=0;zt<Le.length;zt++){var qn=Le[zt].indexOf("="),zr=null;if(0<=qn){var ii=Le[zt].substring(0,qn);zr=Le[zt].substring(qn+1)}else ii=Le[zt];st(ii,zr?decodeURIComponent(zr.replace(/\+/g," ")):"")}}}function bi(Le){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,Le instanceof bi){this.h=Le.h,Ln(this,Le.j),this.o=Le.o,this.g=Le.g,ar(this,Le.s),this.l=Le.l;var st=Le.i,zt=new Oi;zt.i=st.i,st.g&&(zt.g=new Map(st.g),zt.h=st.h),Mr(this,zt),this.m=Le.m}else Le&&(st=String(Le).match(Si))?(this.h=!1,Ln(this,st[1]||"",!0),this.o=di(st[2]||""),this.g=di(st[3]||"",!0),ar(this,st[4]),this.l=di(st[5]||"",!0),Mr(this,st[6]||"",!0),this.m=di(st[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}bi.prototype.toString=function(){var Le=[],st=this.j;st&&Le.push(_i(st,fi,!0),":");var zt=this.g;return(zt||st=="file")&&(Le.push("//"),(st=this.o)&&Le.push(_i(st,fi,!0),"@"),Le.push(encodeURIComponent(String(zt)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),zt=this.s,zt!=null&&Le.push(":",String(zt))),(zt=this.l)&&(this.g&&zt.charAt(0)!="/"&&Le.push("/"),Le.push(_i(zt,zt.charAt(0)=="/"?Ki:qi,!0))),(zt=this.i.toString())&&Le.push("?",zt),(zt=this.m)&&Le.push("#",_i(zt,wi)),Le.join("")};function vn(Le){return new bi(Le)}function Ln(Le,st,zt){Le.j=zt?di(st,!0):st,Le.j&&(Le.j=Le.j.replace(/:$/,""))}function ar(Le,st){if(st){if(st=Number(st),isNaN(st)||0>st)throw Error("Bad port number "+st);Le.s=st}else Le.s=null}function Mr(Le,st,zt){st instanceof Oi?(Le.i=st,Ua(Le.i,Le.h)):(zt||(st=_i(st,$i)),Le.i=new Oi(st,Le.h))}function kr(Le,st,zt){Le.i.set(st,zt)}function gi(Le){return kr(Le,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),Le}function di(Le,st){return Le?st?decodeURI(Le.replace(/%25/g,"%2525")):decodeURIComponent(Le):""}function _i(Le,st,zt){return typeof Le=="string"?(Le=encodeURI(Le).replace(st,Hi),zt&&(Le=Le.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Le):null}function Hi(Le){return Le=Le.charCodeAt(0),"%"+(Le>>4&15).toString(16)+(Le&15).toString(16)}var fi=/[#\/\?@]/g,qi=/[#\?:]/g,Ki=/[#\?]/g,$i=/[#\?@]/g,wi=/#/g;function Oi(Le,st){this.h=this.g=null,this.i=Le||null,this.j=!!st}function Gi(Le){Le.g||(Le.g=new Map,Le.h=0,Le.i&&ir(Le.i,function(st,zt){Le.add(decodeURIComponent(st.replace(/\+/g," ")),zt)}))}_=Oi.prototype,_.add=function(Le,st){Gi(this),this.i=null,Le=ta(this,Le);var zt=this.g.get(Le);return zt||this.g.set(Le,zt=[]),zt.push(st),this.h+=1,this};function wa(Le,st){Gi(Le),st=ta(Le,st),Le.g.has(st)&&(Le.i=null,Le.h-=Le.g.get(st).length,Le.g.delete(st))}function Fi(Le,st){return Gi(Le),st=ta(Le,st),Le.g.has(st)}_.forEach=function(Le,st){Gi(this),this.g.forEach(function(zt,qn){zt.forEach(function(zr){Le.call(st,zr,qn,this)},this)},this)},_.na=function(){Gi(this);const Le=Array.from(this.g.values()),st=Array.from(this.g.keys()),zt=[];for(let qn=0;qn<st.length;qn++){const zr=Le[qn];for(let ii=0;ii<zr.length;ii++)zt.push(st[qn])}return zt},_.V=function(Le){Gi(this);let st=[];if(typeof Le=="string")Fi(this,Le)&&(st=st.concat(this.g.get(ta(this,Le))));else{Le=Array.from(this.g.values());for(let zt=0;zt<Le.length;zt++)st=st.concat(Le[zt])}return st},_.set=function(Le,st){return Gi(this),this.i=null,Le=ta(this,Le),Fi(this,Le)&&(this.h-=this.g.get(Le).length),this.g.set(Le,[st]),this.h+=1,this},_.get=function(Le,st){return Le?(Le=this.V(Le),0<Le.length?String(Le[0]):st):st};function Ba(Le,st,zt){wa(Le,st),0<zt.length&&(Le.i=null,Le.g.set(ta(Le,st),oe(zt)),Le.h+=zt.length)}_.toString=function(){if(this.i)return this.i;if(!this.g)return"";const Le=[],st=Array.from(this.g.keys());for(var zt=0;zt<st.length;zt++){var qn=st[zt];const ii=encodeURIComponent(String(qn)),Pi=this.V(qn);for(qn=0;qn<Pi.length;qn++){var zr=ii;Pi[qn]!==""&&(zr+="="+encodeURIComponent(String(Pi[qn]))),Le.push(zr)}}return this.i=Le.join("&")};function ta(Le,st){return st=String(st),Le.j&&(st=st.toLowerCase()),st}function Ua(Le,st){st&&!Le.j&&(Gi(Le),Le.i=null,Le.g.forEach(function(zt,qn){var zr=qn.toLowerCase();qn!=zr&&(wa(this,qn),Ba(this,zr,zt))},Le)),Le.j=st}function Ss(Le,st){const zt=new tt;if(R.Image){const qn=new Image;qn.onload=ee(Cs,zt,"TestLoadImage: loaded",!0,st,qn),qn.onerror=ee(Cs,zt,"TestLoadImage: error",!1,st,qn),qn.onabort=ee(Cs,zt,"TestLoadImage: abort",!1,st,qn),qn.ontimeout=ee(Cs,zt,"TestLoadImage: timeout",!1,st,qn),R.setTimeout(function(){qn.ontimeout&&qn.ontimeout()},1e4),qn.src=Le}else st(!1)}function Gs(Le,st){const zt=new tt,qn=new AbortController,zr=setTimeout(()=>{qn.abort(),Cs(zt,"TestPingServer: timeout",!1,st)},1e4);fetch(Le,{signal:qn.signal}).then(ii=>{clearTimeout(zr),ii.ok?Cs(zt,"TestPingServer: ok",!0,st):Cs(zt,"TestPingServer: server error",!1,st)}).catch(()=>{clearTimeout(zr),Cs(zt,"TestPingServer: error",!1,st)})}function Cs(Le,st,zt,qn,zr){try{zr&&(zr.onload=null,zr.onerror=null,zr.onabort=null,zr.ontimeout=null),qn(zt)}catch{}}function ko(){this.g=new oi}function ws(Le,st,zt){const qn=zt||"";try{Ti(Le,function(zr,ii){let Pi=zr;I(zr)&&(Pi=Mi(zr)),st.push(qn+ii+"="+encodeURIComponent(Pi))})}catch(zr){throw st.push(qn+"type="+encodeURIComponent("_badmap")),zr}}function No(Le){this.l=Le.Ub||null,this.j=Le.eb||!1}ie(No,Ii),No.prototype.g=function(){return new po(this.l,this.j)},No.prototype.i=function(Le){return function(){return Le}}({});function po(Le,st){kn.call(this),this.D=Le,this.o=st,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}ie(po,kn),_=po.prototype,_.open=function(Le,st){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=Le,this.A=st,this.readyState=1,ha(this)},_.send=function(Le){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const st={headers:this.u,method:this.B,credentials:this.m,cache:void 0};Le&&(st.body=Le),(this.D||R).fetch(new Request(this.A,st)).then(this.Sa.bind(this),this.ga.bind(this))},_.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Da(this)),this.readyState=0},_.Sa=function(Le){if(this.g&&(this.l=Le,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=Le.headers,this.readyState=2,ha(this)),this.g&&(this.readyState=3,ha(this),this.g)))if(this.responseType==="arraybuffer")Le.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof R.ReadableStream<"u"&&"body"in Le){if(this.j=Le.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ji(this)}else Le.text().then(this.Ra.bind(this),this.ga.bind(this))};function ji(Le){Le.j.read().then(Le.Pa.bind(Le)).catch(Le.ga.bind(Le))}_.Pa=function(Le){if(this.g){if(this.o&&Le.value)this.response.push(Le.value);else if(!this.o){var st=Le.value?Le.value:new Uint8Array(0);(st=this.v.decode(st,{stream:!Le.done}))&&(this.response=this.responseText+=st)}Le.done?Da(this):ha(this),this.readyState==3&&ji(this)}},_.Ra=function(Le){this.g&&(this.response=this.responseText=Le,Da(this))},_.Qa=function(Le){this.g&&(this.response=Le,Da(this))},_.ga=function(){this.g&&Da(this)};function Da(Le){Le.readyState=4,Le.l=null,Le.j=null,Le.v=null,ha(Le)}_.setRequestHeader=function(Le,st){this.u.append(Le,st)},_.getResponseHeader=function(Le){return this.h&&this.h.get(Le.toLowerCase())||""},_.getAllResponseHeaders=function(){if(!this.h)return"";const Le=[],st=this.h.entries();for(var zt=st.next();!zt.done;)zt=zt.value,Le.push(zt[0]+": "+zt[1]),zt=st.next();return Le.join(`\r
`)};function ha(Le){Le.onreadystatechange&&Le.onreadystatechange.call(Le)}Object.defineProperty(po.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(Le){this.m=Le?"include":"same-origin"}});function ao(Le){let st="";return be(Le,function(zt,qn){st+=qn,st+=":",st+=zt,st+=`\r
`}),st}function ms(Le,st,zt){e:{for(qn in zt){var qn=!1;break e}qn=!0}qn||(zt=ao(zt),typeof Le=="string"?zt!=null&&encodeURIComponent(String(zt)):kr(Le,st,zt))}function ka(Le){kn.call(this),this.headers=new Map,this.o=Le||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}ie(ka,kn);var Uo=/^https?$/i,Po=["POST","PUT"];_=ka.prototype,_.Ha=function(Le){this.J=Le},_.ea=function(Le,st,zt,qn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+Le);st=st?st.toUpperCase():"GET",this.D=Le,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():At.g(),this.v=this.o?wr(this.o):wr(At),this.g.onreadystatechange=Y(this.Ea,this);try{this.B=!0,this.g.open(st,String(Le),!0),this.B=!1}catch(ii){Xl(this,ii);return}if(Le=zt||"",zt=new Map(this.headers),qn)if(Object.getPrototypeOf(qn)===Object.prototype)for(var zr in qn)zt.set(zr,qn[zr]);else if(typeof qn.keys=="function"&&typeof qn.get=="function")for(const ii of qn.keys())zt.set(ii,qn.get(ii));else throw Error("Unknown input type for opt_headers: "+String(qn));qn=Array.from(zt.keys()).find(ii=>ii.toLowerCase()=="content-type"),zr=R.FormData&&Le instanceof R.FormData,!(0<=Array.prototype.indexOf.call(Po,st,void 0))||qn||zr||zt.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ii,Pi]of zt)this.g.setRequestHeader(ii,Pi);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Do(this),this.u=!0,this.g.send(Le),this.u=!1}catch(ii){Xl(this,ii)}};function Xl(Le,st){Le.h=!1,Le.g&&(Le.j=!0,Le.g.abort(),Le.j=!1),Le.l=st,Le.m=5,so(Le),Eo(Le)}function so(Le){Le.A||(Le.A=!0,nr(Le,"complete"),nr(Le,"error"))}_.abort=function(Le){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=Le||7,nr(this,"complete"),nr(this,"abort"),Eo(this))},_.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eo(this,!0)),ka.aa.N.call(this)},_.Ea=function(){this.s||(this.B||this.u||this.j?Bo(this):this.bb())},_.bb=function(){Bo(this)};function Bo(Le){if(Le.h&&typeof T<"u"&&(!Le.v[1]||Di(Le)!=4||Le.Z()!=2)){if(Le.u&&Di(Le)==4)Qr(Le.Ea,0,Le);else if(nr(Le,"readystatechange"),Di(Le)==4){Le.h=!1;try{const Pi=Le.Z();e:switch(Pi){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var st=!0;break e;default:st=!1}var zt;if(!(zt=st)){var qn;if(qn=Pi===0){var zr=String(Le.D).match(Si)[1]||null;!zr&&R.self&&R.self.location&&(zr=R.self.location.protocol.slice(0,-1)),qn=!Uo.test(zr?zr.toLowerCase():"")}zt=qn}if(zt)nr(Le,"complete"),nr(Le,"success");else{Le.m=6;try{var ii=2<Di(Le)?Le.g.statusText:""}catch{ii=""}Le.l=ii+" ["+Le.Z()+"]",so(Le)}}finally{Eo(Le)}}}}function Eo(Le,st){if(Le.g){Do(Le);const zt=Le.g,qn=Le.v[0]?()=>{}:null;Le.g=null,Le.v=null,st||nr(Le,"ready");try{zt.onreadystatechange=qn}catch{}}}function Do(Le){Le.I&&(R.clearTimeout(Le.I),Le.I=null)}_.isActive=function(){return!!this.g};function Di(Le){return Le.g?Le.g.readyState:0}_.Z=function(){try{return 2<Di(this)?this.g.status:-1}catch{return-1}},_.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},_.Oa=function(Le){if(this.g){var st=this.g.responseText;return Le&&st.indexOf(Le)==0&&(st=st.substring(Le.length)),Ci(st)}};function Xi(Le){try{if(!Le.g)return null;if("response"in Le.g)return Le.g.response;switch(Le.H){case"":case"text":return Le.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Le.g)return Le.g.mozResponseArrayBuffer}return null}catch{return null}}function On(Le){const st={};Le=(Le.g&&2<=Di(Le)&&Le.g.getAllResponseHeaders()||"").split(`\r
`);for(let qn=0;qn<Le.length;qn++){if(fe(Le[qn]))continue;var zt=De(Le[qn]);const zr=zt[0];if(zt=zt[1],typeof zt!="string")continue;zt=zt.trim();const ii=st[zr]||[];st[zr]=ii,ii.push(zt)}ve(st,function(qn){return qn.join(", ")})}_.Ba=function(){return this.m},_.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fn(Le,st,zt){return zt&&zt.internalChannelParams&&zt.internalChannelParams[Le]||st}function mr(Le){this.Aa=0,this.i=[],this.j=new tt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fn("failFast",!1,Le),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fn("baseRetryDelayMs",5e3,Le),this.cb=Fn("retryDelaySeedMs",1e4,Le),this.Wa=Fn("forwardChannelMaxRetries",2,Le),this.wa=Fn("forwardChannelRequestTimeoutMs",2e4,Le),this.pa=Le&&Le.xmlHttpFactory||void 0,this.Xa=Le&&Le.Tb||void 0,this.Ca=Le&&Le.useFetchStreams||!1,this.L=void 0,this.J=Le&&Le.supportsCrossDomainXhr||!1,this.K="",this.h=new Nr(Le&&Le.concurrentRequestLimit),this.Da=new ko,this.P=Le&&Le.fastHandshake||!1,this.O=Le&&Le.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=Le&&Le.Rb||!1,Le&&Le.xa&&this.j.xa(),Le&&Le.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&Le&&Le.detectBufferingProxy||!1,this.ja=void 0,Le&&Le.longPollingTimeout&&0<Le.longPollingTimeout&&(this.ja=Le.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}_=mr.prototype,_.la=8,_.G=1,_.connect=function(Le,st,zt,qn){vr(0),this.W=Le,this.H=st||{},zt&&qn!==void 0&&(this.H.OSID=zt,this.H.OAID=qn),this.F=this.X,this.I=Ao(this,null,this.W),Ri(this)};function Xr(Le){if(ci(Le),Le.G==3){var st=Le.U++,zt=vn(Le.I);if(kr(zt,"SID",Le.K),kr(zt,"RID",st),kr(zt,"TYPE","terminate"),Yi(Le,zt),st=new Ft(Le,Le.j,st),st.L=2,st.v=gi(vn(zt)),zt=!1,R.navigator&&R.navigator.sendBeacon)try{zt=R.navigator.sendBeacon(st.v.toString(),"")}catch{}!zt&&R.Image&&(new Image().src=st.v,zt=!0),zt||(st.g=xs(st.j,null),st.g.ea(st.v)),st.F=Date.now(),Sn(st)}Qs(Le)}function Ei(Le){Le.g&&(va(Le),Le.g.cancel(),Le.g=null)}function ci(Le){Ei(Le),Le.u&&(R.clearTimeout(Le.u),Le.u=null),Ts(Le),Le.h.cancel(),Le.s&&(typeof Le.s=="number"&&R.clearTimeout(Le.s),Le.s=null)}function Ri(Le){if(!xr(Le.h)&&!Le.s){Le.s=!0;var st=Le.Ga;He||We(),Xe||(He(),Xe=!0),$e.add(st,Le),Le.B=0}}function Ui(Le,st){return Cr(Le.h)>=Le.h.j-(Le.s?1:0)?!1:Le.s?(Le.i=st.D.concat(Le.i),!0):Le.G==1||Le.G==2||Le.B>=(Le.Va?0:Le.Wa)?!1:(Le.s=Tn(Y(Le.Ga,Le,st),Rs(Le,Le.B)),Le.B++,!0)}_.Ga=function(Le){if(this.s)if(this.s=null,this.G==1){if(!Le){this.U=Math.floor(1e5*Math.random()),Le=this.U++;const zr=new Ft(this,this.j,Le);let ii=this.o;if(this.S&&(ii?(ii=Me(ii),Be(ii,this.S)):ii=this.S),this.m!==null||this.O||(zr.H=ii,ii=null),this.P)e:{for(var st=0,zt=0;zt<this.i.length;zt++){t:{var qn=this.i[zt];if("__data__"in qn.map&&(qn=qn.map.__data__,typeof qn=="string")){qn=qn.length;break t}qn=void 0}if(qn===void 0)break;if(st+=qn,4096<st){st=zt;break e}if(st===4096||zt===this.i.length-1){st=zt+1;break e}}st=1e3}else st=1e3;st=Ea(this,zr,st),zt=vn(this.I),kr(zt,"RID",Le),kr(zt,"CVER",22),this.D&&kr(zt,"X-HTTP-Session-Id",this.D),Yi(this,zt),ii&&(this.O?st="headers="+encodeURIComponent(String(ao(ii)))+"&"+st:this.m&&ms(zt,this.m,ii)),Ur(this.h,zr),this.Ua&&kr(zt,"TYPE","init"),this.P?(kr(zt,"$req",st),kr(zt,"SID","null"),zr.T=!0,rt(zr,zt,null)):rt(zr,zt,st),this.G=2}}else this.G==3&&(Le?ki(this,Le):this.i.length==0||xr(this.h)||ki(this))};function ki(Le,st){var zt;st?zt=st.l:zt=Le.U++;const qn=vn(Le.I);kr(qn,"SID",Le.K),kr(qn,"RID",zt),kr(qn,"AID",Le.T),Yi(Le,qn),Le.m&&Le.o&&ms(qn,Le.m,Le.o),zt=new Ft(Le,Le.j,zt,Le.B+1),Le.m===null&&(zt.H=Le.o),st&&(Le.i=st.D.concat(Le.i)),st=Ea(Le,zt,1e3),zt.I=Math.round(.5*Le.wa)+Math.round(.5*Le.wa*Math.random()),Ur(Le.h,zt),rt(zt,qn,st)}function Yi(Le,st){Le.H&&be(Le.H,function(zt,qn){kr(st,qn,zt)}),Le.l&&Ti({},function(zt,qn){kr(st,qn,zt)})}function Ea(Le,st,zt){zt=Math.min(Le.i.length,zt);var qn=Le.l?Y(Le.l.Na,Le.l,Le):null;e:{var zr=Le.i;let ii=-1;for(;;){const Pi=["count="+zt];ii==-1?0<zt?(ii=zr[0].g,Pi.push("ofs="+ii)):ii=0:Pi.push("ofs="+ii);let xa=!0;for(let da=0;da<zt;da++){let Aa=zr[da].g;const ns=zr[da].map;if(Aa-=ii,0>Aa)ii=Math.max(0,zr[da].g-100),xa=!1;else try{ws(ns,Pi,"req"+Aa+"_")}catch{qn&&qn(ns)}}if(xa){qn=Pi.join("&");break e}}}return Le=Le.i.splice(0,zt),st.D=Le,qn}function qa(Le){if(!Le.g&&!Le.u){Le.Y=1;var st=Le.Fa;He||We(),Xe||(He(),Xe=!0),$e.add(st,Le),Le.v=0}}function Fa(Le){return Le.g||Le.u||3<=Le.v?!1:(Le.Y++,Le.u=Tn(Y(Le.Fa,Le),Rs(Le,Le.v)),Le.v++,!0)}_.Fa=function(){if(this.u=null,$a(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var Le=2*this.R;this.j.info("BP detection timer enabled: "+Le),this.A=Tn(Y(this.ab,this),Le)}},_.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vr(10),Ei(this),$a(this))};function va(Le){Le.A!=null&&(R.clearTimeout(Le.A),Le.A=null)}function $a(Le){Le.g=new Ft(Le,Le.j,"rpc",Le.Y),Le.m===null&&(Le.g.H=Le.o),Le.g.O=0;var st=vn(Le.qa);kr(st,"RID","rpc"),kr(st,"SID",Le.K),kr(st,"AID",Le.T),kr(st,"CI",Le.F?"0":"1"),!Le.F&&Le.ja&&kr(st,"TO",Le.ja),kr(st,"TYPE","xmlhttp"),Yi(Le,st),Le.m&&Le.o&&ms(st,Le.m,Le.o),Le.L&&(Le.g.I=Le.L);var zt=Le.g;Le=Le.ia,zt.L=1,zt.v=gi(vn(st)),zt.m=null,zt.P=!0,ln(zt,Le)}_.Za=function(){this.C!=null&&(this.C=null,Ei(this),Fa(this),vr(19))};function Ts(Le){Le.C!=null&&(R.clearTimeout(Le.C),Le.C=null)}function Za(Le,st){var zt=null;if(Le.g==st){Ts(Le),va(Le),Le.g=null;var qn=2}else if(Or(Le.h,st))zt=st.D,Pr(Le.h,st),qn=1;else return;if(Le.G!=0){if(st.o)if(qn==1){zt=st.m?st.m.length:0,st=Date.now()-st.F;var zr=Le.B;qn=Gn(),nr(qn,new Ar(qn,zt)),Ri(Le)}else qa(Le);else if(zr=st.s,zr==3||zr==0&&0<st.X||!(qn==1&&Ui(Le,st)||qn==2&&Fa(Le)))switch(zt&&0<zt.length&&(st=Le.h,st.i=st.i.concat(zt)),zr){case 1:us(Le,5);break;case 4:us(Le,10);break;case 3:us(Le,6);break;default:us(Le,2)}}}function Rs(Le,st){let zt=Le.Ta+Math.floor(Math.random()*Le.cb);return Le.isActive()||(zt*=2),zt*st}function us(Le,st){if(Le.j.info("Error code "+st),st==2){var zt=Y(Le.fb,Le),qn=Le.Xa;const zr=!qn;qn=new bi(qn||"//www.google.com/images/cleardot.gif"),R.location&&R.location.protocol=="http"||Ln(qn,"https"),gi(qn),zr?Ss(qn.toString(),zt):Gs(qn.toString(),zt)}else vr(2);Le.G=0,Le.l&&Le.l.sa(st),Qs(Le),ci(Le)}_.fb=function(Le){Le?(this.j.info("Successfully pinged google.com"),vr(2)):(this.j.info("Failed to ping google.com"),vr(1))};function Qs(Le){if(Le.G=0,Le.ka=[],Le.l){const st=Vr(Le.h);(st.length!=0||Le.i.length!=0)&&(se(Le.ka,st),se(Le.ka,Le.i),Le.h.i.length=0,oe(Le.i),Le.i.length=0),Le.l.ra()}}function Ao(Le,st,zt){var qn=zt instanceof bi?vn(zt):new bi(zt);if(qn.g!="")st&&(qn.g=st+"."+qn.g),ar(qn,qn.s);else{var zr=R.location;qn=zr.protocol,st=st?st+"."+zr.hostname:zr.hostname,zr=+zr.port;var ii=new bi(null);qn&&Ln(ii,qn),st&&(ii.g=st),zr&&ar(ii,zr),zt&&(ii.l=zt),qn=ii}return zt=Le.D,st=Le.ya,zt&&st&&kr(qn,zt,st),kr(qn,"VER",Le.la),Yi(Le,qn),qn}function xs(Le,st,zt){if(st&&!Le.J)throw Error("Can't create secondary domain capable XhrIo object.");return st=Le.Ca&&!Le.pa?new ka(new No({eb:zt})):new ka(Le.pa),st.Ha(Le.J),st}_.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ms(){}_=Ms.prototype,_.ua=function(){},_.ta=function(){},_.sa=function(){},_.ra=function(){},_.isActive=function(){return!0},_.Na=function(){};function Js(){}Js.prototype.g=function(Le,st){return new es(Le,st)};function es(Le,st){kn.call(this),this.g=new mr(st),this.l=Le,this.h=st&&st.messageUrlParams||null,Le=st&&st.messageHeaders||null,st&&st.clientProtocolHeaderRequired&&(Le?Le["X-Client-Protocol"]="webchannel":Le={"X-Client-Protocol":"webchannel"}),this.g.o=Le,Le=st&&st.initMessageHeaders||null,st&&st.messageContentType&&(Le?Le["X-WebChannel-Content-Type"]=st.messageContentType:Le={"X-WebChannel-Content-Type":st.messageContentType}),st&&st.va&&(Le?Le["X-WebChannel-Client-Profile"]=st.va:Le={"X-WebChannel-Client-Profile":st.va}),this.g.S=Le,(Le=st&&st.Sb)&&!fe(Le)&&(this.g.m=Le),this.v=st&&st.supportsCrossDomainXhr||!1,this.u=st&&st.sendRawJson||!1,(st=st&&st.httpSessionIdParam)&&!fe(st)&&(this.g.D=st,Le=this.h,Le!==null&&st in Le&&(Le=this.h,st in Le&&delete Le[st])),this.j=new Ls(this)}ie(es,kn),es.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},es.prototype.close=function(){Xr(this.g)},es.prototype.o=function(Le){var st=this.g;if(typeof Le=="string"){var zt={};zt.__data__=Le,Le=zt}else this.u&&(zt={},zt.__data__=Mi(Le),Le=zt);st.i.push(new Lr(st.Ya++,Le)),st.G==3&&Ri(st)},es.prototype.N=function(){this.g.l=null,delete this.j,Xr(this.g),delete this.g,es.aa.N.call(this)};function js(Le){vi.call(this),Le.__headers__&&(this.headers=Le.__headers__,this.statusCode=Le.__status__,delete Le.__headers__,delete Le.__status__);var st=Le.__sm__;if(st){e:{for(const zt in st){Le=zt;break e}Le=void 0}(this.i=Le)&&(Le=this.i,st=st!==null&&Le in st?st[Le]:void 0),this.data=st}else this.data=Le}ie(js,vi);function zs(){qr.call(this),this.status=1}ie(zs,qr);function Ls(Le){this.g=Le}ie(Ls,Ms),Ls.prototype.ua=function(){nr(this.g,"a")},Ls.prototype.ta=function(Le){nr(this.g,new js(Le))},Ls.prototype.sa=function(Le){nr(this.g,new zs)},Ls.prototype.ra=function(){nr(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,es.prototype.send=es.prototype.o,es.prototype.open=es.prototype.m,es.prototype.close=es.prototype.close,createWebChannelTransport=function(){return new Js},getStatEventTarget=function(){return Gn()},Event$1=br,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rr.NO_ERROR=0,rr.TIMEOUT=8,rr.HTTP_ERROR=6,ErrorCode=rr,it.COMPLETE="complete",EventType=it,Br.EventType=ui,ui.OPEN="a",ui.CLOSE="b",ui.ERROR="c",ui.MESSAGE="d",kn.prototype.listen=kn.prototype.K,WebChannel=Br,ka.prototype.listenOnce=ka.prototype.L,ka.prototype.getLastError=ka.prototype.Ka,ka.prototype.getLastErrorCode=ka.prototype.Ba,ka.prototype.getStatus=ka.prototype.Z,ka.prototype.getResponseJson=ka.prototype.Oa,ka.prototype.getResponseText=ka.prototype.oa,ka.prototype.send=ka.prototype.ea,ka.prototype.setWithCredentials=ka.prototype.Ha,XhrIo=ka}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(d){this.uid=d}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(d){return d.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$2="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(_,...d){if(O.logLevel<=LogLevel.DEBUG){const v=d.map(__PRIVATE_argToString);O.debug(`Firestore (${x$2}): ${_}`,...v)}}function __PRIVATE_logError(_,...d){if(O.logLevel<=LogLevel.ERROR){const v=d.map(__PRIVATE_argToString);O.error(`Firestore (${x$2}): ${_}`,...v)}}function __PRIVATE_logWarn(_,...d){if(O.logLevel<=LogLevel.WARN){const v=d.map(__PRIVATE_argToString);O.warn(`Firestore (${x$2}): ${_}`,...v)}}function __PRIVATE_argToString(_){if(typeof _=="string")return _;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(v){return JSON.stringify(v)}(_)}catch{return _}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(_,d,v){let A="Unexpected state";typeof d=="string"?A=d:v=d,__PRIVATE__fail(_,A,v)}function __PRIVATE__fail(_,d,v){let A=`FIRESTORE (${x$2}) INTERNAL ASSERTION FAILED: ${d} (ID: ${_.toString(16)})`;if(v!==void 0)try{A+=" CONTEXT: "+JSON.stringify(v)}catch{A+=" CONTEXT: "+v}throw __PRIVATE_logError(A),new Error(A)}function __PRIVATE_hardAssert(_,d,v,A){let C="Unexpected state";typeof v=="string"?C=v:A=v,_||__PRIVATE__fail(d,C,A)}function __PRIVATE_debugCast(_,d){return _}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(d,v){super(d,v),this.code=d,this.message=v,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((d,v)=>{this.resolve=d,this.reject=v})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(d,v){this.user=v,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${d}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(d,v){d.enqueueRetryable(()=>v(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(d){this.token=d,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(d,v){this.changeListener=v,d.enqueueRetryable(()=>v(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(d){this.t=d,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(d,v){__PRIVATE_hardAssert(this.o===void 0,42304);let A=this.i;const C=G=>this.i!==A?(A=this.i,v(G)):Promise.resolve();let w=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new __PRIVATE_Deferred,d.enqueueRetryable(()=>C(this.currentUser))};const T=()=>{const G=w;d.enqueueRetryable(async()=>{await G.promise,await C(this.currentUser)})},R=G=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.o&&(this.auth.addAuthTokenListener(this.o),T())};this.t.onInit(G=>R(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?R(G):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new __PRIVATE_Deferred)}},0),T()}getToken(){const d=this.i,v=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(v).then(A=>this.i!==d?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):A?(__PRIVATE_hardAssert(typeof A.accessToken=="string",31837,{l:A}),new __PRIVATE_OAuthToken(A.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const d=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(d===null||typeof d=="string",2055,{h:d}),new User(d)}}class __PRIVATE_FirstPartyToken{constructor(d,v,A){this.P=d,this.T=v,this.I=A,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const d=this.R();return d&&this.A.set("Authorization",d),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(d,v,A){this.P=d,this.T=v,this.I=A}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(d,v){d.enqueueRetryable(()=>v(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(d){this.value=d,this.type="AppCheck",this.headers=new Map,d&&d.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(d,v){this.V=v,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(d)&&d.settings.appCheckToken&&(this.p=d.settings.appCheckToken)}start(d,v){__PRIVATE_hardAssert(this.o===void 0,3512);const A=w=>{w.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${w.error.message}`);const T=w.token!==this.m;return this.m=w.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${T?"new":"existing"} token.`),T?v(w.token):Promise.resolve()};this.o=w=>{d.enqueueRetryable(()=>A(w))};const C=w=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=w,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(w=>C(w)),setTimeout(()=>{if(!this.appCheck){const w=this.V.getImmediate({optional:!0});w?C(w):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const d=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(d).then(v=>v?(__PRIVATE_hardAssert(typeof v.token=="string",44558,{tokenResult:v}),this.m=v.token,new AppCheckToken(v.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(_){const d=typeof self<"u"&&(self.crypto||self.msCrypto),v=new Uint8Array(_);if(d&&typeof d.getRandomValues=="function")d.getRandomValues(v);else for(let A=0;A<_;A++)v[A]=Math.floor(256*Math.random());return v}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",v=62*Math.floor(4.129032258064516);let A="";for(;A.length<20;){const C=__PRIVATE_randomBytes(40);for(let w=0;w<C.length;++w)A.length<20&&C[w]<v&&(A+=d.charAt(C[w]%62))}return A}}function __PRIVATE_primitiveComparator(_,d){return _<d?-1:_>d?1:0}function __PRIVATE_compareUtf8Strings(_,d){const v=Math.min(_.length,d.length);for(let A=0;A<v;A++){const C=_.charAt(A),w=d.charAt(A);if(C!==w)return __PRIVATE_isSurrogate(C)===__PRIVATE_isSurrogate(w)?__PRIVATE_primitiveComparator(C,w):__PRIVATE_isSurrogate(C)?1:-1}return __PRIVATE_primitiveComparator(_.length,d.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(_){const d=_.charCodeAt(0);return d>=B&&d<=L}function __PRIVATE_arrayEquals(_,d,v){return _.length===d.length&&_.every((A,C)=>v(A,d[C]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$1="__name__";class BasePath{constructor(d,v,A){v===void 0?v=0:v>d.length&&fail(637,{offset:v,range:d.length}),A===void 0?A=d.length-v:A>d.length-v&&fail(1746,{length:A,range:d.length-v}),this.segments=d,this.offset=v,this.len=A}get length(){return this.len}isEqual(d){return BasePath.comparator(this,d)===0}child(d){const v=this.segments.slice(this.offset,this.limit());return d instanceof BasePath?d.forEach(A=>{v.push(A)}):v.push(d),this.construct(v)}limit(){return this.offset+this.length}popFirst(d){return d=d===void 0?1:d,this.construct(this.segments,this.offset+d,this.length-d)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(d){return this.segments[this.offset+d]}isEmpty(){return this.length===0}isPrefixOf(d){if(d.length<this.length)return!1;for(let v=0;v<this.length;v++)if(this.get(v)!==d.get(v))return!1;return!0}isImmediateParentOf(d){if(this.length+1!==d.length)return!1;for(let v=0;v<this.length;v++)if(this.get(v)!==d.get(v))return!1;return!0}forEach(d){for(let v=this.offset,A=this.limit();v<A;v++)d(this.segments[v])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(d,v){const A=Math.min(d.length,v.length);for(let C=0;C<A;C++){const w=BasePath.compareSegments(d.get(C),v.get(C));if(w!==0)return w}return __PRIVATE_primitiveComparator(d.length,v.length)}static compareSegments(d,v){const A=BasePath.isNumericId(d),C=BasePath.isNumericId(v);return A&&!C?-1:!A&&C?1:A&&C?BasePath.extractNumericId(d).compare(BasePath.extractNumericId(v)):__PRIVATE_compareUtf8Strings(d,v)}static isNumericId(d){return d.startsWith("__id")&&d.endsWith("__")}static extractNumericId(d){return Integer.fromString(d.substring(4,d.length-2))}}class ResourcePath extends BasePath{construct(d,v,A){return new ResourcePath(d,v,A)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...d){const v=[];for(const A of d){if(A.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${A}). Paths must not contain // in them.`);v.push(...A.split("/").filter(C=>C.length>0))}return new ResourcePath(v)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(d,v,A){return new FieldPath$1(d,v,A)}static isValidIdentifier(d){return q.test(d)}canonicalString(){return this.toArray().map(d=>(d=d.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(d)||(d="`"+d+"`"),d)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k$1}static keyField(){return new FieldPath$1([k$1])}static fromServerFormat(d){const v=[];let A="",C=0;const w=()=>{if(A.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${d}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);v.push(A),A=""};let T=!1;for(;C<d.length;){const R=d[C];if(R==="\\"){if(C+1===d.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+d);const G=d[C+1];if(G!=="\\"&&G!=="."&&G!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+d);A+=G,C+=2}else R==="`"?(T=!T,C++):R!=="."||T?(A+=R,C++):(w(),C++)}if(w(),T)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+d);return new FieldPath$1(v)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(d){this.path=d}static fromPath(d){return new DocumentKey(ResourcePath.fromString(d))}static fromName(d){return new DocumentKey(ResourcePath.fromString(d).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(d){return this.path.length>=2&&this.path.get(this.path.length-2)===d}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(d){return d!==null&&ResourcePath.comparator(this.path,d.path)===0}toString(){return this.path.toString()}static comparator(d,v){return ResourcePath.comparator(d.path,v.path)}static isDocumentKey(d){return d.length%2==0}static fromSegments(d){return new DocumentKey(new ResourcePath(d.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(_,d,v){if(!v)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${_}() cannot be called with an empty ${d}.`)}function __PRIVATE_validateIsNotUsedTogether(_,d,v,A){if(d===!0&&A===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${_} and ${v} cannot be used together.`)}function __PRIVATE_validateDocumentPath(_){if(!DocumentKey.isDocumentKey(_))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${_} has ${_.length}.`)}function __PRIVATE_validateCollectionPath(_){if(DocumentKey.isDocumentKey(_))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${_} has ${_.length}.`)}function __PRIVATE_isPlainObject(_){return typeof _=="object"&&_!==null&&(Object.getPrototypeOf(_)===Object.prototype||Object.getPrototypeOf(_)===null)}function __PRIVATE_valueDescription(_){if(_===void 0)return"undefined";if(_===null)return"null";if(typeof _=="string")return _.length>20&&(_=`${_.substring(0,20)}...`),JSON.stringify(_);if(typeof _=="number"||typeof _=="boolean")return""+_;if(typeof _=="object"){if(_ instanceof Array)return"an array";{const d=function(A){return A.constructor?A.constructor.name:null}(_);return d?`a custom ${d} object`:"an object"}}return typeof _=="function"?"a function":fail(12329,{type:typeof _})}function __PRIVATE_cast(_,d){if("_delegate"in _&&(_=_._delegate),!(_ instanceof d)){if(d.name===_.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const v=__PRIVATE_valueDescription(_);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${d.name}', but it was: ${v}`)}}return _}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(_,d){const v={typeString:_};return d&&(v.value=d),v}function __PRIVATE_validateJSON(_,d){if(!__PRIVATE_isPlainObject(_))throw new FirestoreError(N.INVALID_ARGUMENT,"JSON must be an object");let v;for(const A in d)if(d[A]){const C=d[A].typeString,w="value"in d[A]?{value:d[A].value}:void 0;if(!(A in _)){v=`JSON missing required field: '${A}'`;break}const T=_[A];if(C&&typeof T!==C){v=`JSON field '${A}' must be a ${C}.`;break}if(w!==void 0&&T!==w.value){v=`Expected '${A}' field to equal '${w.value}'`;break}}if(v)throw new FirestoreError(N.INVALID_ARGUMENT,v);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-62135596800,$=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(d){return Timestamp.fromMillis(d.getTime())}static fromMillis(d){const v=Math.floor(d/1e3),A=Math.floor((d-1e3*v)*$);return new Timestamp(v,A)}constructor(d,v){if(this.seconds=d,this.nanoseconds=v,v<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+v);if(v>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+v);if(d<Q$1)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+d);if(d>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+d)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$}_compareTo(d){return this.seconds===d.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,d.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,d.seconds)}isEqual(d){return d.seconds===this.seconds&&d.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(d){if(__PRIVATE_validateJSON(d,Timestamp._jsonSchema))return new Timestamp(d.seconds,d.nanoseconds)}valueOf(){const d=this.seconds-Q$1;return String(d).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(d){return new SnapshotVersion(d)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(d){this.timestamp=d}compareTo(d){return this.timestamp._compareTo(d.timestamp)}isEqual(d){return this.timestamp.isEqual(d.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(_,d){const v=_.toTimestamp().seconds,A=_.toTimestamp().nanoseconds+1,C=SnapshotVersion.fromTimestamp(A===1e9?new Timestamp(v+1,0):new Timestamp(v,A));return new IndexOffset(C,DocumentKey.empty(),d)}function __PRIVATE_newIndexOffsetFromDocument(_){return new IndexOffset(_.readTime,_.key,U)}class IndexOffset{constructor(d,v,A){this.readTime=d,this.documentKey=v,this.largestBatchId=A}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U)}}function __PRIVATE_indexOffsetComparator(_,d){let v=_.readTime.compareTo(d.readTime);return v!==0?v:(v=DocumentKey.comparator(_.documentKey,d.documentKey),v!==0?v:__PRIVATE_primitiveComparator(_.largestBatchId,d.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(d){this.onCommittedListeners.push(d)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(d=>d())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(_){if(_.code!==N.FAILED_PRECONDITION||_.message!==K$1)throw _;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(d){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,d(v=>{this.isDone=!0,this.result=v,this.nextCallback&&this.nextCallback(v)},v=>{this.isDone=!0,this.error=v,this.catchCallback&&this.catchCallback(v)})}catch(d){return this.next(void 0,d)}next(d,v){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(v,this.error):this.wrapSuccess(d,this.result):new PersistencePromise((A,C)=>{this.nextCallback=w=>{this.wrapSuccess(d,w).next(A,C)},this.catchCallback=w=>{this.wrapFailure(v,w).next(A,C)}})}toPromise(){return new Promise((d,v)=>{this.next(d,v)})}wrapUserFunction(d){try{const v=d();return v instanceof PersistencePromise?v:PersistencePromise.resolve(v)}catch(v){return PersistencePromise.reject(v)}}wrapSuccess(d,v){return d?this.wrapUserFunction(()=>d(v)):PersistencePromise.resolve(v)}wrapFailure(d,v){return d?this.wrapUserFunction(()=>d(v)):PersistencePromise.reject(v)}static resolve(d){return new PersistencePromise((v,A)=>{v(d)})}static reject(d){return new PersistencePromise((v,A)=>{A(d)})}static waitFor(d){return new PersistencePromise((v,A)=>{let C=0,w=0,T=!1;d.forEach(R=>{++C,R.next(()=>{++w,T&&w===C&&v()},G=>A(G))}),T=!0,w===C&&v()})}static or(d){let v=PersistencePromise.resolve(!1);for(const A of d)v=v.next(C=>C?PersistencePromise.resolve(C):A());return v}static forEach(d,v){const A=[];return d.forEach((C,w)=>{A.push(v.call(this,C,w))}),this.waitFor(A)}static mapArray(d,v){return new PersistencePromise((A,C)=>{const w=d.length,T=new Array(w);let R=0;for(let G=0;G<w;G++){const I=G;v(d[I]).next(z=>{T[I]=z,++R,R===w&&A(T)},z=>C(z))}})}static doWhile(d,v){return new PersistencePromise((A,C)=>{const w=()=>{d()===!0?v().next(()=>{w()},C):A()};w()})}}function __PRIVATE_getAndroidVersion(_){const d=_.match(/Android ([\d.]+)/i),v=d?d[1].split(".").slice(0,2).join("."):"-1";return Number(v)}function __PRIVATE_isIndexedDbTransactionError(_){return _.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(d,v){this.previousValue=d,v&&(v.sequenceNumberHandler=A=>this.ae(A),this.ue=A=>v.writeSequenceNumber(A))}ae(d){return this.previousValue=Math.max(d,this.previousValue),this.previousValue}next(){const d=++this.previousValue;return this.ue&&this.ue(d),d}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$1=-1;function __PRIVATE_isNullOrUndefined(_){return _==null}function __PRIVATE_isNegativeZero(_){return _===0&&1/_==-1/0}function isSafeInteger(_){return typeof _=="number"&&Number.isInteger(_)&&!__PRIVATE_isNegativeZero(_)&&_<=Number.MAX_SAFE_INTEGER&&_>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J="";function __PRIVATE_encodeResourcePath(_){let d="";for(let v=0;v<_.length;v++)d.length>0&&(d=__PRIVATE_encodeSeparator(d)),d=__PRIVATE_encodeSegment(_.get(v),d);return __PRIVATE_encodeSeparator(d)}function __PRIVATE_encodeSegment(_,d){let v=d;const A=_.length;for(let C=0;C<A;C++){const w=_.charAt(C);switch(w){case"\0":v+="";break;case J:v+="";break;default:v+=w}}return v}function __PRIVATE_encodeSeparator(_){return _+J+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(_){let d=0;for(const v in _)Object.prototype.hasOwnProperty.call(_,v)&&d++;return d}function forEach(_,d){for(const v in _)Object.prototype.hasOwnProperty.call(_,v)&&d(v,_[v])}function __PRIVATE_mapToArray(_,d){const v=[];for(const A in _)Object.prototype.hasOwnProperty.call(_,A)&&v.push(d(_[A],A,_));return v}function isEmpty(_){for(const d in _)if(Object.prototype.hasOwnProperty.call(_,d))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(d,v){this.comparator=d,this.root=v||LLRBNode.EMPTY}insert(d,v){return new SortedMap(this.comparator,this.root.insert(d,v,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(d){return new SortedMap(this.comparator,this.root.remove(d,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(d){let v=this.root;for(;!v.isEmpty();){const A=this.comparator(d,v.key);if(A===0)return v.value;A<0?v=v.left:A>0&&(v=v.right)}return null}indexOf(d){let v=0,A=this.root;for(;!A.isEmpty();){const C=this.comparator(d,A.key);if(C===0)return v+A.left.size;C<0?A=A.left:(v+=A.left.size+1,A=A.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(d){return this.root.inorderTraversal(d)}forEach(d){this.inorderTraversal((v,A)=>(d(v,A),!1))}toString(){const d=[];return this.inorderTraversal((v,A)=>(d.push(`${v}:${A}`),!1)),`{${d.join(", ")}}`}reverseTraversal(d){return this.root.reverseTraversal(d)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(d){return new SortedMapIterator(this.root,d,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(d){return new SortedMapIterator(this.root,d,this.comparator,!0)}}class SortedMapIterator{constructor(d,v,A,C){this.isReverse=C,this.nodeStack=[];let w=1;for(;!d.isEmpty();)if(w=v?A(d.key,v):1,v&&C&&(w*=-1),w<0)d=this.isReverse?d.left:d.right;else{if(w===0){this.nodeStack.push(d);break}this.nodeStack.push(d),d=this.isReverse?d.right:d.left}}getNext(){let d=this.nodeStack.pop();const v={key:d.key,value:d.value};if(this.isReverse)for(d=d.left;!d.isEmpty();)this.nodeStack.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack.push(d),d=d.left;return v}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const d=this.nodeStack[this.nodeStack.length-1];return{key:d.key,value:d.value}}}class LLRBNode{constructor(d,v,A,C,w){this.key=d,this.value=v,this.color=A??LLRBNode.RED,this.left=C??LLRBNode.EMPTY,this.right=w??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(d,v,A,C,w){return new LLRBNode(d??this.key,v??this.value,A??this.color,C??this.left,w??this.right)}isEmpty(){return!1}inorderTraversal(d){return this.left.inorderTraversal(d)||d(this.key,this.value)||this.right.inorderTraversal(d)}reverseTraversal(d){return this.right.reverseTraversal(d)||d(this.key,this.value)||this.left.reverseTraversal(d)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(d,v,A){let C=this;const w=A(d,C.key);return C=w<0?C.copy(null,null,null,C.left.insert(d,v,A),null):w===0?C.copy(null,v,null,null,null):C.copy(null,null,null,null,C.right.insert(d,v,A)),C.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let d=this;return d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.removeMin(),null),d.fixUp()}remove(d,v){let A,C=this;if(v(d,C.key)<0)C.left.isEmpty()||C.left.isRed()||C.left.left.isRed()||(C=C.moveRedLeft()),C=C.copy(null,null,null,C.left.remove(d,v),null);else{if(C.left.isRed()&&(C=C.rotateRight()),C.right.isEmpty()||C.right.isRed()||C.right.left.isRed()||(C=C.moveRedRight()),v(d,C.key)===0){if(C.right.isEmpty())return LLRBNode.EMPTY;A=C.right.min(),C=C.copy(A.key,A.value,null,null,C.right.removeMin())}C=C.copy(null,null,null,null,C.right.remove(d,v))}return C.fixUp()}isRed(){return this.color}fixUp(){let d=this;return d.right.isRed()&&!d.left.isRed()&&(d=d.rotateLeft()),d.left.isRed()&&d.left.left.isRed()&&(d=d.rotateRight()),d.left.isRed()&&d.right.isRed()&&(d=d.colorFlip()),d}moveRedLeft(){let d=this.colorFlip();return d.right.left.isRed()&&(d=d.copy(null,null,null,null,d.right.rotateRight()),d=d.rotateLeft(),d=d.colorFlip()),d}moveRedRight(){let d=this.colorFlip();return d.left.left.isRed()&&(d=d.rotateRight(),d=d.colorFlip()),d}rotateLeft(){const d=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,d,null)}rotateRight(){const d=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,d)}colorFlip(){const d=this.left.copy(null,null,!this.left.color,null,null),v=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,d,v)}checkMaxDepth(){const d=this.check();return Math.pow(2,d)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const d=this.left.check();if(d!==this.right.check())throw fail(27949);return d+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(d,v,A,C,w){return this}insert(d,v,A){return new LLRBNode(d,v)}remove(d,v){return this}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(d){this.comparator=d,this.data=new SortedMap(this.comparator)}has(d){return this.data.get(d)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(d){return this.data.indexOf(d)}forEach(d){this.data.inorderTraversal((v,A)=>(d(v),!1))}forEachInRange(d,v){const A=this.data.getIteratorFrom(d[0]);for(;A.hasNext();){const C=A.getNext();if(this.comparator(C.key,d[1])>=0)return;v(C.key)}}forEachWhile(d,v){let A;for(A=v!==void 0?this.data.getIteratorFrom(v):this.data.getIterator();A.hasNext();)if(!d(A.getNext().key))return}firstAfterOrEqual(d){const v=this.data.getIteratorFrom(d);return v.hasNext()?v.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(d){return new SortedSetIterator(this.data.getIteratorFrom(d))}add(d){return this.copy(this.data.remove(d).insert(d,!0))}delete(d){return this.has(d)?this.copy(this.data.remove(d)):this}isEmpty(){return this.data.isEmpty()}unionWith(d){let v=this;return v.size<d.size&&(v=d,d=this),d.forEach(A=>{v=v.add(A)}),v}isEqual(d){if(!(d instanceof SortedSet)||this.size!==d.size)return!1;const v=this.data.getIterator(),A=d.data.getIterator();for(;v.hasNext();){const C=v.getNext().key,w=A.getNext().key;if(this.comparator(C,w)!==0)return!1}return!0}toArray(){const d=[];return this.forEach(v=>{d.push(v)}),d}toString(){const d=[];return this.forEach(v=>d.push(v)),"SortedSet("+d.toString()+")"}copy(d){const v=new SortedSet(this.comparator);return v.data=d,v}}class SortedSetIterator{constructor(d){this.iter=d}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(d){this.fields=d,d.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(d){let v=new SortedSet(FieldPath$1.comparator);for(const A of this.fields)v=v.add(A);for(const A of d)v=v.add(A);return new FieldMask(v.toArray())}covers(d){for(const v of this.fields)if(v.isPrefixOf(d))return!0;return!1}isEqual(d){return __PRIVATE_arrayEquals(this.fields,d.fields,(v,A)=>v.isEqual(A))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(d){this.binaryString=d}static fromBase64String(d){const v=function(C){try{return atob(C)}catch(w){throw typeof DOMException<"u"&&w instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+w):w}}(d);return new ByteString(v)}static fromUint8Array(d){const v=function(C){let w="";for(let T=0;T<C.length;++T)w+=String.fromCharCode(C[T]);return w}(d);return new ByteString(v)}[Symbol.iterator](){let d=0;return{next:()=>d<this.binaryString.length?{value:this.binaryString.charCodeAt(d++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(v){return btoa(v)}(this.binaryString)}toUint8Array(){return function(v){const A=new Uint8Array(v.length);for(let C=0;C<v.length;C++)A[C]=v.charCodeAt(C);return A}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(d){return __PRIVATE_primitiveComparator(this.binaryString,d.binaryString)}isEqual(d){return this.binaryString===d.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(_){if(__PRIVATE_hardAssert(!!_,39018),typeof _=="string"){let d=0;const v=ot.exec(_);if(__PRIVATE_hardAssert(!!v,46558,{timestamp:_}),v[1]){let C=v[1];C=(C+"000000000").substr(0,9),d=Number(C)}const A=new Date(_);return{seconds:Math.floor(A.getTime()/1e3),nanos:d}}return{seconds:__PRIVATE_normalizeNumber(_.seconds),nanos:__PRIVATE_normalizeNumber(_.nanos)}}function __PRIVATE_normalizeNumber(_){return typeof _=="number"?_:typeof _=="string"?Number(_):0}function __PRIVATE_normalizeByteString(_){return typeof _=="string"?ByteString.fromBase64String(_):ByteString.fromUint8Array(_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t$1="server_timestamp",at="__type__",ut="__previous_value__",ct="__local_write_time__";function __PRIVATE_isServerTimestamp(_){return(_?.mapValue?.fields||{})[at]?.stringValue===_t$1}function __PRIVATE_getPreviousValue(_){const d=_.mapValue.fields[ut];return __PRIVATE_isServerTimestamp(d)?__PRIVATE_getPreviousValue(d):d}function __PRIVATE_getLocalWriteTime(_){const d=__PRIVATE_normalizeTimestamp(_.mapValue.fields[ct].timestampValue);return new Timestamp(d.seconds,d.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(d,v,A,C,w,T,R,G,I,z){this.databaseId=d,this.appId=v,this.persistenceKey=A,this.host=C,this.ssl=w,this.forceLongPolling=T,this.autoDetectLongPolling=R,this.longPollingOptions=G,this.useFetchStreams=I,this.isUsingEmulator=z}}const lt="(default)";class DatabaseId{constructor(d,v){this.projectId=d,this.database=v||lt}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt}isEqual(d){return d instanceof DatabaseId&&d.projectId===this.projectId&&d.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht$1="__type__",Pt="__max__",Tt={mapValue:{}},It="__vector__",Et="value";function __PRIVATE_typeOrder(_){return"nullValue"in _?0:"booleanValue"in _?1:"integerValue"in _||"doubleValue"in _?2:"timestampValue"in _?3:"stringValue"in _?5:"bytesValue"in _?6:"referenceValue"in _?7:"geoPointValue"in _?8:"arrayValue"in _?9:"mapValue"in _?__PRIVATE_isServerTimestamp(_)?4:__PRIVATE_isMaxValue(_)?9007199254740991:__PRIVATE_isVectorValue(_)?10:11:fail(28295,{value:_})}function __PRIVATE_valueEquals(_,d){if(_===d)return!0;const v=__PRIVATE_typeOrder(_);if(v!==__PRIVATE_typeOrder(d))return!1;switch(v){case 0:case 9007199254740991:return!0;case 1:return _.booleanValue===d.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(_).isEqual(__PRIVATE_getLocalWriteTime(d));case 3:return function(C,w){if(typeof C.timestampValue=="string"&&typeof w.timestampValue=="string"&&C.timestampValue.length===w.timestampValue.length)return C.timestampValue===w.timestampValue;const T=__PRIVATE_normalizeTimestamp(C.timestampValue),R=__PRIVATE_normalizeTimestamp(w.timestampValue);return T.seconds===R.seconds&&T.nanos===R.nanos}(_,d);case 5:return _.stringValue===d.stringValue;case 6:return function(C,w){return __PRIVATE_normalizeByteString(C.bytesValue).isEqual(__PRIVATE_normalizeByteString(w.bytesValue))}(_,d);case 7:return _.referenceValue===d.referenceValue;case 8:return function(C,w){return __PRIVATE_normalizeNumber(C.geoPointValue.latitude)===__PRIVATE_normalizeNumber(w.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(C.geoPointValue.longitude)===__PRIVATE_normalizeNumber(w.geoPointValue.longitude)}(_,d);case 2:return function(C,w){if("integerValue"in C&&"integerValue"in w)return __PRIVATE_normalizeNumber(C.integerValue)===__PRIVATE_normalizeNumber(w.integerValue);if("doubleValue"in C&&"doubleValue"in w){const T=__PRIVATE_normalizeNumber(C.doubleValue),R=__PRIVATE_normalizeNumber(w.doubleValue);return T===R?__PRIVATE_isNegativeZero(T)===__PRIVATE_isNegativeZero(R):isNaN(T)&&isNaN(R)}return!1}(_,d);case 9:return __PRIVATE_arrayEquals(_.arrayValue.values||[],d.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(C,w){const T=C.mapValue.fields||{},R=w.mapValue.fields||{};if(__PRIVATE_objectSize(T)!==__PRIVATE_objectSize(R))return!1;for(const G in T)if(T.hasOwnProperty(G)&&(R[G]===void 0||!__PRIVATE_valueEquals(T[G],R[G])))return!1;return!0}(_,d);default:return fail(52216,{left:_})}}function __PRIVATE_arrayValueContains(_,d){return(_.values||[]).find(v=>__PRIVATE_valueEquals(v,d))!==void 0}function __PRIVATE_valueCompare(_,d){if(_===d)return 0;const v=__PRIVATE_typeOrder(_),A=__PRIVATE_typeOrder(d);if(v!==A)return __PRIVATE_primitiveComparator(v,A);switch(v){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(_.booleanValue,d.booleanValue);case 2:return function(w,T){const R=__PRIVATE_normalizeNumber(w.integerValue||w.doubleValue),G=__PRIVATE_normalizeNumber(T.integerValue||T.doubleValue);return R<G?-1:R>G?1:R===G?0:isNaN(R)?isNaN(G)?0:-1:1}(_,d);case 3:return __PRIVATE_compareTimestamps(_.timestampValue,d.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(_),__PRIVATE_getLocalWriteTime(d));case 5:return __PRIVATE_compareUtf8Strings(_.stringValue,d.stringValue);case 6:return function(w,T){const R=__PRIVATE_normalizeByteString(w),G=__PRIVATE_normalizeByteString(T);return R.compareTo(G)}(_.bytesValue,d.bytesValue);case 7:return function(w,T){const R=w.split("/"),G=T.split("/");for(let I=0;I<R.length&&I<G.length;I++){const z=__PRIVATE_primitiveComparator(R[I],G[I]);if(z!==0)return z}return __PRIVATE_primitiveComparator(R.length,G.length)}(_.referenceValue,d.referenceValue);case 8:return function(w,T){const R=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(w.latitude),__PRIVATE_normalizeNumber(T.latitude));return R!==0?R:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(w.longitude),__PRIVATE_normalizeNumber(T.longitude))}(_.geoPointValue,d.geoPointValue);case 9:return __PRIVATE_compareArrays(_.arrayValue,d.arrayValue);case 10:return function(w,T){const R=w.fields||{},G=T.fields||{},I=R[Et]?.arrayValue,z=G[Et]?.arrayValue,H=__PRIVATE_primitiveComparator(I?.values?.length||0,z?.values?.length||0);return H!==0?H:__PRIVATE_compareArrays(I,z)}(_.mapValue,d.mapValue);case 11:return function(w,T){if(w===Tt.mapValue&&T===Tt.mapValue)return 0;if(w===Tt.mapValue)return 1;if(T===Tt.mapValue)return-1;const R=w.fields||{},G=Object.keys(R),I=T.fields||{},z=Object.keys(I);G.sort(),z.sort();for(let H=0;H<G.length&&H<z.length;++H){const Y=__PRIVATE_compareUtf8Strings(G[H],z[H]);if(Y!==0)return Y;const ee=__PRIVATE_valueCompare(R[G[H]],I[z[H]]);if(ee!==0)return ee}return __PRIVATE_primitiveComparator(G.length,z.length)}(_.mapValue,d.mapValue);default:throw fail(23264,{he:v})}}function __PRIVATE_compareTimestamps(_,d){if(typeof _=="string"&&typeof d=="string"&&_.length===d.length)return __PRIVATE_primitiveComparator(_,d);const v=__PRIVATE_normalizeTimestamp(_),A=__PRIVATE_normalizeTimestamp(d),C=__PRIVATE_primitiveComparator(v.seconds,A.seconds);return C!==0?C:__PRIVATE_primitiveComparator(v.nanos,A.nanos)}function __PRIVATE_compareArrays(_,d){const v=_.values||[],A=d.values||[];for(let C=0;C<v.length&&C<A.length;++C){const w=__PRIVATE_valueCompare(v[C],A[C]);if(w)return w}return __PRIVATE_primitiveComparator(v.length,A.length)}function canonicalId(_){return __PRIVATE_canonifyValue(_)}function __PRIVATE_canonifyValue(_){return"nullValue"in _?"null":"booleanValue"in _?""+_.booleanValue:"integerValue"in _?""+_.integerValue:"doubleValue"in _?""+_.doubleValue:"timestampValue"in _?function(v){const A=__PRIVATE_normalizeTimestamp(v);return`time(${A.seconds},${A.nanos})`}(_.timestampValue):"stringValue"in _?_.stringValue:"bytesValue"in _?function(v){return __PRIVATE_normalizeByteString(v).toBase64()}(_.bytesValue):"referenceValue"in _?function(v){return DocumentKey.fromName(v).toString()}(_.referenceValue):"geoPointValue"in _?function(v){return`geo(${v.latitude},${v.longitude})`}(_.geoPointValue):"arrayValue"in _?function(v){let A="[",C=!0;for(const w of v.values||[])C?C=!1:A+=",",A+=__PRIVATE_canonifyValue(w);return A+"]"}(_.arrayValue):"mapValue"in _?function(v){const A=Object.keys(v.fields||{}).sort();let C="{",w=!0;for(const T of A)w?w=!1:C+=",",C+=`${T}:${__PRIVATE_canonifyValue(v.fields[T])}`;return C+"}"}(_.mapValue):fail(61005,{value:_})}function __PRIVATE_estimateByteSize(_){switch(__PRIVATE_typeOrder(_)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const d=__PRIVATE_getPreviousValue(_);return d?16+__PRIVATE_estimateByteSize(d):16;case 5:return 2*_.stringValue.length;case 6:return __PRIVATE_normalizeByteString(_.bytesValue).approximateByteSize();case 7:return _.referenceValue.length;case 9:return function(A){return(A.values||[]).reduce((C,w)=>C+__PRIVATE_estimateByteSize(w),0)}(_.arrayValue);case 10:case 11:return function(A){let C=0;return forEach(A.fields,(w,T)=>{C+=w.length+__PRIVATE_estimateByteSize(T)}),C}(_.mapValue);default:throw fail(13486,{value:_})}}function __PRIVATE_refValue(_,d){return{referenceValue:`projects/${_.projectId}/databases/${_.database}/documents/${d.path.canonicalString()}`}}function isInteger(_){return!!_&&"integerValue"in _}function isArray$1(_){return!!_&&"arrayValue"in _}function __PRIVATE_isNullValue(_){return!!_&&"nullValue"in _}function __PRIVATE_isNanValue(_){return!!_&&"doubleValue"in _&&isNaN(Number(_.doubleValue))}function __PRIVATE_isMapValue(_){return!!_&&"mapValue"in _}function __PRIVATE_isVectorValue(_){return(_?.mapValue?.fields||{})[ht$1]?.stringValue===It}function __PRIVATE_deepClone(_){if(_.geoPointValue)return{geoPointValue:{..._.geoPointValue}};if(_.timestampValue&&typeof _.timestampValue=="object")return{timestampValue:{..._.timestampValue}};if(_.mapValue){const d={mapValue:{fields:{}}};return forEach(_.mapValue.fields,(v,A)=>d.mapValue.fields[v]=__PRIVATE_deepClone(A)),d}if(_.arrayValue){const d={arrayValue:{values:[]}};for(let v=0;v<(_.arrayValue.values||[]).length;++v)d.arrayValue.values[v]=__PRIVATE_deepClone(_.arrayValue.values[v]);return d}return{..._}}function __PRIVATE_isMaxValue(_){return(((_.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(d){this.value=d}static empty(){return new ObjectValue({mapValue:{}})}field(d){if(d.isEmpty())return this.value;{let v=this.value;for(let A=0;A<d.length-1;++A)if(v=(v.mapValue.fields||{})[d.get(A)],!__PRIVATE_isMapValue(v))return null;return v=(v.mapValue.fields||{})[d.lastSegment()],v||null}}set(d,v){this.getFieldsMap(d.popLast())[d.lastSegment()]=__PRIVATE_deepClone(v)}setAll(d){let v=FieldPath$1.emptyPath(),A={},C=[];d.forEach((T,R)=>{if(!v.isImmediateParentOf(R)){const G=this.getFieldsMap(v);this.applyChanges(G,A,C),A={},C=[],v=R.popLast()}T?A[R.lastSegment()]=__PRIVATE_deepClone(T):C.push(R.lastSegment())});const w=this.getFieldsMap(v);this.applyChanges(w,A,C)}delete(d){const v=this.field(d.popLast());__PRIVATE_isMapValue(v)&&v.mapValue.fields&&delete v.mapValue.fields[d.lastSegment()]}isEqual(d){return __PRIVATE_valueEquals(this.value,d.value)}getFieldsMap(d){let v=this.value;v.mapValue.fields||(v.mapValue={fields:{}});for(let A=0;A<d.length;++A){let C=v.mapValue.fields[d.get(A)];__PRIVATE_isMapValue(C)&&C.mapValue.fields||(C={mapValue:{fields:{}}},v.mapValue.fields[d.get(A)]=C),v=C}return v.mapValue.fields}applyChanges(d,v,A){forEach(v,(C,w)=>d[C]=w);for(const C of A)delete d[C]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(d,v,A,C,w,T,R){this.key=d,this.documentType=v,this.version=A,this.readTime=C,this.createTime=w,this.data=T,this.documentState=R}static newInvalidDocument(d){return new MutableDocument(d,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(d,v,A,C){return new MutableDocument(d,1,v,SnapshotVersion.min(),A,C,0)}static newNoDocument(d,v){return new MutableDocument(d,2,v,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(d,v){return new MutableDocument(d,3,v,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(d,v){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=d),this.version=d,this.documentType=1,this.data=v,this.documentState=0,this}convertToNoDocument(d){return this.version=d,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(d){return this.version=d,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(d){return this.readTime=d,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(d){return d instanceof MutableDocument&&this.key.isEqual(d.key)&&this.version.isEqual(d.version)&&this.documentType===d.documentType&&this.documentState===d.documentState&&this.data.isEqual(d.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(d,v){this.position=d,this.inclusive=v}}function __PRIVATE_boundCompareToDocument(_,d,v){let A=0;for(let C=0;C<_.position.length;C++){const w=d[C],T=_.position[C];if(w.field.isKeyField()?A=DocumentKey.comparator(DocumentKey.fromName(T.referenceValue),v.key):A=__PRIVATE_valueCompare(T,v.data.field(w.field)),w.dir==="desc"&&(A*=-1),A!==0)break}return A}function __PRIVATE_boundEquals(_,d){if(_===null)return d===null;if(d===null||_.inclusive!==d.inclusive||_.position.length!==d.position.length)return!1;for(let v=0;v<_.position.length;v++)if(!__PRIVATE_valueEquals(_.position[v],d.position[v]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(d,v="asc"){this.field=d,this.dir=v}}function __PRIVATE_orderByEquals(_,d){return _.dir===d.dir&&_.field.isEqual(d.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(d,v,A){super(),this.field=d,this.op=v,this.value=A}static create(d,v,A){return d.isKeyField()?v==="in"||v==="not-in"?this.createKeyFieldInFilter(d,v,A):new __PRIVATE_KeyFieldFilter(d,v,A):v==="array-contains"?new __PRIVATE_ArrayContainsFilter(d,A):v==="in"?new __PRIVATE_InFilter(d,A):v==="not-in"?new __PRIVATE_NotInFilter(d,A):v==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(d,A):new FieldFilter(d,v,A)}static createKeyFieldInFilter(d,v,A){return v==="in"?new __PRIVATE_KeyFieldInFilter(d,A):new __PRIVATE_KeyFieldNotInFilter(d,A)}matches(d){const v=d.data.field(this.field);return this.op==="!="?v!==null&&v.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(v,this.value)):v!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(v)&&this.matchesComparison(__PRIVATE_valueCompare(v,this.value))}matchesComparison(d){switch(this.op){case"<":return d<0;case"<=":return d<=0;case"==":return d===0;case"!=":return d!==0;case">":return d>0;case">=":return d>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(d,v){super(),this.filters=d,this.op=v,this.Pe=null}static create(d,v){return new CompositeFilter(d,v)}matches(d){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(v=>!v.matches(d))===void 0:this.filters.find(v=>v.matches(d))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((d,v)=>d.concat(v.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(_){return _.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(_){return __PRIVATE_compositeFilterIsFlat(_)&&__PRIVATE_compositeFilterIsConjunction(_)}function __PRIVATE_compositeFilterIsFlat(_){for(const d of _.filters)if(d instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(_){if(_ instanceof FieldFilter)return _.field.canonicalString()+_.op.toString()+canonicalId(_.value);if(__PRIVATE_compositeFilterIsFlatConjunction(_))return _.filters.map(d=>__PRIVATE_canonifyFilter(d)).join(",");{const d=_.filters.map(v=>__PRIVATE_canonifyFilter(v)).join(",");return`${_.op}(${d})`}}function __PRIVATE_filterEquals(_,d){return _ instanceof FieldFilter?function(A,C){return C instanceof FieldFilter&&A.op===C.op&&A.field.isEqual(C.field)&&__PRIVATE_valueEquals(A.value,C.value)}(_,d):_ instanceof CompositeFilter?function(A,C){return C instanceof CompositeFilter&&A.op===C.op&&A.filters.length===C.filters.length?A.filters.reduce((w,T,R)=>w&&__PRIVATE_filterEquals(T,C.filters[R]),!0):!1}(_,d):void fail(19439)}function __PRIVATE_stringifyFilter(_){return _ instanceof FieldFilter?function(v){return`${v.field.canonicalString()} ${v.op} ${canonicalId(v.value)}`}(_):_ instanceof CompositeFilter?function(v){return v.op.toString()+" {"+v.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(_):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(d,v,A){super(d,v,A),this.key=DocumentKey.fromName(A.referenceValue)}matches(d){const v=DocumentKey.comparator(d.key,this.key);return this.matchesComparison(v)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(d,v){super(d,"in",v),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",v)}matches(d){return this.keys.some(v=>v.isEqual(d.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(d,v){super(d,"not-in",v),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",v)}matches(d){return!this.keys.some(v=>v.isEqual(d.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(_,d){return(d.arrayValue?.values||[]).map(v=>DocumentKey.fromName(v.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(d,v){super(d,"array-contains",v)}matches(d){const v=d.data.field(this.field);return isArray$1(v)&&__PRIVATE_arrayValueContains(v.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(d,v){super(d,"in",v)}matches(d){const v=d.data.field(this.field);return v!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,v)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(d,v){super(d,"not-in",v)}matches(d){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const v=d.data.field(this.field);return v!==null&&v.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,v)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(d,v){super(d,"array-contains-any",v)}matches(d){const v=d.data.field(this.field);return!(!isArray$1(v)||!v.arrayValue.values)&&v.arrayValue.values.some(A=>__PRIVATE_arrayValueContains(this.value.arrayValue,A))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(d,v=null,A=[],C=[],w=null,T=null,R=null){this.path=d,this.collectionGroup=v,this.orderBy=A,this.filters=C,this.limit=w,this.startAt=T,this.endAt=R,this.Te=null}}function __PRIVATE_newTarget(_,d=null,v=[],A=[],C=null,w=null,T=null){return new __PRIVATE_TargetImpl(_,d,v,A,C,w,T)}function __PRIVATE_canonifyTarget(_){const d=__PRIVATE_debugCast(_);if(d.Te===null){let v=d.path.canonicalString();d.collectionGroup!==null&&(v+="|cg:"+d.collectionGroup),v+="|f:",v+=d.filters.map(A=>__PRIVATE_canonifyFilter(A)).join(","),v+="|ob:",v+=d.orderBy.map(A=>function(w){return w.field.canonicalString()+w.dir}(A)).join(","),__PRIVATE_isNullOrUndefined(d.limit)||(v+="|l:",v+=d.limit),d.startAt&&(v+="|lb:",v+=d.startAt.inclusive?"b:":"a:",v+=d.startAt.position.map(A=>canonicalId(A)).join(",")),d.endAt&&(v+="|ub:",v+=d.endAt.inclusive?"a:":"b:",v+=d.endAt.position.map(A=>canonicalId(A)).join(",")),d.Te=v}return d.Te}function __PRIVATE_targetEquals(_,d){if(_.limit!==d.limit||_.orderBy.length!==d.orderBy.length)return!1;for(let v=0;v<_.orderBy.length;v++)if(!__PRIVATE_orderByEquals(_.orderBy[v],d.orderBy[v]))return!1;if(_.filters.length!==d.filters.length)return!1;for(let v=0;v<_.filters.length;v++)if(!__PRIVATE_filterEquals(_.filters[v],d.filters[v]))return!1;return _.collectionGroup===d.collectionGroup&&!!_.path.isEqual(d.path)&&!!__PRIVATE_boundEquals(_.startAt,d.startAt)&&__PRIVATE_boundEquals(_.endAt,d.endAt)}function __PRIVATE_targetIsDocumentTarget(_){return DocumentKey.isDocumentKey(_.path)&&_.collectionGroup===null&&_.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(d,v=null,A=[],C=[],w=null,T="F",R=null,G=null){this.path=d,this.collectionGroup=v,this.explicitOrderBy=A,this.filters=C,this.limit=w,this.limitType=T,this.startAt=R,this.endAt=G,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(_,d,v,A,C,w,T,R){return new __PRIVATE_QueryImpl(_,d,v,A,C,w,T,R)}function __PRIVATE_newQueryForPath(_){return new __PRIVATE_QueryImpl(_)}function __PRIVATE_queryMatchesAllDocuments(_){return _.filters.length===0&&_.limit===null&&_.startAt==null&&_.endAt==null&&(_.explicitOrderBy.length===0||_.explicitOrderBy.length===1&&_.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(_){return _.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(_){const d=__PRIVATE_debugCast(_);if(d.Ie===null){d.Ie=[];const v=new Set;for(const w of d.explicitOrderBy)d.Ie.push(w),v.add(w.field.canonicalString());const A=d.explicitOrderBy.length>0?d.explicitOrderBy[d.explicitOrderBy.length-1].dir:"asc";(function(T){let R=new SortedSet(FieldPath$1.comparator);return T.filters.forEach(G=>{G.getFlattenedFilters().forEach(I=>{I.isInequality()&&(R=R.add(I.field))})}),R})(d).forEach(w=>{v.has(w.canonicalString())||w.isKeyField()||d.Ie.push(new OrderBy(w,A))}),v.has(FieldPath$1.keyField().canonicalString())||d.Ie.push(new OrderBy(FieldPath$1.keyField(),A))}return d.Ie}function __PRIVATE_queryToTarget(_){const d=__PRIVATE_debugCast(_);return d.Ee||(d.Ee=__PRIVATE__queryToTarget(d,__PRIVATE_queryNormalizedOrderBy(_))),d.Ee}function __PRIVATE_queryToAggregateTarget(_){const d=__PRIVATE_debugCast(_);return d.de||(d.de=__PRIVATE__queryToTarget(d,_.explicitOrderBy)),d.de}function __PRIVATE__queryToTarget(_,d){if(_.limitType==="F")return __PRIVATE_newTarget(_.path,_.collectionGroup,d,_.filters,_.limit,_.startAt,_.endAt);{d=d.map(C=>{const w=C.dir==="desc"?"asc":"desc";return new OrderBy(C.field,w)});const v=_.endAt?new Bound(_.endAt.position,_.endAt.inclusive):null,A=_.startAt?new Bound(_.startAt.position,_.startAt.inclusive):null;return __PRIVATE_newTarget(_.path,_.collectionGroup,d,_.filters,_.limit,v,A)}}function __PRIVATE_queryWithAddedFilter(_,d){const v=_.filters.concat([d]);return new __PRIVATE_QueryImpl(_.path,_.collectionGroup,_.explicitOrderBy.slice(),v,_.limit,_.limitType,_.startAt,_.endAt)}function __PRIVATE_queryWithLimit(_,d,v){return new __PRIVATE_QueryImpl(_.path,_.collectionGroup,_.explicitOrderBy.slice(),_.filters.slice(),d,v,_.startAt,_.endAt)}function __PRIVATE_queryEquals(_,d){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(_),__PRIVATE_queryToTarget(d))&&_.limitType===d.limitType}function __PRIVATE_canonifyQuery(_){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(_))}|lt:${_.limitType}`}function __PRIVATE_stringifyQuery(_){return`Query(target=${function(v){let A=v.path.canonicalString();return v.collectionGroup!==null&&(A+=" collectionGroup="+v.collectionGroup),v.filters.length>0&&(A+=`, filters: [${v.filters.map(C=>__PRIVATE_stringifyFilter(C)).join(", ")}]`),__PRIVATE_isNullOrUndefined(v.limit)||(A+=", limit: "+v.limit),v.orderBy.length>0&&(A+=`, orderBy: [${v.orderBy.map(C=>function(T){return`${T.field.canonicalString()} (${T.dir})`}(C)).join(", ")}]`),v.startAt&&(A+=", startAt: ",A+=v.startAt.inclusive?"b:":"a:",A+=v.startAt.position.map(C=>canonicalId(C)).join(",")),v.endAt&&(A+=", endAt: ",A+=v.endAt.inclusive?"a:":"b:",A+=v.endAt.position.map(C=>canonicalId(C)).join(",")),`Target(${A})`}(__PRIVATE_queryToTarget(_))}; limitType=${_.limitType})`}function __PRIVATE_queryMatches(_,d){return d.isFoundDocument()&&function(A,C){const w=C.key.path;return A.collectionGroup!==null?C.key.hasCollectionId(A.collectionGroup)&&A.path.isPrefixOf(w):DocumentKey.isDocumentKey(A.path)?A.path.isEqual(w):A.path.isImmediateParentOf(w)}(_,d)&&function(A,C){for(const w of __PRIVATE_queryNormalizedOrderBy(A))if(!w.field.isKeyField()&&C.data.field(w.field)===null)return!1;return!0}(_,d)&&function(A,C){for(const w of A.filters)if(!w.matches(C))return!1;return!0}(_,d)&&function(A,C){return!(A.startAt&&!function(T,R,G){const I=__PRIVATE_boundCompareToDocument(T,R,G);return T.inclusive?I<=0:I<0}(A.startAt,__PRIVATE_queryNormalizedOrderBy(A),C)||A.endAt&&!function(T,R,G){const I=__PRIVATE_boundCompareToDocument(T,R,G);return T.inclusive?I>=0:I>0}(A.endAt,__PRIVATE_queryNormalizedOrderBy(A),C))}(_,d)}function __PRIVATE_queryCollectionGroup(_){return _.collectionGroup||(_.path.length%2==1?_.path.lastSegment():_.path.get(_.path.length-2))}function __PRIVATE_newQueryComparator(_){return(d,v)=>{let A=!1;for(const C of __PRIVATE_queryNormalizedOrderBy(_)){const w=__PRIVATE_compareDocs(C,d,v);if(w!==0)return w;A=A||C.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(_,d,v){const A=_.field.isKeyField()?DocumentKey.comparator(d.key,v.key):function(w,T,R){const G=T.data.field(w),I=R.data.field(w);return G!==null&&I!==null?__PRIVATE_valueCompare(G,I):fail(42886)}(_.field,d,v);switch(_.dir){case"asc":return A;case"desc":return-1*A;default:return fail(19790,{direction:_.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(d,v){this.mapKeyFn=d,this.equalsFn=v,this.inner={},this.innerSize=0}get(d){const v=this.mapKeyFn(d),A=this.inner[v];if(A!==void 0){for(const[C,w]of A)if(this.equalsFn(C,d))return w}}has(d){return this.get(d)!==void 0}set(d,v){const A=this.mapKeyFn(d),C=this.inner[A];if(C===void 0)return this.inner[A]=[[d,v]],void this.innerSize++;for(let w=0;w<C.length;w++)if(this.equalsFn(C[w][0],d))return void(C[w]=[d,v]);C.push([d,v]),this.innerSize++}delete(d){const v=this.mapKeyFn(d),A=this.inner[v];if(A===void 0)return!1;for(let C=0;C<A.length;C++)if(this.equalsFn(A[C][0],d))return A.length===1?delete this.inner[v]:A.splice(C,1),this.innerSize--,!0;return!1}forEach(d){forEach(this.inner,(v,A)=>{for(const[C,w]of A)d(C,w)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt}const Vt=new SortedMap(DocumentKey.comparator);function documentMap(..._){let d=Vt;for(const v of _)d=d.insert(v.key,v);return d}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(_){let d=Vt;return _.forEach((v,A)=>d=d.insert(v,A.overlayedDocument)),d}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(_=>_.toString(),(_,d)=>_.isEqual(d))}const ft$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(..._){let d=ft$1;for(const v of _)d=d.add(v);return d}const gt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(_,d){if(_.useProto3Json){if(isNaN(d))return{doubleValue:"NaN"};if(d===1/0)return{doubleValue:"Infinity"};if(d===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(d)?"-0":d}}function __PRIVATE_toInteger(_){return{integerValue:""+_}}function toNumber(_,d){return isSafeInteger(d)?__PRIVATE_toInteger(d):__PRIVATE_toDouble(_,d)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(_,d,v){return _ instanceof __PRIVATE_ServerTimestampTransform?function(C,w){const T={fields:{[at]:{stringValue:_t$1},[ct]:{timestampValue:{seconds:C.seconds,nanos:C.nanoseconds}}}};return w&&__PRIVATE_isServerTimestamp(w)&&(w=__PRIVATE_getPreviousValue(w)),w&&(T.fields[ut]=w),{mapValue:T}}(v,d):_ instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(_,d):_ instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(_,d):function(C,w){const T=__PRIVATE_computeTransformOperationBaseValue(C,w),R=asNumber(T)+asNumber(C.Ae);return isInteger(T)&&isInteger(C.Ae)?__PRIVATE_toInteger(R):__PRIVATE_toDouble(C.serializer,R)}(_,d)}function __PRIVATE_applyTransformOperationToRemoteDocument(_,d,v){return _ instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(_,d):_ instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(_,d):v}function __PRIVATE_computeTransformOperationBaseValue(_,d){return _ instanceof __PRIVATE_NumericIncrementTransformOperation?function(A){return isInteger(A)||function(w){return!!w&&"doubleValue"in w}(A)}(d)?d:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(d){super(),this.elements=d}}function __PRIVATE_applyArrayUnionTransformOperation(_,d){const v=__PRIVATE_coercedFieldValuesArray(d);for(const A of _.elements)v.some(C=>__PRIVATE_valueEquals(C,A))||v.push(A);return{arrayValue:{values:v}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(d){super(),this.elements=d}}function __PRIVATE_applyArrayRemoveTransformOperation(_,d){let v=__PRIVATE_coercedFieldValuesArray(d);for(const A of _.elements)v=v.filter(C=>!__PRIVATE_valueEquals(C,A));return{arrayValue:{values:v}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(d,v){super(),this.serializer=d,this.Ae=v}}function asNumber(_){return __PRIVATE_normalizeNumber(_.integerValue||_.doubleValue)}function __PRIVATE_coercedFieldValuesArray(_){return isArray$1(_)&&_.arrayValue.values?_.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(_,d){return _.field.isEqual(d.field)&&function(A,C){return A instanceof __PRIVATE_ArrayUnionTransformOperation&&C instanceof __PRIVATE_ArrayUnionTransformOperation||A instanceof __PRIVATE_ArrayRemoveTransformOperation&&C instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(A.elements,C.elements,__PRIVATE_valueEquals):A instanceof __PRIVATE_NumericIncrementTransformOperation&&C instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(A.Ae,C.Ae):A instanceof __PRIVATE_ServerTimestampTransform&&C instanceof __PRIVATE_ServerTimestampTransform}(_.transform,d.transform)}class Precondition{constructor(d,v){this.updateTime=d,this.exists=v}static none(){return new Precondition}static exists(d){return new Precondition(void 0,d)}static updateTime(d){return new Precondition(d)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(d){return this.exists===d.exists&&(this.updateTime?!!d.updateTime&&this.updateTime.isEqual(d.updateTime):!d.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(_,d){return _.updateTime!==void 0?d.isFoundDocument()&&d.version.isEqual(_.updateTime):_.exists===void 0||_.exists===d.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(_,d){if(!_.hasLocalMutations||d&&d.fields.length===0)return null;if(d===null)return _.isNoDocument()?new __PRIVATE_DeleteMutation(_.key,Precondition.none()):new __PRIVATE_SetMutation(_.key,_.data,Precondition.none());{const v=_.data,A=ObjectValue.empty();let C=new SortedSet(FieldPath$1.comparator);for(let w of d.fields)if(!C.has(w)){let T=v.field(w);T===null&&w.length>1&&(w=w.popLast(),T=v.field(w)),T===null?A.delete(w):A.set(w,T),C=C.add(w)}return new __PRIVATE_PatchMutation(_.key,A,new FieldMask(C.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(_,d,v){_ instanceof __PRIVATE_SetMutation?function(C,w,T){const R=C.value.clone(),G=__PRIVATE_serverTransformResults(C.fieldTransforms,w,T.transformResults);R.setAll(G),w.convertToFoundDocument(T.version,R).setHasCommittedMutations()}(_,d,v):_ instanceof __PRIVATE_PatchMutation?function(C,w,T){if(!__PRIVATE_preconditionIsValidForDocument(C.precondition,w))return void w.convertToUnknownDocument(T.version);const R=__PRIVATE_serverTransformResults(C.fieldTransforms,w,T.transformResults),G=w.data;G.setAll(__PRIVATE_getPatch(C)),G.setAll(R),w.convertToFoundDocument(T.version,G).setHasCommittedMutations()}(_,d,v):function(C,w,T){w.convertToNoDocument(T.version).setHasCommittedMutations()}(0,d,v)}function __PRIVATE_mutationApplyToLocalView(_,d,v,A){return _ instanceof __PRIVATE_SetMutation?function(w,T,R,G){if(!__PRIVATE_preconditionIsValidForDocument(w.precondition,T))return R;const I=w.value.clone(),z=__PRIVATE_localTransformResults(w.fieldTransforms,G,T);return I.setAll(z),T.convertToFoundDocument(T.version,I).setHasLocalMutations(),null}(_,d,v,A):_ instanceof __PRIVATE_PatchMutation?function(w,T,R,G){if(!__PRIVATE_preconditionIsValidForDocument(w.precondition,T))return R;const I=__PRIVATE_localTransformResults(w.fieldTransforms,G,T),z=T.data;return z.setAll(__PRIVATE_getPatch(w)),z.setAll(I),T.convertToFoundDocument(T.version,z).setHasLocalMutations(),R===null?null:R.unionWith(w.fieldMask.fields).unionWith(w.fieldTransforms.map(H=>H.field))}(_,d,v,A):function(w,T,R){return __PRIVATE_preconditionIsValidForDocument(w.precondition,T)?(T.convertToNoDocument(T.version).setHasLocalMutations(),null):R}(_,d,v)}function __PRIVATE_mutationEquals(_,d){return _.type===d.type&&!!_.key.isEqual(d.key)&&!!_.precondition.isEqual(d.precondition)&&!!function(A,C){return A===void 0&&C===void 0||!(!A||!C)&&__PRIVATE_arrayEquals(A,C,(w,T)=>__PRIVATE_fieldTransformEquals(w,T))}(_.fieldTransforms,d.fieldTransforms)&&(_.type===0?_.value.isEqual(d.value):_.type!==1||_.data.isEqual(d.data)&&_.fieldMask.isEqual(d.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(d,v,A,C=[]){super(),this.key=d,this.value=v,this.precondition=A,this.fieldTransforms=C,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(d,v,A,C,w=[]){super(),this.key=d,this.data=v,this.fieldMask=A,this.precondition=C,this.fieldTransforms=w,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(_){const d=new Map;return _.fieldMask.fields.forEach(v=>{if(!v.isEmpty()){const A=_.data.field(v);d.set(v,A)}}),d}function __PRIVATE_serverTransformResults(_,d,v){const A=new Map;__PRIVATE_hardAssert(_.length===v.length,32656,{Re:v.length,Ve:_.length});for(let C=0;C<v.length;C++){const w=_[C],T=w.transform,R=d.data.field(w.field);A.set(w.field,__PRIVATE_applyTransformOperationToRemoteDocument(T,R,v[C]))}return A}function __PRIVATE_localTransformResults(_,d,v){const A=new Map;for(const C of _){const w=C.transform,T=v.data.field(C.field);A.set(C.field,__PRIVATE_applyTransformOperationToLocalView(w,T,d))}return A}class __PRIVATE_DeleteMutation extends Mutation{constructor(d,v){super(),this.key=d,this.precondition=v,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(d,v,A,C){this.batchId=d,this.localWriteTime=v,this.baseMutations=A,this.mutations=C}applyToRemoteDocument(d,v){const A=v.mutationResults;for(let C=0;C<this.mutations.length;C++){const w=this.mutations[C];w.key.isEqual(d.key)&&__PRIVATE_mutationApplyToRemoteDocument(w,d,A[C])}}applyToLocalView(d,v){for(const A of this.baseMutations)A.key.isEqual(d.key)&&(v=__PRIVATE_mutationApplyToLocalView(A,d,v,this.localWriteTime));for(const A of this.mutations)A.key.isEqual(d.key)&&(v=__PRIVATE_mutationApplyToLocalView(A,d,v,this.localWriteTime));return v}applyToLocalDocumentSet(d,v){const A=__PRIVATE_newMutationMap();return this.mutations.forEach(C=>{const w=d.get(C.key),T=w.overlayedDocument;let R=this.applyToLocalView(T,w.mutatedFields);R=v.has(C.key)?null:R;const G=__PRIVATE_calculateOverlayMutation(T,R);G!==null&&A.set(C.key,G),T.isValidDocument()||T.convertToNoDocument(SnapshotVersion.min())}),A}keys(){return this.mutations.reduce((d,v)=>d.add(v.key),__PRIVATE_documentKeySet())}isEqual(d){return this.batchId===d.batchId&&__PRIVATE_arrayEquals(this.mutations,d.mutations,(v,A)=>__PRIVATE_mutationEquals(v,A))&&__PRIVATE_arrayEquals(this.baseMutations,d.baseMutations,(v,A)=>__PRIVATE_mutationEquals(v,A))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(d,v){this.largestBatchId=d,this.mutation=v}getKey(){return this.mutation.key}isEqual(d){return d!==null&&this.mutation===d.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AggregateImpl{constructor(d,v,A){this.alias=d,this.aggregateType=v,this.fieldPath=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(d,v){this.count=d,this.unchangedNames=v}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,yt$1;function __PRIVATE_mapCodeFromRpcCode(_){if(_===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(_){case pt.OK:return N.OK;case pt.CANCELLED:return N.CANCELLED;case pt.UNKNOWN:return N.UNKNOWN;case pt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case pt.INTERNAL:return N.INTERNAL;case pt.UNAVAILABLE:return N.UNAVAILABLE;case pt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case pt.NOT_FOUND:return N.NOT_FOUND;case pt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case pt.ABORTED:return N.ABORTED;case pt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case pt.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:_})}}(yt$1=pt||(pt={}))[yt$1.OK=0]="OK",yt$1[yt$1.CANCELLED=1]="CANCELLED",yt$1[yt$1.UNKNOWN=2]="UNKNOWN",yt$1[yt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt$1[yt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt$1[yt$1.NOT_FOUND=5]="NOT_FOUND",yt$1[yt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt$1[yt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt$1[yt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt$1[yt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt$1[yt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt$1[yt$1.ABORTED=10]="ABORTED",yt$1[yt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt$1[yt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt$1[yt$1.INTERNAL=13]="INTERNAL",yt$1[yt$1.UNAVAILABLE=14]="UNAVAILABLE",yt$1[yt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(_){const d=__PRIVATE_newTextEncoder().encode(_),v=new Md5;return v.update(d),new Uint8Array(v.digest())}function __PRIVATE_get64BitUints(_){const d=new DataView(_.buffer),v=d.getUint32(0,!0),A=d.getUint32(4,!0),C=d.getUint32(8,!0),w=d.getUint32(12,!0);return[new Integer([v,A],0),new Integer([C,w],0)]}class BloomFilter{constructor(d,v,A){if(this.bitmap=d,this.padding=v,this.hashCount=A,v<0||v>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${v}`);if(A<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${A}`);if(d.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${A}`);if(d.length===0&&v!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${v}`);this.ge=8*d.length-v,this.pe=Integer.fromNumber(this.ge)}ye(d,v,A){let C=d.add(v.multiply(Integer.fromNumber(A)));return C.compare(St)===1&&(C=new Integer([C.getBits(0),C.getBits(1)],0)),C.modulo(this.pe).toNumber()}we(d){return!!(this.bitmap[Math.floor(d/8)]&1<<d%8)}mightContain(d){if(this.ge===0)return!1;const v=__PRIVATE_getMd5HashValue(d),[A,C]=__PRIVATE_get64BitUints(v);for(let w=0;w<this.hashCount;w++){const T=this.ye(A,C,w);if(!this.we(T))return!1}return!0}static create(d,v,A){const C=d%8==0?0:8-d%8,w=new Uint8Array(Math.ceil(d/8)),T=new BloomFilter(w,C,v);return A.forEach(R=>T.insert(R)),T}insert(d){if(this.ge===0)return;const v=__PRIVATE_getMd5HashValue(d),[A,C]=__PRIVATE_get64BitUints(v);for(let w=0;w<this.hashCount;w++){const T=this.ye(A,C,w);this.Se(T)}}Se(d){const v=Math.floor(d/8),A=d%8;this.bitmap[v]|=1<<A}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(d,v,A,C,w){this.snapshotVersion=d,this.targetChanges=v,this.targetMismatches=A,this.documentUpdates=C,this.resolvedLimboDocuments=w}static createSynthesizedRemoteEventForCurrentChange(d,v,A){const C=new Map;return C.set(d,TargetChange.createSynthesizedTargetChangeForCurrentChange(d,v,A)),new RemoteEvent(SnapshotVersion.min(),C,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(d,v,A,C,w){this.resumeToken=d,this.current=v,this.addedDocuments=A,this.modifiedDocuments=C,this.removedDocuments=w}static createSynthesizedTargetChangeForCurrentChange(d,v,A){return new TargetChange(A,v,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(d,v,A,C){this.be=d,this.removedTargetIds=v,this.key=A,this.De=C}}class __PRIVATE_ExistenceFilterChange{constructor(d,v){this.targetId=d,this.Ce=v}}class __PRIVATE_WatchTargetChange{constructor(d,v,A=ByteString.EMPTY_BYTE_STRING,C=null){this.state=d,this.targetIds=v,this.resumeToken=A,this.cause=C}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(d){d.approximateByteSize()>0&&(this.Oe=!0,this.Me=d)}ke(){let d=__PRIVATE_documentKeySet(),v=__PRIVATE_documentKeySet(),A=__PRIVATE_documentKeySet();return this.Fe.forEach((C,w)=>{switch(w){case 0:d=d.add(C);break;case 2:v=v.add(C);break;case 1:A=A.add(C);break;default:fail(38017,{changeType:w})}}),new TargetChange(this.Me,this.xe,d,v,A)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(d,v){this.Oe=!0,this.Fe=this.Fe.insert(d,v)}$e(d){this.Oe=!0,this.Fe=this.Fe.remove(d)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(d){this.Ge=d,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(d){for(const v of d.be)d.De&&d.De.isFoundDocument()?this.Xe(v,d.De):this.et(v,d.key,d.De);for(const v of d.removedTargetIds)this.et(v,d.key,d.De)}tt(d){this.forEachTarget(d,v=>{const A=this.nt(v);switch(d.state){case 0:this.rt(v)&&A.Le(d.resumeToken);break;case 1:A.Ke(),A.Ne||A.qe(),A.Le(d.resumeToken);break;case 2:A.Ke(),A.Ne||this.removeTarget(v);break;case 3:this.rt(v)&&(A.We(),A.Le(d.resumeToken));break;case 4:this.rt(v)&&(this.it(v),A.Le(d.resumeToken));break;default:fail(56790,{state:d.state})}})}forEachTarget(d,v){d.targetIds.length>0?d.targetIds.forEach(v):this.ze.forEach((A,C)=>{this.rt(C)&&v(C)})}st(d){const v=d.targetId,A=d.Ce.count,C=this.ot(v);if(C){const w=C.target;if(__PRIVATE_targetIsDocumentTarget(w))if(A===0){const T=new DocumentKey(w.path);this.et(v,T,MutableDocument.newNoDocument(T,SnapshotVersion.min()))}else __PRIVATE_hardAssert(A===1,20013,{expectedCount:A});else{const T=this._t(v);if(T!==A){const R=this.ut(d),G=R?this.ct(R,d,T):1;if(G!==0){this.it(v);const I=G===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(v,I)}}}}}ut(d){const v=d.Ce.unchangedNames;if(!v||!v.bits)return null;const{bits:{bitmap:A="",padding:C=0},hashCount:w=0}=v;let T,R;try{T=__PRIVATE_normalizeByteString(A).toUint8Array()}catch(G){if(G instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+G.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw G}try{R=new BloomFilter(T,C,w)}catch(G){return __PRIVATE_logWarn(G instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",G),null}return R.ge===0?null:R}ct(d,v,A){return v.Ce.count===A-this.Pt(d,v.targetId)?0:2}Pt(d,v){const A=this.Ge.getRemoteKeysForTarget(v);let C=0;return A.forEach(w=>{const T=this.Ge.ht(),R=`projects/${T.projectId}/databases/${T.database}/documents/${w.path.canonicalString()}`;d.mightContain(R)||(this.et(v,w,null),C++)}),C}Tt(d){const v=new Map;this.ze.forEach((w,T)=>{const R=this.ot(T);if(R){if(w.current&&__PRIVATE_targetIsDocumentTarget(R.target)){const G=new DocumentKey(R.target.path);this.It(G).has(T)||this.Et(T,G)||this.et(T,G,MutableDocument.newNoDocument(G,d))}w.Be&&(v.set(T,w.ke()),w.qe())}});let A=__PRIVATE_documentKeySet();this.He.forEach((w,T)=>{let R=!0;T.forEachWhile(G=>{const I=this.ot(G);return!I||I.purpose==="TargetPurposeLimboResolution"||(R=!1,!1)}),R&&(A=A.add(w))}),this.je.forEach((w,T)=>T.setReadTime(d));const C=new RemoteEvent(d,v,this.Ye,this.je,A);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),C}Xe(d,v){if(!this.rt(d))return;const A=this.Et(d,v.key)?2:0;this.nt(d).Qe(v.key,A),this.je=this.je.insert(v.key,v),this.Je=this.Je.insert(v.key,this.It(v.key).add(d)),this.He=this.He.insert(v.key,this.dt(v.key).add(d))}et(d,v,A){if(!this.rt(d))return;const C=this.nt(d);this.Et(d,v)?C.Qe(v,1):C.$e(v),this.He=this.He.insert(v,this.dt(v).delete(d)),this.He=this.He.insert(v,this.dt(v).add(d)),A&&(this.je=this.je.insert(v,A))}removeTarget(d){this.ze.delete(d)}_t(d){const v=this.nt(d).ke();return this.Ge.getRemoteKeysForTarget(d).size+v.addedDocuments.size-v.removedDocuments.size}Ue(d){this.nt(d).Ue()}nt(d){let v=this.ze.get(d);return v||(v=new __PRIVATE_TargetState,this.ze.set(d,v)),v}dt(d){let v=this.He.get(d);return v||(v=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(d,v)),v}It(d){let v=this.Je.get(d);return v||(v=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(d,v)),v}rt(d){const v=this.ot(d)!==null;return v||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",d),v}ot(d){const v=this.ze.get(d);return v&&v.Ne?null:this.Ge.At(d)}it(d){this.ze.set(d,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(d).forEach(v=>{this.et(d,v,null)})}Et(d,v){return this.Ge.getRemoteKeysForTarget(d).has(v)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt$1={asc:"ASCENDING",desc:"DESCENDING"},Dt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(d,v){this.databaseId=d,this.useProto3Json=v}}function __PRIVATE_toInt32Proto(_,d){return _.useProto3Json||__PRIVATE_isNullOrUndefined(d)?d:{value:d}}function toTimestamp(_,d){return _.useProto3Json?`${new Date(1e3*d.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+d.nanoseconds).slice(-9)}Z`:{seconds:""+d.seconds,nanos:d.nanoseconds}}function __PRIVATE_toBytes(_,d){return _.useProto3Json?d.toBase64():d.toUint8Array()}function __PRIVATE_fromVersion(_){return __PRIVATE_hardAssert(!!_,49232),SnapshotVersion.fromTimestamp(function(v){const A=__PRIVATE_normalizeTimestamp(v);return new Timestamp(A.seconds,A.nanos)}(_))}function __PRIVATE_toResourceName(_,d){return __PRIVATE_toResourcePath(_,d).canonicalString()}function __PRIVATE_toResourcePath(_,d){const v=function(C){return new ResourcePath(["projects",C.projectId,"databases",C.database])}(_).child("documents");return d===void 0?v:v.child(d)}function __PRIVATE_fromResourceName(_){const d=ResourcePath.fromString(_);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(d),10190,{key:d.toString()}),d}function fromName(_,d){const v=__PRIVATE_fromResourceName(d);if(v.get(1)!==_.databaseId.projectId)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+v.get(1)+" vs "+_.databaseId.projectId);if(v.get(3)!==_.databaseId.database)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+v.get(3)+" vs "+_.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(v))}function __PRIVATE_toQueryPath(_,d){return __PRIVATE_toResourceName(_.databaseId,d)}function __PRIVATE_fromQueryPath(_){const d=__PRIVATE_fromResourceName(_);return d.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(d)}function __PRIVATE_getEncodedDatabaseId(_){return new ResourcePath(["projects",_.databaseId.projectId,"databases",_.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(_){return __PRIVATE_hardAssert(_.length>4&&_.get(4)==="documents",29091,{key:_.toString()}),_.popFirst(5)}function __PRIVATE_fromWatchChange(_,d){let v;if("targetChange"in d){d.targetChange;const A=function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:fail(39313,{state:I})}(d.targetChange.targetChangeType||"NO_CHANGE"),C=d.targetChange.targetIds||[],w=function(I,z){return I.useProto3Json?(__PRIVATE_hardAssert(z===void 0||typeof z=="string",58123),ByteString.fromBase64String(z||"")):(__PRIVATE_hardAssert(z===void 0||z instanceof Buffer||z instanceof Uint8Array,16193),ByteString.fromUint8Array(z||new Uint8Array))}(_,d.targetChange.resumeToken),T=d.targetChange.cause,R=T&&function(I){const z=I.code===void 0?N.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(I.code);return new FirestoreError(z,I.message||"")}(T);v=new __PRIVATE_WatchTargetChange(A,C,w,R||null)}else if("documentChange"in d){d.documentChange;const A=d.documentChange;A.document,A.document.name,A.document.updateTime;const C=fromName(_,A.document.name),w=__PRIVATE_fromVersion(A.document.updateTime),T=A.document.createTime?__PRIVATE_fromVersion(A.document.createTime):SnapshotVersion.min(),R=new ObjectValue({mapValue:{fields:A.document.fields}}),G=MutableDocument.newFoundDocument(C,w,T,R),I=A.targetIds||[],z=A.removedTargetIds||[];v=new __PRIVATE_DocumentWatchChange(I,z,G.key,G)}else if("documentDelete"in d){d.documentDelete;const A=d.documentDelete;A.document;const C=fromName(_,A.document),w=A.readTime?__PRIVATE_fromVersion(A.readTime):SnapshotVersion.min(),T=MutableDocument.newNoDocument(C,w),R=A.removedTargetIds||[];v=new __PRIVATE_DocumentWatchChange([],R,T.key,T)}else if("documentRemove"in d){d.documentRemove;const A=d.documentRemove;A.document;const C=fromName(_,A.document),w=A.removedTargetIds||[];v=new __PRIVATE_DocumentWatchChange([],w,C,null)}else{if(!("filter"in d))return fail(11601,{Rt:d});{d.filter;const A=d.filter;A.targetId;const{count:C=0,unchangedNames:w}=A,T=new ExistenceFilter(C,w),R=A.targetId;v=new __PRIVATE_ExistenceFilterChange(R,T)}}return v}function __PRIVATE_toDocumentsTarget(_,d){return{documents:[__PRIVATE_toQueryPath(_,d.path)]}}function __PRIVATE_toQueryTarget(_,d){const v={structuredQuery:{}},A=d.path;let C;d.collectionGroup!==null?(C=A,v.structuredQuery.from=[{collectionId:d.collectionGroup,allDescendants:!0}]):(C=A.popLast(),v.structuredQuery.from=[{collectionId:A.lastSegment()}]),v.parent=__PRIVATE_toQueryPath(_,C);const w=function(I){if(I.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(I,"and"))}(d.filters);w&&(v.structuredQuery.where=w);const T=function(I){if(I.length!==0)return I.map(z=>function(Y){return{field:__PRIVATE_toFieldPathReference(Y.field),direction:__PRIVATE_toDirection(Y.dir)}}(z))}(d.orderBy);T&&(v.structuredQuery.orderBy=T);const R=__PRIVATE_toInt32Proto(_,d.limit);return R!==null&&(v.structuredQuery.limit=R),d.startAt&&(v.structuredQuery.startAt=function(I){return{before:I.inclusive,values:I.position}}(d.startAt)),d.endAt&&(v.structuredQuery.endAt=function(I){return{before:!I.inclusive,values:I.position}}(d.endAt)),{ft:v,parent:C}}function __PRIVATE_toRunAggregationQueryRequest(_,d,v,A){const{ft:C,parent:w}=__PRIVATE_toQueryTarget(_,d),T={},R=[];let G=0;return v.forEach(I=>{const z="aggregate_"+G++;T[z]=I.alias,I.aggregateType==="count"?R.push({alias:z,count:{}}):I.aggregateType==="avg"?R.push({alias:z,avg:{field:__PRIVATE_toFieldPathReference(I.fieldPath)}}):I.aggregateType==="sum"&&R.push({alias:z,sum:{field:__PRIVATE_toFieldPathReference(I.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:R,structuredQuery:C.structuredQuery},parent:C.parent},gt:T,parent:w}}function __PRIVATE_convertQueryTargetToQuery(_){let d=__PRIVATE_fromQueryPath(_.parent);const v=_.structuredQuery,A=v.from?v.from.length:0;let C=null;if(A>0){__PRIVATE_hardAssert(A===1,65062);const z=v.from[0];z.allDescendants?C=z.collectionId:d=d.child(z.collectionId)}let w=[];v.where&&(w=function(H){const Y=__PRIVATE_fromFilter(H);return Y instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(Y)?Y.getFilters():[Y]}(v.where));let T=[];v.orderBy&&(T=function(H){return H.map(Y=>function(ie){return new OrderBy(__PRIVATE_fromFieldPathReference(ie.field),function(se){switch(se){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ie.direction))}(Y))}(v.orderBy));let R=null;v.limit&&(R=function(H){let Y;return Y=typeof H=="object"?H.value:H,__PRIVATE_isNullOrUndefined(Y)?null:Y}(v.limit));let G=null;v.startAt&&(G=function(H){const Y=!!H.before,ee=H.values||[];return new Bound(ee,Y)}(v.startAt));let I=null;return v.endAt&&(I=function(H){const Y=!H.before,ee=H.values||[];return new Bound(ee,Y)}(v.endAt)),__PRIVATE_newQuery(d,C,T,w,R,"F",G,I)}function __PRIVATE_toListenRequestLabels(_,d){const v=function(C){switch(C){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:C})}}(d.purpose);return v==null?null:{"goog-listen-tags":v}}function __PRIVATE_fromFilter(_){return _.unaryFilter!==void 0?function(v){switch(v.unaryFilter.op){case"IS_NAN":const A=__PRIVATE_fromFieldPathReference(v.unaryFilter.field);return FieldFilter.create(A,"==",{doubleValue:NaN});case"IS_NULL":const C=__PRIVATE_fromFieldPathReference(v.unaryFilter.field);return FieldFilter.create(C,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const w=__PRIVATE_fromFieldPathReference(v.unaryFilter.field);return FieldFilter.create(w,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const T=__PRIVATE_fromFieldPathReference(v.unaryFilter.field);return FieldFilter.create(T,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(_):_.fieldFilter!==void 0?function(v){return FieldFilter.create(__PRIVATE_fromFieldPathReference(v.fieldFilter.field),function(C){switch(C){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(v.fieldFilter.op),v.fieldFilter.value)}(_):_.compositeFilter!==void 0?function(v){return CompositeFilter.create(v.compositeFilter.filters.map(A=>__PRIVATE_fromFilter(A)),function(C){switch(C){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(v.compositeFilter.op))}(_):fail(30097,{filter:_})}function __PRIVATE_toDirection(_){return bt$1[_]}function __PRIVATE_toOperatorName(_){return Dt[_]}function __PRIVATE_toCompositeOperatorName(_){return Ct[_]}function __PRIVATE_toFieldPathReference(_){return{fieldPath:_.canonicalString()}}function __PRIVATE_fromFieldPathReference(_){return FieldPath$1.fromServerFormat(_.fieldPath)}function __PRIVATE_toFilter(_){return _ instanceof FieldFilter?function(v){if(v.op==="=="){if(__PRIVATE_isNanValue(v.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(v.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(v.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(v.field),op:"IS_NULL"}}}else if(v.op==="!="){if(__PRIVATE_isNanValue(v.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(v.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(v.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(v.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(v.field),op:__PRIVATE_toOperatorName(v.op),value:v.value}}}(_):_ instanceof CompositeFilter?function(v){const A=v.getFilters().map(C=>__PRIVATE_toFilter(C));return A.length===1?A[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(v.op),filters:A}}}(_):fail(54877,{filter:_})}function __PRIVATE_isValidResourceName(_){return _.length>=4&&_.get(0)==="projects"&&_.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(d,v,A,C,w=SnapshotVersion.min(),T=SnapshotVersion.min(),R=ByteString.EMPTY_BYTE_STRING,G=null){this.target=d,this.targetId=v,this.purpose=A,this.sequenceNumber=C,this.snapshotVersion=w,this.lastLimboFreeSnapshotVersion=T,this.resumeToken=R,this.expectedCount=G}withSequenceNumber(d){return new TargetData(this.target,this.targetId,this.purpose,d,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(d,v){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,v,this.lastLimboFreeSnapshotVersion,d,null)}withExpectedCount(d){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,d)}withLastLimboFreeSnapshotVersion(d){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,d,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(d){this.yt=d}}function __PRIVATE_fromBundledQuery(_){const d=__PRIVATE_convertQueryTargetToQuery({parent:_.parent,structuredQuery:_.structuredQuery});return _.limitType==="LAST"?__PRIVATE_queryWithLimit(d,d.limit,"L"):d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(d,v){return this.Cn.add(v),PersistencePromise.resolve()}getCollectionParents(d,v){return PersistencePromise.resolve(this.Cn.getEntries(v))}addFieldIndex(d,v){return PersistencePromise.resolve()}deleteFieldIndex(d,v){return PersistencePromise.resolve()}deleteAllFieldIndexes(d){return PersistencePromise.resolve()}createTargetIndexes(d,v){return PersistencePromise.resolve()}getDocumentsMatchingTarget(d,v){return PersistencePromise.resolve(null)}getIndexType(d,v){return PersistencePromise.resolve(0)}getFieldIndexes(d,v){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(d){return PersistencePromise.resolve(null)}getMinOffset(d,v){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(d,v){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(d,v,A){return PersistencePromise.resolve()}updateIndexEntries(d,v){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(d){const v=d.lastSegment(),A=d.popLast(),C=this.index[v]||new SortedSet(ResourcePath.comparator),w=!C.has(A);return this.index[v]=C.add(A),w}has(d){const v=d.lastSegment(),A=d.popLast(),C=this.index[v];return C&&C.has(A)}getEntries(d){return(this.index[d]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot=41943040;class LruParams{static withCacheSize(d){return new LruParams(d,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(d,v,A){this.cacheSizeCollectionThreshold=d,this.percentileToCollect=v,this.maximumSequenceNumbersToCollect=A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(d){this.ar=d}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="LruGarbageCollector",Bt=1048576;function __PRIVATE_bufferEntryComparator([_,d],[v,A]){const C=__PRIVATE_primitiveComparator(_,v);return C===0?__PRIVATE_primitiveComparator(d,A):C}class __PRIVATE_RollingSequenceNumberBuffer{constructor(d){this.Ir=d,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(d){const v=[d,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(v);else{const A=this.buffer.last();__PRIVATE_bufferEntryComparator(v,A)<0&&(this.buffer=this.buffer.delete(A).add(v))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(d,v,A){this.garbageCollector=d,this.asyncQueue=v,this.localStore=A,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(d){__PRIVATE_logDebug(Nt,`Garbage collection scheduled in ${d}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",d,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(v){__PRIVATE_isIndexedDbTransactionError(v)?__PRIVATE_logDebug(Nt,"Ignoring IndexedDB error during garbage collection: ",v):await __PRIVATE_ignoreIfPrimaryLeaseLoss(v)}await this.Vr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(d,v){this.mr=d,this.params=v}calculateTargetCount(d,v){return this.mr.gr(d).next(A=>Math.floor(v/100*A))}nthSequenceNumber(d,v){if(v===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const A=new __PRIVATE_RollingSequenceNumberBuffer(v);return this.mr.forEachTarget(d,C=>A.Ar(C.sequenceNumber)).next(()=>this.mr.pr(d,C=>A.Ar(C))).next(()=>A.maxValue)}removeTargets(d,v,A){return this.mr.removeTargets(d,v,A)}removeOrphanedDocuments(d,v){return this.mr.removeOrphanedDocuments(d,v)}collect(d,v){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt)):this.getCacheSize(d).next(A=>A<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${A} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt):this.yr(d,v))}getCacheSize(d){return this.mr.getCacheSize(d)}yr(d,v){let A,C,w,T,R,G,I;const z=Date.now();return this.calculateTargetCount(d,this.params.percentileToCollect).next(H=>(H>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${H}`),C=this.params.maximumSequenceNumbersToCollect):C=H,T=Date.now(),this.nthSequenceNumber(d,C))).next(H=>(A=H,R=Date.now(),this.removeTargets(d,A,v))).next(H=>(w=H,G=Date.now(),this.removeOrphanedDocuments(d,A))).next(H=>(I=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${T-z}ms
	Determined least recently used ${C} in `+(R-T)+`ms
	Removed ${w} targets in `+(G-R)+`ms
	Removed ${H} documents in `+(I-G)+`ms
Total Duration: ${I-z}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:C,targetsRemoved:w,documentsRemoved:H})))}}function __PRIVATE_newLruGarbageCollector(_,d){return new __PRIVATE_LruGarbageCollectorImpl(_,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(d=>d.toString(),(d,v)=>d.isEqual(v)),this.changesApplied=!1}addEntry(d){this.assertNotApplied(),this.changes.set(d.key,d)}removeEntry(d,v){this.assertNotApplied(),this.changes.set(d,MutableDocument.newInvalidDocument(d).setReadTime(v))}getEntry(d,v){this.assertNotApplied();const A=this.changes.get(v);return A!==void 0?PersistencePromise.resolve(A):this.getFromCache(d,v)}getEntries(d,v){return this.getAllFromCache(d,v)}apply(d){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(d)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(d,v){this.overlayedDocument=d,this.mutatedFields=v}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(d,v,A,C){this.remoteDocumentCache=d,this.mutationQueue=v,this.documentOverlayCache=A,this.indexManager=C}getDocument(d,v){let A=null;return this.documentOverlayCache.getOverlay(d,v).next(C=>(A=C,this.remoteDocumentCache.getEntry(d,v))).next(C=>(A!==null&&__PRIVATE_mutationApplyToLocalView(A.mutation,C,FieldMask.empty(),Timestamp.now()),C))}getDocuments(d,v){return this.remoteDocumentCache.getEntries(d,v).next(A=>this.getLocalViewOfDocuments(d,A,__PRIVATE_documentKeySet()).next(()=>A))}getLocalViewOfDocuments(d,v,A=__PRIVATE_documentKeySet()){const C=__PRIVATE_newOverlayMap();return this.populateOverlays(d,C,v).next(()=>this.computeViews(d,v,C,A).next(w=>{let T=documentMap();return w.forEach((R,G)=>{T=T.insert(R,G.overlayedDocument)}),T}))}getOverlayedDocuments(d,v){const A=__PRIVATE_newOverlayMap();return this.populateOverlays(d,A,v).next(()=>this.computeViews(d,v,A,__PRIVATE_documentKeySet()))}populateOverlays(d,v,A){const C=[];return A.forEach(w=>{v.has(w)||C.push(w)}),this.documentOverlayCache.getOverlays(d,C).next(w=>{w.forEach((T,R)=>{v.set(T,R)})})}computeViews(d,v,A,C){let w=__PRIVATE_mutableDocumentMap();const T=__PRIVATE_newDocumentKeyMap(),R=function(){return __PRIVATE_newDocumentKeyMap()}();return v.forEach((G,I)=>{const z=A.get(I.key);C.has(I.key)&&(z===void 0||z.mutation instanceof __PRIVATE_PatchMutation)?w=w.insert(I.key,I):z!==void 0?(T.set(I.key,z.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(z.mutation,I,z.mutation.getFieldMask(),Timestamp.now())):T.set(I.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(d,w).next(G=>(G.forEach((I,z)=>T.set(I,z)),v.forEach((I,z)=>R.set(I,new OverlayedDocument(z,T.get(I)??null))),R))}recalculateAndSaveOverlays(d,v){const A=__PRIVATE_newDocumentKeyMap();let C=new SortedMap((T,R)=>T-R),w=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(d,v).next(T=>{for(const R of T)R.keys().forEach(G=>{const I=v.get(G);if(I===null)return;let z=A.get(G)||FieldMask.empty();z=R.applyToLocalView(I,z),A.set(G,z);const H=(C.get(R.batchId)||__PRIVATE_documentKeySet()).add(G);C=C.insert(R.batchId,H)})}).next(()=>{const T=[],R=C.getReverseIterator();for(;R.hasNext();){const G=R.getNext(),I=G.key,z=G.value,H=__PRIVATE_newMutationMap();z.forEach(Y=>{if(!w.has(Y)){const ee=__PRIVATE_calculateOverlayMutation(v.get(Y),A.get(Y));ee!==null&&H.set(Y,ee),w=w.add(Y)}}),T.push(this.documentOverlayCache.saveOverlays(d,I,H))}return PersistencePromise.waitFor(T)}).next(()=>A)}recalculateAndSaveOverlaysForDocumentKeys(d,v){return this.remoteDocumentCache.getEntries(d,v).next(A=>this.recalculateAndSaveOverlays(d,A))}getDocumentsMatchingQuery(d,v,A,C){return function(T){return DocumentKey.isDocumentKey(T.path)&&T.collectionGroup===null&&T.filters.length===0}(v)?this.getDocumentsMatchingDocumentQuery(d,v.path):__PRIVATE_isCollectionGroupQuery(v)?this.getDocumentsMatchingCollectionGroupQuery(d,v,A,C):this.getDocumentsMatchingCollectionQuery(d,v,A,C)}getNextDocuments(d,v,A,C){return this.remoteDocumentCache.getAllFromCollectionGroup(d,v,A,C).next(w=>{const T=C-w.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(d,v,A.largestBatchId,C-w.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let R=U,G=w;return T.next(I=>PersistencePromise.forEach(I,(z,H)=>(R<H.largestBatchId&&(R=H.largestBatchId),w.get(z)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(d,z).next(Y=>{G=G.insert(z,Y)}))).next(()=>this.populateOverlays(d,I,w)).next(()=>this.computeViews(d,G,I,__PRIVATE_documentKeySet())).next(z=>({batchId:R,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(z)})))})}getDocumentsMatchingDocumentQuery(d,v){return this.getDocument(d,new DocumentKey(v)).next(A=>{let C=documentMap();return A.isFoundDocument()&&(C=C.insert(A.key,A)),C})}getDocumentsMatchingCollectionGroupQuery(d,v,A,C){const w=v.collectionGroup;let T=documentMap();return this.indexManager.getCollectionParents(d,w).next(R=>PersistencePromise.forEach(R,G=>{const I=function(H,Y){return new __PRIVATE_QueryImpl(Y,null,H.explicitOrderBy.slice(),H.filters.slice(),H.limit,H.limitType,H.startAt,H.endAt)}(v,G.child(w));return this.getDocumentsMatchingCollectionQuery(d,I,A,C).next(z=>{z.forEach((H,Y)=>{T=T.insert(H,Y)})})}).next(()=>T))}getDocumentsMatchingCollectionQuery(d,v,A,C){let w;return this.documentOverlayCache.getOverlaysForCollection(d,v.path,A.largestBatchId).next(T=>(w=T,this.remoteDocumentCache.getDocumentsMatchingQuery(d,v,A,w,C))).next(T=>{w.forEach((G,I)=>{const z=I.getKey();T.get(z)===null&&(T=T.insert(z,MutableDocument.newInvalidDocument(z)))});let R=documentMap();return T.forEach((G,I)=>{const z=w.get(G);z!==void 0&&__PRIVATE_mutationApplyToLocalView(z.mutation,I,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(v,I)&&(R=R.insert(G,I))}),R})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(d){this.serializer=d,this.Lr=new Map,this.kr=new Map}getBundleMetadata(d,v){return PersistencePromise.resolve(this.Lr.get(v))}saveBundleMetadata(d,v){return this.Lr.set(v.id,function(C){return{id:C.id,version:C.version,createTime:__PRIVATE_fromVersion(C.createTime)}}(v)),PersistencePromise.resolve()}getNamedQuery(d,v){return PersistencePromise.resolve(this.kr.get(v))}saveNamedQuery(d,v){return this.kr.set(v.name,function(C){return{name:C.name,query:__PRIVATE_fromBundledQuery(C.bundledQuery),readTime:__PRIVATE_fromVersion(C.readTime)}}(v)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(d,v){return PersistencePromise.resolve(this.overlays.get(v))}getOverlays(d,v){const A=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(v,C=>this.getOverlay(d,C).next(w=>{w!==null&&A.set(C,w)})).next(()=>A)}saveOverlays(d,v,A){return A.forEach((C,w)=>{this.St(d,v,w)}),PersistencePromise.resolve()}removeOverlaysForBatchId(d,v,A){const C=this.qr.get(A);return C!==void 0&&(C.forEach(w=>this.overlays=this.overlays.remove(w)),this.qr.delete(A)),PersistencePromise.resolve()}getOverlaysForCollection(d,v,A){const C=__PRIVATE_newOverlayMap(),w=v.length+1,T=new DocumentKey(v.child("")),R=this.overlays.getIteratorFrom(T);for(;R.hasNext();){const G=R.getNext().value,I=G.getKey();if(!v.isPrefixOf(I.path))break;I.path.length===w&&G.largestBatchId>A&&C.set(G.getKey(),G)}return PersistencePromise.resolve(C)}getOverlaysForCollectionGroup(d,v,A,C){let w=new SortedMap((I,z)=>I-z);const T=this.overlays.getIterator();for(;T.hasNext();){const I=T.getNext().value;if(I.getKey().getCollectionGroup()===v&&I.largestBatchId>A){let z=w.get(I.largestBatchId);z===null&&(z=__PRIVATE_newOverlayMap(),w=w.insert(I.largestBatchId,z)),z.set(I.getKey(),I)}}const R=__PRIVATE_newOverlayMap(),G=w.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((I,z)=>R.set(I,z)),!(R.size()>=C)););return PersistencePromise.resolve(R)}St(d,v,A){const C=this.overlays.get(A.key);if(C!==null){const T=this.qr.get(C.largestBatchId).delete(A.key);this.qr.set(C.largestBatchId,T)}this.overlays=this.overlays.insert(A.key,new Overlay(v,A));let w=this.qr.get(v);w===void 0&&(w=__PRIVATE_documentKeySet(),this.qr.set(v,w)),this.qr.set(v,w.add(A.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(d){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(d,v){return this.sessionToken=v,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(d,v){const A=new __PRIVATE_DocReference(d,v);this.Qr=this.Qr.add(A),this.Ur=this.Ur.add(A)}Wr(d,v){d.forEach(A=>this.addReference(A,v))}removeReference(d,v){this.Gr(new __PRIVATE_DocReference(d,v))}zr(d,v){d.forEach(A=>this.removeReference(A,v))}jr(d){const v=new DocumentKey(new ResourcePath([])),A=new __PRIVATE_DocReference(v,d),C=new __PRIVATE_DocReference(v,d+1),w=[];return this.Ur.forEachInRange([A,C],T=>{this.Gr(T),w.push(T.key)}),w}Jr(){this.Qr.forEach(d=>this.Gr(d))}Gr(d){this.Qr=this.Qr.delete(d),this.Ur=this.Ur.delete(d)}Hr(d){const v=new DocumentKey(new ResourcePath([])),A=new __PRIVATE_DocReference(v,d),C=new __PRIVATE_DocReference(v,d+1);let w=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([A,C],T=>{w=w.add(T.key)}),w}containsKey(d){const v=new __PRIVATE_DocReference(d,0),A=this.Qr.firstAfterOrEqual(v);return A!==null&&d.isEqual(A.key)}}class __PRIVATE_DocReference{constructor(d,v){this.key=d,this.Yr=v}static $r(d,v){return DocumentKey.comparator(d.key,v.key)||__PRIVATE_primitiveComparator(d.Yr,v.Yr)}static Kr(d,v){return __PRIVATE_primitiveComparator(d.Yr,v.Yr)||DocumentKey.comparator(d.key,v.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(d,v){this.indexManager=d,this.referenceDelegate=v,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(d){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(d,v,A,C){const w=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const T=new MutationBatch(w,v,A,C);this.mutationQueue.push(T);for(const R of C)this.Zr=this.Zr.add(new __PRIVATE_DocReference(R.key,w)),this.indexManager.addToCollectionParentIndex(d,R.key.path.popLast());return PersistencePromise.resolve(T)}lookupMutationBatch(d,v){return PersistencePromise.resolve(this.Xr(v))}getNextMutationBatchAfterBatchId(d,v){const A=v+1,C=this.ei(A),w=C<0?0:C;return PersistencePromise.resolve(this.mutationQueue.length>w?this.mutationQueue[w]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j$1:this.tr-1)}getAllMutationBatches(d){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(d,v){const A=new __PRIVATE_DocReference(v,0),C=new __PRIVATE_DocReference(v,Number.POSITIVE_INFINITY),w=[];return this.Zr.forEachInRange([A,C],T=>{const R=this.Xr(T.Yr);w.push(R)}),PersistencePromise.resolve(w)}getAllMutationBatchesAffectingDocumentKeys(d,v){let A=new SortedSet(__PRIVATE_primitiveComparator);return v.forEach(C=>{const w=new __PRIVATE_DocReference(C,0),T=new __PRIVATE_DocReference(C,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([w,T],R=>{A=A.add(R.Yr)})}),PersistencePromise.resolve(this.ti(A))}getAllMutationBatchesAffectingQuery(d,v){const A=v.path,C=A.length+1;let w=A;DocumentKey.isDocumentKey(w)||(w=w.child(""));const T=new __PRIVATE_DocReference(new DocumentKey(w),0);let R=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile(G=>{const I=G.key.path;return!!A.isPrefixOf(I)&&(I.length===C&&(R=R.add(G.Yr)),!0)},T),PersistencePromise.resolve(this.ti(R))}ti(d){const v=[];return d.forEach(A=>{const C=this.Xr(A);C!==null&&v.push(C)}),v}removeMutationBatch(d,v){__PRIVATE_hardAssert(this.ni(v.batchId,"removed")===0,55003),this.mutationQueue.shift();let A=this.Zr;return PersistencePromise.forEach(v.mutations,C=>{const w=new __PRIVATE_DocReference(C.key,v.batchId);return A=A.delete(w),this.referenceDelegate.markPotentiallyOrphaned(d,C.key)}).next(()=>{this.Zr=A})}ir(d){}containsKey(d,v){const A=new __PRIVATE_DocReference(v,0),C=this.Zr.firstAfterOrEqual(A);return PersistencePromise.resolve(v.isEqual(C&&C.key))}performConsistencyCheck(d){return this.mutationQueue.length,PersistencePromise.resolve()}ni(d,v){return this.ei(d)}ei(d){return this.mutationQueue.length===0?0:d-this.mutationQueue[0].batchId}Xr(d){const v=this.ei(d);return v<0||v>=this.mutationQueue.length?null:this.mutationQueue[v]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(d){this.ri=d,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(d){this.indexManager=d}addEntry(d,v){const A=v.key,C=this.docs.get(A),w=C?C.size:0,T=this.ri(v);return this.docs=this.docs.insert(A,{document:v.mutableCopy(),size:T}),this.size+=T-w,this.indexManager.addToCollectionParentIndex(d,A.path.popLast())}removeEntry(d){const v=this.docs.get(d);v&&(this.docs=this.docs.remove(d),this.size-=v.size)}getEntry(d,v){const A=this.docs.get(v);return PersistencePromise.resolve(A?A.document.mutableCopy():MutableDocument.newInvalidDocument(v))}getEntries(d,v){let A=__PRIVATE_mutableDocumentMap();return v.forEach(C=>{const w=this.docs.get(C);A=A.insert(C,w?w.document.mutableCopy():MutableDocument.newInvalidDocument(C))}),PersistencePromise.resolve(A)}getDocumentsMatchingQuery(d,v,A,C){let w=__PRIVATE_mutableDocumentMap();const T=v.path,R=new DocumentKey(T.child("__id-9223372036854775808__")),G=this.docs.getIteratorFrom(R);for(;G.hasNext();){const{key:I,value:{document:z}}=G.getNext();if(!T.isPrefixOf(I.path))break;I.path.length>T.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(z),A)<=0||(C.has(z.key)||__PRIVATE_queryMatches(v,z))&&(w=w.insert(z.key,z.mutableCopy()))}return PersistencePromise.resolve(w)}getAllFromCollectionGroup(d,v,A,C){fail(9500)}ii(d,v){return PersistencePromise.forEach(this.docs,A=>v(A))}newChangeBuffer(d){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(d){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(d){super(),this.Nr=d}applyChanges(d){const v=[];return this.changes.forEach((A,C)=>{C.isValidDocument()?v.push(this.Nr.addEntry(d,C)):this.Nr.removeEntry(A)}),PersistencePromise.waitFor(v)}getFromCache(d,v){return this.Nr.getEntry(d,v)}getAllFromCache(d,v){return this.Nr.getEntries(d,v)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(d){this.persistence=d,this.si=new ObjectMap(v=>__PRIVATE_canonifyTarget(v),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(d,v){return this.si.forEach((A,C)=>v(C)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(d){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(d){return PersistencePromise.resolve(this.oi)}allocateTargetId(d){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(d,v,A){return A&&(this.lastRemoteSnapshotVersion=A),v>this.oi&&(this.oi=v),PersistencePromise.resolve()}Pr(d){this.si.set(d.target,d);const v=d.targetId;v>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(v),this.highestTargetId=v),d.sequenceNumber>this.oi&&(this.oi=d.sequenceNumber)}addTargetData(d,v){return this.Pr(v),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(d,v){return this.Pr(v),PersistencePromise.resolve()}removeTargetData(d,v){return this.si.delete(v.target),this._i.jr(v.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(d,v,A){let C=0;const w=[];return this.si.forEach((T,R)=>{R.sequenceNumber<=v&&A.get(R.targetId)===null&&(this.si.delete(T),w.push(this.removeMatchingKeysForTargetId(d,R.targetId)),C++)}),PersistencePromise.waitFor(w).next(()=>C)}getTargetCount(d){return PersistencePromise.resolve(this.targetCount)}getTargetData(d,v){const A=this.si.get(v)||null;return PersistencePromise.resolve(A)}addMatchingKeys(d,v,A){return this._i.Wr(v,A),PersistencePromise.resolve()}removeMatchingKeys(d,v,A){this._i.zr(v,A);const C=this.persistence.referenceDelegate,w=[];return C&&v.forEach(T=>{w.push(C.markPotentiallyOrphaned(d,T))}),PersistencePromise.waitFor(w)}removeMatchingKeysForTargetId(d,v){return this._i.jr(v),PersistencePromise.resolve()}getMatchingKeysForTargetId(d,v){const A=this._i.Hr(v);return PersistencePromise.resolve(A)}containsKey(d,v){return PersistencePromise.resolve(this._i.containsKey(v))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(d,v){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=d(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(C){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(C)}(A=>this.referenceDelegate.Ti(A)),this.serializer=new __PRIVATE_LocalSerializer(v),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(d){return this.indexManager}getDocumentOverlayCache(d){let v=this.overlays[d.toKey()];return v||(v=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[d.toKey()]=v),v}getMutationQueue(d,v){let A=this.ui[d.toKey()];return A||(A=new __PRIVATE_MemoryMutationQueue(v,this.referenceDelegate),this.ui[d.toKey()]=A),A}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(d,v,A){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",d);const C=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),A(C).next(w=>this.referenceDelegate.di(C).next(()=>w)).toPromise().then(w=>(C.raiseOnCommittedEvent(),w))}Ai(d,v){return PersistencePromise.or(Object.values(this.ui).map(A=>()=>A.containsKey(d,v)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(d){super(),this.currentSequenceNumber=d}}class __PRIVATE_MemoryEagerDelegate{constructor(d){this.persistence=d,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(d){return new __PRIVATE_MemoryEagerDelegate(d)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(d,v,A){return this.Ri.addReference(A,v),this.fi.delete(A.toString()),PersistencePromise.resolve()}removeReference(d,v,A){return this.Ri.removeReference(A,v),this.fi.add(A.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(d,v){return this.fi.add(v.toString()),PersistencePromise.resolve()}removeTarget(d,v){this.Ri.jr(v.targetId).forEach(C=>this.fi.add(C.toString()));const A=this.persistence.getTargetCache();return A.getMatchingKeysForTargetId(d,v.targetId).next(C=>{C.forEach(w=>this.fi.add(w.toString()))}).next(()=>A.removeTargetData(d,v))}Ei(){this.Vi=new Set}di(d){const v=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,A=>{const C=DocumentKey.fromPath(A);return this.gi(d,C).next(w=>{w||v.removeEntry(C,SnapshotVersion.min())})}).next(()=>(this.Vi=null,v.apply(d)))}updateLimboDocument(d,v){return this.gi(d,v).next(A=>{A?this.fi.delete(v.toString()):this.fi.add(v.toString())})}Ti(d){return 0}gi(d,v){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(v)),()=>this.persistence.getTargetCache().containsKey(d,v),()=>this.persistence.Ai(d,v)])}}class __PRIVATE_MemoryLruDelegate{constructor(d,v){this.persistence=d,this.pi=new ObjectMap(A=>__PRIVATE_encodeResourcePath(A.path),(A,C)=>A.isEqual(C)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,v)}static mi(d,v){return new __PRIVATE_MemoryLruDelegate(d,v)}Ei(){}di(d){return PersistencePromise.resolve()}forEachTarget(d,v){return this.persistence.getTargetCache().forEachTarget(d,v)}gr(d){const v=this.wr(d);return this.persistence.getTargetCache().getTargetCount(d).next(A=>v.next(C=>A+C))}wr(d){let v=0;return this.pr(d,A=>{v++}).next(()=>v)}pr(d,v){return PersistencePromise.forEach(this.pi,(A,C)=>this.br(d,A,C).next(w=>w?PersistencePromise.resolve():v(C)))}removeTargets(d,v,A){return this.persistence.getTargetCache().removeTargets(d,v,A)}removeOrphanedDocuments(d,v){let A=0;const C=this.persistence.getRemoteDocumentCache(),w=C.newChangeBuffer();return C.ii(d,T=>this.br(d,T,v).next(R=>{R||(A++,w.removeEntry(T,SnapshotVersion.min()))})).next(()=>w.apply(d)).next(()=>A)}markPotentiallyOrphaned(d,v){return this.pi.set(v,d.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(d,v){const A=v.withSequenceNumber(d.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(d,A)}addReference(d,v,A){return this.pi.set(A,d.currentSequenceNumber),PersistencePromise.resolve()}removeReference(d,v,A){return this.pi.set(A,d.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(d,v){return this.pi.set(v,d.currentSequenceNumber),PersistencePromise.resolve()}Ti(d){let v=d.key.toString().length;return d.isFoundDocument()&&(v+=__PRIVATE_estimateByteSize(d.data.value)),v}br(d,v,A){return PersistencePromise.or([()=>this.persistence.Ai(d,v),()=>this.persistence.getTargetCache().containsKey(d,v),()=>{const C=this.pi.get(v);return PersistencePromise.resolve(C!==void 0&&C>A)}])}getCacheSize(d){return this.persistence.getRemoteDocumentCache().getSize(d)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(d,v,A,C){this.targetId=d,this.fromCache=v,this.Es=A,this.ds=C}static As(d,v){let A=__PRIVATE_documentKeySet(),C=__PRIVATE_documentKeySet();for(const w of v.docChanges)switch(w.type){case 0:A=A.add(w.doc.key);break;case 1:C=C.add(w.doc.key)}return new __PRIVATE_LocalViewChanges(d,v.fromCache,A,C)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(d){this._documentReadCount+=d}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(d,v){this.ps=d,this.indexManager=v,this.Rs=!0}getDocumentsMatchingQuery(d,v,A,C){const w={result:null};return this.ys(d,v).next(T=>{w.result=T}).next(()=>{if(!w.result)return this.ws(d,v,C,A).next(T=>{w.result=T})}).next(()=>{if(w.result)return;const T=new QueryContext;return this.Ss(d,v,T).next(R=>{if(w.result=R,this.Vs)return this.bs(d,v,T,R.size)})}).next(()=>w.result)}bs(d,v,A,C){return A.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(v),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(v),"scans",A.documentReadCount,"local documents and returns",C,"documents as results."),A.documentReadCount>this.gs*C?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(v),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(d,__PRIVATE_queryToTarget(v))):PersistencePromise.resolve())}ys(d,v){if(__PRIVATE_queryMatchesAllDocuments(v))return PersistencePromise.resolve(null);let A=__PRIVATE_queryToTarget(v);return this.indexManager.getIndexType(d,A).next(C=>C===0?null:(v.limit!==null&&C===1&&(v=__PRIVATE_queryWithLimit(v,null,"F"),A=__PRIVATE_queryToTarget(v)),this.indexManager.getDocumentsMatchingTarget(d,A).next(w=>{const T=__PRIVATE_documentKeySet(...w);return this.ps.getDocuments(d,T).next(R=>this.indexManager.getMinOffset(d,A).next(G=>{const I=this.Ds(v,R);return this.Cs(v,I,T,G.readTime)?this.ys(d,__PRIVATE_queryWithLimit(v,null,"F")):this.vs(d,I,v,G)}))})))}ws(d,v,A,C){return __PRIVATE_queryMatchesAllDocuments(v)||C.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(d,A).next(w=>{const T=this.Ds(v,w);return this.Cs(v,T,A,C)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",C.toString(),__PRIVATE_stringifyQuery(v)),this.vs(d,T,v,__PRIVATE_newIndexOffsetSuccessorFromReadTime(C,U)).next(R=>R))})}Ds(d,v){let A=new SortedSet(__PRIVATE_newQueryComparator(d));return v.forEach((C,w)=>{__PRIVATE_queryMatches(d,w)&&(A=A.add(w))}),A}Cs(d,v,A,C){if(d.limit===null)return!1;if(A.size!==v.size)return!0;const w=d.limitType==="F"?v.last():v.first();return!!w&&(w.hasPendingWrites||w.version.compareTo(C)>0)}Ss(d,v,A){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(v)),this.ps.getDocumentsMatchingQuery(d,v,IndexOffset.min(),A)}vs(d,v,A,C){return this.ps.getDocumentsMatchingQuery(d,A,C).next(w=>(v.forEach(T=>{w=w.insert(T.key,T)}),w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="LocalStore",Kt=3e8;class __PRIVATE_LocalStoreImpl{constructor(d,v,A,C){this.persistence=d,this.Fs=v,this.serializer=C,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap(w=>__PRIVATE_canonifyTarget(w),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=d.getRemoteDocumentCache(),this.Pi=d.getTargetCache(),this.Ii=d.getBundleCache(),this.Bs(A)}Bs(d){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(d),this.indexManager=this.persistence.getIndexManager(d),this.mutationQueue=this.persistence.getMutationQueue(d,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(d){return this.persistence.runTransaction("Collect garbage","readwrite-primary",v=>d.collect(v,this.Ms))}}function __PRIVATE_newLocalStore(_,d,v,A){return new __PRIVATE_LocalStoreImpl(_,d,v,A)}async function __PRIVATE_localStoreHandleUserChange(_,d){const v=__PRIVATE_debugCast(_);return await v.persistence.runTransaction("Handle user change","readonly",A=>{let C;return v.mutationQueue.getAllMutationBatches(A).next(w=>(C=w,v.Bs(d),v.mutationQueue.getAllMutationBatches(A))).next(w=>{const T=[],R=[];let G=__PRIVATE_documentKeySet();for(const I of C){T.push(I.batchId);for(const z of I.mutations)G=G.add(z.key)}for(const I of w){R.push(I.batchId);for(const z of I.mutations)G=G.add(z.key)}return v.localDocuments.getDocuments(A,G).next(I=>({Ls:I,removedBatchIds:T,addedBatchIds:R}))})})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(_){const d=__PRIVATE_debugCast(_);return d.persistence.runTransaction("Get last remote snapshot version","readonly",v=>d.Pi.getLastRemoteSnapshotVersion(v))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(_,d){const v=__PRIVATE_debugCast(_),A=d.snapshotVersion;let C=v.Ms;return v.persistence.runTransaction("Apply remote event","readwrite-primary",w=>{const T=v.Ns.newChangeBuffer({trackRemovals:!0});C=v.Ms;const R=[];d.targetChanges.forEach((z,H)=>{const Y=C.get(H);if(!Y)return;R.push(v.Pi.removeMatchingKeys(w,z.removedDocuments,H).next(()=>v.Pi.addMatchingKeys(w,z.addedDocuments,H)));let ee=Y.withSequenceNumber(w.currentSequenceNumber);d.targetMismatches.get(H)!==null?ee=ee.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):z.resumeToken.approximateByteSize()>0&&(ee=ee.withResumeToken(z.resumeToken,A)),C=C.insert(H,ee),function(oe,se,re){return oe.resumeToken.approximateByteSize()===0||se.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=Kt?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(Y,ee,z)&&R.push(v.Pi.updateTargetData(w,ee))});let G=__PRIVATE_mutableDocumentMap(),I=__PRIVATE_documentKeySet();if(d.documentUpdates.forEach(z=>{d.resolvedLimboDocuments.has(z)&&R.push(v.persistence.referenceDelegate.updateLimboDocument(w,z))}),R.push(__PRIVATE_populateDocumentChangeBuffer(w,T,d.documentUpdates).next(z=>{G=z.ks,I=z.qs})),!A.isEqual(SnapshotVersion.min())){const z=v.Pi.getLastRemoteSnapshotVersion(w).next(H=>v.Pi.setTargetsMetadata(w,w.currentSequenceNumber,A));R.push(z)}return PersistencePromise.waitFor(R).next(()=>T.apply(w)).next(()=>v.localDocuments.getLocalViewOfDocuments(w,G,I)).next(()=>G)}).then(w=>(v.Ms=C,w))}function __PRIVATE_populateDocumentChangeBuffer(_,d,v){let A=__PRIVATE_documentKeySet(),C=__PRIVATE_documentKeySet();return v.forEach(w=>A=A.add(w)),d.getEntries(_,A).next(w=>{let T=__PRIVATE_mutableDocumentMap();return v.forEach((R,G)=>{const I=w.get(R);G.isFoundDocument()!==I.isFoundDocument()&&(C=C.add(R)),G.isNoDocument()&&G.version.isEqual(SnapshotVersion.min())?(d.removeEntry(R,G.readTime),T=T.insert(R,G)):!I.isValidDocument()||G.version.compareTo(I.version)>0||G.version.compareTo(I.version)===0&&I.hasPendingWrites?(d.addEntry(G),T=T.insert(R,G)):__PRIVATE_logDebug(Ut,"Ignoring outdated watch update for ",R,". Current version:",I.version," Watch version:",G.version)}),{ks:T,qs:C}})}function __PRIVATE_localStoreAllocateTarget(_,d){const v=__PRIVATE_debugCast(_);return v.persistence.runTransaction("Allocate target","readwrite",A=>{let C;return v.Pi.getTargetData(A,d).next(w=>w?(C=w,PersistencePromise.resolve(C)):v.Pi.allocateTargetId(A).next(T=>(C=new TargetData(d,T,"TargetPurposeListen",A.currentSequenceNumber),v.Pi.addTargetData(A,C).next(()=>C))))}).then(A=>{const C=v.Ms.get(A.targetId);return(C===null||A.snapshotVersion.compareTo(C.snapshotVersion)>0)&&(v.Ms=v.Ms.insert(A.targetId,A),v.xs.set(d,A.targetId)),A})}async function __PRIVATE_localStoreReleaseTarget(_,d,v){const A=__PRIVATE_debugCast(_),C=A.Ms.get(d),w=v?"readwrite":"readwrite-primary";try{v||await A.persistence.runTransaction("Release target",w,T=>A.persistence.referenceDelegate.removeTarget(T,C))}catch(T){if(!__PRIVATE_isIndexedDbTransactionError(T))throw T;__PRIVATE_logDebug(Ut,`Failed to update sequence numbers for target ${d}: ${T}`)}A.Ms=A.Ms.remove(d),A.xs.delete(C.target)}function __PRIVATE_localStoreExecuteQuery(_,d,v){const A=__PRIVATE_debugCast(_);let C=SnapshotVersion.min(),w=__PRIVATE_documentKeySet();return A.persistence.runTransaction("Execute query","readwrite",T=>function(G,I,z){const H=__PRIVATE_debugCast(G),Y=H.xs.get(z);return Y!==void 0?PersistencePromise.resolve(H.Ms.get(Y)):H.Pi.getTargetData(I,z)}(A,T,__PRIVATE_queryToTarget(d)).next(R=>{if(R)return C=R.lastLimboFreeSnapshotVersion,A.Pi.getMatchingKeysForTargetId(T,R.targetId).next(G=>{w=G})}).next(()=>A.Fs.getDocumentsMatchingQuery(T,d,v?C:SnapshotVersion.min(),v?w:__PRIVATE_documentKeySet())).next(R=>(__PRIVATE_setMaxReadTime(A,__PRIVATE_queryCollectionGroup(d),R),{documents:R,Qs:w})))}function __PRIVATE_setMaxReadTime(_,d,v){let A=_.Os.get(d)||SnapshotVersion.min();v.forEach((C,w)=>{w.readTime.compareTo(A)>0&&(A=w.readTime)}),_.Os.set(d,A)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(d){this.activeTargetIds=this.activeTargetIds.add(d)}js(d){this.activeTargetIds=this.activeTargetIds.delete(d)}Gs(){const d={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(d)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(d){}updateMutationState(d,v,A){}addLocalQueryTarget(d,v=!0){return v&&this.Mo.zs(d),this.xo[d]||"not-current"}updateQueryState(d,v,A){this.xo[d]=v}removeLocalQueryTarget(d){this.Mo.js(d)}isLocalQueryTarget(d){return this.Mo.activeTargetIds.has(d)}clearQueryState(d){delete this.xo[d]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(d){return this.Mo.activeTargetIds.has(d)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(d,v,A){}setOnlineState(d){}shutdown(){}writeSequenceNumber(d){}notifyBundleLoaded(d){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(d){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(d){this.qo.push(d)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt,"Network connectivity changed: AVAILABLE");for(const d of this.qo)d(0)}ko(){__PRIVATE_logDebug(Jt,"Network connectivity changed: UNAVAILABLE");for(const d of this.qo)d(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=null;function __PRIVATE_generateUniqueDebugId(){return Ht===null?Ht=function(){return 268435456+Math.round(2147483648*Math.random())}():Ht++,"0x"+Ht.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="RestConnection",Zt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(d){this.databaseInfo=d,this.databaseId=d.databaseId;const v=d.ssl?"https":"http",A=encodeURIComponent(this.databaseId.projectId),C=encodeURIComponent(this.databaseId.database);this.Uo=v+"://"+d.host,this.Ko=`projects/${A}/databases/${C}`,this.Wo=this.databaseId.database===lt?`project_id=${A}`:`project_id=${A}&database_id=${C}`}Go(d,v,A,C,w){const T=__PRIVATE_generateUniqueDebugId(),R=this.zo(d,v.toUriEncodedString());__PRIVATE_logDebug(Yt,`Sending RPC '${d}' ${T}:`,R,A);const G={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(G,C,w);const{host:I}=new URL(R),z=isCloudWorkstation(I);return this.Jo(d,R,G,A,z).then(H=>(__PRIVATE_logDebug(Yt,`Received RPC '${d}' ${T}: `,H),H),H=>{throw __PRIVATE_logWarn(Yt,`RPC '${d}' ${T} failed with error: `,H,"url: ",R,"request:",A),H})}Ho(d,v,A,C,w,T){return this.Go(d,v,A,C,w)}jo(d,v,A){d["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$2}(),d["Content-Type"]="text/plain",this.databaseInfo.appId&&(d["X-Firebase-GMPID"]=this.databaseInfo.appId),v&&v.headers.forEach((C,w)=>d[w]=C),A&&A.headers.forEach((C,w)=>d[w]=C)}zo(d,v){const A=Zt[d];return`${this.Uo}/v1/${v}:${A}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(d){this.Yo=d.Yo,this.Zo=d.Zo}Xo(d){this.e_=d}t_(d){this.n_=d}r_(d){this.i_=d}onMessage(d){this.s_=d}close(){this.Zo()}send(d){this.Yo(d)}o_(){this.e_()}__(){this.n_()}a_(d){this.i_(d)}u_(d){this.s_(d)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(d){super(d),this.c_=[],this.forceLongPolling=d.forceLongPolling,this.autoDetectLongPolling=d.autoDetectLongPolling,this.useFetchStreams=d.useFetchStreams,this.longPollingOptions=d.longPollingOptions}Jo(d,v,A,C,w){const T=__PRIVATE_generateUniqueDebugId();return new Promise((R,G)=>{const I=new XhrIo;I.setWithCredentials(!0),I.listenOnce(EventType.COMPLETE,()=>{try{switch(I.getLastErrorCode()){case ErrorCode.NO_ERROR:const H=I.getResponseJson();__PRIVATE_logDebug(Xt,`XHR for RPC '${d}' ${T} received:`,JSON.stringify(H)),R(H);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt,`RPC '${d}' ${T} timed out`),G(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const Y=I.getStatus();if(__PRIVATE_logDebug(Xt,`RPC '${d}' ${T} failed with status:`,Y,"response text:",I.getResponseText()),Y>0){let ee=I.getResponseJson();Array.isArray(ee)&&(ee=ee[0]);const ie=ee?.error;if(ie&&ie.status&&ie.message){const oe=function(re){const fe=re.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(fe)>=0?fe:N.UNKNOWN}(ie.status);G(new FirestoreError(oe,ie.message))}else G(new FirestoreError(N.UNKNOWN,"Server responded with status "+I.getStatus()))}else G(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:d,streamId:T,h_:I.getLastErrorCode(),P_:I.getLastError()})}}finally{__PRIVATE_logDebug(Xt,`RPC '${d}' ${T} completed.`)}});const z=JSON.stringify(C);__PRIVATE_logDebug(Xt,`RPC '${d}' ${T} sending request:`,C),I.send(v,"POST",z,A,15)})}T_(d,v,A){const C=__PRIVATE_generateUniqueDebugId(),w=[this.Uo,"/","google.firestore.v1.Firestore","/",d,"/channel"],T=createWebChannelTransport(),R=getStatEventTarget(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},I=this.longPollingOptions.timeoutSeconds;I!==void 0&&(G.longPollingTimeout=Math.round(1e3*I)),this.useFetchStreams&&(G.useFetchStreams=!0),this.jo(G.initMessageHeaders,v,A),G.encodeInitMessageHeaders=!0;const z=w.join("");__PRIVATE_logDebug(Xt,`Creating RPC '${d}' stream ${C}: ${z}`,G);const H=T.createWebChannel(z,G);this.I_(H);let Y=!1,ee=!1;const ie=new __PRIVATE_StreamBridge({Yo:se=>{ee?__PRIVATE_logDebug(Xt,`Not sending because RPC '${d}' stream ${C} is closed:`,se):(Y||(__PRIVATE_logDebug(Xt,`Opening RPC '${d}' stream ${C} transport.`),H.open(),Y=!0),__PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} sending:`,se),H.send(se))},Zo:()=>H.close()}),oe=(se,re,fe)=>{se.listen(re,ue=>{try{fe(ue)}catch(ge){setTimeout(()=>{throw ge},0)}})};return oe(H,WebChannel.EventType.OPEN,()=>{ee||(__PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} transport opened.`),ie.o_())}),oe(H,WebChannel.EventType.CLOSE,()=>{ee||(ee=!0,__PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} transport closed`),ie.a_(),this.E_(H))}),oe(H,WebChannel.EventType.ERROR,se=>{ee||(ee=!0,__PRIVATE_logWarn(Xt,`RPC '${d}' stream ${C} transport errored. Name:`,se.name,"Message:",se.message),ie.a_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))}),oe(H,WebChannel.EventType.MESSAGE,se=>{if(!ee){const re=se.data[0];__PRIVATE_hardAssert(!!re,16349);const fe=re,ue=fe?.error||fe[0]?.error;if(ue){__PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} received error:`,ue);const ge=ue.status;let ye=function(Me){const we=pt[Me];if(we!==void 0)return __PRIVATE_mapCodeFromRpcCode(we)}(ge),be=ue.message;ye===void 0&&(ye=N.INTERNAL,be="Unknown error status: "+ge+" with message "+ue.message),ee=!0,ie.a_(new FirestoreError(ye,be)),H.close()}else __PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} received:`,re),ie.u_(re)}}),oe(R,Event$1.STAT_EVENT,se=>{se.stat===Stat.PROXY?__PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} detected buffering proxy`):se.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Xt,`RPC '${d}' stream ${C} detected no buffering proxy`)}),setTimeout(()=>{ie.__()},0),ie}terminate(){this.c_.forEach(d=>d.close()),this.c_=[]}I_(d){this.c_.push(d)}E_(d){this.c_=this.c_.filter(v=>v===d)}}function getDocument$2(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(_){return new JsonProtoSerializer(_,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(d,v,A=1e3,C=1.5,w=6e4){this.Mi=d,this.timerId=v,this.d_=A,this.A_=C,this.R_=w,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(d){this.cancel();const v=Math.floor(this.V_+this.y_()),A=Math.max(0,Date.now()-this.f_),C=Math.max(0,v-A);C>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${C} ms (base delay: ${this.V_} ms, delay with jitter: ${v} ms, last attempt: ${A} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,C,()=>(this.f_=Date.now(),d())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(d,v,A,C,w,T,R,G){this.Mi=d,this.S_=A,this.b_=C,this.connection=w,this.authCredentialsProvider=T,this.appCheckCredentialsProvider=R,this.listener=G,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(d,v)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(d){this.Q_(),this.stream.send(d)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(d,v){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,d!==4?this.M_.reset():v&&v.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(v.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):v&&v.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=d,await this.listener.r_(v)}K_(){}auth(){this.state=1;const d=this.W_(this.D_),v=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([A,C])=>{this.D_===v&&this.G_(A,C)},A=>{d(()=>{const C=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+A.message);return this.z_(C)})})}G_(d,v){const A=this.W_(this.D_);this.stream=this.j_(d,v),this.stream.Xo(()=>{A(()=>this.listener.Xo())}),this.stream.t_(()=>{A(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(C=>{A(()=>this.z_(C))}),this.stream.onMessage(C=>{A(()=>++this.F_==1?this.J_(C):this.onNext(C))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(d){return __PRIVATE_logDebug(en$1,`close with error: ${d}`),this.stream=null,this.close(4,d)}W_(d){return v=>{this.Mi.enqueueAndForget(()=>this.D_===d?v():(__PRIVATE_logDebug(en$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(d,v,A,C,w,T){super(d,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",v,A,C,T),this.serializer=w}j_(d,v){return this.connection.T_("Listen",d,v)}J_(d){return this.onNext(d)}onNext(d){this.M_.reset();const v=__PRIVATE_fromWatchChange(this.serializer,d),A=function(w){if(!("targetChange"in w))return SnapshotVersion.min();const T=w.targetChange;return T.targetIds&&T.targetIds.length?SnapshotVersion.min():T.readTime?__PRIVATE_fromVersion(T.readTime):SnapshotVersion.min()}(d);return this.listener.H_(v,A)}Y_(d){const v={};v.database=__PRIVATE_getEncodedDatabaseId(this.serializer),v.addTarget=function(w,T){let R;const G=T.target;if(R=__PRIVATE_targetIsDocumentTarget(G)?{documents:__PRIVATE_toDocumentsTarget(w,G)}:{query:__PRIVATE_toQueryTarget(w,G).ft},R.targetId=T.targetId,T.resumeToken.approximateByteSize()>0){R.resumeToken=__PRIVATE_toBytes(w,T.resumeToken);const I=__PRIVATE_toInt32Proto(w,T.expectedCount);I!==null&&(R.expectedCount=I)}else if(T.snapshotVersion.compareTo(SnapshotVersion.min())>0){R.readTime=toTimestamp(w,T.snapshotVersion.toTimestamp());const I=__PRIVATE_toInt32Proto(w,T.expectedCount);I!==null&&(R.expectedCount=I)}return R}(this.serializer,d);const A=__PRIVATE_toListenRequestLabels(this.serializer,d);A&&(v.labels=A),this.q_(v)}Z_(d){const v={};v.database=__PRIVATE_getEncodedDatabaseId(this.serializer),v.removeTarget=d,this.q_(v)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(d,v,A,C){super(),this.authCredentials=d,this.appCheckCredentials=v,this.connection=A,this.serializer=C,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(d,v,A,C){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([w,T])=>this.connection.Go(d,__PRIVATE_toResourcePath(v,A),C,w,T)).catch(w=>{throw w.name==="FirebaseError"?(w.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),w):new FirestoreError(N.UNKNOWN,w.toString())})}Ho(d,v,A,C,w){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([T,R])=>this.connection.Ho(d,__PRIVATE_toResourcePath(v,A),C,T,R,w)).catch(T=>{throw T.name==="FirebaseError"?(T.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),T):new FirestoreError(N.UNKNOWN,T.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(d,v){this.asyncQueue=d,this.onlineStateHandler=v,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(d){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${d.toString()}`),this.ca("Offline")))}set(d){this.Pa(),this.oa=0,d==="Online"&&(this.aa=!1),this.ca(d)}ca(d){d!==this.state&&(this.state=d,this.onlineStateHandler(d))}la(d){const v=`Could not reach Cloud Firestore backend. ${d}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(v),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",v)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(d,v,A,C,w){this.localStore=d,this.datastore=v,this.asyncQueue=A,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=w,this.Aa.Oo(T=>{A.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn,"Restarting streams for network reachability change."),await async function(G){const I=__PRIVATE_debugCast(G);I.Ea.add(4),await __PRIVATE_disableNetworkInternal(I),I.Ra.set("Unknown"),I.Ea.delete(4),await __PRIVATE_enableNetworkInternal(I)}(this))})}),this.Ra=new __PRIVATE_OnlineStateTracker(A,C)}}async function __PRIVATE_enableNetworkInternal(_){if(__PRIVATE_canUseNetwork(_))for(const d of _.da)await d(!0)}async function __PRIVATE_disableNetworkInternal(_){for(const d of _.da)await d(!1)}function __PRIVATE_remoteStoreListen(_,d){const v=__PRIVATE_debugCast(_);v.Ia.has(d.targetId)||(v.Ia.set(d.targetId,d),__PRIVATE_shouldStartWatchStream(v)?__PRIVATE_startWatchStream(v):__PRIVATE_ensureWatchStream(v).O_()&&__PRIVATE_sendWatchRequest(v,d))}function __PRIVATE_remoteStoreUnlisten(_,d){const v=__PRIVATE_debugCast(_),A=__PRIVATE_ensureWatchStream(v);v.Ia.delete(d),A.O_()&&__PRIVATE_sendUnwatchRequest(v,d),v.Ia.size===0&&(A.O_()?A.L_():__PRIVATE_canUseNetwork(v)&&v.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(_,d){if(_.Va.Ue(d.targetId),d.resumeToken.approximateByteSize()>0||d.snapshotVersion.compareTo(SnapshotVersion.min())>0){const v=_.remoteSyncer.getRemoteKeysForTarget(d.targetId).size;d=d.withExpectedCount(v)}__PRIVATE_ensureWatchStream(_).Y_(d)}function __PRIVATE_sendUnwatchRequest(_,d){_.Va.Ue(d),__PRIVATE_ensureWatchStream(_).Z_(d)}function __PRIVATE_startWatchStream(_){_.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:d=>_.remoteSyncer.getRemoteKeysForTarget(d),At:d=>_.Ia.get(d)||null,ht:()=>_.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(_).start(),_.Ra.ua()}function __PRIVATE_shouldStartWatchStream(_){return __PRIVATE_canUseNetwork(_)&&!__PRIVATE_ensureWatchStream(_).x_()&&_.Ia.size>0}function __PRIVATE_canUseNetwork(_){return __PRIVATE_debugCast(_).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(_){_.Va=void 0}async function __PRIVATE_onWatchStreamConnected(_){_.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(_){_.Ia.forEach((d,v)=>{__PRIVATE_sendWatchRequest(_,d)})}async function __PRIVATE_onWatchStreamClose(_,d){__PRIVATE_cleanUpWatchStreamState(_),__PRIVATE_shouldStartWatchStream(_)?(_.Ra.ha(d),__PRIVATE_startWatchStream(_)):_.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(_,d,v){if(_.Ra.set("Online"),d instanceof __PRIVATE_WatchTargetChange&&d.state===2&&d.cause)try{await async function(C,w){const T=w.cause;for(const R of w.targetIds)C.Ia.has(R)&&(await C.remoteSyncer.rejectListen(R,T),C.Ia.delete(R),C.Va.removeTarget(R))}(_,d)}catch(A){__PRIVATE_logDebug(tn,"Failed to remove targets %s: %s ",d.targetIds.join(","),A),await __PRIVATE_disableNetworkUntilRecovery(_,A)}else if(d instanceof __PRIVATE_DocumentWatchChange?_.Va.Ze(d):d instanceof __PRIVATE_ExistenceFilterChange?_.Va.st(d):_.Va.tt(d),!v.isEqual(SnapshotVersion.min()))try{const A=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(_.localStore);v.compareTo(A)>=0&&await function(w,T){const R=w.Va.Tt(T);return R.targetChanges.forEach((G,I)=>{if(G.resumeToken.approximateByteSize()>0){const z=w.Ia.get(I);z&&w.Ia.set(I,z.withResumeToken(G.resumeToken,T))}}),R.targetMismatches.forEach((G,I)=>{const z=w.Ia.get(G);if(!z)return;w.Ia.set(G,z.withResumeToken(ByteString.EMPTY_BYTE_STRING,z.snapshotVersion)),__PRIVATE_sendUnwatchRequest(w,G);const H=new TargetData(z.target,G,I,z.sequenceNumber);__PRIVATE_sendWatchRequest(w,H)}),w.remoteSyncer.applyRemoteEvent(R)}(_,v)}catch(A){__PRIVATE_logDebug(tn,"Failed to raise snapshot:",A),await __PRIVATE_disableNetworkUntilRecovery(_,A)}}async function __PRIVATE_disableNetworkUntilRecovery(_,d,v){if(!__PRIVATE_isIndexedDbTransactionError(d))throw d;_.Ea.add(1),await __PRIVATE_disableNetworkInternal(_),_.Ra.set("Offline"),v||(v=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(_.localStore)),_.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(tn,"Retrying IndexedDB access"),await v(),_.Ea.delete(1),await __PRIVATE_enableNetworkInternal(_)})}async function __PRIVATE_remoteStoreHandleCredentialChange(_,d){const v=__PRIVATE_debugCast(_);v.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn,"RemoteStore received new credentials");const A=__PRIVATE_canUseNetwork(v);v.Ea.add(3),await __PRIVATE_disableNetworkInternal(v),A&&v.Ra.set("Unknown"),await v.remoteSyncer.handleCredentialChange(d),v.Ea.delete(3),await __PRIVATE_enableNetworkInternal(v)}async function __PRIVATE_remoteStoreApplyPrimaryState(_,d){const v=__PRIVATE_debugCast(_);d?(v.Ea.delete(2),await __PRIVATE_enableNetworkInternal(v)):d||(v.Ea.add(2),await __PRIVATE_disableNetworkInternal(v),v.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(_){return _.ma||(_.ma=function(v,A,C){const w=__PRIVATE_debugCast(v);return w.sa(),new __PRIVATE_PersistentListenStream(A,w.connection,w.authCredentials,w.appCheckCredentials,w.serializer,C)}(_.datastore,_.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,_),t_:__PRIVATE_onWatchStreamOpen.bind(null,_),r_:__PRIVATE_onWatchStreamClose.bind(null,_),H_:__PRIVATE_onWatchStreamChange.bind(null,_)}),_.da.push(async d=>{d?(_.ma.B_(),__PRIVATE_shouldStartWatchStream(_)?__PRIVATE_startWatchStream(_):_.Ra.set("Unknown")):(await _.ma.stop(),__PRIVATE_cleanUpWatchStreamState(_))})),_.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(d,v,A,C,w){this.asyncQueue=d,this.timerId=v,this.targetTimeMs=A,this.op=C,this.removalCallback=w,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(T=>{})}get promise(){return this.deferred.promise}static createAndSchedule(d,v,A,C,w){const T=Date.now()+A,R=new DelayedOperation(d,v,T,C,w);return R.start(A),R}start(d){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),d)}skipDelay(){return this.handleDelayElapsed()}cancel(d){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(d?": "+d:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(d=>this.deferred.resolve(d))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(_,d){if(__PRIVATE_logError("AsyncQueue",`${d}: ${_}`),__PRIVATE_isIndexedDbTransactionError(_))return new FirestoreError(N.UNAVAILABLE,`${d}: ${_}`);throw _}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(d){return new DocumentSet(d.comparator)}constructor(d){this.comparator=d?(v,A)=>d(v,A)||DocumentKey.comparator(v.key,A.key):(v,A)=>DocumentKey.comparator(v.key,A.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(d){return this.keyedMap.get(d)!=null}get(d){return this.keyedMap.get(d)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(d){const v=this.keyedMap.get(d);return v?this.sortedSet.indexOf(v):-1}get size(){return this.sortedSet.size}forEach(d){this.sortedSet.inorderTraversal((v,A)=>(d(v),!1))}add(d){const v=this.delete(d.key);return v.copy(v.keyedMap.insert(d.key,d),v.sortedSet.insert(d,null))}delete(d){const v=this.get(d);return v?this.copy(this.keyedMap.remove(d),this.sortedSet.remove(v)):this}isEqual(d){if(!(d instanceof DocumentSet)||this.size!==d.size)return!1;const v=this.sortedSet.getIterator(),A=d.sortedSet.getIterator();for(;v.hasNext();){const C=v.getNext().key,w=A.getNext().key;if(!C.isEqual(w))return!1}return!0}toString(){const d=[];return this.forEach(v=>{d.push(v.toString())}),d.length===0?"DocumentSet ()":`DocumentSet (
  `+d.join(`  
`)+`
)`}copy(d,v){const A=new DocumentSet;return A.comparator=this.comparator,A.keyedMap=d,A.sortedSet=v,A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(d){const v=d.doc.key,A=this.ga.get(v);A?d.type!==0&&A.type===3?this.ga=this.ga.insert(v,d):d.type===3&&A.type!==1?this.ga=this.ga.insert(v,{type:A.type,doc:d.doc}):d.type===2&&A.type===2?this.ga=this.ga.insert(v,{type:2,doc:d.doc}):d.type===2&&A.type===0?this.ga=this.ga.insert(v,{type:0,doc:d.doc}):d.type===1&&A.type===0?this.ga=this.ga.remove(v):d.type===1&&A.type===2?this.ga=this.ga.insert(v,{type:1,doc:A.doc}):d.type===0&&A.type===1?this.ga=this.ga.insert(v,{type:2,doc:d.doc}):fail(63341,{Rt:d,pa:A}):this.ga=this.ga.insert(v,d)}ya(){const d=[];return this.ga.inorderTraversal((v,A)=>{d.push(A)}),d}}class ViewSnapshot{constructor(d,v,A,C,w,T,R,G,I){this.query=d,this.docs=v,this.oldDocs=A,this.docChanges=C,this.mutatedKeys=w,this.fromCache=T,this.syncStateChanged=R,this.excludesMetadataChanges=G,this.hasCachedResults=I}static fromInitialDocuments(d,v,A,C,w){const T=[];return v.forEach(R=>{T.push({type:0,doc:R})}),new ViewSnapshot(d,v,DocumentSet.emptySet(v),T,A,C,!0,!1,w)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(d){if(!(this.fromCache===d.fromCache&&this.hasCachedResults===d.hasCachedResults&&this.syncStateChanged===d.syncStateChanged&&this.mutatedKeys.isEqual(d.mutatedKeys)&&__PRIVATE_queryEquals(this.query,d.query)&&this.docs.isEqual(d.docs)&&this.oldDocs.isEqual(d.oldDocs)))return!1;const v=this.docChanges,A=d.docChanges;if(v.length!==A.length)return!1;for(let C=0;C<v.length;C++)if(v[C].type!==A[C].type||!v[C].doc.isEqual(A[C].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(d=>d.Da())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(v,A){const C=__PRIVATE_debugCast(v),w=C.queries;C.queries=__PRIVATE_newQueriesObjectMap(),w.forEach((T,R)=>{for(const G of R.Sa)G.onError(A)})})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(_=>__PRIVATE_canonifyQuery(_),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(_,d){const v=__PRIVATE_debugCast(_);let A=3;const C=d.query;let w=v.queries.get(C);w?!w.ba()&&d.Da()&&(A=2):(w=new __PRIVATE_QueryListenersInfo,A=d.Da()?0:1);try{switch(A){case 0:w.wa=await v.onListen(C,!0);break;case 1:w.wa=await v.onListen(C,!1);break;case 2:await v.onFirstRemoteStoreListen(C)}}catch(T){const R=__PRIVATE_wrapInUserErrorIfRecoverable(T,`Initialization of query '${__PRIVATE_stringifyQuery(d.query)}' failed`);return void d.onError(R)}v.queries.set(C,w),w.Sa.push(d),d.va(v.onlineState),w.wa&&d.Fa(w.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(v)}async function __PRIVATE_eventManagerUnlisten(_,d){const v=__PRIVATE_debugCast(_),A=d.query;let C=3;const w=v.queries.get(A);if(w){const T=w.Sa.indexOf(d);T>=0&&(w.Sa.splice(T,1),w.Sa.length===0?C=d.Da()?0:1:!w.ba()&&d.Da()&&(C=2))}switch(C){case 0:return v.queries.delete(A),v.onUnlisten(A,!0);case 1:return v.queries.delete(A),v.onUnlisten(A,!1);case 2:return v.onLastRemoteStoreUnlisten(A);default:return}}function __PRIVATE_eventManagerOnWatchChange(_,d){const v=__PRIVATE_debugCast(_);let A=!1;for(const C of d){const w=C.query,T=v.queries.get(w);if(T){for(const R of T.Sa)R.Fa(C)&&(A=!0);T.wa=C}}A&&__PRIVATE_raiseSnapshotsInSyncEvent(v)}function __PRIVATE_eventManagerOnWatchError(_,d,v){const A=__PRIVATE_debugCast(_),C=A.queries.get(d);if(C)for(const w of C.Sa)w.onError(v);A.queries.delete(d)}function __PRIVATE_raiseSnapshotsInSyncEvent(_){_.Ca.forEach(d=>{d.next()})}var nn,rn;(rn=nn||(nn={})).Ma="default",rn.Cache="cache";class __PRIVATE_QueryListener{constructor(d,v,A){this.query=d,this.xa=v,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=A||{}}Fa(d){if(!this.options.includeMetadataChanges){const A=[];for(const C of d.docChanges)C.type!==3&&A.push(C);d=new ViewSnapshot(d.query,d.docs,d.oldDocs,A,d.mutatedKeys,d.fromCache,d.syncStateChanged,!0,d.hasCachedResults)}let v=!1;return this.Oa?this.Ba(d)&&(this.xa.next(d),v=!0):this.La(d,this.onlineState)&&(this.ka(d),v=!0),this.Na=d,v}onError(d){this.xa.error(d)}va(d){this.onlineState=d;let v=!1;return this.Na&&!this.Oa&&this.La(this.Na,d)&&(this.ka(this.Na),v=!0),v}La(d,v){if(!d.fromCache||!this.Da())return!0;const A=v!=="Offline";return(!this.options.qa||!A)&&(!d.docs.isEmpty()||d.hasCachedResults||v==="Offline")}Ba(d){if(d.docChanges.length>0)return!0;const v=this.Na&&this.Na.hasPendingWrites!==d.hasPendingWrites;return!(!d.syncStateChanged&&!v)&&this.options.includeMetadataChanges===!0}ka(d){d=ViewSnapshot.fromInitialDocuments(d.query,d.docs,d.mutatedKeys,d.fromCache,d.hasCachedResults),this.Oa=!0,this.xa.next(d)}Da(){return this.options.source!==nn.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(d){this.key=d}}class __PRIVATE_RemovedLimboDocument{constructor(d){this.key=d}}class __PRIVATE_View{constructor(d,v){this.query=d,this.Ya=v,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(d),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(d,v){const A=v?v.iu:new __PRIVATE_DocumentChangeSet,C=v?v.tu:this.tu;let w=v?v.mutatedKeys:this.mutatedKeys,T=C,R=!1;const G=this.query.limitType==="F"&&C.size===this.query.limit?C.last():null,I=this.query.limitType==="L"&&C.size===this.query.limit?C.first():null;if(d.inorderTraversal((z,H)=>{const Y=C.get(z),ee=__PRIVATE_queryMatches(this.query,H)?H:null,ie=!!Y&&this.mutatedKeys.has(Y.key),oe=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let se=!1;Y&&ee?Y.data.isEqual(ee.data)?ie!==oe&&(A.track({type:3,doc:ee}),se=!0):this.su(Y,ee)||(A.track({type:2,doc:ee}),se=!0,(G&&this.eu(ee,G)>0||I&&this.eu(ee,I)<0)&&(R=!0)):!Y&&ee?(A.track({type:0,doc:ee}),se=!0):Y&&!ee&&(A.track({type:1,doc:Y}),se=!0,(G||I)&&(R=!0)),se&&(ee?(T=T.add(ee),w=oe?w.add(z):w.delete(z)):(T=T.delete(z),w=w.delete(z)))}),this.query.limit!==null)for(;T.size>this.query.limit;){const z=this.query.limitType==="F"?T.last():T.first();T=T.delete(z.key),w=w.delete(z.key),A.track({type:1,doc:z})}return{tu:T,iu:A,Cs:R,mutatedKeys:w}}su(d,v){return d.hasLocalMutations&&v.hasCommittedMutations&&!v.hasLocalMutations}applyChanges(d,v,A,C){const w=this.tu;this.tu=d.tu,this.mutatedKeys=d.mutatedKeys;const T=d.iu.ya();T.sort((z,H)=>function(ee,ie){const oe=se=>{switch(se){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:se})}};return oe(ee)-oe(ie)}(z.type,H.type)||this.eu(z.doc,H.doc)),this.ou(A),C=C??!1;const R=v&&!C?this._u():[],G=this.Xa.size===0&&this.current&&!C?1:0,I=G!==this.Za;return this.Za=G,T.length!==0||I?{snapshot:new ViewSnapshot(this.query,d.tu,w,T,d.mutatedKeys,G===0,I,!1,!!A&&A.resumeToken.approximateByteSize()>0),au:R}:{au:R}}va(d){return this.current&&d==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(d){return!this.Ya.has(d)&&!!this.tu.has(d)&&!this.tu.get(d).hasLocalMutations}ou(d){d&&(d.addedDocuments.forEach(v=>this.Ya=this.Ya.add(v)),d.modifiedDocuments.forEach(v=>{}),d.removedDocuments.forEach(v=>this.Ya=this.Ya.delete(v)),this.current=d.current)}_u(){if(!this.current)return[];const d=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach(A=>{this.uu(A.key)&&(this.Xa=this.Xa.add(A.key))});const v=[];return d.forEach(A=>{this.Xa.has(A)||v.push(new __PRIVATE_RemovedLimboDocument(A))}),this.Xa.forEach(A=>{d.has(A)||v.push(new __PRIVATE_AddedLimboDocument(A))}),v}cu(d){this.Ya=d.Qs,this.Xa=__PRIVATE_documentKeySet();const v=this.ru(d.documents);return this.applyChanges(v,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn="SyncEngine";class __PRIVATE_QueryView{constructor(d,v,A){this.query=d,this.targetId=v,this.view=A}}class LimboResolution{constructor(d){this.key=d,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(d,v,A,C,w,T){this.localStore=d,this.remoteStore=v,this.eventManager=A,this.sharedClientState=C,this.currentUser=w,this.maxConcurrentLimboResolutions=T,this.Pu={},this.Tu=new ObjectMap(R=>__PRIVATE_canonifyQuery(R),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(_,d,v=!0){const A=__PRIVATE_ensureWatchCallbacks(_);let C;const w=A.Tu.get(d);return w?(A.sharedClientState.addLocalQueryTarget(w.targetId),C=w.view.lu()):C=await __PRIVATE_allocateTargetAndMaybeListen(A,d,v,!0),C}async function __PRIVATE_triggerRemoteStoreListen(_,d){const v=__PRIVATE_ensureWatchCallbacks(_);await __PRIVATE_allocateTargetAndMaybeListen(v,d,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(_,d,v,A){const C=await __PRIVATE_localStoreAllocateTarget(_.localStore,__PRIVATE_queryToTarget(d)),w=C.targetId,T=_.sharedClientState.addLocalQueryTarget(w,v);let R;return A&&(R=await __PRIVATE_initializeViewAndComputeSnapshot(_,d,w,T==="current",C.resumeToken)),_.isPrimaryClient&&v&&__PRIVATE_remoteStoreListen(_.remoteStore,C),R}async function __PRIVATE_initializeViewAndComputeSnapshot(_,d,v,A,C){_.pu=(H,Y,ee)=>async function(oe,se,re,fe){let ue=se.view.ru(re);ue.Cs&&(ue=await __PRIVATE_localStoreExecuteQuery(oe.localStore,se.query,!1).then(({documents:ve})=>se.view.ru(ve,ue)));const ge=fe&&fe.targetChanges.get(se.targetId),ye=fe&&fe.targetMismatches.get(se.targetId)!=null,be=se.view.applyChanges(ue,oe.isPrimaryClient,ge,ye);return __PRIVATE_updateTrackedLimbos(oe,se.targetId,be.au),be.snapshot}(_,H,Y,ee);const w=await __PRIVATE_localStoreExecuteQuery(_.localStore,d,!0),T=new __PRIVATE_View(d,w.Qs),R=T.ru(w.documents),G=TargetChange.createSynthesizedTargetChangeForCurrentChange(v,A&&_.onlineState!=="Offline",C),I=T.applyChanges(R,_.isPrimaryClient,G);__PRIVATE_updateTrackedLimbos(_,v,I.au);const z=new __PRIVATE_QueryView(d,v,T);return _.Tu.set(d,z),_.Iu.has(v)?_.Iu.get(v).push(d):_.Iu.set(v,[d]),I.snapshot}async function __PRIVATE_syncEngineUnlisten(_,d,v){const A=__PRIVATE_debugCast(_),C=A.Tu.get(d),w=A.Iu.get(C.targetId);if(w.length>1)return A.Iu.set(C.targetId,w.filter(T=>!__PRIVATE_queryEquals(T,d))),void A.Tu.delete(d);A.isPrimaryClient?(A.sharedClientState.removeLocalQueryTarget(C.targetId),A.sharedClientState.isActiveQueryTarget(C.targetId)||await __PRIVATE_localStoreReleaseTarget(A.localStore,C.targetId,!1).then(()=>{A.sharedClientState.clearQueryState(C.targetId),v&&__PRIVATE_remoteStoreUnlisten(A.remoteStore,C.targetId),__PRIVATE_removeAndCleanupTarget(A,C.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(A,C.targetId),await __PRIVATE_localStoreReleaseTarget(A.localStore,C.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(_,d){const v=__PRIVATE_debugCast(_),A=v.Tu.get(d),C=v.Iu.get(A.targetId);v.isPrimaryClient&&C.length===1&&(v.sharedClientState.removeLocalQueryTarget(A.targetId),__PRIVATE_remoteStoreUnlisten(v.remoteStore,A.targetId))}async function __PRIVATE_syncEngineApplyRemoteEvent(_,d){const v=__PRIVATE_debugCast(_);try{const A=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(v.localStore,d);d.targetChanges.forEach((C,w)=>{const T=v.Au.get(w);T&&(__PRIVATE_hardAssert(C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size<=1,22616),C.addedDocuments.size>0?T.hu=!0:C.modifiedDocuments.size>0?__PRIVATE_hardAssert(T.hu,14607):C.removedDocuments.size>0&&(__PRIVATE_hardAssert(T.hu,42227),T.hu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(v,A,d)}catch(A){await __PRIVATE_ignoreIfPrimaryLeaseLoss(A)}}function __PRIVATE_syncEngineApplyOnlineStateChange(_,d,v){const A=__PRIVATE_debugCast(_);if(A.isPrimaryClient&&v===0||!A.isPrimaryClient&&v===1){const C=[];A.Tu.forEach((w,T)=>{const R=T.view.va(d);R.snapshot&&C.push(R.snapshot)}),function(T,R){const G=__PRIVATE_debugCast(T);G.onlineState=R;let I=!1;G.queries.forEach((z,H)=>{for(const Y of H.Sa)Y.va(R)&&(I=!0)}),I&&__PRIVATE_raiseSnapshotsInSyncEvent(G)}(A.eventManager,d),C.length&&A.Pu.H_(C),A.onlineState=d,A.isPrimaryClient&&A.sharedClientState.setOnlineState(d)}}async function __PRIVATE_syncEngineRejectListen(_,d,v){const A=__PRIVATE_debugCast(_);A.sharedClientState.updateQueryState(d,"rejected",v);const C=A.Au.get(d),w=C&&C.key;if(w){let T=new SortedMap(DocumentKey.comparator);T=T.insert(w,MutableDocument.newNoDocument(w,SnapshotVersion.min()));const R=__PRIVATE_documentKeySet().add(w),G=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),T,R);await __PRIVATE_syncEngineApplyRemoteEvent(A,G),A.du=A.du.remove(w),A.Au.delete(d),__PRIVATE_pumpEnqueuedLimboResolutions(A)}else await __PRIVATE_localStoreReleaseTarget(A.localStore,d,!1).then(()=>__PRIVATE_removeAndCleanupTarget(A,d,v)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}function __PRIVATE_removeAndCleanupTarget(_,d,v=null){_.sharedClientState.removeLocalQueryTarget(d);for(const A of _.Iu.get(d))_.Tu.delete(A),v&&_.Pu.yu(A,v);_.Iu.delete(d),_.isPrimaryClient&&_.Ru.jr(d).forEach(A=>{_.Ru.containsKey(A)||__PRIVATE_removeLimboTarget(_,A)})}function __PRIVATE_removeLimboTarget(_,d){_.Eu.delete(d.path.canonicalString());const v=_.du.get(d);v!==null&&(__PRIVATE_remoteStoreUnlisten(_.remoteStore,v),_.du=_.du.remove(d),_.Au.delete(v),__PRIVATE_pumpEnqueuedLimboResolutions(_))}function __PRIVATE_updateTrackedLimbos(_,d,v){for(const A of v)A instanceof __PRIVATE_AddedLimboDocument?(_.Ru.addReference(A.key,d),__PRIVATE_trackLimboChange(_,A)):A instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn,"Document no longer in limbo: "+A.key),_.Ru.removeReference(A.key,d),_.Ru.containsKey(A.key)||__PRIVATE_removeLimboTarget(_,A.key)):fail(19791,{wu:A})}function __PRIVATE_trackLimboChange(_,d){const v=d.key,A=v.path.canonicalString();_.du.get(v)||_.Eu.has(A)||(__PRIVATE_logDebug(sn,"New document in limbo: "+v),_.Eu.add(A),__PRIVATE_pumpEnqueuedLimboResolutions(_))}function __PRIVATE_pumpEnqueuedLimboResolutions(_){for(;_.Eu.size>0&&_.du.size<_.maxConcurrentLimboResolutions;){const d=_.Eu.values().next().value;_.Eu.delete(d);const v=new DocumentKey(ResourcePath.fromString(d)),A=_.fu.next();_.Au.set(A,new LimboResolution(v)),_.du=_.du.insert(v,A),__PRIVATE_remoteStoreListen(_.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(v.path)),A,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(_,d,v){const A=__PRIVATE_debugCast(_),C=[],w=[],T=[];A.Tu.isEmpty()||(A.Tu.forEach((R,G)=>{T.push(A.pu(G,d,v).then(I=>{if((I||v)&&A.isPrimaryClient){const z=I?!I.fromCache:v?.targetChanges.get(G.targetId)?.current;A.sharedClientState.updateQueryState(G.targetId,z?"current":"not-current")}if(I){C.push(I);const z=__PRIVATE_LocalViewChanges.As(G.targetId,I);w.push(z)}}))}),await Promise.all(T),A.Pu.H_(C),await async function(G,I){const z=__PRIVATE_debugCast(G);try{await z.persistence.runTransaction("notifyLocalViewChanges","readwrite",H=>PersistencePromise.forEach(I,Y=>PersistencePromise.forEach(Y.Es,ee=>z.persistence.referenceDelegate.addReference(H,Y.targetId,ee)).next(()=>PersistencePromise.forEach(Y.ds,ee=>z.persistence.referenceDelegate.removeReference(H,Y.targetId,ee)))))}catch(H){if(!__PRIVATE_isIndexedDbTransactionError(H))throw H;__PRIVATE_logDebug(Ut,"Failed to update sequence numbers: "+H)}for(const H of I){const Y=H.targetId;if(!H.fromCache){const ee=z.Ms.get(Y),ie=ee.snapshotVersion,oe=ee.withLastLimboFreeSnapshotVersion(ie);z.Ms=z.Ms.insert(Y,oe)}}}(A.localStore,w))}async function __PRIVATE_syncEngineHandleCredentialChange(_,d){const v=__PRIVATE_debugCast(_);if(!v.currentUser.isEqual(d)){__PRIVATE_logDebug(sn,"User change. New user:",d.toKey());const A=await __PRIVATE_localStoreHandleUserChange(v.localStore,d);v.currentUser=d,function(w,T){w.mu.forEach(R=>{R.forEach(G=>{G.reject(new FirestoreError(N.CANCELLED,T))})}),w.mu.clear()}(v,"'waitForPendingWrites' promise is rejected due to a user change."),v.sharedClientState.handleUserChange(d,A.removedBatchIds,A.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(v,A.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(_,d){const v=__PRIVATE_debugCast(_),A=v.Au.get(d);if(A&&A.hu)return __PRIVATE_documentKeySet().add(A.key);{let C=__PRIVATE_documentKeySet();const w=v.Iu.get(d);if(!w)return C;for(const T of w){const R=v.Tu.get(T);C=C.unionWith(R.view.nu)}return C}}function __PRIVATE_ensureWatchCallbacks(_){const d=__PRIVATE_debugCast(_);return d.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,d),d.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,d),d.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,d),d.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,d.eventManager),d.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,d.eventManager),d}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(d){this.serializer=__PRIVATE_newSerializer(d.databaseInfo.databaseId),this.sharedClientState=this.Du(d),this.persistence=this.Cu(d),await this.persistence.start(),this.localStore=this.vu(d),this.gcScheduler=this.Fu(d,this.localStore),this.indexBackfillerScheduler=this.Mu(d,this.localStore)}Fu(d,v){return null}Mu(d,v){return null}vu(d){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,d.initialUser,this.serializer)}Cu(d){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(d){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(d){super(),this.cacheSizeBytes=d}Fu(d,v){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const A=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(A,d.asyncQueue,v)}Cu(d){const v=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(A=>__PRIVATE_MemoryLruDelegate.mi(A,v),this.serializer)}}class OnlineComponentProvider{async initialize(d,v){this.localStore||(this.localStore=d.localStore,this.sharedClientState=d.sharedClientState,this.datastore=this.createDatastore(v),this.remoteStore=this.createRemoteStore(v),this.eventManager=this.createEventManager(v),this.syncEngine=this.createSyncEngine(v,!d.synchronizeTabs),this.sharedClientState.onlineStateHandler=A=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,A,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(d){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(d){const v=__PRIVATE_newSerializer(d.databaseInfo.databaseId),A=function(w){return new __PRIVATE_WebChannelConnection(w)}(d.databaseInfo);return function(w,T,R,G){return new __PRIVATE_DatastoreImpl(w,T,R,G)}(d.authCredentials,d.appCheckCredentials,A,v)}createRemoteStore(d){return function(A,C,w,T,R){return new __PRIVATE_RemoteStoreImpl(A,C,w,T,R)}(this.localStore,this.datastore,d.asyncQueue,v=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,v,0),function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(d,v){return function(C,w,T,R,G,I,z){const H=new __PRIVATE_SyncEngineImpl(C,w,T,R,G,I);return z&&(H.gu=!0),H}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,d.initialUser,d.maxConcurrentLimboResolutions,v)}async terminate(){await async function(v){const A=__PRIVATE_debugCast(v);__PRIVATE_logDebug(tn,"RemoteStore shutting down."),A.Ea.add(5),await __PRIVATE_disableNetworkInternal(A),A.Aa.shutdown(),A.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(d){this.observer=d,this.muted=!1}next(d){this.muted||this.observer.next&&this.Ou(this.observer.next,d)}error(d){this.muted||(this.observer.error?this.Ou(this.observer.error,d):__PRIVATE_logError("Uncaught Error in snapshot listener:",d.toString()))}Nu(){this.muted=!0}Ou(d,v){setTimeout(()=>{this.muted||d(v)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on$1="FirestoreClient";class FirestoreClient{constructor(d,v,A,C,w){this.authCredentials=d,this.appCheckCredentials=v,this.asyncQueue=A,this.databaseInfo=C,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=w,this.authCredentials.start(A,async T=>{__PRIVATE_logDebug(on$1,"Received user=",T.uid),await this.authCredentialListener(T),this.user=T}),this.appCheckCredentials.start(A,T=>(__PRIVATE_logDebug(on$1,"Received new app check token=",T),this.appCheckCredentialListener(T,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(d){this.authCredentialListener=d}setAppCheckTokenChangeListener(d){this.appCheckCredentialListener=d}terminate(){this.asyncQueue.enterRestrictedMode();const d=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),d.resolve()}catch(v){const A=__PRIVATE_wrapInUserErrorIfRecoverable(v,"Failed to shutdown persistence");d.reject(A)}}),d.promise}}async function __PRIVATE_setOfflineComponentProvider(_,d){_.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on$1,"Initializing OfflineComponentProvider");const v=_.configuration;await d.initialize(v);let A=v.initialUser;_.setCredentialChangeListener(async C=>{A.isEqual(C)||(await __PRIVATE_localStoreHandleUserChange(d.localStore,C),A=C)}),d.persistence.setDatabaseDeletedListener(()=>_.terminate()),_._offlineComponents=d}async function __PRIVATE_setOnlineComponentProvider(_,d){_.asyncQueue.verifyOperationInProgress();const v=await __PRIVATE_ensureOfflineComponents(_);__PRIVATE_logDebug(on$1,"Initializing OnlineComponentProvider"),await d.initialize(v,_.configuration),_.setCredentialChangeListener(A=>__PRIVATE_remoteStoreHandleCredentialChange(d.remoteStore,A)),_.setAppCheckTokenChangeListener((A,C)=>__PRIVATE_remoteStoreHandleCredentialChange(d.remoteStore,C)),_._onlineComponents=d}async function __PRIVATE_ensureOfflineComponents(_){if(!_._offlineComponents)if(_._uninitializedComponentsProvider){__PRIVATE_logDebug(on$1,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(_,_._uninitializedComponentsProvider._offline)}catch(d){const v=d;if(!function(C){return C.name==="FirebaseError"?C.code===N.FAILED_PRECONDITION||C.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&C instanceof DOMException)||C.code===22||C.code===20||C.code===11}(v))throw v;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+v),await __PRIVATE_setOfflineComponentProvider(_,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on$1,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(_,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return _._offlineComponents}async function __PRIVATE_ensureOnlineComponents(_){return _._onlineComponents||(_._uninitializedComponentsProvider?(__PRIVATE_logDebug(on$1,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(_,_._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on$1,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(_,new OnlineComponentProvider))),_._onlineComponents}function __PRIVATE_getDatastore(_){return __PRIVATE_ensureOnlineComponents(_).then(d=>d.datastore)}async function __PRIVATE_getEventManager(_){const d=await __PRIVATE_ensureOnlineComponents(_),v=d.eventManager;return v.onListen=__PRIVATE_syncEngineListen.bind(null,d.syncEngine),v.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,d.syncEngine),v.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,d.syncEngine),v.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,d.syncEngine),v}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(_,d,v={}){const A=new __PRIVATE_Deferred;return _.asyncQueue.enqueueAndForget(async()=>function(w,T,R,G,I){const z=new __PRIVATE_AsyncObserver({next:Y=>{z.Nu(),T.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(w,H));const ee=Y.docs.has(R);!ee&&Y.fromCache?I.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document because the client is offline.")):ee&&Y.fromCache&&G&&G.source==="server"?I.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):I.resolve(Y)},error:Y=>I.reject(Y)}),H=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(R.path),z,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(w,H)}(await __PRIVATE_getEventManager(_),_.asyncQueue,d,v,A)),A.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(_,d,v={}){const A=new __PRIVATE_Deferred;return _.asyncQueue.enqueueAndForget(async()=>function(w,T,R,G,I){const z=new __PRIVATE_AsyncObserver({next:Y=>{z.Nu(),T.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(w,H)),Y.fromCache&&G.source==="server"?I.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):I.resolve(Y)},error:Y=>I.reject(Y)}),H=new __PRIVATE_QueryListener(R,z,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(w,H)}(await __PRIVATE_getEventManager(_),_.asyncQueue,d,v,A)),A.promise}function __PRIVATE_firestoreClientRunAggregateQuery(_,d,v){const A=new __PRIVATE_Deferred;return _.asyncQueue.enqueueAndForget(async()=>{try{const C=await __PRIVATE_getDatastore(_);A.resolve(async function(T,R,G){const I=__PRIVATE_debugCast(T),{request:z,gt:H,parent:Y}=__PRIVATE_toRunAggregationQueryRequest(I.serializer,__PRIVATE_queryToAggregateTarget(R),G);I.connection.$o||delete z.parent;const ee=(await I.Ho("RunAggregationQuery",I.serializer.databaseId,Y,z,1)).filter(oe=>!!oe.result);__PRIVATE_hardAssert(ee.length===1,64727);const ie=ee[0].result?.aggregateFields;return Object.keys(ie).reduce((oe,se)=>(oe[H[se]]=ie[se],oe),{})}(C,d,v))}catch(C){A.reject(C)}}),A.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(_){const d={};return _.timeoutSeconds!==void 0&&(d.timeoutSeconds=_.timeoutSeconds),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="firestore.googleapis.com",un=!0;class FirestoreSettingsImpl{constructor(d){if(d.host===void 0){if(d.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an,this.ssl=un}else this.host=d.host,this.ssl=d.ssl??un;if(this.isUsingEmulator=d.emulatorOptions!==void 0,this.credentials=d.credentials,this.ignoreUndefinedProperties=!!d.ignoreUndefinedProperties,this.localCache=d.localCache,d.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot;else{if(d.cacheSizeBytes!==-1&&d.cacheSizeBytes<Bt)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=d.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",d.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",d.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!d.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:d.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!d.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(d.experimentalLongPollingOptions??{}),function(A){if(A.timeoutSeconds!==void 0){if(isNaN(A.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (must not be NaN)`);if(A.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (minimum allowed value is 5)`);if(A.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${A.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!d.useFetchStreams}isEqual(d){return this.host===d.host&&this.ssl===d.ssl&&this.credentials===d.credentials&&this.cacheSizeBytes===d.cacheSizeBytes&&this.experimentalForceLongPolling===d.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===d.experimentalAutoDetectLongPolling&&function(A,C){return A.timeoutSeconds===C.timeoutSeconds}(this.experimentalLongPollingOptions,d.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===d.ignoreUndefinedProperties&&this.useFetchStreams===d.useFetchStreams}}class Firestore$1{constructor(d,v,A,C){this._authCredentials=d,this._appCheckCredentials=v,this._databaseId=A,this._app=C,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(d){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(d),this._emulatorOptions=d.emulatorOptions||{},d.credentials!==void 0&&(this._authCredentials=function(A){if(!A)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(A.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(A.sessionIndex||"0",A.iamToken||null,A.authTokenFactory||null);case"provider":return A.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(d.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(v){const A=_n.get(v);A&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n.delete(v),A.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(_,d,v,A={}){_=__PRIVATE_cast(_,Firestore$1);const C=isCloudWorkstation(d),w=_._getSettings(),T={...w,emulatorOptions:_._getEmulatorOptions()},R=`${d}:${v}`;C&&(pingServer(`https://${R}`),updateEmulatorBanner("Firestore",!0)),w.host!==an&&w.host!==R&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const G={...w,host:R,ssl:C,emulatorOptions:A};if(!deepEqual(G,T)&&(_._setSettings(G),A.mockUserToken)){let I,z;if(typeof A.mockUserToken=="string")I=A.mockUserToken,z=User.MOCK_USER;else{I=createMockUserToken(A.mockUserToken,_._app?.options.projectId);const H=A.mockUserToken.sub||A.mockUserToken.user_id;if(!H)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");z=new User(H)}_._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(I,z))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(d,v,A){this.converter=v,this._query=A,this.type="query",this.firestore=d}withConverter(d){return new Query(this.firestore,d,this._query)}}class DocumentReference{constructor(d,v,A){this.converter=v,this._key=A,this.type="document",this.firestore=d}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(d){return new DocumentReference(this.firestore,d,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(d,v,A){if(__PRIVATE_validateJSON(v,DocumentReference._jsonSchema))return new DocumentReference(d,A||null,new DocumentKey(ResourcePath.fromString(v.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(d,v,A){super(d,v,__PRIVATE_newQueryForPath(A)),this._path=A,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const d=this._path.popLast();return d.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(d))}withConverter(d){return new CollectionReference(this.firestore,d,this._path)}}function collection(_,d,...v){if(_=getModularInstance(_),__PRIVATE_validateNonEmptyArgument("collection","path",d),_ instanceof Firestore$1){const A=ResourcePath.fromString(d,...v);return __PRIVATE_validateCollectionPath(A),new CollectionReference(_,null,A)}{if(!(_ instanceof DocumentReference||_ instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const A=_._path.child(ResourcePath.fromString(d,...v));return __PRIVATE_validateCollectionPath(A),new CollectionReference(_.firestore,null,A)}}function doc(_,d,...v){if(_=getModularInstance(_),arguments.length===1&&(d=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",d),_ instanceof Firestore$1){const A=ResourcePath.fromString(d,...v);return __PRIVATE_validateDocumentPath(A),new DocumentReference(_,null,new DocumentKey(A))}{if(!(_ instanceof DocumentReference||_ instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const A=_._path.child(ResourcePath.fromString(d,...v));return __PRIVATE_validateDocumentPath(A),new DocumentReference(_.firestore,_ instanceof CollectionReference?_.converter:null,new DocumentKey(A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn$1="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(d=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const A=getDocument$2();A&&__PRIVATE_logDebug(cn$1,"Visibility state changed to "+A.visibilityState),this.M_.w_()},this.ac=d;const v=getDocument$2();v&&typeof v.addEventListener=="function"&&v.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(d){this.enqueue(d)}enqueueAndForgetEvenWhileRestricted(d){this.uc(),this.cc(d)}enterRestrictedMode(d){if(!this.ec){this.ec=!0,this.sc=d||!1;const v=getDocument$2();v&&typeof v.removeEventListener=="function"&&v.removeEventListener("visibilitychange",this._c)}}enqueue(d){if(this.uc(),this.ec)return new Promise(()=>{});const v=new __PRIVATE_Deferred;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(d().then(v.resolve,v.reject),v.promise)).then(()=>v.promise)}enqueueRetryable(d){this.enqueueAndForget(()=>(this.Xu.push(d),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(d){if(!__PRIVATE_isIndexedDbTransactionError(d))throw d;__PRIVATE_logDebug(cn$1,"Operation failed with retryable error: "+d)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(d){const v=this.ac.then(()=>(this.rc=!0,d().catch(A=>{throw this.nc=A,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(A)),A}).then(A=>(this.rc=!1,A))));return this.ac=v,v}enqueueAfterDelay(d,v,A){this.uc(),this.oc.indexOf(d)>-1&&(v=0);const C=DelayedOperation.createAndSchedule(this,d,v,A,w=>this.hc(w));return this.tc.push(C),C}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let d;do d=this.ac,await d;while(d!==this.ac)}Ic(d){for(const v of this.tc)if(v.timerId===d)return!0;return!1}Ec(d){return this.Tc().then(()=>{this.tc.sort((v,A)=>v.targetTimeMs-A.targetTimeMs);for(const v of this.tc)if(v.skipDelay(),d!=="all"&&v.timerId===d)break;return this.Tc()})}dc(d){this.oc.push(d)}hc(d){const v=this.tc.indexOf(d);this.tc.splice(v,1)}}function __PRIVATE_getMessageOrStack(_){let d=_.message||"";return _.stack&&(d=_.stack.includes(_.message)?_.stack:_.message+`
`+_.stack),d}class Firestore extends Firestore$1{constructor(d,v,A,C){super(d,v,A,C),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=C?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const d=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(d),this._firestoreClient=void 0,await d}}}function getFirestore(_,d){const v=typeof _=="object"?_:getApp(),A=typeof _=="string"?_:lt,C=_getProvider(v,"firestore").getImmediate({identifier:A});if(!C._initialized){const w=getDefaultEmulatorHostnameAndPort("firestore");w&&connectFirestoreEmulator(C,...w)}return C}function ensureFirestoreConfigured(_){if(_._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return _._firestoreClient||__PRIVATE_configureFirestore(_),_._firestoreClient}function __PRIVATE_configureFirestore(_){const d=_._freezeSettings(),v=function(C,w,T,R){return new DatabaseInfo(C,w,T,R.host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(R.experimentalLongPollingOptions),R.useFetchStreams,R.isUsingEmulator)}(_._databaseId,_._app?.options.appId||"",_._persistenceKey,d);_._componentsProvider||d.localCache?._offlineComponentProvider&&d.localCache?._onlineComponentProvider&&(_._componentsProvider={_offline:d.localCache._offlineComponentProvider,_online:d.localCache._onlineComponentProvider}),_._firestoreClient=new FirestoreClient(_._authCredentials,_._appCheckCredentials,_._queue,v,_._componentsProvider&&function(C){const w=C?._online.build();return{_offline:C?._offline.build(w),_online:w}}(_._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AggregateField{constructor(d="count",v){this._internalFieldPath=v,this.type="AggregateField",this.aggregateType=d}}class AggregateQuerySnapshot{constructor(d,v,A){this._userDataWriter=v,this._data=A,this.type="AggregateQuerySnapshot",this.query=d}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(d){this._byteString=d}static fromBase64String(d){try{return new Bytes(ByteString.fromBase64String(d))}catch(v){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+v)}}static fromUint8Array(d){return new Bytes(ByteString.fromUint8Array(d))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(d){return this._byteString.isEqual(d._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(d){if(__PRIVATE_validateJSON(d,Bytes._jsonSchema))return Bytes.fromBase64String(d.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...d){for(let v=0;v<d.length;++v)if(d[v].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(d)}isEqual(d){return this._internalPath.isEqual(d._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(d){this._methodName=d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(d,v){if(!isFinite(d)||d<-90||d>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+d);if(!isFinite(v)||v<-180||v>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+v);this._lat=d,this._long=v}get latitude(){return this._lat}get longitude(){return this._long}isEqual(d){return this._lat===d._lat&&this._long===d._long}_compareTo(d){return __PRIVATE_primitiveComparator(this._lat,d._lat)||__PRIVATE_primitiveComparator(this._long,d._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(d){if(__PRIVATE_validateJSON(d,GeoPoint._jsonSchema))return new GeoPoint(d.latitude,d.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(d){this._values=(d||[]).map(v=>v)}toArray(){return this._values.map(d=>d)}isEqual(d){return function(A,C){if(A.length!==C.length)return!1;for(let w=0;w<A.length;++w)if(A[w]!==C[w])return!1;return!0}(this._values,d._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(d){if(__PRIVATE_validateJSON(d,VectorValue._jsonSchema)){if(Array.isArray(d.vectorValues)&&d.vectorValues.every(v=>typeof v=="number"))return new VectorValue(d.vectorValues);throw new FirestoreError(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=/^__.*__$/;function __PRIVATE_isWrite(_){switch(_){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:_})}}class __PRIVATE_ParseContextImpl{constructor(d,v,A,C,w,T){this.settings=d,this.databaseId=v,this.serializer=A,this.ignoreUndefinedProperties=C,w===void 0&&this.Rc(),this.fieldTransforms=w||[],this.fieldMask=T||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(d){return new __PRIVATE_ParseContextImpl({...this.settings,...d},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(d){const v=this.path?.child(d),A=this.Vc({path:v,fc:!1});return A.gc(d),A}yc(d){const v=this.path?.child(d),A=this.Vc({path:v,fc:!1});return A.Rc(),A}wc(d){return this.Vc({path:void 0,fc:!0})}Sc(d){return __PRIVATE_createError(d,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(d){return this.fieldMask.find(v=>d.isPrefixOf(v))!==void 0||this.fieldTransforms.find(v=>d.isPrefixOf(v.field))!==void 0}Rc(){if(this.path)for(let d=0;d<this.path.length;d++)this.gc(this.path.get(d))}gc(d){if(d.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn.test(d))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(d,v,A){this.databaseId=d,this.ignoreUndefinedProperties=v,this.serializer=A||__PRIVATE_newSerializer(d)}Cc(d,v,A,C=!1){return new __PRIVATE_ParseContextImpl({Ac:d,methodName:v,Dc:A,path:FieldPath$1.emptyPath(),fc:!1,bc:C},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(_){const d=_._freezeSettings(),v=__PRIVATE_newSerializer(_._databaseId);return new __PRIVATE_UserDataReader(_._databaseId,!!d.ignoreUndefinedProperties,v)}function __PRIVATE_parseQueryValue(_,d,v,A=!1){return __PRIVATE_parseData(v,_.Cc(A?4:3,d))}function __PRIVATE_parseData(_,d){if(__PRIVATE_looksLikeJsonObject(_=getModularInstance(_)))return __PRIVATE_validatePlainObject("Unsupported field value:",d,_),__PRIVATE_parseObject(_,d);if(_ instanceof FieldValue)return function(A,C){if(!__PRIVATE_isWrite(C.Ac))throw C.Sc(`${A._methodName}() can only be used with update() and set()`);if(!C.path)throw C.Sc(`${A._methodName}() is not currently supported inside arrays`);const w=A._toFieldTransform(C);w&&C.fieldTransforms.push(w)}(_,d),null;if(_===void 0&&d.ignoreUndefinedProperties)return null;if(d.path&&d.fieldMask.push(d.path),_ instanceof Array){if(d.settings.fc&&d.Ac!==4)throw d.Sc("Nested arrays are not supported");return function(A,C){const w=[];let T=0;for(const R of A){let G=__PRIVATE_parseData(R,C.wc(T));G==null&&(G={nullValue:"NULL_VALUE"}),w.push(G),T++}return{arrayValue:{values:w}}}(_,d)}return function(A,C){if((A=getModularInstance(A))===null)return{nullValue:"NULL_VALUE"};if(typeof A=="number")return toNumber(C.serializer,A);if(typeof A=="boolean")return{booleanValue:A};if(typeof A=="string")return{stringValue:A};if(A instanceof Date){const w=Timestamp.fromDate(A);return{timestampValue:toTimestamp(C.serializer,w)}}if(A instanceof Timestamp){const w=new Timestamp(A.seconds,1e3*Math.floor(A.nanoseconds/1e3));return{timestampValue:toTimestamp(C.serializer,w)}}if(A instanceof GeoPoint)return{geoPointValue:{latitude:A.latitude,longitude:A.longitude}};if(A instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(C.serializer,A._byteString)};if(A instanceof DocumentReference){const w=C.databaseId,T=A.firestore._databaseId;if(!T.isEqual(w))throw C.Sc(`Document reference is for database ${T.projectId}/${T.database} but should be for database ${w.projectId}/${w.database}`);return{referenceValue:__PRIVATE_toResourceName(A.firestore._databaseId||C.databaseId,A._key.path)}}if(A instanceof VectorValue)return function(T,R){return{mapValue:{fields:{[ht$1]:{stringValue:It},[Et]:{arrayValue:{values:T.toArray().map(I=>{if(typeof I!="number")throw R.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(R.serializer,I)})}}}}}}(A,C);throw C.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(A)}`)}(_,d)}function __PRIVATE_parseObject(_,d){const v={};return isEmpty(_)?d.path&&d.path.length>0&&d.fieldMask.push(d.path):forEach(_,(A,C)=>{const w=__PRIVATE_parseData(C,d.mc(A));w!=null&&(v[A]=w)}),{mapValue:{fields:v}}}function __PRIVATE_looksLikeJsonObject(_){return!(typeof _!="object"||_===null||_ instanceof Array||_ instanceof Date||_ instanceof Timestamp||_ instanceof GeoPoint||_ instanceof Bytes||_ instanceof DocumentReference||_ instanceof FieldValue||_ instanceof VectorValue)}function __PRIVATE_validatePlainObject(_,d,v){if(!__PRIVATE_looksLikeJsonObject(v)||!__PRIVATE_isPlainObject(v)){const A=__PRIVATE_valueDescription(v);throw A==="an object"?d.Sc(_+" a custom object"):d.Sc(_+" "+A)}}const Pn=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(_,d,v){if(d.search(Pn)>=0)throw __PRIVATE_createError(`Invalid field path (${d}). Paths must not contain '~', '*', '/', '[', or ']'`,_,!1,void 0,v);try{return new FieldPath(...d.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${d}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,_,!1,void 0,v)}}function __PRIVATE_createError(_,d,v,A,C){const w=A&&!A.isEmpty(),T=C!==void 0;let R=`Function ${d}() called with invalid data`;v&&(R+=" (via `toFirestore()`)"),R+=". ";let G="";return(w||T)&&(G+=" (found",w&&(G+=` in field ${A}`),T&&(G+=` in document ${C}`),G+=")"),new FirestoreError(N.INVALID_ARGUMENT,R+_+G)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(d,v,A,C,w){this._firestore=d,this._userDataWriter=v,this._key=A,this._document=C,this._converter=w}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const d=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(d)}return this._userDataWriter.convertValue(this._document.data.value)}}get(d){if(this._document){const v=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",d));if(v!==null)return this._userDataWriter.convertValue(v)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(_,d){return typeof d=="string"?__PRIVATE_fieldPathFromDotSeparatedString(_,d):d instanceof FieldPath?d._internalPath:d._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(_){if(_.limitType==="L"&&_.explicitOrderBy.length===0)throw new FirestoreError(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query$1(_,d,...v){let A=[];d instanceof AppliableConstraint&&A.push(d),A=A.concat(v),function(w){const T=w.filter(G=>G instanceof QueryCompositeFilterConstraint).length,R=w.filter(G=>G instanceof QueryFieldFilterConstraint).length;if(T>1||T>0&&R>0)throw new FirestoreError(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(A);for(const C of A)_=C._apply(_);return _}class QueryFieldFilterConstraint extends QueryConstraint{constructor(d,v,A){super(),this._field=d,this._op=v,this._value=A,this.type="where"}static _create(d,v,A){return new QueryFieldFilterConstraint(d,v,A)}_apply(d){const v=this._parse(d);return __PRIVATE_validateNewFieldFilter(d._query,v),new Query(d.firestore,d.converter,__PRIVATE_queryWithAddedFilter(d._query,v))}_parse(d){const v=__PRIVATE_newUserDataReader(d.firestore);return function(w,T,R,G,I,z,H){let Y;if(I.isKeyField()){if(z==="array-contains"||z==="array-contains-any")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if(z==="in"||z==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(H,z);const ie=[];for(const oe of H)ie.push(__PRIVATE_parseDocumentIdValue(G,w,oe));Y={arrayValue:{values:ie}}}else Y=__PRIVATE_parseDocumentIdValue(G,w,H)}else z!=="in"&&z!=="not-in"&&z!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(H,z),Y=__PRIVATE_parseQueryValue(R,T,H,z==="in"||z==="not-in");return FieldFilter.create(I,z,Y)}(d._query,"where",v,d.firestore._databaseId,this._field,this._op,this._value)}}function where(_,d,v){const A=d,C=__PRIVATE_fieldPathFromArgument("where",_);return QueryFieldFilterConstraint._create(C,A,v)}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(d,v){super(),this.type=d,this._queryConstraints=v}static _create(d,v){return new QueryCompositeFilterConstraint(d,v)}_parse(d){const v=this._queryConstraints.map(A=>A._parse(d)).filter(A=>A.getFilters().length>0);return v.length===1?v[0]:CompositeFilter.create(v,this._getOperator())}_apply(d){const v=this._parse(d);return v.getFilters().length===0?d:(function(C,w){let T=C;const R=w.getFlattenedFilters();for(const G of R)__PRIVATE_validateNewFieldFilter(T,G),T=__PRIVATE_queryWithAddedFilter(T,G)}(d._query,v),new Query(d.firestore,d.converter,__PRIVATE_queryWithAddedFilter(d._query,v)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function or(..._){return _.forEach(d=>__PRIVATE_validateQueryFilterConstraint("or",d)),QueryCompositeFilterConstraint._create("or",_)}function and(..._){return _.forEach(d=>__PRIVATE_validateQueryFilterConstraint("and",d)),QueryCompositeFilterConstraint._create("and",_)}class QueryOrderByConstraint extends QueryConstraint{constructor(d,v){super(),this._field=d,this._direction=v,this.type="orderBy"}static _create(d,v){return new QueryOrderByConstraint(d,v)}_apply(d){const v=function(C,w,T){if(C.startAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(C.endAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(w,T)}(d._query,this._field,this._direction);return new Query(d.firestore,d.converter,function(C,w){const T=C.explicitOrderBy.concat([w]);return new __PRIVATE_QueryImpl(C.path,C.collectionGroup,T,C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt)}(d._query,v))}}function orderBy(_,d="asc"){const v=d,A=__PRIVATE_fieldPathFromArgument("orderBy",_);return QueryOrderByConstraint._create(A,v)}class QueryLimitConstraint extends QueryConstraint{constructor(d,v,A){super(),this.type=d,this._limit=v,this._limitType=A}static _create(d,v,A){return new QueryLimitConstraint(d,v,A)}_apply(d){return new Query(d.firestore,d.converter,__PRIVATE_queryWithLimit(d._query,this._limit,this._limitType))}}function limit(_){return QueryLimitConstraint._create("limit",_,"F")}class QueryStartAtConstraint extends QueryConstraint{constructor(d,v,A){super(),this.type=d,this._docOrFields=v,this._inclusive=A}static _create(d,v,A){return new QueryStartAtConstraint(d,v,A)}_apply(d){const v=__PRIVATE_newQueryBoundFromDocOrFields(d,this.type,this._docOrFields,this._inclusive);return new Query(d.firestore,d.converter,function(C,w){return new __PRIVATE_QueryImpl(C.path,C.collectionGroup,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,w,C.endAt)}(d._query,v))}}function startAfter(..._){return QueryStartAtConstraint._create("startAfter",_,!1)}function __PRIVATE_newQueryBoundFromDocOrFields(_,d,v,A){if(v[0]=getModularInstance(v[0]),v[0]instanceof DocumentSnapshot$1)return function(w,T,R,G,I){if(!G)throw new FirestoreError(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${R}().`);const z=[];for(const H of __PRIVATE_queryNormalizedOrderBy(w))if(H.field.isKeyField())z.push(__PRIVATE_refValue(T,G.key));else{const Y=G.data.field(H.field);if(__PRIVATE_isServerTimestamp(Y))throw new FirestoreError(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+H.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(Y===null){const ee=H.field.canonicalString();throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ee}' (used as the orderBy) does not exist.`)}z.push(Y)}return new Bound(z,I)}(_._query,_.firestore._databaseId,d,v[0]._document,A);{const C=__PRIVATE_newUserDataReader(_.firestore);return function(T,R,G,I,z,H){const Y=T.explicitOrderBy;if(z.length>Y.length)throw new FirestoreError(N.INVALID_ARGUMENT,`Too many arguments provided to ${I}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ee=[];for(let ie=0;ie<z.length;ie++){const oe=z[ie];if(Y[ie].field.isKeyField()){if(typeof oe!="string")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${I}(), but got a ${typeof oe}`);if(!__PRIVATE_isCollectionGroupQuery(T)&&oe.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${I}() must be a plain document ID, but '${oe}' contains a slash.`);const se=T.path.child(ResourcePath.fromString(oe));if(!DocumentKey.isDocumentKey(se))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${I}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const re=new DocumentKey(se);ee.push(__PRIVATE_refValue(R,re))}else{const se=__PRIVATE_parseQueryValue(G,I,oe);ee.push(se)}}return new Bound(ee,H)}(_._query,_.firestore._databaseId,C,d,v,A)}}function __PRIVATE_parseDocumentIdValue(_,d,v){if(typeof(v=getModularInstance(v))=="string"){if(v==="")throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(d)&&v.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${v}' contains a '/' character.`);const A=d.path.child(ResourcePath.fromString(v));if(!DocumentKey.isDocumentKey(A))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${A}' is not because it has an odd number of segments (${A.length}).`);return __PRIVATE_refValue(_,new DocumentKey(A))}if(v instanceof DocumentReference)return __PRIVATE_refValue(_,v._key);throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(v)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(_,d){if(!Array.isArray(_)||_.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${d.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(_,d){const v=function(C,w){for(const T of C)for(const R of T.getFlattenedFilters())if(w.indexOf(R.op)>=0)return R.op;return null}(_.filters,function(C){switch(C){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(d.op));if(v!==null)throw v===d.op?new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${d.op.toString()}' filter.`):new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${d.op.toString()}' filters with '${v.toString()}' filters.`)}function __PRIVATE_validateQueryFilterConstraint(_,d){if(!(d instanceof QueryFieldFilterConstraint||d instanceof QueryCompositeFilterConstraint))throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${_}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class AbstractUserDataWriter{convertValue(d,v="none"){switch(__PRIVATE_typeOrder(d)){case 0:return null;case 1:return d.booleanValue;case 2:return __PRIVATE_normalizeNumber(d.integerValue||d.doubleValue);case 3:return this.convertTimestamp(d.timestampValue);case 4:return this.convertServerTimestamp(d,v);case 5:return d.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(d.bytesValue));case 7:return this.convertReference(d.referenceValue);case 8:return this.convertGeoPoint(d.geoPointValue);case 9:return this.convertArray(d.arrayValue,v);case 11:return this.convertObject(d.mapValue,v);case 10:return this.convertVectorValue(d.mapValue);default:throw fail(62114,{value:d})}}convertObject(d,v){return this.convertObjectMap(d.fields,v)}convertObjectMap(d,v="none"){const A={};return forEach(d,(C,w)=>{A[C]=this.convertValue(w,v)}),A}convertVectorValue(d){const v=d.fields?.[Et].arrayValue?.values?.map(A=>__PRIVATE_normalizeNumber(A.doubleValue));return new VectorValue(v)}convertGeoPoint(d){return new GeoPoint(__PRIVATE_normalizeNumber(d.latitude),__PRIVATE_normalizeNumber(d.longitude))}convertArray(d,v){return(d.values||[]).map(A=>this.convertValue(A,v))}convertServerTimestamp(d,v){switch(v){case"previous":const A=__PRIVATE_getPreviousValue(d);return A==null?null:this.convertValue(A,v);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(d));default:return null}}convertTimestamp(d){const v=__PRIVATE_normalizeTimestamp(d);return new Timestamp(v.seconds,v.nanos)}convertDocumentKey(d,v){const A=ResourcePath.fromString(d);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(A),9688,{name:d});const C=new DatabaseId(A.get(1),A.get(3)),w=new DocumentKey(A.popFirst(5));return C.isEqual(v)||__PRIVATE_logError(`Document ${w} contains a document reference within a different database (${C.projectId}/${C.database}) which is not supported. It will be treated as a reference in the current database (${v.projectId}/${v.database}) instead.`),w}}function count(){return new AggregateField("count")}class SnapshotMetadata{constructor(d,v){this.hasPendingWrites=d,this.fromCache=v}isEqual(d){return this.hasPendingWrites===d.hasPendingWrites&&this.fromCache===d.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(d,v,A,C,w,T){super(d,v,A,C,T),this._firestore=d,this._firestoreImpl=d,this.metadata=w}exists(){return super.exists()}data(d={}){if(this._document){if(this._converter){const v=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(v,d)}return this._userDataWriter.convertValue(this._document.data.value,d.serverTimestamps)}}get(d,v={}){if(this._document){const A=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",d));if(A!==null)return this._userDataWriter.convertValue(A,v.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const d=this._document,v={};return v.type=DocumentSnapshot._jsonSchemaVersion,v.bundle="",v.bundleSource="DocumentSnapshot",v.bundleName=this._key.toString(),!d||!d.isValidDocument()||!d.isFoundDocument()?v:(this._userDataWriter.convertObjectMap(d.data.value.mapValue.fields,"previous"),v.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),v)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(d={}){return super.data(d)}}class QuerySnapshot{constructor(d,v,A,C){this._firestore=d,this._userDataWriter=v,this._snapshot=C,this.metadata=new SnapshotMetadata(C.hasPendingWrites,C.fromCache),this.query=A}get docs(){const d=[];return this.forEach(v=>d.push(v)),d}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(d,v){this._snapshot.docs.forEach(A=>{d.call(v,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,A.key,A,new SnapshotMetadata(this._snapshot.mutatedKeys.has(A.key),this._snapshot.fromCache),this.query.converter))})}docChanges(d={}){const v=!!d.includeMetadataChanges;if(v&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===v||(this._cachedChanges=function(C,w){if(C._snapshot.oldDocs.isEmpty()){let T=0;return C._snapshot.docChanges.map(R=>{const G=new QueryDocumentSnapshot(C._firestore,C._userDataWriter,R.doc.key,R.doc,new SnapshotMetadata(C._snapshot.mutatedKeys.has(R.doc.key),C._snapshot.fromCache),C.query.converter);return R.doc,{type:"added",doc:G,oldIndex:-1,newIndex:T++}})}{let T=C._snapshot.oldDocs;return C._snapshot.docChanges.filter(R=>w||R.type!==3).map(R=>{const G=new QueryDocumentSnapshot(C._firestore,C._userDataWriter,R.doc.key,R.doc,new SnapshotMetadata(C._snapshot.mutatedKeys.has(R.doc.key),C._snapshot.fromCache),C.query.converter);let I=-1,z=-1;return R.type!==0&&(I=T.indexOf(R.doc.key),T=T.delete(R.doc.key)),R.type!==1&&(T=T.add(R.doc),z=T.indexOf(R.doc.key)),{type:__PRIVATE_resultChangeType(R.type),doc:G,oldIndex:I,newIndex:z}})}}(this,v),this._cachedChangesIncludeMetadataChanges=v),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const d={};d.type=QuerySnapshot._jsonSchemaVersion,d.bundleSource="QuerySnapshot",d.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const v=[],A=[],C=[];return this.docs.forEach(w=>{w._document!==null&&(v.push(w._document),A.push(this._userDataWriter.convertObjectMap(w._document.data.value.mapValue.fields,"previous")),C.push(w.ref.path))}),d.bundle=(this._firestore,this.query._query,d.bundleName,"NOT SUPPORTED"),d}}function __PRIVATE_resultChangeType(_){switch(_){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:_})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(_){_=__PRIVATE_cast(_,DocumentReference);const d=__PRIVATE_cast(_.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(d),_._key).then(v=>__PRIVATE_convertToDocSnapshot(d,_,v))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(d){super(),this.firestore=d}convertBytes(d){return new Bytes(d)}convertReference(d){const v=this.convertDocumentKey(d,this.firestore._databaseId);return new DocumentReference(this.firestore,null,v)}}function getDocs(_){_=__PRIVATE_cast(_,Query);const d=__PRIVATE_cast(_.firestore,Firestore),v=ensureFirestoreConfigured(d),A=new __PRIVATE_ExpUserDataWriter(d);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(_._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(v,_._query).then(C=>new QuerySnapshot(d,A,_,C))}function __PRIVATE_convertToDocSnapshot(_,d,v){const A=v.docs.get(d._key),C=new __PRIVATE_ExpUserDataWriter(_);return new DocumentSnapshot(_,C,d._key,A,new SnapshotMetadata(v.hasPendingWrites,v.fromCache),d.converter)}function getCountFromServer(_){return getAggregateFromServer(_,{count:count()})}function getAggregateFromServer(_,d){const v=__PRIVATE_cast(_.firestore,Firestore),A=ensureFirestoreConfigured(v),C=__PRIVATE_mapToArray(d,(w,T)=>new __PRIVATE_AggregateImpl(T,w.aggregateType,w._internalFieldPath));return __PRIVATE_firestoreClientRunAggregateQuery(A,_._query,C).then(w=>function(R,G,I){const z=new __PRIVATE_ExpUserDataWriter(R);return new AggregateQuerySnapshot(G,z,I)}(v,_,w))}(function(d,v=!0){(function(C){x$2=C})(SDK_VERSION),_registerComponent(new Component("firestore",(A,{instanceIdentifier:C,options:w})=>{const T=A.getProvider("app").getImmediate(),R=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(A.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(T,A.getProvider("app-check-internal")),function(I,z){if(!Object.prototype.hasOwnProperty.apply(I.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(I.options.projectId,z)}(T,C),T);return w={useFetchStreams:v,...w},R._setSettings(w),R},"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,d),registerVersion(F,M,"esm2020")})();const HAPTIC_GAP=15,UPGRADE_GRADE={common:"common_plus",common_plus:"rare",rare:"rare_plus",rare_plus:"epic",epic:"epic_plus",epic_plus:"legend",legend:"legend_plus",legend_plus:"diamond"},GRADE_NAMES={COMMON:"Common",COMMON_PLUS:"Common+",RARE:"Rare",RARE_PLUS:"Rare+",EPIC:"Epic",EPIC_PLUS:"Epic+",LEGEND:"Legend",LEGEND_PLUS:"Legend+",DIAMOND:"Diamond"},ALL_GRADES=["COMMON","COMMON_PLUS","RARE","RARE_PLUS","EPIC","EPIC_PLUS","LEGEND","LEGEND_PLUS","DIAMOND"],USER_CAPS_COUNT=3,ALL_BOOSTERS=["max-attack","max-heal","skip-counter-attack"],COMMON_COLLECTION_ID="common-caps",commonPackImage="/packs/pack-common.png",tonstersPackImage="/packs/pack-tonsters.png",epicPackImage="/packs/pack-epic.png",rarePackImage="/packs/pack-rare.png",gumImage$2="/icons/gum.png",disk1Image="/icons/disk-1.png",disk2Image="/icons/disk-2.png",disk3Image="/icons/disk-3.png",disk4Image="/icons/disk-4.png",disk5Image="/icons/disk-5.png";function getHighGradesCount(_){const d=_.caps_mycaps.grades;return d?(d.EPIC??0)+(d.EPIC_PLUS??0)+(d.LEGEND??0)+(d.LEGEND_PLUS??0)+(d.DIAMOND??0):0}function getIsStarterPackAvailable(_){return getHighGradesCount(_)===0&&!_.isStarterPackPurchased}function getBaseGrade(_){const d=_.indexOf("_");return d>0?_.substring(0,d):_}function getGradeTitle(_){const d=_.indexOf("_"),v=d>0?_.substring(0,d)+"+":_;return v.charAt(0).toUpperCase()+v.slice(1).toLocaleLowerCase()}function isValidGrade(_,d){return _ in d}function getCapGdGrade(_,d){if(!_||!d||!_.grade)return;const v=_.grade.toLocaleLowerCase();if(isValidGrade(v,d.grades))return d.grades[v]}function getCapGdGradeWithCollectionBuff(_,d,v,A){const C=getCapGdGrade(_,d);if(!C||!d||!v)return;const w=()=>{if(_){const R=_;if(R.power)return R.power.from}return C.from},T=()=>{if(_){const R=_;if(R.power)return R.power.to}return C.to};if(A)return{...C,from:Math.ceil(w()*(1+v.fullCollectionBuff)),to:Math.ceil(T()*(1+v.fullCollectionBuff))};if(_){const R=_;if(R.power)return{...C,from:R.power.from,to:R.power.to}}return C}const getName=_=>_.username?"@"+_.username:_.first_name,capitalize$1=_=>_.charAt(0).toUpperCase()+_.slice(1).toLowerCase(),getShortAddress$1=_=>_.slice(0,4)+"..."+_.slice(-4),calculateGameResults=(_,d,v)=>{const A=_.filter(z=>d.find(H=>H.id==z.id)||z.owner==v),C=new Map,w=new Map;for(const z of A)d.find(H=>H.id==z.id)?z.owner!=v&&w.set(z.id,z):C.set(z.id,z);const T=0,R=1,G=2,I=z=>C.has(z.id)?T:w.has(z.id)?G:R;return A.sort((z,H)=>I(z)-I(H)),{caps:A,newCapIds:C,lostCapIds:w}};function getCapPveHp(_,d){if(!d)return 100;const v=_.grade.toLocaleLowerCase(),A=d.health;return isValidCapBattleGrade(v,A)?A[v]:100}function getCapPvePowerFrom(_,d,v,A){return getCapGdGradeWithCollectionBuff(_,d,v,A)?.from}function getCapPvePowerTo(_,d,v,A){return getCapGdGradeWithCollectionBuff(_,d,v,A)?.to}function getFactionFromCollection(_,d){if(d)return d.factions.find(v=>{if(v.collections.includes(_))return v})}function getFactionFromCap(_,d){if(d)return getFactionFromCollection(_.collection,d)}function isValidCapBattleGrade(_,d){return _ in d}function truncate(_,d){if(_.length<=d)return _;const v="...",A=v.length,C=d-A,w=Math.ceil(C/2),T=Math.floor(C/2);return _.substr(0,w)+v+_.substr(_.length-T)}function getPriceInTon(_,d){const A=_.priceInTon??999999999999999;return Math.floor(A*(d>0?1-d:1))}function getPriceInStars(_,d){const A=_.priceInStars??999999999999999;return Math.floor(A*(d>0?1-d:1))}function getDiscount(_,d){if(!d||_.id!=="notcoin-epic"&&_.id!=="notcoin")return-1;if(d.notcoinLeague){if(d.notcoinLeague=="bronze")return .05;if(d.notcoinLeague=="gold")return .3;if(d.notcoinLeague=="platinum")return .6}else return-1;return-1}function getDiscountImage(_){if(!(_<=0))return`/icons/discounts/${_*100}.png`}function getMaxGrade(_){if(!_)return"";let d=-1;for(let v=0;v<ALL_GRADES.length;v++){const C=ALL_GRADES[v],w=_[C];w&&w>0&&(d=v)}return d<0?"":ALL_GRADES[d]}function getCapUrl(_,d,v){return d.isGradeDependent?`collections/${d.id}/${v}-${_.toLocaleLowerCase()}.png`:`collections/${d.id}/${v}.png`}async function sleep(_){return new Promise(d=>setTimeout(d,_))}const isFullCollectionBuff=({caps:_})=>{if(_&&_.length===USER_CAPS_COUNT){const d=_[0].collection;return _.every(v=>v.collection==d)}return!1},checkMintersInNftCaps=async(_,d)=>{if(!_)return!0;for(const v of d){if(!v.isNft||!v.nft)continue;const A=await firebaseService.findNfts(v.nft.address);for(const C of A)if(C.minter&&C.minter!=_.id.toString())return!1}return!0},getRewardImage=_=>{switch(_.type){case"coins":return gumImage$2;case"pack":switch(_.pack?.type){case"common":return commonPackImage;case"rare":return rarePackImage;case"epic":return epicPackImage;case"tonsters":return tonstersPackImage;default:return""}default:return""}},getReward=_=>{switch(_.type){case"coins":return{text:_.coins,image:gumImage$2};case"pack":return{text:1,image:getRewardImage(_)};case"booster":return{text:_.booster?.count,image:"/icons/booster-"+_.booster?.id+".png"};default:return{text:"",image:""}}};function squadMode(){return"v1"}function squadsColletion(){return"Squads"}function getDiskImage(_){const d=[disk1Image,disk2Image,disk3Image,disk4Image,disk5Image];if(_){const A=Math.abs(Array.from(_).reduce((C,w)=>C+w.charCodeAt(0),0))%d.length;return d[A]}const v=Math.floor(Math.random()*d.length);return d[v]}function getSquadImage(_){return _.smallPhoto?_.smallPhoto:getDiskImage(_.id.toString())}const camelToKebab=_=>_.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),getCollectionsPacksByFilter=(_,d)=>_.filter(d).map(v=>{const A=firebaseService.getCollectionCapUrl(v.image);return{...v,url:A,name:v.title?v.title:v.grade+" "+instance.t("pack")}});function endOfTheDayFrom(_){return _.setUTCHours(23,59,59,999),Timestamp.fromDate(_)}function endOfTheWeekFrom(_){const v=_.getDate()-_.getDay()+(_.getDay()==0?-6:1)+6,A=new Date(_.setDate(v));return A.setUTCHours(23,59,59,999),Timestamp.fromDate(A)}function endOfTheMonthFrom(_){return _.setDate(1),_.setMonth(_.getMonth()+1),_.setDate(0),_.setUTCHours(23,59,59,999),Timestamp.fromDate(_)}function getSquadLevel(_,d){if(!_||!d||!d.squads)return;const v=_?.level??0;if(!(v<0||v>=d.squads.levels.length))return d.squads.levels[v]}function squadLeaderboardKey(_,d){switch(_){case"day":return`day-${endOfTheDayFrom(d??new Date).toDate().toISOString().substring(0,10)}`;case"week":return`week-${endOfTheWeekFrom(d??new Date).toDate().toISOString().substring(0,10)}`;case"month":return`month-${endOfTheMonthFrom(d??new Date).toDate().toISOString().substring(0,10)}`}}const config$2={apiKey:"AIzaSyDffNF9PUsCpjsL2vxQBNwdmHpgwxcDuwc",authDomain:"capsgame-prod.firebaseapp.com",projectId:"capsgame-prod",storageBucket:"capsgame-prod.appspot.com",messagingSenderId:"634883413455",appId:"1:634883413455:web:2b5b9928ff55d10343aeba"},pageSize=10;class FirebaseService{db;app;auth;user;token;constructor(){this.app=initializeApp$1(config$2),this.db=getFirestore(this.app),this.auth=getAuth(this.app)}async login(d){const v=await signInWithCustomToken(this.auth,d);this.user=v.user,this.token=await getIdToken(this.user)}async findNfts(d){const v=query$1(collection(this.db,"Nfts"),where("address","==",d),limit(pageSize));return(await getDocs(v)).docs.map(C=>C.data())}async getCap(d){return(await getDoc(doc(this.db,"Caps",d))).data()}async getDuckygram(d){return(await getDoc(doc(this.db,"Duckygram",d.toString()))).data()}async getBattle(d){return(await getDoc(doc(this.db,"Battles",d))).data()}async getCapsForSale(d,v,A,C){let w=query$1(collection(this.db,"Caps"),where("status","==","SALE"),orderBy(d,v),limit(pageSize));if(A){if(A.collections&&A.collections.size>0){const I=[];for(const[z,H]of A.collections.entries())H.length>0?I.push(and(where("collectionId","==",z),where("collectionNumber","in",H))):I.push(where("collectionId","==",z));w=query$1(w,or(...I))}if(A.grades&&A.grades.length>0){const I=A.grades.map(z=>where("grade","==",z));w=query$1(w,or(...I))}A.capNumber&&A.capNumber!==0&&(w=query$1(w,where("number","==",A.capNumber)))}const T=C?query$1(w,startAfter(C)):w,R=await getDocs(T);return{caps:R.docs.map(I=>I.data()),lastDocument:R.docs.length==pageSize?R.docs[R.docs.length-1]:void 0}}async getMyCaps(d,v,A,C){let w=query$1(collection(this.db,"Caps"),where("owner","==",this.user.uid),orderBy(d,v),limit(pageSize));A&&(w=query$1(w,where("isNft","==",!0)));const T=C?query$1(w,startAfter(C)):w,R=await getDocs(T);return{caps:R.docs.map(I=>I.data()),lastDocument:R.docs.length==pageSize?R.docs[R.docs.length-1]:void 0}}async getMyCapsAvailableForUpgrade(d,v,A=0){if(!d?.caps_mycaps)return{caps:[],lastDocument:void 0,chunk:0};const C=await this.getCapsGD(),w=this.findCapsAvailableForUpgrade(d.caps_mycaps.collections,C);return w.length===0?{caps:[],lastDocument:void 0,chunk:0}:this.fetchUpgradeableCapsWithChunking(w,v,A)}findCapsAvailableForUpgrade(d,v){const A=[];for(const C of d)for(const w of C.caps)if(w.grades)for(const T of ALL_GRADES)this.isCapGradeAvailableForUpgrade(w.grades,T,C,v)&&A.push({collectionId:C.collectionId,collectionNumber:w.number,grade:T});return A}isCapGradeAvailableForUpgrade(d,v,A,C){if((d[v]??0)===0)return!1;const T=C.grades[v.toLowerCase()];if(!T?.upgrade)return!1;const R=new Map;R.set(v,1);for(const G of T.upgrade.resources)if(!this.hasEnoughResourcesForUpgrade(G,d,A,R))return!1;return!0}hasEnoughResourcesForUpgrade(d,v,A,C){const w=d.grade?C.get(d.grade.toUpperCase())??0:0,T=d.grade?v[d.grade.toUpperCase()]??0:0;if(d.equalCap){if(T<=w)return!1;C.set(d.grade?.toUpperCase()??"",w+1)}else if(d.equalCollection&&d.grade){if(this.calculateTotalCollectionCount(A,d.grade)<=w)return!1;C.set(d.grade.toUpperCase(),w+1)}return!0}calculateTotalCollectionCount(d,v){let A=0;for(const C of d.caps){if(!C.grades)continue;const w=C.grades[v.toUpperCase()]??0;A+=w}return A}async fetchUpgradeableCapsWithChunking(d,v,A=0){d.sort((T,R)=>ALL_GRADES.indexOf(R.grade.toUpperCase())-ALL_GRADES.indexOf(T.grade.toUpperCase()));for(let T=A;T*10<d.length;T++){const R=T*10,G=Math.min(R+10,d.length),I=d.slice(R,G);if(I.length===0)break;const z=await this.fetchCapsForChunk(I,v);if(z.caps.length>0)return{caps:z.caps,lastDocument:z.lastDocument,chunk:T}}const w=Math.floor(d.length/10);return{caps:[],lastDocument:void 0,chunk:w}}async fetchCapsForChunk(d,v){const A=d.map(G=>and(where("collectionId","==",G.collectionId),where("grade","==",G.grade.toUpperCase()),where("collectionNumber","==",G.collectionNumber)));let C=query$1(collection(this.db,"Caps"),where("owner","==",this.user.uid),orderBy("gradeNumber","desc"),limit(pageSize));C=query$1(C,or(...A));const w=v?query$1(C,startAfter(v)):C,T=await getDocs(w);return{caps:T.docs.map(G=>G.data()),lastDocument:T.docs.length===pageSize?T.docs[T.docs.length-1]:void 0}}async getMyCollectionCaps(d){[].push(where("owner","==",this.user.uid));let A=query$1(collection(this.db,"Caps"),where("owner","==",this.user.uid),orderBy("gradeNumber","desc"));return d.collectionId&&(A=query$1(A,where("collectionId","==",d.collectionId))),d.number&&(A=query$1(A,where("collectionNumber","==",d.number))),d.grade&&(A=query$1(A,where("grade","==",d.grade.toLocaleUpperCase()))),(await getDocs(A)).docs.map(w=>w.data())}async getPublicGames(d,{filter:v,startAfterDoc:A}){const C=query$1(collection(this.db,"Games"),where("type","==","public"),where("status","==","WAITING"),where("mode","==",d),orderBy("createdAt","desc"),limit(pageSize));return this.getPaginatedGames(C,v,A)}async getUserTransactions(d,v,A){const C=query$1(collection(this.db,"Users",d,"TonTransactions"),where("source","in",v),orderBy("createdAt","desc"),limit(pageSize)),w=A?query$1(C,startAfter(A)):C,T=await getDocs(w);return{transactions:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getMyGames(d,v){const A=query$1(collection(this.db,"Games"),where("owner.id","==",Number(this.user.uid)),where("status","==","WAITING"),where("mode","==",d),orderBy("createdAt","desc"),limit(pageSize));return this.getPaginatedGames(A,void 0,v)}async getPlayedGames(d,v){const A=query$1(collection(this.db,"Games"),or(and(where("mode","==",d),where("owner.id","==",Number(this.user.uid)),where("status","==","FINISHED")),and(where("mode","==",d),where("resultBid.user.id","==",Number(this.user.uid)),where("status","==","FINISHED"))),orderBy("finishedAt","desc"),limit(pageSize));return this.getPaginatedGames(A,void 0,v)}async getPaginatedGames(d,v,A){if(v){if(v.collections&&v.collections.size>0){var C=[];for(const[G,I]of v.collections.entries()){const z=v.grades?.map(Y=>({collection:G,grade:Y})),H=v.grades?where("capsFilters","array-contains-any",z):where("capsFilters","array-contains",{collection:G,grade:"ANY"});C.push(H)}d=query$1(d,or(...C))}else if(v.grades&&v.grades.length>0){const G=v.grades.map(I=>({collection:"ANY",grade:I}));d=query$1(d,where("capsFilters","array-contains-any",G))}}const w=A?query$1(d,startAfter(A)):d,T=await getDocs(w);return{games:T.docs.map(G=>{const I=G.data();return I.id=G.id,I}),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getGame(d){return getDoc(doc(this.db,"Games",d)).then(v=>{const A=v.data();return A||Promise.reject()})}async getUser(d){return getDoc(doc(this.db,"Users",d)).then(v=>{if(!v)return Promise.reject();const A=v.data();return A.id=Number(v.id),A})}async getDeck(d){return getDoc(doc(this.db,"Decks",d)).then(v=>v?v.data():Promise.reject())}async getCaps(d){if(d.length==0)return[];const v=query$1(collection(this.db,"Caps"),where("id","in",d));return getDocs(v).then(A=>A?A.docs.map(C=>C.data()):Promise.reject())}async getSquad(d){return getDoc(doc(this.db,squadsColletion(),d)).then(v=>v?v.data():Promise.reject())}async getAllCollections(){return(await getDoc(doc(this.db,"Static","CapsCollections"))).data().collections.sort((A,C)=>A.order-C.order).filter(A=>A.status=="available"||A.status=="sold-out")}async getCollection(d){return(await this.getAllCollections()).find(A=>A.id==d)}async getPackCollections(){return(await getDoc(doc(this.db,"Static","PacksCollections"))).data().collections}async getCapsGD(){return(await getDoc(doc(this.db,"CapsGD","v1"))).data()}async getPveGd(){return(await getDoc(doc(this.db,"CapsGD","pve"))).data()}async getUsersLeaderboard(d,v){const A=collection(this.db,"Users"),C=query$1(A,where("league","==",d),orderBy("score","desc"),limit(pageSize)),w=v?query$1(C,startAfter(v)):C,T=await getDocs(w);return{users:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getUsersLeaderboardBySpeed(d,v){const A=collection(this.db,"Users"),C=query$1(A,where("league","==",d),orderBy("stakingSpeed","desc"),limit(pageSize)),w=v?query$1(C,startAfter(v)):C,T=await getDocs(w);return{users:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getSquadsLeaderboard(d,v){const A=collection(this.db,squadsColletion()),C=query$1(A,where("league","==",d),orderBy("score","desc"),limit(pageSize)),w=v?query$1(C,startAfter(v)):C,T=await getDocs(w);return{squads:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getSquadsV2Leaderboard(d,v){const A=collection(doc(collection(this.db,"SquadsLeaderboard"),this.getLeaderboardCollection(d)),"Squads"),C=query$1(A,orderBy("score","desc"),limit(pageSize)),w=v?query$1(C,startAfter(v)):C,T=await getDocs(w);return{squads:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getSquadsV2(d){const v=collection(this.db,squadsColletion()),A=query$1(v,orderBy("score","desc"),limit(pageSize)),C=d?query$1(A,startAfter(d)):A,w=await getDocs(C);return{squads:w.docs.map(R=>R.data()),lastDocument:w.docs.length==pageSize?w.docs[w.docs.length-1]:void 0}}async getSquadPositionInLeaderboard(d){const v=query$1(collection(this.db,squadsColletion()),where("league","==",d.league),where("score",">",d.score));return{position:(await getCountFromServer(v)).data().count+1,score:d.score}}async getSquadV2Leaderboard(d,v){const A=doc(collection(doc(collection(this.db,"SquadsLeaderboard"),this.getLeaderboardCollection(v)),"Squads"),d.id.toString()),C=await getDoc(A);return C.exists()?C.data():void 0}async getSquadV2PositionInLeaderboard(d,v){const A=query$1(collection(doc(collection(this.db,"SquadsLeaderboard"),this.getLeaderboardCollection(v)),"Squads"),where("score",">",d.score));return await getDocs(A),{position:(await getCountFromServer(A)).data().count+1,score:d.score}}async getUserPositionInLeaderboard(d){const v=query$1(collection(this.db,"Users"),where("league","==",d.league),where("score",">",d.score));return{position:(await getCountFromServer(v)).data().count+1,score:d.score}}async getUserPositionBySpeedInLeaderboard(d){const v=query$1(collection(this.db,"Users"),where("league","==",d.league),where("stakingSpeed",">",d.stakingSpeed??0));return{position:(await getCountFromServer(v)).data().count+1,score:d.score}}async getSquadLeaders(d,v){const A=collection(this.db,"Users"),C=query$1(A,where("caps_squad.id","==",d),orderBy("score","desc"),limit(pageSize)),w=v?query$1(C,startAfter(v)):C,T=await getDocs(w);return{users:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getSquadRequests(d){const v=collection(doc(collection(this.db,"SquadsV2"),d.toString()),"Requests");return{requests:(await getDocs(query$1(v,where("status","==","PENDING")))).docs.map(w=>w.data())}}async getSquadBankLeaders(d,v,A){const C=collection(doc(collection(this.db,"SquadsV2"),d.toString()),v),w=query$1(C,orderBy("amount","desc"),limit(pageSize)),T=A?query$1(w,startAfter(A)):w,R=await getDocs(T);return{users:R.docs.map(I=>I.data()),lastDocument:R.docs.length==pageSize?R.docs[R.docs.length-1]:void 0}}async getSquadActivityLeaders(d,v,A){const C=collection(doc(collection(doc(collection(this.db,"SquadsLeaderboard"),v),"Squads"),d.toString()),"Users"),w=query$1(C,orderBy("score","desc"),limit(pageSize)),T=A?query$1(w,startAfter(A)):w,R=await getDocs(T);return{users:R.docs.map(I=>I.data()),lastDocument:R.docs.length==pageSize?R.docs[R.docs.length-1]:void 0}}async getUsersSeasonLeaderboard(d,v,A,C){const w=collection(this.db,"Seasons",d,"Users");var T=query$1(w,where("score",">=",v),orderBy("score","desc"),limit(pageSize));A&&(T=query$1(T,where("score","<=",A)));const R=C?query$1(T,startAfter(C)):T,G=await getDocs(R);return{users:G.docs.map(z=>z.data()),lastDocument:G.docs.length==pageSize?G.docs[G.docs.length-1]:void 0}}async getUserPositionInSeasonLeaderboard(d,v,A){var C=query$1(collection(this.db,"Seasons",v,"Users"),where("score",">",d.score??0));return A&&(C=query$1(C,where("score","<=",A))),{position:(await getCountFromServer(C)).data().count+1,score:d.score}}async getPendingPacks(d){const v=collection(this.db,"Packs"),A=query$1(v,or(and(where("owner","==",d.toString()),where("status","==","READY")),and(where("owner","==",d.toString()),where("status","==","WAITING"))));return(await getDocs(A)).docs.map(w=>w.data()).filter(w=>!w.isOpened)}async getPacksByIds(d){const v=collection(this.db,"Packs"),A=query$1(v,where("id","in",d));return(await getDocs(A)).docs.map(w=>w.data())}async getUnfinishedMadnessGames(d){const v=query$1(collection(this.db,"Battles"),where("player.id","==",d.id),where("mode","==","madness"),where("status","!=","finished"));return(await getDocs(v)).docs.map(C=>C.data())}async getUnfinishedGames(d){const v=query$1(collection(this.db,"Battles"),where("player.id","==",d.id),where("status","!=","finished"));return(await getDocs(v)).docs.map(C=>C.data())}async getUserSeasonData(d,v){if(!(!v||!v.season))return(await getDoc(doc(this.db,"Seasons",v.season,"Users",d))).data()}async getTodaySalesCount(){const d=new Date,v=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate())),A=query$1(collection(this.db,"Sales"),where("createdAt",">=",Timestamp.fromDate(v)));return(await getCountFromServer(A)).data().count}async getOffers(d,v,A){const C=query$1(collection(this.db,"Offers"),where(d=="in"?"userTo.id":"userFrom.id","==",v),where("status","==","WAITING"),orderBy("createdAt","desc"),limit(pageSize)),w=A?query$1(C,startAfter(A)):C,T=await getDocs(w);return{offers:T.docs.map(G=>G.data()),lastDocument:T.docs.length==pageSize?T.docs[T.docs.length-1]:void 0}}async getSalesActivity(d){const v=query$1(collection(this.db,"Sales"),orderBy("createdAt","desc"),limit(pageSize)),A=d?query$1(v,startAfter(d)):v,C=await getDocs(A);return{sales:C.docs.map(T=>T.data()),lastDocument:C.docs.length==pageSize?C.docs[C.docs.length-1]:void 0}}getCollectionCapUrl(d){return this.getBaseImageUrl(d)}getPackFullUrl(d){return this.getBaseImageUrl(d)}getPackTopPartUrl(d){return this.getBaseImageUrl(`packs/${d.toLocaleLowerCase()}-top.png`)}getPackBottomPartUrl(d){return this.getBaseImageUrl(`packs/${d.toLocaleLowerCase()}-bottom.png`)}getCustomBackground(d,v,A){if(d.grade!="DIAMOND")return;const C=A?.find(w=>w.id==d.collectionId);if(C)return C.isGradeDependent?this.getBaseImageUrl(`collections/${C.id}/diamond-background-${v}-${d.collectionNumber}.png`):C.hasCustomDiamond?this.getBaseImageUrl(`collections/${C.id}/diamond-background-${v}.png`):this.getBaseImageUrl(`collections/diamond-background-${v}.png`)}getPveCampaignBackground(d){return this.getBaseImageUrl(`campaigns/${d}/background.png`)}getPveCampaignCharacter(d,v){return this.getBaseImageUrl(`campaigns/${d}/${v}.png`)}getBaseImageUrl(d){const v=d.replace(/\//g,"%2F");return`https://firebasestorage.googleapis.com/v0/b/${config$2.storageBucket}/o/${v}?alt=media`}async getMarketplaceActivity(d){const v=query$1(collection(this.db,"MarketplaceActivity"),orderBy("date","desc"),limit(pageSize)),A=d?query$1(v,startAfter(d)):v,C=await getDocs(A);return{activities:C.docs.map(T=>T.data()),lastDocument:C.docs.length==pageSize?C.docs[C.docs.length-1]:void 0}}async getDiamondUserPositionInLeaderboard(d){if(d.league!="diamond")return-1;const v=query$1(collection(this.db,"Users"),where("league","==",d.league),where("score",">",d.score));return(await getCountFromServer(v)).data().count}async hasPendingJoinSquadRequest(d,v){const A=doc(collection(this.db,"SquadsV2",v.toString(),"Requests"),d),C=await getDoc(A);return C.exists()?C.data().status=="PENDING":!1}getLeaderboardCollection(d){return d=="day"||d=="week"||d=="month"?squadLeaderboardKey(d):d}}const firebaseService=new FirebaseService;class CapsService{async webLogin(d){return fetch("/functions/web-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:d})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v)}async webLogout(){return fetch("/functions/web-logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}).then(d=>d.status==200?d.json():Promise.reject()).then(d=>d)}async getWebToken(d){return fetch("/functions/web-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:d})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>({token:v.token,lang:v.lang,message:v.message,proof:v.proof,topupPayload:v.topupPayload}))}async getToken(d){return fetch("/functions/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initData:d})}).then(v=>v.json()).then(v=>({token:v.token,lang:v.lang,pendingPacks:v.pendingPacks,message:v.message,proof:v.proof,topupPayload:v.topupPayload}))}async sendGameInvite(d,v){return fetch("/functions/game-invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({gameId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.id)}async requestRefLink(d){return fetch("/functions/ref-link",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v.refCode)}async rejectGameInvite(d,v){return fetch("/functions/reject-game",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({gameId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.id)}async rejectBid(d,v,A){return fetch("/functions/reject-bid",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({gameId:d,userBidId:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C.id)}async newPack(d,v,A){return fetch("/functions/pack",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({collectionId:d,receipt:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C.packId)}async requestPack(d,v,A,C){return fetch("/functions/pack",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({collectionId:d,purchaseType:v,quantity:A})}).then(w=>w.status==200?w.json():Promise.reject()).then(w=>({id:w.id,payload:w.payload,subPacks:w.subPacks??[],skins:w.skins??[]}))}async openPack(d,v){return fetch("/functions/open",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({packId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.caps)}async openMultiplePacks(d,v){return fetch("/functions/open-all",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({packIds:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.caps)}async requestInvoice(d,v){return fetch("/functions/invoice",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({packId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.url)}async createGame(d,v,A,C,w,T){return fetch("/functions/game",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({mode:v,type:A,caps:d,preferences:w,comment:T})}).then(R=>R.status==200?R.json():Promise.reject()).then(R=>R.id)}async deleteGame(d,v){return fetch("/functions/game",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({gameId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.id)}async removeAllBets(d,v){return fetch("/functions/remove-all-bets",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({mode:d})}).then(A=>A.status==200?A.json():Promise.reject())}async setCounterBid(d,v,A){return fetch("/functions/bid",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({gameId:d,bid:v})}).then(C=>C.status==200?C.json():Promise.reject())}async startGame(d,v,A){return fetch("/functions/play",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({gameId:d,opponentId:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>({game:C.game,resultCaps:C.result,resultBid:C.resultBid,exchangeResult:C.exchangeResult,pvpResult:C.pvpResult}))}async claimReward(d,v,A){return fetch("/functions/claim-reward",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({type:d,points:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C.reward)}async claimTask(d,v,A){return fetch("/functions/claim-task",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({type:d,task:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>({progress:Number(C.progress),reward:C.reward}))}async taskLinkClicked(d,v,A){return fetch("/functions/click-task",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({type:d,task:v})}).then(C=>C.status==200?C.json():Promise.reject())}async claimIdle(d){return fetch("/functions/claim-idle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>Number(v.newBalance))}async claimIdleBonus(d){return fetch("/functions/claim-idle-bonus",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>Number(v.newBalance))}async upgradeIdle(d){return fetch("/functions/upgrade-idle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v.url)}async upgradeIdlePayload(d){return fetch("/functions/upgrade-idle-payload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v.payload)}async convertToNft(d,v){return fetch("/functions/convert-to-nft",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.url)}async convertToNftPayload(d,v){return fetch("/functions/convert-to-nft-payload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.payload)}async upgradeCap(d,v,A){return fetch("/functions/upgrade",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({cap:d,resourceIds:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C.upgraded)}async applySkin(d,v,A,C,w){return fetch("/functions/apply-skin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({cap:d,source:A,skin:C,type:w})}).then(T=>T.status==200?T.json():Promise.reject()).then(T=>T.upgraded)}async editNft(d,v){return fetch("/functions/editing-nft-skin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.url)}async editNftPayload(d,v){return fetch("/functions/editing-nft-skin-payload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.payload)}async finishEditing(d,v){return fetch("/functions/finish-editing",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d})}).then(A=>A.status==200?A.json():Promise.reject())}async validateProof(d,v,A,C){return fetch("/functions/check-proof",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({address:d,network:v,proof:A})}).then(w=>w.status==200?w.json():Promise.reject()).then(w=>w.wallet)}async withdrawNft(d,v,A){return fetch("/functions/withdraw",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({capId:d,wallet:v})}).then(C=>C.status==200?C.json():Promise.reject())}async withdrawTon(d,v){return fetch("/functions/withdraw-ton",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({amount:d})}).then(A=>A.status==200?A.json():Promise.reject())}async joinSquadByLink(d){return fetch("/functions/squad/join-by-link",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject())}async joinSquad(d,v){return fetch("/functions/squad/join",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({squadId:d})}).then(A=>A.status==200?A.json():Promise.reject())}async handleRequest(d,v,A,C){return fetch("/functions/squad/request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({squadId:d,requestId:v,accept:A})}).then(w=>w.status==200?w.json():Promise.reject())}async kick(d,v,A){return fetch("/functions/squad/kick",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({squadId:d,userId:v})}).then(C=>C.status==200?C.json():Promise.reject())}async squadVisibility(d,v,A){return fetch("/functions/squad/visibility",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({squadId:d,isPrivate:v})}).then(C=>C.status==200?C.json():Promise.reject())}async squadUpgrade(d,v){return fetch("/functions/squad/upgrade",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({squadId:d})}).then(A=>A.status==200?A.json():Promise.reject())}async topupSquad(d,v,A,C,w){return fetch("/functions/squad/topup",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify({squadId:d,amount:v,type:A,caps:C})}).then(T=>T.status==200?T.json():Promise.reject())}async withdrawFromSquadBank(d,v,A,C,w,T){return fetch("/functions/squad/send",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({squadId:d,type:v,userId:A,amount:w,packId:T})}).then(R=>R.status==200?R.json():Promise.reject())}async promote(d,v,A,C,w){return fetch("/functions/squad/promote",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${w}`},body:JSON.stringify({squadId:d,userId:v,apply:C,role:A})}).then(T=>T.status==200?T.json():Promise.reject())}async leaveSquad(d){return fetch("/functions/squad/leave",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v)}async newBattle(d,v,A){return fetch("/functions/battle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({level:d,caps:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C)}async attack(d,v,A,C){return fetch("/functions/battle/attack",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({id:d,from:v,to:A})}).then(w=>w.status==200?w.json():Promise.reject()).then(w=>w)}async counterAttack(d,v){return fetch("/functions/battle/counter-attack",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({id:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>({attacks:A.attacks,battleResult:A.battleResult,newState:A.newState,status:A.status}))}async selectBonus(d,v,A,C){return fetch("/functions/battle/select-bonus",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({id:d,bonus:v,to:C})}).then(w=>w.status==200?w.json():Promise.reject()).then(w=>w)}async applyBooster(d,v,A){return fetch("/functions/battle/apply-booster",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({id:d,booster:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C)}async endBattle(d,v){return fetch("/functions/battle/end-battle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({id:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>({battleResult:A.battleResult}))}async playMusic(d){return fetch("/functions/music",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject())}async checkEnergy(d){return fetch("/functions/checkEnergy",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject())}async newCampaignBattle(d,v,A,C){return fetch("/functions/campaign",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({level:d,campaign:v,caps:A})}).then(w=>w.status==200?w.json():Promise.reject()).then(w=>w)}async newMadness(d){return fetch("/functions/madness",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v)}async madnessImmortality(d,v){return fetch("/functions/madness-immportality",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({madnessId:d})}).then(A=>A.status==200?A.json():Promise.reject())}async madnessNextRound(d,v){return fetch("/functions/madness-next-round",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({madnessId:d})}).then(A=>A.status==200?A.json():Promise.reject())}async stake(d,v,A){return fetch("/functions/stake",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({capId:d.id,slot:v})}).then(C=>C.status==200?C.json():Promise.reject())}async unstake(d,v){return fetch("/functions/unstake",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.cap)}async unlockSlot(d,v,A){return fetch("/functions/unlock-slot",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({slot:d,caps:A})}).then(C=>C.status==200?C.json():Promise.reject())}async sell(d,v,A){return fetch("/functions/sell",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({capId:d.id,price:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C.cap)}async cancelSale(d,v){return fetch("/functions/cancel-sale",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d.id})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.cap)}async buyCap(d,v){return fetch("/functions/buy-cap",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({capId:d.id,price:d.price})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A.cap)}async claimNotcoinReward(d,v){return fetch("/functions/not/claim",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({league:d})}).then(A=>A.status==200?A.json():Promise.reject()).then(A=>A)}async completeOnboarding(d){return fetch("/functions/complete-onboarding",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject())}async changeLanguage(d,v){return fetch("/functions/change-language",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({lang:d})}).then(A=>A.status==200?A.json():Promise.reject())}async completeTutorial(d){return fetch("/functions/complete-tutorial",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({})}).then(v=>v.status==200?v.json():Promise.reject())}async getGifts(d){return fetch("/functions/gifts",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}}).then(v=>v.status==200?v.json():Promise.reject()).then(v=>v.gifts)}async stakeGift(d,v,A,C){return fetch("/functions/stake-gift",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({gift:d,cap:v,slot:A})}).then(w=>w.status==200?w.json():Promise.reject())}async unstakeGift(d,v,A){return fetch("/functions/unstake-gift",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({gift:d,cap:v})}).then(C=>C.status==200?C.json():Promise.reject())}async setDeck(d,v,A){return fetch("/functions/set-deck",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({caps:d,deckId:A})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C.deck)}async newPveNewBattle(d,v,A){return fetch("/functions/pvenew-battle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({level:d,deck:v})}).then(C=>C.status==200?C.json():Promise.reject()).then(C=>C)}async addCapToBattle(d,v,A,C){return fetch("/functions/battle/add-cap",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({id:d,cap:v,to:C})}).then(w=>w.status==200?w.json():Promise.reject()).then(w=>w)}async clientCustomAlert(d,v){return fetch("/functions/alert",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({message:d})}).then(A=>A.status==200?A.json():Promise.reject())}}const capsService=new CapsService,Spinner=({className:_})=>jsxRuntimeExports.jsxs("div",{className:`lds-spinner ${_}`,children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]}),lightningImage$1="/icons/lightning.svg",tonImage="/icons/ton.png",StakedCoin="/icons/staked-coin.png",lightningGrayImage="/icons/lightning-gray.svg";var updateQueue=makeQueue(),raf=_=>schedule(_,updateQueue),writeQueue=makeQueue();raf.write=_=>schedule(_,writeQueue);var onStartQueue=makeQueue();raf.onStart=_=>schedule(_,onStartQueue);var onFrameQueue=makeQueue();raf.onFrame=_=>schedule(_,onFrameQueue);var onFinishQueue=makeQueue();raf.onFinish=_=>schedule(_,onFinishQueue);var timeouts=[];raf.setTimeout=(_,d)=>{const v=raf.now()+d,A=()=>{const w=timeouts.findIndex(T=>T.cancel==A);~w&&timeouts.splice(w,1),pendingCount-=~w?1:0},C={time:v,handler:_,cancel:A};return timeouts.splice(findTimeout(v),0,C),pendingCount+=1,start(),C};var findTimeout=_=>~(~timeouts.findIndex(d=>d.time>_)||~timeouts.length);raf.cancel=_=>{onStartQueue.delete(_),onFrameQueue.delete(_),onFinishQueue.delete(_),updateQueue.delete(_),writeQueue.delete(_)};raf.sync=_=>{sync=!0,raf.batchedUpdates(_),sync=!1};raf.throttle=_=>{let d;function v(){try{_(...d)}finally{d=null}}function A(...C){d=C,raf.onStart(v)}return A.handler=_,A.cancel=()=>{onStartQueue.delete(v),d=null},A};var nativeRaf=typeof window<"u"?window.requestAnimationFrame:()=>{};raf.use=_=>nativeRaf=_;raf.now=typeof performance<"u"?()=>performance.now():Date.now;raf.batchedUpdates=_=>_();raf.catch=console.error;raf.frameLoop="always";raf.advance=()=>{raf.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):update$2()};var ts=-1,pendingCount=0,sync=!1;function schedule(_,d){sync?(d.delete(_),_(0)):(d.add(_),start())}function start(){ts<0&&(ts=0,raf.frameLoop!=="demand"&&nativeRaf(loop$2))}function stop(){ts=-1}function loop$2(){~ts&&(nativeRaf(loop$2),raf.batchedUpdates(update$2))}function update$2(){const _=ts;ts=raf.now();const d=findTimeout(ts);if(d&&(eachSafely(timeouts.splice(0,d),v=>v.handler()),pendingCount-=d),!pendingCount){stop();return}onStartQueue.flush(),updateQueue.flush(_?Math.min(64,ts-_):16.667),onFrameQueue.flush(),writeQueue.flush(),onFinishQueue.flush()}function makeQueue(){let _=new Set,d=_;return{add(v){pendingCount+=d==_&&!_.has(v)?1:0,_.add(v)},delete(v){return pendingCount-=d==_&&_.has(v)?1:0,_.delete(v)},flush(v){d.size&&(_=new Set,pendingCount-=d.size,eachSafely(d,A=>A(v)&&_.add(A)),pendingCount+=_.size,d=_)}}}function eachSafely(_,d){_.forEach(v=>{try{d(v)}catch(A){raf.catch(A)}})}var __defProp$2=Object.defineProperty,__export=(_,d)=>{for(var v in d)__defProp$2(_,v,{get:d[v],enumerable:!0})},globals_exports={};__export(globals_exports,{assign:()=>assign$1,colors:()=>colors,createStringInterpolator:()=>createStringInterpolator,skipAnimation:()=>skipAnimation,to:()=>to$2,willAdvance:()=>willAdvance});function noop$1(){}var defineHidden=(_,d,v)=>Object.defineProperty(_,d,{value:v,writable:!0,configurable:!0}),is$1={arr:Array.isArray,obj:_=>!!_&&_.constructor.name==="Object",fun:_=>typeof _=="function",str:_=>typeof _=="string",num:_=>typeof _=="number",und:_=>_===void 0};function isEqual$1(_,d){if(is$1.arr(_)){if(!is$1.arr(d)||_.length!==d.length)return!1;for(let v=0;v<_.length;v++)if(_[v]!==d[v])return!1;return!0}return _===d}var each=(_,d)=>_.forEach(d);function eachProp(_,d,v){if(is$1.arr(_)){for(let A=0;A<_.length;A++)d.call(v,_[A],`${A}`);return}for(const A in _)_.hasOwnProperty(A)&&d.call(v,_[A],A)}var toArray=_=>is$1.und(_)?[]:is$1.arr(_)?_:[_];function flush(_,d){if(_.size){const v=Array.from(_);_.clear(),each(v,d)}}var flushCalls=(_,...d)=>flush(_,v=>v(...d)),isSSR=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),createStringInterpolator,to$2,colors=null,skipAnimation=!1,willAdvance=noop$1,assign$1=_=>{_.to&&(to$2=_.to),_.now&&(raf.now=_.now),_.colors!==void 0&&(colors=_.colors),_.skipAnimation!=null&&(skipAnimation=_.skipAnimation),_.createStringInterpolator&&(createStringInterpolator=_.createStringInterpolator),_.requestAnimationFrame&&raf.use(_.requestAnimationFrame),_.batchedUpdates&&(raf.batchedUpdates=_.batchedUpdates),_.willAdvance&&(willAdvance=_.willAdvance),_.frameLoop&&(raf.frameLoop=_.frameLoop)},startQueue=new Set,currentFrame=[],prevFrame=[],priority=0,frameLoop={get idle(){return!startQueue.size&&!currentFrame.length},start(_){priority>_.priority?(startQueue.add(_),raf.onStart(flushStartQueue)):(startSafely(_),raf(advance$1))},advance:advance$1,sort(_){if(priority)raf.onFrame(()=>frameLoop.sort(_));else{const d=currentFrame.indexOf(_);~d&&(currentFrame.splice(d,1),startUnsafely(_))}},clear(){currentFrame=[],startQueue.clear()}};function flushStartQueue(){startQueue.forEach(startSafely),startQueue.clear(),raf(advance$1)}function startSafely(_){currentFrame.includes(_)||startUnsafely(_)}function startUnsafely(_){currentFrame.splice(findIndex(currentFrame,d=>d.priority>_.priority),0,_)}function advance$1(_){const d=prevFrame;for(let v=0;v<currentFrame.length;v++){const A=currentFrame[v];priority=A.priority,A.idle||(willAdvance(A),A.advance(_),A.idle||d.push(A))}return priority=0,prevFrame=currentFrame,prevFrame.length=0,currentFrame=d,currentFrame.length>0}function findIndex(_,d){const v=_.findIndex(d);return v<0?_.length:v}var clamp$3=(_,d,v)=>Math.min(Math.max(v,_),d),colors2={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},NUMBER="[-+]?\\d*\\.?\\d+",PERCENTAGE=NUMBER+"%";function call$1(..._){return"\\(\\s*("+_.join(")\\s*,\\s*(")+")\\s*\\)"}var rgb=new RegExp("rgb"+call$1(NUMBER,NUMBER,NUMBER)),rgba$1=new RegExp("rgba"+call$1(NUMBER,NUMBER,NUMBER,NUMBER)),hsl=new RegExp("hsl"+call$1(NUMBER,PERCENTAGE,PERCENTAGE)),hsla=new RegExp("hsla"+call$1(NUMBER,PERCENTAGE,PERCENTAGE,NUMBER)),hex3=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex4=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6=/^#([0-9a-fA-F]{6})$/,hex8=/^#([0-9a-fA-F]{8})$/;function normalizeColor(_){let d;return typeof _=="number"?_>>>0===_&&_>=0&&_<=4294967295?_:null:(d=hex6.exec(_))?parseInt(d[1]+"ff",16)>>>0:colors&&colors[_]!==void 0?colors[_]:(d=rgb.exec(_))?(parse255(d[1])<<24|parse255(d[2])<<16|parse255(d[3])<<8|255)>>>0:(d=rgba$1.exec(_))?(parse255(d[1])<<24|parse255(d[2])<<16|parse255(d[3])<<8|parse1(d[4]))>>>0:(d=hex3.exec(_))?parseInt(d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+"ff",16)>>>0:(d=hex8.exec(_))?parseInt(d[1],16)>>>0:(d=hex4.exec(_))?parseInt(d[1]+d[1]+d[2]+d[2]+d[3]+d[3]+d[4]+d[4],16)>>>0:(d=hsl.exec(_))?(hslToRgb(parse360(d[1]),parsePercentage(d[2]),parsePercentage(d[3]))|255)>>>0:(d=hsla.exec(_))?(hslToRgb(parse360(d[1]),parsePercentage(d[2]),parsePercentage(d[3]))|parse1(d[4]))>>>0:null}function hue2rgb$1(_,d,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?_+(d-_)*6*v:v<1/2?d:v<2/3?_+(d-_)*(2/3-v)*6:_}function hslToRgb(_,d,v){const A=v<.5?v*(1+d):v+d-v*d,C=2*v-A,w=hue2rgb$1(C,A,_+1/3),T=hue2rgb$1(C,A,_),R=hue2rgb$1(C,A,_-1/3);return Math.round(w*255)<<24|Math.round(T*255)<<16|Math.round(R*255)<<8}function parse255(_){const d=parseInt(_,10);return d<0?0:d>255?255:d}function parse360(_){return(parseFloat(_)%360+360)%360/360}function parse1(_){const d=parseFloat(_);return d<0?0:d>1?255:Math.round(d*255)}function parsePercentage(_){const d=parseFloat(_);return d<0?0:d>100?1:d/100}function colorToRgba(_){let d=normalizeColor(_);if(d===null)return _;d=d||0;const v=(d&4278190080)>>>24,A=(d&16711680)>>>16,C=(d&65280)>>>8,w=(d&255)/255;return`rgba(${v}, ${A}, ${C}, ${w})`}var createInterpolator=(_,d,v)=>{if(is$1.fun(_))return _;if(is$1.arr(_))return createInterpolator({range:_,output:d,extrapolate:v});if(is$1.str(_.output[0]))return createStringInterpolator(_);const A=_,C=A.output,w=A.range||[0,1],T=A.extrapolateLeft||A.extrapolate||"extend",R=A.extrapolateRight||A.extrapolate||"extend",G=A.easing||(I=>I);return I=>{const z=findRange(I,w);return interpolate(I,w[z],w[z+1],C[z],C[z+1],G,T,R,A.map)}};function interpolate(_,d,v,A,C,w,T,R,G){let I=G?G(_):_;if(I<d){if(T==="identity")return I;T==="clamp"&&(I=d)}if(I>v){if(R==="identity")return I;R==="clamp"&&(I=v)}return A===C?A:d===v?_<=d?A:C:(d===-1/0?I=-I:v===1/0?I=I-d:I=(I-d)/(v-d),I=w(I),A===-1/0?I=-I:C===1/0?I=I+A:I=I*(C-A)+A,I)}function findRange(_,d){for(var v=1;v<d.length-1&&!(d[v]>=_);++v);return v-1}var steps=(_,d="end")=>v=>{v=d==="end"?Math.min(v,.999):Math.max(v,.001);const A=v*_,C=d==="end"?Math.floor(A):Math.ceil(A);return clamp$3(0,1,C/_)},c1=1.70158,c2=c1*1.525,c3$1=c1+1,c4$1=2*Math.PI/3,c5=2*Math.PI/4.5,bounceOut=_=>_<1/2.75?7.5625*_*_:_<2/2.75?7.5625*(_-=1.5/2.75)*_+.75:_<2.5/2.75?7.5625*(_-=2.25/2.75)*_+.9375:7.5625*(_-=2.625/2.75)*_+.984375,easings={linear:_=>_,easeInQuad:_=>_*_,easeOutQuad:_=>1-(1-_)*(1-_),easeInOutQuad:_=>_<.5?2*_*_:1-Math.pow(-2*_+2,2)/2,easeInCubic:_=>_*_*_,easeOutCubic:_=>1-Math.pow(1-_,3),easeInOutCubic:_=>_<.5?4*_*_*_:1-Math.pow(-2*_+2,3)/2,easeInQuart:_=>_*_*_*_,easeOutQuart:_=>1-Math.pow(1-_,4),easeInOutQuart:_=>_<.5?8*_*_*_*_:1-Math.pow(-2*_+2,4)/2,easeInQuint:_=>_*_*_*_*_,easeOutQuint:_=>1-Math.pow(1-_,5),easeInOutQuint:_=>_<.5?16*_*_*_*_*_:1-Math.pow(-2*_+2,5)/2,easeInSine:_=>1-Math.cos(_*Math.PI/2),easeOutSine:_=>Math.sin(_*Math.PI/2),easeInOutSine:_=>-(Math.cos(Math.PI*_)-1)/2,easeInExpo:_=>_===0?0:Math.pow(2,10*_-10),easeOutExpo:_=>_===1?1:1-Math.pow(2,-10*_),easeInOutExpo:_=>_===0?0:_===1?1:_<.5?Math.pow(2,20*_-10)/2:(2-Math.pow(2,-20*_+10))/2,easeInCirc:_=>1-Math.sqrt(1-Math.pow(_,2)),easeOutCirc:_=>Math.sqrt(1-Math.pow(_-1,2)),easeInOutCirc:_=>_<.5?(1-Math.sqrt(1-Math.pow(2*_,2)))/2:(Math.sqrt(1-Math.pow(-2*_+2,2))+1)/2,easeInBack:_=>c3$1*_*_*_-c1*_*_,easeOutBack:_=>1+c3$1*Math.pow(_-1,3)+c1*Math.pow(_-1,2),easeInOutBack:_=>_<.5?Math.pow(2*_,2)*((c2+1)*2*_-c2)/2:(Math.pow(2*_-2,2)*((c2+1)*(_*2-2)+c2)+2)/2,easeInElastic:_=>_===0?0:_===1?1:-Math.pow(2,10*_-10)*Math.sin((_*10-10.75)*c4$1),easeOutElastic:_=>_===0?0:_===1?1:Math.pow(2,-10*_)*Math.sin((_*10-.75)*c4$1)+1,easeInOutElastic:_=>_===0?0:_===1?1:_<.5?-(Math.pow(2,20*_-10)*Math.sin((20*_-11.125)*c5))/2:Math.pow(2,-20*_+10)*Math.sin((20*_-11.125)*c5)/2+1,easeInBounce:_=>1-bounceOut(1-_),easeOutBounce:bounceOut,easeInOutBounce:_=>_<.5?(1-bounceOut(1-2*_))/2:(1+bounceOut(2*_-1))/2,steps},$get=Symbol.for("FluidValue.get"),$observers=Symbol.for("FluidValue.observers"),hasFluidValue=_=>!!(_&&_[$get]),getFluidValue=_=>_&&_[$get]?_[$get]():_,getFluidObservers=_=>_[$observers]||null;function callFluidObserver(_,d){_.eventObserved?_.eventObserved(d):_(d)}function callFluidObservers(_,d){const v=_[$observers];v&&v.forEach(A=>{callFluidObserver(A,d)})}var FluidValue=class{constructor(_){if(!_&&!(_=this.get))throw Error("Unknown getter");setFluidGetter(this,_)}},setFluidGetter=(_,d)=>setHidden(_,$get,d);function addFluidObserver(_,d){if(_[$get]){let v=_[$observers];v||setHidden(_,$observers,v=new Set),v.has(d)||(v.add(d),_.observerAdded&&_.observerAdded(v.size,d))}return d}function removeFluidObserver(_,d){const v=_[$observers];if(v&&v.has(d)){const A=v.size-1;A?v.delete(d):_[$observers]=null,_.observerRemoved&&_.observerRemoved(A,d)}}var setHidden=(_,d,v)=>Object.defineProperty(_,d,{value:v,writable:!0,configurable:!0}),numberRegex=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,colorRegex=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,unitRegex=new RegExp(`(${numberRegex.source})(%|[a-z]+)`,"i"),rgbaRegex=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,cssVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,variableToRgba=_=>{const[d,v]=parseCSSVariable(_);if(!d||isSSR())return _;const A=window.getComputedStyle(document.documentElement).getPropertyValue(d);if(A)return A.trim();if(v&&v.startsWith("--")){const C=window.getComputedStyle(document.documentElement).getPropertyValue(v);return C||_}else{if(v&&cssVariableRegex.test(v))return variableToRgba(v);if(v)return v}return _},parseCSSVariable=_=>{const d=cssVariableRegex.exec(_);if(!d)return[,];const[,v,A]=d;return[v,A]},namedColorRegex,rgbaRound=(_,d,v,A,C)=>`rgba(${Math.round(d)}, ${Math.round(v)}, ${Math.round(A)}, ${C})`,createStringInterpolator2=_=>{namedColorRegex||(namedColorRegex=colors?new RegExp(`(${Object.keys(colors).join("|")})(?!\\w)`,"g"):/^\b$/);const d=_.output.map(w=>getFluidValue(w).replace(cssVariableRegex,variableToRgba).replace(colorRegex,colorToRgba).replace(namedColorRegex,colorToRgba)),v=d.map(w=>w.match(numberRegex).map(Number)),C=v[0].map((w,T)=>v.map(R=>{if(!(T in R))throw Error('The arity of each "output" value must be equal');return R[T]})).map(w=>createInterpolator({..._,output:w}));return w=>{const T=!unitRegex.test(d[0])&&d.find(G=>unitRegex.test(G))?.replace(numberRegex,"");let R=0;return d[0].replace(numberRegex,()=>`${C[R++](w)}${T||""}`).replace(rgbaRegex,rgbaRound)}},prefix="react-spring: ",once=_=>{const d=_;let v=!1;if(typeof d!="function")throw new TypeError(`${prefix}once requires a function parameter`);return(...A)=>{v||(d(...A),v=!0)}},warnInterpolate=once(console.warn);function deprecateInterpolate(){warnInterpolate(`${prefix}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var warnDirectCall=once(console.warn);function deprecateDirectCall(){warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function isAnimatedString(_){return is$1.str(_)&&(_[0]=="#"||/\d/.test(_)||!isSSR()&&cssVariableRegex.test(_)||_ in(colors||{}))}var useIsomorphicLayoutEffect$2=isSSR()?reactExports.useEffect:reactExports.useLayoutEffect,useIsMounted=()=>{const _=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>(_.current=!0,()=>{_.current=!1}),[]),_};function useForceUpdate(){const _=reactExports.useState()[1],d=useIsMounted();return()=>{d.current&&_(Math.random())}}var useOnce=_=>reactExports.useEffect(_,emptyDeps),emptyDeps=[];function usePrev(_){const d=reactExports.useRef(void 0);return reactExports.useEffect(()=>{d.current=_}),d.current}var $node=Symbol.for("Animated:node"),isAnimated=_=>!!_&&_[$node]===_,getAnimated=_=>_&&_[$node],setAnimated=(_,d)=>defineHidden(_,$node,d),getPayload=_=>_&&_[$node]&&_[$node].getPayload(),Animated=class{constructor(){setAnimated(this,this)}getPayload(){return this.payload||[]}},AnimatedValue=class Lm extends Animated{constructor(d){super(),this._value=d,this.done=!0,this.durationProgress=0,is$1.num(this._value)&&(this.lastPosition=this._value)}static create(d){return new Lm(d)}getPayload(){return[this]}getValue(){return this._value}setValue(d,v){return is$1.num(d)&&(this.lastPosition=d,v&&(d=Math.round(d/v)*v,this.done&&(this.lastPosition=d))),this._value===d?!1:(this._value=d,!0)}reset(){const{done:d}=this;this.done=!1,is$1.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,d&&(this.lastVelocity=null),this.v0=null)}},AnimatedString=class Om extends AnimatedValue{constructor(d){super(0),this._string=null,this._toString=createInterpolator({output:[d,d]})}static create(d){return new Om(d)}getValue(){const d=this._string;return d??(this._string=this._toString(this._value))}setValue(d){if(is$1.str(d)){if(d==this._string)return!1;this._string=d,this._value=1}else if(super.setValue(d))this._string=null;else return!1;return!0}reset(d){d&&(this._toString=createInterpolator({output:[this.getValue(),d]})),this._value=0,super.reset()}},TreeContext={dependencies:null},AnimatedObject=class extends Animated{constructor(_){super(),this.source=_,this.setValue(_)}getValue(_){const d={};return eachProp(this.source,(v,A)=>{isAnimated(v)?d[A]=v.getValue(_):hasFluidValue(v)?d[A]=getFluidValue(v):_||(d[A]=v)}),d}setValue(_){this.source=_,this.payload=this._makePayload(_)}reset(){this.payload&&each(this.payload,_=>_.reset())}_makePayload(_){if(_){const d=new Set;return eachProp(_,this._addToPayload,d),Array.from(d)}}_addToPayload(_){TreeContext.dependencies&&hasFluidValue(_)&&TreeContext.dependencies.add(_);const d=getPayload(_);d&&each(d,v=>this.add(v))}},AnimatedArray=class Fm extends AnimatedObject{constructor(d){super(d)}static create(d){return new Fm(d)}getValue(){return this.source.map(d=>d.getValue())}setValue(d){const v=this.getPayload();return d.length==v.length?v.map((A,C)=>A.setValue(d[C])).some(Boolean):(super.setValue(d.map(makeAnimated)),!0)}};function makeAnimated(_){return(isAnimatedString(_)?AnimatedString:AnimatedValue).create(_)}function getAnimatedType(_){const d=getAnimated(_);return d?d.constructor:is$1.arr(_)?AnimatedArray:isAnimatedString(_)?AnimatedString:AnimatedValue}var withAnimated=(_,d)=>{const v=!is$1.fun(_)||_.prototype&&_.prototype.isReactComponent;return reactExports.forwardRef((A,C)=>{const w=reactExports.useRef(null),T=v&&reactExports.useCallback(ie=>{w.current=updateRef(C,ie)},[C]),[R,G]=getAnimatedState(A,d),I=useForceUpdate(),z=()=>{const ie=w.current;if(v&&!ie)return;(ie?d.applyAnimatedValues(ie,R.getValue(!0)):!1)===!1&&I()},H=new PropsObserver(z,G),Y=reactExports.useRef(void 0);useIsomorphicLayoutEffect$2(()=>(Y.current=H,each(G,ie=>addFluidObserver(ie,H)),()=>{Y.current&&(each(Y.current.deps,ie=>removeFluidObserver(ie,Y.current)),raf.cancel(Y.current.update))})),reactExports.useEffect(z,[]),useOnce(()=>()=>{const ie=Y.current;each(ie.deps,oe=>removeFluidObserver(oe,ie))});const ee=d.getComponentProps(R.getValue());return reactExports.createElement(_,{...ee,ref:T})})},PropsObserver=class{constructor(_,d){this.update=_,this.deps=d}eventObserved(_){_.type=="change"&&raf.write(this.update)}};function getAnimatedState(_,d){const v=new Set;return TreeContext.dependencies=v,_.style&&(_={..._,style:d.createAnimatedStyle(_.style)}),_=new AnimatedObject(_),TreeContext.dependencies=null,[_,v]}function updateRef(_,d){return _&&(is$1.fun(_)?_(d):_.current=d),d}var cacheKey=Symbol.for("AnimatedComponent"),createHost=(_,{applyAnimatedValues:d=()=>!1,createAnimatedStyle:v=C=>new AnimatedObject(C),getComponentProps:A=C=>C}={})=>{const C={applyAnimatedValues:d,createAnimatedStyle:v,getComponentProps:A},w=T=>{const R=getDisplayName(T)||"Anonymous";return is$1.str(T)?T=w[T]||(w[T]=withAnimated(T,C)):T=T[cacheKey]||(T[cacheKey]=withAnimated(T,C)),T.displayName=`Animated(${R})`,T};return eachProp(_,(T,R)=>{is$1.arr(_)&&(R=getDisplayName(T)),w[R]=w(T)}),{animated:w}},getDisplayName=_=>is$1.str(_)?_:_&&is$1.str(_.displayName)?_.displayName:is$1.fun(_)&&_.name||null;function callProp(_,...d){return is$1.fun(_)?_(...d):_}var matchProp=(_,d)=>_===!0||!!(d&&_&&(is$1.fun(_)?_(d):toArray(_).includes(d))),resolveProp=(_,d)=>is$1.obj(_)?d&&_[d]:_,getDefaultProp=(_,d)=>_.default===!0?_[d]:_.default?_.default[d]:void 0,noopTransform=_=>_,getDefaultProps=(_,d=noopTransform)=>{let v=DEFAULT_PROPS;_.default&&_.default!==!0&&(_=_.default,v=Object.keys(_));const A={};for(const C of v){const w=d(_[C],C);is$1.und(w)||(A[C]=w)}return A},DEFAULT_PROPS=["config","onProps","onStart","onChange","onPause","onResume","onRest"],RESERVED_PROPS$1={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function getForwardProps(_){const d={};let v=0;if(eachProp(_,(A,C)=>{RESERVED_PROPS$1[C]||(d[C]=A,v++)}),v)return d}function inferTo(_){const d=getForwardProps(_);if(d){const v={to:d};return eachProp(_,(A,C)=>C in d||(v[C]=A)),v}return{..._}}function computeGoal(_){return _=getFluidValue(_),is$1.arr(_)?_.map(computeGoal):isAnimatedString(_)?globals_exports.createStringInterpolator({range:[0,1],output:[_,_]})(1):_}function hasProps(_){for(const d in _)return!0;return!1}function isAsyncTo(_){return is$1.fun(_)||is$1.arr(_)&&is$1.obj(_[0])}function detachRefs(_,d){_.ref?.delete(_),d?.delete(_)}function replaceRef(_,d){d&&_.ref!==d&&(_.ref?.delete(_),d.add(_),_.ref=d)}var config$1={default:{tension:170,friction:26}},defaults$1={...config$1.default,mass:1,damping:1,easing:easings.linear,clamp:!1},AnimationConfig=class{constructor(){this.velocity=0,Object.assign(this,defaults$1)}};function mergeConfig(_,d,v){v&&(v={...v},sanitizeConfig(v,d),d={...v,...d}),sanitizeConfig(_,d),Object.assign(_,d);for(const T in defaults$1)_[T]==null&&(_[T]=defaults$1[T]);let{frequency:A,damping:C}=_;const{mass:w}=_;return is$1.und(A)||(A<.01&&(A=.01),C<0&&(C=0),_.tension=Math.pow(2*Math.PI/A,2)*w,_.friction=4*Math.PI*C*w/A),_}function sanitizeConfig(_,d){if(!is$1.und(d.decay))_.duration=void 0;else{const v=!is$1.und(d.tension)||!is$1.und(d.friction);(v||!is$1.und(d.frequency)||!is$1.und(d.damping)||!is$1.und(d.mass))&&(_.duration=void 0,_.decay=void 0),v&&(_.frequency=void 0)}}var emptyArray=[],Animation=class{constructor(){this.changed=!1,this.values=emptyArray,this.toValues=null,this.fromValues=emptyArray,this.config=new AnimationConfig,this.immediate=!1}};function scheduleProps(_,{key:d,props:v,defaultProps:A,state:C,actions:w}){return new Promise((T,R)=>{let G,I,z=matchProp(v.cancel??A?.cancel,d);if(z)ee();else{is$1.und(v.pause)||(C.paused=matchProp(v.pause,d));let ie=A?.pause;ie!==!0&&(ie=C.paused||matchProp(ie,d)),G=callProp(v.delay||0,d),ie?(C.resumeQueue.add(Y),w.pause()):(w.resume(),Y())}function H(){C.resumeQueue.add(Y),C.timeouts.delete(I),I.cancel(),G=I.time-raf.now()}function Y(){G>0&&!globals_exports.skipAnimation?(C.delayed=!0,I=raf.setTimeout(ee,G),C.pauseQueue.add(H),C.timeouts.add(I)):ee()}function ee(){C.delayed&&(C.delayed=!1),C.pauseQueue.delete(H),C.timeouts.delete(I),_<=(C.cancelId||0)&&(z=!0);try{w.start({...v,callId:_,cancel:z},T)}catch(ie){R(ie)}}})}var getCombinedResult=(_,d)=>d.length==1?d[0]:d.some(v=>v.cancelled)?getCancelledResult(_.get()):d.every(v=>v.noop)?getNoopResult(_.get()):getFinishedResult(_.get(),d.every(v=>v.finished)),getNoopResult=_=>({value:_,noop:!0,finished:!0,cancelled:!1}),getFinishedResult=(_,d,v=!1)=>({value:_,finished:d,cancelled:v}),getCancelledResult=_=>({value:_,cancelled:!0,finished:!1});function runAsync(_,d,v,A){const{callId:C,parentId:w,onRest:T}=d,{asyncTo:R,promise:G}=v;return!w&&_===R&&!d.reset?G:v.promise=(async()=>{v.asyncId=C,v.asyncTo=_;const I=getDefaultProps(d,(se,re)=>re==="onRest"?void 0:se);let z,H;const Y=new Promise((se,re)=>(z=se,H=re)),ee=se=>{const re=C<=(v.cancelId||0)&&getCancelledResult(A)||C!==v.asyncId&&getFinishedResult(A,!1);if(re)throw se.result=re,H(se),se},ie=(se,re)=>{const fe=new BailSignal,ue=new SkipAnimationSignal;return(async()=>{if(globals_exports.skipAnimation)throw stopAsync(v),ue.result=getFinishedResult(A,!1),H(ue),ue;ee(fe);const ge=is$1.obj(se)?{...se}:{...re,to:se};ge.parentId=C,eachProp(I,(be,ve)=>{is$1.und(ge[ve])&&(ge[ve]=be)});const ye=await A.start(ge);return ee(fe),v.paused&&await new Promise(be=>{v.resumeQueue.add(be)}),ye})()};let oe;if(globals_exports.skipAnimation)return stopAsync(v),getFinishedResult(A,!1);try{let se;is$1.arr(_)?se=(async re=>{for(const fe of re)await ie(fe)})(_):se=Promise.resolve(_(ie,A.stop.bind(A))),await Promise.all([se.then(z),Y]),oe=getFinishedResult(A.get(),!0,!1)}catch(se){if(se instanceof BailSignal)oe=se.result;else if(se instanceof SkipAnimationSignal)oe=se.result;else throw se}finally{C==v.asyncId&&(v.asyncId=w,v.asyncTo=w?R:void 0,v.promise=w?G:void 0)}return is$1.fun(T)&&raf.batchedUpdates(()=>{T(oe,A,A.item)}),oe})()}function stopAsync(_,d){flush(_.timeouts,v=>v.cancel()),_.pauseQueue.clear(),_.resumeQueue.clear(),_.asyncId=_.asyncTo=_.promise=void 0,d&&(_.cancelId=d)}var BailSignal=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},SkipAnimationSignal=class extends Error{constructor(){super("SkipAnimationSignal")}},isFrameValue=_=>_ instanceof FrameValue,nextId=1,FrameValue=class extends FluidValue{constructor(){super(...arguments),this.id=nextId++,this._priority=0}get priority(){return this._priority}set priority(_){this._priority!=_&&(this._priority=_,this._onPriorityChange(_))}get(){const _=getAnimated(this);return _&&_.getValue()}to(..._){return globals_exports.to(this,_)}interpolate(..._){return deprecateInterpolate(),globals_exports.to(this,_)}toJSON(){return this.get()}observerAdded(_){_==1&&this._attach()}observerRemoved(_){_==0&&this._detach()}_attach(){}_detach(){}_onChange(_,d=!1){callFluidObservers(this,{type:"change",parent:this,value:_,idle:d})}_onPriorityChange(_){this.idle||frameLoop.sort(this),callFluidObservers(this,{type:"priority",parent:this,priority:_})}},$P=Symbol.for("SpringPhase"),HAS_ANIMATED=1,IS_ANIMATING=2,IS_PAUSED=4,hasAnimated=_=>(_[$P]&HAS_ANIMATED)>0,isAnimating=_=>(_[$P]&IS_ANIMATING)>0,isPaused=_=>(_[$P]&IS_PAUSED)>0,setActiveBit=(_,d)=>d?_[$P]|=IS_ANIMATING|HAS_ANIMATED:_[$P]&=~IS_ANIMATING,setPausedBit=(_,d)=>d?_[$P]|=IS_PAUSED:_[$P]&=~IS_PAUSED,SpringValue=class extends FrameValue{constructor(_,d){if(super(),this.animation=new Animation,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!is$1.und(_)||!is$1.und(d)){const v=is$1.obj(_)?{..._}:{...d,from:_};is$1.und(v.default)&&(v.default=!0),this.start(v)}}get idle(){return!(isAnimating(this)||this._state.asyncTo)||isPaused(this)}get goal(){return getFluidValue(this.animation.to)}get velocity(){const _=getAnimated(this);return _ instanceof AnimatedValue?_.lastVelocity||0:_.getPayload().map(d=>d.lastVelocity||0)}get hasAnimated(){return hasAnimated(this)}get isAnimating(){return isAnimating(this)}get isPaused(){return isPaused(this)}get isDelayed(){return this._state.delayed}advance(_){let d=!0,v=!1;const A=this.animation;let{toValues:C}=A;const{config:w}=A,T=getPayload(A.to);!T&&hasFluidValue(A.to)&&(C=toArray(getFluidValue(A.to))),A.values.forEach((I,z)=>{if(I.done)return;const H=I.constructor==AnimatedString?1:T?T[z].lastPosition:C[z];let Y=A.immediate,ee=H;if(!Y){if(ee=I.lastPosition,w.tension<=0){I.done=!0;return}let ie=I.elapsedTime+=_;const oe=A.fromValues[z],se=I.v0!=null?I.v0:I.v0=is$1.arr(w.velocity)?w.velocity[z]:w.velocity;let re;const fe=w.precision||(oe==H?.005:Math.min(1,Math.abs(H-oe)*.001));if(is$1.und(w.duration))if(w.decay){const ue=w.decay===!0?.998:w.decay,ge=Math.exp(-(1-ue)*ie);ee=oe+se/(1-ue)*(1-ge),Y=Math.abs(I.lastPosition-ee)<=fe,re=se*ge}else{re=I.lastVelocity==null?se:I.lastVelocity;const ue=w.restVelocity||fe/10,ge=w.clamp?0:w.bounce,ye=!is$1.und(ge),be=oe==H?I.v0>0:oe<H;let ve,Me=!1;const we=1,Be=Math.ceil(_/we);for(let De=0;De<Be&&(ve=Math.abs(re)>ue,!(!ve&&(Y=Math.abs(H-ee)<=fe,Y)));++De){ye&&(Me=ee==H||ee>H==be,Me&&(re=-re*ge,ee=H));const Fe=-w.tension*1e-6*(ee-H),Oe=-w.friction*.001*re,Ge=(Fe+Oe)/w.mass;re=re+Ge*we,ee=ee+re*we}}else{let ue=1;w.duration>0&&(this._memoizedDuration!==w.duration&&(this._memoizedDuration=w.duration,I.durationProgress>0&&(I.elapsedTime=w.duration*I.durationProgress,ie=I.elapsedTime+=_)),ue=(w.progress||0)+ie/this._memoizedDuration,ue=ue>1?1:ue<0?0:ue,I.durationProgress=ue),ee=oe+w.easing(ue)*(H-oe),re=(ee-I.lastPosition)/_,Y=ue==1}I.lastVelocity=re,Number.isNaN(ee)&&(console.warn("Got NaN while animating:",this),Y=!0)}T&&!T[z].done&&(Y=!1),Y?I.done=!0:d=!1,I.setValue(ee,w.round)&&(v=!0)});const R=getAnimated(this),G=R.getValue();if(d){const I=getFluidValue(A.to);(G!==I||v)&&!w.decay?(R.setValue(I),this._onChange(I)):v&&w.decay&&this._onChange(G),this._stop()}else v&&this._onChange(G)}set(_){return raf.batchedUpdates(()=>{this._stop(),this._focus(_),this._set(_)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(isAnimating(this)){const{to:_,config:d}=this.animation;raf.batchedUpdates(()=>{this._onStart(),d.decay||this._set(_,!1),this._stop()})}return this}update(_){return(this.queue||(this.queue=[])).push(_),this}start(_,d){let v;return is$1.und(_)?(v=this.queue||[],this.queue=[]):v=[is$1.obj(_)?_:{...d,to:_}],Promise.all(v.map(A=>this._update(A))).then(A=>getCombinedResult(this,A))}stop(_){const{to:d}=this.animation;return this._focus(this.get()),stopAsync(this._state,_&&this._lastCallId),raf.batchedUpdates(()=>this._stop(d,_)),this}reset(){this._update({reset:!0})}eventObserved(_){_.type=="change"?this._start():_.type=="priority"&&(this.priority=_.priority+1)}_prepareNode(_){const d=this.key||"";let{to:v,from:A}=_;v=is$1.obj(v)?v[d]:v,(v==null||isAsyncTo(v))&&(v=void 0),A=is$1.obj(A)?A[d]:A,A==null&&(A=void 0);const C={to:v,from:A};return hasAnimated(this)||(_.reverse&&([v,A]=[A,v]),A=getFluidValue(A),is$1.und(A)?getAnimated(this)||this._set(v):this._set(A)),C}_update({..._},d){const{key:v,defaultProps:A}=this;_.default&&Object.assign(A,getDefaultProps(_,(T,R)=>/^on/.test(R)?resolveProp(T,v):T)),mergeActiveFn(this,_,"onProps"),sendEvent(this,"onProps",_,this);const C=this._prepareNode(_);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const w=this._state;return scheduleProps(++this._lastCallId,{key:v,props:_,defaultProps:A,state:w,actions:{pause:()=>{isPaused(this)||(setPausedBit(this,!0),flushCalls(w.pauseQueue),sendEvent(this,"onPause",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},resume:()=>{isPaused(this)&&(setPausedBit(this,!1),isAnimating(this)&&this._resume(),flushCalls(w.resumeQueue),sendEvent(this,"onResume",getFinishedResult(this,checkFinished(this,this.animation.to)),this))},start:this._merge.bind(this,C)}}).then(T=>{if(_.loop&&T.finished&&!(d&&T.noop)){const R=createLoopUpdate(_);if(R)return this._update(R,!0)}return T})}_merge(_,d,v){if(d.cancel)return this.stop(!0),v(getCancelledResult(this));const A=!is$1.und(_.to),C=!is$1.und(_.from);if(A||C)if(d.callId>this._lastToId)this._lastToId=d.callId;else return v(getCancelledResult(this));const{key:w,defaultProps:T,animation:R}=this,{to:G,from:I}=R;let{to:z=G,from:H=I}=_;C&&!A&&(!d.default||is$1.und(z))&&(z=H),d.reverse&&([z,H]=[H,z]);const Y=!isEqual$1(H,I);Y&&(R.from=H),H=getFluidValue(H);const ee=!isEqual$1(z,G);ee&&this._focus(z);const ie=isAsyncTo(d.to),{config:oe}=R,{decay:se,velocity:re}=oe;(A||C)&&(oe.velocity=0),d.config&&!ie&&mergeConfig(oe,callProp(d.config,w),d.config!==T.config?callProp(T.config,w):void 0);let fe=getAnimated(this);if(!fe||is$1.und(z))return v(getFinishedResult(this,!0));const ue=is$1.und(d.reset)?C&&!d.default:!is$1.und(H)&&matchProp(d.reset,w),ge=ue?H:this.get(),ye=computeGoal(z),be=is$1.num(ye)||is$1.arr(ye)||isAnimatedString(ye),ve=!ie&&(!be||matchProp(T.immediate||d.immediate,w));if(ee){const De=getAnimatedType(z);if(De!==fe.constructor)if(ve)fe=this._set(ye);else throw Error(`Cannot animate between ${fe.constructor.name} and ${De.name}, as the "to" prop suggests`)}const Me=fe.constructor;let we=hasFluidValue(z),Be=!1;if(!we){const De=ue||!hasAnimated(this)&&Y;(ee||De)&&(Be=isEqual$1(computeGoal(ge),ye),we=!Be),(!isEqual$1(R.immediate,ve)&&!ve||!isEqual$1(oe.decay,se)||!isEqual$1(oe.velocity,re))&&(we=!0)}if(Be&&isAnimating(this)&&(R.changed&&!ue?we=!0:we||this._stop(G)),!ie&&((we||hasFluidValue(G))&&(R.values=fe.getPayload(),R.toValues=hasFluidValue(z)?null:Me==AnimatedString?[1]:toArray(ye)),R.immediate!=ve&&(R.immediate=ve,!ve&&!ue&&this._set(G)),we)){const{onRest:De}=R;each(ACTIVE_EVENTS,Oe=>mergeActiveFn(this,d,Oe));const Fe=getFinishedResult(this,checkFinished(this,G));flushCalls(this._pendingCalls,Fe),this._pendingCalls.add(v),R.changed&&raf.batchedUpdates(()=>{R.changed=!ue,De?.(Fe,this),ue?callProp(T.onRest,Fe):R.onStart?.(Fe,this)})}ue&&this._set(ge),ie?v(runAsync(d.to,d,this._state,this)):we?this._start():isAnimating(this)&&!ee?this._pendingCalls.add(v):v(getNoopResult(ge))}_focus(_){const d=this.animation;_!==d.to&&(getFluidObservers(this)&&this._detach(),d.to=_,getFluidObservers(this)&&this._attach())}_attach(){let _=0;const{to:d}=this.animation;hasFluidValue(d)&&(addFluidObserver(d,this),isFrameValue(d)&&(_=d.priority+1)),this.priority=_}_detach(){const{to:_}=this.animation;hasFluidValue(_)&&removeFluidObserver(_,this)}_set(_,d=!0){const v=getFluidValue(_);if(!is$1.und(v)){const A=getAnimated(this);if(!A||!isEqual$1(v,A.getValue())){const C=getAnimatedType(v);!A||A.constructor!=C?setAnimated(this,C.create(v)):A.setValue(v),A&&raf.batchedUpdates(()=>{this._onChange(v,d)})}}return getAnimated(this)}_onStart(){const _=this.animation;_.changed||(_.changed=!0,sendEvent(this,"onStart",getFinishedResult(this,checkFinished(this,_.to)),this))}_onChange(_,d){d||(this._onStart(),callProp(this.animation.onChange,_,this)),callProp(this.defaultProps.onChange,_,this),super._onChange(_,d)}_start(){const _=this.animation;getAnimated(this).reset(getFluidValue(_.to)),_.immediate||(_.fromValues=_.values.map(d=>d.lastPosition)),isAnimating(this)||(setActiveBit(this,!0),isPaused(this)||this._resume())}_resume(){globals_exports.skipAnimation?this.finish():frameLoop.start(this)}_stop(_,d){if(isAnimating(this)){setActiveBit(this,!1);const v=this.animation;each(v.values,C=>{C.done=!0}),v.toValues&&(v.onChange=v.onPause=v.onResume=void 0),callFluidObservers(this,{type:"idle",parent:this});const A=d?getCancelledResult(this.get()):getFinishedResult(this.get(),checkFinished(this,_??v.to));flushCalls(this._pendingCalls,A),v.changed&&(v.changed=!1,sendEvent(this,"onRest",A,this))}}};function checkFinished(_,d){const v=computeGoal(d),A=computeGoal(_.get());return isEqual$1(A,v)}function createLoopUpdate(_,d=_.loop,v=_.to){const A=callProp(d);if(A){const C=A!==!0&&inferTo(A),w=(C||_).reverse,T=!C||C.reset;return createUpdate({..._,loop:d,default:!1,pause:void 0,to:!w||isAsyncTo(v)?v:void 0,from:T?_.from:void 0,reset:T,...C})}}function createUpdate(_){const{to:d,from:v}=_=inferTo(_),A=new Set;return is$1.obj(d)&&findDefined(d,A),is$1.obj(v)&&findDefined(v,A),_.keys=A.size?Array.from(A):null,_}function declareUpdate(_){const d=createUpdate(_);return is$1.und(d.default)&&(d.default=getDefaultProps(d)),d}function findDefined(_,d){eachProp(_,(v,A)=>v!=null&&d.add(A))}var ACTIVE_EVENTS=["onStart","onRest","onChange","onPause","onResume"];function mergeActiveFn(_,d,v){_.animation[v]=d[v]!==getDefaultProp(d,v)?resolveProp(d[v],_.key):void 0}function sendEvent(_,d,...v){_.animation[d]?.(...v),_.defaultProps[d]?.(...v)}var BATCHED_EVENTS=["onStart","onChange","onRest"],nextId2=1,Controller$1=class{constructor(d,v){this.id=nextId2++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),v&&(this._flush=v),d&&this.start({default:!0,...d})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(d=>d.idle&&!d.isDelayed&&!d.isPaused)}get item(){return this._item}set item(d){this._item=d}get(){const d={};return this.each((v,A)=>d[A]=v.get()),d}set(d){for(const v in d){const A=d[v];is$1.und(A)||this.springs[v].set(A)}}update(d){return d&&this.queue.push(createUpdate(d)),this}start(d){let{queue:v}=this;return d?v=toArray(d).map(createUpdate):this.queue=[],this._flush?this._flush(this,v):(prepareKeys(this,v),flushUpdateQueue(this,v))}stop(d,v){if(d!==!!d&&(v=d),v){const A=this.springs;each(toArray(v),C=>A[C].stop(!!d))}else stopAsync(this._state,this._lastAsyncId),this.each(A=>A.stop(!!d));return this}pause(d){if(is$1.und(d))this.start({pause:!0});else{const v=this.springs;each(toArray(d),A=>v[A].pause())}return this}resume(d){if(is$1.und(d))this.start({pause:!1});else{const v=this.springs;each(toArray(d),A=>v[A].resume())}return this}each(d){eachProp(this.springs,d)}_onFrame(){const{onStart:d,onChange:v,onRest:A}=this._events,C=this._active.size>0,w=this._changed.size>0;(C&&!this._started||w&&!this._started)&&(this._started=!0,flush(d,([G,I])=>{I.value=this.get(),G(I,this,this._item)}));const T=!C&&this._started,R=w||T&&A.size?this.get():null;w&&v.size&&flush(v,([G,I])=>{I.value=R,G(I,this,this._item)}),T&&(this._started=!1,flush(A,([G,I])=>{I.value=R,G(I,this,this._item)}))}eventObserved(d){if(d.type=="change")this._changed.add(d.parent),d.idle||this._active.add(d.parent);else if(d.type=="idle")this._active.delete(d.parent);else return;raf.onFrame(this._onFrame)}};function flushUpdateQueue(_,d){return Promise.all(d.map(v=>flushUpdate(_,v))).then(v=>getCombinedResult(_,v))}async function flushUpdate(_,d,v){const{keys:A,to:C,from:w,loop:T,onRest:R,onResolve:G}=d,I=is$1.obj(d.default)&&d.default;T&&(d.loop=!1),C===!1&&(d.to=null),w===!1&&(d.from=null);const z=is$1.arr(C)||is$1.fun(C)?C:void 0;z?(d.to=void 0,d.onRest=void 0,I&&(I.onRest=void 0)):each(BATCHED_EVENTS,oe=>{const se=d[oe];if(is$1.fun(se)){const re=_._events[oe];d[oe]=({finished:fe,cancelled:ue})=>{const ge=re.get(se);ge?(fe||(ge.finished=!1),ue&&(ge.cancelled=!0)):re.set(se,{value:null,finished:fe||!1,cancelled:ue||!1})},I&&(I[oe]=d[oe])}});const H=_._state;d.pause===!H.paused?(H.paused=d.pause,flushCalls(d.pause?H.pauseQueue:H.resumeQueue)):H.paused&&(d.pause=!0);const Y=(A||Object.keys(_.springs)).map(oe=>_.springs[oe].start(d)),ee=d.cancel===!0||getDefaultProp(d,"cancel")===!0;(z||ee&&H.asyncId)&&Y.push(scheduleProps(++_._lastAsyncId,{props:d,state:H,actions:{pause:noop$1,resume:noop$1,start(oe,se){ee?(stopAsync(H,_._lastAsyncId),se(getCancelledResult(_))):(oe.onRest=R,se(runAsync(z,oe,H,_)))}}})),H.paused&&await new Promise(oe=>{H.resumeQueue.add(oe)});const ie=getCombinedResult(_,await Promise.all(Y));if(T&&ie.finished&&!(v&&ie.noop)){const oe=createLoopUpdate(d,T,C);if(oe)return prepareKeys(_,[oe]),flushUpdate(_,oe,!0)}return G&&raf.batchedUpdates(()=>G(ie,_,_.item)),ie}function getSprings(_,d){const v={..._.springs};return d&&each(toArray(d),A=>{is$1.und(A.keys)&&(A=createUpdate(A)),is$1.obj(A.to)||(A={...A,to:void 0}),prepareSprings(v,A,C=>createSpring(C))}),setSprings(_,v),v}function setSprings(_,d){eachProp(d,(v,A)=>{_.springs[A]||(_.springs[A]=v,addFluidObserver(v,_))})}function createSpring(_,d){const v=new SpringValue;return v.key=_,d&&addFluidObserver(v,d),v}function prepareSprings(_,d,v){d.keys&&each(d.keys,A=>{(_[A]||(_[A]=v(A)))._prepareNode(d)})}function prepareKeys(_,d){each(d,v=>{prepareSprings(_.springs,v,A=>createSpring(A,_))})}var SpringContext=reactExports.createContext({pause:!1,immediate:!1}),SpringRef=()=>{const _=[],d=function(A){deprecateDirectCall();const C=[];return each(_,(w,T)=>{if(is$1.und(A))C.push(w.start());else{const R=v(A,w,T);R&&C.push(w.start(R))}}),C};d.current=_,d.add=function(A){_.includes(A)||_.push(A)},d.delete=function(A){const C=_.indexOf(A);~C&&_.splice(C,1)},d.pause=function(){return each(_,A=>A.pause(...arguments)),this},d.resume=function(){return each(_,A=>A.resume(...arguments)),this},d.set=function(A){each(_,(C,w)=>{const T=is$1.fun(A)?A(w,C):A;T&&C.set(T)})},d.start=function(A){const C=[];return each(_,(w,T)=>{if(is$1.und(A))C.push(w.start());else{const R=this._getProps(A,w,T);R&&C.push(w.start(R))}}),C},d.stop=function(){return each(_,A=>A.stop(...arguments)),this},d.update=function(A){return each(_,(C,w)=>C.update(this._getProps(A,C,w))),this};const v=function(A,C,w){return is$1.fun(A)?A(w,C):A};return d._getProps=v,d};function useSprings(_,d,v){const A=is$1.fun(d)&&d;A&&!v&&(v=[]);const C=reactExports.useMemo(()=>A||arguments.length==3?SpringRef():void 0,[]),w=reactExports.useRef(0),T=useForceUpdate(),R=reactExports.useMemo(()=>({ctrls:[],queue:[],flush(re,fe){const ue=getSprings(re,fe);return w.current>0&&!R.queue.length&&!Object.keys(ue).some(ye=>!re.springs[ye])?flushUpdateQueue(re,fe):new Promise(ye=>{setSprings(re,ue),R.queue.push(()=>{ye(flushUpdateQueue(re,fe))}),T()})}}),[]),G=reactExports.useRef([...R.ctrls]),I=reactExports.useRef([]);I.current??(I.current=[]);const z=usePrev(_)||0;reactExports.useMemo(()=>{each(G.current.slice(_,z),re=>{detachRefs(re,C),re.stop(!0)}),G.current.length=_,H(z,_)},[_]),reactExports.useMemo(()=>{H(0,Math.min(z,_))},v);function H(re,fe){for(let ue=re;ue<fe;ue++){const ge=G.current[ue]||(G.current[ue]=new Controller$1(null,R.flush)),ye=A?A(ue,ge):d[ue];ye&&(I.current[ue]=declareUpdate(ye))}}const Y=G.current.map((re,fe)=>getSprings(re,I.current[fe])),ee=reactExports.useContext(SpringContext),ie=usePrev(ee),oe=ee!==ie&&hasProps(ee);useIsomorphicLayoutEffect$2(()=>{w.current++,R.ctrls=G.current;const{queue:re}=R;re.length&&(R.queue=[],each(re,fe=>fe())),each(G.current,(fe,ue)=>{C?.add(fe),oe&&fe.start({default:ee});const ge=I.current[ue];ge&&(replaceRef(fe,ge.ref),fe.ref?fe.queue.push(ge):fe.start(ge)),I.current[ue]=null})}),useOnce(()=>()=>{each(R.ctrls,re=>re.stop(!0))});const se=Y.map(re=>({...re}));return C?[se,C]:se}function useSpring(_,d){const v=is$1.fun(_),[[A],C]=useSprings(1,v?_:[_],v?[]:d);return v||arguments.length==2?[A,C]:A}var Interpolation=class extends FrameValue{constructor(_,d){super(),this.source=_,this.idle=!0,this._active=new Set,this.calc=createInterpolator(...d);const v=this._get(),A=getAnimatedType(v);setAnimated(this,A.create(v))}advance(_){const d=this._get(),v=this.get();isEqual$1(d,v)||(getAnimated(this).setValue(d),this._onChange(d,this.idle)),!this.idle&&checkIdle(this._active)&&becomeIdle(this)}_get(){const _=is$1.arr(this.source)?this.source.map(getFluidValue):toArray(getFluidValue(this.source));return this.calc(..._)}_start(){this.idle&&!checkIdle(this._active)&&(this.idle=!1,each(getPayload(this),_=>{_.done=!1}),globals_exports.skipAnimation?(raf.batchedUpdates(()=>this.advance()),becomeIdle(this)):frameLoop.start(this))}_attach(){let _=1;each(toArray(this.source),d=>{hasFluidValue(d)&&addFluidObserver(d,this),isFrameValue(d)&&(d.idle||this._active.add(d),_=Math.max(_,d.priority+1))}),this.priority=_,this._start()}_detach(){each(toArray(this.source),_=>{hasFluidValue(_)&&removeFluidObserver(_,this)}),this._active.clear(),becomeIdle(this)}eventObserved(_){_.type=="change"?_.idle?this.advance():(this._active.add(_.parent),this._start()):_.type=="idle"?this._active.delete(_.parent):_.type=="priority"&&(this.priority=toArray(this.source).reduce((d,v)=>Math.max(d,(isFrameValue(v)?v.priority:0)+1),0))}};function isIdle(_){return _.idle!==!1}function checkIdle(_){return!_.size||Array.from(_).every(isIdle)}function becomeIdle(_){_.idle||(_.idle=!0,each(getPayload(_),d=>{d.done=!0}),callFluidObservers(_,{type:"idle",parent:_}))}var to$1=(_,...d)=>new Interpolation(_,d);globals_exports.assign({createStringInterpolator:createStringInterpolator2,to:(_,d)=>new Interpolation(_,d)});var isCustomPropRE=/^--/;function dangerousStyleValue(_,d){return d==null||typeof d=="boolean"||d===""?"":typeof d=="number"&&d!==0&&!isCustomPropRE.test(_)&&!(isUnitlessNumber.hasOwnProperty(_)&&isUnitlessNumber[_])?d+"px":(""+d).trim()}var attributeCache={};function applyAnimatedValues(_,d){if(!_.nodeType||!_.setAttribute)return!1;const v=_.nodeName==="filter"||_.parentNode&&_.parentNode.nodeName==="filter",{className:A,style:C,children:w,scrollTop:T,scrollLeft:R,viewBox:G,...I}=d,z=Object.values(I),H=Object.keys(I).map(Y=>v||_.hasAttribute(Y)?Y:attributeCache[Y]||(attributeCache[Y]=Y.replace(/([A-Z])/g,ee=>"-"+ee.toLowerCase())));w!==void 0&&(_.textContent=w);for(const Y in C)if(C.hasOwnProperty(Y)){const ee=dangerousStyleValue(Y,C[Y]);isCustomPropRE.test(Y)?_.style.setProperty(Y,ee):_.style[Y]=ee}H.forEach((Y,ee)=>{_.setAttribute(Y,z[ee])}),A!==void 0&&(_.className=A),T!==void 0&&(_.scrollTop=T),R!==void 0&&(_.scrollLeft=R),G!==void 0&&_.setAttribute("viewBox",G)}var isUnitlessNumber={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},prefixKey=(_,d)=>_+d.charAt(0).toUpperCase()+d.substring(1),prefixes=["Webkit","Ms","Moz","O"];isUnitlessNumber=Object.keys(isUnitlessNumber).reduce((_,d)=>(prefixes.forEach(v=>_[prefixKey(v,d)]=_[d]),_),isUnitlessNumber);var domTransforms=/^(matrix|translate|scale|rotate|skew)/,pxTransforms=/^(translate)/,degTransforms=/^(rotate|skew)/,addUnit=(_,d)=>is$1.num(_)&&_!==0?_+d:_,isValueIdentity=(_,d)=>is$1.arr(_)?_.every(v=>isValueIdentity(v,d)):is$1.num(_)?_===d:parseFloat(_)===d,AnimatedStyle=class extends AnimatedObject{constructor({x:_,y:d,z:v,...A}){const C=[],w=[];(_||d||v)&&(C.push([_||0,d||0,v||0]),w.push(T=>[`translate3d(${T.map(R=>addUnit(R,"px")).join(",")})`,isValueIdentity(T,0)])),eachProp(A,(T,R)=>{if(R==="transform")C.push([T||""]),w.push(G=>[G,G===""]);else if(domTransforms.test(R)){if(delete A[R],is$1.und(T))return;const G=pxTransforms.test(R)?"px":degTransforms.test(R)?"deg":"";C.push(toArray(T)),w.push(R==="rotate3d"?([I,z,H,Y])=>[`rotate3d(${I},${z},${H},${addUnit(Y,G)})`,isValueIdentity(Y,0)]:I=>[`${R}(${I.map(z=>addUnit(z,G)).join(",")})`,isValueIdentity(I,R.startsWith("scale")?1:0)])}}),C.length&&(A.transform=new FluidTransform(C,w)),super(A)}},FluidTransform=class extends FluidValue{constructor(_,d){super(),this.inputs=_,this.transforms=d,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let _="",d=!0;return each(this.inputs,(v,A)=>{const C=getFluidValue(v[0]),[w,T]=this.transforms[A](is$1.arr(C)?C:v.map(getFluidValue));_+=" "+w,d=d&&T}),d?"none":_}observerAdded(_){_==1&&each(this.inputs,d=>each(d,v=>hasFluidValue(v)&&addFluidObserver(v,this)))}observerRemoved(_){_==0&&each(this.inputs,d=>each(d,v=>hasFluidValue(v)&&removeFluidObserver(v,this)))}eventObserved(_){_.type=="change"&&(this._value=null),callFluidObservers(this,_)}},primitives=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];globals_exports.assign({batchedUpdates:reactDomExports.unstable_batchedUpdates,createStringInterpolator:createStringInterpolator2,colors:colors2});var host=createHost(primitives,{applyAnimatedValues,createAnimatedStyle:_=>new AnimatedStyle(_),getComponentProps:({scrollTop:_,scrollLeft:d,...v})=>v}),animated=host.animated;const heartImage="/icons/heart.png";var AuthState=(_=>(_[_.INIT=0]="INIT",_[_.LOADING=1]="LOADING",_[_.SUCCESS=2]="SUCCESS",_[_.NO_ACCESS=3]="NO_ACCESS",_[_.FAILED=4]="FAILED",_[_.NEED_AUTH=5]="NEED_AUTH",_))(AuthState||{}),ShopMode=(_=>(_[_.STARS=0]="STARS",_[_.TON=1]="TON",_))(ShopMode||{}),AppMode=(_=>(_[_.MINIAPP=0]="MINIAPP",_[_.WEB=1]="WEB",_))(AppMode||{});const capImage$1="/cap.png",capImage="/cap.svg",capWithoutTitle="/cap-without-title.png",explosionImage$1="/explosion.png",explosionImage="/explosion-cropped.png",bgCapEpicImage="/bg-cap-epic.png",bgCapRareImage="/bg-cap-rare.png",bgCommonImage="/bg-common.png",bgNumberImage="/bg-number.png",bgVsxImage="/bg-vsx.png",bgHomeImage="/bg-home.jpg",files=["/icons/armageddon.png","/icons/backpack.png","/icons/badge-pack.png","/icons/battle.png","/icons/bonus-heal.png","/icons/bonus-health.png","/icons/bonus-power.png","/icons/booster-max-attack.png","/icons/booster-max-heal.png","/icons/booster-skip-counter-attack.png","/icons/boosters-task.png","/icons/boosters.png","/icons/cap-burned.png","/icons/cap-common.png","/icons/cap-diamond.png","/icons/cap-epic.png","/icons/cap-legend.png","/icons/cap-rare.png","/icons/caps-1.png","/icons/caps-2.png","/icons/caps-3.png","/icons/caps.png","/icons/cassette.png","/icons/clear.svg","/icons/clock.png","/icons/completed.png","/icons/cross.png","/icons/cross.svg","/icons/daolama.png","/icons/diamond.png","/icons/discount.png","/icons/disk-1.png","/icons/disk-2.png","/icons/disk-3.png","/icons/disk-4.png","/icons/disk-5.png","/icons/disk-drive.png","/icons/dot.svg","/icons/duckygram.png","/icons/easter.png","/icons/en.png","/icons/energy-full.png","/icons/energy-low.png","/icons/exchange.png","/icons/faction-arrows.png","/icons/fanton.png","/icons/finger.png","/icons/fire.png","/icons/floppy.png","/icons/goblet-all.png","/icons/goblet-bronze.png","/icons/goblet-diamond.png","/icons/goblet-gold.png","/icons/goblet-iron.png","/icons/goblet-platinum.png","/icons/goblet-season.png","/icons/goblet-silver.png","/icons/gum-lose.png","/icons/gum-small.png","/icons/gum-win.png","/icons/gum.png","/icons/gums.png","/icons/hands.png","/icons/hashtag.svg","/icons/heart.png","/icons/home.png","/icons/insert.png","/icons/lightning-color.png","/icons/lightning-gray.svg","/icons/lightning.svg","/icons/lock-grey.svg","/icons/lock.png","/icons/madness.png","/icons/memhustle-rocket.png","/icons/memhustle.png","/icons/money.png","/icons/next.svg","/icons/nft.png","/icons/notcoin.png","/icons/notpunks-old.png","/icons/notpunks.png","/icons/nutsfarm.png","/icons/nutsfarmTasks.png","/icons/packs.png","/icons/plus-green.svg","/icons/plus-red.svg","/icons/plus-start.svg","/icons/plus.svg","/icons/prev.svg","/icons/prize.png","/icons/profile.png","/icons/question.svg","/icons/rampage.png","/icons/refresh-emoji.png","/icons/refresh.svg","/icons/robot.png","/icons/ru.png","/icons/sad.png","/icons/sell.png","/icons/settings.svg","/icons/shop.png","/icons/shopping-bags.png","/icons/sold-out.png","/icons/sound-off.png","/icons/sound-on.png","/icons/spinner.svg","/icons/squad-bank.png","/icons/staked-coin.png","/icons/staked.png","/icons/staking-info.png","/icons/staking.png","/icons/star.png","/icons/starter-pack.png","/icons/swap.svg","/icons/switch-horizontal.svg","/icons/ticket.png","/icons/tickets.png","/icons/ton.png","/icons/tonfestival.png","/icons/tonstation.png","/icons/topup.svg","/icons/trendingapps.png","/icons/ultimate.png","/icons/users-plus.svg","/icons/vs.png","/icons/wallet.png","/icons/withdraw-transaction.svg","/icons/withdraw.svg","/icons/x.svg","/packs/bottom-bg.svg","/packs/cap-diamond.png","/packs/cap-epic.png","/packs/cap-legend.png","/packs/cap-rare.png","/packs/pack-common.png","/packs/pack-duckygram.png","/packs/pack-epic.png","/packs/pack-memhustle.png","/packs/pack-rare.png","/packs/pack-tonsters.png","/packs/starter-boosters.png","/packs/starter-gum.png","/packs/starter-pack.png"],imageSrc=[...files,capImage$1,capImage,capWithoutTitle,explosionImage$1,explosionImage,bgCapEpicImage,bgCapRareImage,bgCommonImage,bgNumberImage,bgVsxImage,bgHomeImage],preloadPromise=_=>!_||_.length===0?Promise.resolve():new Promise(d=>{let v=0;_.forEach(A=>{const C=new Image;C.onload=()=>{v++,v===_.length&&d()},C.onerror=()=>{console.error(`Failed to load image: ${A}`),d()},C.src=A})});var eruda$1={exports:{}};/*! eruda v3.4.3 https://eruda.liriliri.io/ */var hasRequiredEruda;function requireEruda(){return hasRequiredEruda||(hasRequiredEruda=1,function(module,exports){(function(_,d){module.exports=d()})(self,function(){return function(){var __webpack_modules__={8:function(_,d){d=function(w){var T,R,G=w[0]/255,I=w[1]/255,z=w[2]/255,H=v(G,I,z),Y=A(G,I,z),ee=Y-H;(T=v(60*(T=Y===H?0:G===Y?(I-z)/ee:I===Y?2+(z-G)/ee:4+(G-I)/ee),360))<0&&(T+=360);var ie=(H+Y)/2;R=Y===H?0:ie<=.5?ee/(Y+H):ee/(2-Y-H);var oe=[C(T),C(100*R),C(100*ie)];return w[3]&&(oe[3]=w[3]),oe};var v=Math.min,A=Math.max,C=Math.round;_.exports=d},15:function(_,d,v){var A=v(5651),C=v(8971);d=function(T,R){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};A(G,w);var I=G.ellipsis,z=G.separator;if(R>T.length)return T;var H=R-I.length;if(H<1)return I;var Y=T.slice(0,H);if(C(z))return Y+I;if(T.indexOf(z,H)!==H){var ee=Y.lastIndexOf(z);ee>-1&&(Y=Y.slice(0,ee))}return Y+I};var w={ellipsis:"..."};_.exports=d},21:function(_,d,v){var A=v(2717),C=v(1738),w=v(9100),T=v(8178),R=new(d=A({className:"Select",initialize:function(G){return this.length=0,G?C(G)?R.find(G):void(G.nodeType&&(this[0]=G,this.length=1)):this},find:function(G){var I=new d;return this.each(function(){T(I,this.querySelectorAll(G))}),I},each:function(G){return w(this,function(I,z){G.call(I,z,I)}),this}}))(document);_.exports=d},96:function(_,d,v){var A=v(2561);d=function(C){return A(C).toLocaleLowerCase()},_.exports=d},128:function(_,d,v){v.d(d,{A:function(){return Jn}});var A=v(3029),C=v(2901),w=v(388),T=v(3954),R=v(5361),G=v(3915),I=v.n(G),z=v(6097),H=v.n(z),Y=v(1738),ee=v.n(Y),ie=v(4994),oe=v.n(ie),se=v(9405),re=v.n(se),fe=v(5169),ue=v.n(fe),ge=v(9548),ye=v.n(ge),be=v(3249),ve=v.n(be),Me=v(6030),we=v.n(Me),Be=v(5004),De=v.n(Be);v(9410),v(8609);function Fe(Xn){var jn="luna-".concat(Xn,"-");function Un(bn){return I()(re()(bn).split(/\s+/),function(Kn){return ve()(Kn,jn)?Kn:Kn.replace(/[\w-]+/,function(Qn){return"".concat(jn).concat(Qn)})}).join(" ")}return function(bn){if(/<[^>]*>/g.test(bn))try{var Kn=ye().parse(bn);return Oe(Kn,function(Qn){Qn.attrs&&Qn.attrs.class&&(Qn.attrs.class=Un(Qn.attrs.class))}),ye().stringify(Kn)}catch{return Un(bn)}return Un(bn)}}function Oe(Xn,jn){for(var Un=0,bn=Xn.length;Un<bn;Un++){var Kn=Xn[Un];jn(Kn),Kn.content&&Oe(Kn.content,jn)}}ue();function Ge(Xn){return we()(Xn.replace("px",""))}var ze=v(2263),je=v.n(ze),He=v(3693),Xe=v.n(He),$e=v(9100),We=v.n($e),nt=v(8105),Qt=v.n(nt),Wt=v(5651),Bn=v.n(Wt),Lt=v(961),Mn=v.n(Lt),cr=v(7e3),In=v.n(cr),Zn=v(1009),$n=v.n(Zn);function Rn(){try{var Xn=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rn=function(){return!!Xn})()}var Dn=function(Xn){function jn(Un,bn){var Kn,Qn,pr=bn.compName,fn=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Mt=fn===void 0?"light":fn;return(0,A.A)(this,jn),Kn=function(yn,kn,nr){return kn=(0,T.A)(kn),(0,w.A)(yn,Rn()?Reflect.construct(kn,[],(0,T.A)(yn).constructor):kn.apply(yn,nr))}(this,jn),Kn.subComponents=[],Kn.theme="",Kn.onThemeChange=function(yn){Kn.options.theme==="auto"&&Kn.setTheme(yn)},Kn.compName=pr,Kn.c=Fe(pr),Kn.options={},Kn.container=Un,Kn.$container=Xe()(Un),Kn.$container.addClass(["luna-".concat(pr),Kn.c("platform-".concat((Qn=De()(),Qn==="os x"?"mac":Qn)))]),Kn.on("changeOption",function(yn,kn){if(yn==="theme"&&kn){var nr=kn;kn==="auto"&&(nr=In().get()),Kn.setTheme(nr),We()(Kn.subComponents,function(dr){return dr.setOption("theme",kn)})}}),In().on("change",Kn.onThemeChange),Kn.setOption("theme",Mt),Kn}return(0,R.A)(jn,Xn),(0,C.A)(jn,[{key:"destroy",value:function(){var Un=this;this.destroySubComponents();var bn=this.$container,Kn=bn.attr("class");We()(Kn.split(/\s+/),function(Qn){$n()(Qn,"luna-".concat(Un.compName))&&bn.rmClass(Qn)}),bn.html(""),this.emit("destroy"),this.removeAllListeners(),In().off("change",this.onThemeChange)}},{key:"setOption",value:function(Un,bn){var Kn=this,Qn=this.options,pr={};typeof Un=="string"?pr[Un]=bn:pr=Un,We()(pr,function(fn,Mt){var yn=Qn[Mt];Qn[Mt]=fn,fn!==yn&&Kn.emit("changeOption",Mt,fn,yn)})}},{key:"getOption",value:function(Un){return this.options[Un]}},{key:"addSubComponent",value:function(Un){Un.setOption("theme",this.options.theme),this.subComponents.push(Un)}},{key:"removeSubComponent",value:function(Un){Mn()(this.subComponents,function(bn){return bn===Un})}},{key:"destroySubComponents",value:function(){We()(this.subComponents,function(Un){return Un.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Un){var bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Bn()(Un,bn),Qt()(this.options,Un)}},{key:"find",value:function(Un){return this.$container.find(this.c(Un))}},{key:"setTheme",value:function(Un){var bn=this.c,Kn=this.$container;this.theme&&Kn.rmClass(bn("theme-".concat(this.theme))),Kn.addClass(bn("theme-".concat(Un))),this.theme=Un}}])}(je());function Gt(){try{var Xn=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gt=function(){return!!Xn})()}_=v.hmd(_);var Jn=function(Xn){function jn(Un){var bn,Kn,Qn,pr,fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,A.A)(this,jn),Kn=this,Qn=jn,pr=[Un,{compName:"box-model"}],Qn=(0,T.A)(Qn),(bn=(0,w.A)(Kn,Gt()?Reflect.construct(Qn,pr||[],(0,T.A)(Kn).constructor):Qn.apply(Kn,pr))).initOptions(fn),bn.options.element&&bn.render(),bn.bindEvent(),bn}return(0,R.A)(jn,Xn),(0,C.A)(jn,[{key:"bindEvent",value:function(){var Un=this;this.on("changeOption",function(bn){bn==="element"&&Un.render()})}},{key:"render",value:function(){var Un=this,bn=this.c,Kn=this.$container,Qn=this.getBoxModelData();Kn.html([Qn.position?'<div class="'.concat(bn("position"),'">'):"",Qn.position?'<div class="'.concat(bn("label"),'">position</div><div class="').concat(bn("top"),'">').concat(Qn.position.top,'</div><br><div class="').concat(bn("left"),'">').concat(Qn.position.left,"</div>"):"",'<div class="'.concat(bn("margin"),'">'),'<div class="'.concat(bn("label"),'">margin</div><div class="').concat(bn("top"),'">').concat(Qn.margin.top,'</div><br><div class="').concat(bn("left"),'">').concat(Qn.margin.left,"</div>"),'<div class="'.concat(bn("border"),'">'),'<div class="'.concat(bn("label"),'">border</div><div class="').concat(bn("top"),'">').concat(Qn.border.top,'</div><br><div class="').concat(bn("left"),'">').concat(Qn.border.left,"</div>"),'<div class="'.concat(bn("padding"),'">'),'<div class="'.concat(bn("label"),'">padding</div><div class="').concat(bn("top"),'">').concat(Qn.padding.top,'</div><br><div class="').concat(bn("left"),'">').concat(Qn.padding.left,"</div>"),'<div class="'.concat(bn("content"),'">'),"<span>".concat(Qn.content.width,"</span>&nbsp;&nbsp;<span>").concat(Qn.content.height,"</span>"),"</div>",'<div class="'.concat(bn("right"),'">').concat(Qn.padding.right,'</div><br><div class="').concat(bn("bottom"),'">').concat(Qn.padding.bottom,"</div>"),"</div>",'<div class="'.concat(bn("right"),'">').concat(Qn.border.right,'</div><br><div class="').concat(bn("bottom"),'">').concat(Qn.border.bottom,"</div>"),"</div>",'<div class="'.concat(bn("right"),'">').concat(Qn.margin.right,'</div><br><div class="').concat(bn("bottom"),'">').concat(Qn.margin.bottom,"</div>"),"</div>",Qn.position?'<div class="'.concat(bn("right"),'">').concat(Qn.position.right,'</div><br><div class="').concat(bn("bottom"),'">').concat(Qn.position.bottom,"</div>"):"",Qn.position?"</div>":""].join(""));var pr=this.find(".margin"),fn=this.find(".border"),Mt=this.find(".padding"),yn=this.find(".content"),kn=function(){pr.addClass(bn("highlighted")),fn.addClass(bn("highlighted")),Mt.addClass(bn("highlighted")),yn.addClass(bn("highlighted"))};kn();var nr=function(Hr){var Kr;switch(Un.find(".highlighted").rmClass(bn("highlighted")),Hr){case"margin":Kr=pr;break;case"border":Kr=fn;break;case"padding":Kr=Mt;break;default:Kr=yn}Kr.addClass(bn("highlighted")),Un.emit("highlight",Hr)},dr=oe()(nr,this,"margin"),Qr=oe()(nr,this,"border"),Wr=oe()(nr,this,"padding"),Gr=oe()(nr,this,"content");pr.on("mouseenter",dr).on("mouseleave",function(){kn(),Un.emit("highlight","all")}),fn.on("mouseenter",Qr).on("mouseleave",dr),Mt.on("mouseenter",Wr).on("mouseleave",Qr),yn.on("mouseenter",Gr).on("mouseleave",Wr)}},{key:"getBoxModelData",value:function(){var Un=this.options.element,bn=window.getComputedStyle(Un);function Kn(dr){var Qr=["top","left","right","bottom"];return dr!=="position"&&(Qr=I()(Qr,function(Wr){return"".concat(dr,"-").concat(Wr)})),dr==="border"&&(Qr=I()(Qr,function(Wr){return"".concat(Wr,"-width")})),{top:Nn(bn[Qr[0]],dr),left:Nn(bn[Qr[1]],dr),right:Nn(bn[Qr[2]],dr),bottom:Nn(bn[Qr[3]],dr)}}var Qn,pr,fn,Mt,yn,kn,nr={margin:Kn("margin"),border:Kn("border"),padding:Kn("padding"),content:(Qn=Un,pr=window.getComputedStyle(Qn),fn=Ge(pr.paddingLeft)+Ge(pr.paddingRight),Mt=Ge(pr.paddingTop)+Ge(pr.paddingBottom),yn=Ge(pr.borderLeftWidth)+Ge(pr.borderRightWidth),kn=Ge(pr.borderTopWidth)+Ge(pr.borderBottomWidth),{width:Nn(Qn.offsetWidth-fn-yn),height:Nn(Qn.offsetHeight-Mt-kn)})};return bn.position!=="static"&&(nr.position=Kn("position")),nr}}])}(Dn);function Nn(Xn,jn){if(H()(Xn))return Xn;if(!ee()(Xn))return"";var Un=Ge(Xn);return isNaN(Un)?Xn:jn==="position"?Un:Un===0?"":Un}(function(Xn,jn){try{Xn.exports=jn,Xn.exports.default=jn}catch{}})(_,Jn)},162:function(_,d){var v=this&&this.__values||function(I){var z=typeof Symbol=="function"&&Symbol.iterator,H=z&&I[z],Y=0;if(H)return H.call(I);if(I&&typeof I.length=="number")return{next:function(){return I&&Y>=I.length&&(I=void 0),{value:I&&I[Y++],done:!I}}};throw new TypeError(z?"Object is not iterable.":"Symbol.iterator is not defined.")},A=this&&this.__read||function(I,z){var H=typeof Symbol=="function"&&I[Symbol.iterator];if(!H)return I;var Y,ee,ie=H.call(I),oe=[];try{for(;(z===void 0||z-- >0)&&!(Y=ie.next()).done;)oe.push(Y.value)}catch(se){ee={error:se}}finally{try{Y&&!Y.done&&(H=ie.return)&&H.call(ie)}finally{if(ee)throw ee.error}}return oe},C=this&&this.__spreadArray||function(I,z,H){if(H||arguments.length===2)for(var Y,ee=0,ie=z.length;ee<ie;ee++)!Y&&ee in z||(Y||(Y=Array.prototype.slice.call(z,0,ee)),Y[ee]=z[ee]);return I.concat(Y||Array.prototype.slice.call(z))};Object.defineProperty(d,"__esModule",{value:!0}),d.adoptStyleSheet=d.constrainNumber=d.ellipsify=d.createElement=d.createTextChild=d.createChild=d.log=d.Overlay=void 0;var w=function(){function I(z,H){H===void 0&&(H=[]),this.viewportSize={width:800,height:600},this.deviceScaleFactor=1,this.emulationScaleFactor=1,this.pageScaleFactor=1,this.pageZoomFactor=1,this.scrollX=0,this.scrollY=0,this.canvasWidth=0,this.canvasHeight=0,this._installed=!1,this._window=z,this._document=z.document,Array.isArray(H)||(H=[H]),this.style=H}return I.prototype.setCanvas=function(z){this.canvas=z,this._context=z.getContext("2d")},I.prototype.install=function(){var z,H;try{for(var Y=v(this.style),ee=Y.next();!ee.done;ee=Y.next())G(ee.value)}catch(ie){z={error:ie}}finally{try{ee&&!ee.done&&(H=Y.return)&&H.call(Y)}finally{if(z)throw z.error}}this._installed=!0},I.prototype.uninstall=function(){var z,H,Y=function(oe){document.adoptedStyleSheets=document.adoptedStyleSheets.filter(function(se){return se!==oe})};try{for(var ee=v(this.style),ie=ee.next();!ie.done;ie=ee.next())Y(ie.value)}catch(oe){z={error:oe}}finally{try{ie&&!ie.done&&(H=ee.return)&&H.call(ee)}finally{if(z)throw z.error}}this._installed=!1},I.prototype.reset=function(z){z&&(this.viewportSize=z.viewportSize,this.visualViewportSize=z.visualViewportSize,this.deviceScaleFactor=z.deviceScaleFactor,this.pageScaleFactor=z.pageScaleFactor,this.pageZoomFactor=z.pageZoomFactor,this.emulationScaleFactor=z.emulationScaleFactor,this.scrollX=Math.round(z.scrollX),this.scrollY=Math.round(z.scrollY)),this.resetCanvas()},I.prototype.resetCanvas=function(){this.canvas&&this._context&&(this.canvas.width=this.deviceScaleFactor*this.viewportSize.width,this.canvas.height=this.deviceScaleFactor*this.viewportSize.height,this.canvas.style.width=this.viewportSize.width+"px",this.canvas.style.height=this.viewportSize.height+"px",this._context.scale(this.deviceScaleFactor,this.deviceScaleFactor),this.canvasWidth=this.viewportSize.width,this.canvasHeight=this.viewportSize.height)},I.prototype.setPlatform=function(z){this.platform=z,this._installed||this.install()},I.prototype.dispatch=function(z){this[z.shift()].apply(this,z)},I.prototype.eventHasCtrlOrMeta=function(z){return this.platform==="mac"?z.metaKey&&!z.ctrlKey:z.ctrlKey&&!z.metaKey},Object.defineProperty(I.prototype,"context",{get:function(){if(!this._context)throw new Error("Context object is missing");return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"document",{get:function(){if(!this._document)throw new Error("Document object is missing");return this._document},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"window",{get:function(){if(!this._window)throw new Error("Window object is missing");return this._window},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"installed",{get:function(){return this._installed},enumerable:!1,configurable:!0}),I}();function T(I,z,H){var Y=R(z,H);return Y.addEventListener("click",function(ee){ee.stopPropagation()},!1),I.appendChild(Y),Y}function R(I,z){var H=document.createElement(I);if(z){var Y=z.split(/\s+/);Y=Y.map(function(ee){return"luna-dom-highlighter-"+ee}),H.className=Y.join(" ")}return H}function G(I){document.adoptedStyleSheets=C(C([],A(document.adoptedStyleSheets),!1),[I],!1)}d.Overlay=w,d.log=function(I){var z=document.getElementById("log");z||((z=T(document.body,"div")).id="log"),T(z,"div").textContent=I},d.createChild=T,d.createTextChild=function(I,z){var H=document.createTextNode(z);return I.appendChild(H),H},d.createElement=R,d.ellipsify=function(I,z){return I.length<=z?String(I):I.substr(0,z-1)+""},d.constrainNumber=function(I,z,H){return I<z?I=z:I>H&&(I=H),I},d.adoptStyleSheet=G},187:function(_,d,v){(d=v(6314)(!1)).push([_.id,'.luna-setting{min-width:320px;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-setting .luna-setting-hidden,.luna-setting.luna-setting-hidden{display:none}.luna-setting .luna-setting-invisible,.luna-setting.luna-setting-invisible{visibility:hidden}.luna-setting *{box-sizing:border-box}.luna-setting.luna-setting-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-setting-item.luna-setting-selected:focus{outline:1px solid}.luna-setting-item .luna-setting-title{line-height:1.4em;font-weight:600}.luna-setting-item .luna-setting-description,.luna-setting-item.luna-setting-item-markdown{line-height:1.4em}.luna-setting-item .luna-setting-description *,.luna-setting-item.luna-setting-item-markdown *{margin:0}.luna-setting-item .luna-setting-description strong,.luna-setting-item.luna-setting-item-markdown strong{font-weight:600}.luna-setting-item .luna-setting-description a,.luna-setting-item.luna-setting-item-markdown a{background-color:rgba(0,0,0,0);text-decoration:none}.luna-setting-item .luna-setting-control,.luna-setting-item .luna-setting-description{font-size:12px}.luna-setting-item .luna-setting-description{margin-bottom:8px}.luna-setting-item .luna-setting-control{display:flex;align-items:center}.luna-setting-item-button,.luna-setting-item-checkbox,.luna-setting-item-input,.luna-setting-item-markdown,.luna-setting-item-number,.luna-setting-item-select,.luna-setting-item-title{padding:10px}.luna-setting-item-title{font-weight:600}.luna-setting-item-title.luna-setting-level-1{font-size:18px}.luna-setting-item-title.luna-setting-level-2{font-size:16px}.luna-setting-item-title.luna-setting-level-3{font-size:14px}.luna-setting-item-input.luna-setting-disabled input{opacity:.6}.luna-setting-item-input input{-webkit-tap-highlight-color:transparent;color:rgba(0,0,0,.88);-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;outline:0;padding:2px 8px;border-radius:2px;font-size:14px;width:100%}.luna-setting-item-number.luna-setting-disabled .luna-setting-range-container,.luna-setting-item-number.luna-setting-disabled input{opacity:.6}.luna-setting-item-number.luna-setting-disabled .luna-setting-range-container input{opacity:1}.luna-setting-item-number input[type=number]{-webkit-tap-highlight-color:transparent;color:rgba(0,0,0,.88);-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;outline:0;padding:2px 8px;border-radius:2px;font-size:14px;width:200px;padding:2px}.luna-setting-item-number .luna-setting-range-container{flex:2;position:relative;top:1px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track{height:4px;width:100%;padding:0 10px;position:absolute;left:0;top:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{border-radius:2px;overflow:hidden;width:100%;height:4px}.luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{height:100%;width:50%}.luna-setting-item-number .luna-setting-range-container input{-webkit-appearance:none;background:rgba(0,0,0,0);height:4px;width:100%;position:relative;top:-3px;margin:0 auto;outline:0;border-radius:2px}.luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{-webkit-appearance:none;position:relative;top:0;z-index:1;width:16px;border:none;height:16px;border-radius:10px;border:1px solid}.luna-setting-item-checkbox.luna-setting-disabled .luna-setting-control{opacity:.6}.luna-setting-item-checkbox input{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:14px;height:14px;border:1px solid;border-radius:0;position:relative;outline:0;margin-left:0;margin-right:8px;transition:background-color .1s;align-self:flex-start;flex-shrink:0}.luna-setting-item-checkbox input:checked:after{content:"";width:100%;height:100%;position:absolute;left:0;top:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9JzMwMHB4JyB3aWR0aD0nMzAwcHgnICBmaWxsPSIjZmZmZmZmIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCI+PHRpdGxlPmljb25fYnlfUG9zaGx5YWtvdjEwPC90aXRsZT48ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz48ZyBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyBmaWxsPSIjZmZmZmZmIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi4wMDAwMDAsIDI2LjAwMDAwMCkiPjxwYXRoIGQ9Ik0xNy45OTk5ODc4LDMyLjQgTDEwLjk5OTk4NzgsMjUuNCBDMTAuMjI2Nzg5MSwyNC42MjY4MDE0IDguOTczMTg2NDQsMjQuNjI2ODAxNCA4LjE5OTk4Nzc5LDI1LjQgTDguMTk5OTg3NzksMjUuNCBDNy40MjY3ODkxNCwyNi4xNzMxOTg2IDcuNDI2Nzg5MTQsMjcuNDI2ODAxNCA4LjE5OTk4Nzc5LDI4LjIgTDE2LjU4NTc3NDIsMzYuNTg1Nzg2NCBDMTcuMzY2ODIyOCwzNy4zNjY4MzUgMTguNjMzMTUyOCwzNy4zNjY4MzUgMTkuNDE0MjAxNCwzNi41ODU3ODY0IEw0MC41OTk5ODc4LDE1LjQgQzQxLjM3MzE4NjQsMTQuNjI2ODAxNCA0MS4zNzMxODY0LDEzLjM3MzE5ODYgNDAuNTk5OTg3OCwxMi42IEw0MC41OTk5ODc4LDEyLjYgQzM5LjgyNjc4OTEsMTEuODI2ODAxNCAzOC41NzMxODY0LDExLjgyNjgwMTQgMzcuNzk5OTg3OCwxMi42IEwxNy45OTk5ODc4LDMyLjQgWiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==);background-size:30px;background-repeat:no-repeat;background-position:center}.luna-setting-item-checkbox label{-webkit-tap-highlight-color:transparent}.luna-setting-item-checkbox label *{margin:0}.luna-setting-item-select.luna-setting-disabled .luna-setting-select{opacity:.6}.luna-setting-item-select .luna-setting-select{position:relative}.luna-setting-item-select .luna-setting-select select{margin:0;font-size:14px;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:1px solid;padding:2px 8px;padding-right:18px;outline:0;border-radius:2px;-webkit-tap-highlight-color:transparent}.luna-setting-item-select .luna-setting-select:after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:0;bottom:0;right:6px;margin:auto;pointer-events:none}.luna-setting-item-select .luna-setting-select select{width:300px}.luna-setting-item-button button{-webkit-tap-highlight-color:transparent;border:1px solid;padding:2px 8px;font-size:14px;border-radius:2px}.luna-setting-item-button button:active{border:1px solid}.luna-setting-item-separator{border-bottom:1px solid}.luna-setting-theme-light .luna-setting-item.luna-setting-selected,.luna-setting-theme-light .luna-setting-item:hover{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-setting-theme-light .luna-setting-item.luna-setting-selected:focus{outline-color:#1a73e8;outline-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item .luna-setting-description a,.luna-setting-theme-light .luna-setting-item.luna-setting-item-markdown a{color:#1a73e8;color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-separator{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-input input{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-checkbox input{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-checkbox input:checked{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8);border-color:#1a73e8;border-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-select .luna-setting-select select{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-select .luna-setting-select:after{border-top-color:rgba(0,0,0,.88);border-top-color:var(--luna-color-text,rgba(0,0,0,.88))}.luna-setting-theme-light .luna-setting-item-button button{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);color:#1a73e8;color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-button button:active,.luna-setting-theme-light .luna-setting-item-button button:hover{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-setting-theme-light .luna-setting-item-button button:active{border-color:#1a73e8;border-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-number input[type=number]{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background-color:#d9d9d9;background-color:var(--luna-color-border,#d9d9d9)}.luna-setting-theme-light .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-setting-theme-light .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);background:radial-gradient(circle at center,#eee 0,#eee 15%,#fff 22%,#fff 100%)}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected,.luna-setting-theme-dark .luna-setting-item:hover{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-setting-theme-dark .luna-setting-item.luna-setting-selected:focus{outline-color:#1965c8;outline-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item .luna-setting-description a,.luna-setting-theme-dark .luna-setting-item.luna-setting-item-markdown a{color:#1965c8;color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-separator{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-input input{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-checkbox input{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-checkbox input:checked{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8);border-color:#1965c8;border-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select select{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-select .luna-setting-select:after{border-top-color:hsla(0,0%,100%,.85);border-top-color:var(--luna-color-text,rgba(255,255,255,.85))}.luna-setting-theme-dark .luna-setting-item-button button{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);border-color:#424242;border-color:var(--luna-color-border,#424242);color:#1965c8;color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-button button:active,.luna-setting-theme-dark .luna-setting-item-button button:hover{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-setting-theme-dark .luna-setting-item-button button:active{border-color:#1965c8;border-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-number input[type=number]{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background-color:#424242;background-color:var(--luna-color-border,#424242)}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}.luna-setting-theme-dark .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:#424242;border-color:var(--luna-color-border,#424242);background:radial-gradient(circle at center,#aaa 0,#aaa 15%,#ccc 22%,#ccc 100%)}',""]),_.exports=d},199:function(_,d,v){var A=v(3089),C=v(7468);d=function(w){return w=A({},w),function(T){return C(T,w)}},_.exports=d},282:function(_,d,v){var A=v(438),C=v(9405),w=v(3915),T=v(769);d=function(G){var I=T(G.match(R));return A(w(I,function(z){return C(z)}))};var R=/((https?)|(ftp)):\/\/[\w.]+[^ \f\n\r\t\v"\\<>[\]\u2100-\uFFFF(),]*/gi;_.exports=d},311:function(_,d,v){var A=v(3957),C=v(9993),w=v(5651),T=v(9760),R=v(7257);function G(I,z,H,Y){return A(z)&&(Y=H,H=z,z={}),{url:I,data:z,success:H,dataType:Y}}(d=function(I){w(I,d.setting);var z,H=I.type,Y=I.url,ee=I.data,ie=I.dataType,oe=I.success,se=I.error,re=I.timeout,fe=I.complete,ue=I.xhr();return ue.onreadystatechange=function(){if(ue.readyState===4){var ge;clearTimeout(z);var ye=ue.status;if(ye>=200&&ye<300||ye===304){ge=ue.responseText,ie==="xml"&&(ge=ue.responseXML);try{ie==="json"&&(ge=JSON.parse(ge))}catch{}oe(ge,ue)}else se(ue);fe(ue)}},H==="GET"?(ee=R.stringify(ee))&&(Y+=Y.indexOf("?")>-1?"&"+ee:"?"+ee):I.contentType==="application/x-www-form-urlencoded"?T(ee)&&(ee=R.stringify(ee)):I.contentType==="application/json"&&T(ee)&&(ee=JSON.stringify(ee)),ue.open(H,Y,!0),ue.setRequestHeader("Content-Type",I.contentType),re>0&&(z=setTimeout(function(){ue.onreadystatechange=C,ue.abort(),se(ue,"timeout"),fe(ue)},re)),ue.send(H==="GET"?null:ee),ue}).setting={type:"GET",success:C,error:C,complete:C,dataType:"json",contentType:"application/x-www-form-urlencoded",data:{},xhr:function(){return new XMLHttpRequest},timeout:0},d.get=function(){return d(G.apply(null,arguments))},d.post=function(){var I=G.apply(null,arguments);return I.type="POST",d(I)},_.exports=d},365:function(_,d){var v=Object.prototype.hasOwnProperty;d=function(A,C){return v.call(A,C)},_.exports=d},383:function(_,d,v){var A=v(3497),C=v(1849),w=v(1009),T=v(96);d=function(Y,ee){for(var ie,oe=[],se=Y;Y;){if(ie=!0,A(oe)&&H[A(oe)]){var re=new RegExp("</".concat(A(oe),"[^>]*>")).exec(Y);if(re){var fe=Y.substring(0,re.index);Y=Y.substring(re.index+re[0].length),fe&&ee.text&&ee.text(fe)}Be("",A(oe))}else{if(w(Y,"<!--")){var ue=Y.indexOf("-->");ue>=0&&(ee.comment&&ee.comment(Y.substring(4,ue)),Y=Y.substring(ue+3),ie=!1)}else if(w(Y,"<!")){var ge=Y.match(R);ge&&(ee.text&&ee.text(Y.substring(0,ge[0].length)),Y=Y.substring(ge[0].length),ie=!1)}else if(w(Y,"</")){var ye=Y.match(G);ye&&(Y=Y.substring(ye[0].length),ye[0].replace(G,Be),ie=!1)}else if(w(Y,"<")){var be=Y.match(I);be&&(Y=Y.substring(be[0].length),be[0].replace(I,we),ie=!1)}if(ie){var ve=Y.indexOf("<"),Me=ve<0?Y:Y.substring(0,ve);Y=ve<0?"":Y.substring(ve),ee.text&&ee.text(Me)}}if(se===Y)throw Error("Parse Error: "+Y);se=Y}function we(De,Fe,Oe,Ge){if(Fe=T(Fe),(Ge=!!Ge)||oe.push(Fe),ee.start){var ze={};Oe.replace(z,function(je,He,Xe,$e,We){ze[He]=Xe||$e||We||""}),ee.start(Fe,ze,Ge)}}function Be(De,Fe){var Oe;if(Fe=T(Fe))for(Oe=oe.length-1;Oe>=0&&oe[Oe]!==Fe;Oe--);else Oe=0;if(Oe>=0){for(var Ge=oe.length-1;Ge>=Oe;Ge--)ee.end&&ee.end(oe[Ge]);oe.length=Oe}}Be()};var R=/^<!\s*doctype((?:\s+[\w:]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,G=/^<\/([-A-Za-z0-9_]+)[^>]*>/,I=/^<([-A-Za-z0-9_]+)((?:\s+[-A-Za-z0-9_:@.]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/i,z=/([-A-Za-z0-9_:@.]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,H=C("script,style".split(","));_.exports=d},387:function(_,d,v){var A=v(6833);function C(w,T){this[T]=w.replace(/\w/,function(R){return R.toUpperCase()})}d=function(w){var T=A(w),R=T[0];return T.shift(),T.forEach(C,T),R+=T.join("")},_.exports=d},388:function(_,d,v){v.d(d,{A:function(){return C}});var A=v(2284);function C(w,T){if(T&&((0,A.A)(T)=="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}(w)}},438:function(_,d,v){var A=v(2571);function C(w,T){return w===T}d=function(w,T){return T=T||C,A(w,function(R,G,I){for(var z=I.length;++G<z;)if(T(R,I[G]))return!1;return!0})},_.exports=d},466:function(_,d,v){var A=v(2510),C=v(2971),w=v(2571),T=v(3249);d=A(function(R,G){return G=C(G),w(R,function(I){return!T(G,I)})}),_.exports=d},500:function(_,d,v){var A=v(6214),C=v(6186);d=function(w){return A(w)?function(R){return C(R,w)}:(T=w,function(R){return R?.[T]});var T},_.exports=d},541:function(_,d,v){(d=v(6314)(!1)).push([_.id,"._dev-tools{position:absolute;width:100%;height:100%;left:0;bottom:0;background:var(--background);z-index:500;display:none;padding-top:40px!important;opacity:0;transition:opacity .3s;border-top:1px solid var(--border)}._dev-tools ._resizer{position:absolute;width:100%;touch-action:none;left:0;top:-8px;cursor:row-resize;z-index:120}._dev-tools ._tools{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;width:100%;position:relative}._dev-tools ._tools ._tool{position:absolute;width:100%;height:100%;left:0;top:0;overflow:hidden;display:none}",""]),_.exports=d},621:function(_,d,v){var A=v(3974);d=typeof process<"u"&&A(process)==="[object process]",_.exports=d},688:function(_,d,v){(d=v(6314)(!1)).push([_.id,"._search-highlight-block{display:inline}._search-highlight-block ._keyword{background:var(--console-warn-background);color:var(--console-warn-foreground)}",""]),_.exports=d},769:function(_,d,v){var A=v(5793),C=v(3915),w=v(6214),T=v(1738);d=function(R){return R?w(R)?R:A(R)&&!T(R)?C(R):[R]:[]},_.exports=d},816:function(_,d,v){v.d(d,{A:function(){return C}});var A=v(2284);function C(w){var T=function(R,G){if((0,A.A)(R)!="object"||!R)return R;var I=R[Symbol.toPrimitive];if(I!==void 0){var z=I.call(R,G);if((0,A.A)(z)!="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(G==="string"?String:Number)(R)}(w,"string");return(0,A.A)(T)=="symbol"?T:T+""}},825:function(_,d,v){v.r(d),d.default={}},879:function(_,d,v){(d=v(6314)(!1)).push([_.id,`@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-caret-down:before{content:'\\f101'}.luna-dom-viewer-icon-caret-right:before{content:'\\f102'}.luna-dom-viewer{padding:0 0 0 12px;cursor:default;list-style:none;min-width:100%;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-dom-viewer{font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-dom-viewer ul{display:inline-block}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-caret-down,.luna-dom-viewer-icon-caret-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{min-width:200px;line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-caret-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-caret-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-caret-right{display:none}.luna-dom-viewer-attribute-value{word-break:break-all}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:0;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-theme-light .luna-dom-viewer-icon-caret-down,.luna-dom-viewer-theme-light .luna-dom-viewer-icon-caret-right{color:#9aa0a6}.luna-dom-viewer-theme-light .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-light .luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-theme-light .luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-theme-light .luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-theme-light .luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#e8eaed}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-theme-light .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node{word-break:break-all}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:gray}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-theme-light .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-caret-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-caret-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node{word-break:break-all}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}`,""]),_.exports=d},894:function(_,d,v){var A=v(5207);d=function(C,w,T){return C.replace(new RegExp(A(w),"g"),T)},_.exports=d},896:function(_,d,v){var A=v(1738),C=v(6214),w=v(3249),T=v(9100);d=function(R,G,I){if(A(G)&&(G=[G]),C(G)){var z=G;G=function(ee,ie){return w(z,ie)}}var H={},Y=function(ee,ie){G(ee,ie)&&(H[ie]=ee)};return I&&(Y=function(ee,ie){G(ee,ie)||(H[ie]=ee)}),T(R,Y),H},_.exports=d},916:function(_,d,v){var A,C=this&&this.__extends||(A=function(ge,ye){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(be,ve){be.__proto__=ve}||function(be,ve){for(var Me in ve)Object.prototype.hasOwnProperty.call(ve,Me)&&(be[Me]=ve[Me])},A(ge,ye)},function(ge,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Class extends value "+String(ye)+" is not a constructor or null");function be(){this.constructor=ge}A(ge,ye),ge.prototype=ye===null?Object.create(ye):(be.prototype=ye.prototype,new be)}),w=this&&this.__awaiter||function(ge,ye,be,ve){return new(be||(be=Promise))(function(Me,we){function Be(Oe){try{Fe(ve.next(Oe))}catch(Ge){we(Ge)}}function De(Oe){try{Fe(ve.throw(Oe))}catch(Ge){we(Ge)}}function Fe(Oe){var Ge;Oe.done?Me(Oe.value):(Ge=Oe.value,Ge instanceof be?Ge:new be(function(ze){ze(Ge)})).then(Be,De)}Fe((ve=ve.apply(ge,ye||[])).next())})},T=this&&this.__generator||function(ge,ye){var be,ve,Me,we={label:0,sent:function(){if(1&Me[0])throw Me[1];return Me[1]},trys:[],ops:[]},Be=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return Be.next=De(0),Be.throw=De(1),Be.return=De(2),typeof Symbol=="function"&&(Be[Symbol.iterator]=function(){return this}),Be;function De(Fe){return function(Oe){return function(Ge){if(be)throw new TypeError("Generator is already executing.");for(;Be&&(Be=0,Ge[0]&&(we=0)),we;)try{if(be=1,ve&&(Me=2&Ge[0]?ve.return:Ge[0]?ve.throw||((Me=ve.return)&&Me.call(ve),0):ve.next)&&!(Me=Me.call(ve,Ge[1])).done)return Me;switch(ve=0,Me&&(Ge=[2&Ge[0],Me.value]),Ge[0]){case 0:case 1:Me=Ge;break;case 4:return we.label++,{value:Ge[1],done:!1};case 5:we.label++,ve=Ge[1],Ge=[0];continue;case 7:Ge=we.ops.pop(),we.trys.pop();continue;default:if(Me=we.trys,!((Me=Me.length>0&&Me[Me.length-1])||Ge[0]!==6&&Ge[0]!==2)){we=0;continue}if(Ge[0]===3&&(!Me||Ge[1]>Me[0]&&Ge[1]<Me[3])){we.label=Ge[1];break}if(Ge[0]===6&&we.label<Me[1]){we.label=Me[1],Me=Ge;break}if(Me&&we.label<Me[2]){we.label=Me[2],we.ops.push(Ge);break}Me[2]&&we.ops.pop(),we.trys.pop();continue}Ge=ye.call(ge,we)}catch(ze){Ge=[6,ze],ve=0}finally{be=Me=0}if(5&Ge[0])throw Ge[1];return{value:Ge[0]?Ge[1]:void 0,done:!0}}([Fe,Oe])}}},R=this&&this.__importDefault||function(ge){return ge&&ge.__esModule?ge:{default:ge}};Object.defineProperty(d,"__esModule",{value:!0}),d.ErrorWithCode=void 0,d.createId=function(){return(0,G.default)(se)},d.getAbsoluteUrl=function(ge){var ye=document.createElement("a");return ye.href=ge,ye.href},d.createErr=function(ge,ye){return new re(ge,ye)},d.getUrl=function(){var ge=location.href;return(0,z.default)(ge,"about:")?parent.location.href:ge},d.getOrigin=function(){var ge=location.origin;return ge==="null"?parent.location.origin:ge},d.getTextContent=function(ge){return w(this,arguments,void 0,function(ye,be){return be===void 0&&(be=""),T(this,function(ve){switch(ve.label){case 0:return[4,fe(ye,"text",be)];case 1:return[2,ve.sent()]}})})},d.getBase64Content=function(ge){return w(this,arguments,void 0,function(ye,be){var ve;return be===void 0&&(be=""),T(this,function(Me){switch(Me.label){case 0:return ve=Y.default,[4,fe(ye,"arraybuffer",be)];case 1:return[2,ve.apply(void 0,[Me.sent(),"base64"])]}})})},d.getType=function(ge,ye){try{return ie.default.apply(null,[ge,ye])}catch{return"Error"}},d.has=function(ge,ye){try{return oe.default.apply(null,[ge,ye])}catch{return!1}};var G=R(v(5630)),I=R(v(6774)),z=R(v(1009)),H=R(v(6032)),Y=R(v(5957)),ee=R(v(825)),ie=R(v(2989)),oe=R(v(365)),se=(0,I.default)(1e3,9999)+".",re=function(ge){function ye(be,ve){var Me=this.constructor,we=ge.call(this,ve)||this;return we.code=be,Object.setPrototypeOf(we,Me.prototype),we}return C(ye,ge),ye}(Error);function fe(ge,ye){return w(this,arguments,void 0,function(be,ve,Me){var we;return Me===void 0&&(Me=""),T(this,function(Be){switch(Be.label){case 0:return Be.trys.push([0,2,,8]),(we=new H.default(be)).setQuery("__chobitsu-hide__","true"),[4,ee.default.get(we.toString(),{responseType:ve})];case 1:return[2,Be.sent().data];case 2:if(Be.sent(),!Me)return[3,7];Be.label=3;case 3:return Be.trys.push([3,6,,7]),[4,ee.default.get(ue(Me,be),{responseType:ve})];case 4:return[4,Be.sent().data];case 5:return[2,Be.sent()];case 6:return Be.sent(),[3,7];case 7:return[3,8];case 8:return[2,ve==="arraybuffer"?new ArrayBuffer(0):""]}})})}function ue(ge,ye){var be=new H.default(ge);return be.setQuery("url",ye),be.setQuery("__chobitsu-hide__","true"),be.toString()}d.ErrorWithCode=re},926:function(_,d,v){var A,C=this&&this.__extends||(A=function(oe,se){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,fe){re.__proto__=fe}||function(re,fe){for(var ue in fe)Object.prototype.hasOwnProperty.call(fe,ue)&&(re[ue]=fe[ue])},A(oe,se)},function(oe,se){if(typeof se!="function"&&se!==null)throw new TypeError("Class extends value "+String(se)+" is not a constructor or null");function re(){this.constructor=oe}A(oe,se),oe.prototype=se===null?Object.create(se):(re.prototype=se.prototype,new re)}),w=this&&this.__importDefault||function(oe){return oe&&oe.__esModule?oe:{default:oe}};Object.defineProperty(d,"__esModule",{value:!0}),d.HighlightOverlay=void 0;var T=w(v(1580)),R=v(3703),G=v(162),I=v(3979),z=function(oe){function se(){var re=oe!==null&&oe.apply(this,arguments)||this;return re.gridLabelState={gridLayerCounter:0},re}return C(se,oe),se.prototype.setContainer=function(re){this._container=re},se.prototype.setPlatform=function(re){this.container&&this.container.classList.add("luna-dom-highlighter-platform-"+re),oe.prototype.setPlatform.call(this,re)},Object.defineProperty(se.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),se.prototype.reset=function(re){oe.prototype.reset.call(this,re),this.tooltip.innerHTML="",this.gridLabelState.gridLayerCounter=0},se.prototype.install=function(){var re=this.document.createElement("canvas");re.classList.add("luna-dom-highlighter-fill"),this.container.appendChild(re);var fe=this.document.createElement("div");this.container.appendChild(fe),this.tooltip=fe,this.setCanvas(re),oe.prototype.install.call(this)},se.prototype.uninstall=function(){this.document.body.classList.remove("fill"),this.document.body.innerHTML="",oe.prototype.uninstall.call(this)},se.prototype.drawHighlight=function(re){this.context.save();for(var fe=(0,I.emptyBounds)(),ue=re.paths.slice();ue.length;){var ge=ue.pop();ge&&(this.context.save(),(0,I.drawPath)(this.context,ge.path,ge.fillColor,ge.outlineColor,void 0,fe,this.emulationScaleFactor),ue.length&&(this.context.globalCompositeOperation="destination-out",(0,I.drawPath)(this.context,ue[ue.length-1].path,"red",void 0,void 0,fe,this.emulationScaleFactor)),this.context.restore())}this.context.restore(),this.context.save();var ye=!!(re.paths.length&&re.showRulers&&fe.minX<20&&fe.maxX+20<this.canvasWidth),be=!!(re.paths.length&&re.showRulers&&fe.minY<20&&fe.maxY+20<this.canvasHeight);return re.showRulers&&this.drawAxis(this.context,ye,be),re.paths.length&&(re.showExtensionLines&&function(ve,Me,we,Be,De,Fe,Oe,Ge){ve.save();var ze=Oe,je=Ge;if(ve.strokeStyle=ie,ve.lineWidth=1,ve.translate(.5,.5),we)for(var He in Me.rightmostXForY)ve.beginPath(),ve.moveTo(ze,Number(He)),ve.lineTo(Me.rightmostXForY[He],Number(He)),ve.stroke();else for(var He in Me.leftmostXForY)ve.beginPath(),ve.moveTo(0,Number(He)),ve.lineTo(Me.leftmostXForY[He],Number(He)),ve.stroke();if(Be)for(var Xe in Me.bottommostYForX)ve.beginPath(),ve.moveTo(Number(Xe),je),ve.lineTo(Number(Xe),Me.topmostYForX[Xe]),ve.stroke();else for(var Xe in Me.topmostYForX)ve.beginPath(),ve.moveTo(Number(Xe),0),ve.lineTo(Number(Xe),Me.topmostYForX[Xe]),ve.stroke();ve.restore()}(this.context,fe,ye,be,void 0,!1,this.canvasWidth,this.canvasHeight),re.elementInfo&&function(ve,Me,we,Be,De,Fe){ve.innerHTML="";var Oe=(0,G.createChild)(ve,"div"),Ge=(0,G.createChild)(Oe,"div","tooltip-content"),ze=function(Nn,Xn){var jn=(0,G.createElement)("div","element-info"),Un=(0,G.createChild)(jn,"div","element-info-header"),bn=function(vi){return vi.layoutObjectName&&(0,T.default)(vi.layoutObjectName,"Grid")?"grid":vi.layoutObjectName&&vi.layoutObjectName==="LayoutNGFlexibleBox"?"flex":null}(Nn);bn&&(0,G.createChild)(Un,"div","element-layout-type ".concat(bn));var Kn=(0,G.createChild)(Un,"div","element-description");(0,G.createChild)(Kn,"span","material-tag-name").textContent=Nn.tagName;var Qn=(0,G.createChild)(Kn,"span","material-node-id"),pr=80;Qn.textContent=Nn.idValue?"#"+(0,G.ellipsify)(Nn.idValue,pr):"",Qn.classList.toggle("hidden",!Nn.idValue);var fn=(0,G.createChild)(Kn,"span","material-class-name");Qn.textContent.length<pr&&(fn.textContent=(0,G.ellipsify)(Nn.className||"",pr-Qn.textContent.length)),fn.classList.toggle("hidden",!Nn.className);var Mt=(0,G.createChild)(Un,"div","dimensions");(0,G.createChild)(Mt,"span","material-node-width").textContent=String(Math.round(100*Nn.nodeWidth)/100),(0,G.createTextChild)(Mt,""),(0,G.createChild)(Mt,"span","material-node-height").textContent=String(Math.round(100*Nn.nodeHeight)/100);var yn,kn=Nn.style||{};Nn.isLockedAncestor&&wr("Showing content-visibility ancestor",""),Nn.isLocked&&wr("Descendants are skipped due to content-visibility","");var nr=kn.color;nr&&nr!=="#00000000"&&Br("Color",nr,Xn);var dr=kn["font-family"],Qr=kn["font-size"];dr&&Qr!=="0px"&&wr("Font","".concat(Qr," ").concat(dr));var Wr=kn["background-color"];Wr&&Wr!=="#00000000"&&Br("Background",Wr,Xn);var Gr=kn.margin;Gr&&Gr!=="0px"&&wr("Margin",Gr);var Hr=kn.padding;Hr&&Hr!=="0px"&&wr("Padding",Hr);var Kr=Nn.contrast?Nn.contrast.backgroundColor:null,ti=nr&&nr!=="#00000000"&&Kr&&Kr!=="#00000000";Nn.showAccessibilityInfo&&(Ci("Accessibility"),ti&&kn.color&&Nn.contrast&&ui(kn.color,Nn.contrast),wr("Name",Nn.accessibleName),wr("Role",Nn.accessibleRole),Ii("Keyboard-focusable",Nn.isKeyboardFocusable?"a11y-icon a11y-icon-ok":"a11y-icon a11y-icon-not-ok"));function Mi(){yn||(yn=(0,G.createChild)(jn,"div","element-info-body"))}function Ci(vi){Mi();var qr=(0,G.createChild)(yn,"div","element-info-row element-info-section");(0,G.createChild)(qr,"div","section-name").textContent=vi,(0,G.createChild)((0,G.createChild)(qr,"div","separator-container"),"div","separator")}function oi(vi,qr,br){Mi();var er=(0,G.createChild)(yn,"div","element-info-row");return(0,G.createChild)(er,"div","element-info-name").textContent=vi,(0,G.createChild)(er,"div","element-info-gap"),(0,G.createChild)(er,"div",br||"")}function Ii(vi,qr){(0,G.createChild)(oi(vi,"","element-info-value-icon"),"div",qr)}function wr(vi,qr){(0,G.createTextChild)(oi(vi,"","element-info-value-text"),qr)}function Br(vi,qr,br){var er=oi(vi,"","element-info-value-color"),Gn=(0,G.createChild)(er,"div","color-swatch");(0,G.createChild)(Gn,"div","color-swatch-inner").style.backgroundColor=qr,(0,G.createTextChild)(er,(0,I.formatColor)(qr,br))}function ui(vi,qr){var br=(0,I.parseHexa)(vi),er=(0,I.parseHexa)(qr.backgroundColor);br[3]*=qr.textOpacity;var Gn=oi("Contrast","","element-info-value-contrast"),Er=(0,G.createChild)(Gn,"div","contrast-text");Er.style.color=(0,I.formatRgba)(br,"rgb"),Er.style.backgroundColor=qr.backgroundColor,Er.textContent="Aa";var mn=(0,G.createChild)(Gn,"span");if(qr.contrastAlgorithm==="apca"){var tr=(0,R.contrastRatioAPCA)(br,er),vr=(0,R.getAPCAThreshold)(qr.fontSize,qr.fontWeight);mn.textContent=String(Math.floor(100*tr)/100)+"%",(0,G.createChild)(Gn,"div",vr===null||Math.abs(tr)<vr?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}else if(qr.contrastAlgorithm==="aa"||qr.contrastAlgorithm==="aaa"){var Ar=(0,R.contrastRatio)(br,er);vr=(0,R.getContrastThreshold)(qr.fontSize,qr.fontWeight)[qr.contrastAlgorithm],mn.textContent=String(Math.floor(100*Ar)/100),(0,G.createChild)(Gn,"div",Ar<vr?"a11y-icon a11y-icon-warning":"a11y-icon a11y-icon-ok")}}return jn}(Me,we);Ge.appendChild(ze);var je,He=Ge.offsetWidth,Xe=Ge.offsetHeight,$e=8,We=2,nt=2*$e,Qt=$e+2,Wt=We+Qt,Bn=De-We-Qt-nt,Lt=Be.maxX-Be.minX<nt+2*Qt;if(Lt)je=.5*(Be.minX+Be.maxX)-$e;else{var Mn=Be.minX+Qt,cr=Be.maxX-Qt-nt;je=Mn>Wt&&Mn<Bn?Mn:(0,G.constrainNumber)(Wt,Mn,cr)}var In=je<Wt||je>Bn,Zn=je-Qt;Zn=(0,G.constrainNumber)(Zn,We,De-He-We);var $n=Be.minY-$e-Xe,Rn=!0;$n<0?($n=Math.min(Fe-Xe,Be.maxY+$e),Rn=!1):Be.minY>Fe&&($n=Fe-$e-Xe);var Dn=Zn>=Be.minX&&Zn+He<=Be.maxX&&$n>=Be.minY&&$n+Xe<=Be.maxY,Gt=Zn<Be.maxX&&Zn+He>Be.minX&&$n<Be.maxY&&$n+Xe>Be.minY;if(Gt&&!Dn)return void(Ge.style.display="none");if(Ge.style.top=$n+"px",Ge.style.left=Zn+"px",!In){var Jn=(0,G.createChild)(Ge,"div","tooltip-arrow");Jn.style.clipPath=Rn?"polygon(0 0, 100% 0, 50% 100%)":"polygon(50% 0, 0 100%, 100% 100%)",Jn.style.top=(Rn?Xe-1:-$e)+"px",Jn.style.left=je-Zn+"px"}}(this.tooltip,re.elementInfo,re.colorFormat,fe,this.canvasWidth,this.canvasHeight)),this.context.restore(),{bounds:fe}},se.prototype.drawAxis=function(re,fe,ue){re.save();var ge=this.pageZoomFactor*this.pageScaleFactor*this.emulationScaleFactor,ye=this.scrollX*this.pageScaleFactor,be=this.scrollY*this.pageScaleFactor;function ve(He){return Math.round(He*ge)}function Me(He){return Math.round(He/ge)}var we=this.canvasWidth/ge,Be=this.canvasHeight/ge,De=50;re.save(),re.fillStyle=ee,ue?re.fillRect(0,ve(Be)-15,ve(we),ve(Be)):re.fillRect(0,0,ve(we),15),re.globalCompositeOperation="destination-out",re.fillStyle="red",fe?re.fillRect(ve(we)-15,0,ve(we),ve(Be)):re.fillRect(0,0,15,ve(Be)),re.restore(),re.fillStyle=ee,fe?re.fillRect(ve(we)-15,0,ve(we),ve(Be)):re.fillRect(0,0,15,ve(Be)),re.lineWidth=1,re.strokeStyle=Y,re.fillStyle=Y,re.save(),re.translate(-ye,.5-be);for(var Fe=Be+Me(be),Oe=100;Oe<Fe;Oe+=100)re.save(),re.translate(ye,ve(Oe)),re.rotate(-Math.PI/2),re.fillText(String(Oe),2,fe?ve(we)-7:13),re.restore();re.translate(.5,-.5);for(var Ge=we+Me(ye),ze=100;ze<Ge;ze+=100)re.save(),re.fillText(String(ze),ve(ze)+2,ue?be+ve(Be)-7:be+13),re.restore();for(re.restore(),re.save(),fe&&(re.translate(ve(we),0),re.scale(-1,1)),re.translate(-ye,.5-be),Fe=Be+Me(be),Oe=De;Oe<Fe;Oe+=De){re.beginPath(),re.moveTo(ye,ve(Oe));var je=Oe%100?5:8;re.lineTo(ye+je,ve(Oe)),re.stroke()}for(re.strokeStyle=H,Oe=5;Oe<Fe;Oe+=5)Oe%De&&(re.beginPath(),re.moveTo(ye,ve(Oe)),re.lineTo(ye+5,ve(Oe)),re.stroke());for(re.restore(),re.save(),ue&&(re.translate(0,ve(Be)),re.scale(1,-1)),re.translate(.5-ye,-be),Ge=we+Me(ye),ze=De;ze<Ge;ze+=De)re.beginPath(),re.moveTo(ve(ze),be),je=ze%100?5:8,re.lineTo(ve(ze),be+je),re.stroke();for(re.strokeStyle=H,ze=5;ze<Ge;ze+=5)ze%De&&(re.beginPath(),re.moveTo(ve(ze),be),re.lineTo(ve(ze),be+5),re.stroke());re.restore(),re.restore()},se}(G.Overlay);d.HighlightOverlay=z;var H="rgba(0,0,0,0.2)",Y="rgba(0,0,0,0.7)",ee="rgba(255, 255, 255, 0.8)",ie="rgba(128, 128, 128, 0.3)"},928:function(_,d){d=function(A){var C,w,T,R=A[0]/360,G=A[1]/100,I=A[2]/100,z=[];if(A[3]&&(z[3]=A[3]),G===0)return T=v(255*I),z[0]=z[1]=z[2]=T,z;for(var H=2*I-(C=I<.5?I*(1+G):I+G-I*G),Y=0;Y<3;Y++)(w=R+.3333333333333333*-(Y-1))<0&&w++,w>1&&w--,T=6*w<1?H+6*(C-H)*w:2*w<1?C:3*w<2?H+(C-H)*(.6666666666666666-w)*6:H,z[Y]=v(255*T);return z};var v=Math.round;_.exports=d},961:function(_,d,v){var A=v(5693);d=function(C,w,T){var R=[];w=A(w,T);for(var G=-1,I=C.length;++G<I;){var z=G-R.length,H=C[z];w(H,G,C)&&(R.push(H),C.splice(z,1))}return R},_.exports=d},975:function(_,d,v){var A=v(5651),C=v(6097),w=v(8971),T=v(6334),R={path:"/"};function G(I,z,H){if(!w(z)){if(H=A(H=H||{},R),C(H.expires)){var Y=new Date;Y.setMilliseconds(Y.getMilliseconds()+864e5*H.expires),H.expires=Y}return z=encodeURIComponent(z),I=encodeURIComponent(I),document.cookie=[I,"=",z,H.expires&&"; expires="+H.expires.toUTCString(),H.path&&"; path="+H.path,H.domain&&"; domain="+H.domain,H.secure?"; secure":""].join(""),d}for(var ee=document.cookie?document.cookie.split("; "):[],ie=I?void 0:{},oe=0,se=ee.length;oe<se;oe++){var re=ee[oe],fe=re.split("="),ue=T(fe.shift());if(re=fe.join("="),re=T(re),I===ue){ie=re;break}I||(ie[ue]=re)}return ie}d={get:G,set:G,remove:function(I,z){return(z=z||{}).expires=-1,G(I,"",z)}},_.exports=d},991:function(_,d,v){v.d(d,{A:function(){return C}});var A=v(3954);function C(){return C=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(w,T,R){var G=function(z,H){for(;!{}.hasOwnProperty.call(z,H)&&(z=(0,A.A)(z))!==null;);return z}(w,T);if(G){var I=Object.getOwnPropertyDescriptor(G,T);return I.get?I.get.call(arguments.length<3?w:R):I.value}},C.apply(null,arguments)}},1009:function(_,d){d=function(v,A){return v.indexOf(A)===0},_.exports=d},1023:function(_,d,v){var A=v(2717),C=v(8420),w=v(9100),T=v(769);d=A({initialize:function(){this._listeners=[]},addListener:function(R){this._listeners.push(R)},rmListener:function(R){var G=this._listeners.indexOf(R);G>-1&&this._listeners.splice(G,1)},rmAllListeners:function(){this._listeners=[]},emit:function(){var R=this,G=T(arguments),I=C(this._listeners);w(I,function(z){return z.apply(R,G)},this)}},{mixin:function(R){w(["addListener","rmListener","emit","rmAllListeners"],function(G){R[G]=d.prototype[G]}),R._listeners=R._listeners||[]}}),_.exports=d},1034:function(_,d,v){var A=v(9760),C=v(3957),w=v(6214),T=v(5154);d=function(R){return w(R)?R.map(function(G){return d(G)}):A(R)&&!C(R)?T(R,function(G){return d(G)}):R},_.exports=d},1107:function(_,d,v){(d=v(6314)(!1)).push([_.id,"@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\\f101'}.luna-text-viewer-icon-copy:before{content:'\\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}",""]),_.exports=d},1162:function(_,d,v){v.d(d,{Ay:function(){return Kr}});var A=v(991),C=v(3029),w=v(2901),T=v(388),R=v(3954),G=v(5361),I=v(3693),z=v.n(I),H=v(5241),Y=v.n(H),ee=v(5902),ie=v.n(ee),oe=v(5630),se=v.n(oe),re=v(9760),fe=v.n(re),ue=v(5651),ge=v.n(ue),ye=v(3915),be=v.n(ye),ve=v(6030),Me=v.n(ve),we=v(2561),Be=v.n(we),De=v(3957),Fe=v.n(De),Oe=v(3497),Ge=v.n(Oe),ze=v(1976),je=v.n(ze),He=v(1738),Xe=v.n(He),$e=v(9405),We=v.n($e),nt=v(3249),Qt=v.n(nt),Wt=v(96),Bn=v.n(Wt),Lt=v(4236),Mn=v.n(Lt),cr=v(9100),In=v.n(cr),Zn=v(2263),$n=v.n(Zn),Rn=v(5169),Dn=v.n(Rn),Gt=v(9548),Jn=v.n(Gt),Nn=(v(6097),v(5004)),Xn=v.n(Nn);v(9410),v(8609);function jn(br){var er="luna-".concat(br,"-");function Gn(Er){return be()(We()(Er).split(/\s+/),function(mn){return Qt()(mn,er)?mn:mn.replace(/[\w-]+/,function(tr){return"".concat(er).concat(tr)})}).join(" ")}return function(Er){if(/<[^>]*>/g.test(Er))try{var mn=Jn().parse(Er);return Un(mn,function(tr){tr.attrs&&tr.attrs.class&&(tr.attrs.class=Gn(tr.attrs.class))}),Jn().stringify(mn)}catch{return Gn(Er)}return Gn(Er)}}function Un(br,er){for(var Gn=0,Er=br.length;Gn<Er;Gn++){var mn=br[Gn];er(mn),mn.content&&Un(mn.content,er)}}Dn();var bn=v(8105),Kn=v.n(bn),Qn=v(961),pr=v.n(Qn),fn=v(7e3),Mt=v.n(fn),yn=v(1009),kn=v.n(yn);function nr(){try{var br=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nr=function(){return!!br})()}var dr=function(br){function er(Gn,Er){var mn,tr,vr=Er.compName,Ar=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Tn=Ar===void 0?"light":Ar;return(0,C.A)(this,er),mn=function(tt,$t,dn){return $t=(0,R.A)($t),(0,T.A)(tt,nr()?Reflect.construct($t,[],(0,R.A)(tt).constructor):$t.apply(tt,dn))}(this,er),mn.subComponents=[],mn.theme="",mn.onThemeChange=function(tt){mn.options.theme==="auto"&&mn.setTheme(tt)},mn.compName=vr,mn.c=jn(vr),mn.options={},mn.container=Gn,mn.$container=z()(Gn),mn.$container.addClass(["luna-".concat(vr),mn.c("platform-".concat((tr=Xn()(),tr==="os x"?"mac":tr)))]),mn.on("changeOption",function(tt,$t){if(tt==="theme"&&$t){var dn=$t;$t==="auto"&&(dn=Mt().get()),mn.setTheme(dn),In()(mn.subComponents,function(Qe){return Qe.setOption("theme",$t)})}}),Mt().on("change",mn.onThemeChange),mn.setOption("theme",Tn),mn}return(0,G.A)(er,br),(0,w.A)(er,[{key:"destroy",value:function(){var Gn=this;this.destroySubComponents();var Er=this.$container,mn=Er.attr("class");In()(mn.split(/\s+/),function(tr){kn()(tr,"luna-".concat(Gn.compName))&&Er.rmClass(tr)}),Er.html(""),this.emit("destroy"),this.removeAllListeners(),Mt().off("change",this.onThemeChange)}},{key:"setOption",value:function(Gn,Er){var mn=this,tr=this.options,vr={};typeof Gn=="string"?vr[Gn]=Er:vr=Gn,In()(vr,function(Ar,Tn){var tt=tr[Tn];tr[Tn]=Ar,Ar!==tt&&mn.emit("changeOption",Tn,Ar,tt)})}},{key:"getOption",value:function(Gn){return this.options[Gn]}},{key:"addSubComponent",value:function(Gn){Gn.setOption("theme",this.options.theme),this.subComponents.push(Gn)}},{key:"removeSubComponent",value:function(Gn){pr()(this.subComponents,function(Er){return Er===Gn})}},{key:"destroySubComponents",value:function(){In()(this.subComponents,function(Gn){return Gn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Gn){var Er=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ge()(Gn,Er),Kn()(this.options,Gn)}},{key:"find",value:function(Gn){return this.$container.find(this.c(Gn))}},{key:"setTheme",value:function(Gn){var Er=this.c,mn=this.$container;this.theme&&mn.rmClass(Er("theme-".concat(this.theme))),mn.addClass(Er("theme-".concat(Gn))),this.theme=Gn}}])}($n()),Qr=function(br,er,Gn){return((br-er)/(Gn-er)*100).toFixed(2)};function Wr(br,er,Gn,Er){var mn=(0,A.A)((0,R.A)(br.prototype),er,Gn);return typeof mn=="function"?function(tr){return mn.apply(Gn,tr)}:mn}function Gr(br,er,Gn){return er=(0,R.A)(er),(0,T.A)(br,Hr()?Reflect.construct(er,Gn||[],(0,R.A)(br).constructor):er.apply(br,Gn))}function Hr(){try{var br=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hr=function(){return!!br})()}_=v.hmd(_);var Kr=function(br){function er(Gn){var Er,mn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,C.A)(this,er),(Er=Gr(this,er,[Gn,{compName:"setting"},mn])).items=[],Er.selectedItem=null,Er.initOptions(mn,{separatorCollapse:!0,filter:""}),Er.bindEvent(),Er}return(0,G.A)(er,br),(0,w.A)(er,[{key:"appendTitle",value:function(Gn){var Er=new Mi(this,Gn,arguments.length>1&&arguments[1]!==void 0?arguments[1]:1);return this.append(Er),Er}},{key:"appendSeparator",value:function(){var Gn=this.items,Er=this.options.separatorCollapse,mn=Ge()(Gn);if(Er&&mn instanceof oi)return mn;var tr=new oi(this);return this.append(tr),tr}},{key:"appendNumber",value:function(Gn,Er,mn,tr,vr){fe()(tr)&&(vr=tr,tr="");var Ar=new wr(this,Gn,Er,mn,tr,vr);return this.append(Ar),Ar}},{key:"appendButton",value:function(Gn,Er,mn){Fe()(Er)&&(mn=Er,Er="");var tr=new vi(this,Gn,Er,mn);return this.append(tr),tr}},{key:"appendHtml",value:function(Gn){var Er=new qr(this,Gn);return this.append(Er),Er}},{key:"appendMarkdown",value:function(Gn){var Er=new Ci(this,Gn);return this.append(Er),Er}},{key:"appendInput",value:function(Gn,Er,mn){var tr=new Ii(this,Gn,Er,mn,arguments.length>3&&arguments[3]!==void 0?arguments[3]:"");return this.append(tr),tr}},{key:"appendCheckbox",value:function(Gn,Er,mn,tr){tr||(tr=mn,mn="");var vr=new Br(this,Gn,Er,mn,tr);return this.append(vr),vr}},{key:"appendSelect",value:function(Gn,Er,mn,tr,vr){fe()(tr)&&(vr=tr,tr="");var Ar=new ui(this,Gn,Er,mn,tr,vr);return this.append(Ar),Ar}},{key:"remove",value:function(Gn){var Er=this.items,mn=Er.indexOf(Gn);mn>-1&&(Gn.detach(),Er.splice(mn,1),Gn===this.selectedItem&&this.selectItem(null))}},{key:"clear",value:function(){In()(this.items,function(Gn){return Gn.detach()}),this.items=[],this.selectItem(null)}},{key:"selectItem",value:function(Gn){var Er;this.selectedItem&&(this.selectedItem.deselect(),this.selectedItem=null),Mn()(Gn)||(this.selectedItem=Gn,(Er=this.selectedItem)===null||Er===void 0||Er.select())}},{key:"renderSettings",value:function(){var Gn=this,Er=this.items;In()(Er,function(mn){return mn.detach()}),In()(Er,function(mn){Gn.filterItem(mn)&&Gn.$container.append(mn.container)})}},{key:"bindEvent",value:function(){var Gn=this,Er=this.c;this.on("changeOption",function(tr){tr==="filter"&&Gn.renderSettings()});var mn=this;this.$container.on("click",Er(".item"),function(){mn.selectItem(this.settingItem)})}},{key:"filterItem",value:function(Gn){var Er=this.options.filter;if(Er){if(Fe()(Er))return Er(Gn);if(je()(Er))return Er.test(Gn.text());if(Xe()(Er)&&(Er=We()(Er)))return Qt()(Bn()(Gn.text()),Bn()(Er))}return!0}},{key:"append",value:function(Gn){this.items.push(Gn),this.filterItem(Gn)&&this.$container.append(Gn.container)}}])}(dr),ti=function(){return(0,w.A)(function br(er,Gn,Er,mn){(0,C.A)(this,br),this.container=Y()("div",{tabindex:"0"}),this.setting=er,this.container.settingItem=this,this.$container=z()(this.container),this.$container.addClass(er.c("item")).addClass(er.c("item-".concat(mn))),this.key=Gn,this.value=Er},[{key:"select",value:function(){this.$container.addClass(this.setting.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.setting.c("selected"))}},{key:"detach",value:function(){this.$container.remove()}},{key:"disable",value:function(){this.$container.addClass(this.setting.c("disabled"))}},{key:"enable",value:function(){this.$container.rmClass(this.setting.c("disabled"))}},{key:"text",value:function(){return this.$container.text()}},{key:"onChange",value:function(br){this.value!==br&&(this.setting.emit("change",this.key,br,this.value),this.value=br)}}])}(),Mi=function(br){function er(Gn,Er,mn){var tr;return(0,C.A)(this,er),(tr=Gr(this,er,[Gn,"","","title"])).$container.addClass(Gn.c("level-".concat(mn))),tr.$container.text(Er),tr}return(0,G.A)(er,br),(0,w.A)(er)}(ti),Ci=function(br){function er(Gn,Er){var mn;return(0,C.A)(this,er),(mn=Gr(this,er,[Gn,"","","markdown"])).$container.html(Er),mn}return(0,G.A)(er,br),(0,w.A)(er)}(ti),oi=function(br){function er(Gn){return(0,C.A)(this,er),Gr(this,er,[Gn,"","","separator"])}return(0,G.A)(er,br),(0,w.A)(er)}(ti),Ii=function(br){function er(Gn,Er,mn,tr,vr){var Ar;(0,C.A)(this,er),Ar=Gr(this,er,[Gn,Er,mn,"input"]);var Tn=Gn.c;Ar.$container.html('<div class="'.concat(Tn("title"),'">').concat(ie()(tr),`</div>
      <div class="`).concat(Tn("description"),'">').concat(vr,`</div>
      <div class="`).concat(Tn("control"),`">
        <input type="text"></input>
      </div>`));var tt=Ar.$container.find("input");return tt.val(mn),tt.on("change",function(){return Ar.onChange(tt.val())}),Ar.$input=tt,Ar}return(0,G.A)(er,br),(0,w.A)(er,[{key:"setValue",value:function(Gn){this.$input.val(Gn),this.value=Gn}},{key:"disable",value:function(){Wr(er,"disable",this)([]),this.$input.attr("disabled","")}},{key:"enable",value:function(){Wr(er,"enable",this)([]),this.$input.rmAttr("disabled")}}])}(ti),wr=function(br){function er(Gn,Er,mn,tr,vr){var Ar,Tn=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};(0,C.A)(this,er),(Ar=Gr(this,er,[Gn,Er,mn,"number"])).renderRange=function(){var it=Me()(Ar.$input.val()),At=Ar.options;Ar.$trackProgress.css("width",Qr(it,At.min,At.max)+"%"),Ar.$value.text(Be()(it))},ge()(Tn,{min:0,max:10,step:1}),Ar.options=Tn;var tt=Ar.$container,$t=Gn.c,dn=!!Tn.range;delete Tn.range;var Qe=Tn.min,gn=Tn.max,sr='<input type="'.concat(dn?"range":"number",'"').concat(be()(Tn,function(it,At){return" ".concat(At,'="').concat(it,'"')}),"></input>");dn&&(sr="".concat(Qe,'<div class="').concat($t("range-container"),`">
        <div class="`).concat($t("range-track"),`">
          <div class="`).concat($t("range-track-bar"),`">
            <div class="`).concat($t("range-track-progress"),'" style="width: ').concat(Qr(mn,Qe,gn),`%;"></div>
          </div>
        </div>
        `).concat(sr,`
      </div><span class="`).concat($t("value"),'">').concat(mn,"</span>/").concat(gn)),tt.html('<div class="'.concat($t("title"),'">').concat(ie()(tr),`</div>
      <div class="`).concat($t("description"),'">').concat(vr,`</div>
      <div class="`).concat($t("control"),'">').concat(sr,"</div>"));var rr=tt.find("input");return Ar.$value=tt.find($t(".value")),Ar.$trackProgress=tt.find($t(".range-track-progress")),rr.val(Be()(mn)),rr.on("change",function(){var it=Me()(rr.val());Ar.onChange(it)}),rr.on("input",Ar.renderRange),Ar.$input=rr,Ar}return(0,G.A)(er,br),(0,w.A)(er,[{key:"setValue",value:function(Gn){this.$input.val(Be()(Gn)),this.value=Gn,this.renderRange()}},{key:"disable",value:function(){Wr(er,"disable",this)([]),this.$input.attr("disabled","")}},{key:"enable",value:function(){Wr(er,"enable",this)([]),this.$input.rmAttr("disabled")}}])}(ti),Br=function(br){function er(Gn,Er,mn,tr,vr){var Ar;(0,C.A)(this,er),Ar=Gr(this,er,[Gn,Er,mn,"checkbox"]);var Tn=Gn.c,tt=se()(Gn.c("checkbox-"));Ar.$container.html('<div class="'.concat(Tn("title"),'">').concat(ie()(tr),`</div>
      <div class="`).concat(Tn("control"),`">
        <input type="checkbox" id="`).concat(tt,`"></input>
        <label for="`).concat(tt,'">').concat(vr,`</label>
      </div>`));var $t=Ar.$container.find("input"),dn=$t.get(0);return dn.checked=mn,$t.on("change",function(){return Ar.onChange(dn.checked)}),Ar.$input=$t,Ar.input=dn,Ar}return(0,G.A)(er,br),(0,w.A)(er,[{key:"setValue",value:function(Gn){this.input.checked=Gn,this.value=Gn}},{key:"disable",value:function(){Wr(er,"disable",this)([]),this.$input.attr("disabled","")}},{key:"enable",value:function(){Wr(er,"enable",this)([]),this.$input.rmAttr("disabled")}}])}(ti),ui=function(br){function er(Gn,Er,mn,tr,vr,Ar){var Tn;(0,C.A)(this,er),Tn=Gr(this,er,[Gn,Er,mn,"select"]);var tt=Gn.c;Tn.$container.html('<div class="'.concat(tt("title"),'">').concat(ie()(tr),`</div>
      <div class="`).concat(tt("description"),'">').concat(vr,`</div>
      <div class="`).concat(tt("control"),`">
        <div class="`).concat(tt("select"),`">
          <select></select>
        </div>
      </div>`));var $t=Tn.$container.find("select");return Tn.$select=$t,Tn.setOptions(Ar),$t.on("change",function(){return Tn.onChange($t.val())}),Tn}return(0,G.A)(er,br),(0,w.A)(er,[{key:"setValue",value:function(Gn){this.$select.val(Gn),this.value=Gn}},{key:"setOptions",value:function(Gn){var Er=this;this.$select.html(be()(Gn,function(mn,tr){return'<option value="'.concat(ie()(mn),'"').concat(mn===Er.value?" selected":"",">").concat(ie()(tr),"</option>")}).join(""))}},{key:"disable",value:function(){Wr(er,"disable",this)([]),this.$select.attr("disabled","")}},{key:"enable",value:function(){Wr(er,"enable",this)([]),this.$select.rmAttr("disabled")}}])}(ti),vi=function(br){function er(Gn,Er,mn,tr){var vr;return(0,C.A)(this,er),mn||(mn=Er,Er=""),(vr=Gr(this,er,[Gn,"","","button"])).$container.html(Gn.c('<div class="title">'.concat(ie()(Er),`</div>
      <div class="control">
        <button>`).concat(ie()(mn),`</button>
      </div>`))),vr.$container.find("button").on("click",tr),vr}return(0,G.A)(er,br),(0,w.A)(er)}(ti),qr=function(br){function er(Gn,Er){var mn;return(0,C.A)(this,er),(mn=Gr(this,er,[Gn,"","","html"])).$container.append(Er),mn}return(0,G.A)(er,br),(0,w.A)(er)}(ti);(function(br,er){try{br.exports=er,br.exports.default=er}catch{}})(_,Kr)},1167:function(_,d,v){var A=v(1909),C=v(5869),w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,T=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i;d=C(function(R){return R=R||(A?navigator.userAgent:""),w.test(R)||T.test(R.substr(0,4))}),_.exports=d},1168:function(_,d,v){var A=v(3422);d=function(w){if(A(w))return"";try{return C.call(w)}catch{}try{return w+""}catch{}return""};var C=Function.prototype.toString;_.exports=d},1277:function(_,d,v){(d=v(6314)(!1)).push([_.id,'.luna-box-model{display:inline-block;text-align:center;white-space:nowrap;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-box-model .luna-box-model-hidden,.luna-box-model.luna-box-model-hidden{display:none}.luna-box-model .luna-box-model-invisible,.luna-box-model.luna-box-model-invisible{visibility:hidden}.luna-box-model *{box-sizing:border-box}.luna-box-model.luna-box-model-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-box-model{font-size:12px}.luna-box-model-label{position:absolute;margin-left:3px;padding:0 2px}.luna-box-model-bottom,.luna-box-model-left,.luna-box-model-right,.luna-box-model-top{display:inline-block}.luna-box-model-left,.luna-box-model-right{vertical-align:middle}.luna-box-model-border,.luna-box-model-content,.luna-box-model-margin,.luna-box-model-padding,.luna-box-model-position{position:relative;display:inline-block;text-align:center;vertical-align:middle;padding:3px;margin:3px;color:rgba(0,0,0,.88);background:#fff}.luna-box-model-position{border:1px gray dotted}.luna-box-model-margin{border:1px dashed}.luna-box-model-margin.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(246,178,107,.66)!important}.luna-box-model-border{border:1px #000 solid}.luna-box-model-border.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(255,229,153,.66)!important}.luna-box-model-padding{border:1px gray dashed}.luna-box-model-padding.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(147,196,125,.55)!important}.luna-box-model-content{border:1px gray solid;min-width:100px}.luna-box-model-content.luna-box-model-highlighted{color:rgba(0,0,0,.88)!important;background:rgba(111,168,220,.66)!important}.luna-box-model-theme-dark .luna-box-model-border,.luna-box-model-theme-dark .luna-box-model-content,.luna-box-model-theme-dark .luna-box-model-margin,.luna-box-model-theme-dark .luna-box-model-padding,.luna-box-model-theme-dark .luna-box-model-position{color:hsla(0,0%,100%,.85);background:#141414}.luna-box-model-theme-dark .luna-box-model-border{border-color:gray}',""]),_.exports=d},1443:function(_,d,v){(d=v(6314)(!1)).push([_.id,'#_resources{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:14px}#_resources ._section{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_resources ._section._warn{border:1px solid var(--console-warn-border)}#_resources ._section._warn ._title{background:var(--console-warn-background);color:var(--console-warn-foreground)}#_resources ._section._danger{border:1px solid var(--console-error-border)}#_resources ._section._danger ._title{background:var(--console-error-background);color:var(--console-error-foreground)}#_resources ._section._cookie,#_resources ._section._local-storage,#_resources ._section._session-storage{border:none}#_resources ._section._cookie ._title,#_resources ._section._local-storage ._title,#_resources ._section._session-storage ._title{border:1px solid var(--border);border-bottom:none}#_resources ._title{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background)}#_resources ._title ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_resources ._title ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_resources ._title ._btn:active{color:var(--accent)}#_resources ._title ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_resources ._title ._btn._btn-disabled *{pointer-events:none}#_resources ._link-list{font-size:12px;color:var(--foreground)}#_resources ._link-list li{padding:10px;word-break:break-all}#_resources ._link-list li a{color:var(--link-color)!important}#_resources ._image-list{color:var(--foreground);font-size:12px;display:flex;flex-wrap:wrap;padding-left:10px;padding-top:10px}#_resources ._image-list::after{content:"";flex-grow:1000}#_resources ._image-list li{flex-grow:1;cursor:pointer;overflow-y:hidden;margin-right:10px;margin-bottom:10px;border:1px solid var(--border)}#_resources ._image-list li._image{height:100px;font-size:0}#_resources ._image-list li img{height:100px;min-width:100%;-o-object-fit:cover;object-fit:cover}._safe-area #_resources{padding-bottom:calc(10px + env(safe-area-inset-bottom))}',""]),_.exports=d},1505:function(_,d,v){var A=v(7308),C=v(6026),w=v(9405),T=v(9100),R=v(3915),G=v(1932);d=function(){var I=A("viewport");if(!I)return 1;I=R(I.split(","),function(ie){return w(ie)});var z=.25,H=5,Y=1;T(I,function(ie){var oe=(ie=ie.split("="))[0];ie=ie[1],oe==="initial-scale"&&(Y=+ie),oe==="maximum-scale"&&(H=+ie),oe==="minimum-scale"&&(z=+ie)});var ee=C(Y,z,H);return G(ee)?1:ee},_.exports=d},1532:function(_,d,v){var A=v(1009),C=v(5169),w=v(2561);function T(R,G){if(R=w(R),G=w(G),A(R,"_")&&!A(G,"_"))return 1;if(A(G,"_")&&!A(R,"_"))return-1;for(var I,z,H,Y,ee=/^\d+|^\D+/;;){if(!R)return G?-1:0;if(!G)return 1;if(I=R.match(ee)[0],z=G.match(ee)[0],H=!C.isNaN(I),Y=!C.isNaN(z),H&&!Y)return-1;if(Y&&!H)return 1;if(H&&Y){var ie=I-z;if(ie)return ie;if(I.length!==z.length)return+I||+z?z.length-I.length:I.length-z.length}else if(I!==z)return I<z?-1:1;R=R.substring(I.length),G=G.substring(z.length)}}(d=function(R){return R.sort(T)}).comparator=T,_.exports=d},1580:function(_,d){d=function(v,A){var C=v.length-A.length;return C>=0&&v.indexOf(A,C)===C},_.exports=d},1710:function(_,d){d=function(v,A){var C="";if(A<1)return"";for(;A>0;)1&A&&(C+=v),A>>=1,v+=v;return C},_.exports=d},1714:function(_,d,v){v.d(d,{A:function(){return Kn}});var A=v(3029),C=v(2901),w=v(388),T=v(3954),R=v(991),G=v(5361),I=v(2263),z=v.n(I),H=v(3693),Y=v.n(H),ee=v(3915),ie=v.n(ee),oe=v(9405),se=v.n(oe),re=v(5169),fe=v.n(re),ue=v(9548),ge=v.n(ue),ye=(v(6097),v(3249)),be=v.n(ye),ve=(v(6030),v(5004)),Me=v.n(ve);v(8609);function we(pr){var fn="luna-".concat(pr,"-");function Mt(yn){return ie()(se()(yn).split(/\s+/),function(kn){return be()(kn,fn)?kn:kn.replace(/[\w-]+/,function(nr){return"".concat(fn).concat(nr)})}).join(" ")}return function(yn){if(/<[^>]*>/g.test(yn))try{var kn=ge().parse(yn);return Be(kn,function(nr){nr.attrs&&nr.attrs.class&&(nr.attrs.class=Mt(nr.attrs.class))}),ge().stringify(kn)}catch{return Mt(yn)}return Mt(yn)}}function Be(pr,fn){for(var Mt=0,yn=pr.length;Mt<yn;Mt++){var kn=pr[Mt];fn(kn),kn.content&&Be(kn.content,fn)}}var De="ontouchstart"in fe();function Fe(){var pr=Me()();return pr==="os x"?"mac":pr}var Oe=v(9100),Ge=v.n(Oe),ze=v(8105),je=v.n(ze),He=v(5651),Xe=v.n(He),$e=v(961),We=v.n($e);function nt(){try{var pr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nt=function(){return!!pr})()}var Qt=function(pr){function fn(Mt,yn){var kn,nr,dr,Qr,Wr=yn.compName,Gr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Hr=Gr===void 0?"light":Gr;return(0,A.A)(this,fn),nr=this,dr=fn,dr=(0,T.A)(dr),(kn=(0,w.A)(nr,nt()?Reflect.construct(dr,[],(0,T.A)(nr).constructor):dr.apply(nr,Qr))).subComponents=[],kn.compName=Wr,kn.c=we(Wr),kn.options={},kn.container=Mt,kn.$container=Y()(Mt),kn.$container.addClass(["luna-".concat(Wr),kn.c("platform-".concat(Fe()))]),kn.on("optionChange",function(Kr,ti,Mi){var Ci=kn.c;Kr==="theme"&&(kn.$container.rmClass(Ci("theme-".concat(Mi))).addClass(Ci("theme-".concat(ti))),Ge()(kn.subComponents,function(oi){return oi.setOption("theme",ti)}))}),kn.setOption("theme",Hr),kn}return(0,G.A)(fn,pr),(0,C.A)(fn,[{key:"destroy",value:function(){this.destroySubComponents();var Mt=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(Mt("platform-".concat(Fe()))).rmClass(Mt("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()}},{key:"setOption",value:function(Mt,yn){var kn=this,nr=this.options,dr={};typeof Mt=="string"?dr[Mt]=yn:dr=Mt,Ge()(dr,function(Qr,Wr){var Gr=nr[Wr];nr[Wr]=Qr,kn.emit("optionChange",Wr,Qr,Gr)})}},{key:"getOption",value:function(Mt){return this.options[Mt]}},{key:"addSubComponent",value:function(Mt){Mt.setOption("theme",this.options.theme),this.subComponents.push(Mt)}},{key:"removeSubComponent",value:function(Mt){We()(this.subComponents,function(yn){return yn===Mt})}},{key:"destroySubComponents",value:function(){Ge()(this.subComponents,function(Mt){return Mt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Mt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Xe()(Mt,yn),je()(this.options,Mt)}},{key:"find",value:function(Mt){return this.$container.find(this.c(Mt))}}])}(z()),Wt=v(3497),Bn=v.n(Wt),Lt=v(9464),Mn=v.n(Lt),cr=v(5865),In=v.n(cr),Zn=v(4534),$n=v.n(Zn),Rn=v(4844),Dn=v.n(Rn),Gt=v(5902),Jn=v.n(Gt),Nn=v(9389),Xn=v.n(Nn),jn=v(6948),Un=v.n(jn);function bn(){try{var pr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bn=function(){return!!pr})()}_=v.hmd(_);var Kn=function(pr){function fn(Mt){var yn,kn,nr,dr,Qr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,A.A)(this,fn),kn=this,nr=fn,dr=[Mt,{compName:"text-viewer"},Qr],nr=(0,T.A)(nr),(yn=(0,w.A)(kn,bn()?Reflect.construct(nr,dr||[],(0,T.A)(kn).constructor):nr.apply(kn,dr))).lineNum=0,yn.copy=function(){var Wr=yn.c,Gr=yn.options,Hr=Gr.text,Kr=Gr.escape;Dn()(Kr?Hr:Xn()(Un()(Hr)));var ti=yn.$copy.find(Wr(".icon"));ti.addClass(Wr("icon-check")).rmClass(Wr("icon-copy")),setTimeout(function(){ti.rmClass(Wr("icon-check")).addClass(Wr("icon-copy"))},1e3)},yn._updateCopyPos=function(){var Wr=yn.container;yn.$copy.css({top:Wr.scrollTop+5,right:5-Wr.scrollLeft})},yn.initOptions(Qr,{text:"",escape:!0,showLineNumbers:!0,wrapLongLines:!0,maxHeight:1/0}),yn.render=In()(function(){return yn._render()},16),yn.updateCopyPos=$n()(function(){return yn._updateCopyPos()},300),yn.initTpl(),yn.$text=yn.find(".text"),yn.$copy=yn.find(".copy"),De&&yn.$copy.css("opacity","1"),yn.options.text&&yn.render(),yn.bindEvent(),yn.updateHeight(),yn}return(0,G.A)(fn,pr),(0,C.A)(fn,[{key:"append",value:function(Mt){var yn=this,kn=this.options,nr=this.$copy,dr=this.c,Qr=this.$text,Wr=kn.showLineNumbers;if(this.options.text+=Mt,!Wr)return this.$text.append(kn.escape?Jn()(Mt):Mt);var Gr=function(Kr){return Kr.length===0?[]:Kr.split(Qn)}(Mt);Mn()(Gr)&&(Gr=["&nbsp;"]),se()(Bn()(Gr))||Gr.pop();var Hr="";Ge()(Gr,function(Kr,ti){yn.lineNum+=1,Hr+='<div class="'.concat(dr("table-row"),'"><div class="').concat(dr("line-number"),'">').concat(yn.lineNum,'</div><div class="').concat(dr("line-text"),'">').concat(kn.escape?Jn()(Kr):Kr||" ","</div></div>")}),Qr.find(dr(".table")).append(Hr),nr.hide(),Qr.offset().height>40&&nr.show(),this.updateCopyPos()}},{key:"destroy",value:function(){var Mt,yn,kn,nr,dr;this.$container.off("scroll",this.updateCopyPos),(Mt=fn,yn="destroy",kn=this,nr=3,dr=(0,R.A)((0,T.A)(1&nr?Mt.prototype:Mt),yn,kn),2&nr&&typeof dr=="function"?function(Qr){return dr.apply(kn,Qr)}:dr)([])}},{key:"updateHeight",value:function(){var Mt=this.options.maxHeight;Mt>0&&Mt!==1/0?this.$text.css("max-height",Mt):this.$text.css("max-height","none")}},{key:"initTpl",value:function(){this.$container.html(this.c('<div class="text"></div><div class="copy"><span class="icon icon-copy"></span></div>'))}},{key:"bindEvent",value:function(){var Mt=this;this.on("optionChange",function(yn){yn==="maxHeight"?Mt.updateHeight():Mt.render()}),this.$container.on("scroll",this.updateCopyPos),this.$copy.on("click",this.copy)}},{key:"_render",value:function(){var Mt=this.c,yn=this.$text,kn=this.options,nr=kn.text,dr=kn.wrapLongLines,Qr=kn.showLineNumbers;dr?yn.addClass(Mt("wrap-long-lines")):yn.rmClass(Mt("wrap-long-lines")),Qr?yn.addClass(Mt("line-numbers")):yn.rmClass(Mt("line-numbers")),yn.html('<div class="'.concat(Mt("table"),'"></div>')),this.lineNum=0,this.options.text="",this.append(nr)}}])}(Qt),Qn=/\r\n|\r|\n/g;(function(pr,fn){try{pr.exports=fn,pr.exports.default=fn}catch{}})(_,Kn)},1738:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object String]"},_.exports=d},1751:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object Map]"},_.exports=d},1849:function(_,d,v){var A=v(9100),C=v(8971),w=v(3957);d=function(T,R){C(R)&&(R=!0);var G=w(R),I={};return A(T,function(z){I[z]=G?R(z):R}),I},_.exports=d},1909:function(_,d){d=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,_.exports=d},1931:function(_,d,v){var A=v(1947);d=function(C){var w;switch(C=C||"local"){case"local":w=window.localStorage;break;case"session":w=window.sessionStorage}try{var T="test-localStorage-"+Date.now();w.setItem(T,T);var R=w.getItem(T);if(w.removeItem(T),R!==T)throw new Error}catch{return A}return w},_.exports=d},1932:function(_,d,v){var A=v(6097);d=function(C){return A(C)&&C!==+C},_.exports=d},1944:function(_,d,v){v.d(d,{A:function(){return Xn}});var A=v(5458),C=v(4467),w=v(7528),T=v(3029),R=v(2901),G=v(388),I=v(3954),z=v(991),H=v(5361),Y=v(2263),ee=v.n(Y),ie=v(3693),oe=v.n(ie),se=v(3915),re=v.n(se),fe=v(9405),ue=v.n(fe),ge=v(5169),ye=v.n(ge),be=v(9548),ve=v.n(be),Me=(v(6097),v(3249)),we=v.n(Me),Be=(v(6030),v(5004)),De=v.n(Be);v(9410),v(8609);function Fe(pr){var fn="luna-".concat(pr,"-");function Mt(yn){return re()(ue()(yn).split(/\s+/),function(kn){return we()(kn,fn)?kn:kn.replace(/[\w-]+/,function(nr){return"".concat(fn).concat(nr)})}).join(" ")}return function(yn){if(/<[^>]*>/g.test(yn))try{var kn=ve().parse(yn);return Oe(kn,function(nr){nr.attrs&&nr.attrs.class&&(nr.attrs.class=Mt(nr.attrs.class))}),ve().stringify(kn)}catch{return Mt(yn)}return Mt(yn)}}function Oe(pr,fn){for(var Mt=0,yn=pr.length;Mt<yn;Mt++){var kn=pr[Mt];fn(kn),kn.content&&Oe(kn.content,fn)}}ye();var Ge=v(9100),ze=v.n(Ge),je=v(8105),He=v.n(je),Xe=v(5651),$e=v.n(Xe),We=v(961),nt=v.n(We),Qt=v(7e3),Wt=v.n(Qt),Bn=v(1009),Lt=v.n(Bn);function Mn(){try{var pr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mn=function(){return!!pr})()}var cr,In=function(pr){function fn(Mt,yn){var kn,nr,dr=yn.compName,Qr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Wr=Qr===void 0?"light":Qr;return(0,T.A)(this,fn),kn=function(Gr,Hr,Kr){return Hr=(0,I.A)(Hr),(0,G.A)(Gr,Mn()?Reflect.construct(Hr,[],(0,I.A)(Gr).constructor):Hr.apply(Gr,Kr))}(this,fn),kn.subComponents=[],kn.theme="",kn.onThemeChange=function(Gr){kn.options.theme==="auto"&&kn.setTheme(Gr)},kn.compName=dr,kn.c=Fe(dr),kn.options={},kn.container=Mt,kn.$container=oe()(Mt),kn.$container.addClass(["luna-".concat(dr),kn.c("platform-".concat((nr=De()(),nr==="os x"?"mac":nr)))]),kn.on("changeOption",function(Gr,Hr){if(Gr==="theme"&&Hr){var Kr=Hr;Hr==="auto"&&(Kr=Wt().get()),kn.setTheme(Kr),ze()(kn.subComponents,function(ti){return ti.setOption("theme",Hr)})}}),Wt().on("change",kn.onThemeChange),kn.setOption("theme",Wr),kn}return(0,H.A)(fn,pr),(0,R.A)(fn,[{key:"destroy",value:function(){var Mt=this;this.destroySubComponents();var yn=this.$container,kn=yn.attr("class");ze()(kn.split(/\s+/),function(nr){Lt()(nr,"luna-".concat(Mt.compName))&&yn.rmClass(nr)}),yn.html(""),this.emit("destroy"),this.removeAllListeners(),Wt().off("change",this.onThemeChange)}},{key:"setOption",value:function(Mt,yn){var kn=this,nr=this.options,dr={};typeof Mt=="string"?dr[Mt]=yn:dr=Mt,ze()(dr,function(Qr,Wr){var Gr=nr[Wr];nr[Wr]=Qr,Qr!==Gr&&kn.emit("changeOption",Wr,Qr,Gr)})}},{key:"getOption",value:function(Mt){return this.options[Mt]}},{key:"addSubComponent",value:function(Mt){Mt.setOption("theme",this.options.theme),this.subComponents.push(Mt)}},{key:"removeSubComponent",value:function(Mt){nt()(this.subComponents,function(yn){return yn===Mt})}},{key:"destroySubComponents",value:function(){ze()(this.subComponents,function(Mt){return Mt.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(Mt){var yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$e()(Mt,yn),He()(this.options,Mt)}},{key:"find",value:function(Mt){return this.$container.find(this.c(Mt))}},{key:"setTheme",value:function(Mt){var yn=this.c,kn=this.$container;this.theme&&kn.rmClass(yn("theme-".concat(this.theme))),kn.addClass(yn("theme-".concat(Mt))),this.theme=Mt}}])}(ee()),Zn=v(5773),$n=v.n(Zn),Rn=v(5241),Dn=v.n(Rn),Gt=v(6741),Jn=v.n(Gt);function Nn(){try{var pr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nn=function(){return!!pr})()}_=v.hmd(_);var Xn=function(pr){function fn(Mt){var yn,kn,nr,dr,Qr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,T.A)(this,fn),kn=this,nr=fn,dr=[Mt,{compName:"modal"},Qr],nr=(0,I.A)(nr),(yn=(0,G.A)(kn,Nn()?Reflect.construct(nr,dr||[],(0,I.A)(kn).constructor):nr.apply(kn,dr))).render=function(){var Wr=yn,Gr=Wr.options,Hr=Wr.c,Kr=Wr.$body;Gr.title?(Kr.rmClass(Hr("no-title")),yn.$title.text(Gr.title)):Kr.addClass(Hr("no-title")),Gr.footer?(Kr.rmClass(Hr("no-footer")),yn.$footer.html("").append(Gr.footer)):Kr.addClass(Hr("no-footer")),Gr.showClose?yn.$close.show():yn.$close.hide(),yn.$body.css("width",Gr.width+"px"),yn.renderContent()},yn.hide(),yn.initOptions(Qr,{title:"",content:"",footer:"",showClose:!0,width:Qn()}),yn.initTpl(),yn.$title=yn.find(".title"),yn.$content=yn.find(".content"),yn.$body=yn.find(".body"),yn.$footer=yn.find(".footer"),yn.$close=yn.find(".icon-close"),yn.bindEvent(),yn}return(0,H.A)(fn,pr),(0,R.A)(fn,[{key:"show",value:function(){this.render(),this.$container.rmClass(this.c("hidden"))}},{key:"hide",value:function(){this.$container.addClass(this.c("hidden"))}},{key:"destroy",value:function(){var Mt,yn,kn,nr,dr;(Mt=fn,yn="destroy",kn=this,nr=3,dr=(0,z.A)((0,I.A)(1&nr?Mt.prototype:Mt),yn,kn),2&nr&&typeof dr=="function"?function(Qr){return dr.apply(kn,Qr)}:dr)([]),this.$container.rmClass(this.c("hidden"))}},{key:"renderContent",value:function(){this.$content.html("").append(this.options.content)}},{key:"bindEvent",value:function(){var Mt=this;this.$body.on("click",this.c(".icon-close"),function(){return Mt.hide()}),this.on("changeOption",this.render)}},{key:"initTpl",value:function(){this.$container.html(this.c($n()(cr||(cr=(0,w.A)([`
      <div class="body">
        <span class="icon icon-close"></span>
        <div class="title"></div>
        <div class="content"></div>
        <div class="footer"></div>
      </div>
      `])))))}}],[{key:"alert",value:function(Mt){return new Promise(function(yn){var kn=bn(),nr=kn.c;kn.setOption({title:"",content:Mt,width:Qn(),footer:Kn((0,C.A)({},fn.i18n.t("ok"),{type:"primary",onclick:function(){kn.hide(),yn()}}),nr)}),kn.show()})}},{key:"confirm",value:function(Mt){return new Promise(function(yn){var kn=bn(),nr=kn.c;kn.setOption({title:"",content:Mt,width:Qn(),footer:Kn((0,C.A)((0,C.A)({},fn.i18n.t("cancel"),{type:"secondary",onclick:function(){kn.hide(),yn(!1)}}),fn.i18n.t("ok"),{type:"primary",onclick:function(){kn.hide(),yn(!0)}}),nr)}),kn.show()})}},{key:"prompt",value:function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",yn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise(function(kn){var nr=bn(),dr=nr.c,Qr=Dn()("input"+dr(".input"),{value:yn});function Wr(){nr.hide(),kn(Qr.value)}oe()(Qr).on("keypress",function(Hr){(Hr=Hr.origEvent).key==="Enter"&&Wr()}),nr.setOption({title:Mt,content:Qr,width:Qn(),footer:Kn((0,C.A)((0,C.A)({},fn.i18n.t("cancel"),{type:"secondary",onclick:function(){nr.hide(),kn(null)}}),fn.i18n.t("ok"),{type:"primary",onclick:Wr}),dr)}),nr.show();var Gr=Qr.value.length;Qr.setSelectionRange(Gr,Gr),Qr.focus()})}},{key:"setContainer",value:function(Mt){Un=Mt}}])}(In);Xn.i18n=new(Jn())(navigator.language!=="zh-CN"?"en-US":"zh-CN",{"en-US":{ok:"OK",cancel:"Cancel"},"zh-CN":{ok:"",cancel:""}});var jn=null,Un=null;function bn(){return Un||(Un=Dn()("div"),document.body.append(Un)),jn||(jn=new Xn(Un,{showClose:!1})),jn}function Kn(pr,fn){var Mt=re()(pr,function(yn,kn){return Dn()(fn(".button")+fn("."+yn.type),{onclick:yn.onclick},kn)});return Dn().apply(void 0,[fn(".button-group"),{}].concat((0,A.A)(Mt)))}function Qn(){return window.innerWidth<500?window.innerWidth-32:500}(function(pr,fn){try{pr.exports=fn,pr.exports.default=fn}catch{}})(_,Xn)},1947:function(_,d,v){var A=v(3145);d={getItem:function(I){return(w[I]?C[I]:this[I])||null},setItem:function(I,z){w[I]?C[I]=z:this[I]=z},removeItem:function(I){w[I]?delete C[I]:delete this[I]},key:function(I){var z=T();return I>=0&&I<z.length?z[I]:null},clear:function(){for(var I,z=R(),H=0;I=z[H];H++)delete this[I];z=G();for(var Y,ee=0;Y=z[ee];ee++)delete C[Y]}},Object.defineProperty(d,"length",{enumerable:!1,configurable:!0,get:function(){return T().length}});var C={},w={getItem:1,setItem:1,removeItem:1,key:1,clear:1,length:1};function T(){return R().concat(G())}function R(){return A(d).filter(function(I){return!w[I]})}function G(){return A(C)}_.exports=d},1976:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object RegExp]"},_.exports=d},2113:function(_,d,v){var A=v(9100),C=v(3612);d=function(w){w=C(w),A(w,function(T){var R=T.parentNode;R&&R.removeChild(T)})},_.exports=d},2125:function(_,d,v){var A=v(9186),C=v(1738),w=v(9760),T=v(9100);v(3612),d=function(R,G,I){var z=G;return C(G)&&(z="data-"+G),w(G)&&(z={},T(G,function(H,Y){z["data-"+Y]=H})),A(R,z,I)},_.exports=d},2192:function(_,d,v){var A=v(2717),C=v(3722),w=v(6214),T=v(9100),R=v(3145);d=A({initialize:function(G){w(G)?(this.size=G.length,T(G,function(I,z){this[I]=z},this)):(this.size=R(G).length,T(G,function(I,z){this[z]=I},this)),C(this)}}),_.exports=d},2208:function(_,d,v){var A=v(2717);(d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)||(d=A({initialize:function(){},observe:function(){},disconnect:function(){},takeRecords:function(){}})),_.exports=d},2228:function(_,d,v){var A,C,w=v(3981),T=v(1909),R=0;if(T){A=window.requestAnimationFrame,C=window.cancelAnimationFrame;for(var G=["ms","moz","webkit","o"],I=0,z=G.length;I<z&&!A;I++)A=window[G[I]+"RequestAnimationFrame"],C=window[G[I]+"CancelAnimationFrame"]||window[G[I]+"CancelRequestAnimationFrame"];A&&(A=A.bind(window),C=C.bind(window))}C=C||function(H){clearTimeout(H)},(A=A||function(H){var Y=w(),ee=Math.max(0,16-(Y-R)),ie=setTimeout(function(){H(Y+ee)},ee);return R=Y+ee,ie}).cancel=C,d=A,_.exports=d},2230:function(_,d,v){var A=v(3612);d=function(C){var w=(C=A(C))[0].getBoundingClientRect();return{left:w.left+window.pageXOffset,top:w.top+window.pageYOffset,width:Math.round(w.width),height:Math.round(w.height)}},_.exports=d},2263:function(_,d,v){var A=v(2717),C=v(365),w=v(9100),T=v(4951),R=v(8996),G=v(8420);d=A({initialize:function(){this._events=this._events||{}},on:function(I,z){return this._events[I]=this._events[I]||[],this._events[I].push(z),this},off:function(I,z){var H=this._events;if(C(H,I)){var Y=H[I].indexOf(z);return Y>-1&&H[I].splice(Y,1),this}},once:function(I,z){return this.on(I,R(z)),this},emit:function(I){var z=this;if(C(this._events,I)){var H=T(arguments,1),Y=G(this._events[I]);return w(Y,function(ee){return ee.apply(z,H)},this),this}},removeAllListeners:function(I){return I?delete this._events[I]:this._events={},this}},{mixin:function(I){w(["on","off","once","emit","removeAllListeners"],function(z){I[z]=d.prototype[z]}),I._events=I._events||{}}}),_.exports=d},2284:function(_,d,v){function A(C){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},A(C)}v.d(d,{A:function(){return A}})},2388:function(_,d,v){v.d(d,{A:function(){return gn}});var A=v(7528),C=v(3029),w=v(2901),T=v(388),R=v(3954),G=v(991),I=v(5361),z=v(3693),H=v.n(z),Y=v(5773),ee=v.n(Y),ie=v(2263),oe=v.n(ie),se=v(3915),re=v.n(se),fe=v(9405),ue=v.n(fe),ge=v(5169),ye=v.n(ge),be=v(9548),ve=v.n(be),Me=(v(6097),v(3249)),we=v.n(Me),Be=v(6030),De=v.n(Be),Fe=v(5004),Oe=v.n(Fe),Ge=(v(9410),v(8609)),ze=v.n(Ge);function je(rr){var it="luna-".concat(rr,"-");function At(An){return re()(ue()(An).split(/\s+/),function(Ft){return we()(Ft,it)?Ft:Ft.replace(/[\w-]+/,function(Hn){return"".concat(it).concat(Hn)})}).join(" ")}return function(An){if(/<[^>]*>/g.test(An))try{var Ft=ve().parse(An);return He(Ft,function(Hn){Hn.attrs&&Hn.attrs.class&&(Hn.attrs.class=At(Hn.attrs.class))}),ve().stringify(Ft)}catch{return At(An)}return At(An)}}function He(rr,it){for(var At=0,An=rr.length;At<An;At++){var Ft=rr[At];it(Ft),Ft.content&&He(Ft.content,it)}}ye();function Xe(rr,it){var At="clientX";return it[At]?it[At]:it.changedTouches?it.changedTouches[0][At]:0}function $e(rr){return De()(rr.replace("px",""))}var We=v(9100),nt=v.n(We),Qt=v(8105),Wt=v.n(Qt),Bn=v(5651),Lt=v.n(Bn),Mn=v(961),cr=v.n(Mn),In=v(7e3),Zn=v.n(In),$n=v(1009),Rn=v.n($n);function Dn(){try{var rr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dn=function(){return!!rr})()}var Gt,Jn=function(rr){function it(At,An){var Ft,Hn,wn=An.compName,lr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,rt=lr===void 0?"light":lr;return(0,C.A)(this,it),Ft=function(ln,Cn,zn){return Cn=(0,R.A)(Cn),(0,T.A)(ln,Dn()?Reflect.construct(Cn,[],(0,R.A)(ln).constructor):Cn.apply(ln,zn))}(this,it),Ft.subComponents=[],Ft.theme="",Ft.onThemeChange=function(ln){Ft.options.theme==="auto"&&Ft.setTheme(ln)},Ft.compName=wn,Ft.c=je(wn),Ft.options={},Ft.container=At,Ft.$container=H()(At),Ft.$container.addClass(["luna-".concat(wn),Ft.c("platform-".concat((Hn=Oe()(),Hn==="os x"?"mac":Hn)))]),Ft.on("changeOption",function(ln,Cn){if(ln==="theme"&&Cn){var zn=Cn;Cn==="auto"&&(zn=Zn().get()),Ft.setTheme(zn),nt()(Ft.subComponents,function(Sn){return Sn.setOption("theme",Cn)})}}),Zn().on("change",Ft.onThemeChange),Ft.setOption("theme",rt),Ft}return(0,I.A)(it,rr),(0,w.A)(it,[{key:"destroy",value:function(){var At=this;this.destroySubComponents();var An=this.$container,Ft=An.attr("class");nt()(Ft.split(/\s+/),function(Hn){Rn()(Hn,"luna-".concat(At.compName))&&An.rmClass(Hn)}),An.html(""),this.emit("destroy"),this.removeAllListeners(),Zn().off("change",this.onThemeChange)}},{key:"setOption",value:function(At,An){var Ft=this,Hn=this.options,wn={};typeof At=="string"?wn[At]=An:wn=At,nt()(wn,function(lr,rt){var ln=Hn[rt];Hn[rt]=lr,lr!==ln&&Ft.emit("changeOption",rt,lr,ln)})}},{key:"getOption",value:function(At){return this.options[At]}},{key:"addSubComponent",value:function(At){At.setOption("theme",this.options.theme),this.subComponents.push(At)}},{key:"removeSubComponent",value:function(At){cr()(this.subComponents,function(An){return An===At})}},{key:"destroySubComponents",value:function(){nt()(this.subComponents,function(At){return At.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(At){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Lt()(At,An),Wt()(this.options,At)}},{key:"find",value:function(At){return this.$container.find(this.c(At))}},{key:"setTheme",value:function(At){var An=this.c,Ft=this.$container;this.theme&&Ft.rmClass(An("theme-".concat(this.theme))),Ft.addClass(An("theme-".concat(At))),this.theme=At}}])}(oe()),Nn=v(5902),Xn=v.n(Nn),jn=v(5241),Un=v.n(jn),bn=v(2561),Kn=v.n(bn),Qn=v(2708),pr=v.n(Qn),fn=v(8971),Mt=v.n(fn),yn=v(4095),kn=v.n(yn),nr=v(5865),dr=v.n(nr),Qr=v(1532),Wr=v.n(Qr),Gr=v(4236),Hr=v.n(Gr),Kr=v(3957),ti=v.n(Kr),Mi=v(1976),Ci=v.n(Mi),oi=v(6214),Ii=v.n(oi),wr=v(1738),Br=v.n(wr),ui=v(96),vi=v.n(ui),qr=v(6026),br=v.n(qr),er=v(3539),Gn=v.n(er),Er=v(8785),mn=v.n(Er),tr=v(6024),vr=v.n(tr),Ar=v(3981),Tn=v.n(Ar),tt=v(5546),$t=v.n(tt);function dn(){try{var rr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dn=function(){return!!rr})()}_=v.hmd(_);var Qe=H()(document),gn=function(rr){function it(At,An){var Ft,Hn,wn,lr;(0,C.A)(this,it),Hn=this,wn=it,lr=[At,{compName:"data-grid"},An],wn=(0,R.A)(wn),(Ft=(0,T.A)(Hn,dn()?Reflect.construct(wn,lr||[],(0,R.A)(Hn).constructor):wn.apply(Hn,lr))).resizeIdx=0,Ft.resizeStartX=0,Ft.resizeStartLeft=0,Ft.resizeDeltaX=0,Ft.nodes=[],Ft.displayNodes=[],Ft.colWidthsInitialized=!1,Ft.colMap={},Ft.selectedNode=null,Ft.isAscending=!0,Ft.sorted=!1,Ft.colWidths=[],Ft.spaceHeight=0,Ft.topSpaceHeight=0,Ft.lastScrollTop=0,Ft.lastTimestamp=0,Ft.speedToleranceFactor=100,Ft.maxSpeedTolerance=2e3,Ft.minSpeedTolerance=100,Ft.scrollTimer=null,Ft.onResizeColMove=function(Sn){var yr=Ft,ur=yr.resizeIdx,hr=yr.$resizers,fr=yr.colWidths,Sr=yr.$colgroup,Lr=Xe("x",Sn=Sn.origEvent)-Ft.resizeStartX,Nr=fr[ur],xr=fr[ur+1],Cr=mn()(24-Nr,0),Or=Gn()(xr-24,0);Lr=br()(Lr,Cr,Or),Sr.each(function(){var Pr=H()(this).find("col");Pr.eq(ur).css("width",Nr+Lr+"px"),Pr.eq(ur+1).css("width",xr-Lr+"px")}),Ft.resizeDeltaX=Lr;var Ur=Ft.resizeStartLeft+Lr;hr.eq(ur).css("left","".concat(Ur,"px"))},Ft.onResizeColEnd=function(Sn){Ft.onResizeColMove(Sn);var yr=Ft,ur=yr.c,hr=yr.colWidths,fr=yr.resizeIdx,Sr=yr.resizeDeltaX,Lr=Ft.options.columns,Nr=Lr[fr],xr=Lr[fr+1],Cr=hr[fr]+Sr,Or=Cr+(hr[fr+1]-Sr),Ur=Nr.weight+xr.weight,Pr=Ur*(Cr/Or),Vr=Ur-Pr;Nr.weight=Pr,xr.weight=Vr,Ft.applyColWeights(),H()(document.body).rmClass(ur("resizing")),Qe.off($t()("move"),Ft.onResizeColMove),Qe.off($t()("up"),Ft.onResizeColEnd)},Ft.onScroll=function(){var Sn=Ft.dataContainer,yr=Sn.scrollHeight,ur=Sn.clientHeight,hr=Sn.scrollTop;if(!(hr<=0||ur+hr>yr)){var fr=Ft.lastScrollTop,Sr=Ft.lastTimestamp,Lr=Tn()(),Nr=Lr-Sr,xr=hr-fr,Cr=Math.abs(xr/Nr)*Ft.speedToleranceFactor;Nr>1e3&&(Cr=1e3),Cr>Ft.maxSpeedTolerance&&(Cr=Ft.maxSpeedTolerance),Cr<Ft.minSpeedTolerance&&(Cr=Ft.minSpeedTolerance),Ft.lastScrollTop=hr,Ft.lastTimestamp=Lr;var Or=0,Ur=0;fr<hr?(Or=Ft.minSpeedTolerance,Ur=Cr):(Or=Cr,Ur=Ft.minSpeedTolerance),Ft.topSpaceHeight<hr-Or&&Ft.topSpaceHeight+Ft.data.offsetHeight>hr+ur+Ur||(Ft.renderData({topTolerance:2*Or,bottomTolerance:2*Ur}),Ft.scrollTimer&&clearTimeout(Ft.scrollTimer),Ft.scrollTimer=setTimeout(function(){Ft.renderData()},100))}},Ft.renderData=dr()(function(){var Sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},yr=Sn.topTolerance,ur=yr===void 0?500:yr,hr=Sn.bottomTolerance,fr=hr===void 0?500:hr;Ft.sortId&&!Ft.sorted&&Ft.sortNodes(Ft.sortId,Ft.isAscending);for(var Sr=Ft,Lr=Sr.dataContainer,Nr=Sr.displayNodes,xr=Sr.tableBody,Cr=Lr.scrollTop,Or=Cr-ur,Ur=Cr+Lr.clientHeight+fr,Pr=0,Vr=0,xi=Nr.length,Ai=[],Ti=0;Ti<xi;Ti++){var Si=Nr[Ti];Vr<=Ur&&(Vr+20>Or?(Ai.length===0&&vr()(Ti)&&(Ai.push(Nr[Ti-1]),Pr-=20),Ai.push(Si)):Vr<Or&&(Pr+=20)),Vr+=20}Ft.updateSpace(Vr),Ft.updateTopSpace(Pr);for(var ir=document.createDocumentFragment(),bi=0,vn=Ai.length;bi<vn;bi++)ir.appendChild(Ai[bi].container);ir.appendChild(Ft.fillerRow),xr.textContent="",xr.appendChild(ir)},16),Ft.$container.attr("tabindex","0"),Ft.resizeSensor=new(kn())(At),Ft.onResize=dr()(function(){Ft.updateHeight(),Ft.updateWeights(),Ft.renderData()},16),An.height&&(An.maxHeight=An.height,An.minHeight=An.height),Ft.initOptions(An,{minHeight:41,maxHeight:1/0,filter:"",selectable:!1});var rt=Ft.options,ln=rt.columns,Cn=rt.minHeight,zn=rt.maxHeight;return nt()(ln,function(Sn){Lt()(Sn,{sortable:!1}),Ft.colMap[Sn.id]=Sn}),zn<Cn&&Ft.setOption("maxHeight",Cn),Ft.initTpl(),Ft.$headerRow=Ft.find(".header").find("tr"),Ft.$fillerRow=Ft.find(".filler-row"),Ft.fillerRow=Ft.$fillerRow.get(0),Ft.$data=Ft.find(".data"),Ft.data=Ft.$data.get(0),Ft.$tableBody=Ft.$data.find("tbody"),Ft.tableBody=Ft.$tableBody.get(0),Ft.$colgroup=Ft.$container.find("colgroup"),Ft.$dataContainer=Ft.find(".data-container"),Ft.dataContainer=Ft.$dataContainer.get(0),Ft.$space=Ft.find(".data-space"),Ft.space=Ft.$space.get(0),Ft.renderHeader(),Ft.renderResizers(),Ft.updateWeights(),Ft.updateHeight(),Ft.bindEvent(),Ft}return(0,I.A)(it,rr),(0,w.A)(it,[{key:"destroy",value:function(){var At,An,Ft,Hn,wn;(At=it,An="destroy",Ft=this,Hn=3,wn=(0,G.A)((0,R.A)(1&Hn?At.prototype:At),An,Ft),2&Hn&&typeof wn=="function"?function(lr){return wn.apply(Ft,lr)}:wn)([]),this.resizeSensor.destroy(),this.$container.rmAttr("tabindex")}},{key:"remove",value:function(At){var An=this.nodes,Ft=this.displayNodes;cr()(An,function(Hn){return Hn===At}),cr()(Ft,function(Hn){return Hn===At}),At===this.selectedNode&&this.selectNode(null),this.renderData(),this.updateHeight()}},{key:"append",value:function(At){var An=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Lt()(An,{selectable:this.options.selectable});var Ft=new sr(this,At,An);this.nodes.push(Ft);var Hn=this.filterNode(Ft);return Hn&&this.displayNodes.push(Ft),(this.sortId||Hn)&&(this.sortId&&(this.sorted=!1),this.renderData()),this.updateHeight(),Ft}},{key:"setData",value:function(At,An){var Ft=this,Hn=re()(At,function(ln){return Ii()(ln)?(Lt()(ln[1],{selectable:Ft.options.selectable}),ln):[ln,{selectable:Ft.options.selectable}]});if(An){var wn={};nt()(this.nodes,function(ln){wn[ln.data[An]]=ln});var lr=[],rt=[];nt()(Hn,function(ln){var Cn,zn=ln[0][An];wn[zn]?((Cn=wn[zn]).data=ln[0],Cn.render()):Cn=new sr(Ft,ln[0],ln[1]),lr.push(Cn),Ft.filterNode(Cn)&&rt.push(Cn)}),this.selectedNode&&!we()(lr,this.selectedNode)&&this.selectNode(null),this.nodes=lr,this.displayNodes=rt}else this.clearData(),nt()(Hn,function(ln){var Cn=new sr(Ft,ln[0],ln[1]);Ft.nodes.push(Cn),Ft.filterNode(Cn)&&Ft.displayNodes.push(Cn)});this.sortId&&(this.sorted=!1),this.renderData(),this.updateHeight()}},{key:"clear",value:function(){this.clearData(),this.renderData(),this.updateHeight()}},{key:"fit",value:function(){if(!ze()(this.container)){var At=this.$container.parent().get(0),An=window.getComputedStyle(At),Ft=At.clientHeight-$e(An.paddingTop)-$e(An.paddingBottom);this.setOption({minHeight:Ft,maxHeight:Ft})}}},{key:"clearData",value:function(){this.nodes=[],this.displayNodes=[],this.selectNode(null)}},{key:"updateHeight",value:function(){var At=this.$fillerRow,An=this.$container,Ft=this.options,Hn=Ft.maxHeight,wn=Ft.minHeight,lr=this.$headerRow.offset().height+$e(An.css("border-top-width"))+$e(An.css("border-bottom-width"));(wn-=lr)<0&&(wn=0),Hn-=lr;var rt=this.displayNodes.length,ln=0;rt>0&&(ln=20*rt),ln>wn?At.hide():At.show(),ln<wn?ln=wn:ln>=Hn&&(ln=Hn),this.$dataContainer.css({height:ln})}},{key:"selectNode",value:function(At){(Hr()(At)||At!=null&&At.selectable)&&this.selectedNode!==At&&(this.selectedNode&&(this.selectedNode.deselect(),this.selectedNode=null,Hr()(At)&&this.emit("deselect")),Hr()(At)||(this.selectedNode=At,At.select(),this.emit("select",At)))}},{key:"onResizeColStart",value:function(At){var An=this.c,Ft=this.resizeIdx,Hn=this.$resizers;At.stopPropagation(),At.preventDefault(),At=At.origEvent,this.resizeStartX=Xe("x",At),this.resizeStartLeft=$e(Hn.eq(Ft).css("left")),H()(document.body).addClass(An("resizing")),Qe.on($t()("move"),this.onResizeColMove),Qe.on($t()("up"),this.onResizeColEnd)}},{key:"bindEvent",value:function(){var At=this,An=this.c,Ft=this.$headerRow,Hn=this.$tableBody,wn=this.$resizers,lr=this.$dataContainer;this.resizeSensor.addListener(this.onResize),lr.on("scroll",this.onScroll);var rt=this;Hn.on("click",An(".node"),function(ln){var Cn=this;rt.selectNode(this.dataGridNode),setTimeout(function(){Cn.hasDoubleClick||rt.emit("click",ln.origEvent,Cn.dataGridNode)},200)}).on("dblclick",An(".node"),function(ln){var Cn=this;ln.stopPropagation(),this.hasDoubleClick=!0,rt.emit("dblclick",ln.origEvent,this.dataGridNode),setTimeout(function(){Cn.hasDoubleClick=!1},300)}).on("contextmenu",An(".node"),function(ln){ln.preventDefault(),ln.stopPropagation(),rt.selectNode(this.dataGridNode),rt.emit("contextmenu",ln.origEvent,this.dataGridNode)}),Ft.on("click",An(".sortable"),function(ln){ln.stopPropagation();var Cn=H()(this),zn=Cn.data("id"),Sn=Cn.data("order")!=="descending";Cn.data("order",Sn?"descending":"ascending"),Ft.find(An(".icon-caret-up")).hide(),Ft.find(An(".icon-caret-down")).hide();var yr=Cn.find(An(".icon-caret-up")),ur=Cn.find(An(".icon-caret-down"));Sn?yr.show():ur.show(),rt.sortNodes(zn,Sn),rt.renderData(),Ft.find("th").each(function(){var hr=H()(this);hr.data("id")!==zn&&hr.rmAttr("data-order")})}),wn.on($t()("down"),function(ln){var Cn=H()(this);rt.resizeIdx=De()(Cn.data("idx")),rt.onResizeColStart(ln)}),this.on("changeOption",function(ln){switch(ln){case"minHeight":case"maxHeight":At.updateHeight();break;case"filter":At.displayNodes=[],nt()(At.nodes,function(Cn){At.filterNode(Cn)&&At.displayNodes.push(Cn)}),At.selectedNode&&!At.filterNode(At.selectedNode)&&At.selectNode(null),At.renderData(),At.updateHeight()}})}},{key:"sortNodes",value:function(At,An){var Ft=this.colMap[At].comparator||Wr().comparator;function Hn(wn,lr){var rt=wn.data[At],ln=lr.data[At];return pr()(rt)&&(rt=rt.innerText),pr()(ln)&&(ln=ln.innerText),An?Ft(rt,ln):Ft(ln,rt)}this.nodes.sort(Hn),this.displayNodes.sort(Hn),this.sorted=!0,this.sortId=At,this.isAscending=An}},{key:"updateWeights",value:function(){var At=this.container,An=this.$headerRow,Ft=this.options.columns,Hn=At.offsetWidth;if(!this.colWidthsInitialized&&Hn){for(var wn=0,lr=Ft.length;wn<lr;wn++){var rt=Ft[wn];if(!rt.weight){var ln=An.find("th").get(wn).offsetWidth;rt.weight=100*ln/Hn}}this.colWidthsInitialized=!0}this.applyColWeights()}},{key:"applyColWeights",value:function(){var At=this.container,An=this.$colgroup,Ft=this.options.columns,Hn=At.offsetWidth;if(!(Hn<=0)){for(var wn=0,lr=Ft.length,rt=0;rt<lr;rt++)wn+=Ft[rt].weight;var ln="",Cn=0,zn=0;this.colWidths=[];for(var Sn=0;Sn<lr;Sn++){var yr=(Cn+=Ft[Sn].weight)*Hn/wn|0,ur=Math.max(yr-zn,14);zn=yr,ln+='<col style="width:'.concat(ur,'px"></col>'),this.colWidths[Sn]=ur}An.html(ln),this.positionResizers()}}},{key:"positionResizers",value:function(){for(var At=this.colWidths,An=[],Ft=At.length-1,Hn=0;Hn<Ft;Hn++)An[Hn]=(An[Hn-1]||0)+At[Hn];for(var wn=0;wn<Ft;wn++)this.$resizers.eq(wn).css("left",An[wn]+"px")}},{key:"updateTopSpace",value:function(At){this.topSpaceHeight=At,this.data.style.top=At+"px"}},{key:"updateSpace",value:function(At){this.spaceHeight!==At&&(this.spaceHeight=At,this.space.style.height=At+"px")}},{key:"filterNode",value:function(At){var An=this.options.filter;if(An){if(ti()(An))return An(At);if(Ci()(An))return An.test(At.text());if(Br()(An)&&(An=ue()(An)))return we()(vi()(At.text()),vi()(An))}return!0}},{key:"renderHeader",value:function(){var At=this.c,An="",Ft="";nt()(this.options.columns,function(Hn){var wn=Xn()(Hn.title);Hn.sortable?An+=At(`
          <th class="sortable" data-id="`.concat(Hn.id,`">
            `).concat(wn,`
            <span class="icon-caret-up"></span>
            <span class="icon-caret-down"></span>
          </th>`)):An+="<th>".concat(wn,"</th>"),Ft+="<td></td>"}),this.$headerRow.html(An),this.$fillerRow.html(Ft)}},{key:"renderResizers",value:function(){for(var At="",An=this.options.columns.length-1,Ft=0;Ft<An;Ft++)At+=this.c('<div class="resizer" data-idx="'.concat(Ft,'"></div>'));this.$container.append(At),this.$resizers=this.find(".resizer")}},{key:"initTpl",value:function(){this.$container.html(this.c(ee()(Gt||(Gt=(0,A.A)([`
        <div class="header-container">
          <table class="header">
            <colgroup></colgroup>
            <tbody>
              <tr></tr>
            </tbody>
          </table>
        </div>
        <div class="data-container">
          <div class="data-space">
            <table class="data">
              <colgroup></colgroup>
              <tbody>
                <tr class="filler-row"></tr>
              </tbody>
            </table>
          </div>
        </div>
      `])))))}}])}(Jn),sr=function(){return(0,w.A)(function rr(it,At,An){(0,C.A)(this,rr),this.container=Un()("tr"),this.selectable=!1,this.container.dataGridNode=this,this.$container=H()(this.container),this.$container.addClass(it.c("node")),this.dataGrid=it,this.data=At,An.selectable&&(this.selectable=An.selectable,this.$container.addClass(it.c("selectable"))),this.render()},[{key:"text",value:function(){return this.$container.text()}},{key:"select",value:function(){this.$container.addClass(this.dataGrid.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.dataGrid.c("selected"))}},{key:"render",value:function(){var rr=this.data,it=this.$container,At=this.container,An=this.dataGrid.getOption("columns");it.html(""),nt()(An,function(Ft){var Hn=Un()("td"),wn=rr[Ft.id];Mt()(wn)||(pr()(wn)?Hn.appendChild(wn):Hn.innerText=Kn()(wn)),At.appendChild(Hn)})}}])}();(function(rr,it){try{rr.exports=it,rr.exports.default=it}catch{}})(_,gn)},2455:function(_,d){d=function(v){return v},_.exports=d},2480:function(_,d,v){var A=this&&this.__createBinding||(Object.create?function(Lt,Mn,cr,In){In===void 0&&(In=cr);var Zn=Object.getOwnPropertyDescriptor(Mn,cr);Zn&&!("get"in Zn?!Mn.__esModule:Zn.writable||Zn.configurable)||(Zn={enumerable:!0,get:function(){return Mn[cr]}}),Object.defineProperty(Lt,In,Zn)}:function(Lt,Mn,cr,In){In===void 0&&(In=cr),Lt[In]=Mn[cr]}),C=this&&this.__setModuleDefault||(Object.create?function(Lt,Mn){Object.defineProperty(Lt,"default",{enumerable:!0,value:Mn})}:function(Lt,Mn){Lt.default=Mn}),w=this&&this.__importStar||function(Lt){if(Lt&&Lt.__esModule)return Lt;var Mn={};if(Lt!=null)for(var cr in Lt)cr!=="default"&&Object.prototype.hasOwnProperty.call(Lt,cr)&&A(Mn,Lt,cr);return C(Mn,Lt),Mn},T=this&&this.__importDefault||function(Lt){return Lt&&Lt.__esModule?Lt:{default:Lt}};Object.defineProperty(d,"__esModule",{value:!0}),d.enable=function(){if(!ve){var Lt=(0,Y.default)("div",{class:"__chobitsu-hide__",style:{all:"initial"}});G=(0,H.default)(Lt),document.documentElement.appendChild(Lt);var Mn=null,cr=null;if(Lt.attachShadow?cr=Lt.attachShadow({mode:"open"}):Lt.createShadowRoot&&(cr=Lt.createShadowRoot()),cr){var In=document.createElement("style");In.textContent=Be,In.type="text/css",cr.appendChild(In),Mn=document.createElement("div"),cr.appendChild(Mn)}else Mn=document.createElement("div"),Lt.appendChild(Mn),be||((0,ee.default)(Be),be=!0);R=new ge.default(Mn,{monitorResize:(0,fe.default)(re.default.ResizeObserver),showInfo:Me}),window.addEventListener("resize",Qt),ve=!0}},d.disable=function(){R.destroy(),G.remove(),window.removeEventListener("resize",Qt),ve=!1},d.highlightNode=De,d.hideHighlight=Fe,d.setShowViewportSizeOnResize=function(Lt){Oe=Lt.show},d.setInspectMode=function(Lt){Ge=Lt.highlightConfig,ze=Lt.mode};var R,G,I=v(9893),z=v(6192),H=T(v(3693)),Y=T(v(5241)),ee=T(v(3048)),ie=T(v(5651)),oe=T(v(8105)),se=T(v(8665)),re=T(v(5169)),fe=T(v(9e3)),ue=T(v(8534)),ge=T(v(9196)),ye=w(v(2484)),be=!1,ve=!1,Me=(0,ue.default)("clip-path","polygon(50% 0px, 0px 100%, 100% 100%)"),we="ontouchstart"in re.default,Be=v(7119).replace("/*# sourceMappingURL=luna-dom-highlighter.css.map*/","");function De(Lt){var Mn,cr=Lt.nodeId,In=Lt.highlightConfig,Zn=Lt.objectId;cr&&(Mn=(0,I.getNode)(cr)),Zn&&(Mn=ye.getObj(Zn)),Mn.nodeType!==1&&Mn.nodeType!==3||((0,ie.default)(In,{contentColor:"transparent",paddingColor:"transparent",borderColor:"transparent",marginColor:"transparent"}),Me||(0,oe.default)(In,{showInfo:!1}),R.highlight(Mn,In))}function Fe(){R.hide()}var Oe=!1,Ge={},ze="none";function je(Lt){if(we){var Mn=Lt.touches[0]||Lt.changedTouches[0];return document.elementFromPoint(Mn.clientX,Mn.clientY)}return document.elementFromPoint(Lt.clientX,Lt.clientY)}var He=-1;function Xe(Lt){if(ze!=="none"){var Mn=je(Lt);if(Mn&&(0,I.isValidNode)(Mn)){var cr=(0,I.getNodeId)(Mn);cr||(cr=(0,z.pushNodesToFrontend)(Mn)),De({nodeId:cr,highlightConfig:Ge}),cr!==He&&(se.default.trigger("Overlay.nodeHighlightRequested",{nodeId:cr}),He=cr)}}}function $e(Lt){if(ze!=="none"){Lt.preventDefault(),Lt.stopImmediatePropagation();var Mn=je(Lt);se.default.trigger("Overlay.inspectNodeRequested",{backendNodeId:(0,I.getNodeId)(Mn)}),He=-1,Fe()}}function We(Lt,Mn){document.documentElement.addEventListener(Lt,Mn,!0)}we?(We("touchstart",Xe),We("touchmove",Xe),We("touchend",$e)):(We("mousemove",Xe),We("mouseout",function(){ze!=="none"&&Fe()}),We("click",$e));var nt=(0,Y.default)("div",{class:"__chobitsu-hide__",style:{position:"fixed",right:0,top:0,background:"#fff",fontSize:13,opacity:.5,padding:"4px 6px"}});function Qt(){Oe&&(Bn.text("".concat(window.innerWidth,"px  ").concat(window.innerHeight,"px")),Wt?clearTimeout(Wt):document.documentElement.appendChild(nt),Wt=setTimeout(function(){Bn.remove(),Wt=null},1e3))}var Wt,Bn=(0,H.default)(nt)},2484:function(_,d,v){var A=this&&this.__importDefault||function($e){return $e&&$e.__esModule?$e:{default:$e}};Object.defineProperty(d,"__esModule",{value:!0}),d.clear=function(){ge.clear(),ye.clear(),be.clear()},d.wrap=Be,d.getObj=De,d.releaseObj=function($e){var We=De($e);ye.delete(We),be.delete($e),ge.delete($e)},d.getProperties=function($e){for(var We=$e.accessorPropertiesOnly,nt=$e.objectId,Qt=$e.ownProperties,Wt=$e.generatePreview,Bn=[],Lt={prototype:!Qt,unenumerable:!0,symbol:!We},Mn=ge.get(nt),cr=be.get(nt),In=(0,oe.default)(Mn,Lt),Zn=(0,re.default)(Mn),$n=0,Rn=In.length;$n<Rn;$n++){var Dn=In[$n],Gt=void 0;try{Gt=cr[Dn]}catch{}var Jn={name:(0,C.default)(Dn),isOwn:(0,ue.has)(cr,Dn)},Nn=Object.getOwnPropertyDescriptor(Mn,Dn);if(!Nn&&Zn&&(Nn=Object.getOwnPropertyDescriptor(Zn,Dn)),Nn){if(We&&!Nn.get&&!Nn.set)continue;Jn.configurable=Nn.configurable,Jn.enumerable=Nn.enumerable,Jn.writable=Nn.writable,Nn.get&&(Jn.get=Be(Nn.get)),Nn.set&&(Jn.set=Be(Nn.set))}Zn&&(0,ue.has)(Zn,Dn)&&Jn.enumerable&&(Jn.isOwn=!0);var Xn=!0;!Jn.isOwn&&Jn.get&&(Xn=!1),Xn&&((0,fe.default)(Dn)?(Jn.symbol=Be(Dn),Jn.value={type:"undefined"}):Jn.value=Be(Gt,{generatePreview:Wt})),We&&(0,R.default)(Gt)&&(0,se.default)(Gt)||Bn.push(Jn)}if(!Zn||Qt||Xe(Mn)||Bn.push({name:"__proto__",configurable:!0,enumerable:!1,isOwn:(0,ue.has)(Mn,"__proto__"),value:Be(Zn,{self:cr}),writable:!1}),We)return{result:Bn};var jn=[];if(Zn&&!Xe(Mn)&&jn.push({name:"[[Prototype]]",value:Be(Zn,{self:cr})}),(0,z.default)(Mn)||(0,H.default)(Mn)){var Un=function(bn){for(var Kn=ve.get(bn),Qn=Kn?De(Kn):[],pr=bn.entries(),fn=pr.next().value;fn;)(0,z.default)(bn)?Qn.push(new He(fn[1],fn[0])):Qn.push(new He(fn[1])),fn=pr.next().value;return Qn}(Mn);jn.push({name:"[[Entries]]",value:Be(Un)})}return{internalProperties:jn,result:Bn}};var C=A(v(2561)),w=A(v(4236)),T=A(v(6214)),R=A(v(3957)),G=A(v(2708)),I=A(v(2650)),z=A(v(1751)),H=A(v(5945)),Y=A(v(1976)),ee=A(v(3145)),ie=A(v(1168)),oe=A(v(7514)),se=A(v(9122)),re=A(v(5427)),fe=A(v(9350)),ue=v(916),ge=new Map,ye=new Map,be=new Map,ve=new Map,Me=1;function we($e,We){var nt=ye.get($e);return nt||(nt=JSON.stringify({injectedScriptId:0,id:Me++}),ye.set($e,nt),ge.set(nt,$e),be.set(nt,We),nt)}function Be($e,We){var nt=We===void 0?{}:We,Qt=nt.generatePreview,Wt=Qt!==void 0&&Qt,Bn=nt.self,Lt=Bn===void 0?$e:Bn,Mn=je($e),cr=Mn.type,In=Mn.subtype;return cr==="undefined"?Mn:cr==="string"||cr==="boolean"||In==="null"?(Mn.value=$e,Mn):(Mn.description=ze($e,Lt),cr==="number"?(Mn.value=$e,Mn):cr==="symbol"?(Mn.objectId=we($e,Lt),Mn):(Mn.className=cr==="function"?"Function":In==="array"?"Array":In==="map"?"Map":In==="set"?"Set":In==="regexp"?"RegExp":In==="error"?$e.name:(0,ue.getType)($e,!1),Wt&&(Mn.preview=Oe($e,Lt)),Mn.objectId=we($e,Lt),Mn))}function De($e){return ge.get($e)}var Fe=5;function Oe($e,We){We===void 0&&(We=$e);var nt=je($e);nt.description=ze($e,We);var Qt=!1,Wt=[],Bn=(0,ee.default)($e),Lt=Bn.length;Lt>Fe&&(Lt=Fe,Qt=!0);for(var Mn=0;Mn<Lt;Mn++){var cr=Bn[Mn];Wt.push(Ge(cr,We[cr]))}if(nt.properties=Wt,(0,z.default)($e)){for(var In=[],Zn=(Mn=0,$e.keys()),$n=Zn.next().value;$n;){if(Mn>Fe){Qt=!0;break}In.push({key:Oe($n),value:Oe($e.get($n))}),Mn++,$n=Zn.next().value}nt.entries=In}else if((0,H.default)($e)){var Rn=[],Dn=(Mn=0,$e.keys());for($n=Dn.next().value;$n;){if(Mn>Fe){Qt=!0;break}Rn.push({value:Oe($n)}),Mn++,$n=Dn.next().value}nt.entries=Rn}return nt.overflow=Qt,nt}function Ge($e,We){var nt=je(We);nt.name=$e;var Qt,Wt=nt.subtype;return Qt=nt.type==="object"?Wt==="null"?"null":Wt==="array"?"Array(".concat(We.length,")"):Wt==="map"?"Map(".concat(We.size,")"):Wt==="set"?"Set(".concat(We.size,")"):(0,ue.getType)(We,!1):(0,C.default)(We),nt.value=Qt,nt}function ze($e,We){We===void 0&&(We=$e);var nt=je($e),Qt=nt.type,Wt=nt.subtype;return Qt==="string"?$e:Qt==="number"||Qt==="symbol"?(0,C.default)($e):Qt==="function"?(0,ie.default)($e):Wt==="array"?"Array(".concat($e.length,")"):Wt==="map"?"Map(".concat(We.size,")"):Wt==="set"?"Set(".concat(We.size,")"):Wt==="regexp"?(0,C.default)($e):Wt==="error"?$e.stack:Wt==="internal#entry"?$e.name?'{"'.concat((0,C.default)($e.name),'" => "').concat((0,C.default)($e.value),'"}'):'"'.concat((0,C.default)($e.value),'"'):(0,ue.getType)($e,!1)}function je($e){var We=typeof $e,nt="object";if($e instanceof He)nt="internal#entry";else if((0,w.default)($e))nt="null";else if((0,T.default)($e))nt="array";else if((0,Y.default)($e))nt="regexp";else if((0,I.default)($e))nt="error";else if((0,z.default)($e))nt="map";else if((0,H.default)($e))nt="set";else try{(0,G.default)($e)&&(nt="node")}catch{}return{type:We,subtype:nt}}var He=function($e,We){We&&(this.name=We),this.value=$e};function Xe($e){return $e instanceof He||!!($e[0]&&$e[0]instanceof He)}},2508:function(_,d,v){var A=v(6186),C=v(2561),w=/{{(.*?)}}/g;d=function(T,R){return T.replace(w,function(G,I){return C(A(R,I))})},_.exports=d},2510:function(_,d){d=function(v,A){return A=A==null?v.length-1:+A,function(){var C,w=Math.max(arguments.length-A,0),T=new Array(w);for(C=0;C<w;C++)T[C]=arguments[C+A];switch(A){case 0:return v.call(this,T);case 1:return v.call(this,arguments[0],T);case 2:return v.call(this,arguments[0],arguments[1],T)}var R=new Array(A+1);for(C=0;C<A;C++)R[C]=arguments[C];return R[A]=T,v.apply(this,R)}},_.exports=d},2517:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object Date]"},_.exports=d},2556:function(_,d,v){v.d(d,{A:function(){return Gt}});var A=v(3029),C=v(2901),w=v(388),T=v(3954),R=v(5361),G=v(3693),I=v.n(G),z=v(5630),H=v.n(z),Y=v(8438),ee=v.n(Y),ie=v(5241),oe=v.n(ie),se=v(2263),re=v.n(se),fe=v(3915),ue=v.n(fe),ge=v(9405),ye=v.n(ge),be=v(5169),ve=v.n(be),Me=v(9548),we=v.n(Me),Be=(v(6097),v(3249)),De=v.n(Be),Fe=(v(6030),v(5004)),Oe=v.n(Fe);v(9410),v(8609);function Ge(Nn){var Xn="luna-".concat(Nn,"-");function jn(Un){return ue()(ye()(Un).split(/\s+/),function(bn){return De()(bn,Xn)?bn:bn.replace(/[\w-]+/,function(Kn){return"".concat(Xn).concat(Kn)})}).join(" ")}return function(Un){if(/<[^>]*>/g.test(Un))try{var bn=we().parse(Un);return ze(bn,function(Kn){Kn.attrs&&Kn.attrs.class&&(Kn.attrs.class=jn(Kn.attrs.class))}),we().stringify(bn)}catch{return jn(Un)}return jn(Un)}}function ze(Nn,Xn){for(var jn=0,Un=Nn.length;jn<Un;jn++){var bn=Nn[jn];Xn(bn),bn.content&&ze(bn.content,Xn)}}ve();var je=v(9100),He=v.n(je),Xe=v(8105),$e=v.n(Xe),We=v(5651),nt=v.n(We),Qt=v(961),Wt=v.n(Qt),Bn=v(7e3),Lt=v.n(Bn),Mn=v(1009),cr=v.n(Mn);function In(){try{var Nn=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(In=function(){return!!Nn})()}var Zn=function(Nn){function Xn(jn,Un){var bn,Kn,Qn=Un.compName,pr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,fn=pr===void 0?"light":pr;return(0,A.A)(this,Xn),bn=function(Mt,yn,kn){return yn=(0,T.A)(yn),(0,w.A)(Mt,In()?Reflect.construct(yn,[],(0,T.A)(Mt).constructor):yn.apply(Mt,kn))}(this,Xn),bn.subComponents=[],bn.theme="",bn.onThemeChange=function(Mt){bn.options.theme==="auto"&&bn.setTheme(Mt)},bn.compName=Qn,bn.c=Ge(Qn),bn.options={},bn.container=jn,bn.$container=I()(jn),bn.$container.addClass(["luna-".concat(Qn),bn.c("platform-".concat((Kn=Oe()(),Kn==="os x"?"mac":Kn)))]),bn.on("changeOption",function(Mt,yn){if(Mt==="theme"&&yn){var kn=yn;yn==="auto"&&(kn=Lt().get()),bn.setTheme(kn),He()(bn.subComponents,function(nr){return nr.setOption("theme",yn)})}}),Lt().on("change",bn.onThemeChange),bn.setOption("theme",fn),bn}return(0,R.A)(Xn,Nn),(0,C.A)(Xn,[{key:"destroy",value:function(){var jn=this;this.destroySubComponents();var Un=this.$container,bn=Un.attr("class");He()(bn.split(/\s+/),function(Kn){cr()(Kn,"luna-".concat(jn.compName))&&Un.rmClass(Kn)}),Un.html(""),this.emit("destroy"),this.removeAllListeners(),Lt().off("change",this.onThemeChange)}},{key:"setOption",value:function(jn,Un){var bn=this,Kn=this.options,Qn={};typeof jn=="string"?Qn[jn]=Un:Qn=jn,He()(Qn,function(pr,fn){var Mt=Kn[fn];Kn[fn]=pr,pr!==Mt&&bn.emit("changeOption",fn,pr,Mt)})}},{key:"getOption",value:function(jn){return this.options[jn]}},{key:"addSubComponent",value:function(jn){jn.setOption("theme",this.options.theme),this.subComponents.push(jn)}},{key:"removeSubComponent",value:function(jn){Wt()(this.subComponents,function(Un){return Un===jn})}},{key:"destroySubComponents",value:function(){He()(this.subComponents,function(jn){return jn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(jn){var Un=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};nt()(jn,Un),$e()(this.options,jn)}},{key:"find",value:function(jn){return this.$container.find(this.c(jn))}},{key:"setTheme",value:function(jn){var Un=this.c,bn=this.$container;this.theme&&bn.rmClass(Un("theme-".concat(this.theme))),bn.addClass(Un("theme-".concat(jn))),this.theme=jn}}])}(re()),$n=v(8971),Rn=v.n($n);function Dn(){try{var Nn=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dn=function(){return!!Nn})()}_=v.hmd(_);var Gt=function(Nn){function Xn(jn){var Un,bn,Kn,Qn,pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,A.A)(this,Xn),bn=this,Kn=Xn,Qn=[jn,{compName:"notification"},pr],Kn=(0,T.A)(Kn),(Un=(0,w.A)(bn,Dn()?Reflect.construct(Kn,Qn||[],(0,T.A)(bn).constructor):Kn.apply(bn,Qn))).notifications=[],Un.initOptions(pr,{position:{x:"right",y:"bottom"},inline:!1,duration:2e3}),Un.options.inline||Un.$container.addClass(Un.c("full")),Un.initTpl(),Un}return(0,R.A)(Xn,Nn),(0,C.A)(Xn,[{key:"notify",value:function(jn){var Un=this,bn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Rn()(bn.duration)&&(bn.duration=this.options.duration);var Kn=new Jn(this,jn,{icon:bn.icon||"none"});this.notifications.push(Kn),this.add(Kn),setTimeout(function(){return Un.remove(Kn.id)},bn.duration)}},{key:"dismissAll",value:function(){for(var jn=this.notifications,Un=jn[0];Un;)this.remove(Un.id),Un=jn[0]}},{key:"add",value:function(jn){this.container.appendChild(jn.container)}},{key:"remove",value:function(jn){var Un=this.notifications,bn=ee()(Un,function(Qn){return Qn.id===jn});if(bn){bn.destroy();var Kn=Un.indexOf(bn);Un.splice(Kn,1)}}},{key:"initTpl",value:function(){var jn=this.$container,Un=this.options.position,bn=Un.x,Kn=Un.y,Qn="flex-end",pr="flex-end";switch(bn){case"center":pr="center";break;case"left":pr="flex-start"}Kn==="top"&&(Qn="flex-start"),jn.attr("style","justify-content: ".concat(Qn,"; align-items: ").concat(pr))}}])}(Zn),Jn=function(){return(0,C.A)(function Nn(Xn,jn,Un){(0,A.A)(this,Nn),this.container=oe()("div"),this.$container=I()(this.container),this.notification=Xn,this.content=jn,this.id=H()("luna-notification-"),this.$container.attr({id:this.id,class:Xn.c("item ".concat(Xn.getOption("position").y==="bottom"?"lower":"upper"))}),this.initTpl(Un.icon)},[{key:"destroy",value:function(){this.$container.remove()}},{key:"initTpl",value:function(Nn){var Xn=Nn;Nn==="success"?Xn="check":Nn==="warning"&&(Xn="warn");var jn=Nn==="none"?"":'<div class="icon-container '.concat(Nn,'"><span class="icon icon-').concat(Xn,'"></span></div>');this.$container.html(this.notification.c("".concat(jn,'<div class="content">').concat(this.content,"</div>")))}}])}();(function(Nn,Xn){try{Nn.exports=Xn,Nn.exports.default=Xn}catch{}})(_,Gt)},2561:function(_,d){d=function(v){return v==null?"":v.toString()},_.exports=d},2571:function(_,d,v){var A=v(5693),C=v(9100);d=function(w,T,R){var G=[];return T=A(T,R),C(w,function(I,z,H){T(I,z,H)&&G.push(I)}),G},_.exports=d},2627:function(_,d,v){var A=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(d,"__esModule",{value:!0}),d.setGlobal=function(H,Y){z[H]=Y},d.default=function(H){var Y;(0,I.default)(z,function(ee,ie){window[ie]||(window[ie]=ee)});try{Y=eval.call(window,"(".concat(H,")"))}catch{Y=eval.call(window,H)}return function(){(0,I.default)(z,function(ee,ie){window[ie]&&window[ie]===ee&&delete window[ie]})}(),Y};var C=A(v(1738)),w=A(v(4844)),T=A(v(769)),R=A(v(3145)),G=A(v(8862)),I=A(v(9100)),z={copy:function(H){(0,C.default)(H)||(H=JSON.stringify(H,null,2)),(0,w.default)(H)},$:function(H){return document.querySelector(H)},$$:function(H){return(0,T.default)(document.querySelectorAll(H))},$x:function(H){return(0,G.default)(H)},keys:R.default}},2650:function(_,d,v){var A=v(3974);d=function(C){switch(A(C)){case"[object Error]":case"[object DOMException]":return!0;default:return C instanceof Error}},_.exports=d},2693:function(_,d,v){(d=v(6314)(!1)).push([_.id,'._container a,._container abbr,._container acronym,._container address,._container applet,._container article,._container aside,._container audio,._container b,._container big,._container blockquote,._container canvas,._container caption,._container center,._container cite,._container code,._container dd,._container del,._container details,._container dfn,._container dl,._container dt,._container em,._container embed,._container fieldset,._container figcaption,._container figure,._container footer,._container form,._container h1,._container h2,._container h3,._container h4,._container h5,._container h6,._container header,._container hgroup,._container i,._container iframe,._container img,._container ins,._container kbd,._container label,._container legend,._container li,._container mark,._container menu,._container nav,._container object,._container ol,._container output,._container p,._container pre,._container q,._container ruby,._container s,._container samp,._container section,._container small,._container span,._container strike,._container strong,._container sub,._container summary,._container sup,._container table,._container tbody,._container td,._container tfoot,._container th,._container thead,._container time,._container tr,._container tt,._container u,._container ul,._container var,._container video{margin:0;padding:0;border:0;font-size:100%}._container article,._container aside,._container details,._container figcaption,._container figure,._container footer,._container header,._container hgroup,._container menu,._container nav,._container section{display:block}._container body{line-height:1}._container ol,._container ul{list-style:none}._container blockquote,._container q{quotes:none}._container blockquote:after,._container blockquote:before,._container q:after,._container q:before{content:"";content:none}._container table{border-collapse:collapse;border-spacing:0;color:inherit;font-size:1em;font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;text-decoration:inherit;white-space:inherit}',""]),_.exports=d},2708:function(_,d){d=function(v){return!(!v||v.nodeType!==1)},_.exports=d},2717:function(_,d,v){var A=v(8105),C=v(769),w=v(8009),T=v(6186),R=v(4460),G=(d=function(I,z){return G.extend(I,z)}).Base=function I(z,H,Y){Y=Y||{};var ee=H.className||T(H,"initialize.name")||"";delete H.className;var ie=function(){var oe=C(arguments);return this.initialize&&this.initialize.apply(this,oe)||this};if(!R)try{ie=new Function("toArr","return function "+ee+"(){var args = toArr(arguments);return this.initialize ? this.initialize.apply(this, args) || this : this;};")(C)}catch{}return w(ie,z),ie.prototype.constructor=ie,ie.extend=function(oe,se){return I(ie,oe,se)},ie.inherits=function(oe){w(ie,oe)},ie.methods=function(oe){return A(ie.prototype,oe),ie},ie.statics=function(oe){return A(ie,oe),ie},ie.methods(H).statics(Y),ie}(Object,{className:"Base",callSuper:function(I,z,H){return I.prototype[z].apply(this,H)},toString:function(){return this.constructor.name}});_.exports=d},2767:function(_,d,v){var A=v(1738),C=v(5282);d=function(H){return A(H)?w[H]:z[H]};for(var w={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,windows:91,"right windows":92,"windows menu":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},T=97;T<123;T++)w[String.fromCharCode(T)]=T-32;for(var R=48;R<58;R++)w[R-48]=R;for(var G=1;G<13;G++)w["f"+G]=G+111;for(var I=0;I<10;I++)w["numpad "+I]=I+96;var z=C(w);_.exports=d},2797:function(_,d,v){var A=v(5693),C=v(5793),w=v(3145);d=function(T,R,G){R=A(R,G);for(var I=!C(T)&&w(T),z=(I||T).length,H=0;H<z;H++){var Y=I?I[H]:H;if(R(T[Y],Y,T))return!0}return!1},_.exports=d},2806:function(_,d,v){var A=v(6949),C=v(8971),w=v(2561),T=v(9350),R=v(1738);d=function(G,I,z){var H,Y=(I=A(I,G)).pop();for(H=I.shift();!C(H);){if(R(H)||T(H)||(H=w(H)),H==="__proto__"||H==="constructor"||H==="prototype")return;G[H]||(G[H]={}),G=G[H],H=I.shift()}G[Y]=z},_.exports=d},2884:function(_,d,v){var A=v(6097);d=function(C){return A(C)&&C%1==0},_.exports=d},2901:function(_,d,v){v.d(d,{A:function(){return w}});var A=v(816);function C(T,R){for(var G=0;G<R.length;G++){var I=R[G];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(T,(0,A.A)(I.key),I)}}function w(T,R,G){return R&&C(T.prototype,R),G&&C(T,G),Object.defineProperty(T,"prototype",{writable:!1}),T}},2971:function(_,d,v){var A=v(6214);function C(w,T){for(var R,G=w.length,I=-1;G--;)R=w[++I],A(R)?C(R,T):T.push(R);return T}d=function(w){return C(w,[])},_.exports=d},2980:function(_,d,v){var A=v(4209).A;_.exports=A,_.exports.default=A},2989:function(_,d,v){var A=v(3974),C=v(1932),w=v(96),T=v(3159);d=function(G){var I,z=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return G===null&&(I="Null"),G===void 0&&(I="Undefined"),C(G)&&(I="NaN"),T(G)&&(I="Buffer"),I||(I=A(G).match(R))&&(I=I[1]),I?z?w(I):I:""};var R=/^\[object\s+(.*?)]$/;_.exports=d},2990:function(_,d){d={encode:function(T){var R,G,I=[],z=T.length,H=z%3;z-=H;for(var Y=0;Y<z;Y+=3)I.push((R=(T[Y]<<16)+(T[Y+1]<<8)+T[Y+2],A[R>>18&63]+A[R>>12&63]+A[R>>6&63]+A[63&R]));return z=T.length,H===1?(G=T[z-1],I.push(A[G>>2]),I.push(A[G<<4&63]),I.push("==")):H===2&&(G=(T[z-2]<<8)+T[z-1],I.push(A[G>>10]),I.push(A[G>>4&63]),I.push(A[G<<2&63]),I.push("=")),I.join("")},decode:function(T){var R=T.length,G=0;T[R-2]==="="?G=2:T[R-1]==="="&&(G=1);var I,z,H,Y,ee,ie,oe,se=new Array(3*R/4-G);for(R=G>0?R-4:R,I=0,z=0;I<R;I+=4){var re=(H=T[I],Y=T[I+1],ee=T[I+2],ie=T[I+3],v[H.charCodeAt(0)]<<18|v[Y.charCodeAt(0)]<<12|v[ee.charCodeAt(0)]<<6|v[ie.charCodeAt(0)]);se[z++]=re>>16&255,se[z++]=re>>8&255,se[z++]=255&re}return G===2?(oe=v[T.charCodeAt(I)]<<2|v[T.charCodeAt(I+1)]>>4,se[z++]=255&oe):G===1&&(oe=v[T.charCodeAt(I)]<<10|v[T.charCodeAt(I+1)]<<4|v[T.charCodeAt(I+2)]>>2,se[z++]=oe>>8&255,se[z++]=255&oe),se}};for(var v=[],A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,w=A.length;C<w;C++)v[A.charCodeAt(C)]=C;_.exports=d},3019:function(_,d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=[["menuitem","command"],["rel","roletype"],["article","article"],["header","banner"],["input","button",[["type","checkbox"]]],["summary","button",[["aria-expanded","false"]]],["summary","button",[["aria-expanded","true"]]],["input","button",[["type","button"]]],["input","button",[["type","image"]]],["input","button",[["type","reset"]]],["input","button",[["type","submit"]]],["button","button"],["td","cell"],["input","checkbox",[["type","checkbox"]]],["th","columnheader"],["input","combobox",[["type","email"]]],["input","combobox",[["type","search"]]],["input","combobox",[["type","tel"]]],["input","combobox",[["type","text"]]],["input","combobox",[["type","url"]]],["input","combobox",[["type","url"]]],["select","combobox"],["select","combobox",[["size",1]]],["aside","complementary"],["footer","contentinfo"],["dd","definition"],["dialog","dialog"],["body","document"],["figure","figure"],["form","form"],["form","form"],["form","form"],["span","generic"],["div","generic"],["table","grid",[["role","grid"]]],["td","gridcell",[["role","gridcell"]]],["details","group"],["fieldset","group"],["optgroup","group"],["h1","heading"],["h2","heading"],["h3","heading"],["h4","heading"],["h5","heading"],["h6","heading"],["img","img"],["img","img"],["a","link"],["area","link"],["link","link"],["menu","list"],["ol","list"],["ul","list"],["select","listbox"],["select","listbox"],["select","listbox"],["datalist","listbox"],["li","listitem"],["main","main"],["math","math"],["menuitem","command"],["nav","navigation"],["option","option"],["progress","progressbar"],["input","radio",[["type","radio"]]],["section","region"],["section","region"],["frame","region"],["tr","row"],["tbody","rowgroup"],["tfoot","rowgroup"],["thead","rowgroup"],["th","rowheader",[["scope","row"]]],["input","searchbox",[["type","search"]]],["hr","separator"],["input","slider",[["type","range"]]],["input","spinbutton",[["type","number"]]],["output","status"],["table","table"],["dfn","term"],["input","textbox"],["input","textbox",[["type","email"]]],["input","textbox",[["type","tel"]]],["input","textbox",[["type","text"]]],["input","textbox",[["type","url"]]],["textarea","textbox"]]},3029:function(_,d,v){function A(C,w){if(!(C instanceof w))throw new TypeError("Cannot call a class as a function")}v.d(d,{A:function(){return A}})},3048:function(_,d){d=function(v){var A=document.createElement("style");return A.textContent=v,A.type="text/css",document.head.appendChild(A),A},_.exports=d},3089:function(_,d,v){var A=v(3145);d=v(6307)(A),_.exports=d},3145:function(_,d,v){var A=v(365);d=Object.keys?Object.keys:function(C){var w=[];for(var T in C)A(C,T)&&w.push(T);return w},_.exports=d},3159:function(_,d,v){var A=v(3957);d=function(C){return C!=null&&(!!C._isBuffer||C.constructor&&A(C.constructor.isBuffer)&&C.constructor.isBuffer(C))},_.exports=d},3249:function(_,d,v){var A=v(7375),C=v(1738),w=v(5793),T=v(5119);d=function(R,G){return C(R)?R.indexOf(G)>-1:(w(R)||(R=T(R)),A(R,G)>=0)},_.exports=d},3270:function(_,d,v){v.r(d),v.d(d,{default:function(){return se}});var A={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},C=/([astvzqmhlc])([^astvzqmhlc]*)/gi,w=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,T=function(re){var fe=[],ue=String(re).trim();return ue[0]!=="M"&&ue[0]!=="m"||ue.replace(C,function(ge,ye,be){var ve=ye.toLowerCase(),Me=function(Be){var De=Be.match(w);return De?De.map(Number):[]}(be),we=ye;if(ve==="m"&&Me.length>2&&(fe.push([we].concat(Me.splice(0,2))),ve="l",we=we==="m"?"l":"L"),Me.length<A[ve])return"";for(fe.push([we].concat(Me.splice(0,A[ve])));Me.length>=A[ve]&&Me.length&&A[ve];)fe.push([we].concat(Me.splice(0,A[ve])));return""}),fe};function R(re,fe){for(var ue=0;ue<fe.length;ue++){var ge=fe[ue];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(re,ge.key,ge)}}function G(re){return function(fe){if(Array.isArray(fe))return I(fe)}(re)||function(fe){if(typeof Symbol<"u"&&fe[Symbol.iterator]!=null||fe["@@iterator"]!=null)return Array.from(fe)}(re)||function(fe,ue){if(fe){if(typeof fe=="string")return I(fe,ue);var ge=Object.prototype.toString.call(fe).slice(8,-1);if(ge==="Object"&&fe.constructor&&(ge=fe.constructor.name),ge==="Map"||ge==="Set")return Array.from(fe);if(ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ge))return I(fe,ue)}}(re)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(re,fe){(fe==null||fe>re.length)&&(fe=re.length);for(var ue=0,ge=new Array(fe);ue<fe;ue++)ge[ue]=re[ue];return ge}var z=T;function H(re,fe){var ue=re.x*Math.cos(fe)-re.y*Math.sin(fe),ge=re.y*Math.cos(fe)+re.x*Math.sin(fe);re.x=ue,re.y=ge}function Y(re,fe){re.x*=fe,re.y*=fe}var ee=function(re){if(re!==void 0&&re.CanvasRenderingContext2D&&(!re.Path2D||!function(ve){var Me=ve.document.createElement("canvas").getContext("2d"),we=new ve.Path2D("M0 0 L1 1");return Me.strokeStyle="red",Me.lineWidth=1,Me.stroke(we),Me.getImageData(0,0,1,1).data[0]===255}(re))){var fe=function(){function ve(Be){var De;(function(Fe,Oe){if(!(Fe instanceof Oe))throw new TypeError("Cannot call a class as a function")})(this,ve),this.segments=[],Be&&Be instanceof ve?(De=this.segments).push.apply(De,G(Be.segments)):Be&&(this.segments=z(Be))}var Me,we;return Me=ve,(we=[{key:"addPath",value:function(Be){var De;Be&&Be instanceof ve&&(De=this.segments).push.apply(De,G(Be.segments))}},{key:"moveTo",value:function(Be,De){this.segments.push(["M",Be,De])}},{key:"lineTo",value:function(Be,De){this.segments.push(["L",Be,De])}},{key:"arc",value:function(Be,De,Fe,Oe,Ge,ze){this.segments.push(["AC",Be,De,Fe,Oe,Ge,!!ze])}},{key:"arcTo",value:function(Be,De,Fe,Oe,Ge){this.segments.push(["AT",Be,De,Fe,Oe,Ge])}},{key:"ellipse",value:function(Be,De,Fe,Oe,Ge,ze,je,He){this.segments.push(["E",Be,De,Fe,Oe,Ge,ze,je,!!He])}},{key:"closePath",value:function(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function(Be,De,Fe,Oe,Ge,ze){this.segments.push(["C",Be,De,Fe,Oe,Ge,ze])}},{key:"quadraticCurveTo",value:function(Be,De,Fe,Oe){this.segments.push(["Q",Be,De,Fe,Oe])}},{key:"rect",value:function(Be,De,Fe,Oe){this.segments.push(["R",Be,De,Fe,Oe])}}])&&R(Me.prototype,we),Object.defineProperty(Me,"prototype",{writable:!1}),ve}(),ue=re.CanvasRenderingContext2D.prototype.fill,ge=re.CanvasRenderingContext2D.prototype.stroke;re.CanvasRenderingContext2D.prototype.fill=function(){for(var ve=arguments.length,Me=new Array(ve),we=0;we<ve;we++)Me[we]=arguments[we];var Be="nonzero";Me.length===0||Me.length===1&&typeof Me[0]=="string"?ue.apply(this,Me):(arguments.length===2&&(Be=Me[1]),be(this,Me[0].segments),ue.call(this,Be))},re.CanvasRenderingContext2D.prototype.stroke=function(ve){ve?(be(this,ve.segments),ge.call(this)):ge.call(this)};var ye=re.CanvasRenderingContext2D.prototype.isPointInPath;re.CanvasRenderingContext2D.prototype.isPointInPath=function(){for(var ve=arguments.length,Me=new Array(ve),we=0;we<ve;we++)Me[we]=arguments[we];if(Me[0].constructor.name==="Path2D"){var Be=Me[1],De=Me[2],Fe=Me[3]||"nonzero";return be(this,Me[0].segments),ye.apply(this,[Be,De,Fe])}return ye.apply(this,Me)},re.Path2D=fe}function be(ve,Me){var we,Be,De,Fe,Oe,Ge,ze,je,He,Xe,$e,We,nt,Qt,Wt,Bn,Lt,Mn,cr,In,Zn,$n,Rn,Dn,Gt,Jn,Nn,Xn,jn,Un={x:0,y:0},bn={x:0,y:0};ve.beginPath();for(var Kn=0;Kn<Me.length;++Kn){var Qn=Me[Kn];switch((In=Qn[0])!=="S"&&In!=="s"&&In!=="C"&&In!=="c"&&($n=null,Rn=null),In!=="T"&&In!=="t"&&In!=="Q"&&In!=="q"&&(Dn=null,Gt=null),In){case"m":case"M":In==="m"?($e+=Qn[1],nt+=Qn[2]):($e=Qn[1],nt=Qn[2]),In!=="M"&&Un||(Un={x:$e,y:nt}),ve.moveTo($e,nt);break;case"l":$e+=Qn[1],nt+=Qn[2],ve.lineTo($e,nt);break;case"L":$e=Qn[1],nt=Qn[2],ve.lineTo($e,nt);break;case"H":$e=Qn[1],ve.lineTo($e,nt);break;case"h":$e+=Qn[1],ve.lineTo($e,nt);break;case"V":nt=Qn[1],ve.lineTo($e,nt);break;case"v":nt+=Qn[1],ve.lineTo($e,nt);break;case"a":case"A":In==="a"?($e+=Qn[6],nt+=Qn[7]):($e=Qn[6],nt=Qn[7]),Bn=Qn[1],Lt=Qn[2],ze=Qn[3]*Math.PI/180,De=!!Qn[4],Fe=!!Qn[5],Oe={x:$e,y:nt},H(Ge={x:(bn.x-Oe.x)/2,y:(bn.y-Oe.y)/2},-ze),(je=Ge.x*Ge.x/(Bn*Bn)+Ge.y*Ge.y/(Lt*Lt))>1&&(Bn*=je=Math.sqrt(je),Lt*=je),He=Bn*Bn*Lt*Lt,Xe=Bn*Bn*Ge.y*Ge.y+Lt*Lt*Ge.x*Ge.x,Y(Zn={x:Bn*Ge.y/Lt,y:-Lt*Ge.x/Bn},Fe!==De?Math.sqrt((He-Xe)/Xe)||0:-Math.sqrt((He-Xe)/Xe)||0),Be=Math.atan2((Ge.y-Zn.y)/Lt,(Ge.x-Zn.x)/Bn),we=Math.atan2(-(Ge.y+Zn.y)/Lt,-(Ge.x+Zn.x)/Bn),H(Zn,ze),Nn=Zn,Xn=(Oe.x+bn.x)/2,jn=(Oe.y+bn.y)/2,Nn.x+=Xn,Nn.y+=jn,ve.save(),ve.translate(Zn.x,Zn.y),ve.rotate(ze),ve.scale(Bn,Lt),ve.arc(0,0,1,Be,we,!Fe),ve.restore();break;case"C":$n=Qn[3],Rn=Qn[4],$e=Qn[5],nt=Qn[6],ve.bezierCurveTo(Qn[1],Qn[2],$n,Rn,$e,nt);break;case"c":ve.bezierCurveTo(Qn[1]+$e,Qn[2]+nt,Qn[3]+$e,Qn[4]+nt,Qn[5]+$e,Qn[6]+nt),$n=Qn[3]+$e,Rn=Qn[4]+nt,$e+=Qn[5],nt+=Qn[6];break;case"S":$n!==null&&Rn!==null||($n=$e,Rn=nt),ve.bezierCurveTo(2*$e-$n,2*nt-Rn,Qn[1],Qn[2],Qn[3],Qn[4]),$n=Qn[1],Rn=Qn[2],$e=Qn[3],nt=Qn[4];break;case"s":$n!==null&&Rn!==null||($n=$e,Rn=nt),ve.bezierCurveTo(2*$e-$n,2*nt-Rn,Qn[1]+$e,Qn[2]+nt,Qn[3]+$e,Qn[4]+nt),$n=Qn[1]+$e,Rn=Qn[2]+nt,$e+=Qn[3],nt+=Qn[4];break;case"Q":Dn=Qn[1],Gt=Qn[2],$e=Qn[3],nt=Qn[4],ve.quadraticCurveTo(Dn,Gt,$e,nt);break;case"q":Dn=Qn[1]+$e,Gt=Qn[2]+nt,$e+=Qn[3],nt+=Qn[4],ve.quadraticCurveTo(Dn,Gt,$e,nt);break;case"T":Dn!==null&&Gt!==null||(Dn=$e,Gt=nt),Dn=2*$e-Dn,Gt=2*nt-Gt,$e=Qn[1],nt=Qn[2],ve.quadraticCurveTo(Dn,Gt,$e,nt);break;case"t":Dn!==null&&Gt!==null||(Dn=$e,Gt=nt),Dn=2*$e-Dn,Gt=2*nt-Gt,$e+=Qn[1],nt+=Qn[2],ve.quadraticCurveTo(Dn,Gt,$e,nt);break;case"z":case"Z":$e=Un.x,nt=Un.y,Un=void 0,ve.closePath();break;case"AC":$e=Qn[1],nt=Qn[2],Wt=Qn[3],Be=Qn[4],we=Qn[5],Jn=Qn[6],ve.arc($e,nt,Wt,Be,we,Jn);break;case"AT":We=Qn[1],Qt=Qn[2],$e=Qn[3],nt=Qn[4],Wt=Qn[5],ve.arcTo(We,Qt,$e,nt,Wt);break;case"E":$e=Qn[1],nt=Qn[2],Bn=Qn[3],Lt=Qn[4],ze=Qn[5],Be=Qn[6],we=Qn[7],Jn=Qn[8],ve.save(),ve.translate($e,nt),ve.rotate(ze),ve.scale(Bn,Lt),ve.arc(0,0,1,Be,we,Jn),ve.restore();break;case"R":$e=Qn[1],nt=Qn[2],Mn=Qn[3],cr=Qn[4],Un={x:$e,y:nt},ve.rect($e,nt,Mn,cr)}bn.x=$e,bn.y=nt}}},ie=T,oe=ee;typeof window<"u"&&oe(window);var se={path2dPolyfill:oe,parsePath:ie}},3277:function(_,d,v){(d=v(6314)(!1)).push([_.id,`@font-face{font-family:luna-data-grid-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAScAAsAAAAAB4wAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACGIRYl5k9TLzIAAAFkAAAAPQAAAFZLxUkYY21hcAAAAaQAAADLAAACXsU3J5xnbHlmAAACcAAAACUAAAAwNxN2HmhlYWQAAAKYAAAALgAAADZzjr4QaGhlYQAAAsgAAAAYAAAAJAFyANhobXR4AAAC4AAAABAAAAA8AZAAAGxvY2EAAALwAAAAEAAAACAAnACobWF4cAAAAwAAAAAfAAAAIAEaAA9uYW1lAAADIAAAASkAAAIWm5e+CnBvc3QAAARMAAAATQAAAG/8EX8xeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiA2A9NMDGwMMkAWF1CGFchmB4pxAnncDDxAOQ4kUV4GPqA6RgZmAE91Bj94nGNgZJBmnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbKQhrAAAAeJzNkksKwjAQhr+kvqpVxIUL8Qh6KFG3KtLidVx5Bq/VE+g/ySCIILhzhq+Qv8lkHgG6QCFWogPhRsDsKjUkvWCY9A611jOmUiJrNuw5cabh0sbHQ/9M23KQVksLSXu3oPPmcxbypRwGilxQ0qPSTRNl1GfMSHujDvQ+Yny3wY/7SXUX5eueaphSsAz+xar0vftqgnU6Y9VuHE1P3c/YRHdOKfaOVXlwLOrR0YQ1y4zFPzv2OmqnLxpnLC6O+tSGjL2YNmaITyYUHqgAeJxjYGQAgZUM0xmYGBjMlcVXNjtO9wCKoImbA8X9geIAqRwH2QAAAHicY2BkYGAA4hwJ4Yp4fpuvDNwMJ4ACUZyP9zUgaCBYyTAdSHIwMIE4ABioCdgAAHicY2BkYGA4wcAAJ1cyMDKgAn4AOLICS3icY2AAghNQTCIAAFMMAZF4nGNgAAIeBglcEAARPAFFeJxjYGRgYOBnYGYA0QwMTEDMBYQMDP/BfAYACkEBKgB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nF3GOQ6AIBQA0T+44YoX4VAEaNEYCNe3IDa+ZkaUNF//DIqOnoGRCc3MwsrGzoHhlMW7J2Ybrpp023LjcTxEMpbARSVRuEVebe8MtgAAAA==') format('woff')}[class*=' luna-data-grid-icon-'],[class^=luna-data-grid-icon-]{display:inline-block;font-family:luna-data-grid-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-data-grid-icon-caret-down:before{content:'\\f101'}.luna-data-grid-icon-caret-up:before{content:'\\f102'}.luna-data-grid{position:relative;border:1px solid;overflow:hidden;outline:0;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-data-grid .luna-data-grid-hidden,.luna-data-grid.luna-data-grid-hidden{display:none}.luna-data-grid .luna-data-grid-invisible,.luna-data-grid.luna-data-grid-invisible{visibility:hidden}.luna-data-grid *{box-sizing:border-box}.luna-data-grid.luna-data-grid-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-data-grid{font-size:12px}.luna-data-grid table{width:100%;min-height:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}.luna-data-grid td,.luna-data-grid th{padding:1px 4px;border-left:1px solid;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.luna-data-grid td:first-child,.luna-data-grid th:first-child{border-left:none}.luna-data-grid th{font-weight:400;border-bottom:1px solid;text-align:left;position:relative}.luna-data-grid th.luna-data-grid-sortable{padding-right:12px}.luna-data-grid th .luna-data-grid-icon-caret-down,.luna-data-grid th .luna-data-grid-icon-caret-up{font-size:12px;position:absolute;display:none;top:6px;right:2px}.luna-data-grid td{height:20px;cursor:default;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-data-grid:focus .luna-data-grid-node.luna-data-grid-selectable.luna-data-grid-selected{color:#fff}.luna-data-grid-data-container,.luna-data-grid-header-container{overflow:hidden}.luna-data-grid-header-container{height:21px}.luna-data-grid-data-container{overflow-y:auto;position:relative}.luna-data-grid-data-space{min-height:100%}.luna-data-grid-data{position:absolute;left:0;top:0}.luna-data-grid-filler-row td{height:auto}.luna-data-grid-resizer{position:absolute;top:0;bottom:0;width:5px;z-index:500;touch-action:none;cursor:col-resize}.luna-data-grid-resizing{cursor:col-resize!important}.luna-data-grid-resizing .luna-data-grid *{cursor:col-resize!important}.luna-data-grid-theme-light{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-data-grid-theme-light td,.luna-data-grid-theme-light th{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-data-grid-theme-light th{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-data-grid-theme-light th.luna-data-grid-sortable:hover{background-color:rgba(0,0,0,.15);background-color:var(--luna-color-fill,rgba(0,0,0,.15))}.luna-data-grid-theme-light .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selectable:hover,.luna-data-grid-theme-light .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background-color:#ddd}.luna-data-grid-theme-light .luna-data-grid-data-container tr:nth-child(even){background-color:#f2f7fd}.luna-data-grid-theme-light:focus .luna-data-grid-node.luna-data-grid-selectable.luna-data-grid-selected{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-data-grid-theme-dark{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-data-grid-theme-dark td,.luna-data-grid-theme-dark th{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-data-grid-theme-dark th{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-data-grid-theme-dark th.luna-data-grid-sortable:hover{background-color:hsla(0,0%,100%,.18);background-color:var(--luna-color-fill,rgba(255,255,255,.18))}.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selectable:hover,.luna-data-grid-theme-dark .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background-color:#393939}.luna-data-grid-theme-dark .luna-data-grid-data-container tr:nth-child(even){background-color:#0b2544}.luna-data-grid-theme-dark:focus .luna-data-grid-node.luna-data-grid-selectable.luna-data-grid-selected{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}`,""]),_.exports=d},3290:function(_,d,v){var A=v(975);d=function(C){var w,T=window.location,R=T.hostname,G=T.pathname,I=R.split("."),z=G.split("/"),H="",Y=z.length;if(!re())for(var ee=I.length-1;ee>=0;ee--){var ie=I[ee];if(ie!==""){if(re({domain:H=H===""?ie:ie+"."+H,path:w="/"})||re({domain:H}))return;for(var oe=0;oe<Y;oe++){var se=z[oe];if(se!==""&&(re({domain:H,path:w+=se})||re({path:w})||re({domain:H,path:w+="/"})||re({path:w})))return}}}function re(fe){return fe=fe||{},A.remove(C,fe),!A.get(C)}},_.exports=d},3411:function(_,d,v){var A,C=this&&this.__extends||(A=function(Oe,Ge){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,je){ze.__proto__=je}||function(ze,je){for(var He in je)Object.prototype.hasOwnProperty.call(je,He)&&(ze[He]=je[He])},A(Oe,Ge)},function(Oe,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Class extends value "+String(Ge)+" is not a constructor or null");function ze(){this.constructor=Oe}A(Oe,Ge),Oe.prototype=Ge===null?Object.create(Ge):(ze.prototype=Ge.prototype,new ze)}),w=this&&this.__importDefault||function(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}};Object.defineProperty(d,"__esModule",{value:!0}),d.FetchRequest=d.XhrRequest=void 0,d.fullUrl=Me;var T=w(v(2263)),R=w(v(1738)),G=w(v(3497)),I=w(v(6032)),z=w(v(9464)),H=w(v(9405)),Y=w(v(3981)),ee=w(v(9100)),ie=w(v(1009)),oe=w(v(6030)),se=v(916),re=function(Oe){function Ge(ze,je,He){var Xe=Oe.call(this)||this;return Xe.xhr=ze,Xe.reqHeaders={},Xe.method=je,Xe.url=Me(He),Xe.id=(0,se.createId)(),ze.addEventListener("readystatechange",function(){ze.readyState===2?Xe.handleHeadersReceived():ze.readyState===4&&(ze.status===0?Xe.handleError():Xe.handleDone())}),Xe}return C(Ge,Oe),Ge.prototype.toJSON=function(){return{method:this.method,url:this.url,id:this.id}},Ge.prototype.handleSend=function(ze){(0,R.default)(ze)||(ze=""),ze={name:we(this.url),url:this.url,data:ze,time:(0,Y.default)(),reqHeaders:this.reqHeaders,method:this.method},(0,z.default)(this.reqHeaders)||(ze.reqHeaders=this.reqHeaders),this.emit("send",this.id,ze)},Ge.prototype.handleReqHeadersSet=function(ze,je){ze&&je&&(this.reqHeaders[ze]=je)},Ge.prototype.handleHeadersReceived=function(){var ze=this.xhr,je=Be(ze.getResponseHeader("Content-Type")||"");this.emit("headersReceived",this.id,{type:je.type,subType:je.subType,size:be(ze,!0,this.url),time:(0,Y.default)(),resHeaders:ye(ze)})},Ge.prototype.handleDone=function(){var ze,je,He,Xe=this,$e=this.xhr,We=$e.responseType,nt="",Qt=function(){Xe.emit("done",Xe.id,{status:$e.status,size:be($e,!1,Xe.url),time:(0,Y.default)(),resTxt:nt})},Wt=Be($e.getResponseHeader("Content-Type")||"");We!=="blob"||Wt.type!=="text"&&Wt.subType!=="javascript"&&Wt.subType!=="json"?(We!==""&&We!=="text"||(nt=$e.responseText),We==="json"&&(nt=JSON.stringify($e.response)),Qt()):(ze=$e.response,je=function(Bn,Lt){Lt&&(nt=Lt),Qt()},(He=new FileReader).onload=function(){je(null,He.result)},He.onerror=function(Bn){je(Bn)},He.readAsText(ze))},Ge.prototype.handleError=function(){this.emit("error",this.id,{errorText:"Network error",time:(0,Y.default)()})},Ge}(T.default);d.XhrRequest=re;var fe=function(Oe){function Ge(ze,je){je===void 0&&(je={});var He=Oe.call(this)||this,Xe=ze instanceof window.Request,$e=Xe?ze.url:ze;return He.url=Me($e),He.id=(0,se.createId)(),He.options=je,He.reqHeaders=je.headers||(Xe?ze.headers:{}),He.method=je.method||(Xe?ze.method:"GET"),He}return C(Ge,Oe),Ge.prototype.send=function(ze){var je=this,He=this.options,Xe=(0,R.default)(He.body)?He.body:"";this.emit("send",this.id,{name:we(this.url),url:this.url,data:Xe,reqHeaders:this.reqHeaders,time:(0,Y.default)(),method:this.method}),ze.then(function($e){var We=Be(($e=$e.clone()).headers.get("Content-Type"));return $e.text().then(function(nt){var Qt={type:We.type,subType:We.subType,time:(0,Y.default)(),size:ue($e,nt),resTxt:nt,resHeaders:ge($e),status:$e.status};(0,z.default)(je.reqHeaders)||(Qt.reqHeaders=je.reqHeaders),je.emit("done",je.id,Qt)}),$e}).catch(function($e){je.emit("error",je.id,{errorText:$e.message,time:(0,Y.default)()})})},Ge}(T.default);function ue(Oe,Ge){var ze=Oe.headers.get("Content-length");return ze?(0,oe.default)(ze):Fe(Ge)}function ge(Oe){var Ge={};return Oe.headers.forEach(function(ze,je){return Ge[je]=ze}),Ge}function ye(Oe){var Ge=Oe.getAllResponseHeaders().split(`
`),ze={};return(0,ee.default)(Ge,function(je){if((je=(0,H.default)(je))!==""){var He=je.split(":",2),Xe=He[0],$e=He[1];ze[Xe]=(0,H.default)($e)}}),ze}function be(Oe,Ge,ze){var je=0;function He(){if(!Ge){var Xe=Oe.responseType,$e="";Xe!==""&&Xe!=="text"||($e=Oe.responseText),$e&&(je=Fe($e))}}if(function(Xe){return!(0,ie.default)(Xe,De)}(ze))He();else try{je=(0,oe.default)(Oe.getResponseHeader("Content-Length"))}catch{He()}return je===0&&He(),je}d.FetchRequest=fe;var ve=document.createElement("a");function Me(Oe){return ve.href=Oe,ve.protocol+"//"+ve.host+ve.pathname+ve.search+ve.hash}function we(Oe){var Ge=(0,G.default)(Oe.split("/"));return Ge.indexOf("?")>-1&&(Ge=(0,H.default)(Ge.split("?")[0])),Ge===""&&(Ge=new I.default(Oe).hostname),Ge}function Be(Oe){if(!Oe)return{type:"unknown",subType:"unknown"};var Ge=Oe.split(";")[0].split("/");return{type:Ge[0],subType:(0,G.default)(Ge)}}var De=window.location.origin;function Fe(Oe){var Ge=encodeURIComponent(Oe).match(/%[89ABab]/g);return Oe.length+(Ge?Ge.length:0)}},3422:function(_,d){d=function(v){return v==null},_.exports=d},3497:function(_,d){d=function(v){var A=v?v.length:0;if(A)return v[A-1]},_.exports=d},3539:function(_,d){d=function(){for(var v=arguments,A=v[0],C=1,w=v.length;C<w;C++)v[C]>A&&(A=v[C]);return A},_.exports=d},3578:function(_,d,v){v.d(d,{A:function(){return Bo}});var A=v(7528),C=v(7800);function w(Di,Xi){return function(On){if(Array.isArray(On))return On}(Di)||function(On,Fn){var mr=On==null?null:typeof Symbol<"u"&&On[Symbol.iterator]||On["@@iterator"];if(mr!=null){var Xr,Ei,ci,Ri,Ui=[],ki=!0,Yi=!1;try{if(ci=(mr=mr.call(On)).next,Fn===0){if(Object(mr)!==mr)return;ki=!1}else for(;!(ki=(Xr=ci.call(mr)).done)&&(Ui.push(Xr.value),Ui.length!==Fn);ki=!0);}catch(Ea){Yi=!0,Ei=Ea}finally{try{if(!ki&&mr.return!=null&&(Ri=mr.return(),Object(Ri)!==Ri))return}finally{if(Yi)throw Ei}}return Ui}}(Di,Xi)||(0,C.A)(Di,Xi)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var T=v(3029),R=v(2901),G=v(388),I=v(3954),z=v(991),H=v(5361),Y=v(5902),ee=v.n(Y),ie=v(2561),oe=v.n(ie),se=v(3249),re=v.n(se),fe=v(1009),ue=v.n(fe),ge=v(4950),ye=v.n(ge),be=v(9100),ve=v.n(be),Me=v(1580),we=v.n(Me),Be=v(9464),De=v.n(Be),Fe=v(15),Oe=v.n(Fe),Ge=v(9931),ze=v.n(Ge);function je(Di){return Di.constructor&&Di.constructor.name?Di.constructor.name:ze()({}.toString.call(Di).replace(/(\[object )|]/g,""))}var He=v(3915),Xe=v.n(He),$e=v(9405),We=v.n($e),nt=v(5169),Qt=v.n(nt),Wt=v(9548),Bn=v.n(Wt),Lt=v(6097),Mn=v.n(Lt),cr=v(6030),In=v.n(cr),Zn=v(5004),$n=v.n(Zn),Rn=(v(9410),v(8609)),Dn=v.n(Rn);function Gt(Di){var Xi="luna-".concat(Di,"-");function On(Fn){return Xe()(We()(Fn).split(/\s+/),function(mr){return re()(mr,Xi)?mr:mr.replace(/[\w-]+/,function(Xr){return"".concat(Xi).concat(Xr)})}).join(" ")}return function(Fn){if(/<[^>]*>/g.test(Fn))try{var mr=Bn().parse(Fn);return Jn(mr,function(Xr){Xr.attrs&&Xr.attrs.class&&(Xr.attrs.class=On(Xr.attrs.class))}),Bn().stringify(mr)}catch{return On(Fn)}return On(Fn)}}function Jn(Di,Xi){for(var On=0,Fn=Di.length;On<Fn;On++){var mr=Di[On];Xi(mr),mr.content&&Jn(mr.content,Xi)}}Qt();function Nn(Di){var Xi=window.getSelection();if(!Xi||Xi.type!=="Range"||Xi.toString()==="")return!1;var On=Xi.anchorNode,Fn=Xi.focusNode;return Xi.containsNode(Di,!0)||On&&Di.contains(On)||Fn&&Di.contains(Fn)}var Xn=Gt("console");function jn(Di){var Xi,On=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Fn=On.topObj,mr=On.level,Xr=mr===void 0?0:mr,Ei=On.getterVal,ci=Ei!==void 0&&Ei,Ri=On.unenumerable,Ui=Ri===void 0||Ri,ki="",Yi="",Ea=[],qa=[],Fa="";Fn=Fn||Di;var va={getterVal:ci,unenumerable:Ui,level:Xr+1},$a=Xr===0,Ts='<span class="'.concat(Xn("key"),'">'),Za='<span class="'.concat(Xn("number"),'">'),Rs='<span class="'.concat(Xn("null"),'">'),us='<span class="'.concat(Xn("string"),'">'),Qs='<span class="'.concat(Xn("boolean"),'">'),Ao='<span class="'.concat(Xn("special"),'">'),xs=function(da){return ee()(da).replace(/\\n/g,"").replace(/\\f|\\r|\\t/g,"").replace(/\\/g,"")},Ms="</span>";function Js(da){return da=oe()(da),re()(Un,da)||ue()(da,"Array[")?Ao+xs(da)+Ms:(da.length>100&&(da=Oe()(da,100,{separator:" ",ellipsis:""})),us+xs('"'.concat(da,'"'))+Ms)}function es(da){if(Xi>5)Fa=", ";else{var Aa=function(ds){return Ts+xs(ds)+Ms}(Kn(da));if(!ci){var ns=Object.getOwnPropertyDescriptor(Di,da);if(ns&&ns.get)return Ea.push("".concat(Aa,": ").concat(Js("(...)"))),void Xi++}Ea.push("".concat(Aa,": ").concat(jn(Fn[da],va))),Xi++}}try{Yi={}.toString.call(Di)}catch{Yi="[object Object]"}var js,zs=Yi=="[object Array]",Ls=Yi=="[object Object]",Le=Yi=="[object Number]",st=Yi=="[object RegExp]",zt=Yi=="[object Symbol]",qn=Yi=="[object Function]",zr=Yi=="[object Boolean]";if(Yi=="[object String]")ki=Js(Kn(Di));else if(st)js=Kn(Di.toString()),ki=us+js+Ms;else if(qn)ki=Js("");else if(zs)if($a){ki="[";var ii=Di.length,Pi="";ii>100&&(ii=100,Pi=", ");for(var xa=0;xa<ii;xa++)Ea.push("".concat(jn(Di[xa],va)));ki+=Ea.join(", ")+Pi+"]"}else ki="Array(".concat(Di.length,")");else if(Ls)bn(Di)&&(Di=Object.getPrototypeOf(Di)),qa=Ui?Object.getOwnPropertyNames(Di):Object.keys(Di),$a?(Xi=1,ki="{",ve()(qa,es),ki+=Ea.join(", ")+Fa+"}"):(ki=je(Di))==="Object"&&(ki="{}");else if(Le)ki=Di+"",ki=we()(ki,"Infinity")||ki==="NaN"?'"'.concat(ki,'"'):Za+ki+Ms;else if(zr)ki=Qs+(Di?"true":"false")+Ms;else if(Di===null)ki=function(da){return Rs+da+Ms}("null");else if(zt)ki=Js("Symbol");else if(Di===void 0)ki=Js("undefined");else try{bn(Di)&&(Di=Object.getPrototypeOf(Di)),$a?(Xi=1,ki="{",qa=Ui?Object.getOwnPropertyNames(Di):Object.keys(Di),ve()(qa,es),ki+=Ea.join(", ")+Fa+"}"):(ki=je(Di))==="Object"&&(ki="{}")}catch{ki=Js(Di)}return ki}var Un=["(...)","undefined","Symbol","Object",""];function bn(Di){var Xi=De()(Object.getOwnPropertyNames(Di)),On=Object.getPrototypeOf(Di);return Xi&&On&&On!==Object.prototype}function Kn(Di){return ye()(Di).replace(/\\'/g,"'").replace(/\t/g,"\\t")}var Qn,pr=v(6911),fn=v(2388),Mt=v(5784),yn=v(4095),kn=v.n(yn),nr=v(9760),dr=v.n(nr),Qr=v(1738),Wr=v.n(Qr),Gr=v(2650),Hr=v.n(Gr),Kr=v(7696),ti=v.n(Kr),Mi=v(5651),Ci=v.n(Mi),oi=v(2708),Ii=v.n(oi),wr=v(6631),Br=v.n(wr),ui=v(4069),vi=v.n(ui),qr=v(4236),br=v.n(qr),er=v(8971),Gn=v.n(er),Er=v(3957),mn=v.n(Er),tr=v(769),vr=v.n(tr),Ar=v(6214),Tn=v.n(Ar),tt=v(438),$t=v.n(tt),dn=v(8420),Qe=v.n(dn),gn=v(96),sr=v.n(gn),rr=v(3145),it=v.n(rr),At=v(3693),An=v.n(At),Ft=v(5241),Hn=v.n(Ft),wn=v(2263),lr=v.n(wn),rt=v(4534),ln=v.n(rt),Cn=v(8032),zn=v.n(Cn),Sn=v(4844),yr=v.n(Sn),ur=v(4801),hr=v.n(ur),fr=v(9041),Sr=v.n(fr),Lr=v(8091),Nr=v.n(Lr),xr=v(4249),Cr=v.n(xr),Or=v(2797),Ur=v.n(Or),Pr=v(5773),Vr=v.n(Pr),xi=v(4433),Ai=v.n(xi),Ti=v(5630),Si=v.n(Ti),ir=v(6493),bi=v.n(ir),vn=v(9350),Ln=v.n(vn),ar=v(1976),Mr=v.n(ar);function kr(){try{var Di=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kr=function(){return!!Di})()}var gi=/https?:\/\/([0-9.\-A-Za-z]+)(?::(\d+))?\/[A-Z.a-z0-9/]*\.js/g,di={comment:"",string:"",number:"",keyword:"",operator:""},_i=function(Di){function Xi(On,Fn){var mr,Xr,Ei,ci,Ri=Fn.type,Ui=Ri===void 0?"log":Ri,ki=Fn.args,Yi=ki===void 0?[]:ki,Ea=Fn.id,qa=Fn.group,Fa=Fn.targetGroup,va=Fn.header,$a=Fn.ignoreFilter,Ts=$a!==void 0&&$a,Za=Fn.accessGetter,Rs=Fn.unenumerable,us=Fn.lazyEvaluation;(0,T.A)(this,Xi),Xr=this,Ei=Xi,Ei=(0,I.A)(Ei),(mr=(0,G.A)(Xr,kr()?Reflect.construct(Ei,[],(0,I.A)(Xr).constructor):Ei.apply(Xr,ci))).container=Hn()("div"),mr.count=1,mr.width=0,mr.height=0,mr.isHidden=!1,mr.columns=[],mr.elements={},mr.objects={},mr.console=On,mr.type=Ui,mr.group=qa,mr.targetGroup=Fa,mr.args=Yi,mr.id=Ea,mr.header=va,mr.ignoreFilter=Ts,mr.collapsed=!1,mr.container.log=mr,mr.height=0,mr.width=0,mr.$container=An()(mr.container),mr.accessGetter=Za,mr.unenumerable=Rs,mr.lazyEvaluation=us;var Qs="info";switch(Ui){case"debug":Qs="verbose";break;case"error":Qs="error";break;case"warn":Qs="warning"}return mr.level=Qs,mr.resizeSensor=new(kn())(mr.container),mr.onResize=ln()(function(){Dn()(mr.container)?mr.isHidden=!0:(mr.isHidden||mr.updateSize(!1),mr.isHidden=!1)},16),mr.formatMsg(),mr.group&&mr.checkGroup(),mr.bindEvent(),mr}return(0,H.A)(Xi,Di),(0,R.A)(Xi,[{key:"checkGroup",value:function(){for(var On=this.group,Fn=!1;On;){if(On.collapsed){Fn=!0;break}On=On.parent}return Fn!==this.collapsed&&(this.collapsed=Fn,!0)}},{key:"updateIcon",value:function(On){var Fn=this.console.c;return this.$container.find(Fn(".icon-container")).find(Fn(".icon")).rmAttr("class").addClass([Fn("icon"),Fn("icon-".concat(On))]),this}},{key:"addCount",value:function(){this.count++;var On=this.$container,Fn=this.count,mr=this.console.c,Xr=On.find(mr(".count-container")),Ei=On.find(mr(".icon-container")),ci=Xr.find(mr(".count"));return Fn===2&&Xr.rmClass(mr("hidden")),ci.text(oe()(Fn)),Ei.addClass(mr("hidden")),this}},{key:"groupEnd",value:function(){var On=this.$container,Fn=this.console.c;return On.find(".".concat(Fn("nesting-level"),":not(.").concat(Fn("group-closed"),")")).last().addClass(Fn("group-closed")),this}},{key:"updateTime",value:function(On){var Fn=this.$container.find(this.console.c(".time-container"));return this.header&&(Fn.find("span").eq(0).text(On),this.header.time=On),this}},{key:"isAttached",value:function(){return!!this.container.parentNode}},{key:"isSimple",value:function(){return!Ur()(this.args,function(On){return dr()(On)})}},{key:"updateSize",value:function(){var On=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],Fn=this.container.getBoundingClientRect(),mr=Fn.width,Xr=Fn.height-1;this.height!==Xr&&(this.height=Xr,On||this.emit("updateHeight")),this.width!==mr&&(this.width=mr)}},{key:"html",value:function(){return this.container.outerHTML}},{key:"text",value:function(){return this.content.textContent||""}},{key:"select",value:function(){this.$container.addClass(this.console.c("selected"))}},{key:"deselect",value:function(){this.$container.rmClass(this.console.c("selected"))}},{key:"copy",value:function(){var On=this.args,Fn="";ve()(On,function(mr,Xr){Xr!==0&&(Fn+=" "),dr()(mr)?Fn+=zn()(mr):Fn+=oe()(mr)}),yr()(Fn)}},{key:"bindEvent",value:function(){var On=this,Fn=this.console.c,mr=this;this.resizeSensor.addListener(this.onResize),this.$container.on("click",Fn(".dom-viewer"),function(Xr){return Xr.stopPropagation()}).on("click",Fn(".preview"),function(Xr){if(Xr.stopPropagation(),!Nn(this)){var Ei=An()(this).find(Fn(".preview-icon-container")).find(Fn(".icon")),ci="caret-down";Ei.hasClass(Fn("icon-caret-down"))&&(ci="caret-right"),Ei.rmAttr("class").addClass([Fn("icon"),Fn("icon-".concat(ci))]),mr.renderObjectViewer(this)}}).on("click",function(){return On.click()})}},{key:"renderEl",value:function(){var On=this.elements,Fn=this.console.c,mr=this;this.$container.find(Fn(".dom-viewer")).each(function(){var Xr=An()(this).data("id");new Mt.A(this,{node:On[Xr],theme:mr.console.getOption("theme")})})}},{key:"renderObjectViewer",value:function(On){var Fn=this.console,mr=this.unenumerable,Xr=this.accessGetter,Ei=this.lazyEvaluation,ci=Fn.c,Ri=An()(On),Ui=Ri.data("id");if(Ui){var ki=this.objects[Ui],Yi=Ri.find(ci(".json"));if(Yi.hasClass(ci("hidden"))){if(Yi.data("init")!=="true"){if(Ei){var Ea=new pr.A(Yi.get(0),{unenumerable:mr,accessGetter:Xr});Ea.setOption("theme",Fn.getOption("theme")),Ea.set(ki)}else{var qa=new pr.j(Yi.get(0));qa.setOption("theme",Fn.getOption("theme")),qa.set(ki)}Yi.data("init","true")}Yi.rmClass(ci("hidden"))}else Yi.addClass(ci("hidden"))}}},{key:"renderTable",value:function(On){var Fn=this,mr="__LunaConsoleValue",Xr=this.columns,Ei=this.$container,ci=this.console,Ri=ci.c,Ui=Ei.find(Ri(".data-grid")),ki=On[0],Yi=new fn.A(Ui.get(0),{columns:vi()([{id:"(index)",title:"(index)",sortable:!0}],Xe()(Xr,function(Ea){return{id:Ea,title:Ea===mr?"Value":Ea,sortable:!0}})),theme:ci.getOption("theme")});ve()(ki,function(Ea,qa){var Fa={"(index)":oe()(qa)};Xr.forEach(function(va){dr()(Ea)?Fa[va]=va===mr?"":Fn.formatTableVal(Ea[va]):ti()(Ea)&&(Fa[va]=va===mr?Fn.formatTableVal(Ea):"")}),Yi.append(Fa)})}},{key:"extractObj",value:function(On){var Fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},mr=arguments.length>2?arguments[2]:void 0,Xr=this.accessGetter,Ei=this.unenumerable;Ci()(Fn,{accessGetter:Xr,unenumerable:Ei,symbol:Ei,timeout:1e3}),function(ci,Ri,Ui){var ki=hr()(ci,Ri);Sr()(function(){return Ui(ki)})}(On,Fn,function(ci){return mr(JSON.parse(ci))})}},{key:"click",value:function(){var On=this.type,Fn=this.$container,mr=this.console,Xr=mr.c;switch(On){case"log":case"warn":case"info":case"debug":case"output":case"table":case"dir":break;case"group":case"groupCollapsed":Nn(this.container)||mr.toggleGroup(this);break;case"error":Nn(this.container)||Fn.find(Xr(".stack")).toggleClass(Xr("hidden"))}}},{key:"formatMsg",value:function(){var On=this.args,Fn=this.type,mr=this.id,Xr=this.header,Ei=this.group,ci=this.console.c;On=Qe()(On);var Ri,Ui,ki="";switch(Fn!=="group"&&Fn!=="groupCollapsed"||On.length===0&&(On=["console.group"]),Fn){case"log":case"info":case"debug":ki=this.formatCommon(On);break;case"dir":ki=this.formatDir(On);break;case"warn":Ri="warn",ki=this.formatCommon(On);break;case"error":Wr()(On[0])&&On.length!==1&&(On=this.substituteStr(On)),Ui=On[0],Ri="error",Ui=Hr()(Ui)?Ui:new Error(this.formatCommon(On)),ki=this.formatErr(Ui);break;case"table":ki=this.formatTable(On);break;case"html":ki=On[0];break;case"input":ki=this.formatJs(On[0]),Ri="input";break;case"output":ki=this.formatCommon(On),Ri="output";break;case"groupCollapsed":ki=this.formatCommon(On),Ri="caret-right";break;case"group":ki=this.formatCommon(On),Ri="caret-down"}re()(["log","debug","warn"],Fn)&&this.isSimple()&&(ki=Nr()(ki,function(Yi){return'<a href="'.concat(Yi,'" target="_blank">').concat(Yi,"</a>")})),ki=this.render({msg:ki,type:Fn,icon:Ri,id:mr,header:Xr,group:Ei}),this.$container.addClass("".concat(ci("log-container"))).html(ki),Fn==="table"&&(De()(this.columns)||this.renderTable(On)),De()(this.elements)||this.renderEl(),this.$content=this.$container.find(ci(".log-content")),this.content=this.$content.get(0)}},{key:"render",value:function(On){var Fn=this.console.c,mr="",Xr="";if(On.group)for(var Ei=On.group.indentLevel,ci=0;ci<Ei;ci++)Xr+='<div class="'.concat(Fn("nesting-level"),'"></div>');On.header&&(mr+=Vr()(Qn||(Qn=(0,A.A)([`
      <div class="`,`">
        `,`
        <div class="`,`">
          <span>`,"</span> <span>",`</span>
        </div>
      </div>`])),Fn("header"),Xr,Fn("time-from-container"),On.header.time,On.header.from));var Ri="";return On.icon&&(Ri='<div class="'.concat(Fn("icon-container"),'"><span class="').concat(Fn("icon icon-"+On.icon),'"></span></div>')),mr+=`
    <div class="`.concat(Fn(On.type+" log-item"),`">
      `).concat(Xr,`
      `).concat(Ri,`
      <div class="`).concat(Fn("count-container hidden"),`">
        <div class="`).concat(Fn("count"),`"></div>
      </div>    
      <div class="`).concat(Fn("log-content-wrapper"),`">
        <div class="`).concat(Fn("log-content"),'">').concat(On.msg,`</div>
      </div>
    </div>`)}},{key:"formatTable",value:function(On){var Fn=On[0],mr=On[1],Xr=[];return Wr()(mr)&&(mr=vr()(mr)),Tn()(mr)||(mr=null),dr()(Fn)?(ve()(Fn,function(Ei){ti()(Ei)?Xr.push("__LunaConsoleValue"):dr()(Ei)&&(Xr=Xr.concat(it()(Ei)))}),(Xr=$t()(Xr)).sort(),mr&&(Xr=Xr.filter(function(Ei){return re()(mr,Ei)})),Xr.length>20&&(Xr=Xr.slice(0,20)),De()(Xr)?this.formatCommon(On):(this.columns=Xr,this.console.c('<div class="data-grid"></div>')+this.formatPreview(Fn))):this.formatCommon(On)}},{key:"formatErr",value:function(On){var Fn=On.stack?On.stack.split(`
`):[],mr=On.name?"".concat(On.name,": "):"";return mr+="".concat(On.message||Fn[0],"<br/>"),Fn=Fn.map(function(Xr){return ee()(Xr)}),mr+'<div class="'.concat(this.console.c("stack hidden"),'">').concat(Fn.slice(1).join("<br/>"),"</div>").replace(gi,function(Xr){return'<a href="'.concat(Xr,'" target="_blank">').concat(Xr,"</a>")})}},{key:"formatCommon",value:function(On){var Fn=this.console.c,mr=Wr()(On[0])&&On.length!==1;mr&&(On=this.substituteStr(On));for(var Xr=0,Ei=On.length;Xr<Ei;Xr++){var ci=On[Xr];Ii()(ci)?On[Xr]=this.formatEl(ci):mn()(ci)?On[Xr]=this.formatFn(ci):Mr()(ci)?On[Xr]='<span class="'.concat(Fn("regexp"),'">').concat(ee()(oe()(ci)),"</span>"):dr()(ci)?On[Xr]=this.formatPreview(ci):Gn()(ci)?On[Xr]='<span class="'.concat(Fn("undefined"),'">undefined</span>'):br()(ci)?On[Xr]='<span class="'.concat(Fn("null"),'">null</span>'):Mn()(ci)?On[Xr]='<span class="'.concat(Fn("number"),'">').concat(oe()(ci),"</span>"):typeof ci=="bigint"?On[Xr]='<span class="'.concat(Fn("number"),'">').concat(oe()(ci),"n</span>"):bi()(ci)?On[Xr]='<span class="'.concat(Fn("boolean"),'">').concat(oe()(ci),"</span>"):Ln()(ci)?On[Xr]='<span class="'.concat(Fn("symbol"),'">').concat(ee()(oe()(ci)),"</span>"):(ci=oe()(ci),Xr===0&&mr||(ci=ee()(ci)),ci.length>5e3&&(ci=Oe()(ci,5e3,{separator:" ",ellipsis:""})),On[Xr]=ci)}return On.join(" ")}},{key:"formatDir",value:function(On){return dr()(On[0])?this.formatPreview(On[0]):this.formatCommon(On)}},{key:"formatTableVal",value:function(On){var Fn=this.console.c;return dr()(On)?"{}":ti()(On)?Ai()('<div class="'.concat(Fn("preview"),'">').concat(jn(On),"</div>")):oe()(On)}},{key:"formatPreview",value:function(On){var Fn=this,mr=this.console.c,Xr=Si()();this.lazyEvaluation?this.objects[Xr]=On:this.extractObj(On,{},function(Ri){Fn.objects[Xr]=Ri});var Ei=re()(["dir","table"],this.type),ci=je(On);return ci==="Array"&&On.length>1?(ci="(".concat(On.length,")"),Ei&&(ci="Array".concat(ci))):ci==="RegExp"?ci=oe()(On):Ii()(On)&&(ci=this.formatElName(On)),'<div class="'.concat(mr("preview"),'" data-id="').concat(Xr,'">')+'<div class="'.concat(mr("preview-container"),'">')+'<div class="'.concat(mr("preview-icon-container"),'"><span class="').concat(mr("icon icon-caret-right"),'"></span></div>')+'<span class="'.concat(mr("preview-content-container"),'">')+'<span class="'.concat(mr("descriptor"),'">').concat(ee()(ci),"</span> ")+'<span class="'.concat(mr("object-preview"),'">').concat(Ei?"":jn(On,{getterVal:this.accessGetter,unenumerable:!1}),"</span>")+"</span></div>"+'<div class="'.concat(mr("json hidden"),'"></div></div>')}},{key:"substituteStr",value:function(On){var Fn=ee()(On[0]),mr=!1,Xr="";On.shift();for(var Ei=0,ci=Fn.length;Ei<ci;Ei++){var Ri=Fn[Ei];if(Ri==="%"&&On.length!==0){Ei++;var Ui=On.shift();switch(Fn[Ei]){case"i":case"d":Xr+=Br()(Ui);break;case"f":Xr+=In()(Ui);break;case"s":Xr+=oe()(Ui);break;case"O":dr()(Ui)?Xr+=this.formatPreview(Ui):Xr+=oe()(Ui);break;case"o":Ii()(Ui)?Xr+=this.formatEl(Ui):dr()(Ui)?Xr+=this.formatPreview(Ui):Xr+=oe()(Ui);break;case"c":if(Fn.length<=Ei+1)break;mr&&(Xr+="</span>"),mr=!0,Xr+='<span style="'.concat(Hi(Ui),'">');break;default:Ei--,On.unshift(Ui),Xr+=Ri}}else Xr+=Ri}return mr&&(Xr+="</span>"),On.unshift(Xr),On}},{key:"formatJs",value:function(On){var Fn=Cr()(On,"js",di);return Fn!==On&&(Fn=this.console.c(Fn)),'<pre class="'.concat(this.console.c("code"),'">').concat(Fn,"</pre>")}},{key:"formatFn",value:function(On){return'<pre style="display:inline">'.concat(this.formatJs(On.toString()),"</pre>")}},{key:"formatElName",value:function(On){var Fn=On.id,mr=On.className,Xr=On.tagName.toLowerCase();if(Fn!==""&&(Xr+="#".concat(Fn)),Wr()(mr)){var Ei="";ve()(mr.split(/\s+/g),function(ci){ci.trim()!==""&&(Ei+=".".concat(ci))}),Xr+=Ei}return Xr}},{key:"formatEl",value:function(On){var Fn=Si()();return this.elements[Fn]=On,this.console.c('<div class="dom-viewer" data-id="'.concat(Fn,'"></div>'))}}])}(lr());function Hi(Di){var Xi=(Di=sr()(Di)).split(";"),On={};ve()(Xi,function(mr){if(re()(mr,":")){var Xr=w(mr.split(":"),2),Ei=Xr[0],ci=Xr[1];On[We()(Ei)]=We()(ci)}}),On.display="inline-block",On["max-width"]="100%",delete On.width,delete On.height;var Fn="";return ve()(On,function(mr,Xr){Fn+="".concat(Xr,":").concat(mr,";")}),Fn}var fi=v(5820),qi=v.n(fi),Ki=v(3981),$i=v.n(Ki),wi=v(8105),Oi=v.n(wi),Gi=v(7005),wa=v.n(Gi),Fi=v(3497),Ba=v.n(Fi),ta=v(5865),Ua=v.n(ta),Ss=v(8862),Gs=v.n(Ss),Cs=v(7030),ko=v.n(Cs),ws=v(961),No=v.n(ws),po=v(7e3),ji=v.n(po);function Da(){try{var Di=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Da=function(){return!!Di})()}var ha,ao=function(Di){function Xi(On,Fn){var mr,Xr,Ei=Fn.compName,ci=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Ri=ci===void 0?"light":ci;return(0,T.A)(this,Xi),mr=function(Ui,ki,Yi){return ki=(0,I.A)(ki),(0,G.A)(Ui,Da()?Reflect.construct(ki,[],(0,I.A)(Ui).constructor):ki.apply(Ui,Yi))}(this,Xi),mr.subComponents=[],mr.theme="",mr.onThemeChange=function(Ui){mr.options.theme==="auto"&&mr.setTheme(Ui)},mr.compName=Ei,mr.c=Gt(Ei),mr.options={},mr.container=On,mr.$container=An()(On),mr.$container.addClass(["luna-".concat(Ei),mr.c("platform-".concat((Xr=$n()(),Xr==="os x"?"mac":Xr)))]),mr.on("changeOption",function(Ui,ki){if(Ui==="theme"&&ki){var Yi=ki;ki==="auto"&&(Yi=ji().get()),mr.setTheme(Yi),ve()(mr.subComponents,function(Ea){return Ea.setOption("theme",ki)})}}),ji().on("change",mr.onThemeChange),mr.setOption("theme",Ri),mr}return(0,H.A)(Xi,Di),(0,R.A)(Xi,[{key:"destroy",value:function(){var On=this;this.destroySubComponents();var Fn=this.$container,mr=Fn.attr("class");ve()(mr.split(/\s+/),function(Xr){ue()(Xr,"luna-".concat(On.compName))&&Fn.rmClass(Xr)}),Fn.html(""),this.emit("destroy"),this.removeAllListeners(),ji().off("change",this.onThemeChange)}},{key:"setOption",value:function(On,Fn){var mr=this,Xr=this.options,Ei={};typeof On=="string"?Ei[On]=Fn:Ei=On,ve()(Ei,function(ci,Ri){var Ui=Xr[Ri];Xr[Ri]=ci,ci!==Ui&&mr.emit("changeOption",Ri,ci,Ui)})}},{key:"getOption",value:function(On){return this.options[On]}},{key:"addSubComponent",value:function(On){On.setOption("theme",this.options.theme),this.subComponents.push(On)}},{key:"removeSubComponent",value:function(On){No()(this.subComponents,function(Fn){return Fn===On})}},{key:"destroySubComponents",value:function(){ve()(this.subComponents,function(On){return On.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(On){var Fn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ci()(On,Fn),Oi()(this.options,On)}},{key:"find",value:function(On){return this.$container.find(this.c(On))}},{key:"setTheme",value:function(On){var Fn=this.c,mr=this.$container;this.theme&&mr.rmClass(Fn("theme-".concat(this.theme))),mr.addClass(Fn("theme-".concat(On))),this.theme=On}}])}(lr()),ms=v(2228),ka=v.n(ms);function Uo(){try{var Di=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uo=function(){return!!Di})()}_=v.hmd(_);var Po=navigator.userAgent,Xl=Po.indexOf("Android")>-1||Po.indexOf("Adr")>-1,so=0,Bo=function(Di){function Xi(On){var Fn,mr,Xr,Ei,ci=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,T.A)(this,Xi),mr=this,Xr=Xi,Ei=[On,{compName:"console"},ci],Xr=(0,I.A)(Xr),(Fn=(0,G.A)(mr,Uo()?Reflect.construct(Xr,Ei||[],(0,I.A)(mr).constructor):Xr.apply(mr,Ei))).spaceHeight=0,Fn.topSpaceHeight=0,Fn.bottomSpaceHeight=0,Fn.lastScrollTop=0,Fn.lastTimestamp=0,Fn.speedToleranceFactor=100,Fn.maxSpeedTolerance=2e3,Fn.minSpeedTolerance=100,Fn.logs=[],Fn.displayLogs=[],Fn.timer={},Fn.counter={},Fn.asyncList=[],Fn.asyncTimer=null,Fn.isAtBottom=!0,Fn.groupStack=new(wa()),Fn.selectedLog=null,Fn.onScroll=function(){var Ri=Fn.container,Ui=Ri.scrollHeight,ki=Ri.offsetHeight,Yi=Ri.scrollTop;if(!(Yi<=0||ki+Yi>Ui)){var Ea=!1;(Ui===ki||Math.abs(Ui-ki-Yi)<1)&&(Ea=!0),Fn.isAtBottom=Ea;var qa=Fn.lastScrollTop,Fa=Fn.lastTimestamp,va=$i()(),$a=va-Fa,Ts=Yi-qa,Za=Math.abs(Ts/$a)*Fn.speedToleranceFactor;$a>1e3&&(Za=1e3),Za>Fn.maxSpeedTolerance&&(Za=Fn.maxSpeedTolerance),Za<Fn.minSpeedTolerance&&(Za=Fn.minSpeedTolerance),Fn.lastScrollTop=Yi,Fn.lastTimestamp=va;var Rs=0,us=0;qa<Yi?(Rs=Fn.minSpeedTolerance,us=Za):(Rs=Za,us=Fn.minSpeedTolerance),Fn.topSpaceHeight<Yi-Rs&&Fn.topSpaceHeight+Fn.el.offsetHeight>Yi+ki+us||Fn.renderViewport({topTolerance:2*Rs,bottomTolerance:2*us})}},Fn.initTpl(),Fn.initOptions(ci,{maxNum:0,asyncRender:!0,showHeader:!1,filter:"",level:["verbose","info","warning","error"],accessGetter:!1,unenumerable:!0,lazyEvaluation:!0}),Fn.$el=Fn.find(".logs"),Fn.el=Fn.$el.get(0),Fn.$fakeEl=Fn.find(".fake-logs"),Fn.fakeEl=Fn.$fakeEl.get(0),Fn.$space=Fn.find(".logs-space"),Fn.space=Fn.$space.get(0),Xl&&(Fn.speedToleranceFactor=800,Fn.maxSpeedTolerance=3e3,Fn.minSpeedTolerance=800),Fn.resizeSensor=new(kn())(On),Fn.renderViewport=Ua()(function(Ri){Fn._renderViewport(Ri)},16),Fn.global={copy:function(Ri){Wr()(Ri)||(Ri=JSON.stringify(Ri,null,2)),yr()(Ri)},$:function(Ri){return document.querySelector(Ri)},$$:function(Ri){return vr()(document.querySelectorAll(Ri))},$x:function(Ri){return Gs()(Ri)},clear:function(){Fn.clear()},dir:function(Ri){Fn.dir(Ri)},table:function(Ri,Ui){Fn.table(Ri,Ui)},keys:it()},Fn.bindEvent(),Fn}return(0,H.A)(Xi,Di),(0,R.A)(Xi,[{key:"setGlobal",value:function(On,Fn){this.global[On]=Fn}},{key:"destroy",value:function(){var On,Fn,mr,Xr,Ei;this.$container.off("scroll",this.onScroll),this.resizeSensor.destroy(),(On=Xi,Fn="destroy",mr=this,Xr=3,Ei=(0,z.A)((0,I.A)(1&Xr?On.prototype:On),Fn,mr),2&Xr&&typeof Ei=="function"?function(ci){return Ei.apply(mr,ci)}:Ei)([])}},{key:"count",value:function(){var On=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",Fn=this.counter;Gn()(Fn[On])?Fn[On]=1:Fn[On]++,this.info("".concat(On,": ").concat(Fn[On]))}},{key:"countReset",value:function(){var On=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.counter[On]=0}},{key:"assert",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||Fn.shift()||(Fn.length===0&&Fn.unshift("console.assert"),Fn.unshift("Assertion failed: "),this.insert("error",Fn))}},{key:"log",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||this.insert("log",Fn)}},{key:"debug",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||this.insert("debug",Fn)}},{key:"dir",value:function(On){Gn()(On)||this.insert("dir",[On])}},{key:"table",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||this.insert("table",Fn)}},{key:"time",value:function(){var On=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";if(this.timer[On])return this.insert("warn",["Timer '".concat(On,"' already exists")]);this.timer[On]=qi()()}},{key:"timeLog",value:function(){var On=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",Fn=this.timer[On];if(!Fn)return this.insert("warn",["Timer '".concat(On,"' does not exist")]);this.info("".concat(On,": ").concat(qi()()-Fn,"ms"))}},{key:"timeEnd",value:function(){var On=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default";this.timeLog(On),delete this.timer[On]}},{key:"clear",value:function(){var On=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.logs=[],this.displayLogs=[],this.selectLog(null),this.lastLog=void 0,this.counter={},this.timer={},this.groupStack=new(wa()),this.asyncList=[],this.asyncTimer&&(clearTimeout(this.asyncTimer),this.asyncTimer=null),On?this.render():this.insert("log",["%cConsole was cleared","color:#808080;font-style:italic;"])}},{key:"info",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||this.insert("info",Fn)}},{key:"error",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||this.insert("error",Fn)}},{key:"warn",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];De()(Fn)||this.insert("warn",Fn)}},{key:"group",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];this.insert({type:"group",args:Fn,ignoreFilter:!0})}},{key:"groupCollapsed",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];this.insert({type:"groupCollapsed",args:Fn,ignoreFilter:!0})}},{key:"groupEnd",value:function(){this.insert("groupEnd")}},{key:"evaluate",value:function(On){this.insert({type:"input",args:[On],ignoreFilter:!0});try{this.output(this.evalJs(On))}catch(Fn){this.insert({type:"error",ignoreFilter:!0,args:[Fn]})}}},{key:"html",value:function(){for(var On=arguments.length,Fn=new Array(On),mr=0;mr<On;mr++)Fn[mr]=arguments[mr];this.insert("html",Fn)}},{key:"toggleGroup",value:function(On){On.targetGroup.collapsed?this.openGroup(On):this.collapseGroup(On)}},{key:"output",value:function(On){this.insert({type:"output",args:[On],ignoreFilter:!0})}},{key:"render",value:function(){var On=this.logs,Fn=this.selectedLog;this.$el.html(""),this.isAtBottom=!0,this.updateBottomSpace(0),this.updateTopSpace(0),this.displayLogs=[];for(var mr=0,Xr=On.length;mr<Xr;mr++)this.attachLog(On[mr]);Fn&&(re()(this.displayLogs,Fn)||this.selectLog(null))}},{key:"insert",value:function(On,Fn){var mr,Xr=this.options,Ei=Xr.showHeader,ci=Xr.asyncRender;if(Ei&&(mr={time:Eo(),from:Do()}),ci)return this.insertAsync(On,Fn,mr);this.insertSync(On,Fn,mr)}},{key:"insertAsync",value:function(On,Fn,mr){this.asyncList.push([On,Fn,mr]),this.handleAsyncList()}},{key:"insertSync",value:function(On,Fn,mr){var Xr,Ei=this,ci=this.logs,Ri=this.groupStack,Ui=this.options,ki=Ui.maxNum,Yi=Ui.accessGetter,Ea=Ui.unenumerable,qa=Ui.lazyEvaluation;if((Xr=Wr()(On)?{type:On,args:Fn,header:mr}:On).type==="groupEnd")return this.lastLog.groupEnd(),void this.groupStack.pop();if(Ri.size>0&&(Xr.group=Ri.peek()),Oi()(Xr,{id:++so,accessGetter:Yi,unenumerable:Ea,lazyEvaluation:qa}),Xr.type==="group"||Xr.type==="groupCollapsed"){var Fa={id:Si()("group"),collapsed:!1,parent:Ri.peek(),indentLevel:Ri.size+1};Xr.type==="groupCollapsed"&&(Fa.collapsed=!0),Xr.targetGroup=Fa,Ri.push(Fa)}var va=new _i(this,Xr);va.on("updateHeight",function(){Ei.isAtBottom=!1,Ei.renderViewport()});var $a=this.lastLog;if($a&&!re()(["html","group","groupCollapsed"],va.type)&&$a.type===va.type&&va.isSimple()&&$a.text()===va.text()?($a.addCount(),va.header&&$a.updateTime(va.header.time),va=$a,this.detachLog($a)):(ci.push(va),this.lastLog=va),ki!==0&&ci.length>ki){var Ts=ci[0];this.detachLog(Ts),ci.shift()}this.attachLog(va),this.emit("insert",va)}},{key:"updateTopSpace",value:function(On){this.topSpaceHeight=On,this.el.style.top=On+"px"}},{key:"updateBottomSpace",value:function(On){this.bottomSpaceHeight=On}},{key:"updateSpace",value:function(On){this.spaceHeight!==On&&(this.spaceHeight=On,this.space.style.height=On+"px")}},{key:"detachLog",value:function(On){var Fn=this.displayLogs,mr=Fn.indexOf(On);mr>-1&&(Fn.splice(mr,1),this.renderViewport())}},{key:"attachLog",value:function(On){if(this.filterLog(On)&&!On.collapsed){var Fn=this.displayLogs;if(Fn.length===0)return Fn.push(On),void this.renderViewport();var mr=Ba()(Fn);if(On.id>mr.id)return Fn.push(On),void this.renderViewport();for(var Xr,Ei=0,ci=Fn.length-1,Ri=0;Ei<=ci;){if((Xr=Fn[Ri=Ei+Math.floor((ci-Ei)/2)]).id===On.id)return;Xr.id<On.id?Ei=Ri+1:ci=Ri-1}Xr.id<On.id?Fn.splice(Ri+1,0,On):Fn.splice(Ri,0,On),this.renderViewport()}}},{key:"handleAsyncList",value:function(){var On=this,Fn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,mr=this.asyncList;this.asyncTimer||(this.asyncTimer=setTimeout(function(){On.asyncTimer=null;var Xr,Ei,ci=!1,Ri=mr.length;Ri<1e3?(Ei=200,Xr=400):Ri<5e3?(Ei=500,Xr=800):Ri<1e4?(Ei=800,Xr=1e3):Ri<25e3?(Ei=1e3,Xr=1200):Ri<5e4?(Ei=1500,Xr=1500):(Ei=2e3,Xr=2500),Ei>Ri&&(Ei=Ri,ci=!0);for(var Ui=0;Ui<Ei;Ui++){var ki=w(mr.shift(),3),Yi=ki[0],Ea=ki[1],qa=ki[2];On.insertSync(Yi,Ea,qa)}ci||ka()(function(){return On.handleAsyncList(Xr)})},Fn))}},{key:"injectGlobal",value:function(){ve()(this.global,function(On,Fn){window[Fn]||(window[Fn]=On)})}},{key:"clearGlobal",value:function(){ve()(this.global,function(On,Fn){window[Fn]&&window[Fn]===On&&delete window[Fn]})}},{key:"evalJs",value:function(On){var Fn;this.injectGlobal();try{Fn=eval.call(window,"(".concat(On,")"))}catch{Fn=eval.call(window,On)}return this.setGlobal("$_",Fn),this.clearGlobal(),Fn}},{key:"filterLog",value:function(On){var Fn=this.options.level,mr=this.options.filter;if(On.ignoreFilter)return!0;if(!re()(Fn,On.level))return!1;if(mr){if(mn()(mr))return mr(On);if(Mr()(mr))return mr.test(sr()(On.text()));if(Wr()(mr)&&(mr=We()(mr)))return re()(sr()(On.text()),sr()(mr))}return!0}},{key:"collapseGroup",value:function(On){On.targetGroup.collapsed=!0,On.updateIcon("caret-right"),this.updateGroup(On)}},{key:"openGroup",value:function(On){On.targetGroup.collapsed=!1,On.updateIcon("caret-down"),this.updateGroup(On)}},{key:"updateGroup",value:function(On){for(var Fn=On.targetGroup,mr=this.logs,Xr=mr.length,Ei=mr.indexOf(On)+1;Ei<Xr;){var ci=mr[Ei];if(!ci.checkGroup()&&ci.group===Fn)break;ci.collapsed?this.detachLog(ci):this.attachLog(ci),Ei++}}},{key:"selectLog",value:function(On){var Fn;this.selectedLog&&(this.selectedLog.deselect(),this.selectedLog=null),br()(On)?this.emit("deselect"):(this.selectedLog=On,(Fn=this.selectedLog)===null||Fn===void 0||Fn.select(),this.emit("select",On))}},{key:"bindEvent",value:function(){var On=this,Fn=this.$el,mr=this.c;this.resizeSensor.addListener(this.renderViewport);var Xr=this;Fn.on("click",mr(".log-container"),function(){Xr.selectLog(this.log)}),this.on("changeOption",function(Ei,ci){var Ri=On.logs;switch(Ei){case"maxNum":ci>0&&Ri.length>ci&&(On.logs=Ri.slice(Ri.length-ci),On.render());break;case"filter":On.render();break;case"level":On.options.level=vr()(ci),On.render()}}),this.$container.on("scroll",this.onScroll)}},{key:"_renderViewport",value:function(){var On=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Fn=On.topTolerance,mr=Fn===void 0?500:Fn,Xr=On.bottomTolerance,Ei=Xr===void 0?500:Xr,ci=this.el,Ri=this.container,Ui=this.space;if(!Dn()(Ri)){for(var ki=Ri.scrollTop,Yi=Ri.offsetHeight,Ea=Ui.getBoundingClientRect().width,qa=ki-mr,Fa=ki+Yi+Ei,va=this.displayLogs,$a=0,Ts=0,Za=0,Rs=va.length,us=this.fakeEl,Qs=document.createDocumentFragment(),Ao=[],xs=0;xs<Rs;xs++){var Ms=va[xs],Js=Ms.width;Ms.height!==0&&Js===Ea||(Qs.appendChild(Ms.container),Ao.push(Ms))}if(Ao.length>0){us.appendChild(Qs);for(var es=0,js=Ao.length;es<js;es++)Ao[es].updateSize();us.textContent=""}for(var zs=document.createDocumentFragment(),Ls=0;Ls<Rs;Ls++){var Le=va[Ls],st=Le.container,zt=Le.height;Za>Fa?Ts+=zt:Za+zt>qa?zs.appendChild(st):Za<qa&&($a+=zt),Za+=zt}for(this.updateSpace(Za),this.updateTopSpace($a),this.updateBottomSpace(Ts);ci.firstChild;)ci.lastChild&&ci.removeChild(ci.lastChild);ci.appendChild(zs);var qn=Ri.scrollHeight;this.isAtBottom&&ki<=qn-Yi&&(Ri.scrollTop=1e7)}}},{key:"initTpl",value:function(){this.$container.html(this.c(Vr()(ha||(ha=(0,A.A)([`
      <div class="logs-space">
        <div class="fake-logs"></div>
        <div class="logs"></div>
      </div>
    `])))))}}])}(ao),Eo=function(){return ko()("HH:MM:ss ")};function Do(){for(var Di=new Error,Xi="",On=Di.stack?Di.stack.split(`
`):"",Fn=0,mr=On.length;Fn<mr;Fn++)if((Xi=On[Fn]).indexOf("winConsole")>-1&&Fn<mr-1){Xi=On[Fn+1];break}return Xi}(function(Di,Xi){try{Di.exports=Xi,Di.exports.default=Xi}catch{}})(_,Bo)},3612:function(_,d,v){var A=v(1738),C=v(769),w=v(21);d=function(T){return C(A(T)?new w(T):T)},_.exports=d},3693:function(_,d,v){var A=v(21),C=v(2230),w=v(8604),T=v(6866),R=v(9186),G=v(7236),I=v(3497),z=v(2113),H=v(2125),Y=v(3793),ee=v(7661),ie=v(5360),oe=v(8971),se=v(1738);d=function(fe){return new A(fe)},A.methods({offset:function(){return C(this)},hide:function(){return this.css("display","none")},show:function(){return w(this),this},first:function(){return d(this[0])},last:function(){return d(I(this))},get:function(fe){return this[fe]},eq:function(fe){return d(this[fe])},on:function(fe,ue,ge){return Y.on(this,fe,ue,ge),this},off:function(fe,ue,ge){return Y.off(this,fe,ue,ge),this},html:function(fe){var ue=G.html(this,fe);return oe(fe)?ue:this},text:function(fe){var ue=G.text(this,fe);return oe(fe)?ue:this},val:function(fe){var ue=G.val(this,fe);return oe(fe)?ue:this},css:function(fe,ue){var ge=T(this,fe,ue);return re(fe,ue)?ge:this},attr:function(fe,ue){var ge=R(this,fe,ue);return re(fe,ue)?ge:this},data:function(fe,ue){var ge=H(this,fe,ue);return re(fe,ue)?ge:this},rmAttr:function(fe){return R.remove(this,fe),this},remove:function(){return z(this),this},addClass:function(fe){return ee.add(this,fe),this},rmClass:function(fe){return ee.remove(this,fe),this},toggleClass:function(fe){return ee.toggle(this,fe),this},hasClass:function(fe){return ee.has(this,fe)},parent:function(){return d(this[0].parentNode)},append:function(fe){return ie.append(this,fe),this},prepend:function(fe){return ie.prepend(this,fe),this},before:function(fe){return ie.before(this,fe),this},after:function(fe){return ie.after(this,fe),this}});var re=function(fe,ue){return oe(ue)&&se(fe)};_.exports=d},3703:function(_,d){var v=this&&this.__read||function(oe,se){var re=typeof Symbol=="function"&&oe[Symbol.iterator];if(!re)return oe;var fe,ue,ge=re.call(oe),ye=[];try{for(;(se===void 0||se-- >0)&&!(fe=ge.next()).done;)ye.push(fe.value)}catch(be){ue={error:be}}finally{try{fe&&!fe.done&&(re=ge.return)&&re.call(ge)}finally{if(ue)throw ue.error}}return ye},A=this&&this.__values||function(oe){var se=typeof Symbol=="function"&&Symbol.iterator,re=se&&oe[se],fe=0;if(re)return re.call(oe);if(oe&&typeof oe.length=="number")return{next:function(){return oe&&fe>=oe.length&&(oe=void 0),{value:oe&&oe[fe++],done:!oe}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")};function C(oe,se){var re=oe[3];return[(1-re)*se[0]+re*oe[0],(1-re)*se[1]+re*oe[1],(1-re)*se[2]+re*oe[2],re+se[3]*(1-re)]}function w(oe){var se=v(oe,3),re=se[0],fe=se[1],ue=se[2];return .2126*(re<=.03928?re/12.92:Math.pow((re+.055)/1.055,2.4))+.7152*(fe<=.03928?fe/12.92:Math.pow((fe+.055)/1.055,2.4))+.0722*(ue<=.03928?ue/12.92:Math.pow((ue+.055)/1.055,2.4))}Object.defineProperty(d,"__esModule",{value:!0}),d.getContrastThreshold=d.isLargeFont=d.getAPCAThreshold=d.desiredLuminanceAPCA=d.contrastRatioByLuminanceAPCA=d.contrastRatioAPCA=d.luminanceAPCA=d.contrastRatio=d.luminance=d.rgbaToHsla=d.blendColors=void 0,d.blendColors=C,d.rgbaToHsla=function(oe){var se=v(oe,4),re=se[0],fe=se[1],ue=se[2],ge=se[3],ye=Math.max(re,fe,ue),be=Math.min(re,fe,ue),ve=ye-be,Me=ye+be,we=.5*Me;return[be===ye?0:re===ye?(.16666666666666666*(fe-ue)/ve+1)%1:fe===ye?.16666666666666666*(ue-re)/ve+.3333333333333333:.16666666666666666*(re-fe)/ve+.6666666666666666,we===0||we===1?0:we<=.5?ve/Me:ve/(2-Me),we,ge]},d.luminance=w,d.contrastRatio=function(oe,se){var re=w(C(oe,se)),fe=w(se);return(Math.max(re,fe)+.05)/(Math.min(re,fe)+.05)};var T=12.82051282051282,R=.06;function G(oe){var se=v(oe,3),re=se[0],fe=se[1],ue=se[2];return .2126729*Math.pow(re,2.4)+.7151522*Math.pow(fe,2.4)+.072175*Math.pow(ue,2.4)}function I(oe){return oe>.03?oe:oe+Math.pow(.03-oe,1.45)}function z(oe,se){if(oe=I(oe),se=I(se),Math.abs(oe-se)<5e-4)return 0;var re=0;return 100*(re=se>=oe?(re=1.25*(Math.pow(se,.55)-Math.pow(oe,.58)))<.001?0:re<.078?re-re*T*R:re-R:(re=1.25*(Math.pow(se,.62)-Math.pow(oe,.57)))>-.001?0:re>-.078?re-re*T*R:re+R)}d.luminanceAPCA=G,d.contrastRatioAPCA=function(oe,se){return z(G(oe),G(se))},d.contrastRatioByLuminanceAPCA=z,d.desiredLuminanceAPCA=function(oe,se,re){function fe(){return re?Math.pow(Math.abs(Math.pow(oe,.62)-(-se-R)/1.25),1.7543859649122808):Math.pow(Math.abs(Math.pow(oe,.55)-(se+R)/1.25),1.7241379310344829)}oe=I(oe),se/=100;var ue=fe();return(ue<0||ue>1)&&(re=!re,ue=fe()),ue};var H=[[12,-1,-1,-1,-1,100,90,80,-1,-1],[14,-1,-1,-1,100,90,80,60,60,-1],[16,-1,-1,100,90,80,60,55,50,50],[18,-1,-1,90,80,60,55,50,40,40],[24,-1,100,80,60,55,50,40,38,35],[30,-1,90,70,55,50,40,38,35,40],[36,-1,80,60,50,40,38,35,30,25],[48,100,70,55,40,38,35,30,25,20],[60,90,60,50,38,35,30,25,20,20],[72,80,55,40,35,30,25,20,20,20],[96,70,50,35,30,25,20,20,20,20],[120,60,40,30,25,20,20,20,20,20]];function Y(oe,se){var re=72*parseFloat(oe.replace("px",""))/96;return["bold","bolder","600","700","800","900"].indexOf(se)!==-1?re>=14:re>=18}H.reverse(),d.getAPCAThreshold=function(oe,se){var re,fe,ue,ge,ye=parseFloat(oe.replace("px","")),be=parseFloat(se);try{for(var ve=A(H),Me=ve.next();!Me.done;Me=ve.next()){var we=v(Me.value),Be=we[0],De=we.slice(1);if(ye>=Be)try{for(var Fe=(ue=void 0,A([900,800,700,600,500,400,300,200,100].entries())),Oe=Fe.next();!Oe.done;Oe=Fe.next()){var Ge=v(Oe.value,2),ze=Ge[0];if(be>=Ge[1]){var je=De[De.length-1-ze];return je===-1?null:je}}}catch(He){ue={error:He}}finally{try{Oe&&!Oe.done&&(ge=Fe.return)&&ge.call(Fe)}finally{if(ue)throw ue.error}}}}catch(He){re={error:He}}finally{try{Me&&!Me.done&&(fe=ve.return)&&fe.call(ve)}finally{if(re)throw re.error}}return null},d.isLargeFont=Y;var ee={aa:3,aaa:4.5},ie={aa:4.5,aaa:7};d.getContrastThreshold=function(oe,se){return Y(oe,se)?ee:ie}},3722:function(_,d,v){var A=v(3145);d=function(C){return Object.freeze?Object.freeze(C):(A(C).forEach(function(w){Object.getOwnPropertyDescriptor(C,w).configurable&&Object.defineProperty(C,w,{writable:!1,configurable:!1})}),C)},_.exports=d},3737:function(_,d,v){var A=v(2263);d=A.extend({className:"MediaQuery",initialize:function(C){var w=this;this.callSuper(A,"initialize"),this._listener=function(){w.emit(w.isMatch()?"match":"unmatch")},this.setQuery(C)},setQuery:function(C){this._mql&&this._mql.removeListener(this._listener),this._mql=window.matchMedia(C),this._mql.addListener(this._listener)},isMatch:function(){return this._mql.matches}}),_.exports=d},3750:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object Blob]"},_.exports=d},3752:function(_,d,v){var A=v(2510),C=v(769);d=A(function(w,T){return function(){var R=[];return R=(R=R.concat(T)).concat(C(arguments)),w.apply(this,R)}}),_.exports=d},3793:function(_,d,v){var A=v(8966),C=v(8971),w=v(3612),T=v(9100);function R(G){return function(I,z,H,Y){I=w(I),C(Y)&&(Y=H,H=void 0),T(I,function(ee){A[G](ee,z,H,Y)})}}d={on:R("add"),off:R("remove")},_.exports=d},3805:function(_,d,v){var A=v(2561);d=function(C){return A(C).toLocaleUpperCase()},_.exports=d},3915:function(_,d,v){var A=v(5693),C=v(3145),w=v(5793);d=function(T,R,G){R=A(R,G);for(var I=!w(T)&&C(T),z=(I||T).length,H=Array(z),Y=0;Y<z;Y++){var ee=I?I[Y]:Y;H[Y]=R(T[ee],ee,T)}return H},_.exports=d},3954:function(_,d,v){function A(C){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},A(C)}v.d(d,{A:function(){return A}})},3957:function(_,d,v){var A=v(3974);d=function(C){var w=A(C);return w==="[object Function]"||w==="[object GeneratorFunction]"||w==="[object AsyncFunction]"},_.exports=d},3974:function(_,d){var v=Object.prototype.toString;d=function(A){return v.call(A)},_.exports=d},3979:function(_,d,v){var A=this&&this.__values||function(re){var fe=typeof Symbol=="function"&&Symbol.iterator,ue=fe&&re[fe],ge=0;if(ue)return ue.call(re);if(re&&typeof re.length=="number")return{next:function(){return re&&ge>=re.length&&(re=void 0),{value:re&&re[ge++],done:!re}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")},C=this&&this.__read||function(re,fe){var ue=typeof Symbol=="function"&&re[Symbol.iterator];if(!ue)return re;var ge,ye,be=ue.call(re),ve=[];try{for(;(fe===void 0||fe-- >0)&&!(ge=be.next()).done;)ve.push(ge.value)}catch(Me){ye={error:Me}}finally{try{ge&&!ge.done&&(ue=be.return)&&ue.call(be)}finally{if(ye)throw ye.error}}return ve},w=this&&this.__spreadArray||function(re,fe,ue){if(ue||arguments.length===2)for(var ge,ye=0,be=fe.length;ye<be;ye++)!ge&&ye in fe||(ge||(ge=Array.prototype.slice.call(fe,0,ye)),ge[ye]=fe[ye]);return re.concat(ge||Array.prototype.slice.call(fe))},T=this&&this.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(d,"__esModule",{value:!0}),d.drawPath=d.formatColor=d.formatRgba=d.parseHexa=d.createPathForQuad=d.hatchFillPath=d.applyMatrixToPoint=d.emptyBounds=d.buildPath=d.fillPathWithBoxStyle=d.drawPathWithLineStyle=void 0;var R=T(v(1580)),G=v(3703);function I(re,fe,ue){var ge=0;function ye(Me){for(var we=[],Be=0;Be<Me;++Be){var De=Math.round(re[ge++]*ue);fe.maxX=Math.max(fe.maxX,De),fe.minX=Math.min(fe.minX,De);var Fe=Math.round(re[ge++]*ue);fe.maxY=Math.max(fe.maxY,Fe),fe.minY=Math.min(fe.minY,Fe),fe.leftmostXForY[Fe]=Math.min(fe.leftmostXForY[Fe]||Number.MAX_VALUE,De),fe.rightmostXForY[Fe]=Math.max(fe.rightmostXForY[Fe]||Number.MIN_VALUE,De),fe.topmostYForX[De]=Math.min(fe.topmostYForX[De]||Number.MAX_VALUE,Fe),fe.bottommostYForX[De]=Math.max(fe.bottommostYForX[De]||Number.MIN_VALUE,Fe),fe.allPoints.push({x:De,y:Fe}),we.push(De,Fe)}return we}for(var be=re.length,ve=new Path2D;ge<be;)switch(re[ge++]){case"M":ve.moveTo.apply(ve,ye(1));break;case"L":ve.lineTo.apply(ve,ye(1));break;case"C":ve.bezierCurveTo.apply(ve,ye(3));break;case"Q":ve.quadraticCurveTo.apply(ve,ye(2));break;case"Z":ve.closePath()}return ve}d.drawPathWithLineStyle=function(re,fe,ue,ge){ge===void 0&&(ge=1),ue&&ue.color&&(re.save(),re.translate(.5,.5),re.lineWidth=ge,ue.pattern==="dashed"&&re.setLineDash([3,3]),ue.pattern==="dotted"&&re.setLineDash([2,2]),re.strokeStyle=ue.color,re.stroke(fe),re.restore())},d.fillPathWithBoxStyle=function(re,fe,ue,ge,ye){ye&&(re.save(),ye.fillColor&&(re.fillStyle=ye.fillColor,re.fill(fe)),ye.hatchColor&&ie(re,fe,ue,10,ye.hatchColor,ge,!1),re.restore())},d.buildPath=I,d.emptyBounds=function(){return{minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE,leftmostXForY:{},rightmostXForY:{},topmostYForX:{},bottommostYForX:{},allPoints:[]}},d.applyMatrixToPoint=function(re,fe){var ue=new DOMPoint(re.x,re.y);return{x:(ue=ue.matrixTransform(fe)).x,y:ue.y}};var z,H=5,Y=3,ee="";function ie(re,fe,ue,ge,ye,be,ve){if((re.canvas.width<ue.maxX-ue.minX||re.canvas.height<ue.maxY-ue.minY)&&(ue={minX:0,maxX:re.canvas.width,minY:0,maxY:re.canvas.height,allPoints:[]}),!z||ye!==ee){ee=ye;var Me=document.createElement("canvas");Me.width=ge,Me.height=H+Y;var we=Me.getContext("2d");we.clearRect(0,0,Me.width,Me.height),we.rect(0,0,1,H),we.fillStyle=ye,we.fill(),z=re.createPattern(Me,"repeat")}re.save();var Be=new DOMMatrix;z.setTransform(Be.scale(ve?-1:1,1).rotate(0,0,-45+be)),re.fillStyle=z,re.fill(fe),re.restore()}function oe(re){return(re.match(/#(\w\w)(\w\w)(\w\w)(\w\w)/)||[]).slice(1).map(function(fe){return parseInt(fe,16)/255})}function se(re,fe){if(fe==="rgb"){var ue=C(re,4),ge=ue[0],ye=ue[1],be=ue[2],ve=ue[3];return"rgb(".concat((255*ge).toFixed()," ").concat((255*ye).toFixed()," ").concat((255*be).toFixed()).concat(ve===1?"":" / "+Math.round(100*ve)/100,")")}if(fe==="hsl"){var Me=C((0,G.rgbaToHsla)(re),4),we=Me[0],Be=Me[1],De=Me[2];return ve=Me[3],"hsl(".concat(Math.round(360*we),"deg ").concat(Math.round(100*Be)," ").concat(Math.round(100*De)).concat(ve===1?"":" / "+Math.round(100*ve)/100,")")}throw new Error("NOT_REACHED")}d.hatchFillPath=ie,d.createPathForQuad=function(re,fe,ue,ge){var ye,be,ve=["M",re.p1.x,re.p1.y,"L",re.p2.x,re.p2.y,"L",re.p3.x,re.p3.y,"L",re.p4.x,re.p4.y];try{for(var Me=A(fe),we=Me.next();!we.done;we=Me.next()){var Be=we.value;ve=w(w([],C(ve),!1),["L",Be.p4.x,Be.p4.y,"L",Be.p3.x,Be.p3.y,"L",Be.p2.x,Be.p2.y,"L",Be.p1.x,Be.p1.y,"L",Be.p4.x,Be.p4.y,"L",re.p4.x,re.p4.y],!1)}}catch(De){ye={error:De}}finally{try{we&&!we.done&&(be=Me.return)&&be.call(Me)}finally{if(ye)throw ye.error}}return ve.push("Z"),I(ve,ue,ge)},d.parseHexa=oe,d.formatRgba=se,d.formatColor=function(re,fe){return fe==="rgb"||fe==="hsl"?se(oe(re),fe):(0,R.default)(re,"FF")?re.substr(0,7):re},d.drawPath=function(re,fe,ue,ge,ye,be,ve){re.save();var Me=I(fe,be,ve);return ue&&(re.fillStyle=ue,re.fill(Me)),ge&&(ye==="dashed"&&re.setLineDash([3,3]),ye==="dotted"&&re.setLineDash([2,2]),re.lineWidth=2,re.strokeStyle=ge,re.stroke(Me)),re.restore(),Me}},3981:function(_,d){d=Date.now?Date.now:function(){return new Date().getTime()},_.exports=d},4069:function(_,d,v){var A=v(769);d=function(){for(var C=A(arguments),w=[],T=0,R=C.length;T<R;T++)w=w.concat(A(C[T]));return w},_.exports=d},4095:function(_,d,v){var A=v(1023),C=v(5241),w=v(3793),T=v(6866),R=v(3249),G=v(8105),I=v(5169);d=I.ResizeObserver?A.extend({initialize:function(z){var H=this;if(z._resizeSensor)return z._resizeSensor;this.callSuper(A,"initialize");var Y=new I.ResizeObserver(function(){return H.emit()});Y.observe(z),z._resizeSensor=this,this._resizeObserver=Y,this._el=z},destroy:function(){var z=this._el;z._resizeSensor&&(this.rmAllListeners(),delete z._resizeSensor,this._resizeObserver.unobserve(z))}}):A.extend({initialize:function(z){if(z._resizeSensor)return z._resizeSensor;this.callSuper(A,"initialize"),this._el=z,z._resizeSensor=this,R(["absolute","relative","fixed","sticky"],T(z,"position"))||T(z,"position","relative"),this._appendResizeSensor(),this._bindEvent()},destroy:function(){var z=this._el;z._resizeSensor&&(this.rmAllListeners(),delete z._resizeSensor,z.removeChild(this._resizeSensorEl))},_appendResizeSensor:function(){var z=this._el,H={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},Y={position:"absolute",left:"0px",top:"0px",transition:"0s"},ee=C("div",{style:Y}),ie=C("div.resize-sensor-expand",{style:H},ee),oe=C("div.resize-sensor-shrink",{style:H},C("div",{style:G({width:"200%",height:"200%"},Y)})),se=C("div.resize-sensor",{dir:"ltr",style:H},ie,oe);this._expandEl=ie,this._expandChildEl=ee,this._shrinkEl=oe,this._resizeSensorEl=se,z.appendChild(se),this._resetExpandShrink()},_bindEvent:function(){var z=this;w.on(this._expandEl,"scroll",function(){return z._onScroll()}),w.on(this._shrinkEl,"scroll",function(){return z._onScroll()})},_onScroll:function(){this.emit(),this._resetExpandShrink()},_resetExpandShrink:function(){var z=this._el,H=z.offsetWidth,Y=z.offsetHeight;T(this._expandChildEl,{width:H+10,height:Y+10}),G(this._expandEl,{scrollLeft:H+10,scrollTop:Y+10}),G(this._shrinkEl,{scrollLeft:H+10,scrollTop:Y+10})}}),_.exports=d},4151:function(_,d,v){var A=v(6949),C=v(1738),w=v(9760),T=v(9100);function R(G,I,z){for(var H=A(I,G),Y=H.pop();I=H.shift();)G[I]||(G[I]={}),G=G[I];Object.defineProperty(G,Y,z)}d=function(G,I,z){return C(I)?R(G,I,z):w(I)&&T(I,function(H,Y){R(G,Y,H)}),G},_.exports=d},4209:function(_,d,v){v.d(d,{A:function(){return Nu}});var A=v(3029),C=v(2901),w=v(388),T=v(3954),R=v(5361),G=v(4467),I=v(2263),z=v.n(I),H=new(z());H.ADD="ADD",H.SHOW="SHOW",H.SCALE="SCALE";var Y=H,ee=v(991),ie=v(2717),oe=v.n(ie)()({init:function(En){this._$el=En},show:function(){return this._$el.show(),this},hide:function(){return this._$el.hide(),this},destroy:function(){this._$el.remove()}}),se=v(3693),re=v.n(se),fe=v(5021),ue=v.n(fe),ge=v(5630),ye=v.n(ge),be=v(9100),ve=v.n(be),Me=v(2571),we=v.n(Me),Be=v(1738),De=v.n(Be),Fe=v(3249),Oe=v.n(Fe),Ge=v(8420),ze=v.n(Ge),je=v(2561),He=v.n(je),Xe=v(3145),$e=v.n(Xe),We=v(7604),nt=v.n(We),Qt=v(5651),Wt=v.n(Qt),Bn=v(8105),Lt=v.n(Bn),Mn=v(6214),cr=v.n(Mn),In=["background","foreground","selectForeground","accent","highlight","border","primary","contrast","varColor","stringColor","keywordColor","numberColor","operatorColor","linkColor","textColor","tagNameColor","functionColor","attributeNameColor","commentColor"],Zn=In.length;function $n(En){for(var Yn={},Ze=0;Ze<Zn;Ze++)Yn[In[Ze]]=En[Ze];return Yn}function Rn(En){return cr()(En)&&(En=$n(En)),En.darkerBackground||(En.darkerBackground=En.contrast),Lt()({consoleWarnBackground:"#332a00",consoleWarnForeground:"#ffcb6b",consoleWarnBorder:"#650",consoleErrorBackground:"#290000",consoleErrorForeground:"#ff8080",consoleErrorBorder:"#5c0000",light:"#ccc",dark:"#aaa"},En)}function Dn(En){return cr()(En)&&(En=$n(En)),En.darkerBackground||(En.darkerBackground=En.contrast),Lt()({consoleWarnBackground:"#fffbe5",consoleWarnForeground:"#5c5c00",consoleWarnBorder:"#fff5c2",consoleErrorBackground:"#fff0f0",consoleErrorForeground:"#f00",consoleErrorBorder:"#ffd6d6",light:"#fff",dark:"#eee"},En)}var Gt=["Dark","Material Oceanic","Material Darker","Material Palenight","Material Deep Ocean","Monokai Pro","Dracula","Arc Dark","Atom One Dark","Solarized Dark","Night Owl","AMOLED"];function Jn(En){return Oe()(Gt,En)}var Nn={Light:Dn({darkerBackground:"#f3f3f3",background:"#fff",foreground:"#333",selectForeground:"#333",accent:"#1a73e8",highlight:"#eaeaea",border:"#ccc",primary:"#333",contrast:"#f2f7fd",varColor:"#c80000",stringColor:"#1a1aa6",keywordColor:"#881280",numberColor:"#1c00cf",operatorColor:"#808080",linkColor:"#1155cc",textColor:"#8097bd",tagNameColor:"#881280",functionColor:"#222",attributeNameColor:"#994500",commentColor:"#236e25",cssProperty:"#c80000"}),Dark:Rn({darkerBackground:"#333",background:"#242424",foreground:"#a5a5a5",selectForeground:"#eaeaea",accent:"#7cacf8",highlight:"#000",border:"#3d3d3d",primary:"#ccc",contrast:"#0b2544",varColor:"#e36eec",stringColor:"#f29766",keywordColor:"#9980ff",numberColor:"#9980ff",operatorColor:"#7f7f7f",linkColor:"#ababab",textColor:"#42597f",tagNameColor:"#5db0d7",functionColor:"#d5d5d5",attributeNameColor:"#9bbbdc",commentColor:"#747474"}),"Material Oceanic":Rn(["#263238","#B0BEC5","#FFFFFF","#009688","#425B67","#2A373E","#607D8B","#1E272C","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#546e7a"]),"Material Darker":Rn(["#212121","#B0BEC5","#FFFFFF","#FF9800","#3F3F3F","#292929","#727272","#1A1A1A","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#B0BEC5","#f07178","#82aaff","#ffcb6b","#616161"]),"Material Lighter":Dn(["#FAFAFA","#546E7A","#546e7a","#00BCD4","#E7E7E8","#d3e1e8","#94A7B0","#F4F4F4","#272727","#91B859","#7C4DFF","#F76D47","#39ADB5","#39ADB5","#546E7A","#E53935","#6182B8","#F6A434","#AABFC9"]),"Material Palenight":Rn(["#292D3E","#A6ACCD","#FFFFFF","#ab47bc","#444267","#2b2a3e","#676E95","#202331","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#A6ACCD","#f07178","#82aaff","#ffcb6b","#676E95"]),"Material Deep Ocean":Rn(["#0F111A","#8F93A2","#FFFFFF","#84ffff","#1F2233","#41465b","#4B526D","#090B10","#eeffff","#c3e88d","#c792ea","#f78c6c","#89ddff","#80cbc4","#8F93A2","#f07178","#82aaff","#ffcb6b","#717CB4"]),"Monokai Pro":Rn(["#2D2A2E","#fcfcfa","#FFFFFF","#ffd866","#5b595c","#423f43","#939293","#221F22","#FCFCFA","#FFD866","#FF6188","#AB9DF2","#FF6188","#78DCE8","#fcfcfa","#FF6188","#A9DC76","#78DCE8","#727072"]),Dracula:Rn(["#282A36","#F8F8F2","#8BE9FD","#FF79C5","#6272A4","#21222C","#6272A4","#191A21","#F8F8F2","#F1FA8C","#FF79C6","#BD93F9","#FF79C6","#F1FA8C","#F8F8F2","#FF79C6","#50FA78","#50FA7B","#6272A4"]),"Arc Dark":Rn(["#2f343f","#D3DAE3","#FFFFFF","#42A5F5","#3F3F46","#404552","#8b9eb5","#262b33","#CF6A4C","#8F9D6A","#9B859D","#CDA869","#A7A7A7","#7587A6","#D3DAE3","#CF6A4C","#7587A6","#F9EE98","#747C84"]),"Atom One Dark":Rn(["#282C34","#979FAD","#FFFFFF","#2979ff","#383D48","#2e3239","#979FAD","#21252B","#D19A66","#98C379","#C679DD","#D19A66","#61AFEF","#56B6C2","#979FAD","#F07178","#61AEEF","#E5C17C","#59626F"]),"Atom One Light":Dn(["#FAFAFA","#232324","#232324","#2979ff","#EAEAEB","#DBDBDC","#9D9D9F","#FFFFFF","#986801","#50A14E","#A626A4","#986801","#4078F2","#0184BC","#232324","#E4564A","#4078F2","#C18401","#A0A1A7"]),"Solarized Dark":Rn(["#002B36","#839496","#FFFFFF","#d33682","#11353F","#0D3640","#586e75","#00252E","#268BD2","#2AA198","#859900","#D33682","#93A1A1","#268BD2","#839496","#268BD2","#B58900","#B58900","#657B83"]),"Solarized Light":Dn(["#fdf6e3","#586e75","#002b36","#d33682","#F6F0DE","#f7f2e2","#93a1a1","#eee8d5","#268BD2","#2AA198","#859900","#D33682","#657B83","#268BD2","#586e75","#268BD2","#B58900","#657B83","#93A1A1"]),Github:Dn(["#F7F8FA","#5B6168","#FFFFFF","#79CB60","#CCE5FF","#DFE1E4","#292D31","#FFFFFF","#24292E","#032F62","#D73A49","#005CC5","#D73A49","#005CC5","#5B6168","#22863A","#6F42C1","#6F42C1","#6A737D"]),"Night Owl":Rn(["#011627","#b0bec5","#ffffff","#7e57c2","#152C3B","#2a373e","#607d8b","#001424","#addb67","#ecc48d","#c792ea","#f78c6c","#c792ea","#80CBC4","#b0bec5","#7fdbca","#82AAFF","#FAD430","#637777"]),"Light Owl":Dn(["#FAFAFA","#546e7a","#403f53","#269386","#E0E7EA","#efefef","#403F53","#FAFAFA","#0C969B","#c96765","#994cc3","#aa0982","#7d818b","#994cc3","#546e7a","#994cc3","#4876d6","#4876d6","#637777"]),AMOLED:Rn(["#000000","#8F93A2","#FFFFFF","#68FFAE","#000000","#41465b","#4B526D","#000000","#DEFDF7","#38ff9f","#ab2eff","#A76DF7","#38ff9f","#86F3C7","#8F93A2","#ab2eff","#8293FF","#38ff9f","#6575c7"])},Xn=[],jn=1,Un=Nn.Light,bn=function(En,Yn){En=He()(En);for(var Ze=0,jt=Xn.length;Ze<jt;Ze++)if(Xn[Ze].css===En)return;Yn=Yn||bn.container||document.head;var xn=document.createElement("style");xn.type="text/css",Yn.appendChild(xn);var gr={css:En,el:xn,container:Yn};return Qn(gr),Xn.push(gr),gr};function Kn(){ve()(Xn,function(En){return Qn(En)})}function Qn(En){var Yn=En.css,Ze=En.el;Yn=(Yn=Yn.replace(/(\d+)px/g,function(xn,gr){return+gr*jn+"px"})).replace(/_/g,"eruda-");var jt=$e()(Nn.Light);ve()(jt,function(xn){Yn=Yn.replace(new RegExp("var\\(--".concat(nt()(xn),"\\)"),"g"),Un[xn])}),Ze.innerText=Yn}bn.setScale=function(En){jn=En,Kn()},bn.setTheme=function(En){Un=De()(En)?Nn[En]||Nn.Light:Wt()(En,Nn.Light),Kn()},bn.getCurTheme=function(){return Un},bn.getThemes=function(){return Nn},bn.clear=function(){ve()(Xn,function(En){var Yn=En.container,Ze=En.el;return Yn.removeChild(Ze)}),Xn=[]},bn.remove=function(En){Xn=we()(Xn,function(Yn){return Yn!==En}),En.container.removeChild(En.el)};var pr=bn,fn=v(1162);function Mt(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mt=function(){return!!En})()}function yn(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var kn=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),(Ze=(0,w.A)(jt,Mt()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)))._style=pr(v(4279)),Ze.name="settings",Ze._settings=[],Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze){yn(Yn,"init",this)([Ze]),this._setting=new fn.Ay(Ze.get(0)),this._bindEvent()}},{key:"remove",value:function(Ze,jt){var xn=this;if(De()(Ze)){var gr=this;this._$el.find(".luna-setting-item-title").each(function(){re()(this).text()===Ze&&gr._setting.remove(this.settingItem)})}else this._settings=we()(this._settings,function(Ir){return Ir.config!==Ze||Ir.key!==jt||(xn._setting.remove(Ir.item),!1)});return this._cleanSeparator(),this}},{key:"destroy",value:function(){this._setting.destroy(),yn(Yn,"destroy",this)([]),pr.remove(this._style)}},{key:"clear",value:function(){this._settings=[],this._setting.clear()}},{key:"switch",value:function(Ze,jt,xn){var gr=this._genId(),Ir=this._setting.appendCheckbox(gr,!!Ze.get(jt),xn);return this._settings.push({config:Ze,key:jt,id:gr,item:Ir}),this}},{key:"select",value:function(Ze,jt,xn,gr){var Ir=this._genId(),Dr={};ve()(gr,function(li){return Dr[li]=li});var $r=this._setting.appendSelect(Ir,Ze.get(jt),"",xn,Dr);return this._settings.push({config:Ze,key:jt,id:Ir,item:$r}),this}},{key:"range",value:function(Ze,jt,xn,gr){var Ir=gr.min,Dr=Ir===void 0?0:Ir,$r=gr.max,li=$r===void 0?1:$r,Li=gr.step,aa=Li===void 0?.1:Li,pa=this._genId(),la=this._setting.appendNumber(pa,Ze.get(jt),xn,{max:li,min:Dr,step:aa,range:!0});return this._settings.push({config:Ze,key:jt,min:Dr,max:li,step:aa,id:pa,item:la}),this}},{key:"button",value:function(Ze,jt){return this._setting.appendButton(Ze,jt),this}},{key:"separator",value:function(){return this._setting.appendSeparator(),this}},{key:"text",value:function(Ze){return this._setting.appendTitle(Ze),this}},{key:"_cleanSeparator",value:function(){var Ze=ze()(this._$el.get(0).children);function jt(Ir){return Oe()(Ir.getAttribute("class"),"luna-setting-item-separator")}for(var xn=0,gr=Ze.length;xn<gr-1;xn++)jt(Ze[xn])&&jt(Ze[xn+1])&&re()(Ze[xn]).remove()}},{key:"_genId",value:function(){return ye()("eruda-settings")}},{key:"_getSetting",value:function(Ze){var jt;return ve()(this._settings,function(xn){xn.id===Ze&&(jt=xn)}),jt}},{key:"_bindEvent",value:function(){var Ze=this;this._setting.on("change",function(jt,xn){var gr=Ze._getSetting(jt);gr.config.set(gr.key,xn)})}}],[{key:"createCfg",value:function(Ze,jt){return new(ue())("eruda-"+Ze,jt)}}])}(oe),nr=v(9041),dr=v.n(nr),Qr=v(7571),Wr=v.n(Qr),Gr=v(5546),Hr=v.n(Gr),Kr=v(6032),ti=v.n(Kr),Mi=(v(4950),v(8971)),Ci=v.n(Mi),oi=v(3497),Ii=v.n(oi),wr=v(3915),Br=v.n(wr),ui=v(1947),vi=v.n(ui),qr=v(6030),br=v.n(qr),er=v(9405),Gn=v.n(er),Er=v(9548),mn=v.n(Er);function tr(En,Yn){var Ze;switch(Ci()(Yn)&&(Yn=!0),En){case"local":Ze=window.localStorage;break;case"session":Ze=window.sessionStorage}try{var jt="test-localStorage-"+Date.now();Ze.setItem(jt,jt);var xn=Ze.getItem(jt);if(Ze.removeItem(jt),xn!==jt)throw new Error}catch{return Yn?vi():void 0}return Ze}function vr(En){return br()(En.replace("px",""))}function Ar(En){for(;En;){if(En.id==="eruda")return!0;En=En.parentNode}return!1}function Tn(En){if(/<[^>]*>/g.test(En))try{var Yn=mn().parse(En);return tt(Yn,function(Ze){Ze.attrs&&Ze.attrs.class&&(Ze.attrs.class=$t(Ze.attrs.class))}),mn().stringify(Yn)}catch{return $t(En)}return $t(En)}function tt(En,Yn){for(var Ze=0,jt=En.length;Ze<jt;Ze++){var xn=En[Ze];Yn(xn),xn.content&&tt(xn.content,Yn)}}function $t(En){var Yn="eruda-";return Br()(Gn()(En).split(/\s+/),function(Ze){return Oe()(Ze,Yn)?Ze:Ze.replace(/[\w-]+/,function(jt){return"".concat(Yn).concat(jt)})}).join(" ")}function dn(En,Yn){var Ze=En==="x"?"clientX":"clientY";return Yn[Ze]?Yn[Ze]:Yn.changedTouches?Yn.changedTouches[0][Ze]:0}function Qe(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qe=function(){return!!En})()}var gn,sr=re()(document),rr=function(En){function Yn(Ze){var jt,xn,gr,Ir;return(0,A.A)(this,Yn),xn=this,gr=Yn,gr=(0,T.A)(gr),jt=(0,w.A)(xn,Qe()?Reflect.construct(gr,[],(0,T.A)(xn).constructor):gr.apply(xn,Ir)),(0,G.A)(jt,"_onDragStart",function(Dr){var $r=jt._$el;$r.addClass(Tn("active")),jt._isClick=!0,Dr=Dr.origEvent,jt._startX=dn("x",Dr),jt._oldX=vr($r.css("left")),jt._oldY=vr($r.css("top")),jt._startY=dn("y",Dr),sr.on(Hr()("move"),jt._onDragMove),sr.on(Hr()("up"),jt._onDragEnd)}),(0,G.A)(jt,"_onDragMove",function(Dr){var $r=jt._$el.get(0).offsetWidth,li=jt._$container.get(0).offsetWidth,Li=jt._$container.get(0).offsetHeight,aa=dn("x",Dr=Dr.origEvent)-jt._startX,pa=dn("y",Dr)-jt._startY;(Math.abs(aa)>3||Math.abs(pa)>3)&&(jt._isClick=!1);var la=jt._oldX+aa,Ji=jt._oldY+pa;la<0?la=0:la>li-$r&&(la=li-$r),Ji<0?Ji=0:Ji>Li-$r&&(Ji=Li-$r),jt._$el.css({left:la,top:Ji})}),(0,G.A)(jt,"_onDragEnd",function(Dr){var $r=jt._$el;jt._isClick&&jt.emit("click"),jt._onDragMove(Dr),sr.off(Hr()("move"),jt._onDragMove),sr.off(Hr()("up"),jt._onDragEnd);var li=jt.config;li.get("rememberPos")&&li.set("pos",{x:vr($r.css("left")),y:vr($r.css("top"))}),$r.rmClass("eruda-active")}),jt._style=pr(v(6717)),jt._$container=Ze,jt._initTpl(),jt._bindEvent(),jt._registerListener(),jt}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"hide",value:function(){this._$el.hide()}},{key:"show",value:function(){this._$el.show()}},{key:"setPos",value:function(Ze){this._isOutOfRange(Ze)&&(Ze=this._getDefPos()),this._$el.css({left:Ze.x,top:Ze.y}),this.config.set("pos",Ze)}},{key:"getPos",value:function(){return this.config.get("pos")}},{key:"destroy",value:function(){pr.remove(this._style),this._unregisterListener(),this._$el.remove()}},{key:"_isOutOfRange",value:function(Ze){Ze=Ze||this.config.get("pos");var jt=this._getDefPos();return Ze.x>jt.x+10||Ze.x<0||Ze.y<0||Ze.y>jt.y+10}},{key:"_registerListener",value:function(){var Ze=this;this._scaleListener=function(){return dr()(function(){Ze._isOutOfRange()&&Ze._resetPos()})},Y.on(Y.SCALE,this._scaleListener)}},{key:"_unregisterListener",value:function(){Y.off(Y.SCALE,this._scaleListener)}},{key:"_initTpl",value:function(){var Ze=this._$container;Ze.append(Tn('<div class="entry-btn"><span class="icon-tool"></span></div>')),this._$el=Ze.find(".eruda-entry-btn")}},{key:"_resetPos",value:function(Ze){var jt=this.config,xn=jt.get("pos"),gr=this._getDefPos();jt.get("rememberPos")&&!Ze||(xn=gr),this.setPos(xn)}},{key:"_bindEvent",value:function(){var Ze=this;this._$el.on(Hr()("down"),this._onDragStart),Wr().on("change",function(){return Ze._resetPos(!0)}),window.addEventListener("resize",function(){return Ze._resetPos()})}},{key:"initCfg",value:function(Ze){var jt=this.config=kn.createCfg("entry-button",{rememberPos:!0,pos:this._getDefPos()});Ze.switch(jt,"rememberPos","Remember Entry Button Position"),this._resetPos()}},{key:"_getDefPos",value:function(){var Ze=this._$el.get(0).offsetWidth+10;return{x:window.innerWidth-Ze,y:window.innerHeight-Ze}}}])}(z()),it=v(5458),At=v(7622),An=gn=new(v.n(At)())("[Eruda]","warn");gn.formatter=function(En,Yn){return Yn.unshift(this.name),Yn};var Ft=v(6097),Hn=v.n(Ft),wn=v(7e3),lr=v.n(wn),rt=v(9931),ln=v.n(rt),Cn=v(1009),zn=v.n(Cn),Sn=v(5570),yr=v.n(Sn),ur=v(2556),hr=v(1944),fr=v(8052);function Sr(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sr=function(){return!!En})()}var Lr=function(En){function Yn(Ze){var jt,xn,gr,Ir,Dr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$r=Dr.defaults,li=$r===void 0?{}:$r,Li=Dr.inline,aa=Li!==void 0&&Li;return(0,A.A)(this,Yn),xn=this,gr=Yn,gr=(0,T.A)(gr),jt=(0,w.A)(xn,Sr()?Reflect.construct(gr,[],(0,T.A)(xn).constructor):gr.apply(xn,Ir)),(0,G.A)(jt,"_checkSafeArea",function(){var pa=jt.$container;(function(){var la=!1,Ji=document.createElement("div");if(CSS.supports("padding-bottom: env(safe-area-inset-bottom)")?(Ji.style.paddingBottom="env(safe-area-inset-bottom)",la=!0):CSS.supports("padding-bottom: constant(safe-area-inset-bottom)")&&(Ji.style.paddingBottom="constant(safe-area-inset-bottom)",la=!0),la){document.body.appendChild(Ji);var sa=parseInt(window.getComputedStyle(Ji).paddingBottom);if(document.body.removeChild(Ji),sa>0)return!0}return!1})()?pa.addClass(Tn("safe-area")):pa.rmClass(Tn("safe-area"))}),(0,G.A)(jt,"_updateTabHeight",function(pa){jt._tab.setOption("height",40*pa),dr()(function(){jt._tab.updateSlider()})}),jt._defCfg=Lt()({transparency:1,displaySize:80,theme:"System preference"},li),jt._style=pr(v(541)),jt.$container=Ze,jt._isShow=!1,jt._opacity=1,jt._tools={},jt._isResizing=!1,jt._resizeTimer=null,jt._resizeStartY=0,jt._resizeStartSize=0,jt._inline=aa,jt._initTpl(),jt._initTab(),jt._initNotification(),jt._initModal(),yr()(function(){return jt._checkSafeArea()}),jt._bindEvent(),jt}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"show",value:function(){var Ze=this;return this._isShow=!0,this._$el.show(),this._tab.updateSlider(),setTimeout(function(){Ze._$el.css("opacity",Ze._opacity)},50),this.emit("show"),this}},{key:"hide",value:function(){var Ze=this;if(!this._inline)return this._isShow=!1,this.emit("hide"),this._$el.css({opacity:0}),setTimeout(function(){return Ze._$el.hide()},300),this}},{key:"toggle",value:function(){return this._isShow?this.hide():this.show()}},{key:"add",value:function(Ze){var jt=this._tab;if(!(Ze instanceof oe)){var xn=new oe,gr=xn.init,Ir=xn.show,Dr=xn.hide,$r=xn.destroy;Wt()(Ze,{init:gr,show:Ir,hide:Dr,destroy:$r})}var li=Ze.name;if(!li)return An.error("You must specify a name for a tool");if(this._tools[li])return An.warn("Tool ".concat(li," already exists"));var Li=li.replace(/\s+/g,"-");return this._$tools.prepend('<div id="'.concat(Tn(Li),'" class="').concat(Tn(Li+" tool"),'"></div>')),Ze.init(this._$tools.find(".".concat(Tn(Li),".").concat(Tn("tool"))),this),Ze.active=!1,this._tools[li]=Ze,li==="settings"?jt.append({id:li,title:li}):jt.insert(jt.length-1,{id:li,title:li}),this}},{key:"remove",value:function(Ze){var jt=this._tools;if(!jt[Ze])return An.warn("Tool ".concat(Ze," doesn't exist"));this._tab.remove(Ze);var xn=jt[Ze];if(delete jt[Ze],xn.active){var gr=$e()(jt);gr.length>0&&this.showTool(jt[Ii()(gr)].name)}return xn.destroy(),this}},{key:"removeAll",value:function(){var Ze=this;return ve()(this._tools,function(jt){return Ze.remove(jt.name)}),this}},{key:"get",value:function(Ze){var jt=this._tools[Ze];if(jt)return jt}},{key:"showTool",value:function(Ze){if(this._curTool===Ze)return this;this._curTool=Ze;var jt=this._tools,xn=jt[Ze];if(xn){var gr={};return ve()(jt,function(Ir){Ir.active&&(gr=Ir,Ir.active=!1,Ir.hide())}),xn.active=!0,xn.show(),this._tab.select(Ze),this.emit("showTool",Ze,gr),this}}},{key:"initCfg",value:function(Ze){var jt=this,xn=this.config=kn.createCfg("dev-tools",this._defCfg);this._setTransparency(xn.get("transparency")),this._setDisplaySize(xn.get("displaySize")),this._setTheme(xn.get("theme")),xn.on("change",function(gr,Ir){switch(gr){case"transparency":return jt._setTransparency(Ir);case"displaySize":return jt._setDisplaySize(Ir);case"theme":return jt._setTheme(Ir)}}),Ze.separator().select(xn,"theme","Theme",["System preference"].concat((0,it.A)($e()(pr.getThemes())))),this._inline||Ze.range(xn,"transparency","Transparency",{min:.2,max:1,step:.01}).range(xn,"displaySize","Display Size",{min:40,max:100,step:1}),Ze.button("Restore defaults and reload",function(){var gr=tr("local"),Ir=JSON.parse(JSON.stringify(gr));ve()(Ir,function(Dr,$r){De()(Dr)&&zn()($r,"eruda")&&gr.removeItem($r)}),window.location.reload()}).separator()}},{key:"notify",value:function(Ze,jt){this._notification.notify(Ze,jt)}},{key:"destroy",value:function(){pr.remove(this._style),this.removeAll(),this._tab.destroy(),this._$el.remove(),window.removeEventListener("resize",this._checkSafeArea),Y.off(Y.SCALE,this._updateTabHeight)}},{key:"_setTheme",value:function(Ze){var jt=this.$container;Ze==="System preference"&&(Ze=ln()(lr().get())),Jn(Ze)?jt.addClass(Tn("dark")):jt.rmClass(Tn("dark")),pr.setTheme(Ze)}},{key:"_setTransparency",value:function(Ze){Hn()(Ze)&&(this._opacity=Ze,this._isShow&&this._$el.css({opacity:Ze}))}},{key:"_setDisplaySize",value:function(Ze){this._inline&&(Ze=100),Hn()(Ze)&&this._$el.css({height:Ze+"%"})}},{key:"_initTpl",value:function(){var Ze=this.$container;Ze.append(Tn(`
      <div class="dev-tools">
        <div class="resizer"></div>
        <div class="tab"></div>
        <div class="tools"></div>
        <div class="notification"></div>
        <div class="modal"></div>
      </div>
      `)),this._$el=Ze.find(Tn(".dev-tools")),this._$tools=this._$el.find(Tn(".tools"))}},{key:"_initTab",value:function(){var Ze=this;this._tab=new fr.A(this._$el.find(Tn(".tab")).get(0),{height:40}),this._tab.on("select",function(jt){return Ze.showTool(jt)})}},{key:"_initNotification",value:function(){this._notification=new ur.A(this._$el.find(Tn(".notification")).get(0),{position:{x:"center",y:"top"}})}},{key:"_initModal",value:function(){hr.A.setContainer(this._$el.find(Tn(".modal")).get(0))}},{key:"_bindEvent",value:function(){var Ze=this,jt=this._$el.find(Tn(".resizer")),xn=this._$el.find(Tn(".nav-bar")),gr=re()(document);this._inline&&jt.hide();var Ir=function($r){if(Ze._isResizing){$r.preventDefault(),$r.stopPropagation(),$r=$r.origEvent;var li=(Ze._resizeStartY-dn("y",$r))/window.innerHeight*100,Li=Ze._resizeStartSize+li;Li<40?Li=40:Li>100&&(Li=100),Ze.config.set("displaySize",br()(Li.toFixed(2)))}},Dr=function(){clearTimeout(Ze._resizeTimer),Ze._isResizing=!1,jt.css("height",10),gr.off(Hr()("move"),Ir),gr.off(Hr()("up"),Dr)};jt.css("height",10),jt.on(Hr()("down"),function($r){$r.preventDefault(),$r.stopPropagation(),$r=$r.origEvent,Ze._isResizing=!0,Ze._resizeStartSize=Ze.config.get("displaySize"),Ze._resizeStartY=dn("y",$r),jt.css("height","100%"),gr.on(Hr()("move"),Ir),gr.on(Hr()("up"),Dr)}),xn.on("contextmenu",function($r){return $r.preventDefault()}),this.$container.on("click",function($r){return $r.stopPropagation()}),window.addEventListener("resize",this._checkSafeArea),Y.on(Y.SCALE,this._updateTabHeight),lr().on("change",function(){var $r=Ze.config.get("theme");$r==="System preference"&&Ze._setTheme($r)})}}])}(z()),Nr=v(9993),xr=v.n(Nr),Cr=v(3957),Or=v.n(Cr),Ur=v(1976),Pr=v.n(Ur),Vr=v(6962),xi=v.n(Vr),Ai=v(8609),Ti=v.n(Ai),Si=v(4236),ir=v.n(Si),bi=v(3578);function vn(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vn=function(){return!!En})()}function Ln(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}xi().start();var ar=function(En){function Yn(){var Ze,jt,xn,gr,Ir=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).name,Dr=Ir===void 0?"console":Ir;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),Ze=(0,w.A)(jt,vn()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)),(0,G.A)(Ze,"_handleShow",function(){Ti()(Ze._$el.get(0))||Ze._logger.renderViewport()}),(0,G.A)(Ze,"_handleErr",function($r){Ze._logger.error($r)}),z().mixin(Ze),Ze.name=Dr,Ze._selectedLog=null,Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze,jt){Ln(Yn,"init",this)([Ze]),this._container=jt,this._appendTpl(),this._initCfg(),this._initLogger(),this._exposeLogger(),this._bindEvent()}},{key:"show",value:function(){Ln(Yn,"show",this)([]),this._handleShow()}},{key:"overrideConsole",value:function(){var Ze=this,jt=this._origConsole={},xn=window.console;return Mr.forEach(function(gr){var Ir=jt[gr]=xr();xn[gr]&&(Ir=jt[gr]=xn[gr].bind(xn)),xn[gr]=function(){Ze[gr].apply(Ze,arguments),Ir.apply(void 0,arguments)}}),this}},{key:"setGlobal",value:function(Ze,jt){this._logger.setGlobal(Ze,jt)}},{key:"restoreConsole",value:function(){var Ze=this;return this._origConsole?(Mr.forEach(function(jt){return window.console[jt]=Ze._origConsole[jt]}),delete this._origConsole,this):this}},{key:"catchGlobalErr",value:function(){return xi().addListener(this._handleErr),this}},{key:"ignoreGlobalErr",value:function(){return xi().rmListener(this._handleErr),this}},{key:"filter",value:function(Ze){var jt=this._$filterText,xn=this._logger;De()(Ze)?(jt.text(Ze),xn.setOption("filter",Gn()(Ze))):Pr()(Ze)?(jt.text(He()(Ze)),xn.setOption("filter",Ze)):Or()(Ze)&&(jt.text(""),xn.setOption("filter",Ze))}},{key:"destroy",value:function(){this._logger.destroy(),Ln(Yn,"destroy",this)([]),this._container.off("show",this._handleShow),this._style&&pr.remove(this._style),this.ignoreGlobalErr(),this.restoreConsole(),this._rmCfg()}},{key:"_enableJsExecution",value:function(Ze){var jt=this._$el,xn=jt.find(Tn(".js-input"));Ze?(xn.show(),jt.rmClass(Tn("js-input-hidden"))):(xn.hide(),jt.addClass(Tn("js-input-hidden")))}},{key:"_appendTpl",value:function(){var Ze=this._$el;this._style=pr(v(6567)),Ze.append(Tn(`
      <div class="control">
        <span class="icon-clear clear-console"></span>
        <span class="level active" data-level="all">All</span>
        <span class="level" data-level="info">Info</span>
        <span class="level" data-level="warning">Warning</span>
        <span class="level" data-level="error">Error</span>
        <span class="filter-text"></span>
        <span class="icon-filter filter"></span>
        <span class="icon-copy icon-disabled copy"></span>
      </div>
      <div class="logs-container"></div>
      <div class="js-input">
        <div class="buttons">
          <div class="button cancel">Cancel</div>
          <div class="button execute">Execute</div>
        </div>
        <span class="icon-arrow-right"></span>
        <textarea></textarea>
      </div>
    `));var jt=Ze.find(Tn(".js-input")),xn=jt.find("textarea"),gr=jt.find(Tn(".buttons"));Lt()(this,{_$control:Ze.find(Tn(".control")),_$logs:Ze.find(Tn(".logs-container")),_$inputContainer:jt,_$input:xn,_$inputBtns:gr,_$filterText:Ze.find(Tn(".filter-text"))})}},{key:"_initLogger",value:function(){var Ze=this.config,jt=Ze.get("maxLogNum");jt=jt==="infinite"?0:+jt;var xn=this._$control.find(Tn(".level")),gr=new bi.A(this._$logs.get(0),{asyncRender:Ze.get("asyncRender"),maxNum:jt,showHeader:Ze.get("displayExtraInfo"),unenumerable:Ze.get("displayUnenumerable"),accessGetter:Ze.get("displayGetterVal"),lazyEvaluation:Ze.get("lazyEvaluation")});gr.on("optionChange",function(Ir,Dr){Ir==="level"&&xn.each(function(){var $r=re()(this),li=$r.data("level");$r[li===Dr||li==="all"&&cr()(Dr)?"addClass":"rmClass"](Tn("active"))})}),Ze.get("overrideConsole")&&this.overrideConsole(),this._logger=gr}},{key:"_exposeLogger",value:function(){var Ze=this,jt=this._logger;["html"].concat(Mr).forEach(function(xn){return Ze[xn]=function(){for(var gr=arguments.length,Ir=new Array(gr),Dr=0;Dr<gr;Dr++)Ir[Dr]=arguments[Dr];return jt[xn].apply(jt,Ir),Ze.emit.apply(Ze,[xn].concat(Ir)),Ze}})}},{key:"_bindEvent",value:function(){var Ze=this,jt=this._container,xn=this._$input,gr=this._$inputBtns,Ir=this._$control,Dr=this._logger,$r=this.config;Ir.on("click",Tn(".clear-console"),function(){return Dr.clear(!0)}).on("click",Tn(".level"),function(){var li=re()(this).data("level");li==="all"&&(li=["verbose","info","warning","error"]),Dr.setOption("level",li)}).on("click",Tn(".filter"),function(){hr.A.prompt("Filter").then(function(li){ir()(li)||Ze.filter(li)})}).on("click",Tn(".copy"),function(){Ze._selectedLog.copy(),jt.notify("Copied",{icon:"success"})}),gr.on("click",Tn(".cancel"),function(){return Ze._hideInput()}).on("click",Tn(".execute"),function(){var li=xn.val().trim();li!==""&&(Dr.evaluate(li),xn.val("").get(0).blur(),Ze._hideInput())}),xn.on("focusin",function(){return Ze._showInput()}),Dr.on("insert",function(li){li.type==="error"&&$r.get("displayIfErr")&&jt.showTool("console").show()}),Dr.on("select",function(li){Ze._selectedLog=li,Ir.find(Tn(".icon-copy")).rmClass(Tn("icon-disabled"))}),Dr.on("deselect",function(){Ze._selectedLog=null,Ir.find(Tn(".icon-copy")).addClass(Tn("icon-disabled"))}),jt.on("show",this._handleShow)}},{key:"_hideInput",value:function(){this._$inputContainer.rmClass(Tn("active")),this._$inputBtns.css("display","none")}},{key:"_showInput",value:function(){this._$inputContainer.addClass(Tn("active")),this._$inputBtns.css("display","flex")}},{key:"_rmCfg",value:function(){var Ze=this.config,jt=this._container.get("settings");jt&&jt.remove(Ze,"asyncRender").remove(Ze,"jsExecution").remove(Ze,"catchGlobalErr").remove(Ze,"overrideConsole").remove(Ze,"displayExtraInfo").remove(Ze,"displayUnenumerable").remove(Ze,"displayGetterVal").remove(Ze,"lazyEvaluation").remove(Ze,"displayIfErr").remove(Ze,"maxLogNum").remove(ln()(this.name))}},{key:"_initCfg",value:function(){var Ze=this,jt=this._container,xn=this.config=kn.createCfg(this.name,{asyncRender:!0,catchGlobalErr:!0,jsExecution:!0,overrideConsole:!0,displayExtraInfo:!1,displayUnenumerable:!0,displayGetterVal:!0,lazyEvaluation:!0,displayIfErr:!1,maxLogNum:"infinite"});this._enableJsExecution(xn.get("jsExecution")),xn.get("catchGlobalErr")&&this.catchGlobalErr(),xn.on("change",function(Ir,Dr){var $r=Ze._logger;switch(Ir){case"asyncRender":return $r.setOption("asyncRender",Dr);case"jsExecution":return Ze._enableJsExecution(Dr);case"catchGlobalErr":return Dr?Ze.catchGlobalErr():Ze.ignoreGlobalErr();case"overrideConsole":return Dr?Ze.overrideConsole():Ze.restoreConsole();case"maxLogNum":return $r.setOption("maxNum",Dr==="infinite"?0:+Dr);case"displayExtraInfo":return $r.setOption("showHeader",Dr);case"displayUnenumerable":return $r.setOption("unenumerable",Dr);case"displayGetterVal":return $r.setOption("accessGetter",Dr);case"lazyEvaluation":return $r.setOption("lazyEvaluation",Dr)}});var gr=jt.get("settings");gr&&gr.text(ln()(this.name)).switch(xn,"asyncRender","Asynchronous Rendering").switch(xn,"jsExecution","Enable JavaScript Execution").switch(xn,"catchGlobalErr","Catch Global Errors").switch(xn,"overrideConsole","Override Console").switch(xn,"displayIfErr","Auto Display If Error Occurs").switch(xn,"displayExtraInfo","Display Extra Information").switch(xn,"displayUnenumerable","Display Unenumerable Properties").switch(xn,"displayGetterVal","Access Getter Value").switch(xn,"lazyEvaluation","Lazy Evaluation").select(xn,"maxLogNum","Max Log Number",["infinite","250","125","100","50","10"]).separator()}}])}(oe),Mr=["log","error","info","warn","dir","time","timeLog","timeEnd","clear","table","assert","count","countReset","debug","group","groupCollapsed","groupEnd"],kr=v(9117),gi=v.n(kr),di=v(9464),_i=v.n(di),Hi=v(5902),fi=v.n(Hi),qi=v(4844),Ki=v.n(qi),$i=v(4983),wi=v.n($i),Oi=v(15),Gi=v.n(Oi);function wa(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wa=function(){return!!En})()}var Fi=function(En){function Yn(Ze,jt){var xn,gr,Ir,Dr;return(0,A.A)(this,Yn),gr=this,Ir=Yn,Ir=(0,T.A)(Ir),xn=(0,w.A)(gr,wa()?Reflect.construct(Ir,[],(0,T.A)(gr).constructor):Ir.apply(gr,Dr)),(0,G.A)(xn,"_copyRes",function(){var $r=xn._detailData,li="".concat($r.method," ").concat($r.url," ").concat($r.status,`
`);_i()($r.data)||(li+=`
Request Data

`,li+="".concat($r.data,`
`)),_i()($r.reqHeaders)||(li+=`
Request Headers

`,ve()($r.reqHeaders,function(Li,aa){return li+="".concat(aa,": ").concat(Li,`
`)})),_i()($r.resHeaders)||(li+=`
Response Headers

`,ve()($r.resHeaders,function(Li,aa){return li+="".concat(aa,": ").concat(Li,`
`)})),$r.resTxt&&(li+=`
`.concat($r.resTxt,`
`)),Ki()(li),xn._devtools.notify("Copied",{icon:"success"})}),xn._$container=Ze,xn._devtools=jt,xn._detailData={},xn._bindEvent(),xn}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"show",value:function(Ze){Ze.resTxt&&Gn()(Ze.resTxt)===""&&delete Ze.resTxt,_i()(Ze.resHeaders)&&delete Ze.resHeaders,_i()(Ze.reqHeaders)&&delete Ze.reqHeaders;var jt="";Ze.data&&(jt='<pre class="'.concat(Tn("data"),'">').concat(fi()(Ze.data),"</pre>"));var xn="<tr><td>Empty</td></tr>";Ze.reqHeaders&&(xn=Br()(Ze.reqHeaders,function(li,Li){return`<tr>
          <td class="`.concat(Tn("key"),'">').concat(fi()(Li),`</td>
          <td>`).concat(fi()(li),`</td>
        </tr>`)}).join(""));var gr="<tr><td>Empty</td></tr>";Ze.resHeaders&&(gr=Br()(Ze.resHeaders,function(li,Li){return`<tr>
          <td class="`.concat(Tn("key"),'">').concat(fi()(Li),`</td>
          <td>`).concat(fi()(li),`</td>
        </tr>`)}).join(""));var Ir="";if(Ze.resTxt){var Dr=Ze.resTxt;Dr.length>Ba&&(Dr=Gi()(Dr,Ba)),Ir='<pre class="'.concat(Tn("response"),'">').concat(fi()(Dr),"</pre>")}var $r='<div class="'.concat(Tn("control"),`">
      <span class="`).concat(Tn("icon-arrow-left back"),`"></span>
      <span class="`).concat(Tn("icon-delete back"),`"></span>
      <span class="`).concat(Tn("url"),'">').concat(fi()(Ze.url),`</span>
      <span class="`).concat(Tn("icon-copy copy-res"),`"></span>
    </div>
    <div class="`).concat(Tn("http"),`">
      `).concat(jt,`
      <div class="`).concat(Tn("section"),`">
        <h2>Response Headers</h2>
        <table class="`).concat(Tn("headers"),`">
          <tbody>
            `).concat(gr,`
          </tbody>
        </table>
      </div>
      <div class="`).concat(Tn("section"),`">
        <h2>Request Headers</h2>
        <table class="`).concat(Tn("headers"),`">
          <tbody>
            `).concat(xn,`
          </tbody>
        </table>
      </div>
      `).concat(Ir,`
    </div>`);this._$container.html($r).show(),this._detailData=Ze}},{key:"hide",value:function(){this._$container.hide(),this.emit("hide")}},{key:"_bindEvent",value:function(){var Ze=this,jt=this._devtools;this._$container.on("click",Tn(".back"),function(){return Ze.hide()}).on("click",Tn(".copy-res"),this._copyRes).on("click",Tn(".http .response"),function(){var gr=Ze._detailData,Ir=gr.resTxt;if(wi()(Ir))return xn("object",Ir);switch(gr.subType){case"css":return xn("css",Ir);case"html":return xn("html",Ir);case"javascript":return xn("js",Ir);case"json":return xn("object",Ir)}return gr.type==="image"?xn("img",gr.url):void 0});var xn=function(gr,Ir){var Dr=jt.get("sources");Dr&&(Dr.set(gr,Ir),jt.showTool("sources"))}}}])}(z()),Ba=1e5,ta=v(5865),Ua=v.n(ta),Ss=v(6476),Gs=v.n(Ss),Cs=v(5334),ko=v(2480),ws=v(6192),No=v(5689);function po(En,Yn){var Ze=Object.keys(En);if(Object.getOwnPropertySymbols){var jt=Object.getOwnPropertySymbols(En);Yn&&(jt=jt.filter(function(xn){return Object.getOwnPropertyDescriptor(En,xn).enumerable})),Ze.push.apply(Ze,jt)}return Ze}function ji(En){for(var Yn=1;Yn<arguments.length;Yn++){var Ze=arguments[Yn]!=null?arguments[Yn]:{};Yn%2?po(Object(Ze),!0).forEach(function(jt){(0,G.A)(En,jt,Ze[jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(En,Object.getOwnPropertyDescriptors(Ze)):po(Object(Ze)).forEach(function(jt){Object.defineProperty(En,jt,Object.getOwnPropertyDescriptor(Ze,jt))})}return En}var Da=new(Gs());Da.register("Network",Cs),Da.register("Overlay",ko),Da.register("DOM",ji(ji({},ws),{},{getNodeId:ws.getDOMNodeId,getNode:ws.getDOMNode})),Da.register("Storage",No);var ha=Da,ao=v(2388),ms=v(4095),ka=v.n(ms),Uo=v(3737),Po=v.n(Uo),Xl=v(5004),so=v.n(Xl),Bo=v(1849),Eo=v.n(Bo);function Do(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Do=function(){return!!En})()}function Di(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var Xi=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),Ze=(0,w.A)(jt,Do()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)),(0,G.A)(Ze,"_reqWillBeSent",function(Ir){if(Ze._isRecording){var Dr,$r,li,Li={name:(Dr=Ir.request.url,$r=Ii()(Dr.split("/")),$r===""&&($r=(Dr=new(ti())(Dr)).hostname),$r),url:Ir.request.url,status:"pending",type:"unknown",subType:"unknown",size:0,data:Ir.request.postData,method:Ir.request.method,startTime:1e3*Ir.timestamp,time:0,resTxt:"",done:!1,reqHeaders:Ir.request.headers||{},resHeaders:{}};Li.render=function(){var aa={name:Li.name,method:Li.method,status:Li.status,type:Li.subType,size:Li.size,time:Li.displayTime};li?(li.data=aa,li.render()):(li=Ze._requestDataGrid.append(aa,{selectable:!0}),re()(li.container).data("id",Ir.requestId)),Li.hasErr&&re()(li.container).addClass(Tn("request-error"))},Li.render(),Ze._requests[Ir.requestId]=Li}}),(0,G.A)(Ze,"_resReceivedExtraInfo",function(Ir){var Dr=Ze._requests[Ir.requestId];Ze._isRecording&&Dr&&(Dr.resHeaders=Ir.headers,Ze._updateType(Dr),Dr.render())}),(0,G.A)(Ze,"_resReceived",function(Ir){var Dr=Ze._requests[Ir.requestId];if(Ze._isRecording&&Dr){var $r=Ir.response,li=$r.status,Li=$r.headers;Dr.status=li,(li<200||li>=300)&&(Dr.hasErr=!0),Li&&(Dr.resHeaders=Li,Ze._updateType(Dr)),Dr.render()}}),(0,G.A)(Ze,"_loadingFinished",function(Ir){var Dr=Ze._requests[Ir.requestId];if(Ze._isRecording&&Dr){var $r=1e3*Ir.timestamp;Dr.time=$r-Dr.startTime,Dr.displayTime=gi()(Dr.time),Dr.size=Ir.encodedDataLength,Dr.done=!0,Dr.resTxt=ha.domain("Network").getResponseBody({requestId:Ir.requestId}).body,Dr.render()}}),(0,G.A)(Ze,"_loadingFailed",function(Ir){var Dr=Ze._requests[Ir.requestId];if(Ze._isRecording&&Dr){var $r=1e3*Ir.timestamp;Dr.time=$r-Dr.startTime,Dr.displayTime=gi()(Dr.time),Dr.hasErr=!0,Dr.status=0,Dr.done=!0,Dr.render()}}),(0,G.A)(Ze,"_copyCurl",function(){var Ir=Ze._selectedRequest;Ki()(function(Dr){var $r=so()();$r==="windows"&&($r="win");var li=[],Li=Eo()(["accept-encoding","host","method","path","scheme","version"]),aa=$r==="win"?function(So){var Zc=/[\r\n]/.test(So)?'^"':'"';return Zc+So.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[^a-zA-Z0-9\s_\-:=+~'/.',?;()*`&]/g,"^$&").replace(/%(?=[a-zA-Z0-9_])/g,"%^").replace(/\r?\n/g,`^

`)+Zc}:function(So){return/[\0-\x1F\x7F-\x9F!]|'/.test(So)?"$'"+So.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\0-\x1F\x7F-\x9F!]/g,function(Zc){for(var yc=Zc.charCodeAt(0).toString(16);yc.length<4;)yc="0"+yc;return"\\u"+yc})+"'":"'"+So+"'"};li.push(aa(Dr.url()).replace(/[[{}\]]/g,"\\$&"));var pa="GET",la=[],Ji=Dr.requestFormData();Ji&&(la.push("--data-raw "+aa(Ji)),Li["content-length"]=!0,pa="POST"),Dr.requestMethod!==pa&&li.push("-X "+aa(Dr.requestMethod));for(var sa=Dr.requestHeaders(),vs=0;vs<sa.length;vs++){var vo=sa[vs],Jc=vo.name.replace(/^:/,"");Li[Jc.toLowerCase()]||li.push("-H "+aa(Jc+": "+vo.value))}return(li=li.concat(la)).push("--compressed"),"curl "+li.join(li.length>=3?$r==="win"?` ^
  `:` \\
  `:" ")}({requestMethod:Ir.method,url:function(){return Ir.url},requestFormData:function(){return Ir.data},requestHeaders:function(){var Dr=Ir.reqHeaders||{};return Lt()(Dr,{"User-Agent":navigator.userAgent,Referer:location.href}),Br()(Dr,function($r,li){return{name:li,value:$r}})}})),Ze._container.notify("Copied",{icon:"success"})}),(0,G.A)(Ze,"_toggleRecording",function(){Ze._$control.find(Tn(".record")).toggleClass(Tn("recording")),Ze._isRecording=!Ze._isRecording}),(0,G.A)(Ze,"_showDetail",function(){Ze._selectedRequest&&(Ze._splitMode&&Ze._$network.css("width","50%"),Ze._detail.show(Ze._selectedRequest))}),(0,G.A)(Ze,"_updateScale",function(Ir){Ze._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*Ir,"px)"))}),Ze._style=pr(v(8239)),Ze.name="network",Ze._requests={},Ze._selectedRequest=null,Ze._isRecording=!0,Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze,jt){Di(Yn,"init",this)([Ze]),this._container=jt,this._initTpl(),this._detail=new Fi(this._$detail,jt),this._splitMediaQuery=new(Po())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._requestDataGrid=new ao.A(this._$requests.get(0),{columns:[{id:"name",title:"Name",sortable:!0,weight:30},{id:"method",title:"Method",sortable:!0,weight:14},{id:"status",title:"Status",sortable:!0,weight:14},{id:"type",title:"Type",sortable:!0,weight:14},{id:"size",title:"Size",sortable:!0,weight:14},{id:"time",title:"Time",sortable:!0,weight:14}]}),this._resizeSensor=new(ka())(Ze.get(0)),this._bindEvent()}},{key:"show",value:function(){Di(Yn,"show",this)([]),this._updateDataGridHeight()}},{key:"clear",value:function(){this._requests={},this._requestDataGrid.clear()}},{key:"requests",value:function(){var Ze=[];return ve()(this._requests,function(jt){Ze.push(jt)}),Ze}},{key:"_updateDataGridHeight",value:function(){this._requestDataGrid.fit()}},{key:"_updateType",value:function(Ze){var jt=function(Ir){if(!Ir)return"unknown";var Dr=Ir.split(";")[0].split("/");return{type:Dr[0],subType:Ii()(Dr)}}(Ze.resHeaders["content-type"]||""),xn=jt.type,gr=jt.subType;Ze.type=xn,Ze.subType=gr}},{key:"_updateButtons",value:function(){var Ze=this._$control,jt=Ze.find(Tn(".show-detail")),xn=Ze.find(Tn(".copy-curl")),gr=Tn("icon-disabled");jt.addClass(gr),xn.addClass(gr),this._selectedRequest&&(jt.rmClass(gr),xn.rmClass(gr))}},{key:"_bindEvent",value:function(){var Ze=this,jt=this._$control,xn=this._$filterText,gr=this._requestDataGrid,Ir=this;jt.on("click",Tn(".clear-request"),function(){return Ze.clear()}).on("click",Tn(".show-detail"),this._showDetail).on("click",Tn(".copy-curl"),this._copyCurl).on("click",Tn(".record"),this._toggleRecording).on("click",Tn(".filter"),function(){hr.A.prompt("Filter").then(function($r){ir()($r)||(xn.text($r),gr.setOption("filter",Gn()($r)))})}),gr.on("select",function($r){var li=re()($r.container).data("id"),Li=Ir._requests[li];Ze._selectedRequest=Li,Ze._updateButtons(),Ze._splitMode&&Ze._showDetail()}),gr.on("deselect",function(){Ze._selectedRequest=null,Ze._updateButtons(),Ze._detail.hide()}),this._resizeSensor.addListener(Ua()(function(){return Ze._updateDataGridHeight()},15)),this._splitMediaQuery.on("match",function(){Ze._detail.hide(),Ze._splitMode=!0}),this._splitMediaQuery.on("unmatch",function(){Ze._detail.hide(),Ze._splitMode=!1}),this._detail.on("hide",function(){Ze._splitMode&&Ze._$network.css("width","100%")}),ha.domain("Network").enable();var Dr=ha.domain("Network");Dr.on("requestWillBeSent",this._reqWillBeSent),Dr.on("responseReceivedExtraInfo",this._resReceivedExtraInfo),Dr.on("responseReceived",this._resReceived),Dr.on("loadingFinished",this._loadingFinished),Dr.on("loadingFailed",this._loadingFailed),Y.on(Y.SCALE,this._updateScale)}},{key:"destroy",value:function(){Di(Yn,"destroy",this)([]),this._resizeSensor.destroy(),pr.remove(this._style),this._splitMediaQuery.removeAllListeners();var Ze=ha.domain("Network");Ze.off("requestWillBeSent",this._reqWillBeSent),Ze.off("responseReceivedExtraInfo",this._resReceivedExtraInfo),Ze.off("responseReceived",this._resReceived),Ze.off("loadingFinished",this._loadingFinished),Y.off(Y.SCALE,this._updateScale)}},{key:"_initTpl",value:function(){var Ze=this._$el;Ze.html(Tn(`<div class="network">
        <div class="control">
          <span class="icon-record record recording"></span>
          <span class="icon-clear clear-request"></span>
          <span class="icon-eye icon-disabled show-detail"></span>
          <span class="icon-copy icon-disabled copy-curl"></span>
          <span class="filter-text"></span>
          <span class="icon-filter filter"></span>
        </div>
        <div class="requests"></div>
      </div>
      <div class="detail"></div>`)),this._$network=Ze.find(Tn(".network")),this._$detail=Ze.find(Tn(".detail")),this._$requests=Ze.find(Tn(".requests")),this._$control=Ze.find(Tn(".control")),this._$filterText=Ze.find(Tn(".filter-text"))}}])}(oe),On=v(2708),Fn=v.n(On),mr=v(1167),Xr=v.n(mr),Ei=v(7181),ci=v.n(Ei),Ri=v(5784),Ui=v(96),ki=v.n(Ui),Yi=v(896),Ea=v.n(Yi),qa=v(438),Fa=v.n(qa),va=v(6493),$a=v.n(va),Ts=v(6186),Za=v.n(Ts),Rs=v(5241),us=v.n(Rs),Qs=v(2208),Ao=v.n(Qs),xs=v(5145),Ms=v.n(xs);function Js(En){for(var Yn={},Ze=0,jt=En.length;Ze<jt;Ze++){var xn=En[Ze];En[xn]!=="initial"&&(Yn[xn]=En[xn])}return function(gr){return Ms()(gr,{comparator:function(Ir,Dr){for(var $r=Ir.length,li=Dr.length,Li=$r>li?li:$r,aa=0;aa<Li;aa++){var pa=Ls(Ir.charCodeAt(aa),Dr.charCodeAt(aa));if(pa!==0)return pa}return $r>li?1:$r<li?-1:0}})}(Yn)}var es=Element.prototype,js=function(){return!1};es.webkitMatchesSelector?js=function(En,Yn){return En.webkitMatchesSelector(Yn)}:es.mozMatchesSelector&&(js=function(En,Yn){return En.mozMatchesSelector(Yn)});var zs=function(){return(0,C.A)(function En(Yn){(0,A.A)(this,En),this._el=Yn},[{key:"getComputedStyle",value:function(){return Js(window.getComputedStyle(this._el))}},{key:"getMatchedCSSRules",value:function(){var En=this,Yn=[];return ve()(document.styleSheets,function(Ze){try{if(!Ze.cssRules)return}catch{return}ve()(Ze.cssRules,function(jt){var xn=!1;try{xn=En._elMatchesSel(jt.selectorText)}catch{}xn&&Yn.push({selectorText:jt.selectorText,style:Js(jt.style)})})}),Yn}},{key:"_elMatchesSel",value:function(En){return js(this._el,En)}}])}();function Ls(En,Yn){return(En=Le(En))>(Yn=Le(Yn))?1:En<Yn?-1:0}function Le(En){return En===45?123:En}var st=v(128);function zt(En){var Yn=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).noAttr,Ze=Yn!==void 0&&Yn;if(En.nodeType===Node.TEXT_NODE)return'<span class="'.concat(Tn("tag-name-color"),'">(text)</span>');if(En.nodeType===Node.COMMENT_NODE)return'<span class="'.concat(Tn("tag-name-color"),'"><!--></span>');if(ci()(En))return'<span class="'.concat(Tn("tag-name-color"),'">#shadow-root</span>');var jt=En.id,xn=En.className,gr=En.attributes,Ir='<span class="eruda-tag-name-color">'.concat(En.tagName.toLowerCase(),"</span>");if(jt!==""&&(Ir+='<span class="eruda-function-color">#'.concat(jt,"</span>")),De()(xn)){var Dr="";ve()(xn.split(/\s+/g),function($r){$r.trim()!==""&&(Dr+=".".concat($r))}),Ir+='<span class="eruda-attribute-name-color">'.concat(Dr,"</span>")}return Ze||ve()(gr,function($r){var li=$r.name;li!=="id"&&li!=="class"&&li!=="style"&&(Ir+=' <span class="eruda-attribute-name-color">'.concat(li,'</span><span class="eruda-operator-color">="</span><span class="eruda-string-color">').concat($r.value,'</span><span class="eruda-operator-color">"</span>'))}),Ir}var qn=function(){return(0,C.A)(function En(Yn,Ze){var jt=this;(0,A.A)(this,En),(0,G.A)(this,"hide",function(){jt._$container.hide(),jt._disableObserver(),ha.domain("Overlay").hideHighlight()}),(0,G.A)(this,"_highlight",function(xn){var gr=jt._curEl,Ir={showInfo:!1};xn&&xn!=="all"?xn==="margin"?Ir.marginColor="rgba(246, 178, 107, .66)":xn==="border"?Ir.borderColor="rgba(255, 229, 153, .66)":xn==="padding"?Ir.paddingColor="rgba(147, 196, 125, .55)":xn==="content"&&(Ir.contentColor="rgba(111, 168, 220, .66)"):Lt()(Ir,{showInfo:!0,contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"});var Dr=ha.domain("DOM").getNodeId({node:gr}).nodeId;ha.domain("Overlay").highlightNode({nodeId:Dr,highlightConfig:Ir})}),this._$container=Yn,this._devtools=Ze,this._curEl=document.documentElement,this._initObserver(),this._initCfg(),this._initTpl(),this._bindEvent()},[{key:"show",value:function(En){this._curEl=En,this._rmDefComputedStyle=!0,this._computedStyleSearchKeyword="",this._enableObserver(),this._render(),this._highlight()}},{key:"destroy",value:function(){this._disableObserver(),this.restoreEventTarget(),this._rmCfg()}},{key:"overrideEventTarget",value:function(){var En=ps(),Yn=this._origAddEvent=En.addEventListener,Ze=this._origRmEvent=En.removeEventListener;En.addEventListener=function(jt,xn,gr){(function(Ir,Dr,$r){var li=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!Fn()(Ir)||!Or()($r)||!$a()(li))){var Li=Ir.erudaEvents=Ir.erudaEvents||{};Li[Dr]=Li[Dr]||[],Li[Dr].push({listener:$r,listenerStr:$r.toString(),useCapture:li})}})(this,jt,xn,gr),Yn.apply(this,arguments)},En.removeEventListener=function(jt,xn,gr){(function(Ir,Dr,$r){var li=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(!(!Fn()(Ir)||!Or()($r)||!$a()(li))){var Li=Ir.erudaEvents;if(!(!Li||!Li[Dr])){for(var aa=Li[Dr],pa=0,la=aa.length;pa<la;pa++)if(aa[pa].listener===$r){aa.splice(pa,1);break}aa.length===0&&delete Li[Dr],$e()(Li).length===0&&delete Ir.erudaEvents}}})(this,jt,xn,gr),Ze.apply(this,arguments)}}},{key:"restoreEventTarget",value:function(){var En=ps();this._origAddEvent&&(En.addEventListener=this._origAddEvent),this._origRmEvent&&(En.removeEventListener=this._origRmEvent)}},{key:"_initTpl",value:function(){var En=this._$container,Yn='<div class="'.concat(Tn("control"),`">
      <span class="`).concat(Tn("icon-arrow-left back"),`"></span>
      <span class="`).concat(Tn("element-name"),`"></span>
      <span class="`).concat(Tn("icon-refresh refresh"),`"></span>
    </div>
    <div class="`).concat(Tn("element"),`">
      <div class="`).concat(Tn("attributes section"),`"></div>
      <div class="`).concat(Tn("styles section"),`"></div>
      <div class="`).concat(Tn("computed-style section"),`"></div>
      <div class="`).concat(Tn("listeners section"),`"></div>
    </div>`);En.html(Yn),this._$elementName=En.find(Tn(".element-name")),this._$attributes=En.find(Tn(".attributes")),this._$styles=En.find(Tn(".styles")),this._$listeners=En.find(Tn(".listeners")),this._$computedStyle=En.find(Tn(".computed-style"));var Ze=us()("div");this._$boxModel=re()(Ze),this._boxModel=new st.A(Ze)}},{key:"_toggleAllComputedStyle",value:function(){this._rmDefComputedStyle=!this._rmDefComputedStyle,this._render()}},{key:"_render",value:function(){var En=this._getData(this._curEl),Yn=this._$attributes,Ze=this._$elementName,jt=this._$styles,xn=this._$computedStyle,gr=this._$listeners;Ze.html(En.name);var Ir="<tr><td>Empty</td></tr>";_i()(En.attributes)||(Ir=Br()(En.attributes,function(pa){var la=pa.name,Ji=pa.value;return`<tr>
          <td class="`.concat(Tn("attribute-name-color"),'">').concat(fi()(la),`</td>
          <td class="`).concat(Tn("string-color"),'">').concat(Ji,`</td>
        </tr>`)}).join("")),Ir=`<h2>Attributes</h2>
    <div class="`.concat(Tn("table-wrapper"),`">
      <table>
        <tbody>
          `).concat(Ir,` 
        </tbody>
      </table>
    </div>`),Yn.html(Ir);var Dr="";if(_i()(En.styles))jt.hide();else{var $r=Br()(En.styles,function(pa){var la=pa.selectorText,Ji=pa.style;return Ji=Br()(Ji,function(sa,vs){return'<div class="'.concat(Tn("rule"),'"><span>').concat(fi()(vs),"</span>: ").concat(sa,";</div>")}).join(""),'<div class="'.concat(Tn("style-rules"),`">
          <div>`).concat(fi()(la),` {</div>
            `).concat(Ji,`
          <div>}</div>
        </div>`)}).join("");Dr=`<h2>Styles</h2>
      <div class="`.concat(Tn("style-wrapper"),`">
        `).concat($r,`
      </div>`),jt.html(Dr).show()}var li="";if(En.computedStyle){var Li=Tn(`<div class="btn toggle-all-computed-style">
        <span class="icon-expand"></span>
      </div>`);En.rmDefComputedStyle&&(Li=Tn(`<div class="btn toggle-all-computed-style">
          <span class="icon-compress"></span>
        </div>`)),li=`<h2>
        Computed Style
        `.concat(Li,`
        <div class="`).concat(Tn("btn computed-style-search"),`">
          <span class="`).concat(Tn("icon-filter"),`"></span>
        </div>
        `).concat(En.computedStyleSearchKeyword?'<div class="'.concat(Tn("btn filter-text"),'">').concat(fi()(En.computedStyleSearchKeyword),"</div>"):"",`
      </h2>
      <div class="`).concat(Tn("box-model"),`"></div>
      <div class="`).concat(Tn("table-wrapper"),`">
        <table>
          <tbody>
          `).concat(Br()(En.computedStyle,function(pa,la){return`<tr>
              <td class="`.concat(Tn("key"),'">').concat(fi()(la),`</td>
              <td>`).concat(pa,`</td>
            </tr>`)}).join(""),`
          </tbody>
        </table>
      </div>`),xn.html(li).show(),this._boxModel.setOption("element",this._curEl),xn.find(Tn(".box-model")).append(this._$boxModel.get(0))}else xn.text("").hide();var aa="";En.listeners?(aa=Br()(En.listeners,function(pa,la){return pa=Br()(pa,function(Ji){var sa=Ji.useCapture,vs=Ji.listenerStr;return"<li ".concat(sa?'class="'.concat(Tn("capture"),'"'):"",">").concat(fi()(vs),"</li>")}).join(""),'<div class="'.concat(Tn("listener"),`">
          <div class="`).concat(Tn("listener-type"),'">').concat(fi()(la),`</div>
          <ul class="`).concat(Tn("listener-content"),`">
            `).concat(pa,`
          </ul>
        </div>`)}).join(""),aa=`<h2>Event Listeners</h2>
      <div class="`.concat(Tn("listener-wrapper"),`">
        `).concat(aa,` 
      </div>`),gr.html(aa).show()):gr.hide(),this._$container.show()}},{key:"_getData",value:function(En){var Yn={},Ze=new zs(En),jt=En.className,xn=En.id,gr=En.attributes,Ir=En.tagName;Yn.computedStyleSearchKeyword=this._computedStyleSearchKeyword,Yn.attributes=ii(gr),Yn.name=zt({tagName:Ir,id:xn,className:jt,attributes:gr});var Dr=En.erudaEvents;if(Dr&&$e()(Dr).length!==0&&(Yn.listeners=Dr),ns(Ir))return Yn;var $r=Ze.getComputedStyle(),li=Ze.getMatchedCSSRules();li.unshift(function(aa){for(var pa={selectorText:"element.style",style:{}},la=0,Ji=aa.length;la<Ji;la++){var sa=aa[la];pa.style[sa]=aa[sa]}return pa}(En.style)),li.forEach(function(aa){return zr(aa.style)}),Yn.styles=li,this._rmDefComputedStyle&&($r=function(aa,pa){var la={},Ji=["display","width","height"];return ve()(pa,function(sa){Ji=Ji.concat($e()(sa.style))}),Ji=Fa()(Ji),ve()(aa,function(sa,vs){Oe()(Ji,vs)&&(la[vs]=sa)}),la}($r,li)),Yn.rmDefComputedStyle=this._rmDefComputedStyle;var Li=ki()(Yn.computedStyleSearchKeyword);return Li&&($r=Ea()($r,function(aa,pa){return Oe()(pa,Li)||Oe()(aa,Li)})),zr($r),Yn.computedStyle=$r,Yn}},{key:"_bindEvent",value:function(){var En=this,Yn=this._devtools;this._$container.on("click",Tn(".toggle-all-computed-style"),function(){return En._toggleAllComputedStyle()}).on("click",Tn(".computed-style-search"),function(){hr.A.prompt("Filter").then(function(Ze){ir()(Ze)||(Ze=Gn()(Ze),En._computedStyleSearchKeyword=Ze,En._render())})}).on("click",".eruda-listener-content",function(){var Ze=re()(this).text(),jt=Yn.get("sources");jt&&(jt.set("js",Ze),Yn.showTool("sources"))}).on("click",Tn(".element-name"),function(){var Ze=Yn.get("sources");Ze&&(Ze.set("object",En._curEl),Yn.showTool("sources"))}).on("click",Tn(".back"),this.hide).on("click",Tn(".refresh"),function(){En._render(),Yn.notify("Refreshed",{icon:"success"})}),this._boxModel.on("highlight",this._highlight)}},{key:"_initObserver",value:function(){var En=this;this._observer=new(Ao())(function(Yn){ve()(Yn,function(Ze){return En._handleMutation(Ze)})})}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}},{key:"_handleMutation",value:function(En){if(!Ar(En.target)&&En.type==="attributes"){if(En.target!==this._curEl)return;this._render()}}},{key:"_rmCfg",value:function(){var En=this.config,Yn=this._devtools.get("settings");Yn&&Yn.remove(En,"overrideEventTarget").remove(En,"observeElement").remove("Elements")}},{key:"_initCfg",value:function(){var En=this,Yn=this.config=kn.createCfg("elements",{overrideEventTarget:!0});Yn.get("overrideEventTarget")&&this.overrideEventTarget(),Yn.on("change",function(jt,xn){if(jt==="overrideEventTarget")return xn?En.overrideEventTarget():En.restoreEventTarget()});var Ze=this._devtools.get("settings");Ze&&(Ze.text("Elements").switch(Yn,"overrideEventTarget","Catch Event Listeners"),Ze.separator())}}])}();function zr(En){ve()(En,function(Yn,Ze){return En[Ze]=da(Yn)})}var ii=function(En){return Br()(En,function(Yn){var Ze=Yn.value,jt=Yn.name;return Ze=fi()(Ze),(jt==="src"||jt==="href")&&!zn()(Ze,"data")&&(Ze=ds(Ze)),jt==="style"&&(Ze=da(Ze)),{name:jt,value:Ze}})},Pi=/rgba?\((.*?)\)/g,xa=/url\("?(.*?)"?\)/g;function da(En){return(En=He()(En)).replace(Pi,'<span class="eruda-style-color" style="background-color: $&"></span>$&').replace(xa,function(Yn,Ze){return'url("'.concat(ds(Ze),'")')})}var Aa=["script","style","meta","title","link","head"],ns=function(En){Aa.indexOf(En.toLowerCase())},ds=function(En){return'<a href="'.concat(En,'" target="_blank">').concat(En,"</a>")},ps=function(){return Za()(window,"EventTarget.prototype")||window.Node.prototype};function Is(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Is=function(){return!!En})()}function oo(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var hc=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),Ze=(0,w.A)(jt,Is()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)),(0,G.A)(Ze,"_showDetail",function(){Ze._isShow&&Ze._curNode&&(Ze._curNode.nodeType===Node.ELEMENT_NODE?Ze._detail.show(Ze._curNode):Ze._detail.show(Ze._curNode.parentNode||Ze._curNode.host))}),(0,G.A)(Ze,"_back",function(){if(Ze._curNode!==Ze._htmlEl){for(var Ir=Ze._curParentQueue,Dr=Ir.shift();!pc(Dr);)Dr=Ir.shift();Ze.set(Dr)}}),(0,G.A)(Ze,"_updateScale",function(Ir){Ze._splitMediaQuery.setQuery("screen and (min-width: ".concat(680*Ir,"px)"))}),(0,G.A)(Ze,"_deleteNode",function(){var Ir=Ze._curNode;Ir.parentNode&&Ir.parentNode.removeChild(Ir)}),(0,G.A)(Ze,"_copyNode",function(){var Ir=Ze._curNode;Ir.nodeType===Node.ELEMENT_NODE?Ki()(Ir.outerHTML):Ki()(Ir.nodeValue),Ze._container.notify("Copied",{icon:"success"})}),(0,G.A)(Ze,"_toggleSelect",function(){Ze._$el.find(Tn(".select")).toggleClass(Tn("active")),Ze._selectElement=!Ze._selectElement,Ze._selectElement?(ha.domain("Overlay").setInspectMode({mode:"searchForNode",highlightConfig:{showInfo:!Xr()(),showRulers:!1,showAccessibilityInfo:!Xr()(),showExtensionLines:!1,contrastAlgorithm:"aa",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)"}}),Ze._container.hide()):(ha.domain("Overlay").setInspectMode({mode:"none"}),ha.domain("Overlay").hideHighlight())}),(0,G.A)(Ze,"_inspectNodeRequested",function(Ir){var Dr=Ir.backendNodeId;Ze._container.show(),Ze._toggleSelect();try{var $r=ha.domain("DOM").getNode({nodeId:Dr}).node;Ze.select($r)}catch{}}),(0,G.A)(Ze,"_setNode",function(Ir){if(Ir!==Ze._curNode){Ze._curNode=Ir,Ze._renderCrumbs();for(var Dr=[],$r=Ir.parentNode;$r;)Dr.push($r),$r=$r.parentNode;Ze._curParentQueue=Dr,Ze._splitMode&&Ze._showDetail(),Ze._updateButtons(),Ze._updateHistory()}}),Ze._style=pr(v(9111)),Ze.name="elements",Ze._selectElement=!1,Ze._observeElement=!0,Ze._history=[],z().mixin(Ze),Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze,jt){var xn=this;oo(Yn,"init",this)([Ze]),this._container=jt,this._initTpl(),this._htmlEl=document.documentElement,this._detail=new qn(this._$detail,jt),this.config=this._detail.config,this._splitMediaQuery=new(Po())("screen and (min-width: 680px)"),this._splitMode=this._splitMediaQuery.isMatch(),this._domViewer=new Ri.A(this._$domViewer.get(0),{node:this._htmlEl,ignore:function(gr){return Ar(gr)||function(Ir){for(;Ir;){var Dr="";if(Ir.getAttribute&&(Dr=Ir.getAttribute("class")||""),Oe()(Dr,"__chobitsu-hide__"))return!0;Ir=Ir.parentNode}return!1}(gr)}}),this._domViewer.expand(),this._bindEvent(),ha.domain("Overlay").enable(),dr()(function(){return xn._updateHistory()})}},{key:"show",value:function(){oo(Yn,"show",this)([]),this._isShow=!0,this._curNode?this._splitMode&&this._showDetail():this.select(document.body)}},{key:"hide",value:function(){oo(Yn,"hide",this)([]),this._isShow=!1,ha.domain("Overlay").hideHighlight()}},{key:"select",value:function(Ze){return this._domViewer.select(Ze),this._setNode(Ze),this.emit("change",Ze),this}},{key:"destroy",value:function(){oo(Yn,"destroy",this)([]),Y.off(Y.SCALE,this._updateScale),pr.remove(this._style),this._detail.destroy(),ha.domain("Overlay").off("inspectNodeRequested",this._inspectNodeRequested),ha.domain("Overlay").disable(),this._splitMediaQuery.removeAllListeners()}},{key:"_updateButtons",value:function(){var Ze=this._$control,jt=Ze.find(Tn(".show-detail")),xn=Ze.find(Tn(".copy-node")),gr=Ze.find(Tn(".delete-node")),Ir=Tn("icon-disabled");jt.addClass(Ir),xn.addClass(Ir),gr.addClass(Ir);var Dr=this._curNode;Dr&&!ci()(Dr)&&(Dr!==document.documentElement&&Dr!==document.body&&gr.rmClass(Ir),xn.rmClass(Ir),Dr.nodeType===Node.ELEMENT_NODE&&jt.rmClass(Ir))}},{key:"_initTpl",value:function(){var Ze=this._$el;Ze.html(Tn(`<div class="elements">
        <div class="control">
          <span class="icon icon-select select"></span>
          <span class="icon icon-eye show-detail"></span>
          <span class="icon icon-copy copy-node"></span>
          <span class="icon icon-delete delete-node"></span>
        </div>
        <div class="dom-viewer-container">
          <div class="dom-viewer"></div>
        </div>
        <div class="crumbs"></div>
      </div>
      <div class="detail"></div>`)),this._$detail=Ze.find(Tn(".detail")),this._$domViewer=Ze.find(Tn(".dom-viewer")),this._$control=Ze.find(Tn(".control")),this._$crumbs=Ze.find(Tn(".crumbs"))}},{key:"_renderCrumbs",value:function(){var Ze=function(xn){for(var gr=[],Ir=0;xn;)gr.push({text:zt(xn,{noAttr:!0}),idx:Ir++}),ci()(xn)&&(xn=xn.host),xn=!xn.parentElement&&ci()(xn.parentNode)?xn.parentNode:xn.parentElement;return gr.reverse()}(this._curNode),jt="";_i()(Ze)||(jt=Br()(Ze,function(xn){var gr=xn.text,Ir=xn.idx;return'<li class="'.concat(Tn("crumb"),'" data-idx="').concat(Ir,'">').concat(gr,"</div></li>")}).join("")),this._$crumbs.html(jt)}},{key:"_bindEvent",value:function(){var Ze=this,jt=this;this._$el.on("click",Tn(".crumb"),function(){for(var xn=br()(re()(this).data("idx")),gr=jt._curNode;xn--&&gr.parentElement;)gr=gr.parentElement;pc(gr)&&jt.select(gr)}),this._$control.on("click",Tn(".select"),this._toggleSelect).on("click",Tn(".show-detail"),this._showDetail).on("click",Tn(".copy-node"),this._copyNode).on("click",Tn(".delete-node"),this._deleteNode),this._domViewer.on("select",this._setNode).on("deselect",this._back),ha.domain("Overlay").on("inspectNodeRequested",this._inspectNodeRequested),this._splitMediaQuery.on("match",function(){Ze._splitMode=!0,Ze._showDetail()}),this._splitMediaQuery.on("unmatch",function(){Ze._splitMode=!1,Ze._detail.hide()}),Y.on(Y.SCALE,this._updateScale)}},{key:"_updateHistory",value:function(){var Ze=this._container.get("console");if(Ze){var jt=this._history;jt.unshift(this._curNode),jt.length>5&&jt.pop();for(var xn=0;xn<5;xn++)Ze.setGlobal("$".concat(xn),jt[xn])}}}])}(oe),pc=function(En){return Fn()(En)&&En.parentNode},Eu=v(3981),Au=v.n(Eu),Su=v(4866),mc=v.n(Su),ml=null,rs=[{name:"Border All",fn:function(){if(ml)return pr.remove(ml),void(ml=null);ml=pr("* { outline: 2px dashed #707d8b; outline-offset: -3px; }",document.head)},desc:"Add color borders to all elements"},{name:"Refresh Page",fn:function(){var En=new(ti());En.setQuery("timestamp",Au()()),window.location.replace(En.toString())},desc:"Add timestamp to url and refresh"},{name:"Search Text",fn:function(){hr.A.prompt("Enter the text").then(function(En){var Yn,Ze,jt;En&&Gn()(En)!==""&&(Yn=En,Ze=document.body,jt=new RegExp(Yn,"ig"),Cu(Ze,function(xn){var gr=re()(xn);if(gr.hasClass("eruda-search-highlight-block"))return document.createTextNode(gr.text())}),Cu(Ze,function(xn){if(xn.nodeType===3){var gr=xn.nodeValue;if((gr=gr.replace(jt,function(Dr){return'<span class="eruda-keyword">'.concat(Dr,"</span>")}))!==xn.nodeValue){var Ir=re()(document.createElement("div"));return Ir.html(gr),Ir.addClass("eruda-search-highlight-block"),Ir.get(0)}}}))})},desc:"Highlight given text on page"},{name:"Edit Page",fn:function(){var En=document.body;En.contentEditable=En.contentEditable!=="true"},desc:"Toggle body contentEditable"},{name:"Fit Screen",fn:function(){var En=document.body,Yn=document.documentElement,Ze=re()(En);if(Ze.data("scaled"))window.scrollTo(0,+Ze.data("scaled")),Ze.rmAttr("data-scaled"),Ze.css("transform","none");else{var jt=Math.max(En.scrollHeight,En.offsetHeight,Yn.clientHeight,Yn.scrollHeight,Yn.offsetHeight),xn=Math.max(document.documentElement.clientHeight,window.innerHeight||0),gr=xn/jt;Ze.css("transform","scale(".concat(gr,")")),Ze.data("scaled",window.scrollY),window.scrollTo(0,jt/2-xn/2)}},desc:"Scale down the whole page to fit screen"},{name:"Load Vue Plugin",fn:function(){gl("vue")},desc:"Vue devtools"},{name:"Load Monitor Plugin",fn:function(){gl("monitor")},desc:"Display page fps, memory and dom nodes"},{name:"Load Features Plugin",fn:function(){gl("features")},desc:"Browser feature detections"},{name:"Load Timing Plugin",fn:function(){gl("timing")},desc:"Show performance and resource timing"},{name:"Load Code Plugin",fn:function(){gl("code")},desc:"Edit and run JavaScript"},{name:"Load Benchmark Plugin",fn:function(){gl("benchmark")},desc:"Run JavaScript benchmarks"},{name:"Load Geolocation Plugin",fn:function(){gl("geolocation")},desc:"Test geolocation"},{name:"Load Orientation Plugin",fn:function(){gl("orientation")},desc:"Test orientation api"},{name:"Load Touches Plugin",fn:function(){gl("touches")},desc:"Visualize screen touches"}];function Cu(En,Yn){var Ze=En.childNodes;if(!Ar(En)){for(var jt=0,xn=Ze.length;jt<xn;jt++){var gr=Cu(Ze[jt],Yn);gr&&En.replaceChild(gr,Ze[jt])}return Yn(En)}}function gl(En){var Yn="eruda"+ln()(En);if(!window[Yn]){var Ze=location.protocol;zn()(Ze,"http")||(Ze="http:"),mc()("".concat(Ze,"//cdn.jsdelivr.net/npm/eruda-").concat(En,"@").concat(Vd[En]),function(jt){if(!jt||!window[Yn])return An.error("Fail to load plugin "+En);Y.emit(Y.ADD,window[Yn]),Y.emit(Y.SHOW,En)})}}pr(v(688),document.head);var Vd={monitor:"1.1.1",features:"2.1.0",timing:"2.0.1",code:"2.2.0",benchmark:"2.0.1",geolocation:"2.1.0",orientation:"2.1.1",touches:"2.1.0",vue:"1.1.1"},Gc=v(961),Il=v.n(Gc);function ud(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ud=function(){return!!En})()}function lo(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var Vo=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),(Ze=(0,w.A)(jt,ud()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)))._style=pr(v(9861)),Ze.name="snippets",Ze._snippets=[],Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze){lo(Yn,"init",this)([Ze]),this._bindEvent(),this._addDefSnippets()}},{key:"destroy",value:function(){lo(Yn,"destroy",this)([]),pr.remove(this._style)}},{key:"add",value:function(Ze,jt,xn){return this._snippets.push({name:Ze,fn:jt,desc:xn}),this._render(),this}},{key:"remove",value:function(Ze){return Il()(this._snippets,function(jt){return jt.name===Ze}),this._render(),this}},{key:"run",value:function(Ze){for(var jt=this._snippets,xn=0,gr=jt.length;xn<gr;xn++)jt[xn].name===Ze&&this._run(xn);return this}},{key:"clear",value:function(){return this._snippets=[],this._render(),this}},{key:"_bindEvent",value:function(){var Ze=this;this._$el.on("click",".eruda-run",function(){var jt=re()(this).data("idx");Ze._run(jt)})}},{key:"_run",value:function(Ze){this._snippets[Ze].fn.call(null)}},{key:"_addDefSnippets",value:function(){var Ze=this;ve()(rs,function(jt){Ze.add(jt.name,jt.fn,jt.desc)})}},{key:"_render",value:function(){var Ze=Br()(this._snippets,function(jt,xn){return'<div class="'.concat(Tn("section run"),'" data-idx="').concat(xn,`">
        <h2 class="`).concat(Tn("name"),'">').concat(fi()(jt.name),`
          <div class="`).concat(Tn("btn"),`">
            <span class="`).concat(Tn("icon-play"),`"></span>
          </div>
        </h2>
        <div class="`).concat(Tn("description"),`">
          `).concat(fi()(jt.desc),`
        </div>
      </div>`)}).join("");this._renderHtml(Ze)}},{key:"_renderHtml",value:function(Ze){Ze!==this._lastHtml&&(this._lastHtml=Ze,this._$el.html(Ze))}}])}(oe),mo=v(4497),dd=v.n(mo),hd=v(311),wu=v.n(hd),zc=v(769),Hc=v.n(zc),vl=v(4069),Tu=v.n(vl),gc=function(){return(0,C.A)(function En(Yn,Ze,jt,xn){var gr=this;(0,A.A)(this,En),(0,G.A)(this,"_updateGridHeight",function(Ir){gr._dataGrid.setOption({minHeight:60*Ir,maxHeight:223*Ir})}),this._type=xn,this._$container=Yn,this._devtools=Ze,this._resources=jt,this._selectedItem=null,this._storeData=[],this._initTpl(),this._dataGrid=new ao.A(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()},[{key:"destroy",value:function(){Y.off(Y.SCALE,this._updateGridHeight)}},{key:"refresh",value:function(){var En=this._dataGrid;this._refreshStorage(),En.clear(),ve()(this._storeData,function(Yn){var Ze=Yn.key,jt=Yn.val;En.append({key:Ze,value:jt},{selectable:!0})})}},{key:"_refreshStorage",value:function(){var En=this._resources,Yn=tr(this._type,!1);if(Yn){var Ze=[];Yn=JSON.parse(JSON.stringify(Yn)),ve()(Yn,function(jt,xn){De()(jt)&&(En.config.get("hideErudaSetting")&&(zn()(xn,"eruda")||xn==="active-eruda")||Ze.push({key:xn,val:Gi()(jt,200)}))}),this._storeData=Ze}}},{key:"_updateButtons",value:function(){var En=this._$container,Yn=En.find(Tn(".show-detail")),Ze=En.find(Tn(".delete-storage")),jt=En.find(Tn(".copy-storage")),xn=Tn("btn-disabled");Yn.addClass(xn),Ze.addClass(xn),jt.addClass(xn),this._selectedItem&&(Yn.rmClass(xn),Ze.rmClass(xn),jt.rmClass(xn))}},{key:"_initTpl",value:function(){var En=this._$container,Yn=this._type;En.html(Tn(`<h2 class="title">
      `.concat(Yn==="local"?"Local":"Session",` Storage
      <div class="btn refresh-storage">
        <span class="icon icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-storage btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-storage btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-storage">
        <span class="icon icon-clear"></span>
      </div>
      <div class="btn filter">
        <span class="icon icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`))),this._$dataGrid=En.find(Tn(".data-grid")),this._$filterText=En.find(Tn(".filter-text"))}},{key:"_getVal",value:function(En){return this._type==="local"?localStorage.getItem(En):sessionStorage.getItem(En)}},{key:"_bindEvent",value:function(){var En=this,Yn=this._type,Ze=this._devtools;function jt(xn,gr){var Ir=Ze.get("sources");if(Ir)return Ir.set(xn,gr),Ze.showTool("sources"),!0}this._$container.on("click",Tn(".refresh-storage"),function(){Ze.notify("Refreshed",{icon:"success"}),En.refresh()}).on("click",Tn(".clear-storage"),function(){ve()(En._storeData,function(xn){Yn==="local"?localStorage.removeItem(xn.key):sessionStorage.removeItem(xn.key)}),En.refresh()}).on("click",Tn(".show-detail"),function(){var xn=En._selectedItem,gr=En._getVal(xn);try{jt("object",JSON.parse(gr))}catch{jt("raw",gr)}}).on("click",Tn(".copy-storage"),function(){var xn=En._selectedItem;Ki()(En._getVal(xn)),Ze.notify("Copied",{icon:"success"})}).on("click",Tn(".filter"),function(){hr.A.prompt("Filter").then(function(xn){ir()(xn)||(xn=Gn()(xn),En._$filterText.text(xn),En._dataGrid.setOption("filter",xn))})}).on("click",Tn(".delete-storage"),function(){var xn=En._selectedItem;Yn==="local"?localStorage.removeItem(xn):sessionStorage.removeItem(xn),En.refresh()}),this._dataGrid.on("select",function(xn){En._selectedItem=xn.data.key,En._updateButtons()}).on("deselect",function(){En._selectedItem=null,En._updateButtons()}),Y.on(Y.SCALE,this._updateGridHeight)}}])}();function Ql(En,Yn){En.rmClass(Tn("ok")).rmClass(Tn("danger")).rmClass(Tn("warn")).addClass(Tn(Yn))}function vc(En,Yn){if(Yn===0)return"";var Ze=0,jt=0;switch(En){case"cookie":Ze=30,jt=60;break;case"script":Ze=5,jt=10;break;case"stylesheet":Ze=4,jt=8;break;case"image":Ze=50,jt=100}return Yn>=jt?"danger":Yn>=Ze?"warn":"ok"}var Hs=function(){return(0,C.A)(function En(Yn,Ze){(0,A.A)(this,En),this._$container=Yn,this._devtools=Ze,this._selectedItem=null,this._initTpl(),this._dataGrid=new ao.A(this._$dataGrid.get(0),{columns:[{id:"key",title:"Key",weight:30},{id:"value",title:"Value",weight:90}],minHeight:60,maxHeight:223}),this._bindEvent()},[{key:"refresh",value:function(){var En=this._$container,Yn=this._dataGrid,Ze=ha.domain("Network").getCookies().cookies,jt=Br()(Ze,function(xn){return{key:xn.name,val:xn.value}});Yn.clear(),ve()(jt,function(xn){var gr=xn.key,Ir=xn.val;Yn.append({key:gr,value:Ir},{selectable:!0})}),Ql(En,vc("cookie",jt.length))}},{key:"_initTpl",value:function(){var En=this._$container;En.html(Tn(`<h2 class="title">
      Cookie
      <div class="btn refresh-cookie">
        <span class="icon-refresh"></span>
      </div>
      <div class="btn show-detail btn-disabled">
        <span class="icon icon-eye"></span>
      </div>
      <div class="btn copy-cookie btn-disabled">
        <span class="icon icon-copy"></span>
      </div>
      <div class="btn delete-cookie btn-disabled">
        <span class="icon icon-delete"></span>
      </div>
      <div class="btn clear-cookie">
        <span class="icon-clear"></span>
      </div>
      <div class="btn filter" data-type="cookie">
        <span class="icon-filter"></span>
      </div>
      <div class="btn filter-text"></div>
    </h2>
    <div class="data-grid"></div>`)),this._$dataGrid=En.find(Tn(".data-grid")),this._$filterText=En.find(Tn(".filter-text"))}},{key:"_updateButtons",value:function(){var En=this._$container,Yn=En.find(Tn(".show-detail")),Ze=En.find(Tn(".delete-cookie")),jt=En.find(Tn(".copy-cookie")),xn=Tn("btn-disabled");Yn.addClass(xn),Ze.addClass(xn),jt.addClass(xn),this._selectedItem&&(Yn.rmClass(xn),Ze.rmClass(xn),jt.rmClass(xn))}},{key:"_getVal",value:function(En){for(var Yn=ha.domain("Network").getCookies().cookies,Ze=0,jt=Yn.length;Ze<jt;Ze++)if(Yn[Ze].name===En)return Yn[Ze].value;return""}},{key:"_bindEvent",value:function(){var En=this,Yn=this._devtools;function Ze(jt,xn){var gr=Yn.get("sources");if(gr)return gr.set(jt,xn),Yn.showTool("sources"),!0}this._$container.on("click",Tn(".refresh-cookie"),function(){Yn.notify("Refreshed",{icon:"success"}),En.refresh()}).on("click",Tn(".clear-cookie"),function(){ha.domain("Storage").clearDataForOrigin({storageTypes:"cookies"}),En.refresh()}).on("click",Tn(".delete-cookie"),function(){var jt=En._selectedItem;ha.domain("Network").deleteCookies({name:jt}),En.refresh()}).on("click",Tn(".show-detail"),function(){var jt=En._selectedItem,xn=En._getVal(jt);try{Ze("object",JSON.parse(xn))}catch{Ze("raw",xn)}}).on("click",Tn(".copy-cookie"),function(){var jt=En._selectedItem;Ki()(En._getVal(jt)),Yn.notify("Copied",{icon:"success"})}).on("click",Tn(".filter"),function(){hr.A.prompt("Filter").then(function(jt){ir()(jt)||(jt=Gn()(jt),En._filter=jt,En._$filterText.text(jt),En._dataGrid.setOption("filter",jt))})}),this._dataGrid.on("select",function(jt){En._selectedItem=jt.data.key,En._updateButtons()}).on("deselect",function(){En._selectedItem=null,En._updateButtons()})}}])}();function kl(En,Yn){var Ze=typeof Symbol<"u"&&En[Symbol.iterator]||En["@@iterator"];if(!Ze){if(Array.isArray(En)||(Ze=function($r,li){if($r){if(typeof $r=="string")return qc($r,li);var Li={}.toString.call($r).slice(8,-1);return Li==="Object"&&$r.constructor&&(Li=$r.constructor.name),Li==="Map"||Li==="Set"?Array.from($r):Li==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Li)?qc($r,li):void 0}}(En))||Yn){Ze&&(En=Ze);var jt=0,xn=function(){};return{s:xn,n:function(){return jt>=En.length?{done:!0}:{done:!1,value:En[jt++]}},e:function($r){throw $r},f:xn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var gr,Ir=!0,Dr=!1;return{s:function(){Ze=Ze.call(En)},n:function(){var $r=Ze.next();return Ir=$r.done,$r},e:function($r){Dr=!0,gr=$r},f:function(){try{Ir||Ze.return==null||Ze.return()}finally{if(Dr)throw gr}}}}function qc(En,Yn){(Yn==null||Yn>En.length)&&(Yn=En.length);for(var Ze=0,jt=Array(Yn);Ze<Yn;Ze++)jt[Ze]=En[Ze];return jt}function pd(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pd=function(){return!!En})()}function jo(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return 2&jt&&typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var co=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),(Ze=(0,w.A)(jt,pd()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)))._style=pr(v(1443)),Ze.name="resources",Ze._hideErudaSetting=!1,Ze._observeElement=!0,Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze,jt){jo(Yn,"init",this,3)([Ze]),this._container=jt,this._initTpl(),this._localStorage=new gc(this._$localStorage,jt,this,"local"),this._sessionStorage=new gc(this._$sessionStorage,jt,this,"session"),this._cookie=new Hs(this._$cookie,jt),this._bindEvent(),this._initObserver(),this._initCfg()}},{key:"refresh",value:function(){return this.refreshLocalStorage().refreshSessionStorage().refreshCookie().refreshScript().refreshStylesheet().refreshIframe().refreshImage()}},{key:"destroy",value:function(){jo(Yn,"destroy",this,3)([]),this._localStorage.destroy(),this._sessionStorage.destroy(),this._disableObserver(),pr.remove(this._style),this._rmCfg()}},{key:"refreshScript",value:function(){var Ze=[];re()("script").each(function(){var Dr=this.src;Dr!==""&&Ze.push(Dr)});var jt=vc("script",(Ze=Fa()(Ze)).length),xn="<li>Empty</li>";_i()(Ze)||(xn=Br()(Ze,function(Dr){return Dr=fi()(Dr),'<li><a href="'.concat(Dr,'" target="_blank" class="').concat(Tn("js-link"),'">').concat(Dr,"</a></li>")}).join(""));var gr='<h2 class="'.concat(Tn("title"),`">
      Script
      <div class="`).concat(Tn("btn refresh-script"),`">
        <span class="`).concat(Tn("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Tn("link-list"),`">
      `).concat(xn,`
    </ul>`),Ir=this._$script;return Ql(Ir,jt),Ir.html(gr),this}},{key:"refreshStylesheet",value:function(){var Ze=[];re()("link").each(function(){this.rel==="stylesheet"&&Ze.push(this.href)});var jt=vc("stylesheet",(Ze=Fa()(Ze)).length),xn="<li>Empty</li>";_i()(Ze)||(xn=Br()(Ze,function(Dr){return Dr=fi()(Dr),' <li><a href="'.concat(Dr,'" target="_blank" class="').concat(Tn("css-link"),'">').concat(Dr,"</a></li>")}).join(""));var gr='<h2 class="'.concat(Tn("title"),`">
      Stylesheet
      <div class="`).concat(Tn("btn refresh-stylesheet"),`">
        <span class="`).concat(Tn("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Tn("link-list"),`">
      `).concat(xn,`
    </ul>`),Ir=this._$stylesheet;return Ql(Ir,jt),Ir.html(gr),this}},{key:"refreshIframe",value:function(){var Ze=[];re()("iframe").each(function(){var gr=re()(this).attr("src");gr&&Ze.push(gr)}),Ze=Fa()(Ze);var jt="<li>Empty</li>";_i()(Ze)||(jt=Br()(Ze,function(gr){return gr=fi()(gr),'<li><a href="'.concat(gr,'" target="_blank" class="').concat(Tn("iframe-link"),'">').concat(gr,"</a></li>")}).join(""));var xn='<h2 class="'.concat(Tn("title"),`">
      Iframe
      <div class="`).concat(Tn("btn refresh-iframe"),`">
        <span class="`).concat(Tn("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Tn("link-list"),`">
      `).concat(jt,`
    </ul>`);return this._$iframe.html(xn),this}},{key:"refreshLocalStorage",value:function(){return this._localStorage.refresh(),this}},{key:"refreshSessionStorage",value:function(){return this._sessionStorage.refresh(),this}},{key:"refreshCookie",value:function(){return this._cookie.refresh(),this}},{key:"refreshImage",value:function(){var Ze=[],jt=this._performance=window.webkitPerformance||window.performance;jt&&jt.getEntries?this._performance.getEntries().forEach(function($r){if($r.initiatorType==="img"||go($r.name)){if(Oe()($r.name,"exclude=true"))return;Ze.push($r.name)}}):re()("img").each(function(){var $r=re()(this),li=$r.attr("src");$r.data("exclude")!=="true"&&Ze.push(li)}),(Ze=Fa()(Ze)).sort();var xn=vc("image",Ze.length),gr="<li>Empty</li>";_i()(Ze)||(gr=Br()(Ze,function($r){return'<li class="'.concat(Tn("image"),`">
          <img src="`).concat(fi()($r),'" data-exclude="true" class="').concat(Tn("img-link"),`"/>
        </li>`)}).join(""));var Ir='<h2 class="'.concat(Tn("title"),`">
      Image
      <div class="`).concat(Tn("btn refresh-image"),`">
        <span class="`).concat(Tn("icon-refresh"),`"></span>
      </div>
    </h2>
    <ul class="`).concat(Tn("image-list"),`">
      `).concat(gr,`
    </ul>`),Dr=this._$image;return Ql(Dr,xn),Dr.html(Ir),this}},{key:"show",value:function(){return jo(Yn,"show",this,3)([]),this._observeElement&&this._enableObserver(),this.refresh()}},{key:"hide",value:function(){return this._disableObserver(),jo(Yn,"hide",this,3)([])}},{key:"_initTpl",value:function(){var Ze=this._$el;Ze.html(Tn(`<div class="section local-storage"></div>
      <div class="section session-storage"></div>
      <div class="section cookie"></div>
      <div class="section script"></div>
      <div class="section stylesheet"></div>
      <div class="section iframe"></div>
      <div class="section image"></div>`)),this._$localStorage=Ze.find(Tn(".local-storage")),this._$sessionStorage=Ze.find(Tn(".session-storage")),this._$cookie=Ze.find(Tn(".cookie")),this._$script=Ze.find(Tn(".script")),this._$stylesheet=Ze.find(Tn(".stylesheet")),this._$iframe=Ze.find(Tn(".iframe")),this._$image=Ze.find(Tn(".image"))}},{key:"_bindEvent",value:function(){var Ze=this,jt=this._$el,xn=this._container;function gr(Dr,$r){var li=xn.get("sources");if(li)return li.set(Dr,$r),xn.showTool("sources"),!0}function Ir(Dr){return function($r){if(xn.get("sources")){$r.preventDefault();var li=re()(this).attr("href");Dr!=="iframe"&&dd()(location.href,li)?wu()({url:li,success:function(Li){gr(Dr,Li)},dataType:"raw"}):gr("iframe",li)}}}jt.on("click",".eruda-refresh-script",function(){xn.notify("Refreshed",{icon:"success"}),Ze.refreshScript()}).on("click",".eruda-refresh-stylesheet",function(){xn.notify("Refreshed",{icon:"success"}),Ze.refreshStylesheet()}).on("click",".eruda-refresh-iframe",function(){xn.notify("Refreshed",{icon:"success"}),Ze.refreshIframe()}).on("click",".eruda-refresh-image",function(){xn.notify("Refreshed",{icon:"success"}),Ze.refreshImage()}).on("click",".eruda-img-link",function(){gr("img",re()(this).attr("src"))}).on("click",".eruda-css-link",Ir("css")).on("click",".eruda-js-link",Ir("js")).on("click",".eruda-iframe-link",Ir("iframe"))}},{key:"_rmCfg",value:function(){var Ze=this.config,jt=this._container.get("settings");jt&&jt.remove(Ze,"hideErudaSetting").remove(Ze,"observeElement").remove("Resources")}},{key:"_initCfg",value:function(){var Ze=this,jt=this.config=kn.createCfg("resources",{hideErudaSetting:!0,observeElement:!0});jt.get("hideErudaSetting")&&(this._hideErudaSetting=!0),jt.get("observeElement")||(this._observeElement=!1),jt.on("change",function(xn,gr){switch(xn){case"hideErudaSetting":return void(Ze._hideErudaSetting=gr);case"observeElement":return Ze._observeElement=gr,gr?Ze._enableObserver():Ze._disableObserver()}}),this._container.get("settings").text("Resources").switch(jt,"hideErudaSetting","Hide Eruda Setting").switch(jt,"observeElement","Auto Refresh Elements").separator()}},{key:"_initObserver",value:function(){var Ze=this;this._observer=new(Ao())(function(jt){ve()(jt,function(xn){Ze._handleMutation(xn)})})}},{key:"_handleMutation",value:function(Ze){var jt=this;if(!Ar(Ze.target)){var xn=function($r){var li=function(Li){return Li.tagName?Li.tagName.toLowerCase():""}($r);switch(li){case"script":jt.refreshScript();break;case"img":jt.refreshImage();break;case"link":jt.refreshStylesheet()}};if(Ze.type==="attributes")xn(Ze.target);else if(Ze.type==="childList"){xn(Ze.target);var gr,Ir=Hc()(Ze.addedNodes),Dr=kl(Ir=Tu()(Ir,Hc()(Ze.removedNodes)));try{for(Dr.s();!(gr=Dr.n()).done;)xn(gr.value)}catch($r){Dr.e($r)}finally{Dr.f()}}}}},{key:"_enableObserver",value:function(){this._observer.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}},{key:"_disableObserver",value:function(){this._observer.disconnect()}}])}(oe),md=/\.(jpeg|jpg|gif|png)$/,go=function(En){return md.test(En)},Gd=v(6620),tl=v.n(Gd),Jl=tl()(),_l=[{name:"Location",val:function(){return fi()(location.href)}},{name:"User Agent",val:navigator.userAgent},{name:"Device",val:["<table><tbody>",'<tr><td class="eruda-device-key">screen</td><td>'.concat(screen.width," * ").concat(screen.height,"</td></tr>"),"<tr><td>viewport</td><td>".concat(window.innerWidth," * ").concat(window.innerHeight,"</td></tr>"),"<tr><td>pixel ratio</td><td>".concat(window.devicePixelRatio,"</td></tr>"),"</tbody></table>"].join("")},{name:"System",val:["<table><tbody>",'<tr><td class="eruda-system-key">os</td><td>'.concat(so()(),"</td></tr>"),"<tr><td>browser</td><td>".concat(Jl.name+" "+Jl.version,"</td></tr>"),"</tbody></table>"].join("")},{name:"Sponsor this Project",val:function(){return"<table><tbody>"+Br()([{name:"Open Collective",link:"https://opencollective.com/eruda"},{name:"Ko-fi",link:"https://ko-fi.com/surunzi"},{name:"Wechat Pay",link:"https://surunzi.com/wechatpay.html"}],function(En){return"<tr><td>".concat(En.name,'</td><td><a rel="noreferrer noopener" href="').concat(En.link,'" target="_blank">').concat(En.link.replace("https://",""),"</a></td></tr>")}).join(" ")+"</tbody></table>"}},{name:"About",val:'<a href="https://eruda.liriliri.io" target="_blank">Eruda v3.4.3</a>'}],Ru=v(1034),$c=v.n(Ru);function ks(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ks=function(){return!!En})()}function Mu(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var qs=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),(Ze=(0,w.A)(jt,ks()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)))._style=pr(v(4657)),Ze.name="info",Ze._infos=[],Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze,jt){Mu(Yn,"init",this)([Ze]),this._container=jt,this._addDefInfo(),this._bindEvent()}},{key:"destroy",value:function(){Mu(Yn,"destroy",this)([]),pr.remove(this._style)}},{key:"add",value:function(Ze,jt){var xn=this._infos,gr=!1;return ve()(xn,function(Ir){Ze===Ir.name&&(Ir.val=jt,gr=!0)}),gr||xn.push({name:Ze,val:jt}),this._render(),this}},{key:"get",value:function(Ze){var jt,xn=this._infos;return Ci()(Ze)?$c()(xn):(ve()(xn,function(gr){Ze===gr.name&&(jt=gr.val)}),jt)}},{key:"remove",value:function(Ze){for(var jt=this._infos,xn=jt.length-1;xn>=0;xn--)jt[xn].name===Ze&&jt.splice(xn,1);return this._render(),this}},{key:"clear",value:function(){return this._infos=[],this._render(),this}},{key:"_addDefInfo",value:function(){var Ze=this;ve()(_l,function(jt){return Ze.add(jt.name,jt.val)})}},{key:"_render",value:function(){var Ze=[];ve()(this._infos,function(xn){var gr=xn.name,Ir=xn.val;Or()(Ir)&&(Ir=Ir()),Ze.push({name:gr,val:Ir})});var jt="<ul>".concat(Br()(Ze,function(xn){return'<li><h2 class="'.concat(Tn("title"),'">').concat(fi()(xn.name),'<span class="').concat(Tn("icon-copy copy"),'"></span></h2><div class="').concat(Tn("content"),'">').concat(xn.val,"</div></li>")}).join(""),"</ul>");this._renderHtml(jt)}},{key:"_bindEvent",value:function(){var Ze=this._container;this._$el.on("click",Tn(".copy"),function(){var jt=re()(this).parent().parent(),xn=jt.find(Tn(".title")).text(),gr=jt.find(Tn(".content")).text();Ki()("".concat(xn,": ").concat(gr)),Ze.notify("Copied",{icon:"success"})})}},{key:"_renderHtml",value:function(Ze){Ze!==this._lastHtml&&(this._lastHtml=Ze,this._$el.html(Ze))}}])}(oe),Zs=v(6911),Lo=v(894),Iu=v.n(Lo),Wc=v(4249),Nl=v.n(Wc),Kc=v(1714);function nl(){try{var En=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nl=function(){return!!En})()}function Yc(En,Yn,Ze,jt){var xn=(0,ee.A)((0,T.A)(En.prototype),Yn,Ze);return typeof xn=="function"?function(gr){return xn.apply(Ze,gr)}:xn}var xc=function(En){function Yn(){var Ze,jt,xn,gr;return(0,A.A)(this,Yn),jt=this,xn=Yn,xn=(0,T.A)(xn),(Ze=(0,w.A)(jt,nl()?Reflect.construct(xn,[],(0,T.A)(jt).constructor):xn.apply(jt,gr)))._style=pr(v(4831)),Ze.name="sources",Ze._showLineNum=!0,Ze}return(0,R.A)(Yn,En),(0,C.A)(Yn,[{key:"init",value:function(Ze,jt){Yc(Yn,"init",this)([Ze]),this._container=jt,this._bindEvent(),this._initCfg()}},{key:"destroy",value:function(){Yc(Yn,"destroy",this)([]),pr.remove(this._style),this._rmCfg()}},{key:"set",value:function(Ze,jt){if(Ze==="img"){this._isFetchingData=!0;var xn=new Image,gr=this;return xn.onload=function(){gr._isFetchingData=!1,gr._data={type:"img",val:{width:this.width,height:this.height,src:jt}},gr._render()},xn.onerror=function(){gr._isFetchingData=!1},void(xn.src=jt)}return this._data={type:Ze,val:jt},this._render(),this}},{key:"show",value:function(){return Yc(Yn,"show",this)([]),this._data||this._isFetchingData||this._renderDef(),this}},{key:"_renderDef",value:function(){var Ze=this;if(this._html)return this._data={type:"html",val:this._html},this._render();this._isGettingHtml||(this._isGettingHtml=!0,wu()({url:location.href,success:function(jt){return Ze._html=jt},error:function(){return Ze._html="Sorry, unable to fetch source code:("},complete:function(){Ze._isGettingHtml=!1,Ze._renderDef()},dataType:"raw"}))}},{key:"_bindEvent",value:function(){var Ze=this;this._container.on("showTool",function(jt,xn){jt!==Ze.name&&xn.name===Ze.name&&delete Ze._data})}},{key:"_rmCfg",value:function(){var Ze=this.config,jt=this._container.get("settings");jt&&jt.remove(Ze,"showLineNum").remove("Sources")}},{key:"_initCfg",value:function(){var Ze=this,jt=this.config=kn.createCfg("sources",{showLineNum:!0});jt.get("showLineNum")||(this._showLineNum=!1),jt.on("change",function(xn,gr){xn!=="showLineNum"||(Ze._showLineNum=gr)}),this._container.get("settings").text("Sources").switch(jt,"showLineNum","Show Line Numbers").separator()}},{key:"_render",value:function(){switch(this._isInit=!0,this._data.type){case"html":case"js":case"css":return this._renderCode();case"img":return this._renderImg();case"object":return this._renderObj();case"raw":return this._renderRaw();case"iframe":return this._renderIframe()}}},{key:"_renderImg",value:function(){var Ze=this._data.val,jt=Ze.width,xn=Ze.height,gr=Ze.src;this._renderHtml('<div class="'.concat(Tn("image"),`">
      <div class="`).concat(Tn("breadcrumb"),'">').concat(fi()(gr),`</div>
      <div class="`).concat(Tn("img-container"),`" data-exclude="true">
        <img src="`).concat(fi()(gr),`">
      </div>
      <div class="`).concat(Tn("img-info"),'">').concat(fi()(jt),"  ").concat(fi()(xn),`</div>
    </div>`))}},{key:"_renderCode",value:function(){var Ze=this._data;this._renderHtml('<div class="'.concat(Tn("code"),'" data-type="').concat(Ze.type,'"></div>'),!1);var jt=Ze.val,xn=Ze.val.length;xn>$s&&(jt=Gi()(jt,$s)),xn<Pl?(jt=Nl()(jt,Ze.type,{comment:"",string:"",number:"",keyword:"",operator:""}),ve()(["comment","string","number","keyword","operator"],function(Ir){jt=Iu()(jt,'class="'.concat(Ir,'"'),'class="'.concat(Tn(Ir),'"'))})):jt=fi()(jt);var gr=this._$el.find(Tn(".code")).get(0);new Kc.A(gr,{text:jt,escape:!1,wrapLongLines:!0,showLineNumbers:Ze.val.length<ku&&this._showLineNum})}},{key:"_renderObj",value:function(){this._renderHtml('<ul class="'.concat(Tn("json"),'"></ul>'),!1);var Ze=this._data.val;try{De()(Ze)&&(Ze=JSON.parse(Ze))}catch{}new Zs.A(this._$el.find(".eruda-json").get(0),{unenumerable:!0,accessGetter:!0,prototype:!1}).set(Ze)}},{key:"_renderRaw",value:function(){var Ze=this._data;this._renderHtml('<div class="'.concat(Tn("raw-wrapper"),`">
      <div class="`).concat(Tn("raw"),`"></div>
    </div>`));var jt=Ze.val,xn=this._$el.find(Tn(".raw")).get(0);jt.length>$s&&(jt=Gi()(jt,$s)),new Kc.A(xn,{text:jt,wrapLongLines:!0,showLineNumbers:jt.length<ku&&this._showLineNum})}},{key:"_renderIframe",value:function(){this._renderHtml('<iframe src="'.concat(fi()(this._data.val),'"></iframe>'))}},{key:"_renderHtml",value:function(Ze){var jt=this;(!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])&&Ze===this._lastHtml||(this._lastHtml=Ze,this._$el.html(Ze),setTimeout(function(){return jt._$el.get(0).scrollTop=0},0))}}])}(oe),Pl=3e4,ku=8e4,$s=1e5,Xc=v(9760),gs=v.n(Xc),gd=v(1505),Os=v.n(gd),Bl=v(5701),Qc=v.n(Bl),Nu={init:function(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Yn=En.container,Ze=En.tool,jt=En.autoScale,xn=jt===void 0||jt,gr=En.useShadowDom,Ir=gr===void 0||gr,Dr=En.inline,$r=Dr!==void 0&&Dr,li=En.defaults,Li=li===void 0?{}:li;this._isInit||(this._isInit=!0,this._scale=1,this._initContainer(Yn,Ir),this._initStyle(),this._initDevTools(Li,$r),this._initEntryBtn(),this._initSettings(),this._initTools(Ze),this._registerListener(),xn&&this._autoScale(),$r&&(this._entryBtn.hide(),this._$el.addClass("eruda-inline"),this.show()))},_isInit:!1,version:"3.4.3",util:{isErudaEl:Ar,evalCss:pr,isDarkTheme:function(En){return En||(En=this.getTheme()),Jn(En)},getTheme:function(){var En=pr.getCurTheme(),Yn="Light";return ve()(Nn,function(Ze,jt){Qc()(Ze,En)&&(Yn=jt)}),Yn}},chobitsu:ha,Tool:oe,Console:ar,Elements:hc,Network:Xi,Sources:xc,Resources:co,Info:qs,Snippets:Vo,Settings:kn,get:function(En){if(this._checkInit()){if(En==="entryBtn")return this._entryBtn;var Yn=this._devTools;return En?Yn.get(En):Yn}},add:function(En){if(this._checkInit())return Or()(En)&&(En=En(this)),this._devTools.add(En),this},remove:function(En){return this._devTools.remove(En),this},show:function(En){if(this._checkInit()){var Yn=this._devTools;return En?Yn.showTool(En):Yn.show(),this}},hide:function(){if(this._checkInit())return this._devTools.hide(),this},destroy:function(){this._devTools.destroy(),delete this._devTools,this._entryBtn.destroy(),delete this._entryBtn,this._unregisterListener(),re()(this._container).remove(),pr.clear(),this._isInit=!1,this._container=null,this._shadowRoot=null},scale:function(En){return Hn()(En)?(this._scale=En,Y.emit(Y.SCALE,En),this):this._scale},position:function(En){var Yn=this._entryBtn;return gs()(En)?(Yn.setPos(En),this):Yn.getPos()},_autoScale:function(){Xr()()&&this.scale(1/Os()())},_registerListener:function(){var En=this;this._addListener=function(){return En.add.apply(En,arguments)},this._showListener=function(){return En.show.apply(En,arguments)},Y.on(Y.ADD,this._addListener),Y.on(Y.SHOW,this._showListener),Y.on(Y.SCALE,pr.setScale)},_unregisterListener:function(){Y.off(Y.ADD,this._addListener),Y.off(Y.SHOW,this._showListener),Y.off(Y.SCALE,pr.setScale)},_checkInit:function(){return this._isInit||An.error('Please call "eruda.init()" first'),this._isInit},_initContainer:function(En,Yn){var Ze,jt;En||(En=document.createElement("div"),document.documentElement.appendChild(En)),En.id="eruda",En.style.all="initial",this._container=En,Yn&&(En.attachShadow?Ze=En.attachShadow({mode:"open"}):En.createShadowRoot&&(Ze=En.createShadowRoot()),Ze&&(pr.container=document.head,pr(v(6793)+v(7853)+v(9907)+v(879)+v(1107)+v(5259)),jt=document.createElement("div"),Ze.appendChild(jt),this._shadowRoot=Ze)),this._shadowRoot||(jt=document.createElement("div"),En.appendChild(jt)),Lt()(jt,{className:"eruda-container __chobitsu-hide__",contentEditable:!1}),tl()().name==="ios"&&jt.setAttribute("ontouchstart",""),this._$el=re()(jt)},_initDevTools:function(En,Yn){this._devTools=new Lr(this._$el,{defaults:En,inline:Yn})},_initStyle:function(){var En="eruda-style-container",Yn=this._$el;this._shadowRoot?(pr.container=this._shadowRoot,pr(":host { all: initial }")):(Yn.append('<div class="'.concat(En,'"></div>')),pr.container=Yn.find(".".concat(En)).get(0)),pr(v(2693)+v(9907)+v(7853)+v(5259)+v(3277)+v(879)+v(4393)+v(7253)+v(1107)+v(187)+v(1277)+v(8687)+v(6793))},_initEntryBtn:function(){var En=this;this._entryBtn=new rr(this._$el),this._entryBtn.on("click",function(){return En._devTools.toggle()})},_initSettings:function(){var En=this._devTools,Yn=new kn;En.add(Yn),this._entryBtn.initCfg(Yn),En.initCfg(Yn)},_initTools:function(){var En=this,Yn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["console","elements","network","resources","sources","info","snippets"];Yn=Hc()(Yn);var Ze=this._devTools;Yn.forEach(function(jt){var xn=En[ln()(jt)];try{xn&&Ze.add(new xn)}catch(gr){dr()(function(){An.error("Something wrong when initializing tool ".concat(jt,":"),gr.message)})}}),Ze.showTool(Yn[0]||"settings")}}},4236:function(_,d){d=function(v){return v===null},_.exports=d},4249:function(_,d,v){var A=v(9100),C=v(5651);d=function(R){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"js",I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};C(I,w),R=R.replace(/</g,"&lt;").replace(/>/g,"&gt;"),G=T[G];var z=0,H=[];A(G,function(ee){ee.language&&(R=R.replace(ee.re,function(ie,oe){return oe?(H[z++]=d(oe,ee.language,I),ie.replace(oe,"___subtmpl"+(z-1)+"___")):ie}))}),A(G,function(ee,ie){T[ee.language]||(R=R.replace(ee.re,"___"+ie+"___$1___end"+ie+"___"))});var Y=[];return R=R.replace(/___(?!subtmpl)\w+?___/g,function(ee){var ie=ee.substr(3,3)==="end",oe=(ie?ee.substr(6):ee.substr(3)).replace(/_/g,""),se=Y.length>0?Y[Y.length-1]:null;return!ie&&(se==null||oe==se||se!=null&&G[se]&&G[se].embed!=null&&G[se].embed.indexOf(oe)>-1)?(Y.push(oe),ee):ie&&oe==se?(Y.pop(),ee):""}),A(G,function(ee,ie){var oe=I[ee.style]?' style="'.concat(I[ee.style],'"'):"";R=R.replace(new RegExp("___end"+ie+"___","g"),"</span>").replace(new RegExp("___"+ie+"___","g"),'<span class="'.concat(ee.style,'"').concat(oe,">"))}),A(G,function(ee){ee.language&&(R=R.replace(/___subtmpl\d+___/g,function(ie){var oe=parseInt(ie.replace(/___subtmpl(\d+)___/,"$1"),10);return H[oe]}))}),R};var w={comment:"color:#63a35c;",string:"color:#183691;",number:"color:#0086b3;",keyword:"color:#a71d5d;",operator:"color:#994500;"},T={js:{comment:{re:/(\/\/.*|\/\*([\s\S]*?)\*\/)/g,style:"comment"},string:{re:/(('.*?')|(".*?"))/g,style:"string"},numbers:{re:/(-?(\d+|\d+\.\d+|\.\d+))/g,style:"number"},keywords:{re:/(?:\b)(function|for|foreach|while|if|else|elseif|switch|break|as|return|this|class|self|default|var|const|let|false|true|null|undefined)(?:\b)/gi,style:"keyword"},operator:{re:/(\+|-|\/|\*|%|=|&lt;|&gt;|\||\?|\.)/g,style:"operator"}}};T.html={comment:{re:/(&lt;!--([\s\S]*?)--&gt;)/g,style:"comment"},tag:{re:/(&lt;\/?\w(.|\n)*?\/?&gt;)/g,style:"keyword",embed:["string"]},string:T.js.string,css:{re:/(?:&lt;style.*?&gt;)([\s\S]*)?(?:&lt;\/style&gt;)/gi,language:"css"},script:{re:/(?:&lt;script.*?&gt;)([\s\S]*?)(?:&lt;\/script&gt;)/gi,language:"js"}},T.css={comment:T.js.comment,string:T.js.string,numbers:{re:/((-?(\d+|\d+\.\d+|\.\d+)(%|px|em|pt|in)?)|#[0-9a-fA-F]{3}[0-9a-fA-F]{3})/g,style:"number"},keywords:{re:/(@\w+|:?:\w+|[a-z-]+:)/g,style:"keyword"}},_.exports=d},4279:function(_,d,v){(d=v(6314)(!1)).push([_.id,"#_settings{overflow-y:auto;-webkit-overflow-scrolling:touch}._safe-area #_settings{padding-bottom:calc(0px + env(safe-area-inset-bottom))}",""]),_.exports=d},4307:function(_,d,v){var A=v(2263),C=v(2767),w=v(9100),T=v(438),R=v(9405),G=v(3915),I=v(3957);d={on:function(oe,se,re){I(se)&&(re=se,se={}),oe=oe.split(ee),w(oe,function(fe){if(fe=Y(fe),se.element){var ue=se.element,ge=ue._hotkeyListeners||{};ue._hotkeyListeners=ge,ge[fe]=ge[fe]||[];var ye=function(be){fe===H(be)&&re(be)};ge[fe].push({listener:ye,origin:re}),ue.addEventListener("keydown",ye)}else z.on(fe,re)})},off:function(oe,se,re){I(se)&&(re=se,se={}),oe=oe.split(ee),w(oe,function(fe){if(fe=Y(fe),se.element){var ue=se.element,ge=ue._hotkeyListeners;if(ge&&ge[fe]){for(var ye,be=ge[fe],ve=0,Me=be.length;ve<Me;ve++)be[ve].origin===re&&(ye=be[ve].listener,be.splice(ve,1));ye&&ue.removeEventListener("keydown",ye)}}else z.off(fe,re)})}};var z=new A;function H(oe){var se=[];return oe.ctrlKey&&se.push("ctrl"),oe.shiftKey&&se.push("shift"),se.push(C(oe.keyCode)),Y(se.join("+"))}function Y(oe){var se=oe.split(ie);return se=G(se,function(re){return R(re)}),(se=T(se)).sort(),se.join("+")}document.addEventListener("keydown",function(oe){z.emit(H(oe),oe)});var ee=/,/g,ie=/\+/g;_.exports=d},4393:function(_,d,v){(d=v(6314)(!1)).push([_.id,`@font-face{font-family:luna-modal-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==') format('woff')}[class*=' luna-modal-icon-'],[class^=luna-modal-icon-]{display:inline-block;font-family:luna-modal-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-modal-icon-close:before{content:'\\f101'}.luna-modal{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-modal .luna-modal-hidden,.luna-modal.luna-modal-hidden{display:none}.luna-modal .luna-modal-invisible,.luna-modal.luna-modal-invisible{visibility:hidden}.luna-modal *{box-sizing:border-box}.luna-modal.luna-modal-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-modal{background:rgba(0,0,0,.5)}.luna-modal-icon-close{position:absolute;right:16px;top:18px;cursor:pointer;font-size:20px}.luna-modal-body{position:relative;max-height:100%;display:flex;flex-direction:column;border-radius:4px;border:1px solid}.luna-modal-body.luna-modal-no-title{position:static}.luna-modal-body.luna-modal-no-title .luna-modal-title{display:none}.luna-modal-body.luna-modal-no-title .luna-modal-icon-close{color:#fff}.luna-modal-body.luna-modal-no-footer .luna-modal-footer{display:none}.luna-modal-hidden{display:none}.luna-modal-title{padding:16px;padding-right:36px;padding-bottom:0;font-size:18px;height:46px;box-sizing:border-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:0}.luna-modal-content{padding:16px;overflow-y:auto}.luna-modal-footer{flex-shrink:0;padding:12px}.luna-modal-button-group{display:flex;justify-content:flex-end}.luna-modal-button{padding:0 12px;cursor:default;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin:0 4px;font-size:12px;border-radius:4px;overflow:hidden;height:28px;line-height:28px}.luna-modal-button:active::before{content:"";opacity:.4;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.luna-modal-button.luna-modal-secondary{border:1px solid}.luna-modal-button.luna-modal-primary{color:#fff}.luna-modal-input{box-sizing:border-box;outline:0;width:100%;font-size:16px;padding:6px 12px;border:1px solid;-webkit-appearance:none;-moz-appearance:none}.luna-modal-theme-light .luna-modal-body{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-modal-theme-light .luna-modal-button{background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-modal-theme-light .luna-modal-button:active::before{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-modal-theme-light .luna-modal-button.luna-modal-secondary{color:#1a73e8;color:var(--luna-color-primary,#1a73e8);border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-modal-theme-light .luna-modal-button.luna-modal-primary{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-modal-theme-light .luna-modal-input{background-color:#fff;background-color:var(--luna-color-bg-container,#fff);color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-modal-theme-dark .luna-modal-body{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-modal-theme-dark .luna-modal-button{background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-modal-theme-dark .luna-modal-button:active::before{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}.luna-modal-theme-dark .luna-modal-button.luna-modal-secondary{color:#1965c8;color:var(--luna-color-primary,#1965c8);border-color:#424242;border-color:var(--luna-color-border,#424242);background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-modal-theme-dark .luna-modal-button.luna-modal-primary{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}.luna-modal-theme-dark .luna-modal-input{background-color:#141414;background-color:var(--luna-color-bg-container,#141414);color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));border-color:#424242;border-color:var(--luna-color-border,#424242)}`,""]),_.exports=d},4433:function(_,d){var v=document;if(d=function(C){var w=v.createElement("body");return w.innerHTML=C,w.childNodes[0]},v.createRange&&v.body){var A=v.createRange();A.selectNode(v.body),A.createContextualFragment&&(d=function(C){return A.createContextualFragment(C).childNodes[0]})}_.exports=d},4460:function(_,d,v){var A=v(3957);d=typeof wx<"u"&&A(wx.openLocation),_.exports=d},4467:function(_,d,v){v.d(d,{A:function(){return C}});var A=v(816);function C(w,T,R){return(T=(0,A.A)(T))in w?Object.defineProperty(w,T,{value:R,enumerable:!0,configurable:!0,writable:!0}):w[T]=R,w}},4497:function(_,d,v){var A=v(6032);d=function(C,w){return C=new A(C),w=new A(w),C.port=0|C.port||(C.protocol==="https"?443:80),w.port=0|w.port||(w.protocol==="https"?443:80),C.protocol===w.protocol&&C.hostname===w.hostname&&C.port===w.port},_.exports=d},4534:function(_,d){d=function(v,A,C){var w;return function(){var T=this,R=arguments;C||clearTimeout(w),C&&w||(w=setTimeout(function(){w=null,v.apply(T,R)},A))}},_.exports=d},4657:function(_,d,v){(d=v(6314)(!1)).push([_.id,"#_info{overflow-y:auto;-webkit-overflow-scrolling:touch}#_info li{margin:10px;border:1px solid var(--border)}#_info li ._content,#_info li ._title{padding:10px}#_info li ._title{position:relative;padding-bottom:0;color:var(--accent)}#_info li ._title ._icon-copy{position:absolute;right:10px;top:14px;color:var(--primary);cursor:pointer;transition:color .3s}#_info li ._title ._icon-copy:active{color:var(--accent)}#_info li ._content{margin:0;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;color:var(--foreground);font-size:12px;word-break:break-all}#_info li ._content table{width:100%;border-collapse:collapse}#_info li ._content table td,#_info li ._content table th{border:1px solid var(--border);padding:10px}#_info li ._content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_info li ._content a{color:var(--link-color)}#_info li ._device-key,#_info li ._system-key{width:100px}._safe-area #_info{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),_.exports=d},4725:function(_,d,v){var A=this&&this.__importDefault||function(fe){return fe&&fe.__esModule?fe:{default:fe}};Object.defineProperty(d,"__esModule",{value:!0}),d.resetCanvasSize=d.getPlatform=d.pxToNum=d.executeAfterTransition=d.hasVerticalScrollbar=d.measuredScrollbarWidth=d.eventPage=d.eventClient=d.drag=d.classPrefix=void 0;var C=A(v(3915)),w=A(v(9405)),T=A(v(5169)),R=A(v(9548)),G=A(v(6097)),I=A(v(3249)),z=A(v(6030)),H=A(v(5004)),Y=A(v(8609));function ee(fe,ue){for(var ge=0,ye=fe.length;ge<ye;ge++){var be=fe[ge];ue(be),be.content&&ee(be.content,ue)}}d.classPrefix=function(fe){var ue="luna-".concat(fe,"-");function ge(ye){return(0,C.default)((0,w.default)(ye).split(/\s+/),function(be){return(0,I.default)(be,ue)?be:be.replace(/[\w-]+/,function(ve){return"".concat(ue).concat(ve)})}).join(" ")}return function(ye){if(/<[^>]*>/g.test(ye))try{var be=R.default.parse(ye);return ee(be,function(ve){ve.attrs&&ve.attrs.class&&(ve.attrs.class=ge(ve.attrs.class))}),R.default.stringify(be)}catch{return ge(ye)}return ge(ye)}};var ie,oe="ontouchstart"in T.default,se={start:"touchstart",move:"touchmove",end:"touchend"},re={start:"mousedown",move:"mousemove",end:"mouseup"};d.drag=function(fe){return oe?se[fe]:re[fe]},d.eventClient=function(fe,ue){var ge=fe==="x"?"clientX":"clientY";return ue[ge]?ue[ge]:ue.changedTouches?ue.changedTouches[0][ge]:0},d.eventPage=function(fe,ue){var ge=fe==="x"?"pageX":"pageY";return ue[ge]?ue[ge]:ue.changedTouches?ue.changedTouches[0][ge]:0},d.measuredScrollbarWidth=function(){if((0,G.default)(ie))return ie;if(!document)return 16;var fe=document.createElement("div"),ue=document.createElement("div");return fe.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),ue.setAttribute("style","height: 200px"),fe.appendChild(ue),document.body.appendChild(fe),ie=fe.offsetWidth-fe.clientWidth,document.body.removeChild(fe),ie},d.hasVerticalScrollbar=function(fe){return fe.scrollHeight>fe.offsetHeight},d.executeAfterTransition=function(fe,ue){if((0,Y.default)(fe))return ue();var ge=function(ye){ye.target===fe&&(fe.removeEventListener("transitionend",ge),ue())};fe.addEventListener("transitionend",ge)},d.pxToNum=function(fe){return(0,z.default)(fe.replace("px",""))},d.getPlatform=function(){var fe=(0,H.default)();return fe==="os x"?"mac":fe},d.resetCanvasSize=function(fe){fe.width=Math.round(fe.offsetWidth*window.devicePixelRatio),fe.height=Math.round(fe.offsetHeight*window.devicePixelRatio)}},4801:function(_,d,v){var A=v(4950),C=v(2989),w=v(2561),T=v(1580),R=v(1168),G=v(3145),I=v(9100),z=v(2717),H=v(5427),Y=v(466),ee=v(8105),ie=v(8796),oe=v(2571),se=v(3981),re=v(7514),fe=v(3249),ue=v(9760),ge=v(4460),ye=v(6513),be=v(1009),ve=v(2806),Me=v(4151),we=v(896),Be=v(5793);function De(Xe,$e,We,nt){var Qt=[];return I($e,function(Wt){var Bn,Lt=Object.getOwnPropertyDescriptor(We,Wt),Mn=Lt&&Lt.get,cr=Lt&&Lt.set;if(!nt.accessGetter&&Mn)Bn="(...)";else try{if(Bn=We[Wt],fe(nt.ignore,Bn))return;ie(Bn)&&Bn.catch(function(){})}catch(In){Bn=In.message}Qt.push("".concat(Fe(Wt),":").concat(d(Bn,nt))),Mn&&Qt.push("".concat(Fe("get "+w(Wt)),":").concat(d(Lt.get,nt))),cr&&Qt.push("".concat(Fe("set "+w(Wt)),":").concat(d(Lt.set,nt)))}),'"'.concat(Xe,'":{')+Qt.join(",")+"}"}function Fe(Xe){return'"'.concat(Ge(Xe),'"')}function Oe(Xe){return'"'.concat(Ge(w(Xe)),'"')}function Ge(Xe){return A(Xe).replace(/\\'/g,"'").replace(/\t/g,"\\t")}d=function(Xe){var $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},We=$e.self,nt=$e.startTime,Qt=nt===void 0?se():nt,Wt=$e.timeout,Bn=Wt===void 0?0:Wt,Lt=$e.depth,Mn=Lt===void 0?0:Lt,cr=$e.curDepth,In=cr===void 0?1:cr,Zn=$e.visitor,$n=Zn===void 0?new ze:Zn,Rn=$e.unenumerable,Dn=Rn!==void 0&&Rn,Gt=$e.symbol,Jn=Gt!==void 0&&Gt,Nn=$e.accessGetter,Xn=Nn!==void 0&&Nn,jn=$e.ignore,Un=jn===void 0?[]:jn,bn="",Kn={visitor:$n,unenumerable:Dn,symbol:Jn,accessGetter:Xn,depth:Mn,curDepth:In+1,timeout:Bn,startTime:Qt,ignore:Un},Qn=C(Xe,!1);if(Qn==="String")bn=Oe(Xe);else if(Qn==="Number")bn=w(Xe),T(bn,"Infinity")&&(bn='{"value":"'.concat(bn,'","type":"Number"}'));else if(Qn==="NaN")bn='{"value":"NaN","type":"Number"}';else if(Qn==="Boolean")bn=Xe?"true":"false";else if(Qn==="Null")bn="null";else if(Qn==="Undefined")bn='{"type":"Undefined"}';else if(Qn==="Symbol"){var pr="Symbol";try{pr=w(Xe)}catch{}bn='{"value":'.concat(Oe(pr),',"type":"Symbol"}')}else{if(Bn&&se()-Qt>Bn)return Oe("Timeout");if(Mn&&In>Mn)return Oe("{...}");bn="{";var fn,Mt=[],yn=$n.get(Xe);if(yn?(fn=yn.id,Mt.push('"reference":'.concat(fn))):(fn=$n.set(Xe),Mt.push('"id":'.concat(fn))),Mt.push('"type":"'.concat(Qn,'"')),T(Qn,"Function")?Mt.push('"value":'.concat(Oe(R(Xe)))):Qn==="RegExp"&&Mt.push('"value":'.concat(Oe(Xe))),!yn){var kn=G(Xe);if(kn.length&&Mt.push(De("enumerable",kn,We||Xe,Kn)),Dn){var nr=Y(re(Xe,{prototype:!1,unenumerable:!0}),kn);nr.length&&Mt.push(De("unenumerable",nr,We||Xe,Kn))}if(Jn){var dr=oe(re(Xe,{prototype:!1,symbol:!0}),function(Gr){return typeof Gr=="symbol"});dr.length&&Mt.push(De("symbol",dr,We||Xe,Kn))}var Qr=H(Xe);if(Qr&&!fe(Un,Qr)){var Wr='"proto":'.concat(d(Qr,ee(Kn,{self:We||Xe})));Mt.push(Wr)}}bn+=Mt.join(",")+"}"}return bn};var ze=z({initialize:function(){this.id=1,this.visited=[]},set:function(Xe){var $e=this.visited,We=this.id,nt={id:We,val:Xe};return $e.push(nt),this.id++,We},get:function(Xe){for(var $e=this.visited,We=0,nt=$e.length;We<nt;We++){var Qt=$e[We];if(Xe===Qt.val)return Qt}return!1}});function je(Xe,$e){var We=$e.map;if(!ue(Xe))return Xe;var nt=Xe.id,Qt=Xe.type,Wt=Xe.value,Bn=Xe.proto,Lt=Xe.reference,Mn=Xe.enumerable,cr=Xe.unenumerable;if(Lt)return Xe;if(Qt==="Number")return Wt==="Infinity"?Number.POSITIVE_INFINITY:Wt==="-Infinity"?Number.NEGATIVE_INFINITY:NaN;if(Qt!=="Undefined"){var In,Zn,$n;if(Qt==="Function")(In=function(){}).toString=function(){return Wt},Bn&&Object.setPrototypeOf(In,je(Bn,$e));else if(Qt==="RegExp")$n=(Zn=Wt).lastIndexOf("/"),In=new RegExp(Zn.slice(1,$n),Zn.slice($n+1));else{var Rn;Qt!=="Object"?(Rn=ge?function(){}:new Function(Qt,""),Bn&&(Rn.prototype=je(Bn,$e)),In=new Rn):In=ye(Bn?je(Bn,$e):null)}var Dn,Gt={};return Mn&&(Be(Mn)&&(Dn=Mn.length,delete Mn.length),Mn=we(Mn,function(Nn,Xn){return!Jn(Mn,Nn,Xn)}),I(Mn,function(Nn,Xn){(Gt[Xn]||{}).get||(In[Xn]=je(Nn,$e))}),Dn&&(In.length=Dn)),cr&&(cr=we(cr,function(Nn,Xn){return!Jn(cr,Nn,Xn)}),I(cr,function(Nn,Xn){var jn=Gt[Xn]||{};if(!jn.get)if(Nn=je(Nn,$e),ue(Nn)&&Nn.reference){var Un=Nn.reference;Nn=function(){return We[Un]},jn.get=Nn}else jn.value=Nn;jn.enumerable=!1,Gt[Xn]=jn})),Me(In,Gt),We[nt]=In,In}function Jn(Nn,Xn,jn){jn=w(jn);var Un=!1;return I(["get","set"],function(bn){if(be(jn,bn+" ")){var Kn=jn.replace(bn+" ","");Nn[Kn]&&((Xn=je(Xn,$e))==="Timeout"&&(Xn=He),ve(Gt,[Kn,bn],Xn),Un=!0)}}),Un}}function He(){return"Timeout"}d.parse=function(Xe){var $e={},We=je(JSON.parse(Xe),{map:$e});return function(nt){I(nt,function(Qt){for(var Wt=G(Qt),Bn=0,Lt=Wt.length;Bn<Lt;Bn++){var Mn=Wt[Bn];if(ue(Qt[Mn])){var cr=Qt[Mn].reference;cr&&nt[cr]&&(Qt[Mn]=nt[cr])}}var In=H(Qt);In&&In.reference&&nt[In.reference]&&Object.setPrototypeOf(Qt,nt[In.reference])})}($e),We},_.exports=d},4831:function(_,d,v){(d=v(6314)(!1)).push([_.id,"#_sources{font-size:0;overflow-y:auto;-webkit-overflow-scrolling:touch;color:var(--foreground)}#_sources ._code-wrapper,#_sources ._raw-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch;width:100%;min-height:100%}#_sources ._code,#_sources ._raw{height:100%}#_sources ._code ._keyword,#_sources ._raw ._keyword{color:var(--keyword-color)}#_sources ._code ._comment,#_sources ._raw ._comment{color:var(--comment-color)}#_sources ._code ._number,#_sources ._raw ._number{color:var(--number-color)}#_sources ._code ._string,#_sources ._raw ._string{color:var(--string-color)}#_sources ._code ._operator,#_sources ._raw ._operator{color:var(--operator-color)}#_sources ._code[data-type=html] ._keyword,#_sources ._raw[data-type=html] ._keyword{color:var(--tag-name-color)}#_sources ._image{font-size:12px}#_sources ._image ._breadcrumb{background:var(--darker-background);color:var(--primary);-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;margin-bottom:10px;word-break:break-all;padding:10px;font-size:16px;min-height:40px;border-bottom:1px solid var(--border)}#_sources ._image ._img-container{text-align:center}#_sources ._image ._img-container img{max-width:100%}#_sources ._image ._img-info{text-align:center;margin:20px 0;color:var(--foreground)}#_sources ._json{padding:0 10px}#_sources ._json *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_sources iframe{width:100%;height:100%}",""]),_.exports=d},4844:function(_,d,v){var A=v(8105),C=v(9993);d=function(w,T){T=T||C;var R=document.createElement("textarea"),G=document.body;A(R.style,{fontSize:"12pt",border:"0",padding:"0",margin:"0",position:"absolute",left:"-9999px"}),R.value=w,G.appendChild(R),R.setAttribute("readonly",""),R.select(),R.setSelectionRange(0,w.length);try{document.execCommand("copy"),T()}catch(I){T(I)}finally{G.removeChild(R)}},_.exports=d},4866:function(_,d){d=function(v,A){var C=document.createElement("script");C.src=v,C.onload=function(){var w=C.readyState&&C.readyState!="complete"&&C.readyState!="loaded";A&&A(!w)},C.onerror=function(){A(!1)},document.body.appendChild(C)},_.exports=d},4950:function(_,d,v){var A=v(2561);d=function(w){return A(w).replace(C,function(T){switch(T){case'"':case"'":case"\\":return"\\"+T;case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}})};var C=/["'\\\n\r\u2028\u2029]/g;_.exports=d},4951:function(_,d){d=function(v,A,C){var w=v.length;A=A==null?0:A<0?Math.max(w+A,0):Math.min(A,w),C=C==null?w:C<0?Math.max(w+C,0):Math.min(C,w);for(var T=[];A<C;)T.push(v[A++]);return T},_.exports=d},4966:function(_,d,v){var A=v(5224);d={encode:function(se){for(var re=A.decode(se),fe="",ue=0,ge=re.length;ue<ge;ue++)fe+=ee(re[ue]);return fe},decode:function(se,re){C=A.decode(se),w=0,T=C.length,R=0,G=0,I=0,z=128,H=191;for(var fe,ue=[];(fe=ie(re))!==!1;)ue.push(fe);return A.encode(ue)}};var C,w,T,R,G,I,z,H,Y=String.fromCharCode;function ee(se){if(!(4294967168&se))return Y(se);var re,fe,ue="";for(4294965248&se?4294901760&se?4292870144&se||(re=3,fe=240):(re=2,fe=224):(re=1,fe=192),ue+=Y((se>>6*re)+fe);re>0;)ue+=Y(128|63&se>>6*(re-1)),re--;return ue}function ie(se){for(;;){if(w>=T&&I){if(se)return oe();throw new Error("Invalid byte index")}if(w===T)return!1;var re=C[w];if(w++,I){if(re<z||re>H){if(se)return w--,oe();throw new Error("Invalid continuation byte")}if(z=128,H=191,R=R<<6|63&re,++G===I){var fe=R;return R=0,I=0,G=0,fe}}else{if(!(128&re))return re;if((224&re)==192)I=1,R=31&re;else if((240&re)==224)re===224&&(z=160),re===237&&(H=159),I=2,R=15&re;else{if((248&re)!=240){if(se)return oe();throw new Error("Invalid UTF-8 detected")}re===240&&(z=144),re===244&&(H=143),I=3,R=7&re}}}}function oe(){var se=w-G-1;return w=se+1,R=0,I=0,G=0,z=128,H=191,C[se]}_.exports=d},4983:function(_,d){d=function(v){try{return JSON.parse(v),!0}catch{return!1}},_.exports=d},4992:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object ArrayBuffer]"},_.exports=d},4994:function(_,d,v){var A=v(2510);d=A(function(C,w,T){return A(function(R){return C.apply(w,T.concat(R))})}),_.exports=d},5004:function(_,d,v){var A=v(1909),C=v(621);d=function(w){function T(z){return w.indexOf(z)>-1}if(!w&&A&&(w=navigator.userAgent),w){if(w=w.toLowerCase(),T("windows phone"))return"windows phone";if(T("win"))return"windows";if(T("android"))return"android";if(T("ipad")||T("iphone")||T("ipod"))return"ios";if(T("mac"))return"os x";if(T("linux"))return"linux"}else if(C){var R=process,G=R.platform,I=R.env;if(G==="win32"||I.OSTYPE==="cygwin"||I.OSTYPE==="msys")return"windows";if(G==="darwin")return"os x";if(G==="linux")return"linux"}return"unknown"},_.exports=d},5021:function(_,d,v){var A=v(7744),C=v(1931),w=v(9464),T=v(8032),R=v(5651),G=v(9760),I=C("local");d=A.extend({initialize:function(z,H){this._name=z,H=H||{};var Y=I.getItem(z);try{Y=JSON.parse(Y)}catch{Y={}}G(Y)||(Y={}),H=R(Y,H),this.callSuper(A,"initialize",[H])},save:function(z){if(w(z))return I.removeItem(this._name);I.setItem(this._name,T(z))}}),_.exports=d},5119:function(_,d,v){var A=v(9100);d=function(C){var w=[];return A(C,function(T){w.push(T)}),w},_.exports=d},5132:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object Arguments]"},_.exports=d},5145:function(_,d,v){var A=v(9756),C=v(5651),w=v(3145),T=v(6214),R=v(9760);d=function(I){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};C(z,G);var H=z.deep,Y=z.comparator,ee=[],ie=[];return function oe(se){var re,fe=ee.indexOf(se);if(fe>-1)return ie[fe];if(T(se)){re=[],ee.push(se),ie.push(re);for(var ue=0,ge=se.length;ue<ge;ue++){var ye=se[ue];H&&R(ye)?re[ue]=oe(ye):re[ue]=ye}}else{re={},ee.push(se),ie.push(re);for(var be=w(se).sort(Y),ve=0,Me=be.length;ve<Me;ve++){var we=be[ve],Be=se[we];H&&R(Be)?re[we]=oe(Be):re[we]=Be}}return re}(I)};var G={deep:!1,comparator:A.defComparator};_.exports=d},5154:function(_,d,v){var A=v(5693),C=v(3145);d=function(w,T,R){T=A(T,R);for(var G=C(w),I=G.length,z={},H=0;H<I;H++){var Y=G[H];z[Y]=T(w[Y],Y,w)}return z},_.exports=d},5169:function(_,d,v){d=v(1909)?window:v.g,_.exports=d},5207:function(_,d){d=function(v){return v.replace(/\W/g,"\\$&")},_.exports=d},5224:function(_,d,v){var A=v(7140),C=v(3915);d={encode:function(w){return w.length<32768?String.fromCodePoint.apply(String,w):C(A(w,32767),function(T){return String.fromCodePoint.apply(String,T)}).join("")},decode:function(w){for(var T=[],R=0,G=w.length;R<G;){var I=w.charCodeAt(R++);if(I>=55296&&I<=56319&&R<G){var z=w.charCodeAt(R++);(64512&z)==56320?T.push(((1023&I)<<10)+(1023&z)+65536):(T.push(I),R--)}else T.push(I)}return T}},_.exports=d},5241:function(_,d,v){var A=v(2708),C=v(1738),w=v(1009),T=v(7661),R=v(6866),G=v(9100),I=v(3957);d=function(z,H){for(var Y=arguments.length,ee=new Array(Y>2?Y-2:0),ie=2;ie<Y;ie++)ee[ie-2]=arguments[ie];(A(H)||C(H))&&(ee.unshift(H),H=null),H||(H={});var oe=function(ge){for(var ye="div",be="",ve=[],Me=[],we="",Be=0,De=ge.length;Be<De;Be++){var Fe=ge[Be];Fe==="#"||Fe==="."?(Me.push(we),we=Fe):we+=Fe}Me.push(we);for(var Oe=0,Ge=Me.length;Oe<Ge;Oe++)(we=Me[Oe])&&(w(we,"#")?be=we.slice(1):w(we,".")?ve.push(we.slice(1)):ye=we);return{tagName:ye,id:be,classes:ve}}(z),se=oe.tagName,re=oe.id,fe=oe.classes,ue=document.createElement(se);return re&&ue.setAttribute("id",re),T.add(ue,fe),G(ee,function(ge){C(ge)?ue.appendChild(document.createTextNode(ge)):A(ge)&&ue.appendChild(ge)}),G(H,function(ge,ye){C(ge)?ue.setAttribute(ye,ge):I(ge)&&w(ye,"on")?ue.addEventListener(ye.slice(2),ge,!1):ye==="style"&&R(ue,ge)}),ue},_.exports=d},5259:function(_,d,v){(d=v(6314)(!1)).push([_.id,`@font-face{font-family:luna-notification-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAZUAAsAAAAACdAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAG0AAACgIZAmVU9TLzIAAAF4AAAAPgAAAFZWzlGlY21hcAAAAbgAAADTAAACdAF1q7JnbHlmAAACjAAAAZ8AAAIw/FBRXGhlYWQAAAQsAAAAMQAAADZ25cSzaGhlYQAABGAAAAAdAAAAJAgCBA9obXR4AAAEgAAAABYAAABEFAH//GxvY2EAAASYAAAAFgAAACQHPAeQbWF4cAAABLAAAAAfAAAAIAEeAFBuYW1lAAAE0AAAASkAAAIWm5e+CnBvc3QAAAX8AAAAVwAAAHunB7sWeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiD2ArL5GGQYdBhswDIgzA6U4QSzmBlYGbgZeIC28YL5rEAoAIScQAwxh4WBH8hmB/PYgOp4GPgAGb8HKAAAAHicY2Bk1GWcwMDKwMDUyXSGgYGhH0IzvmYwYuQAijKwMjNgBQFprikMBxgSP7KwgLgxLExgYUYQAQC/dQkUAAB4nL2SPQ7CMAxGX2ih/LYMCCHOwKUQAoGQqMTSjQMxcQgu1BOUz4knxMCAsPWa5ksTu3aAPpCJjcghPAiY3aWGqGeMo55z03zBXErOlh0HTpypudK0eddp1dQ9R6mXqIaovlvQKeZLVvJ1dKgUZ8qQCQNmFIwUqdS3PUVTlmHw4aRfW8xBKVgGFCOUgqz8Q+TvbBqfT59VWMUT9r5z1C91IWE7Ds5QHJ2JODlW2bOj/1bvEoWoHdVCHU1YURpHtWlDwu5L20tgY5awe9U69F8TTSO0AHiclVC9ThtBEJ6ZXdY4UXwc7O0mWBzxmdsDG9nExmdFKAQUpaClRCa4ihIsGiR+0kWip0A8AQVtKsRDpKGgI8+Qkip3ZtciSpQuq9E33/zvDBDYR1fsGkJoAGAgRbUSmTe4nK5gp/qbtVTgt1uK2XAd/zjpSnn5D08pb27O4Z2nrN5Q3pmzLCBsOGbhzmEQePm1opM953QA6OZzYF+hAFBEjckr7OI+LX3I9mV+0cc1Wutn/QA/bv9XLhtmNpdxghJMQxUgxgaKAooQ25XWKtoF3E5SRKajI+MsKdjPvCfTVFospnW2VE+L2fewFlppl+M4jeNztmjKZfPrNlk3Zp22gjAM8kuH93HHmE48OudwaGcjB6jBO3tT4aFIGpiYt9i0v0jVLFrppkorj7QqlLAgmmiaGEsdolat7qqNLo9KolEU7ycqK89nnk0SlwfRpk8vF/zPxNkX9VrwYPfpkX7CVemFHBCnLJ9PTns7Nzu902T+L4rfbI/HvMPKpl+bJX+XxsaO9VQ4LQfjx3qm5PoPSPD3n/6tHlGAB9G/ZawAeJxjYGRgYADibSbTeeL5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAKPIKWwAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFggBbKAQbAAAAeJxjYGBgYEHB//8C8X8GEgAAwYQEDwAAeJxjYAACB4YwhhyGVYwS2CEAO7wC2QAAeJxjYGRgYBBkcGFgZgABJiDmAkIGhv9gPgMAEP4BbwB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG3EOwqAMBBAwX2a+P/fw8IjSYgoQgLb5PqCtk4xksmnkX8zGTkGS0FJRU1DS0fPwMjEzCLmCke07vTuLt/XzaRdg/WqUbkIHEQcJ56bxI6KPP4cD3YA') format('woff')}[class*=' luna-notification-icon-'],[class^=luna-notification-icon-]{display:inline-block;font-family:luna-notification-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-notification-icon-info:before{content:'\\f101'}.luna-notification-icon-check:before{content:'\\f102'}.luna-notification-icon-warn:before{content:'\\f103'}.luna-notification-icon-error:before{content:'\\f104'}.luna-notification{position:relative;padding:20px;pointer-events:none;display:flex;flex-direction:column;overflow:hidden;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,0);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-notification .luna-notification-hidden,.luna-notification.luna-notification-hidden{display:none}.luna-notification .luna-notification-invisible,.luna-notification.luna-notification-invisible{visibility:hidden}.luna-notification *{box-sizing:border-box}.luna-notification.luna-notification-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:rgba(0,0,0,0)}.luna-notification.luna-notification-full{position:fixed;top:0;left:0;width:100%;height:100%}.luna-notification-item{display:flex;border:1px solid;padding:10px 16px;align-items:center}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-icon-container{margin-right:8px;color:#fff;border-radius:50%;width:16px;height:16px;text-align:center;line-height:16px}.luna-notification-icon-container.luna-notification-info .luna-notification-icon{position:relative;top:-2px;font-size:12px}.luna-notification-icon-container.luna-notification-success .luna-notification-icon{position:relative;top:-1px;font-size:12px}.luna-notification-icon-container.luna-notification-warning{position:relative;top:-2px}.luna-notification-icon-container.luna-notification-warning .luna-notification-icon{font-size:14px}.luna-notification-icon-container.luna-notification-error{position:relative;top:-1px}.luna-notification-icon-container.luna-notification-error .luna-notification-icon{font-size:14px}.luna-notification-theme-light .luna-notification-item{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9);box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);box-shadow:var(--luna-box-shadow,0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05));color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-info{background-color:#1677ff;background-color:var(--luna-color-info,#1677ff)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-success{background-color:#52c41a;background-color:var(--luna-color-success,#52c41a)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-warning{color:#faad14;color:var(--luna-color-warning,#faad14)}.luna-notification-theme-light .luna-notification-icon-container.luna-notification-error{color:#ff4d4f;color:var(--luna-color-error,#ff4d4f)}.luna-notification-theme-dark .luna-notification-item{border-color:#424242;border-color:var(--luna-color-border,#424242);box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);box-shadow:var(--luna-box-shadow,0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05));color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container,#141414)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-info{background-color:#1668dc;background-color:var(--luna-color-info,#1668dc)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-success{background-color:#49aa19;background-color:var(--luna-color-success,#49aa19)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-warning{color:#d89614;color:var(--luna-color-warning,#d89614)}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-error{color:#dc4446;color:var(--luna-color-error,#dc4446)}`,""]),_.exports=d},5282:function(_,d,v){var A=v(9100);d=function(C){var w={};return A(C,function(T,R){w[T]=R}),w},_.exports=d},5333:function(_,d){var v=/^\s+/;d=function(A,C){if(C==null)return A.trimLeft?A.trimLeft():A.replace(v,"");for(var w,T,R=0,G=A.length,I=C.length,z=!0;z&&R<G;)for(z=!1,w=-1,T=A.charAt(R);++w<I;)if(T===C[w]){z=!0,R++;break}return R>=G?"":A.substr(R,G)},_.exports=d},5334:function(_,d,v){var A=this&&this.__awaiter||function(ze,je,He,Xe){return new(He||(He=Promise))(function($e,We){function nt(Bn){try{Wt(Xe.next(Bn))}catch(Lt){We(Lt)}}function Qt(Bn){try{Wt(Xe.throw(Bn))}catch(Lt){We(Lt)}}function Wt(Bn){var Lt;Bn.done?$e(Bn.value):(Lt=Bn.value,Lt instanceof He?Lt:new He(function(Mn){Mn(Lt)})).then(nt,Qt)}Wt((Xe=Xe.apply(ze,je||[])).next())})},C=this&&this.__generator||function(ze,je){var He,Xe,$e,We={label:0,sent:function(){if(1&$e[0])throw $e[1];return $e[1]},trys:[],ops:[]},nt=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return nt.next=Qt(0),nt.throw=Qt(1),nt.return=Qt(2),typeof Symbol=="function"&&(nt[Symbol.iterator]=function(){return this}),nt;function Qt(Wt){return function(Bn){return function(Lt){if(He)throw new TypeError("Generator is already executing.");for(;nt&&(nt=0,Lt[0]&&(We=0)),We;)try{if(He=1,Xe&&($e=2&Lt[0]?Xe.return:Lt[0]?Xe.throw||(($e=Xe.return)&&$e.call(Xe),0):Xe.next)&&!($e=$e.call(Xe,Lt[1])).done)return $e;switch(Xe=0,$e&&(Lt=[2&Lt[0],$e.value]),Lt[0]){case 0:case 1:$e=Lt;break;case 4:return We.label++,{value:Lt[1],done:!1};case 5:We.label++,Xe=Lt[1],Lt=[0];continue;case 7:Lt=We.ops.pop(),We.trys.pop();continue;default:if($e=We.trys,!(($e=$e.length>0&&$e[$e.length-1])||Lt[0]!==6&&Lt[0]!==2)){We=0;continue}if(Lt[0]===3&&(!$e||Lt[1]>$e[0]&&Lt[1]<$e[3])){We.label=Lt[1];break}if(Lt[0]===6&&We.label<$e[1]){We.label=$e[1],$e=Lt;break}if($e&&We.label<$e[2]){We.label=$e[2],We.ops.push(Lt);break}$e[2]&&We.ops.pop(),We.trys.pop();continue}Lt=je.call(ze,We)}catch(Mn){Lt=[6,Mn],Xe=0}finally{He=$e=0}if(5&Lt[0])throw Lt[1];return{value:Lt[0]?Lt[1]:void 0,done:!0}}([Wt,Bn])}}},w=this&&this.__spreadArray||function(ze,je,He){if(He||arguments.length===2)for(var Xe,$e=0,We=je.length;$e<We;$e++)!Xe&&$e in je||(Xe||(Xe=Array.prototype.slice.call(je,0,$e)),Xe[$e]=je[$e]);return ze.concat(Xe||Array.prototype.slice.call(je))},T=this&&this.__importDefault||function(ze){return ze&&ze.__esModule?ze:{default:ze}};Object.defineProperty(d,"__esModule",{value:!0}),d.enable=void 0,d.deleteCookies=function(ze){(0,z.default)(ze.name)},d.getCookies=function(){var ze=[],je=document.cookie;return(0,R.default)(je)!==""&&(0,G.default)(je.split(";"),function(He){He=He.split("=");var Xe=(0,R.default)(He.shift());He=(0,I.default)(He.join("=")),ze.push({name:Xe,value:He})}),{cookies:ze}},d.getResponseBody=function(ze){return{base64Encoded:!1,body:ye.get(ze.requestId)}};var R=T(v(9405)),G=T(v(9100)),I=T(v(6334)),z=T(v(3290)),H=T(v(9122)),Y=T(v(3249)),ee=T(v(3981)),ie=T(v(1738)),oe=T(v(3750)),se=T(v(8971)),re=T(v(5957)),fe=v(3411),ue=T(v(8665)),ge=v(916),ye=new Map,be=!1;function ve(ze,je){ze.on("send",function(He,Xe){var $e={method:Xe.method,url:Xe.url,headers:Xe.reqHeaders};Xe.data&&($e.postData=Xe.data),Ge("Network.requestWillBeSent",{requestId:He,type:je,request:$e,timestamp:Xe.time/1e3})}),ze.on("headersReceived",function(He,Xe){Ge("Network.responseReceivedExtraInfo",{requestId:He,blockedCookies:[],headers:Xe.resHeaders})}),ze.on("done",function(He,Xe){var $e={status:Xe.status};Xe.resHeaders&&($e.headers=Xe.resHeaders),Ge("Network.responseReceived",{requestId:He,type:je,response:$e,timestamp:Xe.time/1e3}),ye.set(He,Xe.resTxt),Ge("Network.loadingFinished",{requestId:He,encodedDataLength:Xe.size,timestamp:Xe.time/1e3})}),ze.on("error",function(He,Xe){Ge("Network.loadingFailed",{requestId:He,errorText:Xe.errorText,timestamp:Xe.time/1e3,type:je})})}function Me(ze){return!(0,Y.default)(ze,"__chobitsu-hide__=true")}d.enable=function(){be=!0,(0,G.default)(Oe,function(ze){return ze()}),Oe=[]};var we,Be,De,Fe,Oe=[];function Ge(ze,je){be?ue.default.trigger(ze,je):Oe.push(function(){return ue.default.trigger(ze,je)})}we=window.XMLHttpRequest.prototype,Be=we.send,De=we.open,Fe=we.setRequestHeader,we.open=function(ze,je){if(!Me(je))return De.apply(this,arguments);ve(this.chobitsuRequest=new fe.XhrRequest(this,ze,je),"XHR"),De.apply(this,arguments)},we.send=function(ze){var je=this.chobitsuRequest;je&&je.handleSend(ze),Be.apply(this,arguments)},we.setRequestHeader=function(ze,je){var He=this.chobitsuRequest;He&&He.handleReqHeadersSet(ze,je),Fe.apply(this,arguments)},function(){var ze=!1;if(window.fetch&&((ze=(0,H.default)(window.fetch))||(navigator.serviceWorker&&(ze=!0),window.Request&&(0,H.default)(window.Request)&&(ze=!0))),ze){var je=window.fetch;window.fetch=function(){for(var He=[],Xe=0;Xe<arguments.length;Xe++)He[Xe]=arguments[Xe];var $e=new(fe.FetchRequest.bind.apply(fe.FetchRequest,w([void 0],He,!1)));ve($e,"Fetch");var We=je.apply(void 0,He);return $e.send(We),We}}}(),function(){var ze=window.WebSocket;function je(He,Xe){var $e=new ze(He,Xe);if(!Me(He))return $e;var We=(0,ge.createId)();Ge("Network.webSocketCreated",{requestId:We,url:He}),$e.addEventListener("open",function(){Ge("Network.webSocketWillSendHandshakeRequest",{requestId:We,timestamp:(0,ee.default)()/1e3,request:{headers:{}}}),Ge("Network.webSocketHandshakeResponseReceived",{requestId:We,timeStamp:(0,ee.default)()/1e3,response:{status:101,statusText:"Switching Protocols"}})}),$e.addEventListener("message",function(Qt){return A(this,void 0,void 0,function(){var Wt,Bn;return C(this,function(Lt){switch(Lt.label){case 0:return Wt=Qt.data,(0,se.default)(Wt)?[2]:(Bn=1,(0,ie.default)(Wt)?[3,3]:(Bn=2,(0,oe.default)(Wt)?[4,re.default.blobToArrBuffer(Wt)]:[3,2]));case 1:Wt=Lt.sent(),Lt.label=2;case 2:Wt=(0,re.default)(Wt,"base64"),Lt.label=3;case 3:return Ge("Network.webSocketFrameReceived",{requestId:We,timestamp:(0,ee.default)()/1e3,response:{opcode:Bn,payloadData:Wt}}),[2]}})})});var nt=$e.send;return $e.send=function(Qt){return(0,se.default)(Qt)||function(Wt){A(this,void 0,void 0,function(){var Bn,Lt;return C(this,function(Mn){switch(Mn.label){case 0:return Bn=1,Lt=Wt,(0,ie.default)(Wt)?[3,3]:(Bn=2,(0,oe.default)(Lt)?[4,re.default.blobToArrBuffer(Lt)]:[3,2]);case 1:Lt=Mn.sent(),Mn.label=2;case 2:Lt=(0,re.default)(Wt,"base64"),Mn.label=3;case 3:return Ge("Network.webSocketFrameSent",{requestId:We,timestamp:(0,ee.default)()/1e3,response:{opcode:Bn,payloadData:Lt}}),[2]}})})}(Qt),nt.call(this,Qt)},$e.addEventListener("close",function(){Ge("Network.webSocketClosed",{requestId:We,timestamp:(0,ee.default)()/1e3})}),$e.addEventListener("error",function(){Ge("Network.webSocketFrameError",{requestId:We,timestamp:(0,ee.default)()/1e3,errorMessage:"WebSocket error"})}),$e}je.prototype=ze.prototype,je.CLOSED=ze.CLOSED,je.CLOSING=ze.CLOSING,je.CONNECTING=ze.CONNECTING,je.OPEN=ze.OPEN,window.WebSocket=je}()},5360:function(_,d,v){var A=v(9100),C=v(3612),w=v(1738);function T(R){return function(G,I){G=C(G),A(G,function(z){if(w(I))z.insertAdjacentHTML(R,I);else{var H=z.parentNode;switch(R){case"beforebegin":H&&H.insertBefore(I,z);break;case"afterend":H&&H.insertBefore(I,z.nextSibling);break;case"beforeend":z.appendChild(I);break;case"afterbegin":z.prepend(I)}}})}}d={before:T("beforebegin"),after:T("afterend"),append:T("beforeend"),prepend:T("afterbegin")},_.exports=d},5361:function(_,d,v){function A(w,T){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,G){return R.__proto__=G,R},A(w,T)}function C(w,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(T&&T.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),Object.defineProperty(w,"prototype",{writable:!1}),T&&A(w,T)}v.d(d,{A:function(){return C}})},5395:function(_,d){d=function(v){var A=v.length,C=Array(A);A--;for(var w=0;w<=A;w++)C[A-w]=v[w];return C},_.exports=d},5427:function(_,d,v){var A=v(9760),C=v(3957),w=Object.getPrototypeOf,T={}.constructor;d=function(R){if(A(R)){if(w)return w(R);var G=R.__proto__;return G||G===null?G:C(R.constructor)?R.constructor.prototype:R instanceof T?T.prototype:void 0}},_.exports=d},5458:function(_,d,v){v.d(d,{A:function(){return w}});var A=v(5526),C=v(7800);function w(T){return function(R){if(Array.isArray(R))return(0,A.A)(R)}(T)||function(R){if(typeof Symbol<"u"&&R[Symbol.iterator]!=null||R["@@iterator"]!=null)return Array.from(R)}(T)||(0,C.A)(T)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5526:function(_,d,v){function A(C,w){(w==null||w>C.length)&&(w=C.length);for(var T=0,R=Array(w);T<w;T++)R[T]=C[T];return R}v.d(d,{A:function(){return A}})},5546:function(_,d,v){var A=v(5169),C={down:"touchstart",move:"touchmove",up:"touchend"},w={down:"mousedown",move:"mousemove",up:"mouseup"},T={down:"pointerdown",move:"pointermove",up:"pointerup"},R="PointerEvent"in A,G="ontouchstart"in A;d=function(I){return R?T[I]:G?C[I]:w[I]},_.exports=d},5570:function(_,d){var v,A=[],C=document,w=C.documentElement.doScroll,T="DOMContentLoaded",R=(w?/^loaded|^c/:/^loaded|^i|^c/).test(C.readyState);R||C.addEventListener(T,v=function(){for(C.removeEventListener(T,v),R=1;v=A.shift();)v()}),d=function(G){R?setTimeout(G,0):A.push(G)},_.exports=d},5630:function(_,d){var v=0;d=function(A){var C=++v+"";return A?A+C:C},_.exports=d},5651:function(_,d,v){d=v(6307)(v(7514),!0),_.exports=d},5689:function(_,d,v){var A=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(d,"__esModule",{value:!0}),d.getUsageAndQuota=function(){return{quota:0,usage:0,overrideActive:!1,usageBreakdown:[]}},d.clearDataForOrigin=function(H){var Y=H.storageTypes.split(",");(0,C.default)(Y,function(ee){if(ee==="cookies"){var ie=(0,G.getCookies)().cookies;(0,C.default)(ie,function(oe){var se=oe.name;return(0,w.default)(se)})}else ee==="local_storage"&&(I.clear(),z.clear())})},d.getTrustTokens=function(){return{tokens:[]}},d.getStorageKeyForFrame=function(){return{storageKey:location.origin}},d.getSharedStorageMetadata=function(){return{metadata:{creationTime:0,length:0,remainingBudget:0,bytesUsed:0}}},d.setStorageBucketTracking=function(){R.default.trigger("Storage.storageBucketCreatedOrUpdated",{bucketInfo:{bucket:{storageKey:location.origin},durability:"relaxed",expiration:0,id:"0",persistent:!1,quota:0}})};var C=A(v(9100)),w=A(v(3290)),T=A(v(1931)),R=A(v(8665)),G=v(5334),I=(0,T.default)("local"),z=(0,T.default)("session")},5693:function(_,d,v){var A=v(3957),C=v(9760),w=v(6214),T=v(6459),R=v(199),G=v(2455),I=v(500);d=function(z,H,Y){return z==null?G:A(z)?T(z,H,Y):C(z)&&!w(z)?R(z):I(z)},_.exports=d},5701:function(_,d,v){var A=v(3957),C=v(365),w=v(3145);function T(R,G,I,z){if(R===G)return R!==0||1/R==1/G;if(R==null||G==null)return R===G;if(R!=R)return G!=G;var H=typeof R;return(H==="function"||H==="object"||typeof G=="object")&&function(Y,ee,ie,oe){var se=toString.call(Y);if(se!==toString.call(ee))return!1;switch(se){case"[object RegExp]":case"[object String]":return""+Y==""+ee;case"[object Number]":return+Y!=+Y?+ee!=+ee:+Y==0?1/+Y==1/ee:+Y==+ee;case"[object Date]":case"[object Boolean]":return+Y==+ee}var re=se==="[object Array]";if(!re){if(typeof Y!="object"||typeof ee!="object")return!1;var fe=Y.constructor,ue=ee.constructor;if(fe!==ue&&!(A(fe)&&fe instanceof fe&&A(ue)&&ue instanceof ue)&&"constructor"in Y&&"constructor"in ee)return!1}oe=oe||[];for(var ge=(ie=ie||[]).length;ge--;)if(ie[ge]===Y)return oe[ge]===ee;if(ie.push(Y),oe.push(ee),re){if((ge=Y.length)!==ee.length)return!1;for(;ge--;)if(!T(Y[ge],ee[ge],ie,oe))return!1}else{var ye,be=w(Y);if(ge=be.length,w(ee).length!==ge)return!1;for(;ge--;)if(ye=be[ge],!C(ee,ye)||!T(Y[ye],ee[ye],ie,oe))return!1}return ie.pop(),oe.pop(),!0}(R,G,I,z)}d=function(R,G){return T(R,G)},_.exports=d},5773:function(_,d,v){var A=v(1738),C=v(769),w=v(8785),T=v(3915),R=v(9405);d=function(I){A(I)&&(I=C(I));for(var z="",H=arguments.length,Y=new Array(H>1?H-1:0),ee=1;ee<H;ee++)Y[ee-1]=arguments[ee];for(var ie=0,oe=I.length;ie<oe;ie++)z+=I[ie],Y[ie]&&(z+=Y[ie]);for(var se=z.split(`
`),re=[],fe=0,ue=se.length;fe<ue;fe++){var ge=se[fe].match(G);ge&&re.push(ge[1].length)}var ye=re.length>0?w.apply(null,re):0;return R(T(se,function(be){return be[0]===" "?be.slice(ye):be}).join(`
`))};var G=/^(\s+)\S+/;_.exports=d},5784:function(_,d,v){v.d(d,{A:function(){return Br}});var A=v(7528),C=v(4467),w=v(3029),T=v(2901),R=v(388),G=v(3954),I=v(5361),z=v(2263),H=v.n(z),Y=v(3693),ee=v.n(Y),ie=v(3915),oe=v.n(ie),se=v(9405),re=v.n(se),fe=v(5169),ue=v.n(fe),ge=v(9548),ye=v.n(ge),be=(v(6097),v(3249)),ve=v.n(be),Me=(v(6030),v(5004)),we=v.n(Me);v(9410),v(8609);function Be(qr){var br="luna-".concat(qr,"-");function er(Gn){return oe()(re()(Gn).split(/\s+/),function(Er){return ve()(Er,br)?Er:Er.replace(/[\w-]+/,function(mn){return"".concat(br).concat(mn)})}).join(" ")}return function(Gn){if(/<[^>]*>/g.test(Gn))try{var Er=ye().parse(Gn);return De(Er,function(mn){mn.attrs&&mn.attrs.class&&(mn.attrs.class=er(mn.attrs.class))}),ye().stringify(Er)}catch{return er(Gn)}return er(Gn)}}function De(qr,br){for(var er=0,Gn=qr.length;er<Gn;er++){var Er=qr[er];br(Er),Er.content&&De(Er.content,br)}}var Fe="ontouchstart"in ue();function Oe(){var qr=we()();return qr==="os x"?"mac":qr}var Ge=v(9100),ze=v.n(Ge),je=v(8105),He=v.n(je),Xe=v(5651),$e=v.n(Xe),We=v(961),nt=v.n(We),Qt=v(7e3),Wt=v.n(Qt),Bn=v(1009),Lt=v.n(Bn);function Mn(){try{var qr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mn=function(){return!!qr})()}var cr,In,Zn=function(qr){function br(er,Gn){var Er,mn=Gn.compName,tr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,vr=tr===void 0?"light":tr;return(0,w.A)(this,br),Er=function(Ar,Tn,tt){return Tn=(0,G.A)(Tn),(0,R.A)(Ar,Mn()?Reflect.construct(Tn,[],(0,G.A)(Ar).constructor):Tn.apply(Ar,tt))}(this,br),Er.subComponents=[],Er.theme="",Er.onThemeChange=function(Ar){Er.options.theme==="auto"&&Er.setTheme(Ar)},Er.compName=mn,Er.c=Be(mn),Er.options={},Er.container=er,Er.$container=ee()(er),Er.$container.addClass(["luna-".concat(mn),Er.c("platform-".concat(Oe()))]),Er.on("changeOption",function(Ar,Tn){if(Ar==="theme"&&Tn){var tt=Tn;Tn==="auto"&&(tt=Wt().get()),Er.setTheme(tt),ze()(Er.subComponents,function($t){return $t.setOption("theme",Tn)})}}),Wt().on("change",Er.onThemeChange),Er.setOption("theme",vr),Er}return(0,I.A)(br,qr),(0,T.A)(br,[{key:"destroy",value:function(){var er=this;this.destroySubComponents();var Gn=this.$container,Er=Gn.attr("class");ze()(Er.split(/\s+/),function(mn){Lt()(mn,"luna-".concat(er.compName))&&Gn.rmClass(mn)}),Gn.html(""),this.emit("destroy"),this.removeAllListeners(),Wt().off("change",this.onThemeChange)}},{key:"setOption",value:function(er,Gn){var Er=this,mn=this.options,tr={};typeof er=="string"?tr[er]=Gn:tr=er,ze()(tr,function(vr,Ar){var Tn=mn[Ar];mn[Ar]=vr,vr!==Tn&&Er.emit("changeOption",Ar,vr,Tn)})}},{key:"getOption",value:function(er){return this.options[er]}},{key:"addSubComponent",value:function(er){er.setOption("theme",this.options.theme),this.subComponents.push(er)}},{key:"removeSubComponent",value:function(er){nt()(this.subComponents,function(Gn){return Gn===er})}},{key:"destroySubComponents",value:function(){ze()(this.subComponents,function(er){return er.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(er){var Gn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$e()(er,Gn),He()(this.options,er)}},{key:"find",value:function(er){return this.$container.find(this.c(er))}},{key:"setTheme",value:function(er){var Gn=this.c,Er=this.$container;this.theme&&Er.rmClass(Gn("theme-".concat(this.theme))),Er.addClass(Gn("theme-".concat(er))),this.theme=er}}])}(H()),$n=v(5241),Rn=v.n($n),Dn=v(2571),Gt=v.n(Dn),Jn=v(7181),Nn=v.n(Jn),Xn=v(5773),jn=v.n(Xn),Un=v(769),bn=v.n(Un),Kn=v(2208),Qn=v.n(Kn),pr=v(4249),fn=v.n(pr),Mt=v(15),yn=v.n(Mt),kn=v(3497),nr=v.n(kn),dr=v(5902),Qr=v.n(dr),Wr=v(8098),Gr=v.n(Wr),Hr=v(4307),Kr=v.n(Hr),ti=v(96),Mi=v.n(ti);function Ci(qr,br){var er=Object.keys(qr);if(Object.getOwnPropertySymbols){var Gn=Object.getOwnPropertySymbols(qr);br&&(Gn=Gn.filter(function(Er){return Object.getOwnPropertyDescriptor(qr,Er).enumerable})),er.push.apply(er,Gn)}return er}function oi(qr){for(var br=1;br<arguments.length;br++){var er=arguments[br]!=null?arguments[br]:{};br%2?Ci(Object(er),!0).forEach(function(Gn){(0,C.A)(qr,Gn,er[Gn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(qr,Object.getOwnPropertyDescriptors(er)):Ci(Object(er)).forEach(function(Gn){Object.defineProperty(qr,Gn,Object.getOwnPropertyDescriptor(er,Gn))})}return qr}function Ii(){try{var qr=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ii=function(){return!!qr})()}_=v.hmd(_);var wr={comment:"",string:"",number:"",keyword:"",operator:""},Br=function(qr){function br(er){var Gn,Er,mn,tr,vr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,w.A)(this,br),Er=this,mn=br,tr=[er,{compName:"dom-viewer"},vr],mn=(0,G.A)(mn),(Gn=(0,R.A)(Er,Ii()?Reflect.construct(mn,tr||[],(0,G.A)(Er).constructor):mn.apply(Er,tr))).isExpanded=!1,Gn.childNodes=[],Gn.childNodeDomViewers=[],Gn.expand=function(){var Ar=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Gn.isExpandable()&&(Gn.isExpanded||(Gn.isExpanded=!0,Gn.renderExpandTag(),Gn.renderChildNodes()),Ar&&ze()(Gn.childNodeDomViewers,function(Tn){Tn.expand(!0)}))},Gn.collapse=function(){var Ar=arguments.length>0&&arguments[0]!==void 0&&arguments[0];Gn.isExpandable()&&(Gn.isExpanded&&(Gn.isExpanded=!1,Gn.renderCollapseTag()),Ar&&ze()(Gn.childNodeDomViewers,function(Tn){Tn.collapse(!0)}))},Gn.toggle=function(){Gn.isExpanded?Gn.collapse():Gn.expand()},Gn.onKeyRight=function(){Gn.isExpanded?Gn.childNodeDomViewers[0].select():Gn.expand()},Gn.onKeyLeft=function(){var Ar;Gn.isExpanded?Gn.collapse():(Ar=Gn.options.parent)===null||Ar===void 0||Ar.select()},Gn.onKeyDown=function(){var Ar=Gn.options;if(Gn.isExpanded)Gn.childNodeDomViewers[0].select();else{var Tn=Ar.parent;if(Tn)if(Ar.isEndTag){if(!(Tn=Tn.getOption("parent")))return;var tt=Tn,$t=tt.childNodes,dn=tt.childNodeDomViewers,Qe=tt.endTagDomViewer,gn=$t.indexOf(Ar.node);$t[gn+1]?dn[gn+1].select():Qe&&Qe.select()}else{var sr=Tn,rr=sr.childNodeDomViewers,it=sr.endTagDomViewer,At=rr.indexOf(Gn);rr[At+1]?rr[At+1].select():it&&it.select()}}},Gn.onKeyUp=function(){var Ar=Gn.options,Tn=Ar.parent;if(Tn){var tt,$t;if(Ar.isEndTag)tt=nr()(Tn.childNodeDomViewers);else{var dn=Tn.childNodeDomViewers.indexOf(Gn);dn<1?Tn.select():tt=Tn.childNodeDomViewers[dn-1]}tt&&(tt.isExpanded?($t=tt.endTagDomViewer)===null||$t===void 0||$t.select():tt.select())}},Gn.initOptions(vr,{node:document.documentElement,parent:null,isEndTag:!1,observe:!0,rootContainer:er,rootDomViewer:Gn,ignore:function(){return!1},ignoreAttr:function(){return!1},lowerCaseTagName:!0,hotkey:!0}),Gn.isShadowRoot=Nn()(Gn.options.node),Gn.initTpl(),Gn.bindEvent(),!Gn.options.isEndTag&&Gn.options.observe&&Gn.initObserver(),Gn}return(0,I.A)(br,qr),(0,T.A)(br,[{key:"select",value:function(er){var Gn=this.c,Er=this.options;if(!er||er&&Er.node===er)return this.$tag.hasClass(Gn("selected"))?void 0:(ee()(this.options.rootContainer).find(Gn(".selected")).rmClass(Gn("selected")).rmAttr("tabindex"),this.$tag.attr("tabindex","0").get(0).focus(),this.$tag.addClass(Gn("selected")),void Er.rootDomViewer.emit("select",Er.node));if(er.nodeType===Node.ELEMENT_NODE)for(var mn=er,tr=er.parentElement;tr;){if(tr===Er.node){this.expand(),this.childNodeDomViewers[this.childNodes.indexOf(mn)].select(er);break}mn=tr,tr=tr.parentElement}}},{key:"attach",value:function(){this.container.appendChild(this.$tag.get(0)),this.$children&&this.container.appendChild(this.$children.get(0))}},{key:"isAttached",value:function(){return!!this.$tag.get(0).parentNode}},{key:"detach",value:function(){this.$tag.remove(),this.$children&&this.$children.remove()}},{key:"destroy",value:function(){var er=this.c;this.$tag.hasClass(er("selected"))&&this.options.rootDomViewer.emit("deselect"),this.detach(),this.observer&&this.observer.disconnect(),this.destroySubComponents(),this.options.rootDomViewer===this&&this.$container.rmClass("luna-dom-viewer").rmClass(er("platform-".concat(Oe()))).rmClass(er("theme-".concat(this.options.theme))),this.emit("destroy"),this.removeAllListeners()}},{key:"renderExpandTag",value:function(){var er=this.$tag,Gn=this.c,Er=this.options.node;this.isShadowRoot||er.html(this.renderHtmlTag(oi(oi({},ui(Er)),{},{hasTail:!1,hasToggleButton:!0}))),er.addClass(Gn("expanded")),this.$children.rmClass(Gn("hidden"))}},{key:"renderCollapseTag",value:function(){var er=this.$tag,Gn=this.c,Er=this.options.node;this.$children.addClass(Gn("hidden")),this.isShadowRoot||this.$tag.html(this.renderHtmlTag(oi(oi({},ui(Er)),{},{hasTail:!0,hasToggleButton:!0}))),er.rmClass(Gn("expanded"))}},{key:"initObserver",value:function(){var er=this;this.observer=new(Qn())(function(Gn){ze()(Gn,function(Er){er.handleMutation(Er)})}),this.observer.observe(this.options.node,{attributes:!0,childList:!0,characterData:!0})}},{key:"handleMutation",value:function(er){var Gn=this.$tag,Er=this.c,mn=this.options,tr=mn.node,vr=mn.ignore;if(ve()(["attributes","childList"],er.type)){if(er.type==="childList"){if(Gr()(er.addedNodes,vr)&&Gr()(er.removedNodes,vr))return;this.renderChildNodes()}this.isExpandable()?this.isExpanded?this.renderExpandTag():this.renderCollapseTag():(this.$children.addClass(Er("hidden")),this.isExpanded=!1,this.isShadowRoot?Gn.html(this.renderShadowRoot(!1)):Gn.html(this.renderHtmlTag(oi(oi({},ui(tr)),{},{hasTail:!1}))))}else er.type==="characterData"&&(tr.nodeType===Node.TEXT_NODE?Gn.html(this.renderTextNode(tr)):tr.nodeType===Node.COMMENT_NODE&&Gn.html(this.renderHtmlComment(tr.nodeValue)))}},{key:"bindEvent",value:function(){var er=this,Gn=this.c,Er=this.$tag;if((this.options.node.nodeType===Node.ELEMENT_NODE||this.isShadowRoot)&&Er.on("click",Gn(".toggle"),function(tr){tr.stopPropagation(),er.toggle()}),Fe?Er.on("click",function(){return er.select()}):Er.on("mousedown",function(){return er.select()}),this.options.hotkey){var mn={element:Er.get(0)};Kr().on("right",mn,this.onKeyRight),Kr().on("left",mn,this.onKeyLeft),Kr().on("down",mn,this.onKeyDown),Kr().on("up",mn,this.onKeyUp)}}},{key:"isExpandable",value:function(){return!(this.options.node.nodeType!==Node.ELEMENT_NODE&&!this.isShadowRoot)&&this.getChildNodes().length>0}},{key:"getChildNodes",value:function(){var er=this.options,Gn=er.rootContainer,Er=er.ignore,mn=this.options.node,tr=bn()(mn.childNodes);return tr=Gt()(tr,function(vr){if(vr.nodeType===Node.TEXT_NODE||vr.nodeType===Node.COMMENT_NODE){var Ar=vr.nodeValue;if(re()(Ar)==="")return!1}return vr!==Gn&&!Er(vr)}),mn.shadowRoot?tr.unshift(mn.shadowRoot):mn.chobitsuShadowRoot&&tr.unshift(mn.chobitsuShadowRoot),tr}},{key:"initTpl",value:function(){var er=this.container,Gn=this.c,Er=this.options,mn=Er.node,tr=Er.isEndTag,vr=Er.lowerCaseTagName,Ar=ee()(Rn()("li"));if(Ar.addClass(Gn("tree-item")),this.$tag=Ar,tr){var Tn=mn.tagName;vr&&(Tn=Mi()(Tn)),Ar.html(Gn('<span class="html-tag" style="margin-left: -15px;">&lt;<span class="tag-name">/'.concat(Tn,'</span>&gt;</span><span class="selection"></span>')))}else if(mn.nodeType===Node.ELEMENT_NODE){var tt=this.isExpandable(),$t=oi(oi({},ui(mn)),{},{hasTail:tt,hasToggleButton:tt});Ar.html(this.renderHtmlTag($t))}else if(Nn()(mn)){var dn=this.isExpandable();Ar.html(this.renderShadowRoot(dn))}else if(mn.nodeType===Node.TEXT_NODE)Ar.html(this.renderTextNode(mn));else{if(mn.nodeType!==Node.COMMENT_NODE)return;var Qe=mn.nodeValue;if(Qe.trim()==="")return;Ar.html(this.renderHtmlComment(Qe))}if(er.appendChild(Ar.get(0)),mn.nodeType===mn.ELEMENT_NODE||this.isShadowRoot){var gn=ee()(Rn()("ul"));gn.addClass([Gn("children"),Gn("hidden")]),er.appendChild(gn.get(0)),this.$children=gn}}},{key:"renderChildNodes",value:function(){var er=this,Gn=this.options.node,Er=this.options,mn=Er.rootContainer,tr=Er.ignore,vr=Er.ignoreAttr,Ar=Er.rootDomViewer,Tn=Er.observe,tt=Er.lowerCaseTagName,$t=this.$children.get(0),dn=this.childNodes,Qe=this.childNodeDomViewers;ze()(Qe,function(rr){rr.detach(),er.removeSubComponent(rr)}),this.endTagDomViewer&&this.endTagDomViewer.detach();var gn=this.getChildNodes();this.childNodes=gn;var sr=[];this.childNodeDomViewers=sr,ze()(gn,function(rr,it){var At,An=dn.indexOf(rr);(At=An>-1?Qe[An]:new br($t,{node:rr,observe:Tn,parent:er,rootContainer:mn,rootDomViewer:Ar,ignore:tr,ignoreAttr:vr,lowerCaseTagName:tt})).attach(),sr[it]=At,er.addSubComponent(At)}),ze()(Qe,function(rr){rr.isAttached()||rr.destroy()}),Gn&&!this.isShadowRoot&&(this.endTagDomViewer?this.endTagDomViewer.attach():(this.endTagDomViewer=new br($t,{node:Gn,parent:this,isEndTag:!0,lowerCaseTagName:tt,rootContainer:mn,rootDomViewer:Ar,ignore:tr}),this.addSubComponent(this.endTagDomViewer)))}},{key:"renderHtmlTag",value:function(er){var Gn=this,Er=this.options.lowerCaseTagName;er.attributes=Gt()(er.attributes,function(Ar){return!Gn.options.ignoreAttr(er.el,Ar.name,Ar.value)});var mn=oe()(er.attributes,function(Ar){var Tn=Ar.name,tt=Ar.value,$t=Ar.isLink;return`<span class="attribute">
          <span class="attribute-name">`.concat(Qr()(Tn),"</span>").concat(tt?'="<span class="attribute-value'.concat($t?" attribute-underline":"",'">').concat(Qr()(tt),'</span>"'):"","</span>")}).join(""),tr="",vr=er.tagName;return Er&&(vr=Mi()(vr)),er.hasTail?tr="".concat(er.hasTail?"":"",'<span class="html-tag">&lt;<span class="tag-name">/').concat(vr,"</span>&gt;</span>"):this.isExpandable()||(tr='<span class="html-tag">&lt;<span class="tag-name">/'.concat(vr,"</span>&gt;</span>")),this.c(jn()(cr||(cr=(0,A.A)([`
      `,`
      <span class="html-tag">&lt;<span class="tag-name">`,"</span>","&gt;</span>",`
      <span class="selection"></span>`])),er.hasToggleButton?this.renderToggle():"",vr,mn,tr))}},{key:"renderTextNode",value:function(er){var Gn=this.c,Er=er.nodeValue,mn=er.parentElement,tr='<span class="text-node">',vr='</span><span class="selection"></span>';if(mn&&Er.length<1e4){if(mn.tagName==="STYLE")return Gn("".concat(tr).concat(fn()(Er,"css",wr)).concat(vr));if(mn.tagName==="SCRIPT")return Gn("".concat(tr).concat(fn()(Er,"js",wr)).concat(vr))}return Gn('"'.concat(tr).concat(Qr()(yn()(Er,1e4,{separator:" ",ellipsis:""}))).concat(vr,'"'))}},{key:"renderHtmlComment",value:function(er){return this.c('<span class="html-comment">&lt;!-- '.concat(Qr()(er),' --&gt;</span><span class="selection"></span>'))}},{key:"renderShadowRoot",value:function(er){var Gn=this.options.node;return this.c(jn()(In||(In=(0,A.A)([`
      `,`
      <span class="shadow-root">#shadow-root (`,`)</span>
      <span class="selection"></span>`])),er?this.renderToggle():"",Gn.mode))}},{key:"renderToggle",value:function(){return'<div class="toggle "><span class="icon icon-caret-right"></span><span class="icon icon-caret-down"></span></div>'}}])}(Zn);function ui(qr){var br={el:qr,tagName:"",attributes:[]};br.tagName=qr.tagName;var er=[];return ze()(qr.attributes,function(Gn){var Er=Gn.name,mn=Gn.value;er.push({name:Er,value:mn,isLink:vi(qr,Er)})}),br.attributes=er,br}function vi(qr,br){var er=qr.tagName;return(er==="SCRIPT"||er==="IMAGE"||er==="VIDEO"||er==="AUDIO")&&br==="src"||er==="LINK"&&br==="href"}(function(qr,br){try{qr.exports=br,qr.exports.default=br}catch{}})(_,Br)},5793:function(_,d,v){var A=v(6097),C=v(3957),w=Math.pow(2,53)-1;d=function(T){if(!T)return!1;var R=T.length;return A(R)&&R>=0&&R<=w&&!C(T)},_.exports=d},5820:function(_,d,v){var A,C=v(3981),w=v(5169),T=w.performance,R=w.process;if(T&&T.now)d=function(){return T.now()};else if(R&&R.hrtime){var G=function(){var I=R.hrtime();return 1e9*I[0]+I[1]};A=G()-1e9*R.uptime(),d=function(){return(G()-A)/1e6}}else A=C(),d=function(){return C()-A};_.exports=d},5865:function(_,d,v){var A=v(4534);d=function(C,w){return A(C,w,!0)},_.exports=d},5869:function(_,d,v){var A=v(365);d=function(C,w){var T=function(R){var G=T.cache,I=""+(w?w.apply(this,arguments):R);return A(G,I)||(G[I]=C.apply(this,arguments)),G[I]};return T.cache={},T},_.exports=d},5902:function(_,d,v){var A=v(3145),C=(d=function(I){return T.test(I)?I.replace(R,G):I}).map={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w="(?:"+A(C).join("|")+")",T=new RegExp(w),R=new RegExp(w,"g"),G=function(I){return C[I]};_.exports=d},5945:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object Set]"},_.exports=d},5957:function(_,d,v){var A=v(1738),C=v(2990),w=v(4992),T=v(6214),R=v(3159),G=v(2989),I=v(96);(d=function(z,H){var Y;if(H=I(H),A(z))Y=new Uint8Array(C.decode(z));else if(w(z))z=z.slice(0),Y=new Uint8Array(z);else if(T(z))Y=new Uint8Array(z);else if(G(z)==="uint8array")Y=z.slice(0);else if(R(z)){Y=new Uint8Array(z.length);for(var ee=0;ee<z.length;ee++)Y[ee]=z[ee]}if(Y)switch(H){case"base64":Y=C.encode(Y);break;case"arraybuffer":Y=Y.buffer;break;case"array":Y=[].slice.call(Y);break;case"buffer":Y=Buffer.from(Y);break;case"blob":Y=new Blob([Y.buffer])}return Y}).blobToArrBuffer=function(z){return new Promise(function(H,Y){var ee=new FileReader;ee.onload=function(ie){H(ie.target.result)},ee.onerror=function(ie){Y(ie)},ee.readAsArrayBuffer(z)})},_.exports=d},6024:function(_,d,v){var A=v(2884);d=function(C){return!!A(C)&&C%2!=0},_.exports=d},6026:function(_,d,v){var A=v(8971);d=function(C,w,T){return A(T)&&(T=w,w=void 0),!A(w)&&C<w?w:C>T?T:C},_.exports=d},6030:function(_,d,v){var A=v(6097),C=v(9760),w=v(3957),T=v(1738);d=function(R){if(A(R))return R;if(C(R)){var G=w(R.valueOf)?R.valueOf():R;R=C(G)?G+"":G}return T(R)?+R:R===0?R:+R},_.exports=d},6032:function(_,d,v){var A=v(2717),C=v(8105),w=v(9405),T=v(7257),R=v(9464),G=v(9100),I=v(6214),z=v(769),H=v(1909),Y=v(9760),ee=v(2561);d=A({className:"Url",initialize:function(re){!re&&H&&(re=window.location.href),C(this,d.parse(re||""))},setQuery:function(re,fe){var ue=this.query;return Y(re)?G(re,function(ge,ye){ue[ye]=ee(ge)}):ue[re]=ee(fe),this},rmQuery:function(re){var fe=this.query;return I(re)||(re=z(re)),G(re,function(ue){delete fe[ue]}),this},toString:function(){return d.stringify(this)}},{parse:function(re){var fe={protocol:"",auth:"",hostname:"",hash:"",query:{},port:"",pathname:"",slashes:!1},ue=w(re),ge=!1,ye=ue.match(ie);if(ye&&(ye=ye[0],fe.protocol=ye.toLowerCase(),ue=ue.substr(ye.length)),ye&&(ge=ue.substr(0,2)==="//")&&(ue=ue.slice(2),fe.slashes=!0),ge){for(var be=ue,ve=-1,Me=0,we=se.length;Me<we;Me++){var Be=ue.indexOf(se[Me]);Be!==-1&&(ve===-1||Be<ve)&&(ve=Be)}ve>-1&&(be=ue.slice(0,ve),ue=ue.slice(ve));var De=be.lastIndexOf("@");De!==-1&&(fe.auth=decodeURIComponent(be.slice(0,De)),be=be.slice(De+1)),fe.hostname=be;var Fe=be.match(oe);Fe&&((Fe=Fe[0])!==":"&&(fe.port=Fe.substr(1)),fe.hostname=be.substr(0,be.length-Fe.length))}var Oe=ue.indexOf("#");Oe!==-1&&(fe.hash=ue.substr(Oe),ue=ue.slice(0,Oe));var Ge=ue.indexOf("?");return Ge!==-1&&(fe.query=T.parse(ue.substr(Ge+1)),ue=ue.slice(0,Ge)),fe.pathname=ue||"/",fe},stringify:function(re){var fe=re.protocol+(re.slashes?"//":"")+(re.auth?encodeURIComponent(re.auth)+"@":"")+re.hostname+(re.port?":"+re.port:"")+re.pathname;return R(re.query)||(fe+="?"+T.stringify(re.query)),re.hash&&(fe+=re.hash),fe}});var ie=/^([a-z0-9.+-]+:)/i,oe=/:[0-9]*$/,se=["/","?","#"];_.exports=d},6097:function(_,d,v){var A=v(3974);d=function(C){return A(C)==="[object Number]"},_.exports=d},6167:function(_,d,v){var A=v(5693);d=function(C,w,T,R){R=R||1,w=A(w,T);for(var G=C.length,I=R>0?0:G-1;I>=0&&I<G;){if(w(C[I],I,C))return I;I+=R}return-1},_.exports=d},6186:function(_,d,v){var A=v(8971),C=v(6949);d=function(w,T){var R;for(R=(T=C(T,w)).shift();!A(R);){if((w=w[R])==null)return;R=T.shift()}return w},_.exports=d},6192:function(_,d,v){var A=this&&this.__createBinding||(Object.create?function(je,He,Xe,$e){$e===void 0&&($e=Xe);var We=Object.getOwnPropertyDescriptor(He,Xe);We&&!("get"in We?!He.__esModule:We.writable||We.configurable)||(We={enumerable:!0,get:function(){return He[Xe]}}),Object.defineProperty(je,$e,We)}:function(je,He,Xe,$e){$e===void 0&&($e=Xe),je[$e]=He[Xe]}),C=this&&this.__setModuleDefault||(Object.create?function(je,He){Object.defineProperty(je,"default",{enumerable:!0,value:He})}:function(je,He){je.default=He}),w=this&&this.__importStar||function(je){if(je&&je.__esModule)return je;var He={};if(je!=null)for(var Xe in je)Xe!=="default"&&Object.prototype.hasOwnProperty.call(je,Xe)&&A(He,je,Xe);return C(He,je),He},T=this&&this.__importDefault||function(je){return je&&je.__esModule?je:{default:je}};Object.defineProperty(d,"__esModule",{value:!0}),d.collectClassNamesFromSubtree=function(je){var He=(0,I.getNode)(je.nodeId),Xe=[];return ze(He,function($e){if($e.nodeType===1){var We=$e.getAttribute("class");if(We)for(var nt=0,Qt=We.split(/\s+/);nt<Qt.length;nt++){var Wt=Qt[nt];Xe.push(Wt)}}}),{classNames:(0,re.default)(Xe)}},d.copyTo=function(je){var He=je.nodeId,Xe=je.targetNodeId,$e=(0,I.getNode)(He),We=(0,I.getNode)(Xe),nt=$e.cloneNode(!0);return We.appendChild(nt),{nodeId:(0,I.getNodeId)(nt)}},d.enable=function(){De=!0,H.default.disconnect(),H.default.observe(document.documentElement),G.clear()},d.getDocument=function(){return{root:G.wrap(document,{depth:2})}},d.getOuterHTML=function(je){var He="";return je.nodeId&&(He=(0,I.getNode)(je.nodeId).outerHTML),{outerHTML:He}},d.moveTo=function(je){var He=je.nodeId,Xe=je.targetNodeId,$e=(0,I.getNode)(He);return(0,I.getNode)(Xe).appendChild($e),{nodeId:(0,I.getNodeId)($e)}},d.performSearch=function(je){var He=(0,ue.default)(je.query),Xe=[];try{Xe=(0,ve.default)(Xe,(0,ye.default)(document.querySelectorAll(He)))}catch{}try{Xe=(0,ve.default)(Xe,(0,be.default)(He))}catch{}ze(document,function(We){var nt=We.nodeType;if(nt===1){var Qt=We.localName;if((0,fe.default)("<".concat(Qt," "),He)||(0,fe.default)("</".concat(Qt,">"),He))return void Xe.push(We);var Wt=[];(0,ge.default)(We.attributes,function(Mn){var cr=Mn.name,In=Mn.value;return Wt.push(cr,In)});for(var Bn=0,Lt=Wt.length;Bn<Lt;Bn++)if((0,fe.default)((0,ue.default)(Wt[Bn]),He)){Xe.push(We);break}}else nt===3&&(0,fe.default)((0,ue.default)(We.nodeValue),He)&&Xe.push(We)});var $e=(0,we.createId)();return Fe.set($e,Xe),{searchId:$e,resultCount:Xe.length}},d.getSearchResults=function(je){var He=je.searchId,Xe=je.fromIndex,$e=je.toIndex,We=Fe.get(He).slice(Xe,$e);return{nodeIds:(0,se.default)(We,function(nt){var Qt=(0,I.getNodeId)(nt);return Qt||Oe(nt)})}},d.pushNodesToFrontend=Oe,d.discardSearchResults=function(je){Fe.delete(je.searchId)},d.pushNodesByBackendIdsToFrontend=function(je){return{nodeIds:je.backendNodeIds}},d.removeNode=function(je){var He=(0,I.getNode)(je.nodeId);(0,Y.default)(He).remove()},d.requestChildNodes=function(je){var He=je.nodeId,Xe=je.depth,$e=Xe===void 0?1:Xe,We=(0,I.getNode)(He);R.default.trigger("DOM.setChildNodes",{parentId:He,nodes:G.getChildNodes(We,$e)})},d.requestNode=function(je){var He=z.getObj(je.objectId);return{nodeId:(0,I.getNodeId)(He)}},d.resolveNode=function(je){var He=(0,I.getNode)(je.nodeId);return{object:z.wrap(He)}},d.setAttributesAsText=function(je){var He=je.name,Xe=je.text,$e=je.nodeId,We=(0,I.getNode)($e);He&&We.removeAttribute(He),(0,Y.default)(We).attr((nt=Xe,nt="<div ".concat(nt,"></div>"),oe.default.parse(nt)[0].attrs));var nt},d.setAttributeValue=function(je){var He=je.nodeId,Xe=je.name,$e=je.value;(0,I.getNode)(He).setAttribute(Xe,$e)},d.setInspectedNode=function(je){var He=(0,I.getNode)(je.nodeId);Ge.unshift(He),Ge.length>5&&Ge.pop();for(var Xe=0;Xe<5;Xe++)(0,Me.setGlobal)("$".concat(Xe),Ge[Xe])},d.setNodeValue=function(je){var He=je.nodeId,Xe=je.value;(0,I.getNode)(He).nodeValue=Xe},d.setOuterHTML=function(je){var He=je.nodeId,Xe=je.outerHTML;(0,I.getNode)(He).outerHTML=Xe},d.getDOMNodeId=function(je){var He=je.node;return{nodeId:G.getOrCreateNodeId(He)}},d.getDOMNode=function(je){var He=je.nodeId;return{node:(0,I.getNode)(He)}},d.getTopLayerElements=function(){return{nodeIds:[]}},d.getNodesForSubtreeByStyle=function(){return{nodeIds:[]}};var R=T(v(8665)),G=w(v(9893)),I=v(9893),z=w(v(2484)),H=T(v(8757)),Y=T(v(3693)),ee=T(v(4236)),ie=T(v(9464)),oe=T(v(9548)),se=T(v(3915)),re=T(v(438)),fe=T(v(3249)),ue=T(v(96)),ge=T(v(9100)),ye=T(v(769)),be=T(v(8862)),ve=T(v(4069)),Me=v(2627),we=v(916),Be,De=!1;(Be=Element.prototype.attachShadow)&&(Element.prototype.attachShadow=function(je){var He=Be.apply(this,[je]);if(!G.isValidNode(this))return He;if(this.chobitsuShadowRoot=He,De){H.default.observe(He);var Xe=(0,I.getNodeId)(this);Xe&&R.default.trigger("DOM.shadowRootPushed",{hostId:Xe,root:G.wrap(He,{depth:1})})}return He});var Fe=new Map;function Oe(je){for(var He=[je],Xe=je.parentNode;Xe&&(He.push(Xe),!(We=(0,I.getNodeId)(Xe)));)Xe=Xe.parentNode;for(;He.length;){var $e=He.pop(),We=(0,I.getNodeId)($e);R.default.trigger("DOM.setChildNodes",{parentId:We,nodes:G.getChildNodes($e,1)})}return(0,I.getNodeId)(je)}var Ge=[];function ze(je,He){for(var Xe=G.filterNodes(je.childNodes),$e=0,We=Xe.length;$e<We;$e++){var nt=Xe[$e];He(nt),ze(nt,He)}}H.default.on("attributes",function(je,He){var Xe=(0,I.getNodeId)(je);if(Xe){var $e=je.getAttribute(He);(0,ee.default)($e)?R.default.trigger("DOM.attributeRemoved",{nodeId:Xe,name:He}):R.default.trigger("DOM.attributeModified",{nodeId:Xe,name:He,value:$e})}}),H.default.on("childList",function(je,He,Xe){var $e=(0,I.getNodeId)(je);if($e){if(He=G.filterNodes(He),Xe=G.filterNodes(Xe),!(0,ie.default)(He)){Mn();for(var We=0,nt=He.length;We<nt;We++){var Qt=He[We],Wt=G.getPreviousNode(Qt),Bn=Wt?(0,I.getNodeId)(Wt):0,Lt={node:G.wrap(Qt,{depth:0}),parentNodeId:$e,previousNodeId:Bn};R.default.trigger("DOM.childNodeInserted",Lt)}}if(!(0,ie.default)(Xe))for(We=0,nt=Xe.length;We<nt;We++){if(Qt=Xe[We],!(0,I.getNodeId)(Qt)){Mn();break}R.default.trigger("DOM.childNodeRemoved",{nodeId:(0,I.getNodeId)(Qt),parentNodeId:$e})}}function Mn(){R.default.trigger("DOM.childNodeCountUpdated",{childNodeCount:G.wrap(je,{depth:0}).childNodeCount,nodeId:$e})}}),H.default.on("characterData",function(je){var He=(0,I.getNodeId)(je);He&&R.default.trigger("DOM.characterDataModified",{characterData:je.nodeValue,nodeId:He})})},6195:function(_,d,v){var A=v(5693),C=v(3145);d=function(w,T,R){T=A(T,R);for(var G,I=C(w),z=0,H=I.length;z<H;z++)if(T(w[G=I[z]],G,w))return G},_.exports=d},6214:function(_,d,v){var A=v(3974);d=Array.isArray?Array.isArray:function(C){return A(C)==="[object Array]"},_.exports=d},6307:function(_,d,v){var A=v(8971),C=v(9100);d=function(w,T){return function(R){return C(arguments,function(G,I){if(I!==0){var z=w(G);C(z,function(H){T&&!A(R[H])||(R[H]=G[H])})}}),R}},_.exports=d},6314:function(_){_.exports=function(d){var v=[];return v.toString=function(){return this.map(function(A){var C=function(w,T){var R=w[1]||"",G=w[3];if(!G)return R;if(T&&typeof btoa=="function"){var I=(H=G,Y=btoa(unescape(encodeURIComponent(JSON.stringify(H)))),ee="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(Y),"/*# ".concat(ee," */")),z=G.sources.map(function(ie){return"/*# sourceURL=".concat(G.sourceRoot||"").concat(ie," */")});return[R].concat(z).concat([I]).join(`
`)}var H,Y,ee;return[R].join(`
`)}(A,d);return A[2]?"@media ".concat(A[2]," {").concat(C,"}"):C}).join("")},v.i=function(A,C,w){typeof A=="string"&&(A=[[null,A,""]]);var T={};if(w)for(var R=0;R<this.length;R++){var G=this[R][0];G!=null&&(T[G]=!0)}for(var I=0;I<A.length;I++){var z=[].concat(A[I]);w&&T[z[0]]||(C&&(z[2]?z[2]="".concat(C," and ").concat(z[2]):z[2]=C),v.push(z))}},v}},6334:function(_,d,v){var A=v(9100),C=v(5224),w=v(3915),T=v(4966);function R(I){return+("0x"+I)}d=function(I){try{return decodeURIComponent(I)}catch{var z=I.match(G);return z&&A(z,function(Y){I=I.replace(Y,function(ee){ee=ee.split("%").slice(1);var ie=w(ee,R);return ee=C.encode(ie),ee=T.decode(ee,!0),ee}(Y))}),I}};var G=/(%[a-f0-9]{2})+/gi;_.exports=d},6392:function(_,d,v){var A=v(1710),C=v(2561);d=function(w,T,R){var G=(w=C(w)).length;return R=R||" ",G<T&&(w=(A(R,T-G)+w).slice(-T)),w},_.exports=d},6459:function(_,d,v){var A=v(8971);d=function(C,w,T){if(A(w))return C;switch(T??3){case 1:return function(R){return C.call(w,R)};case 3:return function(R,G,I){return C.call(w,R,G,I)};case 4:return function(R,G,I,z){return C.call(w,R,G,I,z)}}return function(){return C.apply(w,arguments)}},_.exports=d},6476:function(_,d,v){var A=this&&this.__awaiter||function(ee,ie,oe,se){return new(oe||(oe=Promise))(function(re,fe){function ue(be){try{ye(se.next(be))}catch(ve){fe(ve)}}function ge(be){try{ye(se.throw(be))}catch(ve){fe(ve)}}function ye(be){var ve;be.done?re(be.value):(ve=be.value,ve instanceof oe?ve:new oe(function(Me){Me(ve)})).then(ue,ge)}ye((se=se.apply(ee,ie||[])).next())})},C=this&&this.__generator||function(ee,ie){var oe,se,re,fe={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]},ue=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return ue.next=ge(0),ue.throw=ge(1),ue.return=ge(2),typeof Symbol=="function"&&(ue[Symbol.iterator]=function(){return this}),ue;function ge(ye){return function(be){return function(ve){if(oe)throw new TypeError("Generator is already executing.");for(;ue&&(ue=0,ve[0]&&(fe=0)),fe;)try{if(oe=1,se&&(re=2&ve[0]?se.return:ve[0]?se.throw||((re=se.return)&&re.call(se),0):se.next)&&!(re=re.call(se,ve[1])).done)return re;switch(se=0,re&&(ve=[2&ve[0],re.value]),ve[0]){case 0:case 1:re=ve;break;case 4:return fe.label++,{value:ve[1],done:!1};case 5:fe.label++,se=ve[1],ve=[0];continue;case 7:ve=fe.ops.pop(),fe.trys.pop();continue;default:if(re=fe.trys,!((re=re.length>0&&re[re.length-1])||ve[0]!==6&&ve[0]!==2)){fe=0;continue}if(ve[0]===3&&(!re||ve[1]>re[0]&&ve[1]<re[3])){fe.label=ve[1];break}if(ve[0]===6&&fe.label<re[1]){fe.label=re[1],re=ve;break}if(re&&fe.label<re[2]){fe.label=re[2],fe.ops.push(ve);break}re[2]&&fe.ops.pop(),fe.trys.pop();continue}ve=ie.call(ee,fe)}catch(Me){ve=[6,Me],se=0}finally{oe=re=0}if(5&ve[0])throw ve[1];return{value:ve[0]?ve[1]:void 0,done:!0}}([ye,be])}}},w=this&&this.__importDefault||function(ee){return ee&&ee.__esModule?ee:{default:ee}};Object.defineProperty(d,"__esModule",{value:!0});var T=w(v(8665)),R=w(v(9993)),G=w(v(8046)),I=w(v(9100)),z=w(v(2263)),H=v(916),Y=function(){function ee(){var ie=this;this.resolves=new Map,this.domains=new Map,this.onMessage=R.default,T.default.on("message",function(oe){var se=JSON.parse(oe),re=ie.resolves.get(se.id);if(re&&re(se.result),!se.id){var fe=se.method.split("."),ue=fe[0],ge=fe[1],ye=ie.domains.get(ue);ye&&ye.emit(ge,se.params)}ie.onMessage(oe)})}return ee.prototype.domain=function(ie){return this.domains.get(ie)},ee.prototype.setOnMessage=function(ie){this.onMessage=ie},ee.prototype.sendMessage=function(ie,oe){var se=this;oe===void 0&&(oe={});var re=(0,G.default)();return this.sendRawMessage(JSON.stringify({id:re,method:ie,params:oe})),new Promise(function(fe){se.resolves.set(re,fe)})},ee.prototype.sendRawMessage=function(ie){return A(this,void 0,void 0,function(){var oe,se,re,fe,ue,ge,ye;return C(this,function(be){switch(be.label){case 0:oe=JSON.parse(ie),se=oe.method,re=oe.params,fe=oe.id,ue={id:fe},be.label=1;case 1:return be.trys.push([1,3,,4]),ge=ue,[4,this.callMethod(se,re)];case 2:return ge.result=be.sent(),[3,4];case 3:return(ye=be.sent())instanceof H.ErrorWithCode?ue.error={message:ye.message,code:ye.code}:ye instanceof Error&&(ue.error={message:ye.message}),[3,4];case 4:return T.default.emit("message",JSON.stringify(ue)),[2]}})})},ee.prototype.register=function(ie,oe){var se=this.domains,re=se.get(ie);re||(re={},z.default.mixin(re)),(0,I.default)(oe,function(fe,ue){re[ue]=fe}),se.set(ie,re)},ee.prototype.callMethod=function(ie,oe){return A(this,void 0,void 0,function(){var se,re,fe,ue;return C(this,function(ge){if(se=ie.split("."),re=se[0],fe=se[1],(ue=this.domain(re))&&ue[fe])return[2,ue[fe](oe)||{}];throw Error("".concat(ie," unimplemented"))})})},ee}();d.default=Y},6493:function(_,d){d=function(v){return v===!0||v===!1},_.exports=d},6513:function(_,d,v){var A=v(9760);d=function(w){if(!A(w))return{};if(C)return C(w);function T(){}return T.prototype=w,new T};var C=Object.create;_.exports=d},6567:function(_,d,v){(d=v(6314)(!1)).push([_.id,'#_console{padding-top:40px;padding-bottom:24px;width:100%;height:100%}#_console._js-input-hidden{padding-bottom:0}#_console ._control{padding:10px 10px 10px 35px;position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border)}#_console ._control [class*=" _icon-"],#_console ._control [class^=eruda-icon-]{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_console ._control [class*=" _icon-"]._active,#_console ._control [class*=" _icon-"]:active,#_console ._control [class^=eruda-icon-]._active,#_console ._control [class^=eruda-icon-]:active{color:var(--accent)}#_console ._control ._icon-clear{padding-right:0;left:0}#_console ._control ._icon-copy{right:0}#_console ._control ._icon-filter{right:23px}#_console ._control ._level{cursor:pointer;font-size:12px;height:20px;display:inline-block;margin:0 2px;padding:0 4px;line-height:20px;transition:background-color .3s,color .3s}#_console ._control ._level._active{background:var(--highlight);color:var(--select-foreground)}#_console ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:55px;font-size:14px;text-overflow:ellipsis}#_console ._js-input{pointer-events:none;position:absolute;z-index:100;left:0;bottom:0;width:100%;border-top:1px solid var(--border);height:24px}#_console ._js-input ._icon-arrow-right{line-height:23px;color:var(--accent);position:absolute;left:10px;top:0;z-index:10}#_console ._js-input._active{height:100%;padding-top:40px;padding-bottom:40px;border-top:none}#_console ._js-input._active ._icon-arrow-right{display:none}#_console ._js-input._active textarea{overflow:auto;padding-left:10px}#_console ._js-input ._buttons{display:none;position:absolute;left:0;bottom:0;width:100%;height:40px;color:var(--primary);background:var(--darker-background);font-size:12px;border-top:1px solid var(--border)}#_console ._js-input ._buttons ._button{pointer-events:all;cursor:pointer;flex:1;text-align:center;border-right:1px solid var(--border);height:40px;line-height:40px;transition:background-color .3s,color .3s}#_console ._js-input ._buttons ._button:last-child{border-right:none}#_console ._js-input ._buttons ._button:active{color:var(--select-foreground);background:var(--highlight)}#_console ._js-input textarea{overflow:hidden;pointer-events:all;padding:3px 10px;padding-left:25px;outline:0;border:none;font-size:14px;width:100%;height:100%;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;resize:none;color:var(--primary);background:var(--background)}._safe-area #_console{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console._js-input-hidden{padding-bottom:0}._safe-area #_console ._js-input{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input._active{height:100%;padding-bottom:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons{height:calc(40px + env(safe-area-inset-bottom))}._safe-area #_console ._js-input ._buttons ._button{height:calc(40px + env(safe-area-inset-bottom))}',""]),_.exports=d},6620:function(_,d,v){var A=v(1909),C=v(6631),w=v(3145);d=function(z){var H=I(z=(z=z||(A?navigator.userAgent:"")).toLowerCase(),"msie ");if(H)return{version:H,name:"ie"};if(R.test(z))return{version:11,name:"ie"};for(var Y=0,ee=G.length;Y<ee;Y++){var ie=G[Y],oe=z.match(T[ie]);if(oe!=null){var se=C(oe[1].split(".")[0]);return ie==="opera"&&(se=I(z,"version/")||se),{name:ie,version:se}}}return{name:"unknown",version:-1}};var T={edge:/edge\/([0-9._]+)/,firefox:/firefox\/([0-9.]+)(?:\s|$)/,opera:/opera\/([0-9.]+)(?:\s|$)/,android:/android\s([0-9.]+)/,ios:/version\/([0-9._]+).*mobile.*safari.*/,safari:/version\/([0-9._]+).*safari/,chrome:/(?!chrom.*opr)chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/},R=/trident\/7\./,G=w(T);function I(z,H){var Y=z.indexOf(H);if(Y>-1)return C(z.substring(Y+H.length,z.indexOf(".",Y)))}_.exports=d},6631:function(_,d,v){var A=v(6030);d=function(C){return C?(C=A(C))-C%1:C===0?C:0},_.exports=d},6717:function(_,d,v){(d=v(6314)(!1)).push([_.id,"._container ._entry-btn{touch-action:none;width:40px;height:40px;display:flex;background:#000;opacity:.3;border-radius:10px;position:relative;z-index:1000;transition:opacity .3s;color:#fff;font-size:25px;align-items:center;justify-content:center}._container ._entry-btn._active,._container ._entry-btn:active{opacity:.8}",""]),_.exports=d},6741:function(_,d,v){var A=v(2717),C=v(6186),w=v(8105),T=v(2508),R=v(1738),G=v(3957);d=A({initialize:function(I,z){this._locale=I,this._langs=z},set:function(I,z){this._langs[I]?w(this._langs[I],z):this._langs[I]=z},t:function(I,z){var H="",Y=this._langs[this._locale];return Y?(H=C(Y,I),z&&(R(H)?H=T(H,z):G(H)&&(H=H(z))),H||""):""},locale:function(I){this._locale=I}}),_.exports=d},6774:function(_,d){d=function(v,A,C){A==null&&(A=v,v=0);var w=Math.random();return C||v%1||A%1?Math.min(v+w*(A-v+parseFloat("1e-"+((w+"").length-1))),A):v+Math.floor(w*(A-v+1))},_.exports=d},6793:function(_,d,v){(d=v(6314)(!1)).push([_.id,"@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' _icon-'],[class^='_icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}._icon-arrow-left:before{content:'\\f101'}._icon-arrow-right:before{content:'\\f102'}._icon-caret-down:before{content:'\\f103'}._icon-caret-right:before{content:'\\f104'}._icon-clear:before{content:'\\f105'}._icon-compress:before{content:'\\f106'}._icon-copy:before{content:'\\f107'}._icon-delete:before{content:'\\f108'}._icon-error:before{content:'\\f109'}._icon-expand:before{content:'\\f10a'}._icon-eye:before{content:'\\f10b'}._icon-filter:before{content:'\\f10c'}._icon-play:before{content:'\\f10d'}._icon-record:before{content:'\\f10e'}._icon-refresh:before{content:'\\f10f'}._icon-reset:before{content:'\\f110'}._icon-search:before{content:'\\f111'}._icon-select:before{content:'\\f112'}._icon-tool:before{content:'\\f113'}._icon-warn:before{content:'\\f114'}",""]),_.exports=d},6833:function(_,d){var v=/([A-Z])/g,A=/[_.\- ]+/g,C=/(^-)|(-$)/g;d=function(w){return(w=w.replace(v,"-$1").toLowerCase().replace(A,"-").replace(C,"")).split("-")},_.exports=d},6866:function(_,d,v){var A=v(1738),C=v(9760),w=v(7604),T=v(8971),R=v(3249),G=v(6097),I=v(3612),z=v(6969),H=v(9100);d=function(ee,ie,oe){if(ee=I(ee),T(oe)&&A(ie))return function(re,fe){return re.style[z(fe)]||getComputedStyle(re,"").getPropertyValue(fe)}(ee[0],ie);var se=ie;C(se)||((se={})[ie]=oe),function(re,fe){H(re,function(ue){var ge=";";H(fe,function(ye,be){be=z.dash(be),ge+=be+":"+function(ve,Me){var we=G(Me)&&!R(Y,w(ve));return we?Me+"px":Me}(be,ye)+";"}),ue.style.cssText+=ge})}(ee,se)};var Y=["column-count","columns","font-weight","line-weight","opacity","z-index","zoom"];_.exports=d},6911:function(_,d,v){v.d(d,{j:function(){return rr},A:function(){return An}});var A=v(2284),C=v(3029),w=v(2901),T=v(388),R=v(3954),G=v(991),I=v(5361),z=v(5427),H=v.n(z),Y=v(6097),ee=v.n(Y),ie=v(6493),oe=v.n(ie),se=v(96),re=v.n(se),fe=v(9760),ue=v.n(fe),ge=v(6214),ye=v.n(ge),be=v(9931),ve=v.n(be),Me=v(3145),we=v.n(Me),Be=v(9100),De=v.n(Be),Fe=v(1168),Oe=v.n(Fe),Ge=v(8796),ze=v.n(Ge),je=v(2989),He=v.n(je),Xe=v(3693),$e=v.n(Xe),We=v(466),nt=v.n(We),Qt=v(15),Wt=v.n(Qt),Bn=v(1738),Lt=v.n(Bn),Mn=v(7514),cr=v.n(Mn),In=v(2571),Zn=v.n(In),$n=v(7140),Rn=v.n($n),Dn=v(2561),Gt=v.n(Dn),Jn=v(9993),Nn=v.n(Jn),Xn=v(1532),jn=v.n(Xn),Un=v(8105),bn=v.n(Un),Kn=function(){return(0,w.A)(function Ft(){(0,C.A)(this,Ft),this.id=0,this.visited=[]},[{key:"set",value:function(Ft,Hn){var wn=this.visited,lr=this.id,rt={id:lr,val:Ft};return bn()(rt,Hn),wn.push(rt),this.id++,lr}},{key:"get",value:function(Ft){for(var Hn=this.visited,wn=0,lr=Hn.length;wn<lr;wn++){var rt=Hn[wn];if(Ft===rt.val)return rt}return!1}}])}(),Qn=v(9405),pr=v.n(Qn),fn=v(5902),Mt=v.n(fn),yn=function(Ft){return Mt()(Gt()(Ft)).replace(/\n/g,"").replace(/\f|\r|\t/g,"")};function kn(Ft){return Ft.length>500&&(Ft=Ft.slice(0,500)+"...")," "+pr()(function(Hn){var wn=Hn.match(nr);return wn?wn[0]:Hn}(Ft).replace("function",""))}var nr=/function(.*?)\((.*?)\)/,dr=v(1009),Qr=v.n(dr),Wr=v(5630),Gr=v.n(Wr),Hr=v(6030),Kr=v.n(Hr),ti=v(1932),Mi=v.n(ti),Ci=v(2263),oi=v.n(Ci),Ii=v(3915),wr=v.n(Ii),Br=v(5169),ui=v.n(Br),vi=v(9548),qr=v.n(vi),br=v(3249),er=v.n(br),Gn=v(5004),Er=v.n(Gn);v(9410),v(8609);function mn(Ft){var Hn="luna-".concat(Ft,"-");function wn(lr){return wr()(pr()(lr).split(/\s+/),function(rt){return er()(rt,Hn)?rt:rt.replace(/[\w-]+/,function(ln){return"".concat(Hn).concat(ln)})}).join(" ")}return function(lr){if(/<[^>]*>/g.test(lr))try{var rt=qr().parse(lr);return tr(rt,function(ln){ln.attrs&&ln.attrs.class&&(ln.attrs.class=wn(ln.attrs.class))}),qr().stringify(rt)}catch{return wn(lr)}return wn(lr)}}function tr(Ft,Hn){for(var wn=0,lr=Ft.length;wn<lr;wn++){var rt=Ft[wn];Hn(rt),rt.content&&tr(rt.content,Hn)}}ui();var vr=v(5651),Ar=v.n(vr),Tn=v(961),tt=v.n(Tn),$t=v(7e3),dn=v.n($t);function Qe(){try{var Ft=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qe=function(){return!!Ft})()}var gn=function(Ft){function Hn(wn,lr){var rt,ln,Cn=lr.compName,zn=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,Sn=zn===void 0?"light":zn;return(0,C.A)(this,Hn),rt=function(yr,ur,hr){return ur=(0,R.A)(ur),(0,T.A)(yr,Qe()?Reflect.construct(ur,[],(0,R.A)(yr).constructor):ur.apply(yr,hr))}(this,Hn),rt.subComponents=[],rt.theme="",rt.onThemeChange=function(yr){rt.options.theme==="auto"&&rt.setTheme(yr)},rt.compName=Cn,rt.c=mn(Cn),rt.options={},rt.container=wn,rt.$container=$e()(wn),rt.$container.addClass(["luna-".concat(Cn),rt.c("platform-".concat((ln=Er()(),ln==="os x"?"mac":ln)))]),rt.on("changeOption",function(yr,ur){if(yr==="theme"&&ur){var hr=ur;ur==="auto"&&(hr=dn().get()),rt.setTheme(hr),De()(rt.subComponents,function(fr){return fr.setOption("theme",ur)})}}),dn().on("change",rt.onThemeChange),rt.setOption("theme",Sn),rt}return(0,I.A)(Hn,Ft),(0,w.A)(Hn,[{key:"destroy",value:function(){var wn=this;this.destroySubComponents();var lr=this.$container,rt=lr.attr("class");De()(rt.split(/\s+/),function(ln){Qr()(ln,"luna-".concat(wn.compName))&&lr.rmClass(ln)}),lr.html(""),this.emit("destroy"),this.removeAllListeners(),dn().off("change",this.onThemeChange)}},{key:"setOption",value:function(wn,lr){var rt=this,ln=this.options,Cn={};typeof wn=="string"?Cn[wn]=lr:Cn=wn,De()(Cn,function(zn,Sn){var yr=ln[Sn];ln[Sn]=zn,zn!==yr&&rt.emit("changeOption",Sn,zn,yr)})}},{key:"getOption",value:function(wn){return this.options[wn]}},{key:"addSubComponent",value:function(wn){wn.setOption("theme",this.options.theme),this.subComponents.push(wn)}},{key:"removeSubComponent",value:function(wn){tt()(this.subComponents,function(lr){return lr===wn})}},{key:"destroySubComponents",value:function(){De()(this.subComponents,function(wn){return wn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(wn){var lr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ar()(wn,lr),bn()(this.options,wn)}},{key:"find",value:function(wn){return this.$container.find(this.c(wn))}},{key:"setTheme",value:function(wn){var lr=this.c,rt=this.$container;this.theme&&rt.rmClass(lr("theme-".concat(this.theme))),rt.addClass(lr("theme-".concat(wn))),this.theme=wn}}])}(oi());function sr(){try{var Ft=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sr=function(){return!!Ft})()}var rr=function(Ft){function Hn(wn){var lr,rt,ln,Cn;return(0,C.A)(this,Hn),rt=this,ln=Hn,Cn=[wn,{compName:"object-viewer"}],ln=(0,R.A)(ln),(lr=(0,T.A)(rt,sr()?Reflect.construct(ln,Cn||[],(0,R.A)(rt).constructor):ln.apply(rt,Cn))).onItemClick=function(zn){var Sn=lr,yr=Sn.map,ur=Sn.c,hr=$e()(zn.curTarget),fr=hr.data("object-id"),Sr=hr.find("span").eq(0);if(!hr.data("first-level")&&(fr&&(hr.find("ul").html(lr.objToHtml(yr[fr],!1)),hr.rmAttr("data-object-id")),zn.stopImmediatePropagation(),Sr.hasClass(ur("expanded")))){var Lr=hr.find("ul").eq(0);Sr.hasClass(ur("collapsed"))?(Sr.rmClass(ur("collapsed")),Lr.show()):(Sr.addClass(ur("collapsed")),Lr.hide()),lr.emit("change")}},lr.bindEvent(),lr}return(0,I.A)(Hn,Ft),(0,w.A)(Hn,[{key:"set",value:function(wn){Lt()(wn)&&(wn=JSON.parse(wn)),this.data={id:Gr()("json"),enumerable:{0:wn}},this.map={},it(this.map,this.data),this.render()}},{key:"destroy",value:function(){var wn,lr,rt,ln,Cn;(wn=Hn,lr="destroy",rt=this,ln=3,Cn=(0,G.A)((0,R.A)(1&ln?wn.prototype:wn),lr,rt),2&ln&&typeof Cn=="function"?function(zn){return Cn.apply(rt,zn)}:Cn)([]),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(wn,lr){var rt=this,ln="";return De()(["enumerable","unenumerable","symbol"],function(Cn){if(wn[Cn]){var zn=we()(wn[Cn]);jn()(zn);for(var Sn=0,yr=zn.length;Sn<yr;Sn++){var ur=zn[Sn];ln+=rt.createEl(ur,wn[Cn][ur],Cn,lr)}}}),wn.proto&&(ln===""?ln=this.objToHtml(wn.proto):ln+=this.createEl("[[Prototype]]",wn.proto,"proto")),ln}},{key:"createEl",value:function(wn,lr,rt){var ln=arguments.length>3&&arguments[3]!==void 0&&arguments[3],Cn=this.c,zn=(0,A.A)(lr);if(lr===null)return"<li>".concat(Sr(wn),'<span class="').concat(Cn("null"),'">null</span></li>');if(ee()(lr)||oe()(lr))return"<li>".concat(Sr(wn),'<span class="').concat(Cn(zn),'">').concat(yn(lr),"</span></li>");if(lr.type==="RegExp"&&(zn="regexp"),lr.type==="Number"&&(zn="number"),lr.type==="Number"||lr.type==="RegExp")return"<li>".concat(Sr(wn),'<span class="').concat(Cn(zn),'">').concat(yn(lr.value),"</span></li>");if(lr.type==="Undefined"||lr.type==="Symbol")return"<li>".concat(Sr(wn),'<span class="').concat(Cn("special"),'">').concat(re()(lr.type),"</span></li>");if(lr==="(...)")return"<li>".concat(Sr(wn),'<span class="').concat(Cn("special"),'">').concat(lr,"</span></li>");if(ue()(lr)){var Sn=lr.id,yr=lr.reference,ur=function(Lr){var Nr=Lr.type,xr=Lr.value;if(Nr)return Nr==="Function"?kn(xr):Nr==="Array"&&Lr.unenumerable?"Array(".concat(Lr.unenumerable.length,")"):Lr.type}(lr)||ve()(zn),hr=ln?"":'<span class="'.concat(Cn("expanded collapsed"),'"><span class="').concat(Cn("icon icon-caret-right"),'"></span><span class="').concat(Cn("icon icon-caret-down"),'"></span></span>'),fr="<li ".concat(ln?'data-first-level="true"':""," ").concat('data-object-id="'+(yr||Sn)+'"',">").concat(hr).concat(Sr(wn),'<span class="').concat(Cn("open"),'">').concat(ln?"":ur,'</span><ul class="').concat(Cn(zn),'" ').concat(ln?"":'style="display:none"',">");return ln&&(fr+=this.objToHtml(this.map[Sn])),fr+'</ul><span class="'.concat(Cn("close"),'"></span></li>')}function Sr(Lr){if(ln||ue()(lr)&&lr.jsonSplitArr)return"";var Nr=Cn("key");return rt==="unenumerable"||rt==="symbol"?Nr=Cn("key-lighter"):rt==="proto"&&(Nr=Cn("key-special")),'<span class="'.concat(Nr,'">').concat(yn(Lr),"</span>: ")}return Lt()(lr)&&lr.length>1e4&&(lr=Wt()(lr,50,{separator:" ",ellipsis:""})),"<li>".concat(Sr(wn),'<span class="').concat(Cn((0,A.A)(lr)),'">"').concat(yn(lr),'"</span></li>')}},{key:"render",value:function(){var wn=this.map[this.data.id];this.$container.html(this.objToHtml(wn,!0))}},{key:"bindEvent",value:function(){this.$container.on("click","li",this.onItemClick)}}])}(gn);function it(Ft,Hn){var wn=Hn.id;if(wn||wn===0){if(Hn.type&&Qr()(Hn.type,"Array")&&Hn.enumerable){var lr=function(Sn,yr,ur){var hr=[],fr={};return De()(Sn.enumerable,function(Sr,Lr){var Nr=Kr()(Lr);Mi()(Nr)?fr[Lr]=Sr:hr[Nr]=Sr}),hr.enumerable=fr,hr.type=ur,hr.id=yr,Sn.unenumerable&&(hr.unenumerable=Sn.unenumerable),Sn.symbol&&(hr.symbol=Sn.symbol),Sn.proto&&(hr.proto=Sn.proto),hr}(Hn,wn,Hn.type);lr.length>100&&(Hn=function(Sn){var yr=0,ur={};De()(Rn()(Sn,100),function(fr){var Sr={},Lr=yr;Sr.type="["+Lr,Sr.enumerable={},De()(fr,function(xr){Sr.enumerable[yr]=xr,yr+=1});var Nr=yr-1;Sr.type+=(Nr-Lr>0?"  "+Nr:"")+"]",Sr.id=Gr()("json"),Sr.jsonSplitArr=!0,ur[yr]=Sr});var hr={};return hr.enumerable=ur,hr.id=Sn.id,hr.type=Sn.type,Sn.unenumerable&&(hr.unenumerable=Sn.unenumerable),Sn.symbol&&(hr.symbol=Sn.symbol),Sn.proto&&(hr.proto=Sn.proto),hr}(lr))}Ft[wn]=Hn;var rt=[];De()(["enumerable","unenumerable","symbol"],function(Sn){if(Hn[Sn])for(var yr in Hn[Sn])rt.push(Hn[Sn][yr])}),Hn.proto&&rt.push(Hn.proto);for(var ln=0,Cn=rt.length;ln<Cn;ln++){var zn=rt[ln];ue()(zn)&&it(Ft,zn)}}}function At(){try{var Ft=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(At=function(){return!!Ft})()}_=v.hmd(_);var An=function(Ft){function Hn(wn){var lr,rt,ln,Cn,zn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,C.A)(this,Hn),rt=this,ln=Hn,Cn=[wn,{compName:"object-viewer"}],ln=(0,R.A)(ln),(lr=(0,T.A)(rt,At()?Reflect.construct(ln,Cn||[],(0,R.A)(rt).constructor):ln.apply(rt,Cn))).onItemClick=function(Sn){var yr=lr,ur=yr.map,hr=yr.c;if(!function(xr){var Cr=window.getSelection();if(!Cr||Cr.type!=="Range"||Cr.toString()==="")return!1;var Or=Cr.anchorNode,Ur=Cr.focusNode;return Cr.containsNode(xr,!0)||Or&&xr.contains(Or)||Ur&&xr.contains(Ur)}(Sn.curTarget)){var fr=$e()(Sn.curTarget),Sr=fr.data("object-id"),Lr=fr.find("span").eq(0);if(!fr.data("first-level")&&(Sr&&(fr.find("ul").html(lr.objToHtml(ur[Sr],!1)),fr.rmAttr("data-object-id")),Sn.stopImmediatePropagation(),Lr.hasClass(hr("expanded")))){var Nr=fr.find("ul").eq(0);Lr.hasClass(hr("collapsed"))?(Lr.rmClass(hr("collapsed")),Nr.show()):(Lr.addClass(hr("collapsed")),Nr.hide()),lr.emit("change")}}},lr.initOptions(zn,{prototype:!0,unenumerable:!1,accessGetter:!1}),lr.bindEvent(),lr.options.object&&lr.set(lr.options.object),lr}return(0,I.A)(Hn,Ft),(0,w.A)(Hn,[{key:"set",value:function(wn){this.data=[wn],this.visitor=new Kn,this.map={},this.render()}},{key:"destroy",value:function(){var wn,lr,rt,ln,Cn;(wn=Hn,lr="destroy",rt=this,ln=3,Cn=(0,G.A)((0,R.A)(1&ln?wn.prototype:wn),lr,rt),2&ln&&typeof Cn=="function"?function(zn){return Cn.apply(rt,zn)}:Cn)([]),this.$container.off("click","li",this.onItemClick)}},{key:"objToHtml",value:function(wn,lr){var rt=this,ln=this.visitor,Cn=wn,zn=!1,Sn=ln.get(wn);Sn&&Sn.self&&(Cn=Sn.self);var yr="",ur=["enumerable"],hr=we()(wn),fr=[],Sr=[],Lr=[],Nr={};if(this.options.unenumerable&&!lr&&(ur.push("unenumerable"),ur.push("symbol"),fr=nt()(cr()(wn,{prototype:!1,unenumerable:!0}),hr),Sr=Zn()(cr()(wn,{prototype:!1,symbol:!0}),function(Pr){return(0,A.A)(Pr)==="symbol"})),ye()(wn)&&wn.length>100){ur.unshift("virtual"),zn=!0;var xr=0,Cr={};De()(Rn()(wn,100),function(Pr){var Vr=Object.create(null),xi=xr,Ai="["+xi;De()(Pr,function(Si){Vr[xr]=Si,Cr[xr]=!0,xr++});var Ti=xr-1;Nr[Ai+=(Ti-xi>0?"  "+Ti:"")+"]"]=Vr}),Lr=we()(Nr),hr=Zn()(hr,function(Pr){return!Cr[Pr]})}if(De()(ur,function(Pr){var Vr=[];Vr=Pr==="symbol"?Sr:Pr==="unenumerable"?fr:Pr==="virtual"?Lr:hr,zn||jn()(Vr);for(var xi=0,Ai=Vr.length;xi<Ai;xi++){var Ti=Gt()(Vr[xi]),Si="",ir=Object.getOwnPropertyDescriptor(wn,Ti),bi=ir&&ir.get,vn=ir&&ir.set;if(bi&&!rt.options.accessGetter)Si="(...)";else try{Si=Pr==="virtual"?Nr[Ti]:Cn[Ti],ze()(Si)&&Si.catch(Nn())}catch(Ln){Si=Ln instanceof Error?Ln.message:Gt()(Ln)}yr+=rt.createEl(Ti,wn,Si,Pr,lr),bi&&(yr+=rt.createEl("get ".concat(Ti),wn,ir.get,Pr,lr)),vn&&(yr+=rt.createEl("set ".concat(Ti),wn,ir.set,Pr,lr))}}),this.options.prototype){var Or=H()(wn);if(!lr&&Or)if(yr===""){var Ur=ln.set(Or,{self:wn});this.map[Ur]=Or,yr=this.objToHtml(Or)}else yr+=this.createEl("[[Prototype]]",Cn||wn,Or,"proto")}return yr}},{key:"createEl",value:function(wn,lr,rt,ln){var Cn=arguments.length>4&&arguments[4]!==void 0&&arguments[4],zn=this.visitor,Sn=this.c,yr=(0,A.A)(rt),ur=He()(rt,!1);if(ln==="virtual"&&(ur=wn),rt===null)return"<li>".concat(Cr(wn),'<span class="').concat(Sn("null"),'">null</span></li>');if(ee()(rt)||oe()(rt))return"<li>".concat(Cr(wn),'<span class="').concat(Sn(yr),'">').concat(yn(rt),"</span></li>");if(ur==="RegExp"&&(yr="regexp"),ur==="Number"&&(yr="number"),ur==="Undefined"||ur==="Symbol")return"<li>".concat(Cr(wn),'<span class="').concat(Sn("special"),'">').concat(re()(ur),"</span></li>");if(rt==="(...)")return"<li>".concat(Cr(wn),'<span class="').concat(Sn("special"),'">').concat(rt,"</span></li>");if(ue()(rt)){var hr,fr=zn.get(rt);if(fr)hr=fr.id;else{var Sr={};ln==="proto"&&(Sr.self=lr),hr=zn.set(rt,Sr),this.map[hr]=rt}var Lr="Object";Lr=yr==="regexp"?'<span class="'.concat(Sn(yr),'">').concat(yn(rt)):yn(function(Or,Ur){if(Ur)return Ur==="Function"?kn(Oe()(Or)):Ur==="Array"?"Array(".concat(Or.length,")"):Ur}(rt,ur)||ve()(yr));var Nr=Cn?"":'<span class="'.concat(Sn("expanded collapsed"),'"><span class="').concat(Sn("icon icon-caret-right"),'"></span><span class="').concat(Sn("icon icon-caret-down"),'"></span></span>'),xr="<li ".concat(Cn?'data-first-level="true"':""," ").concat('data-object-id="'+hr+'"',">").concat(Nr).concat(Cr(wn),'<span class="').concat(Sn("open"),'">').concat(Cn?"":Lr,'</span><ul class="').concat(Sn(yr),'" ').concat(Cn?"":'style="display:none"',">");return Cn&&(xr+=this.objToHtml(rt)),xr+'</ul><span class="'.concat(Sn("close"),'"></span></li>')}function Cr(Or){if(Cn||ue()(rt)&&ln==="virtual")return"";var Ur=Sn("key");return ln==="unenumerable"||ln==="symbol"?Ur=Sn("key-lighter"):ln==="proto"&&(Ur=Sn("key-special")),'<span class="'.concat(Ur,'">').concat(yn(Or),"</span>: ")}return Lt()(rt)&&rt.length>1e4&&(rt=Wt()(rt,50,{separator:" ",ellipsis:""})),"<li>".concat(Cr(wn),'<span class="').concat(Sn((0,A.A)(rt)),'">"').concat(yn(rt),'"</span></li>')}},{key:"render",value:function(){this.$container.html(this.objToHtml(this.data,!0))}},{key:"bindEvent",value:function(){var wn=this;this.$container.on("click","li",this.onItemClick),this.on("changeOption",function(lr,rt){switch(lr){case"object":wn.set(rt);break;case"unenumerable":case"prototype":case"accessGetter":wn.render()}})}}])}(gn);An.Static=rr,function(Ft,Hn){try{Ft.exports=Hn,Ft.exports.default=Hn}catch{}}(_,An)},6948:function(_,d){var v=/<[^>]*>/g;d=function(A){return A.replace(v,"")},_.exports=d},6949:function(_,d,v){var A=v(365),C=v(6214);d=function(R,G){if(C(R))return R;if(G&&A(G,R))return[R];var I=[];return R.replace(w,function(z,H,Y,ee){I.push(Y?ee.replace(T,"$1"):H||z)}),I};var w=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,T=/\\(\\)?/g;_.exports=d},6962:function(_,d,v){var A=v(1909),C=v(1023),w=!1;function T(R){w&&d.emit(R)}d={start:function(){w=!0},stop:function(){w=!1}},C.mixin(d),A?(window.addEventListener("error",function(R){if(R.error)T(R.error);else if(R.message){var G=new Error(R.message);G.stack="Error: ".concat(R.message,` 
 at `).concat(R.filename,":").concat(R.lineno,":").concat(R.colno),T(G)}}),window.addEventListener("unhandledrejection",function(R){T(R.reason)})):(process.on("uncaughtException",T),process.on("unhandledRejection",T)),_.exports=d},6969:function(_,d,v){var A=v(5869),C=v(387),w=v(9931),T=v(365),R=v(7604);(d=A(function(H){if(H=H.replace(I,""),H=C(H),T(z,H))return H;for(var Y=G.length;Y--;){var ee=G[Y]+w(H);if(T(z,ee))return ee}return H})).dash=A(function(H){var Y=d(H);return(I.test(Y)?"-":"")+R(Y)});var G=["O","ms","Moz","Webkit"],I=/^(O)|(ms)|(Moz)|(Webkit)|(-o-)|(-ms-)|(-moz-)|(-webkit-)/g,z=document.createElement("p").style;_.exports=d},7e3:function(_,d,v){var A=v(2263),C=new(v(3737))("(prefers-color-scheme: dark)");d={get:function(){return C.isMatch()?"dark":"light"}},A.mixin(d),C.on("match",function(){return d.emit("change","dark")}),C.on("unmatch",function(){return d.emit("change","light")}),_.exports=d},7005:function(_,d,v){var A=v(2717),C=v(5395);d=A({initialize:function(){this.clear()},clear:function(){this._items=[],this.size=0},push:function(w){return this._items.push(w),++this.size},pop:function(){if(this.size)return this.size--,this._items.pop()},peek:function(){return this._items[this.size-1]},forEach:function(w,T){T=arguments.length>1?T:this;for(var R=this._items,G=this.size-1,I=0;G>=0;G--,I++)w.call(T,R[G],I,this)},toArr:function(){return C(this._items)}}),_.exports=d},7030:function(_,d,v){var A=v(1738),C=v(2517),w=v(2561),T=v(6392);d=function(Y,ee,ie,oe){arguments.length===1&&A(Y)&&!z.test(Y)&&(ee=Y,Y=void 0),Y=Y||new Date,C(Y)||(Y=new Date(Y));var se=(ee=w(d.masks[ee]||ee||d.masks.default)).slice(0,4);se!=="UTC:"&&se!=="GMT:"||(ee=ee.slice(4),ie=!0,se==="GMT:"&&(oe=!0));var re=ie?"getUTC":"get",fe=Y[re+"Date"](),ue=Y[re+"Day"](),ge=Y[re+"Month"](),ye=Y[re+"FullYear"](),be=Y[re+"Hours"](),ve=Y[re+"Minutes"](),Me=Y[re+"Seconds"](),we=Y[re+"Milliseconds"](),Be=ie?0:Y.getTimezoneOffset(),De={d:fe,dd:R(fe),ddd:d.i18n.dayNames[ue],dddd:d.i18n.dayNames[ue+7],m:ge+1,mm:R(ge+1),mmm:d.i18n.monthNames[ge],mmmm:d.i18n.monthNames[ge+12],yy:w(ye).slice(2),yyyy:ye,h:be%12||12,hh:R(be%12||12),H:be,HH:R(be),M:ve,MM:R(ve),s:Me,ss:R(Me),l:R(we,3),L:R(Math.round(we/10)),t:be<12?"a":"p",tt:be<12?"am":"pm",T:be<12?"A":"P",TT:be<12?"AM":"PM",Z:oe?"GMT":ie?"UTC":(w(Y).match(I)||[""]).pop().replace(H,""),o:(Be>0?"-":"+")+R(100*Math.floor(Math.abs(Be)/60)+Math.abs(Be)%60,4),S:["th","st","nd","rd"][fe%10>3?0:(fe%100-fe%10!=10)*fe%10]};return ee.replace(G,function(Fe){return Fe in De?De[Fe]:Fe.slice(1,Fe.length-1)})};var R=function(Y){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return T(w(Y),ee,"0")},G=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,I=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,z=/\d/,H=/[^-+\dA-Z]/g;d.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},d.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},_.exports=d},7119:function(_){_.exports=`.luna-dom-highlighter{position:fixed;left:0;top:0;width:100%;height:100%;z-index:100000;pointer-events:none;font-size:13px}.luna-dom-highlighter-fill{position:absolute;top:0;right:0;bottom:0;left:0}.luna-dom-highlighter-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-highlighter-platform-mac{color:#303942;font-family:'.SFNSDisplay-Regular','Helvetica Neue','Lucida Grande',sans-serif}.luna-dom-highlighter-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-dom-highlighter-px{color:gray}#luna-dom-highlighter-element-title{position:absolute;z-index:10}.luna-dom-highlighter-tooltip-content{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:#fff;padding:5px 8px;border:1px solid #fff;border-radius:3px;box-sizing:border-box;min-width:100px;max-width:min(300px,100% - 4px);z-index:2;background-clip:padding-box;will-change:transform;text-rendering:optimizeLegibility;pointer-events:none;filter:drop-shadow(0 2px 4px rgba(0,0,0,.35))}.luna-dom-highlighter-tooltip-content .luna-dom-highlighter-tooltip-arrow{background:#fff;width:15px;height:8px;position:absolute}.luna-dom-highlighter-element-info-section{margin-top:12px;margin-bottom:6px}.luna-dom-highlighter-section-name{color:#333;font-weight:500;font-size:10px;text-transform:uppercase;letter-spacing:.05em;line-height:12px}.luna-dom-highlighter-element-info{display:flex;flex-direction:column}.luna-dom-highlighter-element-info-header{display:flex;align-items:center}.luna-dom-highlighter-element-info-body{display:flex;flex-direction:column;padding-top:2px;margin-top:2px}.luna-dom-highlighter-element-info-row{display:flex;line-height:19px}.luna-dom-highlighter-separator-container{display:flex;align-items:center;flex:auto;margin-left:7px}.luna-dom-highlighter-separator{border-top:1px solid #ddd;width:100%}.luna-dom-highlighter-element-info-name{flex-shrink:0;color:#666}.luna-dom-highlighter-element-info-gap{flex:auto}.luna-dom-highlighter-element-info-value-color{display:flex;color:#303942;margin-left:10px;align-items:baseline}.luna-dom-highlighter-a11y-icon{width:16px;height:16px;background-repeat:no-repeat;display:inline-block}.luna-dom-highlighter-element-info-value-contrast{display:flex;align-items:center;text-align:right;color:#303942;margin-left:10px}.luna-dom-highlighter-element-info-value-contrast .luna-dom-highlighter-a11y-icon{margin-left:8px}.luna-dom-highlighter-element-info-value-icon{display:flex;align-items:center}.luna-dom-highlighter-element-info-value-text{text-align:right;color:#303942;margin-left:10px;align-items:baseline;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.luna-dom-highlighter-color-swatch{display:flex;margin-right:2px;width:10px;height:10px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);line-height:10px}.luna-dom-highlighter-color-swatch-inner{flex:auto;border:1px solid #808002}.luna-dom-highlighter-element-layout-type{margin-right:10px;width:16px;height:16px}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-grid{background-image:url('data:image/svg+xml,<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="2.5" width="4" height="4" stroke="%231A73E8"/><rect x="9.5" y="9.5" width="4" height="4" stroke="%231A73E8"/><rect x="2.5" y="9.5" width="4" height="4" stroke="%231A73E8"/></svg>')}.luna-dom-highlighter-element-layout-type.luna-dom-highlighter-flex{background-image:url('data:image/svg+xml,<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3.5h8v3H1v-3zm-1 0a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H1a1 1 0 01-1-1v-3zm12 0h3v3h-3v-3zm-1 0a1 1 0 011-1h3a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-3zm-7 6H1v3h3v-3zm-3-1a1 1 0 00-1 1v3a1 1 0 001 1h3a1 1 0 001-1v-3a1 1 0 00-1-1H1zm6 4v-3h8v3H7zm-1-3a1 1 0 011-1h8a1 1 0 011 1v3a1 1 0 01-1 1H7a1 1 0 01-1-1v-3z" fill="%231A73E8"/></svg>')}.luna-dom-highlighter-element-description{flex:1 1;font-weight:700;word-wrap:break-word;word-break:break-all}.luna-dom-highlighter-dimensions{color:#737373;text-align:right;margin-left:10px}.luna-dom-highlighter-material-node-width{margin-right:2px}.luna-dom-highlighter-material-node-height{margin-left:2px}.luna-dom-highlighter-material-tag-name{color:#881280}.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id{color:#1a1aa6}.luna-dom-highlighter-contrast-text{width:16px;height:16px;text-align:center;line-height:16px;margin-right:8px;border:1px solid #000;padding:0 1px}.luna-dom-highlighter-a11y-icon-not-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.315 0-6-2.685-6-6 0-1.3875.4725-2.6625 1.2675-3.675l8.4075 8.4075c-1.0125.795-2.2875 1.2675-3.675 1.2675zm4.7325-2.325-8.4075-8.4075c1.0125-.795 2.2875-1.2675 3.675-1.2675 3.315 0 6 2.685 6 6 0 1.3875-.4725 2.6625-1.2675 3.675z" fill="%239e9e9e"/></svg>')}.luna-dom-highlighter-a11y-icon-warning{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m8.25 11.25h1.5v1.5h-1.5zm0-6h1.5v4.5h-1.5zm.7425-3.75c-4.14 0-7.4925 3.36-7.4925 7.5s3.3525 7.5 7.4925 7.5c4.1475 0 7.5075-3.36 7.5075-7.5s-3.36-7.5-7.5075-7.5zm.0075 13.5c-3.315 0-6-2.685-6-6s2.685-6 6-6 6 2.685 6 6-2.685 6-6 6z" fill="%23e37400"/></svg>')}.luna-dom-highlighter-a11y-icon-ok{background-image:url('data:image/svg+xml,<svg fill="none" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg"><path d="m9 1.5c-4.14 0-7.5 3.36-7.5 7.5s3.36 7.5 7.5 7.5 7.5-3.36 7.5-7.5-3.36-7.5-7.5-7.5zm0 13.5c-3.3075 0-6-2.6925-6-6s2.6925-6 6-6 6 2.6925 6 6-2.6925 6-6 6zm-1.5-4.35-1.95-1.95-1.05 1.05 3 3 6-6-1.05-1.05z" fill="%230ca40c"/></svg>')}@media (forced-colors:active){:root,body{background-color:transparent;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content{border-color:Highlight;background-color:canvas;color:text;forced-color-adjust:none}.luna-dom-highlighter-tooltip-content::after{background-color:Highlight}.luna-dom-highlighter-color-swatch-inner,.luna-dom-highlighter-contrast-text,.luna-dom-highlighter-separator{border-color:Highlight}.luna-dom-highlighter-section-name{color:Highlight}.luna-dom-highlighter-dimensions,.luna-dom-highlighter-element-info-name,.luna-dom-highlighter-element-info-value-color,.luna-dom-highlighter-element-info-value-contrast,.luna-dom-highlighter-element-info-value-icon,.luna-dom-highlighter-element-info-value-text,.luna-dom-highlighter-material-class-name,.luna-dom-highlighter-material-node-id,.luna-dom-highlighter-material-tag-name{color:canvastext}}

/*# sourceMappingURL=luna-dom-highlighter.css.map*/`},7140:function(_,d){d=function(v,A){var C=[];A=A||1;for(var w=0,T=Math.ceil(v.length/A);w<T;w++){var R=w*A,G=R+A;C.push(v.slice(R,G))}return C},_.exports=d},7181:function(_,d){d=function(v){return!!window.ShadowRoot&&v instanceof ShadowRoot},_.exports=d},7214:function(_,d,v){var A,C=this&&this.__extends||(A=function(ie,oe){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(se,re){se.__proto__=re}||function(se,re){for(var fe in re)Object.prototype.hasOwnProperty.call(re,fe)&&(se[fe]=re[fe])},A(ie,oe)},function(ie,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Class extends value "+String(oe)+" is not a constructor or null");function se(){this.constructor=ie}A(ie,oe),ie.prototype=oe===null?Object.create(oe):(se.prototype=oe.prototype,new se)}),w=this&&this.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(d,"__esModule",{value:!0});var T=w(v(2263)),R=w(v(3693)),G=v(4725),I=w(v(9100)),z=w(v(8105)),H=w(v(5651)),Y=w(v(961)),ee=function(ie){function oe(se,re,fe){var ue=re.compName,ge=(fe===void 0?{}:fe).theme,ye=ge===void 0?"light":ge,be=ie.call(this)||this;return be.subComponents=[],be.compName=ue,be.c=(0,G.classPrefix)(ue),be.options={},be.container=se,be.$container=(0,R.default)(se),be.$container.addClass(["luna-".concat(ue),be.c("platform-".concat((0,G.getPlatform)()))]),be.on("optionChange",function(ve,Me,we){var Be=be.c;ve==="theme"&&(be.$container.rmClass(Be("theme-".concat(we))).addClass(Be("theme-".concat(Me))),(0,I.default)(be.subComponents,function(De){return De.setOption("theme",Me)}))}),be.setOption("theme",ye),be}return C(oe,ie),oe.prototype.destroy=function(){this.destroySubComponents();var se=this.c;this.$container.rmClass("luna-".concat(this.compName)).rmClass(se("platform-".concat((0,G.getPlatform)()))).rmClass(se("theme-".concat(this.options.theme))),this.$container.html(""),this.emit("destroy"),this.removeAllListeners()},oe.prototype.setOption=function(se,re){var fe=this,ue=this.options,ge={};typeof se=="string"?ge[se]=re:ge=se,(0,I.default)(ge,function(ye,be){var ve=ue[be];ue[be]=ye,fe.emit("optionChange",be,ye,ve)})},oe.prototype.getOption=function(se){return this.options[se]},oe.prototype.addSubComponent=function(se){se.setOption("theme",this.options.theme),this.subComponents.push(se)},oe.prototype.removeSubComponent=function(se){(0,Y.default)(this.subComponents,function(re){return re===se})},oe.prototype.destroySubComponents=function(){(0,I.default)(this.subComponents,function(se){return se.destroy()}),this.subComponents=[]},oe.prototype.initOptions=function(se,re){re===void 0&&(re={}),(0,H.default)(se,re),(0,z.default)(this.options,se)},oe.prototype.find=function(se){return this.$container.find(this.c(se))},oe}(T.default);d.default=ee},7236:function(_,d,v){var A=v(8971),C=v(9100),w=v(3612);function T(R){return function(G,I){var z=(G=w(G))[0];if(A(I))return z?z[R]:"";z&&C(G,function(H){H[R]=I})}}d={html:T("innerHTML"),text:T("textContent"),val:T("value")},_.exports=d},7253:function(_,d,v){(d=v(6314)(!1)).push([_.id,`@font-face{font-family:luna-tab-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAAsAAAAABpQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAEkAAABoILgliE9TLzIAAAFUAAAAPQAAAFZL+0kZY21hcAAAAZQAAACBAAAB3sqmCy5nbHlmAAACGAAAAC0AAAA0Ftcaz2hlYWQAAAJIAAAALgAAADZzhL4YaGhlYQAAAngAAAAYAAAAJAFoANBobXR4AAACkAAAAA8AAAAcAMgAAGxvY2EAAAKgAAAADgAAABAATgBObWF4cAAAArAAAAAfAAAAIAESABhuYW1lAAAC0AAAASkAAAIWm5e+CnBvc3QAAAP8AAAAMQAAAEOplauDeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiCWgNIsQMzKwAykWRnYgGxGBiYAk+wFgwAAAHicY2BkkGWcwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAIfkjI8MJIFcITDIwMIIIAGAqCKIAAAB4nM2RQQqDQAxFXxyVUsST9DhduBd3ggsv0JX39QT6kwYED1D6hzeQD0nmM0ADFPESNdiG4frItfALz/Br3qp7HlS0jEzMLKy7HYf8e33J1HMdortoWuPzreUX8p2hEikj9f+oi3vIyl86JpWYEvfnxH9sSTzPmijXbl+wE7urE5sAAAB4nGNgZACB+UDIzcBgrs6uzi7OLm4ubq4+j1tfn1tPD0xOhjGAJAMDAKekBtMAAAB4nGNgZGBgAGLPuE0l8fw2Xxm4GU4ABaI4H+9rQNBAMB8IGRg4GJhAHAA5KgqUAAB4nGNgZGBgOMHAACfnMzAyoAJ2ADfsAjl4nGNgAIITDFgBABIUAMkAeJxjYAACKQQEAAO4AJ0AAHicY2BkYGBgZ+BhANEMDExAzAWEDAz/wXwGAApKASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxjYGKAABiNDtgZmRiZGVkYWRnZGNkZORhYk3Pyi1MZkxlzGPMZixlTGRgANIEEbAAAAA==') format('woff')}[class*=' luna-tab-icon-'],[class^=luna-tab-icon-]{display:inline-block;font-family:luna-tab-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-tab-icon-close:before{content:'\\f101'}.luna-tab{position:relative;overflow:hidden;width:100%;color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:#fff;background-color:var(--luna-color-bg-container,#fff);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-family:var(--luna-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px}.luna-tab .luna-tab-hidden,.luna-tab.luna-tab-hidden{display:none}.luna-tab .luna-tab-invisible,.luna-tab.luna-tab-invisible{visibility:hidden}.luna-tab *{box-sizing:border-box}.luna-tab.luna-tab-theme-dark{color-scheme:dark;color:hsla(0,0%,100%,.85);color:var(--luna-color-text-dark,rgba(255,255,255,.85));background-color:#141414;background-color:var(--luna-color-bg-container-dark,#141414)}.luna-tab-tabs-container{border-bottom:1px solid}.luna-tab-tabs{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;width:100%;height:100%;font-size:0;white-space:nowrap}.luna-tab-tabs::-webkit-scrollbar{display:none;width:0;height:0}.luna-tab-item{display:inline-flex;cursor:pointer;padding:0 10px;font-size:12px;text-align:center;text-transform:capitalize}.luna-tab-item.luna-tab-selected .luna-tab-close-container,.luna-tab-item:hover .luna-tab-close-container{opacity:1}.luna-tab-close-container{display:flex;height:100%;width:12px;align-items:center;justify-content:center;opacity:0}.luna-tab-close{position:relative;left:4px;border-radius:2px;width:14px;height:14px;cursor:pointer;line-height:14px}.luna-tab-icon-close{font-size:14px}.luna-tab-slider{transition:left .3s,width .3s;height:1px;position:absolute;bottom:0;left:0}.luna-tab-theme-light .luna-tab-tabs-container{border-color:#d9d9d9;border-color:var(--luna-color-border,#d9d9d9)}.luna-tab-theme-light .luna-tab-item.luna-tab-selected{color:#1a73e8;color:var(--luna-color-primary,#1a73e8)}.luna-tab-theme-light .luna-tab-item:hover{color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88));background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-tab-theme-light .luna-tab-close{color:rgba(0,0,0,.88);color:var(--luna-color-text,rgba(0,0,0,.88))}.luna-tab-theme-light .luna-tab-close:hover{background-color:rgba(0,0,0,.06);background-color:var(--luna-color-fill-secondary,rgba(0,0,0,.06))}.luna-tab-theme-light .luna-tab-slider{background-color:#1a73e8;background-color:var(--luna-color-primary,#1a73e8)}.luna-tab-theme-dark .luna-tab-tabs-container{border-color:#424242;border-color:var(--luna-color-border,#424242)}.luna-tab-theme-dark .luna-tab-item.luna-tab-selected{color:#1965c8;color:var(--luna-color-primary,#1965c8)}.luna-tab-theme-dark .luna-tab-item:hover{color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85));background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-tab-theme-dark .luna-tab-close{color:hsla(0,0%,100%,.85);color:var(--luna-color-text,rgba(255,255,255,.85))}.luna-tab-theme-dark .luna-tab-close:hover{background-color:hsla(0,0%,100%,.12);background-color:var(--luna-color-fill-secondary,rgba(255,255,255,.12))}.luna-tab-theme-dark .luna-tab-slider{background-color:#1965c8;background-color:var(--luna-color-primary,#1965c8)}`,""]),_.exports=d},7257:function(_,d,v){var A=v(9405),C=v(9100),w=v(8971),T=v(6214),R=v(3915),G=v(9464),I=v(2571),z=v(9760);d={parse:function(Y){var ee={};return Y=A(Y).replace(H,""),C(Y.split("&"),function(ie){var oe=ie.split("="),se=oe.shift(),re=oe.length>0?oe.join("="):null;se=decodeURIComponent(se),re=decodeURIComponent(re),w(ee[se])?ee[se]=re:T(ee[se])?ee[se].push(re):ee[se]=[ee[se],re]}),ee},stringify:function(Y,ee){return I(R(Y,function(ie,oe){return z(ie)&&G(ie)?"":T(ie)?d.stringify(ie,oe):encodeURIComponent(ee||oe)+"="+encodeURIComponent(ie)}),function(ie){return ie.length>0}).join("&")}};var H=/^(\?|#|&)/g;_.exports=d},7308:function(_,d,v){var A=v(9100),C=v(1738),w=v(8971),T=v(3249),R=v(6214),G=v(9760),I=v(769);(d=function(ee,ie){if(w(ee))return oe={},H(function(re,fe){oe[re]=fe}),oe;var oe;if(C(ee)&&w(ie)||R(ee))return function(re){if(!C(re)){var fe={};return H(function(ge,ye){T(re,ge)&&(fe[ge]=ye)}),fe}var ue=Y(re);if(ue)return ue.getAttribute("content")}(ee);var se=ee;G(se)||((se={})[ee]=ie),function(re){A(re,function(fe,ue){var ge=Y(ue);if(ge)return ge.setAttribute("content",fe);(ge=z.createElement("meta")).setAttribute("name",ue),ge.setAttribute("content",fe),z.head.appendChild(ge)})}(se)}).remove=function(ee){ee=I(ee),A(ee,function(ie){var oe=Y(ie);oe&&z.head.removeChild(oe)})};var z=document;function H(ee){var ie=z.querySelectorAll("meta");A(ie,function(oe){var se=oe.getAttribute("name"),re=oe.getAttribute("content");se&&re&&ee(se,re)})}function Y(ee){return z.querySelector('meta[name="'+ee+'"]')}_.exports=d},7375:function(_,d){d=function(v,A,C){return Array.prototype.indexOf.call(v,A,C)},_.exports=d},7468:function(_,d,v){var A=v(3145);d=function(C,w){var T=A(w),R=T.length;if(C==null)return!R;C=Object(C);for(var G=0;G<R;G++){var I=T[G];if(w[I]!==C[I]||!(I in C))return!1}return!0},_.exports=d},7514:function(_,d,v){var A=v(3145),C=v(5427),w=v(438),T=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols;d=function(G){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},z=I.prototype,H=z===void 0||z,Y=I.unenumerable,ee=Y!==void 0&&Y,ie=I.symbol,oe=ie!==void 0&&ie,se=[];if((ee||oe)&&T){var re=A;ee&&T&&(re=T);do se=se.concat(re(G)),oe&&R&&(se=se.concat(R(G)));while(H&&(G=C(G))&&G!==Object.prototype);se=w(se)}else if(H)for(var fe in G)se.push(fe);else se=A(G);return se},_.exports=d},7528:function(_,d,v){function A(C,w){return w||(w=C.slice(0)),Object.freeze(Object.defineProperties(C,{raw:{value:Object.freeze(w)}}))}v.d(d,{A:function(){return A}})},7542:function(_,d){d=function(v,A){var C;return function(){return--v>0&&(C=A.apply(this,arguments)),v<=1&&(A=null),C}},_.exports=d},7571:function(_,d,v){var A=v(2263),C=v(6186),w=window.screen;d={get:function(){if(w){var T=C(w,"orientation.type");if(T)return T.split("-").shift()}return window.innerWidth>window.innerHeight?"landscape":"portrait"}},A.mixin(d),window.addEventListener("orientationchange",function(){setTimeout(function(){d.emit("change",d.get())},200)},!1),_.exports=d},7604:function(_,d,v){var A=v(6833);d=function(C){return A(C).join("-")},_.exports=d},7622:function(_,d,v){var A=v(2263),C=v(2192),w=v(769),T=v(8971),R=v(8420),G=v(1738),I=v(6097);d=A.extend({initialize:function(z,H){this.name=z,this.setLevel(T(H)?d.level.DEBUG:H),this.callSuper(A,"initialize",arguments)},setLevel:function(z){return G(z)?((z=d.level[z.toUpperCase()])&&(this._level=z),this):(I(z)&&(this._level=z),this)},getLevel:function(){return this._level},formatter:function(z,H){return H},trace:function(){return this._log("trace",arguments)},debug:function(){return this._log("debug",arguments)},info:function(){return this._log("info",arguments)},warn:function(){return this._log("warn",arguments)},error:function(){return this._log("error",arguments)},_log:function(z,H){return(H=w(H)).length===0?this:(this.emit("all",z,R(H)),d.level[z.toUpperCase()]<this._level||(this.emit(z,R(H)),(z==="debug"?console.log:console[z]).apply(console,this.formatter(z,H))),this)}},{level:new C({TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5})}),_.exports=d},7661:function(_,d,v){var A=v(769),C=v(2797),w=v(3612),T=v(1738),R=v(9100);function G(I){return T(I)?I.split(/\s+/):A(I)}d={add:function(I,z){I=w(I);var H=G(z);R(I,function(Y){var ee=[];R(H,function(ie){d.has(Y,ie)||ee.push(ie)}),ee.length!==0&&(Y.className+=(Y.className?" ":"")+ee.join(" "))})},has:function(I,z){I=w(I);var H=new RegExp("(^|\\s)"+z+"(\\s|$)");return C(I,function(Y){return H.test(Y.className)})},toggle:function(I,z){I=w(I),R(I,function(H){if(!d.has(H,z))return d.add(H,z);d.remove(H,z)})},remove:function(I,z){I=w(I);var H=G(z);R(I,function(Y){R(H,function(ee){Y.classList.remove(ee)})})}},_.exports=d},7696:function(_,d){d=function(v){var A=typeof v;return v==null||A!=="function"&&A!=="object"},_.exports=d},7731:function(module,exports,__webpack_require__){var random=__webpack_require__(6774),isBrowser=__webpack_require__(1909),isNode=__webpack_require__(621),crypto;exports=function(_){for(var d=new Uint8Array(_),v=0;v<_;v++)d[v]=random(0,255);return d},isBrowser?(crypto=window.crypto||window.msCrypto,crypto&&(exports=function(_){var d=new Uint8Array(_);return crypto.getRandomValues(d),d})):isNode&&(crypto=eval("require")("crypto"),exports=function(_){return crypto.randomBytes(_)}),module.exports=exports},7744:function(_,d,v){var A=v(2263),C=v(1738),w=v(9760),T=v(9100),R=v(769);d=A.extend({initialize:function(G){this.callSuper(A,"initialize",arguments),this._data=G||{},this.save(this._data)},set:function(G,I){var z;C(G)?(z={})[G]=I:w(G)&&(z=G);var H=this;T(z,function(Y,ee){var ie=H._data[ee];H._data[ee]=Y,H.emit("change",ee,Y,ie)}),this.save(this._data)},get:function(G){var I=this._data;if(C(G))return I[G];var z={};return T(G,function(H){z[H]=I[H]}),z},remove:function(G){G=R(G);var I=this._data;T(G,function(z){delete I[z]}),this.save(I)},clear:function(){this._data={},this.save(this._data)},each:function(G){T(this._data,G)},save:function(G){this._data=G}}),_.exports=d},7800:function(_,d,v){v.d(d,{A:function(){return C}});var A=v(5526);function C(w,T){if(w){if(typeof w=="string")return(0,A.A)(w,T);var R={}.toString.call(w).slice(8,-1);return R==="Object"&&w.constructor&&(R=w.constructor.name),R==="Map"||R==="Set"?Array.from(w):R==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(R)?(0,A.A)(w,T):void 0}}},7853:function(_,d,v){(d=v(6314)(!1)).push([_.id,`@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAaoAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAIsAAADcIw4ngk9TLzIAAAGUAAAAPgAAAFZWmlGRY21hcAAAAdQAAAD4AAACyDWnbdFnbHlmAAACzAAAAZsAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABcAAABYGAH//GxvY2EAAATUAAAAGAAAAC4JNAjUbWF4cAAABOwAAAAfAAAAIAEjAFBuYW1lAAAFDAAAASkAAAIWm5e+CnBvc3QAAAY4AAAAcAAAAJ7p9v7ZeJxNjT0OgkAQhb9FFllBFMHGwjN4AipiZckFaDAmxIojeHDf7oboTObvvZk3GGDHjY6kvz8Gqnlc3lxIieb5/97Mr+dIvk7i0lBzxQfLkZ6BiYWEjKtyIc7pR0GpWnOiUW+E/PA9FQfdRj0r3AlxYc7kZ221IXtko/C3cd+Grytr2UrTq9VfrRAJ0wB4nGNgZBRnnMDAysDA1Ml0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+ysYC4MSxMYGFGEAEAtDUIzAAAeJzN0s1OwkAUhuF36A8gtBYKiQsXxrVeFEGibJAQCPfgBbnypuYK8Dszx40xJu48kyekH+3M6XSACijkQUoIHwSs3pWGlBdcpbzkTdcLOiUlj6zYsGXPgRPnWF8u+tfSNc/slB6VhpR+r6BZbNxwy53GvQZMGTGk0WpzemZap9U9YyYsudYzg7RuRa0J6h9m/a2mf7zfSt006qWf2UXXplask/9S6Z3C15stsd3PLFu5kazdUJ5cIxun76tvls3lxfWydbYLO9fJq2tl7xZycGM5uomcnPV5dtrLGDI7a3GQYb9FZmczlpmdz1hldm5jnVF/Akk1KvR4nF1RTW8TMRCdZ3udBsSWBcdLG9UlG623pKihaeIIIZVUiHOknlAVNQgu0Jx6oB9/olz4BUXiyv+AAxz4BT1wRIJDT+wG7woQwhqN3vi9Nx6NCeQPf8oDYkRogU/z5xhzUbz2ZcmxD3xccRHwBId8nD/D2FvmOZHgglFIy9QmSrEBWYM02Gr1toG+6+lGpGRiB3Fiy0pJ/q2YKOeUz3W3zu+tu3r+0XSMj61mmro0fcPv2mbT/vyS7Vi7w/YaxjSKd2W+TAfWDtJqpPncvw1B1KFHfjK5CJltILMP0fVTOL0KH0OnY73IYl0LUZNd2C5SFRvEujfc9my/siQVi8vrrQe3Vq7dYEK9SnYjdvtO9JIJfqrvS9E4uHocXxE6XFIzJlherGVnk+nn6eQsW/sH4r3v8Vt31NqNOqssOmBBcBLfNMtqtnASr4Rl/xmT4vGL/90VpD87/8T3KfA7zeoYAocjmOJihP1zD2BGxTmVP+LT90oXeuWwjgyB0j3Xt4nEj1FxUSrf4muy2W5vJn+tbCkpb7z7FwBKXUkAeJxjYGRgYADikOXX2uP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMASwoLJgAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYIHj/3+B+D+MTwkAACOnBBMAeJxjYAACPgYZhiiGEwx3GP7hhwBJdRIJeJxjYGRgYBBjcGFgZgABJiDmAkIGhv9gPgMAEYUBdAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG3GSw6CMBRA0XeRohb/H1wFi2qAQCcteWnT7WvC1DO5VyrZWPmvo2JHjaFhz4EjlpYTZy5cuXHnwZMXbzo+YgenU+rHWEK7rfp5SXVxGsykGtX4sObUxJx+YcChTCR6RiKFgGdmYSWLfAGgdBim') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-caret-down:before{content:'\\f101'}.luna-console-icon-caret-right:before{content:'\\f102'}.luna-console-icon-warn:before{content:'\\f103'}.luna-console-icon-error:before{content:'\\f104'}.luna-console-icon-input:before{content:'\\f105'}.luna-console-icon-output:before{content:'\\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#141414}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}`,""]),_.exports=d},8009:function(_,d,v){var A=v(6513);d=function(C,w){C.prototype=A(w.prototype)},_.exports=d},8032:function(_,d,v){var A=v(2989),C=v(9931),w=v(2561),T=v(8971),R=v(3957),G=v(1976);d=function(I,z){return JSON.stringify(I,(H=[],Y=[],function(ee,ie){if(H.length>0){var oe=H.indexOf(this);oe>-1?(H.splice(oe+1),Y.splice(oe,1/0,ee)):(H.push(this),Y.push(ee));var se=H.indexOf(ie);se>-1&&(ie=H[0]===ie?"[Circular ~]":"[Circular ~."+Y.slice(0,se).join(".")+"]")}else H.push(ie);return G(ie)||R(ie)?ie="["+C(A(ie))+" "+w(ie)+"]":T(ie)&&(ie=null),ie}),z);var H,Y},_.exports=d},8046:function(_,d,v){var A=v(7731);d=function(){var T=A(16);return T[6]=15&T[6]|64,T[8]=63&T[8]|128,C[T[0]]+C[T[1]]+C[T[2]]+C[T[3]]+"-"+C[T[4]]+C[T[5]]+"-"+C[T[6]]+C[T[7]]+"-"+C[T[8]]+C[T[9]]+"-"+C[T[10]]+C[T[11]]+C[T[12]]+C[T[13]]+C[T[14]]+C[T[15]]};for(var C=[],w=0;w<256;w++)C[w]=(w+256).toString(16).substr(1);_.exports=d},8052:function(_,d,v){v.d(d,{A:function(){return Jn}});var A=v(7528),C=v(3029),w=v(2901),T=v(388),R=v(3954),G=v(5361),I=v(2263),z=v.n(I),H=v(3693),Y=v.n(H),ee=v(3915),ie=v.n(ee),oe=v(9405),se=v.n(oe),re=v(5169),fe=v.n(re),ue=v(9548),ge=v.n(ue),ye=v(6097),be=v.n(ye),ve=v(3249),Me=v.n(ve),we=(v(6030),v(5004)),Be=v.n(we);v(9410),v(8609);function De(Nn){var Xn="luna-".concat(Nn,"-");function jn(Un){return ie()(se()(Un).split(/\s+/),function(bn){return Me()(bn,Xn)?bn:bn.replace(/[\w-]+/,function(Kn){return"".concat(Xn).concat(Kn)})}).join(" ")}return function(Un){if(/<[^>]*>/g.test(Un))try{var bn=ge().parse(Un);return Fe(bn,function(Kn){Kn.attrs&&Kn.attrs.class&&(Kn.attrs.class=jn(Kn.attrs.class))}),ge().stringify(bn)}catch{return jn(Un)}return jn(Un)}}function Fe(Nn,Xn){for(var jn=0,Un=Nn.length;jn<Un;jn++){var bn=Nn[jn];Xn(bn),bn.content&&Fe(bn.content,Xn)}}var Oe;fe();var Ge=v(9100),ze=v.n(Ge),je=v(8105),He=v.n(je),Xe=v(5651),$e=v.n(Xe),We=v(961),nt=v.n(We),Qt=v(7e3),Wt=v.n(Qt),Bn=v(1009),Lt=v.n(Bn);function Mn(){try{var Nn=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mn=function(){return!!Nn})()}var cr,In=function(Nn){function Xn(jn,Un){var bn,Kn,Qn=Un.compName,pr=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}).theme,fn=pr===void 0?"light":pr;return(0,C.A)(this,Xn),bn=function(Mt,yn,kn){return yn=(0,R.A)(yn),(0,T.A)(Mt,Mn()?Reflect.construct(yn,[],(0,R.A)(Mt).constructor):yn.apply(Mt,kn))}(this,Xn),bn.subComponents=[],bn.theme="",bn.onThemeChange=function(Mt){bn.options.theme==="auto"&&bn.setTheme(Mt)},bn.compName=Qn,bn.c=De(Qn),bn.options={},bn.container=jn,bn.$container=Y()(jn),bn.$container.addClass(["luna-".concat(Qn),bn.c("platform-".concat((Kn=Be()(),Kn==="os x"?"mac":Kn)))]),bn.on("changeOption",function(Mt,yn){if(Mt==="theme"&&yn){var kn=yn;yn==="auto"&&(kn=Wt().get()),bn.setTheme(kn),ze()(bn.subComponents,function(nr){return nr.setOption("theme",yn)})}}),Wt().on("change",bn.onThemeChange),bn.setOption("theme",fn),bn}return(0,G.A)(Xn,Nn),(0,w.A)(Xn,[{key:"destroy",value:function(){var jn=this;this.destroySubComponents();var Un=this.$container,bn=Un.attr("class");ze()(bn.split(/\s+/),function(Kn){Lt()(Kn,"luna-".concat(jn.compName))&&Un.rmClass(Kn)}),Un.html(""),this.emit("destroy"),this.removeAllListeners(),Wt().off("change",this.onThemeChange)}},{key:"setOption",value:function(jn,Un){var bn=this,Kn=this.options,Qn={};typeof jn=="string"?Qn[jn]=Un:Qn=jn,ze()(Qn,function(pr,fn){var Mt=Kn[fn];Kn[fn]=pr,pr!==Mt&&bn.emit("changeOption",fn,pr,Mt)})}},{key:"getOption",value:function(jn){return this.options[jn]}},{key:"addSubComponent",value:function(jn){jn.setOption("theme",this.options.theme),this.subComponents.push(jn)}},{key:"removeSubComponent",value:function(jn){nt()(this.subComponents,function(Un){return Un===jn})}},{key:"destroySubComponents",value:function(){ze()(this.subComponents,function(jn){return jn.destroy()}),this.subComponents=[]}},{key:"initOptions",value:function(jn){var Un=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$e()(jn,Un),He()(this.options,jn)}},{key:"find",value:function(jn){return this.$container.find(this.c(jn))}},{key:"setTheme",value:function(jn){var Un=this.c,bn=this.$container;this.theme&&bn.rmClass(Un("theme-".concat(this.theme))),bn.addClass(Un("theme-".concat(jn))),this.theme=jn}}])}(z()),Zn=v(5773),$n=v.n(Zn),Rn=v(5902),Dn=v.n(Rn);function Gt(){try{var Nn=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gt=function(){return!!Nn})()}_=v.hmd(_);var Jn=function(Nn){function Xn(jn){var Un,bn,Kn,Qn,pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,C.A)(this,Xn),bn=this,Kn=Xn,Qn=[jn,{compName:"tab"},pr],Kn=(0,R.A)(Kn),(Un=(0,T.A)(bn,Gt()?Reflect.construct(Kn,Qn||[],(0,R.A)(bn).constructor):Kn.apply(bn,Qn))).initOptions(pr,{height:30}),Un.initTpl(),Un.$tabs=Un.find(".tabs"),Un.tabs=Un.$tabs.get(0),Un.$slider=Un.find(".slider"),Un.bindEvent(),Un.updateHeight(),Un}return(0,G.A)(Xn,Nn),(0,w.A)(Xn,[{key:"length",get:function(){return this.$tabs.find(this.c(".item")).length}},{key:"insert",value:function(jn,Un){var bn=this.c,Kn=this.$tabs,Qn=this.options.height-1,pr=Kn.find(bn(".item")),fn=pr.length,Mt='<div class="'.concat(bn("item"),'" data-id="').concat(Dn()(Un.id),'" ').concat(Un.closeable?'data-closeable="true"':"",' style="height: ').concat(Qn,"px; line-height: ").concat(Qn,'px;"><span class="').concat(bn("title"),'">').concat(Dn()(Un.title),"</span>").concat(Un.closeable?'<div class="'.concat(bn("close-container"),'"><div class="').concat(bn("close"),'"><span class="').concat(bn("icon-close"),'"></span></div></div>'):"","</div>");jn>fn-1?Kn.append(Mt):pr.eq(jn).before(Mt),this.updateSlider()}},{key:"append",value:function(jn){this.insert(this.length,jn)}},{key:"remove",value:function(jn){var Un=this.c;if(this.length!==1){var bn=this;this.$tabs.find(Un(".item")).each(function(Kn){var Qn=Y()(this);if(Qn.data("id")===jn){if(Qn.remove(),Qn.hasClass(Un("selected")))if(bn.length>0){var pr=Kn===bn.length?Kn-1:Kn,fn=bn.$tabs.find(Un(".item")).eq(pr).data("id");bn.select(fn)}else bn.emit("deselect");Qn.data("closeable")&&bn.emit("close",jn)}}),this.updateSlider()}}},{key:"select",value:function(jn){var Un=this.c,bn=this;this.$tabs.find(Un(".item")).each(function(){var Kn=Y()(this);Kn.data("id")===jn?(Kn.addClass(Un("selected")),bn.updateSlider(),bn.scrollToSelected(),bn.emit("select",jn)):Kn.rmClass(Un("selected"))})}},{key:"deselect",value:function(){var jn=this.c;this.$tabs.find(jn(".item")).each(function(){Y()(this).rmClass(jn("selected"))}),this.emit("deselect"),this.updateSlider()}},{key:"scrollToSelected",value:function(){var jn,Un=this.$tabs,bn=this.tabs,Kn=this.c,Qn=Un.find(Kn(".selected")).get(0),pr=Qn.offsetLeft,fn=Qn.offsetWidth,Mt=bn.offsetWidth,yn=bn.scrollLeft;pr<yn?jn=pr:pr+fn>Mt+yn&&(jn=pr+fn-Mt),be()(jn)&&(bn.scrollLeft=jn)}},{key:"hideScrollbar",value:function(){var jn=this.$tabs;if(getComputedStyle(this.tabs,"::-webkit-scrollbar").display!=="none"){var Un=function(){if(be()(Oe))return Oe;if(!document)return 16;var bn=document.createElement("div"),Kn=document.createElement("div");bn.setAttribute("style","display: block; width: 100px; height: 100px; overflow: scroll;"),Kn.setAttribute("style","height: 200px"),bn.appendChild(Kn);var Qn=document.body||document.documentElement;return Qn.appendChild(bn),Oe=bn.offsetWidth-bn.clientWidth,Qn.removeChild(bn),Oe}();jn.css("height",this.options.height-1+Un+"px")}}},{key:"updateSlider",value:function(){var jn=this.$slider,Un=this.$tabs,bn=this.c,Kn=Un.find(bn(".selected")).get(0);Kn?jn.css({width:Kn.offsetWidth,left:Kn.offsetLeft-Un.get(0).scrollLeft}):jn.css({width:0})}},{key:"updateHeight",value:function(){var jn=this.options.height,Un=jn-1;this.find(".tabs-container").css("height",jn+"px"),this.find(".item").css({height:Un,lineHeight:Un}),this.hideScrollbar()}},{key:"bindEvent",value:function(){var jn=this,Un=this.tabs,bn=this.c;this.on("changeOption",function(Qn){Qn==="height"&&jn.updateHeight()});var Kn=this;this.$tabs.on("wheel",function(Qn){Qn.preventDefault(),Un.scrollLeft+=Qn.origEvent.deltaY}).on("click",bn(".item"),function(){var Qn=Y()(this);Kn.select(Qn.data("id"))}).on("click",bn(".close"),function(Qn){Qn.stopPropagation();var pr=Y()(this).parent().parent();Kn.remove(pr.data("id"))}).on("scroll",function(){jn.updateSlider()})}},{key:"initTpl",value:function(){this.$container.html(this.c($n()(cr||(cr=(0,A.A)([`
        <div class="tabs-container">
          <div class="tabs"></div>
        </div>
        <div class="slider"></div>
      `])))))}}])}(In);(function(Nn,Xn){try{Nn.exports=Xn,Nn.exports.default=Xn}catch{}})(_,Jn)},8091:function(_,d,v){var A=v(282),C=v(9100),w=v(5207);function T(R){return'<a href="'+R+'">'+R+"</a>"}d=function(R,G){G=G||T;var I=A(R);return C(I,function(z){R=R.replace(new RegExp(w(z),"g"),G)}),R},_.exports=d},8098:function(_,d,v){var A=v(5693),C=v(5793),w=v(3145);d=function(T,R,G){R=A(R,G);for(var I=!C(T)&&w(T),z=(I||T).length,H=0;H<z;H++){var Y=I?I[H]:H;if(!R(T[Y],Y,T))return!1}return!0},_.exports=d},8105:function(_,d,v){d=v(6307)(v(7514)),_.exports=d},8178:function(_,d,v){d=v(2510)(function(A,C){for(var w=A.length,T=0,R=C.length;T<R;T++)for(var G=C[T],I=0,z=G.length;I<z;I++)A[w++]=G[I];return A.length=w,A}),_.exports=d},8239:function(_,d,v){(d=v(6314)(!1)).push([_.id,'#_network ._network{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:39px}#_network ._control{padding:10px;border-bottom:none;position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border)}#_network ._control [class*=" _icon-"],#_network ._control [class^=eruda-icon-]{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_network ._control [class*=" _icon-"]._active,#_network ._control [class*=" _icon-"]:active,#_network ._control [class^=eruda-icon-]._active,#_network ._control [class^=eruda-icon-]:active{color:var(--accent)}#_network ._control ._title{font-size:14px}#_network ._control ._icon-clear{left:23px}#_network ._control ._icon-eye{right:0}#_network ._control ._icon-copy{right:23px}#_network ._control ._icon-filter{right:46px}#_network ._control ._filter-text{white-space:nowrap;position:absolute;line-height:20px;max-width:80px;overflow:hidden;right:88px;font-size:14px;text-overflow:ellipsis}#_network ._control ._icon-record{left:0}#_network ._control ._icon-record._recording{color:var(--console-error-foreground);text-shadow:0 0 4px var(--console-error-foreground)}#_network ._request-error{color:var(--console-error-foreground)}#_network .luna-data-grid:focus .luna-data-grid-data-container ._request-error.luna-data-grid-selected{background:var(--console-error-background)}#_network .luna-data-grid{border-left:none;border-right:none}#_network ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;display:none;padding-top:40px;background:var(--background)}#_network ._detail ._control{padding:10px 35px;border-bottom:1px solid var(--border)}#_network ._detail ._control ._url{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_network ._detail ._control ._icon-arrow-left{left:0}#_network ._detail ._control ._icon-delete{left:0;display:none}#_network ._detail ._control ._icon-copy{right:0}#_network ._detail ._http{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_network ._detail ._http ._section{border-top:1px solid var(--border);border-bottom:1px solid var(--border);margin-top:10px;margin-bottom:10px}#_network ._detail ._http ._section h2{background:var(--darker-background);color:var(--primary);padding:10px;line-height:18px;font-size:14px}#_network ._detail ._http ._section table{color:var(--foreground)}#_network ._detail ._http ._section table *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}#_network ._detail ._http ._section table td{font-size:12px;padding:5px 10px;word-break:break-all}#_network ._detail ._http ._section table ._key{white-space:nowrap;font-weight:700;color:var(--accent)}#_network ._detail ._http ._data,#_network ._detail ._http ._response{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;font-size:12px;margin:10px 0;white-space:pre-wrap;border-top:1px solid var(--border);color:var(--foreground);border-bottom:1px solid var(--border)}._safe-area #_network ._http{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_network ._network ._control ._icon-eye{display:none}#_network ._network ._control ._icon-copy{right:0}#_network ._network ._control ._icon-filter{right:23px}#_network ._network ._control ._filter-text{right:55px}#_network ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_network ._detail ._control ._icon-arrow-left{display:none}#_network ._detail ._control ._icon-delete{display:block}}',""]),_.exports=d},8420:function(_,d,v){var A=v(9760),C=v(6214),w=v(8105);d=function(T){return A(T)?C(T)?T.slice():w({},T):T},_.exports=d},8438:function(_,d,v){var A=v(6195),C=v(6167),w=v(5793),T=v(8971);d=function(R,G,I){var z=(w(R)?C:A)(R,G,I);if(!T(z)&&z!==-1)return R[z]},_.exports=d},8534:function(_,d,v){var A=v(5869),C=v(8971),w=v(387);d=A(function(R,G){return C(G)?(R=w(R),!C(T[R])):(T.cssText="",T.cssText=R+":"+G,!!T.length)},function(R,G){return R+" "+G});var T=document.createElement("p").style;_.exports=d},8604:function(_,d,v){var A=v(9100),C=v(3612);d=function(T){T=C(T),A(T,function(R){(function(G){return getComputedStyle(G,"").getPropertyValue("display")=="none"})(R)&&(R.style.display=function(G){var I,z;return w[G]||(I=document.createElement(G),document.documentElement.appendChild(I),z=getComputedStyle(I,"").getPropertyValue("display"),I.parentNode.removeChild(I),z=="none"&&(z="block"),w[G]=z),w[G]}(R.nodeName))})};var w={};_.exports=d},8609:function(_,d,v){var A=v(5169),C=A.getComputedStyle,w=A.document;function T(R,G){return R.right<G.left||R.left>G.right||R.bottom<G.top||R.top>G.bottom}d=function(R){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=G.display,z=I===void 0||I,H=G.visibility,Y=H!==void 0&&H,ee=G.opacity,ie=ee!==void 0&&ee,oe=G.size,se=oe!==void 0&&oe,re=G.viewport,fe=re!==void 0&&re,ue=G.overflow,ge=ue!==void 0&&ue,ye=C(R);if(z){var be=R.tagName;if(be==="BODY"||be==="HTML"||ye.position==="fixed"){if(ye.display==="none")return!0;for(var ve=R;ve=ve.parentElement;)if(C(ve).display==="none")return!0}else if(R.offsetParent===null)return!0}if(Y&&ye.visibility==="hidden")return!0;if(ie){if(ye.opacity==="0")return!0;for(var Me=R;Me=Me.parentElement;)if(C(Me).opacity==="0")return!0}var we=R.getBoundingClientRect();if(se&&(we.width===0||we.height===0))return!0;if(fe)return T(we,{top:0,left:0,right:w.documentElement.clientWidth,bottom:w.documentElement.clientHeight});if(ge)for(var Be=R;Be=Be.parentElement;){var De=C(Be).overflow;if((De==="scroll"||De==="hidden")&&T(we,Be.getBoundingClientRect()))return!0}return!1},_.exports=d},8665:function(_,d,v){var A,C=this&&this.__extends||(A=function(R,G){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,z){I.__proto__=z}||function(I,z){for(var H in z)Object.prototype.hasOwnProperty.call(z,H)&&(I[H]=z[H])},A(R,G)},function(R,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function I(){this.constructor=R}A(R,G),R.prototype=G===null?Object.create(G):(I.prototype=G.prototype,new I)}),w=this&&this.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(d,"__esModule",{value:!0});var T=function(R){function G(){return R!==null&&R.apply(this,arguments)||this}return C(G,R),G.prototype.trigger=function(I,z){this.emit("message",JSON.stringify({method:I,params:z}))},G}(w(v(2263)).default);d.default=new T},8687:function(_,d,v){(d=v(6314)(!1)).push([_.id,'._container .luna-console{background:var(--background)}._container .luna-console-header{color:var(--link-color);border-bottom-color:var(--border)}._container .luna-console-nesting-level{border-right-color:var(--border)}._container .luna-console-nesting-level::before{border-bottom-color:var(--border)}._container .luna-console-log-container.luna-console-selected .luna-console-log-item{background:var(--contrast)}._container .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:var(--border)}._container .luna-console-log-item{border-bottom-color:var(--border);color:var(--foreground)}._container .luna-console-log-item a{color:var(--link-color)!important}._container .luna-console-log-item .luna-console-icon-container .luna-console-icon{color:var(--foreground)}._container .luna-console-log-item .luna-console-icon-container .luna-console-icon-error{color:#ef3842}._container .luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{color:#e8a400}._container .luna-console-log-item .luna-console-count{color:var(--select-foreground);background:var(--highlight)}._container .luna-console-log-item.luna-console-warn{color:var(--console-warn-foreground);background:var(--console-warn-background);border-color:var(--console-warn-border)}._container .luna-console-log-item.luna-console-error{background:var(--console-error-background);color:var(--console-error-foreground);border-color:var(--console-error-border)}._container .luna-console-log-item.luna-console-error .luna-console-count{background:var(--console-error-foreground)}._container .luna-console-log-item .luna-console-code .luna-console-key{color:var(--var-color)}._container .luna-console-log-item .luna-console-code .luna-console-number{color:var(--number-color)}._container .luna-console-log-item .luna-console-code .luna-console-null{color:var(--operator-color)}._container .luna-console-log-item .luna-console-code .luna-console-string{color:var(--string-color)}._container .luna-console-log-item .luna-console-code .luna-console-boolean{color:var(--keyword-color)}._container .luna-console-log-item .luna-console-code .luna-console-special{color:var(--operator-color)}._container .luna-console-log-item .luna-console-code .luna-console-keyword{color:var(--keyword-color)}._container .luna-console-log-item .luna-console-code .luna-console-operator{color:var(--operator-color)}._container .luna-console-log-item .luna-console-code .luna-console-comment{color:var(--comment-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-null,._container .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:var(--operator-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-number{color:var(--number-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-boolean{color:var(--keyword-color)}._container .luna-console-log-item .luna-console-log-content .luna-console-regexp,._container .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:var(--var-color)}._container .luna-console-preview .luna-console-key{color:var(--var-color)}._container .luna-console-preview .luna-console-number{color:var(--number-color)}._container .luna-console-preview .luna-console-null{color:var(--operator-color)}._container .luna-console-preview .luna-console-string{color:var(--string-color)}._container .luna-console-preview .luna-console-boolean{color:var(--keyword-color)}._container .luna-console-preview .luna-console-special{color:var(--operator-color)}._container .luna-console-preview .luna-console-keyword{color:var(--keyword-color)}._container .luna-console-preview .luna-console-operator{color:var(--operator-color)}._container .luna-console-preview .luna-console-comment{color:var(--comment-color)}._container .luna-object-viewer{color:var(--primary);font-size:12px!important}._container .luna-object-viewer-null{color:var(--operator-color)}._container .luna-object-viewer-regexp,._container .luna-object-viewer-string{color:var(--string-color)}._container .luna-object-viewer-number{color:var(--number-color)}._container .luna-object-viewer-boolean{color:var(--keyword-color)}._container .luna-object-viewer-special{color:var(--operator-color)}._container .luna-object-viewer-key,._container .luna-object-viewer-key-lighter{color:var(--var-color)}._container .luna-object-viewer-expanded:before{border-color:transparent;border-top-color:var(--foreground)}._container .luna-object-viewer-collapsed:before{border-top-color:transparent;border-left-color:var(--foreground)}._container .luna-notification{pointer-events:none!important;padding:10px;z-index:1000}._container .luna-notification-item{z-index:500;color:var(--foreground);background:var(--background);box-shadow:none;padding:5px 10px;border:1px solid var(--border)}._container .luna-notification-upper{margin-bottom:10px}._container .luna-notification-lower{margin-top:10px}._container .luna-data-grid{color:var(--foreground);background:var(--background);border-color:var(--border)}._container .luna-data-grid td,._container .luna-data-grid th{border-color:var(--border)}._container .luna-data-grid th{background:var(--darker-background)}._container .luna-data-grid th.luna-data-grid-sortable:active,._container .luna-data-grid th.luna-data-grid-sortable:hover{color:var(--select-foreground);background:var(--highlight)}._container .luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selectable:hover,._container .luna-data-grid .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--highlight)}._container .luna-data-grid .luna-data-grid-data-container tr:nth-child(even){background:var(--contrast)}._container .luna-data-grid:focus .luna-data-grid-data-container .luna-data-grid-node.luna-data-grid-selected{background:var(--accent)}._container .luna-dom-viewer{color:var(--foreground)}._container .luna-dom-viewer .luna-dom-viewer-html-tag,._container .luna-dom-viewer .luna-dom-viewer-tag-name{color:var(--tag-name-color)}._container .luna-dom-viewer .luna-dom-viewer-attribute-name{color:var(--attribute-name-color)}._container .luna-dom-viewer .luna-dom-viewer-attribute-value{color:var(--string-color)}._container .luna-dom-viewer .luna-dom-viewer-html-comment{color:var(--comment-color)}._container .luna-dom-viewer .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:var(--contrast)}._container .luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:var(--highlight)}._container .luna-dom-viewer .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:var(--accent);opacity:.2}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-key{color:var(--var-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-number{color:var(--number-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-null{color:var(--operator-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-string{color:var(--string-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-boolean{color:var(--keyword-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-special{color:var(--operator-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:var(--keyword-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:var(--operator-color)}._container .luna-dom-viewer .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:var(--comment-color)}._container .luna-dom-viewer-children{margin:0;padding-left:15px!important}._container ._inline .luna-modal,._container ._inline .luna-notification{position:absolute}._container .luna-modal{z-index:9999999}._container .luna-modal-body,._container .luna-modal-input{color:var(--foreground);background:var(--background)}._container .luna-modal-body{border-color:var(--border)}._container .luna-modal-input{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important;border-color:var(--border)}._container .luna-modal-button-group .luna-modal-secondary{border-color:var(--border);color:var(--foreground);background:var(--background)}._container .luna-modal-button-group .luna-modal-primary{background:var(--accent)}._container .luna-modal-button-group .luna-modal-button:active::before{background:var(--accent)}._container .luna-tab{position:absolute;left:0;top:0;color:var(--foreground);background:var(--darker-background)}._container .luna-tab-tabs-container{border-color:var(--border)}._container .luna-tab-item.luna-tab-selected,._container .luna-tab-item:hover{background:var(--highlight);color:var(--select-foreground)}._container .luna-tab-slider{background:var(--accent)}._container .luna-text-viewer{color:var(--foreground);border:none;border-bottom:1px solid var(--border);background:var(--background);font-size:12px}._container .luna-text-viewer .luna-text-viewer-line-text{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}._container .luna-text-viewer .luna-text-viewer-line-text *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}._container .luna-text-viewer .luna-text-viewer-copy,._container .luna-text-viewer .luna-text-viewer-line-number{border-color:var(--border)}._container .luna-text-viewer .luna-text-viewer-copy .luna-text-viewer-icon-check{color:var(--accent)}._container .luna-text-viewer .luna-text-viewer-copy{background-color:var(--background)}._container .luna-setting{color:var(--foreground);background:var(--background)}._container .luna-setting-item.luna-setting-selected,._container .luna-setting-item:hover{background:var(--darker-background)}._container .luna-setting-item.luna-setting-selected:focus{outline:0}._container .luna-setting-item-title{font-size:14px}._container .luna-setting-item-separator{border-color:var(--border)}._container .luna-setting-item-checkbox input{border-color:var(--border)}._container .luna-setting-item-checkbox input:checked{background-color:var(--accent);border-color:var(--accent)}._container .luna-setting-item-select .luna-setting-select select{color:var(--foreground);border-color:var(--border);background:var(--background)}._container .luna-setting-item-select .luna-setting-select:after{border-top-color:var(--foreground)}._container .luna-setting-item-button button{color:var(--accent);background:var(--background);border-color:var(--border)}._container .luna-setting-item-button button:active,._container .luna-setting-item-button button:hover{background:var(--darker-background)}._container .luna-setting-item-button button:active{border:1px solid var(--accent)}._container .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar{background:var(--border)}._container .luna-setting-item-number .luna-setting-range-container .luna-setting-range-track .luna-setting-range-track-bar .luna-setting-range-track-progress{background:var(--accent)}._container .luna-setting-item-number .luna-setting-range-container input::-webkit-slider-thumb{border-color:var(--border);background:radial-gradient(circle at center,var(--dark) 0,var(--dark) 15%,var(--light) 22%,var(--light) 100%)}._container .luna-box-model{background:var(--background)}._container .luna-box-model-border,._container .luna-box-model-content,._container .luna-box-model-margin,._container .luna-box-model-padding,._container .luna-box-model-position{color:var(--foreground);background:var(--background)}._container{min-width:320px;pointer-events:none;position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999999;color:var(--foreground);font-family:-apple-system,system-ui,BlinkMacSystemFont,".SFNSDisplay-Regular","Helvetica Neue","Lucida Grande","Segoe UI",Tahoma,sans-serif;font-size:14px;direction:ltr}._container._dark{color-scheme:dark}._container *{box-sizing:border-box;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-text-size-adjust:none}._container ul{list-style:none;padding:0;margin:0}._container h1,._container h2,._container h3,._container h4{margin:0}._container h2{font-size:14px}._container h2 [class*=" _icon-"],._container h2 [class^=icon-]{font-weight:400}._container._inline{position:static}._hidden{display:none}._icon-disabled{opacity:.5;pointer-events:none;cursor:default!important}._icon-disabled:active{color:inherit!important}._tag-name-color{color:var(--tag-name-color)}._function-color{color:var(--function-color)}._attribute-name-color{color:var(--attribute-name-color)}._operator-color{color:var(--operator-color)}._string-color{color:var(--string-color)}',""]),_.exports=d},8734:function(_,d,v){var A=v(2717),C=v(1738),w=v(6026),T=v(8),R=v(928),G=v(9848);d=A({initialize:function(ie){C(ie)&&(ie=d.parse(ie)),this.model=ie.model,this.val=ie.val},toRgb:function(){var ie=this.val;this.model==="hsl"&&(ie=R(ie));var oe="rgba";return ie[3]===1&&(oe="rgb",ie=ie.slice(0,3)),oe+"("+ie.join(", ")+")"},toHex:function(){var ie=this.val;this.model==="hsl"&&(ie=R(ie));var oe=G.encode(ie.slice(0,3));return oe[0]===oe[1]&&oe[2]===oe[3]&&oe[4]===oe[5]&&(oe=oe[0]+oe[2]+oe[5]),"#"+oe},toHsl:function(){var ie=this.val;this.model==="rgb"&&(ie=T(ie));var oe="hsla";return ie[3]===1&&(oe="hsl",ie=ie.slice(0,3)),ie[1]=ie[1]+"%",ie[2]=ie[2]+"%",oe+"("+ie.join(", ")+")"}},{parse:function(ie){var oe,se,re=[0,0,0,1],fe="rgb";if(se=ie.match(I))for(se=se[1],oe=0;oe<3;oe++)re[oe]=parseInt(se[oe]+se[oe],16);else if(se=ie.match(z))for(se=se[1],oe=0;oe<3;oe++){var ue=2*oe;re[oe]=parseInt(se.slice(ue,ue+2),16)}else if(se=ie.match(H)){for(oe=0;oe<3;oe++)re[oe]=parseInt(se[oe+1],0);se[4]&&(re[3]=parseFloat(se[4]))}else if(se=ie.match(Y)){for(oe=0;oe<3;oe++)re[oe]=Math.round(2.55*parseFloat(se[oe+1]));se[4]&&(re[3]=parseFloat(se[4]))}else(se=ie.match(ee))&&(fe="hsl",re=[(parseFloat(se[1])%360+360)%360,w(parseFloat(se[2]),0,100),w(parseFloat(se[3]),0,100),w(parseFloat(se[4]),0,1)]);return{val:re,model:fe}}});var I=/^#([a-fA-F0-9]{3})$/,z=/^#([a-fA-F0-9]{6})$/,H=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,Y=/^rgba?\(\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/,ee=/^hsla?\(\s*([+-]?\d*[.]?\d+)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?[\d.]+)\s*)?\)$/;_.exports=d},8757:function(_,d,v){var A,C=this&&this.__extends||(A=function(I,z){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,Y){H.__proto__=Y}||function(H,Y){for(var ee in Y)Object.prototype.hasOwnProperty.call(Y,ee)&&(H[ee]=Y[ee])},A(I,z)},function(I,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function H(){this.constructor=I}A(I,z),I.prototype=z===null?Object.create(z):(H.prototype=z.prototype,new H)}),w=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(d,"__esModule",{value:!0});var T=w(v(2263)),R=w(v(9100)),G=function(I){function z(){var H=I.call(this)||this;return H.observer=new MutationObserver(function(Y){(0,R.default)(Y,function(ee){return H.handleMutation(ee)})}),H}return C(z,I),z.prototype.observe=function(H){this.observer.observe(H,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},z.prototype.disconnect=function(){this.observer.disconnect()},z.prototype.handleMutation=function(H){H.type==="attributes"?this.emit("attributes",H.target,H.attributeName):H.type==="childList"?this.emit("childList",H.target,H.addedNodes,H.removedNodes):H.type==="characterData"&&this.emit("characterData",H.target)},z}(T.default);d.default=new G},8785:function(_,d){d=function(){for(var v=arguments,A=v[0],C=1,w=v.length;C<w;C++)v[C]<A&&(A=v[C]);return A},_.exports=d},8796:function(_,d,v){var A=v(9760),C=v(3957);d=function(w){return A(w)&&C(w.then)&&C(w.catch)},_.exports=d},8862:function(_,d,v){var A=v(1738);function C(T,R){var G,I=function(z){function H(re,fe){return re===fe||(re.nodeType===Node.ELEMENT_NODE&&fe.nodeType===Node.ELEMENT_NODE?re.localName===fe.localName:re.nodeType===fe.nodeType||(re.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:re.nodeType)===(fe.nodeType===Node.CDATA_SECTION_NODE?Node.TEXT_NODE:fe.nodeType))}var Y,ee=z.parentNode?z.parentNode.children:null;if(!ee)return 0;for(var ie=0;ie<ee.length;++ie)if(H(z,ee[ie])&&ee[ie]!==z){Y=!0;break}if(!Y)return 0;for(var oe=1,se=0;se<ee.length;++se)if(H(z,ee[se])){if(ee[se]===z)return oe;++oe}return-1}(T);if(I===-1)return null;switch(T.nodeType){case Node.ELEMENT_NODE:if(R&&T.getAttribute("id"))return new w('//*[@id="'+T.getAttribute("id")+'"]',!0);G=T.localName;break;case Node.ATTRIBUTE_NODE:G="@"+T.nodeName();break;case Node.TEXT_NODE:case Node.CDATA_SECTION_NODE:G="text()";break;case Node.PROCESSING_INSTRUCTION_NODE:G="processing-instruction()";break;case Node.COMMENT_NODE:G="comment()";break;case Node.DOCUMENT_NODE:default:G=""}return I>0&&(G+="["+I+"]"),new w(G,T.nodeType===Node.DOCUMENT_NODE)}d=function(T,R){return A(T)?function(G){for(var I=[],z=document.evaluate(G,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),H=0;H<z.snapshotLength;H++)I.push(z.snapshotItem(H));return I}(T):function(G){var I=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(G.nodeType===Node.DOCUMENT_NODE)return"/";for(var z=[],H=G;H;){var Y=C(H,I);if(!Y||(z.push(Y),Y.optimized))break;H=H.parentNode}return z.reverse(),(z.length&&z[0].optimized?"":"/")+z.join("/")}(T,R)};var w=v(2717)({initialize:function(T,R){this.value=T,this.optimized=R||!1},toString:function(){return this.value}});_.exports=d},8966:function(_,d,v){var A=v(2717),C=v(3249);function w(){return!0}function T(){return!1}function R(I){var z,H=this.events[I.type],Y=G.call(this,I,H);I=new d.Event(I);for(var ee,ie,oe=0;(ie=Y[oe++])&&!I.isPropagationStopped();)for(I.curTarget=ie.el,ee=0;(z=ie.handlers[ee++])&&!I.isImmediatePropagationStopped();)z.handler.apply(ie.el,[I])===!1&&(I.preventDefault(),I.stopPropagation())}function G(I,z){var H,Y,ee,ie,oe=I.target,se=[],re=z.delegateCount;if(oe.nodeType)for(;oe!==this;oe=oe.parentNode||this){for(Y=[],ie=0;ie<re;ie++)Y[H=(ee=z[ie]).selector+" "]===void 0&&(Y[H]=C(this.querySelectorAll(H),oe)),Y[H]&&Y.push(ee);Y.length&&se.push({el:oe,handlers:Y})}return re<z.length&&se.push({el:this,handlers:z.slice(re)}),se}d={add:function(I,z,H,Y){var ee,ie={selector:H,handler:Y};I.events||(I.events={}),(ee=I.events[z])||((ee=I.events[z]=[]).delegateCount=0,I.addEventListener(z,function(){R.apply(I,arguments)},!1)),H?ee.splice(ee.delegateCount++,0,ie):ee.push(ie)},remove:function(I,z,H,Y){var ee=I.events;if(ee&&ee[z])for(var ie,oe=ee[z],se=oe.length;se--;)ie=oe[se],H&&ie.selector!=H||ie.handler!=Y||(oe.splice(se,1),ie.selector&&oe.delegateCount--)},Event:A({className:"Event",initialize:function(I){this.origEvent=I},isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T,preventDefault:function(){var I=this.origEvent;this.isDefaultPrevented=w,I&&I.preventDefault&&I.preventDefault()},stopPropagation:function(){var I=this.origEvent;this.isPropagationStopped=w,I&&I.stopPropagation&&I.stopPropagation()},stopImmediatePropagation:function(){var I=this.origEvent;this.isImmediatePropagationStopped=w,I&&I.stopImmediatePropagation&&I.stopImmediatePropagation(),this.stopPropagation()}})},_.exports=d},8971:function(_,d){d=function(v){return v===void 0},_.exports=d},8996:function(_,d,v){d=v(3752)(v(7542),2),_.exports=d},9e3:function(_,d,v){var A=v(1738);d=function(C){return A(C)?(C=C.toLowerCase())!=="0"&&C!==""&&C!=="false":!!C},_.exports=d},9041:function(_,d){function v(A){if(typeof A!="function")throw new TypeError(A+" is not a function");return A}d=typeof process=="object"&&process.nextTick?process.nextTick:typeof setImmediate=="function"?function(A){setImmediate(v(A))}:function(A){setTimeout(v(A),0)},_.exports=d},9100:function(_,d,v){var A=v(5793),C=v(3145),w=v(6459);d=function(T,R,G){var I,z;if(R=w(R,G),A(T))for(I=0,z=T.length;I<z;I++)R(T[I],I,T);else{var H=C(T);for(I=0,z=H.length;I<z;I++)R(T[H[I]],H[I],T)}return T},_.exports=d},9111:function(_,d,v){(d=v(6314)(!1)).push([_.id,'#_elements ._elements{position:absolute;width:100%;height:100%;left:0;top:0;padding-top:40px;padding-bottom:24px;font-size:14px}#_elements ._control{padding:10px 0;position:absolute;width:100%;height:40px;left:0;top:0;cursor:default;font-size:0;background:var(--darker-background);color:var(--primary);line-height:20px;border-bottom:1px solid var(--border)}#_elements ._control [class*=" _icon-"],#_elements ._control [class^=eruda-icon-]{display:inline-block;padding:10px;font-size:16px;position:absolute;top:0;cursor:pointer;transition:color .3s}#_elements ._control [class*=" _icon-"]._active,#_elements ._control [class*=" _icon-"]:active,#_elements ._control [class^=eruda-icon-]._active,#_elements ._control [class^=eruda-icon-]:active{color:var(--accent)}#_elements ._control ._icon-eye{right:0}#_elements ._control ._icon-copy{right:23px}#_elements ._control ._icon-delete{right:46px}#_elements ._dom-viewer-container{overflow:auto;-webkit-overflow-scrolling:touch;height:100%;padding:5px 0}#_elements ._crumbs{position:absolute;width:100%;height:24px;left:0;top:0;top:initial;line-height:24px;bottom:0;border-top:1px solid var(--border);background:var(--darker-background);color:var(--primary);font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}#_elements ._crumbs li{cursor:pointer;padding:0 7px;display:inline-block}#_elements ._crumbs li:hover,#_elements ._crumbs li:last-child{background:var(--highlight)}#_elements ._crumbs ._icon-arrow-right{font-size:12px;position:relative;top:1px}#_elements ._detail{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10;padding-top:40px;display:none;background:var(--background)}#_elements ._detail ._control{padding:10px 35px}#_elements ._detail ._control ._element-name{font-size:12px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%;display:inline-block}#_elements ._detail ._control ._icon-arrow-left{left:0}#_elements ._detail ._control ._icon-refresh{right:0}#_elements ._detail ._element{overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%}#_elements ._section{border-bottom:1px solid var(--border);color:var(--foreground);margin:10px 0}#_elements ._section h2{color:var(--primary);background:var(--darker-background);border-top:1px solid var(--border);padding:10px;line-height:18px;font-size:14px;transition:background-color .3s}#_elements ._section h2 ._btn{margin-left:5px;float:right;color:var(--primary);width:18px;height:18px;font-size:16px;cursor:pointer;transition:color .3s}#_elements ._section h2 ._btn._filter-text{width:auto;max-width:80px;font-size:14px;overflow:hidden;font-weight:400;text-overflow:ellipsis;display:inline-block}#_elements ._section h2 ._btn:active{color:var(--accent)}#_elements ._section h2 ._btn._btn-disabled{color:inherit!important;cursor:default!important;pointer-events:none;opacity:.5}#_elements ._section h2 ._btn._btn-disabled *{pointer-events:none}#_elements ._section h2._active-effect{cursor:pointer}#_elements ._section h2._active-effect:active{background:var(--highlight);color:var(--select-foreground)}#_elements ._attributes{font-size:12px}#_elements ._attributes a{color:var(--link-color)}#_elements ._attributes ._table-wrapper{overflow-x:auto;-webkit-overflow-scrolling:touch}#_elements ._attributes table td{padding:5px 10px}#_elements ._text-content{background:#fff}#_elements ._text-content ._content{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px}#_elements ._style-color{position:relative;top:1px;width:10px;height:10px;border-radius:50%;margin-right:2px;border:1px solid var(--border);display:inline-block}#_elements ._box-model{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;text-align:center;border-bottom:1px solid var(--color)}#_elements ._computed-style{font-size:12px}#_elements ._computed-style a{color:var(--link-color)}#_elements ._computed-style ._table-wrapper{overflow-y:auto;-webkit-overflow-scrolling:touch;max-height:200px;border-top:1px solid var(--border)}#_elements ._computed-style table td{padding:5px 10px}#_elements ._computed-style table td._key{white-space:nowrap;color:var(--var-color)}#_elements ._styles{font-size:12px}#_elements ._styles ._style-wrapper{padding:10px}#_elements ._styles ._style-wrapper ._style-rules{border:1px solid var(--border);padding:10px;margin-bottom:10px}#_elements ._styles ._style-wrapper ._style-rules ._rule{padding-left:2em;word-break:break-all}#_elements ._styles ._style-wrapper ._style-rules ._rule a{color:var(--link-color)}#_elements ._styles ._style-wrapper ._style-rules ._rule span{color:var(--var-color)}#_elements ._styles ._style-wrapper ._style-rules:last-child{margin-bottom:0}#_elements ._listeners{font-size:12px}#_elements ._listeners ._listener-wrapper{padding:10px}#_elements ._listeners ._listener-wrapper ._listener{margin-bottom:10px;overflow:hidden;border:1px solid var(--border)}#_elements ._listeners ._listener-wrapper ._listener ._listener-type{padding:10px;background:var(--darker-background);color:var(--primary)}#_elements ._listeners ._listener-wrapper ._listener ._listener-content li{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:10px;border-top:none}._safe-area #_elements ._elements{padding-bottom:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._crumbs{height:calc(24px + env(safe-area-inset-bottom))}._safe-area #_elements ._element{padding-bottom:calc(0px + env(safe-area-inset-bottom))}@media screen and (min-width:680px){#_elements ._elements{width:50%}#_elements ._elements ._control ._icon-eye{display:none}#_elements ._elements ._control ._icon-copy{right:0}#_elements ._elements ._control ._icon-delete{right:23px}#_elements ._detail{width:50%;left:initial;right:0;border-left:1px solid var(--border)}#_elements ._detail ._control{padding-left:10px}#_elements ._detail ._control ._icon-arrow-left{display:none}}',""]),_.exports=d},9117:function(_,d,v){var A=v(6030),C=v(1738);d=function(G){if(C(G)){var I=G.match(R);return I?A(I[1])*w[I[2]||"ms"]:0}for(var z=G,H="ms",Y=0,ee=T.length;Y<ee;Y++)if(z>=w[T[Y]]){H=T[Y];break}return+(z/w[H]).toFixed(2)+H};var w={ms:1,s:1e3};w.m=60*w.s,w.h=60*w.m,w.d=24*w.h,w.y=365.25*w.d;var T=["y","d","h","m","s"],R=/^((?:\d+)?\.?\d+) *(s|m|h|d|y)?$/;_.exports=d},9122:function(_,d,v){var A=v(9760),C=v(3957),w=v(1168);d=function(I){return!!A(I)&&(C(I)?R.test(w(I)):G.test(w(I)))};var T=Object.prototype.hasOwnProperty,R=new RegExp("^"+w(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=/^\[object .+?Constructor\]$/;_.exports=d},9186:function(_,d,v){var A=v(769),C=v(9760),w=v(1738),T=v(9100),R=v(8971),G=v(3612);(d=function(I,z,H){if(I=G(I),R(H)&&w(z))return function(ee,ie){return ee.getAttribute(ie)}(I[0],z);var Y=z;C(Y)||((Y={})[z]=H),function(ee,ie){T(ee,function(oe){T(ie,function(se,re){oe.setAttribute(re,se)})})}(I,Y)}).remove=function(I,z){I=G(I),z=A(z),T(I,function(H){T(z,function(Y){H.removeAttribute(Y)})})},_.exports=d},9196:function(_,d,v){var A,C=this&&this.__extends||(A=function(Oe,Ge){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ze,je){ze.__proto__=je}||function(ze,je){for(var He in je)Object.prototype.hasOwnProperty.call(je,He)&&(ze[He]=je[He])},A(Oe,Ge)},function(Oe,Ge){if(typeof Ge!="function"&&Ge!==null)throw new TypeError("Class extends value "+String(Ge)+" is not a constructor or null");function ze(){this.constructor=Oe}A(Oe,Ge),Oe.prototype=Ge===null?Object.create(Ge):(ze.prototype=Ge.prototype,new ze)}),w=this&&this.__assign||function(){return w=Object.assign||function(Oe){for(var Ge,ze=1,je=arguments.length;ze<je;ze++)for(var He in Ge=arguments[ze])Object.prototype.hasOwnProperty.call(Ge,He)&&(Oe[He]=Ge[He]);return Oe},w.apply(this,arguments)},T=this&&this.__values||function(Oe){var Ge=typeof Symbol=="function"&&Symbol.iterator,ze=Ge&&Oe[Ge],je=0;if(ze)return ze.call(Oe);if(Oe&&typeof Oe.length=="number")return{next:function(){return Oe&&je>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[je++],done:!Oe}}};throw new TypeError(Ge?"Object is not iterable.":"Symbol.iterator is not defined.")},R=this&&this.__importDefault||function(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}};Object.defineProperty(d,"__esModule",{value:!0});var G=R(v(7214)),I=v(926),z=v(4725),H=R(v(4095)),Y=R(v(5865)),ee=R(v(96)),ie=R(v(9100)),oe=R(v(8734)),se=R(v(9848)),re=R(v(3805)),fe=R(v(8105)),ue=R(v(387)),ge=R(v(3249)),ye=R(v(6030)),be=R(v(3019)),ve=R(v(1738));v(3270);var Me=function(Oe){function Ge(ze,je){je===void 0&&(je={});var He=Oe.call(this,ze,{compName:"dom-highlighter"},je)||this;return He.overlay=new I.HighlightOverlay(window),He.reset=function(){var Xe=document.documentElement.clientWidth,$e=document.documentElement.clientHeight;He.overlay.reset({viewportSize:{width:Xe,height:$e},deviceScaleFactor:1,pageScaleFactor:1,pageZoomFactor:1,emulationScaleFactor:1,scrollX:window.scrollX,scrollY:window.scrollY})},He.initOptions(je,{showRulers:!1,showExtensionLines:!1,showInfo:!0,showStyles:!0,showAccessibilityInfo:!0,colorFormat:"hex",contentColor:"rgba(111, 168, 220, .66)",paddingColor:"rgba(147, 196, 125, .55)",borderColor:"rgba(255, 229, 153, .66)",marginColor:"rgba(246, 178, 107, .66)",monitorResize:!0}),He.overlay.setContainer(ze),He.overlay.setPlatform("mac"),He.redraw=(0,Y.default)(function(){He.reset(),He.draw()},16),He.redraw(),He.bindEvent(),He}return C(Ge,Oe),Ge.prototype.highlight=function(ze,je){je&&(0,fe.default)(this.options,je),this.target=ze,ze instanceof HTMLElement&&this.options.monitorResize&&(this.resizeSensor&&this.resizeSensor.destroy(),this.resizeSensor=new H.default(ze),this.resizeSensor.addListener(this.redraw)),this.redraw()},Ge.prototype.hide=function(){this.target=null,this.redraw()},Ge.prototype.intercept=function(ze){this.interceptor=ze},Ge.prototype.destroy=function(){window.removeEventListener("resize",this.redraw),window.removeEventListener("scroll",this.redraw),this.resizeSensor&&this.resizeSensor.destroy(),Oe.prototype.destroy.call(this)},Ge.prototype.draw=function(){var ze=this.target;ze&&(ze instanceof Text?this.drawText(ze):this.drawElement(ze))},Ge.prototype.drawText=function(ze){var je=this.options,He=document.createRange();He.selectNode(ze);var Xe=He.getBoundingClientRect(),$e=Xe.left,We=Xe.top,nt=Xe.width,Qt=Xe.height;He.detach();var Wt={paths:[{path:this.rectToPath({left:$e,top:We,width:nt,height:Qt}),fillColor:De(je.contentColor),name:"content"}],showExtensionLines:je.showExtensionLines,showRulers:je.showRulers};je.showInfo&&(Wt.elementInfo={tagName:"#text",nodeWidth:nt,nodeHeight:Qt}),this.overlay.drawHighlight(Wt)},Ge.prototype.drawElement=function(ze){var je={paths:this.getPaths(ze),showExtensionLines:this.options.showExtensionLines,showRulers:this.options.showRulers,colorFormat:this.options.colorFormat};if(this.options.showInfo&&(je.elementInfo=this.getElementInfo(ze)),this.interceptor){var He=this.interceptor(je);He&&(je=He)}this.overlay.drawHighlight(je)},Ge.prototype.getPaths=function(ze){var je=this.options,He=window.getComputedStyle(ze),Xe=ze.getBoundingClientRect(),$e=Xe.left,We=Xe.top,nt=Xe.width,Qt=Xe.height,Wt=function(Xn){return(0,z.pxToNum)(He.getPropertyValue(Xn))},Bn=Wt("margin-left"),Lt=Wt("margin-right"),Mn=Wt("margin-top"),cr=Wt("margin-bottom"),In=Wt("border-left-width"),Zn=Wt("border-right-width"),$n=Wt("border-top-width"),Rn=Wt("border-bottom-width"),Dn=Wt("padding-left"),Gt=Wt("padding-right"),Jn=Wt("padding-top"),Nn=Wt("padding-bottom");return[{path:this.rectToPath({left:$e+In+Dn,top:We+$n+Jn,width:nt-In-Dn-Zn-Gt,height:Qt-$n-Jn-Rn-Nn}),fillColor:De(je.contentColor),name:"content"},{path:this.rectToPath({left:$e+In,top:We+$n,width:nt-In-Zn,height:Qt-$n-Rn}),fillColor:De(je.paddingColor),name:"padding"},{path:this.rectToPath({left:$e,top:We,width:nt,height:Qt}),fillColor:De(je.borderColor),name:"border"},{path:this.rectToPath({left:$e-Bn,top:We-Mn,width:nt+Bn+Lt,height:Qt+Mn+cr}),fillColor:De(je.marginColor),name:"margin"}]},Ge.prototype.getElementInfo=function(ze){var je=ze.getBoundingClientRect(),He=je.width,Xe=je.height,$e=ze.getAttribute("class")||"";$e=$e.split(/\s+/).map(function(nt){return"."+nt}).join("");var We={tagName:(0,ee.default)(ze.tagName),className:$e,idValue:ze.id,nodeWidth:He,nodeHeight:Xe};return this.options.showStyles&&(We.style=this.getStyles(ze)),this.options.showAccessibilityInfo&&(0,fe.default)(We,this.getAccessibilityInfo(ze)),We},Ge.prototype.getStyles=function(ze){for(var je=window.getComputedStyle(ze),He=!1,Xe=ze.childNodes,$e=0,We=Xe.length;$e<We;$e++)Xe[$e].nodeType===3&&(He=!0);var nt=[];return He&&nt.push("color","font-family","font-size","line-height"),nt.push("padding","margin","background-color"),Fe(je,nt)},Ge.prototype.getAccessibilityInfo=function(ze){var je=window.getComputedStyle(ze);return w({showAccessibilityInfo:!0,contrast:w({contrastAlgorithm:"aa",textOpacity:.1},Fe(je,["font-size","font-weight","background-color","text-opacity"],!0)),isKeyboardFocusable:this.isFocusable(ze)},this.getAccessibleNameAndRole(ze))},Ge.prototype.isFocusable=function(ze){var je=(0,ee.default)(ze.tagName);if((0,ge.default)(["a","button","input","textarea","select","details"],je))return!0;var He=ze.getAttribute("tabindex");return!!(He&&(0,ye.default)(He)>-1)},Ge.prototype.getAccessibleNameAndRole=function(ze){var je=ze.getAttribute("labelledby")||ze.getAttribute("aria-label"),He=ze.getAttribute("role"),Xe=(0,ee.default)(ze.tagName);return be.default.forEach(function($e){var We,nt;if(!He){var Qt=$e[0],Wt=$e[2];if(Qt===Xe){if(Wt)try{for(var Bn=T(Wt),Lt=Bn.next();!Lt.done;Lt=Bn.next()){var Mn=Lt.value;if(ze.getAttribute(Mn[0])!==Mn[1])return}}catch(cr){We={error:cr}}finally{try{Lt&&!Lt.done&&(nt=Bn.return)&&nt.call(Bn)}finally{if(We)throw We.error}}He=$e[1]}}}),{accessibleName:je||ze.getAttribute("title")||"",accessibleRole:He||"generic"}},Ge.prototype.bindEvent=function(){var ze=this;window.addEventListener("resize",this.redraw),window.addEventListener("scroll",this.redraw),this.on("optionChange",function(){return ze.redraw()})},Ge.prototype.rectToPath=function(ze){var je=ze.left,He=ze.top,Xe=ze.width,$e=ze.height,We=[];return We.push("M",je,He),We.push("L",je+Xe,He),We.push("L",je+Xe,He+$e),We.push("L",je,He+$e),We.push("Z"),We},Ge}(G.default);d.default=Me,_.exports=Me,_.exports.default=Me;var we=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,Be=/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)\)$/;function De(Oe){return(0,ve.default)(Oe)?Oe:Oe.a?"rgba(".concat(Oe.r,", ").concat(Oe.g,", ").concat(Oe.b,", ").concat(Oe.a,")"):"rgb(".concat(Oe.r,", ").concat(Oe.g,", ").concat(Oe.b,")")}function Fe(Oe,Ge,ze){ze===void 0&&(ze=!1);var je={};return(0,ie.default)(Ge,function(He){var Xe,$e=Oe[He==="text-opacity"?"color":He];$e&&(Xe=$e,(we.test(Xe)||Be.test(Xe))&&($e=function(We){var nt=oe.default.parse(We),Qt=nt.val[3]||1;return nt.val=nt.val.slice(0,3),nt.val.push(Math.round(255*Qt)),"#"+(0,re.default)(se.default.encode(nt.val))}($e),He==="text-opacity"&&($e=$e.slice(7),$e=se.default.decode($e)[0]/255)),ze&&(He=(0,ue.default)(He)),je[He]=$e)}),je}},9350:function(_,d){d=function(v){return typeof v=="symbol"},_.exports=d},9389:function(_,d,v){var A=v(5902),C=v(3145);d=function(z){return R.test(z)?z.replace(G,I):z};var w=v(5282)(A.map),T="(?:"+C(w).join("|")+")",R=new RegExp(T),G=new RegExp(T,"g");function I(z){return w[z]}_.exports=d},9405:function(_,d,v){var A=v(5333),C=v(9651);d=function(w,T){return T==null&&w.trim?w.trim():A(C(w,T),T)},_.exports=d},9410:function(_,d,v){var A=v(9993);d=function(C,w){w=w||A;var T=new Image;T.onload=function(){w(null,T)},T.onerror=function(R){w(R)},T.src=C},_.exports=d},9464:function(_,d,v){var A=v(5793),C=v(6214),w=v(1738),T=v(5132),R=v(3145);d=function(G){return G==null||(A(G)&&(C(G)||w(G)||T(G))?G.length===0:R(G).length===0)},_.exports=d},9548:function(_,d,v){var A=v(383),C=v(7005),w=v(6214),T=v(9100),R=v(1738),G=v(5154),I=function(H){return H.replace(/&quot;/g,'"')},z=function(H){return H.replace(/"/g,"&quot;")};d={parse:function(H){var Y=[],ee=new C;return A(H,{start:function(ie,oe){oe=G(oe,function(se){return I(se)}),ee.push({tag:ie,attrs:oe})},end:function(){var ie=ee.pop();if(ee.size){var oe=ee.peek();w(oe.content)||(oe.content=[]),oe.content.push(ie)}else Y.push(ie)},comment:function(ie){var oe="<!--".concat(ie,"-->"),se=ee.peek();se?(se.content||(se.content=[]),se.content.push(oe)):Y.push(oe)},text:function(ie){var oe=ee.peek();oe?(oe.content||(oe.content=[]),oe.content.push(ie)):Y.push(ie)}}),Y},stringify:function H(Y){var ee="";return w(Y)?T(Y,function(ie){return ee+=H(ie)}):R(Y)?ee=Y:(ee+="<".concat(Y.tag),T(Y.attrs,function(ie,oe){return ee+=" ".concat(oe,'="').concat(z(ie),'"')}),ee+=">",Y.content&&(ee+=H(Y.content)),ee+="</".concat(Y.tag,">")),ee}},_.exports=d},9651:function(_,d){d=function(v,A){if(A==null){if(v.trimRight)return v.trimRight();A=` \r
	\f\v`}for(var C,w,T=v.length-1,R=A.length,G=!0;G&&T>=0;)for(G=!1,C=-1,w=v.charAt(T);++C<R;)if(w===A[C]){G=!0,T--;break}return T>=0?v.substring(0,T+1):""},_.exports=d},9756:function(_,d){d=function(v){for(var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.defComparator,C=0,w=v.length;C<w-1;C++)if(A(v[C],v[C+1])>0)return!1;return!0},d.defComparator=function(v,A){return v<A?-1:v>A?1:0},_.exports=d},9760:function(_,d){d=function(v){var A=typeof v;return!!v&&(A==="function"||A==="object")},_.exports=d},9848:function(_,d,v){var A=v(6024);d={encode:function(C){for(var w=[],T=0,R=C.length;T<R;T++){var G=C[T];w.push((G>>>4).toString(16)),w.push((15&G).toString(16))}return w.join("")},decode:function(C){var w=[],T=C.length;A(T)&&T--;for(var R=0;R<T;R+=2)w.push(parseInt(C.substr(R,2),16));return w}},_.exports=d},9861:function(_,d,v){(d=v(6314)(!1)).push([_.id,"#_snippets{overflow-y:auto;-webkit-overflow-scrolling:touch;padding:10px}#_snippets ._section{margin-bottom:10px;border:1px solid var(--border);overflow:hidden;cursor:pointer}#_snippets ._section:active ._name{background:var(--highlight);color:var(--select-foreground)}#_snippets ._section ._name{padding:10px;line-height:18px;color:var(--primary);background:var(--darker-background);transition:background-color .3s}#_snippets ._section ._name ._btn{margin-left:10px;float:right;text-align:center;width:18px;height:18px;font-size:12px}#_snippets ._section ._description{font-size:12px;color:var(--foreground);padding:10px;transition:background-color .3s}._safe-area #_snippets{padding-bottom:calc(10px + env(safe-area-inset-bottom))}",""]),_.exports=d},9893:function(_,d,v){var A=this&&this.__importDefault||function(ue){return ue&&ue.__esModule?ue:{default:ue}};Object.defineProperty(d,"__esModule",{value:!0}),d.getOrCreateNodeId=ie,d.clear=function(){H.clear(),Y.clear()},d.getNodeId=function(ue){return Y.get(ue)},d.wrap=oe,d.getChildNodes=se,d.getPreviousNode=function(ue){var ge=ue.previousSibling;if(ge){for(;!fe(ge)&&ge.previousSibling;)ge=ge.previousSibling;if(ge&&fe(ge))return ge}},d.filterNodes=re,d.isValidNode=fe,d.getNode=function(ue){var ge=H.get(ue);if(!ge||ge.nodeType===10||ge.nodeType===11)throw(0,z.createErr)(-32e3,"Could not find node with given id");return ge};var C=A(v(3915)),w=A(v(2571)),T=A(v(9100)),R=A(v(9405)),G=A(v(3249)),I=A(v(8105)),z=v(916),H=new Map,Y=new Map,ee=1;function ie(ue){var ge=Y.get(ue);return ge||(ge=ee++,Y.set(ue,ge),H.set(ge,ue),ge)}function oe(ue,ge){var ye=(ge===void 0?{}:ge).depth,be=ye===void 0?1:ye,ve=ie(ue),Me={nodeName:ue.nodeName,nodeType:ue.nodeType,localName:ue.localName||"",nodeValue:ue.nodeValue||"",nodeId:ve,backendNodeId:ve};if(ue.parentNode&&(Me.parentId=ie(ue.parentNode)),ue.nodeType===10)return(0,I.default)(Me,{publicId:"",systemId:""});if(ue.attributes){var we=[];(0,T.default)(ue.attributes,function(Fe){var Oe=Fe.name,Ge=Fe.value;return we.push(Oe,Ge)}),Me.attributes=we}ue.shadowRoot?Me.shadowRoots=[oe(ue.shadowRoot,{depth:1})]:ue.chobitsuShadowRoot&&(Me.shadowRoots=[oe(ue.chobitsuShadowRoot,{depth:1})]),function(Fe){return window.ShadowRoot?Fe instanceof ShadowRoot:!1}(ue)&&(Me.shadowRootType=ue.mode||"user-agent");var Be=re(ue.childNodes);Me.childNodeCount=Be.length;var De=Me.childNodeCount===1&&Be[0].nodeType===3;return(be>0||De)&&(Me.children=se(ue,be)),Me}function se(ue,ge){var ye=re(ue.childNodes);return(0,C.default)(ye,function(be){return oe(be,{depth:ge-1})})}function re(ue){return w.default(ue,function(ge){return fe(ge)})}function fe(ue){if(ue.nodeType===1){var ge=ue.getAttribute("class")||"";if((0,G.default)(ge,"__chobitsu-hide__")||(0,G.default)(ge,"html2canvas-container"))return!1}var ye=!(ue.nodeType===3&&(0,R.default)(ue.nodeValue||"")==="");return ye&&ue.parentNode?fe(ue.parentNode):ye}},9907:function(_,d,v){(d=v(6314)(!1)).push([_.id,"@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\\f101'}.luna-object-viewer-icon-caret-right:before{content:'\\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}",""]),_.exports=d},9931:function(_,d){d=function(v){return v.length<1?v:v[0].toUpperCase()+v.slice(1)},_.exports=d},9993:function(_,d){d=function(){},_.exports=d}},__webpack_module_cache__={};function __webpack_require__(_){var d=__webpack_module_cache__[_];if(d!==void 0)return d.exports;var v=__webpack_module_cache__[_]={id:_,loaded:!1,exports:{}};return __webpack_modules__[_].call(v.exports,v,v.exports,__webpack_require__),v.loaded=!0,v.exports}__webpack_require__.n=function(_){var d=_&&_.__esModule?function(){return _.default}:function(){return _};return __webpack_require__.d(d,{a:d}),d},__webpack_require__.d=function(_,d){for(var v in d)__webpack_require__.o(d,v)&&!__webpack_require__.o(_,v)&&Object.defineProperty(_,v,{enumerable:!0,get:d[v]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.hmd=function(_){return(_=Object.create(_)).children||(_.children=[]),Object.defineProperty(_,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+_.id)}}),_},__webpack_require__.o=function(_,d){return Object.prototype.hasOwnProperty.call(_,d)},__webpack_require__.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(2980);return __webpack_exports__}()})}(eruda$1)),eruda$1.exports}var erudaExports=requireEruda();const eruda=getDefaultExportFromCjs(erudaExports);var naclUtil$1={exports:{}},naclUtil=naclUtil$1.exports,hasRequiredNaclUtil;function requireNaclUtil(){return hasRequiredNaclUtil||(hasRequiredNaclUtil=1,function(_){(function(d,v){_.exports?_.exports=v():(d.nacl||(d.nacl={}),d.nacl.util=v())})(naclUtil,function(){var d={};function v(A){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(A))throw new TypeError("invalid encoding")}return d.decodeUTF8=function(A){if(typeof A!="string")throw new TypeError("expected string");var C,w=unescape(encodeURIComponent(A)),T=new Uint8Array(w.length);for(C=0;C<w.length;C++)T[C]=w.charCodeAt(C);return T},d.encodeUTF8=function(A){var C,w=[];for(C=0;C<A.length;C++)w.push(String.fromCharCode(A[C]));return decodeURIComponent(escape(w.join("")))},typeof atob>"u"?typeof Buffer.from<"u"?(d.encodeBase64=function(A){return Buffer.from(A).toString("base64")},d.decodeBase64=function(A){return v(A),new Uint8Array(Array.prototype.slice.call(Buffer.from(A,"base64"),0))}):(d.encodeBase64=function(A){return new Buffer(A).toString("base64")},d.decodeBase64=function(A){return v(A),new Uint8Array(Array.prototype.slice.call(new Buffer(A,"base64"),0))}):(d.encodeBase64=function(A){var C,w=[],T=A.length;for(C=0;C<T;C++)w.push(String.fromCharCode(A[C]));return btoa(w.join(""))},d.decodeBase64=function(A){v(A);var C,w=atob(A),T=new Uint8Array(w.length);for(C=0;C<w.length;C++)T[C]=w.charCodeAt(C);return T}),d})}(naclUtil$1)),naclUtil$1.exports}var naclUtilExports=requireNaclUtil();const nacl=getDefaultExportFromCjs(naclUtilExports);function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredNaclFast;function requireNaclFast(){return hasRequiredNaclFast||(hasRequiredNaclFast=1,function(_){(function(d){var v=function(tt){var $t,dn=new Float64Array(16);if(tt)for($t=0;$t<tt.length;$t++)dn[$t]=tt[$t];return dn},A=function(){throw new Error("no PRNG")},C=new Uint8Array(16),w=new Uint8Array(32);w[0]=9;var T=v(),R=v([1]),G=v([56129,1]),I=v([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),z=v([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),H=v([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=v([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),ee=v([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ie(tt,$t,dn,Qe){tt[$t]=dn>>24&255,tt[$t+1]=dn>>16&255,tt[$t+2]=dn>>8&255,tt[$t+3]=dn&255,tt[$t+4]=Qe>>24&255,tt[$t+5]=Qe>>16&255,tt[$t+6]=Qe>>8&255,tt[$t+7]=Qe&255}function oe(tt,$t,dn,Qe,gn){var sr,rr=0;for(sr=0;sr<gn;sr++)rr|=tt[$t+sr]^dn[Qe+sr];return(1&rr-1>>>8)-1}function se(tt,$t,dn,Qe){return oe(tt,$t,dn,Qe,16)}function re(tt,$t,dn,Qe){return oe(tt,$t,dn,Qe,32)}function fe(tt,$t,dn,Qe){for(var gn=Qe[0]&255|(Qe[1]&255)<<8|(Qe[2]&255)<<16|(Qe[3]&255)<<24,sr=dn[0]&255|(dn[1]&255)<<8|(dn[2]&255)<<16|(dn[3]&255)<<24,rr=dn[4]&255|(dn[5]&255)<<8|(dn[6]&255)<<16|(dn[7]&255)<<24,it=dn[8]&255|(dn[9]&255)<<8|(dn[10]&255)<<16|(dn[11]&255)<<24,At=dn[12]&255|(dn[13]&255)<<8|(dn[14]&255)<<16|(dn[15]&255)<<24,An=Qe[4]&255|(Qe[5]&255)<<8|(Qe[6]&255)<<16|(Qe[7]&255)<<24,Ft=$t[0]&255|($t[1]&255)<<8|($t[2]&255)<<16|($t[3]&255)<<24,Hn=$t[4]&255|($t[5]&255)<<8|($t[6]&255)<<16|($t[7]&255)<<24,wn=$t[8]&255|($t[9]&255)<<8|($t[10]&255)<<16|($t[11]&255)<<24,lr=$t[12]&255|($t[13]&255)<<8|($t[14]&255)<<16|($t[15]&255)<<24,rt=Qe[8]&255|(Qe[9]&255)<<8|(Qe[10]&255)<<16|(Qe[11]&255)<<24,ln=dn[16]&255|(dn[17]&255)<<8|(dn[18]&255)<<16|(dn[19]&255)<<24,Cn=dn[20]&255|(dn[21]&255)<<8|(dn[22]&255)<<16|(dn[23]&255)<<24,zn=dn[24]&255|(dn[25]&255)<<8|(dn[26]&255)<<16|(dn[27]&255)<<24,Sn=dn[28]&255|(dn[29]&255)<<8|(dn[30]&255)<<16|(dn[31]&255)<<24,yr=Qe[12]&255|(Qe[13]&255)<<8|(Qe[14]&255)<<16|(Qe[15]&255)<<24,ur=gn,hr=sr,fr=rr,Sr=it,Lr=At,Nr=An,xr=Ft,Cr=Hn,Or=wn,Ur=lr,Pr=rt,Vr=ln,xi=Cn,Ai=zn,Ti=Sn,Si=yr,ir,bi=0;bi<20;bi+=2)ir=ur+xi|0,Lr^=ir<<7|ir>>>25,ir=Lr+ur|0,Or^=ir<<9|ir>>>23,ir=Or+Lr|0,xi^=ir<<13|ir>>>19,ir=xi+Or|0,ur^=ir<<18|ir>>>14,ir=Nr+hr|0,Ur^=ir<<7|ir>>>25,ir=Ur+Nr|0,Ai^=ir<<9|ir>>>23,ir=Ai+Ur|0,hr^=ir<<13|ir>>>19,ir=hr+Ai|0,Nr^=ir<<18|ir>>>14,ir=Pr+xr|0,Ti^=ir<<7|ir>>>25,ir=Ti+Pr|0,fr^=ir<<9|ir>>>23,ir=fr+Ti|0,xr^=ir<<13|ir>>>19,ir=xr+fr|0,Pr^=ir<<18|ir>>>14,ir=Si+Vr|0,Sr^=ir<<7|ir>>>25,ir=Sr+Si|0,Cr^=ir<<9|ir>>>23,ir=Cr+Sr|0,Vr^=ir<<13|ir>>>19,ir=Vr+Cr|0,Si^=ir<<18|ir>>>14,ir=ur+Sr|0,hr^=ir<<7|ir>>>25,ir=hr+ur|0,fr^=ir<<9|ir>>>23,ir=fr+hr|0,Sr^=ir<<13|ir>>>19,ir=Sr+fr|0,ur^=ir<<18|ir>>>14,ir=Nr+Lr|0,xr^=ir<<7|ir>>>25,ir=xr+Nr|0,Cr^=ir<<9|ir>>>23,ir=Cr+xr|0,Lr^=ir<<13|ir>>>19,ir=Lr+Cr|0,Nr^=ir<<18|ir>>>14,ir=Pr+Ur|0,Vr^=ir<<7|ir>>>25,ir=Vr+Pr|0,Or^=ir<<9|ir>>>23,ir=Or+Vr|0,Ur^=ir<<13|ir>>>19,ir=Ur+Or|0,Pr^=ir<<18|ir>>>14,ir=Si+Ti|0,xi^=ir<<7|ir>>>25,ir=xi+Si|0,Ai^=ir<<9|ir>>>23,ir=Ai+xi|0,Ti^=ir<<13|ir>>>19,ir=Ti+Ai|0,Si^=ir<<18|ir>>>14;ur=ur+gn|0,hr=hr+sr|0,fr=fr+rr|0,Sr=Sr+it|0,Lr=Lr+At|0,Nr=Nr+An|0,xr=xr+Ft|0,Cr=Cr+Hn|0,Or=Or+wn|0,Ur=Ur+lr|0,Pr=Pr+rt|0,Vr=Vr+ln|0,xi=xi+Cn|0,Ai=Ai+zn|0,Ti=Ti+Sn|0,Si=Si+yr|0,tt[0]=ur>>>0&255,tt[1]=ur>>>8&255,tt[2]=ur>>>16&255,tt[3]=ur>>>24&255,tt[4]=hr>>>0&255,tt[5]=hr>>>8&255,tt[6]=hr>>>16&255,tt[7]=hr>>>24&255,tt[8]=fr>>>0&255,tt[9]=fr>>>8&255,tt[10]=fr>>>16&255,tt[11]=fr>>>24&255,tt[12]=Sr>>>0&255,tt[13]=Sr>>>8&255,tt[14]=Sr>>>16&255,tt[15]=Sr>>>24&255,tt[16]=Lr>>>0&255,tt[17]=Lr>>>8&255,tt[18]=Lr>>>16&255,tt[19]=Lr>>>24&255,tt[20]=Nr>>>0&255,tt[21]=Nr>>>8&255,tt[22]=Nr>>>16&255,tt[23]=Nr>>>24&255,tt[24]=xr>>>0&255,tt[25]=xr>>>8&255,tt[26]=xr>>>16&255,tt[27]=xr>>>24&255,tt[28]=Cr>>>0&255,tt[29]=Cr>>>8&255,tt[30]=Cr>>>16&255,tt[31]=Cr>>>24&255,tt[32]=Or>>>0&255,tt[33]=Or>>>8&255,tt[34]=Or>>>16&255,tt[35]=Or>>>24&255,tt[36]=Ur>>>0&255,tt[37]=Ur>>>8&255,tt[38]=Ur>>>16&255,tt[39]=Ur>>>24&255,tt[40]=Pr>>>0&255,tt[41]=Pr>>>8&255,tt[42]=Pr>>>16&255,tt[43]=Pr>>>24&255,tt[44]=Vr>>>0&255,tt[45]=Vr>>>8&255,tt[46]=Vr>>>16&255,tt[47]=Vr>>>24&255,tt[48]=xi>>>0&255,tt[49]=xi>>>8&255,tt[50]=xi>>>16&255,tt[51]=xi>>>24&255,tt[52]=Ai>>>0&255,tt[53]=Ai>>>8&255,tt[54]=Ai>>>16&255,tt[55]=Ai>>>24&255,tt[56]=Ti>>>0&255,tt[57]=Ti>>>8&255,tt[58]=Ti>>>16&255,tt[59]=Ti>>>24&255,tt[60]=Si>>>0&255,tt[61]=Si>>>8&255,tt[62]=Si>>>16&255,tt[63]=Si>>>24&255}function ue(tt,$t,dn,Qe){for(var gn=Qe[0]&255|(Qe[1]&255)<<8|(Qe[2]&255)<<16|(Qe[3]&255)<<24,sr=dn[0]&255|(dn[1]&255)<<8|(dn[2]&255)<<16|(dn[3]&255)<<24,rr=dn[4]&255|(dn[5]&255)<<8|(dn[6]&255)<<16|(dn[7]&255)<<24,it=dn[8]&255|(dn[9]&255)<<8|(dn[10]&255)<<16|(dn[11]&255)<<24,At=dn[12]&255|(dn[13]&255)<<8|(dn[14]&255)<<16|(dn[15]&255)<<24,An=Qe[4]&255|(Qe[5]&255)<<8|(Qe[6]&255)<<16|(Qe[7]&255)<<24,Ft=$t[0]&255|($t[1]&255)<<8|($t[2]&255)<<16|($t[3]&255)<<24,Hn=$t[4]&255|($t[5]&255)<<8|($t[6]&255)<<16|($t[7]&255)<<24,wn=$t[8]&255|($t[9]&255)<<8|($t[10]&255)<<16|($t[11]&255)<<24,lr=$t[12]&255|($t[13]&255)<<8|($t[14]&255)<<16|($t[15]&255)<<24,rt=Qe[8]&255|(Qe[9]&255)<<8|(Qe[10]&255)<<16|(Qe[11]&255)<<24,ln=dn[16]&255|(dn[17]&255)<<8|(dn[18]&255)<<16|(dn[19]&255)<<24,Cn=dn[20]&255|(dn[21]&255)<<8|(dn[22]&255)<<16|(dn[23]&255)<<24,zn=dn[24]&255|(dn[25]&255)<<8|(dn[26]&255)<<16|(dn[27]&255)<<24,Sn=dn[28]&255|(dn[29]&255)<<8|(dn[30]&255)<<16|(dn[31]&255)<<24,yr=Qe[12]&255|(Qe[13]&255)<<8|(Qe[14]&255)<<16|(Qe[15]&255)<<24,ur=gn,hr=sr,fr=rr,Sr=it,Lr=At,Nr=An,xr=Ft,Cr=Hn,Or=wn,Ur=lr,Pr=rt,Vr=ln,xi=Cn,Ai=zn,Ti=Sn,Si=yr,ir,bi=0;bi<20;bi+=2)ir=ur+xi|0,Lr^=ir<<7|ir>>>25,ir=Lr+ur|0,Or^=ir<<9|ir>>>23,ir=Or+Lr|0,xi^=ir<<13|ir>>>19,ir=xi+Or|0,ur^=ir<<18|ir>>>14,ir=Nr+hr|0,Ur^=ir<<7|ir>>>25,ir=Ur+Nr|0,Ai^=ir<<9|ir>>>23,ir=Ai+Ur|0,hr^=ir<<13|ir>>>19,ir=hr+Ai|0,Nr^=ir<<18|ir>>>14,ir=Pr+xr|0,Ti^=ir<<7|ir>>>25,ir=Ti+Pr|0,fr^=ir<<9|ir>>>23,ir=fr+Ti|0,xr^=ir<<13|ir>>>19,ir=xr+fr|0,Pr^=ir<<18|ir>>>14,ir=Si+Vr|0,Sr^=ir<<7|ir>>>25,ir=Sr+Si|0,Cr^=ir<<9|ir>>>23,ir=Cr+Sr|0,Vr^=ir<<13|ir>>>19,ir=Vr+Cr|0,Si^=ir<<18|ir>>>14,ir=ur+Sr|0,hr^=ir<<7|ir>>>25,ir=hr+ur|0,fr^=ir<<9|ir>>>23,ir=fr+hr|0,Sr^=ir<<13|ir>>>19,ir=Sr+fr|0,ur^=ir<<18|ir>>>14,ir=Nr+Lr|0,xr^=ir<<7|ir>>>25,ir=xr+Nr|0,Cr^=ir<<9|ir>>>23,ir=Cr+xr|0,Lr^=ir<<13|ir>>>19,ir=Lr+Cr|0,Nr^=ir<<18|ir>>>14,ir=Pr+Ur|0,Vr^=ir<<7|ir>>>25,ir=Vr+Pr|0,Or^=ir<<9|ir>>>23,ir=Or+Vr|0,Ur^=ir<<13|ir>>>19,ir=Ur+Or|0,Pr^=ir<<18|ir>>>14,ir=Si+Ti|0,xi^=ir<<7|ir>>>25,ir=xi+Si|0,Ai^=ir<<9|ir>>>23,ir=Ai+xi|0,Ti^=ir<<13|ir>>>19,ir=Ti+Ai|0,Si^=ir<<18|ir>>>14;tt[0]=ur>>>0&255,tt[1]=ur>>>8&255,tt[2]=ur>>>16&255,tt[3]=ur>>>24&255,tt[4]=Nr>>>0&255,tt[5]=Nr>>>8&255,tt[6]=Nr>>>16&255,tt[7]=Nr>>>24&255,tt[8]=Pr>>>0&255,tt[9]=Pr>>>8&255,tt[10]=Pr>>>16&255,tt[11]=Pr>>>24&255,tt[12]=Si>>>0&255,tt[13]=Si>>>8&255,tt[14]=Si>>>16&255,tt[15]=Si>>>24&255,tt[16]=xr>>>0&255,tt[17]=xr>>>8&255,tt[18]=xr>>>16&255,tt[19]=xr>>>24&255,tt[20]=Cr>>>0&255,tt[21]=Cr>>>8&255,tt[22]=Cr>>>16&255,tt[23]=Cr>>>24&255,tt[24]=Or>>>0&255,tt[25]=Or>>>8&255,tt[26]=Or>>>16&255,tt[27]=Or>>>24&255,tt[28]=Ur>>>0&255,tt[29]=Ur>>>8&255,tt[30]=Ur>>>16&255,tt[31]=Ur>>>24&255}function ge(tt,$t,dn,Qe){fe(tt,$t,dn,Qe)}function ye(tt,$t,dn,Qe){ue(tt,$t,dn,Qe)}var be=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function ve(tt,$t,dn,Qe,gn,sr,rr){var it=new Uint8Array(16),At=new Uint8Array(64),An,Ft;for(Ft=0;Ft<16;Ft++)it[Ft]=0;for(Ft=0;Ft<8;Ft++)it[Ft]=sr[Ft];for(;gn>=64;){for(ge(At,it,rr,be),Ft=0;Ft<64;Ft++)tt[$t+Ft]=dn[Qe+Ft]^At[Ft];for(An=1,Ft=8;Ft<16;Ft++)An=An+(it[Ft]&255)|0,it[Ft]=An&255,An>>>=8;gn-=64,$t+=64,Qe+=64}if(gn>0)for(ge(At,it,rr,be),Ft=0;Ft<gn;Ft++)tt[$t+Ft]=dn[Qe+Ft]^At[Ft];return 0}function Me(tt,$t,dn,Qe,gn){var sr=new Uint8Array(16),rr=new Uint8Array(64),it,At;for(At=0;At<16;At++)sr[At]=0;for(At=0;At<8;At++)sr[At]=Qe[At];for(;dn>=64;){for(ge(rr,sr,gn,be),At=0;At<64;At++)tt[$t+At]=rr[At];for(it=1,At=8;At<16;At++)it=it+(sr[At]&255)|0,sr[At]=it&255,it>>>=8;dn-=64,$t+=64}if(dn>0)for(ge(rr,sr,gn,be),At=0;At<dn;At++)tt[$t+At]=rr[At];return 0}function we(tt,$t,dn,Qe,gn){var sr=new Uint8Array(32);ye(sr,Qe,gn,be);for(var rr=new Uint8Array(8),it=0;it<8;it++)rr[it]=Qe[it+16];return Me(tt,$t,dn,rr,sr)}function Be(tt,$t,dn,Qe,gn,sr,rr){var it=new Uint8Array(32);ye(it,sr,rr,be);for(var At=new Uint8Array(8),An=0;An<8;An++)At[An]=sr[An+16];return ve(tt,$t,dn,Qe,gn,At,it)}var De=function(tt){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var $t,dn,Qe,gn,sr,rr,it,At;$t=tt[0]&255|(tt[1]&255)<<8,this.r[0]=$t&8191,dn=tt[2]&255|(tt[3]&255)<<8,this.r[1]=($t>>>13|dn<<3)&8191,Qe=tt[4]&255|(tt[5]&255)<<8,this.r[2]=(dn>>>10|Qe<<6)&7939,gn=tt[6]&255|(tt[7]&255)<<8,this.r[3]=(Qe>>>7|gn<<9)&8191,sr=tt[8]&255|(tt[9]&255)<<8,this.r[4]=(gn>>>4|sr<<12)&255,this.r[5]=sr>>>1&8190,rr=tt[10]&255|(tt[11]&255)<<8,this.r[6]=(sr>>>14|rr<<2)&8191,it=tt[12]&255|(tt[13]&255)<<8,this.r[7]=(rr>>>11|it<<5)&8065,At=tt[14]&255|(tt[15]&255)<<8,this.r[8]=(it>>>8|At<<8)&8191,this.r[9]=At>>>5&127,this.pad[0]=tt[16]&255|(tt[17]&255)<<8,this.pad[1]=tt[18]&255|(tt[19]&255)<<8,this.pad[2]=tt[20]&255|(tt[21]&255)<<8,this.pad[3]=tt[22]&255|(tt[23]&255)<<8,this.pad[4]=tt[24]&255|(tt[25]&255)<<8,this.pad[5]=tt[26]&255|(tt[27]&255)<<8,this.pad[6]=tt[28]&255|(tt[29]&255)<<8,this.pad[7]=tt[30]&255|(tt[31]&255)<<8};De.prototype.blocks=function(tt,$t,dn){for(var Qe=this.fin?0:2048,gn,sr,rr,it,At,An,Ft,Hn,wn,lr,rt,ln,Cn,zn,Sn,yr,ur,hr,fr,Sr=this.h[0],Lr=this.h[1],Nr=this.h[2],xr=this.h[3],Cr=this.h[4],Or=this.h[5],Ur=this.h[6],Pr=this.h[7],Vr=this.h[8],xi=this.h[9],Ai=this.r[0],Ti=this.r[1],Si=this.r[2],ir=this.r[3],bi=this.r[4],vn=this.r[5],Ln=this.r[6],ar=this.r[7],Mr=this.r[8],kr=this.r[9];dn>=16;)gn=tt[$t+0]&255|(tt[$t+1]&255)<<8,Sr+=gn&8191,sr=tt[$t+2]&255|(tt[$t+3]&255)<<8,Lr+=(gn>>>13|sr<<3)&8191,rr=tt[$t+4]&255|(tt[$t+5]&255)<<8,Nr+=(sr>>>10|rr<<6)&8191,it=tt[$t+6]&255|(tt[$t+7]&255)<<8,xr+=(rr>>>7|it<<9)&8191,At=tt[$t+8]&255|(tt[$t+9]&255)<<8,Cr+=(it>>>4|At<<12)&8191,Or+=At>>>1&8191,An=tt[$t+10]&255|(tt[$t+11]&255)<<8,Ur+=(At>>>14|An<<2)&8191,Ft=tt[$t+12]&255|(tt[$t+13]&255)<<8,Pr+=(An>>>11|Ft<<5)&8191,Hn=tt[$t+14]&255|(tt[$t+15]&255)<<8,Vr+=(Ft>>>8|Hn<<8)&8191,xi+=Hn>>>5|Qe,wn=0,lr=wn,lr+=Sr*Ai,lr+=Lr*(5*kr),lr+=Nr*(5*Mr),lr+=xr*(5*ar),lr+=Cr*(5*Ln),wn=lr>>>13,lr&=8191,lr+=Or*(5*vn),lr+=Ur*(5*bi),lr+=Pr*(5*ir),lr+=Vr*(5*Si),lr+=xi*(5*Ti),wn+=lr>>>13,lr&=8191,rt=wn,rt+=Sr*Ti,rt+=Lr*Ai,rt+=Nr*(5*kr),rt+=xr*(5*Mr),rt+=Cr*(5*ar),wn=rt>>>13,rt&=8191,rt+=Or*(5*Ln),rt+=Ur*(5*vn),rt+=Pr*(5*bi),rt+=Vr*(5*ir),rt+=xi*(5*Si),wn+=rt>>>13,rt&=8191,ln=wn,ln+=Sr*Si,ln+=Lr*Ti,ln+=Nr*Ai,ln+=xr*(5*kr),ln+=Cr*(5*Mr),wn=ln>>>13,ln&=8191,ln+=Or*(5*ar),ln+=Ur*(5*Ln),ln+=Pr*(5*vn),ln+=Vr*(5*bi),ln+=xi*(5*ir),wn+=ln>>>13,ln&=8191,Cn=wn,Cn+=Sr*ir,Cn+=Lr*Si,Cn+=Nr*Ti,Cn+=xr*Ai,Cn+=Cr*(5*kr),wn=Cn>>>13,Cn&=8191,Cn+=Or*(5*Mr),Cn+=Ur*(5*ar),Cn+=Pr*(5*Ln),Cn+=Vr*(5*vn),Cn+=xi*(5*bi),wn+=Cn>>>13,Cn&=8191,zn=wn,zn+=Sr*bi,zn+=Lr*ir,zn+=Nr*Si,zn+=xr*Ti,zn+=Cr*Ai,wn=zn>>>13,zn&=8191,zn+=Or*(5*kr),zn+=Ur*(5*Mr),zn+=Pr*(5*ar),zn+=Vr*(5*Ln),zn+=xi*(5*vn),wn+=zn>>>13,zn&=8191,Sn=wn,Sn+=Sr*vn,Sn+=Lr*bi,Sn+=Nr*ir,Sn+=xr*Si,Sn+=Cr*Ti,wn=Sn>>>13,Sn&=8191,Sn+=Or*Ai,Sn+=Ur*(5*kr),Sn+=Pr*(5*Mr),Sn+=Vr*(5*ar),Sn+=xi*(5*Ln),wn+=Sn>>>13,Sn&=8191,yr=wn,yr+=Sr*Ln,yr+=Lr*vn,yr+=Nr*bi,yr+=xr*ir,yr+=Cr*Si,wn=yr>>>13,yr&=8191,yr+=Or*Ti,yr+=Ur*Ai,yr+=Pr*(5*kr),yr+=Vr*(5*Mr),yr+=xi*(5*ar),wn+=yr>>>13,yr&=8191,ur=wn,ur+=Sr*ar,ur+=Lr*Ln,ur+=Nr*vn,ur+=xr*bi,ur+=Cr*ir,wn=ur>>>13,ur&=8191,ur+=Or*Si,ur+=Ur*Ti,ur+=Pr*Ai,ur+=Vr*(5*kr),ur+=xi*(5*Mr),wn+=ur>>>13,ur&=8191,hr=wn,hr+=Sr*Mr,hr+=Lr*ar,hr+=Nr*Ln,hr+=xr*vn,hr+=Cr*bi,wn=hr>>>13,hr&=8191,hr+=Or*ir,hr+=Ur*Si,hr+=Pr*Ti,hr+=Vr*Ai,hr+=xi*(5*kr),wn+=hr>>>13,hr&=8191,fr=wn,fr+=Sr*kr,fr+=Lr*Mr,fr+=Nr*ar,fr+=xr*Ln,fr+=Cr*vn,wn=fr>>>13,fr&=8191,fr+=Or*bi,fr+=Ur*ir,fr+=Pr*Si,fr+=Vr*Ti,fr+=xi*Ai,wn+=fr>>>13,fr&=8191,wn=(wn<<2)+wn|0,wn=wn+lr|0,lr=wn&8191,wn=wn>>>13,rt+=wn,Sr=lr,Lr=rt,Nr=ln,xr=Cn,Cr=zn,Or=Sn,Ur=yr,Pr=ur,Vr=hr,xi=fr,$t+=16,dn-=16;this.h[0]=Sr,this.h[1]=Lr,this.h[2]=Nr,this.h[3]=xr,this.h[4]=Cr,this.h[5]=Or,this.h[6]=Ur,this.h[7]=Pr,this.h[8]=Vr,this.h[9]=xi},De.prototype.finish=function(tt,$t){var dn=new Uint16Array(10),Qe,gn,sr,rr;if(this.leftover){for(rr=this.leftover,this.buffer[rr++]=1;rr<16;rr++)this.buffer[rr]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(Qe=this.h[1]>>>13,this.h[1]&=8191,rr=2;rr<10;rr++)this.h[rr]+=Qe,Qe=this.h[rr]>>>13,this.h[rr]&=8191;for(this.h[0]+=Qe*5,Qe=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=Qe,Qe=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=Qe,dn[0]=this.h[0]+5,Qe=dn[0]>>>13,dn[0]&=8191,rr=1;rr<10;rr++)dn[rr]=this.h[rr]+Qe,Qe=dn[rr]>>>13,dn[rr]&=8191;for(dn[9]-=8192,gn=(Qe^1)-1,rr=0;rr<10;rr++)dn[rr]&=gn;for(gn=~gn,rr=0;rr<10;rr++)this.h[rr]=this.h[rr]&gn|dn[rr];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,sr=this.h[0]+this.pad[0],this.h[0]=sr&65535,rr=1;rr<8;rr++)sr=(this.h[rr]+this.pad[rr]|0)+(sr>>>16)|0,this.h[rr]=sr&65535;tt[$t+0]=this.h[0]>>>0&255,tt[$t+1]=this.h[0]>>>8&255,tt[$t+2]=this.h[1]>>>0&255,tt[$t+3]=this.h[1]>>>8&255,tt[$t+4]=this.h[2]>>>0&255,tt[$t+5]=this.h[2]>>>8&255,tt[$t+6]=this.h[3]>>>0&255,tt[$t+7]=this.h[3]>>>8&255,tt[$t+8]=this.h[4]>>>0&255,tt[$t+9]=this.h[4]>>>8&255,tt[$t+10]=this.h[5]>>>0&255,tt[$t+11]=this.h[5]>>>8&255,tt[$t+12]=this.h[6]>>>0&255,tt[$t+13]=this.h[6]>>>8&255,tt[$t+14]=this.h[7]>>>0&255,tt[$t+15]=this.h[7]>>>8&255},De.prototype.update=function(tt,$t,dn){var Qe,gn;if(this.leftover){for(gn=16-this.leftover,gn>dn&&(gn=dn),Qe=0;Qe<gn;Qe++)this.buffer[this.leftover+Qe]=tt[$t+Qe];if(dn-=gn,$t+=gn,this.leftover+=gn,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(dn>=16&&(gn=dn-dn%16,this.blocks(tt,$t,gn),$t+=gn,dn-=gn),dn){for(Qe=0;Qe<dn;Qe++)this.buffer[this.leftover+Qe]=tt[$t+Qe];this.leftover+=dn}};function Fe(tt,$t,dn,Qe,gn,sr){var rr=new De(sr);return rr.update(dn,Qe,gn),rr.finish(tt,$t),0}function Oe(tt,$t,dn,Qe,gn,sr){var rr=new Uint8Array(16);return Fe(rr,0,dn,Qe,gn,sr),se(tt,$t,rr,0)}function Ge(tt,$t,dn,Qe,gn){var sr;if(dn<32)return-1;for(Be(tt,0,$t,0,dn,Qe,gn),Fe(tt,16,tt,32,dn-32,tt),sr=0;sr<16;sr++)tt[sr]=0;return 0}function ze(tt,$t,dn,Qe,gn){var sr,rr=new Uint8Array(32);if(dn<32||(we(rr,0,32,Qe,gn),Oe($t,16,$t,32,dn-32,rr)!==0))return-1;for(Be(tt,0,$t,0,dn,Qe,gn),sr=0;sr<32;sr++)tt[sr]=0;return 0}function je(tt,$t){var dn;for(dn=0;dn<16;dn++)tt[dn]=$t[dn]|0}function He(tt){var $t,dn,Qe=1;for($t=0;$t<16;$t++)dn=tt[$t]+Qe+65535,Qe=Math.floor(dn/65536),tt[$t]=dn-Qe*65536;tt[0]+=Qe-1+37*(Qe-1)}function Xe(tt,$t,dn){for(var Qe,gn=~(dn-1),sr=0;sr<16;sr++)Qe=gn&(tt[sr]^$t[sr]),tt[sr]^=Qe,$t[sr]^=Qe}function $e(tt,$t){var dn,Qe,gn,sr=v(),rr=v();for(dn=0;dn<16;dn++)rr[dn]=$t[dn];for(He(rr),He(rr),He(rr),Qe=0;Qe<2;Qe++){for(sr[0]=rr[0]-65517,dn=1;dn<15;dn++)sr[dn]=rr[dn]-65535-(sr[dn-1]>>16&1),sr[dn-1]&=65535;sr[15]=rr[15]-32767-(sr[14]>>16&1),gn=sr[15]>>16&1,sr[14]&=65535,Xe(rr,sr,1-gn)}for(dn=0;dn<16;dn++)tt[2*dn]=rr[dn]&255,tt[2*dn+1]=rr[dn]>>8}function We(tt,$t){var dn=new Uint8Array(32),Qe=new Uint8Array(32);return $e(dn,tt),$e(Qe,$t),re(dn,0,Qe,0)}function nt(tt){var $t=new Uint8Array(32);return $e($t,tt),$t[0]&1}function Qt(tt,$t){var dn;for(dn=0;dn<16;dn++)tt[dn]=$t[2*dn]+($t[2*dn+1]<<8);tt[15]&=32767}function Wt(tt,$t,dn){for(var Qe=0;Qe<16;Qe++)tt[Qe]=$t[Qe]+dn[Qe]}function Bn(tt,$t,dn){for(var Qe=0;Qe<16;Qe++)tt[Qe]=$t[Qe]-dn[Qe]}function Lt(tt,$t,dn){var Qe,gn,sr=0,rr=0,it=0,At=0,An=0,Ft=0,Hn=0,wn=0,lr=0,rt=0,ln=0,Cn=0,zn=0,Sn=0,yr=0,ur=0,hr=0,fr=0,Sr=0,Lr=0,Nr=0,xr=0,Cr=0,Or=0,Ur=0,Pr=0,Vr=0,xi=0,Ai=0,Ti=0,Si=0,ir=dn[0],bi=dn[1],vn=dn[2],Ln=dn[3],ar=dn[4],Mr=dn[5],kr=dn[6],gi=dn[7],di=dn[8],_i=dn[9],Hi=dn[10],fi=dn[11],qi=dn[12],Ki=dn[13],$i=dn[14],wi=dn[15];Qe=$t[0],sr+=Qe*ir,rr+=Qe*bi,it+=Qe*vn,At+=Qe*Ln,An+=Qe*ar,Ft+=Qe*Mr,Hn+=Qe*kr,wn+=Qe*gi,lr+=Qe*di,rt+=Qe*_i,ln+=Qe*Hi,Cn+=Qe*fi,zn+=Qe*qi,Sn+=Qe*Ki,yr+=Qe*$i,ur+=Qe*wi,Qe=$t[1],rr+=Qe*ir,it+=Qe*bi,At+=Qe*vn,An+=Qe*Ln,Ft+=Qe*ar,Hn+=Qe*Mr,wn+=Qe*kr,lr+=Qe*gi,rt+=Qe*di,ln+=Qe*_i,Cn+=Qe*Hi,zn+=Qe*fi,Sn+=Qe*qi,yr+=Qe*Ki,ur+=Qe*$i,hr+=Qe*wi,Qe=$t[2],it+=Qe*ir,At+=Qe*bi,An+=Qe*vn,Ft+=Qe*Ln,Hn+=Qe*ar,wn+=Qe*Mr,lr+=Qe*kr,rt+=Qe*gi,ln+=Qe*di,Cn+=Qe*_i,zn+=Qe*Hi,Sn+=Qe*fi,yr+=Qe*qi,ur+=Qe*Ki,hr+=Qe*$i,fr+=Qe*wi,Qe=$t[3],At+=Qe*ir,An+=Qe*bi,Ft+=Qe*vn,Hn+=Qe*Ln,wn+=Qe*ar,lr+=Qe*Mr,rt+=Qe*kr,ln+=Qe*gi,Cn+=Qe*di,zn+=Qe*_i,Sn+=Qe*Hi,yr+=Qe*fi,ur+=Qe*qi,hr+=Qe*Ki,fr+=Qe*$i,Sr+=Qe*wi,Qe=$t[4],An+=Qe*ir,Ft+=Qe*bi,Hn+=Qe*vn,wn+=Qe*Ln,lr+=Qe*ar,rt+=Qe*Mr,ln+=Qe*kr,Cn+=Qe*gi,zn+=Qe*di,Sn+=Qe*_i,yr+=Qe*Hi,ur+=Qe*fi,hr+=Qe*qi,fr+=Qe*Ki,Sr+=Qe*$i,Lr+=Qe*wi,Qe=$t[5],Ft+=Qe*ir,Hn+=Qe*bi,wn+=Qe*vn,lr+=Qe*Ln,rt+=Qe*ar,ln+=Qe*Mr,Cn+=Qe*kr,zn+=Qe*gi,Sn+=Qe*di,yr+=Qe*_i,ur+=Qe*Hi,hr+=Qe*fi,fr+=Qe*qi,Sr+=Qe*Ki,Lr+=Qe*$i,Nr+=Qe*wi,Qe=$t[6],Hn+=Qe*ir,wn+=Qe*bi,lr+=Qe*vn,rt+=Qe*Ln,ln+=Qe*ar,Cn+=Qe*Mr,zn+=Qe*kr,Sn+=Qe*gi,yr+=Qe*di,ur+=Qe*_i,hr+=Qe*Hi,fr+=Qe*fi,Sr+=Qe*qi,Lr+=Qe*Ki,Nr+=Qe*$i,xr+=Qe*wi,Qe=$t[7],wn+=Qe*ir,lr+=Qe*bi,rt+=Qe*vn,ln+=Qe*Ln,Cn+=Qe*ar,zn+=Qe*Mr,Sn+=Qe*kr,yr+=Qe*gi,ur+=Qe*di,hr+=Qe*_i,fr+=Qe*Hi,Sr+=Qe*fi,Lr+=Qe*qi,Nr+=Qe*Ki,xr+=Qe*$i,Cr+=Qe*wi,Qe=$t[8],lr+=Qe*ir,rt+=Qe*bi,ln+=Qe*vn,Cn+=Qe*Ln,zn+=Qe*ar,Sn+=Qe*Mr,yr+=Qe*kr,ur+=Qe*gi,hr+=Qe*di,fr+=Qe*_i,Sr+=Qe*Hi,Lr+=Qe*fi,Nr+=Qe*qi,xr+=Qe*Ki,Cr+=Qe*$i,Or+=Qe*wi,Qe=$t[9],rt+=Qe*ir,ln+=Qe*bi,Cn+=Qe*vn,zn+=Qe*Ln,Sn+=Qe*ar,yr+=Qe*Mr,ur+=Qe*kr,hr+=Qe*gi,fr+=Qe*di,Sr+=Qe*_i,Lr+=Qe*Hi,Nr+=Qe*fi,xr+=Qe*qi,Cr+=Qe*Ki,Or+=Qe*$i,Ur+=Qe*wi,Qe=$t[10],ln+=Qe*ir,Cn+=Qe*bi,zn+=Qe*vn,Sn+=Qe*Ln,yr+=Qe*ar,ur+=Qe*Mr,hr+=Qe*kr,fr+=Qe*gi,Sr+=Qe*di,Lr+=Qe*_i,Nr+=Qe*Hi,xr+=Qe*fi,Cr+=Qe*qi,Or+=Qe*Ki,Ur+=Qe*$i,Pr+=Qe*wi,Qe=$t[11],Cn+=Qe*ir,zn+=Qe*bi,Sn+=Qe*vn,yr+=Qe*Ln,ur+=Qe*ar,hr+=Qe*Mr,fr+=Qe*kr,Sr+=Qe*gi,Lr+=Qe*di,Nr+=Qe*_i,xr+=Qe*Hi,Cr+=Qe*fi,Or+=Qe*qi,Ur+=Qe*Ki,Pr+=Qe*$i,Vr+=Qe*wi,Qe=$t[12],zn+=Qe*ir,Sn+=Qe*bi,yr+=Qe*vn,ur+=Qe*Ln,hr+=Qe*ar,fr+=Qe*Mr,Sr+=Qe*kr,Lr+=Qe*gi,Nr+=Qe*di,xr+=Qe*_i,Cr+=Qe*Hi,Or+=Qe*fi,Ur+=Qe*qi,Pr+=Qe*Ki,Vr+=Qe*$i,xi+=Qe*wi,Qe=$t[13],Sn+=Qe*ir,yr+=Qe*bi,ur+=Qe*vn,hr+=Qe*Ln,fr+=Qe*ar,Sr+=Qe*Mr,Lr+=Qe*kr,Nr+=Qe*gi,xr+=Qe*di,Cr+=Qe*_i,Or+=Qe*Hi,Ur+=Qe*fi,Pr+=Qe*qi,Vr+=Qe*Ki,xi+=Qe*$i,Ai+=Qe*wi,Qe=$t[14],yr+=Qe*ir,ur+=Qe*bi,hr+=Qe*vn,fr+=Qe*Ln,Sr+=Qe*ar,Lr+=Qe*Mr,Nr+=Qe*kr,xr+=Qe*gi,Cr+=Qe*di,Or+=Qe*_i,Ur+=Qe*Hi,Pr+=Qe*fi,Vr+=Qe*qi,xi+=Qe*Ki,Ai+=Qe*$i,Ti+=Qe*wi,Qe=$t[15],ur+=Qe*ir,hr+=Qe*bi,fr+=Qe*vn,Sr+=Qe*Ln,Lr+=Qe*ar,Nr+=Qe*Mr,xr+=Qe*kr,Cr+=Qe*gi,Or+=Qe*di,Ur+=Qe*_i,Pr+=Qe*Hi,Vr+=Qe*fi,xi+=Qe*qi,Ai+=Qe*Ki,Ti+=Qe*$i,Si+=Qe*wi,sr+=38*hr,rr+=38*fr,it+=38*Sr,At+=38*Lr,An+=38*Nr,Ft+=38*xr,Hn+=38*Cr,wn+=38*Or,lr+=38*Ur,rt+=38*Pr,ln+=38*Vr,Cn+=38*xi,zn+=38*Ai,Sn+=38*Ti,yr+=38*Si,gn=1,Qe=sr+gn+65535,gn=Math.floor(Qe/65536),sr=Qe-gn*65536,Qe=rr+gn+65535,gn=Math.floor(Qe/65536),rr=Qe-gn*65536,Qe=it+gn+65535,gn=Math.floor(Qe/65536),it=Qe-gn*65536,Qe=At+gn+65535,gn=Math.floor(Qe/65536),At=Qe-gn*65536,Qe=An+gn+65535,gn=Math.floor(Qe/65536),An=Qe-gn*65536,Qe=Ft+gn+65535,gn=Math.floor(Qe/65536),Ft=Qe-gn*65536,Qe=Hn+gn+65535,gn=Math.floor(Qe/65536),Hn=Qe-gn*65536,Qe=wn+gn+65535,gn=Math.floor(Qe/65536),wn=Qe-gn*65536,Qe=lr+gn+65535,gn=Math.floor(Qe/65536),lr=Qe-gn*65536,Qe=rt+gn+65535,gn=Math.floor(Qe/65536),rt=Qe-gn*65536,Qe=ln+gn+65535,gn=Math.floor(Qe/65536),ln=Qe-gn*65536,Qe=Cn+gn+65535,gn=Math.floor(Qe/65536),Cn=Qe-gn*65536,Qe=zn+gn+65535,gn=Math.floor(Qe/65536),zn=Qe-gn*65536,Qe=Sn+gn+65535,gn=Math.floor(Qe/65536),Sn=Qe-gn*65536,Qe=yr+gn+65535,gn=Math.floor(Qe/65536),yr=Qe-gn*65536,Qe=ur+gn+65535,gn=Math.floor(Qe/65536),ur=Qe-gn*65536,sr+=gn-1+37*(gn-1),gn=1,Qe=sr+gn+65535,gn=Math.floor(Qe/65536),sr=Qe-gn*65536,Qe=rr+gn+65535,gn=Math.floor(Qe/65536),rr=Qe-gn*65536,Qe=it+gn+65535,gn=Math.floor(Qe/65536),it=Qe-gn*65536,Qe=At+gn+65535,gn=Math.floor(Qe/65536),At=Qe-gn*65536,Qe=An+gn+65535,gn=Math.floor(Qe/65536),An=Qe-gn*65536,Qe=Ft+gn+65535,gn=Math.floor(Qe/65536),Ft=Qe-gn*65536,Qe=Hn+gn+65535,gn=Math.floor(Qe/65536),Hn=Qe-gn*65536,Qe=wn+gn+65535,gn=Math.floor(Qe/65536),wn=Qe-gn*65536,Qe=lr+gn+65535,gn=Math.floor(Qe/65536),lr=Qe-gn*65536,Qe=rt+gn+65535,gn=Math.floor(Qe/65536),rt=Qe-gn*65536,Qe=ln+gn+65535,gn=Math.floor(Qe/65536),ln=Qe-gn*65536,Qe=Cn+gn+65535,gn=Math.floor(Qe/65536),Cn=Qe-gn*65536,Qe=zn+gn+65535,gn=Math.floor(Qe/65536),zn=Qe-gn*65536,Qe=Sn+gn+65535,gn=Math.floor(Qe/65536),Sn=Qe-gn*65536,Qe=yr+gn+65535,gn=Math.floor(Qe/65536),yr=Qe-gn*65536,Qe=ur+gn+65535,gn=Math.floor(Qe/65536),ur=Qe-gn*65536,sr+=gn-1+37*(gn-1),tt[0]=sr,tt[1]=rr,tt[2]=it,tt[3]=At,tt[4]=An,tt[5]=Ft,tt[6]=Hn,tt[7]=wn,tt[8]=lr,tt[9]=rt,tt[10]=ln,tt[11]=Cn,tt[12]=zn,tt[13]=Sn,tt[14]=yr,tt[15]=ur}function Mn(tt,$t){Lt(tt,$t,$t)}function cr(tt,$t){var dn=v(),Qe;for(Qe=0;Qe<16;Qe++)dn[Qe]=$t[Qe];for(Qe=253;Qe>=0;Qe--)Mn(dn,dn),Qe!==2&&Qe!==4&&Lt(dn,dn,$t);for(Qe=0;Qe<16;Qe++)tt[Qe]=dn[Qe]}function In(tt,$t){var dn=v(),Qe;for(Qe=0;Qe<16;Qe++)dn[Qe]=$t[Qe];for(Qe=250;Qe>=0;Qe--)Mn(dn,dn),Qe!==1&&Lt(dn,dn,$t);for(Qe=0;Qe<16;Qe++)tt[Qe]=dn[Qe]}function Zn(tt,$t,dn){var Qe=new Uint8Array(32),gn=new Float64Array(80),sr,rr,it=v(),At=v(),An=v(),Ft=v(),Hn=v(),wn=v();for(rr=0;rr<31;rr++)Qe[rr]=$t[rr];for(Qe[31]=$t[31]&127|64,Qe[0]&=248,Qt(gn,dn),rr=0;rr<16;rr++)At[rr]=gn[rr],Ft[rr]=it[rr]=An[rr]=0;for(it[0]=Ft[0]=1,rr=254;rr>=0;--rr)sr=Qe[rr>>>3]>>>(rr&7)&1,Xe(it,At,sr),Xe(An,Ft,sr),Wt(Hn,it,An),Bn(it,it,An),Wt(An,At,Ft),Bn(At,At,Ft),Mn(Ft,Hn),Mn(wn,it),Lt(it,An,it),Lt(An,At,Hn),Wt(Hn,it,An),Bn(it,it,An),Mn(At,it),Bn(An,Ft,wn),Lt(it,An,G),Wt(it,it,Ft),Lt(An,An,it),Lt(it,Ft,wn),Lt(Ft,At,gn),Mn(At,Hn),Xe(it,At,sr),Xe(An,Ft,sr);for(rr=0;rr<16;rr++)gn[rr+16]=it[rr],gn[rr+32]=An[rr],gn[rr+48]=At[rr],gn[rr+64]=Ft[rr];var lr=gn.subarray(32),rt=gn.subarray(16);return cr(lr,lr),Lt(rt,rt,lr),$e(tt,rt),0}function $n(tt,$t){return Zn(tt,$t,w)}function Rn(tt,$t){return A($t,32),$n(tt,$t)}function Dn(tt,$t,dn){var Qe=new Uint8Array(32);return Zn(Qe,dn,$t),ye(tt,C,Qe,be)}var Gt=Ge,Jn=ze;function Nn(tt,$t,dn,Qe,gn,sr){var rr=new Uint8Array(32);return Dn(rr,gn,sr),Gt(tt,$t,dn,Qe,rr)}function Xn(tt,$t,dn,Qe,gn,sr){var rr=new Uint8Array(32);return Dn(rr,gn,sr),Jn(tt,$t,dn,Qe,rr)}var jn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Un(tt,$t,dn,Qe){for(var gn=new Int32Array(16),sr=new Int32Array(16),rr,it,At,An,Ft,Hn,wn,lr,rt,ln,Cn,zn,Sn,yr,ur,hr,fr,Sr,Lr,Nr,xr,Cr,Or,Ur,Pr,Vr,xi=tt[0],Ai=tt[1],Ti=tt[2],Si=tt[3],ir=tt[4],bi=tt[5],vn=tt[6],Ln=tt[7],ar=$t[0],Mr=$t[1],kr=$t[2],gi=$t[3],di=$t[4],_i=$t[5],Hi=$t[6],fi=$t[7],qi=0;Qe>=128;){for(Lr=0;Lr<16;Lr++)Nr=8*Lr+qi,gn[Lr]=dn[Nr+0]<<24|dn[Nr+1]<<16|dn[Nr+2]<<8|dn[Nr+3],sr[Lr]=dn[Nr+4]<<24|dn[Nr+5]<<16|dn[Nr+6]<<8|dn[Nr+7];for(Lr=0;Lr<80;Lr++)if(rr=xi,it=Ai,At=Ti,An=Si,Ft=ir,Hn=bi,wn=vn,lr=Ln,rt=ar,ln=Mr,Cn=kr,zn=gi,Sn=di,yr=_i,ur=Hi,hr=fi,xr=Ln,Cr=fi,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=(ir>>>14|di<<18)^(ir>>>18|di<<14)^(di>>>9|ir<<23),Cr=(di>>>14|ir<<18)^(di>>>18|ir<<14)^(ir>>>9|di<<23),Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,xr=ir&bi^~ir&vn,Cr=di&_i^~di&Hi,Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,xr=jn[Lr*2],Cr=jn[Lr*2+1],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,xr=gn[Lr%16],Cr=sr[Lr%16],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,fr=Pr&65535|Vr<<16,Sr=Or&65535|Ur<<16,xr=fr,Cr=Sr,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=(xi>>>28|ar<<4)^(ar>>>2|xi<<30)^(ar>>>7|xi<<25),Cr=(ar>>>28|xi<<4)^(xi>>>2|ar<<30)^(xi>>>7|ar<<25),Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,xr=xi&Ai^xi&Ti^Ai&Ti,Cr=ar&Mr^ar&kr^Mr&kr,Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,lr=Pr&65535|Vr<<16,hr=Or&65535|Ur<<16,xr=An,Cr=zn,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=fr,Cr=Sr,Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,An=Pr&65535|Vr<<16,zn=Or&65535|Ur<<16,Ai=rr,Ti=it,Si=At,ir=An,bi=Ft,vn=Hn,Ln=wn,xi=lr,Mr=rt,kr=ln,gi=Cn,di=zn,_i=Sn,Hi=yr,fi=ur,ar=hr,Lr%16===15)for(Nr=0;Nr<16;Nr++)xr=gn[Nr],Cr=sr[Nr],Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=gn[(Nr+9)%16],Cr=sr[(Nr+9)%16],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,fr=gn[(Nr+1)%16],Sr=sr[(Nr+1)%16],xr=(fr>>>1|Sr<<31)^(fr>>>8|Sr<<24)^fr>>>7,Cr=(Sr>>>1|fr<<31)^(Sr>>>8|fr<<24)^(Sr>>>7|fr<<25),Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,fr=gn[(Nr+14)%16],Sr=sr[(Nr+14)%16],xr=(fr>>>19|Sr<<13)^(Sr>>>29|fr<<3)^fr>>>6,Cr=(Sr>>>19|fr<<13)^(fr>>>29|Sr<<3)^(Sr>>>6|fr<<26),Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,gn[Nr]=Pr&65535|Vr<<16,sr[Nr]=Or&65535|Ur<<16;xr=xi,Cr=ar,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[0],Cr=$t[0],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[0]=xi=Pr&65535|Vr<<16,$t[0]=ar=Or&65535|Ur<<16,xr=Ai,Cr=Mr,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[1],Cr=$t[1],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[1]=Ai=Pr&65535|Vr<<16,$t[1]=Mr=Or&65535|Ur<<16,xr=Ti,Cr=kr,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[2],Cr=$t[2],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[2]=Ti=Pr&65535|Vr<<16,$t[2]=kr=Or&65535|Ur<<16,xr=Si,Cr=gi,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[3],Cr=$t[3],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[3]=Si=Pr&65535|Vr<<16,$t[3]=gi=Or&65535|Ur<<16,xr=ir,Cr=di,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[4],Cr=$t[4],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[4]=ir=Pr&65535|Vr<<16,$t[4]=di=Or&65535|Ur<<16,xr=bi,Cr=_i,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[5],Cr=$t[5],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[5]=bi=Pr&65535|Vr<<16,$t[5]=_i=Or&65535|Ur<<16,xr=vn,Cr=Hi,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[6],Cr=$t[6],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[6]=vn=Pr&65535|Vr<<16,$t[6]=Hi=Or&65535|Ur<<16,xr=Ln,Cr=fi,Or=Cr&65535,Ur=Cr>>>16,Pr=xr&65535,Vr=xr>>>16,xr=tt[7],Cr=$t[7],Or+=Cr&65535,Ur+=Cr>>>16,Pr+=xr&65535,Vr+=xr>>>16,Ur+=Or>>>16,Pr+=Ur>>>16,Vr+=Pr>>>16,tt[7]=Ln=Pr&65535|Vr<<16,$t[7]=fi=Or&65535|Ur<<16,qi+=128,Qe-=128}return Qe}function bn(tt,$t,dn){var Qe=new Int32Array(8),gn=new Int32Array(8),sr=new Uint8Array(256),rr,it=dn;for(Qe[0]=1779033703,Qe[1]=3144134277,Qe[2]=1013904242,Qe[3]=2773480762,Qe[4]=1359893119,Qe[5]=2600822924,Qe[6]=528734635,Qe[7]=1541459225,gn[0]=4089235720,gn[1]=2227873595,gn[2]=4271175723,gn[3]=1595750129,gn[4]=2917565137,gn[5]=725511199,gn[6]=4215389547,gn[7]=327033209,Un(Qe,gn,$t,dn),dn%=128,rr=0;rr<dn;rr++)sr[rr]=$t[it-dn+rr];for(sr[dn]=128,dn=256-128*(dn<112?1:0),sr[dn-9]=0,ie(sr,dn-8,it/536870912|0,it<<3),Un(Qe,gn,sr,dn),rr=0;rr<8;rr++)ie(tt,8*rr,Qe[rr],gn[rr]);return 0}function Kn(tt,$t){var dn=v(),Qe=v(),gn=v(),sr=v(),rr=v(),it=v(),At=v(),An=v(),Ft=v();Bn(dn,tt[1],tt[0]),Bn(Ft,$t[1],$t[0]),Lt(dn,dn,Ft),Wt(Qe,tt[0],tt[1]),Wt(Ft,$t[0],$t[1]),Lt(Qe,Qe,Ft),Lt(gn,tt[3],$t[3]),Lt(gn,gn,z),Lt(sr,tt[2],$t[2]),Wt(sr,sr,sr),Bn(rr,Qe,dn),Bn(it,sr,gn),Wt(At,sr,gn),Wt(An,Qe,dn),Lt(tt[0],rr,it),Lt(tt[1],An,At),Lt(tt[2],At,it),Lt(tt[3],rr,An)}function Qn(tt,$t,dn){var Qe;for(Qe=0;Qe<4;Qe++)Xe(tt[Qe],$t[Qe],dn)}function pr(tt,$t){var dn=v(),Qe=v(),gn=v();cr(gn,$t[2]),Lt(dn,$t[0],gn),Lt(Qe,$t[1],gn),$e(tt,Qe),tt[31]^=nt(dn)<<7}function fn(tt,$t,dn){var Qe,gn;for(je(tt[0],T),je(tt[1],R),je(tt[2],R),je(tt[3],T),gn=255;gn>=0;--gn)Qe=dn[gn/8|0]>>(gn&7)&1,Qn(tt,$t,Qe),Kn($t,tt),Kn(tt,tt),Qn(tt,$t,Qe)}function Mt(tt,$t){var dn=[v(),v(),v(),v()];je(dn[0],H),je(dn[1],Y),je(dn[2],R),Lt(dn[3],H,Y),fn(tt,dn,$t)}function yn(tt,$t,dn){var Qe=new Uint8Array(64),gn=[v(),v(),v(),v()],sr;for(dn||A($t,32),bn(Qe,$t,32),Qe[0]&=248,Qe[31]&=127,Qe[31]|=64,Mt(gn,Qe),pr(tt,gn),sr=0;sr<32;sr++)$t[sr+32]=tt[sr];return 0}var kn=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function nr(tt,$t){var dn,Qe,gn,sr;for(Qe=63;Qe>=32;--Qe){for(dn=0,gn=Qe-32,sr=Qe-12;gn<sr;++gn)$t[gn]+=dn-16*$t[Qe]*kn[gn-(Qe-32)],dn=Math.floor(($t[gn]+128)/256),$t[gn]-=dn*256;$t[gn]+=dn,$t[Qe]=0}for(dn=0,gn=0;gn<32;gn++)$t[gn]+=dn-($t[31]>>4)*kn[gn],dn=$t[gn]>>8,$t[gn]&=255;for(gn=0;gn<32;gn++)$t[gn]-=dn*kn[gn];for(Qe=0;Qe<32;Qe++)$t[Qe+1]+=$t[Qe]>>8,tt[Qe]=$t[Qe]&255}function dr(tt){var $t=new Float64Array(64),dn;for(dn=0;dn<64;dn++)$t[dn]=tt[dn];for(dn=0;dn<64;dn++)tt[dn]=0;nr(tt,$t)}function Qr(tt,$t,dn,Qe){var gn=new Uint8Array(64),sr=new Uint8Array(64),rr=new Uint8Array(64),it,At,An=new Float64Array(64),Ft=[v(),v(),v(),v()];bn(gn,Qe,32),gn[0]&=248,gn[31]&=127,gn[31]|=64;var Hn=dn+64;for(it=0;it<dn;it++)tt[64+it]=$t[it];for(it=0;it<32;it++)tt[32+it]=gn[32+it];for(bn(rr,tt.subarray(32),dn+32),dr(rr),Mt(Ft,rr),pr(tt,Ft),it=32;it<64;it++)tt[it]=Qe[it];for(bn(sr,tt,dn+64),dr(sr),it=0;it<64;it++)An[it]=0;for(it=0;it<32;it++)An[it]=rr[it];for(it=0;it<32;it++)for(At=0;At<32;At++)An[it+At]+=sr[it]*gn[At];return nr(tt.subarray(32),An),Hn}function Wr(tt,$t){var dn=v(),Qe=v(),gn=v(),sr=v(),rr=v(),it=v(),At=v();return je(tt[2],R),Qt(tt[1],$t),Mn(gn,tt[1]),Lt(sr,gn,I),Bn(gn,gn,tt[2]),Wt(sr,tt[2],sr),Mn(rr,sr),Mn(it,rr),Lt(At,it,rr),Lt(dn,At,gn),Lt(dn,dn,sr),In(dn,dn),Lt(dn,dn,gn),Lt(dn,dn,sr),Lt(dn,dn,sr),Lt(tt[0],dn,sr),Mn(Qe,tt[0]),Lt(Qe,Qe,sr),We(Qe,gn)&&Lt(tt[0],tt[0],ee),Mn(Qe,tt[0]),Lt(Qe,Qe,sr),We(Qe,gn)?-1:(nt(tt[0])===$t[31]>>7&&Bn(tt[0],T,tt[0]),Lt(tt[3],tt[0],tt[1]),0)}function Gr(tt,$t,dn,Qe){var gn,sr=new Uint8Array(32),rr=new Uint8Array(64),it=[v(),v(),v(),v()],At=[v(),v(),v(),v()];if(dn<64||Wr(At,Qe))return-1;for(gn=0;gn<dn;gn++)tt[gn]=$t[gn];for(gn=0;gn<32;gn++)tt[gn+32]=Qe[gn];if(bn(rr,tt,dn),dr(rr),fn(it,At,rr),Mt(At,$t.subarray(32)),Kn(it,At),pr(sr,it),dn-=64,re($t,0,sr,0)){for(gn=0;gn<dn;gn++)tt[gn]=0;return-1}for(gn=0;gn<dn;gn++)tt[gn]=$t[gn+64];return dn}var Hr=32,Kr=24,ti=32,Mi=16,Ci=32,oi=32,Ii=32,wr=32,Br=32,ui=Kr,vi=ti,qr=Mi,br=64,er=32,Gn=64,Er=32,mn=64;d.lowlevel={crypto_core_hsalsa20:ye,crypto_stream_xor:Be,crypto_stream:we,crypto_stream_salsa20_xor:ve,crypto_stream_salsa20:Me,crypto_onetimeauth:Fe,crypto_onetimeauth_verify:Oe,crypto_verify_16:se,crypto_verify_32:re,crypto_secretbox:Ge,crypto_secretbox_open:ze,crypto_scalarmult:Zn,crypto_scalarmult_base:$n,crypto_box_beforenm:Dn,crypto_box_afternm:Gt,crypto_box:Nn,crypto_box_open:Xn,crypto_box_keypair:Rn,crypto_hash:bn,crypto_sign:Qr,crypto_sign_keypair:yn,crypto_sign_open:Gr,crypto_secretbox_KEYBYTES:Hr,crypto_secretbox_NONCEBYTES:Kr,crypto_secretbox_ZEROBYTES:ti,crypto_secretbox_BOXZEROBYTES:Mi,crypto_scalarmult_BYTES:Ci,crypto_scalarmult_SCALARBYTES:oi,crypto_box_PUBLICKEYBYTES:Ii,crypto_box_SECRETKEYBYTES:wr,crypto_box_BEFORENMBYTES:Br,crypto_box_NONCEBYTES:ui,crypto_box_ZEROBYTES:vi,crypto_box_BOXZEROBYTES:qr,crypto_sign_BYTES:br,crypto_sign_PUBLICKEYBYTES:er,crypto_sign_SECRETKEYBYTES:Gn,crypto_sign_SEEDBYTES:Er,crypto_hash_BYTES:mn,gf:v,D:I,L:kn,pack25519:$e,unpack25519:Qt,M:Lt,A:Wt,S:Mn,Z:Bn,pow2523:In,add:Kn,set25519:je,modL:nr,scalarmult:fn,scalarbase:Mt};function tr(tt,$t){if(tt.length!==Hr)throw new Error("bad key size");if($t.length!==Kr)throw new Error("bad nonce size")}function vr(tt,$t){if(tt.length!==Ii)throw new Error("bad public key size");if($t.length!==wr)throw new Error("bad secret key size")}function Ar(){for(var tt=0;tt<arguments.length;tt++)if(!(arguments[tt]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Tn(tt){for(var $t=0;$t<tt.length;$t++)tt[$t]=0}d.randomBytes=function(tt){var $t=new Uint8Array(tt);return A($t,tt),$t},d.secretbox=function(tt,$t,dn){Ar(tt,$t,dn),tr(dn,$t);for(var Qe=new Uint8Array(ti+tt.length),gn=new Uint8Array(Qe.length),sr=0;sr<tt.length;sr++)Qe[sr+ti]=tt[sr];return Ge(gn,Qe,Qe.length,$t,dn),gn.subarray(Mi)},d.secretbox.open=function(tt,$t,dn){Ar(tt,$t,dn),tr(dn,$t);for(var Qe=new Uint8Array(Mi+tt.length),gn=new Uint8Array(Qe.length),sr=0;sr<tt.length;sr++)Qe[sr+Mi]=tt[sr];return Qe.length<32||ze(gn,Qe,Qe.length,$t,dn)!==0?null:gn.subarray(ti)},d.secretbox.keyLength=Hr,d.secretbox.nonceLength=Kr,d.secretbox.overheadLength=Mi,d.scalarMult=function(tt,$t){if(Ar(tt,$t),tt.length!==oi)throw new Error("bad n size");if($t.length!==Ci)throw new Error("bad p size");var dn=new Uint8Array(Ci);return Zn(dn,tt,$t),dn},d.scalarMult.base=function(tt){if(Ar(tt),tt.length!==oi)throw new Error("bad n size");var $t=new Uint8Array(Ci);return $n($t,tt),$t},d.scalarMult.scalarLength=oi,d.scalarMult.groupElementLength=Ci,d.box=function(tt,$t,dn,Qe){var gn=d.box.before(dn,Qe);return d.secretbox(tt,$t,gn)},d.box.before=function(tt,$t){Ar(tt,$t),vr(tt,$t);var dn=new Uint8Array(Br);return Dn(dn,tt,$t),dn},d.box.after=d.secretbox,d.box.open=function(tt,$t,dn,Qe){var gn=d.box.before(dn,Qe);return d.secretbox.open(tt,$t,gn)},d.box.open.after=d.secretbox.open,d.box.keyPair=function(){var tt=new Uint8Array(Ii),$t=new Uint8Array(wr);return Rn(tt,$t),{publicKey:tt,secretKey:$t}},d.box.keyPair.fromSecretKey=function(tt){if(Ar(tt),tt.length!==wr)throw new Error("bad secret key size");var $t=new Uint8Array(Ii);return $n($t,tt),{publicKey:$t,secretKey:new Uint8Array(tt)}},d.box.publicKeyLength=Ii,d.box.secretKeyLength=wr,d.box.sharedKeyLength=Br,d.box.nonceLength=ui,d.box.overheadLength=d.secretbox.overheadLength,d.sign=function(tt,$t){if(Ar(tt,$t),$t.length!==Gn)throw new Error("bad secret key size");var dn=new Uint8Array(br+tt.length);return Qr(dn,tt,tt.length,$t),dn},d.sign.open=function(tt,$t){if(Ar(tt,$t),$t.length!==er)throw new Error("bad public key size");var dn=new Uint8Array(tt.length),Qe=Gr(dn,tt,tt.length,$t);if(Qe<0)return null;for(var gn=new Uint8Array(Qe),sr=0;sr<gn.length;sr++)gn[sr]=dn[sr];return gn},d.sign.detached=function(tt,$t){for(var dn=d.sign(tt,$t),Qe=new Uint8Array(br),gn=0;gn<Qe.length;gn++)Qe[gn]=dn[gn];return Qe},d.sign.detached.verify=function(tt,$t,dn){if(Ar(tt,$t,dn),$t.length!==br)throw new Error("bad signature size");if(dn.length!==er)throw new Error("bad public key size");var Qe=new Uint8Array(br+tt.length),gn=new Uint8Array(br+tt.length),sr;for(sr=0;sr<br;sr++)Qe[sr]=$t[sr];for(sr=0;sr<tt.length;sr++)Qe[sr+br]=tt[sr];return Gr(gn,Qe,Qe.length,dn)>=0},d.sign.keyPair=function(){var tt=new Uint8Array(er),$t=new Uint8Array(Gn);return yn(tt,$t),{publicKey:tt,secretKey:$t}},d.sign.keyPair.fromSecretKey=function(tt){if(Ar(tt),tt.length!==Gn)throw new Error("bad secret key size");for(var $t=new Uint8Array(er),dn=0;dn<$t.length;dn++)$t[dn]=tt[32+dn];return{publicKey:$t,secretKey:new Uint8Array(tt)}},d.sign.keyPair.fromSeed=function(tt){if(Ar(tt),tt.length!==Er)throw new Error("bad seed size");for(var $t=new Uint8Array(er),dn=new Uint8Array(Gn),Qe=0;Qe<32;Qe++)dn[Qe]=tt[Qe];return yn($t,dn,!0),{publicKey:$t,secretKey:dn}},d.sign.publicKeyLength=er,d.sign.secretKeyLength=Gn,d.sign.seedLength=Er,d.sign.signatureLength=br,d.hash=function(tt){Ar(tt);var $t=new Uint8Array(mn);return bn($t,tt,tt.length),$t},d.hash.hashLength=mn,d.verify=function(tt,$t){return Ar(tt,$t),tt.length===0||$t.length===0||tt.length!==$t.length?!1:oe(tt,0,$t,0,tt.length)===0},d.setPRNG=function(tt){A=tt},function(){var tt=typeof self<"u"?self.crypto||self.msCrypto:null;if(tt&&tt.getRandomValues){var $t=65536;d.setPRNG(function(dn,Qe){var gn,sr=new Uint8Array(Qe);for(gn=0;gn<Qe;gn+=$t)tt.getRandomValues(sr.subarray(gn,gn+Math.min(Qe-gn,$t)));for(gn=0;gn<Qe;gn++)dn[gn]=sr[gn];Tn(sr)})}else typeof commonjsRequire<"u"&&(tt=require$$2,tt&&tt.randomBytes&&d.setPRNG(function(dn,Qe){var gn,sr=tt.randomBytes(Qe);for(gn=0;gn<Qe;gn++)dn[gn]=sr[gn];Tn(sr)}))}()})(_.exports?_.exports:self.nacl=self.nacl||{})}(naclFast)),naclFast.exports}var naclFastExports=requireNaclFast();const nacl$1=getDefaultExportFromCjs(naclFastExports);var CONNECT_EVENT_ERROR_CODES;(function(_){_[_.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",_[_.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",_[_.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",_[_.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",_[_.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",_[_.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",_[_.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(CONNECT_EVENT_ERROR_CODES||(CONNECT_EVENT_ERROR_CODES={}));var CONNECT_ITEM_ERROR_CODES;(function(_){_[_.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",_[_.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(CONNECT_ITEM_ERROR_CODES||(CONNECT_ITEM_ERROR_CODES={}));var SEND_TRANSACTION_ERROR_CODES;(function(_){_[_.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",_[_.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",_[_.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",_[_.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",_[_.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(SEND_TRANSACTION_ERROR_CODES||(SEND_TRANSACTION_ERROR_CODES={}));var SIGN_DATA_ERROR_CODES;(function(_){_[_.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",_[_.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",_[_.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",_[_.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",_[_.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(SIGN_DATA_ERROR_CODES||(SIGN_DATA_ERROR_CODES={}));var DISCONNECT_ERROR_CODES;(function(_){_[_.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",_[_.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",_[_.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",_[_.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED"})(DISCONNECT_ERROR_CODES||(DISCONNECT_ERROR_CODES={}));var CHAIN;(function(_){_.MAINNET="-239",_.TESTNET="-3"})(CHAIN||(CHAIN={}));function encodeUint8Array(_,d){const v=nacl.encodeBase64(_);return d?encodeURIComponent(v):v}function decodeToUint8Array(_,d){return d&&(_=decodeURIComponent(_)),nacl.decodeBase64(_)}function encode$1(_,d=!1){let v;return _ instanceof Uint8Array?v=_:(typeof _!="string"&&(_=JSON.stringify(_)),v=nacl.decodeUTF8(_)),encodeUint8Array(v,d)}function decode$1(_,d=!1){const v=decodeToUint8Array(_,d);return{toString(){return nacl.encodeUTF8(v)},toObject(){try{return JSON.parse(nacl.encodeUTF8(v))}catch{return null}},toUint8Array(){return v}}}const Base64={encode:encode$1,decode:decode$1};function concatUint8Arrays(_,d){const v=new Uint8Array(_.length+d.length);return v.set(_),v.set(d,_.length),v}function splitToUint8Arrays(_,d){if(d>=_.length)throw new Error("Index is out of buffer");const v=_.slice(0,d),A=_.slice(d);return[v,A]}function toHexString(_){let d="";return _.forEach(v=>{d+=("0"+(v&255).toString(16)).slice(-2)}),d}function hexToByteArray(_){if(_.length%2!==0)throw new Error(`Cannot convert ${_} to bytesArray`);const d=new Uint8Array(_.length/2);for(let v=0;v<_.length;v+=2)d[v/2]=parseInt(_.slice(v,v+2),16);return d}class SessionCrypto{constructor(d){this.nonceLength=24,this.keyPair=d?this.createKeypairFromString(d):this.createKeypair(),this.sessionId=toHexString(this.keyPair.publicKey)}createKeypair(){return nacl$1.box.keyPair()}createKeypairFromString(d){return{publicKey:hexToByteArray(d.publicKey),secretKey:hexToByteArray(d.secretKey)}}createNonce(){return nacl$1.randomBytes(this.nonceLength)}encrypt(d,v){const A=new TextEncoder().encode(d),C=this.createNonce(),w=nacl$1.box(A,C,v,this.keyPair.secretKey);return concatUint8Arrays(C,w)}decrypt(d,v){const[A,C]=splitToUint8Arrays(d,this.nonceLength),w=nacl$1.box.open(C,A,v,this.keyPair.secretKey);if(!w)throw new Error(`Decryption error: 
 message: ${d.toString()} 
 sender pubkey: ${v.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(w)}stringifyKeypair(){return{publicKey:toHexString(this.keyPair.publicKey),secretKey:toHexString(this.keyPair.secretKey)}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __rest$1(_,d){var v={};for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&d.indexOf(A)<0&&(v[A]=_[A]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,A=Object.getOwnPropertySymbols(_);C<A.length;C++)d.indexOf(A[C])<0&&Object.prototype.propertyIsEnumerable.call(_,A[C])&&(v[A[C]]=_[A[C]]);return v}function __awaiter(_,d,v,A){function C(w){return w instanceof v?w:new v(function(T){T(w)})}return new(v||(v=Promise))(function(w,T){function R(z){try{I(A.next(z))}catch(H){T(H)}}function G(z){try{I(A.throw(z))}catch(H){T(H)}}function I(z){z.done?w(z.value):C(z.value).then(R,G)}I((A=A.apply(_,[])).next())})}class TonConnectError extends Error{constructor(d,v){super(d,v),this.message=`${TonConnectError.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${d?`
`+d:""}`,Object.setPrototypeOf(this,TonConnectError.prototype)}get info(){return""}}TonConnectError.prefix="[TON_CONNECT_SDK_ERROR]";class DappMetadataError extends TonConnectError{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...d){super(...d),Object.setPrototypeOf(this,DappMetadataError.prototype)}}class ManifestContentErrorError extends TonConnectError{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...d){super(...d),Object.setPrototypeOf(this,ManifestContentErrorError.prototype)}}class ManifestNotFoundError extends TonConnectError{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...d){super(...d),Object.setPrototypeOf(this,ManifestNotFoundError.prototype)}}class WalletAlreadyConnectedError extends TonConnectError{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...d){super(...d),Object.setPrototypeOf(this,WalletAlreadyConnectedError.prototype)}}class WalletNotConnectedError extends TonConnectError{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...d){super(...d),Object.setPrototypeOf(this,WalletNotConnectedError.prototype)}}class WalletNotInjectedError extends TonConnectError{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...d){super(...d),Object.setPrototypeOf(this,WalletNotInjectedError.prototype)}}class WalletNotSupportFeatureError extends TonConnectError{get info(){return"Wallet doesn't support requested feature method."}constructor(d,v){super(d,v),Object.setPrototypeOf(this,WalletNotSupportFeatureError.prototype)}}class WalletMissingRequiredFeaturesError extends TonConnectError{get info(){return"Missing required features. You need to update your wallet."}constructor(d,v){super(d,v),Object.setPrototypeOf(this,WalletMissingRequiredFeaturesError.prototype)}}function isWalletConnectionSourceJS(_){return"jsBridgeKey"in _}class UserRejectsError extends TonConnectError{get info(){return"User rejects the action in the wallet."}constructor(...d){super(...d),Object.setPrototypeOf(this,UserRejectsError.prototype)}}class BadRequestError extends TonConnectError{get info(){return"Request to the wallet contains errors."}constructor(...d){super(...d),Object.setPrototypeOf(this,BadRequestError.prototype)}}class UnknownAppError extends TonConnectError{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...d){super(...d),Object.setPrototypeOf(this,UnknownAppError.prototype)}}class FetchWalletsError extends TonConnectError{get info(){return"An error occurred while fetching the wallets list."}constructor(...d){super(...d),Object.setPrototypeOf(this,FetchWalletsError.prototype)}}class WrongAddressError extends TonConnectError{get info(){return"Passed address is in incorrect format."}constructor(...d){super(...d),Object.setPrototypeOf(this,WrongAddressError.prototype)}}class ParseHexError extends TonConnectError{get info(){return"Passed hex is in incorrect format."}constructor(...d){super(...d),Object.setPrototypeOf(this,ParseHexError.prototype)}}class UnknownError extends TonConnectError{constructor(...d){super(...d),Object.setPrototypeOf(this,UnknownError.prototype)}}const connectEventErrorsCodes={[CONNECT_EVENT_ERROR_CODES.UNKNOWN_ERROR]:UnknownError,[CONNECT_EVENT_ERROR_CODES.USER_REJECTS_ERROR]:UserRejectsError,[CONNECT_EVENT_ERROR_CODES.BAD_REQUEST_ERROR]:BadRequestError,[CONNECT_EVENT_ERROR_CODES.UNKNOWN_APP_ERROR]:UnknownAppError,[CONNECT_EVENT_ERROR_CODES.MANIFEST_NOT_FOUND_ERROR]:ManifestNotFoundError,[CONNECT_EVENT_ERROR_CODES.MANIFEST_CONTENT_ERROR]:ManifestContentErrorError};class ConnectErrorsParser{parseError(d){let v=UnknownError;return d.code in connectEventErrorsCodes&&(v=connectEventErrorsCodes[d.code]||UnknownError),new v(d.message)}}const connectErrorsParser=new ConnectErrorsParser;class RpcParser{isError(d){return"error"in d}}const sendTransactionErrors={[SEND_TRANSACTION_ERROR_CODES.UNKNOWN_ERROR]:UnknownError,[SEND_TRANSACTION_ERROR_CODES.USER_REJECTS_ERROR]:UserRejectsError,[SEND_TRANSACTION_ERROR_CODES.BAD_REQUEST_ERROR]:BadRequestError,[SEND_TRANSACTION_ERROR_CODES.UNKNOWN_APP_ERROR]:UnknownAppError};class SendTransactionParser extends RpcParser{convertToRpcRequest(d){return{method:"sendTransaction",params:[JSON.stringify(d)]}}parseAndThrowError(d){let v=UnknownError;throw d.error.code in sendTransactionErrors&&(v=sendTransactionErrors[d.error.code]||UnknownError),new v(d.error.message)}convertFromRpcResponse(d){return{boc:d.result}}}const sendTransactionParser=new SendTransactionParser,signDataErrors={[SIGN_DATA_ERROR_CODES.UNKNOWN_ERROR]:UnknownError,[SIGN_DATA_ERROR_CODES.USER_REJECTS_ERROR]:UserRejectsError,[SIGN_DATA_ERROR_CODES.BAD_REQUEST_ERROR]:BadRequestError,[SIGN_DATA_ERROR_CODES.UNKNOWN_APP_ERROR]:UnknownAppError};class SignDataParser extends RpcParser{convertToRpcRequest(d){return{method:"signData",params:[JSON.stringify(d)]}}parseAndThrowError(d){let v=UnknownError;throw d.error.code in signDataErrors&&(v=signDataErrors[d.error.code]||UnknownError),new v(d.error.message)}convertFromRpcResponse(d){return d.result}}const signDataParser=new SignDataParser;class HttpBridgeGatewayStorage{constructor(d,v){this.storage=d,this.storeKey="ton-connect-storage_http-bridge-gateway::"+v}storeLastEventId(d){return __awaiter(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,d)})}removeLastEventId(){return __awaiter(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.storage.getItem(this.storeKey);return d||null})}}function removeUrlLastSlash(_){return _.slice(-1)==="/"?_.slice(0,-1):_}function addPathToUrl(_,d){return removeUrlLastSlash(_)+"/"+d}function isTelegramUrl(_){if(!_)return!1;const d=new URL(_);return d.protocol==="tg:"||d.hostname==="t.me"}function encodeTelegramUrlParameters(_){return _.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function delay(_,d){return __awaiter(this,void 0,void 0,function*(){return new Promise((v,A)=>{var C,w;if(!((C=void 0)===null||C===void 0)&&C.aborted){A(new TonConnectError("Delay aborted"));return}const T=setTimeout(()=>v(),_);(w=void 0)===null||w===void 0||w.addEventListener("abort",()=>{clearTimeout(T),A(new TonConnectError("Delay aborted"))})})})}function createAbortController(_){const d=new AbortController;return _?.aborted?d.abort():_?.addEventListener("abort",()=>d.abort(),{once:!0}),d}function callForSuccess(_,d){var v,A;return __awaiter(this,void 0,void 0,function*(){const C=(v=d?.attempts)!==null&&v!==void 0?v:10,w=(A=d?.delayMs)!==null&&A!==void 0?A:200,T=createAbortController(d?.signal);if(typeof _!="function")throw new TonConnectError(`Expected a function, got ${typeof _}`);let R=0,G;for(;R<C;){if(T.signal.aborted)throw new TonConnectError(`Aborted after attempts ${R}`);try{return yield _({signal:T.signal})}catch(I){G=I,R++,R<C&&(yield delay(w))}}throw G})}function logDebug$1(..._){try{console.debug("[TON_CONNECT_SDK]",..._)}catch{}}function logError$1(..._){try{console.error("[TON_CONNECT_SDK]",..._)}catch{}}function logWarning$1(..._){try{console.warn("[TON_CONNECT_SDK]",..._)}catch{}}function createResource$1(_,d){let v=null,A=null,C=null,w=null,T=null;const R=(H,...Y)=>__awaiter(this,void 0,void 0,function*(){if(w=H??null,T?.abort(),T=createAbortController(H),T.signal.aborted)throw new TonConnectError("Resource creation was aborted");A=Y??null;const ee=_(T.signal,...Y);C=ee;const ie=yield ee;if(C!==ee&&ie!==v)throw yield d(ie),new TonConnectError("Resource creation was aborted by a new resource creation");return v=ie,v});return{create:R,current:()=>v??null,dispose:()=>__awaiter(this,void 0,void 0,function*(){try{const H=v;v=null;const Y=C;C=null;try{T?.abort()}catch{}yield Promise.allSettled([H?d(H):Promise.resolve(),Y?d(yield Y):Promise.resolve()])}catch{}}),recreate:H=>__awaiter(this,void 0,void 0,function*(){const Y=v,ee=C,ie=A,oe=w;if(yield delay(H),Y===v&&ee===C&&ie===A&&oe===w)return yield R(w,...ie??[]);throw new TonConnectError("Resource recreation was aborted by a new resource creation")})}}function timeout(_,d){const v=d?.timeout,A=d?.signal,C=createAbortController(A);return new Promise((w,T)=>__awaiter(this,void 0,void 0,function*(){if(C.signal.aborted){T(new TonConnectError("Operation aborted"));return}let R;typeof v<"u"&&(R=setTimeout(()=>{C.abort(),T(new TonConnectError(`Timeout after ${v}ms`))},v)),C.signal.addEventListener("abort",()=>{clearTimeout(R),T(new TonConnectError("Operation aborted"))},{once:!0});const G={timeout:v,abort:C.signal};yield _((...I)=>{clearTimeout(R),w(...I)},()=>{clearTimeout(R),T()},G)}))}class BridgeGateway{constructor(d,v,A,C,w){this.bridgeUrl=v,this.sessionId=A,this.listener=C,this.errorsListener=w,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=createResource$1((T,R)=>__awaiter(this,void 0,void 0,function*(){const G={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:T,openingDeadlineMS:R};return yield createEventSource(G)}),T=>__awaiter(this,void 0,void 0,function*(){T.close()})),this.bridgeGatewayStorage=new HttpBridgeGatewayStorage(d,v)}get isReady(){const d=this.eventSource.current();return d?.readyState===EventSource.OPEN}get isClosed(){const d=this.eventSource.current();return d?.readyState!==EventSource.OPEN}get isConnecting(){const d=this.eventSource.current();return d?.readyState===EventSource.CONNECTING}registerSession(d){return __awaiter(this,void 0,void 0,function*(){yield this.eventSource.create(d?.signal,d?.openingDeadlineMS)})}send(d,v,A,C){var w;return __awaiter(this,void 0,void 0,function*(){const T={};typeof C=="number"?T.ttl=C:(T.ttl=C?.ttl,T.signal=C?.signal,T.attempts=C?.attempts);const R=new URL(addPathToUrl(this.bridgeUrl,this.postPath));R.searchParams.append("client_id",this.sessionId),R.searchParams.append("to",v),R.searchParams.append("ttl",(T?.ttl||this.defaultTtl).toString()),R.searchParams.append("topic",A);const G=Base64.encode(d);yield callForSuccess(I=>__awaiter(this,void 0,void 0,function*(){const z=yield this.post(R,G,I.signal);if(!z.ok)throw new TonConnectError(`Bridge send failed, status ${z.status}`)}),{attempts:(w=T?.attempts)!==null&&w!==void 0?w:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:T?.signal})})}pause(){this.eventSource.dispose().catch(d=>logError$1(`Bridge pause failed, ${d}`))}unPause(){return __awaiter(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return __awaiter(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(d=>logError$1(`Bridge close failed, ${d}`))})}setListener(d){this.listener=d}setErrorsListener(d){this.errorsListener=d}post(d,v,A){return __awaiter(this,void 0,void 0,function*(){const C=yield fetch(d,{method:"post",body:v,signal:A});if(!C.ok)throw new TonConnectError(`Bridge send failed, status ${C.status}`);return C})}errorsHandler(d,v){return __awaiter(this,void 0,void 0,function*(){if(this.isConnecting)throw d.close(),new TonConnectError("Bridge error, failed to connect");if(this.isReady){try{this.errorsListener(v)}catch{}return}if(this.isClosed)return d.close(),logDebug$1(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new TonConnectError("Bridge error, unknown state")})}messagesHandler(d){return __awaiter(this,void 0,void 0,function*(){if(d.data===this.heartbeatMessage||(yield this.bridgeGatewayStorage.storeLastEventId(d.lastEventId),this.isClosed))return;let v;try{v=JSON.parse(d.data)}catch{throw new TonConnectError(`Bridge message parse failed, message ${d.data}`)}this.listener(v)})}}function createEventSource(_){return __awaiter(this,void 0,void 0,function*(){return yield timeout((d,v,A)=>__awaiter(this,void 0,void 0,function*(){var C;const T=createAbortController(A.signal).signal;if(T.aborted){v(new TonConnectError("Bridge connection aborted"));return}const R=new URL(addPathToUrl(_.bridgeUrl,_.ssePath));R.searchParams.append("client_id",_.sessionId);const G=yield _.bridgeGatewayStorage.getLastEventId();if(G&&R.searchParams.append("last_event_id",G),T.aborted){v(new TonConnectError("Bridge connection aborted"));return}const I=new EventSource(R.toString());I.onerror=z=>__awaiter(this,void 0,void 0,function*(){if(T.aborted){I.close(),v(new TonConnectError("Bridge connection aborted"));return}try{const H=yield _.errorHandler(I,z);H!==I&&I.close(),H&&H!==I&&d(H)}catch(H){I.close(),v(H)}}),I.onopen=()=>{if(T.aborted){I.close(),v(new TonConnectError("Bridge connection aborted"));return}d(I)},I.onmessage=z=>{if(T.aborted){I.close(),v(new TonConnectError("Bridge connection aborted"));return}_.messageHandler(z)},(C=_.signal)===null||C===void 0||C.addEventListener("abort",()=>{I.close(),v(new TonConnectError("Bridge connection aborted"))})}),{timeout:_.openingDeadlineMS,signal:_.signal})})}const CONNECTION_HTTP_EXPIRATION_TIME=5*60*1e3;function isPendingConnectionHttp(_){return!("connectEvent"in _)}function isPendingConnectionHttpRaw(_){return!("connectEvent"in _)}function isExpiredPendingConnectionHttpRaw(_){var d;return Date.now()-((d=_.createdAt)!==null&&d!==void 0?d:0)>CONNECTION_HTTP_EXPIRATION_TIME}class BridgeConnectionStorage{constructor(d){this.storage=d,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(d){return __awaiter(this,void 0,void 0,function*(){if(d.type==="injected")return this.storage.setItem(this.storeKey,JSON.stringify(d));if(!isPendingConnectionHttp(d)){const A={sessionKeyPair:d.session.sessionCrypto.stringifyKeypair(),walletPublicKey:d.session.walletPublicKey,bridgeUrl:d.session.bridgeUrl},C={type:"http",connectEvent:d.connectEvent,session:A,lastWalletEventId:d.lastWalletEventId,nextRpcRequestId:d.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(C))}const v={type:"http",connectionSource:d.connectionSource,sessionCrypto:d.sessionCrypto.stringifyKeypair(),createdAt:Date.now()};return this.storage.setItem(this.storeKey,JSON.stringify(v))})}removeConnection(){return __awaiter(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.storage.getItem(this.storeKey);if(!d)return null;const v=JSON.parse(d);if(v.type==="injected")return v;if(!isPendingConnectionHttpRaw(v)){const A=new SessionCrypto(v.session.sessionKeyPair);return{type:"http",connectEvent:v.connectEvent,lastWalletEventId:v.lastWalletEventId,nextRpcRequestId:v.nextRpcRequestId,session:{sessionCrypto:A,bridgeUrl:v.session.bridgeUrl,walletPublicKey:v.session.walletPublicKey}}}return isExpiredPendingConnectionHttpRaw(v)?(yield this.removeConnection(),null):{type:"http",sessionCrypto:new SessionCrypto(v.sessionCrypto),connectionSource:v.connectionSource}})}getHttpConnection(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.getConnection();if(!d)throw new TonConnectError("Trying to read HTTP connection source while nothing is stored");if(d.type==="injected")throw new TonConnectError("Trying to read HTTP connection source while injected connection is stored");return d})}getHttpPendingConnection(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.getConnection();if(!d)throw new TonConnectError("Trying to read HTTP connection source while nothing is stored");if(d.type==="injected")throw new TonConnectError("Trying to read HTTP connection source while injected connection is stored");if(!isPendingConnectionHttp(d))throw new TonConnectError("Trying to read HTTP-pending connection while http connection is stored");return d})}getInjectedConnection(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.getConnection();if(!d)throw new TonConnectError("Trying to read Injected bridge connection source while nothing is stored");if(d?.type==="http")throw new TonConnectError("Trying to read Injected bridge connection source while HTTP connection is stored");return d})}storedConnectionType(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.storage.getItem(this.storeKey);return d?JSON.parse(d).type:null})}storeLastWalletEventId(d){return __awaiter(this,void 0,void 0,function*(){const v=yield this.getConnection();if(v&&v.type==="http"&&!isPendingConnectionHttp(v))return v.lastWalletEventId=d,this.storeConnection(v)})}getLastWalletEventId(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.getConnection();if(d&&"lastWalletEventId"in d)return d.lastWalletEventId})}increaseNextRpcRequestId(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.getConnection();if(d&&"nextRpcRequestId"in d){const v=d.nextRpcRequestId||0;return d.nextRpcRequestId=v+1,this.storeConnection(d)}})}getNextRpcRequestId(){return __awaiter(this,void 0,void 0,function*(){const d=yield this.getConnection();return d&&"nextRpcRequestId"in d&&d.nextRpcRequestId||0})}}const PROTOCOL_VERSION=2;class BridgeProvider{constructor(d,v){this.storage=d,this.walletConnectionSource=v,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.connectionStorage=new BridgeConnectionStorage(d)}static fromStorage(d){return __awaiter(this,void 0,void 0,function*(){const A=yield new BridgeConnectionStorage(d).getHttpConnection();return isPendingConnectionHttp(A)?new BridgeProvider(d,A.connectionSource):new BridgeProvider(d,{bridgeUrl:A.session.bridgeUrl})})}connect(d,v){var A;const C=createAbortController(v?.signal);(A=this.abortController)===null||A===void 0||A.abort(),this.abortController=C,this.closeGateways();const w=new SessionCrypto;this.session={sessionCrypto:w,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:w}).then(()=>__awaiter(this,void 0,void 0,function*(){C.signal.aborted||(yield callForSuccess(R=>{var G;return this.openGateways(w,{openingDeadlineMS:(G=v?.openingDeadlineMS)!==null&&G!==void 0?G:this.defaultOpeningDeadlineMS,signal:R?.signal})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:C.signal}))}));const T="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(T,d)}restoreConnection(d){var v,A;return __awaiter(this,void 0,void 0,function*(){const C=createAbortController(d?.signal);if((v=this.abortController)===null||v===void 0||v.abort(),this.abortController=C,C.signal.aborted)return;this.closeGateways();const w=yield this.connectionStorage.getHttpConnection();if(!w||C.signal.aborted)return;const T=(A=d?.openingDeadlineMS)!==null&&A!==void 0?A:this.defaultOpeningDeadlineMS;if(isPendingConnectionHttp(w))return this.session={sessionCrypto:w.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(w.sessionCrypto,{openingDeadlineMS:T,signal:C?.signal});if(Array.isArray(this.walletConnectionSource))throw new TonConnectError("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=w.session,this.gateway&&(logDebug$1("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new BridgeGateway(this.storage,this.walletConnectionSource.bridgeUrl,w.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!C.signal.aborted){this.listeners.forEach(R=>R(w.connectEvent));try{yield callForSuccess(R=>this.gateway.registerSession({openingDeadlineMS:T,signal:R.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:C.signal})}catch{yield this.disconnect({signal:C.signal});return}}})}sendRequest(d,v){const A={};return typeof v=="function"?A.onRequestSent=v:(A.onRequestSent=v?.onRequestSent,A.signal=v?.signal,A.attempts=v?.attempts),new Promise((C,w)=>__awaiter(this,void 0,void 0,function*(){var T;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new TonConnectError("Trying to send bridge request without session");const R=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),logDebug$1("Send http-bridge request:",Object.assign(Object.assign({},d),{id:R}));const G=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},d),{id:R})),hexToByteArray(this.session.walletPublicKey));try{yield this.gateway.send(G,this.session.walletPublicKey,d.method,{attempts:A?.attempts,signal:A?.signal}),(T=A?.onRequestSent)===null||T===void 0||T.call(A),this.pendingRequests.set(R.toString(),C)}catch(I){w(I)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(d){return __awaiter(this,void 0,void 0,function*(){return new Promise(v=>__awaiter(this,void 0,void 0,function*(){let A=!1,C=null;const w=()=>{A||(A=!0,this.removeBridgeAndSession().then(v))};try{this.closeGateways();const T=createAbortController(d?.signal);C=setTimeout(()=>{T.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:w,signal:T.signal,attempts:1})}catch(T){logDebug$1("Disconnect error:",T),A||this.removeBridgeAndSession().then(v)}finally{C&&clearTimeout(C),w()}}))})}listen(d){return this.listeners.push(d),()=>this.listeners=this.listeners.filter(v=>v!==d)}pause(){var d;(d=this.gateway)===null||d===void 0||d.pause(),this.pendingGateways.forEach(v=>v.pause())}unPause(){return __awaiter(this,void 0,void 0,function*(){const d=this.pendingGateways.map(v=>v.unPause());this.gateway&&d.push(this.gateway.unPause()),yield Promise.all(d)})}pendingGatewaysListener(d,v,A){return __awaiter(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(d)){yield d.close();return}return this.closeGateways({except:d}),this.gateway&&(logDebug$1("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=v,this.gateway=d,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(A)})}gatewayListener(d){return __awaiter(this,void 0,void 0,function*(){const v=JSON.parse(this.session.sessionCrypto.decrypt(Base64.decode(d.message).toUint8Array(),hexToByteArray(d.from)));if(logDebug$1("Wallet message received:",v),!("event"in v)){const C=v.id.toString(),w=this.pendingRequests.get(C);if(!w){logDebug$1(`Response id ${C} doesn't match any request's id`);return}w(v),this.pendingRequests.delete(C);return}if(v.id!==void 0){const C=yield this.connectionStorage.getLastWalletEventId();if(C!==void 0&&v.id<=C){logError$1(`Received event id (=${v.id}) must be greater than stored last wallet event id (=${C}) `);return}v.event!=="connect"&&(yield this.connectionStorage.storeLastWalletEventId(v.id))}const A=this.listeners;v.event==="connect"&&(yield this.updateSession(v,d.from)),v.event==="disconnect"&&(logDebug$1("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),A.forEach(C=>C(v))})}gatewayErrorsListener(d){return __awaiter(this,void 0,void 0,function*(){throw new TonConnectError(`Bridge error ${JSON.stringify(d)}`)})}updateSession(d,v){return __awaiter(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:v});const A=d.payload.items.find(w=>w.name==="ton_addr"),C=Object.assign(Object.assign({},d),{payload:Object.assign(Object.assign({},d.payload),{items:[A]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:d.id,connectEvent:C,nextRpcRequestId:0})})}removeBridgeAndSession(){return __awaiter(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(d,v){return isTelegramUrl(d)?this.generateTGUniversalLink(d,v):this.generateRegularUniversalLink(d,v)}generateRegularUniversalLink(d,v){const A=new URL(d);return A.searchParams.append("v",PROTOCOL_VERSION.toString()),A.searchParams.append("id",this.session.sessionCrypto.sessionId),A.searchParams.append("r",JSON.stringify(v)),A.toString()}generateTGUniversalLink(d,v){const C=this.generateRegularUniversalLink("about:blank",v).split("?")[1],w="tonconnect-"+encodeTelegramUrlParameters(C),T=this.convertToDirectLink(d),R=new URL(T);return R.searchParams.append("startapp",w),R.toString()}convertToDirectLink(d){const v=new URL(d);return v.searchParams.has("attach")&&(v.searchParams.delete("attach"),v.pathname+="/start"),v.toString()}openGateways(d,v){return __awaiter(this,void 0,void 0,function*(){if(Array.isArray(this.walletConnectionSource)){this.pendingGateways.map(A=>A.close().catch()),this.pendingGateways=this.walletConnectionSource.map(A=>{const C=new BridgeGateway(this.storage,A.bridgeUrl,d.sessionId,()=>{},()=>{});return C.setListener(w=>this.pendingGatewaysListener(C,A.bridgeUrl,w)),C}),yield Promise.allSettled(this.pendingGateways.map(A=>callForSuccess(C=>{var w;return this.pendingGateways.some(T=>T===A)?A.registerSession({openingDeadlineMS:(w=v?.openingDeadlineMS)!==null&&w!==void 0?w:this.defaultOpeningDeadlineMS,signal:C.signal}):A.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:v?.signal})));return}else return this.gateway&&(logDebug$1("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new BridgeGateway(this.storage,this.walletConnectionSource.bridgeUrl,d.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:v?.openingDeadlineMS,signal:v?.signal})})}closeGateways(d){var v;(v=this.gateway)===null||v===void 0||v.close(),this.pendingGateways.filter(A=>A!==d?.except).forEach(A=>A.close()),this.pendingGateways=[]}}function hasProperty(_,d){return hasProperties(_,[d])}function hasProperties(_,d){return!_||typeof _!="object"?!1:d.every(v=>v in _)}function isJSBridgeWithMetadata(_){try{return!hasProperty(_,"tonconnect")||!hasProperty(_.tonconnect,"walletInfo")?!1:hasProperties(_.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch{return!1}}let InMemoryStorage$1=class fh{constructor(){this.storage={}}static getInstance(){return fh.instance||(fh.instance=new fh),fh.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(d){var v;return(v=this.storage[d])!==null&&v!==void 0?v:null}key(d){var v;const A=Object.keys(this.storage);return d<0||d>=A.length?null:(v=A[d])!==null&&v!==void 0?v:null}removeItem(d){delete this.storage[d]}setItem(d,v){this.storage[d]=v}};function getWindow$3(){if(!(typeof window>"u"))return window}function tryGetWindowKeys(){const _=getWindow$3();if(!_)return[];try{return Object.keys(_)}catch{return[]}}function getDocument$1(){if(!(typeof document>"u"))return document}function getWebPageManifest(){var _;const d=(_=getWindow$3())===null||_===void 0?void 0:_.location.origin;return d?d+"/tonconnect-manifest.json":""}function tryGetLocalStorage$1(){if(isLocalStorageAvailable$1())return localStorage;if(isNodeJs$1())throw new TonConnectError("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return InMemoryStorage$1.getInstance()}function isLocalStorageAvailable$1(){try{return typeof localStorage<"u"}catch{return!1}}function isNodeJs$1(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}class InjectedProvider{constructor(d,v){this.injectedWalletKey=v,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];const A=InjectedProvider.window;if(!InjectedProvider.isWindowContainsWallet(A,v))throw new WalletNotInjectedError;this.connectionStorage=new BridgeConnectionStorage(d),this.injectedWallet=A[v].tonconnect}static fromStorage(d){return __awaiter(this,void 0,void 0,function*(){const A=yield new BridgeConnectionStorage(d).getInjectedConnection();return new InjectedProvider(d,A.jsBridgeKey)})}static isWalletInjected(d){return InjectedProvider.isWindowContainsWallet(this.window,d)}static isInsideWalletBrowser(d){return InjectedProvider.isWindowContainsWallet(this.window,d)?this.window[d].tonconnect.isWalletBrowser:!1}static getCurrentlyInjectedWallets(){return this.window?tryGetWindowKeys().filter(([A,C])=>isJSBridgeWithMetadata(C)).map(([A,C])=>({name:C.tonconnect.walletInfo.name,appName:C.tonconnect.walletInfo.app_name,aboutUrl:C.tonconnect.walletInfo.about_url,imageUrl:C.tonconnect.walletInfo.image,tondns:C.tonconnect.walletInfo.tondns,jsBridgeKey:A,injected:!0,embedded:C.tonconnect.isWalletBrowser,platforms:C.tonconnect.walletInfo.platforms,features:C.tonconnect.walletInfo.features})):[]}static isWindowContainsWallet(d,v){return!!d&&v in d&&typeof d[v]=="object"&&"tonconnect"in d[v]}connect(d){this._connect(PROTOCOL_VERSION,d)}restoreConnection(){return __awaiter(this,void 0,void 0,function*(){try{logDebug$1("Injected Provider restoring connection...");const d=yield this.injectedWallet.restoreConnection();logDebug$1("Injected Provider restoring connection response",d),d.event==="connect"?(this.makeSubscriptions(),this.listeners.forEach(v=>v(d))):yield this.connectionStorage.removeConnection()}catch(d){yield this.connectionStorage.removeConnection(),console.error(d)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return __awaiter(this,void 0,void 0,function*(){return new Promise(d=>{const v=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(d)};try{this.injectedWallet.disconnect(),v()}catch(A){logDebug$1(A),this.sendRequest({method:"disconnect",params:[]},v)}})})}closeAllListeners(){var d;this.listenSubscriptions=!1,this.listeners=[],(d=this.unsubscribeCallback)===null||d===void 0||d.call(this)}listen(d){return this.listeners.push(d),()=>this.listeners=this.listeners.filter(v=>v!==d)}sendRequest(d,v){var A;return __awaiter(this,void 0,void 0,function*(){const C={};typeof v=="function"?C.onRequestSent=v:(C.onRequestSent=v?.onRequestSent,C.signal=v?.signal);const w=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),logDebug$1("Send injected-bridge request:",Object.assign(Object.assign({},d),{id:w}));const T=this.injectedWallet.send(Object.assign(Object.assign({},d),{id:w}));return T.then(R=>logDebug$1("Wallet message received:",R)),(A=C?.onRequestSent)===null||A===void 0||A.call(C),T})}_connect(d,v){return __awaiter(this,void 0,void 0,function*(){try{logDebug$1(`Injected Provider connect request: protocolVersion: ${d}, message:`,v);const A=yield this.injectedWallet.connect(d,v);logDebug$1("Injected Provider connect response:",A),A.event==="connect"&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(C=>C(A))}catch(A){logDebug$1("Injected Provider connect error:",A);const C={event:"connect_error",payload:{code:0,message:A?.toString()}};this.listeners.forEach(w=>w(C))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(d=>{logDebug$1("Wallet message received:",d),this.listenSubscriptions&&this.listeners.forEach(v=>v(d)),d.event==="disconnect"&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}}InjectedProvider.window=getWindow$3();class DefaultStorage{constructor(){this.localStorage=tryGetLocalStorage$1()}getItem(d){return __awaiter(this,void 0,void 0,function*(){return this.localStorage.getItem(d)})}removeItem(d){return __awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(d)})}setItem(d,v){return __awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(d,v)})}}function isWalletInfoCurrentlyInjected(_){return isWalletInfoInjectable(_)&&_.injected}function isWalletInfoCurrentlyEmbedded(_){return isWalletInfoCurrentlyInjected(_)&&_.embedded}function isWalletInfoInjectable(_){return"jsBridgeKey"in _}function isWalletInfoRemote(_){return"bridgeUrl"in _}const FALLBACK_WALLETS_LIST=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://walletbot.me/tonconnect-bridge/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitgetwallet/download/refs/heads/main/logo/png/bitget_wallet_logo_288_mini.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect"},{app_name:"okxMiniWallet",name:"OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/2411/8BE1A4A434D8F58A.png",about_url:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"binanceWeb3TonWallet",name:"Binance Web3 Wallet",image:"https://public.bnbstatic.com/static/binance-w3w/ton-provider/binancew3w.png",about_url:"https://www.binance.com/en/web3wallet",deepLink:"bnc://app.binance.com/cedefi/ton-connect",bridge:[{type:"js",key:"binancew3w"},{type:"sse",url:"https://wallet.binance.com/tonbridge/bridge"}],platforms:["ios","android","macos","windows","linux"],universal_url:"https://app.binance.com/cedefi/ton-connect"},{app_name:"fintopio-tg",name:"Fintopio",image:"https://fintopio.com/tonconnect-icon.png",about_url:"https://fintopio.com",universal_url:"https://t.me/fintopio?attach=wallet",bridge:[{type:"sse",url:"https://wallet-bridge.fintopio.com/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]},{app_name:"hot",name:"HOT",image:"https://raw.githubusercontent.com/hot-dao/media/main/logo.png",about_url:"https://hot-labs.org/",universal_url:"https://t.me/herewalletbot?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.hot-labs.org"},{type:"js",key:"hotWallet"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"bybitTonWallet",name:"Bybit Wallet",image:"https://raw.githubusercontent.com/bybit-web3/bybit-web3.github.io/main/docs/images/bybit-logo.png",about_url:"https://www.bybit.com/web3",universal_url:"https://app.bybit.com/ton-connect",deepLink:"bybitapp://",bridge:[{type:"js",key:"bybitTonWallet"},{type:"sse",url:"https://api-node.bybit.com/spot/api/web3/bridge/ton/bridge"}],platforms:["ios","android","chrome"]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.dewallet.pro/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"]},{app_name:"GateWallet",name:"GateWallet",image:"https://img.gatedataimg.com/prd-ordinal-imgs/036f07bb8730716e/gateio-0925.png",about_url:"https://www.gate.io/",bridge:[{type:"js",key:"gatetonwallet"},{type:"sse",url:"https://dapp.gateio.services/tonbridge_api/bridge/v1"}],platforms:["ios","android"],universal_url:"https://gateio.go.link/gateio/web3?adj_t=1ff8khdw_1fu4ccc7"},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"BitgetWeb3",name:"BitgetWeb3",image:"https://img.bitgetimg.com/image/third/1731638059795.png",about_url:"https://www.bitget.com",universal_url:"https://t.me/BitgetOfficialBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","windows","macos","linux"]},{app_name:"tobi",name:"Tobi",image:"https://app.tobiwallet.app/icons/logo-288.png",about_url:"https://tobi.fun",universal_url:"https://t.me/TobiCopilotBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-bridge.tobiwallet.app/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]}];class WalletsListManager{constructor(d){var v;this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource=(v=d?.walletsListSource)!==null&&v!==void 0?v:"https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",this.cacheTTLMs=d?.cacheTTLMs}getWallets(){return __awaiter(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return __awaiter(this,void 0,void 0,function*(){const v=(yield this.getWallets()).filter(isWalletInfoCurrentlyEmbedded);return v.length===1?v[0]:null})}fetchWalletsList(){return __awaiter(this,void 0,void 0,function*(){let d=[];try{if(d=yield(yield fetch(this.walletsListSource)).json(),!Array.isArray(d))throw new FetchWalletsError("Wrong wallets list format, wallets list must be an array.");const C=d.filter(w=>!this.isCorrectWalletConfigDTO(w));C.length&&(logError$1(`Wallet(s) ${C.map(w=>w?.name||"unknown").join(", ")} config format is wrong. They were removed from the wallets list.`),d=d.filter(w=>this.isCorrectWalletConfigDTO(w)))}catch(A){logError$1(A),d=FALLBACK_WALLETS_LIST}let v=[];try{v=InjectedProvider.getCurrentlyInjectedWallets()}catch(A){logError$1(A)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(d),v)})}walletConfigDTOListToWalletConfigList(d){return d.map(v=>{const A={name:v.name,appName:v.app_name,imageUrl:v.image,aboutUrl:v.about_url,tondns:v.tondns,platforms:v.platforms,features:v.features};return v.bridge.forEach(C=>{if(C.type==="sse"&&(A.bridgeUrl=C.url,A.universalLink=v.universal_url,A.deepLink=v.deepLink),C.type==="js"){const w=C.key;A.jsBridgeKey=w,A.injected=InjectedProvider.isWalletInjected(w),A.embedded=InjectedProvider.isInsideWalletBrowser(w)}}),A})}mergeWalletsLists(d,v){return[...new Set(d.concat(v).map(C=>C.name)).values()].map(C=>{const w=d.find(R=>R.name===C),T=v.find(R=>R.name===C);return Object.assign(Object.assign({},w&&Object.assign({},w)),T&&Object.assign({},T))})}isCorrectWalletConfigDTO(d){if(!d||typeof d!="object")return!1;const v="name"in d,A="app_name"in d,C="image"in d,w="about_url"in d,T="platforms"in d;if(!v||!C||!w||!T||!A||!d.platforms||!Array.isArray(d.platforms)||!d.platforms.length||!("bridge"in d)||!Array.isArray(d.bridge)||!d.bridge.length)return!1;const R=d.bridge;if(R.some(z=>!z||typeof z!="object"||!("type"in z)))return!1;const G=R.find(z=>z.type==="sse");if(G&&(!(typeof G=="object"&&"url"in G)||!G.url||!d.universal_url))return!1;const I=R.find(z=>z.type==="js");return!(I&&(typeof I!="object"||!("key"in I)||!I.key))}}function checkSendTransactionSupport(_,d){const v=_.includes("SendTransaction"),A=findFeature(_,"SendTransaction"),C={minMessages:d.requiredMessagesNumber,extraCurrencyRequired:d.requireExtraCurrencies};if(!v&&!A)throw new WalletNotSupportFeatureError("Wallet doesn't support SendTransaction feature.",{cause:{requiredFeature:{featureName:"SendTransaction",value:C}}});if(d.requireExtraCurrencies&&(!A||!A.extraCurrencySupported))throw new WalletNotSupportFeatureError("Wallet is not able to handle such SendTransaction request. Extra currencies support is required.",{cause:{requiredFeature:{featureName:"SendTransaction",value:C}}});if(A&&A.maxMessages!==void 0){if(A.maxMessages<d.requiredMessagesNumber)throw new WalletNotSupportFeatureError(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${A.maxMessages}, but ${d.requiredMessagesNumber} is required.`,{cause:{requiredFeature:{featureName:"SendTransaction",value:C}}});return}logWarning$1("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}function checkSignDataSupport(_,d){const v=_.find(C=>C&&typeof C=="object"&&C.name==="SignData");if(!v)throw new WalletNotSupportFeatureError("Wallet doesn't support SignData feature.",{cause:{requiredFeature:{featureName:"SignData",value:{types:d.requiredTypes}}}});const A=d.requiredTypes.filter(C=>!v.types.includes(C));if(A.length)throw new WalletNotSupportFeatureError(`Wallet doesn't support required SignData types: ${A.join(", ")}.`,{cause:{requiredFeature:{featureName:"SignData",value:{types:A}}}})}function checkRequiredWalletFeatures(_,d){if(typeof d!="object")return!0;const{sendTransaction:v,signData:A}=d;if(v){const C=findFeature(_,"SendTransaction");if(!C||!checkSendTransaction(C,v))return!1}if(A){const C=findFeature(_,"SignData");if(!C||!checkSignData(C,A))return!1}return!0}function findFeature(_,d){return _.find(v=>v&&typeof v=="object"&&v.name===d)}function checkSendTransaction(_,d){const v=d.minMessages===void 0||d.minMessages<=_.maxMessages,A=!d.extraCurrencyRequired||_.extraCurrencySupported;return!!(v&&A)}function checkSignData(_,d){return d.types.every(v=>_.types.includes(v))}function createRequestVersionEvent(){return{type:"request-version"}}function createResponseVersionEvent(_){return{type:"response-version",version:_}}function createVersionInfo(_){return{ton_connect_sdk_lib:_.ton_connect_sdk_lib,ton_connect_ui_lib:_.ton_connect_ui_lib}}function createConnectionInfo(_,d){var v,A,C,w,T,R,G,I;const H=((v=d?.connectItems)===null||v===void 0?void 0:v.tonProof)&&"proof"in d.connectItems.tonProof?"ton_proof":"ton_addr";return{wallet_address:(C=(A=d?.account)===null||A===void 0?void 0:A.address)!==null&&C!==void 0?C:null,wallet_type:(w=d?.device.appName)!==null&&w!==void 0?w:null,wallet_version:(T=d?.device.appVersion)!==null&&T!==void 0?T:null,auth_type:H,custom_data:Object.assign({chain_id:(G=(R=d?.account)===null||R===void 0?void 0:R.chain)!==null&&G!==void 0?G:null,provider:(I=d?.provider)!==null&&I!==void 0?I:null},createVersionInfo(_))}}function createConnectionStartedEvent(_){return{type:"connection-started",custom_data:createVersionInfo(_)}}function createConnectionCompletedEvent(_,d){return Object.assign({type:"connection-completed",is_success:!0},createConnectionInfo(_,d))}function createConnectionErrorEvent(_,d,v){return{type:"connection-error",is_success:!1,error_message:d,error_code:v??null,custom_data:createVersionInfo(_)}}function createConnectionRestoringStartedEvent(_){return{type:"connection-restoring-started",custom_data:createVersionInfo(_)}}function createConnectionRestoringCompletedEvent(_,d){return Object.assign({type:"connection-restoring-completed",is_success:!0},createConnectionInfo(_,d))}function createConnectionRestoringErrorEvent(_,d){return{type:"connection-restoring-error",is_success:!1,error_message:d,custom_data:createVersionInfo(_)}}function createTransactionInfo(_,d){var v,A,C,w;return{valid_until:(v=String(d.validUntil))!==null&&v!==void 0?v:null,from:(w=(A=d.from)!==null&&A!==void 0?A:(C=_?.account)===null||C===void 0?void 0:C.address)!==null&&w!==void 0?w:null,messages:d.messages.map(T=>{var R,G;return{address:(R=T.address)!==null&&R!==void 0?R:null,amount:(G=T.amount)!==null&&G!==void 0?G:null}})}}function createTransactionSentForSignatureEvent(_,d,v){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},createConnectionInfo(_,d)),createTransactionInfo(d,v))}function createTransactionSignedEvent(_,d,v,A){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:A.boc},createConnectionInfo(_,d)),createTransactionInfo(d,v))}function createTransactionSigningFailedEvent(_,d,v,A,C){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:A,error_code:C??null},createConnectionInfo(_,d)),createTransactionInfo(d,v))}function createDataSentForSignatureEvent(_,d,v){return Object.assign({type:"sign-data-request-initiated",data:v},createConnectionInfo(_,d))}function createDataSignedEvent(_,d,v,A){return Object.assign({type:"sign-data-request-completed",is_success:!0,data:v,signed_data:A},createConnectionInfo(_,d))}function createDataSigningFailedEvent(_,d,v,A,C){return Object.assign({type:"sign-data-request-failed",is_success:!1,data:v,error_message:A,error_code:C??null},createConnectionInfo(_,d))}function createDisconnectionEvent(_,d,v){return Object.assign({type:"disconnection",scope:v},createConnectionInfo(_,d))}class BrowserEventDispatcher{constructor(){this.window=getWindow$3()}dispatchEvent(d,v){var A;return __awaiter(this,void 0,void 0,function*(){const C=new CustomEvent(d,{detail:v});(A=this.window)===null||A===void 0||A.dispatchEvent(C)})}addEventListener(d,v,A){var C;return __awaiter(this,void 0,void 0,function*(){return(C=this.window)===null||C===void 0||C.addEventListener(d,v,A),()=>{var w;return(w=this.window)===null||w===void 0?void 0:w.removeEventListener(d,v)}})}}class TonConnectTracker{constructor(d){var v;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=(v=d?.eventDispatcher)!==null&&v!==void 0?v:new BrowserEventDispatcher,this.tonConnectSdkVersion=d.tonConnectSdkVersion,this.init().catch()}get version(){return createVersionInfo({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return __awaiter(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch{}})}setRequestVersionHandler(){return __awaiter(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>__awaiter(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",createResponseVersionEvent(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return __awaiter(this,void 0,void 0,function*(){return new Promise((d,v)=>__awaiter(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",A=>{d(A.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",createRequestVersionEvent())}catch(A){v(A)}}))})}dispatchUserActionEvent(d){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${d.type}`,d).catch()}catch{}}trackConnectionStarted(...d){try{const v=createConnectionStartedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionCompleted(...d){try{const v=createConnectionCompletedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionError(...d){try{const v=createConnectionErrorEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionRestoringStarted(...d){try{const v=createConnectionRestoringStartedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionRestoringCompleted(...d){try{const v=createConnectionRestoringCompletedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionRestoringError(...d){try{const v=createConnectionRestoringErrorEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDisconnection(...d){try{const v=createDisconnectionEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackTransactionSentForSignature(...d){try{const v=createTransactionSentForSignatureEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackTransactionSigned(...d){try{const v=createTransactionSignedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackTransactionSigningFailed(...d){try{const v=createTransactionSigningFailedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDataSentForSignature(...d){try{const v=createDataSentForSignatureEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDataSigned(...d){try{const v=createDataSignedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDataSigningFailed(...d){try{const v=createDataSigningFailedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}}const tonConnectSdkVersion="3.2.0";class TonConnect{constructor(d){if(this.walletsList=new WalletsListManager,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:d?.manifestUrl||getWebPageManifest(),storage:d?.storage||new DefaultStorage},this.walletsRequiredFeatures=d?.walletsRequiredFeatures,this.walletsList=new WalletsListManager({walletsListSource:d?.walletsListSource,cacheTTLMs:d?.walletsListCacheTTLMs}),this.tracker=new TonConnectTracker({eventDispatcher:d?.eventDispatcher,tonConnectSdkVersion}),!this.dappSettings.manifestUrl)throw new DappMetadataError("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new BridgeConnectionStorage(this.dappSettings.storage),d?.disableAutoPauseConnection||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return this._wallet!==null}get account(){var d;return((d=this._wallet)===null||d===void 0?void 0:d.account)||null}get wallet(){return this._wallet}set wallet(d){this._wallet=d,this.statusChangeSubscriptions.forEach(v=>v(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(d,v){return this.statusChangeSubscriptions.push(d),v&&this.statusChangeErrorSubscriptions.push(v),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(A=>A!==d),v&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(A=>A!==v))}}connect(d,v){var A,C;const w={};if(typeof v=="object"&&"tonProof"in v&&(w.request=v),typeof v=="object"&&("openingDeadlineMS"in v||"signal"in v||"request"in v)&&(w.request=v?.request,w.openingDeadlineMS=v?.openingDeadlineMS,w.signal=v?.signal),this.connected)throw new WalletAlreadyConnectedError;const T=createAbortController(w?.signal);if((A=this.abortController)===null||A===void 0||A.abort(),this.abortController=T,T.signal.aborted)throw new TonConnectError("Connection was aborted");return(C=this.provider)===null||C===void 0||C.closeConnection(),this.provider=this.createProvider(d),T.signal.addEventListener("abort",()=>{var R;(R=this.provider)===null||R===void 0||R.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(w?.request),{openingDeadlineMS:w?.openingDeadlineMS,signal:T.signal})}restoreConnection(d){var v,A;return __awaiter(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();const C=createAbortController(d?.signal);if((v=this.abortController)===null||v===void 0||v.abort(),this.abortController=C,C.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}const[w,T]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(C.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let R=null;try{switch(w){case"http":R=yield BridgeProvider.fromStorage(this.dappSettings.storage);break;case"injected":R=yield InjectedProvider.fromStorage(this.dappSettings.storage);break;default:if(T)R=this.createProvider(T);else return}}catch{this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),R?.closeConnection(),R=null;return}if(C.signal.aborted){R?.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!R){logError$1("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}(A=this.provider)===null||A===void 0||A.closeConnection(),this.provider=R,R.listen(this.walletEventsListener.bind(this));const G=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),R?.closeConnection(),R=null};C.signal.addEventListener("abort",G);const I=callForSuccess(H=>__awaiter(this,void 0,void 0,function*(){yield R?.restoreConnection({openingDeadlineMS:d?.openingDeadlineMS,signal:H.signal}),C.signal.removeEventListener("abort",G),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:d?.signal}),z=new Promise(H=>setTimeout(()=>H(),12e3));return Promise.race([I,z])})}sendTransaction(d,v){return __awaiter(this,void 0,void 0,function*(){const A={};typeof v=="function"?A.onRequestSent=v:(A.onRequestSent=v?.onRequestSent,A.signal=v?.signal);const C=createAbortController(A?.signal);if(C.signal.aborted)throw new TonConnectError("Transaction sending was aborted");this.checkConnection();const w=d.messages.length,T=d.messages.some(ie=>ie.extraCurrency&&Object.keys(ie.extraCurrency).length>0);checkSendTransactionSupport(this.wallet.device.features,{requiredMessagesNumber:w,requireExtraCurrencies:T}),this.tracker.trackTransactionSentForSignature(this.wallet,d);const{validUntil:R,messages:G}=d,I=__rest$1(d,["validUntil","messages"]),z=d.from||this.account.address,H=d.network||this.account.chain,Y=yield this.provider.sendRequest(sendTransactionParser.convertToRpcRequest(Object.assign(Object.assign({},I),{from:z,network:H,valid_until:R,messages:G.map(ie=>{var{extraCurrency:oe}=ie,se=__rest$1(ie,["extraCurrency"]);return Object.assign(Object.assign({},se),{extra_currency:oe})})})),{onRequestSent:A.onRequestSent,signal:C.signal});if(sendTransactionParser.isError(Y))return this.tracker.trackTransactionSigningFailed(this.wallet,d,Y.error.message,Y.error.code),sendTransactionParser.parseAndThrowError(Y);const ee=sendTransactionParser.convertFromRpcResponse(Y);return this.tracker.trackTransactionSigned(this.wallet,d,ee),ee})}signData(d,v){return __awaiter(this,void 0,void 0,function*(){const A=createAbortController(v?.signal);if(A.signal.aborted)throw new TonConnectError("data sending was aborted");this.checkConnection(),checkSignDataSupport(this.wallet.device.features,{requiredTypes:[d.type]}),this.tracker.trackDataSentForSignature(this.wallet,d);const C=d.from||this.account.address,w=d.network||this.account.chain,T=yield this.provider.sendRequest(signDataParser.convertToRpcRequest(Object.assign(Object.assign({},d),{from:C,network:w})),{onRequestSent:v?.onRequestSent,signal:A.signal});if(signDataParser.isError(T))return this.tracker.trackDataSigningFailed(this.wallet,d,T.error.message,T.error.code),signDataParser.parseAndThrowError(T);const R=signDataParser.convertFromRpcResponse(T);return this.tracker.trackDataSigned(this.wallet,d,R),R})}disconnect(d){var v;return __awaiter(this,void 0,void 0,function*(){if(!this.connected)throw new WalletNotConnectedError;const A=createAbortController(d?.signal),C=this.abortController;if(this.abortController=A,A.signal.aborted)throw new TonConnectError("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield(v=this.provider)===null||v===void 0?void 0:v.disconnect({signal:A.signal}),C?.abort()})}pauseConnection(){var d;((d=this.provider)===null||d===void 0?void 0:d.type)==="http"&&this.provider.pause()}unPauseConnection(){var d;return((d=this.provider)===null||d===void 0?void 0:d.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){const d=getDocument$1();if(d)try{d.addEventListener("visibilitychange",()=>{d.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(v){logError$1("Cannot subscribe to the document.visibilitychange: ",v)}}createProvider(d){let v;return!Array.isArray(d)&&isWalletConnectionSourceJS(d)?v=new InjectedProvider(this.dappSettings.storage,d.jsBridgeKey):v=new BridgeProvider(this.dappSettings.storage,d),v.listen(this.walletEventsListener.bind(this)),v}walletEventsListener(d){switch(d.event){case"connect":this.onWalletConnected(d.payload);break;case"connect_error":this.tracker.trackConnectionError(d.payload.message,d.payload.code);const v=connectErrorsParser.parseError(d.payload);this.onWalletConnectError(v);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(d){var v;const A=d.items.find(R=>R.name==="ton_addr"),C=d.items.find(R=>R.name==="ton_proof");if(!A)throw new TonConnectError("ton_addr connection item was not found");if(!checkRequiredWalletFeatures(d.device.features,this.walletsRequiredFeatures)){(v=this.provider)===null||v===void 0||v.disconnect(),this.onWalletConnectError(new WalletMissingRequiredFeaturesError("Wallet does not support required features",{cause:{connectEvent:d}}));return}const T={device:d.device,provider:this.provider.type,account:{address:A.address,chain:A.network,walletStateInit:A.walletStateInit,publicKey:A.publicKey}};if(C){let R;try{if("proof"in C)R={name:"ton_proof",proof:{timestamp:C.proof.timestamp,domain:{lengthBytes:C.proof.domain.lengthBytes,value:C.proof.domain.value},payload:C.proof.payload,signature:C.proof.signature}};else if("error"in C)R={name:"ton_proof",error:{code:C.error.code,message:C.error.message}};else throw new TonConnectError("Invalid data format")}catch{R={name:"ton_proof",error:{code:CONNECT_ITEM_ERROR_CODES.UNKNOWN_ERROR,message:"Invalid data format"}}}T.connectItems={tonProof:R}}this.wallet=T,this.tracker.trackConnectionCompleted(T)}onWalletConnectError(d){if(this.statusChangeErrorSubscriptions.forEach(v=>v(d)),logDebug$1(d),d instanceof ManifestNotFoundError||d instanceof ManifestContentErrorError)throw logError$1(d),d}onWalletDisconnected(d){this.tracker.trackDisconnection(this.wallet,d),this.wallet=null}checkConnection(){if(!this.connected)throw new WalletNotConnectedError}createConnectRequest(d){const v=[{name:"ton_addr"}];return d?.tonProof&&v.push({name:"ton_proof",payload:d.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:v}}}TonConnect.walletsList=new WalletsListManager;TonConnect.isWalletInjected=_=>InjectedProvider.isWalletInjected(_);TonConnect.isInsideWalletBrowser=_=>InjectedProvider.isInsideWalletBrowser(_);const noBounceableTag=81,testOnlyTag=128;function toUserFriendlyAddress(_,d=!1){const{wc:v,hex:A}=parseHexAddress(_);let C=noBounceableTag;d&&(C|=testOnlyTag);const w=new Int8Array(34);w[0]=C,w[1]=v,w.set(A,2);const T=new Uint8Array(36);return T.set(w),T.set(crc16(w),34),Base64.encode(T).replace(/\+/g,"-").replace(/\//g,"_")}function parseHexAddress(_){if(!_.includes(":"))throw new WrongAddressError(`Wrong address ${_}. Address must include ":".`);const d=_.split(":");if(d.length!==2)throw new WrongAddressError(`Wrong address ${_}. Address must include ":" only once.`);const v=parseInt(d[0]);if(v!==0&&v!==-1)throw new WrongAddressError(`Wrong address ${_}. WC must be eq 0 or -1, but ${v} received.`);const A=d[1];if(A?.length!==64)throw new WrongAddressError(`Wrong address ${_}. Hex part must be 64bytes length, but ${A?.length} received.`);return{wc:v,hex:hexToBytes(A)}}function crc16(_){let v=0;const A=new Uint8Array(_.length+2);A.set(_);for(let C of A){let w=128;for(;w>0;)v<<=1,C&w&&(v+=1),w>>=1,v>65535&&(v&=65535,v^=4129)}return new Uint8Array([Math.floor(v/256),v%256])}const toByteMap={};for(let _=0;_<=255;_++){let d=_.toString(16);d.length<2&&(d="0"+d),toByteMap[d]=_}function hexToBytes(_){_=_.toLowerCase();const d=_.length;if(d%2!==0)throw new ParseHexError("Hex string must have length a multiple of 2: "+_);const v=d/2,A=new Uint8Array(v);for(let C=0;C<v;C++){const w=C*2,T=_.substring(w,w+2);if(!toByteMap.hasOwnProperty(T))throw new ParseHexError("Invalid hex character: "+T);A[C]=toByteMap[T]}return A}var uaParser$1={exports:{}},uaParser=uaParser$1.exports,hasRequiredUaParser;function requireUaParser(){return hasRequiredUaParser||(hasRequiredUaParser=1,function(_,d){(function(v,A){var C="1.0.38",w="",T="?",R="function",G="undefined",I="object",z="string",H="major",Y="model",ee="name",ie="type",oe="vendor",se="version",re="architecture",fe="console",ue="mobile",ge="tablet",ye="smarttv",be="wearable",ve="embedded",Me=500,we="Amazon",Be="Apple",De="ASUS",Fe="BlackBerry",Oe="Browser",Ge="Chrome",ze="Edge",je="Firefox",He="Google",Xe="Huawei",$e="LG",We="Microsoft",nt="Motorola",Qt="Opera",Wt="Samsung",Bn="Sharp",Lt="Sony",Mn="Xiaomi",cr="Zebra",In="Facebook",Zn="Chromium OS",$n="Mac OS",Rn=function(yn,kn){var nr={};for(var dr in yn)kn[dr]&&kn[dr].length%2===0?nr[dr]=kn[dr].concat(yn[dr]):nr[dr]=yn[dr];return nr},Dn=function(yn){for(var kn={},nr=0;nr<yn.length;nr++)kn[yn[nr].toUpperCase()]=yn[nr];return kn},Gt=function(yn,kn){return typeof yn===z?Jn(kn).indexOf(Jn(yn))!==-1:!1},Jn=function(yn){return yn.toLowerCase()},Nn=function(yn){return typeof yn===z?yn.replace(/[^\d\.]/g,w).split(".")[0]:A},Xn=function(yn,kn){if(typeof yn===z)return yn=yn.replace(/^\s\s*/,w),typeof kn===G?yn:yn.substring(0,Me)},jn=function(yn,kn){for(var nr=0,dr,Qr,Wr,Gr,Hr,Kr;nr<kn.length&&!Hr;){var ti=kn[nr],Mi=kn[nr+1];for(dr=Qr=0;dr<ti.length&&!Hr&&ti[dr];)if(Hr=ti[dr++].exec(yn),Hr)for(Wr=0;Wr<Mi.length;Wr++)Kr=Hr[++Qr],Gr=Mi[Wr],typeof Gr===I&&Gr.length>0?Gr.length===2?typeof Gr[1]==R?this[Gr[0]]=Gr[1].call(this,Kr):this[Gr[0]]=Gr[1]:Gr.length===3?typeof Gr[1]===R&&!(Gr[1].exec&&Gr[1].test)?this[Gr[0]]=Kr?Gr[1].call(this,Kr,Gr[2]):A:this[Gr[0]]=Kr?Kr.replace(Gr[1],Gr[2]):A:Gr.length===4&&(this[Gr[0]]=Kr?Gr[3].call(this,Kr.replace(Gr[1],Gr[2])):A):this[Gr]=Kr||A;nr+=2}},Un=function(yn,kn){for(var nr in kn)if(typeof kn[nr]===I&&kn[nr].length>0){for(var dr=0;dr<kn[nr].length;dr++)if(Gt(kn[nr][dr],yn))return nr===T?A:nr}else if(Gt(kn[nr],yn))return nr===T?A:nr;return yn},bn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Kn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Qn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[se,[ee,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[se,[ee,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ee,se],[/opios[\/ ]+([\w\.]+)/i],[se,[ee,Qt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[se,[ee,Qt+" GX"]],[/\bopr\/([\w\.]+)/i],[se,[ee,Qt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[se,[ee,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[ee,se],[/\bddg\/([\w\.]+)/i],[se,[ee,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[se,[ee,"UC"+Oe]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[se,[ee,"WeChat"]],[/konqueror\/([\w\.]+)/i],[se,[ee,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[se,[ee,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[se,[ee,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[se,[ee,"Smart Lenovo "+Oe]],[/(avast|avg)\/([\w\.]+)/i],[[ee,/(.+)/,"$1 Secure "+Oe],se],[/\bfocus\/([\w\.]+)/i],[se,[ee,je+" Focus"]],[/\bopt\/([\w\.]+)/i],[se,[ee,Qt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[se,[ee,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[se,[ee,"Dolphin"]],[/coast\/([\w\.]+)/i],[se,[ee,Qt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[se,[ee,"MIUI "+Oe]],[/fxios\/([-\w\.]+)/i],[se,[ee,je]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ee,"360 "+Oe]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[ee,/(.+)/,"$1 "+Oe],se],[/samsungbrowser\/([\w\.]+)/i],[se,[ee,Wt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[ee,/_/g," "],se],[/metasr[\/ ]?([\d\.]+)/i],[se,[ee,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[ee,"Sogou Mobile"],se],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[ee,se],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[ee],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ee,In],se],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[ee,se],[/\bgsa\/([\w\.]+) .*safari\//i],[se,[ee,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[se,[ee,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[se,[ee,Ge+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ee,Ge+" WebView"],se],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[se,[ee,"Android "+Oe]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ee,se],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[se,[ee,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[se,ee],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ee,[se,Un,bn]],[/(webkit|khtml)\/([\w\.]+)/i],[ee,se],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ee,"Netscape"],se],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[se,[ee,je+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[ee,se],[/(cobalt)\/([\w\.]+)/i],[ee,[se,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[re,"amd64"]],[/(ia32(?=;))/i],[[re,Jn]],[/((?:i[346]|x)86)[;\)]/i],[[re,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[re,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[re,"armhf"]],[/windows (ce|mobile); ppc;/i],[[re,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[re,/ower/,w,Jn]],[/(sun4\w)[;\)]/i],[[re,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[re,Jn]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[Y,[oe,Wt],[ie,ge]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[Y,[oe,Wt],[ie,ue]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[Y,[oe,Be],[ie,ue]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[Y,[oe,Be],[ie,ge]],[/(macintosh);/i],[Y,[oe,Be]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[Y,[oe,Bn],[ie,ue]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[Y,[oe,Xe],[ie,ge]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[Y,[oe,Xe],[ie,ue]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[Y,/_/g," "],[oe,Mn],[ie,ue]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[Y,/_/g," "],[oe,Mn],[ie,ge]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[Y,[oe,"OPPO"],[ie,ue]],[/\b(opd2\d{3}a?) bui/i],[Y,[oe,"OPPO"],[ie,ge]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[Y,[oe,"Vivo"],[ie,ue]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[Y,[oe,"Realme"],[ie,ue]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[Y,[oe,nt],[ie,ue]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[Y,[oe,nt],[ie,ge]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[Y,[oe,$e],[ie,ge]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[Y,[oe,$e],[ie,ue]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[Y,[oe,"Lenovo"],[ie,ge]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[Y,/_/g," "],[oe,"Nokia"],[ie,ue]],[/(pixel c)\b/i],[Y,[oe,He],[ie,ge]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[Y,[oe,He],[ie,ue]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[Y,[oe,Lt],[ie,ue]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[Y,"Xperia Tablet"],[oe,Lt],[ie,ge]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[Y,[oe,"OnePlus"],[ie,ue]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[Y,[oe,we],[ie,ge]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[Y,/(.+)/g,"Fire Phone $1"],[oe,we],[ie,ue]],[/(playbook);[-\w\),; ]+(rim)/i],[Y,oe,[ie,ge]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[Y,[oe,Fe],[ie,ue]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[Y,[oe,De],[ie,ge]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[Y,[oe,De],[ie,ue]],[/(nexus 9)/i],[Y,[oe,"HTC"],[ie,ge]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[oe,[Y,/_/g," "],[ie,ue]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[Y,[oe,"Acer"],[ie,ge]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[Y,[oe,"Meizu"],[ie,ue]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[Y,[oe,"Ulefone"],[ie,ue]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[oe,Y,[ie,ue]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[oe,Y,[ie,ge]],[/(surface duo)/i],[Y,[oe,We],[ie,ge]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[Y,[oe,"Fairphone"],[ie,ue]],[/(u304aa)/i],[Y,[oe,"AT&T"],[ie,ue]],[/\bsie-(\w*)/i],[Y,[oe,"Siemens"],[ie,ue]],[/\b(rct\w+) b/i],[Y,[oe,"RCA"],[ie,ge]],[/\b(venue[\d ]{2,7}) b/i],[Y,[oe,"Dell"],[ie,ge]],[/\b(q(?:mv|ta)\w+) b/i],[Y,[oe,"Verizon"],[ie,ge]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[Y,[oe,"Barnes & Noble"],[ie,ge]],[/\b(tm\d{3}\w+) b/i],[Y,[oe,"NuVision"],[ie,ge]],[/\b(k88) b/i],[Y,[oe,"ZTE"],[ie,ge]],[/\b(nx\d{3}j) b/i],[Y,[oe,"ZTE"],[ie,ue]],[/\b(gen\d{3}) b.+49h/i],[Y,[oe,"Swiss"],[ie,ue]],[/\b(zur\d{3}) b/i],[Y,[oe,"Swiss"],[ie,ge]],[/\b((zeki)?tb.*\b) b/i],[Y,[oe,"Zeki"],[ie,ge]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[oe,"Dragon Touch"],Y,[ie,ge]],[/\b(ns-?\w{0,9}) b/i],[Y,[oe,"Insignia"],[ie,ge]],[/\b((nxa|next)-?\w{0,9}) b/i],[Y,[oe,"NextBook"],[ie,ge]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[oe,"Voice"],Y,[ie,ue]],[/\b(lvtel\-)?(v1[12]) b/i],[[oe,"LvTel"],Y,[ie,ue]],[/\b(ph-1) /i],[Y,[oe,"Essential"],[ie,ue]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[Y,[oe,"Envizen"],[ie,ge]],[/\b(trio[-\w\. ]+) b/i],[Y,[oe,"MachSpeed"],[ie,ge]],[/\btu_(1491) b/i],[Y,[oe,"Rotor"],[ie,ge]],[/(shield[\w ]+) b/i],[Y,[oe,"Nvidia"],[ie,ge]],[/(sprint) (\w+)/i],[oe,Y,[ie,ue]],[/(kin\.[onetw]{3})/i],[[Y,/\./g," "],[oe,We],[ie,ue]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[Y,[oe,cr],[ie,ge]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[Y,[oe,cr],[ie,ue]],[/smart-tv.+(samsung)/i],[oe,[ie,ye]],[/hbbtv.+maple;(\d+)/i],[[Y,/^/,"SmartTV"],[oe,Wt],[ie,ye]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[oe,$e],[ie,ye]],[/(apple) ?tv/i],[oe,[Y,Be+" TV"],[ie,ye]],[/crkey/i],[[Y,Ge+"cast"],[oe,He],[ie,ye]],[/droid.+aft(\w+)( bui|\))/i],[Y,[oe,we],[ie,ye]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[Y,[oe,Bn],[ie,ye]],[/(bravia[\w ]+)( bui|\))/i],[Y,[oe,Lt],[ie,ye]],[/(mitv-\w{5}) bui/i],[Y,[oe,Mn],[ie,ye]],[/Hbbtv.*(technisat) (.*);/i],[oe,Y,[ie,ye]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[oe,Xn],[Y,Xn],[ie,ye]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[ie,ye]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[oe,Y,[ie,fe]],[/droid.+; (shield) bui/i],[Y,[oe,"Nvidia"],[ie,fe]],[/(playstation [345portablevi]+)/i],[Y,[oe,Lt],[ie,fe]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[Y,[oe,We],[ie,fe]],[/((pebble))app/i],[oe,Y,[ie,be]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[Y,[oe,Be],[ie,be]],[/droid.+; (glass) \d/i],[Y,[oe,He],[ie,be]],[/droid.+; (wt63?0{2,3})\)/i],[Y,[oe,cr],[ie,be]],[/(quest( \d| pro)?)/i],[Y,[oe,In],[ie,be]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[oe,[ie,ve]],[/(aeobc)\b/i],[Y,[oe,we],[ie,ve]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[Y,[ie,ue]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[Y,[ie,ge]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[ie,ge]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[ie,ue]],[/(android[-\w\. ]{0,9});.+buil/i],[Y,[oe,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[se,[ee,ze+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[se,[ee,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[ee,se],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[se,ee]],os:[[/microsoft (windows) (vista|xp)/i],[ee,se],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[ee,[se,Un,Kn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[se,Un,Kn],[ee,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[se,/_/g,"."],[ee,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ee,$n],[se,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[se,ee],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ee,se],[/\(bb(10);/i],[se,[ee,Fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[se,[ee,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[se,[ee,je+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[se,[ee,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[se,[ee,"watchOS"]],[/crkey\/([\d\.]+)/i],[se,[ee,Ge+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[ee,Zn],se],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ee,se],[/(sunos) ?([\w\.\d]*)/i],[[ee,"Solaris"],se],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[ee,se]]},pr=function(yn,kn){if(typeof yn===I&&(kn=yn,yn=A),!(this instanceof pr))return new pr(yn,kn).getResult();var nr=typeof v!==G&&v.navigator?v.navigator:A,dr=yn||(nr&&nr.userAgent?nr.userAgent:w),Qr=nr&&nr.userAgentData?nr.userAgentData:A,Wr=kn?Rn(Qn,kn):Qn,Gr=nr&&nr.userAgent==dr;return this.getBrowser=function(){var Hr={};return Hr[ee]=A,Hr[se]=A,jn.call(Hr,dr,Wr.browser),Hr[H]=Nn(Hr[se]),Gr&&nr&&nr.brave&&typeof nr.brave.isBrave==R&&(Hr[ee]="Brave"),Hr},this.getCPU=function(){var Hr={};return Hr[re]=A,jn.call(Hr,dr,Wr.cpu),Hr},this.getDevice=function(){var Hr={};return Hr[oe]=A,Hr[Y]=A,Hr[ie]=A,jn.call(Hr,dr,Wr.device),Gr&&!Hr[ie]&&Qr&&Qr.mobile&&(Hr[ie]=ue),Gr&&Hr[Y]=="Macintosh"&&nr&&typeof nr.standalone!==G&&nr.maxTouchPoints&&nr.maxTouchPoints>2&&(Hr[Y]="iPad",Hr[ie]=ge),Hr},this.getEngine=function(){var Hr={};return Hr[ee]=A,Hr[se]=A,jn.call(Hr,dr,Wr.engine),Hr},this.getOS=function(){var Hr={};return Hr[ee]=A,Hr[se]=A,jn.call(Hr,dr,Wr.os),Gr&&!Hr[ee]&&Qr&&Qr.platform&&Qr.platform!="Unknown"&&(Hr[ee]=Qr.platform.replace(/chrome os/i,Zn).replace(/macos/i,$n)),Hr},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return dr},this.setUA=function(Hr){return dr=typeof Hr===z&&Hr.length>Me?Xn(Hr,Me):Hr,this},this.setUA(dr),this};pr.VERSION=C,pr.BROWSER=Dn([ee,se,H]),pr.CPU=Dn([re]),pr.DEVICE=Dn([Y,oe,ie,fe,ue,ye,ge,be,ve]),pr.ENGINE=pr.OS=Dn([ee,se]),_.exports&&(d=_.exports=pr),d.UAParser=pr;var fn=typeof v!==G&&(v.jQuery||v.Zepto);if(fn&&!fn.ua){var Mt=new pr;fn.ua=Mt.getResult(),fn.ua.get=function(){return Mt.getUA()},fn.ua.set=function(yn){Mt.setUA(yn);var kn=Mt.getResult();for(var nr in kn)fn.ua[nr]=kn[nr]}}})(typeof window=="object"?window:uaParser)}(uaParser$1,uaParser$1.exports)),uaParser$1.exports}var uaParserExports=requireUaParser();const UAParser=getDefaultExportFromCjs(uaParserExports);var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var _=function(fe){return d(fe)&&!v(fe)};function d(re){return!!re&&typeof re=="object"}function v(re){var fe=Object.prototype.toString.call(re);return fe==="[object RegExp]"||fe==="[object Date]"||w(re)}var A=typeof Symbol=="function"&&Symbol.for,C=A?Symbol.for("react.element"):60103;function w(re){return re.$$typeof===C}function T(re){return Array.isArray(re)?[]:{}}function R(re,fe){return fe.clone!==!1&&fe.isMergeableObject(re)?oe(T(re),re,fe):re}function G(re,fe,ue){return re.concat(fe).map(function(ge){return R(ge,ue)})}function I(re,fe){if(!fe.customMerge)return oe;var ue=fe.customMerge(re);return typeof ue=="function"?ue:oe}function z(re){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(re).filter(function(fe){return Object.propertyIsEnumerable.call(re,fe)}):[]}function H(re){return Object.keys(re).concat(z(re))}function Y(re,fe){try{return fe in re}catch{return!1}}function ee(re,fe){return Y(re,fe)&&!(Object.hasOwnProperty.call(re,fe)&&Object.propertyIsEnumerable.call(re,fe))}function ie(re,fe,ue){var ge={};return ue.isMergeableObject(re)&&H(re).forEach(function(ye){ge[ye]=R(re[ye],ue)}),H(fe).forEach(function(ye){ee(re,ye)||(Y(re,ye)&&ue.isMergeableObject(fe[ye])?ge[ye]=I(ye,ue)(re[ye],fe[ye],ue):ge[ye]=R(fe[ye],ue))}),ge}function oe(re,fe,ue){ue=ue||{},ue.arrayMerge=ue.arrayMerge||G,ue.isMergeableObject=ue.isMergeableObject||_,ue.cloneUnlessOtherwiseSpecified=R;var ge=Array.isArray(fe),ye=Array.isArray(re),be=ge===ye;return be?ge?ue.arrayMerge(re,fe,ue):ie(re,fe,ue):R(fe,ue)}oe.all=function(fe,ue){if(!Array.isArray(fe))throw new Error("first argument should be an array");return fe.reduce(function(ge,ye){return oe(ge,ye,ue)},{})};var se=oe;return cjs=se,cjs}var cjsExports=requireCjs();const deepmerge=getDefaultExportFromCjs(cjsExports);var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var hasRequiredClassnames;function requireClassnames(){return hasRequiredClassnames||(hasRequiredClassnames=1,function(_){(function(){var d={}.hasOwnProperty;function v(){for(var w="",T=0;T<arguments.length;T++){var R=arguments[T];R&&(w=C(w,A(R)))}return w}function A(w){if(typeof w=="string"||typeof w=="number")return w;if(typeof w!="object")return"";if(Array.isArray(w))return v.apply(null,w);if(w.toString!==Object.prototype.toString&&!w.toString.toString().includes("[native code]"))return w.toString();var T="";for(var R in w)d.call(w,R)&&w[R]&&(T=C(T,R));return T}function C(w,T){return T?w?w+" "+T:w+T:w}_.exports?(v.default=v,_.exports=v):window.classNames=v})()}(classnames)),classnames.exports}var classnamesExports=requireClassnames();const cn=getDefaultExportFromCjs(classnamesExports);var __defProp$1=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(_,d,v)=>d in _?__defProp$1(_,d,{enumerable:!0,configurable:!0,writable:!0,value:v}):_[d]=v,__spreadValues$1=(_,d)=>{for(var v in d||(d={}))__hasOwnProp$1.call(d,v)&&__defNormalProp$1(_,v,d[v]);if(__getOwnPropSymbols$1)for(var v of __getOwnPropSymbols$1(d))__propIsEnum$1.call(d,v)&&__defNormalProp$1(_,v,d[v]);return _},__spreadProps=(_,d)=>__defProps(_,__getOwnPropDescs(d)),__publicField=(_,d,v)=>(__defNormalProp$1(_,typeof d!="symbol"?d+"":d,v),v),__async=(_,d,v)=>new Promise((A,C)=>{var w=G=>{try{R(v.next(G))}catch(I){C(I)}},T=G=>{try{R(v.throw(G))}catch(I){C(I)}},R=G=>G.done?A(G.value):Promise.resolve(G.value).then(w,T);R((v=v.apply(_,d)).next())}),_a$1,_b$1,_c,_d,_e,_f,_g,_h;const sharedConfig={};function setHydrateContext(_){sharedConfig.context=_}const equalFn=(_,d)=>_===d,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null},NO_INIT={};var Owner=null;let Transition$1=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot$1(_,d){const v=Listener,A=Owner,C=_.length===0,w=C?UNOWNED:{owned:null,cleanups:null,context:null,owner:d===void 0?A:d},T=C?_:()=>_(()=>untrack(()=>cleanNode(w)));Owner=w,Listener=null;try{return runUpdates(T,!0)}finally{Listener=v,Owner=A}}function createSignal(_,d){d=d?Object.assign({},signalOptions,d):signalOptions;const v={value:_,observers:null,observerSlots:null,comparator:d.equals||void 0},A=C=>(typeof C=="function"&&(C=C(v.value)),writeSignal(v,C));return[readSignal.bind(v),A]}function createComputed(_,d,v){const A=createComputation(_,d,!0,STALE);updateComputation(A)}function createRenderEffect(_,d,v){const A=createComputation(_,d,!1,STALE);updateComputation(A)}function createEffect(_,d,v){runEffects=runUserEffects;const A=createComputation(_,d,!1,STALE);A.user=!0,Effects?Effects.push(A):updateComputation(A)}function createMemo(_,d,v){v=v?Object.assign({},signalOptions,v):signalOptions;const A=createComputation(_,d,!0,0);return A.observers=null,A.observerSlots=null,A.comparator=v.equals||void 0,updateComputation(A),readSignal.bind(A)}function createResource(_,d,v){let A,C,w;arguments.length===1?(A=!0,C=_,w={}):(A=_,C=d,w={});let T=null,R=NO_INIT,G=null,I=!1,z="initialValue"in w,H=typeof A=="function"&&createMemo(A);const Y=new Set,[ee,ie]=(w.storage||createSignal)(w.initialValue),[oe,se]=createSignal(void 0),[re,fe]=createSignal(void 0,{equals:!1}),[ue,ge]=createSignal(z?"ready":"unresolved");if(sharedConfig.context){G=`${sharedConfig.context.id}${sharedConfig.context.count++}`;let we;w.ssrLoadFrom==="initial"?R=w.initialValue:sharedConfig.load&&(we=sharedConfig.load(G))&&(R=we[0])}function ye(we,Be,De,Fe){return T===we&&(T=null,z=!0,(we===R||Be===R)&&w.onHydrated&&queueMicrotask(()=>w.onHydrated(Fe,{value:Be})),R=NO_INIT,be(Be,De)),Be}function be(we,Be){runUpdates(()=>{Be===void 0&&ie(()=>we),ge(Be!==void 0?"errored":"ready"),se(Be);for(const De of Y.keys())De.decrement();Y.clear()},!1)}function ve(){const we=SuspenseContext,Be=ee(),De=oe();if(De!==void 0&&!T)throw De;return Listener&&Listener.user,Be}function Me(we=!0){if(we!==!1&&I)return;I=!1;const Be=H?H():A;if(Be==null||Be===!1){ye(T,untrack(ee));return}const De=R!==NO_INIT?R:untrack(()=>C(Be,{value:ee(),refetching:we}));return typeof De!="object"||!(De&&"then"in De)?(ye(T,De,void 0,Be),De):(T=De,I=!0,queueMicrotask(()=>I=!1),runUpdates(()=>{ge(z?"refreshing":"pending"),fe()},!1),De.then(Fe=>ye(De,Fe,void 0,Be),Fe=>ye(De,void 0,castError(Fe),Be)))}return Object.defineProperties(ve,{state:{get:()=>ue()},error:{get:()=>oe()},loading:{get(){const we=ue();return we==="pending"||we==="refreshing"}},latest:{get(){if(!z)return ve();const we=oe();if(we&&!T)throw we;return ee()}}}),H?createComputed(()=>Me(!1)):Me(!1),[ve,{refetch:Me,mutate:ie}]}function batch$1(_){return runUpdates(_,!1)}function untrack(_){if(Listener===null)return _();const d=Listener;Listener=null;try{return _()}finally{Listener=d}}function on(_,d,v){const A=Array.isArray(_);let C;return w=>{let T;if(A){T=Array(_.length);for(let G=0;G<_.length;G++)T[G]=_[G]()}else T=_();const R=untrack(()=>d(T,C,w));return C=T,R}}function onMount(_){createEffect(()=>untrack(_))}function onCleanup(_){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[_]:Owner.cleanups.push(_)),_}function getListener(){return Listener}function getOwner(){return Owner}function createContext(_,d){const v=Symbol("context");return{id:v,Provider:createProvider(v),defaultValue:_}}function useContext(_){let d;return(d=lookup(Owner,_.id))!==void 0?d:_.defaultValue}function children(_){const d=createMemo(_),v=createMemo(()=>resolveChildren(d()));return v.toArray=()=>{const A=v();return Array.isArray(A)?A:A!=null?[A]:[]},v}let SuspenseContext;function readSignal(){const _=Transition$1;if(this.sources&&(this.state||_))if(this.state===STALE||_)updateComputation(this);else{const d=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=d}if(Listener){const d=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(d)):(Listener.sources=[this],Listener.sourceSlots=[d]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(_,d,v){let A=_.value;return(!_.comparator||!_.comparator(A,d))&&(_.value=d,_.observers&&_.observers.length&&runUpdates(()=>{for(let C=0;C<_.observers.length;C+=1){const w=_.observers[C],T=Transition$1&&Transition$1.running;T&&Transition$1.disposed.has(w),(T&&!w.tState||!T&&!w.state)&&(w.pure?Updates.push(w):Effects.push(w),w.observers&&markDownstream(w)),T||(w.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),d}function updateComputation(_){if(!_.fn)return;cleanNode(_);const d=Owner,v=Listener,A=ExecCount;Listener=Owner=_,runComputation(_,_.value,A),Listener=v,Owner=d}function runComputation(_,d,v){let A;try{A=_.fn(d)}catch(C){_.pure&&(_.state=STALE,_.owned&&_.owned.forEach(cleanNode),_.owned=null),handleError(C)}(!_.updatedAt||_.updatedAt<=v)&&(_.updatedAt!=null&&"observers"in _?writeSignal(_,A):_.value=A,_.updatedAt=v)}function createComputation(_,d,v,A=STALE,C){const w={fn:_,state:A,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:d,owner:Owner,context:null,pure:v};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(w):Owner.owned=[w]),w}function runTop(_){const d=Transition$1;if(_.state===0||d)return;if(_.state===PENDING||d)return lookUpstream(_);if(_.suspense&&untrack(_.suspense.inFallback))return _.suspense.effects.push(_);const v=[_];for(;(_=_.owner)&&(!_.updatedAt||_.updatedAt<ExecCount);)(_.state||d)&&v.push(_);for(let A=v.length-1;A>=0;A--)if(_=v[A],_.state===STALE||d)updateComputation(_);else if(_.state===PENDING||d){const C=Updates;Updates=null,runUpdates(()=>lookUpstream(_,v[0]),!1),Updates=C}}function runUpdates(_,d){if(Updates)return _();let v=!1;d||(Updates=[]),Effects?v=!0:Effects=[],ExecCount++;try{const A=_();return completeUpdates(v),A}catch(A){v||(Effects=null),Updates=null,handleError(A)}}function completeUpdates(_){if(Updates&&(runQueue(Updates),Updates=null),_)return;const d=Effects;Effects=null,d.length&&runUpdates(()=>runEffects(d),!1)}function runQueue(_){for(let d=0;d<_.length;d++)runTop(_[d])}function runUserEffects(_){let d,v=0;for(d=0;d<_.length;d++){const A=_[d];A.user?_[v++]=A:runTop(A)}for(sharedConfig.context&&setHydrateContext(),d=0;d<v;d++)runTop(_[d])}function lookUpstream(_,d){const v=Transition$1;_.state=0;for(let A=0;A<_.sources.length;A+=1){const C=_.sources[A];C.sources&&(C.state===STALE||v?C!==d&&runTop(C):(C.state===PENDING||v)&&lookUpstream(C,d))}}function markDownstream(_){const d=Transition$1;for(let v=0;v<_.observers.length;v+=1){const A=_.observers[v];(!A.state||d)&&(A.state=PENDING,A.pure?Updates.push(A):Effects.push(A),A.observers&&markDownstream(A))}}function cleanNode(_){let d;if(_.sources)for(;_.sources.length;){const v=_.sources.pop(),A=_.sourceSlots.pop(),C=v.observers;if(C&&C.length){const w=C.pop(),T=v.observerSlots.pop();A<C.length&&(w.sourceSlots[T]=A,C[A]=w,v.observerSlots[A]=T)}}if(_.owned){for(d=0;d<_.owned.length;d++)cleanNode(_.owned[d]);_.owned=null}if(_.cleanups){for(d=0;d<_.cleanups.length;d++)_.cleanups[d]();_.cleanups=null}_.state=0,_.context=null}function castError(_){return _ instanceof Error||typeof _=="string"?_:new Error("Unknown error")}function handleError(_){throw _=castError(_),_}function lookup(_,d){return _?_.context&&_.context[d]!==void 0?_.context[d]:lookup(_.owner,d):void 0}function resolveChildren(_){if(typeof _=="function"&&!_.length)return resolveChildren(_());if(Array.isArray(_)){const d=[];for(let v=0;v<_.length;v++){const A=resolveChildren(_[v]);Array.isArray(A)?d.push.apply(d,A):d.push(A)}return d}return _}function createProvider(_,d){return function(A){let C;return createRenderEffect(()=>C=untrack(()=>(Owner.context={[_]:A.value},children(()=>A.children))),void 0),C}}const FALLBACK=Symbol("fallback");function dispose$1(_){for(let d=0;d<_.length;d++)_[d]()}function mapArray(_,d,v={}){let A=[],C=[],w=[],T=0,R=d.length>1?[]:null;return onCleanup(()=>dispose$1(w)),()=>{let G=_()||[],I,z;return G[$TRACK],untrack(()=>{let Y=G.length,ee,ie,oe,se,re,fe,ue,ge,ye;if(Y===0)T!==0&&(dispose$1(w),w=[],A=[],C=[],T=0,R&&(R=[])),v.fallback&&(A=[FALLBACK],C[0]=createRoot$1(be=>(w[0]=be,v.fallback())),T=1);else if(T===0){for(C=new Array(Y),z=0;z<Y;z++)A[z]=G[z],C[z]=createRoot$1(H);T=Y}else{for(oe=new Array(Y),se=new Array(Y),R&&(re=new Array(Y)),fe=0,ue=Math.min(T,Y);fe<ue&&A[fe]===G[fe];fe++);for(ue=T-1,ge=Y-1;ue>=fe&&ge>=fe&&A[ue]===G[ge];ue--,ge--)oe[ge]=C[ue],se[ge]=w[ue],R&&(re[ge]=R[ue]);for(ee=new Map,ie=new Array(ge+1),z=ge;z>=fe;z--)ye=G[z],I=ee.get(ye),ie[z]=I===void 0?-1:I,ee.set(ye,z);for(I=fe;I<=ue;I++)ye=A[I],z=ee.get(ye),z!==void 0&&z!==-1?(oe[z]=C[I],se[z]=w[I],R&&(re[z]=R[I]),z=ie[z],ee.set(ye,z)):w[I]();for(z=fe;z<Y;z++)z in oe?(C[z]=oe[z],w[z]=se[z],R&&(R[z]=re[z],R[z](z))):C[z]=createRoot$1(H);C=C.slice(0,T=Y),A=G.slice(0)}return C});function H(Y){if(w[z]=Y,R){const[ee,ie]=createSignal(z);return R[z]=ie,d(G[z],ee)}return d(G[z])}}}function createComponent(_,d){return untrack(()=>_(d||{}))}function trueFn(){return!0}const propTraps={get(_,d,v){return d===$PROXY?v:_.get(d)},has(_,d){return d===$PROXY?!0:_.has(d)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(_,d){return{configurable:!0,enumerable:!0,get(){return _.get(d)},set:trueFn,deleteProperty:trueFn}},ownKeys(_){return _.keys()}};function resolveSource(_){return(_=typeof _=="function"?_():_)?_:{}}function mergeProps(..._){let d=!1;for(let A=0;A<_.length;A++){const C=_[A];d=d||!!C&&$PROXY in C,_[A]=typeof C=="function"?(d=!0,createMemo(C)):C}if(d)return new Proxy({get(A){for(let C=_.length-1;C>=0;C--){const w=resolveSource(_[C])[A];if(w!==void 0)return w}},has(A){for(let C=_.length-1;C>=0;C--)if(A in resolveSource(_[C]))return!0;return!1},keys(){const A=[];for(let C=0;C<_.length;C++)A.push(...Object.keys(resolveSource(_[C])));return[...new Set(A)]}},propTraps);const v={};for(let A=_.length-1;A>=0;A--)if(_[A]){const C=Object.getOwnPropertyDescriptors(_[A]);for(const w in C)w in v||Object.defineProperty(v,w,{enumerable:!0,get(){for(let T=_.length-1;T>=0;T--){const R=(_[T]||{})[w];if(R!==void 0)return R}}})}return v}function splitProps(_,...d){const v=new Set(d.flat());if($PROXY in _){const C=d.map(w=>new Proxy({get(T){return w.includes(T)?_[T]:void 0},has(T){return w.includes(T)&&T in _},keys(){return w.filter(T=>T in _)}},propTraps));return C.push(new Proxy({get(w){return v.has(w)?void 0:_[w]},has(w){return v.has(w)?!1:w in _},keys(){return Object.keys(_).filter(w=>!v.has(w))}},propTraps)),C}const A=Object.getOwnPropertyDescriptors(_);return d.push(Object.keys(A).filter(C=>!v.has(C))),d.map(C=>{const w={};for(let T=0;T<C.length;T++){const R=C[T];R in _&&Object.defineProperty(w,R,A[R]?A[R]:{get(){return _[R]},set(){return!0},enumerable:!0})}return w})}function For(_){const d="fallback"in _&&{fallback:()=>_.fallback};return createMemo(mapArray(()=>_.each,_.children,d||void 0))}function Show(_){let d=!1;const v=_.keyed,A=createMemo(()=>_.when,void 0,{equals:(C,w)=>d?C===w:!C==!w});return createMemo(()=>{const C=A();if(C){const w=_.children,T=typeof w=="function"&&w.length>0;return d=v||T,T?untrack(()=>w(C)):w}return _.fallback},void 0,void 0)}function Switch(_){let d=!1,v=!1;const A=(T,R)=>T[0]===R[0]&&(d?T[1]===R[1]:!T[1]==!R[1])&&T[2]===R[2],C=children(()=>_.children),w=createMemo(()=>{let T=C();Array.isArray(T)||(T=[T]);for(let R=0;R<T.length;R++){const G=T[R].when;if(G)return v=!!T[R].keyed,[R,G,T[R]]}return[-1]},void 0,{equals:A});return createMemo(()=>{const[T,R,G]=w();if(T<0)return _.fallback;const I=G.children,z=typeof I=="function"&&I.length>0;return d=v||z,z?untrack(()=>I(R)):I},void 0,void 0)}function Match(_){return _}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGElements=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(_,d,v){let A=v.length,C=d.length,w=A,T=0,R=0,G=d[C-1].nextSibling,I=null;for(;T<C||R<w;){if(d[T]===v[R]){T++,R++;continue}for(;d[C-1]===v[w-1];)C--,w--;if(C===T){const z=w<A?R?v[R-1].nextSibling:v[w-R]:G;for(;R<w;)_.insertBefore(v[R++],z)}else if(w===R)for(;T<C;)(!I||!I.has(d[T]))&&d[T].remove(),T++;else if(d[T]===v[w-1]&&v[R]===d[C-1]){const z=d[--C].nextSibling;_.insertBefore(v[R++],d[T++].nextSibling),_.insertBefore(v[--w],z),d[C]=v[w]}else{if(!I){I=new Map;let H=R;for(;H<w;)I.set(v[H],H++)}const z=I.get(d[T]);if(z!=null)if(R<z&&z<w){let H=T,Y=1,ee;for(;++H<C&&H<w&&!((ee=I.get(d[H]))==null||ee!==z+Y);)Y++;if(Y>z-R){const ie=d[T];for(;R<z;)_.insertBefore(v[R++],ie)}else _.replaceChild(v[R++],d[T++])}else T++;else d[T++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(_,d,v,A={}){let C;return createRoot$1(w=>{C=w,d===document?_():insert(d,_(),d.firstChild?null:void 0,v)},A.owner),()=>{C(),d.textContent=""}}function template$1(_,d,v){if(typeof window>"u")return null;const A=document.createElement("template");A.innerHTML=_;let C=A.content.firstChild;return v&&(C=C.firstChild),C}function delegateEvents(_,d=window.document){const v=d[$$EVENTS]||(d[$$EVENTS]=new Set);for(let A=0,C=_.length;A<C;A++){const w=_[A];v.has(w)||(v.add(w),d.addEventListener(w,eventHandler))}}function setAttribute(_,d,v){v==null?_.removeAttribute(d):_.setAttribute(d,v)}function setAttributeNS(_,d,v,A){A==null?_.removeAttributeNS(d,v):_.setAttributeNS(d,v,A)}function className(_,d){d==null?_.removeAttribute("class"):_.className=d}function addEventListener(_,d,v,A){if(A)Array.isArray(v)?(_[`$$${d}`]=v[0],_[`$$${d}Data`]=v[1]):_[`$$${d}`]=v;else if(Array.isArray(v)){const C=v[0];_.addEventListener(d,v[0]=w=>C.call(_,v[1],w))}else _.addEventListener(d,v)}function classList(_,d,v={}){const A=Object.keys(d||{}),C=Object.keys(v);let w,T;for(w=0,T=C.length;w<T;w++){const R=C[w];!R||R==="undefined"||d[R]||(toggleClassKey(_,R,!1),delete v[R])}for(w=0,T=A.length;w<T;w++){const R=A[w],G=!!d[R];!R||R==="undefined"||v[R]===G||!G||(toggleClassKey(_,R,!0),v[R]=G)}return v}function style$1(_,d,v){if(!d)return v?setAttribute(_,"style"):d;const A=_.style;if(typeof d=="string")return A.cssText=d;typeof v=="string"&&(A.cssText=v=void 0),v||(v={}),d||(d={});let C,w;for(w in v)d[w]==null&&A.removeProperty(w),delete v[w];for(w in d)C=d[w],C!==v[w]&&(A.setProperty(w,C),v[w]=C);return v}function spread(_,d={},v,A){const C={};return createRenderEffect(()=>C.children=insertExpression(_,d.children,C.children)),createRenderEffect(()=>d.ref&&d.ref(_)),createRenderEffect(()=>assign(_,d,v,!0,C,!0)),C}function use(_,d,v){return untrack(()=>_(d,v))}function insert(_,d,v,A){if(v!==void 0&&!A&&(A=[]),typeof d!="function")return insertExpression(_,d,A,v);createRenderEffect(C=>insertExpression(_,d(),C,v),A)}function assign(_,d,v,A,C={},w=!1){d||(d={});for(const T in C)if(!(T in d)){if(T==="children")continue;C[T]=assignProp(_,T,null,C[T],v,w)}for(const T in d){if(T==="children")continue;const R=d[T];C[T]=assignProp(_,T,R,C[T],v,w)}}function getNextElement(_){let d,v;return!sharedConfig.context||!(d=sharedConfig.registry.get(v=getHydrationKey()))?_.cloneNode(!0):(sharedConfig.completed&&sharedConfig.completed.add(d),sharedConfig.registry.delete(v),d)}function toPropertyName(_){return _.toLowerCase().replace(/-([a-z])/g,(d,v)=>v.toUpperCase())}function toggleClassKey(_,d,v){const A=d.trim().split(/\s+/);for(let C=0,w=A.length;C<w;C++)_.classList.toggle(A[C],v)}function assignProp(_,d,v,A,C,w){let T,R,G;if(d==="style")return style$1(_,v,A);if(d==="classList")return classList(_,v,A);if(v===A)return A;if(d==="ref")w||v(_);else if(d.slice(0,3)==="on:"){const I=d.slice(3);A&&_.removeEventListener(I,A),v&&_.addEventListener(I,v)}else if(d.slice(0,10)==="oncapture:"){const I=d.slice(10);A&&_.removeEventListener(I,A,!0),v&&_.addEventListener(I,v,!0)}else if(d.slice(0,2)==="on"){const I=d.slice(2).toLowerCase(),z=DelegatedEvents.has(I);if(!z&&A){const H=Array.isArray(A)?A[0]:A;_.removeEventListener(I,H)}(z||v)&&(addEventListener(_,I,v,z),z&&delegateEvents([I]))}else if((G=ChildProperties.has(d))||!C&&(PropAliases[d]||(R=Properties.has(d)))||(T=_.nodeName.includes("-")))d==="class"||d==="className"?className(_,v):T&&!R&&!G?_[toPropertyName(d)]=v:_[PropAliases[d]||d]=v;else{const I=C&&d.indexOf(":")>-1&&SVGNamespace[d.split(":")[0]];I?setAttributeNS(_,I,d,v):setAttribute(_,Aliases[d]||d,v)}return v}function eventHandler(_){const d=`$$${_.type}`;let v=_.composedPath&&_.composedPath()[0]||_.target;for(_.target!==v&&Object.defineProperty(_,"target",{configurable:!0,value:v}),Object.defineProperty(_,"currentTarget",{configurable:!0,get(){return v||document}}),sharedConfig.registry&&!sharedConfig.done&&(sharedConfig.done=!0,document.querySelectorAll("[id^=pl-]").forEach(A=>{for(;A&&A.nodeType!==8&&A.nodeValue!=="pl-"+_;){let C=A.nextSibling;A.remove(),A=C}A&&A.remove()}));v;){const A=v[d];if(A&&!v.disabled){const C=v[`${d}Data`];if(C!==void 0?A.call(v,C,_):A.call(v,_),_.cancelBubble)return}v=v._$host||v.parentNode||v.host}}function insertExpression(_,d,v,A,C){for(sharedConfig.context&&!v&&(v=[..._.childNodes]);typeof v=="function";)v=v();if(d===v)return v;const w=typeof d,T=A!==void 0;if(_=T&&v[0]&&v[0].parentNode||_,w==="string"||w==="number"){if(sharedConfig.context)return v;if(w==="number"&&(d=d.toString()),T){let R=v[0];R&&R.nodeType===3?R.data=d:R=document.createTextNode(d),v=cleanChildren(_,v,A,R)}else v!==""&&typeof v=="string"?v=_.firstChild.data=d:v=_.textContent=d}else if(d==null||w==="boolean"){if(sharedConfig.context)return v;v=cleanChildren(_,v,A)}else{if(w==="function")return createRenderEffect(()=>{let R=d();for(;typeof R=="function";)R=R();v=insertExpression(_,R,v,A)}),()=>v;if(Array.isArray(d)){const R=[],G=v&&Array.isArray(v);if(normalizeIncomingArray(R,d,v,C))return createRenderEffect(()=>v=insertExpression(_,R,v,A,!0)),()=>v;if(sharedConfig.context){if(!R.length)return v;for(let I=0;I<R.length;I++)if(R[I].parentNode)return v=R}if(R.length===0){if(v=cleanChildren(_,v,A),T)return v}else G?v.length===0?appendNodes(_,R,A):reconcileArrays(_,v,R):(v&&cleanChildren(_),appendNodes(_,R));v=R}else if(d instanceof Node){if(sharedConfig.context&&d.parentNode)return v=T?[d]:d;if(Array.isArray(v)){if(T)return v=cleanChildren(_,v,A,d);cleanChildren(_,v,null,d)}else v==null||v===""||!_.firstChild?_.appendChild(d):_.replaceChild(d,_.firstChild);v=d}}return v}function normalizeIncomingArray(_,d,v,A){let C=!1;for(let w=0,T=d.length;w<T;w++){let R=d[w],G=v&&v[w];if(R instanceof Node)_.push(R);else if(!(R==null||R===!0||R===!1))if(Array.isArray(R))C=normalizeIncomingArray(_,R,G)||C;else if(typeof R=="function")if(A){for(;typeof R=="function";)R=R();C=normalizeIncomingArray(_,Array.isArray(R)?R:[R],Array.isArray(G)?G:[G])||C}else _.push(R),C=!0;else{const I=String(R);G&&G.nodeType===3&&G.data===I?_.push(G):_.push(document.createTextNode(I))}}return C}function appendNodes(_,d,v=null){for(let A=0,C=d.length;A<C;A++)_.insertBefore(d[A],v)}function cleanChildren(_,d,v,A){if(v===void 0)return _.textContent="";const C=A||document.createTextNode("");if(d.length){let w=!1;for(let T=d.length-1;T>=0;T--){const R=d[T];if(C!==R){const G=R.parentNode===_;!w&&!T?G?_.replaceChild(C,R):_.insertBefore(C,v):G&&R.remove()}else w=!0}}else _.insertBefore(C,v);return[C]}function getHydrationKey(){const _=sharedConfig.context;return`${_.id}${_.count++}`}const SVG_NAMESPACE="http://www.w3.org/2000/svg";function createElement$1(_,d=!1){return d?document.createElementNS(SVG_NAMESPACE,_):document.createElement(_)}function Portal$1(_){const{useShadow:d}=_,v=document.createTextNode(""),A=_.mount||document.body;function C(){if(sharedConfig.context){const[w,T]=createSignal(!1);return queueMicrotask(()=>T(!0)),()=>w()&&_.children}else return()=>_.children}if(A instanceof HTMLHeadElement){const[w,T]=createSignal(!1),R=()=>T(!0);createRoot$1(G=>insert(A,()=>w()?G():C()(),null)),onCleanup(()=>{sharedConfig.context?queueMicrotask(R):R()})}else{const w=createElement$1(_.isSVG?"g":"div",_.isSVG),T=d&&w.attachShadow?w.attachShadow({mode:"open"}):w;Object.defineProperty(w,"_$host",{get(){return v.parentNode},configurable:!0}),insert(T,C()),A.appendChild(w),_.ref&&_.ref(w),onCleanup(()=>A.removeChild(w))}return v}function Dynamic(_){const[d,v]=splitProps(_,["component"]),A=createMemo(()=>d.component);return createMemo(()=>{const C=A();switch(typeof C){case"function":return untrack(()=>C(v));case"string":const w=SVGElements.has(C),T=sharedConfig.context?getNextElement():createElement$1(C,w);return spread(T,v,w),T}})}var THEME=(_=>(_.DARK="DARK",_.LIGHT="LIGHT",_))(THEME||{});let e={data:""},t=_=>typeof window=="object"?((_?_.querySelector("#_goober"):window._goober)||Object.assign((_||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:_||e,l$1=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a$1=/\/\*[^]*?\*\/|  +/g,n=/\n+/g,o=(_,d)=>{let v="",A="",C="";for(let w in _){let T=_[w];w[0]=="@"?w[1]=="i"?v=w+" "+T+";":A+=w[1]=="f"?o(T,w):w+"{"+o(T,w[1]=="k"?"":d)+"}":typeof T=="object"?A+=o(T,d?d.replace(/([^,])+/g,R=>w.replace(/(^:.*)|([^,])+/g,G=>/&/.test(G)?G.replace(/&/g,R):R?R+" "+G:G)):w):T!=null&&(w=/^--/.test(w)?w:w.replace(/[A-Z]/g,"-$&").toLowerCase(),C+=o.p?o.p(w,T):w+":"+T+";")}return v+(d&&C?d+"{"+C+"}":C)+A},c$1={},s=_=>{if(typeof _=="object"){let d="";for(let v in _)d+=v+s(_[v]);return d}return _},i$4=(_,d,v,A,C)=>{let w=s(_),T=c$1[w]||(c$1[w]=(G=>{let I=0,z=11;for(;I<G.length;)z=101*z+G.charCodeAt(I++)>>>0;return"go"+z})(w));if(!c$1[T]){let G=w!==_?_:(I=>{let z,H,Y=[{}];for(;z=l$1.exec(I.replace(a$1,""));)z[4]?Y.shift():z[3]?(H=z[3].replace(n," ").trim(),Y.unshift(Y[0][H]=Y[0][H]||{})):Y[0][z[1]]=z[2].replace(n," ").trim();return Y[0]})(_);c$1[T]=o(C?{["@keyframes "+T]:G}:G,v?"":"."+T)}let R=v&&c$1.g?c$1.g:null;return v&&(c$1.g=c$1[T]),((G,I,z,H)=>{H?I.data=I.data.replace(H,G):I.data.indexOf(G)===-1&&(I.data=z?G+I.data:I.data+G)})(c$1[T],d,A,R),T},p$2=(_,d,v)=>_.reduce((A,C,w)=>{let T=d[w];if(T&&T.call){let R=T(v),G=R&&R.props&&R.props.className||/^go/.test(R)&&R;T=G?"."+G:R&&typeof R=="object"?R.props?"":o(R,""):R===!1?"":R}return A+C+(T??"")},"");function u(_){let d=this||{},v=_.call?_(d.p):_;return i$4(v.unshift?v.raw?p$2(v,[].slice.call(arguments,1),d.p):v.reduce((A,C)=>Object.assign(A,C&&C.call?C(d.p):C),{}):v,t(d.target),d.g,d.o,d.k)}u.bind({g:1});let h$2=u.bind({k:1});const ThemeContext=createContext();function ThemeProvider(_){return createComponent(ThemeContext.Provider,{value:_.theme,get children(){return _.children}})}function useTheme(){return useContext(ThemeContext)}function makeStyled(_){let d=this||{};return(...v)=>{const A=C=>{const w=useContext(ThemeContext),T=mergeProps(C,{theme:w}),R=mergeProps(T,{get class(){const ee=T.class,ie="class"in T&&/^go[0-9]+/.test(ee);let oe=u.apply({target:d.target,o:ie,p:T,g:d.g},v);return[ee,oe].filter(Boolean).join(" ")}}),[G,I]=splitProps(R,["as","theme"]),z=I,H=G.as||_;let Y;return typeof H=="function"?Y=H(z):d.g==1?(Y=document.createElement(H),spread(Y,z)):Y=Dynamic(mergeProps({component:H},z)),Y};return A.class=C=>untrack(()=>u.apply({target:d.target,p:C,g:d.g},v)),A}}const styled=new Proxy(makeStyled,{get(_,d){return _(d)}});function createGlobalStyles(){const _=makeStyled.call({g:1},"div").apply(null,arguments);return function(v){return _(v),null}}const globalStylesTag="tc-root",disableScrollClass="tc-disable-scroll",usingMouseClass="tc-using-mouse",GlobalStyles=()=>{document.body.addEventListener("mousedown",()=>document.body.classList.add(usingMouseClass)),document.body.addEventListener("keydown",d=>{d.key==="Tab"&&document.body.classList.remove(usingMouseClass)});const _=createGlobalStyles`
    ${globalStylesTag} * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        
        font-family: -apple-system, BlinkMacSystemFont, 'Roboto', 'Helvetica Neue', Arial, Tahoma, Verdana, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;        
        -webkit-tap-highlight-color: transparent;
    }
    
    ${globalStylesTag} img {
      -webkit-user-select: none;
      -webkit-touch-callout: none;
    }   
 
    ${globalStylesTag} *:focus {
        outline: #08f auto 2px;
    }
    
    ${globalStylesTag} li {
        list-style: none;
    }
    
    ${globalStylesTag} button {
        outline: none;
    }
    
    body.${disableScrollClass} {
        position: fixed; 
        overflow-y: scroll;
        right: 0;
        left: 0;
    }
    
    body.${usingMouseClass} ${globalStylesTag} *:focus {
        outline: none;
    }
`;return createComponent(_,{})};function hexToRgb(_){_[0]==="#"&&(_=_.slice(1));const d=parseInt(_,16),v=d>>16&255,A=d>>8&255,C=d&255;return[v,A,C].join(",")}function rgba(_,d){return _[0]==="#"&&(_=hexToRgb(_)),`rgba(${_}, ${d})`}function toPx(_){return _.toString()+"px"}const _InMemoryStorage=class{constructor(){__publicField(this,"storage",{})}static getInstance(){return _InMemoryStorage.instance||(_InMemoryStorage.instance=new _InMemoryStorage),_InMemoryStorage.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(_){var d;return(d=this.storage[_])!=null?d:null}key(_){var d;const v=Object.keys(this.storage);return _<0||_>=v.length?null:(d=v[_])!=null?d:null}removeItem(_){delete this.storage[_]}setItem(_,d){this.storage[_]=d}};let InMemoryStorage=_InMemoryStorage;__publicField(InMemoryStorage,"instance");class TonConnectUIError extends TonConnectError{constructor(...d){super(...d),Object.setPrototypeOf(this,TonConnectUIError.prototype)}}function logDebug(..._){try{console.debug("[TON_CONNECT_UI]",..._)}catch{}}function logError(..._){try{console.error("[TON_CONNECT_UI]",..._)}catch{}}function logWarning(..._){try{console.warn("[TON_CONNECT_UI]",..._)}catch{}}function openLink(_,d="_self"){logDebug("openLink",_,d),window.open(_,d,"noopener noreferrer")}function openLinkBlank(_){openLink(_,"_blank")}function openDeeplinkWithFallback(_,d){const v=()=>{isBrowser$2("safari")||isOS("android")&&isBrowser$2("firefox")||d()},A=setTimeout(()=>v(),200);window.addEventListener("blur",()=>clearTimeout(A),{once:!0}),openLink(_,"_self")}function getSystemTheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?THEME.LIGHT:THEME.DARK}function subscribeToThemeChange(_){const d=v=>_(v.matches?THEME.DARK:THEME.LIGHT);return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d),()=>window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",d)}function disableScroll(){document.documentElement.scrollHeight!==document.documentElement.clientHeight&&(document.body.style.top=toPx(-document.documentElement.scrollTop),document.body.classList.add(disableScrollClass))}function enableScroll(){document.body.classList.remove(disableScrollClass),document.documentElement.scrollTo({top:-parseFloat(getComputedStyle(document.body).top)}),document.body.style.top="auto"}function fixMobileSafariActiveTransition(){document.body.hasAttribute("ontouchstart")||document.body.setAttribute("ontouchstart","")}function defineStylesRoot(){customElements.define(globalStylesTag,class extends HTMLElement{})}function createMacrotask(_){return __async(this,null,function*(){yield new Promise(d=>requestAnimationFrame(d)),_()})}function createMacrotaskAsync(_){return __async(this,null,function*(){return yield new Promise(d=>requestAnimationFrame(d)),_()})}function preloadImages(_){document.readyState!=="complete"?window.addEventListener("load",()=>createMacrotask(()=>preloadImages(_)),{once:!0}):_.forEach(d=>{const v=new window.Image;v.src=d})}function getWindow$1(){if(typeof window<"u")return window}function tryGetLocalStorage(){if(isLocalStorageAvailable())return localStorage;if(isNodeJs())throw new TonConnectUIError("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return InMemoryStorage.getInstance()}function isLocalStorageAvailable(){try{return typeof localStorage<"u"}catch{return!1}}function isNodeJs(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}function getUserAgent(){var _,d,v;const A=new UAParser().getResult(),C=(_=A.os.name)==null?void 0:_.toLowerCase(),w=(d=A.device.model)==null?void 0:d.toLowerCase();let T;switch(!0){case w==="ipad":T="ipad";break;case C==="ios":T="ios";break;case C==="android":T="android";break;case C==="mac os":T="macos";break;case C==="linux":T="linux";break;case C?.includes("windows"):T="windows";break}const R=(v=A.browser.name)==null?void 0:v.toLowerCase();let G;switch(!0){case R==="chrome":G="chrome";break;case R==="firefox":G="firefox";break;case R?.includes("safari"):G="safari";break;case R?.includes("opera"):G="opera";break}return{os:T,browser:G}}function isOS(..._){return _.includes(getUserAgent().os)}function isBrowser$2(..._){return _.includes(getUserAgent().browser)}function toDeeplink(_,d){const v=new URL(_);return d+v.search}class WalletInfoStorage{constructor(){__publicField(this,"localStorage"),__publicField(this,"storageKey","ton-connect-ui_wallet-info"),this.localStorage=tryGetLocalStorage()}setWalletInfo(d){this.localStorage.setItem(this.storageKey,JSON.stringify(d))}getWalletInfo(){const d=this.localStorage.getItem(this.storageKey);return d?JSON.parse(d):null}removeWalletInfo(){this.localStorage.removeItem(this.storageKey)}}class PreferredWalletStorage{constructor(){__publicField(this,"localStorage"),__publicField(this,"storageKey","ton-connect-ui_preferred-wallet"),this.localStorage=tryGetLocalStorage()}setPreferredWalletAppName(d){this.localStorage.setItem(this.storageKey,d)}getPreferredWalletAppName(){return this.localStorage.getItem(this.storageKey)||void 0}}class LastSelectedWalletInfoStorage{constructor(){__publicField(this,"localStorage"),__publicField(this,"storageKey","ton-connect-ui_last-selected-wallet-info"),this.localStorage=tryGetLocalStorage()}setLastSelectedWalletInfo(d){this.localStorage.setItem(this.storageKey,JSON.stringify(d))}getLastSelectedWalletInfo(){const d=this.localStorage.getItem(this.storageKey);return d?JSON.parse(d):null}removeLastSelectedWalletInfo(){this.localStorage.removeItem(this.storageKey)}}const[walletsModalState,setWalletsModalState]=createSignal({status:"closed",closeReason:null}),getWalletsModalIsOpened=createMemo(()=>walletsModalState().status==="opened"),[singleWalletModalState,setSingleWalletModalState]=createSignal({status:"closed",closeReason:null}),getSingleWalletModalIsOpened=createMemo(()=>singleWalletModalState().status==="opened"),getSingleWalletModalWalletInfo=createMemo(()=>{const _=singleWalletModalState();return _.status==="opened"?_.walletInfo:null});let lastSelectedWalletInfoStorage=typeof window<"u"?new LastSelectedWalletInfoStorage:void 0;const[lastSelectedWalletInfo,_setLastSelectedWalletInfo]=createSignal(lastSelectedWalletInfoStorage?.getLastSelectedWalletInfo()||null),setLastSelectedWalletInfo=_=>{lastSelectedWalletInfoStorage||(lastSelectedWalletInfoStorage=new LastSelectedWalletInfoStorage),_?lastSelectedWalletInfoStorage.setLastSelectedWalletInfo(_):lastSelectedWalletInfoStorage.removeLastSelectedWalletInfo(),_setLastSelectedWalletInfo(_)},[action$1,setAction]=createSignal(null),common$1={close:"Close",openWallet:"Open wallet",copyLink:"Copy Link",linkCopied:"Link Copied",copied:"Copied",yourWallet:"Your Wallet",retry:"Retry",get:"GET",mobile:"Mobile",browserExtension:"Browser Extension",desktop:"Desktop"},button$1={connectWallet:"Connect Wallet",dropdown:{copy:"Copy address",copied:"Address copied!",disconnect:"Disconnect"}},notifications$1={confirm:{header:"Open {{ name }} to confirm the transaction."},transactionSent:{header:"Transaction sent",text:"Your transaction will be processed in a few seconds."},transactionCanceled:{header:"Transaction canceled",text:"There will be no changes to your account."},dataSigned:{header:"Data signed"},signDataCanceled:{header:"Sign data canceled"}},walletItem$1={walletOn:"Wallet in",recent:"Recent",installed:"Installed",popular:"Popular"},walletModal$1={loading:"Loading wallets",wallets:"Wallets",mobileUniversalModal:{connectYourWallet:"Connect your TON wallet",openWalletOnTelegramOrSelect:"Use Wallet in Telegram or choose other application",openWalletOnTelegram:"Connect Wallet in Telegram",chooseOtherApplication:"Choose other application",openLink:"Open Link",scan:"Scan with your mobile wallet"},desktopUniversalModal:{connectYourWallet:"Connect your TON wallet",scan:"Scan with your mobile wallet",availableWallets:"Available wallets"},mobileConnectionModal:{showQR:"Show QR Code",scanQR:"Scan the QR code below with your phones or {{ name }}s camera",missingFeatures:"Please update {{ name }}, your version does not support required features for this dApp",notSupportedWallet:"{{ name }} doesnt support the requested action. Please connect another wallet that supports it",continueIn:"Continue in {{ name }}",updateWallet:"Update {{ name }}",chooseAnotherWallet:"Choose Another Wallet",connectionDeclined:"Connection declined"},desktopConnectionModal:{scanQR:"Scan the QR code below with your phones or {{ name }}s camera",continueInExtension:"Continue in {{ name }} browser extension",dontHaveExtension:"Seems you don't have installed {{ name }} browser extension",missingFeatures:"Please update {{ name }}, your version does not support required features for this dApp",notSupportedWallet:"{{ name }} doesnt support the requested action. Please connect another wallet that supports it",getWallet:"Get {{ name }}",updateWallet:"Update {{ name }}",chooseAnotherWallet:"Choose Another Wallet",continueOnDesktop:"Continue in {{ name }} on desktop",openWalletOnTelegram:"Connect Wallet in Telegram on desktop",connectionDeclined:"Connection declined"},infoModal:{whatIsAWallet:"What is a wallet",secureDigitalAssets:"Secure digital assets storage",walletProtects:"A wallet protects and manages your digital assets including TON, tokens and collectables.",controlIdentity:"Control your Web3 identity",manageIdentity:"Manage your digital identity and access decentralized applications with ease. Maintain control over your data and engage securely in the blockchain ecosystem.",effortlessCryptoTransactions:"Effortless crypto transactions",easilySend:"Easily send, receive, monitor your cryptocurrencies. Streamline your operations with decentralized applications.",getAWallet:"Get a Wallet"},restoreModal:{title:"Restore",step1:{title:"Find your current recovery phrase",text:"Open your wallet settings and locate the recovery phrase"},step2:{title:"Copy your recovery phrase",text:"Write it down or copy it to a safe place"},step3:{title:"Restore in a supported wallet",text:"Enter the recovery phrase to access your wallet"}},allWallets:{walletsBelowNotSupported:"The wallets below dont support all features of the connected service. You can use your recovery phrase in one of the supported wallets above.",walletNotSupportService:"{{ name }} doesnt support connected service"},featureNotSupported:{wallet:{title:"{{ name }} doesnt support the requested action",description:"Install a supported wallet from the list below, restore it with your recovery phrase, then connect it and try again.",info:"Learn how to restore your wallet"},version:{description:"Your current version of {{ name }} or wallet contract type doesn't support the required features. Please update it to continue.",updateButton:"Update {{ name }}",aboutW5:"About W5"},disconnect:{title:"Confirm Disconnect",description:"You will be disconnected from your current wallet and redirected to connect {{ name }}.",button:"Disconnect"}}},actionModal$1={confirmTransaction:{header:"Confirm the transaction in {{ name }}",text:"It will only take a moment."},signData:{header:"Sign the data in {{ name }}",text:"It will only take a moment."},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled",dataSigned:"$notifications.dataSigned",signDataCanceled:"$notifications.signDataCanceled"},en={common:common$1,button:button$1,notifications:notifications$1,walletItem:walletItem$1,walletModal:walletModal$1,actionModal:actionModal$1},common$2={close:"",openWallet:" ",copyLink:"",linkCopied:" ",copied:"",yourWallet:" ",retry:"",get:"",mobile:"",browserExtension:"",desktop:""},button={connectWallet:" ",dropdown:{copy:" ",copied:" !",disconnect:" "}},notifications={confirm:{header:" {{ name }},   ."},transactionSent:{header:" ",text:"      ."},transactionCanceled:{header:" ",text:"    ."},dataSigned:{header:" "},signDataCanceled:{header:"  "}},walletItem={walletOn:"Wallet ",recent:"",installed:"",popular:""},walletModal={loading:" ",wallets:"",mobileUniversalModal:{connectYourWallet:" TON ",openWalletOnTelegramOrSelect:" Wallet  Telegram    ",openWalletOnTelegram:" Wallet  Telegram",chooseOtherApplication:"  ",openLink:"",scan:"   "},desktopUniversalModal:{connectYourWallet:" TON ",scan:" QR-   ",availableWallets:" "},mobileConnectionModal:{showQR:" QR-",scanQR:" QR-     {{ name }},   ",missingFeatures:" {{ name }},         dApp",notSupportedWallet:"{{ name }}    . ,   ,   ",continueIn:"  {{ name }}",updateWallet:" {{ name }}",chooseAnotherWallet:"  ",connectionDeclined:" "},desktopConnectionModal:{scanQR:" QR-     {{ name }},   ",continueInExtension:"   {{ name }}",dontHaveExtension:",       {{ name }}",missingFeatures:" {{ name }},         dApp",notSupportedWallet:"{{ name }}    . ,   ,   ",getWallet:" {{ name }}",updateWallet:" {{ name }}",chooseAnotherWallet:"  ",continueOnDesktop:" {{ name }}  ",openWalletOnTelegram:" Wallet  Telegram",connectionDeclined:" "},infoModal:{whatIsAWallet:"  ?",secureDigitalAssets:"   ",walletProtects:"    ,  TON,    ,   .",controlIdentity:"   Web3",manageIdentity:"           .           .",effortlessCryptoTransactions:" ",easilySend:" ,     .       .",getAWallet:" "},restoreModal:{title:"",step1:{title:"    ",text:"      "},step2:{title:"   ",text:"      "},step3:{title:"   ",text:"       "}},allWallets:{walletsBelowNotSupported:"       .            .",walletNotSupportService:"{{ name }}    "},featureNotSupported:{wallet:{title:"{{ name }}    ",description:"     ,      ,     .",info:",   "},version:{description:"  {{ name }}        .  ,  .",updateButton:" {{ name }}",aboutW5:" W5"},disconnect:{title:" ",description:"          {{ name }}.",button:""}}},actionModal={confirmTransaction:{header:"   {{ name }}",text:"   ."},signData:{header:"   {{ name }}",text:"   ."},transactionSent:"$notifications.transactionSent",transactionCanceled:"$notifications.transactionCanceled",dataSigned:"$notifications.dataSigned",signDataCanceled:"$notifications.signDataCanceled"},ru={common:common$2,button,notifications,walletItem,walletModal,actionModal},i18nDictionary={en:parseDictionary(en),ru:parseDictionary(ru)};function parseDictionary(_){const d="$",v=A=>{Object.entries(A).forEach(([C,w])=>{if(typeof w=="object"&&w)return v(w);if(typeof w=="string"){if(w[0]===d){const T=w.slice(1).split(".");let R=_;T.forEach(G=>{if(G in R)R=R[G];else throw new Error(`Cannot parse translations: there is no property ${G} in translation`)}),A[C]=R}w.slice(0,2)===`\\${d}`&&(A[C]=w.slice(1))}})};return v(_),_}const ConnectorContext=createContext(),$RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$NAME=Symbol("store-name");function wrap$1(_,d){let v=_[$PROXY];if(!v&&(Object.defineProperty(_,$PROXY,{value:v=new Proxy(_,proxyTraps$1)}),!Array.isArray(_))){const A=Object.keys(_),C=Object.getOwnPropertyDescriptors(_);for(let w=0,T=A.length;w<T;w++){const R=A[w];C[R].get&&Object.defineProperty(_,R,{enumerable:C[R].enumerable,get:C[R].get.bind(v)})}}return v}function isWrappable(_){let d;return _!=null&&typeof _=="object"&&(_[$PROXY]||!(d=Object.getPrototypeOf(_))||d===Object.prototype||Array.isArray(_))}function unwrap(_,d=new Set){let v,A,C,w;if(v=_!=null&&_[$RAW])return v;if(!isWrappable(_)||d.has(_))return _;if(Array.isArray(_)){Object.isFrozen(_)?_=_.slice(0):d.add(_);for(let T=0,R=_.length;T<R;T++)C=_[T],(A=unwrap(C,d))!==C&&(_[T]=A)}else{Object.isFrozen(_)?_=Object.assign({},_):d.add(_);const T=Object.keys(_),R=Object.getOwnPropertyDescriptors(_);for(let G=0,I=T.length;G<I;G++)w=T[G],!R[w].get&&(C=_[w],(A=unwrap(C,d))!==C&&(_[w]=A))}return _}function getDataNodes(_){let d=_[$NODE];return d||Object.defineProperty(_,$NODE,{value:d={}}),d}function getDataNode(_,d,v){return _[d]||(_[d]=createDataNode(v))}function proxyDescriptor$1(_,d){const v=Reflect.getOwnPropertyDescriptor(_,d);return!v||v.get||!v.configurable||d===$PROXY||d===$NODE||d===$NAME||(delete v.value,delete v.writable,v.get=()=>_[$PROXY][d]),v}function trackSelf(_){if(getListener()){const d=getDataNodes(_);(d._||(d._=createDataNode()))()}}function ownKeys$1(_){return trackSelf(_),Reflect.ownKeys(_)}function createDataNode(_){const[d,v]=createSignal(_,{equals:!1,internal:!0});return d.$=v,d}const proxyTraps$1={get(_,d,v){if(d===$RAW)return _;if(d===$PROXY)return v;if(d===$TRACK)return trackSelf(_),v;const A=getDataNodes(_),C=A.hasOwnProperty(d);let w=C?A[d]():_[d];if(d===$NODE||d==="__proto__")return w;if(!C){const T=Object.getOwnPropertyDescriptor(_,d);getListener()&&(typeof w!="function"||_.hasOwnProperty(d))&&!(T&&T.get)&&(w=getDataNode(A,d,w)())}return isWrappable(w)?wrap$1(w):w},has(_,d){return d===$RAW||d===$PROXY||d===$TRACK||d===$NODE||d==="__proto__"?!0:(this.get(_,d,_),d in _)},set(){return!0},deleteProperty(){return!0},ownKeys:ownKeys$1,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(_,d,v,A=!1){if(!A&&_[d]===v)return;const C=_[d],w=_.length;v===void 0?delete _[d]:_[d]=v;let T=getDataNodes(_),R;(R=getDataNode(T,d,C))&&R.$(()=>v),Array.isArray(_)&&_.length!==w&&(R=getDataNode(T,"length",w))&&R.$(_.length),(R=T._)&&R.$()}function mergeStoreNode(_,d){const v=Object.keys(d);for(let A=0;A<v.length;A+=1){const C=v[A];setProperty(_,C,d[C])}}function updateArray(_,d){if(typeof d=="function"&&(d=d(_)),d=unwrap(d),Array.isArray(d)){if(_===d)return;let v=0,A=d.length;for(;v<A;v++){const C=d[v];_[v]!==C&&setProperty(_,v,C)}setProperty(_,"length",A)}else mergeStoreNode(_,d)}function updatePath(_,d,v=[]){let A,C=_;if(d.length>1){A=d.shift();const T=typeof A,R=Array.isArray(_);if(Array.isArray(A)){for(let G=0;G<A.length;G++)updatePath(_,[A[G]].concat(d),v);return}else if(R&&T==="function"){for(let G=0;G<_.length;G++)A(_[G],G)&&updatePath(_,[G].concat(d),v);return}else if(R&&T==="object"){const{from:G=0,to:I=_.length-1,by:z=1}=A;for(let H=G;H<=I;H+=z)updatePath(_,[H].concat(d),v);return}else if(d.length>1){updatePath(_[A],d,[A].concat(v));return}C=_[A],v=[A].concat(v)}let w=d[0];typeof w=="function"&&(w=w(C,v),w===C)||A===void 0&&w==null||(w=unwrap(w),A===void 0||isWrappable(C)&&isWrappable(w)&&!Array.isArray(w)?mergeStoreNode(C,w):setProperty(_,A,w))}function createStore$3(...[_,d]){const v=unwrap(_||{}),A=Array.isArray(v),C=wrap$1(v);function w(...T){batch$1(()=>{A&&T.length===1?updateArray(v,T[0]):updatePath(v,T)})}return[C,w]}const defaultLightColorsSet={constant:{black:"#000000",white:"#FFFFFF"},connectButton:{background:"#0098EA",foreground:"#FFFFFF"},accent:"#0098EA",telegramButton:"#0098EA",icon:{primary:"#0F0F0F",secondary:"#7A8999",tertiary:"#C1CAD2",success:"#29CC6A",error:"#F5A73B"},background:{primary:"#FFFFFF",secondary:"#F1F3F5",segment:"#FFFFFF",tint:"#F1F3F5",qr:"#F1F3F5"},text:{primary:"#0F0F0F",secondary:"#6A7785"}},defaultDarkColorsSet={constant:{black:"#000000",white:"#FFFFFF"},connectButton:{background:"#0098EA",foreground:"#FFFFFF"},accent:"#E5E5EA",telegramButton:"#31A6F5",icon:{primary:"#E5E5EA",secondary:"#909099",tertiary:"#434347",success:"#29CC6A",error:"#F5A73B"},background:{primary:"#121214",secondary:"#18181A",segment:"#262629",tint:"#222224",qr:"#FFFFFF"},text:{primary:"#E5E5EA",secondary:"#7D7D85"}};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function isObject$3(_){return Object.prototype.toString.call(_)==="[object Object]"}function isPlainObject$1(_){var d,v;return isObject$3(_)===!1?!1:(d=_.constructor,d===void 0?!0:(v=d.prototype,!(isObject$3(v)===!1||v.hasOwnProperty("isPrototypeOf")===!1)))}function mergeOptions(_,d){return _?deepmerge(d,_,{arrayMerge:(A,C,w)=>C,isMergeableObject:isPlainObject$1}):d}const[themeState,setThemeState]=createStore$3({theme:THEME.LIGHT,colors:defaultLightColorsSet,borderRadius:"m"}),themeColorsMappingDefault={[THEME.LIGHT]:defaultLightColorsSet,[THEME.DARK]:defaultDarkColorsSet},themeCustomColors={[THEME.LIGHT]:void 0,[THEME.DARK]:void 0};function setTheme(_,d){d&&(themeCustomColors[THEME.DARK]=mergeOptions(d[THEME.DARK],themeCustomColors[THEME.DARK]),themeCustomColors[THEME.LIGHT]=mergeOptions(d[THEME.LIGHT],themeCustomColors[THEME.LIGHT])),setThemeState({theme:_,colors:mergeOptions(themeCustomColors[_],themeColorsMappingDefault[_])})}function setBorderRadius(_){setThemeState({borderRadius:_})}function setColors(_){themeCustomColors[THEME.DARK]=mergeOptions(_[THEME.DARK],themeCustomColors[THEME.DARK]),themeCustomColors[THEME.LIGHT]=mergeOptions(_[THEME.LIGHT],themeCustomColors[THEME.LIGHT]),setThemeState(d=>({colors:mergeOptions(themeCustomColors[d.theme],themeColorsMappingDefault[d.theme])}))}const ImagePlaceholder=styled.div`
    background-color: ${_=>_.theme.colors.background.secondary};
`,Image$1=_=>{let d;const[v,A]=createSignal(null);return createEffect(()=>{const C=new window.Image;return C.src=_.src,C.alt=_.alt||"",C.setAttribute("draggable","false"),_.class&&C.classList.add(_.class),C.complete?A(C):(C.addEventListener("load",()=>A(C)),()=>C.removeEventListener("load",()=>A(C)))}),[createComponent(Show,{get when(){return v()},get children(){return v()}}),createComponent(Show,{get when(){return!v()},get children(){return createComponent(ImagePlaceholder,{get class(){return _.class},ref(C){const w=d;typeof w=="function"?w(C):d=C}})}})]};let initParams={};try{let _=location.hash.toString();initParams=urlParseHashParams(_)}catch(_){}let tmaPlatform="unknown";initParams?.tgWebAppPlatform&&(tmaPlatform=(_a$1=initParams.tgWebAppPlatform)!=null?_a$1:"unknown");if(tmaPlatform==="unknown"){const _=getWindow$1();tmaPlatform=(_d=(_c=(_b$1=_?.Telegram)==null?void 0:_b$1.WebApp)==null?void 0:_c.platform)!=null?_d:"unknown"}let webAppVersion="6.0";initParams?.tgWebAppVersion&&(webAppVersion=initParams.tgWebAppVersion);if(!webAppVersion){const _=getWindow$1();webAppVersion=(_g=(_f=(_e=_?.Telegram)==null?void 0:_e.WebApp)==null?void 0:_f.version)!=null?_g:"6.0"}function isTmaPlatform(..._){return _.includes(tmaPlatform)}function isInTMA(){var _;return tmaPlatform!=="unknown"||!!((_=getWindow$1())!=null&&_.TelegramWebviewProxy)}function isInTelegramBrowser(){var _;const d=!!((_=getWindow$1())!=null&&_.TelegramWebview);return(isInTMA()||d)&&tmaPlatform==="unknown"}function sendExpand(){postEvent("web_app_expand",{})}function sendOpenTelegramLink(_,d){const v=new URL(_);if(v.protocol!=="http:"&&v.protocol!=="https:"){if(d)return d();throw new TonConnectUIError(`Url protocol is not supported: ${v}`)}if(v.hostname!=="t.me"){if(d)return d();throw new TonConnectUIError(`Url host is not supported: ${v}`)}const A=v.pathname+v.search;isIframe()||versionAtLeast("6.1")?postEvent("web_app_open_tg_link",{path_full:A}):openLinkBlank("https://t.me"+A)}function isIframe(){try{const _=getWindow$1();return _?_.parent!=null&&_!==_.parent:!1}catch{return!1}}function postEvent(_,d){try{const v=getWindow$1();if(!v)throw new TonConnectUIError("Can't post event to parent window: window is not defined");if(v.TelegramWebviewProxy!==void 0)logDebug("postEvent",_,d),v.TelegramWebviewProxy.postEvent(_,JSON.stringify(d));else if(v.external&&"notify"in v.external)logDebug("postEvent",_,d),v.external.notify(JSON.stringify({eventType:_,eventData:d}));else if(isIframe()){const A="*",C=JSON.stringify({eventType:_,eventData:d});logDebug("postEvent",_,d),v.parent.postMessage(C,A)}else throw new TonConnectUIError("Can't post event to TMA")}catch(v){logError(`Can't post event to parent window: ${v}`)}}function urlParseHashParams(_){_=_.replace(/^#/,"");let d={};if(!_.length)return d;if(_.indexOf("=")<0&&_.indexOf("?")<0)return d._path=urlSafeDecode(_),d;let v=_.indexOf("?");if(v>=0){let C=_.substr(0,v);d._path=urlSafeDecode(C),_=_.substr(v+1)}let A=urlParseQueryString(_);for(let C in A)d[C]=A[C];return d}function urlSafeDecode(_){try{return _=_.replace(/\+/g,"%20"),decodeURIComponent(_)}catch{return _}}function urlParseQueryString(_){let d={};if(!_.length)return d;let v=_.split("&"),A,C,w,T;for(A=0;A<v.length;A++)C=v[A].split("="),w=urlSafeDecode(C[0]),T=C[1]==null?null:urlSafeDecode(C[1]),d[w]=T;return d}function versionCompare(_,d){typeof _!="string"&&(_="");let v=_.replace(/^\s+|\s+$/g,"").split("."),A=d.replace(/^\s+|\s+$/g,"").split("."),C,w,T,R;for(C=Math.max(v.length,A.length),w=0;w<C;w++)if(T=parseInt(v[w])||0,R=parseInt(A[w])||0,T!==R)return T>R?1:-1;return 0}function versionAtLeast(_){return versionCompare(webAppVersion,_)>=0}const maxWidth={mobile:440,tablet:1020};function isDevice(_){const d=getWindow$1();if(!d)return _==="desktop";if(isTmaPlatform("weba"))return!0;const v=d.innerWidth;switch(_){case"desktop":return v>maxWidth.tablet;case"tablet":return v>maxWidth.mobile;default:case"mobile":return v<=maxWidth.mobile||isOS("ios","android","ipad")}}function media(_){switch(_){case"mobile":return`@media (max-width: ${maxWidth.mobile}px)`;case"tablet":return`@media (max-width: ${maxWidth.tablet}px) (min-width: ${maxWidth.mobile}px)`;default:case"desktop":return`@media (min-width: ${maxWidth.tablet}px)`}}const mediaTouch="@media (hover: none)",mediaNotTouch="@media not all and (hover: none)",borders$6={m:"100vh",s:"8px",none:"0"},scaleValues={s:.02,m:.04},ButtonStyled$1=styled.button`
    display: ${_=>_.leftIcon||_.rightIcon?"flex":"inline-block"};
    gap: ${_=>_.leftIcon||_.rightIcon?"6px":"unset"};
    align-items: ${_=>_.leftIcon||_.rightIcon?"center":"unset"};
    justify-content: ${_=>_.leftIcon||_.rightIcon?"space-between":"unset"};
    background-color: ${_=>_.appearance==="flat"?"transparent":_.appearance==="secondary"?_.theme.colors.background.tint:rgba(_.theme.colors.accent,.12)};
    color: ${_=>_.appearance==="secondary"?_.theme.colors.text.primary:_.theme.colors.accent};

    padding: ${_=>_.appearance==="flat"?"0":"9px 16px"};
    padding-left: ${_=>_.leftIcon&&_.appearance!=="flat"?"12px":"16px"};
    padding-right: ${_=>_.rightIcon&&_.appearance!=="flat"?"12px":"16px"};
    border: none;
    border-radius: ${_=>borders$6[_.theme.borderRadius]};
    cursor: ${_=>_.disabled?"not-allowed":"pointer"};

    font-size: 14px;
    font-weight: 510;
    line-height: 18px;

    transition: transform 0.125s ease-in-out;

    ${mediaNotTouch} {
        &:hover {
            transform: ${_=>_.disabled?"unset":`scale(${1+scaleValues[_.scale]})`};
        }
    }

    &:active {
        transform: ${_=>_.disabled?"unset":`scale(${1-scaleValues[_.scale]})`};
    }

    ${mediaTouch} {
        &:active {
            transform: ${_=>_.disabled?"unset":`scale(${1-scaleValues[_.scale]*2})`};
        }
    }
`;function useDataAttributes(_){const d=untrack(()=>Object.keys(_).filter(A=>A.startsWith("data-"))),[v]=splitProps(_,d);return v}const Button$1=_=>{const d=useDataAttributes(_);return createComponent(ButtonStyled$1,mergeProps({get appearance(){return _.appearance||"primary"},get class(){return _.class},onClick:v=>{var A;return(A=_.onClick)==null?void 0:A.call(_,v)},onMouseEnter:v=>{var A;return(A=_.onMouseEnter)==null?void 0:A.call(_,v)},onMouseLeave:v=>{var A;return(A=_.onMouseLeave)==null?void 0:A.call(_,v)},ref(v){const A=_.ref;typeof A=="function"?A(v):_.ref=v},get disabled(){return _.disabled},get scale(){return _.scale||"m"},get leftIcon(){return!!_.leftIcon},get rightIcon(){return!!_.rightIcon},"data-tc-button":"true"},d,{get children(){return[createMemo(()=>_.leftIcon),createMemo(()=>_.children),createMemo(()=>_.rightIcon)]}}))};function nextFrame(_){requestAnimationFrame(()=>{requestAnimationFrame(_)})}const Transition=_=>{let d,v=!0;const[A,C]=createSignal(),[w,T]=createSignal(),R=children(()=>_.children),{onBeforeEnter:G,onEnter:I,onAfterEnter:z,onBeforeExit:H,onExit:Y,onAfterExit:ee}=_,ie=createMemo(()=>{const re=_.name||"s";return{enterActiveClass:_.enterActiveClass||re+"-enter-active",enterClass:_.enterClass||re+"-enter",enterToClass:_.enterToClass||re+"-enter-to",exitActiveClass:_.exitActiveClass||re+"-exit-active",exitClass:_.exitClass||re+"-exit",exitToClass:_.exitToClass||re+"-exit-to"}});function oe(re,fe){if(!v||_.appear){let ue=function(ve){re&&(!ve||ve.target===re)&&(re.removeEventListener("transitionend",ue),re.removeEventListener("animationend",ue),re.classList.remove(...ye),re.classList.remove(...be),batch$1(()=>{A()!==re&&C(re),w()===re&&T(void 0)}),z&&z(re),_.mode==="inout"&&se(re,fe))};const ge=ie().enterClass.split(" "),ye=ie().enterActiveClass.split(" "),be=ie().enterToClass.split(" ");G&&G(re),re.classList.add(...ge),re.classList.add(...ye),nextFrame(()=>{re.classList.remove(...ge),re.classList.add(...be),I&&I(re,()=>ue()),(!I||I.length<2)&&(re.addEventListener("transitionend",ue),re.addEventListener("animationend",ue))})}fe&&!_.mode?T(re):C(re)}function se(re,fe){const ue=ie().exitClass.split(" "),ge=ie().exitActiveClass.split(" "),ye=ie().exitToClass.split(" ");if(!fe.parentNode)return be();H&&H(fe),fe.classList.add(...ue),fe.classList.add(...ge),nextFrame(()=>{fe.classList.remove(...ue),fe.classList.add(...ye)}),Y&&Y(fe,()=>be()),(!Y||Y.length<2)&&(fe.addEventListener("transitionend",be),fe.addEventListener("animationend",be));function be(ve){(!ve||ve.target===fe)&&(fe.removeEventListener("transitionend",be),fe.removeEventListener("animationend",be),fe.classList.remove(...ge),fe.classList.remove(...ye),A()===fe&&C(void 0),ee&&ee(fe),_.mode==="outin"&&oe(re,fe))}}return createComputed(re=>{for(d=R();typeof d=="function";)d=d();return untrack(()=>(d&&d!==re&&(_.mode!=="outin"?oe(d,re):v&&C(d)),re&&re!==d&&_.mode!=="inout"&&se(d,re),v=!1,d))}),[A,w]};function getRect(_){const{top:d,bottom:v,left:A,right:C,width:w,height:T}=_.getBoundingClientRect(),R=_.parentNode.getBoundingClientRect();return{top:d-R.top,bottom:v,left:A-R.left,right:C,width:w,height:T}}const TransitionGroup=_=>{const d=children(()=>_.children),v=createMemo(()=>{const ee=_.name||"s";return{enterActiveClass:_.enterActiveClass||ee+"-enter-active",enterClass:_.enterClass||ee+"-enter",enterToClass:_.enterToClass||ee+"-enter-to",exitActiveClass:_.exitActiveClass||ee+"-exit-active",exitClass:_.exitClass||ee+"-exit",exitToClass:_.exitToClass||ee+"-exit-to",moveClass:_.moveClass||ee+"-move"}}),{onBeforeEnter:A,onEnter:C,onAfterEnter:w,onBeforeExit:T,onExit:R,onAfterExit:G}=_,[I,z]=createSignal();let H=[],Y=!0;return createComputed(()=>{const ee=d(),ie=[...ee],oe=new Set(ee),se=new Set(H),re=v().enterClass.split(" "),fe=v().enterActiveClass.split(" "),ue=v().enterToClass.split(" "),ge=v().exitClass.split(" "),ye=v().exitActiveClass.split(" "),be=v().exitToClass.split(" ");for(let ve=0;ve<ee.length;ve++){const Me=ee[ve];if(!Y&&!se.has(Me)){let we=function(Be){Me&&(!Be||Be.target===Me)&&(Me.removeEventListener("transitionend",we),Me.removeEventListener("animationend",we),Me.classList.remove(...fe),Me.classList.remove(...ue),w&&w(Me))};A&&A(Me),Me.classList.add(...re),Me.classList.add(...fe),nextFrame(()=>{Me.classList.remove(...re),Me.classList.add(...ue),C&&C(Me,()=>we()),(!C||C.length<2)&&(Me.addEventListener("transitionend",we),Me.addEventListener("animationend",we))})}}for(let ve=0;ve<H.length;ve++){const Me=H[ve];if(!oe.has(Me)&&Me.parentNode){let we=function(Be){(!Be||Be.target===Me)&&(Me.removeEventListener("transitionend",we),Me.removeEventListener("animationend",we),Me.classList.remove(...ye),Me.classList.remove(...be),G&&G(Me),H=H.filter(De=>De!==Me),z(H))};ie.splice(ve,0,Me),T&&T(Me),Me.classList.add(...ge),Me.classList.add(...ye),nextFrame(()=>{Me.classList.remove(...ge),Me.classList.add(...be)}),R&&R(Me,()=>we()),(!R||R.length<2)&&(Me.addEventListener("transitionend",we),Me.addEventListener("animationend",we))}}H=ie,z(ie)}),createEffect(ee=>{const ie=I();return ie.forEach(oe=>{let se;(se=ee.get(oe))?se.new&&(se.new=!1,se.newPos=getRect(oe)):ee.set(oe,se={pos:getRect(oe),new:!Y}),se.new&&oe.addEventListener("transitionend",()=>{se.new=!1,oe.parentNode&&(se.newPos=getRect(oe))},{once:!0}),se.newPos&&(se.pos=se.newPos),se.newPos=getRect(oe)}),Y?(Y=!1,ee):(ie.forEach(oe=>{const se=ee.get(oe),re=se.pos,fe=se.newPos,ue=re.left-fe.left,ge=re.top-fe.top;if(ue||ge){se.moved=!0;const ye=oe.style;ye.transform=`translate(${ue}px,${ge}px)`,ye.transitionDuration="0s"}}),document.body.offsetHeight,ie.forEach(oe=>{const se=ee.get(oe);if(se.moved){let re=function(ge){ge&&ge.target!==oe||!oe.parentNode||(!ge||/transform$/.test(ge.propertyName))&&(oe.removeEventListener("transitionend",re),oe.classList.remove(...ue))};se.moved=!1;const fe=oe.style,ue=v().moveClass.split(" ");oe.classList.add(...ue),fe.transform=fe.transitionDuration="",oe.addEventListener("transitionend",re)}}),ee)},new Map),I};function clickOutside$1(_,d){const v=A=>{var C;return!_.contains(A.target)&&((C=d())==null?void 0:C())};document.body.addEventListener("click",v),onCleanup(()=>document.body.removeEventListener("click",v))}function escPressed(_,d){const v=A=>{var C,w;A.key==="Escape"&&((C=document.activeElement)==null||C.blur(),(w=d())==null||w())};document.body.addEventListener("keydown",v),onCleanup(()=>document.body.removeEventListener("keydown",v))}function androidBackHandler$1(_,d){const{isEnabled:v,onClose:A}=d();if(!v||!(getUserAgent().os==="android"))return;window.history.pushState(ROUTE_STATE,"");const w=T=>{T.preventDefault(),A()};window.addEventListener("popstate",w,{once:!0}),onCleanup(()=>{window.removeEventListener("popstate",w),createMacrotask(()=>{var T;((T=window.history.state)==null?void 0:T[ROUTE_STATE_KEY])===!0&&window.history.back()})})}const ROUTE_STATE_KEY="androidBackHandler",ROUTE_STATE={[ROUTE_STATE_KEY]:!0},_tmpl$$v=template$1('<svg><path fill-rule="evenodd" clip-rule="evenodd" d="M10.2122 14.3407C10.5384 14.0854 10.5959 13.614 10.3406 13.2878L6.20237 8.00003L10.3406 2.71227C10.5959 2.38607 10.5384 1.91469 10.2122 1.6594C9.88604 1.40412 9.41465 1.46161 9.15937 1.7878L4.65937 7.5378C4.44688 7.80932 4.44688 8.19074 4.65937 8.46226L9.15937 14.2123C9.41465 14.5385 9.88604 14.5959 10.2122 14.3407Z"></path></svg>',4,!0),rotationDegrees={left:0,top:90,right:180,bottom:270},ArrowIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary,A=()=>_.direction||"left",C=styled("svg")`
        transform: rotate(${w=>rotationDegrees[w.svgDirection]}deg);
        transition: transform 0.1s ease-in-out;
    `;return createComponent(C,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",get svgDirection(){return A()},get children(){const w=_tmpl$$v.cloneNode(!0);return createRenderEffect(()=>setAttribute(w,"fill",v())),w}})},_tmpl$$u=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.71966 2.71968C3.01255 2.42678 3.48743 2.42677 3.78032 2.71966L8.00002 6.93925L12.2197 2.71967C12.5126 2.42677 12.9874 2.42678 13.2803 2.71967C13.5732 3.01257 13.5732 3.48744 13.2803 3.78033L9.06068 7.99991L13.2803 12.2197C13.5732 12.5126 13.5732 12.9874 13.2803 13.2803C12.9874 13.5732 12.5126 13.5732 12.2197 13.2803L8.00002 9.06057L3.78033 13.2803C3.48744 13.5732 3.01257 13.5732 2.71967 13.2803C2.42678 12.9874 2.42677 12.5126 2.71967 12.2197L6.93936 7.99991L2.71968 3.78034C2.42678 3.48745 2.42677 3.01257 2.71966 2.71968Z"></path></svg>'),CloseIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$u.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},IconButtonStyled=styled.button`
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: ${_=>_.theme.colors.background.tint};
    border: none;
    cursor: pointer;

    transition: transform 0.125s ease-in-out;

    ${mediaNotTouch} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${mediaTouch} {
        &:active {
            transform: scale(0.92);
        }
    }
`,IconButton=_=>{const d=useDataAttributes(_),v=()=>_.icon||"close";return createComponent(IconButtonStyled,mergeProps({get class(){return _.class},onClick:()=>_.onClick(),"data-tc-icon-button":"true"},d,{get children(){return[createComponent(Show,{get when(){return!!_.children},get children(){return _.children}}),createComponent(Show,{get when(){return!_.children},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return v()==="close"},get children(){return createComponent(CloseIcon,{get fill(){return _.fill}})}}),createComponent(Match,{get when(){return v()==="arrow"},get children(){return createComponent(ArrowIcon,{get fill(){return _.fill}})}}),createComponent(Match,{get when(){return v()==="question"},get children(){return createComponent(QuestionIcon,{get fill(){return _.fill}})}}),createComponent(Match,{get when(){return typeof v()!="string"},get children(){return v()}})]}})}})]}}))},borders$5={m:"24px",s:"16px",none:"0"},ModalBackgroundStyled=styled.div`
    display: flex;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    padding: 20px 0;
    overflow-y: auto;

    ${media("mobile")} {
        padding-bottom: 0;
    }
`,ModalWrapperClass=u`
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08), 0 16px 64px rgba(0, 0, 0, 0.16);
    width: fit-content;
    margin: auto;

    ${media("mobile")} {
        width: 100%;
        height: fit-content;
        margin: auto 0 0 0;
    }
`,ModalBodyStyled=styled.div`
    position: relative;
    min-height: 100px;
    width: 416px;
    padding: 44px 56px 24px;

    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.04);

    background-color: ${_=>_.theme.colors.background.primary};
    border-radius: ${_=>borders$5[_.theme.borderRadius]};

    ${media("mobile")} {
        width: 100%;
    }
`,CloseButtonStyled=styled(IconButton)`
    position: absolute;
    right: 16px;
    top: 16px;
`,ModalFooterStyled=styled.div`
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 16px 16px 18px;
    border-radius: 0 0 ${_=>borders$5[_.theme.borderRadius]}
        ${_=>borders$5[_.theme.borderRadius]};
`,QuestionButtonStyled=styled(IconButton)`
    background-color: ${_=>rgba(_.theme.colors.icon.secondary,.12)};
`;class AnimationTimelineNoop{constructor(){__publicField(this,"currentTime",0)}}const _AnimationNoop=class{constructor(){__publicField(this,"currentTime",0),__publicField(this,"playbackRate",1),__publicField(this,"startTime",null),__publicField(this,"timeline",new AnimationTimelineNoop),__publicField(this,"finished",Promise.resolve(this)),__publicField(this,"effect",null),__publicField(this,"id",""),__publicField(this,"pending",!1),__publicField(this,"playState","finished"),__publicField(this,"replaceState","active"),__publicField(this,"ready",Promise.resolve(this)),__publicField(this,"oncancel",null),__publicField(this,"onfinish",null),__publicField(this,"onremove",null)}static create(){return _AnimationNoop._instance||(logWarning("Animation is not supported in this environment: please consider using the `web-animations-js` polyfill to provide a fallback implementation of the Web Animations API."),_AnimationNoop._instance=new _AnimationNoop),_AnimationNoop._instance}cancel(){}finish(){}pause(){}play(){}reverse(){}addEventListener(_,d,v){}dispatchEvent(_){return!1}removeEventListener(_,d,v){}updatePlaybackRate(_){}commitStyles(){}persist(){}};let AnimationNoop=_AnimationNoop;__publicField(AnimationNoop,"_instance",null);function animate(_,d,v){return"animate"in _?_.animate(d,v):AnimationNoop.create()}const _tmpl$$t=template$1("<div></div>"),clickOutside=clickOutside$1,keyPressed=escPressed,androidBackHandler=androidBackHandler$1,Modal$1=_=>{const d=useTheme(),v=useDataAttributes(_);return createEffect(()=>{_.opened?disableScroll():enableScroll()}),createComponent(Transition,{onBeforeEnter:A=>{const C=isDevice("mobile")?200:100;animate(A,[{opacity:0},{opacity:1}],{duration:C}),isDevice("mobile")&&animate(A.firstElementChild,[{transform:"translateY(390px)"},{transform:"translateY(0)"}],{duration:C})},onExit:(A,C)=>{const w=isDevice("mobile")?200:100,T=animate(A,[{opacity:1},{opacity:0}],{duration:w});if(isDevice("mobile")){const R=animate(A.firstElementChild,[{transform:"translateY(0)"},{transform:"translateY(390px)"}],{duration:w});Promise.all([T.finished,R.finished]).then(C)}else T.finished.then(C)},get children(){return createComponent(Show,{get when(){return _.opened},get children(){return createComponent(ModalBackgroundStyled,mergeProps({"data-tc-modal":"true"},v,{get children(){const A=_tmpl$$t.cloneNode(!0);return use(androidBackHandler,A,()=>({isEnabled:_.enableAndroidBackHandler,onClose:()=>_.onClose()})),use(keyPressed,A,()=>()=>_.onClose()),use(clickOutside,A,()=>()=>_.onClose()),insert(A,createComponent(ModalBodyStyled,{get class(){return _.class},get children(){return[createComponent(CloseButtonStyled,{icon:"close",onClick:()=>_.onClose()}),createMemo(()=>_.children)]}}),null),insert(A,createComponent(Show,{get when(){return _.onClickQuestion&&_.showFooter},get children(){return createComponent(ModalFooterStyled,{get children(){return[createComponent(TonConnectBrand,{}),createComponent(QuestionButtonStyled,{get onClick(){return _.onClickQuestion},icon:"question"})]}})}}),null),createRenderEffect(()=>className(A,cn(ModalWrapperClass,u`
                                border-radius: ${borders$5[d.borderRadius]};
                                background-color: ${d.colors.background.tint};

                                ${media("mobile")} {
                                    border-radius: ${borders$5[d.borderRadius]}
                                        ${borders$5[d.borderRadius]} 0 0;
                                }
                            `))),A}}))}})}})},wrapperBorderRadius={m:"22px",s:"12px",none:"0"},sliderBorderRadius={m:"18px",s:"8px",none:"0"},TabBarStyled=styled.div`
    display: grid;
    grid-template: 1fr / 1fr 1fr;
    width: fit-content;
    justify-items: center;
    gap: 4px;

    position: relative;
    padding: 4px;
    border-radius: ${_=>wrapperBorderRadius[_.theme.borderRadius]};

    background-color: ${_=>_.theme.colors.background.secondary};
`,SliderStyled=styled.div`
    position: absolute;
    top: 4px;
    left: 4px;

    height: calc(100% - 8px);
    width: calc(50% - 4px);

    border-radius: ${_=>sliderBorderRadius[_.theme.borderRadius]};
    background-color: ${_=>_.theme.colors.background.segment};

    transform: ${_=>_.right?"translateX(100%)":"translateX(0)"};

    transition: transform 0.13s ease-in-out;
`,InputStyled=styled.input`
    display: none;
`,LabelStyled=styled.label`
    padding: 9px 12px;
    z-index: 1;

    cursor: ${_=>_.isActive?"default":"pointer"};

    transition: transform 0.13s ease-in-out;

    &:hover {
        transform: ${_=>_.isActive?"none":"scale(1.025)"};
    }

    > * {
        ${_=>_.isActive?"":`color: ${_.theme.colors.text.secondary};`}
    }
`,TabBar=_=>{const d="tabBar"+Math.floor(Math.random()*1e4);return createComponent(TabBarStyled,{get class(){return _.class},"data-tc-tab-bar":"true",get children(){return[createComponent(SliderStyled,{get right(){return _.selectedTabIndex===1}}),createComponent(LabelStyled,{get isActive(){return _.selectedTabIndex===0},get children(){return[createComponent(InputStyled,{type:"radio",name:d,get checked(){return _.selectedTabIndex===0},onInput:()=>{var v;return(v=_.onSelectedTabIndexChange)==null?void 0:v.call(_,0)}}),createMemo(()=>_.tab1)]}}),createComponent(LabelStyled,{get isActive(){return _.selectedTabIndex===1},get children(){return[createComponent(InputStyled,{type:"radio",get checked(){return _.selectedTabIndex===1},name:d,onInput:()=>{var v;return(v=_.onSelectedTabIndexChange)==null?void 0:v.call(_,1)}}),createMemo(()=>_.tab2)]}})]}})},backgroundBorders={m:"16px",s:"12px",none:"0"},imageBorders={m:"12px",s:"8px",none:"0"},qrNormalSize=256,imgSizeDefault=60,picSizeDefault=48,qrPaddingTop=24,CopyIconButton=styled.div`
    width: 52px;
    height: 52px;
    background: transparent;
    position: absolute;
    right: 0;
    bottom: 0;

    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.125s ease-in-out;
`,QrCodeBackground=styled.button`
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    background-color: ${_=>_.theme.colors.background.qr};
    border-radius: ${_=>backgroundBorders[_.theme.borderRadius]};
    padding: ${toPx(qrPaddingTop)} 0;
    height: ${toPx(qrNormalSize+qrPaddingTop*2)};
    width: 100%;

    overflow: hidden;
    cursor: pointer;
    border: none;

    ${mediaNotTouch} {
        &:hover {
            ${CopyIconButton.class} {
                transform: scale(1.04);
            }
        }
    }

    &:active {
        ${CopyIconButton.class} {
            transform: scale(0.96);
        }
    }

    ${mediaTouch} {
        &:active {
            ${CopyIconButton.class} {
                transform: scale(0.92);
            }
        }
    }
`,QrCodeWrapper$2=styled.div`
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 auto;

    > div:first-child {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    rect {
        fill: transparent;
    }

    path {
        fill: ${_=>_.theme.colors.constant.black};
    }
`,ImageBackground=styled.div`
    position: absolute;
    width: ${toPx(imgSizeDefault)};
    height: ${toPx(imgSizeDefault)};
    background: ${_=>_.theme.colors.background.qr};

    display: flex;
    align-items: center;
    justify-content: center;
`,ImageStyled$3=styled(Image$1)`
    width: ${_=>toPx(_.size)};
    height: ${_=>toPx(_.size)};
    border-radius: ${_=>imageBorders[_.theme.borderRadius]};
    background-color: ${_=>_.theme.colors.background.qr};
`,CopiedBoxStyled=styled.div`
    position: absolute;
    bottom: 14px;
    left: 50%;
    transform: translate(-50%, 0);

    display: flex;
    gap: 6px;
    align-items: center;
    border-radius: 18px;
    min-width: 126px;
    padding: 9px 16px 9px 10px;

    filter: drop-shadow(0px 2px 8px rgba(0, 0, 0, 0.08));
    background-color: ${_=>_.theme.colors.background.segment};
`;var qrcode$1={exports:{}};(function(_,d){var v=function(){var A=function(ye,be){var ve=236,Me=17,we=ye,Be=w[be],De=null,Fe=0,Oe=null,Ge=[],ze={},je=function(In,Zn){Fe=we*4+17,De=function($n){for(var Rn=new Array($n),Dn=0;Dn<$n;Dn+=1){Rn[Dn]=new Array($n);for(var Gt=0;Gt<$n;Gt+=1)Rn[Dn][Gt]=null}return Rn}(Fe),He(0,0),He(Fe-7,0),He(0,Fe-7),We(),$e(),Qt(In,Zn),we>=7&&nt(In),Oe==null&&(Oe=Lt(we,Be,Ge)),Wt(Oe,Zn)},He=function(In,Zn){for(var $n=-1;$n<=7;$n+=1)if(!(In+$n<=-1||Fe<=In+$n))for(var Rn=-1;Rn<=7;Rn+=1)Zn+Rn<=-1||Fe<=Zn+Rn||(0<=$n&&$n<=6&&(Rn==0||Rn==6)||0<=Rn&&Rn<=6&&($n==0||$n==6)||2<=$n&&$n<=4&&2<=Rn&&Rn<=4?De[In+$n][Zn+Rn]=!0:De[In+$n][Zn+Rn]=!1)},Xe=function(){for(var In=0,Zn=0,$n=0;$n<8;$n+=1){je(!0,$n);var Rn=R.getLostPoint(ze);($n==0||In>Rn)&&(In=Rn,Zn=$n)}return Zn},$e=function(){for(var In=8;In<Fe-8;In+=1)De[In][6]==null&&(De[In][6]=In%2==0);for(var Zn=8;Zn<Fe-8;Zn+=1)De[6][Zn]==null&&(De[6][Zn]=Zn%2==0)},We=function(){for(var In=R.getPatternPosition(we),Zn=0;Zn<In.length;Zn+=1)for(var $n=0;$n<In.length;$n+=1){var Rn=In[Zn],Dn=In[$n];if(De[Rn][Dn]==null)for(var Gt=-2;Gt<=2;Gt+=1)for(var Jn=-2;Jn<=2;Jn+=1)Gt==-2||Gt==2||Jn==-2||Jn==2||Gt==0&&Jn==0?De[Rn+Gt][Dn+Jn]=!0:De[Rn+Gt][Dn+Jn]=!1}},nt=function(In){for(var Zn=R.getBCHTypeNumber(we),$n=0;$n<18;$n+=1){var Rn=!In&&(Zn>>$n&1)==1;De[Math.floor($n/3)][$n%3+Fe-8-3]=Rn}for(var $n=0;$n<18;$n+=1){var Rn=!In&&(Zn>>$n&1)==1;De[$n%3+Fe-8-3][Math.floor($n/3)]=Rn}},Qt=function(In,Zn){for(var $n=Be<<3|Zn,Rn=R.getBCHTypeInfo($n),Dn=0;Dn<15;Dn+=1){var Gt=!In&&(Rn>>Dn&1)==1;Dn<6?De[Dn][8]=Gt:Dn<8?De[Dn+1][8]=Gt:De[Fe-15+Dn][8]=Gt}for(var Dn=0;Dn<15;Dn+=1){var Gt=!In&&(Rn>>Dn&1)==1;Dn<8?De[8][Fe-Dn-1]=Gt:Dn<9?De[8][15-Dn-1+1]=Gt:De[8][15-Dn-1]=Gt}De[Fe-8][8]=!In},Wt=function(In,Zn){for(var $n=-1,Rn=Fe-1,Dn=7,Gt=0,Jn=R.getMaskFunction(Zn),Nn=Fe-1;Nn>0;Nn-=2)for(Nn==6&&(Nn-=1);;){for(var Xn=0;Xn<2;Xn+=1)if(De[Rn][Nn-Xn]==null){var jn=!1;Gt<In.length&&(jn=(In[Gt]>>>Dn&1)==1);var Un=Jn(Rn,Nn-Xn);Un&&(jn=!jn),De[Rn][Nn-Xn]=jn,Dn-=1,Dn==-1&&(Gt+=1,Dn=7)}if(Rn+=$n,Rn<0||Fe<=Rn){Rn-=$n,$n=-$n;break}}},Bn=function(In,Zn){for(var $n=0,Rn=0,Dn=0,Gt=new Array(Zn.length),Jn=new Array(Zn.length),Nn=0;Nn<Zn.length;Nn+=1){var Xn=Zn[Nn].dataCount,jn=Zn[Nn].totalCount-Xn;Rn=Math.max(Rn,Xn),Dn=Math.max(Dn,jn),Gt[Nn]=new Array(Xn);for(var Un=0;Un<Gt[Nn].length;Un+=1)Gt[Nn][Un]=255&In.getBuffer()[Un+$n];$n+=Xn;var bn=R.getErrorCorrectPolynomial(jn),Kn=I(Gt[Nn],bn.getLength()-1),Qn=Kn.mod(bn);Jn[Nn]=new Array(bn.getLength()-1);for(var Un=0;Un<Jn[Nn].length;Un+=1){var pr=Un+Qn.getLength()-Jn[Nn].length;Jn[Nn][Un]=pr>=0?Qn.getAt(pr):0}}for(var fn=0,Un=0;Un<Zn.length;Un+=1)fn+=Zn[Un].totalCount;for(var Mt=new Array(fn),yn=0,Un=0;Un<Rn;Un+=1)for(var Nn=0;Nn<Zn.length;Nn+=1)Un<Gt[Nn].length&&(Mt[yn]=Gt[Nn][Un],yn+=1);for(var Un=0;Un<Dn;Un+=1)for(var Nn=0;Nn<Zn.length;Nn+=1)Un<Jn[Nn].length&&(Mt[yn]=Jn[Nn][Un],yn+=1);return Mt},Lt=function(In,Zn,$n){for(var Rn=z.getRSBlocks(In,Zn),Dn=H(),Gt=0;Gt<$n.length;Gt+=1){var Jn=$n[Gt];Dn.put(Jn.getMode(),4),Dn.put(Jn.getLength(),R.getLengthInBits(Jn.getMode(),In)),Jn.write(Dn)}for(var Nn=0,Gt=0;Gt<Rn.length;Gt+=1)Nn+=Rn[Gt].dataCount;if(Dn.getLengthInBits()>Nn*8)throw"code length overflow. ("+Dn.getLengthInBits()+">"+Nn*8+")";for(Dn.getLengthInBits()+4<=Nn*8&&Dn.put(0,4);Dn.getLengthInBits()%8!=0;)Dn.putBit(!1);for(;!(Dn.getLengthInBits()>=Nn*8||(Dn.put(ve,8),Dn.getLengthInBits()>=Nn*8));)Dn.put(Me,8);return Bn(Dn,Rn)};ze.addData=function(In,Zn){Zn=Zn||"Byte";var $n=null;switch(Zn){case"Numeric":$n=Y(In);break;case"Alphanumeric":$n=ee(In);break;case"Byte":$n=ie(In);break;case"Kanji":$n=oe(In);break;default:throw"mode:"+Zn}Ge.push($n),Oe=null},ze.isDark=function(In,Zn){if(In<0||Fe<=In||Zn<0||Fe<=Zn)throw In+","+Zn;return De[In][Zn]},ze.getModuleCount=function(){return Fe},ze.make=function(){if(we<1){for(var In=1;In<40;In++){for(var Zn=z.getRSBlocks(In,Be),$n=H(),Rn=0;Rn<Ge.length;Rn++){var Dn=Ge[Rn];$n.put(Dn.getMode(),4),$n.put(Dn.getLength(),R.getLengthInBits(Dn.getMode(),In)),Dn.write($n)}for(var Gt=0,Rn=0;Rn<Zn.length;Rn++)Gt+=Zn[Rn].dataCount;if($n.getLengthInBits()<=Gt*8)break}we=In}je(!1,Xe())},ze.createTableTag=function(In,Zn){In=In||2,Zn=typeof Zn>"u"?In*4:Zn;var $n="";$n+='<table style="',$n+=" border-width: 0px; border-style: none;",$n+=" border-collapse: collapse;",$n+=" padding: 0px; margin: "+Zn+"px;",$n+='">',$n+="<tbody>";for(var Rn=0;Rn<ze.getModuleCount();Rn+=1){$n+="<tr>";for(var Dn=0;Dn<ze.getModuleCount();Dn+=1)$n+='<td style="',$n+=" border-width: 0px; border-style: none;",$n+=" border-collapse: collapse;",$n+=" padding: 0px; margin: 0px;",$n+=" width: "+In+"px;",$n+=" height: "+In+"px;",$n+=" background-color: ",$n+=ze.isDark(Rn,Dn)?"#000000":"#ffffff",$n+=";",$n+='"/>';$n+="</tr>"}return $n+="</tbody>",$n+="</table>",$n},ze.createSvgTag=function(In,Zn,$n,Rn){var Dn={};typeof arguments[0]=="object"&&(Dn=arguments[0],In=Dn.cellSize,Zn=Dn.margin,$n=Dn.alt,Rn=Dn.title),In=In||2,Zn=typeof Zn>"u"?In*4:Zn,$n=typeof $n=="string"?{text:$n}:$n||{},$n.text=$n.text||null,$n.id=$n.text?$n.id||"qrcode-description":null,Rn=typeof Rn=="string"?{text:Rn}:Rn||{},Rn.text=Rn.text||null,Rn.id=Rn.text?Rn.id||"qrcode-title":null;var Gt=ze.getModuleCount()*In+Zn*2,Jn,Nn,Xn,jn,Un="",bn;for(bn="l"+In+",0 0,"+In+" -"+In+",0 0,-"+In+"z ",Un+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',Un+=Dn.scalable?"":' width="'+Gt+'px" height="'+Gt+'px"',Un+=' viewBox="0 0 '+Gt+" "+Gt+'" ',Un+=' preserveAspectRatio="xMinYMin meet"',Un+=Rn.text||$n.text?' role="img" aria-labelledby="'+Mn([Rn.id,$n.id].join(" ").trim())+'"':"",Un+=">",Un+=Rn.text?'<title id="'+Mn(Rn.id)+'">'+Mn(Rn.text)+"</title>":"",Un+=$n.text?'<description id="'+Mn($n.id)+'">'+Mn($n.text)+"</description>":"",Un+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',Un+='<path d="',Xn=0;Xn<ze.getModuleCount();Xn+=1)for(jn=Xn*In+Zn,Jn=0;Jn<ze.getModuleCount();Jn+=1)ze.isDark(Xn,Jn)&&(Nn=Jn*In+Zn,Un+="M"+Nn+","+jn+bn);return Un+='" stroke="transparent" fill="black"/>',Un+="</svg>",Un},ze.createDataURL=function(In,Zn){In=In||2,Zn=typeof Zn>"u"?In*4:Zn;var $n=ze.getModuleCount()*In+Zn*2,Rn=Zn,Dn=$n-Zn;return ge($n,$n,function(Gt,Jn){if(Rn<=Gt&&Gt<Dn&&Rn<=Jn&&Jn<Dn){var Nn=Math.floor((Gt-Rn)/In),Xn=Math.floor((Jn-Rn)/In);return ze.isDark(Xn,Nn)?0:1}else return 1})},ze.createImgTag=function(In,Zn,$n){In=In||2,Zn=typeof Zn>"u"?In*4:Zn;var Rn=ze.getModuleCount()*In+Zn*2,Dn="";return Dn+="<img",Dn+=' src="',Dn+=ze.createDataURL(In,Zn),Dn+='"',Dn+=' width="',Dn+=Rn,Dn+='"',Dn+=' height="',Dn+=Rn,Dn+='"',$n&&(Dn+=' alt="',Dn+=Mn($n),Dn+='"'),Dn+="/>",Dn};var Mn=function(In){for(var Zn="",$n=0;$n<In.length;$n+=1){var Rn=In.charAt($n);switch(Rn){case"<":Zn+="&lt;";break;case">":Zn+="&gt;";break;case"&":Zn+="&amp;";break;case'"':Zn+="&quot;";break;default:Zn+=Rn;break}}return Zn},cr=function(In){var Zn=1;In=typeof In>"u"?Zn*2:In;var $n=ze.getModuleCount()*Zn+In*2,Rn=In,Dn=$n-In,Gt,Jn,Nn,Xn,jn,Un={"":""," ":""," ":"","  ":" "},bn={"":""," ":""," ":" ","  ":" "},Kn="";for(Gt=0;Gt<$n;Gt+=2){for(Nn=Math.floor((Gt-Rn)/Zn),Xn=Math.floor((Gt+1-Rn)/Zn),Jn=0;Jn<$n;Jn+=1)jn="",Rn<=Jn&&Jn<Dn&&Rn<=Gt&&Gt<Dn&&ze.isDark(Nn,Math.floor((Jn-Rn)/Zn))&&(jn=" "),Rn<=Jn&&Jn<Dn&&Rn<=Gt+1&&Gt+1<Dn&&ze.isDark(Xn,Math.floor((Jn-Rn)/Zn))?jn+=" ":jn+="",Kn+=In<1&&Gt+1>=Dn?bn[jn]:Un[jn];Kn+=`
`}return $n%2&&In>0?Kn.substring(0,Kn.length-$n-1)+Array($n+1).join(""):Kn.substring(0,Kn.length-1)};return ze.createASCII=function(In,Zn){if(In=In||1,In<2)return cr(Zn);In-=1,Zn=typeof Zn>"u"?In*2:Zn;var $n=ze.getModuleCount()*In+Zn*2,Rn=Zn,Dn=$n-Zn,Gt,Jn,Nn,Xn,jn=Array(In+1).join(""),Un=Array(In+1).join("  "),bn="",Kn="";for(Gt=0;Gt<$n;Gt+=1){for(Nn=Math.floor((Gt-Rn)/In),Kn="",Jn=0;Jn<$n;Jn+=1)Xn=1,Rn<=Jn&&Jn<Dn&&Rn<=Gt&&Gt<Dn&&ze.isDark(Nn,Math.floor((Jn-Rn)/In))&&(Xn=0),Kn+=Xn?jn:Un;for(Nn=0;Nn<In;Nn+=1)bn+=Kn+`
`}return bn.substring(0,bn.length-1)},ze.renderTo2dContext=function(In,Zn){Zn=Zn||2;for(var $n=ze.getModuleCount(),Rn=0;Rn<$n;Rn++)for(var Dn=0;Dn<$n;Dn++)In.fillStyle=ze.isDark(Rn,Dn)?"black":"white",In.fillRect(Rn*Zn,Dn*Zn,Zn,Zn)},ze};A.stringToBytesFuncs={default:function(ye){for(var be=[],ve=0;ve<ye.length;ve+=1){var Me=ye.charCodeAt(ve);be.push(Me&255)}return be}},A.stringToBytes=A.stringToBytesFuncs.default,A.createStringToBytes=function(ye,be){var ve=function(){for(var we=fe(ye),Be=function(){var $e=we.read();if($e==-1)throw"eof";return $e},De=0,Fe={};;){var Oe=we.read();if(Oe==-1)break;var Ge=Be(),ze=Be(),je=Be(),He=String.fromCharCode(Oe<<8|Ge),Xe=ze<<8|je;Fe[He]=Xe,De+=1}if(De!=be)throw De+" != "+be;return Fe}(),Me=63;return function(we){for(var Be=[],De=0;De<we.length;De+=1){var Fe=we.charCodeAt(De);if(Fe<128)Be.push(Fe);else{var Oe=ve[we.charAt(De)];typeof Oe=="number"?(Oe&255)==Oe?Be.push(Oe):(Be.push(Oe>>>8),Be.push(Oe&255)):Be.push(Me)}}return Be}};var C={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},w={L:1,M:0,Q:3,H:2},T={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},R=function(){var ye=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],be=1335,ve=7973,Me=21522,we={},Be=function(De){for(var Fe=0;De!=0;)Fe+=1,De>>>=1;return Fe};return we.getBCHTypeInfo=function(De){for(var Fe=De<<10;Be(Fe)-Be(be)>=0;)Fe^=be<<Be(Fe)-Be(be);return(De<<10|Fe)^Me},we.getBCHTypeNumber=function(De){for(var Fe=De<<12;Be(Fe)-Be(ve)>=0;)Fe^=ve<<Be(Fe)-Be(ve);return De<<12|Fe},we.getPatternPosition=function(De){return ye[De-1]},we.getMaskFunction=function(De){switch(De){case T.PATTERN000:return function(Fe,Oe){return(Fe+Oe)%2==0};case T.PATTERN001:return function(Fe,Oe){return Fe%2==0};case T.PATTERN010:return function(Fe,Oe){return Oe%3==0};case T.PATTERN011:return function(Fe,Oe){return(Fe+Oe)%3==0};case T.PATTERN100:return function(Fe,Oe){return(Math.floor(Fe/2)+Math.floor(Oe/3))%2==0};case T.PATTERN101:return function(Fe,Oe){return Fe*Oe%2+Fe*Oe%3==0};case T.PATTERN110:return function(Fe,Oe){return(Fe*Oe%2+Fe*Oe%3)%2==0};case T.PATTERN111:return function(Fe,Oe){return(Fe*Oe%3+(Fe+Oe)%2)%2==0};default:throw"bad maskPattern:"+De}},we.getErrorCorrectPolynomial=function(De){for(var Fe=I([1],0),Oe=0;Oe<De;Oe+=1)Fe=Fe.multiply(I([1,G.gexp(Oe)],0));return Fe},we.getLengthInBits=function(De,Fe){if(1<=Fe&&Fe<10)switch(De){case C.MODE_NUMBER:return 10;case C.MODE_ALPHA_NUM:return 9;case C.MODE_8BIT_BYTE:return 8;case C.MODE_KANJI:return 8;default:throw"mode:"+De}else if(Fe<27)switch(De){case C.MODE_NUMBER:return 12;case C.MODE_ALPHA_NUM:return 11;case C.MODE_8BIT_BYTE:return 16;case C.MODE_KANJI:return 10;default:throw"mode:"+De}else if(Fe<41)switch(De){case C.MODE_NUMBER:return 14;case C.MODE_ALPHA_NUM:return 13;case C.MODE_8BIT_BYTE:return 16;case C.MODE_KANJI:return 12;default:throw"mode:"+De}else throw"type:"+Fe},we.getLostPoint=function(De){for(var Fe=De.getModuleCount(),Oe=0,Ge=0;Ge<Fe;Ge+=1)for(var ze=0;ze<Fe;ze+=1){for(var je=0,He=De.isDark(Ge,ze),Xe=-1;Xe<=1;Xe+=1)if(!(Ge+Xe<0||Fe<=Ge+Xe))for(var $e=-1;$e<=1;$e+=1)ze+$e<0||Fe<=ze+$e||Xe==0&&$e==0||He==De.isDark(Ge+Xe,ze+$e)&&(je+=1);je>5&&(Oe+=3+je-5)}for(var Ge=0;Ge<Fe-1;Ge+=1)for(var ze=0;ze<Fe-1;ze+=1){var We=0;De.isDark(Ge,ze)&&(We+=1),De.isDark(Ge+1,ze)&&(We+=1),De.isDark(Ge,ze+1)&&(We+=1),De.isDark(Ge+1,ze+1)&&(We+=1),(We==0||We==4)&&(Oe+=3)}for(var Ge=0;Ge<Fe;Ge+=1)for(var ze=0;ze<Fe-6;ze+=1)De.isDark(Ge,ze)&&!De.isDark(Ge,ze+1)&&De.isDark(Ge,ze+2)&&De.isDark(Ge,ze+3)&&De.isDark(Ge,ze+4)&&!De.isDark(Ge,ze+5)&&De.isDark(Ge,ze+6)&&(Oe+=40);for(var ze=0;ze<Fe;ze+=1)for(var Ge=0;Ge<Fe-6;Ge+=1)De.isDark(Ge,ze)&&!De.isDark(Ge+1,ze)&&De.isDark(Ge+2,ze)&&De.isDark(Ge+3,ze)&&De.isDark(Ge+4,ze)&&!De.isDark(Ge+5,ze)&&De.isDark(Ge+6,ze)&&(Oe+=40);for(var nt=0,ze=0;ze<Fe;ze+=1)for(var Ge=0;Ge<Fe;Ge+=1)De.isDark(Ge,ze)&&(nt+=1);var Qt=Math.abs(100*nt/Fe/Fe-50)/5;return Oe+=Qt*10,Oe},we}(),G=function(){for(var ye=new Array(256),be=new Array(256),ve=0;ve<8;ve+=1)ye[ve]=1<<ve;for(var ve=8;ve<256;ve+=1)ye[ve]=ye[ve-4]^ye[ve-5]^ye[ve-6]^ye[ve-8];for(var ve=0;ve<255;ve+=1)be[ye[ve]]=ve;var Me={};return Me.glog=function(we){if(we<1)throw"glog("+we+")";return be[we]},Me.gexp=function(we){for(;we<0;)we+=255;for(;we>=256;)we-=255;return ye[we]},Me}();function I(ye,be){if(typeof ye.length>"u")throw ye.length+"/"+be;var ve=function(){for(var we=0;we<ye.length&&ye[we]==0;)we+=1;for(var Be=new Array(ye.length-we+be),De=0;De<ye.length-we;De+=1)Be[De]=ye[De+we];return Be}(),Me={};return Me.getAt=function(we){return ve[we]},Me.getLength=function(){return ve.length},Me.multiply=function(we){for(var Be=new Array(Me.getLength()+we.getLength()-1),De=0;De<Me.getLength();De+=1)for(var Fe=0;Fe<we.getLength();Fe+=1)Be[De+Fe]^=G.gexp(G.glog(Me.getAt(De))+G.glog(we.getAt(Fe)));return I(Be,0)},Me.mod=function(we){if(Me.getLength()-we.getLength()<0)return Me;for(var Be=G.glog(Me.getAt(0))-G.glog(we.getAt(0)),De=new Array(Me.getLength()),Fe=0;Fe<Me.getLength();Fe+=1)De[Fe]=Me.getAt(Fe);for(var Fe=0;Fe<we.getLength();Fe+=1)De[Fe]^=G.gexp(G.glog(we.getAt(Fe))+Be);return I(De,0).mod(we)},Me}var z=function(){var ye=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],be=function(we,Be){var De={};return De.totalCount=we,De.dataCount=Be,De},ve={},Me=function(we,Be){switch(Be){case w.L:return ye[(we-1)*4+0];case w.M:return ye[(we-1)*4+1];case w.Q:return ye[(we-1)*4+2];case w.H:return ye[(we-1)*4+3];default:return}};return ve.getRSBlocks=function(we,Be){var De=Me(we,Be);if(typeof De>"u")throw"bad rs block @ typeNumber:"+we+"/errorCorrectionLevel:"+Be;for(var Fe=De.length/3,Oe=[],Ge=0;Ge<Fe;Ge+=1)for(var ze=De[Ge*3+0],je=De[Ge*3+1],He=De[Ge*3+2],Xe=0;Xe<ze;Xe+=1)Oe.push(be(je,He));return Oe},ve}(),H=function(){var ye=[],be=0,ve={};return ve.getBuffer=function(){return ye},ve.getAt=function(Me){var we=Math.floor(Me/8);return(ye[we]>>>7-Me%8&1)==1},ve.put=function(Me,we){for(var Be=0;Be<we;Be+=1)ve.putBit((Me>>>we-Be-1&1)==1)},ve.getLengthInBits=function(){return be},ve.putBit=function(Me){var we=Math.floor(be/8);ye.length<=we&&ye.push(0),Me&&(ye[we]|=128>>>be%8),be+=1},ve},Y=function(ye){var be=C.MODE_NUMBER,ve=ye,Me={};Me.getMode=function(){return be},Me.getLength=function(De){return ve.length},Me.write=function(De){for(var Fe=ve,Oe=0;Oe+2<Fe.length;)De.put(we(Fe.substring(Oe,Oe+3)),10),Oe+=3;Oe<Fe.length&&(Fe.length-Oe==1?De.put(we(Fe.substring(Oe,Oe+1)),4):Fe.length-Oe==2&&De.put(we(Fe.substring(Oe,Oe+2)),7))};var we=function(De){for(var Fe=0,Oe=0;Oe<De.length;Oe+=1)Fe=Fe*10+Be(De.charAt(Oe));return Fe},Be=function(De){if("0"<=De&&De<="9")return De.charCodeAt(0)-48;throw"illegal char :"+De};return Me},ee=function(ye){var be=C.MODE_ALPHA_NUM,ve=ye,Me={};Me.getMode=function(){return be},Me.getLength=function(Be){return ve.length},Me.write=function(Be){for(var De=ve,Fe=0;Fe+1<De.length;)Be.put(we(De.charAt(Fe))*45+we(De.charAt(Fe+1)),11),Fe+=2;Fe<De.length&&Be.put(we(De.charAt(Fe)),6)};var we=function(Be){if("0"<=Be&&Be<="9")return Be.charCodeAt(0)-48;if("A"<=Be&&Be<="Z")return Be.charCodeAt(0)-65+10;switch(Be){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+Be}};return Me},ie=function(ye){var be=C.MODE_8BIT_BYTE,ve=A.stringToBytes(ye),Me={};return Me.getMode=function(){return be},Me.getLength=function(we){return ve.length},Me.write=function(we){for(var Be=0;Be<ve.length;Be+=1)we.put(ve[Be],8)},Me},oe=function(ye){var be=C.MODE_KANJI,ve=A.stringToBytesFuncs.SJIS;if(!ve)throw"sjis not supported.";(function(Be,De){var Fe=ve(Be);if(Fe.length!=2||(Fe[0]<<8|Fe[1])!=De)throw"sjis not supported."})("",38726);var Me=ve(ye),we={};return we.getMode=function(){return be},we.getLength=function(Be){return~~(Me.length/2)},we.write=function(Be){for(var De=Me,Fe=0;Fe+1<De.length;){var Oe=(255&De[Fe])<<8|255&De[Fe+1];if(33088<=Oe&&Oe<=40956)Oe-=33088;else if(57408<=Oe&&Oe<=60351)Oe-=49472;else throw"illegal char at "+(Fe+1)+"/"+Oe;Oe=(Oe>>>8&255)*192+(Oe&255),Be.put(Oe,13),Fe+=2}if(Fe<De.length)throw"illegal char at "+(Fe+1)},we},se=function(){var ye=[],be={};return be.writeByte=function(ve){ye.push(ve&255)},be.writeShort=function(ve){be.writeByte(ve),be.writeByte(ve>>>8)},be.writeBytes=function(ve,Me,we){Me=Me||0,we=we||ve.length;for(var Be=0;Be<we;Be+=1)be.writeByte(ve[Be+Me])},be.writeString=function(ve){for(var Me=0;Me<ve.length;Me+=1)be.writeByte(ve.charCodeAt(Me))},be.toByteArray=function(){return ye},be.toString=function(){var ve="";ve+="[";for(var Me=0;Me<ye.length;Me+=1)Me>0&&(ve+=","),ve+=ye[Me];return ve+="]",ve},be},re=function(){var ye=0,be=0,ve=0,Me="",we={},Be=function(Fe){Me+=String.fromCharCode(De(Fe&63))},De=function(Fe){if(!(Fe<0)){if(Fe<26)return 65+Fe;if(Fe<52)return 97+(Fe-26);if(Fe<62)return 48+(Fe-52);if(Fe==62)return 43;if(Fe==63)return 47}throw"n:"+Fe};return we.writeByte=function(Fe){for(ye=ye<<8|Fe&255,be+=8,ve+=1;be>=6;)Be(ye>>>be-6),be-=6},we.flush=function(){if(be>0&&(Be(ye<<6-be),ye=0,be=0),ve%3!=0)for(var Fe=3-ve%3,Oe=0;Oe<Fe;Oe+=1)Me+="="},we.toString=function(){return Me},we},fe=function(ye){var be=ye,ve=0,Me=0,we=0,Be={};Be.read=function(){for(;we<8;){if(ve>=be.length){if(we==0)return-1;throw"unexpected end of file./"+we}var Fe=be.charAt(ve);if(ve+=1,Fe=="=")return we=0,-1;if(Fe.match(/^\s$/))continue;Me=Me<<6|De(Fe.charCodeAt(0)),we+=6}var Oe=Me>>>we-8&255;return we-=8,Oe};var De=function(Fe){if(65<=Fe&&Fe<=90)return Fe-65;if(97<=Fe&&Fe<=122)return Fe-97+26;if(48<=Fe&&Fe<=57)return Fe-48+52;if(Fe==43)return 62;if(Fe==47)return 63;throw"c:"+Fe};return Be},ue=function(ye,be){var ve=ye,Me=be,we=new Array(ye*be),Be={};Be.setPixel=function(Ge,ze,je){we[ze*ve+Ge]=je},Be.write=function(Ge){Ge.writeString("GIF87a"),Ge.writeShort(ve),Ge.writeShort(Me),Ge.writeByte(128),Ge.writeByte(0),Ge.writeByte(0),Ge.writeByte(0),Ge.writeByte(0),Ge.writeByte(0),Ge.writeByte(255),Ge.writeByte(255),Ge.writeByte(255),Ge.writeString(","),Ge.writeShort(0),Ge.writeShort(0),Ge.writeShort(ve),Ge.writeShort(Me),Ge.writeByte(0);var ze=2,je=Fe(ze);Ge.writeByte(ze);for(var He=0;je.length-He>255;)Ge.writeByte(255),Ge.writeBytes(je,He,255),He+=255;Ge.writeByte(je.length-He),Ge.writeBytes(je,He,je.length-He),Ge.writeByte(0),Ge.writeString(";")};var De=function(Ge){var ze=Ge,je=0,He=0,Xe={};return Xe.write=function($e,We){if($e>>>We)throw"length over";for(;je+We>=8;)ze.writeByte(255&($e<<je|He)),We-=8-je,$e>>>=8-je,He=0,je=0;He=$e<<je|He,je=je+We},Xe.flush=function(){je>0&&ze.writeByte(He)},Xe},Fe=function(Ge){for(var ze=1<<Ge,je=(1<<Ge)+1,He=Ge+1,Xe=Oe(),$e=0;$e<ze;$e+=1)Xe.add(String.fromCharCode($e));Xe.add(String.fromCharCode(ze)),Xe.add(String.fromCharCode(je));var We=se(),nt=De(We);nt.write(ze,He);var Qt=0,Wt=String.fromCharCode(we[Qt]);for(Qt+=1;Qt<we.length;){var Bn=String.fromCharCode(we[Qt]);Qt+=1,Xe.contains(Wt+Bn)?Wt=Wt+Bn:(nt.write(Xe.indexOf(Wt),He),Xe.size()<4095&&(Xe.size()==1<<He&&(He+=1),Xe.add(Wt+Bn)),Wt=Bn)}return nt.write(Xe.indexOf(Wt),He),nt.write(je,He),nt.flush(),We.toByteArray()},Oe=function(){var Ge={},ze=0,je={};return je.add=function(He){if(je.contains(He))throw"dup key:"+He;Ge[He]=ze,ze+=1},je.size=function(){return ze},je.indexOf=function(He){return Ge[He]},je.contains=function(He){return typeof Ge[He]<"u"},je};return Be},ge=function(ye,be,ve){for(var Me=ue(ye,be),we=0;we<be;we+=1)for(var Be=0;Be<ye;Be+=1)Me.setPixel(Be,we,ve(Be,we));var De=se();Me.write(De);for(var Fe=re(),Oe=De.toByteArray(),Ge=0;Ge<Oe.length;Ge+=1)Fe.writeByte(Oe[Ge]);return Fe.flush(),"data:image/gif;base64,"+Fe};return A}();(function(){v.stringToBytesFuncs["UTF-8"]=function(A){function C(w){for(var T=[],R=0;R<w.length;R++){var G=w.charCodeAt(R);G<128?T.push(G):G<2048?T.push(192|G>>6,128|G&63):G<55296||G>=57344?T.push(224|G>>12,128|G>>6&63,128|G&63):(R++,G=65536+((G&1023)<<10|w.charCodeAt(R)&1023),T.push(240|G>>18,128|G>>12&63,128|G>>6&63,128|G&63))}return T}return C(A)}})(),function(A){_.exports=A()}(function(){return v})})(qrcode$1);const qrcode=qrcode$1.exports;function copyToClipboard(_){return __async(this,null,function*(){try{if(!navigator?.clipboard)throw new TonConnectUIError("Clipboard API not available");return yield navigator.clipboard.writeText(_)}catch{}fallbackCopyTextToClipboard(_)})}function fallbackCopyTextToClipboard(_){const d=document.createElement("textarea");d.value=_,d.style.top="0",d.style.left="0",d.style.position="fixed",document.body.appendChild(d),d.focus(),d.select();try{document.execCommand("copy")}finally{document.body.removeChild(d)}}const _tmpl$$s=template$1("<div></div>"),QRCode=_=>{let d,v,A;const[C,w]=createSignal(!1),[T,R]=createSignal(picSizeDefault);createEffect(()=>{const Y=qrcode(0,"L");Y.addData(_.sourceUrl),Y.make(),d.innerHTML=Y.createSvgTag(4,0);const ee=d.firstElementChild.clientWidth,ie=Math.round(qrNormalSize/ee*1e5)/1e5;if(A){const oe=Math.ceil(imgSizeDefault/(ie*4))*4,se=toPx(Math.ceil((ee-oe)/(2*4))*4);A.style.top=se,A.style.left=se,A.style.height=toPx(oe),A.style.width=toPx(oe),R(Math.round(picSizeDefault/ie))}v.style.transform=`scale(${ie})`});let G=null;return createComponent(QrCodeBackground,{get class(){return _.class},onClick:()=>{w(!0),copyToClipboard(_.sourceUrl),G!=null&&clearTimeout(G),G=setTimeout(()=>w(!1),1500)},get children(){return[createComponent(QrCodeWrapper$2,{ref(z){const H=v;typeof H=="function"?H(z):v=z},get children(){return[(()=>{const z=_tmpl$$s.cloneNode(!0),H=d;return typeof H=="function"?use(H,z):d=z,z})(),createComponent(Show,{get when(){return _.imageUrl},get children(){return createComponent(ImageBackground,{ref(z){const H=A;typeof H=="function"?H(z):A=z},get children(){return createComponent(ImageStyled$3,{get src(){return _.imageUrl},alt:"",get size(){return T()}})}})}})]}}),createComponent(Transition,{onBeforeEnter:z=>{animate(z,[{opacity:0,transform:"translate(-50%, 44px)"},{opacity:1,transform:"translate(-50%, 0)"}],{duration:150,easing:"ease-out"})},onExit:(z,H)=>{animate(z,[{opacity:1,transform:"translate(-50%, 0)"},{opacity:0,transform:"translate(-50%, 44px)"}],{duration:150,easing:"ease-out"}).finished.then(()=>{H()})},get children(){return createComponent(Show,{get when(){return C()&&!_.disableCopy},get children(){return createComponent(CopiedBoxStyled,{get children(){return[createComponent(SuccessIcon,{size:"xs"}),createComponent(Text$1,{translationKey:"common.linkCopied",children:"Link Copied"})]}})}})}}),createComponent(Show,{get when(){return!_.disableCopy},get children(){return createComponent(CopyIconButton,{get children(){return createComponent(CopyLightIcon,{})}})}})]}})};var deepReadObject=(_,d,v)=>{const A=d.trim().split(".").reduce((C,w)=>C?C[w]:void 0,_);return A!==void 0?A:v},template=(_,d,v=/{{(.*?)}}/g)=>_.replace(v,(A,C)=>deepReadObject(d,C,"")),createI18nContext=(_={},d=navigator.language in _?navigator.language:Object.keys(_)[0])=>{const[v,A]=createSignal(d),[C,w]=createStore$3(_);return[(G,I,z)=>{const H=deepReadObject(C[v()],G,z||"");return typeof H=="function"?H(I):typeof H=="string"?template(H,I||{}):H},{add(G,I){w(G,z=>Object.assign(z||{},I))},locale:G=>G?A(G):v(),dict:G=>deepReadObject(C,G)}]},I18nContext=createContext({}),useI18n=()=>useContext(I18nContext);const TextStyled$4=styled.div`
    font-style: normal;
    font-weight: ${_=>_.fontWeight};
    font-size: ${_=>_.fontSize};
    line-height: ${_=>_.lineHeight};

    color: ${_=>_.color};
`,Text$1=_=>{const d=useTheme(),[v]=useI18n();let A;const C=()=>_.color||d.colors.text.primary,w=mergeProps({fontSize:"14px",fontWeight:"510",lineHeight:"130%"},_);return createEffect(()=>{A&&w.cursor!=="unset"&&getComputedStyle(A).cursor!=="pointer"&&(A.style.cursor="default")}),createComponent(TextStyled$4,{get fontSize(){return w.fontSize},get fontWeight(){return w.fontWeight},get lineHeight(){return w.lineHeight},get color(){return C()},get class(){return w.class},ref(T){const R=A;typeof R=="function"?R(T):A=T},"data-tc-text":"true",get children(){var T;return createMemo(()=>!!w.translationKey)()?v(w.translationKey,w.translationValues,(T=w.children)==null?void 0:T.toString()):w.children}})},ImageContainer=styled.div`
    position: relative;

    &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border: 0.5px solid rgba(0, 0, 0, 0.08);
        border-radius: inherit;
    }
`,ImageStyled$2=styled(Image$1)`
    width: 100%;
    height: 100%;
    border-radius: inherit;
`,WalletImage=_=>createComponent(ImageContainer,{get class(){return _.class},get children(){return[createComponent(ImageStyled$2,{get src(){return _.src}}),createMemo(()=>_.badge)]}}),borders$4={m:"16px",s:"12px",none:"0"},badgeBorders={m:"6px",s:"6px",none:"0"},WalletUlContainer=styled.ul`
    display: flex;
    gap: 0;
    width: 100%;
    overflow-x: auto;
    padding: 8px 12px 16px 12px;
    margin: 0;
    list-style: none;
    flex-wrap: nowrap;

    &&::-webkit-scrollbar {
        display: none;
    }
    -ms-overflow-style: none;
    scrollbar-width: none;

    > li {
        display: flex;
        flex: 1;
        min-width: 78px;
        height: fit-content;
    }

    > li > button {
        width: 100%;
    }
`,WalletItemStyled=styled.button`
    position: relative;
    cursor: pointer;
    border: none;
    background-color: unset;
    padding: 8px 4px;
    width: 100%;
    min-width: 78px;
    display: flex;
    flex-direction: column;
    align-items: center;

    transition: transform 0.125s ease-in-out;

    ${mediaNotTouch} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${mediaTouch} {
        &:active {
            transform: scale(0.92);
        }
    }
`,ImageStyled$1=styled(WalletImage)`
    width: 60px;
    height: 60px;
    border-radius: ${_=>borders$4[_.theme.borderRadius]};
    margin-bottom: 8px;
    position: relative;
`,BadgeStyled=styled(Image$1)`
    position: absolute;
    right: -6px;
    bottom: -6px;
    width: 24px;
    height: 24px;
    border-radius: ${_=>badgeBorders[_.theme.borderRadius]};
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.08);
`,StyledText=styled(Text$1)`
    max-width: 90px;
    font-weight: 510;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;

    ${media("mobile")} {
        max-width: 80px;
    }
`,StyledSecondLine=styled(Text$1)`
    font-weight: ${_=>_.colorPrimary?"510":"400"};
    max-width: 90px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
    color: ${_=>_.colorPrimary?_.theme.colors.text.primary:_.theme.colors.text.secondary};

    ${media("mobile")} {
        max-width: 80px;
    }
`,_tmpl$$r=template$1("<div></div>"),WalletItem=_=>{let d=null;const v=()=>{const A=d?.querySelector("div");if(A&&A.scrollWidth>A.clientWidth){let C=0;const w=-.4,T=.05;for(;A.scrollWidth>A.clientWidth&&C>=w;)C-=T,A.style.letterSpacing=`${C}px`;C!==0&&(C-=T,A.style.letterSpacing=`${C}px`)}};return onMount(()=>v()),createEffect(()=>{v()}),createComponent(WalletItemStyled,{get class(){return _.class},onClick:()=>_.onClick(),"data-tc-wallet-item":"true",get children(){return[createMemo(()=>createMemo(()=>typeof _.icon=="string")()?createComponent(ImageStyled$1,{get src(){return _.icon},get badge(){return createMemo(()=>!!_.badgeUrl)()&&createComponent(BadgeStyled,{get src(){return _.badgeUrl}})}}):_.icon),(()=>{const A=_tmpl$$r.cloneNode(!0);return use(C=>d=C,A),insert(A,createComponent(StyledText,{get children(){return _.name}})),A})(),createMemo(()=>createMemo(()=>!!_.secondLine)()&&createComponent(StyledSecondLine,{get colorPrimary(){var A;return(A=_.secondLineColorPrimary)!=null?A:!0},get children(){return _.secondLine}}))]}})},H1Styled$b=styled.h1`
    font-style: normal;
    font-weight: 590;
    font-size: 20px;
    line-height: 28px;

    text-align: center;

    color: ${_=>_.theme.colors.text.primary};

    margin-top: 0;
    margin-bottom: 0;

    cursor: default;
`,H1=_=>{const[d]=useI18n();return createComponent(H1Styled$b,{get class(){return _.class},"data-tc-h1":"true",get children(){var v;return createMemo(()=>!!_.translationKey)()?d(_.translationKey,_.translationValues,(v=_.children)==null?void 0:v.toString()):_.children}})},H2Styled$5=styled.h2`
    font-style: normal;
    font-weight: 400;
    font-size: 16px;
    line-height: 22px;

    text-align: center;

    color: ${_=>_.theme.colors.text.secondary};

    margin-top: 0;
    margin-bottom: 32px;

    cursor: default;
`,H2=_=>{const[d]=useI18n();return createComponent(H2Styled$5,{get class(){return _.class},"data-tc-h2":"true",get children(){var v;return createMemo(()=>!!_.translationKey)()?d(_.translationKey,_.translationValues,(v=_.children)==null?void 0:v.toString()):_.children}})},H3Styled$2=styled.h3`
    font-style: normal;
    font-weight: 510;
    font-size: 16px;
    line-height: 20px;

    color: ${_=>_.theme.colors.text.primary};

    margin-top: 0;
    margin-bottom: 0;

    cursor: default;
`,H3=_=>{const[d]=useI18n();return createComponent(H3Styled$2,{"data-tc-h3":"true",get class(){return _.class},get children(){var v;return createMemo(()=>!!_.translationKey)()?d(_.translationKey,_.translationValues,(v=_.children)==null?void 0:v.toString()):_.children}})},_tmpl$$q=template$1('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.1839 17.7069C13.6405 18.6507 13.3688 19.1226 13.0591 19.348C12.4278 19.8074 11.5723 19.8074 10.941 19.348C10.6312 19.1226 10.3595 18.6507 9.81613 17.7069L5.52066 10.2464C4.76864 8.94024 4.39263 8.28717 4.33762 7.75894C4.2255 6.68236 4.81894 5.65591 5.80788 5.21589C6.29309 5 7.04667 5 8.55383 5H15.4462C16.9534 5 17.7069 5 18.1922 5.21589C19.1811 5.65591 19.7745 6.68236 19.6624 7.75894C19.6074 8.28717 19.2314 8.94024 18.4794 10.2464L14.1839 17.7069ZM11.1 16.3412L6.56139 8.48002C6.31995 8.06185 6.19924 7.85276 6.18146 7.68365C6.14523 7.33896 6.33507 7.01015 6.65169 6.86919C6.80703 6.80002 7.04847 6.80002 7.53133 6.80002H7.53134L11.1 6.80002V16.3412ZM12.9 16.3412L17.4387 8.48002C17.6801 8.06185 17.8008 7.85276 17.8186 7.68365C17.8548 7.33896 17.665 7.01015 17.3484 6.86919C17.193 6.80002 16.9516 6.80002 16.4687 6.80002L12.9 6.80002V16.3412Z"></path></svg>'),TonIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.primary;return(()=>{const A=_tmpl$$q.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},_tmpl$$p=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><g clip-path="url(#clip0_3783_2045)"><circle cx="8" cy="8.00098" r="8"></circle><path d="M4.75 8.50098L7 10.751L11.75 6.00098" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_3783_2045"><rect width="16" height="16" fill="white" transform="translate(0 0.000976562)"></rect></clipPath></defs></svg>'),_tmpl$2$4=template$1('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="11"></circle><path d="M17.1364 9.6364C17.4879 9.28493 17.4879 8.71508 17.1364 8.36361C16.7849 8.01214 16.2151 8.01214 15.8636 8.36361L10 14.2272L8.1364 12.3636C7.78493 12.0121 7.21508 12.0121 6.86361 12.3636C6.51214 12.7151 6.51214 13.2849 6.86361 13.6364L9.36361 16.1364C9.71508 16.4879 10.2849 16.4879 10.6364 16.1364L17.1364 9.6364Z"></path></svg>'),_tmpl$3$2=template$1('<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="36" cy="36" r="33"></circle><path d="M50.9142 28.4142C51.6953 27.6332 51.6953 26.3668 50.9142 25.5858C50.1332 24.8047 48.8668 24.8047 48.0858 25.5858L30 43.6716L23.9142 37.5858C23.1332 36.8047 21.8668 36.8047 21.0858 37.5858C20.3047 38.3668 20.3047 39.6332 21.0858 40.4142L28.5858 47.9142C29.3668 48.6953 30.6332 48.6953 31.4142 47.9142L50.9142 28.4142Z"></path></svg>'),SuccessIcon=_=>{const d=useTheme(),v=()=>_.size||"s",A=()=>_.fill||d.colors.icon.success;return createMemo((()=>{const C=createMemo(()=>v()==="xs");return()=>C()?(()=>{const w=_tmpl$$p.cloneNode(!0),T=w.firstChild,R=T.firstChild,G=R.nextSibling;return createRenderEffect(I=>{const z=_.class,H=A(),Y=d.colors.constant.white;return z!==I._v$&&setAttribute(w,"class",I._v$=z),H!==I._v$2&&setAttribute(R,"fill",I._v$2=H),Y!==I._v$3&&setAttribute(G,"stroke",I._v$3=Y),I},{_v$:void 0,_v$2:void 0,_v$3:void 0}),w})():(()=>{const w=createMemo(()=>v()==="s");return()=>w()?(()=>{const T=_tmpl$2$4.cloneNode(!0),R=T.firstChild,G=R.nextSibling;return createRenderEffect(I=>{const z=_.class,H=A(),Y=d.colors.constant.white;return z!==I._v$4&&setAttribute(T,"class",I._v$4=z),H!==I._v$5&&setAttribute(R,"fill",I._v$5=H),Y!==I._v$6&&setAttribute(G,"fill",I._v$6=Y),I},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),T})():(()=>{const T=_tmpl$3$2.cloneNode(!0),R=T.firstChild,G=R.nextSibling;return createRenderEffect(I=>{const z=_.class,H=A(),Y=d.colors.constant.white;return z!==I._v$7&&setAttribute(T,"class",I._v$7=z),H!==I._v$8&&setAttribute(R,"fill",I._v$8=H),Y!==I._v$9&&setAttribute(G,"fill",I._v$9=Y),I},{_v$7:void 0,_v$8:void 0,_v$9:void 0}),T})()})()})())},_tmpl$$o=template$1('<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="36" cy="36" r="33"></circle><path d="M24.0858 26.9142C23.3047 26.1332 23.3047 24.8668 24.0858 24.0858C24.8668 23.3047 26.1332 23.3047 26.9142 24.0858L36 33.1716L45.0858 24.0858C45.8668 23.3047 47.1332 23.3047 47.9142 24.0858C48.6953 24.8668 48.6953 26.1332 47.9142 26.9142L38.8284 36L47.9142 45.0858C48.6953 45.8668 48.6953 47.1332 47.9142 47.9142C47.1332 48.6953 45.8668 48.6953 45.0858 47.9142L36 38.8284L26.9142 47.9142C26.1332 48.6953 24.8668 48.6953 24.0858 47.9142C23.3047 47.1332 23.3047 45.8668 24.0858 45.0858L33.1716 36L24.0858 26.9142Z"></path></svg>'),_tmpl$2$3=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><circle cx="24" cy="24.001" r="22"></circle><path d="M24 24.001L31.5 16.501M24 24.001L16.5 16.501M24 24.001L16.5 31.501M24 24.001L31.5 31.501" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),_tmpl$3$1=template$1('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="11"></circle><path d="M7.86361 9.1364C7.51214 8.78493 7.51214 8.21508 7.86361 7.86361C8.21508 7.51214 8.78493 7.51214 9.1364 7.86361L12 10.7272L14.8636 7.86361C15.2151 7.51214 15.7849 7.51214 16.1364 7.86361C16.4879 8.21508 16.4879 8.78493 16.1364 9.1364L13.2728 12L16.1364 14.8636C16.4879 15.2151 16.4879 15.7849 16.1364 16.1364C15.7849 16.4879 15.2151 16.4879 14.8636 16.1364L12 13.2728L9.1364 16.1364C8.78493 16.4879 8.21508 16.4879 7.86361 16.1364C7.51214 15.7849 7.51214 15.2151 7.86361 14.8636L10.7272 12L7.86361 9.1364Z"></path></svg>'),ErrorIcon=_=>{const d=useTheme(),v=()=>_.size||"m",A=()=>_.fill||d.colors.icon.error;return createMemo((()=>{const C=createMemo(()=>v()==="m");return()=>C()?(()=>{const w=_tmpl$$o.cloneNode(!0),T=w.firstChild,R=T.nextSibling;return createRenderEffect(G=>{const I=_.class,z=A(),H=d.colors.constant.white;return I!==G._v$&&setAttribute(w,"class",G._v$=I),z!==G._v$2&&setAttribute(T,"fill",G._v$2=z),H!==G._v$3&&setAttribute(R,"fill",G._v$3=H),G},{_v$:void 0,_v$2:void 0,_v$3:void 0}),w})():(()=>{const w=createMemo(()=>v()==="s");return()=>w()?(()=>{const T=_tmpl$2$3.cloneNode(!0),R=T.firstChild,G=R.nextSibling;return createRenderEffect(I=>{const z=_.class,H=A(),Y=d.colors.constant.white;return z!==I._v$4&&setAttribute(T,"class",I._v$4=z),H!==I._v$5&&setAttribute(R,"fill",I._v$5=H),Y!==I._v$6&&setAttribute(G,"stroke",I._v$6=Y),I},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),T})():(()=>{const T=_tmpl$3$1.cloneNode(!0),R=T.firstChild,G=R.nextSibling;return createRenderEffect(I=>{const z=_.class,H=A(),Y=d.colors.constant.white;return z!==I._v$7&&setAttribute(T,"class",I._v$7=z),H!==I._v$8&&setAttribute(R,"fill",I._v$8=H),Y!==I._v$9&&setAttribute(G,"fill",I._v$9=Y),I},{_v$7:void 0,_v$8:void 0,_v$9:void 0}),T})()})()})())},_tmpl$$n=template$1('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15.55 5.85123C18.9459 7.81184 20.1094 12.1541 18.1488 15.55C16.1882 18.9459 11.8459 20.1094 8.44998 18.1488C8.01952 17.9003 7.46909 18.0478 7.22056 18.4782C6.97203 18.9087 7.11952 19.4591 7.54998 19.7076C11.8068 22.1653 17.2499 20.7068 19.7076 16.45C22.1653 12.1932 20.7068 6.75005 16.45 4.29239C12.1932 1.83472 6.75003 3.29321 4.29236 7.55001C4.04383 7.98047 4.19132 8.53091 4.62178 8.77943C5.05224 9.02796 5.60268 8.88048 5.8512 8.45001C7.81181 5.05413 12.1541 3.89062 15.55 5.85123Z"></path></svg>'),_tmpl$2$2=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M22 2.99951C11.5066 2.99951 3 11.5061 3 21.9995C3 32.4929 11.5066 40.9995 22 40.9995C22.8284 40.9995 23.5 41.6711 23.5 42.4995C23.5 43.3279 22.8284 43.9995 22 43.9995C9.84974 43.9995 0 34.1498 0 21.9995C0 9.84925 9.84974 -0.000488281 22 -0.000488281C34.1503 -0.000488281 44 9.84925 44 21.9995C44 22.8279 43.3284 23.4995 42.5 23.4995C41.6716 23.4995 41 22.8279 41 21.9995C41 11.5061 32.4934 2.99951 22 2.99951Z"></path></svg>'),_tmpl$3=template$1('<svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M24 56.7846C35.479 63.412 50.1572 59.479 56.7846 47.9999C63.412 36.5209 59.479 21.8427 48 15.2153C36.521 8.58791 21.8428 12.5209 15.2154 23.9999" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),LoaderIcon=_=>{const d=useTheme(),v=()=>_.size||"xs",A=()=>_.fill||d.colors.icon.tertiary,C=h$2`
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
    `,w=u`
        animation: ${C} 1s linear infinite;
    `;return createMemo((()=>{const T=createMemo(()=>v()==="xs");return()=>T()?(()=>{const R=_tmpl$$n.cloneNode(!0),G=R.firstChild;return createRenderEffect(I=>{const z=cn(w,_.class),H=A();return z!==I._v$&&setAttribute(R,"class",I._v$=z),H!==I._v$2&&setAttribute(G,"fill",I._v$2=H),I},{_v$:void 0,_v$2:void 0}),R})():(()=>{const R=createMemo(()=>v()==="s");return()=>R()?(()=>{const G=_tmpl$2$2.cloneNode(!0),I=G.firstChild;return createRenderEffect(z=>{const H=cn(w,_.class),Y=A();return H!==z._v$3&&setAttribute(G,"class",z._v$3=H),Y!==z._v$4&&setAttribute(I,"fill",z._v$4=Y),z},{_v$3:void 0,_v$4:void 0}),G})():(()=>{const G=_tmpl$3.cloneNode(!0),I=G.firstChild;return createRenderEffect(z=>{const H=cn(w,_.class),Y=A();return H!==z._v$5&&setAttribute(G,"class",z._v$5=H),Y!==z._v$6&&setAttribute(I,"stroke",z._v$6=Y),z},{_v$5:void 0,_v$6:void 0}),G})()})()})())},_tmpl$$m=template$1('<svg width="158" height="28" viewBox="0 0 158 28" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M28 14.001C28 21.733 21.732 28.001 14 28.001C6.26801 28.001 0 21.733 0 14.001C0 6.26899 6.26801 0.000976562 14 0.000976562C21.732 0.000976562 28 6.26899 28 14.001ZM9.21931 8.00098H18.7801H18.7813C20.538 8.00098 21.6522 9.89966 20.7691 11.4302L14.8672 21.6576C14.4822 22.3254 13.5172 22.3254 13.1322 21.6576L7.23158 11.4302C6.34721 9.89726 7.4614 8.00098 9.21931 8.00098ZM13.1262 18.5882V9.74806H9.21811C8.78976 9.74806 8.53708 10.2029 8.74163 10.5578L11.8423 16.1035L13.1262 18.5882ZM16.1559 16.1047L19.2554 10.5566C19.4599 10.2017 19.2073 9.74685 18.7789 9.74685H14.8709V18.5906L16.1559 16.1047Z" fill="#0098EA"></path><path d="M18.7802 8.00098H9.21936C7.46145 8.00098 6.34727 9.89726 7.23164 11.4302L13.1322 21.6576C13.5173 22.3254 14.4823 22.3254 14.8673 21.6576L20.7691 11.4302C21.6523 9.89966 20.5381 8.00098 18.7814 8.00098H18.7802ZM13.1274 18.5906L11.8424 16.1035L8.74168 10.5578C8.53714 10.2029 8.78981 9.74806 9.21816 9.74806H13.1262V18.5918L13.1274 18.5906ZM19.2555 10.5566L16.156 16.1047L14.8709 18.5906V9.74685H18.779C19.2073 9.74685 19.46 10.2017 19.2555 10.5566Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M51.7483 22.1967C55.7182 22.1967 58.9609 18.954 58.9609 14.9841C58.9609 11.0142 55.7182 7.77148 51.7483 7.77148C47.7588 7.77148 44.5357 11.0142 44.5357 14.9841C44.5357 18.954 47.7588 22.1967 51.7483 22.1967ZM51.7483 19.1702C49.4686 19.1702 47.6802 17.2442 47.6802 14.9841C47.6802 12.724 49.4686 10.798 51.7483 10.798C54.0084 10.798 55.7968 12.724 55.7968 14.9841C55.7968 17.2442 54.0084 19.1702 51.7483 19.1702ZM37.0698 21.9609H40.2142V10.9946H44.2843V8.00732H33V10.9946H37.0698V21.9609ZM69.9379 8.00732H73.0823V21.9609H70.3899L63.59 13.3333V21.9609H60.4652V8.00732H63.1576L69.9379 16.6153V8.00732ZM79.2259 14.9887C79.2259 10.9202 82.351 7.77539 86.4982 7.77539C89.8592 7.77539 92.5519 9.95709 93.2202 12.6891H90.7437C90.154 11.0971 88.4637 9.9964 86.4982 9.9964C83.5893 9.9964 81.5452 12.1781 81.5452 14.9887C81.5452 17.7994 83.5893 19.9811 86.4982 19.9811C88.4637 19.9811 90.154 18.8804 90.7437 17.2884H93.2202C92.5519 20.0204 89.8592 22.2021 86.4982 22.2021C82.351 22.2021 79.2259 19.0573 79.2259 14.9887ZM104.584 17.0525C104.584 19.9025 102.343 22.1628 99.4342 22.1628C96.5253 22.1628 94.2846 19.9025 94.2846 17.0525C94.2846 14.2025 96.5253 11.9422 99.4342 11.9422C102.343 11.9422 104.584 14.2025 104.584 17.0525ZM96.4663 17.0525C96.4663 18.8018 97.6849 20.158 99.4342 20.158C101.164 20.158 102.382 18.8018 102.382 17.0525C102.382 15.3032 101.164 13.947 99.4342 13.947C97.6849 13.947 96.4663 15.3032 96.4663 17.0525ZM108.626 12.1388H106.463V21.9662H108.626V17.1311C108.626 15.0281 109.726 13.9077 111.161 13.9077C112.419 13.9077 113.205 14.8512 113.205 16.4039V21.9662H115.367V16.0501C115.367 13.5539 113.893 11.9422 111.613 11.9422C110.335 11.9422 109.215 12.4926 108.626 13.4753V12.1388ZM117.839 12.1388H120.001V13.4753C120.59 12.4926 121.711 11.9422 122.988 11.9422C125.268 11.9422 126.742 13.5539 126.742 16.0501V21.9662H124.58V16.4039C124.58 14.8512 123.794 13.9077 122.536 13.9077C121.101 13.9077 120.001 15.0281 120.001 17.1311V21.9662H117.839V12.1388ZM133.558 22.1628C136.054 22.1628 137.823 20.728 138.373 18.8804H136.113C135.661 19.8238 134.717 20.2563 133.636 20.2563C131.887 20.2563 130.747 19.077 130.668 17.5832H138.491C138.688 14.2419 136.585 11.9422 133.577 11.9422C130.551 11.9422 128.526 14.1436 128.526 17.0525C128.526 20.0007 130.629 22.1628 133.558 22.1628ZM130.747 16.0501C131.042 14.5367 132.162 13.7505 133.518 13.7505C134.717 13.7505 135.838 14.4581 136.172 16.0501H130.747ZM149.851 18.3694C149.32 20.5511 147.453 22.1628 144.859 22.1628C141.871 22.1628 139.709 19.8828 139.709 17.0525C139.709 14.2222 141.871 11.9422 144.859 11.9422C147.453 11.9422 149.32 13.5539 149.851 15.7356H147.571C147.178 14.6743 146.215 13.9077 144.859 13.9077C143.109 13.9077 141.91 15.2246 141.91 17.0525C141.91 18.8804 143.109 20.1973 144.859 20.1973C146.215 20.1973 147.178 19.4307 147.571 18.3694H149.851ZM155.75 22.0645C156.418 22.0645 156.929 21.9859 157.362 21.8483V19.9221C157.047 20.0401 156.615 20.1187 156.202 20.1187C155.082 20.1187 154.551 19.6666 154.551 18.448V14.065H157.362V12.1388H154.551V9.40675H152.389V12.1388H150.345V14.065H152.389V18.8018C152.389 21.0228 153.863 22.0645 155.75 22.0645Z"></path></svg>'),TonConnectBrand=()=>{const _=useTheme(),d=()=>_.theme===THEME.DARK?_.colors.constant.white:_.colors.constant.black;return(()=>{const v=_tmpl$$m.cloneNode(!0),A=v.firstChild,C=A.nextSibling,w=C.nextSibling;return createRenderEffect(()=>setAttribute(w,"fill",d())),v})()},_tmpl$$l=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.56608 4.42584C5.82527 3.32158 6.8176 2.5 8.00001 2.5C9.38072 2.5 10.5 3.61929 10.5 5C10.5 5.63026 10.3391 6.0386 10.1264 6.34455C9.90018 6.66993 9.58561 6.92478 9.18864 7.20877C9.12579 7.25372 9.05873 7.30025 8.9887 7.34883C8.27392 7.84472 7.25001 8.55507 7.25001 10V10.25C7.25001 10.6642 7.5858 11 8.00001 11C8.41422 11 8.75001 10.6642 8.75001 10.25V10C8.75001 9.36502 9.10777 9.1096 9.94554 8.51149L10.0614 8.42873C10.4769 8.13147 10.9748 7.75194 11.358 7.20076C11.7547 6.63015 12 5.91973 12 5C12 2.79086 10.2091 1 8.00001 1C6.10564 1 4.5205 2.31615 4.10577 4.08308C4.01112 4.48634 4.26129 4.88997 4.66454 4.98462C5.0678 5.07927 5.47143 4.8291 5.56608 4.42584ZM8.00001 15C8.60752 15 9.10001 14.5075 9.10001 13.9C9.10001 13.2925 8.60752 12.8 8.00001 12.8C7.39249 12.8 6.90001 13.2925 6.90001 13.9C6.90001 14.5075 7.39249 15 8.00001 15Z"></path></svg>'),QuestionIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$l.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},_tmpl$$k=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.98156 8.75C9.84854 11.4328 9.01206 13.5 8 13.5C6.98794 13.5 6.15146 11.4328 6.01844 8.75H9.98156ZM11.4832 8.75C11.4217 10.1155 11.1929 11.3869 10.8239 12.4017C10.7734 12.5405 10.7188 12.6789 10.6595 12.8154C12.1454 11.993 13.2103 10.5029 13.4493 8.75H11.4832ZM13.4493 7.25H11.4832C11.4217 5.88453 11.1929 4.61314 10.8239 3.5983C10.7734 3.4595 10.7188 3.32111 10.6595 3.18459C12.1454 4.00697 13.2103 5.49709 13.4493 7.25ZM9.98156 7.25H6.01844C6.15144 4.56764 6.98769 2.50062 7.99955 2.5H8C9.01206 2.5 9.84854 4.56724 9.98156 7.25ZM4.51678 7.25C4.57826 5.88453 4.80706 4.61314 5.1761 3.5983C5.22657 3.4595 5.28124 3.32111 5.3405 3.18459C3.85463 4.00697 2.78972 5.49709 2.55071 7.25H4.51678ZM2.55071 8.75C2.78972 10.5029 3.85463 11.993 5.3405 12.8154C5.28124 12.6789 5.22657 12.5405 5.1761 12.4017C4.80706 11.3869 4.57826 10.1155 4.51678 8.75H2.55071ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z"></path></svg>'),BrowserIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.primary;return(()=>{const A=_tmpl$$k.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},_tmpl$$j=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 4.8C2.5 3.11984 2.5 2.27976 2.82698 1.63803C3.1146 1.07354 3.57354 0.614601 4.13803 0.32698C4.77976 0 5.61984 0 7.3 0H8.7C10.3802 0 11.2202 0 11.862 0.32698C12.4265 0.614601 12.8854 1.07354 13.173 1.63803C13.5 2.27976 13.5 3.11984 13.5 4.8V11.2C13.5 12.8802 13.5 13.7202 13.173 14.362C12.8854 14.9265 12.4265 15.3854 11.862 15.673C11.2202 16 10.3802 16 8.7 16H7.3C5.61984 16 4.77976 16 4.13803 15.673C3.57354 15.3854 3.1146 14.9265 2.82698 14.362C2.5 13.7202 2.5 12.8802 2.5 11.2V4.8ZM4 3.9C4 3.05992 4 2.63988 4.16349 2.31901C4.3073 2.03677 4.53677 1.8073 4.81901 1.66349C5.13988 1.5 5.55992 1.5 6.4 1.5H9.6C10.4401 1.5 10.8601 1.5 11.181 1.66349C11.4632 1.8073 11.6927 2.03677 11.8365 2.31901C12 2.63988 12 3.05992 12 3.9V12.1C12 12.9401 12 13.3601 11.8365 13.681C11.6927 13.9632 11.4632 14.1927 11.181 14.3365C10.8601 14.5 10.4401 14.5 9.6 14.5H6.4C5.55992 14.5 5.13988 14.5 4.81901 14.3365C4.53677 14.1927 4.3073 13.9632 4.16349 13.681C4 13.3601 4 12.9401 4 12.1V3.9ZM7 2.5C6.58579 2.5 6.25 2.83579 6.25 3.25C6.25 3.66421 6.58579 4 7 4H9C9.41421 4 9.75 3.66421 9.75 3.25C9.75 2.83579 9.41421 2.5 9 2.5H7Z"></path></svg>'),MobileIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.primary;return(()=>{const A=_tmpl$$j.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},_tmpl$$i=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 6.8C1.5 5.11984 1.5 4.27976 1.82698 3.63803C2.1146 3.07354 2.57354 2.6146 3.13803 2.32698C3.77976 2 4.61984 2 6.3 2H9.7C11.3802 2 12.2202 2 12.862 2.32698C13.4265 2.6146 13.8854 3.07354 14.173 3.63803C14.5 4.27976 14.5 5.11984 14.5 6.8V11.5H15.25C15.6642 11.5 16 11.8358 16 12.25C16 12.6642 15.6642 13 15.25 13H0.75C0.335786 13 0 12.6642 0 12.25C0 11.8358 0.335786 11.5 0.75 11.5H1.5V6.8ZM3 11.5H13V5.9C13 5.05992 13 4.63988 12.8365 4.31901C12.6927 4.03677 12.4632 3.8073 12.181 3.66349C11.8601 3.5 11.4401 3.5 10.6 3.5H5.4C4.55992 3.5 4.13988 3.5 3.81901 3.66349C3.53677 3.8073 3.3073 4.03677 3.16349 4.31901C3 4.63988 3 5.05992 3 5.9V11.5Z"></path></svg>'),DesktopIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.primary;return(()=>{const A=_tmpl$$i.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},_tmpl$$h=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none"><g clip-path="url(#clip0_3676_1603)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 1.25049C15.5 0.836275 15.1642 0.500488 14.75 0.500488C14.3358 0.500488 14 0.836275 14 1.25049V3.67012C12.7187 2.04487 10.7318 1.00049 8.5 1.00049C4.63401 1.00049 1.5 4.1345 1.5 8.00049C1.5 11.8665 4.63401 15.0005 8.5 15.0005C11.6844 15.0005 14.3703 12.8748 15.2199 9.96661C15.3361 9.56902 15.1079 9.15254 14.7103 9.03638C14.3127 8.92023 13.8962 9.14838 13.7801 9.54597C13.1123 11.8319 11 13.5005 8.5 13.5005C5.46243 13.5005 3 11.0381 3 8.00049C3 4.96292 5.46243 2.50049 8.5 2.50049C10.321 2.50049 11.9363 3.3855 12.9377 4.75049H10.5C10.0858 4.75049 9.75 5.08627 9.75 5.50049C9.75 5.9147 10.0858 6.25049 10.5 6.25049H14.75C15.1642 6.25049 15.5 5.9147 15.5 5.50049V1.25049Z"></path></g><defs><clipPath id="clip0_3676_1603"><rect width="16" height="16" fill="white" transform="translate(0.5 0.000488281)"></rect></clipPath></defs></svg>'),RetryIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.accent;return(()=>{const A=_tmpl$$h.cloneNode(!0),C=A.firstChild,w=C.firstChild;return createRenderEffect(()=>setAttribute(w,"fill",v())),A})()},_tmpl$$g=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 4.06119V6.75053C13 7.16474 13.3358 7.50053 13.75 7.50053C14.1642 7.50053 14.5 7.16474 14.5 6.75053V2.75053L14.5 2.72807C14.5001 2.63191 14.5003 2.49627 14.4842 2.37627C14.4638 2.22503 14.4063 1.99261 14.2071 1.79342C14.0079 1.59423 13.7755 1.5367 13.6243 1.51637C13.5043 1.50023 13.3686 1.50039 13.2725 1.50051L13.25 1.50053H9.25C8.83579 1.50053 8.5 1.83631 8.5 2.25053C8.5 2.66474 8.83579 3.00053 9.25 3.00053H11.9393L7.21967 7.7202C6.92678 8.01309 6.92678 8.48796 7.21967 8.78086C7.51256 9.07375 7.98744 9.07375 8.28033 8.78086L13 4.06119ZM5.85 1.50053H5.81903H5.81899C5.21528 1.50052 4.71702 1.50051 4.31113 1.53367C3.88956 1.56812 3.50203 1.64204 3.13803 1.82751C2.57354 2.11513 2.1146 2.57407 1.82698 3.13856C1.64151 3.50256 1.56759 3.89009 1.53315 4.31166C1.49998 4.71755 1.49999 5.21581 1.5 5.81953V5.81955V5.85053V10.1505V10.1815V10.1815C1.49999 10.7852 1.49998 11.2835 1.53315 11.6894C1.56759 12.111 1.64151 12.4985 1.82698 12.8625C2.1146 13.427 2.57354 13.8859 3.13803 14.1735C3.50203 14.359 3.88956 14.4329 4.31113 14.4674C4.71702 14.5005 5.21527 14.5005 5.81897 14.5005H5.81901H5.85H10.15H10.181H10.181C10.7847 14.5005 11.283 14.5005 11.6889 14.4674C12.1104 14.4329 12.498 14.359 12.862 14.1735C13.4265 13.8859 13.8854 13.427 14.173 12.8625C14.3585 12.4985 14.4324 12.111 14.4669 11.6894C14.5 11.2835 14.5 10.7853 14.5 10.1816V10.1815V10.1505V9.75053C14.5 9.33631 14.1642 9.00053 13.75 9.00053C13.3358 9.00053 13 9.33631 13 9.75053V10.1505C13 10.793 12.9994 11.2297 12.9718 11.5672C12.945 11.8961 12.8963 12.0642 12.8365 12.1815C12.6927 12.4638 12.4632 12.6932 12.181 12.837C12.0637 12.8968 11.8955 12.9455 11.5667 12.9724C11.2292 12.9999 10.7924 13.0005 10.15 13.0005H5.85C5.20757 13.0005 4.77085 12.9999 4.43328 12.9724C4.10447 12.9455 3.93632 12.8968 3.81902 12.837C3.53677 12.6932 3.3073 12.4638 3.16349 12.1815C3.10372 12.0642 3.05503 11.8961 3.02816 11.5672C3.00058 11.2297 3 10.793 3 10.1505V5.85053C3 5.20809 3.00058 4.77137 3.02816 4.43381C3.05503 4.10499 3.10372 3.93684 3.16349 3.81954C3.3073 3.5373 3.53677 3.30783 3.81902 3.16402C3.93632 3.10425 4.10447 3.05556 4.43328 3.02869C4.77085 3.00111 5.20757 3.00053 5.85 3.00053H6.25C6.66422 3.00053 7 2.66474 7 2.25053C7 1.83631 6.66422 1.50053 6.25 1.50053H5.85Z"></path></svg>'),LinkIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.accent;return(()=>{const A=_tmpl$$g.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},_tmpl$$f=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none"><g clip-path="url(#clip0_3676_1274)"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.82698 2.63901C1.5 3.28074 1.5 4.12082 1.5 5.80098V8.80098V9.00098V10.201C1.5 11.8811 1.5 12.7212 1.82698 13.3629C2.1146 13.9274 2.57354 14.3864 3.13803 14.674C3.77976 15.001 4.61984 15.001 6.3 15.001H11.7C13.3802 15.001 14.2202 15.001 14.862 14.674C15.4265 14.3864 15.8854 13.9274 16.173 13.3629C16.5 12.7212 16.5 11.8811 16.5 10.201V8.80098C16.5 7.12082 16.5 6.28074 16.173 5.63901C15.8854 5.07452 15.4265 4.61558 14.862 4.32796C14.743 4.26733 14.6172 4.21795 14.4805 4.17772C14.4501 3.49449 14.3722 3.02994 14.173 2.63901C13.8854 2.07452 13.4265 1.61558 12.862 1.32796C12.2202 1.00098 11.3802 1.00098 9.7 1.00098H6.3C4.61984 1.00098 3.77976 1.00098 3.13803 1.32796C2.57354 1.61558 2.1146 2.07452 1.82698 2.63901ZM12.9861 4.00942C12.9684 3.7108 12.9281 3.49982 12.8365 3.31999C12.6927 3.03775 12.4632 2.80828 12.181 2.66447C11.8601 2.50098 11.4401 2.50098 10.6 2.50098H5.4C4.55992 2.50098 4.13988 2.50098 3.81901 2.66447C3.53677 2.80828 3.3073 3.03775 3.16349 3.31999C3.03615 3.56991 3.00799 3.88 3.00177 4.40188C3.04646 4.37612 3.09189 4.35146 3.13803 4.32796C3.77976 4.00098 4.61984 4.00098 6.3 4.00098H11.7C12.1966 4.00098 12.6197 4.00098 12.9861 4.00942ZM3 7.90098V8.10098C3 8.47468 3 8.76527 3.01439 9.00098H3V11.101C3 11.9411 3 12.3611 3.16349 12.682C3.3073 12.9642 3.53677 13.1937 3.81901 13.3375C4.13988 13.501 4.55992 13.501 5.4 13.501H12.6C13.4401 13.501 13.8601 13.501 14.181 13.3375C14.4632 13.1937 14.6927 12.9642 14.8365 12.682C15 12.3611 15 11.9411 15 11.101V7.90098C15 7.0609 15 6.64086 14.8365 6.31999C14.6927 6.03775 14.4632 5.80828 14.181 5.66447C13.8601 5.50098 13.4401 5.50098 12.6 5.50098H5.4C4.55992 5.50098 4.13988 5.50098 3.81901 5.66447C3.53677 5.80828 3.3073 6.03775 3.16349 6.31999C3 6.64086 3 7.0609 3 7.90098ZM10.5 9.75098C10.5 9.33676 10.8358 9.00098 11.25 9.00098H12.75C13.1642 9.00098 13.5 9.33676 13.5 9.75098C13.5 10.1652 13.1642 10.501 12.75 10.501H11.25C10.8358 10.501 10.5 10.1652 10.5 9.75098Z"></path></g><defs><clipPath id="clip0_3676_1274"><rect width="16" height="16" fill="white" transform="translate(0.5 0.000976562)"></rect></clipPath></defs></svg>'),WalletIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.accent;return(()=>{const A=_tmpl$$f.cloneNode(!0),C=A.firstChild,w=C.firstChild;return createRenderEffect(()=>setAttribute(w,"fill",v())),A})()},_tmpl$$e=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M39.6319 16.8719C38.3212 16.2041 36.7002 16.0478 34 16.0112V11C34 5.47715 29.5228 1 24 1C18.4772 1 14 5.47715 14 11V16.0112C11.2998 16.0478 9.6788 16.2041 8.36808 16.8719C6.86278 17.6389 5.63893 18.8628 4.87195 20.3681C4 22.0794 4 24.3196 4 28.8V32.2C4 36.6804 4 38.9206 4.87195 40.6319C5.63893 42.1372 6.86278 43.3611 8.36808 44.1281C10.0794 45 12.3196 45 16.8 45H31.2C35.6804 45 37.9206 45 39.6319 44.1281C41.1372 43.3611 42.3611 42.1372 43.1281 40.6319C44 38.9206 44 36.6804 44 32.2V28.8C44 24.3196 44 22.0794 43.1281 20.3681C42.3611 18.8628 41.1372 17.6389 39.6319 16.8719ZM31 11V16H17V11C17 7.13401 20.134 4 24 4C27.866 4 31 7.13401 31 11ZM7.54497 21.73C7 22.7996 7 24.1997 7 27V34C7 36.8003 7 38.2004 7.54497 39.27C8.02433 40.2108 8.78924 40.9757 9.73005 41.455C10.7996 42 12.1997 42 15 42H33C35.8003 42 37.2004 42 38.27 41.455C39.2108 40.9757 39.9757 40.2108 40.455 39.27C41 38.2004 41 36.8003 41 34V27C41 24.1997 41 22.7996 40.455 21.73C39.9757 20.7892 39.2108 20.0243 38.27 19.545C37.2004 19 35.8003 19 33 19H15C12.1997 19 10.7996 19 9.73005 19.545C8.78924 20.0243 8.02433 20.7892 7.54497 21.73ZM24 24C23.1716 24 22.5 24.6716 22.5 25.5V29.5C22.5 30.3284 23.1716 31 24 31C24.8284 31 25.5 30.3284 25.5 29.5V25.5C25.5 24.6716 24.8284 24 24 24Z"></path></svg>'),SecurityIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$e.cloneNode(!0),C=A.firstChild;return createRenderEffect(w=>{const T=_.class,R=v();return T!==w._v$&&setAttribute(A,"class",w._v$=T),R!==w._v$2&&setAttribute(C,"fill",w._v$2=R),w},{_v$:void 0,_v$2:void 0}),A})()},_tmpl$$d=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M37.485 37.3849C40.894 33.9506 43 29.2212 43 24C43 13.5066 34.4934 5 24 5C13.5066 5 5 13.5066 5 24C5 29.2213 7.1061 33.9507 10.5151 37.385C13.3583 32.9438 18.3354 30 24.0001 30C29.6647 30 34.6418 32.9437 37.485 37.3849ZM35.1809 39.3635C32.9143 35.5532 28.7554 33 24.0001 33C19.2448 33 15.0858 35.5533 12.8193 39.3636C15.9564 41.6506 19.8206 43 24 43C28.1795 43 32.0437 41.6505 35.1809 39.3635ZM24 46C36.1503 46 46 36.1503 46 24C46 11.8497 36.1503 2 24 2C11.8497 2 2 11.8497 2 24C2 36.1503 11.8497 46 24 46ZM24 24C26.7614 24 29 21.7614 29 19C29 16.2386 26.7614 14 24 14C21.2386 14 19 16.2386 19 19C19 21.7614 21.2386 24 24 24ZM24 27C28.4183 27 32 23.4183 32 19C32 14.5817 28.4183 11 24 11C19.5817 11 16 14.5817 16 19C16 23.4183 19.5817 27 24 27Z"></path></svg>'),PersonalityIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$d.cloneNode(!0),C=A.firstChild;return createRenderEffect(w=>{const T=_.class,R=v();return T!==w._v$&&setAttribute(A,"class",w._v$=T),R!==w._v$2&&setAttribute(C,"fill",w._v$2=R),w},{_v$:void 0,_v$2:void 0}),A})()},_tmpl$$c=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M34.5607 4.43934C33.9749 3.85355 33.0251 3.85355 32.4393 4.43934C31.8536 5.02513 31.8536 5.97487 32.4393 6.56066L37.8787 12H10.5C9.67157 12 9 12.6716 9 13.5C9 14.3284 9.67157 15 10.5 15H37.8787L32.4393 20.4393C31.8536 21.0251 31.8536 21.9749 32.4393 22.5607C33.0251 23.1464 33.9749 23.1464 34.5607 22.5607L42.5607 14.5607C43.1464 13.9749 43.1464 13.0251 42.5607 12.4393L34.5607 4.43934ZM13.4393 25.4393C14.0251 24.8536 14.9749 24.8536 15.5607 25.4393C16.1464 26.0251 16.1464 26.9749 15.5607 27.5607L10.1213 33H37.5C38.3284 33 39 33.6716 39 34.5C39 35.3284 38.3284 36 37.5 36H10.1213L15.5607 41.4393C16.1464 42.0251 16.1464 42.9749 15.5607 43.5607C14.9749 44.1464 14.0251 44.1464 13.4393 43.5607L5.43934 35.5607C4.85355 34.9749 4.85355 34.0251 5.43934 33.4393L13.4393 25.4393Z"></path></svg>'),SwapIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$c.cloneNode(!0),C=A.firstChild;return createRenderEffect(w=>{const T=_.class,R=v();return T!==w._v$&&setAttribute(A,"class",w._v$=T),R!==w._v$2&&setAttribute(C,"fill",w._v$2=R),w},{_v$:void 0,_v$2:void 0}),A})()},_tmpl$$b=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.75 12.002C1.75 9.20169 1.75 7.80156 2.29497 6.732C2.77433 5.79119 3.53924 5.02629 4.48005 4.54692C5.54961 4.00195 6.94974 4.00195 9.75 4.00195H17.25C20.0503 4.00195 21.4504 4.00195 22.52 4.54692C23.4608 5.02629 24.2257 5.79119 24.705 6.732C24.8256 6.96861 24.9195 7.2214 24.9926 7.50195H21.5C19.6377 7.50195 18.7065 7.50195 17.9609 7.77334C16.711 8.22828 15.7263 9.21291 15.2714 10.4629C15 11.2085 15 12.1396 15 14.002C15 15.8643 15 16.7954 15.2714 17.541C15.7263 18.791 16.711 19.7756 17.9609 20.2306C18.7065 20.502 19.6377 20.502 21.5 20.502H24.9926C24.9195 20.7825 24.8256 21.0353 24.705 21.2719C24.2257 22.2127 23.4608 22.9776 22.52 23.457C21.4504 24.002 20.0503 24.002 17.25 24.002H9.75C6.94974 24.002 5.54961 24.002 4.48005 23.457C3.53924 22.9776 2.77433 22.2127 2.29497 21.2719C1.75 20.2023 1.75 18.8022 1.75 16.002V12.002ZM16.4999 13.802C16.4999 12.1218 16.4999 11.2817 16.8269 10.64C17.1145 10.0755 17.5735 9.61656 18.138 9.32894C18.7797 9.00196 19.6198 9.00196 21.2999 9.00196H23.1999C24.8801 9.00196 25.7202 9.00196 26.3619 9.32894C26.9264 9.61656 27.3853 10.0755 27.673 10.64C27.9999 11.2817 27.9999 12.1218 27.9999 13.802V14.202C27.9999 15.8821 27.9999 16.7222 27.673 17.3639C27.3853 17.9284 26.9264 18.3874 26.3619 18.675C25.7202 19.002 24.8801 19.002 23.1999 19.002H21.2999C19.6198 19.002 18.7797 19.002 18.138 18.675C17.5735 18.3874 17.1145 17.9284 16.8269 17.3639C16.4999 16.7222 16.4999 15.8821 16.4999 14.202V13.802ZM22.4999 14.002C22.4999 14.9685 21.7164 15.752 20.7499 15.752C19.7834 15.752 18.9999 14.9685 18.9999 14.002C18.9999 13.0355 19.7834 12.252 20.7499 12.252C21.7164 12.252 22.4999 13.0355 22.4999 14.002Z"></path></svg>'),AtWalletIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.constant.white;return(()=>{const A=_tmpl$$b.cloneNode(!0),C=A.firstChild;return createRenderEffect(w=>{const T=_.class,R=v();return T!==w._v$&&setAttribute(A,"class",w._v$=T),R!==w._v$2&&setAttribute(C,"fill",w._v$2=R),w},{_v$:void 0,_v$2:void 0}),A})()},_tmpl$$a=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.0001 10.0001C10.0016 8.02333 10.0267 6.98719 10.436 6.18404C10.8195 5.43139 11.4314 4.81947 12.184 4.43597C13.0397 4 14.1598 4 16.4 4H17.6C19.8402 4 20.9603 4 21.816 4.43597C22.5686 4.81947 23.1805 5.43139 23.564 6.18404C24 7.03969 24 8.15979 24 10.4V11.6C24 13.8402 24 14.9603 23.564 15.816C23.1805 16.5686 22.5686 17.1805 21.816 17.564C21.0128 17.9733 19.9767 17.9984 17.9999 17.9999C17.9984 19.9767 17.9733 21.0128 17.564 21.816C17.1805 22.5686 16.5686 23.1805 15.816 23.564C14.9603 24 13.8402 24 11.6 24H10.4C8.15979 24 7.03969 24 6.18404 23.564C5.43139 23.1805 4.81947 22.5686 4.43597 21.816C4 20.9603 4 19.8402 4 17.6V16.4C4 14.1598 4 13.0397 4.43597 12.184C4.81947 11.4314 5.43139 10.8195 6.18404 10.436C6.98719 10.0267 8.02333 10.0016 10.0001 10.0001ZM10 11.5H9.5C8.09987 11.5 7.3998 11.5 6.86502 11.7725C6.39462 12.0122 6.01217 12.3946 5.77248 12.865C5.5 13.3998 5.5 14.0999 5.5 15.5V18.5C5.5 19.9001 5.5 20.6002 5.77248 21.135C6.01217 21.6054 6.39462 21.9878 6.86502 22.2275C7.3998 22.5 8.09987 22.5 9.5 22.5H12.5C13.9001 22.5 14.6002 22.5 15.135 22.2275C15.6054 21.9878 15.9878 21.6054 16.2275 21.135C16.5 20.6002 16.5 19.9001 16.5 18.5V18H16.4C14.1598 18 13.0397 18 12.184 17.564C11.4314 17.1805 10.8195 16.5686 10.436 15.816C10 14.9603 10 13.8402 10 11.6V11.5ZM11.5 9.5C11.5 8.09987 11.5 7.3998 11.7725 6.86502C12.0122 6.39462 12.3946 6.01217 12.865 5.77248C13.3998 5.5 14.0999 5.5 15.5 5.5H18.5C19.9001 5.5 20.6002 5.5 21.135 5.77248C21.6054 6.01217 21.9878 6.39462 22.2275 6.86502C22.5 7.3998 22.5 8.09987 22.5 9.5V12.5C22.5 13.9001 22.5 14.6002 22.2275 15.135C21.9878 15.6054 21.6054 15.9878 21.135 16.2275C20.6002 16.5 19.9001 16.5 18.5 16.5H15.5C14.0999 16.5 13.3998 16.5 12.865 16.2275C12.3946 15.9878 12.0122 15.6054 11.7725 15.135C11.5 14.6002 11.5 13.9001 11.5 12.5V9.5Z"></path></svg>'),CopyLightIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$a.cloneNode(!0),C=A.firstChild;return createRenderEffect(w=>{const T=v(),R=v();return T!==w._v$&&setAttribute(A,"fill",w._v$=T),R!==w._v$2&&setAttribute(C,"fill",w._v$2=R),w},{_v$:void 0,_v$2:void 0}),A})()},_tmpl$$9=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="17" viewBox="0 0 16 17" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 4.12695C1 3.07754 1 2.55284 1.19202 2.14684C1.38986 1.72856 1.7266 1.39181 2.14489 1.19397C2.55088 1.00195 3.07559 1.00195 4.125 1.00195C5.17441 1.00195 5.69912 1.00195 6.10511 1.19397C6.5234 1.39181 6.86014 1.72856 7.05798 2.14684C7.25 2.55284 7.25 3.07754 7.25 4.12695C7.25 5.17636 7.25 5.70107 7.05798 6.10706C6.86014 6.52535 6.5234 6.8621 6.10511 7.05993C5.69912 7.25195 5.17441 7.25195 4.125 7.25195C3.07559 7.25195 2.55088 7.25195 2.14489 7.05993C1.7266 6.8621 1.38986 6.52535 1.19202 6.10706C1 5.70107 1 5.17636 1 4.12695ZM2.5 3.30195C2.5 3.02193 2.5 2.88191 2.5545 2.77496C2.60243 2.68088 2.67892 2.60439 2.773 2.55645C2.87996 2.50195 3.01997 2.50195 3.3 2.50195H4.95C5.23003 2.50195 5.37004 2.50195 5.477 2.55645C5.57108 2.60439 5.64757 2.68088 5.6955 2.77496C5.75 2.88191 5.75 3.02193 5.75 3.30195V4.95195C5.75 5.23198 5.75 5.37199 5.6955 5.47895C5.64757 5.57303 5.57108 5.64952 5.477 5.69746C5.37004 5.75195 5.23003 5.75195 4.95 5.75195H3.3C3.01997 5.75195 2.87996 5.75195 2.773 5.69746C2.67892 5.64952 2.60243 5.57303 2.5545 5.47895C2.5 5.37199 2.5 5.23198 2.5 4.95195V3.30195ZM1 11.877C1 10.8275 1 10.3028 1.19202 9.89684C1.38986 9.47856 1.7266 9.14181 2.14489 8.94397C2.55088 8.75195 3.07559 8.75195 4.125 8.75195C5.17441 8.75195 5.69912 8.75195 6.10511 8.94397C6.5234 9.14181 6.86014 9.47856 7.05798 9.89684C7.25 10.3028 7.25 10.8275 7.25 11.877C7.25 12.9264 7.25 13.4511 7.05798 13.8571C6.86014 14.2753 6.5234 14.6121 6.10511 14.8099C5.69912 15.002 5.17441 15.002 4.125 15.002C3.07559 15.002 2.55088 15.002 2.14489 14.8099C1.7266 14.6121 1.38986 14.2753 1.19202 13.8571C1 13.4511 1 12.9264 1 11.877ZM2.5 11.052C2.5 10.7719 2.5 10.6319 2.5545 10.525C2.60243 10.4309 2.67892 10.3544 2.773 10.3064C2.87996 10.252 3.01997 10.252 3.3 10.252H4.95C5.23003 10.252 5.37004 10.252 5.477 10.3064C5.57108 10.3544 5.64757 10.4309 5.6955 10.525C5.75 10.6319 5.75 10.7719 5.75 11.052V12.702C5.75 12.982 5.75 13.122 5.6955 13.2289C5.64757 13.323 5.57108 13.3995 5.477 13.4475C5.37004 13.502 5.23003 13.502 4.95 13.502H3.3C3.01997 13.502 2.87996 13.502 2.773 13.4475C2.67892 13.3995 2.60243 13.323 2.5545 13.2289C2.5 13.122 2.5 12.982 2.5 12.702V11.052ZM8.94202 2.14684C8.75 2.55284 8.75 3.07754 8.75 4.12695C8.75 5.17636 8.75 5.70107 8.94202 6.10706C9.13986 6.52535 9.4766 6.8621 9.89489 7.05993C10.3009 7.25195 10.8256 7.25195 11.875 7.25195C12.9244 7.25195 13.4491 7.25195 13.8551 7.05993C14.2734 6.8621 14.6101 6.52535 14.808 6.10706C15 5.70107 15 5.17636 15 4.12695C15 3.07754 15 2.55284 14.808 2.14684C14.6101 1.72856 14.2734 1.39181 13.8551 1.19397C13.4491 1.00195 12.9244 1.00195 11.875 1.00195C10.8256 1.00195 10.3009 1.00195 9.89489 1.19397C9.4766 1.39181 9.13986 1.72856 8.94202 2.14684ZM10.3045 2.77496C10.25 2.88191 10.25 3.02193 10.25 3.30195V4.95195C10.25 5.23198 10.25 5.37199 10.3045 5.47895C10.3524 5.57303 10.4289 5.64952 10.523 5.69746C10.63 5.75195 10.77 5.75195 11.05 5.75195H12.7C12.98 5.75195 13.12 5.75195 13.227 5.69746C13.3211 5.64952 13.3976 5.57303 13.4455 5.47895C13.5 5.37199 13.5 5.23198 13.5 4.95195V3.30195C13.5 3.02193 13.5 2.88191 13.4455 2.77496C13.3976 2.68088 13.3211 2.60439 13.227 2.55645C13.12 2.50195 12.98 2.50195 12.7 2.50195H11.05C10.77 2.50195 10.63 2.50195 10.523 2.55645C10.4289 2.60439 10.3524 2.68088 10.3045 2.77496ZM8.80727 9.13518C8.75 9.26242 8.75 9.4256 8.75 9.75195C8.75 10.0783 8.75 10.2415 8.80727 10.3687C8.87245 10.5136 8.9884 10.6295 9.13323 10.6947C9.26047 10.752 9.42365 10.752 9.75 10.752C10.0764 10.752 10.2395 10.752 10.3668 10.6947C10.5116 10.6295 10.6276 10.5136 10.6927 10.3687C10.75 10.2415 10.75 10.0783 10.75 9.75195C10.75 9.4256 10.75 9.26242 10.6927 9.13518C10.6276 8.99035 10.5116 8.8744 10.3668 8.80922C10.2395 8.75195 10.0764 8.75195 9.75 8.75195C9.42365 8.75195 9.26047 8.75195 9.13323 8.80922C8.9884 8.8744 8.87245 8.99035 8.80727 9.13518ZM10.87 11.8771C10.87 11.546 10.87 11.3805 10.9289 11.2517C10.9938 11.1098 11.1077 10.9959 11.2497 10.931C11.3784 10.8721 11.5439 10.8721 11.875 10.8721C12.2061 10.8721 12.3716 10.8721 12.5003 10.931C12.6423 10.9959 12.7562 11.1098 12.8211 11.2517C12.88 11.3805 12.88 11.546 12.88 11.8771C12.88 12.2081 12.88 12.3737 12.8211 12.5024C12.7562 12.6444 12.6423 12.7583 12.5003 12.8232C12.3716 12.8821 12.2061 12.8821 11.875 12.8821C11.5439 12.8821 11.3784 12.8821 11.2497 12.8232C11.1077 12.7583 10.9938 12.6444 10.9289 12.5024C10.87 12.3737 10.87 12.2081 10.87 11.8771ZM8.80727 13.3852C8.75 13.5124 8.75 13.6756 8.75 14.002C8.75 14.3283 8.75 14.4915 8.80727 14.6187C8.87245 14.7636 8.9884 14.8795 9.13323 14.9447C9.26047 15.002 9.42365 15.002 9.75 15.002C10.0764 15.002 10.2395 15.002 10.3668 14.9447C10.5116 14.8795 10.6276 14.7636 10.6927 14.6187C10.75 14.4915 10.75 14.3283 10.75 14.002C10.75 13.6756 10.75 13.5124 10.6927 13.3852C10.6276 13.2404 10.5116 13.1244 10.3668 13.0592C10.2395 13.002 10.0764 13.002 9.75 13.002C9.42365 13.002 9.26047 13.002 9.13323 13.0592C8.9884 13.1244 8.87245 13.2404 8.80727 13.3852ZM13 9.75195C13 9.4256 13 9.26242 13.0573 9.13518C13.1224 8.99035 13.2384 8.8744 13.3832 8.80922C13.5105 8.75195 13.6736 8.75195 14 8.75195C14.3264 8.75195 14.4895 8.75195 14.6168 8.80922C14.7616 8.8744 14.8776 8.99035 14.9427 9.13518C15 9.26242 15 9.4256 15 9.75195C15 10.0783 15 10.2415 14.9427 10.3687C14.8776 10.5136 14.7616 10.6295 14.6168 10.6947C14.4895 10.752 14.3264 10.752 14 10.752C13.6736 10.752 13.5105 10.752 13.3832 10.6947C13.2384 10.6295 13.1224 10.5136 13.0573 10.3687C13 10.2415 13 10.0783 13 9.75195ZM13.0573 13.3852C13 13.5124 13 13.6756 13 14.002C13 14.3283 13 14.4915 13.0573 14.6187C13.1224 14.7636 13.2384 14.8795 13.3832 14.9447C13.5105 15.002 13.6736 15.002 14 15.002C14.3264 15.002 14.4895 15.002 14.6168 14.9447C14.7616 14.8795 14.8776 14.7636 14.9427 14.6187C15 14.4915 15 14.3283 15 14.002C15 13.6756 15 13.5124 14.9427 13.3852C14.8776 13.2404 14.7616 13.1244 14.6168 13.0592C14.4895 13.002 14.3264 13.002 14 13.002C13.6736 13.002 13.5105 13.002 13.3832 13.0592C13.2384 13.1244 13.1224 13.2404 13.0573 13.3852Z"></path></svg>'),QRIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.secondary;return(()=>{const A=_tmpl$$9.cloneNode(!0),C=A.firstChild;return createRenderEffect(()=>setAttribute(C,"fill",v())),A})()},containerBorders={m:"16px",s:"12px",none:"0"},walletBorders={m:"6px",s:"6px",none:"0"},FourWalletsCard=styled.div`
    width: 60px;
    height: 60px;
    padding: 8px;
    margin-bottom: 8px;
    border-radius: ${_=>containerBorders[_.theme.borderRadius]};
    background-color: ${_=>_.theme.colors.background.tint};
    display: grid;
    grid-template: 1fr 1fr / 1fr 1fr;
    gap: 4px;
`,FourWalletsImage=styled(WalletImage)`
    width: 20px;
    height: 20px;
    border-radius: ${_=>walletBorders[_.theme.borderRadius]};
`,FourWalletsItem=_=>createComponent(WalletItem,{get name(){return _.labelLine1},get secondLine(){return _.labelLine2},get icon(){return createComponent(FourWalletsCard,{get children(){return createComponent(For,{each:[0,1,2,3],children:d=>createComponent(FourWalletsImage,{get src(){return _.images[d]}})})}})},onClick:()=>_.onClick()}),AT_WALLET_APP_NAME="telegram-wallet",IMG={TON:"https://raw.githubusercontent.com/ton-connect/sdk/main/assets/ton-icon-48.png",TG:"https://raw.githubusercontent.com/ton-connect/sdk/main/assets/tg.png"},WalletLabeledItem=_=>{const[d]=useI18n(),v=()=>{if(_.wallet.appName!==AT_WALLET_APP_NAME){if("isPreferred"in _.wallet&&_.wallet.isPreferred)return d("walletItem.recent",{},"Recent");if(isWalletInfoCurrentlyInjected(_.wallet))return d("walletItem.installed",{},"Installed");if(_.wallet.name==="Tonkeeper")return d("walletItem.popular",{},"Popular")}};return createMemo((()=>{const A=createMemo(()=>_.wallet.appName===AT_WALLET_APP_NAME);return()=>A()?createComponent(WalletItem,{get icon(){return _.wallet.imageUrl},get name(){return d("walletItem.walletOn",{},"Wallet in")},secondLine:"Telegram",get badgeUrl(){return IMG.TG},onClick:()=>_.onClick(),get class(){return _.class}}):createComponent(WalletItem,{get icon(){return _.wallet.imageUrl},get name(){return _.wallet.name},get secondLine(){return v()},secondLineColorPrimary:!1,onClick:()=>_.onClick(),get class(){return _.class}})})())},ScrollContainerStyled=styled.div`
    width: 100%;
    overflow-y: auto;
    max-height: ${_=>_.maxHeight};

    scrollbar-width: none;
    &&::-webkit-scrollbar {
        display: none;
    }

    &&::-webkit-scrollbar-track {
        background: transparent;
    }

    &&::-webkit-scrollbar-thumb {
        display: none;
    }
`,ScrollDivider=styled.div`
    height: 1px;
    margin: 0 -24px;
    width: calc(100% + 48px);
    opacity: 0.08;
    background: ${_=>_.isShown?_.theme.colors.icon.secondary:"transparent"};
    transition: background 0.15s ease-in-out;

    ${media("mobile")} {
        width: 100%;
        margin: 0;
    }
`,[windowHeight,setWindowHeight]=createSignal(((_h=getWindow$1())==null?void 0:_h.innerHeight)||0);getWindow$1()&&window.addEventListener("resize",()=>setWindowHeight(window.innerHeight));const[isMobile,setIsMobile]=createSignal(isDevice("mobile")),updateIsMobile=()=>setIsMobile(isDevice("mobile"));getWindow$1()&&(window.addEventListener("resize",()=>updateIsMobile()),window.addEventListener("load",()=>updateIsMobile(),{once:!0}));const ScrollContainer=_=>{const[d,v]=createSignal(!1),A=T=>{v(T.target.scrollTop>0)},C=()=>isMobile()?150:200,w=()=>_.maxHeight!==void 0?`${_.maxHeight}px`:`${windowHeight()-C()}px`;return[createComponent(ScrollDivider,{get isShown(){return d()}}),createComponent(ScrollContainerStyled,{get maxHeight(){return w()},onScroll:A,get class(){return _.class},get children(){return _.children}})]},AStyled=styled.a`
    display: block;
    text-decoration: unset;
`,Link=_=>createComponent(AStyled,mergeProps({get href(){return _.href},get target(){return _.blank?"_blank":"_self"},get class(){return _.class}},()=>_.blank?{rel:"noreferrer noopener"}:{},{get children(){return _.children}})),TonConnectUiContext=createContext(),_tmpl$$8=template$1('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.76228 2.09998H10.2378C11.0458 2.09997 11.7067 2.09996 12.2438 2.14384C12.7997 2.18926 13.3017 2.28614 13.7706 2.52505C14.5045 2.89896 15.1011 3.49558 15.475 4.22941C15.7139 4.6983 15.8108 5.20038 15.8562 5.75629C15.9001 6.29337 15.9001 6.95422 15.9001 7.76227V8.1H16.2377C17.0457 8.09999 17.7066 8.09998 18.2437 8.14386C18.7996 8.18928 19.3017 8.28616 19.7705 8.52507C20.5044 8.89898 21.101 9.4956 21.4749 10.2294C21.7138 10.6983 21.8107 11.2004 21.8561 11.7563C21.9 12.2934 21.9 12.9542 21.9 13.7623V16.2377C21.9 17.0458 21.9 17.7066 21.8561 18.2437C21.8107 18.7996 21.7138 19.3017 21.4749 19.7706C21.101 20.5044 20.5044 21.101 19.7705 21.4749C19.3017 21.7138 18.7996 21.8107 18.2437 21.8561C17.7066 21.9 17.0458 21.9 16.2378 21.9H13.7623C12.9543 21.9 12.2934 21.9 11.7563 21.8561C11.2004 21.8107 10.6983 21.7138 10.2294 21.4749C9.49561 21.101 8.89898 20.5044 8.52508 19.7706C8.28616 19.3017 8.18928 18.7996 8.14386 18.2437C8.09998 17.7066 8.09999 17.0458 8.1 16.2377V15.9H7.76227C6.95426 15.9 6.29335 15.9 5.75629 15.8561C5.20038 15.8107 4.6983 15.7138 4.22941 15.4749C3.49558 15.101 2.89896 14.5044 2.52505 13.7705C2.28614 13.3017 2.18926 12.7996 2.14384 12.2437C2.09996 11.7066 2.09997 11.0458 2.09998 10.2377V7.76228C2.09997 6.95424 2.09996 6.29336 2.14384 5.75629C2.18926 5.20038 2.28614 4.6983 2.52505 4.22941C2.89896 3.49558 3.49558 2.89896 4.22941 2.52505C4.6983 2.28614 5.20038 2.18926 5.75629 2.14384C6.29336 2.09996 6.95425 2.09997 7.76228 2.09998ZM8.1 14.1V13.7623C8.09999 12.9542 8.09998 12.2934 8.14386 11.7563C8.18928 11.2004 8.28616 10.6983 8.52508 10.2294C8.89898 9.4956 9.49561 8.89898 10.2294 8.52507C10.6983 8.28616 11.2004 8.18928 11.7563 8.14386C12.2934 8.09998 12.9542 8.09999 13.7623 8.1H14.1001V7.79998C14.1001 6.94505 14.0994 6.35798 14.0622 5.90287C14.0259 5.45827 13.9593 5.21944 13.8712 5.0466C13.6699 4.65146 13.3486 4.3302 12.9535 4.12886C12.7806 4.04079 12.5418 3.97419 12.0972 3.93786C11.6421 3.90068 11.055 3.89998 10.2001 3.89998H7.79998C6.94505 3.89998 6.35798 3.90068 5.90287 3.93786C5.45827 3.97419 5.21944 4.04079 5.0466 4.12886C4.65146 4.3302 4.3302 4.65146 4.12886 5.0466C4.04079 5.21944 3.97419 5.45827 3.93786 5.90287C3.90068 6.35798 3.89998 6.94505 3.89998 7.79998V10.2C3.89998 11.0549 3.90068 11.642 3.93786 12.0971C3.97419 12.5417 4.04079 12.7805 4.12886 12.9534C4.3302 13.3485 4.65146 13.6698 5.0466 13.8711C5.21944 13.9592 5.45827 14.0258 5.90287 14.0621C6.35798 14.0993 6.94505 14.1 7.79998 14.1H8.1ZM11.0466 10.1289C11.2195 10.0408 11.4583 9.97421 11.9029 9.93788C12.358 9.9007 12.9451 9.9 13.8 9.9H16.2C17.0549 9.9 17.642 9.9007 18.0971 9.93788C18.5417 9.97421 18.7805 10.0408 18.9534 10.1289C19.3485 10.3302 19.6698 10.6515 19.8711 11.0466C19.9592 11.2195 20.0258 11.4583 20.0621 11.9029C20.0993 12.358 20.1 12.9451 20.1 13.8V16.2C20.1 17.0549 20.0993 17.642 20.0621 18.0971C20.0258 18.5417 19.9592 18.7805 19.8711 18.9534C19.6698 19.3485 19.3485 19.6698 18.9534 19.8711C18.7805 19.9592 18.5417 20.0258 18.0971 20.0621C17.642 20.0993 17.0549 20.1 16.2 20.1H13.8C12.9451 20.1 12.358 20.0993 11.9029 20.0621C11.4583 20.0258 11.2195 19.9592 11.0466 19.8711C10.6515 19.6698 10.3302 19.3485 10.1289 18.9534C10.0408 18.7805 9.97421 18.5417 9.93788 18.0971C9.9007 17.642 9.9 17.0549 9.9 16.2V13.8C9.9 12.9451 9.9007 12.358 9.93788 11.9029C9.97421 11.4583 10.0408 11.2195 10.1289 11.0466C10.3302 10.6515 10.6515 10.3302 11.0466 10.1289Z"></path></svg>'),CopyIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.primary;return(()=>{const A=_tmpl$$8.cloneNode(!0),C=A.firstChild;return createRenderEffect(w=>{const T=_.class,R=v();return T!==w._v$&&setAttribute(A,"class",w._v$=T),R!==w._v$2&&setAttribute(C,"fill",w._v$2=R),w},{_v$:void 0,_v$2:void 0}),A})()},_tmpl$$7=template$1('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.7624 3.10001C7.95435 3.1 7.29349 3.09999 6.75642 3.14387C6.2005 3.18929 5.69842 3.28617 5.22954 3.52508C4.4957 3.89899 3.89908 4.49561 3.52517 5.22944C3.28626 5.69833 3.18938 6.20041 3.14396 6.75632C3.10008 7.2934 3.10009 7.95424 3.1001 8.76229V15.2377C3.10009 16.0458 3.10008 16.7066 3.14396 17.2437C3.18938 17.7996 3.28626 18.3017 3.52517 18.7706C3.89908 19.5044 4.4957 20.101 5.22954 20.4749C5.69842 20.7138 6.2005 20.8107 6.75642 20.8561C7.29349 20.9 7.95434 20.9 8.76239 20.9H12.0001C12.4972 20.9 12.9001 20.4971 12.9001 20C12.9001 19.503 12.4972 19.1 12.0001 19.1H8.8001C7.94517 19.1 7.3581 19.0993 6.90299 19.0621C6.45839 19.0258 6.21956 18.9592 6.04672 18.8711C5.65158 18.6698 5.33032 18.3485 5.12898 17.9534C5.04092 17.7805 4.97431 17.5417 4.93798 17.0971C4.9008 16.642 4.9001 16.0549 4.9001 15.2V8.80001C4.9001 7.94508 4.9008 7.35801 4.93798 6.9029C4.97431 6.4583 5.04092 6.21947 5.12898 6.04663C5.33032 5.65149 5.65158 5.33023 6.04672 5.12889C6.21956 5.04082 6.45839 4.97422 6.90299 4.93789C7.3581 4.90071 7.94517 4.90001 8.8001 4.90001H12.0001C12.4972 4.90001 12.9001 4.49706 12.9001 4.00001C12.9001 3.50295 12.4972 3.10001 12.0001 3.10001H8.7624Z"></path><path d="M17.6364 7.3636C17.2849 7.01212 16.7151 7.01212 16.3636 7.3636C16.0121 7.71507 16.0121 8.28492 16.3636 8.63639L18.8272 11.1H9.00001C8.50295 11.1 8.10001 11.5029 8.10001 12C8.10001 12.497 8.50295 12.9 9.00001 12.9H18.8272L16.3636 15.3636C16.0121 15.7151 16.0121 16.2849 16.3636 16.6364C16.7151 16.9879 17.2849 16.9879 17.6364 16.6364L21.6364 12.6364C21.9879 12.2849 21.9879 11.7151 21.6364 11.3636L17.6364 7.3636Z"></path></svg>'),DisconnectIcon=_=>{const d=useTheme(),v=()=>_.fill||d.colors.icon.primary;return(()=>{const A=_tmpl$$7.cloneNode(!0),C=A.firstChild,w=C.nextSibling;return createRenderEffect(T=>{const R=v(),G=v();return R!==T._v$&&setAttribute(C,"fill",T._v$=R),G!==T._v$2&&setAttribute(w,"fill",T._v$2=G),T},{_v$:void 0,_v$2:void 0}),A})()},hoverBorders$1={m:"8px",s:"4px",none:"0"},dropdownBorders={m:"16px",s:"8px",none:"0"},AccountButtonDropdownStyled=styled.div`
    width: 256px;
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.16);
    border-radius: ${_=>dropdownBorders[_.theme.borderRadius]};

    background-color: ${_=>_.theme.colors.background.primary}
           
    color: ${_=>_.theme.colors.text.primary}
`,UlStyled=styled.ul`
    background-color: ${_=>_.theme.colors.background.primary};
    padding: 8px;
`,MenuButtonStyled=styled.button`
    display: flex;
    align-items: center;
    gap: 8px;
    height: 40px;
    padding-left: 8px;
    width: 100%;

    background-color: ${_=>_.theme.colors.background.primary};
    border: none;
    border-radius: ${_=>hoverBorders$1[_.theme.borderRadius]};
    cursor: pointer;

    transition: background-color, transform 0.1s ease-in-out;

    &:hover {
        background-color: ${_=>_.theme.colors.background.secondary};
    }

    &:active {
        transform: scale(0.96);
    }
`,_tmpl$$6=template$1("<li></li>"),MenuItemText=_=>createComponent(Text$1,{get translationKey(){return _.translationKey},fontSize:"15px",fontWeight:"590",get children(){return _.children}}),AccountButtonDropdown=_=>{const d=useContext(TonConnectUiContext),[v,A]=createSignal(!1),C=()=>__async(void 0,null,function*(){const T=toUserFriendlyAddress(d.account.address,d.account.chain===CHAIN.TESTNET);yield copyToClipboard(T),A(!0),setTimeout(()=>A(!1),1e3)}),w=()=>{d.disconnect(),_.onClose()};return createComponent(AccountButtonDropdownStyled,{ref(T){const R=_.ref;typeof R=="function"?R(T):_.ref=T},get class(){return _.class},"data-tc-dropdown":"true",get children(){return createComponent(UlStyled,{get children(){return[(()=>{const T=_tmpl$$6.cloneNode(!0);return insert(T,createComponent(MenuButtonStyled,{onClick:()=>C(),get children(){return[createComponent(CopyIcon,{}),createComponent(Show,{get when(){return!v()},get children(){return createComponent(MenuItemText,{translationKey:"button.dropdown.copy",children:"Copy address"})}}),createComponent(Show,{get when(){return v()},get children(){return createComponent(MenuItemText,{translationKey:"button.dropdown.copied",children:"Address copied!"})}})]}})),T})(),(()=>{const T=_tmpl$$6.cloneNode(!0);return insert(T,createComponent(MenuButtonStyled,{onClick:()=>w(),get children(){return[createComponent(DisconnectIcon,{}),createComponent(MenuItemText,{translationKey:"button.dropdown.disconnect",children:"Disconnect"})]}})),T})()]}})}})},borders$3={m:"16px",s:"8px",none:"0"},NotificationStyled=styled.div`
    width: 256px;
    padding: 12px 16px;
    display: flex;
    gap: 9px;

    background-color: ${_=>_.theme.colors.background.primary};
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.16);
    border-radius: ${_=>borders$3[_.theme.borderRadius]};
`,NotificationContentStyled=styled.div`
    width: 192px;

    > h3 {
        font-size: 15px;
    }
`,TextStyled$3=styled(Text$1)`
    margin-top: 4px;
    color: ${_=>_.theme.colors.text.secondary};
`,Notification=_=>{const d=useDataAttributes(_);return createComponent(NotificationStyled,mergeProps({get class(){return _.class},"data-tc-notification":"true"},d,{get children(){return[createComponent(NotificationContentStyled,{get children(){return[createComponent(H3,{get translationKey(){return _.header.translationKey},get translationValues(){return _.header.translationValues},get children(){return _.children}}),createComponent(Show,{get when(){return _.text},get children(){return createComponent(TextStyled$3,{get translationKey(){return _.text.translationKey},get translationValues(){return _.text.translationValues}})}})]}}),createMemo(()=>_.icon)]}}))},LoaderIconStyled$2=styled(LoaderIcon)`
    align-self: center;
`,ConfirmOperationNotification=_=>{const d=useContext(TonConnectUiContext),[v]=useI18n(),A=()=>d.wallet&&"name"in d.wallet?d.wallet.name:v("common.yourWallet",{},"Your wallet");return createComponent(Notification,{get header(){return{translationKey:"notifications.confirm.header",translationValues:{name:A()}}},get class(){return _.class},get icon(){return createComponent(LoaderIconStyled$2,{})},"data-tc-notification-confirm":"true",children:"Confirm operation in your wallet"})},ErrorIconStyled$4=styled(ErrorIcon)`
    margin-top: 2px;
`,ErrorTransactionNotification=_=>createComponent(Notification,{header:{translationKey:"notifications.transactionCanceled.header"},text:{translationKey:"notifications.transactionCanceled.text"},get icon(){return createComponent(ErrorIconStyled$4,{size:"xs"})},get class(){return _.class},"data-tc-notification-tx-cancelled":"true",children:"Transaction cancelled"}),SuccessIconStyled=styled(SuccessIcon)`
    margin-top: 2px;
`,SuccessTransactionNotification=_=>createComponent(Notification,{header:{translationKey:"notifications.transactionSent.header"},text:{translationKey:"notifications.transactionSent.text"},get icon(){return createComponent(SuccessIconStyled,{})},get class(){return _.class},"data-tc-notification-tx-sent":"true",children:"Transaction sent"}),NotificationClass=u`
    transform: translateY(-8px);
    margin-bottom: 12px;
`,defaultConfig={timeout:4500},[latestAction,setLatestAction]=createSignal(null);function useOpenedNotifications(_){const{timeout:d}=__spreadValues$1(__spreadValues$1({},defaultConfig),_),[v,A]=createSignal([]),[C,w]=createSignal([]);return createEffect(on(action$1,T=>{var R,G;if(!T||!T.showNotification){A(ee=>ee.filter(ie=>ie.action!=="confirm-transaction"));return}if(latestAction()===T)return;const I=((R=latestAction())==null?void 0:R.name)==="confirm-transaction"&&T.name==="confirm-transaction",z=((G=latestAction())==null?void 0:G.name)==="confirm-sign-data"&&T.name==="confirm-sign-data";if(I||z)return;setLatestAction(T),A(ee=>ee.filter(ie=>ie.action!=="confirm-transaction"&&ie.action!=="confirm-sign-data"));const H={action:T.name};A(ee=>[...ee,H]);const Y=setTimeout(()=>{A(ee=>ee.filter(ie=>ie!==H)),w(ee=>ee.filter(ie=>ie!==Y))},d);w(ee=>[...ee,Y])})),onCleanup(()=>{C().forEach(T=>clearTimeout(T))}),v}const ErrorIconStyled$3=styled(ErrorIcon)`
    margin-top: 2px;
`,ErrorSignDataNotification=_=>createComponent(Notification,{header:{translationKey:"notifications.signDataCanceled.header"},get icon(){return createComponent(ErrorIconStyled$3,{size:"xs"})},get class(){return _.class},"data-tc-notification-sign-data-cancelled":"true",children:"Sign data canceled"}),SuccessSignDataNotification=_=>createComponent(Notification,{header:{translationKey:"notifications.dataSigned.header"},get icon(){return createComponent(SuccessIconStyled,{})},get class(){return _.class},"data-tc-notification-data-signed":"true",children:"Data signed"}),_tmpl$$5=template$1('<div data-tc-list-notifications="true"></div>'),Notifications=_=>{const d=useOpenedNotifications();return(()=>{const v=_tmpl$$5.cloneNode(!0);return insert(v,createComponent(TransitionGroup,{onBeforeEnter:A=>{animate(A,[{opacity:0,transform:"translateY(0)"},{opacity:1,transform:"translateY(-8px)"}],{duration:200})},onExit:(A,C)=>{animate(A,[{opacity:1,transform:"translateY(-8px)"},{opacity:0,transform:"translateY(-30px)"}],{duration:200}).finished.then(C)},get children(){return createComponent(For,{get each(){return d()},children:A=>createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return A.action==="transaction-sent"},get children(){return createComponent(SuccessTransactionNotification,{class:NotificationClass})}}),createComponent(Match,{get when(){return A.action==="transaction-canceled"},get children(){return createComponent(ErrorTransactionNotification,{class:NotificationClass})}}),createComponent(Match,{get when(){return A.action==="data-signed"},get children(){return createComponent(SuccessSignDataNotification,{class:NotificationClass})}}),createComponent(Match,{get when(){return A.action==="sign-data-canceled"},get children(){return createComponent(ErrorSignDataNotification,{class:NotificationClass})}}),createComponent(Match,{get when(){return A.action==="confirm-transaction"||A.action==="confirm-sign-data"},get children(){return createComponent(ConfirmOperationNotification,{class:NotificationClass})}})]}})})}})),createRenderEffect(()=>className(v,_.class)),v})()},AccountButtonStyled=styled(Button$1)`
    background-color: ${_=>_.theme.colors.connectButton.background};
    color: ${_=>_.theme.colors.connectButton.foreground};
    box-shadow: ${_=>`0 4px 24px ${rgba(_.theme.colors.constant.black,.16)}`};
    padding: 8px 16px 8px 12px;

    display: flex;
    align-items: center;
    gap: 4px;
    height: 40px;
`,DropdownButtonStyled=styled(AccountButtonStyled)`
    padding: 12px 16px;
    min-width: 148px;
    justify-content: center;
    background-color: ${_=>_.theme.colors.background.primary};
`,LoaderButtonStyled$1=styled(Button$1)`
    min-width: 148px;
    height: 40px;

    background-color: ${_=>_.theme.colors.background.primary};
    color: ${_=>_.theme.colors.connectButton.foreground};
    box-shadow: ${_=>`0 4px 24px ${rgba(_.theme.colors.constant.black,.16)}`};

    display: flex;
    align-items: center;
    justify-content: center;
`,LoaderIconStyled$1=styled(LoaderIcon)`
    height: 18px;
    width: 18px;
`,DropdownContainerStyled=styled.div`
    width: fit-content;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
`,DropdownStyled=styled(AccountButtonDropdown)`
    box-sizing: border-box;
    overflow: hidden;
    margin-top: 12px;
`,NotificationsStyled=styled(Notifications)`
    > div:first-child {
        margin-top: 20px;
    }
`;function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getMainAxisFromPlacement(_){return["top","bottom"].includes(getSide(_))?"x":"y"}function getLengthFromAxis(_){return _==="y"?"height":"width"}function computeCoordsFromPlacement(_,d,v){let{reference:A,floating:C}=_;const w=A.x+A.width/2-C.width/2,T=A.y+A.height/2-C.height/2,R=getMainAxisFromPlacement(d),G=getLengthFromAxis(R),I=A[G]/2-C[G]/2,z=getSide(d),H=R==="x";let Y;switch(z){case"top":Y={x:w,y:A.y-C.height};break;case"bottom":Y={x:w,y:A.y+A.height};break;case"right":Y={x:A.x+A.width,y:T};break;case"left":Y={x:A.x-C.width,y:T};break;default:Y={x:A.x,y:A.y}}switch(getAlignment(d)){case"start":Y[R]-=I*(v&&H?-1:1);break;case"end":Y[R]+=I*(v&&H?-1:1);break}return Y}const computePosition$1=(_,d,v)=>__async(void 0,null,function*(){const{placement:A="bottom",strategy:C="absolute",middleware:w=[],platform:T}=v,R=w.filter(Boolean),G=yield T.isRTL==null?void 0:T.isRTL(d);if({}.NODE_ENV!=="production"){if(T==null&&console.error(["Floating UI: `platform` property was not passed to config. If you","want to use Floating UI on the web, install @floating-ui/dom","instead of the /core package. Otherwise, you can create your own","`platform`: https://floating-ui.com/docs/platform"].join(" ")),R.filter(oe=>{let{name:se}=oe;return se==="autoPlacement"||se==="flip"}).length>1)throw new Error(["Floating UI: duplicate `flip` and/or `autoPlacement` middleware","detected. This will lead to an infinite loop. Ensure only one of","either has been passed to the `middleware` array."].join(" "));(!_||!d)&&console.error(["Floating UI: The reference and/or floating element was not defined","when `computePosition()` was called. Ensure that both elements have","been created and can be measured."].join(" "))}let I=yield T.getElementRects({reference:_,floating:d,strategy:C}),{x:z,y:H}=computeCoordsFromPlacement(I,A,G),Y=A,ee={},ie=0;for(let oe=0;oe<R.length;oe++){const{name:se,fn:re}=R[oe],{x:fe,y:ue,data:ge,reset:ye}=yield re({x:z,y:H,initialPlacement:A,placement:Y,strategy:C,middlewareData:ee,rects:I,platform:T,elements:{reference:_,floating:d}});if(z=fe??z,H=ue??H,ee=__spreadProps(__spreadValues$1({},ee),{[se]:__spreadValues$1(__spreadValues$1({},ee[se]),ge)}),{}.NODE_ENV!=="production"&&ie>50&&console.warn(["Floating UI: The middleware lifecycle appears to be running in an","infinite loop. This is usually caused by a `reset` continually","being returned without a break condition."].join(" ")),ye&&ie<=50){ie++,typeof ye=="object"&&(ye.placement&&(Y=ye.placement),ye.rects&&(I=ye.rects===!0?yield T.getElementRects({reference:_,floating:d,strategy:C}):ye.rects),{x:z,y:H}=computeCoordsFromPlacement(I,Y,G)),oe=-1;continue}}return{x:z,y:H,placement:Y,strategy:C,middlewareData:ee}});function rectToClientRect(_){return __spreadProps(__spreadValues$1({},_),{top:_.y,left:_.x,right:_.x+_.width,bottom:_.y+_.height})}function getWindow$2(_){var d;return((d=_.ownerDocument)==null?void 0:d.defaultView)||window}function getComputedStyle$1$1(_){return getWindow$2(_).getComputedStyle(_)}function getNodeName(_){return isNode$1(_)?(_.nodeName||"").toLowerCase():""}let uaString;function getUAString(){if(uaString)return uaString;const _=navigator.userAgentData;return _&&Array.isArray(_.brands)?(uaString=_.brands.map(d=>d.brand+"/"+d.version).join(" "),uaString):navigator.userAgent}function isHTMLElement(_){return _ instanceof getWindow$2(_).HTMLElement}function isElement(_){return _ instanceof getWindow$2(_).Element}function isNode$1(_){return _ instanceof getWindow$2(_).Node}function isShadowRoot(_){if(typeof ShadowRoot>"u")return!1;const d=getWindow$2(_).ShadowRoot;return _ instanceof d||_ instanceof ShadowRoot}function isOverflowElement(_){const{overflow:d,overflowX:v,overflowY:A,display:C}=getComputedStyle$1$1(_);return/auto|scroll|overlay|hidden/.test(d+A+v)&&!["inline","contents"].includes(C)}function isTableElement(_){return["table","td","th"].includes(getNodeName(_))}function isContainingBlock(_){const d=/firefox/i.test(getUAString()),v=getComputedStyle$1$1(_),A=v.backdropFilter||v.WebkitBackdropFilter;return v.transform!=="none"||v.perspective!=="none"||(A?A!=="none":!1)||d&&v.willChange==="filter"||d&&(v.filter?v.filter!=="none":!1)||["transform","perspective"].some(C=>v.willChange.includes(C))||["paint","layout","strict","content"].some(C=>{const w=v.contain;return w!=null?w.includes(C):!1})}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function isLastTraversableNode(_){return["html","body","#document"].includes(getNodeName(_))}const min=Math.min,max$1=Math.max,round$1=Math.round,FALLBACK_SCALE={x:1,y:1};function getScale(_){const d=!isElement(_)&&_.contextElement?_.contextElement:isElement(_)?_:null;if(!d)return FALLBACK_SCALE;const v=d.getBoundingClientRect(),A=getComputedStyle$1$1(d);if(A.boxSizing!=="border-box")return isHTMLElement(d)?{x:d.offsetWidth>0&&round$1(v.width)/d.offsetWidth||1,y:d.offsetHeight>0&&round$1(v.height)/d.offsetHeight||1}:FALLBACK_SCALE;let C=v.width/parseFloat(A.width),w=v.height/parseFloat(A.height);return(!C||!Number.isFinite(C))&&(C=1),(!w||!Number.isFinite(w))&&(w=1),{x:C,y:w}}function getBoundingClientRect(_,d,v,A){var C,w,T,R;d===void 0&&(d=!1),v===void 0&&(v=!1);const G=_.getBoundingClientRect();let I=FALLBACK_SCALE;d&&(A?isElement(A)&&(I=getScale(A)):I=getScale(_));const z=isElement(_)?getWindow$2(_):window,H=!isLayoutViewport()&&v,Y=(G.left+(H&&(C=(w=z.visualViewport)==null?void 0:w.offsetLeft)!=null?C:0))/I.x,ee=(G.top+(H&&(T=(R=z.visualViewport)==null?void 0:R.offsetTop)!=null?T:0))/I.y,ie=G.width/I.x,oe=G.height/I.y;return{width:ie,height:oe,top:ee,right:Y+ie,bottom:ee+oe,left:Y,x:Y,y:ee}}function getDocumentElement(_){return((isNode$1(_)?_.ownerDocument:_.document)||window.document).documentElement}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.pageXOffset,scrollTop:_.pageYOffset}}function getWindowScrollBarX(_){return getBoundingClientRect(getDocumentElement(_)).left+getNodeScroll(_).scrollLeft}function getRectRelativeToOffsetParent(_,d,v){const A=isHTMLElement(d),C=getDocumentElement(d),w=getBoundingClientRect(_,!0,v==="fixed",d);let T={scrollLeft:0,scrollTop:0};const R={x:0,y:0};if(A||!A&&v!=="fixed")if((getNodeName(d)!=="body"||isOverflowElement(C))&&(T=getNodeScroll(d)),isHTMLElement(d)){const G=getBoundingClientRect(d,!0);R.x=G.x+d.clientLeft,R.y=G.y+d.clientTop}else C&&(R.x=getWindowScrollBarX(C));return{x:w.left+T.scrollLeft-R.x,y:w.top+T.scrollTop-R.y,width:w.width,height:w.height}}function getParentNode(_){if(getNodeName(_)==="html")return _;const d=_.assignedSlot||_.parentNode||(isShadowRoot(_)?_.host:null)||getDocumentElement(_);return isShadowRoot(d)?d.host:d}function getTrueOffsetParent(_){return!isHTMLElement(_)||getComputedStyle$1$1(_).position==="fixed"?null:_.offsetParent}function getContainingBlock(_){let d=getParentNode(_);for(;isHTMLElement(d)&&!isLastTraversableNode(d);){if(isContainingBlock(d))return d;d=getParentNode(d)}return null}function getOffsetParent(_){const d=getWindow$2(_);let v=getTrueOffsetParent(_);for(;v&&isTableElement(v)&&getComputedStyle$1$1(v).position==="static";)v=getTrueOffsetParent(v);return v&&(getNodeName(v)==="html"||getNodeName(v)==="body"&&getComputedStyle$1$1(v).position==="static"&&!isContainingBlock(v))?d:v||getContainingBlock(_)||d}function getDimensions(_){if(isHTMLElement(_))return{width:_.offsetWidth,height:_.offsetHeight};const d=getBoundingClientRect(_);return{width:d.width,height:d.height}}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{rect:d,offsetParent:v,strategy:A}=_;const C=isHTMLElement(v),w=getDocumentElement(v);if(v===w)return d;let T={scrollLeft:0,scrollTop:0},R={x:1,y:1};const G={x:0,y:0};if((C||!C&&A!=="fixed")&&((getNodeName(v)!=="body"||isOverflowElement(w))&&(T=getNodeScroll(v)),isHTMLElement(v))){const I=getBoundingClientRect(v);R=getScale(v),G.x=I.x+v.clientLeft,G.y=I.y+v.clientTop}return{width:d.width*R.x,height:d.height*R.y,x:d.x*R.x-T.scrollLeft*R.x+G.x,y:d.y*R.y-T.scrollTop*R.y+G.y}}function getViewportRect(_,d){const v=getWindow$2(_),A=getDocumentElement(_),C=v.visualViewport;let w=A.clientWidth,T=A.clientHeight,R=0,G=0;if(C){w=C.width,T=C.height;const I=isLayoutViewport();(I||!I&&d==="fixed")&&(R=C.offsetLeft,G=C.offsetTop)}return{width:w,height:T,x:R,y:G}}function getDocumentRect(_){var d;const v=getDocumentElement(_),A=getNodeScroll(_),C=(d=_.ownerDocument)==null?void 0:d.body,w=max$1(v.scrollWidth,v.clientWidth,C?C.scrollWidth:0,C?C.clientWidth:0),T=max$1(v.scrollHeight,v.clientHeight,C?C.scrollHeight:0,C?C.clientHeight:0);let R=-A.scrollLeft+getWindowScrollBarX(_);const G=-A.scrollTop;return getComputedStyle$1$1(C||v).direction==="rtl"&&(R+=max$1(v.clientWidth,C?C.clientWidth:0)-w),{width:w,height:T,x:R,y:G}}function getNearestOverflowAncestor(_){const d=getParentNode(_);return isLastTraversableNode(d)?_.ownerDocument.body:isHTMLElement(d)&&isOverflowElement(d)?d:getNearestOverflowAncestor(d)}function getOverflowAncestors(_,d){var v;d===void 0&&(d=[]);const A=getNearestOverflowAncestor(_),C=A===((v=_.ownerDocument)==null?void 0:v.body),w=getWindow$2(A);return C?d.concat(w,w.visualViewport||[],isOverflowElement(A)?A:[]):d.concat(A,getOverflowAncestors(A))}function getInnerBoundingClientRect(_,d){const v=getBoundingClientRect(_,!0,d==="fixed"),A=v.top+_.clientTop,C=v.left+_.clientLeft,w=isHTMLElement(_)?getScale(_):{x:1,y:1},T=_.clientWidth*w.x,R=_.clientHeight*w.y,G=C*w.x,I=A*w.y;return{top:I,left:G,right:G+T,bottom:I+R,x:G,y:I,width:T,height:R}}function getClientRectFromClippingAncestor(_,d,v){return d==="viewport"?rectToClientRect(getViewportRect(_,v)):isElement(d)?getInnerBoundingClientRect(d,v):rectToClientRect(getDocumentRect(getDocumentElement(_)))}function getClippingElementAncestors(_,d){const v=d.get(_);if(v)return v;let A=getOverflowAncestors(_).filter(R=>isElement(R)&&getNodeName(R)!=="body"),C=null;const w=getComputedStyle$1$1(_).position==="fixed";let T=w?getParentNode(_):_;for(;isElement(T)&&!isLastTraversableNode(T);){const R=getComputedStyle$1$1(T),G=isContainingBlock(T);(w?!G&&!C:!G&&R.position==="static"&&!!C&&["absolute","fixed"].includes(C.position))?A=A.filter(z=>z!==T):C=R,T=getParentNode(T)}return d.set(_,A),A}function getClippingRect(_){let{element:d,boundary:v,rootBoundary:A,strategy:C}=_;const T=[...v==="clippingAncestors"?getClippingElementAncestors(d,this._c):[].concat(v),A],R=T[0],G=T.reduce((I,z)=>{const H=getClientRectFromClippingAncestor(d,z,C);return I.top=max$1(H.top,I.top),I.right=min(H.right,I.right),I.bottom=min(H.bottom,I.bottom),I.left=max$1(H.left,I.left),I},getClientRectFromClippingAncestor(d,R,C));return{width:G.right-G.left,height:G.bottom-G.top,x:G.left,y:G.top}}const platform={getClippingRect,convertOffsetParentRelativeRectToViewportRelativeRect,isElement,getDimensions,getOffsetParent,getDocumentElement,getScale,getElementRects(_){return __async(this,null,function*(){let{reference:d,floating:v,strategy:A}=_;const C=this.getOffsetParent||getOffsetParent,w=this.getDimensions;return{reference:getRectRelativeToOffsetParent(d,yield C(v),A),floating:__spreadValues$1({x:0,y:0},yield w(v))}})},getClientRects:_=>Array.from(_.getClientRects()),isRTL:_=>getComputedStyle$1$1(_).direction==="rtl"};function autoUpdate(_,d,v,A){A===void 0&&(A={});const{ancestorScroll:C=!0,ancestorResize:w=!0,elementResize:T=!0,animationFrame:R=!1}=A,G=C&&!R,I=G||w?[...isElement(_)?getOverflowAncestors(_):_.contextElement?getOverflowAncestors(_.contextElement):[],...getOverflowAncestors(d)]:[];I.forEach(ie=>{G&&ie.addEventListener("scroll",v,{passive:!0}),w&&ie.addEventListener("resize",v)});let z=null;if(T){let ie=!0;z=new ResizeObserver(()=>{ie||v(),ie=!1}),isElement(_)&&!R&&z.observe(_),!isElement(_)&&_.contextElement&&!R&&z.observe(_.contextElement),z.observe(d)}let H,Y=R?getBoundingClientRect(_):null;R&&ee();function ee(){const ie=getBoundingClientRect(_);Y&&(ie.x!==Y.x||ie.y!==Y.y||ie.width!==Y.width||ie.height!==Y.height)&&v(),Y=ie,H=requestAnimationFrame(ee)}return v(),()=>{var ie;I.forEach(oe=>{G&&oe.removeEventListener("scroll",v),w&&oe.removeEventListener("resize",v)}),(ie=z)==null||ie.disconnect(),z=null,R&&cancelAnimationFrame(H)}}const computePosition=(_,d,v)=>{const A=new Map,C=__spreadValues$1({platform},v),w=__spreadProps(__spreadValues$1({},C.platform),{_c:A});return computePosition$1(_,d,__spreadProps(__spreadValues$1({},C),{platform:w}))};function P(_,d,v){let A=()=>{var H;return(H=v?.placement)!=null?H:"bottom"},C=()=>{var H;return(H=v?.strategy)!=null?H:"absolute"},[w,T]=createSignal({x:null,y:null,placement:A(),strategy:C(),middlewareData:{}}),[R,G]=createSignal();createEffect(()=>{let H=R();if(H)throw H.value});let I=createMemo(()=>(_(),d(),{}));function z(){let H=_(),Y=d();if(H&&Y){let ee=I();computePosition(H,Y,{middleware:v?.middleware,placement:A(),strategy:C()}).then(ie=>{ee===I()&&T(ie)},ie=>{G(ie)})}}return createEffect(()=>{let H=_(),Y=d();if(A(),C(),H&&Y)if(v!=null&&v.whileElementsMounted){let ee=v.whileElementsMounted(H,Y,z);ee&&onCleanup(ee)}else z()}),{get x(){return w().x},get y(){return w().y},get placement(){return w().placement},get strategy(){return w().strategy},get middlewareData(){return w().middlewareData},update:z}}const _tmpl$$4=template$1('<tc-root data-tc-dropdown-container="true"></tc-root>'),AccountButton=()=>{const _=useTheme(),d=useContext(ConnectorContext),v=useContext(TonConnectUiContext),[A,C]=createSignal(!1),[w,T]=createSignal(d.account),[R,G]=createSignal(!d.account);let I;const[z,H]=createSignal(),[Y,ee]=createSignal(),ie=P(Y,z,{whileElementsMounted:autoUpdate,placement:"bottom-end"}),oe=()=>{const fe=w();if(fe){const ue=toUserFriendlyAddress(fe.address,fe.chain===CHAIN.TESTNET);return ue.slice(0,4)+""+ue.slice(-4)}return""};v.connectionRestored.then(()=>G(!1));const se=d.onStatusChange(fe=>{if(!fe){C(!1),T(null),G(!1);return}T(fe.account),G(!1)}),re=fe=>{if(!w()||!A())return;const ue=Y().contains(fe.target),ge=I.contains(fe.target);!ue&&!ge&&C(!1)};return onMount(()=>{document.body.addEventListener("click",re)}),onCleanup(()=>{document.body.removeEventListener("click",re),se()}),createComponent(Dynamic,{component:globalStylesTag,get children(){return[createComponent(Show,{get when(){return R()},get children(){return createComponent(LoaderButtonStyled$1,{disabled:!0,"data-tc-connect-button-loading":"true",get children(){return createComponent(LoaderIconStyled$1,{})}})}}),createComponent(Show,{get when(){return!R()},get children(){return[createComponent(Show,{get when(){return!w()},get children(){return createComponent(AccountButtonStyled,{onClick:()=>v.openModal(),"data-tc-connect-button":"true",scale:"s",get children(){return[createComponent(TonIcon,{get fill(){return _.colors.connectButton.foreground}}),createComponent(Text$1,{translationKey:"button.connectWallet",fontSize:"15px",lineHeight:"18px",fontWeight:"590",get color(){return _.colors.connectButton.foreground},children:"Connect wallet"})]}})}}),createComponent(Show,{get when(){return w()},get children(){return createComponent(DropdownContainerStyled,{get children(){return[createComponent(DropdownButtonStyled,{onClick:()=>C(fe=>!fe),ref:ee,"data-tc-dropdown-button":"true",scale:"s",get children(){return[createComponent(Text$1,{fontSize:"15px",fontWeight:"590",lineHeight:"18px",get children(){return oe()}}),createComponent(ArrowIcon,{direction:"bottom"})]}}),createComponent(Portal$1,{get children(){const fe=untrack(()=>document.importNode(_tmpl$$4,!0));return use(H,fe),fe.style.setProperty("z-index","999"),fe._$owner=getOwner(),insert(fe,createComponent(Transition,{onBeforeEnter:ue=>{animate(ue,[{opacity:0,transform:"translateY(-8px)"},{opacity:1,transform:"translateY(0)"}],{duration:150})},onExit:(ue,ge)=>{animate(ue,[{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(-8px)"}],{duration:150}).finished.then(ge)},get children(){return createComponent(Show,{get when(){return A()},get children(){return createComponent(DropdownStyled,{get hidden(){return!A()},onClose:()=>C(!1),ref(ue){const ge=I;typeof ge=="function"?ge(ue):I=ue}})}})}}),null),insert(fe,createComponent(NotificationsStyled,{}),null),createRenderEffect(ue=>{var ge,ye;const be=ie.strategy,ve=`${(ge=ie.y)!=null?ge:0}px`,Me=`${(ye=ie.x)!=null?ye:0}px`;return be!==ue._v$&&fe.style.setProperty("position",ue._v$=be),ve!==ue._v$2&&fe.style.setProperty("top",ue._v$2=ve),Me!==ue._v$3&&fe.style.setProperty("left",ue._v$3=Me),ue},{_v$:void 0,_v$2:void 0,_v$3:void 0}),fe}})]}})}})]}})]}})},StyledModal=styled(Modal$1)`
    padding-left: 24px;
    padding-right: 24px;
    padding-top: 18px;
    padding-bottom: 0;

    ${media("mobile")} {
        padding-left: 0;
        padding-right: 0;
    }
`,H1Styled$a=styled(H1)`
    margin-top: 12px;

    ${media("mobile")} {
        padding: 0 10px;
    }
`,LoaderContainerStyled=styled.div`
    margin: 30px 0;
    width: 100%;
    display: flex;
    justify-content: center;

    ${media("mobile")} {
        height: 160px;
        align-items: center;
    }
`;styled(Text$1)`
    min-width: 84px;
    text-align: center;
    font-weight: 590;
`;styled(TabBar)`
    margin: 0 auto 22px;
`;const[appState,setAppState]=createStore$3({buttonRootId:null,language:"en",returnStrategy:"back",twaReturnUrl:void 0,walletsListConfiguration:{},enableAndroidBackHandler:!0});function uniq(_){return[...new Set(_)]}function mergeConcat(_,d,v){return d.map(A=>{const C=v.find(w=>w[_]===A[_]);return v=v.filter(w=>w[_]!==A[_]),C===void 0?A:C}).concat(v)}function uiWalletToWalletInfo(_){return"jsBridgeKey"in _?__spreadProps(__spreadValues$1({},_),{injected:TonConnect.isWalletInjected(_.jsBridgeKey),embedded:TonConnect.isInsideWalletBrowser(_.jsBridgeKey)}):_}function applyWalletsListConfiguration(_,d){var v;return d&&(v=d.includeWallets)!=null&&v.length&&(_=mergeConcat("name",_,d.includeWallets.map(uiWalletToWalletInfo))),_}function supportsDesktop(_){return _.platforms.some(d=>["macos","linux","windows"].includes(d))}function supportsMobile(_){return _.platforms.some(d=>["ios","android"].includes(d))}function supportsExtension(_){return _.platforms.some(d=>["chrome","firefox","safari"].includes(d))}function eqWalletName(_,d){return d?_.name.toLowerCase()===d.toLowerCase()||_.appName.toLowerCase()===d.toLowerCase():!1}const DesktopSelectWalletModalStyled=styled.div`
    display: flex;
    flex-direction: column;
    align-items: center;
`,H1Styled$9=styled(H1)`
    margin-bottom: 18px;
`;styled.div`
    height: 1px;
    margin: 0 -24px;
    width: calc(100% + 48px);
    opacity: 0.12;
    background: ${_=>_.isShown?_.theme.colors.icon.secondary:"transparent"};
    transition: background 0.15s ease-in-out;

    ${media("mobile")} {
        width: 100%;
    }
`;const WalletsUl=styled.ul`
    display: grid;
    grid-template-columns: repeat(auto-fit, 92px);
    grid-template-rows: auto;
    align-content: flex-start;
    row-gap: 8px;
    width: 100%;
    padding: 0 0 16px;
    align-self: flex-start;
    max-width: 400px;
    margin: 0 auto;
    list-style: none;

    > li {
        display: block;
        height: fit-content;
    }

    ${media("mobile")} {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 0;
        padding: 8px 12px 16px;
        max-width: none;

        > li {
            min-width: 78px;
            display: flex;
        }

        > li > * {
            width: 100%;
        }
    }
`;styled(Button$1)`
    display: block;
    margin: 0 auto 1px;
    font-size: 15px;
`;const StyledIconButton$5=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,WalletLabeledItemStyled=styled(WalletLabeledItem)`
    opacity: ${_=>_.withOpacity?"0.4":"1"};
`,WalletsNotSupportedNotifier=styled.div`
    display: grid;
    grid-template-columns: auto 28px;
    gap: 16px;
    padding: 16px;
    margin-bottom: 16px;
    border-radius: 16px;
    color: ${_=>_.theme.colors.text.secondary};
    background: ${_=>_.theme.colors.background.tint};

    ${media("mobile")} {
        margin-left: 16px;
        margin-right: 16px;
    }
`,WalletsNotSupportedNotifierText=styled(H2)`
    color: ${_=>_.theme.colors.text.secondary};
    text-align: left;
    margin: 0;
`,ErrorBoxStyled=styled.div`
    position: absolute;
    bottom: 14px;
    left: 50%;
    transform: translate(-50%, 0);

    text-wrap: nowrap;
    display: flex;
    gap: 6px;
    align-items: center;
    border-radius: 18px;
    min-width: 126px;
    padding: 9px 16px 9px 10px;

    filter: drop-shadow(0px 2px 8px rgba(0, 0, 0, 0.08));
    background-color: ${_=>_.theme.colors.background.segment};
`,_tmpl$$3=template$1('<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_5122_10355)"><circle cx="8" cy="8" r="8"></circle><circle cx="8" cy="11" r="1"></circle><path d="M7.04994 4.99875C7.02277 4.45542 7.45598 4 8 4C8.54402 4 8.97723 4.45541 8.95006 4.99875L8.78745 8.25094C8.76647 8.67055 8.42014 9 8 9C7.57986 9 7.23353 8.67055 7.21255 8.25094L7.04994 4.99875Z"></path></g><defs><clipPath id="clip0_5122_10355"><rect width="16" height="16"></rect></clipPath></defs></svg>'),_tmpl$2$1=template$1('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28" fill="none"><circle cx="14" cy="14" r="12"></circle><circle cx="14" cy="18.9" r="1.4"></circle><path d="M12.6658 8.89845C12.63 8.13698 13.2377 7.5 14 7.5C14.7623 7.5 15.37 8.13698 15.3342 8.89845L15.047 15.0013C15.0207 15.5604 14.5597 16.0002 14 16.0002C13.4403 16.0002 12.9793 15.5604 12.953 15.0013L12.6658 8.89845Z"></path></svg>'),ExclamationIcon=_=>{const d=useTheme(),v=()=>_.size,A=()=>_.fill||d.colors.icon.error;return createMemo((()=>{const C=createMemo(()=>v()==="16");return()=>C()?(()=>{const w=_tmpl$$3.cloneNode(!0),T=w.firstChild,R=T.firstChild,G=R.nextSibling,I=G.nextSibling,z=T.nextSibling,H=z.firstChild,Y=H.firstChild;return createRenderEffect(ee=>{const ie=A(),oe=d.colors.constant.white,se=d.colors.constant.white,re=d.colors.constant.white;return ie!==ee._v$&&setAttribute(R,"fill",ee._v$=ie),oe!==ee._v$2&&setAttribute(G,"fill",ee._v$2=oe),se!==ee._v$3&&setAttribute(I,"fill",ee._v$3=se),re!==ee._v$4&&setAttribute(Y,"fill",ee._v$4=re),ee},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),w})():(()=>{const w=createMemo(()=>v()==="28");return()=>w()?(()=>{const T=_tmpl$2$1.cloneNode(!0),R=T.firstChild,G=R.nextSibling,I=G.nextSibling;return createRenderEffect(z=>{const H=_.class,Y=A(),ee=d.colors.constant.white,ie=d.colors.constant.white;return H!==z._v$5&&setAttribute(T,"class",z._v$5=H),Y!==z._v$6&&setAttribute(R,"fill",z._v$6=Y),ee!==z._v$7&&setAttribute(G,"fill",z._v$7=ee),ie!==z._v$8&&setAttribute(I,"fill",z._v$8=ie),z},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),T})():null})()})())},_tmpl$$2=template$1("<li></li>"),AllWalletsListModal=_=>{const d=()=>isMobile()?void 0:510,[v,A]=createSignal(null);let C=null;const w=z=>{A(z),C!=null&&clearTimeout(C),C=setTimeout(()=>A(null),1500)},T=z=>{if(!z.isSupportRequiredFeatures&&_.featureCheckMode==="strict"){w(z);return}_.onSelect(z)},R=()=>isMobile()?_.walletsList.filter(supportsMobile):_.walletsList,G=()=>R().filter(z=>z.isSupportRequiredFeatures),I=()=>R().filter(z=>!z.isSupportRequiredFeatures);return createComponent(DesktopSelectWalletModalStyled,{"data-tc-wallets-modal-list":"true",get children(){return[createComponent(StyledIconButton$5,{icon:"arrow",onClick:()=>_.onBack()}),createComponent(H1Styled$9,{translationKey:"walletModal.wallets",children:"Wallets"}),createComponent(ScrollContainer,{get maxHeight(){return d()},get children(){return[createComponent(WalletsUl,{get children(){return createComponent(For,{get each(){return G()},children:z=>(()=>{const H=_tmpl$$2.cloneNode(!0);return insert(H,createComponent(WalletLabeledItemStyled,{wallet:z,onClick:()=>_.onSelect(z)})),H})()})}}),createComponent(Show,{get when(){return I().length>0&&_.featureCheckMode!=="hide"},get children(){return[createComponent(WalletsNotSupportedNotifier,{get children(){return[createComponent(WalletsNotSupportedNotifierText,{translationKey:"walletModal.allWallets.walletsBelowNotSupported",children:"The wallets below dont support all features of the connected service. You can use your recovery phrase in one of the supported wallets above."}),createComponent(ExclamationIcon,{size:"28"})]}}),createComponent(WalletsUl,{get children(){return createComponent(For,{get each(){return I()},children:z=>(()=>{const H=_tmpl$$2.cloneNode(!0);return insert(H,createComponent(WalletLabeledItemStyled,{wallet:z,onClick:()=>T(z),get withOpacity(){return _.featureCheckMode==="strict"}})),H})()})}}),createComponent(Transition,{onBeforeEnter:z=>{animate(z,[{opacity:0,transform:"translate(-50%, 44px)"},{opacity:1,transform:"translate(-50%, 0)"}],{duration:150,easing:"ease-out"})},onExit:(z,H)=>{animate(z,[{opacity:1,transform:"translate(-50%, 0)"},{opacity:0,transform:"translate(-50%, 44px)"}],{duration:150,easing:"ease-out"}).finished.then(()=>{H()})},get children(){return createComponent(Show,{get when(){return v()},get children(){return createComponent(ErrorBoxStyled,{get children(){return[createComponent(ErrorIcon,{size:"xs"}),createComponent(Text$1,{translationKey:"walletModal.allWallets.walletNotSupportService",get translationValues(){return{name:v().name}},get children(){return[createMemo(()=>v().name)," doesnt support connected service"]}})]}})}})}})]}})]}})]}})},tgButtonBorders={m:"16px",s:"12px",none:"0"},tgIconBorders={m:"6px",s:"6px",none:"0"},DesktopConnectionModalStyled=styled.div`
    display: flex;
    flex-direction: column;
`,BodyStyled$1=styled.div`
    flex: 1;
    margin-top: ${_=>_.qr?"0":"18px"};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 232px;
`,QRCodeStyled$1=styled(QRCode)`
    margin-bottom: 24px;
`,H1Styled$8=styled(H1)`
    max-width: 288px;
    margin: 0 auto 2px;
`,H2Styled$4=styled(H2)`
    max-width: 288px;
    text-align: center;
    margin: 0 auto 20px;
`,StyledIconButton$4=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,ButtonsContainerStyled$2=styled.div`
    display: flex;
    justify-content: center;
    gap: 8px;
    padding-bottom: 16px;
`,BottomButtonsContainerStyled=styled(ButtonsContainerStyled$2)`
    padding-bottom: 0;
`,FooterButton$1=styled(Button$1)`
    margin-bottom: 24px;
`,LoaderStyled$1=styled(LoaderIcon)`
    margin-bottom: 18px;
    margin-top: 2px;
`,ErrorIconStyled$2=styled(ErrorIcon)`
    margin-bottom: 16px;
`,BodyTextStyled$2=styled(H2)`
    color: ${_=>_.theme.colors.text.secondary};
    text-align: center;
    margin-bottom: 20px;
`,TgButtonStyled=styled(Button$1)`
    margin-top: -8px;
    margin-bottom: 24px;
    width: 100%;
    padding: 12px 12px 12px 20px;
    border-radius: ${_=>tgButtonBorders[_.theme.borderRadius]};
    font-size: 16px;
    line-height: 20px;
`,TgImageStyled=styled(Image$1)`
    width: 32px;
    height: 32px;
    border-radius: ${_=>tgIconBorders[_.theme.borderRadius]};
`,Translation=_=>{const[d]=useI18n();return createMemo(()=>{var v;return d(_.translationKey,_.translationValues,(v=_.children)==null?void 0:v.toString())})};function addReturnStrategy(_,d){let v;typeof d=="string"?v=d:v=isInTMA()?d.twaReturnUrl||d.returnStrategy:"none";const A=addQueryParameter(_,"ret",v);if(!isTelegramUrl(_))return A;const C=A.slice(A.lastIndexOf("&")+1);return A.slice(0,A.lastIndexOf("&"))+"-"+encodeTelegramUrlParameters(C)}function redirectToTelegram(_,d){d=__spreadValues$1({},d);const v=convertToTGDirectLink(_),A=new URL(v);if(A.searchParams.has("startapp")||A.searchParams.append("startapp","tonconnect"),isInTelegramBrowser()){d.returnStrategy="back";const C=addReturnStrategy(A.toString(),d.returnStrategy);openLinkBlank(C)}else if(isInTMA())if(isTmaPlatform("ios","android","macos","tdesktop","web")){d.returnStrategy="back";const C=addReturnStrategy(A.toString(),d.returnStrategy);sendOpenTelegramLink(C)}else isTmaPlatform("weba")?sendOpenTelegramLink(addReturnStrategy(A.toString(),d)):openLinkBlank(addReturnStrategy(A.toString(),d));else if(isOS("ios")){d.returnStrategy==="back"&&(isBrowser$2("safari")?d.returnStrategy="back":isBrowser$2("chrome")?d.returnStrategy="googlechrome://":isBrowser$2("firefox")?d.returnStrategy="firefox://":isBrowser$2("opera")?d.returnStrategy="opera-http://":d.returnStrategy=location.href);const C=isBrowser$2("chrome"),w=isBrowser$2("firefox");if((C||w)&&!d.forceRedirect){const R=addReturnStrategy(A.toString(),d.returnStrategy),G=convertToTGDeepLink(R);openDeeplinkWithFallback(G,()=>openLinkBlank(R))}else{const R=addReturnStrategy(A.toString(),d.returnStrategy);openLinkBlank(R)}}else if(isOS("android")){d.returnStrategy="back";const C=isBrowser$2("chrome"),w=isBrowser$2("firefox");if((C||w)&&!d.forceRedirect){const R=addReturnStrategy(A.toString(),d.returnStrategy),G=convertToTGDeepLink(R);openDeeplinkWithFallback(G,()=>openLinkBlank(R))}else{const R=addReturnStrategy(A.toString(),d.returnStrategy);openLinkBlank(R)}}else if(isOS("ipad")){d.returnStrategy==="back"&&(isBrowser$2("safari")?d.returnStrategy="back":isBrowser$2("chrome")?d.returnStrategy="googlechrome://":isBrowser$2("firefox")?d.returnStrategy="firefox://":isBrowser$2("opera")?d.returnStrategy="opera-http://":d.returnStrategy=location.href);const C=isBrowser$2("chrome"),w=isBrowser$2("firefox"),T=(C||w)&&!d.forceRedirect,R=addReturnStrategy(A.toString(),d.returnStrategy);if(T){const G=convertToTGDeepLink(R);openDeeplinkWithFallback(G,()=>openLinkBlank(R))}else openLinkBlank(R)}else if(isOS("macos","windows","linux")){d.returnStrategy="back",d.twaReturnUrl=void 0;const C=addReturnStrategy(A.toString(),d.returnStrategy);if(d.forceRedirect)openLinkBlank(C);else{const w=convertToTGDeepLink(C);openDeeplinkWithFallback(w,()=>openLinkBlank(C))}}else openLinkBlank(addReturnStrategy(A.toString(),d))}function redirectToWallet(_,d,v,A){if(v=__spreadValues$1({},v),isInTelegramBrowser())if(isOS("ios","android"))v.returnStrategy==="back"&&(v.returnStrategy="tg://resolve"),A("universal-link"),openLink(addReturnStrategy(_,v.returnStrategy),"_self");else{A("universal-link");const C=addReturnStrategy(_,v.returnStrategy);openLinkBlank(C)}else if(isInTMA())if(isTmaPlatform("ios","android")){v.returnStrategy==="back"&&(v.returnStrategy="tg://resolve"),A("universal-link");const C=addReturnStrategy(_,v.returnStrategy);sendOpenTelegramLink(C,()=>{A("universal-link"),openLinkBlank(C)})}else if(isTmaPlatform("macos","tdesktop")){v.returnStrategy==="back"&&(v.returnStrategy="tg://resolve");const C=addReturnStrategy(_,v.returnStrategy);!!d&&!v.forceRedirect?(A("custom-deeplink"),openDeeplinkWithFallback(toDeeplink(C,d),()=>{A("universal-link"),openLinkBlank(C)})):(A("universal-link"),openLinkBlank(C))}else if(isTmaPlatform("weba")){v.returnStrategy==="back"&&(isBrowser$2("safari")?v.returnStrategy=location.href:isBrowser$2("chrome")?v.returnStrategy="googlechrome://":isBrowser$2("firefox")?v.returnStrategy="firefox://":isBrowser$2("opera")?v.returnStrategy="opera-http://":v.returnStrategy=location.href);const C=addReturnStrategy(_,v.returnStrategy);!!d&&!v.forceRedirect?(A("custom-deeplink"),openDeeplinkWithFallback(toDeeplink(C,d),()=>{A("universal-link"),openLinkBlank(C)})):(A("universal-link"),openLinkBlank(C))}else if(isTmaPlatform("web")){v.returnStrategy==="back"&&(isBrowser$2("safari")?v.returnStrategy=location.href:isBrowser$2("chrome")?v.returnStrategy="googlechrome://":isBrowser$2("firefox")?v.returnStrategy="firefox://":isBrowser$2("opera")?v.returnStrategy="opera-http://":v.returnStrategy=location.href);const C=addReturnStrategy(_,v.returnStrategy);!!d&&!v.forceRedirect?(A("custom-deeplink"),openDeeplinkWithFallback(toDeeplink(C,d),()=>{A("universal-link"),openLinkBlank(C)})):(A("universal-link"),openLinkBlank(C))}else{A("universal-link");const C=addReturnStrategy(_,v.returnStrategy);openLinkBlank(C)}else if(isOS("ios"))v.returnStrategy==="back"&&(isBrowser$2("safari")?v.returnStrategy="none":isBrowser$2("chrome")?v.returnStrategy="googlechrome://":isBrowser$2("firefox")?v.returnStrategy="firefox://":isBrowser$2("opera")?v.returnStrategy="opera-http://":v.returnStrategy=location.href),isBrowser$2("chrome")?(A("universal-link"),openLink(addReturnStrategy(_,v.returnStrategy),"_self")):(A("universal-link"),openLinkBlank(addReturnStrategy(_,v.returnStrategy)));else if(isOS("android"))v.returnStrategy==="back"&&(isBrowser$2("chrome")?v.returnStrategy="googlechrome://":isBrowser$2("firefox")?v.returnStrategy="firefox://":isBrowser$2("opera")?v.returnStrategy="opera-http://":v.returnStrategy=location.href),A("universal-link"),openLinkBlank(addReturnStrategy(_,v.returnStrategy));else if(isOS("ipad"))v.returnStrategy==="back"&&(isBrowser$2("safari")?v.returnStrategy="none":isBrowser$2("chrome")?v.returnStrategy="googlechrome://":isBrowser$2("firefox")?v.returnStrategy="firefox://":isBrowser$2("opera")?v.returnStrategy="opera-http://":v.returnStrategy=location.href),isBrowser$2("chrome")?(A("universal-link"),openLink(addReturnStrategy(_,v.returnStrategy),"_self")):(A("universal-link"),openLinkBlank(addReturnStrategy(_,v.returnStrategy)));else if(isOS("macos","windows","linux")){v.returnStrategy==="back"&&(isBrowser$2("safari")?v.returnStrategy="none":isBrowser$2("chrome")?v.returnStrategy="googlechrome://":isBrowser$2("firefox")?v.returnStrategy="firefox://":isBrowser$2("opera")?v.returnStrategy="opera-http://":v.returnStrategy="none");const C=addReturnStrategy(_,v.returnStrategy);!!d&&!v.forceRedirect?(A("custom-deeplink"),openDeeplinkWithFallback(toDeeplink(C,d),()=>{A("universal-link"),openLinkBlank(C)})):(A("universal-link"),openLinkBlank(C))}else A("universal-link"),openLinkBlank(addReturnStrategy(_,v.returnStrategy))}function addQueryParameter(_,d,v){const A=new URL(_);return A.searchParams.append(d,v),A.toString()}function convertToTGDirectLink(_){const d=new URL(_);return d.searchParams.has("attach")&&(d.searchParams.delete("attach"),d.pathname+="/start"),d.toString()}function convertToTGDeepLink(_){const d=new URL(_),[,v,A]=d.pathname.split("/"),C=d.searchParams.get("startapp");return`tg://resolve?domain=${v}&appname=${A}&startapp=${C}`}const DesktopConnectionModal=_=>{const[d,v]=createSignal("mobile"),[A,C]=createSignal(null);createEffect(()=>{var se;C((se=_.defaultError)!=null?se:null)});const[w,T]=createSignal(),[R,G]=createSignal(!0),I=useContext(ConnectorContext),z=I.onStatusChange(()=>{},se=>{if(se instanceof WalletMissingRequiredFeaturesError){C("missing-features");return}_.wallet.appName!==AT_WALLET_APP_NAME&&C("connection-declined")});onCleanup(z);const H=()=>{try{const se=I.connect({universalLink:_.wallet.universalLink,bridgeUrl:_.wallet.bridgeUrl},_.additionalRequest);T(se)}catch{}};createEffect(()=>{untrack(d)!=="extension"&&(supportsMobile(_.wallet)||supportsDesktop(_.wallet))&&H()});const Y=()=>{C(null),d()==="extension"&&H(),v("mobile"),setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:"qrcode"}))},ee=()=>{if(C(null),d()==="extension"&&H(),v("desktop"),isTelegramUrl(w()))ie();else{const se=!R();G(!1),redirectToWallet(w(),_.wallet.deepLink,{returnStrategy:appState.returnStrategy,forceRedirect:se},re=>{setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:re}))})}},ie=()=>{const se=!R();G(!1),setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:"universal-link"})),redirectToTelegram(w(),{returnStrategy:appState.returnStrategy,twaReturnUrl:appState.twaReturnUrl,forceRedirect:se})},oe=()=>{C(null),v("extension"),isWalletInfoCurrentlyInjected(_.wallet)&&(setLastSelectedWalletInfo(_.wallet),I.connect({jsBridgeKey:_.wallet.jsBridgeKey},_.additionalRequest))};return supportsMobile(_.wallet)?Y():supportsExtension(_.wallet)?oe():ee(),createComponent(DesktopConnectionModalStyled,{"data-tc-wallets-modal-connection-desktop":"true",get children(){return[createComponent(Show,{get when(){return!_.backDisabled},get children(){return createComponent(StyledIconButton$4,{icon:"arrow",onClick:()=>_.onBackClick()})}}),createComponent(H1Styled$8,{get children(){return _.wallet.name}}),createComponent(Show,{get when(){return createMemo(()=>d()==="mobile")()&&!A()},get children(){return createComponent(H2Styled$4,{translationKey:"walletModal.desktopConnectionModal.scanQR",get translationValues(){return{name:_.wallet.name}},get children(){return["Scan the QR code below with your phones or ",createMemo(()=>_.wallet.name),"s camera"]}})}}),createComponent(BodyStyled$1,{get qr(){return d()==="mobile"},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return A()},get children(){return[createComponent(ErrorIconStyled$2,{size:"s"}),createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return A()==="missing-features"},get children(){return createComponent(BodyTextStyled$2,{translationKey:"walletModal.desktopConnectionModal.missingFeatures",get translationValues(){return{name:_.wallet.name}},children:"Please update Wallet, your version does not support required features for this dApp"})}}),createComponent(Match,{get when(){return A()==="connection-declined"},get children(){return createComponent(BodyTextStyled$2,{translationKey:"walletModal.desktopConnectionModal.connectionDeclined",children:"Connection declined"})}}),createComponent(Match,{get when(){return A()==="not-supported"},get children(){return createComponent(BodyTextStyled$2,{translationKey:"walletModal.desktopConnectionModal.notSupportedWallet",get translationValues(){return{name:_.wallet.name}},get children(){return[createMemo(()=>_.wallet.name)," doesnt support the requested action. Please connect another wallet that supports it."]}})}})]}}),createComponent(ButtonsContainerStyled$2,{get children(){return[createComponent(Show,{get when(){return A()!=="not-supported"},get children(){return createComponent(Button$1,{get leftIcon(){return createComponent(RetryIcon,{})},get onClick(){return d()==="extension"?oe:ee},get children(){return createComponent(Translation,{translationKey:"common.retry",children:"Retry"})}})}}),createComponent(Show,{get when(){return A()==="missing-features"},get children(){return createComponent(Link,{get href(){return _.wallet.aboutUrl},blank:!0,get children(){return createComponent(Button$1,{get leftIcon(){return createComponent(LinkIcon,{})},get children(){return createComponent(Translation,{translationKey:"walletModal.desktopConnectionModal.updateWallet",get translationValues(){return{name:_.wallet.name}},get children(){return["Update ",createMemo(()=>_.wallet.name)]}})}})}})}}),createComponent(Show,{get when(){return A()==="not-supported"},get children(){return createComponent(Button$1,{onClick:()=>_.onBackClick(),get children(){return createComponent(Translation,{translationKey:"walletModal.desktopConnectionModal.chooseAnotherWallet",children:"Choose Another Wallet"})}})}})]}})]}}),createComponent(Match,{get when(){return d()==="mobile"},get children(){return createComponent(QRCodeStyled$1,{disableCopy:!1,get sourceUrl(){return addReturnStrategy(w(),"none")},get imageUrl(){return _.wallet.imageUrl}})}}),createComponent(Match,{get when(){return d()==="extension"},get children(){return[createComponent(Show,{get when(){return isWalletInfoCurrentlyInjected(_.wallet)},get children(){return[createComponent(LoaderStyled$1,{size:"s"}),createComponent(BodyTextStyled$2,{translationKey:"walletModal.desktopConnectionModal.continueInExtension",get translationValues(){return{name:_.wallet.name}},get children(){return["Continue in ",createMemo(()=>_.wallet.name)," browser extension"]}}),createComponent(ButtonsContainerStyled$2,{get children(){return createComponent(Button$1,{get leftIcon(){return createComponent(RetryIcon,{})},onClick:oe,get children(){return createComponent(Translation,{translationKey:"common.retry",children:"Retry"})}})}})]}}),createComponent(Show,{get when(){return!isWalletInfoCurrentlyInjected(_.wallet)},get children(){return[createComponent(BodyTextStyled$2,{translationKey:"walletModal.desktopConnectionModal.dontHaveExtension",get translationValues(){return{name:_.wallet.name}},get children(){return["Seems you don't have installed ",createMemo(()=>_.wallet.name)," browser extension"]}}),createComponent(ButtonsContainerStyled$2,{get children(){return createComponent(Link,{get href(){return _.wallet.aboutUrl},blank:!0,get children(){return createComponent(Button$1,{get rightIcon(){return createComponent(LinkIcon,{})},onClick:oe,get children(){return createComponent(Translation,{translationKey:"walletModal.desktopConnectionModal.getWallet",get translationValues(){return{name:_.wallet.name}},get children(){return["Get ",createMemo(()=>_.wallet.name)]}})}})}})}})]}})]}}),createComponent(Match,{get when(){return d()==="desktop"},get children(){return[createComponent(LoaderIcon,{size:"m"}),createComponent(BodyTextStyled$2,{translationKey:"walletModal.desktopConnectionModal.continueOnDesktop",get translationValues(){return{name:_.wallet.name}},get children(){return["Continue in ",createMemo(()=>_.wallet.name)," on desktop"]}}),createComponent(ButtonsContainerStyled$2,{get children(){return[createComponent(Button$1,{get leftIcon(){return createComponent(RetryIcon,{})},onClick:ee,get children(){return createComponent(Translation,{translationKey:"common.retry",children:"Retry"})}}),createComponent(Link,{get href(){return _.wallet.aboutUrl},blank:!0,get children(){return createComponent(Button$1,{get rightIcon(){return createComponent(LinkIcon,{})},get children(){return createComponent(Translation,{translationKey:"walletModal.desktopConnectionModal.getWallet",get translationValues(){return{name:_.wallet.name}},get children(){return["Get ",createMemo(()=>_.wallet.name)]}})}})}})]}})]}})]}})}}),createComponent(Show,{get when(){return _.wallet.appName===AT_WALLET_APP_NAME},get children(){return createComponent(TgButtonStyled,{get rightIcon(){return createComponent(TgImageStyled,{get src(){return IMG.TG}})},scale:"s",onClick:ie,get children(){return createComponent(Translation,{translationKey:"walletModal.desktopConnectionModal.openWalletOnTelegram",children:"Open Wallet in Telegram on desktop"})}})}}),createComponent(Show,{get when(){return _.wallet.appName!==AT_WALLET_APP_NAME},get children(){return createComponent(BottomButtonsContainerStyled,{get children(){return[createComponent(Show,{get when(){return createMemo(()=>d()!=="mobile")()&&supportsMobile(_.wallet)},get children(){return createComponent(FooterButton$1,{appearance:"secondary",get leftIcon(){return createComponent(MobileIcon,{})},onClick:Y,get children(){return createComponent(Translation,{translationKey:"common.mobile",children:"Mobile"})}})}}),createComponent(Show,{get when(){return createMemo(()=>d()!=="extension")()&&supportsExtension(_.wallet)},get children(){return createComponent(FooterButton$1,{appearance:"secondary",get leftIcon(){return createComponent(BrowserIcon,{})},onClick:oe,get children(){return createComponent(Translation,{translationKey:"common.browserExtension",children:"Browser Extension"})}})}}),createComponent(Show,{get when(){return createMemo(()=>d()!=="desktop")()&&supportsDesktop(_.wallet)},get children(){return createComponent(FooterButton$1,{appearance:"secondary",get leftIcon(){return createComponent(DesktopIcon,{})},onClick:ee,get children(){return createComponent(Translation,{translationKey:"common.desktop",children:"Desktop"})}})}})]}})}})]}})},InfoModalStyled=styled.div``,StyledIconButton$3=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,H1Styled$7=styled(H1)`
    margin-bottom: 18px;
`,InfoBlock=styled.div`
    padding: 16px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
`,InfoBlockIconClass=u`
    margin-bottom: 12px;
`,H3Styled$1=styled(H3)`
    text-align: center;
    margin-bottom: 4px;
`,TextStyled$2=styled(Text$1)`
    text-align: center;
    max-width: 352px;
    color: ${_=>_.theme.colors.text.secondary};
`,ButtonsBlock=styled.div`
    padding: 16px 24px 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
`,LINKS={GET_A_WALLET:"https://ton.org/wallets?filters[wallet_features][slug][$in]=dapp-auth&pagination[limit]=-1"},InfoModal=_=>createComponent(InfoModalStyled,{"data-tc-wallets-modal-info":"true",get children(){return[createComponent(StyledIconButton$3,{icon:"arrow",onClick:()=>_.onBackClick()}),createComponent(H1Styled$7,{translationKey:"walletModal.infoModal.whatIsAWallet",children:"What is a wallet"}),createComponent(ScrollContainer,{get children(){return[createComponent(InfoBlock,{get children(){return[createComponent(SecurityIcon,{class:InfoBlockIconClass}),createComponent(H3Styled$1,{translationKey:"walletModal.infoModal.secureDigitalAssets",children:"Secure digital assets storage"}),createComponent(TextStyled$2,{translationKey:"walletModal.infoModal.walletProtects",children:"A wallet protects and manages your digital assets including TON, tokens and collectables."})]}}),createComponent(InfoBlock,{get children(){return[createComponent(PersonalityIcon,{class:InfoBlockIconClass}),createComponent(H3Styled$1,{translationKey:"walletModal.infoModal.controlIdentity",children:"Control your Web3 identity"}),createComponent(TextStyled$2,{translationKey:"walletModal.infoModal.manageIdentity",children:"Manage your digital identity and access decentralized applications with ease. Maintain control over your data and engage securely in the blockchain ecosystem."})]}}),createComponent(InfoBlock,{get children(){return[createComponent(SwapIcon,{class:InfoBlockIconClass}),createComponent(H3Styled$1,{translationKey:"walletModal.infoModal.effortlessCryptoTransactions",children:"Effortless crypto transactions"}),createComponent(TextStyled$2,{translationKey:"walletModal.infoModal.easilySend",children:"Easily send, receive, monitor your cryptocurrencies. Streamline your operations with decentralized applications."})]}}),createComponent(ButtonsBlock,{get children(){return createComponent(Link,{get href(){return LINKS.GET_A_WALLET},blank:!0,get children(){return createComponent(Button$1,{get rightIcon(){return createComponent(WalletIcon,{})},get children(){return createComponent(Translation,{translationKey:"walletModal.infoModal.getAWallet",children:"Get a Wallet"})}})}})}})]}})]}}),MobileConnectionModalStyled=styled.div``,BodyStyled=styled.div`
    flex: 1;
    margin-top: 18px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 232px;
`,H1Styled$6=styled(H1)`
    max-width: 262px;
    margin: 0 auto 8px;
`,StyledIconButton$2=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,FooterStyled=styled.div`
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-top: 0.5px solid ${_=>rgba(_.theme.colors.icon.secondary,.2)};
`,ImageStyled=styled(Image$1)`
    width: 36px;
    height: 36px;
    border-radius: 10px;
`,FooterButton=styled(Link)`
    margin-left: auto;
`,LoaderStyled=styled(LoaderIcon)`
    margin-bottom: 18px;
    margin-top: 2px;
`,ErrorIconStyled$1=styled(ErrorIcon)`
    margin-bottom: 16px;
`,BodyTextStyled$1=styled(H2)`
    color: ${_=>_.theme.colors.text.secondary};
    text-align: center;
    margin-bottom: 20px;
`,ButtonsContainerStyled$1=styled.div`
    display: flex;
    justify-content: center;
    gap: 8px;
    padding-bottom: 16px;
`,actionButtonBorderRadius$1={m:"16px",s:"8px",none:"0"},H1Styled$5=styled(H1)`
    margin-bottom: 2px;
    padding: 0 52px;
`,H2Styled$3=styled(H2)`
    margin-bottom: 20px;
    padding: 0 64px;
`,QrCodeWrapper$1=styled.div`
    padding: 0 24px 16px;
`,ButtonsWrapper$1=styled.div`
    display: flex;
    flex-direction: row;
    gap: 16px;
    padding: 0 24px 24px;
    margin-top: 0;
`,ActionButton$1=styled(Button$1)`
    width: 100%;
    height: 56px;
    border-radius: ${_=>actionButtonBorderRadius$1[_.theme.borderRadius]};
    background-color: ${_=>rgba(_.theme.colors.accent,.12)};
    color: ${_=>_.theme.colors.accent};
    font-size: 16px;
    line-height: 20px;
    font-weight: 500;
    padding: 17px 20px 19px 20px;
`,MobileConnectionQR=_=>[createComponent(H1Styled$5,{get children(){return _.walletInfo.name}}),createComponent(H2Styled$3,{translationKey:"walletModal.mobileConnectionModal.scanQR",get translationValues(){return{name:_.walletInfo.name}},get children(){return["Scan the QR code below with your phones or ",createMemo(()=>_.walletInfo.name),"s camera"]}}),createComponent(QrCodeWrapper$1,{get children(){return createComponent(QRCode,{get imageUrl(){return _.walletInfo.imageUrl},get sourceUrl(){return addReturnStrategy(_.universalLink,"none")},disableCopy:!0})}}),createComponent(ButtonsWrapper$1,{get children(){return[createComponent(ActionButton$1,{appearance:"secondary",onClick:()=>{var d;return(d=_.onOpenLink)==null?void 0:d.call(_)},get children(){return createComponent(Translation,{translationKey:"walletModal.mobileUniversalModal.openLink",children:"Open Link"})}}),createComponent(ActionButton$1,{appearance:"secondary",onClick:()=>{var d;return(d=_.onCopy)==null?void 0:d.call(_)},get children(){return createComponent(Translation,{get translationKey(){return _.isCopiedShown!==void 0?"common.copied":"common.copyLink"},get children(){return _.isCopiedShown!==void 0?"Copied":"Copy Link"}})}})]}})],MobileConnectionModal=_=>{const d=useTheme(),[v,A]=createSignal(!0),[C,w]=createSignal(!1),[T,R]=createSignal(null);createEffect(()=>{var ue;R((ue=_.defaultError)!=null?ue:null)});const G=useContext(ConnectorContext),I=G.onStatusChange(()=>{},()=>{R(null)}),z=createMemo(()=>G.connect({universalLink:_.wallet.universalLink,bridgeUrl:_.wallet.bridgeUrl},_.additionalRequest)),H=()=>{setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:"universal-link"})),redirectToTelegram(z(),{returnStrategy:appState.returnStrategy,twaReturnUrl:appState.twaReturnUrl,forceRedirect:!0})},Y=()=>{const ue=z();if(isTelegramUrl(ue))return H();R(null);const ge=!v();A(!1),redirectToWallet(z(),_.wallet.deepLink,{returnStrategy:appState.returnStrategy,forceRedirect:ge},ye=>{setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:ye}))})},[ee,ie]=createSignal(void 0),oe=()=>__async(void 0,null,function*(){ee()!==void 0&&clearTimeout(ee()),yield copyToClipboard(z());const ue=setTimeout(()=>ie(void 0),1500);ie(ue)}),se=()=>{R(null),w(!0),setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:"qrcode"}))},re=()=>{w(!1),setLastSelectedWalletInfo(__spreadProps(__spreadValues$1({},_.wallet),{openMethod:"universal-link"}))},fe=()=>{C()?re():_.onBackClick()};return onCleanup(I),Y(),createComponent(MobileConnectionModalStyled,{"data-tc-wallets-modal-connection-mobile":"true",get children(){return[createComponent(Show,{get when(){return!_.backDisabled||C()},get children(){return createComponent(StyledIconButton$2,{icon:"arrow",onClick:fe})}}),createComponent(Show,{get when(){return C()},get children(){return createComponent(MobileConnectionQR,{get universalLink(){return z()},get walletInfo(){return _.wallet},onOpenLink:Y,onCopy:oe,get isCopiedShown(){return ee()}})}}),createComponent(Show,{get when(){return!C()},get children(){return[createComponent(H1Styled$6,{get children(){return _.wallet.name}}),createComponent(BodyStyled,{get children(){return[createComponent(Show,{get when(){return T()},get children(){return[createComponent(ErrorIconStyled$1,{size:"s"}),createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return T()==="missing-features"},get children(){return createComponent(BodyTextStyled$1,{translationKey:"walletModal.mobileConnectionModal.missingFeatures",get translationValues(){return{name:_.wallet.name}},children:"Please update Wallet, your version does not support required features for this dApp"})}}),createComponent(Match,{get when(){return T()==="connection-declined"},get children(){return createComponent(BodyTextStyled$1,{translationKey:"walletModal.mobileConnectionModal.connectionDeclined",children:"Connection declined"})}}),createComponent(Match,{get when(){return T()==="not-supported"},get children(){return createComponent(BodyTextStyled$1,{translationKey:"walletModal.mobileConnectionModal.notSupportedWallet",get translationValues(){return{name:_.wallet.name}},get children(){return[createMemo(()=>_.wallet.name)," doesnt support the requested action. Please connect another wallet that supports it."]}})}})]}}),createComponent(ButtonsContainerStyled$1,{get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return T()==="missing-features"},get children(){return[createComponent(Button$1,{get leftIcon(){return createComponent(RetryIcon,{})},onClick:Y,get children(){return createComponent(Translation,{translationKey:"common.retry",children:"Retry"})}}),createComponent(Link,{get href(){return _.wallet.aboutUrl},blank:!0,get children(){return createComponent(Button$1,{get leftIcon(){return createComponent(LinkIcon,{})},get children(){return createComponent(Translation,{translationKey:"walletModal.mobileConnectionModal.updateWallet",get translationValues(){return{name:_.wallet.name}},get children(){return["Update ",createMemo(()=>_.wallet.name)]}})}})}})]}}),createComponent(Match,{get when(){return T()==="not-supported"},get children(){return createComponent(Button$1,{onClick:()=>_.onBackClick(),get children(){return createComponent(Translation,{translationKey:"walletModal.mobileConnectionModal.chooseAnotherWallet",children:"Choose Another Wallet"})}})}}),createComponent(Match,{get when(){return T()==="connection-declined"},get children(){return[createComponent(Button$1,{get leftIcon(){return createComponent(RetryIcon,{})},onClick:Y,get children(){return createComponent(Translation,{translationKey:"common.retry",children:"Retry"})}}),createComponent(Button$1,{get leftIcon(){return createComponent(QRIcon,{get fill(){return d.colors.accent}})},onClick:se,get children(){return createComponent(Translation,{translationKey:"walletModal.mobileConnectionModal.showQR",children:"Show QR Code"})}})]}})]}})}})]}}),createComponent(Show,{get when(){return!T()},get children(){return[createComponent(LoaderStyled,{size:"s"}),createComponent(BodyTextStyled$1,{translationKey:"walletModal.mobileConnectionModal.continueIn",get translationValues(){return{name:_.wallet.name}},get children(){return["Continue in ",createMemo(()=>_.wallet.name),""]}}),createComponent(ButtonsContainerStyled$1,{get children(){return[createComponent(Button$1,{get leftIcon(){return createComponent(RetryIcon,{})},onClick:Y,get children(){return createComponent(Translation,{translationKey:"common.retry",children:"Retry"})}}),createComponent(Button$1,{get leftIcon(){return createComponent(QRIcon,{get fill(){return d.colors.accent}})},onClick:se,get children(){return createComponent(Translation,{translationKey:"walletModal.mobileConnectionModal.showQR",children:"Show QR Code"})}})]}})]}})]}}),createComponent(FooterStyled,{get children(){return[createComponent(ImageStyled,{get src(){return _.wallet.imageUrl}}),createComponent(H3,{get children(){return _.wallet.name}}),createComponent(FooterButton,{get href(){return _.wallet.aboutUrl},blank:!0,get children(){return createComponent(Button$1,{get children(){return createComponent(Translation,{translationKey:"common.get",children:"GET"})}})}})]}})]}})]}})},borders$2={m:"16px",s:"12px",none:"0"},tgBorders={m:"6px",s:"6px",none:"0"};styled.li`
    width: 82px;
    min-width: 82px;
    height: 124px;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 4px;

    text-align: center;
    cursor: pointer;

    transition: transform 0.1s ease-in-out;

    ${mediaNotTouch} {
        &:hover {
            transform: scale(1.04);
        }
    }

    &:active {
        transform: scale(0.96);
    }

    ${mediaTouch} {
        &:active {
            transform: scale(0.92);
        }
    }
`;const H1Styled$4=styled(H1)`
    margin-top: 38px;
    margin-bottom: 4px;
    padding: 0 24px;
`,H2Styled$2=styled(H2)`
    margin: ${_=>{var d;return(d=_.margin)!=null?d:"0 0 28px 0"}};
    padding: ${_=>{var d;return(d=_.padding)!=null?d:"0 24px"}};
    min-height: ${_=>{var d;return(d=_.padding)!=null?d:"44px"}};
    max-width: ${_=>_.maxWidth}px;
    margin-left: ${_=>_.maxWidth?"auto":"0px"};
    margin-right: ${_=>_.maxWidth?"auto":"0px"};
`;styled(Button$1)`
    display: block;
    margin: 0 auto;
`;const TelegramButtonStyled=styled(Button$1)`
    margin: 0 28px 24px;
    width: calc(100% - 56px);
    border-radius: ${_=>borders$2[_.theme.borderRadius]};
    padding: 14px 16px 14px 14px;
    background-color: ${_=>_.theme.colors.telegramButton};

    color: ${_=>_.theme.colors.constant.white};
    font-weight: 500;
    font-size: 16px;
    line-height: 20px;

    @media (max-width: 375px) {
        margin: 0 16px 24px;
        width: calc(100% - 32px);
    }
`,TGImageStyled=styled(Image$1)`
    background-color: transparent;
    border-radius: ${_=>tgBorders[_.theme.borderRadius]};
    width: 24px;
    height: 24px;
`,StyledLeftActionButton=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,actionButtonBorderRadius={m:"16px",s:"8px",none:"0"},H1Styled$3=styled(H1)`
    margin-bottom: 2px;
    padding: 0 52px;
`,H2Styled$1=styled(H2)`
    margin-bottom: 20px;
    padding: 0 64px;
`,QrCodeWrapper=styled.div`
    padding: 0 24px 16px;
`,ButtonsWrapper=styled.div`
    display: flex;
    flex-direction: row;
    gap: 16px;
    padding: 0 24px 24px;
    margin-top: 0;
`,ActionButton=styled(Button$1)`
    width: 100%;
    height: 56px;
    border-radius: ${_=>actionButtonBorderRadius[_.theme.borderRadius]};
    background-color: ${_=>rgba(_.theme.colors.accent,.12)};
    color: ${_=>_.theme.colors.accent};
    font-size: 16px;
    line-height: 20px;
    font-weight: 500;
    padding: 17px 20px 19px 20px;
`,MobileUniversalQR=_=>[createComponent(H1Styled$3,{translationKey:"walletModal.mobileUniversalModal.connectYourWallet",children:"Connect your TON wallet"}),createComponent(H2Styled$1,{translationKey:"walletModal.mobileUniversalModal.scan",children:"Scan with your mobile wallet"}),createComponent(QrCodeWrapper,{get children(){return createComponent(QRCode,{get imageUrl(){return IMG.TON},get sourceUrl(){return addReturnStrategy(_.universalLink,"none")},disableCopy:!0})}}),createComponent(ButtonsWrapper,{get children(){return[createComponent(ActionButton,{appearance:"secondary",onClick:()=>_.onOpenLink(),get children(){return createComponent(Translation,{translationKey:"walletModal.mobileUniversalModal.openLink",children:"Open Link"})}}),createComponent(ActionButton,{appearance:"secondary",onClick:()=>_.onCopy(),get children(){return createComponent(Translation,{get translationKey(){return _.isCopiedShown!==void 0?"common.copied":"common.copyLink"},get children(){return _.isCopiedShown!==void 0?"Copied":"Copy Link"}})}})]}})];function getUniqueBridges(_){const d=new Set(_.filter(isWalletInfoRemote).map(v=>v.bridgeUrl));return Array.from(d).map(v=>({bridgeUrl:v}))}function bridgesIsEqual(_,d){const v=new Set(_?.map(C=>C.bridgeUrl)),A=new Set(d?.map(C=>C.bridgeUrl));return v.size===A.size&&[...v].every(C=>A.has(C))}const _tmpl$$1=template$1("<li></li>"),_tmpl$2=template$1('<div data-tc-wallets-modal-universal-mobile="true"></div>'),MobileUniversalModal=_=>{const[d,v]=createSignal(!1),[A,C]=createSignal(!0),[w,T]=createSignal(null),R=appState.connector,G=()=>_.walletsList.filter(ve=>supportsMobile(ve)&&ve.appName!==AT_WALLET_APP_NAME),I=()=>G().length>7,z=createMemo(()=>getUniqueBridges(_.walletsList),null,{equals:bridgesIsEqual}),H=createMemo(()=>{var ve,Me;return(Me=(ve=_.walletsList.find(we=>we.appName===AT_WALLET_APP_NAME))==null?void 0:ve.isSupportRequiredFeatures)!=null?Me:!1},null),Y=()=>(w()||T(R.connect(z(),_.additionalRequest)),w());setLastSelectedWalletInfo({openMethod:"universal-link"});const[ee,ie]=createSignal(void 0),oe=()=>__async(void 0,null,function*(){ee()!==void 0&&clearTimeout(ee()),yield copyToClipboard(Y());const ve=setTimeout(()=>ie(void 0),1500);ie(ve)}),se=()=>{const ve=!A();C(!1),redirectToWallet(Y(),void 0,{returnStrategy:appState.returnStrategy,forceRedirect:ve},Me=>{setLastSelectedWalletInfo({openMethod:Me})})},re=()=>{T(null);const ve=_.walletsList.find(Be=>Be.appName===AT_WALLET_APP_NAME);if(!ve||!isWalletInfoRemote(ve))throw new TonConnectUIError("@wallet bot not found in the wallets list");const Me=R.connect({bridgeUrl:ve.bridgeUrl,universalLink:ve.universalLink},_.additionalRequest),we=!A();C(!1),redirectToTelegram(Me,{returnStrategy:appState.returnStrategy,twaReturnUrl:appState.twaReturnUrl,forceRedirect:we})},fe=()=>{v(!0),setLastSelectedWalletInfo({openMethod:"qrcode"})},ue=()=>{v(!1),setLastSelectedWalletInfo({openMethod:"universal-link"})},ge=createMemo(()=>G().filter(ve=>ve.isSupportRequiredFeatures),null),ye=createMemo(()=>ge().slice(0,3),null),be=createMemo(()=>G().filter(ve=>!ye().find(Me=>Me.appName===ve.appName)).slice(0,4),null);return(()=>{const ve=_tmpl$2.cloneNode(!0);return insert(ve,createComponent(Show,{get when(){return d()},get children(){return[createComponent(StyledLeftActionButton,{icon:"arrow",onClick:ue}),createComponent(MobileUniversalQR,{get universalLink(){return Y()},get isCopiedShown(){return ee()},onOpenLink:se,onCopy:oe})]}}),null),insert(ve,createComponent(Show,{get when(){return!d()},get children(){return[createComponent(StyledLeftActionButton,{get icon(){return createComponent(QRIcon,{})},onClick:fe}),createComponent(H1Styled$4,{translationKey:"walletModal.mobileUniversalModal.connectYourWallet",children:"Connect your TON wallet"}),createComponent(Show,{get when(){return H()},get children(){return[createComponent(H2Styled$2,{translationKey:"walletModal.mobileUniversalModal.openWalletOnTelegramOrSelect",maxWidth:320,children:"Use Wallet in Telegram or choose other application"}),createComponent(TelegramButtonStyled,{get leftIcon(){return createComponent(AtWalletIcon,{})},get rightIcon(){return createComponent(TGImageStyled,{get src(){return IMG.TG}})},onClick:re,scale:"s",get children(){return createComponent(Translation,{translationKey:"walletModal.mobileUniversalModal.openWalletOnTelegram",children:"Connect Wallet in Telegram"})}})]}}),createComponent(H2Styled$2,{translationKey:"walletModal.mobileUniversalModal.chooseOtherApplication",maxWidth:342,padding:"0 24px 8px 24px",margin:"0",children:"Choose other application"}),createComponent(WalletUlContainer,{get children(){return[createComponent(For,{get each(){return createMemo(()=>!!I())()?ye():ge()},children:Me=>(()=>{const we=_tmpl$$1.cloneNode(!0);return insert(we,createComponent(WalletItem,{get icon(){return Me.imageUrl},get name(){return Me.name},onClick:()=>_.onSelect(Me)})),we})()}),createComponent(Show,{get when(){return I()},get children(){const Me=_tmpl$$1.cloneNode(!0);return insert(Me,createComponent(FourWalletsItem,{labelLine1:"View all",labelLine2:"wallets",get images(){return be().map(we=>we.imageUrl)},onClick:()=>_.onSelectAllWallets()})),Me}})]}})]}}),null),ve})()},borders$1={m:"16px",s:"8px",none:"0"},hoverBorders={m:"8px",s:"4px",none:"0"},DesktopUniversalModalStyled=styled.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 16px;
`,H2Styled=styled(H2)`
    max-width: 320px;
    margin-top: 2px;
    margin-bottom: 20px;
`,H2AvailableWalletsStyled=styled(H2)`
    margin-bottom: 16px;
`,QRCodeStyled=styled(QRCode)`
    margin-bottom: 24px;
`,WalletsContainerStyled=styled.ul`
    display: flex;
`;styled.div`
    display: flex;
    gap: 16px;
    width: 100%;
`;styled(Button$1)`
    position: relative;
    font-size: 16px;
    line-height: 20px;
    width: 100%;
    padding: 0 16px;
    height: 56px;
    border-radius: ${_=>borders$1[_.theme.borderRadius]};

    &:hover {
        ${_=>_.disableEventsAnimation?"transform: unset;":""}
    }

    &:active {
        ${_=>_.disableEventsAnimation?"transform: unset;":""}
    }
`;styled.ul`
    position: absolute;
    bottom: 100%;
    left: 0;
    margin: 0;
    padding: 8px;
    width: 188px;
    transform: translateY(-16px);

    background-color: ${_=>_.theme.colors.background.primary};
    border-radius: ${_=>borders$1[_.theme.borderRadius]};
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.16);
`;styled.li`
    padding: 8px;

    display: flex;
    align-items: center;
    gap: 8px;

    cursor: pointer;
    border-radius: ${_=>hoverBorders[_.theme.borderRadius]};

    transition: background-color, transform 0.1s ease-in-out;

    &:hover {
        background-color: ${_=>_.theme.colors.background.secondary};
    }

    &:active {
        transform: scale(0.96);
    }
`;styled(Image$1)`
    width: 24px;
    height: 24px;

    border-radius: 6px;
`;styled.div`
    margin-top: 23px;
    margin-bottom: 1px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
`;styled(Text$1)`
    color: ${_=>_.theme.colors.text.secondary};
    font-size: 16px;
`;const _tmpl$=template$1("<li></li>"),DesktopUniversalModal=_=>{const[d,v]=createSignal(!1),A=appState.connector,C=createMemo(()=>getUniqueBridges(_.walletsList),null,{equals:bridgesIsEqual});setLastSelectedWalletInfo({openMethod:"qrcode"});const w=createMemo(()=>A.connect(C(),_.additionalRequest)),T=createMemo(()=>_.walletsList.filter(I=>I.isSupportRequiredFeatures),null),R=createMemo(()=>T().slice(0,3),null),G=createMemo(()=>_.walletsList.filter(I=>!R().find(z=>z.appName===I.appName)).slice(0,4),null);return createComponent(DesktopUniversalModalStyled,{onClick:()=>v(!1),"data-tc-wallets-modal-universal-desktop":"true",get children(){return[createComponent(H1,{translationKey:"walletModal.desktopUniversalModal.connectYourWallet",children:"Connect your wallet"}),createComponent(H2Styled,{translationKey:"walletModal.desktopUniversalModal.scan",children:"Scan with your mobile wallet"}),createComponent(QRCodeStyled,{get sourceUrl(){return addReturnStrategy(w(),"none")},get disableCopy(){return d()},get imageUrl(){return IMG.TON}}),createComponent(H2AvailableWalletsStyled,{translationKey:"walletModal.desktopUniversalModal.availableWallets",children:"Available wallets"}),createComponent(WalletsContainerStyled,{get children(){return[createComponent(For,{get each(){return R()},children:I=>(()=>{const z=_tmpl$.cloneNode(!0);return insert(z,createComponent(WalletLabeledItem,{wallet:I,onClick:()=>_.onSelect(I)})),z})()}),createComponent(FourWalletsItem,{labelLine1:"View all",labelLine2:"wallets",get images(){return G().map(I=>I.imageUrl)},onClick:()=>_.onSelectAllWallets()})]}})]}})},borders={m:"16px",s:"8px",none:"0"},H1Styled$2=styled(H1)`
    max-width: 288px;
    margin: 0 auto 38px;
`,DesktopFeatureNotSupportModalStyled=styled.div`
    display: flex;
    flex-direction: column;
    align-items: center;
`,StyledIconButton$1=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,TitleStyled=styled(H1)`
    text-align: center;
    font-size: 20px;
    line-height: 28px;
`,DescriptionStyled=styled(Text$1)`
    margin-top: 12px;
    margin-bottom: 24px;
    text-align: center;
    max-width: 360px;
    font-weight: 400;
    color: ${_=>_.theme.colors.text.secondary};
`;styled.button`
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    color: ${_=>_.theme.colors.accent};
    text-decoration: underline;
    cursor: pointer;
    font: inherit;
`;const Spacer=styled.div`
    margin-bottom: 46px;
`,ErrorIconStyled=styled(ErrorIcon)`
    margin-bottom: 16px;
`;styled.ul`
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
    list-style: none;
    padding: 0;
`;const DisconnectButtonStyled=styled(Button$1)`
    max-width: 320px;
    width: 100%;
    height: 48px;
    font-size: 16px;
    line-height: 20px;
    border-radius: ${_=>borders[_.theme.borderRadius]};
    margin-bottom: 28px;
`,BodyTextStyled=styled(H2)`
    color: ${_=>_.theme.colors.text.secondary};
    text-align: center;
    margin-bottom: 20px;
`,ButtonsContainerStyled=styled.div`
    display: flex;
    justify-content: center;
    gap: 8px;
    padding-bottom: 31px;
`,RestoreInfoModalStyled=styled.div`
    margin: 0 8px 16px 8px;
`,StyledIconButton=styled(IconButton)`
    position: absolute;
    top: 16px;
    left: 16px;
`,H1Styled$1=styled(H1)`
    margin-bottom: 18px;
    text-align: center;
`,StepBlock=styled.div`
    padding: 16px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
`;styled.div`
    margin-bottom: 12px;
`;const H3Styled=styled(H3)`
    text-align: center;
    margin-bottom: 4px;
`,TextStyled$1=styled(Text$1)`
    text-align: center;
    max-width: 352px;
    color: ${_=>_.theme.colors.text.secondary};
`,CircleNumber=styled.div`
    width: 44px;
    height: 44px;
    border-radius: 20px;
    background-color: ${_=>{var d;return(d=_.theme)==null?void 0:d.colors.icon.secondary}};
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 12px;
    font-weight: 700;
    font-size: 22px;
    color: ${_=>{var d;return(d=_.theme)==null?void 0:d.colors.text.primary}};
`,RestoreInfoModal=_=>createComponent(RestoreInfoModalStyled,{"data-tc-wallets-modal-restore":"true",get children(){return[createComponent(StyledIconButton,{icon:"arrow",get onClick(){return _.onBackClick}}),createComponent(H1Styled$1,{translationKey:"walletModal.restoreInfoModal.title",children:"Restore"}),createComponent(ScrollContainer,{get children(){return[createComponent(StepBlock,{get children(){return[createComponent(CircleNumber,{children:"1"}),createComponent(H3Styled,{translationKey:"walletModal.restoreModal.step1.title",children:"Find your current recovery phrase"}),createComponent(TextStyled$1,{translationKey:"walletModal.restoreModal.step1.text",children:"Open your wallet settings and locate the recovery phrase"})]}}),createComponent(StepBlock,{get children(){return[createComponent(CircleNumber,{children:"2"}),createComponent(H3Styled,{translationKey:"walletModal.restoreModal.step2.title",children:"Copy your recovery phrase"}),createComponent(TextStyled$1,{translationKey:"walletModal.restoreModal.step2.text",children:"Write it down or copy it to a safe place"})]}}),createComponent(StepBlock,{get children(){return[createComponent(CircleNumber,{children:"3"}),createComponent(H3Styled,{translationKey:"walletModal.restoreModal.step3.title",children:"Restore in a supported wallet from the list below"}),createComponent(TextStyled$1,{translationKey:"walletModal.restoreModal.step3.text",children:"Enter the recovery phrase to access your wallet"})]}})]}})]}}),DesktopFeatureNotSupportModal=_=>{const[d,v]=createSignal(null),[A,C]=createSignal(!1),w=createMemo(()=>_.walletsList.find(I=>I.appName===_.currentWallet.device.appName||I.name===_.currentWallet.device.appName)),T=createMemo(()=>{var I,z,H,Y;return((z=(I=w())==null?void 0:I.appName)!=null?z:_.currentWallet.device.appName)===AT_WALLET_APP_NAME?"Wallet in Telegram":(Y=(H=w())==null?void 0:H.name)!=null?Y:_.currentWallet.device.appName}),R=createMemo(()=>{const I=w();if(!I?.features)return!1;const z=_.walletsModalState.requiredFeature,H=z?{[z.featureName]:z.value}:{},Y=checkRequiredWalletFeatures(I.features,H),ee=checkRequiredWalletFeatures(_.currentWallet.device.features,H);return Y&&!ee}),G=()=>__async(void 0,null,function*(){yield _.onDisconnect(),_.onSelect(d())});return createComponent(DesktopFeatureNotSupportModalStyled,{get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return A()},get children(){return createComponent(RestoreInfoModal,{onBackClick:()=>C(!1)})}}),createComponent(Match,{get when(){return d()},get children(){return[createComponent(Spacer,{}),createComponent(DesktopFeatureNotSupportModalStyled,{get children(){return[createComponent(StyledIconButton$1,{icon:"arrow",onClick:()=>v(null)}),createComponent(TitleStyled,{translationKey:"walletModal.featureNotSupported.disconnect.title",children:"Confirm Disconnect"}),createComponent(DescriptionStyled,{translationKey:"walletModal.featureNotSupported.disconnect.description",get translationValues(){return{name:d().name}},get children(){return["You will be disconnected from your current wallet and redirected to connect ",createMemo(()=>{var I;return(I=d())==null?void 0:I.name}),"."]}}),createComponent(DisconnectButtonStyled,{onClick:()=>G(),get children(){return createComponent(Translation,{translationKey:"walletModal.featureNotSupported.disconnect.button",children:"Disconnect"})}})]}})]}}),createComponent(Match,{get when(){return R()},get children(){return[createComponent(H1Styled$2,{get children(){return T()}}),createComponent(ErrorIconStyled,{size:"s"}),createComponent(BodyTextStyled,{translationKey:"walletModal.featureNotSupported.version.description",get translationValues(){return{name:T()}},get children(){return["Your current version of ",createMemo(()=>T())," or wallet contract type doesn't support the required features. Please update it to continue."]}}),createComponent(ButtonsContainerStyled,{get children(){return[createComponent(Link,{get href(){return w().aboutUrl},blank:!0,get children(){return createComponent(Button$1,{get leftIcon(){return createComponent(LinkIcon,{})},get children(){return createComponent(Translation,{translationKey:"walletModal.featureNotSupported.version.updateButton",get translationValues(){return{name:T()}},get children(){return["Update ",createMemo(()=>T())]}})}})}}),createComponent(Link,{href:"https://tonkeeper.helpscoutdocs.com/article/102-w5",blank:!0,get children(){return createComponent(Button$1,{get leftIcon(){return createComponent(LinkIcon,{})},get children(){return createComponent(Translation,{translationKey:"walletModal.featureNotSupported.version.aboutW5",children:"About W5"})}})}})]}})]}}),createComponent(Match,{when:!0,get children(){return[createComponent(Spacer,{}),createComponent(ErrorIconStyled,{size:"s"}),createComponent(TitleStyled,{translationKey:"walletModal.featureNotSupported.wallet.title",get translationValues(){return{name:T()}},get children(){return[createMemo(()=>T())," doesnt support the requested action"]}}),createComponent(Spacer,{})]}})]}})}})},WalletsModal=()=>{const{locale:_}=useI18n()[1];createEffect(()=>_(appState.language)),createEffect(()=>{getWalletsModalIsOpened()?updateIsMobile():(w(null),I("universal"),H(!1))});const d=useContext(ConnectorContext),v=useContext(TonConnectUiContext),[A]=createResource(()=>v.getWallets()),[C,w]=createSignal(null),[T,R]=createSignal(null),[G,I]=createSignal("universal"),[z,H]=createSignal(!1),Y=createMemo(()=>{const be=walletsModalState();return"type"in be&&be.type==="wallet-not-support-feature"}),ee=createMemo(()=>{var be;if(A.state!=="ready")return null;let ve=applyWalletsListConfiguration(A(),appState.walletsListConfiguration);const Me=ve.filter(isWalletInfoCurrentlyInjected),we=ve.filter(je=>!isWalletInfoCurrentlyInjected(je));ve=(Me||[]).concat(we);const Be=appState.preferredWalletAppName,De=ve.find(je=>eqWalletName(je,Be)),Fe=ve.filter(je=>eqWalletName(je,Be)).length>=2;Be&&De&&!Fe&&(ve=[__spreadProps(__spreadValues$1({},De),{isPreferred:!0})].concat(ve.filter(je=>!eqWalletName(je,Be))));const Oe=ve.find(je=>eqWalletName(je,AT_WALLET_APP_NAME));Oe&&(ve=[Oe].concat(ve.filter(je=>!eqWalletName(je,AT_WALLET_APP_NAME))));const Ge=(be=v?.walletsRequiredFeatures)!=null?be:v?.walletsPreferredFeatures;return ve.map(je=>{var He;return __spreadProps(__spreadValues$1({},je),{isSupportRequiredFeatures:Ge?checkRequiredWalletFeatures((He=je.features)!=null?He:[],Ge):!0})})}),ie=()=>{var be;return((be=appState.connectRequestParameters)==null?void 0:be.state)==="loading"},oe=createMemo(()=>{var be;if(!ie())return(be=appState.connectRequestParameters)==null?void 0:be.value}),se=be=>{v.closeModal(be)},re=d.onStatusChange(be=>{be&&se("wallet-selected")},be=>{var ve;if(be instanceof WalletMissingRequiredFeaturesError){const Me=be.cause.connectEvent.device.appName.toLowerCase(),we=(ve=ee())==null?void 0:ve.find(De=>De.appName.toLowerCase()===Me);if(!we)throw new TonConnectError("Wallet not found");const Be=we.isSupportRequiredFeatures?"missing-features":"not-supported";R(Be),w(we)}}),fe=()=>{I("all-wallets")},ue=()=>{I("universal")},ge=be=>{w(be),widgetController.openWalletsModal()},ye=()=>{w(null),R(null)};return onCleanup(()=>{w(null),R(null),H(!1)}),onCleanup(re),createComponent(StyledModal,{get opened(){return getWalletsModalIsOpened()},get enableAndroidBackHandler(){return appState.enableAndroidBackHandler},onClose:()=>se("action-cancelled"),onClickQuestion:()=>H(be=>!be),get showFooter(){return!Y()},"data-tc-wallets-modal-container":"true",get children(){return[createComponent(Show,{get when(){return z()},get children(){return createComponent(InfoModal,{onBackClick:()=>H(!1)})}}),createComponent(Show,{get when(){return!z()},get children(){return[createComponent(Show,{get when(){return ie()||!ee()},get children(){return[createComponent(H1Styled$a,{translationKey:"walletModal.loading",children:"Wallets list is loading"}),createComponent(LoaderContainerStyled,{get children(){return createComponent(LoaderIcon,{size:"m"})}})]}}),createComponent(Show,{get when(){return createMemo(()=>!ie())()&&ee()},get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return Y()},get children(){return createComponent(DesktopFeatureNotSupportModal,{get walletsList(){return ee()},get currentWallet(){return v?.wallet},onSelect:ge,onSelectAllWallets:fe,onDisconnect:()=>d.disconnect(),get walletsModalState(){return walletsModalState()},onClose:()=>se("action-cancelled")})}}),createComponent(Match,{get when(){return C()},get children(){return createComponent(Dynamic,{get component(){return isMobile()?MobileConnectionModal:DesktopConnectionModal},get wallet(){return C()},get additionalRequest(){return oe()},onBackClick:ye,get defaultError(){return T()}})}}),createComponent(Match,{get when(){return G()==="universal"},get children(){return createComponent(Dynamic,{get component(){return isMobile()?MobileUniversalModal:DesktopUniversalModal},onSelect:w,get walletsList(){return ee()},get additionalRequest(){return oe()},onSelectAllWallets:fe})}}),createComponent(Match,{get when(){return G()==="all-wallets"},get children(){return createComponent(AllWalletsListModal,{get walletsList(){return ee()},get featureCheckMode(){return v?.walletsRequiredFeatures?"strict":"soft"},onBack:ue,onSelect:w})}})]}})}})]}})]}})},ActionModalStyled=styled.div`
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 8px;
`,H1Styled=styled(H1)`
    margin-top: 16px;
`,TextStyled=styled(Text$1)`
    font-weight: 510;
    font-size: 16px;
    line-height: 20px;
    text-align: center;
    max-width: 250px;

    color: ${_=>_.theme.colors.text.secondary};
`,LoaderButtonStyled=styled(Button$1)`
    min-width: 112px;
    margin-top: 32px;
`,LoaderIconStyled=styled(LoaderIcon)`
    height: 16px;
    width: 16px;
`,ButtonStyled=styled(Button$1)`
    margin-top: 32px;
`,ActionModal=_=>{const d=useDataAttributes(_),v=useContext(TonConnectUiContext),[A,C]=createSignal(!0),[w,T]=createSignal(!1),[R,G]=createSignal(!1),[I,z]=createSignal(!1);createEffect(()=>{const ie=action$1();T(!!ie&&("sent"in ie&&ie.sent||ie.name==="transaction-sent")),G(!!ie&&("signed"in ie&&ie.signed||ie.name==="data-signed")),z(!!ie&&(ie.name==="transaction-canceled"||ie.name==="sign-data-canceled"))});let H;v?.wallet&&"universalLink"in v.wallet&&(v.wallet.openMethod==="universal-link"||isTelegramUrl(v.wallet.universalLink)&&isInTMA())&&(H=v.wallet.universalLink);let Y;v?.wallet&&"deepLink"in v.wallet&&(v.wallet.openMethod==="custom-deeplink"||isTelegramUrl(v.wallet.deepLink)&&isInTMA())&&(Y=v.wallet.deepLink);const ee=()=>{const ie=action$1(),oe="returnStrategy"in ie?ie.returnStrategy:appState.returnStrategy,se=!A();C(!1),isTelegramUrl(H)?redirectToTelegram(H,{returnStrategy:oe,twaReturnUrl:"twaReturnUrl"in ie?ie.twaReturnUrl:appState.twaReturnUrl,forceRedirect:se}):redirectToWallet(H,Y,{returnStrategy:oe,forceRedirect:se},()=>{})};return createComponent(ActionModalStyled,mergeProps(d,{get children(){return[createMemo(()=>_.icon),createComponent(H1Styled,{get translationKey(){return _.headerTranslationKey},get translationValues(){return _.headerTranslationValues}}),createComponent(TextStyled,{get translationKey(){return _.textTranslationKey},get translationValues(){return _.textTranslationValues}}),createComponent(Show,{get when(){return!w()&&!R()&&!I()&&(_.showButton==="open-wallet"&&H||_.showButton!=="open-wallet")},get children(){return createComponent(LoaderButtonStyled,{disabled:!0,"data-tc-connect-button-loading":"true",get children(){return createComponent(LoaderIconStyled,{})}})}}),createComponent(Show,{get when(){return w()||R()},get children(){return[createComponent(Show,{get when(){return _.showButton!=="open-wallet"},get children(){return createComponent(ButtonStyled,{onClick:()=>_.onClose(),get children(){return createComponent(Translation,{translationKey:"common.close",children:"Close"})}})}}),createComponent(Show,{get when(){return _.showButton==="open-wallet"&&H},get children(){return createComponent(ButtonStyled,{onClick:ee,get children(){return createComponent(Translation,{translationKey:"common.openWallet",children:"Open wallet"})}})}})]}})]}}))},ConfirmTransactionModal=_=>{const d=useContext(TonConnectUiContext),[v]=useI18n(),A=()=>d.wallet&&"name"in d.wallet?d.wallet.name:v("common.yourWallet",{},"Your wallet");return createComponent(ActionModal,{headerTranslationKey:"actionModal.confirmTransaction.header",get headerTranslationValues(){return{name:A()}},textTranslationKey:"actionModal.confirmTransaction.text",get icon(){return createComponent(LoaderIcon,{size:"m"})},onClose:()=>_.onClose(),showButton:"open-wallet","data-tc-confirm-modal":"true"})},TransactionCanceledModal=_=>createComponent(ActionModal,{headerTranslationKey:"actionModal.transactionCanceled.header",textTranslationKey:"actionModal.transactionCanceled.text",get icon(){return createComponent(ErrorIcon,{size:"m"})},onClose:()=>_.onClose(),"data-tc-transaction-canceled-modal":"true"}),TransactionSentModal=_=>createComponent(ActionModal,{headerTranslationKey:"actionModal.transactionSent.header",textTranslationKey:"actionModal.transactionSent.text",get icon(){return createComponent(SuccessIcon,{size:"m"})},showButton:"open-wallet",onClose:()=>_.onClose(),"data-tc-transaction-sent-modal":"true"}),ConfirmSignDataModal=_=>{const d=useContext(TonConnectUiContext),[v]=useI18n(),A=()=>d.wallet&&"name"in d.wallet?d.wallet.name:v("common.yourWallet",{},"Your wallet");return createComponent(ActionModal,{headerTranslationKey:"actionModal.signData.header",get headerTranslationValues(){return{name:A()}},textTranslationKey:"actionModal.signData.text",get icon(){return createComponent(LoaderIcon,{size:"m"})},onClose:()=>_.onClose(),showButton:"open-wallet","data-tc-sign-data-confirm-modal":"true"})},SignDataCanceledModal=_=>createComponent(ActionModal,{headerTranslationKey:"actionModal.signDataCanceled.header",get icon(){return createComponent(ErrorIcon,{size:"m"})},onClose:()=>_.onClose(),"data-tc-sign-data-canceled-modal":"true"}),DataSignedModal=_=>createComponent(ActionModal,{headerTranslationKey:"actionModal.dataSigned.header",get icon(){return createComponent(SuccessIcon,{size:"m"})},onClose:()=>_.onClose(),"data-tc-data-signed-modal":"true"}),ActionsModal=()=>createComponent(Modal$1,{get opened(){var _;return createMemo(()=>action$1()!==null)()&&((_=action$1())==null?void 0:_.openModal)===!0},get enableAndroidBackHandler(){return appState.enableAndroidBackHandler},onClose:()=>setAction(null),showFooter:!1,"data-tc-actions-modal-container":"true",get children(){return createComponent(Switch,{get children(){return[createComponent(Match,{get when(){return action$1().name==="transaction-sent"},get children(){return createComponent(TransactionSentModal,{onClose:()=>setAction(null)})}}),createComponent(Match,{get when(){return action$1().name==="transaction-canceled"},get children(){return createComponent(TransactionCanceledModal,{onClose:()=>setAction(null)})}}),createComponent(Match,{get when(){return action$1().name==="confirm-transaction"},get children(){return createComponent(ConfirmTransactionModal,{onClose:()=>setAction(null)})}}),createComponent(Match,{get when(){return action$1().name==="data-signed"},get children(){return createComponent(DataSignedModal,{onClose:()=>setAction(null)})}}),createComponent(Match,{get when(){return action$1().name==="sign-data-canceled"},get children(){return createComponent(SignDataCanceledModal,{onClose:()=>setAction(null)})}}),createComponent(Match,{get when(){return action$1().name==="confirm-sign-data"},get children(){return createComponent(ConfirmSignDataModal,{onClose:()=>setAction(null)})}})]}})}}),SingleWalletModal=()=>{const{locale:_}=useI18n()[1];createEffect(()=>_(appState.language)),createEffect(()=>{getSingleWalletModalIsOpened()&&updateIsMobile()});const d=useContext(ConnectorContext),v=useContext(TonConnectUiContext),[A,C]=createSignal(!1),w=()=>{var I;return((I=appState.connectRequestParameters)==null?void 0:I.state)==="loading"},T=createMemo(()=>{var I;if(!w())return(I=appState.connectRequestParameters)==null?void 0:I.value}),R=I=>{v.closeSingleWalletModal(I)},G=d.onStatusChange(I=>{I&&R("wallet-selected")});return onCleanup(G),onCleanup(()=>{C(!1)}),createComponent(StyledModal,{get opened(){return getSingleWalletModalIsOpened()},get enableAndroidBackHandler(){return appState.enableAndroidBackHandler},onClose:()=>R("action-cancelled"),onClickQuestion:()=>C(I=>!I),showFooter:!0,"data-tc-wallets-modal-container":"true",get children(){return[createComponent(Show,{get when(){return A()},get children(){return createComponent(InfoModal,{onBackClick:()=>C(!1)})}}),createComponent(Show,{get when(){return!A()},get children(){return[createComponent(Show,{get when(){return w()},get children(){return[createComponent(H1Styled$a,{translationKey:"walletModal.loading",children:"Wallets list is loading"}),createComponent(LoaderContainerStyled,{get children(){return createComponent(LoaderIcon,{size:"m"})}})]}}),createComponent(Show,{get when(){return!w()},get children(){return createComponent(Dynamic,{get component(){return isMobile()?MobileConnectionModal:DesktopConnectionModal},get wallet(){return getSingleWalletModalWalletInfo()},get additionalRequest(){return T()},onBackClick:()=>{},backDisabled:!0})}})]}})]}})},App$2=_=>{const d=createI18nContext(i18nDictionary,appState.language);return defineStylesRoot(),fixMobileSafariActiveTransition(),createComponent(I18nContext.Provider,{value:d,get children(){return createComponent(TonConnectUiContext.Provider,{get value(){return _.tonConnectUI},get children(){return createComponent(ConnectorContext.Provider,{get value(){return appState.connector},get children(){return[createComponent(GlobalStyles,{}),createComponent(ThemeProvider,{theme:themeState,get children(){return[createComponent(Show,{get when(){return appState.buttonRootId},get children(){return createComponent(Portal$1,{get mount(){return document.getElementById(appState.buttonRootId)},get children(){return createComponent(AccountButton,{})}})}}),createComponent(Dynamic,{component:globalStylesTag,get children(){return[createComponent(WalletsModal,{}),createComponent(SingleWalletModal,{}),createComponent(ActionsModal,{})]}})]}})]}})}})}})},widgetController={openWalletsModal:()=>void setTimeout(()=>setWalletsModalState({status:"opened",closeReason:null})),closeWalletsModal:_=>void setTimeout(()=>setWalletsModalState({status:"closed",closeReason:_})),openSingleWalletModal:_=>{setTimeout(()=>setSingleWalletModalState({status:"opened",closeReason:null,walletInfo:_}))},closeSingleWalletModal:_=>void setTimeout(()=>setSingleWalletModalState({status:"closed",closeReason:_})),openWalletNotSupportFeatureModal:_=>void setTimeout(()=>setWalletsModalState({status:"opened",closeReason:null,type:"wallet-not-support-feature",requiredFeature:_.requiredFeature})),setAction:_=>void setTimeout(()=>setAction(_)),clearAction:()=>void setTimeout(()=>setAction(null)),getSelectedWalletInfo:()=>lastSelectedWalletInfo(),removeSelectedWalletInfo:()=>setLastSelectedWalletInfo(null),renderApp:(_,d)=>render(()=>createComponent(App$2,{tonConnectUI:d}),document.getElementById(_))};class WalletsModalManager{constructor(d){__publicField(this,"connector"),__publicField(this,"setConnectRequestParametersCallback"),__publicField(this,"consumers",[]),__publicField(this,"tracker"),__publicField(this,"state",walletsModalState()),this.connector=d.connector,this.tracker=d.tracker,this.setConnectRequestParametersCallback=d.setConnectRequestParametersCallback,createEffect(()=>{const v=walletsModalState();this.state=v,this.consumers.forEach(A=>A(v))})}open(){return __async(this,null,function*(){this.tracker.trackConnectionStarted();const v=(yield this.connector.getWallets()).find(isWalletInfoCurrentlyEmbedded);return v?this.connectEmbeddedWallet(v):this.openWalletsModal()})}close(d="action-cancelled"){d==="action-cancelled"&&this.tracker.trackConnectionError("Connection was cancelled"),widgetController.closeWalletsModal(d)}onStateChange(d){return this.consumers.push(d),()=>{this.consumers=this.consumers.filter(v=>v!==d)}}connectEmbeddedWallet(d){const v=C=>{setLastSelectedWalletInfo(d),this.connector.connect({jsBridgeKey:d.jsBridgeKey},C)},A=appState.connectRequestParameters;A?.state==="loading"?this.setConnectRequestParametersCallback(v):v(A?.value)}openWalletsModal(){return __async(this,null,function*(){return isInTMA()&&sendExpand(),widgetController.openWalletsModal(),new Promise(d=>{const v=this.onStateChange(A=>{const{status:C}=A;C==="opened"&&(v(),d())})})})}}class TransactionModalManager{constructor(d){__publicField(this,"connector"),__publicField(this,"consumers",[]),this.connector=d.connector,createEffect(()=>{const v=action$1();this.consumers.forEach(A=>A(v))})}onStateChange(d){return this.consumers.push(d),()=>{this.consumers=this.consumers.filter(v=>v!==d)}}}class SingleWalletModalManager{constructor(d){__publicField(this,"connector"),__publicField(this,"setConnectRequestParametersCallback"),__publicField(this,"consumers",[]),__publicField(this,"tracker"),__publicField(this,"state",singleWalletModalState()),this.connector=d.connector,this.tracker=d.tracker,this.setConnectRequestParametersCallback=d.setConnectRequestParametersCallback,createEffect(()=>{const v=singleWalletModalState();this.state=v,this.consumers.forEach(A=>A(v))})}open(d){return __async(this,null,function*(){this.tracker.trackConnectionStarted();const v=yield this.connector.getWallets(),A=applyWalletsListConfiguration(v,appState.walletsListConfiguration),C=A.find(isWalletInfoCurrentlyEmbedded);if(!!C)return this.connectEmbeddedWallet(C);const R=A.filter(isWalletInfoRemote).find(z=>eqWalletName(z,d));if(!!R)return this.openSingleWalletModal(R);const I=`Trying to open modal window with unknown wallet "${d}".`;throw this.tracker.trackConnectionError(I),new TonConnectUIError(I)})}close(d="action-cancelled"){d==="action-cancelled"&&this.tracker.trackConnectionError("Connection was cancelled"),widgetController.closeSingleWalletModal("action-cancelled")}onStateChange(d){return this.consumers.push(d),()=>{this.consumers=this.consumers.filter(v=>v!==d)}}connectEmbeddedWallet(d){const v=C=>{setLastSelectedWalletInfo(d),this.connector.connect({jsBridgeKey:d.jsBridgeKey},C)},A=appState.connectRequestParameters;A?.state==="loading"?this.setConnectRequestParametersCallback(v):v(A?.value)}openSingleWalletModal(d){return __async(this,null,function*(){return isInTMA()&&sendExpand(),widgetController.openSingleWalletModal(d),new Promise(v=>{const A=this.onStateChange(C=>{const{status:w}=C;w==="opened"&&(A(),v())})})})}}class TonConnectUITracker{constructor(d){__publicField(this,"eventPrefix","ton-connect-ui-"),__publicField(this,"tonConnectUiVersion"),__publicField(this,"tonConnectSdkVersion",null),__publicField(this,"eventDispatcher");var v;this.eventDispatcher=(v=d?.eventDispatcher)!=null?v:new BrowserEventDispatcher,this.tonConnectUiVersion=d.tonConnectUiVersion,this.init().catch()}get version(){return createVersionInfo({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return __async(this,null,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectSdkVersion=yield this.requestTonConnectSdkVersion()}catch{}})}setRequestVersionHandler(){return __async(this,null,function*(){yield this.eventDispatcher.addEventListener("ton-connect-ui-request-version",()=>__async(this,null,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-ui-response-version",createResponseVersionEvent(this.tonConnectUiVersion))}))})}requestTonConnectSdkVersion(){return __async(this,null,function*(){return new Promise((d,v)=>__async(this,null,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-response-version",A=>{d(A.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-request-version",createRequestVersionEvent())}catch(A){v(A)}}))})}dispatchUserActionEvent(d){var v;try{(v=this.eventDispatcher)==null||v.dispatchEvent(`${this.eventPrefix}${d.type}`,d).catch()}catch{}}trackConnectionStarted(...d){try{const v=createConnectionStartedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionCompleted(...d){try{const v=createConnectionCompletedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionError(...d){try{const v=createConnectionErrorEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionRestoringStarted(...d){try{const v=createConnectionRestoringStartedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionRestoringCompleted(...d){try{const v=createConnectionRestoringCompletedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackConnectionRestoringError(...d){try{const v=createConnectionRestoringErrorEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDisconnection(...d){try{const v=createDisconnectionEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackTransactionSentForSignature(...d){try{const v=createTransactionSentForSignatureEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackTransactionSigned(...d){try{const v=createTransactionSignedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackTransactionSigningFailed(...d){try{const v=createTransactionSigningFailedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDataSentForSignature(...d){try{const v=createDataSentForSignatureEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDataSigned(...d){try{const v=createDataSignedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}trackDataSigningFailed(...d){try{const v=createDataSigningFailedEvent(this.version,...d);this.dispatchUserActionEvent(v)}catch{}}}const tonConnectUiVersion="2.2.0";class TonConnectUI{constructor(d){if(__publicField(this,"walletInfoStorage",new WalletInfoStorage),__publicField(this,"preferredWalletStorage",new PreferredWalletStorage),__publicField(this,"tracker"),__publicField(this,"walletInfo",null),__publicField(this,"systemThemeChangeUnsubscribe",null),__publicField(this,"actionsConfiguration"),__publicField(this,"walletsList"),__publicField(this,"_walletsRequiredFeatures"),__publicField(this,"_walletsPreferredFeatures"),__publicField(this,"connectRequestParametersCallback"),__publicField(this,"connector"),__publicField(this,"modal"),__publicField(this,"singleWalletModal"),__publicField(this,"transactionModal"),__publicField(this,"connectionRestored",Promise.resolve(!1)),d&&"connector"in d&&d.connector)this.connector=d.connector;else if(d&&"manifestUrl"in d&&d.manifestUrl)this.connector=new TonConnect({manifestUrl:d.manifestUrl,eventDispatcher:d.eventDispatcher,walletsRequiredFeatures:d.walletsRequiredFeatures});else throw new TonConnectUIError("You have to specify a `manifestUrl` or a `connector` in the options.");this.tracker=new TonConnectUITracker({eventDispatcher:d?.eventDispatcher,tonConnectUiVersion}),this.modal=new WalletsModalManager({connector:this.connector,tracker:this.tracker,setConnectRequestParametersCallback:C=>{this.connectRequestParametersCallback=C}}),this.singleWalletModal=new SingleWalletModalManager({connector:this.connector,tracker:this.tracker,setConnectRequestParametersCallback:C=>{this.connectRequestParametersCallback=C}}),this.transactionModal=new TransactionModalManager({connector:this.connector}),this._walletsRequiredFeatures=d.walletsRequiredFeatures,this._walletsPreferredFeatures=d.walletsPreferredFeatures,this.walletsList=this.getWallets(),this.walletsList.then(C=>preloadImages(uniq(C.map(w=>w.imageUrl))));const v=this.normalizeWidgetRoot(d?.widgetRootId);this.subscribeToWalletChange(),d?.restoreConnection!==!1&&(this.connectionRestored=createMacrotaskAsync(()=>__async(this,null,function*(){return this.tracker.trackConnectionRestoringStarted(),yield this.connector.restoreConnection(),this.connector.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):(this.tracker.trackConnectionRestoringError("Connection was not restored"),this.walletInfoStorage.removeWalletInfo()),this.connector.connected}))),this.uiOptions=mergeOptions(d,{uiPreferences:{theme:"SYSTEM"}});const A=this.preferredWalletStorage.getPreferredWalletAppName();setAppState({connector:this.connector,preferredWalletAppName:A}),widgetController.renderApp(v,this)}static getWallets(){return TonConnect.getWallets()}get walletsRequiredFeatures(){return this._walletsRequiredFeatures}get walletsPreferredFeatures(){return this._walletsPreferredFeatures}get connected(){return this.connector.connected}get account(){return this.connector.account}get wallet(){return this.connector.wallet?__spreadValues$1(__spreadValues$1({},this.connector.wallet),this.walletInfo):null}set uiOptions(d){var v,A,C,w,T;this.checkButtonRootExist(d.buttonRootId),this.actionsConfiguration=d.actionsConfiguration,"walletsRequiredFeatures"in d&&(this._walletsRequiredFeatures=d.walletsRequiredFeatures),"walletsPreferredFeatures"in d&&(this._walletsPreferredFeatures=d.walletsPreferredFeatures),(v=d.uiPreferences)!=null&&v.theme?((A=d.uiPreferences)==null?void 0:A.theme)!=="SYSTEM"?((C=this.systemThemeChangeUnsubscribe)==null||C.call(this),setTheme(d.uiPreferences.theme,d.uiPreferences.colorsSet)):(setTheme(getSystemTheme(),d.uiPreferences.colorsSet),this.systemThemeChangeUnsubscribe||(this.systemThemeChangeUnsubscribe=subscribeToThemeChange(setTheme))):(w=d.uiPreferences)!=null&&w.colorsSet&&setColors(d.uiPreferences.colorsSet),(T=d.uiPreferences)!=null&&T.borderRadius&&setBorderRadius(d.uiPreferences.borderRadius),setAppState(R=>{var G,I;const z=mergeOptions(__spreadValues$1(__spreadValues$1(__spreadValues$1(__spreadValues$1({},d.language&&{language:d.language}),!!((G=d.actionsConfiguration)!=null&&G.returnStrategy)&&{returnStrategy:d.actionsConfiguration.returnStrategy}),!!((I=d.actionsConfiguration)!=null&&I.twaReturnUrl)&&{twaReturnUrl:d.actionsConfiguration.twaReturnUrl}),!!d.walletsListConfiguration&&{walletsListConfiguration:d.walletsListConfiguration}),unwrap(R));return d.buttonRootId!==void 0&&(z.buttonRootId=d.buttonRootId),d.enableAndroidBackHandler!==void 0&&(z.enableAndroidBackHandler=d.enableAndroidBackHandler),z})}setConnectRequestParameters(d){var v;setAppState({connectRequestParameters:d}),(d?.state==="ready"||!d)&&((v=this.connectRequestParametersCallback)==null||v.call(this,d?.value))}getWallets(){return __async(this,null,function*(){return this.connector.getWallets()})}onStatusChange(d,v){return this.connector.onStatusChange(A=>__async(this,null,function*(){if(A){const C=yield this.getSelectedWalletInfo(A);d(__spreadValues$1(__spreadValues$1({},A),C||this.walletInfoStorage.getWalletInfo()))}else d(A)}),v)}openModal(){return __async(this,null,function*(){return this.modal.open()})}closeModal(d){this.modal.close(d)}onModalStateChange(d){return this.modal.onStateChange(d)}get modalState(){return this.modal.state}openSingleWalletModal(d){return __async(this,null,function*(){return this.singleWalletModal.open(d)})}closeSingleWalletModal(d){this.singleWalletModal.close(d)}onSingleWalletModalStateChange(d){return this.singleWalletModal.onStateChange(d)}get singleWalletModalState(){return this.singleWalletModal.state}connectWallet(){return __async(this,null,function*(){const v=(yield this.getWallets()).find(isWalletInfoCurrentlyEmbedded);return v?yield this.connectEmbeddedWallet(v):yield this.connectExternalWallet()})}disconnect(){return this.tracker.trackDisconnection(this.wallet,"dapp"),widgetController.clearAction(),widgetController.removeSelectedWalletInfo(),this.walletInfoStorage.removeWalletInfo(),this.connector.disconnect()}sendTransaction(d,v){return __async(this,null,function*(){if(this.tracker.trackTransactionSentForSignature(this.wallet,d),!this.connected)throw this.tracker.trackTransactionSigningFailed(this.wallet,d,"Wallet was not connected"),new TonConnectUIError("Connect wallet to send a transaction.");isInTMA()&&sendExpand();const{notifications:A,modals:C,returnStrategy:w,twaReturnUrl:T}=this.getModalsAndNotificationsConfiguration(v);widgetController.setAction({name:"confirm-transaction",showNotification:A.includes("before"),openModal:C.includes("before"),sent:!1});const R=new AbortController,G=()=>{R.signal.aborted||(widgetController.setAction({name:"confirm-transaction",showNotification:A.includes("before"),openModal:C.includes("before"),sent:!0}),this.redirectAfterRequestSent({returnStrategy:w,twaReturnUrl:T}))},I=this.onTransactionModalStateChange(z=>{z?.openModal||(I(),z||R.abort())});try{const z=yield this.waitForSendTransaction({transaction:d,signal:R.signal},G);return this.tracker.trackTransactionSigned(this.wallet,d,z),widgetController.setAction({name:"transaction-sent",showNotification:A.includes("success"),openModal:C.includes("success")}),z}catch(z){throw z instanceof WalletNotSupportFeatureError?(widgetController.clearAction(),widgetController.openWalletNotSupportFeatureModal(z.cause),z):(widgetController.setAction({name:"transaction-canceled",showNotification:A.includes("error"),openModal:C.includes("error")}),z instanceof TonConnectError?z:(console.error(z),new TonConnectUIError("Unhandled error:"+z)))}finally{I()}})}signData(d){return __async(this,null,function*(){if(this.tracker.trackDataSentForSignature(this.wallet,d),!this.connected)throw this.tracker.trackDataSigningFailed(this.wallet,d,"Wallet was not connected"),new TonConnectUIError("Connect wallet to send a transaction.");isInTMA()&&sendExpand();const{notifications:v,modals:A,returnStrategy:C,twaReturnUrl:w}=this.getModalsAndNotificationsConfiguration();widgetController.setAction({name:"confirm-sign-data",showNotification:v.includes("before"),openModal:A.includes("before"),signed:!1});const T=new AbortController,R=()=>{T.signal.aborted||(widgetController.setAction({name:"confirm-sign-data",showNotification:v.includes("before"),openModal:A.includes("before"),signed:!0}),this.redirectAfterRequestSent({returnStrategy:C,twaReturnUrl:w}))},G=this.onTransactionModalStateChange(I=>{I?.openModal||(G(),I||T.abort())});try{const I=yield this.waitForSignData({data:d,signal:new AbortController().signal},R);return this.tracker.trackDataSigned(this.wallet,d,I),widgetController.setAction({name:"data-signed",showNotification:v.includes("success"),openModal:A.includes("success")}),I}catch(I){throw I instanceof WalletNotSupportFeatureError?(widgetController.clearAction(),widgetController.openWalletNotSupportFeatureModal(I.cause),I):(widgetController.setAction({name:"sign-data-canceled",showNotification:v.includes("error"),openModal:A.includes("error")}),I instanceof TonConnectError?I:(console.error(I),new TonConnectUIError("Unhandled error:"+I)))}finally{G()}})}redirectAfterRequestSent({returnStrategy:d,twaReturnUrl:v}){this.walletInfo&&"universalLink"in this.walletInfo&&(this.walletInfo.openMethod==="universal-link"||this.walletInfo.openMethod==="custom-deeplink")&&(isTelegramUrl(this.walletInfo.universalLink)?redirectToTelegram(this.walletInfo.universalLink,{returnStrategy:d,twaReturnUrl:v||appState.twaReturnUrl,forceRedirect:!1}):redirectToWallet(this.walletInfo.universalLink,this.walletInfo.deepLink,{returnStrategy:d,forceRedirect:!1},()=>{}))}connectEmbeddedWallet(d){return __async(this,null,function*(){const v=C=>{setLastSelectedWalletInfo(d),this.connector.connect({jsBridgeKey:d.jsBridgeKey},C)},A=appState.connectRequestParameters;return A?.state==="loading"?this.connectRequestParametersCallback=v:v(A?.value),yield this.waitForWalletConnection({ignoreErrors:!1})})}connectExternalWallet(){return __async(this,null,function*(){const d=new AbortController;widgetController.openWalletsModal();const v=this.onModalStateChange(A=>{const{status:C,closeReason:w}=A;C!=="opened"&&(v(),w==="action-cancelled"&&d.abort())});return yield this.waitForWalletConnection({ignoreErrors:!0,signal:d.signal})})}waitForWalletConnection(d){return __async(this,null,function*(){return new Promise((v,A)=>{this.tracker.trackConnectionStarted();const{ignoreErrors:C=!1,signal:w=null}=d;if(w&&w.aborted)return this.tracker.trackConnectionError("Connection was cancelled"),A(new TonConnectUIError("Wallet was not connected"));const T=I=>__async(this,null,function*(){if(I)this.tracker.trackConnectionCompleted(I),G(),v(I);else{if(this.tracker.trackConnectionError("Connection was cancelled"),C)return;G(),A(new TonConnectUIError("Wallet was not connected"))}}),R=I=>{this.tracker.trackConnectionError(I.message),!C&&(G(),A(I))},G=this.onStatusChange(I=>T(I),I=>R(I));w&&w.addEventListener("abort",()=>{G(),A(new TonConnectUIError("Wallet was not connected"))},{once:!0})})})}waitForSendTransaction(d,v){return __async(this,null,function*(){return new Promise((A,C)=>{const{transaction:w,signal:T}=d;if(T.aborted)return this.tracker.trackTransactionSigningFailed(this.wallet,w,"Transaction was cancelled"),C(new TonConnectUIError("Transaction was not sent"));const R=z=>__async(this,null,function*(){A(z)}),G=z=>{C(z)},I=()=>{this.tracker.trackTransactionSigningFailed(this.wallet,w,"Transaction was cancelled"),C(new TonConnectUIError("Transaction was not sent"))};T.addEventListener("abort",I,{once:!0}),this.connector.sendTransaction(w,{onRequestSent:v,signal:T}).then(z=>(T.removeEventListener("abort",I),R(z))).catch(z=>(T.removeEventListener("abort",I),G(z)))})})}waitForSignData(d,v){return __async(this,null,function*(){return new Promise((A,C)=>{const{data:w,signal:T}=d;if(T.aborted)return this.tracker.trackDataSigningFailed(this.wallet,w,"SignData was cancelled"),C(new TonConnectUIError("SignData was not sent"));const R=z=>__async(this,null,function*(){A(z)}),G=z=>{C(z)},I=()=>{this.tracker.trackDataSigningFailed(this.wallet,w,"SignData was cancelled"),C(new TonConnectUIError("SignData was not sent"))};T.addEventListener("abort",I,{once:!0}),this.connector.signData(w,{onRequestSent:v,signal:T}).then(z=>R(z)).catch(z=>G(z))})})}onTransactionModalStateChange(d){return this.transactionModal.onStateChange(d)}subscribeToWalletChange(){this.connector.onStatusChange(d=>__async(this,null,function*(){var v;d?(yield this.updateWalletInfo(d),this.setPreferredWalletAppName(((v=this.walletInfo)==null?void 0:v.appName)||d.device.appName)):this.walletInfoStorage.removeWalletInfo()}))}setPreferredWalletAppName(d){this.preferredWalletStorage.setPreferredWalletAppName(d),setAppState({preferredWalletAppName:d})}getSelectedWalletInfo(d){return __async(this,null,function*(){let v=widgetController.getSelectedWalletInfo();if(!v)return null;let A;if("name"in v)A=v;else{const w=applyWalletsListConfiguration(yield this.walletsList,appState.walletsListConfiguration).find(T=>eqWalletName(T,d.device.appName));if(!w)throw new TonConnectUIError(`Cannot find WalletInfo for the '${d.device.appName}' wallet`);A=__spreadValues$1(__spreadValues$1({},w),v)}return A})}updateWalletInfo(d){return __async(this,null,function*(){const v=yield this.getSelectedWalletInfo(d);if(v){this.walletInfo=v,this.walletInfoStorage.setWalletInfo(v);return}const A=this.walletInfoStorage.getWalletInfo();if(A){this.walletInfo=A;return}this.walletInfo=(yield this.walletsList).find(C=>eqWalletName(C,d.device.appName))||null})}normalizeWidgetRoot(d){if(!d||!document.getElementById(d)){d="tc-widget-root";const v=document.createElement("div");v.id=d,document.body.appendChild(v)}return d}checkButtonRootExist(d){if(d!=null&&!document.getElementById(d))throw new TonConnectUIError(`${d} element not found in the document.`)}getModalsAndNotificationsConfiguration(d){var v,A,C,w,T,R;const G=["before","success","error"];let I=G;(v=this.actionsConfiguration)!=null&&v.notifications&&((A=this.actionsConfiguration)==null?void 0:A.notifications)!=="all"&&(I=this.actionsConfiguration.notifications),d?.notifications&&(d.notifications==="all"?I=G:I=d.notifications);let z=["before"];(C=this.actionsConfiguration)!=null&&C.modals&&(this.actionsConfiguration.modals==="all"?z=G:z=this.actionsConfiguration.modals),d?.modals&&(d.modals==="all"?z=G:z=d.modals);const H=d?.returnStrategy||((w=this.actionsConfiguration)==null?void 0:w.returnStrategy)||"back",Y=d?.twaReturnUrl||((T=this.actionsConfiguration)==null?void 0:T.twaReturnUrl);let ee=d?.skipRedirectToWallet||((R=this.actionsConfiguration)==null?void 0:R.skipRedirectToWallet)||"ios";return isInTMA()&&(ee="never"),{notifications:I,modals:z,returnStrategy:H,twaReturnUrl:Y,skipRedirectToWallet:ee}}}var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(_,d,v)=>d in _?__defProp(_,d,{enumerable:!0,configurable:!0,writable:!0,value:v}):_[d]=v,__spreadValues=(_,d)=>{for(var v in d||(d={}))__hasOwnProp.call(d,v)&&__defNormalProp(_,v,d[v]);if(__getOwnPropSymbols)for(var v of __getOwnPropSymbols(d))__propIsEnum.call(d,v)&&__defNormalProp(_,v,d[v]);return _},__objRest=(_,d)=>{var v={};for(var A in _)__hasOwnProp.call(_,A)&&d.indexOf(A)<0&&(v[A]=_[A]);if(_!=null&&__getOwnPropSymbols)for(var A of __getOwnPropSymbols(_))d.indexOf(A)<0&&__propIsEnum.call(_,A)&&(v[A]=_[A]);return v};function isClientSide(){return typeof window<"u"}function isServerSide(){return!isClientSide()}const TonConnectUIContext=reactExports.createContext(null);let tonConnectUI=null;const TonConnectUIProvider=_=>{var d=_,{children:v}=d,A=__objRest(d,["children"]);return isClientSide()&&!tonConnectUI&&(tonConnectUI=new TonConnectUI(A)),jsxRuntimeExports.jsx(TonConnectUIContext.Provider,{value:tonConnectUI,children:v})},TonConnectUIProvider$1=reactExports.memo(TonConnectUIProvider);class TonConnectUIReactError extends TonConnectUIError{constructor(...d){super(...d),Object.setPrototypeOf(this,TonConnectUIReactError.prototype)}}class TonConnectProviderNotSetError extends TonConnectUIReactError{constructor(...d){super(...d),Object.setPrototypeOf(this,TonConnectProviderNotSetError.prototype)}}function checkProvider(_){if(!_)throw new TonConnectProviderNotSetError("You should add <TonConnectUIProvider> on the top of the app to use TonConnect");return!0}function useTonConnectUI(){const _=reactExports.useContext(TonConnectUIContext),d=reactExports.useCallback(v=>{_&&(_.uiOptions=v)},[_]);return isServerSide()?[null,()=>{}]:(checkProvider(_),[_,d])}const buttonRootId="ton-connect-button",TonConnectButton=({className:_,style:d})=>{const[v,A]=useTonConnectUI();return reactExports.useEffect(()=>(A({buttonRootId}),()=>A({buttonRootId:null})),[A]),jsxRuntimeExports.jsx("div",{id:buttonRootId,className:_,style:__spreadValues({width:"fit-content"},d)})};reactExports.memo(TonConnectButton);function useTonWallet(){const[_]=useTonConnectUI(),[d,v]=reactExports.useState(_?.wallet||null);return reactExports.useEffect(()=>{if(_)return v(_.wallet),_.onStatusChange(A=>{v(A)})},[_]),d}function useTonAddress(_=!0){const d=useTonWallet();return reactExports.useMemo(()=>d?_?toUserFriendlyAddress(d.account.address,d.account.chain===CHAIN.TESTNET):d.account.address:"",[d,_,d?.account.address,d?.account.chain])}const sounds=["caps-upgrade/finished.mp3","caps-upgrade/upgrade-fire.mp3","caps-upgrade/upgrade.mp3","idle/claim.mp3","idle/open.mp3","idle/scale.mp3","nft/confirm.mp3","nft/process.mp3","pack/buy.mp3","pack/open-finish.mp3","pack/open-start.mp3","pve/beat-enemy-to-my.mp3","pve/beat-my-to-enemy.mp3","pve/cap-dead.mp3","pve/losing.mp3","pve/select-enemy-cap.mp3","pve/select-my-cap.mp3","pve/start.mp3","pve/win.mp3","pvp/progress.mp3","tasks/claim-reward.mp3","tasks/claim-task.mp3","tasks/reward-click.mp3","tasks/reward-ready-final.mp3","tasks/reward-ready.mp3","tasks/scale.mp3","pack/close/1.mp3","pack/close/2.mp3","pack/close/3.mp3","pack/close/4.mp3","pack/close/5.mp3","pack/close/6.mp3","pack/close/7.mp3","pack/close/8.mp3","pack/close/9.mp3","pack/flip/cap1.mp3","pack/flip/cap2.mp3","pack/flip/cap3.mp3","pack/open/1.mp3","pack/open/2.mp3","pack/open/3.mp3","pack/open/4.mp3","pack/open/5.mp3","pack/open/6.mp3","pack/open/7.mp3","pack/open/8.mp3","pack/open/9.mp3"];class AudioPreloader{sounds;loadingPromises;context;constructor(){this.sounds=new Map,this.loadingPromises=new Map,this.context=new(window.AudioContext||window.webkitAudioContext)}async loadSound(d,v){try{if(this.loadingPromises.has(d))return this.loadingPromises.get(d);if(this.sounds.has(d))return this.sounds.get(d);const A=fetch(`/sounds/${v}`).then(C=>C.arrayBuffer()).then(C=>this.context.decodeAudioData(C)).then(C=>(this.sounds.set(d,C),this.loadingPromises.delete(d),C));return this.loadingPromises.set(d,A),A}catch(A){throw console.error(`Error loading sound ${d}:`,A),this.loadingPromises.delete(d),A}}async loadSounds(d){const v=[];return d.forEach(A=>{v.push(this.loadSound(A,A).catch(C=>console.error(`Failed to load sound ${A}:`,C)))}),Promise.all(v)}playSound(d){const v=this.sounds.get(d);if(!v){console.error(`Sound ${d} not loaded`);return}const A=this.context.createBufferSource();return A.buffer=v,A.connect(this.context.destination),A.start(0),A}isLoaded(d){return this.sounds.has(d)}getLoadingProgress(){const d=this.sounds.size+this.loadingPromises.size,v=this.sounds.size;return d?v/d:1}}const audioPreloader=new AudioPreloader;async function preloadSounds(){try{return await audioPreloader.loadSounds(sounds),!0}catch(_){return console.error("Failed to initialize sounds:",_),!1}}function playSound(_){audioPreloader.isLoaded(_)?audioPreloader.playSound(_):console.warn(`Sound ${_} is not loaded yet`)}const SOUND_KEY="sound";class CapsWebAppFactory{initData;initDataUnsafe;handleVibration;closeApp;openInvoice;openTelegramLink;openLink;initWebApp;backButtonShow;backButtonHide;onBackClick;offBackClick;showPopup;playSound;isSoundEnabled;updateSoundEnabled;storage;constructor(d){this.initData=d.initData,this.initDataUnsafe=d.initDataUnsafe,this.showPopup=d.showPopup,this.handleVibration=d.handleVibration,this.closeApp=d.closeApp,this.openInvoice=d.openInvoice,this.openTelegramLink=d.openTelegramLink,this.openLink=d.openLink,this.initWebApp=d.initWebApp,this.backButtonShow=d.backButtonShow,this.backButtonHide=d.backButtonHide,this.onBackClick=d.onBackClick,this.offBackClick=d.offBackClick;const v=window.localStorage.getItem(SOUND_KEY);this.isSoundEnabled=v?JSON.parse(v):!0,this.updateSoundEnabled=A=>{window.localStorage.setItem(SOUND_KEY,JSON.stringify(A)),this.isSoundEnabled=A},this.playSound=async A=>{this.isSoundEnabled&&playSound(A)},this.storage=d.storage}}let CapsWebApp;const loadCapsWebApp=async()=>{if(!CapsWebApp)if(AppConfig.mode===AppMode.MINIAPP){const{TelegramWebApp:_}=await __vitePreload(async()=>{const{TelegramWebApp:d}=await import("./useTelegramWebApp-B7O0pqvS.js");return{TelegramWebApp:d}},[]);CapsWebApp=new CapsWebAppFactory(_)}else{const{WebsiteApp:_}=await __vitePreload(async()=>{const{WebsiteApp:d}=await import("./useWebsiteApp-DFoxxGvs.js");return{WebsiteApp:d}},[]);CapsWebApp=new CapsWebAppFactory(_)}return CapsWebApp};let isButtonShown=!1;const useBackClick=(_,d)=>(reactExports.useEffect(()=>(d!==!1&&(CapsWebApp.backButtonShow(),isButtonShown=!0),CapsWebApp.onBackClick(_),()=>{isButtonShown=!1,setTimeout(()=>{isButtonShown||CapsWebApp.backButtonHide()},10),CapsWebApp.offBackClick(_)}),[d,_]),null),impossibleValue=Symbol(),callSafely=function(_){try{return _(...[].slice.call(arguments,1))}catch(d){return setTimeout(()=>{throw d}),d instanceof Error?d:d=new Error(d)}};function throwReatomError(_,d){if(_)throw new Error(`Reatom error: ${d}`)}const isAtom=_=>_?.__reatom!==void 0,isAction=_=>_?.__reatom?.isAction===!0,isConnected=_=>_.subs.size+_.listeners.size>0;function assertFunction(_){throwReatomError(typeof _!="function",`invalid "${typeof _}", function expected`)}const getRootCause=_=>_.cause===null?_:getRootCause(_.cause),isBrowser$1=()=>typeof window=="object"&&typeof document=="object";let CTX,initiations=0;const createCtx=({callLateEffect:_=callSafely,callNearEffect:d=callSafely,restrictMultipleContexts:v=isBrowser$1()}={})=>{v&&initiations++==1&&console.warn("Reatom: multiple contexts detected, which is irrelevant in browser, you should use only one context");let A=new WeakMap,C=Me=>A.get(Me),w=new Set,T=[],R=[],G=!1,I=null,z=[],H=[],Y=[],ee=0,ie=0,oe=!1,se=()=>{for(let Me of T)d(Me,ve);T=[]},re=()=>{if(!oe){oe=!0,se();for(let Me of R)_(Me,ve),T.length>0&&se();R=[],oe=!1}},fe=({state:Me,proto:we,pubs:Be,subs:De,listeners:Fe},Oe)=>(we.actual=!1,Y.push(we.patch={state:Me,proto:we,cause:Oe,pubs:Be,subs:De,listeners:Fe}),we.patch),ue=Me=>{for(let we of Me.subs){let Be=we.patch??C(we);we.patch&&!we.actual||fe(Be,Me).listeners.size===0&&ue(Be)}},ge=(Me,we)=>{if(we.subs.delete(Me)&&(H.push(()=>we.subs.add(Me)),!isConnected(we))){we.proto.disconnectHooks!==null&&T.push(...we.proto.disconnectHooks);for(let Be of we.pubs)ge(we.proto,Be)}},ye=(Me,we)=>{if(!we.subs.has(Me)){let Be=isConnected(we);if(we.subs.add(Me),H.push(()=>we.subs.delete(Me)),!Be){we.proto.connectHooks!==null&&T.push(...we.proto.connectHooks);for(let De of(we.proto.patch??C(we.proto)).pubs)ye(we.proto,De)}}},be=(Me,we,Be)=>{let{patch:De,actual:Fe}=we,Oe=Be!==void 0;if(!Oe&&Fe&&(De.pubs.length===0||isConnected(De)))return De;let Ge=De??C(we),ze=!Ge,je=Oe?Me.cause:C(__root);if(ze)Ge={state:we.initState(Me),proto:we,cause:je,pubs:[],subs:new Set,listeners:new Set},Oe&&Y.push(Ge);else if(we.computer===null&&!Oe)return Ge;De&&!Fe||(De=fe(Ge,je));let{state:He}=De,Xe={get:Me.get,spy:void 0,schedule:Me.schedule,subscribe:Me.subscribe,cause:De};try{we.computer&&(($e,We)=>{let{proto:nt,pubs:Qt}=We,Wt=!1;if(Qt.length===0||Qt.some(({proto:Bn,state:Lt})=>!Object.is(Lt,(We.cause=be($e,Bn)).state))){let Bn=[];if($e.spy=({__reatom:Lt},Mn)=>{let cr=be($e,Lt),In=Bn.push(cr)<=Qt.length?Qt[Bn.length-1]:void 0,Zn=In?.proto!==cr.proto;Wt||=Zn;let $n=Lt.isAction&&!Zn?cr.state.slice(In.state.length):cr.state;if(!Mn||!Zn&&Object.is($n,In.state))return $n;if(Lt.isAction)for(const Rn of $n)Mn(Rn);else Mn($n,Zn?void 0:In?.state)},We.state=We.proto.computer($e,We.state),We.pubs=Bn,(Wt||Qt.length>Bn.length)&&isConnected(We)){for(let{proto:Lt}of Qt)Bn.every(Mn=>Mn.proto!==Lt)&&ge(nt,Lt.patch??C(Lt));for(let{proto:Lt}of Bn)Qt.every(Mn=>Mn.proto!==Lt)&&ye(nt,Lt.patch??C(Lt))}$e.spy=()=>throwReatomError(!0,"async spy"),We=nt=Qt=Bn=null}})(Xe,De),Oe&&(De.cause=Me.cause,Be(Xe,De)),we.actual=!0}catch($e){throw De.error=$e}if(!Object.is(He,De.state)&&(De.subs.size>0&&(Oe||De.listeners.size>0)&&ue(De),we.updateHooks)){let $e={get:Xe.get,spy:void 0,schedule:Xe.schedule,subscribe:Xe.subscribe,cause:Xe.cause};we.updateHooks.forEach(We=>z.push(()=>We($e,De)))}return De},ve={get(Me){if(throwReatomError(CTX&&getRootCause(CTX.cause)!==C(__root),"cause collision"),isAtom(Me)){let De=Me.__reatom;if(G)return be(this,De).state;let Fe=C(De);return Fe===void 0||De.computer!==null&&!isConnected(Fe)?this.get(()=>be(this,De).state):Fe.state}if(throwReatomError(I!==null,"tr failed"),G)return Me(C,be);G=!0,ee=T.length,ie=R.length;let we=CTX===void 0;we&&(CTX=this);try{var Be=Me(C,be);for(let De=0;De<Y.length;De++){let{listeners:Fe,proto:Oe}=Y[De];if(Fe.size>0&&be(this,Oe),z.length>0)for(let Ge of z.splice(0))Ge(this)}if(Y.length)for(let De of w)De(Y);for(let De of Y){let{proto:Fe,state:Oe}=De;if(Fe.isAction&&(De.state=[]),De===Fe.patch)if(Fe.patch=null,Fe.actual=!1,A.set(Fe,De),Fe.isAction){if(Oe.length===0)continue;for(let Ge of De.listeners)T.push(()=>Ge(Oe))}else for(let Ge of De.listeners)R.push(()=>Ge(C(Fe).state))}}catch(De){I=De=De instanceof Error?De:new Error(String(De));for(let Fe of w)Fe(Y,De);for(let Fe of H)callSafely(Fe,De);for(let{proto:Fe}of Y)Fe.patch=null,Fe.actual=!1;throw T.length=ee,R.length=ie,De}finally{G=!1,I=null,z=[],H=[],Y=[],ee=0,ie=0,we&&(CTX=void 0)}return re(),Be},spy:void 0,schedule(Me,we=1){return assertFunction(Me),throwReatomError(!this,"missed context"),new Promise((Be,De)=>{we===-1?G&&H.push(Me):we===0?G&&z.push(()=>Me(this)):((we===1?T:R).push(()=>{try{let Fe=Me(this);return Fe instanceof Promise?Fe.then(Be,De):Be(Fe),Fe}catch(Fe){throw De(Fe),Fe}}),G||re())})},subscribe(Me,we=Me){if(assertFunction(we),Me===we)return w.add(we),()=>w.delete(we);throwReatomError(!isAtom(Me),"target subscriber isn't an atom");let{__reatom:Be}=Me,De=impossibleValue,Fe=Ge=>Object.is(De,Ge)||we(De=Ge),Oe=C(Be);return Oe!==void 0&&isConnected(Oe)?Oe.listeners.add(Fe):this.get(()=>{Oe=be(this,Be,(Ge,ze)=>{}),Oe.listeners.add(Fe),H.push(()=>Be.patch.listeners.delete(Fe));for(let Ge of Oe.pubs)ye(Be,Ge);Be.connectHooks!==null&&T.push(...Be.connectHooks)}),De===impossibleValue&&Fe((Be.patch??C(Be)).state),()=>{if(Oe.listeners.delete(Fe)&&!isConnected(Oe)){Be.disconnectHooks&&T.push(...Be.disconnectHooks);for(let Ge of C(Be).pubs)ge(Be,Ge);G||(H.length=0,re())}}},cause:void 0};return(ve.cause=ve.get(()=>be(ve,__root))).cause=null,ve};let i$3=0,__count=_=>`${_}#${++i$3}`;function pipe(){return[].slice.call(arguments).reduce((_,d)=>d(_),this)}function onChange(_){const d=(v,A)=>_(v,A.state);return(this.__reatom.updateHooks??=new Set).add(d),()=>this.__reatom.updateHooks.delete(d)}function onCall(_){return this.onChange((d,v)=>{const{params:A,payload:C}=v[v.length-1];_(d,C,A)})}function atom(_,d=__count("_atom")){let v=(C,w)=>C.get((T,R)=>R(C,v.__reatom,(G,I)=>{I.state=typeof w=="function"?w(I.state,G):w}).state),A=null;return typeof _=="function"&&(v={},A=_,_=void 0),v.__reatom={name:d,isAction:!1,patch:null,initState:()=>_,computer:A,connectHooks:null,disconnectHooks:null,updateHooks:null,actual:!1},v.pipe=pipe,v.onChange=onChange,experimental_PLUGINS.length===0?v:v.pipe(...experimental_PLUGINS)}const action=(_,d)=>{_!==void 0&&typeof _!="string"||(d=_,_=(A,C)=>C),assertFunction(_);let v=atom([],d??__count("_action"));return v.__reatom.isAction=!0,v.__reatom.unstable_fn=_,Object.assign(function(){var A=[].slice.call(arguments);let C=v(A[0],(w,T)=>(A[0]=T,[...w,{params:A.slice(1),payload:T.cause.proto.unstable_fn(...A)}]));return C[C.length-1].payload},v,{onCall})},experimental_PLUGINS=[],__root=atom(void 0,"root").__reatom,useIsomorphicEffect=typeof document<"u"?React.useLayoutEffect:React.useEffect,{__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:oldInternals,__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE:newInternals}=React,getComponentDebugName=_=>{let d=oldInternals?.ReactCurrentOwner?.current?.type??newInternals?.A?.getOwner?.()?.type,v=d?.displayName??d?.name;return v?`Component.${v}.${_}`:`_${_}`};let batch=_=>_();const reatomContext=React.createContext(null),useCtx=()=>{let _=React.useContext(reatomContext);return throwReatomError(!_,"ctx is not set, you probably forgot to specify the ctx provider"),_},useAtom=(_,d=[],v={})=>{let{name:A,subscribe:C=!0}=typeof v=="boolean"?{subscribe:v}:v,w=useCtx(),T=[w];isAtom(_)&&T.push(_);let R=React.useMemo(()=>{let ee=getComponentDebugName(A??"useAtom#"+typeof _),ie=atom([],`${ee}._depsAtom`),oe=_;return isAtom(oe)||(oe=atom(typeof _=="function"?(re,fe)=>(re.spy(ie),R.anAtom(re,fe)):_,ee)),{theAtom:oe,depsAtom:ie,update:typeof oe=="function"?function(){return batch(()=>oe(w,...[].slice.call(arguments)))}:void 0,sub:re=>w.subscribe(oe,re),get:()=>w.get(oe),subscribe:C,anAtom:_}},T);R.anAtom=_;let{theAtom:G,depsAtom:I,update:z,sub:H,get:Y}=R;return w.get(()=>{if(!isAtom(_)){const ee=w.get(I);(d.length!==ee.length||d.some((ie,oe)=>!Object.is(ie,ee[oe])))&&(typeof _=="function"?I(w,d):z(w,_))}return[C?React.useSyncExternalStore(H,Y,Y):Y(),z,G,w]})},useAction=(_,d=[],v)=>{throwReatomError(typeof _!="function",'invalid "fn"'),d??=[];let A=useCtx();d.push(A),isAction(_)&&d.push(_);let C=React.useMemo(()=>{let w=isAction(_)?_:action(function(){return C.fn(...[].slice.call(arguments))},getComponentDebugName("useAction"));return{fn:_,cb:function(){return batch(()=>w(A,...[].slice.call(arguments)))}}},d);return useIsomorphicEffect(()=>{C.fn=_}),C.cb},tutorialAtom=atom(!1,"tutorialAtom"),nextTutorialAction=action(_=>{switch(_.get(tutorialAtom)){case"pve":tutorialAtom(_,"shop");break;case"shop":tutorialAtom(_,"profile");break;case"profile":tutorialAtom(_,"upgraded");break;case"upgraded":default:tutorialAtom(_,!1);break}},"nextTutorialAction"),stopTutorialAction=action(_=>{tutorialAtom(_,!1)},"stopTutorialAction"),pendingPacksAtom=atom(null,"pendingPacksAtom"),updatePendingPacksAction=action(async(_,d)=>await _.schedule(async()=>{const v=await firebaseService.getPendingPacks(d);pendingPacksAtom(_,v)}),"updatePendingPacksAction"),gobletBronzeImage="/icons/goblet-bronze.png",gobletDiamindImage="/icons/goblet-diamond.png",gobletGoldImage="/icons/goblet-gold.png",gobletIronImage="/icons/goblet-iron.png",gobletPlatinumImage="/icons/goblet-platinum.png",gobletSilverImage="/icons/goblet-silver.png",gobletAllImage="/icons/goblet-all.png",dayImage="/other/calendar-day.png",weekImage="/other/calendar-week.png",monthImage="/other/calendar-month.png",gumImage$1="/icons/gums.png",capsImage="/icons/caps.png",wait=_=>new Promise(d=>setTimeout(d,_));function formatNumber(_){return _.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}function formatNumberShort(_){return _<1e3?_.toString():_<1e9?Math.floor(_/1e3)+"K":Math.floor(_/1e6)+"M"}function roundNumber(_,{precision:d}={precision:3}){return Math.round(_*Math.pow(10,d))/Math.pow(10,d)}function fixScroll(){}const getCoverUrl=_=>{switch(_){case"diamond":return"/packs/cap-diamond.png";case"epic":return"/packs/cap-epic.png";case"rare":return"/packs/cap-rare.png";case"legend":return"/packs/cap-legend.png";default:return"/cap.png"}},throttle=(_,d)=>{let v;return function(...C){v||(_(...C),v=!0,setTimeout(()=>v=!1,d))}},getGobletImage=_=>{switch(_){case"bronze":return gobletBronzeImage;case"silver":return gobletSilverImage;case"gold":return gobletGoldImage;case"platinum":return gobletPlatinumImage;case"diamond":return gobletDiamindImage;case"iron":return gobletIronImage;case"day":return dayImage;case"week":return weekImage;case"month":return monthImage;case"all":return gobletAllImage;default:return gobletBronzeImage}},getLeaderboardTo=(_,d)=>_==="user"?d||5e5:d||5e7,getPrice=(_,d)=>_.priceInCoins?{value:_.priceInCoins,text:_.priceInCoins+" $GUM",type:"forCoins"}:AppConfig.shopMode==ShopMode.TON?{value:getPriceInTon(_,d),text:getPriceInTon(_,d)/1e9+" TON",type:"forTon"}:AppConfig.shopMode==ShopMode.STARS?{value:getPriceInStars(_,d),text:getPriceInStars(_,d)+" ",type:"forStars"}:{value:0,text:"error",type:"forCoins"},getShortAddress=_=>`${_.slice(0,4)}...${_.slice(-4)}`,setOnlyUndefined=(_,d)=>(Object.keys(d).forEach(v=>{_[v]===void 0&&(_[v]=d[v])}),_),getSeasonBalance=(_,d)=>d?.season?_[`caps_coins_balance_${d.season}`]??0:0,getDateString=_=>{const v=new Date().getTime()-_.toDate().getTime();return v<60*1e3?instance.t("justNow"):v<60*60*1e3?`${Math.round(v/(60*1e3))}${instance.t("minutesAgo")}`:v<24*60*60*1e3?`${Math.round(v/(60*60*1e3))}${instance.t("hoursAgo")}`:_.toDate().toLocaleDateString()},assetImage=_=>{switch(_){case"ton":return tonImage;case"tokens":return StakedCoin;case"gum":return gumImage$1;case"packs":return capsImage;default:return tonImage}},getAssetValue=(_,d)=>{let v=0;switch(d){case"ton":v=_.tonBalance||0;break;case"tokens":v=_.tokens||0;break;case"gum":v=_.caps_coins_balance||0;break;case"packs":v=_.caps_mycaps.count||0;break;default:v=0;break}return formatNumber(Math.round(v*100)/100)},userDefault={tonBalance:0,tokens:0,tokensStr:"0",coinsSeasonBalance:0},userAtom=atom({caps_battle_level:0,caps_coins_balance:0,caps_idle:{bonusProgress:0,level:0,startedAt:new Timestamp(0,0)},caps_language:"",caps_mycaps:{count:0,collections:[]},first_name:"",id:0,league:"",score:0,scoreBase:0,...userDefault},"userAtom"),updateUserAction=action(async(_,d,v)=>{userAtom(_,()=>{const A=getSeasonBalance(d,v),C={...d,coinsSeasonBalance:A},w=setOnlyUndefined(C,userDefault);return w.tokensStr=formatNumber(w.tokens.toFixed(2)),w})},"updateUserAction"),slottedCapsAtom=atom(_=>{const d=_.spy(userAtom);if(!d.staked)return new Map;const v=new Map;return d.staked.forEach(A=>v.set(A.slot,A)),v},"slottedCapsAtom"),showLeaderboardUserIdAtom=atom(null,"showLeaderboardUserIdAtom"),unfinishedGamesAtom=atom([],"unfinishedGamesAtom"),fetchUnfinishedGamesAction=action(_=>_.schedule(async()=>{const d=await firebaseService.getUnfinishedGames(_.get(userAtom));unfinishedGamesAtom(_,d)}),"fetchUnfinishedGamesAction"),unfinishedPveGameAtom=atom(_=>_.spy(unfinishedGamesAtom).filter(d=>d.mode==="pve")?.[0],"unfinishedPveGameAtom"),unfinishedCampaignGameAtom=atom(_=>_.spy(unfinishedGamesAtom).filter(d=>d.mode==="campaign")?.[0],"unfinishedCampaignGameAtom"),pveCampaignAtom=atom({id:"",levels:[]},"pveCampaignAtom"),pveCampaignLevelsAtom=atom(_=>{const d=_.spy(pveCampaignAtom),A=_.spy(userAtom).campaigns?.find(C=>d.id===C.id)??{completed:[],opened:["Level_1"]};return d.levels.reduce((C,w)=>{const T=A.opened.findIndex(G=>G===w.id)!==-1,R=A.completed.findIndex(G=>G===w.id)!==-1;return C[w.id]={...w,opened:T,completed:R},C},{})||{}},"pveCampaignLevelsAtom"),debugUsers=[571385,342095619,877053999,550656348,877053999],AppConfig={mode:AppMode.MINIAPP,shopMode:ShopMode.STARS},initialState={authState:AuthState.INIT,packCollections:[],capsNumber:-1,coinsBalance:-1,coinsSeasonIcon:"",isLoaded:!1,isSeasonEnabled:!1,capsCollections:[],capsGd:{}},AppContext=reactExports.createContext({appState:initialState,setAppState:()=>{},onBalanceUpdate:async()=>{},initialLoad:async()=>{},onUserUpdate:async()=>({}),onUserAndPendingPacksUpdate:async()=>{},onCheckEnergyAndUserUpdate:async()=>{}}),loadSeasonData=async(_,d)=>d?.season?await firebaseService.getUserSeasonData(_.id.toString(),d):void 0,getPendingGameId=()=>{if(CapsWebApp.initDataUnsafe.start_param){const _=CapsWebApp.initDataUnsafe.start_param.match(/g_(.+)$/);if(_&&_[1])return _[1]}},getPendingSquadId=()=>{if(CapsWebApp.initDataUnsafe.start_param){const _=CapsWebApp.initDataUnsafe.start_param.match(/s_(.+)$/);if(_&&_[1])return _[1]}},getDuckygramPacks=async _=>{if(CapsWebApp.initDataUnsafe.start_param){const d=CapsWebApp.initDataUnsafe.start_param.match(/duckygram_(.+)$/);if(d&&d[1]){const v=await firebaseService.getDuckygram(_.id.toString()),A=Number(d[1]);if(v&&v.levels&&v.levels.includes(A)){const C=v.rewardsByLevel[A];if(C&&C.packs){const T=(await firebaseService.getPacksByIds(C.packs)).filter(R=>!R.isOpened);return T.length>0?T:void 0}}}}},getRefCode=async()=>{if(CapsWebApp.initDataUnsafe.start_param){const _=CapsWebApp.initDataUnsafe.start_param.match(/r_(.+)$/);if(_&&_[1])return _[1]}},getCapId=()=>{if(CapsWebApp.initDataUnsafe.start_param){const _=CapsWebApp.initDataUnsafe.start_param.match(/c_(.+)$/);if(_&&_[1])return _[1]}};function AppStateProvider({children:_}){const[d,v]=reactExports.useState(initialState),A=useAction(tutorialAtom),C=useAction(updatePendingPacksAction),w=useAction(updateUserAction),T=useAction(fetchUnfinishedGamesAction),R=useAction(pveCampaignAtom),[G]=useTonConnectUI(),I=reactExports.useCallback(async ie=>{const se=CapsWebApp.initDataUnsafe.user?.id?debugUsers.includes(CapsWebApp.initDataUnsafe.user?.id):!1;if(!ie.token){v({...d,errorMessage:ie.message,authState:AuthState.NO_ACCESS});return}await firebaseService.login(ie.token),AppConfig.mode==AppMode.WEB&&await capsService.webLogin(firebaseService.token),instance.changeLanguage(ie.lang);const re=await firebaseService.getCapsGD(),fe=await firebaseService.getPveGd(),ue=await firebaseService.getPackCollections(),ge=await firebaseService.getAllCollections(),ye=firebaseService.getPackTopPartUrl(COMMON_COLLECTION_ID),be=firebaseService.getPackBottomPartUrl(COMMON_COLLECTION_ID),ve=await firebaseService.getUser(firebaseService.user.uid),Me=ve.caps_squad?await firebaseService.getSquad(ve.caps_squad.id.toString()):void 0,we=imageSrc.concat([ye,be]);if(!ve.isOnboardingComplete){const Oe=await __vitePreload(()=>import("./onboarding-_SYG5_O2.js"),[]);we.concat(Oe)}await preloadPromise(we),CapsWebApp.isSoundEnabled&&await preloadSounds(),G.setConnectRequestParameters({state:"loading"}),G.setConnectRequestParameters({state:"ready",value:{tonProof:ie.proof}}),G.onStatusChange(Oe=>{Oe&&Oe.connectItems?.tonProof&&"proof"in Oe.connectItems.tonProof&&capsService.validateProof(Oe.account.address,Oe.account.chain,{...Oe.connectItems?.tonProof.proof,state_init:Oe.account.walletStateInit},firebaseService.token).then(()=>{}).catch(()=>{})}),await C(ve.id),(!se&&ve.isDebug||se)&&eruda.init(),ve.isTutorialRequired&&(A("pve"),capsService.completeTutorial(firebaseService.token)),await w(ve,re),await T(),R(fe.campaigns.find(Oe=>Oe.id==="tearofnostalgia"));const Be=getCapId(),De=Be?await firebaseService.getCap(Be):void 0,Fe=re.squads.season?re.squads.seasons[re.squads.season]:void 0;v({...d,user:ve,squad:Me,pendingGameId:getPendingGameId(),pendingSquadId:getPendingSquadId(),duckygramRewards:await getDuckygramPacks(ve),refCode:await getRefCode(),cap:De,packCollections:ue.sort((Oe,Ge)=>Oe.order-Ge.order),capsNumber:ve.caps_mycaps.count,coinsBalance:ve.caps_coins_balance?ve.caps_coins_balance:0,seasonData:await loadSeasonData(ve,re),squadSeason:Fe,coinsSeasonIcon:re.seasons?.find(Oe=>Oe.id==re.season)?.icon??"tickets.png",authState:AuthState.SUCCESS,capsGd:re,pveGd:fe,capsCollections:ge??[],isSeasonEnabled:re.seasons&&re.seasons.findIndex(Oe=>Oe.id==re.season)>-1,topupPayload:ie.topupPayload,isAprilFool:!1,isCommentsEnabled:!ve.isCommentsDisabled,userDiamondPosition:await firebaseService.getDiamondUserPositionInLeaderboard(ve)})},[d,G]),z=reactExports.useCallback(async()=>{const ie=await firebaseService.getUser(firebaseService.user.uid),oe=await loadSeasonData(ie,d.capsGd);await w(ie,d.capsGd);const se={...d,user:ie,coinsBalance:ie.caps_coins_balance?ie.caps_coins_balance:0,capsNumber:ie.caps_mycaps.count,seasonData:oe};return v(se),se},[d]),H=reactExports.useCallback(async()=>{await z()},[z]),Y=reactExports.useCallback(async()=>{await capsService.checkEnergy(firebaseService.token),await z()},[z]),ee=reactExports.useCallback(async()=>{const ie=await firebaseService.getUser(firebaseService.user.uid);await C(ie.id),await w(ie,d.capsGd);const oe=await loadSeasonData(ie,d.capsGd);v(se=>({...se,user:ie,coinsBalance:ie.caps_coins_balance?ie.caps_coins_balance:0,seasonData:oe,capsNumber:ie.caps_mycaps.count}))},[d]);return jsxRuntimeExports.jsx(AppContext.Provider,{value:{appState:d,setAppState:v,onBalanceUpdate:H,initialLoad:I,onUserUpdate:z,onUserAndPendingPacksUpdate:ee,onCheckEnergyAndUserUpdate:Y},children:_})}function useAppState(){return reactExports.useContext(AppContext)}function getStakingConfigIndex(_,d){if(!d||!d.staking)return-1;for(var v=d.staking.configs.length-1;v>=0;v--){const A=d?.staking?.configs[v];if(A&&A.from<=_)return v}return-1}function getStakingConfig(_,d){if(!d||!d.staking)return;const v=getStakingConfigIndex(_,d);if(!(v<0||v>=d.staking.configs.length))return d.staking.configs[v]}function getStakingSpeed(_,d,v){const A=getStakingConfig(d,v);return A?getStakingSpeedFromConfig(_,A,v):0}function getStakingSpeedWithBonus(_,d,v,A,C,w,T){const R=getStakingSpeed(_,d,T);if(!A||!T)return R;const G=getStakingBonus(_,A,T),I=w?getGiftsBonus(w,T):0,z=getLeagueBonus(A,v,T)??0,H=getSquadBonus(C,T)??0;return R*(1+G+I+z+H)}function getStakingSpeedFromConfig(_,d,v){if(!v||!v.staking)return 0;const A=d.bonus[_.collectionId]??1;return(((v.staking.speeds[d.speed]??{})[_.collectionId]??{})[_.grade.toLowerCase()]??0)*A}function getStakingBonus(_,d,v){const A=d.caps_mycaps.collections.find(R=>R.collectionId==_.collectionId);if(!A||!v.staking)return 0;const C=A.bonus-1;return C<0||C>=ALL_GRADES.length?0:v.staking.bonus[ALL_GRADES[C].toLowerCase()]??0}function getGiftsBonus(_,d){var v=0;if(!_.gifts||!d.staking?.gifts)return v;for(const A of _.gifts){const C=d.staking?.gifts.tiers[A.gift.collection];if(!C)continue;const w=d.staking?.gifts.bonuses[C];w&&w>0&&(v+=w)}return v}function findLockedSlot(_,d){const v=getStakingConfig(Timestamp.now(),d);if(!v)return;const A=v.slots.filter(w=>w.isPaid);if(A.length==0)return;const C=A.findIndex(w=>w.index==_);if(!(C<0))return d?.staking?.lockedSlots[C??-1]}function getLeagueBonus(_,d,v){if(!v.staking||!_.league||_.league.length==0||!v.staking.leagues)return 0;const A=v.staking.leagues;return d==0&&_.league=="diamond"?A.top1??0:d==1&&_.league=="diamond"?A.top2??0:d==2&&_.league=="diamond"?A.top3??0:d>=0&&d<10&&_.league=="diamond"?A.top10??0:d>=9&&d<100&&_.league=="diamond"?A.top100??0:A[_.league.toLocaleLowerCase()]??0}function getSquadBonus(_,d){return getSquadLevel(_,d)?.farmingBonus??0}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_){for(var d=1;d<arguments.length;d++){var v=arguments[d];for(var A in v)({}).hasOwnProperty.call(v,A)&&(_[A]=v[A])}return _},_extends$1.apply(null,arguments)}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="179",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace$1="srgb",LinearSRGBColorSpace$1="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"},InterpolationSamplingType={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InterpolationSamplingMode={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};class EventDispatcher{addEventListener(d,v){this._listeners===void 0&&(this._listeners={});const A=this._listeners;A[d]===void 0&&(A[d]=[]),A[d].indexOf(v)===-1&&A[d].push(v)}hasEventListener(d,v){const A=this._listeners;return A===void 0?!1:A[d]!==void 0&&A[d].indexOf(v)!==-1}removeEventListener(d,v){const A=this._listeners;if(A===void 0)return;const C=A[d];if(C!==void 0){const w=C.indexOf(v);w!==-1&&C.splice(w,1)}}dispatchEvent(d){const v=this._listeners;if(v===void 0)return;const A=v[d.type];if(A!==void 0){d.target=this;const C=A.slice(0);for(let w=0,T=C.length;w<T;w++)C[w].call(this,d);d.target=null}}}const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const _=Math.random()*4294967295|0,d=Math.random()*4294967295|0,v=Math.random()*4294967295|0,A=Math.random()*4294967295|0;return(_lut[_&255]+_lut[_>>8&255]+_lut[_>>16&255]+_lut[_>>24&255]+"-"+_lut[d&255]+_lut[d>>8&255]+"-"+_lut[d>>16&15|64]+_lut[d>>24&255]+"-"+_lut[v&63|128]+_lut[v>>8&255]+"-"+_lut[v>>16&255]+_lut[v>>24&255]+_lut[A&255]+_lut[A>>8&255]+_lut[A>>16&255]+_lut[A>>24&255]).toLowerCase()}function clamp$2(_,d,v){return Math.max(d,Math.min(v,_))}function euclideanModulo(_,d){return(_%d+d)%d}function mapLinear(_,d,v,A,C){return A+(_-d)*(C-A)/(v-d)}function inverseLerp(_,d,v){return _!==d?(v-_)/(d-_):0}function lerp(_,d,v){return(1-v)*_+v*d}function damp$1(_,d,v,A){return lerp(_,d,1-Math.exp(-v*A))}function pingpong(_,d=1){return d-Math.abs(euclideanModulo(_,d*2)-d)}function smoothstep(_,d,v){return _<=d?0:_>=v?1:(_=(_-d)/(v-d),_*_*(3-2*_))}function smootherstep(_,d,v){return _<=d?0:_>=v?1:(_=(_-d)/(v-d),_*_*_*(_*(_*6-15)+10))}function randInt(_,d){return _+Math.floor(Math.random()*(d-_+1))}function randFloat(_,d){return _+Math.random()*(d-_)}function randFloatSpread(_){return _*(.5-Math.random())}function seededRandom(_){_!==void 0&&(_seed=_);let d=_seed+=1831565813;return d=Math.imul(d^d>>>15,d|1),d^=d+Math.imul(d^d>>>7,d|61),((d^d>>>14)>>>0)/4294967296}function degToRad(_){return _*DEG2RAD}function radToDeg(_){return _*RAD2DEG}function isPowerOfTwo(_){return(_&_-1)===0&&_!==0}function ceilPowerOfTwo(_){return Math.pow(2,Math.ceil(Math.log(_)/Math.LN2))}function floorPowerOfTwo(_){return Math.pow(2,Math.floor(Math.log(_)/Math.LN2))}function setQuaternionFromProperEuler(_,d,v,A,C){const w=Math.cos,T=Math.sin,R=w(v/2),G=T(v/2),I=w((d+A)/2),z=T((d+A)/2),H=w((d-A)/2),Y=T((d-A)/2),ee=w((A-d)/2),ie=T((A-d)/2);switch(C){case"XYX":_.set(R*z,G*H,G*Y,R*I);break;case"YZY":_.set(G*Y,R*z,G*H,R*I);break;case"ZXZ":_.set(G*H,G*Y,R*z,R*I);break;case"XZX":_.set(R*z,G*ie,G*ee,R*I);break;case"YXY":_.set(G*ee,R*z,G*ie,R*I);break;case"ZYZ":_.set(G*ie,G*ee,R*z,R*I);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+C)}}function denormalize(_,d){switch(d.constructor){case Float32Array:return _;case Uint32Array:return _/4294967295;case Uint16Array:return _/65535;case Uint8Array:return _/255;case Int32Array:return Math.max(_/2147483647,-1);case Int16Array:return Math.max(_/32767,-1);case Int8Array:return Math.max(_/127,-1);default:throw new Error("Invalid component type.")}}function normalize(_,d){switch(d.constructor){case Float32Array:return _;case Uint32Array:return Math.round(_*4294967295);case Uint16Array:return Math.round(_*65535);case Uint8Array:return Math.round(_*255);case Int32Array:return Math.round(_*2147483647);case Int16Array:return Math.round(_*32767);case Int8Array:return Math.round(_*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp:clamp$2,euclideanModulo,mapLinear,inverseLerp,lerp,damp:damp$1,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(d=0,v=0){Vector2.prototype.isVector2=!0,this.x=d,this.y=v}get width(){return this.x}set width(d){this.x=d}get height(){return this.y}set height(d){this.y=d}set(d,v){return this.x=d,this.y=v,this}setScalar(d){return this.x=d,this.y=d,this}setX(d){return this.x=d,this}setY(d){return this.y=d,this}setComponent(d,v){switch(d){case 0:this.x=v;break;case 1:this.y=v;break;default:throw new Error("index is out of range: "+d)}return this}getComponent(d){switch(d){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+d)}}clone(){return new this.constructor(this.x,this.y)}copy(d){return this.x=d.x,this.y=d.y,this}add(d){return this.x+=d.x,this.y+=d.y,this}addScalar(d){return this.x+=d,this.y+=d,this}addVectors(d,v){return this.x=d.x+v.x,this.y=d.y+v.y,this}addScaledVector(d,v){return this.x+=d.x*v,this.y+=d.y*v,this}sub(d){return this.x-=d.x,this.y-=d.y,this}subScalar(d){return this.x-=d,this.y-=d,this}subVectors(d,v){return this.x=d.x-v.x,this.y=d.y-v.y,this}multiply(d){return this.x*=d.x,this.y*=d.y,this}multiplyScalar(d){return this.x*=d,this.y*=d,this}divide(d){return this.x/=d.x,this.y/=d.y,this}divideScalar(d){return this.multiplyScalar(1/d)}applyMatrix3(d){const v=this.x,A=this.y,C=d.elements;return this.x=C[0]*v+C[3]*A+C[6],this.y=C[1]*v+C[4]*A+C[7],this}min(d){return this.x=Math.min(this.x,d.x),this.y=Math.min(this.y,d.y),this}max(d){return this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this}clamp(d,v){return this.x=clamp$2(this.x,d.x,v.x),this.y=clamp$2(this.y,d.y,v.y),this}clampScalar(d,v){return this.x=clamp$2(this.x,d,v),this.y=clamp$2(this.y,d,v),this}clampLength(d,v){const A=this.length();return this.divideScalar(A||1).multiplyScalar(clamp$2(A,d,v))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(d){return this.x*d.x+this.y*d.y}cross(d){return this.x*d.y-this.y*d.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(d){const v=Math.sqrt(this.lengthSq()*d.lengthSq());if(v===0)return Math.PI/2;const A=this.dot(d)/v;return Math.acos(clamp$2(A,-1,1))}distanceTo(d){return Math.sqrt(this.distanceToSquared(d))}distanceToSquared(d){const v=this.x-d.x,A=this.y-d.y;return v*v+A*A}manhattanDistanceTo(d){return Math.abs(this.x-d.x)+Math.abs(this.y-d.y)}setLength(d){return this.normalize().multiplyScalar(d)}lerp(d,v){return this.x+=(d.x-this.x)*v,this.y+=(d.y-this.y)*v,this}lerpVectors(d,v,A){return this.x=d.x+(v.x-d.x)*A,this.y=d.y+(v.y-d.y)*A,this}equals(d){return d.x===this.x&&d.y===this.y}fromArray(d,v=0){return this.x=d[v],this.y=d[v+1],this}toArray(d=[],v=0){return d[v]=this.x,d[v+1]=this.y,d}fromBufferAttribute(d,v){return this.x=d.getX(v),this.y=d.getY(v),this}rotateAround(d,v){const A=Math.cos(v),C=Math.sin(v),w=this.x-d.x,T=this.y-d.y;return this.x=w*A-T*C+d.x,this.y=w*C+T*A+d.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(d=0,v=0,A=0,C=1){this.isQuaternion=!0,this._x=d,this._y=v,this._z=A,this._w=C}static slerpFlat(d,v,A,C,w,T,R){let G=A[C+0],I=A[C+1],z=A[C+2],H=A[C+3];const Y=w[T+0],ee=w[T+1],ie=w[T+2],oe=w[T+3];if(R===0){d[v+0]=G,d[v+1]=I,d[v+2]=z,d[v+3]=H;return}if(R===1){d[v+0]=Y,d[v+1]=ee,d[v+2]=ie,d[v+3]=oe;return}if(H!==oe||G!==Y||I!==ee||z!==ie){let se=1-R;const re=G*Y+I*ee+z*ie+H*oe,fe=re>=0?1:-1,ue=1-re*re;if(ue>Number.EPSILON){const ye=Math.sqrt(ue),be=Math.atan2(ye,re*fe);se=Math.sin(se*be)/ye,R=Math.sin(R*be)/ye}const ge=R*fe;if(G=G*se+Y*ge,I=I*se+ee*ge,z=z*se+ie*ge,H=H*se+oe*ge,se===1-R){const ye=1/Math.sqrt(G*G+I*I+z*z+H*H);G*=ye,I*=ye,z*=ye,H*=ye}}d[v]=G,d[v+1]=I,d[v+2]=z,d[v+3]=H}static multiplyQuaternionsFlat(d,v,A,C,w,T){const R=A[C],G=A[C+1],I=A[C+2],z=A[C+3],H=w[T],Y=w[T+1],ee=w[T+2],ie=w[T+3];return d[v]=R*ie+z*H+G*ee-I*Y,d[v+1]=G*ie+z*Y+I*H-R*ee,d[v+2]=I*ie+z*ee+R*Y-G*H,d[v+3]=z*ie-R*H-G*Y-I*ee,d}get x(){return this._x}set x(d){this._x=d,this._onChangeCallback()}get y(){return this._y}set y(d){this._y=d,this._onChangeCallback()}get z(){return this._z}set z(d){this._z=d,this._onChangeCallback()}get w(){return this._w}set w(d){this._w=d,this._onChangeCallback()}set(d,v,A,C){return this._x=d,this._y=v,this._z=A,this._w=C,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(d){return this._x=d.x,this._y=d.y,this._z=d.z,this._w=d.w,this._onChangeCallback(),this}setFromEuler(d,v=!0){const A=d._x,C=d._y,w=d._z,T=d._order,R=Math.cos,G=Math.sin,I=R(A/2),z=R(C/2),H=R(w/2),Y=G(A/2),ee=G(C/2),ie=G(w/2);switch(T){case"XYZ":this._x=Y*z*H+I*ee*ie,this._y=I*ee*H-Y*z*ie,this._z=I*z*ie+Y*ee*H,this._w=I*z*H-Y*ee*ie;break;case"YXZ":this._x=Y*z*H+I*ee*ie,this._y=I*ee*H-Y*z*ie,this._z=I*z*ie-Y*ee*H,this._w=I*z*H+Y*ee*ie;break;case"ZXY":this._x=Y*z*H-I*ee*ie,this._y=I*ee*H+Y*z*ie,this._z=I*z*ie+Y*ee*H,this._w=I*z*H-Y*ee*ie;break;case"ZYX":this._x=Y*z*H-I*ee*ie,this._y=I*ee*H+Y*z*ie,this._z=I*z*ie-Y*ee*H,this._w=I*z*H+Y*ee*ie;break;case"YZX":this._x=Y*z*H+I*ee*ie,this._y=I*ee*H+Y*z*ie,this._z=I*z*ie-Y*ee*H,this._w=I*z*H-Y*ee*ie;break;case"XZY":this._x=Y*z*H-I*ee*ie,this._y=I*ee*H-Y*z*ie,this._z=I*z*ie+Y*ee*H,this._w=I*z*H+Y*ee*ie;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+T)}return v===!0&&this._onChangeCallback(),this}setFromAxisAngle(d,v){const A=v/2,C=Math.sin(A);return this._x=d.x*C,this._y=d.y*C,this._z=d.z*C,this._w=Math.cos(A),this._onChangeCallback(),this}setFromRotationMatrix(d){const v=d.elements,A=v[0],C=v[4],w=v[8],T=v[1],R=v[5],G=v[9],I=v[2],z=v[6],H=v[10],Y=A+R+H;if(Y>0){const ee=.5/Math.sqrt(Y+1);this._w=.25/ee,this._x=(z-G)*ee,this._y=(w-I)*ee,this._z=(T-C)*ee}else if(A>R&&A>H){const ee=2*Math.sqrt(1+A-R-H);this._w=(z-G)/ee,this._x=.25*ee,this._y=(C+T)/ee,this._z=(w+I)/ee}else if(R>H){const ee=2*Math.sqrt(1+R-A-H);this._w=(w-I)/ee,this._x=(C+T)/ee,this._y=.25*ee,this._z=(G+z)/ee}else{const ee=2*Math.sqrt(1+H-A-R);this._w=(T-C)/ee,this._x=(w+I)/ee,this._y=(G+z)/ee,this._z=.25*ee}return this._onChangeCallback(),this}setFromUnitVectors(d,v){let A=d.dot(v)+1;return A<1e-8?(A=0,Math.abs(d.x)>Math.abs(d.z)?(this._x=-d.y,this._y=d.x,this._z=0,this._w=A):(this._x=0,this._y=-d.z,this._z=d.y,this._w=A)):(this._x=d.y*v.z-d.z*v.y,this._y=d.z*v.x-d.x*v.z,this._z=d.x*v.y-d.y*v.x,this._w=A),this.normalize()}angleTo(d){return 2*Math.acos(Math.abs(clamp$2(this.dot(d),-1,1)))}rotateTowards(d,v){const A=this.angleTo(d);if(A===0)return this;const C=Math.min(1,v/A);return this.slerp(d,C),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(d){return this._x*d._x+this._y*d._y+this._z*d._z+this._w*d._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let d=this.length();return d===0?(this._x=0,this._y=0,this._z=0,this._w=1):(d=1/d,this._x=this._x*d,this._y=this._y*d,this._z=this._z*d,this._w=this._w*d),this._onChangeCallback(),this}multiply(d){return this.multiplyQuaternions(this,d)}premultiply(d){return this.multiplyQuaternions(d,this)}multiplyQuaternions(d,v){const A=d._x,C=d._y,w=d._z,T=d._w,R=v._x,G=v._y,I=v._z,z=v._w;return this._x=A*z+T*R+C*I-w*G,this._y=C*z+T*G+w*R-A*I,this._z=w*z+T*I+A*G-C*R,this._w=T*z-A*R-C*G-w*I,this._onChangeCallback(),this}slerp(d,v){if(v===0)return this;if(v===1)return this.copy(d);const A=this._x,C=this._y,w=this._z,T=this._w;let R=T*d._w+A*d._x+C*d._y+w*d._z;if(R<0?(this._w=-d._w,this._x=-d._x,this._y=-d._y,this._z=-d._z,R=-R):this.copy(d),R>=1)return this._w=T,this._x=A,this._y=C,this._z=w,this;const G=1-R*R;if(G<=Number.EPSILON){const ee=1-v;return this._w=ee*T+v*this._w,this._x=ee*A+v*this._x,this._y=ee*C+v*this._y,this._z=ee*w+v*this._z,this.normalize(),this}const I=Math.sqrt(G),z=Math.atan2(I,R),H=Math.sin((1-v)*z)/I,Y=Math.sin(v*z)/I;return this._w=T*H+this._w*Y,this._x=A*H+this._x*Y,this._y=C*H+this._y*Y,this._z=w*H+this._z*Y,this._onChangeCallback(),this}slerpQuaternions(d,v,A){return this.copy(d).slerp(v,A)}random(){const d=2*Math.PI*Math.random(),v=2*Math.PI*Math.random(),A=Math.random(),C=Math.sqrt(1-A),w=Math.sqrt(A);return this.set(C*Math.sin(d),C*Math.cos(d),w*Math.sin(v),w*Math.cos(v))}equals(d){return d._x===this._x&&d._y===this._y&&d._z===this._z&&d._w===this._w}fromArray(d,v=0){return this._x=d[v],this._y=d[v+1],this._z=d[v+2],this._w=d[v+3],this._onChangeCallback(),this}toArray(d=[],v=0){return d[v]=this._x,d[v+1]=this._y,d[v+2]=this._z,d[v+3]=this._w,d}fromBufferAttribute(d,v){return this._x=d.getX(v),this._y=d.getY(v),this._z=d.getZ(v),this._w=d.getW(v),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(d){return this._onChangeCallback=d,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(d=0,v=0,A=0){Vector3.prototype.isVector3=!0,this.x=d,this.y=v,this.z=A}set(d,v,A){return A===void 0&&(A=this.z),this.x=d,this.y=v,this.z=A,this}setScalar(d){return this.x=d,this.y=d,this.z=d,this}setX(d){return this.x=d,this}setY(d){return this.y=d,this}setZ(d){return this.z=d,this}setComponent(d,v){switch(d){case 0:this.x=v;break;case 1:this.y=v;break;case 2:this.z=v;break;default:throw new Error("index is out of range: "+d)}return this}getComponent(d){switch(d){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+d)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(d){return this.x=d.x,this.y=d.y,this.z=d.z,this}add(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z,this}addScalar(d){return this.x+=d,this.y+=d,this.z+=d,this}addVectors(d,v){return this.x=d.x+v.x,this.y=d.y+v.y,this.z=d.z+v.z,this}addScaledVector(d,v){return this.x+=d.x*v,this.y+=d.y*v,this.z+=d.z*v,this}sub(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z,this}subScalar(d){return this.x-=d,this.y-=d,this.z-=d,this}subVectors(d,v){return this.x=d.x-v.x,this.y=d.y-v.y,this.z=d.z-v.z,this}multiply(d){return this.x*=d.x,this.y*=d.y,this.z*=d.z,this}multiplyScalar(d){return this.x*=d,this.y*=d,this.z*=d,this}multiplyVectors(d,v){return this.x=d.x*v.x,this.y=d.y*v.y,this.z=d.z*v.z,this}applyEuler(d){return this.applyQuaternion(_quaternion$4.setFromEuler(d))}applyAxisAngle(d,v){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(d,v))}applyMatrix3(d){const v=this.x,A=this.y,C=this.z,w=d.elements;return this.x=w[0]*v+w[3]*A+w[6]*C,this.y=w[1]*v+w[4]*A+w[7]*C,this.z=w[2]*v+w[5]*A+w[8]*C,this}applyNormalMatrix(d){return this.applyMatrix3(d).normalize()}applyMatrix4(d){const v=this.x,A=this.y,C=this.z,w=d.elements,T=1/(w[3]*v+w[7]*A+w[11]*C+w[15]);return this.x=(w[0]*v+w[4]*A+w[8]*C+w[12])*T,this.y=(w[1]*v+w[5]*A+w[9]*C+w[13])*T,this.z=(w[2]*v+w[6]*A+w[10]*C+w[14])*T,this}applyQuaternion(d){const v=this.x,A=this.y,C=this.z,w=d.x,T=d.y,R=d.z,G=d.w,I=2*(T*C-R*A),z=2*(R*v-w*C),H=2*(w*A-T*v);return this.x=v+G*I+T*H-R*z,this.y=A+G*z+R*I-w*H,this.z=C+G*H+w*z-T*I,this}project(d){return this.applyMatrix4(d.matrixWorldInverse).applyMatrix4(d.projectionMatrix)}unproject(d){return this.applyMatrix4(d.projectionMatrixInverse).applyMatrix4(d.matrixWorld)}transformDirection(d){const v=this.x,A=this.y,C=this.z,w=d.elements;return this.x=w[0]*v+w[4]*A+w[8]*C,this.y=w[1]*v+w[5]*A+w[9]*C,this.z=w[2]*v+w[6]*A+w[10]*C,this.normalize()}divide(d){return this.x/=d.x,this.y/=d.y,this.z/=d.z,this}divideScalar(d){return this.multiplyScalar(1/d)}min(d){return this.x=Math.min(this.x,d.x),this.y=Math.min(this.y,d.y),this.z=Math.min(this.z,d.z),this}max(d){return this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this.z=Math.max(this.z,d.z),this}clamp(d,v){return this.x=clamp$2(this.x,d.x,v.x),this.y=clamp$2(this.y,d.y,v.y),this.z=clamp$2(this.z,d.z,v.z),this}clampScalar(d,v){return this.x=clamp$2(this.x,d,v),this.y=clamp$2(this.y,d,v),this.z=clamp$2(this.z,d,v),this}clampLength(d,v){const A=this.length();return this.divideScalar(A||1).multiplyScalar(clamp$2(A,d,v))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(d){return this.x*d.x+this.y*d.y+this.z*d.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(d){return this.normalize().multiplyScalar(d)}lerp(d,v){return this.x+=(d.x-this.x)*v,this.y+=(d.y-this.y)*v,this.z+=(d.z-this.z)*v,this}lerpVectors(d,v,A){return this.x=d.x+(v.x-d.x)*A,this.y=d.y+(v.y-d.y)*A,this.z=d.z+(v.z-d.z)*A,this}cross(d){return this.crossVectors(this,d)}crossVectors(d,v){const A=d.x,C=d.y,w=d.z,T=v.x,R=v.y,G=v.z;return this.x=C*G-w*R,this.y=w*T-A*G,this.z=A*R-C*T,this}projectOnVector(d){const v=d.lengthSq();if(v===0)return this.set(0,0,0);const A=d.dot(this)/v;return this.copy(d).multiplyScalar(A)}projectOnPlane(d){return _vector$c.copy(this).projectOnVector(d),this.sub(_vector$c)}reflect(d){return this.sub(_vector$c.copy(d).multiplyScalar(2*this.dot(d)))}angleTo(d){const v=Math.sqrt(this.lengthSq()*d.lengthSq());if(v===0)return Math.PI/2;const A=this.dot(d)/v;return Math.acos(clamp$2(A,-1,1))}distanceTo(d){return Math.sqrt(this.distanceToSquared(d))}distanceToSquared(d){const v=this.x-d.x,A=this.y-d.y,C=this.z-d.z;return v*v+A*A+C*C}manhattanDistanceTo(d){return Math.abs(this.x-d.x)+Math.abs(this.y-d.y)+Math.abs(this.z-d.z)}setFromSpherical(d){return this.setFromSphericalCoords(d.radius,d.phi,d.theta)}setFromSphericalCoords(d,v,A){const C=Math.sin(v)*d;return this.x=C*Math.sin(A),this.y=Math.cos(v)*d,this.z=C*Math.cos(A),this}setFromCylindrical(d){return this.setFromCylindricalCoords(d.radius,d.theta,d.y)}setFromCylindricalCoords(d,v,A){return this.x=d*Math.sin(v),this.y=A,this.z=d*Math.cos(v),this}setFromMatrixPosition(d){const v=d.elements;return this.x=v[12],this.y=v[13],this.z=v[14],this}setFromMatrixScale(d){const v=this.setFromMatrixColumn(d,0).length(),A=this.setFromMatrixColumn(d,1).length(),C=this.setFromMatrixColumn(d,2).length();return this.x=v,this.y=A,this.z=C,this}setFromMatrixColumn(d,v){return this.fromArray(d.elements,v*4)}setFromMatrix3Column(d,v){return this.fromArray(d.elements,v*3)}setFromEuler(d){return this.x=d._x,this.y=d._y,this.z=d._z,this}setFromColor(d){return this.x=d.r,this.y=d.g,this.z=d.b,this}equals(d){return d.x===this.x&&d.y===this.y&&d.z===this.z}fromArray(d,v=0){return this.x=d[v],this.y=d[v+1],this.z=d[v+2],this}toArray(d=[],v=0){return d[v]=this.x,d[v+1]=this.y,d[v+2]=this.z,d}fromBufferAttribute(d,v){return this.x=d.getX(v),this.y=d.getY(v),this.z=d.getZ(v),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const d=Math.random()*Math.PI*2,v=Math.random()*2-1,A=Math.sqrt(1-v*v);return this.x=A*Math.cos(d),this.y=v,this.z=A*Math.sin(d),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Matrix3{constructor(d,v,A,C,w,T,R,G,I){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],d!==void 0&&this.set(d,v,A,C,w,T,R,G,I)}set(d,v,A,C,w,T,R,G,I){const z=this.elements;return z[0]=d,z[1]=C,z[2]=R,z[3]=v,z[4]=w,z[5]=G,z[6]=A,z[7]=T,z[8]=I,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(d){const v=this.elements,A=d.elements;return v[0]=A[0],v[1]=A[1],v[2]=A[2],v[3]=A[3],v[4]=A[4],v[5]=A[5],v[6]=A[6],v[7]=A[7],v[8]=A[8],this}extractBasis(d,v,A){return d.setFromMatrix3Column(this,0),v.setFromMatrix3Column(this,1),A.setFromMatrix3Column(this,2),this}setFromMatrix4(d){const v=d.elements;return this.set(v[0],v[4],v[8],v[1],v[5],v[9],v[2],v[6],v[10]),this}multiply(d){return this.multiplyMatrices(this,d)}premultiply(d){return this.multiplyMatrices(d,this)}multiplyMatrices(d,v){const A=d.elements,C=v.elements,w=this.elements,T=A[0],R=A[3],G=A[6],I=A[1],z=A[4],H=A[7],Y=A[2],ee=A[5],ie=A[8],oe=C[0],se=C[3],re=C[6],fe=C[1],ue=C[4],ge=C[7],ye=C[2],be=C[5],ve=C[8];return w[0]=T*oe+R*fe+G*ye,w[3]=T*se+R*ue+G*be,w[6]=T*re+R*ge+G*ve,w[1]=I*oe+z*fe+H*ye,w[4]=I*se+z*ue+H*be,w[7]=I*re+z*ge+H*ve,w[2]=Y*oe+ee*fe+ie*ye,w[5]=Y*se+ee*ue+ie*be,w[8]=Y*re+ee*ge+ie*ve,this}multiplyScalar(d){const v=this.elements;return v[0]*=d,v[3]*=d,v[6]*=d,v[1]*=d,v[4]*=d,v[7]*=d,v[2]*=d,v[5]*=d,v[8]*=d,this}determinant(){const d=this.elements,v=d[0],A=d[1],C=d[2],w=d[3],T=d[4],R=d[5],G=d[6],I=d[7],z=d[8];return v*T*z-v*R*I-A*w*z+A*R*G+C*w*I-C*T*G}invert(){const d=this.elements,v=d[0],A=d[1],C=d[2],w=d[3],T=d[4],R=d[5],G=d[6],I=d[7],z=d[8],H=z*T-R*I,Y=R*G-z*w,ee=I*w-T*G,ie=v*H+A*Y+C*ee;if(ie===0)return this.set(0,0,0,0,0,0,0,0,0);const oe=1/ie;return d[0]=H*oe,d[1]=(C*I-z*A)*oe,d[2]=(R*A-C*T)*oe,d[3]=Y*oe,d[4]=(z*v-C*G)*oe,d[5]=(C*w-R*v)*oe,d[6]=ee*oe,d[7]=(A*G-I*v)*oe,d[8]=(T*v-A*w)*oe,this}transpose(){let d;const v=this.elements;return d=v[1],v[1]=v[3],v[3]=d,d=v[2],v[2]=v[6],v[6]=d,d=v[5],v[5]=v[7],v[7]=d,this}getNormalMatrix(d){return this.setFromMatrix4(d).invert().transpose()}transposeIntoArray(d){const v=this.elements;return d[0]=v[0],d[1]=v[3],d[2]=v[6],d[3]=v[1],d[4]=v[4],d[5]=v[7],d[6]=v[2],d[7]=v[5],d[8]=v[8],this}setUvTransform(d,v,A,C,w,T,R){const G=Math.cos(w),I=Math.sin(w);return this.set(A*G,A*I,-A*(G*T+I*R)+T+d,-C*I,C*G,-C*(-I*T+G*R)+R+v,0,0,1),this}scale(d,v){return this.premultiply(_m3.makeScale(d,v)),this}rotate(d){return this.premultiply(_m3.makeRotation(-d)),this}translate(d,v){return this.premultiply(_m3.makeTranslation(d,v)),this}makeTranslation(d,v){return d.isVector2?this.set(1,0,d.x,0,1,d.y,0,0,1):this.set(1,0,d,0,1,v,0,0,1),this}makeRotation(d){const v=Math.cos(d),A=Math.sin(d);return this.set(v,-A,0,A,v,0,0,0,1),this}makeScale(d,v){return this.set(d,0,0,0,v,0,0,0,1),this}equals(d){const v=this.elements,A=d.elements;for(let C=0;C<9;C++)if(v[C]!==A[C])return!1;return!0}fromArray(d,v=0){for(let A=0;A<9;A++)this.elements[A]=d[A+v];return this}toArray(d=[],v=0){const A=this.elements;return d[v]=A[0],d[v+1]=A[1],d[v+2]=A[2],d[v+3]=A[3],d[v+4]=A[4],d[v+5]=A[5],d[v+6]=A[6],d[v+7]=A[7],d[v+8]=A[8],d}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(_){for(let d=_.length-1;d>=0;--d)if(_[d]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(_,d){return new TYPED_ARRAYS[_](d)}function createElementNS(_){return document.createElementNS("http://www.w3.org/1999/xhtml",_)}function createCanvasElement(){const _=createElementNS("canvas");return _.style.display="block",_}const _cache={};function warnOnce(_){_ in _cache||(_cache[_]=!0,console.warn(_))}function probeAsync(_,d,v){return new Promise(function(A,C){function w(){switch(_.clientWaitSync(d,_.SYNC_FLUSH_COMMANDS_BIT,0)){case _.WAIT_FAILED:C();break;case _.TIMEOUT_EXPIRED:setTimeout(w,v);break;default:A()}}setTimeout(w,v)})}const LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const _={enabled:!0,workingColorSpace:LinearSRGBColorSpace$1,spaces:{},convert:function(C,w,T){return this.enabled===!1||w===T||!w||!T||(this.spaces[w].transfer===SRGBTransfer&&(C.r=SRGBToLinear(C.r),C.g=SRGBToLinear(C.g),C.b=SRGBToLinear(C.b)),this.spaces[w].primaries!==this.spaces[T].primaries&&(C.applyMatrix3(this.spaces[w].toXYZ),C.applyMatrix3(this.spaces[T].fromXYZ)),this.spaces[T].transfer===SRGBTransfer&&(C.r=LinearToSRGB(C.r),C.g=LinearToSRGB(C.g),C.b=LinearToSRGB(C.b))),C},workingToColorSpace:function(C,w){return this.convert(C,this.workingColorSpace,w)},colorSpaceToWorking:function(C,w){return this.convert(C,w,this.workingColorSpace)},getPrimaries:function(C){return this.spaces[C].primaries},getTransfer:function(C){return C===NoColorSpace?LinearTransfer:this.spaces[C].transfer},getLuminanceCoefficients:function(C,w=this.workingColorSpace){return C.fromArray(this.spaces[w].luminanceCoefficients)},define:function(C){Object.assign(this.spaces,C)},_getMatrix:function(C,w,T){return C.copy(this.spaces[w].toXYZ).multiply(this.spaces[T].fromXYZ)},_getDrawingBufferColorSpace:function(C){return this.spaces[C].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(C=this.workingColorSpace){return this.spaces[C].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(C,w){return warnOnce("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),_.workingToColorSpace(C,w)},toWorkingColorSpace:function(C,w){return warnOnce("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),_.colorSpaceToWorking(C,w)}},d=[.64,.33,.3,.6,.15,.06],v=[.2126,.7152,.0722],A=[.3127,.329];return _.define({[LinearSRGBColorSpace$1]:{primaries:d,whitePoint:A,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:v,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace$1},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}},[SRGBColorSpace$1]:{primaries:d,whitePoint:A,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:v,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}}}),_}const ColorManagement=createColorManagement();function SRGBToLinear(_){return _<.04045?_*.0773993808:Math.pow(_*.9478672986+.0521327014,2.4)}function LinearToSRGB(_){return _<.0031308?_*12.92:1.055*Math.pow(_,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(d,v="image/png"){if(/^data:/i.test(d.src)||typeof HTMLCanvasElement>"u")return d.src;let A;if(d instanceof HTMLCanvasElement)A=d;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=d.width,_canvas.height=d.height;const C=_canvas.getContext("2d");d instanceof ImageData?C.putImageData(d,0,0):C.drawImage(d,0,0,d.width,d.height),A=_canvas}return A.toDataURL(v)}static sRGBToLinear(d){if(typeof HTMLImageElement<"u"&&d instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&d instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&d instanceof ImageBitmap){const v=createElementNS("canvas");v.width=d.width,v.height=d.height;const A=v.getContext("2d");A.drawImage(d,0,0,d.width,d.height);const C=A.getImageData(0,0,d.width,d.height),w=C.data;for(let T=0;T<w.length;T++)w[T]=SRGBToLinear(w[T]/255)*255;return A.putImageData(C,0,0),v}else if(d.data){const v=d.data.slice(0);for(let A=0;A<v.length;A++)v instanceof Uint8Array||v instanceof Uint8ClampedArray?v[A]=Math.floor(SRGBToLinear(v[A]/255)*255):v[A]=SRGBToLinear(v[A]);return{data:v,width:d.width,height:d.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),d}}let _sourceId=0;class Source{constructor(d=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID$1(),this.data=d,this.dataReady=!0,this.version=0}getSize(d){const v=this.data;return v instanceof HTMLVideoElement?d.set(v.videoWidth,v.videoHeight,0):v instanceof VideoFrame?d.set(v.displayHeight,v.displayWidth,0):v!==null?d.set(v.width,v.height,v.depth||0):d.set(0,0,0),d}set needsUpdate(d){d===!0&&this.version++}toJSON(d){const v=d===void 0||typeof d=="string";if(!v&&d.images[this.uuid]!==void 0)return d.images[this.uuid];const A={uuid:this.uuid,url:""},C=this.data;if(C!==null){let w;if(Array.isArray(C)){w=[];for(let T=0,R=C.length;T<R;T++)C[T].isDataTexture?w.push(serializeImage(C[T].image)):w.push(serializeImage(C[T]))}else w=serializeImage(C);A.url=w}return v||(d.images[this.uuid]=A),A}}function serializeImage(_){return typeof HTMLImageElement<"u"&&_ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&_ instanceof ImageBitmap?ImageUtils.getDataURL(_):_.data?{data:Array.from(_.data),width:_.width,height:_.height,type:_.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;const _tempVec3=new Vector3;class Texture extends EventDispatcher{constructor(d=Texture.DEFAULT_IMAGE,v=Texture.DEFAULT_MAPPING,A=ClampToEdgeWrapping,C=ClampToEdgeWrapping,w=LinearFilter,T=LinearMipmapLinearFilter,R=RGBAFormat,G=UnsignedByteType,I=Texture.DEFAULT_ANISOTROPY,z=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(d),this.mipmaps=[],this.mapping=v,this.channel=0,this.wrapS=A,this.wrapT=C,this.magFilter=w,this.minFilter=T,this.anisotropy=I,this.format=R,this.internalFormat=null,this.type=G,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=z,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(d&&d.depth&&d.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_tempVec3).x}get height(){return this.source.getSize(_tempVec3).y}get depth(){return this.source.getSize(_tempVec3).z}get image(){return this.source.data}set image(d=null){this.source.data=d}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(d,v){this.updateRanges.push({start:d,count:v})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(d){return this.name=d.name,this.source=d.source,this.mipmaps=d.mipmaps.slice(0),this.mapping=d.mapping,this.channel=d.channel,this.wrapS=d.wrapS,this.wrapT=d.wrapT,this.magFilter=d.magFilter,this.minFilter=d.minFilter,this.anisotropy=d.anisotropy,this.format=d.format,this.internalFormat=d.internalFormat,this.type=d.type,this.offset.copy(d.offset),this.repeat.copy(d.repeat),this.center.copy(d.center),this.rotation=d.rotation,this.matrixAutoUpdate=d.matrixAutoUpdate,this.matrix.copy(d.matrix),this.generateMipmaps=d.generateMipmaps,this.premultiplyAlpha=d.premultiplyAlpha,this.flipY=d.flipY,this.unpackAlignment=d.unpackAlignment,this.colorSpace=d.colorSpace,this.renderTarget=d.renderTarget,this.isRenderTargetTexture=d.isRenderTargetTexture,this.isArrayTexture=d.isArrayTexture,this.userData=JSON.parse(JSON.stringify(d.userData)),this.needsUpdate=!0,this}setValues(d){for(const v in d){const A=d[v];if(A===void 0){console.warn(`THREE.Texture.setValues(): parameter '${v}' has value of undefined.`);continue}const C=this[v];if(C===void 0){console.warn(`THREE.Texture.setValues(): property '${v}' does not exist.`);continue}C&&A&&C.isVector2&&A.isVector2||C&&A&&C.isVector3&&A.isVector3||C&&A&&C.isMatrix3&&A.isMatrix3?C.copy(A):this[v]=A}}toJSON(d){const v=d===void 0||typeof d=="string";if(!v&&d.textures[this.uuid]!==void 0)return d.textures[this.uuid];const A={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(d).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(A.userData=this.userData),v||(d.textures[this.uuid]=A),A}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(d){if(this.mapping!==UVMapping)return d;if(d.applyMatrix3(this.matrix),d.x<0||d.x>1)switch(this.wrapS){case RepeatWrapping:d.x=d.x-Math.floor(d.x);break;case ClampToEdgeWrapping:d.x=d.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(d.x)%2)===1?d.x=Math.ceil(d.x)-d.x:d.x=d.x-Math.floor(d.x);break}if(d.y<0||d.y>1)switch(this.wrapT){case RepeatWrapping:d.y=d.y-Math.floor(d.y);break;case ClampToEdgeWrapping:d.y=d.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(d.y)%2)===1?d.y=Math.ceil(d.y)-d.y:d.y=d.y-Math.floor(d.y);break}return this.flipY&&(d.y=1-d.y),d}set needsUpdate(d){d===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(d){d===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(d=0,v=0,A=0,C=1){Vector4.prototype.isVector4=!0,this.x=d,this.y=v,this.z=A,this.w=C}get width(){return this.z}set width(d){this.z=d}get height(){return this.w}set height(d){this.w=d}set(d,v,A,C){return this.x=d,this.y=v,this.z=A,this.w=C,this}setScalar(d){return this.x=d,this.y=d,this.z=d,this.w=d,this}setX(d){return this.x=d,this}setY(d){return this.y=d,this}setZ(d){return this.z=d,this}setW(d){return this.w=d,this}setComponent(d,v){switch(d){case 0:this.x=v;break;case 1:this.y=v;break;case 2:this.z=v;break;case 3:this.w=v;break;default:throw new Error("index is out of range: "+d)}return this}getComponent(d){switch(d){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+d)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(d){return this.x=d.x,this.y=d.y,this.z=d.z,this.w=d.w!==void 0?d.w:1,this}add(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z,this.w+=d.w,this}addScalar(d){return this.x+=d,this.y+=d,this.z+=d,this.w+=d,this}addVectors(d,v){return this.x=d.x+v.x,this.y=d.y+v.y,this.z=d.z+v.z,this.w=d.w+v.w,this}addScaledVector(d,v){return this.x+=d.x*v,this.y+=d.y*v,this.z+=d.z*v,this.w+=d.w*v,this}sub(d){return this.x-=d.x,this.y-=d.y,this.z-=d.z,this.w-=d.w,this}subScalar(d){return this.x-=d,this.y-=d,this.z-=d,this.w-=d,this}subVectors(d,v){return this.x=d.x-v.x,this.y=d.y-v.y,this.z=d.z-v.z,this.w=d.w-v.w,this}multiply(d){return this.x*=d.x,this.y*=d.y,this.z*=d.z,this.w*=d.w,this}multiplyScalar(d){return this.x*=d,this.y*=d,this.z*=d,this.w*=d,this}applyMatrix4(d){const v=this.x,A=this.y,C=this.z,w=this.w,T=d.elements;return this.x=T[0]*v+T[4]*A+T[8]*C+T[12]*w,this.y=T[1]*v+T[5]*A+T[9]*C+T[13]*w,this.z=T[2]*v+T[6]*A+T[10]*C+T[14]*w,this.w=T[3]*v+T[7]*A+T[11]*C+T[15]*w,this}divide(d){return this.x/=d.x,this.y/=d.y,this.z/=d.z,this.w/=d.w,this}divideScalar(d){return this.multiplyScalar(1/d)}setAxisAngleFromQuaternion(d){this.w=2*Math.acos(d.w);const v=Math.sqrt(1-d.w*d.w);return v<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=d.x/v,this.y=d.y/v,this.z=d.z/v),this}setAxisAngleFromRotationMatrix(d){let v,A,C,w;const G=d.elements,I=G[0],z=G[4],H=G[8],Y=G[1],ee=G[5],ie=G[9],oe=G[2],se=G[6],re=G[10];if(Math.abs(z-Y)<.01&&Math.abs(H-oe)<.01&&Math.abs(ie-se)<.01){if(Math.abs(z+Y)<.1&&Math.abs(H+oe)<.1&&Math.abs(ie+se)<.1&&Math.abs(I+ee+re-3)<.1)return this.set(1,0,0,0),this;v=Math.PI;const ue=(I+1)/2,ge=(ee+1)/2,ye=(re+1)/2,be=(z+Y)/4,ve=(H+oe)/4,Me=(ie+se)/4;return ue>ge&&ue>ye?ue<.01?(A=0,C=.707106781,w=.707106781):(A=Math.sqrt(ue),C=be/A,w=ve/A):ge>ye?ge<.01?(A=.707106781,C=0,w=.707106781):(C=Math.sqrt(ge),A=be/C,w=Me/C):ye<.01?(A=.707106781,C=.707106781,w=0):(w=Math.sqrt(ye),A=ve/w,C=Me/w),this.set(A,C,w,v),this}let fe=Math.sqrt((se-ie)*(se-ie)+(H-oe)*(H-oe)+(Y-z)*(Y-z));return Math.abs(fe)<.001&&(fe=1),this.x=(se-ie)/fe,this.y=(H-oe)/fe,this.z=(Y-z)/fe,this.w=Math.acos((I+ee+re-1)/2),this}setFromMatrixPosition(d){const v=d.elements;return this.x=v[12],this.y=v[13],this.z=v[14],this.w=v[15],this}min(d){return this.x=Math.min(this.x,d.x),this.y=Math.min(this.y,d.y),this.z=Math.min(this.z,d.z),this.w=Math.min(this.w,d.w),this}max(d){return this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this.z=Math.max(this.z,d.z),this.w=Math.max(this.w,d.w),this}clamp(d,v){return this.x=clamp$2(this.x,d.x,v.x),this.y=clamp$2(this.y,d.y,v.y),this.z=clamp$2(this.z,d.z,v.z),this.w=clamp$2(this.w,d.w,v.w),this}clampScalar(d,v){return this.x=clamp$2(this.x,d,v),this.y=clamp$2(this.y,d,v),this.z=clamp$2(this.z,d,v),this.w=clamp$2(this.w,d,v),this}clampLength(d,v){const A=this.length();return this.divideScalar(A||1).multiplyScalar(clamp$2(A,d,v))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(d){return this.normalize().multiplyScalar(d)}lerp(d,v){return this.x+=(d.x-this.x)*v,this.y+=(d.y-this.y)*v,this.z+=(d.z-this.z)*v,this.w+=(d.w-this.w)*v,this}lerpVectors(d,v,A){return this.x=d.x+(v.x-d.x)*A,this.y=d.y+(v.y-d.y)*A,this.z=d.z+(v.z-d.z)*A,this.w=d.w+(v.w-d.w)*A,this}equals(d){return d.x===this.x&&d.y===this.y&&d.z===this.z&&d.w===this.w}fromArray(d,v=0){return this.x=d[v],this.y=d[v+1],this.z=d[v+2],this.w=d[v+3],this}toArray(d=[],v=0){return d[v]=this.x,d[v+1]=this.y,d[v+2]=this.z,d[v+3]=this.w,d}fromBufferAttribute(d,v){return this.x=d.getX(v),this.y=d.getY(v),this.z=d.getZ(v),this.w=d.getW(v),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(d=1,v=1,A={}){super(),A=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},A),this.isRenderTarget=!0,this.width=d,this.height=v,this.depth=A.depth,this.scissor=new Vector4(0,0,d,v),this.scissorTest=!1,this.viewport=new Vector4(0,0,d,v);const C={width:d,height:v,depth:A.depth},w=new Texture(C);this.textures=[];const T=A.count;for(let R=0;R<T;R++)this.textures[R]=w.clone(),this.textures[R].isRenderTargetTexture=!0,this.textures[R].renderTarget=this;this._setTextureOptions(A),this.depthBuffer=A.depthBuffer,this.stencilBuffer=A.stencilBuffer,this.resolveDepthBuffer=A.resolveDepthBuffer,this.resolveStencilBuffer=A.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=A.depthTexture,this.samples=A.samples,this.multiview=A.multiview}_setTextureOptions(d={}){const v={minFilter:LinearFilter,generateMipmaps:!1,flipY:!1,internalFormat:null};d.mapping!==void 0&&(v.mapping=d.mapping),d.wrapS!==void 0&&(v.wrapS=d.wrapS),d.wrapT!==void 0&&(v.wrapT=d.wrapT),d.wrapR!==void 0&&(v.wrapR=d.wrapR),d.magFilter!==void 0&&(v.magFilter=d.magFilter),d.minFilter!==void 0&&(v.minFilter=d.minFilter),d.format!==void 0&&(v.format=d.format),d.type!==void 0&&(v.type=d.type),d.anisotropy!==void 0&&(v.anisotropy=d.anisotropy),d.colorSpace!==void 0&&(v.colorSpace=d.colorSpace),d.flipY!==void 0&&(v.flipY=d.flipY),d.generateMipmaps!==void 0&&(v.generateMipmaps=d.generateMipmaps),d.internalFormat!==void 0&&(v.internalFormat=d.internalFormat);for(let A=0;A<this.textures.length;A++)this.textures[A].setValues(v)}get texture(){return this.textures[0]}set texture(d){this.textures[0]=d}set depthTexture(d){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),d!==null&&(d.renderTarget=this),this._depthTexture=d}get depthTexture(){return this._depthTexture}setSize(d,v,A=1){if(this.width!==d||this.height!==v||this.depth!==A){this.width=d,this.height=v,this.depth=A;for(let C=0,w=this.textures.length;C<w;C++)this.textures[C].image.width=d,this.textures[C].image.height=v,this.textures[C].image.depth=A,this.textures[C].isArrayTexture=this.textures[C].image.depth>1;this.dispose()}this.viewport.set(0,0,d,v),this.scissor.set(0,0,d,v)}clone(){return new this.constructor().copy(this)}copy(d){this.width=d.width,this.height=d.height,this.depth=d.depth,this.scissor.copy(d.scissor),this.scissorTest=d.scissorTest,this.viewport.copy(d.viewport),this.textures.length=0;for(let v=0,A=d.textures.length;v<A;v++){this.textures[v]=d.textures[v].clone(),this.textures[v].isRenderTargetTexture=!0,this.textures[v].renderTarget=this;const C=Object.assign({},d.textures[v].image);this.textures[v].source=new Source(C)}return this.depthBuffer=d.depthBuffer,this.stencilBuffer=d.stencilBuffer,this.resolveDepthBuffer=d.resolveDepthBuffer,this.resolveStencilBuffer=d.resolveStencilBuffer,d.depthTexture!==null&&(this.depthTexture=d.depthTexture.clone()),this.samples=d.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(d=1,v=1,A={}){super(d,v,A),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(d=null,v=1,A=1,C=1){super(null),this.isDataArrayTexture=!0,this.image={data:d,width:v,height:A,depth:C},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(d){this.layerUpdates.add(d)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(d=1,v=1,A=1,C={}){super(d,v,C),this.isWebGLArrayRenderTarget=!0,this.depth=A,this.texture=new DataArrayTexture(null,d,v,A),this._setTextureOptions(C),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(d=null,v=1,A=1,C=1){super(null),this.isData3DTexture=!0,this.image={data:d,width:v,height:A,depth:C},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(d=1,v=1,A=1,C={}){super(d,v,C),this.isWebGL3DRenderTarget=!0,this.depth=A,this.texture=new Data3DTexture(null,d,v,A),this._setTextureOptions(C),this.texture.isRenderTargetTexture=!0}}class Box3{constructor(d=new Vector3(1/0,1/0,1/0),v=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=d,this.max=v}set(d,v){return this.min.copy(d),this.max.copy(v),this}setFromArray(d){this.makeEmpty();for(let v=0,A=d.length;v<A;v+=3)this.expandByPoint(_vector$b.fromArray(d,v));return this}setFromBufferAttribute(d){this.makeEmpty();for(let v=0,A=d.count;v<A;v++)this.expandByPoint(_vector$b.fromBufferAttribute(d,v));return this}setFromPoints(d){this.makeEmpty();for(let v=0,A=d.length;v<A;v++)this.expandByPoint(d[v]);return this}setFromCenterAndSize(d,v){const A=_vector$b.copy(v).multiplyScalar(.5);return this.min.copy(d).sub(A),this.max.copy(d).add(A),this}setFromObject(d,v=!1){return this.makeEmpty(),this.expandByObject(d,v)}clone(){return new this.constructor().copy(this)}copy(d){return this.min.copy(d.min),this.max.copy(d.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(d){return this.isEmpty()?d.set(0,0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(d){return this.isEmpty()?d.set(0,0,0):d.subVectors(this.max,this.min)}expandByPoint(d){return this.min.min(d),this.max.max(d),this}expandByVector(d){return this.min.sub(d),this.max.add(d),this}expandByScalar(d){return this.min.addScalar(-d),this.max.addScalar(d),this}expandByObject(d,v=!1){d.updateWorldMatrix(!1,!1);const A=d.geometry;if(A!==void 0){const w=A.getAttribute("position");if(v===!0&&w!==void 0&&d.isInstancedMesh!==!0)for(let T=0,R=w.count;T<R;T++)d.isMesh===!0?d.getVertexPosition(T,_vector$b):_vector$b.fromBufferAttribute(w,T),_vector$b.applyMatrix4(d.matrixWorld),this.expandByPoint(_vector$b);else d.boundingBox!==void 0?(d.boundingBox===null&&d.computeBoundingBox(),_box$4.copy(d.boundingBox)):(A.boundingBox===null&&A.computeBoundingBox(),_box$4.copy(A.boundingBox)),_box$4.applyMatrix4(d.matrixWorld),this.union(_box$4)}const C=d.children;for(let w=0,T=C.length;w<T;w++)this.expandByObject(C[w],v);return this}containsPoint(d){return d.x>=this.min.x&&d.x<=this.max.x&&d.y>=this.min.y&&d.y<=this.max.y&&d.z>=this.min.z&&d.z<=this.max.z}containsBox(d){return this.min.x<=d.min.x&&d.max.x<=this.max.x&&this.min.y<=d.min.y&&d.max.y<=this.max.y&&this.min.z<=d.min.z&&d.max.z<=this.max.z}getParameter(d,v){return v.set((d.x-this.min.x)/(this.max.x-this.min.x),(d.y-this.min.y)/(this.max.y-this.min.y),(d.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(d){return d.max.x>=this.min.x&&d.min.x<=this.max.x&&d.max.y>=this.min.y&&d.min.y<=this.max.y&&d.max.z>=this.min.z&&d.min.z<=this.max.z}intersectsSphere(d){return this.clampPoint(d.center,_vector$b),_vector$b.distanceToSquared(d.center)<=d.radius*d.radius}intersectsPlane(d){let v,A;return d.normal.x>0?(v=d.normal.x*this.min.x,A=d.normal.x*this.max.x):(v=d.normal.x*this.max.x,A=d.normal.x*this.min.x),d.normal.y>0?(v+=d.normal.y*this.min.y,A+=d.normal.y*this.max.y):(v+=d.normal.y*this.max.y,A+=d.normal.y*this.min.y),d.normal.z>0?(v+=d.normal.z*this.min.z,A+=d.normal.z*this.max.z):(v+=d.normal.z*this.max.z,A+=d.normal.z*this.min.z),v<=-d.constant&&A>=-d.constant}intersectsTriangle(d){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(d.a,_center),_v1$7.subVectors(d.b,_center),_v2$4.subVectors(d.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let v=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(v,_v0$2,_v1$7,_v2$4,_extents)||(v=[1,0,0,0,1,0,0,0,1],!satForAxes(v,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),v=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(v,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(d,v){return v.copy(d).clamp(this.min,this.max)}distanceToPoint(d){return this.clampPoint(d,_vector$b).distanceTo(d)}getBoundingSphere(d){return this.isEmpty()?d.makeEmpty():(this.getCenter(d.center),d.radius=this.getSize(_vector$b).length()*.5),d}intersect(d){return this.min.max(d.min),this.max.min(d.max),this.isEmpty()&&this.makeEmpty(),this}union(d){return this.min.min(d.min),this.max.max(d.max),this}applyMatrix4(d){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(d),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(d),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(d),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(d),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(d),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(d),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(d),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(d),this.setFromPoints(_points),this)}translate(d){return this.min.add(d),this.max.add(d),this}equals(d){return d.min.equals(this.min)&&d.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(d){return this.min.fromArray(d.min),this.max.fromArray(d.max),this}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(_,d,v,A,C){for(let w=0,T=_.length-3;w<=T;w+=3){_testAxis.fromArray(_,w);const R=C.x*Math.abs(_testAxis.x)+C.y*Math.abs(_testAxis.y)+C.z*Math.abs(_testAxis.z),G=d.dot(_testAxis),I=v.dot(_testAxis),z=A.dot(_testAxis);if(Math.max(-Math.max(G,I,z),Math.min(G,I,z))>R)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(d=new Vector3,v=-1){this.isSphere=!0,this.center=d,this.radius=v}set(d,v){return this.center.copy(d),this.radius=v,this}setFromPoints(d,v){const A=this.center;v!==void 0?A.copy(v):_box$3.setFromPoints(d).getCenter(A);let C=0;for(let w=0,T=d.length;w<T;w++)C=Math.max(C,A.distanceToSquared(d[w]));return this.radius=Math.sqrt(C),this}copy(d){return this.center.copy(d.center),this.radius=d.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(d){return d.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(d){return d.distanceTo(this.center)-this.radius}intersectsSphere(d){const v=this.radius+d.radius;return d.center.distanceToSquared(this.center)<=v*v}intersectsBox(d){return d.intersectsSphere(this)}intersectsPlane(d){return Math.abs(d.distanceToPoint(this.center))<=this.radius}clampPoint(d,v){const A=this.center.distanceToSquared(d);return v.copy(d),A>this.radius*this.radius&&(v.sub(this.center).normalize(),v.multiplyScalar(this.radius).add(this.center)),v}getBoundingBox(d){return this.isEmpty()?(d.makeEmpty(),d):(d.set(this.center,this.center),d.expandByScalar(this.radius),d)}applyMatrix4(d){return this.center.applyMatrix4(d),this.radius=this.radius*d.getMaxScaleOnAxis(),this}translate(d){return this.center.add(d),this}expandByPoint(d){if(this.isEmpty())return this.center.copy(d),this.radius=0,this;_v1$6.subVectors(d,this.center);const v=_v1$6.lengthSq();if(v>this.radius*this.radius){const A=Math.sqrt(v),C=(A-this.radius)*.5;this.center.addScaledVector(_v1$6,C/A),this.radius+=C}return this}union(d){return d.isEmpty()?this:this.isEmpty()?(this.copy(d),this):(this.center.equals(d.center)===!0?this.radius=Math.max(this.radius,d.radius):(_v2$3.subVectors(d.center,this.center).setLength(d.radius),this.expandByPoint(_v1$6.copy(d.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(d.center).sub(_v2$3))),this)}equals(d){return d.center.equals(this.center)&&d.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(d){return this.radius=d.radius,this.center.fromArray(d.center),this}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(d=new Vector3,v=new Vector3(0,0,-1)){this.origin=d,this.direction=v}set(d,v){return this.origin.copy(d),this.direction.copy(v),this}copy(d){return this.origin.copy(d.origin),this.direction.copy(d.direction),this}at(d,v){return v.copy(this.origin).addScaledVector(this.direction,d)}lookAt(d){return this.direction.copy(d).sub(this.origin).normalize(),this}recast(d){return this.origin.copy(this.at(d,_vector$a)),this}closestPointToPoint(d,v){v.subVectors(d,this.origin);const A=v.dot(this.direction);return A<0?v.copy(this.origin):v.copy(this.origin).addScaledVector(this.direction,A)}distanceToPoint(d){return Math.sqrt(this.distanceSqToPoint(d))}distanceSqToPoint(d){const v=_vector$a.subVectors(d,this.origin).dot(this.direction);return v<0?this.origin.distanceToSquared(d):(_vector$a.copy(this.origin).addScaledVector(this.direction,v),_vector$a.distanceToSquared(d))}distanceSqToSegment(d,v,A,C){_segCenter.copy(d).add(v).multiplyScalar(.5),_segDir.copy(v).sub(d).normalize(),_diff.copy(this.origin).sub(_segCenter);const w=d.distanceTo(v)*.5,T=-this.direction.dot(_segDir),R=_diff.dot(this.direction),G=-_diff.dot(_segDir),I=_diff.lengthSq(),z=Math.abs(1-T*T);let H,Y,ee,ie;if(z>0)if(H=T*G-R,Y=T*R-G,ie=w*z,H>=0)if(Y>=-ie)if(Y<=ie){const oe=1/z;H*=oe,Y*=oe,ee=H*(H+T*Y+2*R)+Y*(T*H+Y+2*G)+I}else Y=w,H=Math.max(0,-(T*Y+R)),ee=-H*H+Y*(Y+2*G)+I;else Y=-w,H=Math.max(0,-(T*Y+R)),ee=-H*H+Y*(Y+2*G)+I;else Y<=-ie?(H=Math.max(0,-(-T*w+R)),Y=H>0?-w:Math.min(Math.max(-w,-G),w),ee=-H*H+Y*(Y+2*G)+I):Y<=ie?(H=0,Y=Math.min(Math.max(-w,-G),w),ee=Y*(Y+2*G)+I):(H=Math.max(0,-(T*w+R)),Y=H>0?w:Math.min(Math.max(-w,-G),w),ee=-H*H+Y*(Y+2*G)+I);else Y=T>0?-w:w,H=Math.max(0,-(T*Y+R)),ee=-H*H+Y*(Y+2*G)+I;return A&&A.copy(this.origin).addScaledVector(this.direction,H),C&&C.copy(_segCenter).addScaledVector(_segDir,Y),ee}intersectSphere(d,v){_vector$a.subVectors(d.center,this.origin);const A=_vector$a.dot(this.direction),C=_vector$a.dot(_vector$a)-A*A,w=d.radius*d.radius;if(C>w)return null;const T=Math.sqrt(w-C),R=A-T,G=A+T;return G<0?null:R<0?this.at(G,v):this.at(R,v)}intersectsSphere(d){return d.radius<0?!1:this.distanceSqToPoint(d.center)<=d.radius*d.radius}distanceToPlane(d){const v=d.normal.dot(this.direction);if(v===0)return d.distanceToPoint(this.origin)===0?0:null;const A=-(this.origin.dot(d.normal)+d.constant)/v;return A>=0?A:null}intersectPlane(d,v){const A=this.distanceToPlane(d);return A===null?null:this.at(A,v)}intersectsPlane(d){const v=d.distanceToPoint(this.origin);return v===0||d.normal.dot(this.direction)*v<0}intersectBox(d,v){let A,C,w,T,R,G;const I=1/this.direction.x,z=1/this.direction.y,H=1/this.direction.z,Y=this.origin;return I>=0?(A=(d.min.x-Y.x)*I,C=(d.max.x-Y.x)*I):(A=(d.max.x-Y.x)*I,C=(d.min.x-Y.x)*I),z>=0?(w=(d.min.y-Y.y)*z,T=(d.max.y-Y.y)*z):(w=(d.max.y-Y.y)*z,T=(d.min.y-Y.y)*z),A>T||w>C||((w>A||isNaN(A))&&(A=w),(T<C||isNaN(C))&&(C=T),H>=0?(R=(d.min.z-Y.z)*H,G=(d.max.z-Y.z)*H):(R=(d.max.z-Y.z)*H,G=(d.min.z-Y.z)*H),A>G||R>C)||((R>A||A!==A)&&(A=R),(G<C||C!==C)&&(C=G),C<0)?null:this.at(A>=0?A:C,v)}intersectsBox(d){return this.intersectBox(d,_vector$a)!==null}intersectTriangle(d,v,A,C,w){_edge1.subVectors(v,d),_edge2.subVectors(A,d),_normal$1.crossVectors(_edge1,_edge2);let T=this.direction.dot(_normal$1),R;if(T>0){if(C)return null;R=1}else if(T<0)R=-1,T=-T;else return null;_diff.subVectors(this.origin,d);const G=R*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(G<0)return null;const I=R*this.direction.dot(_edge1.cross(_diff));if(I<0||G+I>T)return null;const z=-R*_diff.dot(_normal$1);return z<0?null:this.at(z/T,w)}applyMatrix4(d){return this.origin.applyMatrix4(d),this.direction.transformDirection(d),this}equals(d){return d.origin.equals(this.origin)&&d.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(d,v,A,C,w,T,R,G,I,z,H,Y,ee,ie,oe,se){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],d!==void 0&&this.set(d,v,A,C,w,T,R,G,I,z,H,Y,ee,ie,oe,se)}set(d,v,A,C,w,T,R,G,I,z,H,Y,ee,ie,oe,se){const re=this.elements;return re[0]=d,re[4]=v,re[8]=A,re[12]=C,re[1]=w,re[5]=T,re[9]=R,re[13]=G,re[2]=I,re[6]=z,re[10]=H,re[14]=Y,re[3]=ee,re[7]=ie,re[11]=oe,re[15]=se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(d){const v=this.elements,A=d.elements;return v[0]=A[0],v[1]=A[1],v[2]=A[2],v[3]=A[3],v[4]=A[4],v[5]=A[5],v[6]=A[6],v[7]=A[7],v[8]=A[8],v[9]=A[9],v[10]=A[10],v[11]=A[11],v[12]=A[12],v[13]=A[13],v[14]=A[14],v[15]=A[15],this}copyPosition(d){const v=this.elements,A=d.elements;return v[12]=A[12],v[13]=A[13],v[14]=A[14],this}setFromMatrix3(d){const v=d.elements;return this.set(v[0],v[3],v[6],0,v[1],v[4],v[7],0,v[2],v[5],v[8],0,0,0,0,1),this}extractBasis(d,v,A){return d.setFromMatrixColumn(this,0),v.setFromMatrixColumn(this,1),A.setFromMatrixColumn(this,2),this}makeBasis(d,v,A){return this.set(d.x,v.x,A.x,0,d.y,v.y,A.y,0,d.z,v.z,A.z,0,0,0,0,1),this}extractRotation(d){const v=this.elements,A=d.elements,C=1/_v1$5.setFromMatrixColumn(d,0).length(),w=1/_v1$5.setFromMatrixColumn(d,1).length(),T=1/_v1$5.setFromMatrixColumn(d,2).length();return v[0]=A[0]*C,v[1]=A[1]*C,v[2]=A[2]*C,v[3]=0,v[4]=A[4]*w,v[5]=A[5]*w,v[6]=A[6]*w,v[7]=0,v[8]=A[8]*T,v[9]=A[9]*T,v[10]=A[10]*T,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,this}makeRotationFromEuler(d){const v=this.elements,A=d.x,C=d.y,w=d.z,T=Math.cos(A),R=Math.sin(A),G=Math.cos(C),I=Math.sin(C),z=Math.cos(w),H=Math.sin(w);if(d.order==="XYZ"){const Y=T*z,ee=T*H,ie=R*z,oe=R*H;v[0]=G*z,v[4]=-G*H,v[8]=I,v[1]=ee+ie*I,v[5]=Y-oe*I,v[9]=-R*G,v[2]=oe-Y*I,v[6]=ie+ee*I,v[10]=T*G}else if(d.order==="YXZ"){const Y=G*z,ee=G*H,ie=I*z,oe=I*H;v[0]=Y+oe*R,v[4]=ie*R-ee,v[8]=T*I,v[1]=T*H,v[5]=T*z,v[9]=-R,v[2]=ee*R-ie,v[6]=oe+Y*R,v[10]=T*G}else if(d.order==="ZXY"){const Y=G*z,ee=G*H,ie=I*z,oe=I*H;v[0]=Y-oe*R,v[4]=-T*H,v[8]=ie+ee*R,v[1]=ee+ie*R,v[5]=T*z,v[9]=oe-Y*R,v[2]=-T*I,v[6]=R,v[10]=T*G}else if(d.order==="ZYX"){const Y=T*z,ee=T*H,ie=R*z,oe=R*H;v[0]=G*z,v[4]=ie*I-ee,v[8]=Y*I+oe,v[1]=G*H,v[5]=oe*I+Y,v[9]=ee*I-ie,v[2]=-I,v[6]=R*G,v[10]=T*G}else if(d.order==="YZX"){const Y=T*G,ee=T*I,ie=R*G,oe=R*I;v[0]=G*z,v[4]=oe-Y*H,v[8]=ie*H+ee,v[1]=H,v[5]=T*z,v[9]=-R*z,v[2]=-I*z,v[6]=ee*H+ie,v[10]=Y-oe*H}else if(d.order==="XZY"){const Y=T*G,ee=T*I,ie=R*G,oe=R*I;v[0]=G*z,v[4]=-H,v[8]=I*z,v[1]=Y*H+oe,v[5]=T*z,v[9]=ee*H-ie,v[2]=ie*H-ee,v[6]=R*z,v[10]=oe*H+Y}return v[3]=0,v[7]=0,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,this}makeRotationFromQuaternion(d){return this.compose(_zero,d,_one)}lookAt(d,v,A){const C=this.elements;return _z.subVectors(d,v),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(A,_z),_x.lengthSq()===0&&(Math.abs(A.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(A,_z)),_x.normalize(),_y.crossVectors(_z,_x),C[0]=_x.x,C[4]=_y.x,C[8]=_z.x,C[1]=_x.y,C[5]=_y.y,C[9]=_z.y,C[2]=_x.z,C[6]=_y.z,C[10]=_z.z,this}multiply(d){return this.multiplyMatrices(this,d)}premultiply(d){return this.multiplyMatrices(d,this)}multiplyMatrices(d,v){const A=d.elements,C=v.elements,w=this.elements,T=A[0],R=A[4],G=A[8],I=A[12],z=A[1],H=A[5],Y=A[9],ee=A[13],ie=A[2],oe=A[6],se=A[10],re=A[14],fe=A[3],ue=A[7],ge=A[11],ye=A[15],be=C[0],ve=C[4],Me=C[8],we=C[12],Be=C[1],De=C[5],Fe=C[9],Oe=C[13],Ge=C[2],ze=C[6],je=C[10],He=C[14],Xe=C[3],$e=C[7],We=C[11],nt=C[15];return w[0]=T*be+R*Be+G*Ge+I*Xe,w[4]=T*ve+R*De+G*ze+I*$e,w[8]=T*Me+R*Fe+G*je+I*We,w[12]=T*we+R*Oe+G*He+I*nt,w[1]=z*be+H*Be+Y*Ge+ee*Xe,w[5]=z*ve+H*De+Y*ze+ee*$e,w[9]=z*Me+H*Fe+Y*je+ee*We,w[13]=z*we+H*Oe+Y*He+ee*nt,w[2]=ie*be+oe*Be+se*Ge+re*Xe,w[6]=ie*ve+oe*De+se*ze+re*$e,w[10]=ie*Me+oe*Fe+se*je+re*We,w[14]=ie*we+oe*Oe+se*He+re*nt,w[3]=fe*be+ue*Be+ge*Ge+ye*Xe,w[7]=fe*ve+ue*De+ge*ze+ye*$e,w[11]=fe*Me+ue*Fe+ge*je+ye*We,w[15]=fe*we+ue*Oe+ge*He+ye*nt,this}multiplyScalar(d){const v=this.elements;return v[0]*=d,v[4]*=d,v[8]*=d,v[12]*=d,v[1]*=d,v[5]*=d,v[9]*=d,v[13]*=d,v[2]*=d,v[6]*=d,v[10]*=d,v[14]*=d,v[3]*=d,v[7]*=d,v[11]*=d,v[15]*=d,this}determinant(){const d=this.elements,v=d[0],A=d[4],C=d[8],w=d[12],T=d[1],R=d[5],G=d[9],I=d[13],z=d[2],H=d[6],Y=d[10],ee=d[14],ie=d[3],oe=d[7],se=d[11],re=d[15];return ie*(+w*G*H-C*I*H-w*R*Y+A*I*Y+C*R*ee-A*G*ee)+oe*(+v*G*ee-v*I*Y+w*T*Y-C*T*ee+C*I*z-w*G*z)+se*(+v*I*H-v*R*ee-w*T*H+A*T*ee+w*R*z-A*I*z)+re*(-C*R*z-v*G*H+v*R*Y+C*T*H-A*T*Y+A*G*z)}transpose(){const d=this.elements;let v;return v=d[1],d[1]=d[4],d[4]=v,v=d[2],d[2]=d[8],d[8]=v,v=d[6],d[6]=d[9],d[9]=v,v=d[3],d[3]=d[12],d[12]=v,v=d[7],d[7]=d[13],d[13]=v,v=d[11],d[11]=d[14],d[14]=v,this}setPosition(d,v,A){const C=this.elements;return d.isVector3?(C[12]=d.x,C[13]=d.y,C[14]=d.z):(C[12]=d,C[13]=v,C[14]=A),this}invert(){const d=this.elements,v=d[0],A=d[1],C=d[2],w=d[3],T=d[4],R=d[5],G=d[6],I=d[7],z=d[8],H=d[9],Y=d[10],ee=d[11],ie=d[12],oe=d[13],se=d[14],re=d[15],fe=H*se*I-oe*Y*I+oe*G*ee-R*se*ee-H*G*re+R*Y*re,ue=ie*Y*I-z*se*I-ie*G*ee+T*se*ee+z*G*re-T*Y*re,ge=z*oe*I-ie*H*I+ie*R*ee-T*oe*ee-z*R*re+T*H*re,ye=ie*H*G-z*oe*G-ie*R*Y+T*oe*Y+z*R*se-T*H*se,be=v*fe+A*ue+C*ge+w*ye;if(be===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ve=1/be;return d[0]=fe*ve,d[1]=(oe*Y*w-H*se*w-oe*C*ee+A*se*ee+H*C*re-A*Y*re)*ve,d[2]=(R*se*w-oe*G*w+oe*C*I-A*se*I-R*C*re+A*G*re)*ve,d[3]=(H*G*w-R*Y*w-H*C*I+A*Y*I+R*C*ee-A*G*ee)*ve,d[4]=ue*ve,d[5]=(z*se*w-ie*Y*w+ie*C*ee-v*se*ee-z*C*re+v*Y*re)*ve,d[6]=(ie*G*w-T*se*w-ie*C*I+v*se*I+T*C*re-v*G*re)*ve,d[7]=(T*Y*w-z*G*w+z*C*I-v*Y*I-T*C*ee+v*G*ee)*ve,d[8]=ge*ve,d[9]=(ie*H*w-z*oe*w-ie*A*ee+v*oe*ee+z*A*re-v*H*re)*ve,d[10]=(T*oe*w-ie*R*w+ie*A*I-v*oe*I-T*A*re+v*R*re)*ve,d[11]=(z*R*w-T*H*w-z*A*I+v*H*I+T*A*ee-v*R*ee)*ve,d[12]=ye*ve,d[13]=(z*oe*C-ie*H*C+ie*A*Y-v*oe*Y-z*A*se+v*H*se)*ve,d[14]=(ie*R*C-T*oe*C-ie*A*G+v*oe*G+T*A*se-v*R*se)*ve,d[15]=(T*H*C-z*R*C+z*A*G-v*H*G-T*A*Y+v*R*Y)*ve,this}scale(d){const v=this.elements,A=d.x,C=d.y,w=d.z;return v[0]*=A,v[4]*=C,v[8]*=w,v[1]*=A,v[5]*=C,v[9]*=w,v[2]*=A,v[6]*=C,v[10]*=w,v[3]*=A,v[7]*=C,v[11]*=w,this}getMaxScaleOnAxis(){const d=this.elements,v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],A=d[4]*d[4]+d[5]*d[5]+d[6]*d[6],C=d[8]*d[8]+d[9]*d[9]+d[10]*d[10];return Math.sqrt(Math.max(v,A,C))}makeTranslation(d,v,A){return d.isVector3?this.set(1,0,0,d.x,0,1,0,d.y,0,0,1,d.z,0,0,0,1):this.set(1,0,0,d,0,1,0,v,0,0,1,A,0,0,0,1),this}makeRotationX(d){const v=Math.cos(d),A=Math.sin(d);return this.set(1,0,0,0,0,v,-A,0,0,A,v,0,0,0,0,1),this}makeRotationY(d){const v=Math.cos(d),A=Math.sin(d);return this.set(v,0,A,0,0,1,0,0,-A,0,v,0,0,0,0,1),this}makeRotationZ(d){const v=Math.cos(d),A=Math.sin(d);return this.set(v,-A,0,0,A,v,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(d,v){const A=Math.cos(v),C=Math.sin(v),w=1-A,T=d.x,R=d.y,G=d.z,I=w*T,z=w*R;return this.set(I*T+A,I*R-C*G,I*G+C*R,0,I*R+C*G,z*R+A,z*G-C*T,0,I*G-C*R,z*G+C*T,w*G*G+A,0,0,0,0,1),this}makeScale(d,v,A){return this.set(d,0,0,0,0,v,0,0,0,0,A,0,0,0,0,1),this}makeShear(d,v,A,C,w,T){return this.set(1,A,w,0,d,1,T,0,v,C,1,0,0,0,0,1),this}compose(d,v,A){const C=this.elements,w=v._x,T=v._y,R=v._z,G=v._w,I=w+w,z=T+T,H=R+R,Y=w*I,ee=w*z,ie=w*H,oe=T*z,se=T*H,re=R*H,fe=G*I,ue=G*z,ge=G*H,ye=A.x,be=A.y,ve=A.z;return C[0]=(1-(oe+re))*ye,C[1]=(ee+ge)*ye,C[2]=(ie-ue)*ye,C[3]=0,C[4]=(ee-ge)*be,C[5]=(1-(Y+re))*be,C[6]=(se+fe)*be,C[7]=0,C[8]=(ie+ue)*ve,C[9]=(se-fe)*ve,C[10]=(1-(Y+oe))*ve,C[11]=0,C[12]=d.x,C[13]=d.y,C[14]=d.z,C[15]=1,this}decompose(d,v,A){const C=this.elements;let w=_v1$5.set(C[0],C[1],C[2]).length();const T=_v1$5.set(C[4],C[5],C[6]).length(),R=_v1$5.set(C[8],C[9],C[10]).length();this.determinant()<0&&(w=-w),d.x=C[12],d.y=C[13],d.z=C[14],_m1$2$1.copy(this);const I=1/w,z=1/T,H=1/R;return _m1$2$1.elements[0]*=I,_m1$2$1.elements[1]*=I,_m1$2$1.elements[2]*=I,_m1$2$1.elements[4]*=z,_m1$2$1.elements[5]*=z,_m1$2$1.elements[6]*=z,_m1$2$1.elements[8]*=H,_m1$2$1.elements[9]*=H,_m1$2$1.elements[10]*=H,v.setFromRotationMatrix(_m1$2$1),A.x=w,A.y=T,A.z=R,this}makePerspective(d,v,A,C,w,T,R=WebGLCoordinateSystem,G=!1){const I=this.elements,z=2*w/(v-d),H=2*w/(A-C),Y=(v+d)/(v-d),ee=(A+C)/(A-C);let ie,oe;if(G)ie=w/(T-w),oe=T*w/(T-w);else if(R===WebGLCoordinateSystem)ie=-(T+w)/(T-w),oe=-2*T*w/(T-w);else if(R===WebGPUCoordinateSystem)ie=-T/(T-w),oe=-T*w/(T-w);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+R);return I[0]=z,I[4]=0,I[8]=Y,I[12]=0,I[1]=0,I[5]=H,I[9]=ee,I[13]=0,I[2]=0,I[6]=0,I[10]=ie,I[14]=oe,I[3]=0,I[7]=0,I[11]=-1,I[15]=0,this}makeOrthographic(d,v,A,C,w,T,R=WebGLCoordinateSystem,G=!1){const I=this.elements,z=2/(v-d),H=2/(A-C),Y=-(v+d)/(v-d),ee=-(A+C)/(A-C);let ie,oe;if(G)ie=1/(T-w),oe=T/(T-w);else if(R===WebGLCoordinateSystem)ie=-2/(T-w),oe=-(T+w)/(T-w);else if(R===WebGPUCoordinateSystem)ie=-1/(T-w),oe=-w/(T-w);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+R);return I[0]=z,I[4]=0,I[8]=0,I[12]=Y,I[1]=0,I[5]=H,I[9]=0,I[13]=ee,I[2]=0,I[6]=0,I[10]=ie,I[14]=oe,I[3]=0,I[7]=0,I[11]=0,I[15]=1,this}equals(d){const v=this.elements,A=d.elements;for(let C=0;C<16;C++)if(v[C]!==A[C])return!1;return!0}fromArray(d,v=0){for(let A=0;A<16;A++)this.elements[A]=d[A+v];return this}toArray(d=[],v=0){const A=this.elements;return d[v]=A[0],d[v+1]=A[1],d[v+2]=A[2],d[v+3]=A[3],d[v+4]=A[4],d[v+5]=A[5],d[v+6]=A[6],d[v+7]=A[7],d[v+8]=A[8],d[v+9]=A[9],d[v+10]=A[10],d[v+11]=A[11],d[v+12]=A[12],d[v+13]=A[13],d[v+14]=A[14],d[v+15]=A[15],d}}const _v1$5=new Vector3,_m1$2$1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(d=0,v=0,A=0,C=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=d,this._y=v,this._z=A,this._order=C}get x(){return this._x}set x(d){this._x=d,this._onChangeCallback()}get y(){return this._y}set y(d){this._y=d,this._onChangeCallback()}get z(){return this._z}set z(d){this._z=d,this._onChangeCallback()}get order(){return this._order}set order(d){this._order=d,this._onChangeCallback()}set(d,v,A,C=this._order){return this._x=d,this._y=v,this._z=A,this._order=C,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(d){return this._x=d._x,this._y=d._y,this._z=d._z,this._order=d._order,this._onChangeCallback(),this}setFromRotationMatrix(d,v=this._order,A=!0){const C=d.elements,w=C[0],T=C[4],R=C[8],G=C[1],I=C[5],z=C[9],H=C[2],Y=C[6],ee=C[10];switch(v){case"XYZ":this._y=Math.asin(clamp$2(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(-z,ee),this._z=Math.atan2(-T,w)):(this._x=Math.atan2(Y,I),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$2(z,-1,1)),Math.abs(z)<.9999999?(this._y=Math.atan2(R,ee),this._z=Math.atan2(G,I)):(this._y=Math.atan2(-H,w),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$2(Y,-1,1)),Math.abs(Y)<.9999999?(this._y=Math.atan2(-H,ee),this._z=Math.atan2(-T,I)):(this._y=0,this._z=Math.atan2(G,w));break;case"ZYX":this._y=Math.asin(-clamp$2(H,-1,1)),Math.abs(H)<.9999999?(this._x=Math.atan2(Y,ee),this._z=Math.atan2(G,w)):(this._x=0,this._z=Math.atan2(-T,I));break;case"YZX":this._z=Math.asin(clamp$2(G,-1,1)),Math.abs(G)<.9999999?(this._x=Math.atan2(-z,I),this._y=Math.atan2(-H,w)):(this._x=0,this._y=Math.atan2(R,ee));break;case"XZY":this._z=Math.asin(-clamp$2(T,-1,1)),Math.abs(T)<.9999999?(this._x=Math.atan2(Y,I),this._y=Math.atan2(R,w)):(this._x=Math.atan2(-z,ee),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+v)}return this._order=v,A===!0&&this._onChangeCallback(),this}setFromQuaternion(d,v,A){return _matrix$2.makeRotationFromQuaternion(d),this.setFromRotationMatrix(_matrix$2,v,A)}setFromVector3(d,v=this._order){return this.set(d.x,d.y,d.z,v)}reorder(d){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,d)}equals(d){return d._x===this._x&&d._y===this._y&&d._z===this._z&&d._order===this._order}fromArray(d){return this._x=d[0],this._y=d[1],this._z=d[2],d[3]!==void 0&&(this._order=d[3]),this._onChangeCallback(),this}toArray(d=[],v=0){return d[v]=this._x,d[v+1]=this._y,d[v+2]=this._z,d[v+3]=this._order,d}_onChange(d){return this._onChangeCallback=d,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(d){this.mask=(1<<d|0)>>>0}enable(d){this.mask|=1<<d|0}enableAll(){this.mask=-1}toggle(d){this.mask^=1<<d|0}disable(d){this.mask&=~(1<<d|0)}disableAll(){this.mask=0}test(d){return(this.mask&d.mask)!==0}isEnabled(d){return(this.mask&(1<<d|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1$1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const d=new Vector3,v=new Euler,A=new Quaternion,C=new Vector3(1,1,1);function w(){A.setFromEuler(v,!1)}function T(){v.setFromQuaternion(A,void 0,!1)}v._onChange(w),A._onChange(T),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:d},rotation:{configurable:!0,enumerable:!0,value:v},quaternion:{configurable:!0,enumerable:!0,value:A},scale:{configurable:!0,enumerable:!0,value:C},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(d){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(d),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(d){return this.quaternion.premultiply(d),this}setRotationFromAxisAngle(d,v){this.quaternion.setFromAxisAngle(d,v)}setRotationFromEuler(d){this.quaternion.setFromEuler(d,!0)}setRotationFromMatrix(d){this.quaternion.setFromRotationMatrix(d)}setRotationFromQuaternion(d){this.quaternion.copy(d)}rotateOnAxis(d,v){return _q1$1.setFromAxisAngle(d,v),this.quaternion.multiply(_q1$1),this}rotateOnWorldAxis(d,v){return _q1$1.setFromAxisAngle(d,v),this.quaternion.premultiply(_q1$1),this}rotateX(d){return this.rotateOnAxis(_xAxis,d)}rotateY(d){return this.rotateOnAxis(_yAxis,d)}rotateZ(d){return this.rotateOnAxis(_zAxis,d)}translateOnAxis(d,v){return _v1$4.copy(d).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(v)),this}translateX(d){return this.translateOnAxis(_xAxis,d)}translateY(d){return this.translateOnAxis(_yAxis,d)}translateZ(d){return this.translateOnAxis(_zAxis,d)}localToWorld(d){return this.updateWorldMatrix(!0,!1),d.applyMatrix4(this.matrixWorld)}worldToLocal(d){return this.updateWorldMatrix(!0,!1),d.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(d,v,A){d.isVector3?_target.copy(d):_target.set(d,v,A);const C=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),C&&(_m1$1$1.extractRotation(C.matrixWorld),_q1$1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1$1.invert()))}add(d){if(arguments.length>1){for(let v=0;v<arguments.length;v++)this.add(arguments[v]);return this}return d===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",d),this):(d&&d.isObject3D?(d.removeFromParent(),d.parent=this,this.children.push(d),d.dispatchEvent(_addedEvent),_childaddedEvent.child=d,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",d),this)}remove(d){if(arguments.length>1){for(let A=0;A<arguments.length;A++)this.remove(arguments[A]);return this}const v=this.children.indexOf(d);return v!==-1&&(d.parent=null,this.children.splice(v,1),d.dispatchEvent(_removedEvent),_childremovedEvent.child=d,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const d=this.parent;return d!==null&&d.remove(this),this}clear(){return this.remove(...this.children)}attach(d){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),d.parent!==null&&(d.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(d.parent.matrixWorld)),d.applyMatrix4(_m1$1$1),d.removeFromParent(),d.parent=this,this.children.push(d),d.updateWorldMatrix(!1,!0),d.dispatchEvent(_addedEvent),_childaddedEvent.child=d,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(d){return this.getObjectByProperty("id",d)}getObjectByName(d){return this.getObjectByProperty("name",d)}getObjectByProperty(d,v){if(this[d]===v)return this;for(let A=0,C=this.children.length;A<C;A++){const T=this.children[A].getObjectByProperty(d,v);if(T!==void 0)return T}}getObjectsByProperty(d,v,A=[]){this[d]===v&&A.push(this);const C=this.children;for(let w=0,T=C.length;w<T;w++)C[w].getObjectsByProperty(d,v,A);return A}getWorldPosition(d){return this.updateWorldMatrix(!0,!1),d.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(d){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,d,_scale$2),d}getWorldScale(d){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,d),d}getWorldDirection(d){this.updateWorldMatrix(!0,!1);const v=this.matrixWorld.elements;return d.set(v[8],v[9],v[10]).normalize()}raycast(){}traverse(d){d(this);const v=this.children;for(let A=0,C=v.length;A<C;A++)v[A].traverse(d)}traverseVisible(d){if(this.visible===!1)return;d(this);const v=this.children;for(let A=0,C=v.length;A<C;A++)v[A].traverseVisible(d)}traverseAncestors(d){const v=this.parent;v!==null&&(d(v),v.traverseAncestors(d))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(d){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||d)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,d=!0);const v=this.children;for(let A=0,C=v.length;A<C;A++)v[A].updateMatrixWorld(d)}updateWorldMatrix(d,v){const A=this.parent;if(d===!0&&A!==null&&A.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),v===!0){const C=this.children;for(let w=0,T=C.length;w<T;w++)C[w].updateWorldMatrix(!1,!0)}}toJSON(d){const v=d===void 0||typeof d=="string",A={};v&&(d={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},A.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const C={};C.uuid=this.uuid,C.type=this.type,this.name!==""&&(C.name=this.name),this.castShadow===!0&&(C.castShadow=!0),this.receiveShadow===!0&&(C.receiveShadow=!0),this.visible===!1&&(C.visible=!1),this.frustumCulled===!1&&(C.frustumCulled=!1),this.renderOrder!==0&&(C.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(C.userData=this.userData),C.layers=this.layers.mask,C.matrix=this.matrix.toArray(),C.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(C.matrixAutoUpdate=!1),this.isInstancedMesh&&(C.type="InstancedMesh",C.count=this.count,C.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(C.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(C.type="BatchedMesh",C.perObjectFrustumCulled=this.perObjectFrustumCulled,C.sortObjects=this.sortObjects,C.drawRanges=this._drawRanges,C.reservedRanges=this._reservedRanges,C.geometryInfo=this._geometryInfo.map(R=>({...R,boundingBox:R.boundingBox?R.boundingBox.toJSON():void 0,boundingSphere:R.boundingSphere?R.boundingSphere.toJSON():void 0})),C.instanceInfo=this._instanceInfo.map(R=>({...R})),C.availableInstanceIds=this._availableInstanceIds.slice(),C.availableGeometryIds=this._availableGeometryIds.slice(),C.nextIndexStart=this._nextIndexStart,C.nextVertexStart=this._nextVertexStart,C.geometryCount=this._geometryCount,C.maxInstanceCount=this._maxInstanceCount,C.maxVertexCount=this._maxVertexCount,C.maxIndexCount=this._maxIndexCount,C.geometryInitialized=this._geometryInitialized,C.matricesTexture=this._matricesTexture.toJSON(d),C.indirectTexture=this._indirectTexture.toJSON(d),this._colorsTexture!==null&&(C.colorsTexture=this._colorsTexture.toJSON(d)),this.boundingSphere!==null&&(C.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(C.boundingBox=this.boundingBox.toJSON()));function w(R,G){return R[G.uuid]===void 0&&(R[G.uuid]=G.toJSON(d)),G.uuid}if(this.isScene)this.background&&(this.background.isColor?C.background=this.background.toJSON():this.background.isTexture&&(C.background=this.background.toJSON(d).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(C.environment=this.environment.toJSON(d).uuid);else if(this.isMesh||this.isLine||this.isPoints){C.geometry=w(d.geometries,this.geometry);const R=this.geometry.parameters;if(R!==void 0&&R.shapes!==void 0){const G=R.shapes;if(Array.isArray(G))for(let I=0,z=G.length;I<z;I++){const H=G[I];w(d.shapes,H)}else w(d.shapes,G)}}if(this.isSkinnedMesh&&(C.bindMode=this.bindMode,C.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(w(d.skeletons,this.skeleton),C.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const R=[];for(let G=0,I=this.material.length;G<I;G++)R.push(w(d.materials,this.material[G]));C.material=R}else C.material=w(d.materials,this.material);if(this.children.length>0){C.children=[];for(let R=0;R<this.children.length;R++)C.children.push(this.children[R].toJSON(d).object)}if(this.animations.length>0){C.animations=[];for(let R=0;R<this.animations.length;R++){const G=this.animations[R];C.animations.push(w(d.animations,G))}}if(v){const R=T(d.geometries),G=T(d.materials),I=T(d.textures),z=T(d.images),H=T(d.shapes),Y=T(d.skeletons),ee=T(d.animations),ie=T(d.nodes);R.length>0&&(A.geometries=R),G.length>0&&(A.materials=G),I.length>0&&(A.textures=I),z.length>0&&(A.images=z),H.length>0&&(A.shapes=H),Y.length>0&&(A.skeletons=Y),ee.length>0&&(A.animations=ee),ie.length>0&&(A.nodes=ie)}return A.object=C,A;function T(R){const G=[];for(const I in R){const z=R[I];delete z.metadata,G.push(z)}return G}}clone(d){return new this.constructor().copy(this,d)}copy(d,v=!0){if(this.name=d.name,this.up.copy(d.up),this.position.copy(d.position),this.rotation.order=d.rotation.order,this.quaternion.copy(d.quaternion),this.scale.copy(d.scale),this.matrix.copy(d.matrix),this.matrixWorld.copy(d.matrixWorld),this.matrixAutoUpdate=d.matrixAutoUpdate,this.matrixWorldAutoUpdate=d.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=d.matrixWorldNeedsUpdate,this.layers.mask=d.layers.mask,this.visible=d.visible,this.castShadow=d.castShadow,this.receiveShadow=d.receiveShadow,this.frustumCulled=d.frustumCulled,this.renderOrder=d.renderOrder,this.animations=d.animations.slice(),this.userData=JSON.parse(JSON.stringify(d.userData)),v===!0)for(let A=0;A<d.children.length;A++){const C=d.children[A];this.add(C.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(d=new Vector3,v=new Vector3,A=new Vector3){this.a=d,this.b=v,this.c=A}static getNormal(d,v,A,C){C.subVectors(A,v),_v0$1.subVectors(d,v),C.cross(_v0$1);const w=C.lengthSq();return w>0?C.multiplyScalar(1/Math.sqrt(w)):C.set(0,0,0)}static getBarycoord(d,v,A,C,w){_v0$1.subVectors(C,v),_v1$3.subVectors(A,v),_v2$2.subVectors(d,v);const T=_v0$1.dot(_v0$1),R=_v0$1.dot(_v1$3),G=_v0$1.dot(_v2$2),I=_v1$3.dot(_v1$3),z=_v1$3.dot(_v2$2),H=T*I-R*R;if(H===0)return w.set(0,0,0),null;const Y=1/H,ee=(I*G-R*z)*Y,ie=(T*z-R*G)*Y;return w.set(1-ee-ie,ie,ee)}static containsPoint(d,v,A,C){return this.getBarycoord(d,v,A,C,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(d,v,A,C,w,T,R,G){return this.getBarycoord(d,v,A,C,_v3$2)===null?(G.x=0,G.y=0,"z"in G&&(G.z=0),"w"in G&&(G.w=0),null):(G.setScalar(0),G.addScaledVector(w,_v3$2.x),G.addScaledVector(T,_v3$2.y),G.addScaledVector(R,_v3$2.z),G)}static getInterpolatedAttribute(d,v,A,C,w,T){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(d,v),_v41.fromBufferAttribute(d,A),_v42.fromBufferAttribute(d,C),T.setScalar(0),T.addScaledVector(_v40,w.x),T.addScaledVector(_v41,w.y),T.addScaledVector(_v42,w.z),T}static isFrontFacing(d,v,A,C){return _v0$1.subVectors(A,v),_v1$3.subVectors(d,v),_v0$1.cross(_v1$3).dot(C)<0}set(d,v,A){return this.a.copy(d),this.b.copy(v),this.c.copy(A),this}setFromPointsAndIndices(d,v,A,C){return this.a.copy(d[v]),this.b.copy(d[A]),this.c.copy(d[C]),this}setFromAttributeAndIndices(d,v,A,C){return this.a.fromBufferAttribute(d,v),this.b.fromBufferAttribute(d,A),this.c.fromBufferAttribute(d,C),this}clone(){return new this.constructor().copy(this)}copy(d){return this.a.copy(d.a),this.b.copy(d.b),this.c.copy(d.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(d){return d.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(d){return Triangle.getNormal(this.a,this.b,this.c,d)}getPlane(d){return d.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(d,v){return Triangle.getBarycoord(d,this.a,this.b,this.c,v)}getInterpolation(d,v,A,C,w){return Triangle.getInterpolation(d,this.a,this.b,this.c,v,A,C,w)}containsPoint(d){return Triangle.containsPoint(d,this.a,this.b,this.c)}isFrontFacing(d){return Triangle.isFrontFacing(this.a,this.b,this.c,d)}intersectsBox(d){return d.intersectsTriangle(this)}closestPointToPoint(d,v){const A=this.a,C=this.b,w=this.c;let T,R;_vab.subVectors(C,A),_vac.subVectors(w,A),_vap.subVectors(d,A);const G=_vab.dot(_vap),I=_vac.dot(_vap);if(G<=0&&I<=0)return v.copy(A);_vbp.subVectors(d,C);const z=_vab.dot(_vbp),H=_vac.dot(_vbp);if(z>=0&&H<=z)return v.copy(C);const Y=G*H-z*I;if(Y<=0&&G>=0&&z<=0)return T=G/(G-z),v.copy(A).addScaledVector(_vab,T);_vcp.subVectors(d,w);const ee=_vab.dot(_vcp),ie=_vac.dot(_vcp);if(ie>=0&&ee<=ie)return v.copy(w);const oe=ee*I-G*ie;if(oe<=0&&I>=0&&ie<=0)return R=I/(I-ie),v.copy(A).addScaledVector(_vac,R);const se=z*ie-ee*H;if(se<=0&&H-z>=0&&ee-ie>=0)return _vbc.subVectors(w,C),R=(H-z)/(H-z+(ee-ie)),v.copy(C).addScaledVector(_vbc,R);const re=1/(se+oe+Y);return T=oe*re,R=Y*re,v.copy(A).addScaledVector(_vab,T).addScaledVector(_vac,R)}equals(d){return d.a.equals(this.a)&&d.b.equals(this.b)&&d.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(_,d,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?_+(d-_)*6*v:v<1/2?d:v<2/3?_+(d-_)*6*(2/3-v):_}class Color{constructor(d,v,A){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(d,v,A)}set(d,v,A){if(v===void 0&&A===void 0){const C=d;C&&C.isColor?this.copy(C):typeof C=="number"?this.setHex(C):typeof C=="string"&&this.setStyle(C)}else this.setRGB(d,v,A);return this}setScalar(d){return this.r=d,this.g=d,this.b=d,this}setHex(d,v=SRGBColorSpace$1){return d=Math.floor(d),this.r=(d>>16&255)/255,this.g=(d>>8&255)/255,this.b=(d&255)/255,ColorManagement.colorSpaceToWorking(this,v),this}setRGB(d,v,A,C=ColorManagement.workingColorSpace){return this.r=d,this.g=v,this.b=A,ColorManagement.colorSpaceToWorking(this,C),this}setHSL(d,v,A,C=ColorManagement.workingColorSpace){if(d=euclideanModulo(d,1),v=clamp$2(v,0,1),A=clamp$2(A,0,1),v===0)this.r=this.g=this.b=A;else{const w=A<=.5?A*(1+v):A+v-A*v,T=2*A-w;this.r=hue2rgb(T,w,d+1/3),this.g=hue2rgb(T,w,d),this.b=hue2rgb(T,w,d-1/3)}return ColorManagement.colorSpaceToWorking(this,C),this}setStyle(d,v=SRGBColorSpace$1){function A(w){w!==void 0&&parseFloat(w)<1&&console.warn("THREE.Color: Alpha component of "+d+" will be ignored.")}let C;if(C=/^(\w+)\(([^\)]*)\)/.exec(d)){let w;const T=C[1],R=C[2];switch(T){case"rgb":case"rgba":if(w=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return A(w[4]),this.setRGB(Math.min(255,parseInt(w[1],10))/255,Math.min(255,parseInt(w[2],10))/255,Math.min(255,parseInt(w[3],10))/255,v);if(w=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return A(w[4]),this.setRGB(Math.min(100,parseInt(w[1],10))/100,Math.min(100,parseInt(w[2],10))/100,Math.min(100,parseInt(w[3],10))/100,v);break;case"hsl":case"hsla":if(w=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(R))return A(w[4]),this.setHSL(parseFloat(w[1])/360,parseFloat(w[2])/100,parseFloat(w[3])/100,v);break;default:console.warn("THREE.Color: Unknown color model "+d)}}else if(C=/^\#([A-Fa-f\d]+)$/.exec(d)){const w=C[1],T=w.length;if(T===3)return this.setRGB(parseInt(w.charAt(0),16)/15,parseInt(w.charAt(1),16)/15,parseInt(w.charAt(2),16)/15,v);if(T===6)return this.setHex(parseInt(w,16),v);console.warn("THREE.Color: Invalid hex color "+d)}else if(d&&d.length>0)return this.setColorName(d,v);return this}setColorName(d,v=SRGBColorSpace$1){const A=_colorKeywords[d.toLowerCase()];return A!==void 0?this.setHex(A,v):console.warn("THREE.Color: Unknown color "+d),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(d){return this.r=d.r,this.g=d.g,this.b=d.b,this}copySRGBToLinear(d){return this.r=SRGBToLinear(d.r),this.g=SRGBToLinear(d.g),this.b=SRGBToLinear(d.b),this}copyLinearToSRGB(d){return this.r=LinearToSRGB(d.r),this.g=LinearToSRGB(d.g),this.b=LinearToSRGB(d.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(d=SRGBColorSpace$1){return ColorManagement.workingToColorSpace(_color.copy(this),d),Math.round(clamp$2(_color.r*255,0,255))*65536+Math.round(clamp$2(_color.g*255,0,255))*256+Math.round(clamp$2(_color.b*255,0,255))}getHexString(d=SRGBColorSpace$1){return("000000"+this.getHex(d).toString(16)).slice(-6)}getHSL(d,v=ColorManagement.workingColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),v);const A=_color.r,C=_color.g,w=_color.b,T=Math.max(A,C,w),R=Math.min(A,C,w);let G,I;const z=(R+T)/2;if(R===T)G=0,I=0;else{const H=T-R;switch(I=z<=.5?H/(T+R):H/(2-T-R),T){case A:G=(C-w)/H+(C<w?6:0);break;case C:G=(w-A)/H+2;break;case w:G=(A-C)/H+4;break}G/=6}return d.h=G,d.s=I,d.l=z,d}getRGB(d,v=ColorManagement.workingColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),v),d.r=_color.r,d.g=_color.g,d.b=_color.b,d}getStyle(d=SRGBColorSpace$1){ColorManagement.workingToColorSpace(_color.copy(this),d);const v=_color.r,A=_color.g,C=_color.b;return d!==SRGBColorSpace$1?`color(${d} ${v.toFixed(3)} ${A.toFixed(3)} ${C.toFixed(3)})`:`rgb(${Math.round(v*255)},${Math.round(A*255)},${Math.round(C*255)})`}offsetHSL(d,v,A){return this.getHSL(_hslA),this.setHSL(_hslA.h+d,_hslA.s+v,_hslA.l+A)}add(d){return this.r+=d.r,this.g+=d.g,this.b+=d.b,this}addColors(d,v){return this.r=d.r+v.r,this.g=d.g+v.g,this.b=d.b+v.b,this}addScalar(d){return this.r+=d,this.g+=d,this.b+=d,this}sub(d){return this.r=Math.max(0,this.r-d.r),this.g=Math.max(0,this.g-d.g),this.b=Math.max(0,this.b-d.b),this}multiply(d){return this.r*=d.r,this.g*=d.g,this.b*=d.b,this}multiplyScalar(d){return this.r*=d,this.g*=d,this.b*=d,this}lerp(d,v){return this.r+=(d.r-this.r)*v,this.g+=(d.g-this.g)*v,this.b+=(d.b-this.b)*v,this}lerpColors(d,v,A){return this.r=d.r+(v.r-d.r)*A,this.g=d.g+(v.g-d.g)*A,this.b=d.b+(v.b-d.b)*A,this}lerpHSL(d,v){this.getHSL(_hslA),d.getHSL(_hslB);const A=lerp(_hslA.h,_hslB.h,v),C=lerp(_hslA.s,_hslB.s,v),w=lerp(_hslA.l,_hslB.l,v);return this.setHSL(A,C,w),this}setFromVector3(d){return this.r=d.x,this.g=d.y,this.b=d.z,this}applyMatrix3(d){const v=this.r,A=this.g,C=this.b,w=d.elements;return this.r=w[0]*v+w[3]*A+w[6]*C,this.g=w[1]*v+w[4]*A+w[7]*C,this.b=w[2]*v+w[5]*A+w[8]*C,this}equals(d){return d.r===this.r&&d.g===this.g&&d.b===this.b}fromArray(d,v=0){return this.r=d[v],this.g=d[v+1],this.b=d[v+2],this}toArray(d=[],v=0){return d[v]=this.r,d[v+1]=this.g,d[v+2]=this.b,d}fromBufferAttribute(d,v){return this.r=d.getX(v),this.g=d.getY(v),this.b=d.getZ(v),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(d){this._alphaTest>0!=d>0&&this.version++,this._alphaTest=d}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(d){if(d!==void 0)for(const v in d){const A=d[v];if(A===void 0){console.warn(`THREE.Material: parameter '${v}' has value of undefined.`);continue}const C=this[v];if(C===void 0){console.warn(`THREE.Material: '${v}' is not a property of THREE.${this.type}.`);continue}C&&C.isColor?C.set(A):C&&C.isVector3&&A&&A.isVector3?C.copy(A):this[v]=A}}toJSON(d){const v=d===void 0||typeof d=="string";v&&(d={textures:{},images:{}});const A={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};A.uuid=this.uuid,A.type=this.type,this.name!==""&&(A.name=this.name),this.color&&this.color.isColor&&(A.color=this.color.getHex()),this.roughness!==void 0&&(A.roughness=this.roughness),this.metalness!==void 0&&(A.metalness=this.metalness),this.sheen!==void 0&&(A.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(A.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(A.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(A.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(A.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(A.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(A.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(A.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(A.shininess=this.shininess),this.clearcoat!==void 0&&(A.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(A.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(A.clearcoatMap=this.clearcoatMap.toJSON(d).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(A.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(d).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(A.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(d).uuid,A.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(A.dispersion=this.dispersion),this.iridescence!==void 0&&(A.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(A.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(A.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(A.iridescenceMap=this.iridescenceMap.toJSON(d).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(A.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(d).uuid),this.anisotropy!==void 0&&(A.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(A.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(A.anisotropyMap=this.anisotropyMap.toJSON(d).uuid),this.map&&this.map.isTexture&&(A.map=this.map.toJSON(d).uuid),this.matcap&&this.matcap.isTexture&&(A.matcap=this.matcap.toJSON(d).uuid),this.alphaMap&&this.alphaMap.isTexture&&(A.alphaMap=this.alphaMap.toJSON(d).uuid),this.lightMap&&this.lightMap.isTexture&&(A.lightMap=this.lightMap.toJSON(d).uuid,A.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(A.aoMap=this.aoMap.toJSON(d).uuid,A.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(A.bumpMap=this.bumpMap.toJSON(d).uuid,A.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(A.normalMap=this.normalMap.toJSON(d).uuid,A.normalMapType=this.normalMapType,A.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(A.displacementMap=this.displacementMap.toJSON(d).uuid,A.displacementScale=this.displacementScale,A.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(A.roughnessMap=this.roughnessMap.toJSON(d).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(A.metalnessMap=this.metalnessMap.toJSON(d).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(A.emissiveMap=this.emissiveMap.toJSON(d).uuid),this.specularMap&&this.specularMap.isTexture&&(A.specularMap=this.specularMap.toJSON(d).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(A.specularIntensityMap=this.specularIntensityMap.toJSON(d).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(A.specularColorMap=this.specularColorMap.toJSON(d).uuid),this.envMap&&this.envMap.isTexture&&(A.envMap=this.envMap.toJSON(d).uuid,this.combine!==void 0&&(A.combine=this.combine)),this.envMapRotation!==void 0&&(A.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(A.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(A.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(A.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(A.gradientMap=this.gradientMap.toJSON(d).uuid),this.transmission!==void 0&&(A.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(A.transmissionMap=this.transmissionMap.toJSON(d).uuid),this.thickness!==void 0&&(A.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(A.thicknessMap=this.thicknessMap.toJSON(d).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(A.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(A.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(A.size=this.size),this.shadowSide!==null&&(A.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(A.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(A.blending=this.blending),this.side!==FrontSide&&(A.side=this.side),this.vertexColors===!0&&(A.vertexColors=!0),this.opacity<1&&(A.opacity=this.opacity),this.transparent===!0&&(A.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(A.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(A.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(A.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(A.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(A.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(A.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(A.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(A.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(A.depthFunc=this.depthFunc),this.depthTest===!1&&(A.depthTest=this.depthTest),this.depthWrite===!1&&(A.depthWrite=this.depthWrite),this.colorWrite===!1&&(A.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(A.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(A.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(A.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(A.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(A.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(A.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(A.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(A.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(A.rotation=this.rotation),this.polygonOffset===!0&&(A.polygonOffset=!0),this.polygonOffsetFactor!==0&&(A.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(A.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(A.linewidth=this.linewidth),this.dashSize!==void 0&&(A.dashSize=this.dashSize),this.gapSize!==void 0&&(A.gapSize=this.gapSize),this.scale!==void 0&&(A.scale=this.scale),this.dithering===!0&&(A.dithering=!0),this.alphaTest>0&&(A.alphaTest=this.alphaTest),this.alphaHash===!0&&(A.alphaHash=!0),this.alphaToCoverage===!0&&(A.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(A.premultipliedAlpha=!0),this.forceSinglePass===!0&&(A.forceSinglePass=!0),this.wireframe===!0&&(A.wireframe=!0),this.wireframeLinewidth>1&&(A.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(A.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(A.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(A.flatShading=!0),this.visible===!1&&(A.visible=!1),this.toneMapped===!1&&(A.toneMapped=!1),this.fog===!1&&(A.fog=!1),Object.keys(this.userData).length>0&&(A.userData=this.userData);function C(w){const T=[];for(const R in w){const G=w[R];delete G.metadata,T.push(G)}return T}if(v){const w=C(d.textures),T=C(d.images);w.length>0&&(A.textures=w),T.length>0&&(A.images=T)}return A}clone(){return new this.constructor().copy(this)}copy(d){this.name=d.name,this.blending=d.blending,this.side=d.side,this.vertexColors=d.vertexColors,this.opacity=d.opacity,this.transparent=d.transparent,this.blendSrc=d.blendSrc,this.blendDst=d.blendDst,this.blendEquation=d.blendEquation,this.blendSrcAlpha=d.blendSrcAlpha,this.blendDstAlpha=d.blendDstAlpha,this.blendEquationAlpha=d.blendEquationAlpha,this.blendColor.copy(d.blendColor),this.blendAlpha=d.blendAlpha,this.depthFunc=d.depthFunc,this.depthTest=d.depthTest,this.depthWrite=d.depthWrite,this.stencilWriteMask=d.stencilWriteMask,this.stencilFunc=d.stencilFunc,this.stencilRef=d.stencilRef,this.stencilFuncMask=d.stencilFuncMask,this.stencilFail=d.stencilFail,this.stencilZFail=d.stencilZFail,this.stencilZPass=d.stencilZPass,this.stencilWrite=d.stencilWrite;const v=d.clippingPlanes;let A=null;if(v!==null){const C=v.length;A=new Array(C);for(let w=0;w!==C;++w)A[w]=v[w].clone()}return this.clippingPlanes=A,this.clipIntersection=d.clipIntersection,this.clipShadows=d.clipShadows,this.shadowSide=d.shadowSide,this.colorWrite=d.colorWrite,this.precision=d.precision,this.polygonOffset=d.polygonOffset,this.polygonOffsetFactor=d.polygonOffsetFactor,this.polygonOffsetUnits=d.polygonOffsetUnits,this.dithering=d.dithering,this.alphaTest=d.alphaTest,this.alphaHash=d.alphaHash,this.alphaToCoverage=d.alphaToCoverage,this.premultipliedAlpha=d.premultipliedAlpha,this.forceSinglePass=d.forceSinglePass,this.visible=d.visible,this.toneMapped=d.toneMapped,this.userData=JSON.parse(JSON.stringify(d.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(d){d===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(d){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.map=d.map,this.lightMap=d.lightMap,this.lightMapIntensity=d.lightMapIntensity,this.aoMap=d.aoMap,this.aoMapIntensity=d.aoMapIntensity,this.specularMap=d.specularMap,this.alphaMap=d.alphaMap,this.envMap=d.envMap,this.envMapRotation.copy(d.envMapRotation),this.combine=d.combine,this.reflectivity=d.reflectivity,this.refractionRatio=d.refractionRatio,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.wireframeLinecap=d.wireframeLinecap,this.wireframeLinejoin=d.wireframeLinejoin,this.fog=d.fog,this}}const _tables=_generateTables();function _generateTables(){const _=new ArrayBuffer(4),d=new Float32Array(_),v=new Uint32Array(_),A=new Uint32Array(512),C=new Uint32Array(512);for(let G=0;G<256;++G){const I=G-127;I<-27?(A[G]=0,A[G|256]=32768,C[G]=24,C[G|256]=24):I<-14?(A[G]=1024>>-I-14,A[G|256]=1024>>-I-14|32768,C[G]=-I-1,C[G|256]=-I-1):I<=15?(A[G]=I+15<<10,A[G|256]=I+15<<10|32768,C[G]=13,C[G|256]=13):I<128?(A[G]=31744,A[G|256]=64512,C[G]=24,C[G|256]=24):(A[G]=31744,A[G|256]=64512,C[G]=13,C[G|256]=13)}const w=new Uint32Array(2048),T=new Uint32Array(64),R=new Uint32Array(64);for(let G=1;G<1024;++G){let I=G<<13,z=0;for(;(I&8388608)===0;)I<<=1,z-=8388608;I&=-8388609,z+=947912704,w[G]=I|z}for(let G=1024;G<2048;++G)w[G]=939524096+(G-1024<<13);for(let G=1;G<31;++G)T[G]=G<<23;T[31]=1199570944,T[32]=2147483648;for(let G=33;G<63;++G)T[G]=2147483648+(G-32<<23);T[63]=3347054592;for(let G=1;G<64;++G)G!==32&&(R[G]=1024);return{floatView:d,uint32View:v,baseTable:A,shiftTable:C,mantissaTable:w,exponentTable:T,offsetTable:R}}function toHalfFloat(_){Math.abs(_)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),_=clamp$2(_,-65504,65504),_tables.floatView[0]=_;const d=_tables.uint32View[0],v=d>>23&511;return _tables.baseTable[v]+((d&8388607)>>_tables.shiftTable[v])}function fromHalfFloat(_){const d=_>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[d]+(_&1023)]+_tables.exponentTable[d],_tables.floatView[0]}class DataUtils{static toHalfFloat(d){return toHalfFloat(d)}static fromHalfFloat(d){return fromHalfFloat(d)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(d,v,A=!1){if(Array.isArray(d))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=d,this.itemSize=v,this.count=d!==void 0?d.length/v:0,this.normalized=A,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(d){d===!0&&this.version++}setUsage(d){return this.usage=d,this}addUpdateRange(d,v){this.updateRanges.push({start:d,count:v})}clearUpdateRanges(){this.updateRanges.length=0}copy(d){return this.name=d.name,this.array=new d.array.constructor(d.array),this.itemSize=d.itemSize,this.count=d.count,this.normalized=d.normalized,this.usage=d.usage,this.gpuType=d.gpuType,this}copyAt(d,v,A){d*=this.itemSize,A*=v.itemSize;for(let C=0,w=this.itemSize;C<w;C++)this.array[d+C]=v.array[A+C];return this}copyArray(d){return this.array.set(d),this}applyMatrix3(d){if(this.itemSize===2)for(let v=0,A=this.count;v<A;v++)_vector2$1.fromBufferAttribute(this,v),_vector2$1.applyMatrix3(d),this.setXY(v,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let v=0,A=this.count;v<A;v++)_vector$9.fromBufferAttribute(this,v),_vector$9.applyMatrix3(d),this.setXYZ(v,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(d){for(let v=0,A=this.count;v<A;v++)_vector$9.fromBufferAttribute(this,v),_vector$9.applyMatrix4(d),this.setXYZ(v,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(d){for(let v=0,A=this.count;v<A;v++)_vector$9.fromBufferAttribute(this,v),_vector$9.applyNormalMatrix(d),this.setXYZ(v,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(d){for(let v=0,A=this.count;v<A;v++)_vector$9.fromBufferAttribute(this,v),_vector$9.transformDirection(d),this.setXYZ(v,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(d,v=0){return this.array.set(d,v),this}getComponent(d,v){let A=this.array[d*this.itemSize+v];return this.normalized&&(A=denormalize(A,this.array)),A}setComponent(d,v,A){return this.normalized&&(A=normalize(A,this.array)),this.array[d*this.itemSize+v]=A,this}getX(d){let v=this.array[d*this.itemSize];return this.normalized&&(v=denormalize(v,this.array)),v}setX(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize]=v,this}getY(d){let v=this.array[d*this.itemSize+1];return this.normalized&&(v=denormalize(v,this.array)),v}setY(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize+1]=v,this}getZ(d){let v=this.array[d*this.itemSize+2];return this.normalized&&(v=denormalize(v,this.array)),v}setZ(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize+2]=v,this}getW(d){let v=this.array[d*this.itemSize+3];return this.normalized&&(v=denormalize(v,this.array)),v}setW(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize+3]=v,this}setXY(d,v,A){return d*=this.itemSize,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array)),this.array[d+0]=v,this.array[d+1]=A,this}setXYZ(d,v,A,C){return d*=this.itemSize,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array),C=normalize(C,this.array)),this.array[d+0]=v,this.array[d+1]=A,this.array[d+2]=C,this}setXYZW(d,v,A,C,w){return d*=this.itemSize,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array),C=normalize(C,this.array),w=normalize(w,this.array)),this.array[d+0]=v,this.array[d+1]=A,this.array[d+2]=C,this.array[d+3]=w,this}onUpload(d){return this.onUploadCallback=d,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const d={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(d.name=this.name),this.usage!==StaticDrawUsage&&(d.usage=this.usage),d}}class Int8BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Int8Array(d),v,A)}}class Uint8BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Uint8Array(d),v,A)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Uint8ClampedArray(d),v,A)}}class Int16BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Int16Array(d),v,A)}}class Uint16BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Uint16Array(d),v,A)}}class Int32BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Int32Array(d),v,A)}}class Uint32BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Uint32Array(d),v,A)}}class Float16BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Uint16Array(d),v,A),this.isFloat16BufferAttribute=!0}getX(d){let v=fromHalfFloat(this.array[d*this.itemSize]);return this.normalized&&(v=denormalize(v,this.array)),v}setX(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize]=toHalfFloat(v),this}getY(d){let v=fromHalfFloat(this.array[d*this.itemSize+1]);return this.normalized&&(v=denormalize(v,this.array)),v}setY(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize+1]=toHalfFloat(v),this}getZ(d){let v=fromHalfFloat(this.array[d*this.itemSize+2]);return this.normalized&&(v=denormalize(v,this.array)),v}setZ(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize+2]=toHalfFloat(v),this}getW(d){let v=fromHalfFloat(this.array[d*this.itemSize+3]);return this.normalized&&(v=denormalize(v,this.array)),v}setW(d,v){return this.normalized&&(v=normalize(v,this.array)),this.array[d*this.itemSize+3]=toHalfFloat(v),this}setXY(d,v,A){return d*=this.itemSize,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array)),this.array[d+0]=toHalfFloat(v),this.array[d+1]=toHalfFloat(A),this}setXYZ(d,v,A,C){return d*=this.itemSize,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array),C=normalize(C,this.array)),this.array[d+0]=toHalfFloat(v),this.array[d+1]=toHalfFloat(A),this.array[d+2]=toHalfFloat(C),this}setXYZW(d,v,A,C,w){return d*=this.itemSize,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array),C=normalize(C,this.array),w=normalize(w,this.array)),this.array[d+0]=toHalfFloat(v),this.array[d+1]=toHalfFloat(A),this.array[d+2]=toHalfFloat(C),this.array[d+3]=toHalfFloat(w),this}}class Float32BufferAttribute extends BufferAttribute{constructor(d,v,A){super(new Float32Array(d),v,A)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(d){return Array.isArray(d)?this.index=new(arrayNeedsUint32(d)?Uint32BufferAttribute:Uint16BufferAttribute)(d,1):this.index=d,this}setIndirect(d){return this.indirect=d,this}getIndirect(){return this.indirect}getAttribute(d){return this.attributes[d]}setAttribute(d,v){return this.attributes[d]=v,this}deleteAttribute(d){return delete this.attributes[d],this}hasAttribute(d){return this.attributes[d]!==void 0}addGroup(d,v,A=0){this.groups.push({start:d,count:v,materialIndex:A})}clearGroups(){this.groups=[]}setDrawRange(d,v){this.drawRange.start=d,this.drawRange.count=v}applyMatrix4(d){const v=this.attributes.position;v!==void 0&&(v.applyMatrix4(d),v.needsUpdate=!0);const A=this.attributes.normal;if(A!==void 0){const w=new Matrix3().getNormalMatrix(d);A.applyNormalMatrix(w),A.needsUpdate=!0}const C=this.attributes.tangent;return C!==void 0&&(C.transformDirection(d),C.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(d){return _m1$3.makeRotationFromQuaternion(d),this.applyMatrix4(_m1$3),this}rotateX(d){return _m1$3.makeRotationX(d),this.applyMatrix4(_m1$3),this}rotateY(d){return _m1$3.makeRotationY(d),this.applyMatrix4(_m1$3),this}rotateZ(d){return _m1$3.makeRotationZ(d),this.applyMatrix4(_m1$3),this}translate(d,v,A){return _m1$3.makeTranslation(d,v,A),this.applyMatrix4(_m1$3),this}scale(d,v,A){return _m1$3.makeScale(d,v,A),this.applyMatrix4(_m1$3),this}lookAt(d){return _obj.lookAt(d),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(d){const v=this.getAttribute("position");if(v===void 0){const A=[];for(let C=0,w=d.length;C<w;C++){const T=d[C];A.push(T.x,T.y,T.z||0)}this.setAttribute("position",new Float32BufferAttribute(A,3))}else{const A=Math.min(d.length,v.count);for(let C=0;C<A;C++){const w=d[C];v.setXYZ(C,w.x,w.y,w.z||0)}d.length>v.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),v.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const d=this.attributes.position,v=this.morphAttributes.position;if(d&&d.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(d!==void 0){if(this.boundingBox.setFromBufferAttribute(d),v)for(let A=0,C=v.length;A<C;A++){const w=v[A];_box$2.setFromBufferAttribute(w),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const d=this.attributes.position,v=this.morphAttributes.position;if(d&&d.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(d){const A=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(d),v)for(let w=0,T=v.length;w<T;w++){const R=v[w];_boxMorphTargets.setFromBufferAttribute(R),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(A);let C=0;for(let w=0,T=d.count;w<T;w++)_vector$8.fromBufferAttribute(d,w),C=Math.max(C,A.distanceToSquared(_vector$8));if(v)for(let w=0,T=v.length;w<T;w++){const R=v[w],G=this.morphTargetsRelative;for(let I=0,z=R.count;I<z;I++)_vector$8.fromBufferAttribute(R,I),G&&(_offset.fromBufferAttribute(d,I),_vector$8.add(_offset)),C=Math.max(C,A.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(C),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const d=this.index,v=this.attributes;if(d===null||v.position===void 0||v.normal===void 0||v.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const A=v.position,C=v.normal,w=v.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*A.count),4));const T=this.getAttribute("tangent"),R=[],G=[];for(let Me=0;Me<A.count;Me++)R[Me]=new Vector3,G[Me]=new Vector3;const I=new Vector3,z=new Vector3,H=new Vector3,Y=new Vector2,ee=new Vector2,ie=new Vector2,oe=new Vector3,se=new Vector3;function re(Me,we,Be){I.fromBufferAttribute(A,Me),z.fromBufferAttribute(A,we),H.fromBufferAttribute(A,Be),Y.fromBufferAttribute(w,Me),ee.fromBufferAttribute(w,we),ie.fromBufferAttribute(w,Be),z.sub(I),H.sub(I),ee.sub(Y),ie.sub(Y);const De=1/(ee.x*ie.y-ie.x*ee.y);isFinite(De)&&(oe.copy(z).multiplyScalar(ie.y).addScaledVector(H,-ee.y).multiplyScalar(De),se.copy(H).multiplyScalar(ee.x).addScaledVector(z,-ie.x).multiplyScalar(De),R[Me].add(oe),R[we].add(oe),R[Be].add(oe),G[Me].add(se),G[we].add(se),G[Be].add(se))}let fe=this.groups;fe.length===0&&(fe=[{start:0,count:d.count}]);for(let Me=0,we=fe.length;Me<we;++Me){const Be=fe[Me],De=Be.start,Fe=Be.count;for(let Oe=De,Ge=De+Fe;Oe<Ge;Oe+=3)re(d.getX(Oe+0),d.getX(Oe+1),d.getX(Oe+2))}const ue=new Vector3,ge=new Vector3,ye=new Vector3,be=new Vector3;function ve(Me){ye.fromBufferAttribute(C,Me),be.copy(ye);const we=R[Me];ue.copy(we),ue.sub(ye.multiplyScalar(ye.dot(we))).normalize(),ge.crossVectors(be,we);const De=ge.dot(G[Me])<0?-1:1;T.setXYZW(Me,ue.x,ue.y,ue.z,De)}for(let Me=0,we=fe.length;Me<we;++Me){const Be=fe[Me],De=Be.start,Fe=Be.count;for(let Oe=De,Ge=De+Fe;Oe<Ge;Oe+=3)ve(d.getX(Oe+0)),ve(d.getX(Oe+1)),ve(d.getX(Oe+2))}}computeVertexNormals(){const d=this.index,v=this.getAttribute("position");if(v!==void 0){let A=this.getAttribute("normal");if(A===void 0)A=new BufferAttribute(new Float32Array(v.count*3),3),this.setAttribute("normal",A);else for(let Y=0,ee=A.count;Y<ee;Y++)A.setXYZ(Y,0,0,0);const C=new Vector3,w=new Vector3,T=new Vector3,R=new Vector3,G=new Vector3,I=new Vector3,z=new Vector3,H=new Vector3;if(d)for(let Y=0,ee=d.count;Y<ee;Y+=3){const ie=d.getX(Y+0),oe=d.getX(Y+1),se=d.getX(Y+2);C.fromBufferAttribute(v,ie),w.fromBufferAttribute(v,oe),T.fromBufferAttribute(v,se),z.subVectors(T,w),H.subVectors(C,w),z.cross(H),R.fromBufferAttribute(A,ie),G.fromBufferAttribute(A,oe),I.fromBufferAttribute(A,se),R.add(z),G.add(z),I.add(z),A.setXYZ(ie,R.x,R.y,R.z),A.setXYZ(oe,G.x,G.y,G.z),A.setXYZ(se,I.x,I.y,I.z)}else for(let Y=0,ee=v.count;Y<ee;Y+=3)C.fromBufferAttribute(v,Y+0),w.fromBufferAttribute(v,Y+1),T.fromBufferAttribute(v,Y+2),z.subVectors(T,w),H.subVectors(C,w),z.cross(H),A.setXYZ(Y+0,z.x,z.y,z.z),A.setXYZ(Y+1,z.x,z.y,z.z),A.setXYZ(Y+2,z.x,z.y,z.z);this.normalizeNormals(),A.needsUpdate=!0}}normalizeNormals(){const d=this.attributes.normal;for(let v=0,A=d.count;v<A;v++)_vector$8.fromBufferAttribute(d,v),_vector$8.normalize(),d.setXYZ(v,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function d(R,G){const I=R.array,z=R.itemSize,H=R.normalized,Y=new I.constructor(G.length*z);let ee=0,ie=0;for(let oe=0,se=G.length;oe<se;oe++){R.isInterleavedBufferAttribute?ee=G[oe]*R.data.stride+R.offset:ee=G[oe]*z;for(let re=0;re<z;re++)Y[ie++]=I[ee++]}return new BufferAttribute(Y,z,H)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const v=new BufferGeometry,A=this.index.array,C=this.attributes;for(const R in C){const G=C[R],I=d(G,A);v.setAttribute(R,I)}const w=this.morphAttributes;for(const R in w){const G=[],I=w[R];for(let z=0,H=I.length;z<H;z++){const Y=I[z],ee=d(Y,A);G.push(ee)}v.morphAttributes[R]=G}v.morphTargetsRelative=this.morphTargetsRelative;const T=this.groups;for(let R=0,G=T.length;R<G;R++){const I=T[R];v.addGroup(I.start,I.count,I.materialIndex)}return v}toJSON(){const d={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),Object.keys(this.userData).length>0&&(d.userData=this.userData),this.parameters!==void 0){const G=this.parameters;for(const I in G)G[I]!==void 0&&(d[I]=G[I]);return d}d.data={attributes:{}};const v=this.index;v!==null&&(d.data.index={type:v.array.constructor.name,array:Array.prototype.slice.call(v.array)});const A=this.attributes;for(const G in A){const I=A[G];d.data.attributes[G]=I.toJSON(d.data)}const C={};let w=!1;for(const G in this.morphAttributes){const I=this.morphAttributes[G],z=[];for(let H=0,Y=I.length;H<Y;H++){const ee=I[H];z.push(ee.toJSON(d.data))}z.length>0&&(C[G]=z,w=!0)}w&&(d.data.morphAttributes=C,d.data.morphTargetsRelative=this.morphTargetsRelative);const T=this.groups;T.length>0&&(d.data.groups=JSON.parse(JSON.stringify(T)));const R=this.boundingSphere;return R!==null&&(d.data.boundingSphere=R.toJSON()),d}clone(){return new this.constructor().copy(this)}copy(d){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const v={};this.name=d.name;const A=d.index;A!==null&&this.setIndex(A.clone());const C=d.attributes;for(const I in C){const z=C[I];this.setAttribute(I,z.clone(v))}const w=d.morphAttributes;for(const I in w){const z=[],H=w[I];for(let Y=0,ee=H.length;Y<ee;Y++)z.push(H[Y].clone(v));this.morphAttributes[I]=z}this.morphTargetsRelative=d.morphTargetsRelative;const T=d.groups;for(let I=0,z=T.length;I<z;I++){const H=T[I];this.addGroup(H.start,H.count,H.materialIndex)}const R=d.boundingBox;R!==null&&(this.boundingBox=R.clone());const G=d.boundingSphere;return G!==null&&(this.boundingSphere=G.clone()),this.drawRange.start=d.drawRange.start,this.drawRange.count=d.drawRange.count,this.userData=d.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(d=new BufferGeometry,v=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=d,this.material=v,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(d,v){return super.copy(d,v),d.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=d.morphTargetInfluences.slice()),d.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},d.morphTargetDictionary)),this.material=Array.isArray(d.material)?d.material.slice():d.material,this.geometry=d.geometry,this}updateMorphTargets(){const v=this.geometry.morphAttributes,A=Object.keys(v);if(A.length>0){const C=v[A[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,T=C.length;w<T;w++){const R=C[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=w}}}}getVertexPosition(d,v){const A=this.geometry,C=A.attributes.position,w=A.morphAttributes.position,T=A.morphTargetsRelative;v.fromBufferAttribute(C,d);const R=this.morphTargetInfluences;if(w&&R){_morphA.set(0,0,0);for(let G=0,I=w.length;G<I;G++){const z=R[G],H=w[G];z!==0&&(_tempA.fromBufferAttribute(H,d),T?_morphA.addScaledVector(_tempA,z):_morphA.addScaledVector(_tempA.sub(v),z))}v.add(_morphA)}return v}raycast(d,v){const A=this.geometry,C=this.material,w=this.matrixWorld;C!==void 0&&(A.boundingSphere===null&&A.computeBoundingSphere(),_sphere$6.copy(A.boundingSphere),_sphere$6.applyMatrix4(w),_ray$3.copy(d.ray).recast(d.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(d.far-d.near)**2))&&(_inverseMatrix$3.copy(w).invert(),_ray$3.copy(d.ray).applyMatrix4(_inverseMatrix$3),!(A.boundingBox!==null&&_ray$3.intersectsBox(A.boundingBox)===!1)&&this._computeIntersections(d,v,_ray$3)))}_computeIntersections(d,v,A){let C;const w=this.geometry,T=this.material,R=w.index,G=w.attributes.position,I=w.attributes.uv,z=w.attributes.uv1,H=w.attributes.normal,Y=w.groups,ee=w.drawRange;if(R!==null)if(Array.isArray(T))for(let ie=0,oe=Y.length;ie<oe;ie++){const se=Y[ie],re=T[se.materialIndex],fe=Math.max(se.start,ee.start),ue=Math.min(R.count,Math.min(se.start+se.count,ee.start+ee.count));for(let ge=fe,ye=ue;ge<ye;ge+=3){const be=R.getX(ge),ve=R.getX(ge+1),Me=R.getX(ge+2);C=checkGeometryIntersection(this,re,d,A,I,z,H,be,ve,Me),C&&(C.faceIndex=Math.floor(ge/3),C.face.materialIndex=se.materialIndex,v.push(C))}}else{const ie=Math.max(0,ee.start),oe=Math.min(R.count,ee.start+ee.count);for(let se=ie,re=oe;se<re;se+=3){const fe=R.getX(se),ue=R.getX(se+1),ge=R.getX(se+2);C=checkGeometryIntersection(this,T,d,A,I,z,H,fe,ue,ge),C&&(C.faceIndex=Math.floor(se/3),v.push(C))}}else if(G!==void 0)if(Array.isArray(T))for(let ie=0,oe=Y.length;ie<oe;ie++){const se=Y[ie],re=T[se.materialIndex],fe=Math.max(se.start,ee.start),ue=Math.min(G.count,Math.min(se.start+se.count,ee.start+ee.count));for(let ge=fe,ye=ue;ge<ye;ge+=3){const be=ge,ve=ge+1,Me=ge+2;C=checkGeometryIntersection(this,re,d,A,I,z,H,be,ve,Me),C&&(C.faceIndex=Math.floor(ge/3),C.face.materialIndex=se.materialIndex,v.push(C))}}else{const ie=Math.max(0,ee.start),oe=Math.min(G.count,ee.start+ee.count);for(let se=ie,re=oe;se<re;se+=3){const fe=se,ue=se+1,ge=se+2;C=checkGeometryIntersection(this,T,d,A,I,z,H,fe,ue,ge),C&&(C.faceIndex=Math.floor(se/3),v.push(C))}}}}function checkIntersection$1(_,d,v,A,C,w,T,R){let G;if(d.side===BackSide?G=A.intersectTriangle(T,w,C,!0,R):G=A.intersectTriangle(C,w,T,d.side===FrontSide,R),G===null)return null;_intersectionPointWorld.copy(R),_intersectionPointWorld.applyMatrix4(_.matrixWorld);const I=v.ray.origin.distanceTo(_intersectionPointWorld);return I<v.near||I>v.far?null:{distance:I,point:_intersectionPointWorld.clone(),object:_}}function checkGeometryIntersection(_,d,v,A,C,w,T,R,G,I){_.getVertexPosition(R,_vA$1),_.getVertexPosition(G,_vB$1),_.getVertexPosition(I,_vC$1);const z=checkIntersection$1(_,d,v,A,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(z){const H=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,H),C&&(z.uv=Triangle.getInterpolatedAttribute(C,R,G,I,H,new Vector2)),w&&(z.uv1=Triangle.getInterpolatedAttribute(w,R,G,I,H,new Vector2)),T&&(z.normal=Triangle.getInterpolatedAttribute(T,R,G,I,H,new Vector3),z.normal.dot(A.direction)>0&&z.normal.multiplyScalar(-1));const Y={a:R,b:G,c:I,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Y.normal),z.face=Y,z.barycoord=H}return z}class BoxGeometry extends BufferGeometry{constructor(d=1,v=1,A=1,C=1,w=1,T=1){super(),this.type="BoxGeometry",this.parameters={width:d,height:v,depth:A,widthSegments:C,heightSegments:w,depthSegments:T};const R=this;C=Math.floor(C),w=Math.floor(w),T=Math.floor(T);const G=[],I=[],z=[],H=[];let Y=0,ee=0;ie("z","y","x",-1,-1,A,v,d,T,w,0),ie("z","y","x",1,-1,A,v,-d,T,w,1),ie("x","z","y",1,1,d,A,v,C,T,2),ie("x","z","y",1,-1,d,A,-v,C,T,3),ie("x","y","z",1,-1,d,v,A,C,w,4),ie("x","y","z",-1,-1,d,v,-A,C,w,5),this.setIndex(G),this.setAttribute("position",new Float32BufferAttribute(I,3)),this.setAttribute("normal",new Float32BufferAttribute(z,3)),this.setAttribute("uv",new Float32BufferAttribute(H,2));function ie(oe,se,re,fe,ue,ge,ye,be,ve,Me,we){const Be=ge/ve,De=ye/Me,Fe=ge/2,Oe=ye/2,Ge=be/2,ze=ve+1,je=Me+1;let He=0,Xe=0;const $e=new Vector3;for(let We=0;We<je;We++){const nt=We*De-Oe;for(let Qt=0;Qt<ze;Qt++){const Wt=Qt*Be-Fe;$e[oe]=Wt*fe,$e[se]=nt*ue,$e[re]=Ge,I.push($e.x,$e.y,$e.z),$e[oe]=0,$e[se]=0,$e[re]=be>0?1:-1,z.push($e.x,$e.y,$e.z),H.push(Qt/ve),H.push(1-We/Me),He+=1}}for(let We=0;We<Me;We++)for(let nt=0;nt<ve;nt++){const Qt=Y+nt+ze*We,Wt=Y+nt+ze*(We+1),Bn=Y+(nt+1)+ze*(We+1),Lt=Y+(nt+1)+ze*We;G.push(Qt,Wt,Lt),G.push(Wt,Bn,Lt),Xe+=6}R.addGroup(ee,Xe,we),ee+=Xe,Y+=He}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new BoxGeometry(d.width,d.height,d.depth,d.widthSegments,d.heightSegments,d.depthSegments)}}function cloneUniforms(_){const d={};for(const v in _){d[v]={};for(const A in _[v]){const C=_[v][A];C&&(C.isColor||C.isMatrix3||C.isMatrix4||C.isVector2||C.isVector3||C.isVector4||C.isTexture||C.isQuaternion)?C.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),d[v][A]=null):d[v][A]=C.clone():Array.isArray(C)?d[v][A]=C.slice():d[v][A]=C}}return d}function mergeUniforms(_){const d={};for(let v=0;v<_.length;v++){const A=cloneUniforms(_[v]);for(const C in A)d[C]=A[C]}return d}function cloneUniformsGroups(_){const d=[];for(let v=0;v<_.length;v++)d.push(_[v].clone());return d}function getUnlitUniformColorSpace(_){const d=_.getRenderTarget();return d===null?_.outputColorSpace:d.isXRRenderTarget===!0?d.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(d){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,d!==void 0&&this.setValues(d)}copy(d){return super.copy(d),this.fragmentShader=d.fragmentShader,this.vertexShader=d.vertexShader,this.uniforms=cloneUniforms(d.uniforms),this.uniformsGroups=cloneUniformsGroups(d.uniformsGroups),this.defines=Object.assign({},d.defines),this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.fog=d.fog,this.lights=d.lights,this.clipping=d.clipping,this.extensions=Object.assign({},d.extensions),this.glslVersion=d.glslVersion,this}toJSON(d){const v=super.toJSON(d);v.glslVersion=this.glslVersion,v.uniforms={};for(const C in this.uniforms){const T=this.uniforms[C].value;T&&T.isTexture?v.uniforms[C]={type:"t",value:T.toJSON(d).uuid}:T&&T.isColor?v.uniforms[C]={type:"c",value:T.getHex()}:T&&T.isVector2?v.uniforms[C]={type:"v2",value:T.toArray()}:T&&T.isVector3?v.uniforms[C]={type:"v3",value:T.toArray()}:T&&T.isVector4?v.uniforms[C]={type:"v4",value:T.toArray()}:T&&T.isMatrix3?v.uniforms[C]={type:"m3",value:T.toArray()}:T&&T.isMatrix4?v.uniforms[C]={type:"m4",value:T.toArray()}:v.uniforms[C]={value:T}}Object.keys(this.defines).length>0&&(v.defines=this.defines),v.vertexShader=this.vertexShader,v.fragmentShader=this.fragmentShader,v.lights=this.lights,v.clipping=this.clipping;const A={};for(const C in this.extensions)this.extensions[C]===!0&&(A[C]=!0);return Object.keys(A).length>0&&(v.extensions=A),v}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(d,v){return super.copy(d,v),this.matrixWorldInverse.copy(d.matrixWorldInverse),this.projectionMatrix.copy(d.projectionMatrix),this.projectionMatrixInverse.copy(d.projectionMatrixInverse),this.coordinateSystem=d.coordinateSystem,this}getWorldDirection(d){return super.getWorldDirection(d).negate()}updateMatrixWorld(d){super.updateMatrixWorld(d),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(d,v){super.updateWorldMatrix(d,v),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(d=50,v=1,A=.1,C=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=d,this.zoom=1,this.near=A,this.far=C,this.focus=10,this.aspect=v,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(d,v){return super.copy(d,v),this.fov=d.fov,this.zoom=d.zoom,this.near=d.near,this.far=d.far,this.focus=d.focus,this.aspect=d.aspect,this.view=d.view===null?null:Object.assign({},d.view),this.filmGauge=d.filmGauge,this.filmOffset=d.filmOffset,this}setFocalLength(d){const v=.5*this.getFilmHeight()/d;this.fov=RAD2DEG*2*Math.atan(v),this.updateProjectionMatrix()}getFocalLength(){const d=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/d}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(d,v,A){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),v.set(_v3$1.x,_v3$1.y).multiplyScalar(-d/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),A.set(_v3$1.x,_v3$1.y).multiplyScalar(-d/_v3$1.z)}getViewSize(d,v){return this.getViewBounds(d,_minTarget,_maxTarget),v.subVectors(_maxTarget,_minTarget)}setViewOffset(d,v,A,C,w,T){this.aspect=d/v,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=d,this.view.fullHeight=v,this.view.offsetX=A,this.view.offsetY=C,this.view.width=w,this.view.height=T,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const d=this.near;let v=d*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,A=2*v,C=this.aspect*A,w=-.5*C;const T=this.view;if(this.view!==null&&this.view.enabled){const G=T.fullWidth,I=T.fullHeight;w+=T.offsetX*C/G,v-=T.offsetY*A/I,C*=T.width/G,A*=T.height/I}const R=this.filmOffset;R!==0&&(w+=d*R/this.getFilmWidth()),this.projectionMatrix.makePerspective(w,w+C,v,v-A,d,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(d){const v=super.toJSON(d);return v.object.fov=this.fov,v.object.zoom=this.zoom,v.object.near=this.near,v.object.far=this.far,v.object.focus=this.focus,v.object.aspect=this.aspect,this.view!==null&&(v.object.view=Object.assign({},this.view)),v.object.filmGauge=this.filmGauge,v.object.filmOffset=this.filmOffset,v}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(d,v,A){super(),this.type="CubeCamera",this.renderTarget=A,this.coordinateSystem=null,this.activeMipmapLevel=0;const C=new PerspectiveCamera(fov,aspect,d,v);C.layers=this.layers,this.add(C);const w=new PerspectiveCamera(fov,aspect,d,v);w.layers=this.layers,this.add(w);const T=new PerspectiveCamera(fov,aspect,d,v);T.layers=this.layers,this.add(T);const R=new PerspectiveCamera(fov,aspect,d,v);R.layers=this.layers,this.add(R);const G=new PerspectiveCamera(fov,aspect,d,v);G.layers=this.layers,this.add(G);const I=new PerspectiveCamera(fov,aspect,d,v);I.layers=this.layers,this.add(I)}updateCoordinateSystem(){const d=this.coordinateSystem,v=this.children.concat(),[A,C,w,T,R,G]=v;for(const I of v)this.remove(I);if(d===WebGLCoordinateSystem)A.up.set(0,1,0),A.lookAt(1,0,0),C.up.set(0,1,0),C.lookAt(-1,0,0),w.up.set(0,0,-1),w.lookAt(0,1,0),T.up.set(0,0,1),T.lookAt(0,-1,0),R.up.set(0,1,0),R.lookAt(0,0,1),G.up.set(0,1,0),G.lookAt(0,0,-1);else if(d===WebGPUCoordinateSystem)A.up.set(0,-1,0),A.lookAt(-1,0,0),C.up.set(0,-1,0),C.lookAt(1,0,0),w.up.set(0,0,1),w.lookAt(0,1,0),T.up.set(0,0,-1),T.lookAt(0,-1,0),R.up.set(0,-1,0),R.lookAt(0,0,1),G.up.set(0,-1,0),G.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+d);for(const I of v)this.add(I),I.updateMatrixWorld()}update(d,v){this.parent===null&&this.updateMatrixWorld();const{renderTarget:A,activeMipmapLevel:C}=this;this.coordinateSystem!==d.coordinateSystem&&(this.coordinateSystem=d.coordinateSystem,this.updateCoordinateSystem());const[w,T,R,G,I,z]=this.children,H=d.getRenderTarget(),Y=d.getActiveCubeFace(),ee=d.getActiveMipmapLevel(),ie=d.xr.enabled;d.xr.enabled=!1;const oe=A.texture.generateMipmaps;A.texture.generateMipmaps=!1,d.setRenderTarget(A,0,C),d.render(v,w),d.setRenderTarget(A,1,C),d.render(v,T),d.setRenderTarget(A,2,C),d.render(v,R),d.setRenderTarget(A,3,C),d.render(v,G),d.setRenderTarget(A,4,C),d.render(v,I),A.texture.generateMipmaps=oe,d.setRenderTarget(A,5,C),d.render(v,z),d.setRenderTarget(H,Y,ee),d.xr.enabled=ie,A.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(d=[],v=CubeReflectionMapping,A,C,w,T,R,G,I,z){super(d,v,A,C,w,T,R,G,I,z),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(d){this.image=d}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(d=1,v={}){super(d,d,v),this.isWebGLCubeRenderTarget=!0;const A={width:d,height:d,depth:1},C=[A,A,A,A,A,A];this.texture=new CubeTexture(C),this._setTextureOptions(v),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(d,v){this.texture.type=v.type,this.texture.colorSpace=v.colorSpace,this.texture.generateMipmaps=v.generateMipmaps,this.texture.minFilter=v.minFilter,this.texture.magFilter=v.magFilter;const A={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},C=new BoxGeometry(5,5,5),w=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(A.uniforms),vertexShader:A.vertexShader,fragmentShader:A.fragmentShader,side:BackSide,blending:NoBlending});w.uniforms.tEquirect.value=v;const T=new Mesh(C,w),R=v.minFilter;return v.minFilter===LinearMipmapLinearFilter&&(v.minFilter=LinearFilter),new CubeCamera(1,10,this).update(d,T),v.minFilter=R,T.geometry.dispose(),T.material.dispose(),this}clear(d,v=!0,A=!0,C=!0){const w=d.getRenderTarget();for(let T=0;T<6;T++)d.setRenderTarget(this,T),d.clear(v,A,C);d.setRenderTarget(w)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(d){return this._targetRay!==null&&this._targetRay.dispatchEvent(d),this._grip!==null&&this._grip.dispatchEvent(d),this._hand!==null&&this._hand.dispatchEvent(d),this}connect(d){if(d&&d.hand){const v=this._hand;if(v)for(const A of d.hand.values())this._getHandJoint(v,A)}return this.dispatchEvent({type:"connected",data:d}),this}disconnect(d){return this.dispatchEvent({type:"disconnected",data:d}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(d,v,A){let C=null,w=null,T=null;const R=this._targetRay,G=this._grip,I=this._hand;if(d&&v.session.visibilityState!=="visible-blurred"){if(I&&d.hand){T=!0;for(const oe of d.hand.values()){const se=v.getJointPose(oe,A),re=this._getHandJoint(I,oe);se!==null&&(re.matrix.fromArray(se.transform.matrix),re.matrix.decompose(re.position,re.rotation,re.scale),re.matrixWorldNeedsUpdate=!0,re.jointRadius=se.radius),re.visible=se!==null}const z=I.joints["index-finger-tip"],H=I.joints["thumb-tip"],Y=z.position.distanceTo(H.position),ee=.02,ie=.005;I.inputState.pinching&&Y>ee+ie?(I.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:d.handedness,target:this})):!I.inputState.pinching&&Y<=ee-ie&&(I.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:d.handedness,target:this}))}else G!==null&&d.gripSpace&&(w=v.getPose(d.gripSpace,A),w!==null&&(G.matrix.fromArray(w.transform.matrix),G.matrix.decompose(G.position,G.rotation,G.scale),G.matrixWorldNeedsUpdate=!0,w.linearVelocity?(G.hasLinearVelocity=!0,G.linearVelocity.copy(w.linearVelocity)):G.hasLinearVelocity=!1,w.angularVelocity?(G.hasAngularVelocity=!0,G.angularVelocity.copy(w.angularVelocity)):G.hasAngularVelocity=!1));R!==null&&(C=v.getPose(d.targetRaySpace,A),C===null&&w!==null&&(C=w),C!==null&&(R.matrix.fromArray(C.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,C.linearVelocity?(R.hasLinearVelocity=!0,R.linearVelocity.copy(C.linearVelocity)):R.hasLinearVelocity=!1,C.angularVelocity?(R.hasAngularVelocity=!0,R.angularVelocity.copy(C.angularVelocity)):R.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return R!==null&&(R.visible=C!==null),G!==null&&(G.visible=w!==null),I!==null&&(I.visible=T!==null),this}_getHandJoint(d,v){if(d.joints[v.jointName]===void 0){const A=new Group;A.matrixAutoUpdate=!1,A.visible=!1,d.joints[v.jointName]=A,d.add(A)}return d.joints[v.jointName]}}class FogExp2{constructor(d,v=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(d),this.density=v}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(d,v=1,A=1e3){this.isFog=!0,this.name="",this.color=new Color(d),this.near=v,this.far=A}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(d,v){return super.copy(d,v),d.background!==null&&(this.background=d.background.clone()),d.environment!==null&&(this.environment=d.environment.clone()),d.fog!==null&&(this.fog=d.fog.clone()),this.backgroundBlurriness=d.backgroundBlurriness,this.backgroundIntensity=d.backgroundIntensity,this.backgroundRotation.copy(d.backgroundRotation),this.environmentIntensity=d.environmentIntensity,this.environmentRotation.copy(d.environmentRotation),d.overrideMaterial!==null&&(this.overrideMaterial=d.overrideMaterial.clone()),this.matrixAutoUpdate=d.matrixAutoUpdate,this}toJSON(d){const v=super.toJSON(d);return this.fog!==null&&(v.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(v.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(v.object.backgroundIntensity=this.backgroundIntensity),v.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(v.object.environmentIntensity=this.environmentIntensity),v.object.environmentRotation=this.environmentRotation.toArray(),v}}class InterleavedBuffer{constructor(d,v){this.isInterleavedBuffer=!0,this.array=d,this.stride=v,this.count=d!==void 0?d.length/v:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(d){d===!0&&this.version++}setUsage(d){return this.usage=d,this}addUpdateRange(d,v){this.updateRanges.push({start:d,count:v})}clearUpdateRanges(){this.updateRanges.length=0}copy(d){return this.array=new d.array.constructor(d.array),this.count=d.count,this.stride=d.stride,this.usage=d.usage,this}copyAt(d,v,A){d*=this.stride,A*=v.stride;for(let C=0,w=this.stride;C<w;C++)this.array[d+C]=v.array[A+C];return this}set(d,v=0){return this.array.set(d,v),this}clone(d){d.arrayBuffers===void 0&&(d.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),d.arrayBuffers[this.array.buffer._uuid]===void 0&&(d.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const v=new this.array.constructor(d.arrayBuffers[this.array.buffer._uuid]),A=new this.constructor(v,this.stride);return A.setUsage(this.usage),A}onUpload(d){return this.onUploadCallback=d,this}toJSON(d){return d.arrayBuffers===void 0&&(d.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),d.arrayBuffers[this.array.buffer._uuid]===void 0&&(d.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(d,v,A,C=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=d,this.itemSize=v,this.offset=A,this.normalized=C}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(d){this.data.needsUpdate=d}applyMatrix4(d){for(let v=0,A=this.data.count;v<A;v++)_vector$7.fromBufferAttribute(this,v),_vector$7.applyMatrix4(d),this.setXYZ(v,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(d){for(let v=0,A=this.count;v<A;v++)_vector$7.fromBufferAttribute(this,v),_vector$7.applyNormalMatrix(d),this.setXYZ(v,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(d){for(let v=0,A=this.count;v<A;v++)_vector$7.fromBufferAttribute(this,v),_vector$7.transformDirection(d),this.setXYZ(v,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(d,v){let A=this.array[d*this.data.stride+this.offset+v];return this.normalized&&(A=denormalize(A,this.array)),A}setComponent(d,v,A){return this.normalized&&(A=normalize(A,this.array)),this.data.array[d*this.data.stride+this.offset+v]=A,this}setX(d,v){return this.normalized&&(v=normalize(v,this.array)),this.data.array[d*this.data.stride+this.offset]=v,this}setY(d,v){return this.normalized&&(v=normalize(v,this.array)),this.data.array[d*this.data.stride+this.offset+1]=v,this}setZ(d,v){return this.normalized&&(v=normalize(v,this.array)),this.data.array[d*this.data.stride+this.offset+2]=v,this}setW(d,v){return this.normalized&&(v=normalize(v,this.array)),this.data.array[d*this.data.stride+this.offset+3]=v,this}getX(d){let v=this.data.array[d*this.data.stride+this.offset];return this.normalized&&(v=denormalize(v,this.array)),v}getY(d){let v=this.data.array[d*this.data.stride+this.offset+1];return this.normalized&&(v=denormalize(v,this.array)),v}getZ(d){let v=this.data.array[d*this.data.stride+this.offset+2];return this.normalized&&(v=denormalize(v,this.array)),v}getW(d){let v=this.data.array[d*this.data.stride+this.offset+3];return this.normalized&&(v=denormalize(v,this.array)),v}setXY(d,v,A){return d=d*this.data.stride+this.offset,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array)),this.data.array[d+0]=v,this.data.array[d+1]=A,this}setXYZ(d,v,A,C){return d=d*this.data.stride+this.offset,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array),C=normalize(C,this.array)),this.data.array[d+0]=v,this.data.array[d+1]=A,this.data.array[d+2]=C,this}setXYZW(d,v,A,C,w){return d=d*this.data.stride+this.offset,this.normalized&&(v=normalize(v,this.array),A=normalize(A,this.array),C=normalize(C,this.array),w=normalize(w,this.array)),this.data.array[d+0]=v,this.data.array[d+1]=A,this.data.array[d+2]=C,this.data.array[d+3]=w,this}clone(d){if(d===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const v=[];for(let A=0;A<this.count;A++){const C=A*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)v.push(this.data.array[C+w])}return new BufferAttribute(new this.array.constructor(v),this.itemSize,this.normalized)}else return d.interleavedBuffers===void 0&&(d.interleavedBuffers={}),d.interleavedBuffers[this.data.uuid]===void 0&&(d.interleavedBuffers[this.data.uuid]=this.data.clone(d)),new InterleavedBufferAttribute(d.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(d){if(d===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const v=[];for(let A=0;A<this.count;A++){const C=A*this.data.stride+this.offset;for(let w=0;w<this.itemSize;w++)v.push(this.data.array[C+w])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:v,normalized:this.normalized}}else return d.interleavedBuffers===void 0&&(d.interleavedBuffers={}),d.interleavedBuffers[this.data.uuid]===void 0&&(d.interleavedBuffers[this.data.uuid]=this.data.toJSON(d)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(d){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.map=d.map,this.alphaMap=d.alphaMap,this.rotation=d.rotation,this.sizeAttenuation=d.sizeAttenuation,this.fog=d.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(d=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const v=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),A=new InterleavedBuffer(v,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(A,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(A,2,3,!1))}this.geometry=_geometry,this.material=d,this.center=new Vector2(.5,.5),this.count=1}raycast(d,v){d.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(d.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(d.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),d.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const A=this.material.rotation;let C,w;A!==0&&(w=Math.cos(A),C=Math.sin(A));const T=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,T,_worldScale,C,w),transformVertex(_vB.set(.5,-.5,0),_mvPosition,T,_worldScale,C,w),transformVertex(_vC.set(.5,.5,0),_mvPosition,T,_worldScale,C,w),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let R=d.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(R===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,T,_worldScale,C,w),_uvB.set(0,1),R=d.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),R===null))return;const G=d.ray.origin.distanceTo(_intersectPoint);G<d.near||G>d.far||v.push({distance:G,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(d,v){return super.copy(d,v),d.center!==void 0&&this.center.copy(d.center),this.material=d.material,this}}function transformVertex(_,d,v,A,C,w){_alignedPosition.subVectors(_,v).addScalar(.5).multiply(A),C!==void 0?(_rotatedPosition.x=w*_alignedPosition.x-C*_alignedPosition.y,_rotatedPosition.y=C*_alignedPosition.x+w*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),_.copy(d),_.x+=_rotatedPosition.x,_.y+=_rotatedPosition.y,_.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(d){super.copy(d,!1);const v=d.levels;for(let A=0,C=v.length;A<C;A++){const w=v[A];this.addLevel(w.object.clone(),w.distance,w.hysteresis)}return this.autoUpdate=d.autoUpdate,this}addLevel(d,v=0,A=0){v=Math.abs(v);const C=this.levels;let w;for(w=0;w<C.length&&!(v<C[w].distance);w++);return C.splice(w,0,{distance:v,hysteresis:A,object:d}),this.add(d),this}removeLevel(d){const v=this.levels;for(let A=0;A<v.length;A++)if(v[A].distance===d){const C=v.splice(A,1);return this.remove(C[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(d){const v=this.levels;if(v.length>0){let A,C;for(A=1,C=v.length;A<C;A++){let w=v[A].distance;if(v[A].object.visible&&(w-=w*v[A].hysteresis),d<w)break}return v[A-1].object}return null}raycast(d,v){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const C=d.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(C).raycast(d,v)}}update(d){const v=this.levels;if(v.length>1){_v1$2.setFromMatrixPosition(d.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const A=_v1$2.distanceTo(_v2$1)/d.zoom;v[0].object.visible=!0;let C,w;for(C=1,w=v.length;C<w;C++){let T=v[C].distance;if(v[C].object.visible&&(T-=T*v[C].hysteresis),A>=T)v[C-1].object.visible=!1,v[C].object.visible=!0;else break}for(this._currentLevel=C-1;C<w;C++)v[C].object.visible=!1}}toJSON(d){const v=super.toJSON(d);this.autoUpdate===!1&&(v.object.autoUpdate=!1),v.object.levels=[];const A=this.levels;for(let C=0,w=A.length;C<w;C++){const T=A[C];v.object.levels.push({object:T.object.uuid,distance:T.distance,hysteresis:T.hysteresis})}return v}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(d,v){super(d,v),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const d=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const v=d.getAttribute("position");for(let A=0;A<v.count;A++)this.getVertexPosition(A,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const d=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const v=d.getAttribute("position");for(let A=0;A<v.count;A++)this.getVertexPosition(A,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(d,v){return super.copy(d,v),this.bindMode=d.bindMode,this.bindMatrix.copy(d.bindMatrix),this.bindMatrixInverse.copy(d.bindMatrixInverse),this.skeleton=d.skeleton,d.boundingBox!==null&&(this.boundingBox=d.boundingBox.clone()),d.boundingSphere!==null&&(this.boundingSphere=d.boundingSphere.clone()),this}raycast(d,v){const A=this.material,C=this.matrixWorld;A!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(C),d.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(C).invert(),_ray$2.copy(d.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(d,v,_ray$2)))}getVertexPosition(d,v){return super.getVertexPosition(d,v),this.applyBoneTransform(d,v),v}bind(d,v){this.skeleton=d,v===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),v=this.matrixWorld),this.bindMatrix.copy(v),this.bindMatrixInverse.copy(v).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const d=new Vector4,v=this.geometry.attributes.skinWeight;for(let A=0,C=v.count;A<C;A++){d.fromBufferAttribute(v,A);const w=1/d.manhattanLength();w!==1/0?d.multiplyScalar(w):d.set(1,0,0,0),v.setXYZW(A,d.x,d.y,d.z,d.w)}}updateMatrixWorld(d){super.updateMatrixWorld(d),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(d,v){const A=this.skeleton,C=this.geometry;_skinIndex.fromBufferAttribute(C.attributes.skinIndex,d),_skinWeight.fromBufferAttribute(C.attributes.skinWeight,d),_basePosition.copy(v).applyMatrix4(this.bindMatrix),v.set(0,0,0);for(let w=0;w<4;w++){const T=_skinWeight.getComponent(w);if(T!==0){const R=_skinIndex.getComponent(w);_matrix4.multiplyMatrices(A.bones[R].matrixWorld,A.boneInverses[R]),v.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),T)}}return v.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(d=null,v=1,A=1,C,w,T,R,G,I=NearestFilter,z=NearestFilter,H,Y){super(null,T,R,G,I,z,C,w,H,Y),this.isDataTexture=!0,this.image={data:d,width:v,height:A},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(d=[],v=[]){this.uuid=generateUUID$1(),this.bones=d.slice(0),this.boneInverses=v,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const d=this.bones,v=this.boneInverses;if(this.boneMatrices=new Float32Array(d.length*16),v.length===0)this.calculateInverses();else if(d.length!==v.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let A=0,C=this.bones.length;A<C;A++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let d=0,v=this.bones.length;d<v;d++){const A=new Matrix4;this.bones[d]&&A.copy(this.bones[d].matrixWorld).invert(),this.boneInverses.push(A)}}pose(){for(let d=0,v=this.bones.length;d<v;d++){const A=this.bones[d];A&&A.matrixWorld.copy(this.boneInverses[d]).invert()}for(let d=0,v=this.bones.length;d<v;d++){const A=this.bones[d];A&&(A.parent&&A.parent.isBone?(A.matrix.copy(A.parent.matrixWorld).invert(),A.matrix.multiply(A.matrixWorld)):A.matrix.copy(A.matrixWorld),A.matrix.decompose(A.position,A.quaternion,A.scale))}}update(){const d=this.bones,v=this.boneInverses,A=this.boneMatrices,C=this.boneTexture;for(let w=0,T=d.length;w<T;w++){const R=d[w]?d[w].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(R,v[w]),_offsetMatrix.toArray(A,w*16)}C!==null&&(C.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let d=Math.sqrt(this.bones.length*4);d=Math.ceil(d/4)*4,d=Math.max(d,4);const v=new Float32Array(d*d*4);v.set(this.boneMatrices);const A=new DataTexture(v,d,d,RGBAFormat,FloatType);return A.needsUpdate=!0,this.boneMatrices=v,this.boneTexture=A,this}getBoneByName(d){for(let v=0,A=this.bones.length;v<A;v++){const C=this.bones[v];if(C.name===d)return C}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(d,v){this.uuid=d.uuid;for(let A=0,C=d.bones.length;A<C;A++){const w=d.bones[A];let T=v[w];T===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",w),T=new Bone),this.bones.push(T),this.boneInverses.push(new Matrix4().fromArray(d.boneInverses[A]))}return this.init(),this}toJSON(){const d={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};d.uuid=this.uuid;const v=this.bones,A=this.boneInverses;for(let C=0,w=v.length;C<w;C++){const T=v[C];d.bones.push(T.uuid);const R=A[C];d.boneInverses.push(R.toArray())}return d}}class InstancedBufferAttribute extends BufferAttribute{constructor(d,v,A,C=1){super(d,v,A),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=C}copy(d){return super.copy(d),this.meshPerAttribute=d.meshPerAttribute,this}toJSON(){const d=super.toJSON();return d.meshPerAttribute=this.meshPerAttribute,d.isInstancedBufferAttribute=!0,d}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(d,v,A){super(d,v),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(A*16),16),this.instanceColor=null,this.morphTexture=null,this.count=A,this.boundingBox=null,this.boundingSphere=null;for(let C=0;C<A;C++)this.setMatrixAt(C,_identity)}computeBoundingBox(){const d=this.geometry,v=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),d.boundingBox===null&&d.computeBoundingBox(),this.boundingBox.makeEmpty();for(let A=0;A<v;A++)this.getMatrixAt(A,_instanceLocalMatrix),_box3.copy(d.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const d=this.geometry,v=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),d.boundingSphere===null&&d.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let A=0;A<v;A++)this.getMatrixAt(A,_instanceLocalMatrix),_sphere$4.copy(d.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(d,v){return super.copy(d,v),this.instanceMatrix.copy(d.instanceMatrix),d.morphTexture!==null&&(this.morphTexture=d.morphTexture.clone()),d.instanceColor!==null&&(this.instanceColor=d.instanceColor.clone()),this.count=d.count,d.boundingBox!==null&&(this.boundingBox=d.boundingBox.clone()),d.boundingSphere!==null&&(this.boundingSphere=d.boundingSphere.clone()),this}getColorAt(d,v){v.fromArray(this.instanceColor.array,d*3)}getMatrixAt(d,v){v.fromArray(this.instanceMatrix.array,d*16)}getMorphAt(d,v){const A=v.morphTargetInfluences,C=this.morphTexture.source.data.data,w=A.length+1,T=d*w+1;for(let R=0;R<A.length;R++)A[R]=C[T+R]}raycast(d,v){const A=this.matrixWorld,C=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(A),d.ray.intersectsSphere(_sphere$4)!==!1))for(let w=0;w<C;w++){this.getMatrixAt(w,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(A,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(d,_instanceIntersects);for(let T=0,R=_instanceIntersects.length;T<R;T++){const G=_instanceIntersects[T];G.instanceId=w,G.object=this,v.push(G)}_instanceIntersects.length=0}}setColorAt(d,v){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),v.toArray(this.instanceColor.array,d*3)}setMatrixAt(d,v){v.toArray(this.instanceMatrix.array,d*16)}setMorphAt(d,v){const A=v.morphTargetInfluences,C=A.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(C*this.count),C,this.count,RedFormat,FloatType));const w=this.morphTexture.source.data.data;let T=0;for(let I=0;I<A.length;I++)T+=A[I];const R=this.geometry.morphTargetsRelative?1:1-T,G=C*d;w[G]=R,w.set(A,G+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(d=new Vector3(1,0,0),v=0){this.isPlane=!0,this.normal=d,this.constant=v}set(d,v){return this.normal.copy(d),this.constant=v,this}setComponents(d,v,A,C){return this.normal.set(d,v,A),this.constant=C,this}setFromNormalAndCoplanarPoint(d,v){return this.normal.copy(d),this.constant=-v.dot(this.normal),this}setFromCoplanarPoints(d,v,A){const C=_vector1.subVectors(A,v).cross(_vector2.subVectors(d,v)).normalize();return this.setFromNormalAndCoplanarPoint(C,d),this}copy(d){return this.normal.copy(d.normal),this.constant=d.constant,this}normalize(){const d=1/this.normal.length();return this.normal.multiplyScalar(d),this.constant*=d,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(d){return this.normal.dot(d)+this.constant}distanceToSphere(d){return this.distanceToPoint(d.center)-d.radius}projectPoint(d,v){return v.copy(d).addScaledVector(this.normal,-this.distanceToPoint(d))}intersectLine(d,v){const A=d.delta(_vector1),C=this.normal.dot(A);if(C===0)return this.distanceToPoint(d.start)===0?v.copy(d.start):null;const w=-(d.start.dot(this.normal)+this.constant)/C;return w<0||w>1?null:v.copy(d.start).addScaledVector(A,w)}intersectsLine(d){const v=this.distanceToPoint(d.start),A=this.distanceToPoint(d.end);return v<0&&A>0||A<0&&v>0}intersectsBox(d){return d.intersectsPlane(this)}intersectsSphere(d){return d.intersectsPlane(this)}coplanarPoint(d){return d.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(d,v){const A=v||_normalMatrix.getNormalMatrix(d),C=this.coplanarPoint(_vector1).applyMatrix4(d),w=this.normal.applyMatrix3(A).normalize();return this.constant=-C.dot(w),this}translate(d){return this.constant-=d.dot(this.normal),this}equals(d){return d.normal.equals(this.normal)&&d.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_defaultSpriteCenter=new Vector2(.5,.5),_vector$6=new Vector3;class Frustum{constructor(d=new Plane,v=new Plane,A=new Plane,C=new Plane,w=new Plane,T=new Plane){this.planes=[d,v,A,C,w,T]}set(d,v,A,C,w,T){const R=this.planes;return R[0].copy(d),R[1].copy(v),R[2].copy(A),R[3].copy(C),R[4].copy(w),R[5].copy(T),this}copy(d){const v=this.planes;for(let A=0;A<6;A++)v[A].copy(d.planes[A]);return this}setFromProjectionMatrix(d,v=WebGLCoordinateSystem,A=!1){const C=this.planes,w=d.elements,T=w[0],R=w[1],G=w[2],I=w[3],z=w[4],H=w[5],Y=w[6],ee=w[7],ie=w[8],oe=w[9],se=w[10],re=w[11],fe=w[12],ue=w[13],ge=w[14],ye=w[15];if(C[0].setComponents(I-T,ee-z,re-ie,ye-fe).normalize(),C[1].setComponents(I+T,ee+z,re+ie,ye+fe).normalize(),C[2].setComponents(I+R,ee+H,re+oe,ye+ue).normalize(),C[3].setComponents(I-R,ee-H,re-oe,ye-ue).normalize(),A)C[4].setComponents(G,Y,se,ge).normalize(),C[5].setComponents(I-G,ee-Y,re-se,ye-ge).normalize();else if(C[4].setComponents(I-G,ee-Y,re-se,ye-ge).normalize(),v===WebGLCoordinateSystem)C[5].setComponents(I+G,ee+Y,re+se,ye+ge).normalize();else if(v===WebGPUCoordinateSystem)C[5].setComponents(G,Y,se,ge).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+v);return this}intersectsObject(d){if(d.boundingSphere!==void 0)d.boundingSphere===null&&d.computeBoundingSphere(),_sphere$3.copy(d.boundingSphere).applyMatrix4(d.matrixWorld);else{const v=d.geometry;v.boundingSphere===null&&v.computeBoundingSphere(),_sphere$3.copy(v.boundingSphere).applyMatrix4(d.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(d){_sphere$3.center.set(0,0,0);const v=_defaultSpriteCenter.distanceTo(d.center);return _sphere$3.radius=.7071067811865476+v,_sphere$3.applyMatrix4(d.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(d){const v=this.planes,A=d.center,C=-d.radius;for(let w=0;w<6;w++)if(v[w].distanceToPoint(A)<C)return!1;return!0}intersectsBox(d){const v=this.planes;for(let A=0;A<6;A++){const C=v[A];if(_vector$6.x=C.normal.x>0?d.max.x:d.min.x,_vector$6.y=C.normal.y>0?d.max.y:d.min.y,_vector$6.z=C.normal.z>0?d.max.z:d.min.z,C.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(d){const v=this.planes;for(let A=0;A<6;A++)if(v[A].distanceToPoint(d)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _projScreenMatrix$2=new Matrix4,_frustum$1=new Frustum;class FrustumArray{constructor(){this.coordinateSystem=WebGLCoordinateSystem}intersectsObject(d,v){if(!v.isArrayCamera||v.cameras.length===0)return!1;for(let A=0;A<v.cameras.length;A++){const C=v.cameras[A];if(_projScreenMatrix$2.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,C.coordinateSystem,C.reversedDepth),_frustum$1.intersectsObject(d))return!0}return!1}intersectsSprite(d,v){if(!v||!v.cameras||v.cameras.length===0)return!1;for(let A=0;A<v.cameras.length;A++){const C=v.cameras[A];if(_projScreenMatrix$2.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,C.coordinateSystem,C.reversedDepth),_frustum$1.intersectsSprite(d))return!0}return!1}intersectsSphere(d,v){if(!v||!v.cameras||v.cameras.length===0)return!1;for(let A=0;A<v.cameras.length;A++){const C=v.cameras[A];if(_projScreenMatrix$2.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,C.coordinateSystem,C.reversedDepth),_frustum$1.intersectsSphere(d))return!0}return!1}intersectsBox(d,v){if(!v||!v.cameras||v.cameras.length===0)return!1;for(let A=0;A<v.cameras.length;A++){const C=v.cameras[A];if(_projScreenMatrix$2.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,C.coordinateSystem,C.reversedDepth),_frustum$1.intersectsBox(d))return!0}return!1}containsPoint(d,v){if(!v||!v.cameras||v.cameras.length===0)return!1;for(let A=0;A<v.cameras.length;A++){const C=v.cameras[A];if(_projScreenMatrix$2.multiplyMatrices(C.projectionMatrix,C.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$2,C.coordinateSystem,C.reversedDepth),_frustum$1.containsPoint(d))return!0}return!1}clone(){return new FrustumArray}}function ascIdSort(_,d){return _-d}function sortOpaque(_,d){return _.z-d.z}function sortTransparent(_,d){return d.z-_.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(d,v,A,C){const w=this.pool,T=this.list;this.index>=w.length&&w.push({start:-1,count:-1,z:-1,index:-1});const R=w[this.index];T.push(R),this.index++,R.start=d,R.count=v,R.z=A,R.index=C}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color(1,1,1),_frustum=new Frustum,_frustumArray=new FrustumArray,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward$1=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(_,d,v=0){const A=d.itemSize;if(_.isInterleavedBufferAttribute||_.array.constructor!==d.array.constructor){const C=_.count;for(let w=0;w<C;w++)for(let T=0;T<A;T++)d.setComponent(w+v,T,_.getComponent(w,T))}else d.array.set(_.array,v*A);d.needsUpdate=!0}function copyArrayContents(_,d){if(_.constructor!==d.constructor){const v=Math.min(_.length,d.length);for(let A=0;A<v;A++)d[A]=_[A]}else{const v=Math.min(_.length,d.length);d.set(new _.constructor(_.buffer,0,v))}}class BatchedMesh extends Mesh{constructor(d,v,A=v*2,C){super(new BufferGeometry,C),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=d,this._maxVertexCount=v,this._maxIndexCount=A,this._multiDrawCounts=new Int32Array(d),this._multiDrawStarts=new Int32Array(d),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let d=Math.sqrt(this._maxInstanceCount*4);d=Math.ceil(d/4)*4,d=Math.max(d,4);const v=new Float32Array(d*d*4),A=new DataTexture(v,d,d,RGBAFormat,FloatType);this._matricesTexture=A}_initIndirectTexture(){let d=Math.sqrt(this._maxInstanceCount);d=Math.ceil(d);const v=new Uint32Array(d*d),A=new DataTexture(v,d,d,RedIntegerFormat,UnsignedIntType);this._indirectTexture=A}_initColorsTexture(){let d=Math.sqrt(this._maxInstanceCount);d=Math.ceil(d);const v=new Float32Array(d*d*4).fill(1),A=new DataTexture(v,d,d,RGBAFormat,FloatType);A.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=A}_initializeGeometry(d){const v=this.geometry,A=this._maxVertexCount,C=this._maxIndexCount;if(this._geometryInitialized===!1){for(const w in d.attributes){const T=d.getAttribute(w),{array:R,itemSize:G,normalized:I}=T,z=new R.constructor(A*G),H=new BufferAttribute(z,G,I);v.setAttribute(w,H)}if(d.getIndex()!==null){const w=A>65535?new Uint32Array(C):new Uint16Array(C);v.setIndex(new BufferAttribute(w,1))}this._geometryInitialized=!0}}_validateGeometry(d){const v=this.geometry;if(!!d.getIndex()!=!!v.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const A in v.attributes){if(!d.hasAttribute(A))throw new Error(`THREE.BatchedMesh: Added geometry missing "${A}". All geometries must have consistent attributes.`);const C=d.getAttribute(A),w=v.getAttribute(A);if(C.itemSize!==w.itemSize||C.normalized!==w.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(d){const v=this._instanceInfo;if(d<0||d>=v.length||v[d].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${d}. Instance is either out of range or has been deleted.`)}validateGeometryId(d){const v=this._geometryInfo;if(d<0||d>=v.length||v[d].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${d}. Geometry is either out of range or has been deleted.`)}setCustomSort(d){return this.customSort=d,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const d=this.boundingBox,v=this._instanceInfo;d.makeEmpty();for(let A=0,C=v.length;A<C;A++){if(v[A].active===!1)continue;const w=v[A].geometryIndex;this.getMatrixAt(A,_matrix$1),this.getBoundingBoxAt(w,_box$1).applyMatrix4(_matrix$1),d.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const d=this.boundingSphere,v=this._instanceInfo;d.makeEmpty();for(let A=0,C=v.length;A<C;A++){if(v[A].active===!1)continue;const w=v[A].geometryIndex;this.getMatrixAt(A,_matrix$1),this.getBoundingSphereAt(w,_sphere$2).applyMatrix4(_matrix$1),d.union(_sphere$2)}}addInstance(d){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const A={visible:!0,active:!0,geometryIndex:d};let C=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),C=this._availableInstanceIds.shift(),this._instanceInfo[C]=A):(C=this._instanceInfo.length,this._instanceInfo.push(A));const w=this._matricesTexture;_matrix$1.identity().toArray(w.image.data,C*16),w.needsUpdate=!0;const T=this._colorsTexture;return T&&(_whiteColor.toArray(T.image.data,C*4),T.needsUpdate=!0),this._visibilityChanged=!0,C}addGeometry(d,v=-1,A=-1){this._initializeGeometry(d),this._validateGeometry(d);const C={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},w=this._geometryInfo;C.vertexStart=this._nextVertexStart,C.reservedVertexCount=v===-1?d.getAttribute("position").count:v;const T=d.getIndex();if(T!==null&&(C.indexStart=this._nextIndexStart,C.reservedIndexCount=A===-1?T.count:A),C.indexStart!==-1&&C.indexStart+C.reservedIndexCount>this._maxIndexCount||C.vertexStart+C.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let G;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),G=this._availableGeometryIds.shift(),w[G]=C):(G=this._geometryCount,this._geometryCount++,w.push(C)),this.setGeometryAt(G,d),this._nextIndexStart=C.indexStart+C.reservedIndexCount,this._nextVertexStart=C.vertexStart+C.reservedVertexCount,G}setGeometryAt(d,v){if(d>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(v);const A=this.geometry,C=A.getIndex()!==null,w=A.getIndex(),T=v.getIndex(),R=this._geometryInfo[d];if(C&&T.count>R.reservedIndexCount||v.attributes.position.count>R.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const G=R.vertexStart,I=R.reservedVertexCount;R.vertexCount=v.getAttribute("position").count;for(const z in A.attributes){const H=v.getAttribute(z),Y=A.getAttribute(z);copyAttributeData(H,Y,G);const ee=H.itemSize;for(let ie=H.count,oe=I;ie<oe;ie++){const se=G+ie;for(let re=0;re<ee;re++)Y.setComponent(se,re,0)}Y.needsUpdate=!0,Y.addUpdateRange(G*ee,I*ee)}if(C){const z=R.indexStart,H=R.reservedIndexCount;R.indexCount=v.getIndex().count;for(let Y=0;Y<T.count;Y++)w.setX(z+Y,G+T.getX(Y));for(let Y=T.count,ee=H;Y<ee;Y++)w.setX(z+Y,G);w.needsUpdate=!0,w.addUpdateRange(z,R.reservedIndexCount)}return R.start=C?R.indexStart:R.vertexStart,R.count=C?R.indexCount:R.vertexCount,R.boundingBox=null,v.boundingBox!==null&&(R.boundingBox=v.boundingBox.clone()),R.boundingSphere=null,v.boundingSphere!==null&&(R.boundingSphere=v.boundingSphere.clone()),this._visibilityChanged=!0,d}deleteGeometry(d){const v=this._geometryInfo;if(d>=v.length||v[d].active===!1)return this;const A=this._instanceInfo;for(let C=0,w=A.length;C<w;C++)A[C].active&&A[C].geometryIndex===d&&this.deleteInstance(C);return v[d].active=!1,this._availableGeometryIds.push(d),this._visibilityChanged=!0,this}deleteInstance(d){return this.validateInstanceId(d),this._instanceInfo[d].active=!1,this._availableInstanceIds.push(d),this._visibilityChanged=!0,this}optimize(){let d=0,v=0;const A=this._geometryInfo,C=A.map((T,R)=>R).sort((T,R)=>A[T].vertexStart-A[R].vertexStart),w=this.geometry;for(let T=0,R=A.length;T<R;T++){const G=C[T],I=A[G];if(I.active!==!1){if(w.index!==null){if(I.indexStart!==v){const{indexStart:z,vertexStart:H,reservedIndexCount:Y}=I,ee=w.index,ie=ee.array,oe=d-H;for(let se=z;se<z+Y;se++)ie[se]=ie[se]+oe;ee.array.copyWithin(v,z,z+Y),ee.addUpdateRange(v,Y),I.indexStart=v}v+=I.reservedIndexCount}if(I.vertexStart!==d){const{vertexStart:z,reservedVertexCount:H}=I,Y=w.attributes;for(const ee in Y){const ie=Y[ee],{array:oe,itemSize:se}=ie;oe.copyWithin(d*se,z*se,(z+H)*se),ie.addUpdateRange(d*se,H*se)}I.vertexStart=d}d+=I.reservedVertexCount,I.start=w.index?I.indexStart:I.vertexStart,this._nextIndexStart=w.index?I.indexStart+I.reservedIndexCount:0,this._nextVertexStart=I.vertexStart+I.reservedVertexCount}}return this}getBoundingBoxAt(d,v){if(d>=this._geometryCount)return null;const A=this.geometry,C=this._geometryInfo[d];if(C.boundingBox===null){const w=new Box3,T=A.index,R=A.attributes.position;for(let G=C.start,I=C.start+C.count;G<I;G++){let z=G;T&&(z=T.getX(z)),w.expandByPoint(_vector$5.fromBufferAttribute(R,z))}C.boundingBox=w}return v.copy(C.boundingBox),v}getBoundingSphereAt(d,v){if(d>=this._geometryCount)return null;const A=this.geometry,C=this._geometryInfo[d];if(C.boundingSphere===null){const w=new Sphere;this.getBoundingBoxAt(d,_box$1),_box$1.getCenter(w.center);const T=A.index,R=A.attributes.position;let G=0;for(let I=C.start,z=C.start+C.count;I<z;I++){let H=I;T&&(H=T.getX(H)),_vector$5.fromBufferAttribute(R,H),G=Math.max(G,w.center.distanceToSquared(_vector$5))}w.radius=Math.sqrt(G),C.boundingSphere=w}return v.copy(C.boundingSphere),v}setMatrixAt(d,v){this.validateInstanceId(d);const A=this._matricesTexture,C=this._matricesTexture.image.data;return v.toArray(C,d*16),A.needsUpdate=!0,this}getMatrixAt(d,v){return this.validateInstanceId(d),v.fromArray(this._matricesTexture.image.data,d*16)}setColorAt(d,v){return this.validateInstanceId(d),this._colorsTexture===null&&this._initColorsTexture(),v.toArray(this._colorsTexture.image.data,d*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(d,v){return this.validateInstanceId(d),v.fromArray(this._colorsTexture.image.data,d*4)}setVisibleAt(d,v){return this.validateInstanceId(d),this._instanceInfo[d].visible===v?this:(this._instanceInfo[d].visible=v,this._visibilityChanged=!0,this)}getVisibleAt(d){return this.validateInstanceId(d),this._instanceInfo[d].visible}setGeometryIdAt(d,v){return this.validateInstanceId(d),this.validateGeometryId(v),this._instanceInfo[d].geometryIndex=v,this}getGeometryIdAt(d){return this.validateInstanceId(d),this._instanceInfo[d].geometryIndex}getGeometryRangeAt(d,v={}){this.validateGeometryId(d);const A=this._geometryInfo[d];return v.vertexStart=A.vertexStart,v.vertexCount=A.vertexCount,v.reservedVertexCount=A.reservedVertexCount,v.indexStart=A.indexStart,v.indexCount=A.indexCount,v.reservedIndexCount=A.reservedIndexCount,v.start=A.start,v.count=A.count,v}setInstanceCount(d){const v=this._availableInstanceIds,A=this._instanceInfo;for(v.sort(ascIdSort);v[v.length-1]===A.length-1;)A.pop(),v.pop();if(d<A.length)throw new Error(`BatchedMesh: Instance ids outside the range ${d} are being used. Cannot shrink instance count.`);const C=new Int32Array(d),w=new Int32Array(d);copyArrayContents(this._multiDrawCounts,C),copyArrayContents(this._multiDrawStarts,w),this._multiDrawCounts=C,this._multiDrawStarts=w,this._maxInstanceCount=d;const T=this._indirectTexture,R=this._matricesTexture,G=this._colorsTexture;T.dispose(),this._initIndirectTexture(),copyArrayContents(T.image.data,this._indirectTexture.image.data),R.dispose(),this._initMatricesTexture(),copyArrayContents(R.image.data,this._matricesTexture.image.data),G&&(G.dispose(),this._initColorsTexture(),copyArrayContents(G.image.data,this._colorsTexture.image.data))}setGeometrySize(d,v){const A=[...this._geometryInfo].filter(R=>R.active);if(Math.max(...A.map(R=>R.vertexStart+R.reservedVertexCount))>d)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${v}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...A.map(G=>G.indexStart+G.reservedIndexCount))>v)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${v}. Cannot shrink further.`);const w=this.geometry;w.dispose(),this._maxVertexCount=d,this._maxIndexCount=v,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(w));const T=this.geometry;w.index&&copyArrayContents(w.index.array,T.index.array);for(const R in w.attributes)copyArrayContents(w.attributes[R].array,T.attributes[R].array)}raycast(d,v){const A=this._instanceInfo,C=this._geometryInfo,w=this.matrixWorld,T=this.geometry;_mesh.material=this.material,_mesh.geometry.index=T.index,_mesh.geometry.attributes=T.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let R=0,G=A.length;R<G;R++){if(!A[R].visible||!A[R].active)continue;const I=A[R].geometryIndex,z=C[I];_mesh.geometry.setDrawRange(z.start,z.count),this.getMatrixAt(R,_mesh.matrixWorld).premultiply(w),this.getBoundingBoxAt(I,_mesh.geometry.boundingBox),this.getBoundingSphereAt(I,_mesh.geometry.boundingSphere),_mesh.raycast(d,_batchIntersects);for(let H=0,Y=_batchIntersects.length;H<Y;H++){const ee=_batchIntersects[H];ee.object=this,ee.batchId=R,v.push(ee)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(d){return super.copy(d),this.geometry=d.geometry.clone(),this.perObjectFrustumCulled=d.perObjectFrustumCulled,this.sortObjects=d.sortObjects,this.boundingBox=d.boundingBox!==null?d.boundingBox.clone():null,this.boundingSphere=d.boundingSphere!==null?d.boundingSphere.clone():null,this._geometryInfo=d._geometryInfo.map(v=>({...v,boundingBox:v.boundingBox!==null?v.boundingBox.clone():null,boundingSphere:v.boundingSphere!==null?v.boundingSphere.clone():null})),this._instanceInfo=d._instanceInfo.map(v=>({...v})),this._availableInstanceIds=d._availableInstanceIds.slice(),this._availableGeometryIds=d._availableGeometryIds.slice(),this._nextIndexStart=d._nextIndexStart,this._nextVertexStart=d._nextVertexStart,this._geometryCount=d._geometryCount,this._maxInstanceCount=d._maxInstanceCount,this._maxVertexCount=d._maxVertexCount,this._maxIndexCount=d._maxIndexCount,this._geometryInitialized=d._geometryInitialized,this._multiDrawCounts=d._multiDrawCounts.slice(),this._multiDrawStarts=d._multiDrawStarts.slice(),this._indirectTexture=d._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=d._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=d._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(d,v,A,C,w){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const T=C.getIndex(),R=T===null?1:T.array.BYTES_PER_ELEMENT,G=this._instanceInfo,I=this._multiDrawStarts,z=this._multiDrawCounts,H=this._geometryInfo,Y=this.perObjectFrustumCulled,ee=this._indirectTexture,ie=ee.image.data,oe=A.isArrayCamera?_frustumArray:_frustum;Y&&!A.isArrayCamera&&(_matrix$1.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,A.coordinateSystem,A.reversedDepth));let se=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(A.matrixWorld).applyMatrix4(_matrix$1),_forward$1.set(0,0,-1).transformDirection(A.matrixWorld).transformDirection(_matrix$1);for(let ue=0,ge=G.length;ue<ge;ue++)if(G[ue].visible&&G[ue].active){const ye=G[ue].geometryIndex;this.getMatrixAt(ue,_matrix$1),this.getBoundingSphereAt(ye,_sphere$2).applyMatrix4(_matrix$1);let be=!1;if(Y&&(be=!oe.intersectsSphere(_sphere$2,A)),!be){const ve=H[ye],Me=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward$1);_renderList.push(ve.start,ve.count,Me,ue)}}const re=_renderList.list,fe=this.customSort;fe===null?re.sort(w.transparent?sortTransparent:sortOpaque):fe.call(this,re,A);for(let ue=0,ge=re.length;ue<ge;ue++){const ye=re[ue];I[se]=ye.start*R,z[se]=ye.count,ie[se]=ye.index,se++}_renderList.reset()}else for(let re=0,fe=G.length;re<fe;re++)if(G[re].visible&&G[re].active){const ue=G[re].geometryIndex;let ge=!1;if(Y&&(this.getMatrixAt(re,_matrix$1),this.getBoundingSphereAt(ue,_sphere$2).applyMatrix4(_matrix$1),ge=!oe.intersectsSphere(_sphere$2,A)),!ge){const ye=H[ue];I[se]=ye.start*R,z[se]=ye.count,ie[se]=re,se++}}ee.needsUpdate=!0,this._multiDrawCount=se,this._visibilityChanged=!1}onBeforeShadow(d,v,A,C,w,T){this.onBeforeRender(d,null,C,w,T)}}class LineBasicMaterial extends Material{constructor(d){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.map=d.map,this.linewidth=d.linewidth,this.linecap=d.linecap,this.linejoin=d.linejoin,this.fog=d.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(d=new BufferGeometry,v=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=d,this.material=v,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(d,v){return super.copy(d,v),this.material=Array.isArray(d.material)?d.material.slice():d.material,this.geometry=d.geometry,this}computeLineDistances(){const d=this.geometry;if(d.index===null){const v=d.attributes.position,A=[0];for(let C=1,w=v.count;C<w;C++)_vStart.fromBufferAttribute(v,C-1),_vEnd.fromBufferAttribute(v,C),A[C]=A[C-1],A[C]+=_vStart.distanceTo(_vEnd);d.setAttribute("lineDistance",new Float32BufferAttribute(A,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(d,v){const A=this.geometry,C=this.matrixWorld,w=d.params.Line.threshold,T=A.drawRange;if(A.boundingSphere===null&&A.computeBoundingSphere(),_sphere$1.copy(A.boundingSphere),_sphere$1.applyMatrix4(C),_sphere$1.radius+=w,d.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(C).invert(),_ray$1.copy(d.ray).applyMatrix4(_inverseMatrix$1);const R=w/((this.scale.x+this.scale.y+this.scale.z)/3),G=R*R,I=this.isLineSegments?2:1,z=A.index,Y=A.attributes.position;if(z!==null){const ee=Math.max(0,T.start),ie=Math.min(z.count,T.start+T.count);for(let oe=ee,se=ie-1;oe<se;oe+=I){const re=z.getX(oe),fe=z.getX(oe+1),ue=checkIntersection(this,d,_ray$1,G,re,fe,oe);ue&&v.push(ue)}if(this.isLineLoop){const oe=z.getX(ie-1),se=z.getX(ee),re=checkIntersection(this,d,_ray$1,G,oe,se,ie-1);re&&v.push(re)}}else{const ee=Math.max(0,T.start),ie=Math.min(Y.count,T.start+T.count);for(let oe=ee,se=ie-1;oe<se;oe+=I){const re=checkIntersection(this,d,_ray$1,G,oe,oe+1,oe);re&&v.push(re)}if(this.isLineLoop){const oe=checkIntersection(this,d,_ray$1,G,ie-1,ee,ie-1);oe&&v.push(oe)}}}updateMorphTargets(){const v=this.geometry.morphAttributes,A=Object.keys(v);if(A.length>0){const C=v[A[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,T=C.length;w<T;w++){const R=C[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=w}}}}}function checkIntersection(_,d,v,A,C,w,T){const R=_.geometry.attributes.position;if(_vStart.fromBufferAttribute(R,C),_vEnd.fromBufferAttribute(R,w),v.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>A)return;_intersectPointOnRay.applyMatrix4(_.matrixWorld);const I=d.ray.origin.distanceTo(_intersectPointOnRay);if(!(I<d.near||I>d.far))return{distance:I,point:_intersectPointOnSegment.clone().applyMatrix4(_.matrixWorld),index:T,face:null,faceIndex:null,barycoord:null,object:_}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(d,v){super(d,v),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const d=this.geometry;if(d.index===null){const v=d.attributes.position,A=[];for(let C=0,w=v.count;C<w;C+=2)_start.fromBufferAttribute(v,C),_end.fromBufferAttribute(v,C+1),A[C]=C===0?0:A[C-1],A[C+1]=A[C]+_start.distanceTo(_end);d.setAttribute("lineDistance",new Float32BufferAttribute(A,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(d,v){super(d,v),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(d){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.map=d.map,this.alphaMap=d.alphaMap,this.size=d.size,this.sizeAttenuation=d.sizeAttenuation,this.fog=d.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(d=new BufferGeometry,v=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=d,this.material=v,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(d,v){return super.copy(d,v),this.material=Array.isArray(d.material)?d.material.slice():d.material,this.geometry=d.geometry,this}raycast(d,v){const A=this.geometry,C=this.matrixWorld,w=d.params.Points.threshold,T=A.drawRange;if(A.boundingSphere===null&&A.computeBoundingSphere(),_sphere.copy(A.boundingSphere),_sphere.applyMatrix4(C),_sphere.radius+=w,d.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(C).invert(),_ray.copy(d.ray).applyMatrix4(_inverseMatrix);const R=w/((this.scale.x+this.scale.y+this.scale.z)/3),G=R*R,I=A.index,H=A.attributes.position;if(I!==null){const Y=Math.max(0,T.start),ee=Math.min(I.count,T.start+T.count);for(let ie=Y,oe=ee;ie<oe;ie++){const se=I.getX(ie);_position$2.fromBufferAttribute(H,se),testPoint(_position$2,se,G,C,d,v,this)}}else{const Y=Math.max(0,T.start),ee=Math.min(H.count,T.start+T.count);for(let ie=Y,oe=ee;ie<oe;ie++)_position$2.fromBufferAttribute(H,ie),testPoint(_position$2,ie,G,C,d,v,this)}}updateMorphTargets(){const v=this.geometry.morphAttributes,A=Object.keys(v);if(A.length>0){const C=v[A[0]];if(C!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let w=0,T=C.length;w<T;w++){const R=C[w].name||String(w);this.morphTargetInfluences.push(0),this.morphTargetDictionary[R]=w}}}}}function testPoint(_,d,v,A,C,w,T){const R=_ray.distanceSqToPoint(_);if(R<v){const G=new Vector3;_ray.closestPointToPoint(_,G),G.applyMatrix4(A);const I=C.ray.origin.distanceTo(G);if(I<C.near||I>C.far)return;w.push({distance:I,distanceToRay:Math.sqrt(R),point:G,index:d,face:null,faceIndex:null,barycoord:null,object:T})}}class VideoTexture extends Texture{constructor(d,v,A,C,w=LinearFilter,T=LinearFilter,R,G,I){super(d,v,A,C,w,T,R,G,I),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const z=this;function H(){z.needsUpdate=!0,z._requestVideoFrameCallbackId=d.requestVideoFrameCallback(H)}"requestVideoFrameCallback"in d&&(this._requestVideoFrameCallbackId=d.requestVideoFrameCallback(H))}clone(){return new this.constructor(this.image).copy(this)}update(){const d=this.image;"requestVideoFrameCallback"in d===!1&&d.readyState>=d.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class VideoFrameTexture extends VideoTexture{constructor(d,v,A,C,w,T,R,G){super({},d,v,A,C,w,T,R,G),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(d){this.image=d,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(d,v){super({width:d,height:v}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(d,v,A,C,w,T,R,G,I,z,H,Y){super(null,T,R,G,I,z,C,w,H,Y),this.isCompressedTexture=!0,this.image={width:v,height:A},this.mipmaps=d,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(d,v,A,C,w,T){super(d,v,A,w,T),this.isCompressedArrayTexture=!0,this.image.depth=C,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(d){this.layerUpdates.add(d)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(d,v,A){super(void 0,d[0].width,d[0].height,v,A,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=d}}class CanvasTexture extends Texture{constructor(d,v,A,C,w,T,R,G,I){super(d,v,A,C,w,T,R,G,I),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(d,v,A=UnsignedIntType,C,w,T,R=NearestFilter,G=NearestFilter,I,z=DepthFormat,H=1){if(z!==DepthFormat&&z!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const Y={width:d,height:v,depth:H};super(Y,C,w,T,R,G,z,A,I),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(d){return super.copy(d),this.source=new Source(Object.assign({},d.image)),this.compareFunction=d.compareFunction,this}toJSON(d){const v=super.toJSON(d);return this.compareFunction!==null&&(v.compareFunction=this.compareFunction),v}}class CapsuleGeometry extends BufferGeometry{constructor(d=1,v=1,A=4,C=8,w=1){super(),this.type="CapsuleGeometry",this.parameters={radius:d,height:v,capSegments:A,radialSegments:C,heightSegments:w},v=Math.max(0,v),A=Math.max(1,Math.floor(A)),C=Math.max(3,Math.floor(C)),w=Math.max(1,Math.floor(w));const T=[],R=[],G=[],I=[],z=v/2,H=Math.PI/2*d,Y=v,ee=2*H+Y,ie=A*2+w,oe=C+1,se=new Vector3,re=new Vector3;for(let fe=0;fe<=ie;fe++){let ue=0,ge=0,ye=0,be=0;if(fe<=A){const we=fe/A,Be=we*Math.PI/2;ge=-z-d*Math.cos(Be),ye=d*Math.sin(Be),be=-d*Math.cos(Be),ue=we*H}else if(fe<=A+w){const we=(fe-A)/w;ge=-z+we*v,ye=d,be=0,ue=H+we*Y}else{const we=(fe-A-w)/A,Be=we*Math.PI/2;ge=z+d*Math.sin(Be),ye=d*Math.cos(Be),be=d*Math.sin(Be),ue=H+Y+we*H}const ve=Math.max(0,Math.min(1,ue/ee));let Me=0;fe===0?Me=.5/C:fe===ie&&(Me=-.5/C);for(let we=0;we<=C;we++){const Be=we/C,De=Be*Math.PI*2,Fe=Math.sin(De),Oe=Math.cos(De);re.x=-ye*Oe,re.y=ge,re.z=ye*Fe,R.push(re.x,re.y,re.z),se.set(-ye*Oe,be,ye*Fe),se.normalize(),G.push(se.x,se.y,se.z),I.push(Be+Me,ve)}if(fe>0){const we=(fe-1)*oe;for(let Be=0;Be<C;Be++){const De=we+Be,Fe=we+Be+1,Oe=fe*oe+Be,Ge=fe*oe+Be+1;T.push(De,Fe,Oe),T.push(Fe,Ge,Oe)}}}this.setIndex(T),this.setAttribute("position",new Float32BufferAttribute(R,3)),this.setAttribute("normal",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(I,2))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new CapsuleGeometry(d.radius,d.height,d.capSegments,d.radialSegments,d.heightSegments)}}class CircleGeometry extends BufferGeometry{constructor(d=1,v=32,A=0,C=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:d,segments:v,thetaStart:A,thetaLength:C},v=Math.max(3,v);const w=[],T=[],R=[],G=[],I=new Vector3,z=new Vector2;T.push(0,0,0),R.push(0,0,1),G.push(.5,.5);for(let H=0,Y=3;H<=v;H++,Y+=3){const ee=A+H/v*C;I.x=d*Math.cos(ee),I.y=d*Math.sin(ee),T.push(I.x,I.y,I.z),R.push(0,0,1),z.x=(T[Y]/d+1)/2,z.y=(T[Y+1]/d+1)/2,G.push(z.x,z.y)}for(let H=1;H<=v;H++)w.push(H,H+1,0);this.setIndex(w),this.setAttribute("position",new Float32BufferAttribute(T,3)),this.setAttribute("normal",new Float32BufferAttribute(R,3)),this.setAttribute("uv",new Float32BufferAttribute(G,2))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new CircleGeometry(d.radius,d.segments,d.thetaStart,d.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(d=1,v=1,A=1,C=32,w=1,T=!1,R=0,G=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:d,radiusBottom:v,height:A,radialSegments:C,heightSegments:w,openEnded:T,thetaStart:R,thetaLength:G};const I=this;C=Math.floor(C),w=Math.floor(w);const z=[],H=[],Y=[],ee=[];let ie=0;const oe=[],se=A/2;let re=0;fe(),T===!1&&(d>0&&ue(!0),v>0&&ue(!1)),this.setIndex(z),this.setAttribute("position",new Float32BufferAttribute(H,3)),this.setAttribute("normal",new Float32BufferAttribute(Y,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2));function fe(){const ge=new Vector3,ye=new Vector3;let be=0;const ve=(v-d)/A;for(let Me=0;Me<=w;Me++){const we=[],Be=Me/w,De=Be*(v-d)+d;for(let Fe=0;Fe<=C;Fe++){const Oe=Fe/C,Ge=Oe*G+R,ze=Math.sin(Ge),je=Math.cos(Ge);ye.x=De*ze,ye.y=-Be*A+se,ye.z=De*je,H.push(ye.x,ye.y,ye.z),ge.set(ze,ve,je).normalize(),Y.push(ge.x,ge.y,ge.z),ee.push(Oe,1-Be),we.push(ie++)}oe.push(we)}for(let Me=0;Me<C;Me++)for(let we=0;we<w;we++){const Be=oe[we][Me],De=oe[we+1][Me],Fe=oe[we+1][Me+1],Oe=oe[we][Me+1];(d>0||we!==0)&&(z.push(Be,De,Oe),be+=3),(v>0||we!==w-1)&&(z.push(De,Fe,Oe),be+=3)}I.addGroup(re,be,0),re+=be}function ue(ge){const ye=ie,be=new Vector2,ve=new Vector3;let Me=0;const we=ge===!0?d:v,Be=ge===!0?1:-1;for(let Fe=1;Fe<=C;Fe++)H.push(0,se*Be,0),Y.push(0,Be,0),ee.push(.5,.5),ie++;const De=ie;for(let Fe=0;Fe<=C;Fe++){const Ge=Fe/C*G+R,ze=Math.cos(Ge),je=Math.sin(Ge);ve.x=we*je,ve.y=se*Be,ve.z=we*ze,H.push(ve.x,ve.y,ve.z),Y.push(0,Be,0),be.x=ze*.5+.5,be.y=je*.5*Be+.5,ee.push(be.x,be.y),ie++}for(let Fe=0;Fe<C;Fe++){const Oe=ye+Fe,Ge=De+Fe;ge===!0?z.push(Ge,Ge+1,Oe):z.push(Ge+1,Ge,Oe),Me+=3}I.addGroup(re,Me,ge===!0?1:2),re+=Me}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new CylinderGeometry(d.radiusTop,d.radiusBottom,d.height,d.radialSegments,d.heightSegments,d.openEnded,d.thetaStart,d.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(d=1,v=1,A=32,C=1,w=!1,T=0,R=Math.PI*2){super(0,d,v,A,C,w,T,R),this.type="ConeGeometry",this.parameters={radius:d,height:v,radialSegments:A,heightSegments:C,openEnded:w,thetaStart:T,thetaLength:R}}static fromJSON(d){return new ConeGeometry(d.radius,d.height,d.radialSegments,d.heightSegments,d.openEnded,d.thetaStart,d.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(d=[],v=[],A=1,C=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:d,indices:v,radius:A,detail:C};const w=[],T=[];R(C),I(A),z(),this.setAttribute("position",new Float32BufferAttribute(w,3)),this.setAttribute("normal",new Float32BufferAttribute(w.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(T,2)),C===0?this.computeVertexNormals():this.normalizeNormals();function R(fe){const ue=new Vector3,ge=new Vector3,ye=new Vector3;for(let be=0;be<v.length;be+=3)ee(v[be+0],ue),ee(v[be+1],ge),ee(v[be+2],ye),G(ue,ge,ye,fe)}function G(fe,ue,ge,ye){const be=ye+1,ve=[];for(let Me=0;Me<=be;Me++){ve[Me]=[];const we=fe.clone().lerp(ge,Me/be),Be=ue.clone().lerp(ge,Me/be),De=be-Me;for(let Fe=0;Fe<=De;Fe++)Fe===0&&Me===be?ve[Me][Fe]=we:ve[Me][Fe]=we.clone().lerp(Be,Fe/De)}for(let Me=0;Me<be;Me++)for(let we=0;we<2*(be-Me)-1;we++){const Be=Math.floor(we/2);we%2===0?(Y(ve[Me][Be+1]),Y(ve[Me+1][Be]),Y(ve[Me][Be])):(Y(ve[Me][Be+1]),Y(ve[Me+1][Be+1]),Y(ve[Me+1][Be]))}}function I(fe){const ue=new Vector3;for(let ge=0;ge<w.length;ge+=3)ue.x=w[ge+0],ue.y=w[ge+1],ue.z=w[ge+2],ue.normalize().multiplyScalar(fe),w[ge+0]=ue.x,w[ge+1]=ue.y,w[ge+2]=ue.z}function z(){const fe=new Vector3;for(let ue=0;ue<w.length;ue+=3){fe.x=w[ue+0],fe.y=w[ue+1],fe.z=w[ue+2];const ge=se(fe)/2/Math.PI+.5,ye=re(fe)/Math.PI+.5;T.push(ge,1-ye)}ie(),H()}function H(){for(let fe=0;fe<T.length;fe+=6){const ue=T[fe+0],ge=T[fe+2],ye=T[fe+4],be=Math.max(ue,ge,ye),ve=Math.min(ue,ge,ye);be>.9&&ve<.1&&(ue<.2&&(T[fe+0]+=1),ge<.2&&(T[fe+2]+=1),ye<.2&&(T[fe+4]+=1))}}function Y(fe){w.push(fe.x,fe.y,fe.z)}function ee(fe,ue){const ge=fe*3;ue.x=d[ge+0],ue.y=d[ge+1],ue.z=d[ge+2]}function ie(){const fe=new Vector3,ue=new Vector3,ge=new Vector3,ye=new Vector3,be=new Vector2,ve=new Vector2,Me=new Vector2;for(let we=0,Be=0;we<w.length;we+=9,Be+=6){fe.set(w[we+0],w[we+1],w[we+2]),ue.set(w[we+3],w[we+4],w[we+5]),ge.set(w[we+6],w[we+7],w[we+8]),be.set(T[Be+0],T[Be+1]),ve.set(T[Be+2],T[Be+3]),Me.set(T[Be+4],T[Be+5]),ye.copy(fe).add(ue).add(ge).divideScalar(3);const De=se(ye);oe(be,Be+0,fe,De),oe(ve,Be+2,ue,De),oe(Me,Be+4,ge,De)}}function oe(fe,ue,ge,ye){ye<0&&fe.x===1&&(T[ue]=fe.x-1),ge.x===0&&ge.z===0&&(T[ue]=ye/2/Math.PI+.5)}function se(fe){return Math.atan2(fe.z,-fe.x)}function re(fe){return Math.atan2(-fe.y,Math.sqrt(fe.x*fe.x+fe.z*fe.z))}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new PolyhedronGeometry(d.vertices,d.indices,d.radius,d.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(d=1,v=0){const A=(1+Math.sqrt(5))/2,C=1/A,w=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-C,-A,0,-C,A,0,C,-A,0,C,A,-C,-A,0,-C,A,0,C,-A,0,C,A,0,-A,0,-C,A,0,-C,-A,0,C,A,0,C],T=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(w,T,d,v),this.type="DodecahedronGeometry",this.parameters={radius:d,detail:v}}static fromJSON(d){return new DodecahedronGeometry(d.radius,d.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(d=null,v=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:d,thresholdAngle:v},d!==null){const C=Math.pow(10,4),w=Math.cos(DEG2RAD*v),T=d.getIndex(),R=d.getAttribute("position"),G=T?T.count:R.count,I=[0,0,0],z=["a","b","c"],H=new Array(3),Y={},ee=[];for(let ie=0;ie<G;ie+=3){T?(I[0]=T.getX(ie),I[1]=T.getX(ie+1),I[2]=T.getX(ie+2)):(I[0]=ie,I[1]=ie+1,I[2]=ie+2);const{a:oe,b:se,c:re}=_triangle;if(oe.fromBufferAttribute(R,I[0]),se.fromBufferAttribute(R,I[1]),re.fromBufferAttribute(R,I[2]),_triangle.getNormal(_normal),H[0]=`${Math.round(oe.x*C)},${Math.round(oe.y*C)},${Math.round(oe.z*C)}`,H[1]=`${Math.round(se.x*C)},${Math.round(se.y*C)},${Math.round(se.z*C)}`,H[2]=`${Math.round(re.x*C)},${Math.round(re.y*C)},${Math.round(re.z*C)}`,!(H[0]===H[1]||H[1]===H[2]||H[2]===H[0]))for(let fe=0;fe<3;fe++){const ue=(fe+1)%3,ge=H[fe],ye=H[ue],be=_triangle[z[fe]],ve=_triangle[z[ue]],Me=`${ge}_${ye}`,we=`${ye}_${ge}`;we in Y&&Y[we]?(_normal.dot(Y[we].normal)<=w&&(ee.push(be.x,be.y,be.z),ee.push(ve.x,ve.y,ve.z)),Y[we]=null):Me in Y||(Y[Me]={index0:I[fe],index1:I[ue],normal:_normal.clone()})}}for(const ie in Y)if(Y[ie]){const{index0:oe,index1:se}=Y[ie];_v0$3.fromBufferAttribute(R,oe),_v1$1.fromBufferAttribute(R,se),ee.push(_v0$3.x,_v0$3.y,_v0$3.z),ee.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(ee,3))}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(d,v){const A=this.getUtoTmapping(d);return this.getPoint(A,v)}getPoints(d=5){const v=[];for(let A=0;A<=d;A++)v.push(this.getPoint(A/d));return v}getSpacedPoints(d=5){const v=[];for(let A=0;A<=d;A++)v.push(this.getPointAt(A/d));return v}getLength(){const d=this.getLengths();return d[d.length-1]}getLengths(d=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===d+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const v=[];let A,C=this.getPoint(0),w=0;v.push(0);for(let T=1;T<=d;T++)A=this.getPoint(T/d),w+=A.distanceTo(C),v.push(w),C=A;return this.cacheArcLengths=v,v}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(d,v=null){const A=this.getLengths();let C=0;const w=A.length;let T;v?T=v:T=d*A[w-1];let R=0,G=w-1,I;for(;R<=G;)if(C=Math.floor(R+(G-R)/2),I=A[C]-T,I<0)R=C+1;else if(I>0)G=C-1;else{G=C;break}if(C=G,A[C]===T)return C/(w-1);const z=A[C],Y=A[C+1]-z,ee=(T-z)/Y;return(C+ee)/(w-1)}getTangent(d,v){let C=d-1e-4,w=d+1e-4;C<0&&(C=0),w>1&&(w=1);const T=this.getPoint(C),R=this.getPoint(w),G=v||(T.isVector2?new Vector2:new Vector3);return G.copy(R).sub(T).normalize(),G}getTangentAt(d,v){const A=this.getUtoTmapping(d);return this.getTangent(A,v)}computeFrenetFrames(d,v=!1){const A=new Vector3,C=[],w=[],T=[],R=new Vector3,G=new Matrix4;for(let ee=0;ee<=d;ee++){const ie=ee/d;C[ee]=this.getTangentAt(ie,new Vector3)}w[0]=new Vector3,T[0]=new Vector3;let I=Number.MAX_VALUE;const z=Math.abs(C[0].x),H=Math.abs(C[0].y),Y=Math.abs(C[0].z);z<=I&&(I=z,A.set(1,0,0)),H<=I&&(I=H,A.set(0,1,0)),Y<=I&&A.set(0,0,1),R.crossVectors(C[0],A).normalize(),w[0].crossVectors(C[0],R),T[0].crossVectors(C[0],w[0]);for(let ee=1;ee<=d;ee++){if(w[ee]=w[ee-1].clone(),T[ee]=T[ee-1].clone(),R.crossVectors(C[ee-1],C[ee]),R.length()>Number.EPSILON){R.normalize();const ie=Math.acos(clamp$2(C[ee-1].dot(C[ee]),-1,1));w[ee].applyMatrix4(G.makeRotationAxis(R,ie))}T[ee].crossVectors(C[ee],w[ee])}if(v===!0){let ee=Math.acos(clamp$2(w[0].dot(w[d]),-1,1));ee/=d,C[0].dot(R.crossVectors(w[0],w[d]))>0&&(ee=-ee);for(let ie=1;ie<=d;ie++)w[ie].applyMatrix4(G.makeRotationAxis(C[ie],ee*ie)),T[ie].crossVectors(C[ie],w[ie])}return{tangents:C,normals:w,binormals:T}}clone(){return new this.constructor().copy(this)}copy(d){return this.arcLengthDivisions=d.arcLengthDivisions,this}toJSON(){const d={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return d.arcLengthDivisions=this.arcLengthDivisions,d.type=this.type,d}fromJSON(d){return this.arcLengthDivisions=d.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(d=0,v=0,A=1,C=1,w=0,T=Math.PI*2,R=!1,G=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=d,this.aY=v,this.xRadius=A,this.yRadius=C,this.aStartAngle=w,this.aEndAngle=T,this.aClockwise=R,this.aRotation=G}getPoint(d,v=new Vector2){const A=v,C=Math.PI*2;let w=this.aEndAngle-this.aStartAngle;const T=Math.abs(w)<Number.EPSILON;for(;w<0;)w+=C;for(;w>C;)w-=C;w<Number.EPSILON&&(T?w=0:w=C),this.aClockwise===!0&&!T&&(w===C?w=-C:w=w-C);const R=this.aStartAngle+d*w;let G=this.aX+this.xRadius*Math.cos(R),I=this.aY+this.yRadius*Math.sin(R);if(this.aRotation!==0){const z=Math.cos(this.aRotation),H=Math.sin(this.aRotation),Y=G-this.aX,ee=I-this.aY;G=Y*z-ee*H+this.aX,I=Y*H+ee*z+this.aY}return A.set(G,I)}copy(d){return super.copy(d),this.aX=d.aX,this.aY=d.aY,this.xRadius=d.xRadius,this.yRadius=d.yRadius,this.aStartAngle=d.aStartAngle,this.aEndAngle=d.aEndAngle,this.aClockwise=d.aClockwise,this.aRotation=d.aRotation,this}toJSON(){const d=super.toJSON();return d.aX=this.aX,d.aY=this.aY,d.xRadius=this.xRadius,d.yRadius=this.yRadius,d.aStartAngle=this.aStartAngle,d.aEndAngle=this.aEndAngle,d.aClockwise=this.aClockwise,d.aRotation=this.aRotation,d}fromJSON(d){return super.fromJSON(d),this.aX=d.aX,this.aY=d.aY,this.xRadius=d.xRadius,this.yRadius=d.yRadius,this.aStartAngle=d.aStartAngle,this.aEndAngle=d.aEndAngle,this.aClockwise=d.aClockwise,this.aRotation=d.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(d,v,A,C,w,T){super(d,v,A,A,C,w,T),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let _=0,d=0,v=0,A=0;function C(w,T,R,G){_=w,d=R,v=-3*w+3*T-2*R-G,A=2*w-2*T+R+G}return{initCatmullRom:function(w,T,R,G,I){C(T,R,I*(R-w),I*(G-T))},initNonuniformCatmullRom:function(w,T,R,G,I,z,H){let Y=(T-w)/I-(R-w)/(I+z)+(R-T)/z,ee=(R-T)/z-(G-T)/(z+H)+(G-R)/H;Y*=z,ee*=z,C(T,R,Y,ee)},calc:function(w){const T=w*w,R=T*w;return _+d*w+v*T+A*R}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(d=[],v=!1,A="centripetal",C=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=d,this.closed=v,this.curveType=A,this.tension=C}getPoint(d,v=new Vector3){const A=v,C=this.points,w=C.length,T=(w-(this.closed?0:1))*d;let R=Math.floor(T),G=T-R;this.closed?R+=R>0?0:(Math.floor(Math.abs(R)/w)+1)*w:G===0&&R===w-1&&(R=w-2,G=1);let I,z;this.closed||R>0?I=C[(R-1)%w]:(tmp.subVectors(C[0],C[1]).add(C[0]),I=tmp);const H=C[R%w],Y=C[(R+1)%w];if(this.closed||R+2<w?z=C[(R+2)%w]:(tmp.subVectors(C[w-1],C[w-2]).add(C[w-1]),z=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const ee=this.curveType==="chordal"?.5:.25;let ie=Math.pow(I.distanceToSquared(H),ee),oe=Math.pow(H.distanceToSquared(Y),ee),se=Math.pow(Y.distanceToSquared(z),ee);oe<1e-4&&(oe=1),ie<1e-4&&(ie=oe),se<1e-4&&(se=oe),px.initNonuniformCatmullRom(I.x,H.x,Y.x,z.x,ie,oe,se),py.initNonuniformCatmullRom(I.y,H.y,Y.y,z.y,ie,oe,se),pz.initNonuniformCatmullRom(I.z,H.z,Y.z,z.z,ie,oe,se)}else this.curveType==="catmullrom"&&(px.initCatmullRom(I.x,H.x,Y.x,z.x,this.tension),py.initCatmullRom(I.y,H.y,Y.y,z.y,this.tension),pz.initCatmullRom(I.z,H.z,Y.z,z.z,this.tension));return A.set(px.calc(G),py.calc(G),pz.calc(G)),A}copy(d){super.copy(d),this.points=[];for(let v=0,A=d.points.length;v<A;v++){const C=d.points[v];this.points.push(C.clone())}return this.closed=d.closed,this.curveType=d.curveType,this.tension=d.tension,this}toJSON(){const d=super.toJSON();d.points=[];for(let v=0,A=this.points.length;v<A;v++){const C=this.points[v];d.points.push(C.toArray())}return d.closed=this.closed,d.curveType=this.curveType,d.tension=this.tension,d}fromJSON(d){super.fromJSON(d),this.points=[];for(let v=0,A=d.points.length;v<A;v++){const C=d.points[v];this.points.push(new Vector3().fromArray(C))}return this.closed=d.closed,this.curveType=d.curveType,this.tension=d.tension,this}}function CatmullRom(_,d,v,A,C){const w=(A-d)*.5,T=(C-v)*.5,R=_*_,G=_*R;return(2*v-2*A+w+T)*G+(-3*v+3*A-2*w-T)*R+w*_+v}function QuadraticBezierP0(_,d){const v=1-_;return v*v*d}function QuadraticBezierP1(_,d){return 2*(1-_)*_*d}function QuadraticBezierP2(_,d){return _*_*d}function QuadraticBezier(_,d,v,A){return QuadraticBezierP0(_,d)+QuadraticBezierP1(_,v)+QuadraticBezierP2(_,A)}function CubicBezierP0(_,d){const v=1-_;return v*v*v*d}function CubicBezierP1(_,d){const v=1-_;return 3*v*v*_*d}function CubicBezierP2(_,d){return 3*(1-_)*_*_*d}function CubicBezierP3(_,d){return _*_*_*d}function CubicBezier(_,d,v,A,C){return CubicBezierP0(_,d)+CubicBezierP1(_,v)+CubicBezierP2(_,A)+CubicBezierP3(_,C)}class CubicBezierCurve extends Curve{constructor(d=new Vector2,v=new Vector2,A=new Vector2,C=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=d,this.v1=v,this.v2=A,this.v3=C}getPoint(d,v=new Vector2){const A=v,C=this.v0,w=this.v1,T=this.v2,R=this.v3;return A.set(CubicBezier(d,C.x,w.x,T.x,R.x),CubicBezier(d,C.y,w.y,T.y,R.y)),A}copy(d){return super.copy(d),this.v0.copy(d.v0),this.v1.copy(d.v1),this.v2.copy(d.v2),this.v3.copy(d.v3),this}toJSON(){const d=super.toJSON();return d.v0=this.v0.toArray(),d.v1=this.v1.toArray(),d.v2=this.v2.toArray(),d.v3=this.v3.toArray(),d}fromJSON(d){return super.fromJSON(d),this.v0.fromArray(d.v0),this.v1.fromArray(d.v1),this.v2.fromArray(d.v2),this.v3.fromArray(d.v3),this}}class CubicBezierCurve3 extends Curve{constructor(d=new Vector3,v=new Vector3,A=new Vector3,C=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=d,this.v1=v,this.v2=A,this.v3=C}getPoint(d,v=new Vector3){const A=v,C=this.v0,w=this.v1,T=this.v2,R=this.v3;return A.set(CubicBezier(d,C.x,w.x,T.x,R.x),CubicBezier(d,C.y,w.y,T.y,R.y),CubicBezier(d,C.z,w.z,T.z,R.z)),A}copy(d){return super.copy(d),this.v0.copy(d.v0),this.v1.copy(d.v1),this.v2.copy(d.v2),this.v3.copy(d.v3),this}toJSON(){const d=super.toJSON();return d.v0=this.v0.toArray(),d.v1=this.v1.toArray(),d.v2=this.v2.toArray(),d.v3=this.v3.toArray(),d}fromJSON(d){return super.fromJSON(d),this.v0.fromArray(d.v0),this.v1.fromArray(d.v1),this.v2.fromArray(d.v2),this.v3.fromArray(d.v3),this}}class LineCurve extends Curve{constructor(d=new Vector2,v=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=d,this.v2=v}getPoint(d,v=new Vector2){const A=v;return d===1?A.copy(this.v2):(A.copy(this.v2).sub(this.v1),A.multiplyScalar(d).add(this.v1)),A}getPointAt(d,v){return this.getPoint(d,v)}getTangent(d,v=new Vector2){return v.subVectors(this.v2,this.v1).normalize()}getTangentAt(d,v){return this.getTangent(d,v)}copy(d){return super.copy(d),this.v1.copy(d.v1),this.v2.copy(d.v2),this}toJSON(){const d=super.toJSON();return d.v1=this.v1.toArray(),d.v2=this.v2.toArray(),d}fromJSON(d){return super.fromJSON(d),this.v1.fromArray(d.v1),this.v2.fromArray(d.v2),this}}class LineCurve3 extends Curve{constructor(d=new Vector3,v=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=d,this.v2=v}getPoint(d,v=new Vector3){const A=v;return d===1?A.copy(this.v2):(A.copy(this.v2).sub(this.v1),A.multiplyScalar(d).add(this.v1)),A}getPointAt(d,v){return this.getPoint(d,v)}getTangent(d,v=new Vector3){return v.subVectors(this.v2,this.v1).normalize()}getTangentAt(d,v){return this.getTangent(d,v)}copy(d){return super.copy(d),this.v1.copy(d.v1),this.v2.copy(d.v2),this}toJSON(){const d=super.toJSON();return d.v1=this.v1.toArray(),d.v2=this.v2.toArray(),d}fromJSON(d){return super.fromJSON(d),this.v1.fromArray(d.v1),this.v2.fromArray(d.v2),this}}class QuadraticBezierCurve extends Curve{constructor(d=new Vector2,v=new Vector2,A=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=d,this.v1=v,this.v2=A}getPoint(d,v=new Vector2){const A=v,C=this.v0,w=this.v1,T=this.v2;return A.set(QuadraticBezier(d,C.x,w.x,T.x),QuadraticBezier(d,C.y,w.y,T.y)),A}copy(d){return super.copy(d),this.v0.copy(d.v0),this.v1.copy(d.v1),this.v2.copy(d.v2),this}toJSON(){const d=super.toJSON();return d.v0=this.v0.toArray(),d.v1=this.v1.toArray(),d.v2=this.v2.toArray(),d}fromJSON(d){return super.fromJSON(d),this.v0.fromArray(d.v0),this.v1.fromArray(d.v1),this.v2.fromArray(d.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(d=new Vector3,v=new Vector3,A=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=d,this.v1=v,this.v2=A}getPoint(d,v=new Vector3){const A=v,C=this.v0,w=this.v1,T=this.v2;return A.set(QuadraticBezier(d,C.x,w.x,T.x),QuadraticBezier(d,C.y,w.y,T.y),QuadraticBezier(d,C.z,w.z,T.z)),A}copy(d){return super.copy(d),this.v0.copy(d.v0),this.v1.copy(d.v1),this.v2.copy(d.v2),this}toJSON(){const d=super.toJSON();return d.v0=this.v0.toArray(),d.v1=this.v1.toArray(),d.v2=this.v2.toArray(),d}fromJSON(d){return super.fromJSON(d),this.v0.fromArray(d.v0),this.v1.fromArray(d.v1),this.v2.fromArray(d.v2),this}}class SplineCurve extends Curve{constructor(d=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=d}getPoint(d,v=new Vector2){const A=v,C=this.points,w=(C.length-1)*d,T=Math.floor(w),R=w-T,G=C[T===0?T:T-1],I=C[T],z=C[T>C.length-2?C.length-1:T+1],H=C[T>C.length-3?C.length-1:T+2];return A.set(CatmullRom(R,G.x,I.x,z.x,H.x),CatmullRom(R,G.y,I.y,z.y,H.y)),A}copy(d){super.copy(d),this.points=[];for(let v=0,A=d.points.length;v<A;v++){const C=d.points[v];this.points.push(C.clone())}return this}toJSON(){const d=super.toJSON();d.points=[];for(let v=0,A=this.points.length;v<A;v++){const C=this.points[v];d.points.push(C.toArray())}return d}fromJSON(d){super.fromJSON(d),this.points=[];for(let v=0,A=d.points.length;v<A;v++){const C=d.points[v];this.points.push(new Vector2().fromArray(C))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(d){this.curves.push(d)}closePath(){const d=this.curves[0].getPoint(0),v=this.curves[this.curves.length-1].getPoint(1);if(!d.equals(v)){const A=d.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[A](v,d))}return this}getPoint(d,v){const A=d*this.getLength(),C=this.getCurveLengths();let w=0;for(;w<C.length;){if(C[w]>=A){const T=C[w]-A,R=this.curves[w],G=R.getLength(),I=G===0?0:1-T/G;return R.getPointAt(I,v)}w++}return null}getLength(){const d=this.getCurveLengths();return d[d.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const d=[];let v=0;for(let A=0,C=this.curves.length;A<C;A++)v+=this.curves[A].getLength(),d.push(v);return this.cacheLengths=d,d}getSpacedPoints(d=40){const v=[];for(let A=0;A<=d;A++)v.push(this.getPoint(A/d));return this.autoClose&&v.push(v[0]),v}getPoints(d=12){const v=[];let A;for(let C=0,w=this.curves;C<w.length;C++){const T=w[C],R=T.isEllipseCurve?d*2:T.isLineCurve||T.isLineCurve3?1:T.isSplineCurve?d*T.points.length:d,G=T.getPoints(R);for(let I=0;I<G.length;I++){const z=G[I];A&&A.equals(z)||(v.push(z),A=z)}}return this.autoClose&&v.length>1&&!v[v.length-1].equals(v[0])&&v.push(v[0]),v}copy(d){super.copy(d),this.curves=[];for(let v=0,A=d.curves.length;v<A;v++){const C=d.curves[v];this.curves.push(C.clone())}return this.autoClose=d.autoClose,this}toJSON(){const d=super.toJSON();d.autoClose=this.autoClose,d.curves=[];for(let v=0,A=this.curves.length;v<A;v++){const C=this.curves[v];d.curves.push(C.toJSON())}return d}fromJSON(d){super.fromJSON(d),this.autoClose=d.autoClose,this.curves=[];for(let v=0,A=d.curves.length;v<A;v++){const C=d.curves[v];this.curves.push(new Curves[C.type]().fromJSON(C))}return this}}class Path extends CurvePath{constructor(d){super(),this.type="Path",this.currentPoint=new Vector2,d&&this.setFromPoints(d)}setFromPoints(d){this.moveTo(d[0].x,d[0].y);for(let v=1,A=d.length;v<A;v++)this.lineTo(d[v].x,d[v].y);return this}moveTo(d,v){return this.currentPoint.set(d,v),this}lineTo(d,v){const A=new LineCurve(this.currentPoint.clone(),new Vector2(d,v));return this.curves.push(A),this.currentPoint.set(d,v),this}quadraticCurveTo(d,v,A,C){const w=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(d,v),new Vector2(A,C));return this.curves.push(w),this.currentPoint.set(A,C),this}bezierCurveTo(d,v,A,C,w,T){const R=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(d,v),new Vector2(A,C),new Vector2(w,T));return this.curves.push(R),this.currentPoint.set(w,T),this}splineThru(d){const v=[this.currentPoint.clone()].concat(d),A=new SplineCurve(v);return this.curves.push(A),this.currentPoint.copy(d[d.length-1]),this}arc(d,v,A,C,w,T){const R=this.currentPoint.x,G=this.currentPoint.y;return this.absarc(d+R,v+G,A,C,w,T),this}absarc(d,v,A,C,w,T){return this.absellipse(d,v,A,A,C,w,T),this}ellipse(d,v,A,C,w,T,R,G){const I=this.currentPoint.x,z=this.currentPoint.y;return this.absellipse(d+I,v+z,A,C,w,T,R,G),this}absellipse(d,v,A,C,w,T,R,G){const I=new EllipseCurve(d,v,A,C,w,T,R,G);if(this.curves.length>0){const H=I.getPoint(0);H.equals(this.currentPoint)||this.lineTo(H.x,H.y)}this.curves.push(I);const z=I.getPoint(1);return this.currentPoint.copy(z),this}copy(d){return super.copy(d),this.currentPoint.copy(d.currentPoint),this}toJSON(){const d=super.toJSON();return d.currentPoint=this.currentPoint.toArray(),d}fromJSON(d){return super.fromJSON(d),this.currentPoint.fromArray(d.currentPoint),this}}class Shape extends Path{constructor(d){super(d),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(d){const v=[];for(let A=0,C=this.holes.length;A<C;A++)v[A]=this.holes[A].getPoints(d);return v}extractPoints(d){return{shape:this.getPoints(d),holes:this.getPointsHoles(d)}}copy(d){super.copy(d),this.holes=[];for(let v=0,A=d.holes.length;v<A;v++){const C=d.holes[v];this.holes.push(C.clone())}return this}toJSON(){const d=super.toJSON();d.uuid=this.uuid,d.holes=[];for(let v=0,A=this.holes.length;v<A;v++){const C=this.holes[v];d.holes.push(C.toJSON())}return d}fromJSON(d){super.fromJSON(d),this.uuid=d.uuid,this.holes=[];for(let v=0,A=d.holes.length;v<A;v++){const C=d.holes[v];this.holes.push(new Path().fromJSON(C))}return this}}function earcut(_,d,v=2){const A=d&&d.length,C=A?d[0]*v:_.length;let w=linkedList(_,0,C,v,!0);const T=[];if(!w||w.next===w.prev)return T;let R,G,I;if(A&&(w=eliminateHoles(_,d,w,v)),_.length>80*v){R=1/0,G=1/0;let z=-1/0,H=-1/0;for(let Y=v;Y<C;Y+=v){const ee=_[Y],ie=_[Y+1];ee<R&&(R=ee),ie<G&&(G=ie),ee>z&&(z=ee),ie>H&&(H=ie)}I=Math.max(z-R,H-G),I=I!==0?32767/I:0}return earcutLinked(w,T,v,R,G,I,0),T}function linkedList(_,d,v,A,C){let w;if(C===signedArea(_,d,v,A)>0)for(let T=d;T<v;T+=A)w=insertNode(T/A|0,_[T],_[T+1],w);else for(let T=v-A;T>=d;T-=A)w=insertNode(T/A|0,_[T],_[T+1],w);return w&&equals(w,w.next)&&(removeNode(w),w=w.next),w}function filterPoints(_,d){if(!_)return _;d||(d=_);let v=_,A;do if(A=!1,!v.steiner&&(equals(v,v.next)||area(v.prev,v,v.next)===0)){if(removeNode(v),v=d=v.prev,v===v.next)break;A=!0}else v=v.next;while(A||v!==d);return d}function earcutLinked(_,d,v,A,C,w,T){if(!_)return;!T&&w&&indexCurve(_,A,C,w);let R=_;for(;_.prev!==_.next;){const G=_.prev,I=_.next;if(w?isEarHashed(_,A,C,w):isEar(_)){d.push(G.i,_.i,I.i),removeNode(_),_=I.next,R=I.next;continue}if(_=I,_===R){T?T===1?(_=cureLocalIntersections(filterPoints(_),d),earcutLinked(_,d,v,A,C,w,2)):T===2&&splitEarcut(_,d,v,A,C,w):earcutLinked(filterPoints(_),d,v,A,C,w,1);break}}}function isEar(_){const d=_.prev,v=_,A=_.next;if(area(d,v,A)>=0)return!1;const C=d.x,w=v.x,T=A.x,R=d.y,G=v.y,I=A.y,z=Math.min(C,w,T),H=Math.min(R,G,I),Y=Math.max(C,w,T),ee=Math.max(R,G,I);let ie=A.next;for(;ie!==d;){if(ie.x>=z&&ie.x<=Y&&ie.y>=H&&ie.y<=ee&&pointInTriangleExceptFirst(C,R,w,G,T,I,ie.x,ie.y)&&area(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function isEarHashed(_,d,v,A){const C=_.prev,w=_,T=_.next;if(area(C,w,T)>=0)return!1;const R=C.x,G=w.x,I=T.x,z=C.y,H=w.y,Y=T.y,ee=Math.min(R,G,I),ie=Math.min(z,H,Y),oe=Math.max(R,G,I),se=Math.max(z,H,Y),re=zOrder(ee,ie,d,v,A),fe=zOrder(oe,se,d,v,A);let ue=_.prevZ,ge=_.nextZ;for(;ue&&ue.z>=re&&ge&&ge.z<=fe;){if(ue.x>=ee&&ue.x<=oe&&ue.y>=ie&&ue.y<=se&&ue!==C&&ue!==T&&pointInTriangleExceptFirst(R,z,G,H,I,Y,ue.x,ue.y)&&area(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,ge.x>=ee&&ge.x<=oe&&ge.y>=ie&&ge.y<=se&&ge!==C&&ge!==T&&pointInTriangleExceptFirst(R,z,G,H,I,Y,ge.x,ge.y)&&area(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;ue&&ue.z>=re;){if(ue.x>=ee&&ue.x<=oe&&ue.y>=ie&&ue.y<=se&&ue!==C&&ue!==T&&pointInTriangleExceptFirst(R,z,G,H,I,Y,ue.x,ue.y)&&area(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;ge&&ge.z<=fe;){if(ge.x>=ee&&ge.x<=oe&&ge.y>=ie&&ge.y<=se&&ge!==C&&ge!==T&&pointInTriangleExceptFirst(R,z,G,H,I,Y,ge.x,ge.y)&&area(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function cureLocalIntersections(_,d){let v=_;do{const A=v.prev,C=v.next.next;!equals(A,C)&&intersects(A,v,v.next,C)&&locallyInside(A,C)&&locallyInside(C,A)&&(d.push(A.i,v.i,C.i),removeNode(v),removeNode(v.next),v=_=C),v=v.next}while(v!==_);return filterPoints(v)}function splitEarcut(_,d,v,A,C,w){let T=_;do{let R=T.next.next;for(;R!==T.prev;){if(T.i!==R.i&&isValidDiagonal(T,R)){let G=splitPolygon(T,R);T=filterPoints(T,T.next),G=filterPoints(G,G.next),earcutLinked(T,d,v,A,C,w,0),earcutLinked(G,d,v,A,C,w,0);return}R=R.next}T=T.next}while(T!==_)}function eliminateHoles(_,d,v,A){const C=[];for(let w=0,T=d.length;w<T;w++){const R=d[w]*A,G=w<T-1?d[w+1]*A:_.length,I=linkedList(_,R,G,A,!1);I===I.next&&(I.steiner=!0),C.push(getLeftmost(I))}C.sort(compareXYSlope);for(let w=0;w<C.length;w++)v=eliminateHole(C[w],v);return v}function compareXYSlope(_,d){let v=_.x-d.x;if(v===0&&(v=_.y-d.y,v===0)){const A=(_.next.y-_.y)/(_.next.x-_.x),C=(d.next.y-d.y)/(d.next.x-d.x);v=A-C}return v}function eliminateHole(_,d){const v=findHoleBridge(_,d);if(!v)return d;const A=splitPolygon(v,_);return filterPoints(A,A.next),filterPoints(v,v.next)}function findHoleBridge(_,d){let v=d;const A=_.x,C=_.y;let w=-1/0,T;if(equals(_,v))return v;do{if(equals(_,v.next))return v.next;if(C<=v.y&&C>=v.next.y&&v.next.y!==v.y){const H=v.x+(C-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(H<=A&&H>w&&(w=H,T=v.x<v.next.x?v:v.next,H===A))return T}v=v.next}while(v!==d);if(!T)return null;const R=T,G=T.x,I=T.y;let z=1/0;v=T;do{if(A>=v.x&&v.x>=G&&A!==v.x&&pointInTriangle(C<I?A:w,C,G,I,C<I?w:A,C,v.x,v.y)){const H=Math.abs(C-v.y)/(A-v.x);locallyInside(v,_)&&(H<z||H===z&&(v.x>T.x||v.x===T.x&&sectorContainsSector(T,v)))&&(T=v,z=H)}v=v.next}while(v!==R);return T}function sectorContainsSector(_,d){return area(_.prev,_,d.prev)<0&&area(d.next,_,_.next)<0}function indexCurve(_,d,v,A){let C=_;do C.z===0&&(C.z=zOrder(C.x,C.y,d,v,A)),C.prevZ=C.prev,C.nextZ=C.next,C=C.next;while(C!==_);C.prevZ.nextZ=null,C.prevZ=null,sortLinked(C)}function sortLinked(_){let d,v=1;do{let A=_,C;_=null;let w=null;for(d=0;A;){d++;let T=A,R=0;for(let I=0;I<v&&(R++,T=T.nextZ,!!T);I++);let G=v;for(;R>0||G>0&&T;)R!==0&&(G===0||!T||A.z<=T.z)?(C=A,A=A.nextZ,R--):(C=T,T=T.nextZ,G--),w?w.nextZ=C:_=C,C.prevZ=w,w=C;A=T}w.nextZ=null,v*=2}while(d>1);return _}function zOrder(_,d,v,A,C){return _=(_-v)*C|0,d=(d-A)*C|0,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,_|d<<1}function getLeftmost(_){let d=_,v=_;do(d.x<v.x||d.x===v.x&&d.y<v.y)&&(v=d),d=d.next;while(d!==_);return v}function pointInTriangle(_,d,v,A,C,w,T,R){return(C-T)*(d-R)>=(_-T)*(w-R)&&(_-T)*(A-R)>=(v-T)*(d-R)&&(v-T)*(w-R)>=(C-T)*(A-R)}function pointInTriangleExceptFirst(_,d,v,A,C,w,T,R){return!(_===T&&d===R)&&pointInTriangle(_,d,v,A,C,w,T,R)}function isValidDiagonal(_,d){return _.next.i!==d.i&&_.prev.i!==d.i&&!intersectsPolygon(_,d)&&(locallyInside(_,d)&&locallyInside(d,_)&&middleInside(_,d)&&(area(_.prev,_,d.prev)||area(_,d.prev,d))||equals(_,d)&&area(_.prev,_,_.next)>0&&area(d.prev,d,d.next)>0)}function area(_,d,v){return(d.y-_.y)*(v.x-d.x)-(d.x-_.x)*(v.y-d.y)}function equals(_,d){return _.x===d.x&&_.y===d.y}function intersects(_,d,v,A){const C=sign(area(_,d,v)),w=sign(area(_,d,A)),T=sign(area(v,A,_)),R=sign(area(v,A,d));return!!(C!==w&&T!==R||C===0&&onSegment(_,v,d)||w===0&&onSegment(_,A,d)||T===0&&onSegment(v,_,A)||R===0&&onSegment(v,d,A))}function onSegment(_,d,v){return d.x<=Math.max(_.x,v.x)&&d.x>=Math.min(_.x,v.x)&&d.y<=Math.max(_.y,v.y)&&d.y>=Math.min(_.y,v.y)}function sign(_){return _>0?1:_<0?-1:0}function intersectsPolygon(_,d){let v=_;do{if(v.i!==_.i&&v.next.i!==_.i&&v.i!==d.i&&v.next.i!==d.i&&intersects(v,v.next,_,d))return!0;v=v.next}while(v!==_);return!1}function locallyInside(_,d){return area(_.prev,_,_.next)<0?area(_,d,_.next)>=0&&area(_,_.prev,d)>=0:area(_,d,_.prev)<0||area(_,_.next,d)<0}function middleInside(_,d){let v=_,A=!1;const C=(_.x+d.x)/2,w=(_.y+d.y)/2;do v.y>w!=v.next.y>w&&v.next.y!==v.y&&C<(v.next.x-v.x)*(w-v.y)/(v.next.y-v.y)+v.x&&(A=!A),v=v.next;while(v!==_);return A}function splitPolygon(_,d){const v=createNode(_.i,_.x,_.y),A=createNode(d.i,d.x,d.y),C=_.next,w=d.prev;return _.next=d,d.prev=_,v.next=C,C.prev=v,A.next=v,v.prev=A,w.next=A,A.prev=w,A}function insertNode(_,d,v,A){const C=createNode(_,d,v);return A?(C.next=A.next,C.prev=A,A.next.prev=C,A.next=C):(C.prev=C,C.next=C),C}function removeNode(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function createNode(_,d,v){return{i:_,x:d,y:v,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(_,d,v,A){let C=0;for(let w=d,T=v-A;w<v;w+=A)C+=(_[T]-_[w])*(_[w+1]+_[T+1]),T=w;return C}class Earcut{static triangulate(d,v,A=2){return earcut(d,v,A)}}class ShapeUtils{static area(d){const v=d.length;let A=0;for(let C=v-1,w=0;w<v;C=w++)A+=d[C].x*d[w].y-d[w].x*d[C].y;return A*.5}static isClockWise(d){return ShapeUtils.area(d)<0}static triangulateShape(d,v){const A=[],C=[],w=[];removeDupEndPts(d),addContour(A,d);let T=d.length;v.forEach(removeDupEndPts);for(let G=0;G<v.length;G++)C.push(T),T+=v[G].length,addContour(A,v[G]);const R=Earcut.triangulate(A,C);for(let G=0;G<R.length;G+=3)w.push(R.slice(G,G+3));return w}}function removeDupEndPts(_){const d=_.length;d>2&&_[d-1].equals(_[0])&&_.pop()}function addContour(_,d){for(let v=0;v<d.length;v++)_.push(d[v].x),_.push(d[v].y)}class ExtrudeGeometry extends BufferGeometry{constructor(d=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),v={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:d,options:v},d=Array.isArray(d)?d:[d];const A=this,C=[],w=[];for(let R=0,G=d.length;R<G;R++){const I=d[R];T(I)}this.setAttribute("position",new Float32BufferAttribute(C,3)),this.setAttribute("uv",new Float32BufferAttribute(w,2)),this.computeVertexNormals();function T(R){const G=[],I=v.curveSegments!==void 0?v.curveSegments:12,z=v.steps!==void 0?v.steps:1,H=v.depth!==void 0?v.depth:1;let Y=v.bevelEnabled!==void 0?v.bevelEnabled:!0,ee=v.bevelThickness!==void 0?v.bevelThickness:.2,ie=v.bevelSize!==void 0?v.bevelSize:ee-.1,oe=v.bevelOffset!==void 0?v.bevelOffset:0,se=v.bevelSegments!==void 0?v.bevelSegments:3;const re=v.extrudePath,fe=v.UVGenerator!==void 0?v.UVGenerator:WorldUVGenerator;let ue,ge=!1,ye,be,ve,Me;re&&(ue=re.getSpacedPoints(z),ge=!0,Y=!1,ye=re.computeFrenetFrames(z,!1),be=new Vector3,ve=new Vector3,Me=new Vector3),Y||(se=0,ee=0,ie=0,oe=0);const we=R.extractPoints(I);let Be=we.shape;const De=we.holes;if(!ShapeUtils.isClockWise(Be)){Be=Be.reverse();for(let Jn=0,Nn=De.length;Jn<Nn;Jn++){const Xn=De[Jn];ShapeUtils.isClockWise(Xn)&&(De[Jn]=Xn.reverse())}}function Oe(Jn){const Xn=10000000000000001e-36;let jn=Jn[0];for(let Un=1;Un<=Jn.length;Un++){const bn=Un%Jn.length,Kn=Jn[bn],Qn=Kn.x-jn.x,pr=Kn.y-jn.y,fn=Qn*Qn+pr*pr,Mt=Math.max(Math.abs(Kn.x),Math.abs(Kn.y),Math.abs(jn.x),Math.abs(jn.y)),yn=Xn*Mt*Mt;if(fn<=yn){Jn.splice(bn,1),Un--;continue}jn=Kn}}Oe(Be),De.forEach(Oe);const Ge=De.length,ze=Be;for(let Jn=0;Jn<Ge;Jn++){const Nn=De[Jn];Be=Be.concat(Nn)}function je(Jn,Nn,Xn){return Nn||console.error("THREE.ExtrudeGeometry: vec does not exist"),Jn.clone().addScaledVector(Nn,Xn)}const He=Be.length;function Xe(Jn,Nn,Xn){let jn,Un,bn;const Kn=Jn.x-Nn.x,Qn=Jn.y-Nn.y,pr=Xn.x-Jn.x,fn=Xn.y-Jn.y,Mt=Kn*Kn+Qn*Qn,yn=Kn*fn-Qn*pr;if(Math.abs(yn)>Number.EPSILON){const kn=Math.sqrt(Mt),nr=Math.sqrt(pr*pr+fn*fn),dr=Nn.x-Qn/kn,Qr=Nn.y+Kn/kn,Wr=Xn.x-fn/nr,Gr=Xn.y+pr/nr,Hr=((Wr-dr)*fn-(Gr-Qr)*pr)/(Kn*fn-Qn*pr);jn=dr+Kn*Hr-Jn.x,Un=Qr+Qn*Hr-Jn.y;const Kr=jn*jn+Un*Un;if(Kr<=2)return new Vector2(jn,Un);bn=Math.sqrt(Kr/2)}else{let kn=!1;Kn>Number.EPSILON?pr>Number.EPSILON&&(kn=!0):Kn<-Number.EPSILON?pr<-Number.EPSILON&&(kn=!0):Math.sign(Qn)===Math.sign(fn)&&(kn=!0),kn?(jn=-Qn,Un=Kn,bn=Math.sqrt(Mt)):(jn=Kn,Un=Qn,bn=Math.sqrt(Mt/2))}return new Vector2(jn/bn,Un/bn)}const $e=[];for(let Jn=0,Nn=ze.length,Xn=Nn-1,jn=Jn+1;Jn<Nn;Jn++,Xn++,jn++)Xn===Nn&&(Xn=0),jn===Nn&&(jn=0),$e[Jn]=Xe(ze[Jn],ze[Xn],ze[jn]);const We=[];let nt,Qt=$e.concat();for(let Jn=0,Nn=Ge;Jn<Nn;Jn++){const Xn=De[Jn];nt=[];for(let jn=0,Un=Xn.length,bn=Un-1,Kn=jn+1;jn<Un;jn++,bn++,Kn++)bn===Un&&(bn=0),Kn===Un&&(Kn=0),nt[jn]=Xe(Xn[jn],Xn[bn],Xn[Kn]);We.push(nt),Qt=Qt.concat(nt)}let Wt;if(se===0)Wt=ShapeUtils.triangulateShape(ze,De);else{const Jn=[],Nn=[];for(let Xn=0;Xn<se;Xn++){const jn=Xn/se,Un=ee*Math.cos(jn*Math.PI/2),bn=ie*Math.sin(jn*Math.PI/2)+oe;for(let Kn=0,Qn=ze.length;Kn<Qn;Kn++){const pr=je(ze[Kn],$e[Kn],bn);Zn(pr.x,pr.y,-Un),jn===0&&Jn.push(pr)}for(let Kn=0,Qn=Ge;Kn<Qn;Kn++){const pr=De[Kn];nt=We[Kn];const fn=[];for(let Mt=0,yn=pr.length;Mt<yn;Mt++){const kn=je(pr[Mt],nt[Mt],bn);Zn(kn.x,kn.y,-Un),jn===0&&fn.push(kn)}jn===0&&Nn.push(fn)}}Wt=ShapeUtils.triangulateShape(Jn,Nn)}const Bn=Wt.length,Lt=ie+oe;for(let Jn=0;Jn<He;Jn++){const Nn=Y?je(Be[Jn],Qt[Jn],Lt):Be[Jn];ge?(ve.copy(ye.normals[0]).multiplyScalar(Nn.x),be.copy(ye.binormals[0]).multiplyScalar(Nn.y),Me.copy(ue[0]).add(ve).add(be),Zn(Me.x,Me.y,Me.z)):Zn(Nn.x,Nn.y,0)}for(let Jn=1;Jn<=z;Jn++)for(let Nn=0;Nn<He;Nn++){const Xn=Y?je(Be[Nn],Qt[Nn],Lt):Be[Nn];ge?(ve.copy(ye.normals[Jn]).multiplyScalar(Xn.x),be.copy(ye.binormals[Jn]).multiplyScalar(Xn.y),Me.copy(ue[Jn]).add(ve).add(be),Zn(Me.x,Me.y,Me.z)):Zn(Xn.x,Xn.y,H/z*Jn)}for(let Jn=se-1;Jn>=0;Jn--){const Nn=Jn/se,Xn=ee*Math.cos(Nn*Math.PI/2),jn=ie*Math.sin(Nn*Math.PI/2)+oe;for(let Un=0,bn=ze.length;Un<bn;Un++){const Kn=je(ze[Un],$e[Un],jn);Zn(Kn.x,Kn.y,H+Xn)}for(let Un=0,bn=De.length;Un<bn;Un++){const Kn=De[Un];nt=We[Un];for(let Qn=0,pr=Kn.length;Qn<pr;Qn++){const fn=je(Kn[Qn],nt[Qn],jn);ge?Zn(fn.x,fn.y+ue[z-1].y,ue[z-1].x+Xn):Zn(fn.x,fn.y,H+Xn)}}}Mn(),cr();function Mn(){const Jn=C.length/3;if(Y){let Nn=0,Xn=He*Nn;for(let jn=0;jn<Bn;jn++){const Un=Wt[jn];$n(Un[2]+Xn,Un[1]+Xn,Un[0]+Xn)}Nn=z+se*2,Xn=He*Nn;for(let jn=0;jn<Bn;jn++){const Un=Wt[jn];$n(Un[0]+Xn,Un[1]+Xn,Un[2]+Xn)}}else{for(let Nn=0;Nn<Bn;Nn++){const Xn=Wt[Nn];$n(Xn[2],Xn[1],Xn[0])}for(let Nn=0;Nn<Bn;Nn++){const Xn=Wt[Nn];$n(Xn[0]+He*z,Xn[1]+He*z,Xn[2]+He*z)}}A.addGroup(Jn,C.length/3-Jn,0)}function cr(){const Jn=C.length/3;let Nn=0;In(ze,Nn),Nn+=ze.length;for(let Xn=0,jn=De.length;Xn<jn;Xn++){const Un=De[Xn];In(Un,Nn),Nn+=Un.length}A.addGroup(Jn,C.length/3-Jn,1)}function In(Jn,Nn){let Xn=Jn.length;for(;--Xn>=0;){const jn=Xn;let Un=Xn-1;Un<0&&(Un=Jn.length-1);for(let bn=0,Kn=z+se*2;bn<Kn;bn++){const Qn=He*bn,pr=He*(bn+1),fn=Nn+jn+Qn,Mt=Nn+Un+Qn,yn=Nn+Un+pr,kn=Nn+jn+pr;Rn(fn,Mt,yn,kn)}}}function Zn(Jn,Nn,Xn){G.push(Jn),G.push(Nn),G.push(Xn)}function $n(Jn,Nn,Xn){Dn(Jn),Dn(Nn),Dn(Xn);const jn=C.length/3,Un=fe.generateTopUV(A,C,jn-3,jn-2,jn-1);Gt(Un[0]),Gt(Un[1]),Gt(Un[2])}function Rn(Jn,Nn,Xn,jn){Dn(Jn),Dn(Nn),Dn(jn),Dn(Nn),Dn(Xn),Dn(jn);const Un=C.length/3,bn=fe.generateSideWallUV(A,C,Un-6,Un-3,Un-2,Un-1);Gt(bn[0]),Gt(bn[1]),Gt(bn[3]),Gt(bn[1]),Gt(bn[2]),Gt(bn[3])}function Dn(Jn){C.push(G[Jn*3+0]),C.push(G[Jn*3+1]),C.push(G[Jn*3+2])}function Gt(Jn){w.push(Jn.x),w.push(Jn.y)}}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}toJSON(){const d=super.toJSON(),v=this.parameters.shapes,A=this.parameters.options;return toJSON$1(v,A,d)}static fromJSON(d,v){const A=[];for(let w=0,T=d.shapes.length;w<T;w++){const R=v[d.shapes[w]];A.push(R)}const C=d.options.extrudePath;return C!==void 0&&(d.options.extrudePath=new Curves[C.type]().fromJSON(C)),new ExtrudeGeometry(A,d.options)}}const WorldUVGenerator={generateTopUV:function(_,d,v,A,C){const w=d[v*3],T=d[v*3+1],R=d[A*3],G=d[A*3+1],I=d[C*3],z=d[C*3+1];return[new Vector2(w,T),new Vector2(R,G),new Vector2(I,z)]},generateSideWallUV:function(_,d,v,A,C,w){const T=d[v*3],R=d[v*3+1],G=d[v*3+2],I=d[A*3],z=d[A*3+1],H=d[A*3+2],Y=d[C*3],ee=d[C*3+1],ie=d[C*3+2],oe=d[w*3],se=d[w*3+1],re=d[w*3+2];return Math.abs(R-z)<Math.abs(T-I)?[new Vector2(T,1-G),new Vector2(I,1-H),new Vector2(Y,1-ie),new Vector2(oe,1-re)]:[new Vector2(R,1-G),new Vector2(z,1-H),new Vector2(ee,1-ie),new Vector2(se,1-re)]}};function toJSON$1(_,d,v){if(v.shapes=[],Array.isArray(_))for(let A=0,C=_.length;A<C;A++){const w=_[A];v.shapes.push(w.uuid)}else v.shapes.push(_.uuid);return v.options=Object.assign({},d),d.extrudePath!==void 0&&(v.options.extrudePath=d.extrudePath.toJSON()),v}class IcosahedronGeometry extends PolyhedronGeometry{constructor(d=1,v=0){const A=(1+Math.sqrt(5))/2,C=[-1,A,0,1,A,0,-1,-A,0,1,-A,0,0,-1,A,0,1,A,0,-1,-A,0,1,-A,A,0,-1,A,0,1,-A,0,-1,-A,0,1],w=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(C,w,d,v),this.type="IcosahedronGeometry",this.parameters={radius:d,detail:v}}static fromJSON(d){return new IcosahedronGeometry(d.radius,d.detail)}}class LatheGeometry extends BufferGeometry{constructor(d=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],v=12,A=0,C=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:d,segments:v,phiStart:A,phiLength:C},v=Math.floor(v),C=clamp$2(C,0,Math.PI*2);const w=[],T=[],R=[],G=[],I=[],z=1/v,H=new Vector3,Y=new Vector2,ee=new Vector3,ie=new Vector3,oe=new Vector3;let se=0,re=0;for(let fe=0;fe<=d.length-1;fe++)switch(fe){case 0:se=d[fe+1].x-d[fe].x,re=d[fe+1].y-d[fe].y,ee.x=re*1,ee.y=-se,ee.z=re*0,oe.copy(ee),ee.normalize(),G.push(ee.x,ee.y,ee.z);break;case d.length-1:G.push(oe.x,oe.y,oe.z);break;default:se=d[fe+1].x-d[fe].x,re=d[fe+1].y-d[fe].y,ee.x=re*1,ee.y=-se,ee.z=re*0,ie.copy(ee),ee.x+=oe.x,ee.y+=oe.y,ee.z+=oe.z,ee.normalize(),G.push(ee.x,ee.y,ee.z),oe.copy(ie)}for(let fe=0;fe<=v;fe++){const ue=A+fe*z*C,ge=Math.sin(ue),ye=Math.cos(ue);for(let be=0;be<=d.length-1;be++){H.x=d[be].x*ge,H.y=d[be].y,H.z=d[be].x*ye,T.push(H.x,H.y,H.z),Y.x=fe/v,Y.y=be/(d.length-1),R.push(Y.x,Y.y);const ve=G[3*be+0]*ge,Me=G[3*be+1],we=G[3*be+0]*ye;I.push(ve,Me,we)}}for(let fe=0;fe<v;fe++)for(let ue=0;ue<d.length-1;ue++){const ge=ue+fe*d.length,ye=ge,be=ge+d.length,ve=ge+d.length+1,Me=ge+1;w.push(ye,be,Me),w.push(ve,Me,be)}this.setIndex(w),this.setAttribute("position",new Float32BufferAttribute(T,3)),this.setAttribute("uv",new Float32BufferAttribute(R,2)),this.setAttribute("normal",new Float32BufferAttribute(I,3))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new LatheGeometry(d.points,d.segments,d.phiStart,d.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(d=1,v=0){const A=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],C=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(A,C,d,v),this.type="OctahedronGeometry",this.parameters={radius:d,detail:v}}static fromJSON(d){return new OctahedronGeometry(d.radius,d.detail)}}class PlaneGeometry extends BufferGeometry{constructor(d=1,v=1,A=1,C=1){super(),this.type="PlaneGeometry",this.parameters={width:d,height:v,widthSegments:A,heightSegments:C};const w=d/2,T=v/2,R=Math.floor(A),G=Math.floor(C),I=R+1,z=G+1,H=d/R,Y=v/G,ee=[],ie=[],oe=[],se=[];for(let re=0;re<z;re++){const fe=re*Y-T;for(let ue=0;ue<I;ue++){const ge=ue*H-w;ie.push(ge,-fe,0),oe.push(0,0,1),se.push(ue/R),se.push(1-re/G)}}for(let re=0;re<G;re++)for(let fe=0;fe<R;fe++){const ue=fe+I*re,ge=fe+I*(re+1),ye=fe+1+I*(re+1),be=fe+1+I*re;ee.push(ue,ge,be),ee.push(ge,ye,be)}this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(oe,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new PlaneGeometry(d.width,d.height,d.widthSegments,d.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(d=.5,v=1,A=32,C=1,w=0,T=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:d,outerRadius:v,thetaSegments:A,phiSegments:C,thetaStart:w,thetaLength:T},A=Math.max(3,A),C=Math.max(1,C);const R=[],G=[],I=[],z=[];let H=d;const Y=(v-d)/C,ee=new Vector3,ie=new Vector2;for(let oe=0;oe<=C;oe++){for(let se=0;se<=A;se++){const re=w+se/A*T;ee.x=H*Math.cos(re),ee.y=H*Math.sin(re),G.push(ee.x,ee.y,ee.z),I.push(0,0,1),ie.x=(ee.x/v+1)/2,ie.y=(ee.y/v+1)/2,z.push(ie.x,ie.y)}H+=Y}for(let oe=0;oe<C;oe++){const se=oe*(A+1);for(let re=0;re<A;re++){const fe=re+se,ue=fe,ge=fe+A+1,ye=fe+A+2,be=fe+1;R.push(ue,ge,be),R.push(ge,ye,be)}}this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(G,3)),this.setAttribute("normal",new Float32BufferAttribute(I,3)),this.setAttribute("uv",new Float32BufferAttribute(z,2))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new RingGeometry(d.innerRadius,d.outerRadius,d.thetaSegments,d.phiSegments,d.thetaStart,d.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(d=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),v=12){super(),this.type="ShapeGeometry",this.parameters={shapes:d,curveSegments:v};const A=[],C=[],w=[],T=[];let R=0,G=0;if(Array.isArray(d)===!1)I(d);else for(let z=0;z<d.length;z++)I(d[z]),this.addGroup(R,G,z),R+=G,G=0;this.setIndex(A),this.setAttribute("position",new Float32BufferAttribute(C,3)),this.setAttribute("normal",new Float32BufferAttribute(w,3)),this.setAttribute("uv",new Float32BufferAttribute(T,2));function I(z){const H=C.length/3,Y=z.extractPoints(v);let ee=Y.shape;const ie=Y.holes;ShapeUtils.isClockWise(ee)===!1&&(ee=ee.reverse());for(let se=0,re=ie.length;se<re;se++){const fe=ie[se];ShapeUtils.isClockWise(fe)===!0&&(ie[se]=fe.reverse())}const oe=ShapeUtils.triangulateShape(ee,ie);for(let se=0,re=ie.length;se<re;se++){const fe=ie[se];ee=ee.concat(fe)}for(let se=0,re=ee.length;se<re;se++){const fe=ee[se];C.push(fe.x,fe.y,0),w.push(0,0,1),T.push(fe.x,fe.y)}for(let se=0,re=oe.length;se<re;se++){const fe=oe[se],ue=fe[0]+H,ge=fe[1]+H,ye=fe[2]+H;A.push(ue,ge,ye),G+=3}}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}toJSON(){const d=super.toJSON(),v=this.parameters.shapes;return toJSON(v,d)}static fromJSON(d,v){const A=[];for(let C=0,w=d.shapes.length;C<w;C++){const T=v[d.shapes[C]];A.push(T)}return new ShapeGeometry(A,d.curveSegments)}}function toJSON(_,d){if(d.shapes=[],Array.isArray(_))for(let v=0,A=_.length;v<A;v++){const C=_[v];d.shapes.push(C.uuid)}else d.shapes.push(_.uuid);return d}class SphereGeometry extends BufferGeometry{constructor(d=1,v=32,A=16,C=0,w=Math.PI*2,T=0,R=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:d,widthSegments:v,heightSegments:A,phiStart:C,phiLength:w,thetaStart:T,thetaLength:R},v=Math.max(3,Math.floor(v)),A=Math.max(2,Math.floor(A));const G=Math.min(T+R,Math.PI);let I=0;const z=[],H=new Vector3,Y=new Vector3,ee=[],ie=[],oe=[],se=[];for(let re=0;re<=A;re++){const fe=[],ue=re/A;let ge=0;re===0&&T===0?ge=.5/v:re===A&&G===Math.PI&&(ge=-.5/v);for(let ye=0;ye<=v;ye++){const be=ye/v;H.x=-d*Math.cos(C+be*w)*Math.sin(T+ue*R),H.y=d*Math.cos(T+ue*R),H.z=d*Math.sin(C+be*w)*Math.sin(T+ue*R),ie.push(H.x,H.y,H.z),Y.copy(H).normalize(),oe.push(Y.x,Y.y,Y.z),se.push(be+ge,1-ue),fe.push(I++)}z.push(fe)}for(let re=0;re<A;re++)for(let fe=0;fe<v;fe++){const ue=z[re][fe+1],ge=z[re][fe],ye=z[re+1][fe],be=z[re+1][fe+1];(re!==0||T>0)&&ee.push(ue,ge,be),(re!==A-1||G<Math.PI)&&ee.push(ge,ye,be)}this.setIndex(ee),this.setAttribute("position",new Float32BufferAttribute(ie,3)),this.setAttribute("normal",new Float32BufferAttribute(oe,3)),this.setAttribute("uv",new Float32BufferAttribute(se,2))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new SphereGeometry(d.radius,d.widthSegments,d.heightSegments,d.phiStart,d.phiLength,d.thetaStart,d.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(d=1,v=0){const A=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],C=[2,1,0,0,3,2,1,3,0,2,3,1];super(A,C,d,v),this.type="TetrahedronGeometry",this.parameters={radius:d,detail:v}}static fromJSON(d){return new TetrahedronGeometry(d.radius,d.detail)}}class TorusGeometry extends BufferGeometry{constructor(d=1,v=.4,A=12,C=48,w=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:d,tube:v,radialSegments:A,tubularSegments:C,arc:w},A=Math.floor(A),C=Math.floor(C);const T=[],R=[],G=[],I=[],z=new Vector3,H=new Vector3,Y=new Vector3;for(let ee=0;ee<=A;ee++)for(let ie=0;ie<=C;ie++){const oe=ie/C*w,se=ee/A*Math.PI*2;H.x=(d+v*Math.cos(se))*Math.cos(oe),H.y=(d+v*Math.cos(se))*Math.sin(oe),H.z=v*Math.sin(se),R.push(H.x,H.y,H.z),z.x=d*Math.cos(oe),z.y=d*Math.sin(oe),Y.subVectors(H,z).normalize(),G.push(Y.x,Y.y,Y.z),I.push(ie/C),I.push(ee/A)}for(let ee=1;ee<=A;ee++)for(let ie=1;ie<=C;ie++){const oe=(C+1)*ee+ie-1,se=(C+1)*(ee-1)+ie-1,re=(C+1)*(ee-1)+ie,fe=(C+1)*ee+ie;T.push(oe,se,fe),T.push(se,re,fe)}this.setIndex(T),this.setAttribute("position",new Float32BufferAttribute(R,3)),this.setAttribute("normal",new Float32BufferAttribute(G,3)),this.setAttribute("uv",new Float32BufferAttribute(I,2))}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new TorusGeometry(d.radius,d.tube,d.radialSegments,d.tubularSegments,d.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(d=1,v=.4,A=64,C=8,w=2,T=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:d,tube:v,tubularSegments:A,radialSegments:C,p:w,q:T},A=Math.floor(A),C=Math.floor(C);const R=[],G=[],I=[],z=[],H=new Vector3,Y=new Vector3,ee=new Vector3,ie=new Vector3,oe=new Vector3,se=new Vector3,re=new Vector3;for(let ue=0;ue<=A;++ue){const ge=ue/A*w*Math.PI*2;fe(ge,w,T,d,ee),fe(ge+.01,w,T,d,ie),se.subVectors(ie,ee),re.addVectors(ie,ee),oe.crossVectors(se,re),re.crossVectors(oe,se),oe.normalize(),re.normalize();for(let ye=0;ye<=C;++ye){const be=ye/C*Math.PI*2,ve=-v*Math.cos(be),Me=v*Math.sin(be);H.x=ee.x+(ve*re.x+Me*oe.x),H.y=ee.y+(ve*re.y+Me*oe.y),H.z=ee.z+(ve*re.z+Me*oe.z),G.push(H.x,H.y,H.z),Y.subVectors(H,ee).normalize(),I.push(Y.x,Y.y,Y.z),z.push(ue/A),z.push(ye/C)}}for(let ue=1;ue<=A;ue++)for(let ge=1;ge<=C;ge++){const ye=(C+1)*(ue-1)+(ge-1),be=(C+1)*ue+(ge-1),ve=(C+1)*ue+ge,Me=(C+1)*(ue-1)+ge;R.push(ye,be,Me),R.push(be,ve,Me)}this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(G,3)),this.setAttribute("normal",new Float32BufferAttribute(I,3)),this.setAttribute("uv",new Float32BufferAttribute(z,2));function fe(ue,ge,ye,be,ve){const Me=Math.cos(ue),we=Math.sin(ue),Be=ye/ge*ue,De=Math.cos(Be);ve.x=be*(2+De)*.5*Me,ve.y=be*(2+De)*we*.5,ve.z=be*Math.sin(Be)*.5}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}static fromJSON(d){return new TorusKnotGeometry(d.radius,d.tube,d.tubularSegments,d.radialSegments,d.p,d.q)}}class TubeGeometry extends BufferGeometry{constructor(d=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),v=64,A=1,C=8,w=!1){super(),this.type="TubeGeometry",this.parameters={path:d,tubularSegments:v,radius:A,radialSegments:C,closed:w};const T=d.computeFrenetFrames(v,w);this.tangents=T.tangents,this.normals=T.normals,this.binormals=T.binormals;const R=new Vector3,G=new Vector3,I=new Vector2;let z=new Vector3;const H=[],Y=[],ee=[],ie=[];oe(),this.setIndex(ie),this.setAttribute("position",new Float32BufferAttribute(H,3)),this.setAttribute("normal",new Float32BufferAttribute(Y,3)),this.setAttribute("uv",new Float32BufferAttribute(ee,2));function oe(){for(let ue=0;ue<v;ue++)se(ue);se(w===!1?v:0),fe(),re()}function se(ue){z=d.getPointAt(ue/v,z);const ge=T.normals[ue],ye=T.binormals[ue];for(let be=0;be<=C;be++){const ve=be/C*Math.PI*2,Me=Math.sin(ve),we=-Math.cos(ve);G.x=we*ge.x+Me*ye.x,G.y=we*ge.y+Me*ye.y,G.z=we*ge.z+Me*ye.z,G.normalize(),Y.push(G.x,G.y,G.z),R.x=z.x+A*G.x,R.y=z.y+A*G.y,R.z=z.z+A*G.z,H.push(R.x,R.y,R.z)}}function re(){for(let ue=1;ue<=v;ue++)for(let ge=1;ge<=C;ge++){const ye=(C+1)*(ue-1)+(ge-1),be=(C+1)*ue+(ge-1),ve=(C+1)*ue+ge,Me=(C+1)*(ue-1)+ge;ie.push(ye,be,Me),ie.push(be,ve,Me)}}function fe(){for(let ue=0;ue<=v;ue++)for(let ge=0;ge<=C;ge++)I.x=ue/v,I.y=ge/C,ee.push(I.x,I.y)}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}toJSON(){const d=super.toJSON();return d.path=this.parameters.path.toJSON(),d}static fromJSON(d){return new TubeGeometry(new Curves[d.path.type]().fromJSON(d.path),d.tubularSegments,d.radius,d.radialSegments,d.closed)}}class WireframeGeometry extends BufferGeometry{constructor(d=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:d},d!==null){const v=[],A=new Set,C=new Vector3,w=new Vector3;if(d.index!==null){const T=d.attributes.position,R=d.index;let G=d.groups;G.length===0&&(G=[{start:0,count:R.count,materialIndex:0}]);for(let I=0,z=G.length;I<z;++I){const H=G[I],Y=H.start,ee=H.count;for(let ie=Y,oe=Y+ee;ie<oe;ie+=3)for(let se=0;se<3;se++){const re=R.getX(ie+se),fe=R.getX(ie+(se+1)%3);C.fromBufferAttribute(T,re),w.fromBufferAttribute(T,fe),isUniqueEdge(C,w,A)===!0&&(v.push(C.x,C.y,C.z),v.push(w.x,w.y,w.z))}}}else{const T=d.attributes.position;for(let R=0,G=T.count/3;R<G;R++)for(let I=0;I<3;I++){const z=3*R+I,H=3*R+(I+1)%3;C.fromBufferAttribute(T,z),w.fromBufferAttribute(T,H),isUniqueEdge(C,w,A)===!0&&(v.push(C.x,C.y,C.z),v.push(w.x,w.y,w.z))}}this.setAttribute("position",new Float32BufferAttribute(v,3))}}copy(d){return super.copy(d),this.parameters=Object.assign({},d.parameters),this}}function isUniqueEdge(_,d,v){const A=`${_.x},${_.y},${_.z}-${d.x},${d.y},${d.z}`,C=`${d.x},${d.y},${d.z}-${_.x},${_.y},${_.z}`;return v.has(A)===!0||v.has(C)===!0?!1:(v.add(A),v.add(C),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(d){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.fog=d.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(d){super(d),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(d){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.defines={STANDARD:""},this.color.copy(d.color),this.roughness=d.roughness,this.metalness=d.metalness,this.map=d.map,this.lightMap=d.lightMap,this.lightMapIntensity=d.lightMapIntensity,this.aoMap=d.aoMap,this.aoMapIntensity=d.aoMapIntensity,this.emissive.copy(d.emissive),this.emissiveMap=d.emissiveMap,this.emissiveIntensity=d.emissiveIntensity,this.bumpMap=d.bumpMap,this.bumpScale=d.bumpScale,this.normalMap=d.normalMap,this.normalMapType=d.normalMapType,this.normalScale.copy(d.normalScale),this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.roughnessMap=d.roughnessMap,this.metalnessMap=d.metalnessMap,this.alphaMap=d.alphaMap,this.envMap=d.envMap,this.envMapRotation.copy(d.envMapRotation),this.envMapIntensity=d.envMapIntensity,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.wireframeLinecap=d.wireframeLinecap,this.wireframeLinejoin=d.wireframeLinejoin,this.flatShading=d.flatShading,this.fog=d.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(d){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$2(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(v){this.ior=(1+.4*v)/(1-.4*v)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(d)}get anisotropy(){return this._anisotropy}set anisotropy(d){this._anisotropy>0!=d>0&&this.version++,this._anisotropy=d}get clearcoat(){return this._clearcoat}set clearcoat(d){this._clearcoat>0!=d>0&&this.version++,this._clearcoat=d}get iridescence(){return this._iridescence}set iridescence(d){this._iridescence>0!=d>0&&this.version++,this._iridescence=d}get dispersion(){return this._dispersion}set dispersion(d){this._dispersion>0!=d>0&&this.version++,this._dispersion=d}get sheen(){return this._sheen}set sheen(d){this._sheen>0!=d>0&&this.version++,this._sheen=d}get transmission(){return this._transmission}set transmission(d){this._transmission>0!=d>0&&this.version++,this._transmission=d}copy(d){return super.copy(d),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=d.anisotropy,this.anisotropyRotation=d.anisotropyRotation,this.anisotropyMap=d.anisotropyMap,this.clearcoat=d.clearcoat,this.clearcoatMap=d.clearcoatMap,this.clearcoatRoughness=d.clearcoatRoughness,this.clearcoatRoughnessMap=d.clearcoatRoughnessMap,this.clearcoatNormalMap=d.clearcoatNormalMap,this.clearcoatNormalScale.copy(d.clearcoatNormalScale),this.dispersion=d.dispersion,this.ior=d.ior,this.iridescence=d.iridescence,this.iridescenceMap=d.iridescenceMap,this.iridescenceIOR=d.iridescenceIOR,this.iridescenceThicknessRange=[...d.iridescenceThicknessRange],this.iridescenceThicknessMap=d.iridescenceThicknessMap,this.sheen=d.sheen,this.sheenColor.copy(d.sheenColor),this.sheenColorMap=d.sheenColorMap,this.sheenRoughness=d.sheenRoughness,this.sheenRoughnessMap=d.sheenRoughnessMap,this.transmission=d.transmission,this.transmissionMap=d.transmissionMap,this.thickness=d.thickness,this.thicknessMap=d.thicknessMap,this.attenuationDistance=d.attenuationDistance,this.attenuationColor.copy(d.attenuationColor),this.specularIntensity=d.specularIntensity,this.specularIntensityMap=d.specularIntensityMap,this.specularColor.copy(d.specularColor),this.specularColorMap=d.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(d){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.specular.copy(d.specular),this.shininess=d.shininess,this.map=d.map,this.lightMap=d.lightMap,this.lightMapIntensity=d.lightMapIntensity,this.aoMap=d.aoMap,this.aoMapIntensity=d.aoMapIntensity,this.emissive.copy(d.emissive),this.emissiveMap=d.emissiveMap,this.emissiveIntensity=d.emissiveIntensity,this.bumpMap=d.bumpMap,this.bumpScale=d.bumpScale,this.normalMap=d.normalMap,this.normalMapType=d.normalMapType,this.normalScale.copy(d.normalScale),this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.specularMap=d.specularMap,this.alphaMap=d.alphaMap,this.envMap=d.envMap,this.envMapRotation.copy(d.envMapRotation),this.combine=d.combine,this.reflectivity=d.reflectivity,this.refractionRatio=d.refractionRatio,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.wireframeLinecap=d.wireframeLinecap,this.wireframeLinejoin=d.wireframeLinejoin,this.flatShading=d.flatShading,this.fog=d.fog,this}}class MeshToonMaterial extends Material{constructor(d){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.map=d.map,this.gradientMap=d.gradientMap,this.lightMap=d.lightMap,this.lightMapIntensity=d.lightMapIntensity,this.aoMap=d.aoMap,this.aoMapIntensity=d.aoMapIntensity,this.emissive.copy(d.emissive),this.emissiveMap=d.emissiveMap,this.emissiveIntensity=d.emissiveIntensity,this.bumpMap=d.bumpMap,this.bumpScale=d.bumpScale,this.normalMap=d.normalMap,this.normalMapType=d.normalMapType,this.normalScale.copy(d.normalScale),this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.alphaMap=d.alphaMap,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.wireframeLinecap=d.wireframeLinecap,this.wireframeLinejoin=d.wireframeLinejoin,this.fog=d.fog,this}}class MeshNormalMaterial extends Material{constructor(d){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(d)}copy(d){return super.copy(d),this.bumpMap=d.bumpMap,this.bumpScale=d.bumpScale,this.normalMap=d.normalMap,this.normalMapType=d.normalMapType,this.normalScale.copy(d.normalScale),this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.flatShading=d.flatShading,this}}class MeshLambertMaterial extends Material{constructor(d){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.color.copy(d.color),this.map=d.map,this.lightMap=d.lightMap,this.lightMapIntensity=d.lightMapIntensity,this.aoMap=d.aoMap,this.aoMapIntensity=d.aoMapIntensity,this.emissive.copy(d.emissive),this.emissiveMap=d.emissiveMap,this.emissiveIntensity=d.emissiveIntensity,this.bumpMap=d.bumpMap,this.bumpScale=d.bumpScale,this.normalMap=d.normalMap,this.normalMapType=d.normalMapType,this.normalScale.copy(d.normalScale),this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.specularMap=d.specularMap,this.alphaMap=d.alphaMap,this.envMap=d.envMap,this.envMapRotation.copy(d.envMapRotation),this.combine=d.combine,this.reflectivity=d.reflectivity,this.refractionRatio=d.refractionRatio,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this.wireframeLinecap=d.wireframeLinecap,this.wireframeLinejoin=d.wireframeLinejoin,this.flatShading=d.flatShading,this.fog=d.fog,this}}class MeshDepthMaterial extends Material{constructor(d){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(d)}copy(d){return super.copy(d),this.depthPacking=d.depthPacking,this.map=d.map,this.alphaMap=d.alphaMap,this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.wireframe=d.wireframe,this.wireframeLinewidth=d.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(d){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(d)}copy(d){return super.copy(d),this.map=d.map,this.alphaMap=d.alphaMap,this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(d){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(d)}copy(d){return super.copy(d),this.defines={MATCAP:""},this.color.copy(d.color),this.matcap=d.matcap,this.map=d.map,this.bumpMap=d.bumpMap,this.bumpScale=d.bumpScale,this.normalMap=d.normalMap,this.normalMapType=d.normalMapType,this.normalScale.copy(d.normalScale),this.displacementMap=d.displacementMap,this.displacementScale=d.displacementScale,this.displacementBias=d.displacementBias,this.alphaMap=d.alphaMap,this.flatShading=d.flatShading,this.fog=d.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(d){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(d)}copy(d){return super.copy(d),this.scale=d.scale,this.dashSize=d.dashSize,this.gapSize=d.gapSize,this}}function convertArray(_,d){return!_||_.constructor===d?_:typeof d.BYTES_PER_ELEMENT=="number"?new d(_):Array.prototype.slice.call(_)}function isTypedArray(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}function getKeyframeOrder(_){function d(C,w){return _[C]-_[w]}const v=_.length,A=new Array(v);for(let C=0;C!==v;++C)A[C]=C;return A.sort(d),A}function sortedArray(_,d,v){const A=_.length,C=new _.constructor(A);for(let w=0,T=0;T!==A;++w){const R=v[w]*d;for(let G=0;G!==d;++G)C[T++]=_[R+G]}return C}function flattenJSON(_,d,v,A){let C=1,w=_[0];for(;w!==void 0&&w[A]===void 0;)w=_[C++];if(w===void 0)return;let T=w[A];if(T!==void 0)if(Array.isArray(T))do T=w[A],T!==void 0&&(d.push(w.time),v.push(...T)),w=_[C++];while(w!==void 0);else if(T.toArray!==void 0)do T=w[A],T!==void 0&&(d.push(w.time),T.toArray(v,v.length)),w=_[C++];while(w!==void 0);else do T=w[A],T!==void 0&&(d.push(w.time),v.push(T)),w=_[C++];while(w!==void 0)}function subclip(_,d,v,A,C=30){const w=_.clone();w.name=d;const T=[];for(let G=0;G<w.tracks.length;++G){const I=w.tracks[G],z=I.getValueSize(),H=[],Y=[];for(let ee=0;ee<I.times.length;++ee){const ie=I.times[ee]*C;if(!(ie<v||ie>=A)){H.push(I.times[ee]);for(let oe=0;oe<z;++oe)Y.push(I.values[ee*z+oe])}}H.length!==0&&(I.times=convertArray(H,I.times.constructor),I.values=convertArray(Y,I.values.constructor),T.push(I))}w.tracks=T;let R=1/0;for(let G=0;G<w.tracks.length;++G)R>w.tracks[G].times[0]&&(R=w.tracks[G].times[0]);for(let G=0;G<w.tracks.length;++G)w.tracks[G].shift(-1*R);return w.resetDuration(),w}function makeClipAdditive(_,d=0,v=_,A=30){A<=0&&(A=30);const C=v.tracks.length,w=d/A;for(let T=0;T<C;++T){const R=v.tracks[T],G=R.ValueTypeName;if(G==="bool"||G==="string")continue;const I=_.tracks.find(function(re){return re.name===R.name&&re.ValueTypeName===G});if(I===void 0)continue;let z=0;const H=R.getValueSize();R.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(z=H/3);let Y=0;const ee=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Y=ee/3);const ie=R.times.length-1;let oe;if(w<=R.times[0]){const re=z,fe=H-z;oe=R.values.slice(re,fe)}else if(w>=R.times[ie]){const re=ie*H+z,fe=re+H-z;oe=R.values.slice(re,fe)}else{const re=R.createInterpolant(),fe=z,ue=H-z;re.evaluate(w),oe=re.resultBuffer.slice(fe,ue)}G==="quaternion"&&new Quaternion().fromArray(oe).normalize().conjugate().toArray(oe);const se=I.times.length;for(let re=0;re<se;++re){const fe=re*ee+Y;if(G==="quaternion")Quaternion.multiplyQuaternionsFlat(I.values,fe,oe,0,I.values,fe);else{const ue=ee-Y*2;for(let ge=0;ge<ue;++ge)I.values[fe+ge]-=oe[ge]}}}return _.blendMode=AdditiveAnimationBlendMode,_}class AnimationUtils{static convertArray(d,v){return convertArray(d,v)}static isTypedArray(d){return isTypedArray(d)}static getKeyframeOrder(d){return getKeyframeOrder(d)}static sortedArray(d,v,A){return sortedArray(d,v,A)}static flattenJSON(d,v,A,C){flattenJSON(d,v,A,C)}static subclip(d,v,A,C,w=30){return subclip(d,v,A,C,w)}static makeClipAdditive(d,v=0,A=d,C=30){return makeClipAdditive(d,v,A,C)}}class Interpolant{constructor(d,v,A,C){this.parameterPositions=d,this._cachedIndex=0,this.resultBuffer=C!==void 0?C:new v.constructor(A),this.sampleValues=v,this.valueSize=A,this.settings=null,this.DefaultSettings_={}}evaluate(d){const v=this.parameterPositions;let A=this._cachedIndex,C=v[A],w=v[A-1];e:{t:{let T;n:{r:if(!(d<C)){for(let R=A+2;;){if(C===void 0){if(d<w)break r;return A=v.length,this._cachedIndex=A,this.copySampleValue_(A-1)}if(A===R)break;if(w=C,C=v[++A],d<C)break t}T=v.length;break n}if(!(d>=w)){const R=v[1];d<R&&(A=2,w=R);for(let G=A-2;;){if(w===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(A===G)break;if(C=w,w=v[--A-1],d>=w)break t}T=A,A=0;break n}break e}for(;A<T;){const R=A+T>>>1;d<v[R]?T=R:A=R+1}if(C=v[A],w=v[A-1],w===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(C===void 0)return A=v.length,this._cachedIndex=A,this.copySampleValue_(A-1)}this._cachedIndex=A,this.intervalChanged_(A,w,C)}return this.interpolate_(A,w,d,C)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(d){const v=this.resultBuffer,A=this.sampleValues,C=this.valueSize,w=d*C;for(let T=0;T!==C;++T)v[T]=A[w+T];return v}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(d,v,A,C){super(d,v,A,C),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(d,v,A){const C=this.parameterPositions;let w=d-2,T=d+1,R=C[w],G=C[T];if(R===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:w=d,R=2*v-A;break;case WrapAroundEnding:w=C.length-2,R=v+C[w]-C[w+1];break;default:w=d,R=A}if(G===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:T=d,G=2*A-v;break;case WrapAroundEnding:T=1,G=A+C[1]-C[0];break;default:T=d-1,G=v}const I=(A-v)*.5,z=this.valueSize;this._weightPrev=I/(v-R),this._weightNext=I/(G-A),this._offsetPrev=w*z,this._offsetNext=T*z}interpolate_(d,v,A,C){const w=this.resultBuffer,T=this.sampleValues,R=this.valueSize,G=d*R,I=G-R,z=this._offsetPrev,H=this._offsetNext,Y=this._weightPrev,ee=this._weightNext,ie=(A-v)/(C-v),oe=ie*ie,se=oe*ie,re=-Y*se+2*Y*oe-Y*ie,fe=(1+Y)*se+(-1.5-2*Y)*oe+(-.5+Y)*ie+1,ue=(-1-ee)*se+(1.5+ee)*oe+.5*ie,ge=ee*se-ee*oe;for(let ye=0;ye!==R;++ye)w[ye]=re*T[z+ye]+fe*T[I+ye]+ue*T[G+ye]+ge*T[H+ye];return w}}class LinearInterpolant extends Interpolant{constructor(d,v,A,C){super(d,v,A,C)}interpolate_(d,v,A,C){const w=this.resultBuffer,T=this.sampleValues,R=this.valueSize,G=d*R,I=G-R,z=(A-v)/(C-v),H=1-z;for(let Y=0;Y!==R;++Y)w[Y]=T[I+Y]*H+T[G+Y]*z;return w}}class DiscreteInterpolant extends Interpolant{constructor(d,v,A,C){super(d,v,A,C)}interpolate_(d){return this.copySampleValue_(d-1)}}class KeyframeTrack{constructor(d,v,A,C){if(d===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(v===void 0||v.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+d);this.name=d,this.times=convertArray(v,this.TimeBufferType),this.values=convertArray(A,this.ValueBufferType),this.setInterpolation(C||this.DefaultInterpolation)}static toJSON(d){const v=d.constructor;let A;if(v.toJSON!==this.toJSON)A=v.toJSON(d);else{A={name:d.name,times:convertArray(d.times,Array),values:convertArray(d.values,Array)};const C=d.getInterpolation();C!==d.DefaultInterpolation&&(A.interpolation=C)}return A.type=d.ValueTypeName,A}InterpolantFactoryMethodDiscrete(d){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),d)}InterpolantFactoryMethodLinear(d){return new LinearInterpolant(this.times,this.values,this.getValueSize(),d)}InterpolantFactoryMethodSmooth(d){return new CubicInterpolant(this.times,this.values,this.getValueSize(),d)}setInterpolation(d){let v;switch(d){case InterpolateDiscrete:v=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:v=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:v=this.InterpolantFactoryMethodSmooth;break}if(v===void 0){const A="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(d!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(A);return console.warn("THREE.KeyframeTrack:",A),this}return this.createInterpolant=v,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(d){if(d!==0){const v=this.times;for(let A=0,C=v.length;A!==C;++A)v[A]+=d}return this}scale(d){if(d!==1){const v=this.times;for(let A=0,C=v.length;A!==C;++A)v[A]*=d}return this}trim(d,v){const A=this.times,C=A.length;let w=0,T=C-1;for(;w!==C&&A[w]<d;)++w;for(;T!==-1&&A[T]>v;)--T;if(++T,w!==0||T!==C){w>=T&&(T=Math.max(T,1),w=T-1);const R=this.getValueSize();this.times=A.slice(w,T),this.values=this.values.slice(w*R,T*R)}return this}validate(){let d=!0;const v=this.getValueSize();v-Math.floor(v)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),d=!1);const A=this.times,C=this.values,w=A.length;w===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),d=!1);let T=null;for(let R=0;R!==w;R++){const G=A[R];if(typeof G=="number"&&isNaN(G)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,R,G),d=!1;break}if(T!==null&&T>G){console.error("THREE.KeyframeTrack: Out of order keys.",this,R,G,T),d=!1;break}T=G}if(C!==void 0&&isTypedArray(C))for(let R=0,G=C.length;R!==G;++R){const I=C[R];if(isNaN(I)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,R,I),d=!1;break}}return d}optimize(){const d=this.times.slice(),v=this.values.slice(),A=this.getValueSize(),C=this.getInterpolation()===InterpolateSmooth,w=d.length-1;let T=1;for(let R=1;R<w;++R){let G=!1;const I=d[R],z=d[R+1];if(I!==z&&(R!==1||I!==d[0]))if(C)G=!0;else{const H=R*A,Y=H-A,ee=H+A;for(let ie=0;ie!==A;++ie){const oe=v[H+ie];if(oe!==v[Y+ie]||oe!==v[ee+ie]){G=!0;break}}}if(G){if(R!==T){d[T]=d[R];const H=R*A,Y=T*A;for(let ee=0;ee!==A;++ee)v[Y+ee]=v[H+ee]}++T}}if(w>0){d[T]=d[w];for(let R=w*A,G=T*A,I=0;I!==A;++I)v[G+I]=v[R+I];++T}return T!==d.length?(this.times=d.slice(0,T),this.values=v.slice(0,T*A)):(this.times=d,this.values=v),this}clone(){const d=this.times.slice(),v=this.values.slice(),A=this.constructor,C=new A(this.name,d,v);return C.createInterpolant=this.createInterpolant,C}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(d,v,A){super(d,v,A)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(d,v,A,C){super(d,v,A,C)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(d,v,A,C){super(d,v,A,C)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(d,v,A,C){super(d,v,A,C)}interpolate_(d,v,A,C){const w=this.resultBuffer,T=this.sampleValues,R=this.valueSize,G=(A-v)/(C-v);let I=d*R;for(let z=I+R;I!==z;I+=4)Quaternion.slerpFlat(w,0,T,I-R,T,I,G);return w}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(d,v,A,C){super(d,v,A,C)}InterpolantFactoryMethodLinear(d){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),d)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(d,v,A){super(d,v,A)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(d,v,A,C){super(d,v,A,C)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(d="",v=-1,A=[],C=NormalAnimationBlendMode){this.name=d,this.tracks=A,this.duration=v,this.blendMode=C,this.uuid=generateUUID$1(),this.duration<0&&this.resetDuration()}static parse(d){const v=[],A=d.tracks,C=1/(d.fps||1);for(let T=0,R=A.length;T!==R;++T)v.push(parseKeyframeTrack(A[T]).scale(C));const w=new this(d.name,d.duration,v,d.blendMode);return w.uuid=d.uuid,w}static toJSON(d){const v=[],A=d.tracks,C={name:d.name,duration:d.duration,tracks:v,uuid:d.uuid,blendMode:d.blendMode};for(let w=0,T=A.length;w!==T;++w)v.push(KeyframeTrack.toJSON(A[w]));return C}static CreateFromMorphTargetSequence(d,v,A,C){const w=v.length,T=[];for(let R=0;R<w;R++){let G=[],I=[];G.push((R+w-1)%w,R,(R+1)%w),I.push(0,1,0);const z=getKeyframeOrder(G);G=sortedArray(G,1,z),I=sortedArray(I,1,z),!C&&G[0]===0&&(G.push(w),I.push(I[0])),T.push(new NumberKeyframeTrack(".morphTargetInfluences["+v[R].name+"]",G,I).scale(1/A))}return new this(d,-1,T)}static findByName(d,v){let A=d;if(!Array.isArray(d)){const C=d;A=C.geometry&&C.geometry.animations||C.animations}for(let C=0;C<A.length;C++)if(A[C].name===v)return A[C];return null}static CreateClipsFromMorphTargetSequences(d,v,A){const C={},w=/^([\w-]*?)([\d]+)$/;for(let R=0,G=d.length;R<G;R++){const I=d[R],z=I.name.match(w);if(z&&z.length>1){const H=z[1];let Y=C[H];Y||(C[H]=Y=[]),Y.push(I)}}const T=[];for(const R in C)T.push(this.CreateFromMorphTargetSequence(R,C[R],v,A));return T}static parseAnimation(d,v){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!d)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const A=function(H,Y,ee,ie,oe){if(ee.length!==0){const se=[],re=[];flattenJSON(ee,se,re,ie),se.length!==0&&oe.push(new H(Y,se,re))}},C=[],w=d.name||"default",T=d.fps||30,R=d.blendMode;let G=d.length||-1;const I=d.hierarchy||[];for(let H=0;H<I.length;H++){const Y=I[H].keys;if(!(!Y||Y.length===0))if(Y[0].morphTargets){const ee={};let ie;for(ie=0;ie<Y.length;ie++)if(Y[ie].morphTargets)for(let oe=0;oe<Y[ie].morphTargets.length;oe++)ee[Y[ie].morphTargets[oe]]=-1;for(const oe in ee){const se=[],re=[];for(let fe=0;fe!==Y[ie].morphTargets.length;++fe){const ue=Y[ie];se.push(ue.time),re.push(ue.morphTarget===oe?1:0)}C.push(new NumberKeyframeTrack(".morphTargetInfluence["+oe+"]",se,re))}G=ee.length*T}else{const ee=".bones["+v[H].name+"]";A(VectorKeyframeTrack,ee+".position",Y,"pos",C),A(QuaternionKeyframeTrack,ee+".quaternion",Y,"rot",C),A(VectorKeyframeTrack,ee+".scale",Y,"scl",C)}}return C.length===0?null:new this(w,G,C,R)}resetDuration(){const d=this.tracks;let v=0;for(let A=0,C=d.length;A!==C;++A){const w=this.tracks[A];v=Math.max(v,w.times[w.times.length-1])}return this.duration=v,this}trim(){for(let d=0;d<this.tracks.length;d++)this.tracks[d].trim(0,this.duration);return this}validate(){let d=!0;for(let v=0;v<this.tracks.length;v++)d=d&&this.tracks[v].validate();return d}optimize(){for(let d=0;d<this.tracks.length;d++)this.tracks[d].optimize();return this}clone(){const d=[];for(let v=0;v<this.tracks.length;v++)d.push(this.tracks[v].clone());return new this.constructor(this.name,this.duration,d,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(_){switch(_.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+_)}function parseKeyframeTrack(_){if(_.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const d=getTrackTypeForValueTypeName(_.type);if(_.times===void 0){const v=[],A=[];flattenJSON(_.keys,v,A,"value"),_.times=v,_.values=A}return d.parse!==void 0?d.parse(_):new d(_.name,_.times,_.values,_.interpolation)}const Cache={enabled:!1,files:{},add:function(_,d){this.enabled!==!1&&(this.files[_]=d)},get:function(_){if(this.enabled!==!1)return this.files[_]},remove:function(_){delete this.files[_]},clear:function(){this.files={}}};class LoadingManager{constructor(d,v,A){const C=this;let w=!1,T=0,R=0,G;const I=[];this.onStart=void 0,this.onLoad=d,this.onProgress=v,this.onError=A,this.abortController=new AbortController,this.itemStart=function(z){R++,w===!1&&C.onStart!==void 0&&C.onStart(z,T,R),w=!0},this.itemEnd=function(z){T++,C.onProgress!==void 0&&C.onProgress(z,T,R),T===R&&(w=!1,C.onLoad!==void 0&&C.onLoad())},this.itemError=function(z){C.onError!==void 0&&C.onError(z)},this.resolveURL=function(z){return G?G(z):z},this.setURLModifier=function(z){return G=z,this},this.addHandler=function(z,H){return I.push(z,H),this},this.removeHandler=function(z){const H=I.indexOf(z);return H!==-1&&I.splice(H,2),this},this.getHandler=function(z){for(let H=0,Y=I.length;H<Y;H+=2){const ee=I[H],ie=I[H+1];if(ee.global&&(ee.lastIndex=0),ee.test(z))return ie}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(d){this.manager=d!==void 0?d:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(d,v){const A=this;return new Promise(function(C,w){A.load(d,C,v,w)})}parse(){}setCrossOrigin(d){return this.crossOrigin=d,this}setWithCredentials(d){return this.withCredentials=d,this}setPath(d){return this.path=d,this}setResourcePath(d){return this.resourcePath=d,this}setRequestHeader(d){return this.requestHeader=d,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(d,v){super(d),this.response=v}}class FileLoader extends Loader{constructor(d){super(d),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(d,v,A,C){d===void 0&&(d=""),this.path!==void 0&&(d=this.path+d),d=this.manager.resolveURL(d);const w=Cache.get(`file:${d}`);if(w!==void 0)return this.manager.itemStart(d),setTimeout(()=>{v&&v(w),this.manager.itemEnd(d)},0),w;if(loading[d]!==void 0){loading[d].push({onLoad:v,onProgress:A,onError:C});return}loading[d]=[],loading[d].push({onLoad:v,onProgress:A,onError:C});const T=new Request(d,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),R=this.mimeType,G=this.responseType;fetch(T).then(I=>{if(I.status===200||I.status===0){if(I.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||I.body===void 0||I.body.getReader===void 0)return I;const z=loading[d],H=I.body.getReader(),Y=I.headers.get("X-File-Size")||I.headers.get("Content-Length"),ee=Y?parseInt(Y):0,ie=ee!==0;let oe=0;const se=new ReadableStream({start(re){fe();function fe(){H.read().then(({done:ue,value:ge})=>{if(ue)re.close();else{oe+=ge.byteLength;const ye=new ProgressEvent("progress",{lengthComputable:ie,loaded:oe,total:ee});for(let be=0,ve=z.length;be<ve;be++){const Me=z[be];Me.onProgress&&Me.onProgress(ye)}re.enqueue(ge),fe()}},ue=>{re.error(ue)})}}});return new Response(se)}else throw new HttpError(`fetch for "${I.url}" responded with ${I.status}: ${I.statusText}`,I)}).then(I=>{switch(G){case"arraybuffer":return I.arrayBuffer();case"blob":return I.blob();case"document":return I.text().then(z=>new DOMParser().parseFromString(z,R));case"json":return I.json();default:if(R==="")return I.text();{const H=/charset="?([^;"\s]*)"?/i.exec(R),Y=H&&H[1]?H[1].toLowerCase():void 0,ee=new TextDecoder(Y);return I.arrayBuffer().then(ie=>ee.decode(ie))}}}).then(I=>{Cache.add(`file:${d}`,I);const z=loading[d];delete loading[d];for(let H=0,Y=z.length;H<Y;H++){const ee=z[H];ee.onLoad&&ee.onLoad(I)}}).catch(I=>{const z=loading[d];if(z===void 0)throw this.manager.itemError(d),I;delete loading[d];for(let H=0,Y=z.length;H<Y;H++){const ee=z[H];ee.onError&&ee.onError(I)}this.manager.itemError(d)}).finally(()=>{this.manager.itemEnd(d)}),this.manager.itemStart(d)}setResponseType(d){return this.responseType=d,this}setMimeType(d){return this.mimeType=d,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AnimationLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=this,T=new FileLoader(this.manager);T.setPath(this.path),T.setRequestHeader(this.requestHeader),T.setWithCredentials(this.withCredentials),T.load(d,function(R){try{v(w.parse(JSON.parse(R)))}catch(G){C?C(G):console.error(G),w.manager.itemError(d)}},A,C)}parse(d){const v=[];for(let A=0;A<d.length;A++){const C=AnimationClip.parse(d[A]);v.push(C)}return v}}class CompressedTextureLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=this,T=[],R=new CompressedTexture,G=new FileLoader(this.manager);G.setPath(this.path),G.setResponseType("arraybuffer"),G.setRequestHeader(this.requestHeader),G.setWithCredentials(w.withCredentials);let I=0;function z(H){G.load(d[H],function(Y){const ee=w.parse(Y,!0);T[H]={width:ee.width,height:ee.height,format:ee.format,mipmaps:ee.mipmaps},I+=1,I===6&&(ee.mipmapCount===1&&(R.minFilter=LinearFilter),R.image=T,R.format=ee.format,R.needsUpdate=!0,v&&v(R))},A,C)}if(Array.isArray(d))for(let H=0,Y=d.length;H<Y;++H)z(H);else G.load(d,function(H){const Y=w.parse(H,!0);if(Y.isCubemap){const ee=Y.mipmaps.length/Y.mipmapCount;for(let ie=0;ie<ee;ie++){T[ie]={mipmaps:[]};for(let oe=0;oe<Y.mipmapCount;oe++)T[ie].mipmaps.push(Y.mipmaps[ie*Y.mipmapCount+oe]),T[ie].format=Y.format,T[ie].width=Y.width,T[ie].height=Y.height}R.image=T}else R.image.width=Y.width,R.image.height=Y.height,R.mipmaps=Y.mipmaps;Y.mipmapCount===1&&(R.minFilter=LinearFilter),R.format=Y.format,R.needsUpdate=!0,v&&v(R)},A,C);return R}}const _loading=new WeakMap;class ImageLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){this.path!==void 0&&(d=this.path+d),d=this.manager.resolveURL(d);const w=this,T=Cache.get(`image:${d}`);if(T!==void 0){if(T.complete===!0)w.manager.itemStart(d),setTimeout(function(){v&&v(T),w.manager.itemEnd(d)},0);else{let H=_loading.get(T);H===void 0&&(H=[],_loading.set(T,H)),H.push({onLoad:v,onError:C})}return T}const R=createElementNS("img");function G(){z(),v&&v(this);const H=_loading.get(this)||[];for(let Y=0;Y<H.length;Y++){const ee=H[Y];ee.onLoad&&ee.onLoad(this)}_loading.delete(this),w.manager.itemEnd(d)}function I(H){z(),C&&C(H),Cache.remove(`image:${d}`);const Y=_loading.get(this)||[];for(let ee=0;ee<Y.length;ee++){const ie=Y[ee];ie.onError&&ie.onError(H)}_loading.delete(this),w.manager.itemError(d),w.manager.itemEnd(d)}function z(){R.removeEventListener("load",G,!1),R.removeEventListener("error",I,!1)}return R.addEventListener("load",G,!1),R.addEventListener("error",I,!1),d.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(R.crossOrigin=this.crossOrigin),Cache.add(`image:${d}`,R),w.manager.itemStart(d),R.src=d,R}}class CubeTextureLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=new CubeTexture;w.colorSpace=SRGBColorSpace$1;const T=new ImageLoader(this.manager);T.setCrossOrigin(this.crossOrigin),T.setPath(this.path);let R=0;function G(I){T.load(d[I],function(z){w.images[I]=z,R++,R===6&&(w.needsUpdate=!0,v&&v(w))},void 0,C)}for(let I=0;I<d.length;++I)G(I);return w}}class DataTextureLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=this,T=new DataTexture,R=new FileLoader(this.manager);return R.setResponseType("arraybuffer"),R.setRequestHeader(this.requestHeader),R.setPath(this.path),R.setWithCredentials(w.withCredentials),R.load(d,function(G){let I;try{I=w.parse(G)}catch(z){if(C!==void 0)C(z);else{console.error(z);return}}I.image!==void 0?T.image=I.image:I.data!==void 0&&(T.image.width=I.width,T.image.height=I.height,T.image.data=I.data),T.wrapS=I.wrapS!==void 0?I.wrapS:ClampToEdgeWrapping,T.wrapT=I.wrapT!==void 0?I.wrapT:ClampToEdgeWrapping,T.magFilter=I.magFilter!==void 0?I.magFilter:LinearFilter,T.minFilter=I.minFilter!==void 0?I.minFilter:LinearFilter,T.anisotropy=I.anisotropy!==void 0?I.anisotropy:1,I.colorSpace!==void 0&&(T.colorSpace=I.colorSpace),I.flipY!==void 0&&(T.flipY=I.flipY),I.format!==void 0&&(T.format=I.format),I.type!==void 0&&(T.type=I.type),I.mipmaps!==void 0&&(T.mipmaps=I.mipmaps,T.minFilter=LinearMipmapLinearFilter),I.mipmapCount===1&&(T.minFilter=LinearFilter),I.generateMipmaps!==void 0&&(T.generateMipmaps=I.generateMipmaps),T.needsUpdate=!0,v&&v(T,I)},A,C),T}}class TextureLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=new Texture,T=new ImageLoader(this.manager);return T.setCrossOrigin(this.crossOrigin),T.setPath(this.path),T.load(d,function(R){w.image=R,w.needsUpdate=!0,v!==void 0&&v(w)},A,C),w}}class Light extends Object3D{constructor(d,v=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(d),this.intensity=v}dispose(){}copy(d,v){return super.copy(d,v),this.color.copy(d.color),this.intensity=d.intensity,this}toJSON(d){const v=super.toJSON(d);return v.object.color=this.color.getHex(),v.object.intensity=this.intensity,this.groundColor!==void 0&&(v.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(v.object.distance=this.distance),this.angle!==void 0&&(v.object.angle=this.angle),this.decay!==void 0&&(v.object.decay=this.decay),this.penumbra!==void 0&&(v.object.penumbra=this.penumbra),this.shadow!==void 0&&(v.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(v.object.target=this.target.uuid),v}}class HemisphereLight extends Light{constructor(d,v,A){super(d,A),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(v)}copy(d,v){return super.copy(d,v),this.groundColor.copy(d.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(d){this.camera=d,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.mapType=UnsignedByteType,this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(d){const v=this.camera,A=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(d.matrixWorld),v.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(d.target.matrixWorld),v.lookAt(_lookTarget$1),v.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(v.projectionMatrix,v.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1,v.coordinateSystem,v.reversedDepth),v.reversedDepth?A.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(_projScreenMatrix$1)}getViewport(d){return this._viewports[d]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(d){return this.camera=d.camera.clone(),this.intensity=d.intensity,this.bias=d.bias,this.radius=d.radius,this.autoUpdate=d.autoUpdate,this.needsUpdate=d.needsUpdate,this.normalBias=d.normalBias,this.blurSamples=d.blurSamples,this.mapSize.copy(d.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const d={};return this.intensity!==1&&(d.intensity=this.intensity),this.bias!==0&&(d.bias=this.bias),this.normalBias!==0&&(d.normalBias=this.normalBias),this.radius!==1&&(d.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(d.mapSize=this.mapSize.toArray()),d.camera=this.camera.toJSON(!1).object,delete d.camera.matrix,d}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(d){const v=this.camera,A=RAD2DEG*2*d.angle*this.focus,C=this.mapSize.width/this.mapSize.height*this.aspect,w=d.distance||v.far;(A!==v.fov||C!==v.aspect||w!==v.far)&&(v.fov=A,v.aspect=C,v.far=w,v.updateProjectionMatrix()),super.updateMatrices(d)}copy(d){return super.copy(d),this.focus=d.focus,this}}class SpotLight extends Light{constructor(d,v,A=0,C=Math.PI/3,w=0,T=2){super(d,v),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=A,this.angle=C,this.penumbra=w,this.decay=T,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(d){this.intensity=d/Math.PI}dispose(){this.shadow.dispose()}copy(d,v){return super.copy(d,v),this.distance=d.distance,this.angle=d.angle,this.penumbra=d.penumbra,this.decay=d.decay,this.target=d.target.clone(),this.shadow=d.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(d,v=0){const A=this.camera,C=this.matrix,w=d.distance||A.far;w!==A.far&&(A.far=w,A.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(d.matrixWorld),A.position.copy(_lightPositionWorld),_lookTarget.copy(A.position),_lookTarget.add(this._cubeDirections[v]),A.up.copy(this._cubeUps[v]),A.lookAt(_lookTarget),A.updateMatrixWorld(),C.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix,A.coordinateSystem,A.reversedDepth)}}class PointLight extends Light{constructor(d,v,A=0,C=2){super(d,v),this.isPointLight=!0,this.type="PointLight",this.distance=A,this.decay=C,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(d){this.intensity=d/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(d,v){return super.copy(d,v),this.distance=d.distance,this.decay=d.decay,this.shadow=d.shadow.clone(),this}}class OrthographicCamera extends Camera{constructor(d=-1,v=1,A=1,C=-1,w=.1,T=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=d,this.right=v,this.top=A,this.bottom=C,this.near=w,this.far=T,this.updateProjectionMatrix()}copy(d,v){return super.copy(d,v),this.left=d.left,this.right=d.right,this.top=d.top,this.bottom=d.bottom,this.near=d.near,this.far=d.far,this.zoom=d.zoom,this.view=d.view===null?null:Object.assign({},d.view),this}setViewOffset(d,v,A,C,w,T){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=d,this.view.fullHeight=v,this.view.offsetX=A,this.view.offsetY=C,this.view.width=w,this.view.height=T,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const d=(this.right-this.left)/(2*this.zoom),v=(this.top-this.bottom)/(2*this.zoom),A=(this.right+this.left)/2,C=(this.top+this.bottom)/2;let w=A-d,T=A+d,R=C+v,G=C-v;if(this.view!==null&&this.view.enabled){const I=(this.right-this.left)/this.view.fullWidth/this.zoom,z=(this.top-this.bottom)/this.view.fullHeight/this.zoom;w+=I*this.view.offsetX,T=w+I*this.view.width,R-=z*this.view.offsetY,G=R-z*this.view.height}this.projectionMatrix.makeOrthographic(w,T,R,G,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(d){const v=super.toJSON(d);return v.object.zoom=this.zoom,v.object.left=this.left,v.object.right=this.right,v.object.top=this.top,v.object.bottom=this.bottom,v.object.near=this.near,v.object.far=this.far,this.view!==null&&(v.object.view=Object.assign({},this.view)),v}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(d,v){super(d,v),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(d){return super.copy(d),this.target=d.target.clone(),this.shadow=d.shadow.clone(),this}}class AmbientLight extends Light{constructor(d,v){super(d,v),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(d,v,A=10,C=10){super(d,v),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=A,this.height=C}get power(){return this.intensity*this.width*this.height*Math.PI}set power(d){this.intensity=d/(this.width*this.height*Math.PI)}copy(d){return super.copy(d),this.width=d.width,this.height=d.height,this}toJSON(d){const v=super.toJSON(d);return v.object.width=this.width,v.object.height=this.height,v}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let d=0;d<9;d++)this.coefficients.push(new Vector3)}set(d){for(let v=0;v<9;v++)this.coefficients[v].copy(d[v]);return this}zero(){for(let d=0;d<9;d++)this.coefficients[d].set(0,0,0);return this}getAt(d,v){const A=d.x,C=d.y,w=d.z,T=this.coefficients;return v.copy(T[0]).multiplyScalar(.282095),v.addScaledVector(T[1],.488603*C),v.addScaledVector(T[2],.488603*w),v.addScaledVector(T[3],.488603*A),v.addScaledVector(T[4],1.092548*(A*C)),v.addScaledVector(T[5],1.092548*(C*w)),v.addScaledVector(T[6],.315392*(3*w*w-1)),v.addScaledVector(T[7],1.092548*(A*w)),v.addScaledVector(T[8],.546274*(A*A-C*C)),v}getIrradianceAt(d,v){const A=d.x,C=d.y,w=d.z,T=this.coefficients;return v.copy(T[0]).multiplyScalar(.886227),v.addScaledVector(T[1],2*.511664*C),v.addScaledVector(T[2],2*.511664*w),v.addScaledVector(T[3],2*.511664*A),v.addScaledVector(T[4],2*.429043*A*C),v.addScaledVector(T[5],2*.429043*C*w),v.addScaledVector(T[6],.743125*w*w-.247708),v.addScaledVector(T[7],2*.429043*A*w),v.addScaledVector(T[8],.429043*(A*A-C*C)),v}add(d){for(let v=0;v<9;v++)this.coefficients[v].add(d.coefficients[v]);return this}addScaledSH(d,v){for(let A=0;A<9;A++)this.coefficients[A].addScaledVector(d.coefficients[A],v);return this}scale(d){for(let v=0;v<9;v++)this.coefficients[v].multiplyScalar(d);return this}lerp(d,v){for(let A=0;A<9;A++)this.coefficients[A].lerp(d.coefficients[A],v);return this}equals(d){for(let v=0;v<9;v++)if(!this.coefficients[v].equals(d.coefficients[v]))return!1;return!0}copy(d){return this.set(d.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(d,v=0){const A=this.coefficients;for(let C=0;C<9;C++)A[C].fromArray(d,v+C*3);return this}toArray(d=[],v=0){const A=this.coefficients;for(let C=0;C<9;C++)A[C].toArray(d,v+C*3);return d}static getBasisAt(d,v){const A=d.x,C=d.y,w=d.z;v[0]=.282095,v[1]=.488603*C,v[2]=.488603*w,v[3]=.488603*A,v[4]=1.092548*A*C,v[5]=1.092548*C*w,v[6]=.315392*(3*w*w-1),v[7]=1.092548*A*w,v[8]=.546274*(A*A-C*C)}}class LightProbe extends Light{constructor(d=new SphericalHarmonics3,v=1){super(void 0,v),this.isLightProbe=!0,this.sh=d}copy(d){return super.copy(d),this.sh.copy(d.sh),this}fromJSON(d){return this.intensity=d.intensity,this.sh.fromArray(d.sh),this}toJSON(d){const v=super.toJSON(d);return v.object.sh=this.sh.toArray(),v}}class MaterialLoader extends Loader{constructor(d){super(d),this.textures={}}load(d,v,A,C){const w=this,T=new FileLoader(w.manager);T.setPath(w.path),T.setRequestHeader(w.requestHeader),T.setWithCredentials(w.withCredentials),T.load(d,function(R){try{v(w.parse(JSON.parse(R)))}catch(G){C?C(G):console.error(G),w.manager.itemError(d)}},A,C)}parse(d){const v=this.textures;function A(w){return v[w]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",w),v[w]}const C=this.createMaterialFromType(d.type);if(d.uuid!==void 0&&(C.uuid=d.uuid),d.name!==void 0&&(C.name=d.name),d.color!==void 0&&C.color!==void 0&&C.color.setHex(d.color),d.roughness!==void 0&&(C.roughness=d.roughness),d.metalness!==void 0&&(C.metalness=d.metalness),d.sheen!==void 0&&(C.sheen=d.sheen),d.sheenColor!==void 0&&(C.sheenColor=new Color().setHex(d.sheenColor)),d.sheenRoughness!==void 0&&(C.sheenRoughness=d.sheenRoughness),d.emissive!==void 0&&C.emissive!==void 0&&C.emissive.setHex(d.emissive),d.specular!==void 0&&C.specular!==void 0&&C.specular.setHex(d.specular),d.specularIntensity!==void 0&&(C.specularIntensity=d.specularIntensity),d.specularColor!==void 0&&C.specularColor!==void 0&&C.specularColor.setHex(d.specularColor),d.shininess!==void 0&&(C.shininess=d.shininess),d.clearcoat!==void 0&&(C.clearcoat=d.clearcoat),d.clearcoatRoughness!==void 0&&(C.clearcoatRoughness=d.clearcoatRoughness),d.dispersion!==void 0&&(C.dispersion=d.dispersion),d.iridescence!==void 0&&(C.iridescence=d.iridescence),d.iridescenceIOR!==void 0&&(C.iridescenceIOR=d.iridescenceIOR),d.iridescenceThicknessRange!==void 0&&(C.iridescenceThicknessRange=d.iridescenceThicknessRange),d.transmission!==void 0&&(C.transmission=d.transmission),d.thickness!==void 0&&(C.thickness=d.thickness),d.attenuationDistance!==void 0&&(C.attenuationDistance=d.attenuationDistance),d.attenuationColor!==void 0&&C.attenuationColor!==void 0&&C.attenuationColor.setHex(d.attenuationColor),d.anisotropy!==void 0&&(C.anisotropy=d.anisotropy),d.anisotropyRotation!==void 0&&(C.anisotropyRotation=d.anisotropyRotation),d.fog!==void 0&&(C.fog=d.fog),d.flatShading!==void 0&&(C.flatShading=d.flatShading),d.blending!==void 0&&(C.blending=d.blending),d.combine!==void 0&&(C.combine=d.combine),d.side!==void 0&&(C.side=d.side),d.shadowSide!==void 0&&(C.shadowSide=d.shadowSide),d.opacity!==void 0&&(C.opacity=d.opacity),d.transparent!==void 0&&(C.transparent=d.transparent),d.alphaTest!==void 0&&(C.alphaTest=d.alphaTest),d.alphaHash!==void 0&&(C.alphaHash=d.alphaHash),d.depthFunc!==void 0&&(C.depthFunc=d.depthFunc),d.depthTest!==void 0&&(C.depthTest=d.depthTest),d.depthWrite!==void 0&&(C.depthWrite=d.depthWrite),d.colorWrite!==void 0&&(C.colorWrite=d.colorWrite),d.blendSrc!==void 0&&(C.blendSrc=d.blendSrc),d.blendDst!==void 0&&(C.blendDst=d.blendDst),d.blendEquation!==void 0&&(C.blendEquation=d.blendEquation),d.blendSrcAlpha!==void 0&&(C.blendSrcAlpha=d.blendSrcAlpha),d.blendDstAlpha!==void 0&&(C.blendDstAlpha=d.blendDstAlpha),d.blendEquationAlpha!==void 0&&(C.blendEquationAlpha=d.blendEquationAlpha),d.blendColor!==void 0&&C.blendColor!==void 0&&C.blendColor.setHex(d.blendColor),d.blendAlpha!==void 0&&(C.blendAlpha=d.blendAlpha),d.stencilWriteMask!==void 0&&(C.stencilWriteMask=d.stencilWriteMask),d.stencilFunc!==void 0&&(C.stencilFunc=d.stencilFunc),d.stencilRef!==void 0&&(C.stencilRef=d.stencilRef),d.stencilFuncMask!==void 0&&(C.stencilFuncMask=d.stencilFuncMask),d.stencilFail!==void 0&&(C.stencilFail=d.stencilFail),d.stencilZFail!==void 0&&(C.stencilZFail=d.stencilZFail),d.stencilZPass!==void 0&&(C.stencilZPass=d.stencilZPass),d.stencilWrite!==void 0&&(C.stencilWrite=d.stencilWrite),d.wireframe!==void 0&&(C.wireframe=d.wireframe),d.wireframeLinewidth!==void 0&&(C.wireframeLinewidth=d.wireframeLinewidth),d.wireframeLinecap!==void 0&&(C.wireframeLinecap=d.wireframeLinecap),d.wireframeLinejoin!==void 0&&(C.wireframeLinejoin=d.wireframeLinejoin),d.rotation!==void 0&&(C.rotation=d.rotation),d.linewidth!==void 0&&(C.linewidth=d.linewidth),d.dashSize!==void 0&&(C.dashSize=d.dashSize),d.gapSize!==void 0&&(C.gapSize=d.gapSize),d.scale!==void 0&&(C.scale=d.scale),d.polygonOffset!==void 0&&(C.polygonOffset=d.polygonOffset),d.polygonOffsetFactor!==void 0&&(C.polygonOffsetFactor=d.polygonOffsetFactor),d.polygonOffsetUnits!==void 0&&(C.polygonOffsetUnits=d.polygonOffsetUnits),d.dithering!==void 0&&(C.dithering=d.dithering),d.alphaToCoverage!==void 0&&(C.alphaToCoverage=d.alphaToCoverage),d.premultipliedAlpha!==void 0&&(C.premultipliedAlpha=d.premultipliedAlpha),d.forceSinglePass!==void 0&&(C.forceSinglePass=d.forceSinglePass),d.visible!==void 0&&(C.visible=d.visible),d.toneMapped!==void 0&&(C.toneMapped=d.toneMapped),d.userData!==void 0&&(C.userData=d.userData),d.vertexColors!==void 0&&(typeof d.vertexColors=="number"?C.vertexColors=d.vertexColors>0:C.vertexColors=d.vertexColors),d.uniforms!==void 0)for(const w in d.uniforms){const T=d.uniforms[w];switch(C.uniforms[w]={},T.type){case"t":C.uniforms[w].value=A(T.value);break;case"c":C.uniforms[w].value=new Color().setHex(T.value);break;case"v2":C.uniforms[w].value=new Vector2().fromArray(T.value);break;case"v3":C.uniforms[w].value=new Vector3().fromArray(T.value);break;case"v4":C.uniforms[w].value=new Vector4().fromArray(T.value);break;case"m3":C.uniforms[w].value=new Matrix3().fromArray(T.value);break;case"m4":C.uniforms[w].value=new Matrix4().fromArray(T.value);break;default:C.uniforms[w].value=T.value}}if(d.defines!==void 0&&(C.defines=d.defines),d.vertexShader!==void 0&&(C.vertexShader=d.vertexShader),d.fragmentShader!==void 0&&(C.fragmentShader=d.fragmentShader),d.glslVersion!==void 0&&(C.glslVersion=d.glslVersion),d.extensions!==void 0)for(const w in d.extensions)C.extensions[w]=d.extensions[w];if(d.lights!==void 0&&(C.lights=d.lights),d.clipping!==void 0&&(C.clipping=d.clipping),d.size!==void 0&&(C.size=d.size),d.sizeAttenuation!==void 0&&(C.sizeAttenuation=d.sizeAttenuation),d.map!==void 0&&(C.map=A(d.map)),d.matcap!==void 0&&(C.matcap=A(d.matcap)),d.alphaMap!==void 0&&(C.alphaMap=A(d.alphaMap)),d.bumpMap!==void 0&&(C.bumpMap=A(d.bumpMap)),d.bumpScale!==void 0&&(C.bumpScale=d.bumpScale),d.normalMap!==void 0&&(C.normalMap=A(d.normalMap)),d.normalMapType!==void 0&&(C.normalMapType=d.normalMapType),d.normalScale!==void 0){let w=d.normalScale;Array.isArray(w)===!1&&(w=[w,w]),C.normalScale=new Vector2().fromArray(w)}return d.displacementMap!==void 0&&(C.displacementMap=A(d.displacementMap)),d.displacementScale!==void 0&&(C.displacementScale=d.displacementScale),d.displacementBias!==void 0&&(C.displacementBias=d.displacementBias),d.roughnessMap!==void 0&&(C.roughnessMap=A(d.roughnessMap)),d.metalnessMap!==void 0&&(C.metalnessMap=A(d.metalnessMap)),d.emissiveMap!==void 0&&(C.emissiveMap=A(d.emissiveMap)),d.emissiveIntensity!==void 0&&(C.emissiveIntensity=d.emissiveIntensity),d.specularMap!==void 0&&(C.specularMap=A(d.specularMap)),d.specularIntensityMap!==void 0&&(C.specularIntensityMap=A(d.specularIntensityMap)),d.specularColorMap!==void 0&&(C.specularColorMap=A(d.specularColorMap)),d.envMap!==void 0&&(C.envMap=A(d.envMap)),d.envMapRotation!==void 0&&C.envMapRotation.fromArray(d.envMapRotation),d.envMapIntensity!==void 0&&(C.envMapIntensity=d.envMapIntensity),d.reflectivity!==void 0&&(C.reflectivity=d.reflectivity),d.refractionRatio!==void 0&&(C.refractionRatio=d.refractionRatio),d.lightMap!==void 0&&(C.lightMap=A(d.lightMap)),d.lightMapIntensity!==void 0&&(C.lightMapIntensity=d.lightMapIntensity),d.aoMap!==void 0&&(C.aoMap=A(d.aoMap)),d.aoMapIntensity!==void 0&&(C.aoMapIntensity=d.aoMapIntensity),d.gradientMap!==void 0&&(C.gradientMap=A(d.gradientMap)),d.clearcoatMap!==void 0&&(C.clearcoatMap=A(d.clearcoatMap)),d.clearcoatRoughnessMap!==void 0&&(C.clearcoatRoughnessMap=A(d.clearcoatRoughnessMap)),d.clearcoatNormalMap!==void 0&&(C.clearcoatNormalMap=A(d.clearcoatNormalMap)),d.clearcoatNormalScale!==void 0&&(C.clearcoatNormalScale=new Vector2().fromArray(d.clearcoatNormalScale)),d.iridescenceMap!==void 0&&(C.iridescenceMap=A(d.iridescenceMap)),d.iridescenceThicknessMap!==void 0&&(C.iridescenceThicknessMap=A(d.iridescenceThicknessMap)),d.transmissionMap!==void 0&&(C.transmissionMap=A(d.transmissionMap)),d.thicknessMap!==void 0&&(C.thicknessMap=A(d.thicknessMap)),d.anisotropyMap!==void 0&&(C.anisotropyMap=A(d.anisotropyMap)),d.sheenColorMap!==void 0&&(C.sheenColorMap=A(d.sheenColorMap)),d.sheenRoughnessMap!==void 0&&(C.sheenRoughnessMap=A(d.sheenRoughnessMap)),C}setTextures(d){return this.textures=d,this}createMaterialFromType(d){return MaterialLoader.createMaterialFromType(d)}static createMaterialFromType(d){const v={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new v[d]}}class LoaderUtils{static extractUrlBase(d){const v=d.lastIndexOf("/");return v===-1?"./":d.slice(0,v+1)}static resolveURL(d,v){return typeof d!="string"||d===""?"":(/^https?:\/\//i.test(v)&&/^\//.test(d)&&(v=v.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(d)||/^data:.*,.*$/i.test(d)||/^blob:.*$/i.test(d)?d:v+d)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(d){return super.copy(d),this.instanceCount=d.instanceCount,this}toJSON(){const d=super.toJSON();return d.instanceCount=this.instanceCount,d.isInstancedBufferGeometry=!0,d}}class BufferGeometryLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=this,T=new FileLoader(w.manager);T.setPath(w.path),T.setRequestHeader(w.requestHeader),T.setWithCredentials(w.withCredentials),T.load(d,function(R){try{v(w.parse(JSON.parse(R)))}catch(G){C?C(G):console.error(G),w.manager.itemError(d)}},A,C)}parse(d){const v={},A={};function C(ee,ie){if(v[ie]!==void 0)return v[ie];const se=ee.interleavedBuffers[ie],re=w(ee,se.buffer),fe=getTypedArray(se.type,re),ue=new InterleavedBuffer(fe,se.stride);return ue.uuid=se.uuid,v[ie]=ue,ue}function w(ee,ie){if(A[ie]!==void 0)return A[ie];const se=ee.arrayBuffers[ie],re=new Uint32Array(se).buffer;return A[ie]=re,re}const T=d.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,R=d.data.index;if(R!==void 0){const ee=getTypedArray(R.type,R.array);T.setIndex(new BufferAttribute(ee,1))}const G=d.data.attributes;for(const ee in G){const ie=G[ee];let oe;if(ie.isInterleavedBufferAttribute){const se=C(d.data,ie.data);oe=new InterleavedBufferAttribute(se,ie.itemSize,ie.offset,ie.normalized)}else{const se=getTypedArray(ie.type,ie.array),re=ie.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;oe=new re(se,ie.itemSize,ie.normalized)}ie.name!==void 0&&(oe.name=ie.name),ie.usage!==void 0&&oe.setUsage(ie.usage),T.setAttribute(ee,oe)}const I=d.data.morphAttributes;if(I)for(const ee in I){const ie=I[ee],oe=[];for(let se=0,re=ie.length;se<re;se++){const fe=ie[se];let ue;if(fe.isInterleavedBufferAttribute){const ge=C(d.data,fe.data);ue=new InterleavedBufferAttribute(ge,fe.itemSize,fe.offset,fe.normalized)}else{const ge=getTypedArray(fe.type,fe.array);ue=new BufferAttribute(ge,fe.itemSize,fe.normalized)}fe.name!==void 0&&(ue.name=fe.name),oe.push(ue)}T.morphAttributes[ee]=oe}d.data.morphTargetsRelative&&(T.morphTargetsRelative=!0);const H=d.data.groups||d.data.drawcalls||d.data.offsets;if(H!==void 0)for(let ee=0,ie=H.length;ee!==ie;++ee){const oe=H[ee];T.addGroup(oe.start,oe.count,oe.materialIndex)}const Y=d.data.boundingSphere;return Y!==void 0&&(T.boundingSphere=new Sphere().fromJSON(Y)),d.name&&(T.name=d.name),d.userData&&(T.userData=d.userData),T}}class ObjectLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=this,T=this.path===""?LoaderUtils.extractUrlBase(d):this.path;this.resourcePath=this.resourcePath||T;const R=new FileLoader(this.manager);R.setPath(this.path),R.setRequestHeader(this.requestHeader),R.setWithCredentials(this.withCredentials),R.load(d,function(G){let I=null;try{I=JSON.parse(G)}catch(H){C!==void 0&&C(H),console.error("THREE:ObjectLoader: Can't parse "+d+".",H.message);return}const z=I.metadata;if(z===void 0||z.type===void 0||z.type.toLowerCase()==="geometry"){C!==void 0&&C(new Error("THREE.ObjectLoader: Can't load "+d)),console.error("THREE.ObjectLoader: Can't load "+d);return}w.parse(I,v)},A,C)}async loadAsync(d,v){const A=this,C=this.path===""?LoaderUtils.extractUrlBase(d):this.path;this.resourcePath=this.resourcePath||C;const w=new FileLoader(this.manager);w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials);const T=await w.loadAsync(d,v),R=JSON.parse(T),G=R.metadata;if(G===void 0||G.type===void 0||G.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+d);return await A.parseAsync(R)}parse(d,v){const A=this.parseAnimations(d.animations),C=this.parseShapes(d.shapes),w=this.parseGeometries(d.geometries,C),T=this.parseImages(d.images,function(){v!==void 0&&v(I)}),R=this.parseTextures(d.textures,T),G=this.parseMaterials(d.materials,R),I=this.parseObject(d.object,w,G,R,A),z=this.parseSkeletons(d.skeletons,I);if(this.bindSkeletons(I,z),this.bindLightTargets(I),v!==void 0){let H=!1;for(const Y in T)if(T[Y].data instanceof HTMLImageElement){H=!0;break}H===!1&&v(I)}return I}async parseAsync(d){const v=this.parseAnimations(d.animations),A=this.parseShapes(d.shapes),C=this.parseGeometries(d.geometries,A),w=await this.parseImagesAsync(d.images),T=this.parseTextures(d.textures,w),R=this.parseMaterials(d.materials,T),G=this.parseObject(d.object,C,R,T,v),I=this.parseSkeletons(d.skeletons,G);return this.bindSkeletons(G,I),this.bindLightTargets(G),G}parseShapes(d){const v={};if(d!==void 0)for(let A=0,C=d.length;A<C;A++){const w=new Shape().fromJSON(d[A]);v[w.uuid]=w}return v}parseSkeletons(d,v){const A={},C={};if(v.traverse(function(w){w.isBone&&(C[w.uuid]=w)}),d!==void 0)for(let w=0,T=d.length;w<T;w++){const R=new Skeleton().fromJSON(d[w],C);A[R.uuid]=R}return A}parseGeometries(d,v){const A={};if(d!==void 0){const C=new BufferGeometryLoader;for(let w=0,T=d.length;w<T;w++){let R;const G=d[w];switch(G.type){case"BufferGeometry":case"InstancedBufferGeometry":R=C.parse(G);break;default:G.type in Geometries?R=Geometries[G.type].fromJSON(G,v):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${G.type}"`)}R.uuid=G.uuid,G.name!==void 0&&(R.name=G.name),G.userData!==void 0&&(R.userData=G.userData),A[G.uuid]=R}}return A}parseMaterials(d,v){const A={},C={};if(d!==void 0){const w=new MaterialLoader;w.setTextures(v);for(let T=0,R=d.length;T<R;T++){const G=d[T];A[G.uuid]===void 0&&(A[G.uuid]=w.parse(G)),C[G.uuid]=A[G.uuid]}}return C}parseAnimations(d){const v={};if(d!==void 0)for(let A=0;A<d.length;A++){const C=d[A],w=AnimationClip.parse(C);v[w.uuid]=w}return v}parseImages(d,v){const A=this,C={};let w;function T(G){return A.manager.itemStart(G),w.load(G,function(){A.manager.itemEnd(G)},void 0,function(){A.manager.itemError(G),A.manager.itemEnd(G)})}function R(G){if(typeof G=="string"){const I=G,z=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:A.resourcePath+I;return T(z)}else return G.data?{data:getTypedArray(G.type,G.data),width:G.width,height:G.height}:null}if(d!==void 0&&d.length>0){const G=new LoadingManager(v);w=new ImageLoader(G),w.setCrossOrigin(this.crossOrigin);for(let I=0,z=d.length;I<z;I++){const H=d[I],Y=H.url;if(Array.isArray(Y)){const ee=[];for(let ie=0,oe=Y.length;ie<oe;ie++){const se=Y[ie],re=R(se);re!==null&&(re instanceof HTMLImageElement?ee.push(re):ee.push(new DataTexture(re.data,re.width,re.height)))}C[H.uuid]=new Source(ee)}else{const ee=R(H.url);C[H.uuid]=new Source(ee)}}}return C}async parseImagesAsync(d){const v=this,A={};let C;async function w(T){if(typeof T=="string"){const R=T,G=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(R)?R:v.resourcePath+R;return await C.loadAsync(G)}else return T.data?{data:getTypedArray(T.type,T.data),width:T.width,height:T.height}:null}if(d!==void 0&&d.length>0){C=new ImageLoader(this.manager),C.setCrossOrigin(this.crossOrigin);for(let T=0,R=d.length;T<R;T++){const G=d[T],I=G.url;if(Array.isArray(I)){const z=[];for(let H=0,Y=I.length;H<Y;H++){const ee=I[H],ie=await w(ee);ie!==null&&(ie instanceof HTMLImageElement?z.push(ie):z.push(new DataTexture(ie.data,ie.width,ie.height)))}A[G.uuid]=new Source(z)}else{const z=await w(G.url);A[G.uuid]=new Source(z)}}}return A}parseTextures(d,v){function A(w,T){return typeof w=="number"?w:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",w),T[w])}const C={};if(d!==void 0)for(let w=0,T=d.length;w<T;w++){const R=d[w];R.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',R.uuid),v[R.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",R.image);const G=v[R.image],I=G.data;let z;Array.isArray(I)?(z=new CubeTexture,I.length===6&&(z.needsUpdate=!0)):(I&&I.data?z=new DataTexture:z=new Texture,I&&(z.needsUpdate=!0)),z.source=G,z.uuid=R.uuid,R.name!==void 0&&(z.name=R.name),R.mapping!==void 0&&(z.mapping=A(R.mapping,TEXTURE_MAPPING)),R.channel!==void 0&&(z.channel=R.channel),R.offset!==void 0&&z.offset.fromArray(R.offset),R.repeat!==void 0&&z.repeat.fromArray(R.repeat),R.center!==void 0&&z.center.fromArray(R.center),R.rotation!==void 0&&(z.rotation=R.rotation),R.wrap!==void 0&&(z.wrapS=A(R.wrap[0],TEXTURE_WRAPPING),z.wrapT=A(R.wrap[1],TEXTURE_WRAPPING)),R.format!==void 0&&(z.format=R.format),R.internalFormat!==void 0&&(z.internalFormat=R.internalFormat),R.type!==void 0&&(z.type=R.type),R.colorSpace!==void 0&&(z.colorSpace=R.colorSpace),R.minFilter!==void 0&&(z.minFilter=A(R.minFilter,TEXTURE_FILTER)),R.magFilter!==void 0&&(z.magFilter=A(R.magFilter,TEXTURE_FILTER)),R.anisotropy!==void 0&&(z.anisotropy=R.anisotropy),R.flipY!==void 0&&(z.flipY=R.flipY),R.generateMipmaps!==void 0&&(z.generateMipmaps=R.generateMipmaps),R.premultiplyAlpha!==void 0&&(z.premultiplyAlpha=R.premultiplyAlpha),R.unpackAlignment!==void 0&&(z.unpackAlignment=R.unpackAlignment),R.compareFunction!==void 0&&(z.compareFunction=R.compareFunction),R.userData!==void 0&&(z.userData=R.userData),C[R.uuid]=z}return C}parseObject(d,v,A,C,w){let T;function R(Y){return v[Y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Y),v[Y]}function G(Y){if(Y!==void 0){if(Array.isArray(Y)){const ee=[];for(let ie=0,oe=Y.length;ie<oe;ie++){const se=Y[ie];A[se]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",se),ee.push(A[se])}return ee}return A[Y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Y),A[Y]}}function I(Y){return C[Y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Y),C[Y]}let z,H;switch(d.type){case"Scene":T=new Scene,d.background!==void 0&&(Number.isInteger(d.background)?T.background=new Color(d.background):T.background=I(d.background)),d.environment!==void 0&&(T.environment=I(d.environment)),d.fog!==void 0&&(d.fog.type==="Fog"?T.fog=new Fog(d.fog.color,d.fog.near,d.fog.far):d.fog.type==="FogExp2"&&(T.fog=new FogExp2(d.fog.color,d.fog.density)),d.fog.name!==""&&(T.fog.name=d.fog.name)),d.backgroundBlurriness!==void 0&&(T.backgroundBlurriness=d.backgroundBlurriness),d.backgroundIntensity!==void 0&&(T.backgroundIntensity=d.backgroundIntensity),d.backgroundRotation!==void 0&&T.backgroundRotation.fromArray(d.backgroundRotation),d.environmentIntensity!==void 0&&(T.environmentIntensity=d.environmentIntensity),d.environmentRotation!==void 0&&T.environmentRotation.fromArray(d.environmentRotation);break;case"PerspectiveCamera":T=new PerspectiveCamera(d.fov,d.aspect,d.near,d.far),d.focus!==void 0&&(T.focus=d.focus),d.zoom!==void 0&&(T.zoom=d.zoom),d.filmGauge!==void 0&&(T.filmGauge=d.filmGauge),d.filmOffset!==void 0&&(T.filmOffset=d.filmOffset),d.view!==void 0&&(T.view=Object.assign({},d.view));break;case"OrthographicCamera":T=new OrthographicCamera(d.left,d.right,d.top,d.bottom,d.near,d.far),d.zoom!==void 0&&(T.zoom=d.zoom),d.view!==void 0&&(T.view=Object.assign({},d.view));break;case"AmbientLight":T=new AmbientLight(d.color,d.intensity);break;case"DirectionalLight":T=new DirectionalLight(d.color,d.intensity),T.target=d.target||"";break;case"PointLight":T=new PointLight(d.color,d.intensity,d.distance,d.decay);break;case"RectAreaLight":T=new RectAreaLight(d.color,d.intensity,d.width,d.height);break;case"SpotLight":T=new SpotLight(d.color,d.intensity,d.distance,d.angle,d.penumbra,d.decay),T.target=d.target||"";break;case"HemisphereLight":T=new HemisphereLight(d.color,d.groundColor,d.intensity);break;case"LightProbe":T=new LightProbe().fromJSON(d);break;case"SkinnedMesh":z=R(d.geometry),H=G(d.material),T=new SkinnedMesh(z,H),d.bindMode!==void 0&&(T.bindMode=d.bindMode),d.bindMatrix!==void 0&&T.bindMatrix.fromArray(d.bindMatrix),d.skeleton!==void 0&&(T.skeleton=d.skeleton);break;case"Mesh":z=R(d.geometry),H=G(d.material),T=new Mesh(z,H);break;case"InstancedMesh":z=R(d.geometry),H=G(d.material);const Y=d.count,ee=d.instanceMatrix,ie=d.instanceColor;T=new InstancedMesh(z,H,Y),T.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ee.array),16),ie!==void 0&&(T.instanceColor=new InstancedBufferAttribute(new Float32Array(ie.array),ie.itemSize));break;case"BatchedMesh":z=R(d.geometry),H=G(d.material),T=new BatchedMesh(d.maxInstanceCount,d.maxVertexCount,d.maxIndexCount,H),T.geometry=z,T.perObjectFrustumCulled=d.perObjectFrustumCulled,T.sortObjects=d.sortObjects,T._drawRanges=d.drawRanges,T._reservedRanges=d.reservedRanges,T._geometryInfo=d.geometryInfo.map(oe=>{let se=null,re=null;return oe.boundingBox!==void 0&&(se=new Box3().fromJSON(oe.boundingBox)),oe.boundingSphere!==void 0&&(re=new Sphere().fromJSON(oe.boundingSphere)),{...oe,boundingBox:se,boundingSphere:re}}),T._instanceInfo=d.instanceInfo,T._availableInstanceIds=d._availableInstanceIds,T._availableGeometryIds=d._availableGeometryIds,T._nextIndexStart=d.nextIndexStart,T._nextVertexStart=d.nextVertexStart,T._geometryCount=d.geometryCount,T._maxInstanceCount=d.maxInstanceCount,T._maxVertexCount=d.maxVertexCount,T._maxIndexCount=d.maxIndexCount,T._geometryInitialized=d.geometryInitialized,T._matricesTexture=I(d.matricesTexture.uuid),T._indirectTexture=I(d.indirectTexture.uuid),d.colorsTexture!==void 0&&(T._colorsTexture=I(d.colorsTexture.uuid)),d.boundingSphere!==void 0&&(T.boundingSphere=new Sphere().fromJSON(d.boundingSphere)),d.boundingBox!==void 0&&(T.boundingBox=new Box3().fromJSON(d.boundingBox));break;case"LOD":T=new LOD;break;case"Line":T=new Line(R(d.geometry),G(d.material));break;case"LineLoop":T=new LineLoop(R(d.geometry),G(d.material));break;case"LineSegments":T=new LineSegments(R(d.geometry),G(d.material));break;case"PointCloud":case"Points":T=new Points(R(d.geometry),G(d.material));break;case"Sprite":T=new Sprite(G(d.material));break;case"Group":T=new Group;break;case"Bone":T=new Bone;break;default:T=new Object3D}if(T.uuid=d.uuid,d.name!==void 0&&(T.name=d.name),d.matrix!==void 0?(T.matrix.fromArray(d.matrix),d.matrixAutoUpdate!==void 0&&(T.matrixAutoUpdate=d.matrixAutoUpdate),T.matrixAutoUpdate&&T.matrix.decompose(T.position,T.quaternion,T.scale)):(d.position!==void 0&&T.position.fromArray(d.position),d.rotation!==void 0&&T.rotation.fromArray(d.rotation),d.quaternion!==void 0&&T.quaternion.fromArray(d.quaternion),d.scale!==void 0&&T.scale.fromArray(d.scale)),d.up!==void 0&&T.up.fromArray(d.up),d.castShadow!==void 0&&(T.castShadow=d.castShadow),d.receiveShadow!==void 0&&(T.receiveShadow=d.receiveShadow),d.shadow&&(d.shadow.intensity!==void 0&&(T.shadow.intensity=d.shadow.intensity),d.shadow.bias!==void 0&&(T.shadow.bias=d.shadow.bias),d.shadow.normalBias!==void 0&&(T.shadow.normalBias=d.shadow.normalBias),d.shadow.radius!==void 0&&(T.shadow.radius=d.shadow.radius),d.shadow.mapSize!==void 0&&T.shadow.mapSize.fromArray(d.shadow.mapSize),d.shadow.camera!==void 0&&(T.shadow.camera=this.parseObject(d.shadow.camera))),d.visible!==void 0&&(T.visible=d.visible),d.frustumCulled!==void 0&&(T.frustumCulled=d.frustumCulled),d.renderOrder!==void 0&&(T.renderOrder=d.renderOrder),d.userData!==void 0&&(T.userData=d.userData),d.layers!==void 0&&(T.layers.mask=d.layers),d.children!==void 0){const Y=d.children;for(let ee=0;ee<Y.length;ee++)T.add(this.parseObject(Y[ee],v,A,C,w))}if(d.animations!==void 0){const Y=d.animations;for(let ee=0;ee<Y.length;ee++){const ie=Y[ee];T.animations.push(w[ie])}}if(d.type==="LOD"){d.autoUpdate!==void 0&&(T.autoUpdate=d.autoUpdate);const Y=d.levels;for(let ee=0;ee<Y.length;ee++){const ie=Y[ee],oe=T.getObjectByProperty("uuid",ie.object);oe!==void 0&&T.addLevel(oe,ie.distance,ie.hysteresis)}}return T}bindSkeletons(d,v){Object.keys(v).length!==0&&d.traverse(function(A){if(A.isSkinnedMesh===!0&&A.skeleton!==void 0){const C=v[A.skeleton];C===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",A.skeleton):A.bind(C,A.bindMatrix)}})}bindLightTargets(d){d.traverse(function(v){if(v.isDirectionalLight||v.isSpotLight){const A=v.target,C=d.getObjectByProperty("uuid",A);C!==void 0?v.target=C:v.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter},_errorMap=new WeakMap;class ImageBitmapLoader extends Loader{constructor(d){super(d),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(d){return this.options=d,this}load(d,v,A,C){d===void 0&&(d=""),this.path!==void 0&&(d=this.path+d),d=this.manager.resolveURL(d);const w=this,T=Cache.get(`image-bitmap:${d}`);if(T!==void 0){if(w.manager.itemStart(d),T.then){T.then(I=>{if(_errorMap.has(T)===!0)C&&C(_errorMap.get(T)),w.manager.itemError(d),w.manager.itemEnd(d);else return v&&v(I),w.manager.itemEnd(d),I});return}return setTimeout(function(){v&&v(T),w.manager.itemEnd(d)},0),T}const R={};R.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",R.headers=this.requestHeader,R.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const G=fetch(d,R).then(function(I){return I.blob()}).then(function(I){return createImageBitmap(I,Object.assign(w.options,{colorSpaceConversion:"none"}))}).then(function(I){return Cache.add(`image-bitmap:${d}`,I),v&&v(I),w.manager.itemEnd(d),I}).catch(function(I){C&&C(I),_errorMap.set(G,I),Cache.remove(`image-bitmap:${d}`),w.manager.itemError(d),w.manager.itemEnd(d)});Cache.add(`image-bitmap:${d}`,G),w.manager.itemStart(d)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(d){_context=d}}class AudioLoader extends Loader{constructor(d){super(d)}load(d,v,A,C){const w=this,T=new FileLoader(this.manager);T.setResponseType("arraybuffer"),T.setPath(this.path),T.setRequestHeader(this.requestHeader),T.setWithCredentials(this.withCredentials),T.load(d,function(G){try{const I=G.slice(0);AudioContext.getContext().decodeAudioData(I,function(H){v(H)}).catch(R)}catch(I){R(I)}},A,C);function R(G){C?C(G):console.error(G),w.manager.itemError(d)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(d){const v=this._cache;if(v.focus!==d.focus||v.fov!==d.fov||v.aspect!==d.aspect*this.aspect||v.near!==d.near||v.far!==d.far||v.zoom!==d.zoom||v.eyeSep!==this.eyeSep){v.focus=d.focus,v.fov=d.fov,v.aspect=d.aspect*this.aspect,v.near=d.near,v.far=d.far,v.zoom=d.zoom,v.eyeSep=this.eyeSep,_projectionMatrix.copy(d.projectionMatrix);const C=v.eyeSep/2,w=C*v.near/v.focus,T=v.near*Math.tan(DEG2RAD*v.fov*.5)/v.zoom;let R,G;_eyeLeft.elements[12]=-C,_eyeRight.elements[12]=C,R=-T*v.aspect+w,G=T*v.aspect+w,_projectionMatrix.elements[0]=2*v.near/(G-R),_projectionMatrix.elements[8]=(G+R)/(G-R),this.cameraL.projectionMatrix.copy(_projectionMatrix),R=-T*v.aspect-w,G=T*v.aspect-w,_projectionMatrix.elements[0]=2*v.near/(G-R),_projectionMatrix.elements[8]=(G+R)/(G-R),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(d.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(d.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(d=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=d}}class Clock{constructor(d=!0){this.autoStart=d,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let d=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const v=performance.now();d=(v-this.oldTime)/1e3,this.oldTime=v,this.elapsedTime+=d}return d}}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_forward=new Vector3,_up=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(d){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=d,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(d){return this.gain.gain.setTargetAtTime(d,this.context.currentTime,.01),this}updateMatrixWorld(d){super.updateMatrixWorld(d);const v=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_forward.set(0,0,-1).applyQuaternion(_quaternion$1),_up.set(0,1,0).applyQuaternion(_quaternion$1),v.positionX){const A=this.context.currentTime+this.timeDelta;v.positionX.linearRampToValueAtTime(_position$1.x,A),v.positionY.linearRampToValueAtTime(_position$1.y,A),v.positionZ.linearRampToValueAtTime(_position$1.z,A),v.forwardX.linearRampToValueAtTime(_forward.x,A),v.forwardY.linearRampToValueAtTime(_forward.y,A),v.forwardZ.linearRampToValueAtTime(_forward.z,A),v.upX.linearRampToValueAtTime(_up.x,A),v.upY.linearRampToValueAtTime(_up.y,A),v.upZ.linearRampToValueAtTime(_up.z,A)}else v.setPosition(_position$1.x,_position$1.y,_position$1.z),v.setOrientation(_forward.x,_forward.y,_forward.z,_up.x,_up.y,_up.z)}}class Audio extends Object3D{constructor(d){super(),this.type="Audio",this.listener=d,this.context=d.context,this.gain=this.context.createGain(),this.gain.connect(d.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(d){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=d,this.connect(),this}setMediaElementSource(d){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(d),this.connect(),this}setMediaStreamSource(d){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(d),this.connect(),this}setBuffer(d){return this.buffer=d,this.sourceType="buffer",this.autoplay&&this.play(),this}play(d=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+d;const v=this.context.createBufferSource();return v.buffer=this.buffer,v.loop=this.loop,v.loopStart=this.loopStart,v.loopEnd=this.loopEnd,v.onended=this.onEnded.bind(this),v.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=v,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(d=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+d),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let d=1,v=this.filters.length;d<v;d++)this.filters[d-1].connect(this.filters[d]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let d=1,v=this.filters.length;d<v;d++)this.filters[d-1].disconnect(this.filters[d]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(d){return d||(d=[]),this._connected===!0?(this.disconnect(),this.filters=d.slice(),this.connect()):this.filters=d.slice(),this}setDetune(d){return this.detune=d,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(d){return this.setFilters(d?[d]:[])}setPlaybackRate(d){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=d,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(d){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=d,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(d){return this.loopStart=d,this}setLoopEnd(d){return this.loopEnd=d,this}getVolume(){return this.gain.gain.value}setVolume(d){return this.gain.gain.setTargetAtTime(d,this.context.currentTime,.01),this}copy(d,v){return super.copy(d,v),d.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=d.autoplay,this.buffer=d.buffer,this.detune=d.detune,this.loop=d.loop,this.loopStart=d.loopStart,this.loopEnd=d.loopEnd,this.offset=d.offset,this.duration=d.duration,this.playbackRate=d.playbackRate,this.hasPlaybackControl=d.hasPlaybackControl,this.sourceType=d.sourceType,this.filters=d.filters.slice(),this)}clone(d){return new this.constructor(this.listener).copy(this,d)}}const _position$4=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(d){super(d),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(d){return this.panner.refDistance=d,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(d){return this.panner.rolloffFactor=d,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(d){return this.panner.distanceModel=d,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(d){return this.panner.maxDistance=d,this}setDirectionalCone(d,v,A){return this.panner.coneInnerAngle=d,this.panner.coneOuterAngle=v,this.panner.coneOuterGain=A,this}updateMatrixWorld(d){if(super.updateMatrixWorld(d),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position$4,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const v=this.panner;if(v.positionX){const A=this.context.currentTime+this.listener.timeDelta;v.positionX.linearRampToValueAtTime(_position$4.x,A),v.positionY.linearRampToValueAtTime(_position$4.y,A),v.positionZ.linearRampToValueAtTime(_position$4.z,A),v.orientationX.linearRampToValueAtTime(_orientation.x,A),v.orientationY.linearRampToValueAtTime(_orientation.y,A),v.orientationZ.linearRampToValueAtTime(_orientation.z,A)}else v.setPosition(_position$4.x,_position$4.y,_position$4.z),v.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(d,v=2048){this.analyser=d.context.createAnalyser(),this.analyser.fftSize=v,this.data=new Uint8Array(this.analyser.frequencyBinCount),d.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let d=0;const v=this.getFrequencyData();for(let A=0;A<v.length;A++)d+=v[A];return d/v.length}}class PropertyMixer{constructor(d,v,A){this.binding=d,this.valueSize=A;let C,w,T;switch(v){case"quaternion":C=this._slerp,w=this._slerpAdditive,T=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(A*6),this._workIndex=5;break;case"string":case"bool":C=this._select,w=this._select,T=this._setAdditiveIdentityOther,this.buffer=new Array(A*5);break;default:C=this._lerp,w=this._lerpAdditive,T=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(A*5)}this._mixBufferRegion=C,this._mixBufferRegionAdditive=w,this._setIdentity=T,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(d,v){const A=this.buffer,C=this.valueSize,w=d*C+C;let T=this.cumulativeWeight;if(T===0){for(let R=0;R!==C;++R)A[w+R]=A[R];T=v}else{T+=v;const R=v/T;this._mixBufferRegion(A,w,0,R,C)}this.cumulativeWeight=T}accumulateAdditive(d){const v=this.buffer,A=this.valueSize,C=A*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(v,C,0,d,A),this.cumulativeWeightAdditive+=d}apply(d){const v=this.valueSize,A=this.buffer,C=d*v+v,w=this.cumulativeWeight,T=this.cumulativeWeightAdditive,R=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,w<1){const G=v*this._origIndex;this._mixBufferRegion(A,C,G,1-w,v)}T>0&&this._mixBufferRegionAdditive(A,C,this._addIndex*v,1,v);for(let G=v,I=v+v;G!==I;++G)if(A[G]!==A[G+v]){R.setValue(A,C);break}}saveOriginalState(){const d=this.binding,v=this.buffer,A=this.valueSize,C=A*this._origIndex;d.getValue(v,C);for(let w=A,T=C;w!==T;++w)v[w]=v[C+w%A];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const d=this.valueSize*3;this.binding.setValue(this.buffer,d)}_setAdditiveIdentityNumeric(){const d=this._addIndex*this.valueSize,v=d+this.valueSize;for(let A=d;A<v;A++)this.buffer[A]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const d=this._origIndex*this.valueSize,v=this._addIndex*this.valueSize;for(let A=0;A<this.valueSize;A++)this.buffer[v+A]=this.buffer[d+A]}_select(d,v,A,C,w){if(C>=.5)for(let T=0;T!==w;++T)d[v+T]=d[A+T]}_slerp(d,v,A,C){Quaternion.slerpFlat(d,v,d,v,d,A,C)}_slerpAdditive(d,v,A,C,w){const T=this._workIndex*w;Quaternion.multiplyQuaternionsFlat(d,T,d,v,d,A),Quaternion.slerpFlat(d,v,d,v,d,T,C)}_lerp(d,v,A,C,w){const T=1-C;for(let R=0;R!==w;++R){const G=v+R;d[G]=d[G]*T+d[A+R]*C}}_lerpAdditive(d,v,A,C,w){for(let T=0;T!==w;++T){const R=v+T;d[R]=d[R]+d[A+T]*C}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(d,v,A){const C=A||PropertyBinding.parseTrackName(v);this._targetGroup=d,this._bindings=d.subscribe_(v,C)}getValue(d,v){this.bind();const A=this._targetGroup.nCachedObjects_,C=this._bindings[A];C!==void 0&&C.getValue(d,v)}setValue(d,v){const A=this._bindings;for(let C=this._targetGroup.nCachedObjects_,w=A.length;C!==w;++C)A[C].setValue(d,v)}bind(){const d=this._bindings;for(let v=this._targetGroup.nCachedObjects_,A=d.length;v!==A;++v)d[v].bind()}unbind(){const d=this._bindings;for(let v=this._targetGroup.nCachedObjects_,A=d.length;v!==A;++v)d[v].unbind()}}class PropertyBinding{constructor(d,v,A){this.path=v,this.parsedPath=A||PropertyBinding.parseTrackName(v),this.node=PropertyBinding.findNode(d,this.parsedPath.nodeName),this.rootNode=d,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(d,v,A){return d&&d.isAnimationObjectGroup?new PropertyBinding.Composite(d,v,A):new PropertyBinding(d,v,A)}static sanitizeNodeName(d){return d.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(d){const v=_trackRe.exec(d);if(v===null)throw new Error("PropertyBinding: Cannot parse trackName: "+d);const A={nodeName:v[2],objectName:v[3],objectIndex:v[4],propertyName:v[5],propertyIndex:v[6]},C=A.nodeName&&A.nodeName.lastIndexOf(".");if(C!==void 0&&C!==-1){const w=A.nodeName.substring(C+1);_supportedObjectNames.indexOf(w)!==-1&&(A.nodeName=A.nodeName.substring(0,C),A.objectName=w)}if(A.propertyName===null||A.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+d);return A}static findNode(d,v){if(v===void 0||v===""||v==="."||v===-1||v===d.name||v===d.uuid)return d;if(d.skeleton){const A=d.skeleton.getBoneByName(v);if(A!==void 0)return A}if(d.children){const A=function(w){for(let T=0;T<w.length;T++){const R=w[T];if(R.name===v||R.uuid===v)return R;const G=A(R.children);if(G)return G}return null},C=A(d.children);if(C)return C}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(d,v){d[v]=this.targetObject[this.propertyName]}_getValue_array(d,v){const A=this.resolvedProperty;for(let C=0,w=A.length;C!==w;++C)d[v++]=A[C]}_getValue_arrayElement(d,v){d[v]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(d,v){this.resolvedProperty.toArray(d,v)}_setValue_direct(d,v){this.targetObject[this.propertyName]=d[v]}_setValue_direct_setNeedsUpdate(d,v){this.targetObject[this.propertyName]=d[v],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(d,v){this.targetObject[this.propertyName]=d[v],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(d,v){const A=this.resolvedProperty;for(let C=0,w=A.length;C!==w;++C)A[C]=d[v++]}_setValue_array_setNeedsUpdate(d,v){const A=this.resolvedProperty;for(let C=0,w=A.length;C!==w;++C)A[C]=d[v++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(d,v){const A=this.resolvedProperty;for(let C=0,w=A.length;C!==w;++C)A[C]=d[v++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(d,v){this.resolvedProperty[this.propertyIndex]=d[v]}_setValue_arrayElement_setNeedsUpdate(d,v){this.resolvedProperty[this.propertyIndex]=d[v],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(d,v){this.resolvedProperty[this.propertyIndex]=d[v],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(d,v){this.resolvedProperty.fromArray(d,v)}_setValue_fromArray_setNeedsUpdate(d,v){this.resolvedProperty.fromArray(d,v),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(d,v){this.resolvedProperty.fromArray(d,v),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(d,v){this.bind(),this.getValue(d,v)}_setValue_unbound(d,v){this.bind(),this.setValue(d,v)}bind(){let d=this.node;const v=this.parsedPath,A=v.objectName,C=v.propertyName;let w=v.propertyIndex;if(d||(d=PropertyBinding.findNode(this.rootNode,v.nodeName),this.node=d),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!d){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(A){let I=v.objectIndex;switch(A){case"materials":if(!d.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!d.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}d=d.material.materials;break;case"bones":if(!d.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}d=d.skeleton.bones;for(let z=0;z<d.length;z++)if(d[z].name===I){I=z;break}break;case"map":if("map"in d){d=d.map;break}if(!d.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!d.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}d=d.material.map;break;default:if(d[A]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}d=d[A]}if(I!==void 0){if(d[I]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,d);return}d=d[I]}}const T=d[C];if(T===void 0){const I=v.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+I+"."+C+" but it wasn't found.",d);return}let R=this.Versioning.None;this.targetObject=d,d.isMaterial===!0?R=this.Versioning.NeedsUpdate:d.isObject3D===!0&&(R=this.Versioning.MatrixWorldNeedsUpdate);let G=this.BindingType.Direct;if(w!==void 0){if(C==="morphTargetInfluences"){if(!d.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!d.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}d.morphTargetDictionary[w]!==void 0&&(w=d.morphTargetDictionary[w])}G=this.BindingType.ArrayElement,this.resolvedProperty=T,this.propertyIndex=w}else T.fromArray!==void 0&&T.toArray!==void 0?(G=this.BindingType.HasFromToArray,this.resolvedProperty=T):Array.isArray(T)?(G=this.BindingType.EntireArray,this.resolvedProperty=T):this.propertyName=C;this.getValue=this.GetterByBindingType[G],this.setValue=this.SetterByBindingTypeAndVersioning[G][R]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const d={};this._indicesByUUID=d;for(let A=0,C=arguments.length;A!==C;++A)d[arguments[A].uuid]=A;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const v=this;this.stats={objects:{get total(){return v._objects.length},get inUse(){return this.total-v.nCachedObjects_}},get bindingsPerObject(){return v._bindings.length}}}add(){const d=this._objects,v=this._indicesByUUID,A=this._paths,C=this._parsedPaths,w=this._bindings,T=w.length;let R,G=d.length,I=this.nCachedObjects_;for(let z=0,H=arguments.length;z!==H;++z){const Y=arguments[z],ee=Y.uuid;let ie=v[ee];if(ie===void 0){ie=G++,v[ee]=ie,d.push(Y);for(let oe=0,se=T;oe!==se;++oe)w[oe].push(new PropertyBinding(Y,A[oe],C[oe]))}else if(ie<I){R=d[ie];const oe=--I,se=d[oe];v[se.uuid]=ie,d[ie]=se,v[ee]=oe,d[oe]=Y;for(let re=0,fe=T;re!==fe;++re){const ue=w[re],ge=ue[oe];let ye=ue[ie];ue[ie]=ge,ye===void 0&&(ye=new PropertyBinding(Y,A[re],C[re])),ue[oe]=ye}}else d[ie]!==R&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=I}remove(){const d=this._objects,v=this._indicesByUUID,A=this._bindings,C=A.length;let w=this.nCachedObjects_;for(let T=0,R=arguments.length;T!==R;++T){const G=arguments[T],I=G.uuid,z=v[I];if(z!==void 0&&z>=w){const H=w++,Y=d[H];v[Y.uuid]=z,d[z]=Y,v[I]=H,d[H]=G;for(let ee=0,ie=C;ee!==ie;++ee){const oe=A[ee],se=oe[H],re=oe[z];oe[z]=se,oe[H]=re}}}this.nCachedObjects_=w}uncache(){const d=this._objects,v=this._indicesByUUID,A=this._bindings,C=A.length;let w=this.nCachedObjects_,T=d.length;for(let R=0,G=arguments.length;R!==G;++R){const I=arguments[R],z=I.uuid,H=v[z];if(H!==void 0)if(delete v[z],H<w){const Y=--w,ee=d[Y],ie=--T,oe=d[ie];v[ee.uuid]=H,d[H]=ee,v[oe.uuid]=Y,d[Y]=oe,d.pop();for(let se=0,re=C;se!==re;++se){const fe=A[se],ue=fe[Y],ge=fe[ie];fe[H]=ue,fe[Y]=ge,fe.pop()}}else{const Y=--T,ee=d[Y];Y>0&&(v[ee.uuid]=H),d[H]=ee,d.pop();for(let ie=0,oe=C;ie!==oe;++ie){const se=A[ie];se[H]=se[Y],se.pop()}}}this.nCachedObjects_=w}subscribe_(d,v){const A=this._bindingsIndicesByPath;let C=A[d];const w=this._bindings;if(C!==void 0)return w[C];const T=this._paths,R=this._parsedPaths,G=this._objects,I=G.length,z=this.nCachedObjects_,H=new Array(I);C=w.length,A[d]=C,T.push(d),R.push(v),w.push(H);for(let Y=z,ee=G.length;Y!==ee;++Y){const ie=G[Y];H[Y]=new PropertyBinding(ie,d,v)}return H}unsubscribe_(d){const v=this._bindingsIndicesByPath,A=v[d];if(A!==void 0){const C=this._paths,w=this._parsedPaths,T=this._bindings,R=T.length-1,G=T[R],I=d[R];v[I]=A,T[A]=G,T.pop(),w[A]=w[R],w.pop(),C[A]=C[R],C.pop()}}}class AnimationAction{constructor(d,v,A=null,C=v.blendMode){this._mixer=d,this._clip=v,this._localRoot=A,this.blendMode=C;const w=v.tracks,T=w.length,R=new Array(T),G={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let I=0;I!==T;++I){const z=w[I].createInterpolant(null);R[I]=z,z.settings=G}this._interpolantSettings=G,this._interpolants=R,this._propertyBindings=new Array(T),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(d){return this._startTime=d,this}setLoop(d,v){return this.loop=d,this.repetitions=v,this}setEffectiveWeight(d){return this.weight=d,this._effectiveWeight=this.enabled?d:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(d){return this._scheduleFading(d,0,1)}fadeOut(d){return this._scheduleFading(d,1,0)}crossFadeFrom(d,v,A=!1){if(d.fadeOut(v),this.fadeIn(v),A===!0){const C=this._clip.duration,w=d._clip.duration,T=w/C,R=C/w;d.warp(1,T,v),this.warp(R,1,v)}return this}crossFadeTo(d,v,A=!1){return d.crossFadeFrom(this,v,A)}stopFading(){const d=this._weightInterpolant;return d!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(d)),this}setEffectiveTimeScale(d){return this.timeScale=d,this._effectiveTimeScale=this.paused?0:d,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(d){return this.timeScale=this._clip.duration/d,this.stopWarping()}syncWith(d){return this.time=d.time,this.timeScale=d.timeScale,this.stopWarping()}halt(d){return this.warp(this._effectiveTimeScale,0,d)}warp(d,v,A){const C=this._mixer,w=C.time,T=this.timeScale;let R=this._timeScaleInterpolant;R===null&&(R=C._lendControlInterpolant(),this._timeScaleInterpolant=R);const G=R.parameterPositions,I=R.sampleValues;return G[0]=w,G[1]=w+A,I[0]=d/T,I[1]=v/T,this}stopWarping(){const d=this._timeScaleInterpolant;return d!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(d)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(d,v,A,C){if(!this.enabled){this._updateWeight(d);return}const w=this._startTime;if(w!==null){const G=(d-w)*A;G<0||A===0?v=0:(this._startTime=null,v=A*G)}v*=this._updateTimeScale(d);const T=this._updateTime(v),R=this._updateWeight(d);if(R>0){const G=this._interpolants,I=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let z=0,H=G.length;z!==H;++z)G[z].evaluate(T),I[z].accumulateAdditive(R);break;case NormalAnimationBlendMode:default:for(let z=0,H=G.length;z!==H;++z)G[z].evaluate(T),I[z].accumulate(C,R)}}}_updateWeight(d){let v=0;if(this.enabled){v=this.weight;const A=this._weightInterpolant;if(A!==null){const C=A.evaluate(d)[0];v*=C,d>A.parameterPositions[1]&&(this.stopFading(),C===0&&(this.enabled=!1))}}return this._effectiveWeight=v,v}_updateTimeScale(d){let v=0;if(!this.paused){v=this.timeScale;const A=this._timeScaleInterpolant;if(A!==null){const C=A.evaluate(d)[0];v*=C,d>A.parameterPositions[1]&&(this.stopWarping(),v===0?this.paused=!0:this.timeScale=v)}}return this._effectiveTimeScale=v,v}_updateTime(d){const v=this._clip.duration,A=this.loop;let C=this.time+d,w=this._loopCount;const T=A===LoopPingPong;if(d===0)return w===-1?C:T&&(w&1)===1?v-C:C;if(A===LoopOnce){w===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(C>=v)C=v;else if(C<0)C=0;else{this.time=C;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=C,this._mixer.dispatchEvent({type:"finished",action:this,direction:d<0?-1:1})}}else{if(w===-1&&(d>=0?(w=0,this._setEndings(!0,this.repetitions===0,T)):this._setEndings(this.repetitions===0,!0,T)),C>=v||C<0){const R=Math.floor(C/v);C-=v*R,w+=Math.abs(R);const G=this.repetitions-w;if(G<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,C=d>0?v:0,this.time=C,this._mixer.dispatchEvent({type:"finished",action:this,direction:d>0?1:-1});else{if(G===1){const I=d<0;this._setEndings(I,!I,T)}else this._setEndings(!1,!1,T);this._loopCount=w,this.time=C,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:R})}}else this.time=C;if(T&&(w&1)===1)return v-C}return C}_setEndings(d,v,A){const C=this._interpolantSettings;A?(C.endingStart=ZeroSlopeEnding,C.endingEnd=ZeroSlopeEnding):(d?C.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:C.endingStart=WrapAroundEnding,v?C.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:C.endingEnd=WrapAroundEnding)}_scheduleFading(d,v,A){const C=this._mixer,w=C.time;let T=this._weightInterpolant;T===null&&(T=C._lendControlInterpolant(),this._weightInterpolant=T);const R=T.parameterPositions,G=T.sampleValues;return R[0]=w,G[0]=v,R[1]=w+d,G[1]=A,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(d){super(),this._root=d,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(d,v){const A=d._localRoot||this._root,C=d._clip.tracks,w=C.length,T=d._propertyBindings,R=d._interpolants,G=A.uuid,I=this._bindingsByRootAndName;let z=I[G];z===void 0&&(z={},I[G]=z);for(let H=0;H!==w;++H){const Y=C[H],ee=Y.name;let ie=z[ee];if(ie!==void 0)++ie.referenceCount,T[H]=ie;else{if(ie=T[H],ie!==void 0){ie._cacheIndex===null&&(++ie.referenceCount,this._addInactiveBinding(ie,G,ee));continue}const oe=v&&v._propertyBindings[H].binding.parsedPath;ie=new PropertyMixer(PropertyBinding.create(A,ee,oe),Y.ValueTypeName,Y.getValueSize()),++ie.referenceCount,this._addInactiveBinding(ie,G,ee),T[H]=ie}R[H].resultBuffer=ie.buffer}}_activateAction(d){if(!this._isActiveAction(d)){if(d._cacheIndex===null){const A=(d._localRoot||this._root).uuid,C=d._clip.uuid,w=this._actionsByClip[C];this._bindAction(d,w&&w.knownActions[0]),this._addInactiveAction(d,C,A)}const v=d._propertyBindings;for(let A=0,C=v.length;A!==C;++A){const w=v[A];w.useCount++===0&&(this._lendBinding(w),w.saveOriginalState())}this._lendAction(d)}}_deactivateAction(d){if(this._isActiveAction(d)){const v=d._propertyBindings;for(let A=0,C=v.length;A!==C;++A){const w=v[A];--w.useCount===0&&(w.restoreOriginalState(),this._takeBackBinding(w))}this._takeBackAction(d)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const d=this;this.stats={actions:{get total(){return d._actions.length},get inUse(){return d._nActiveActions}},bindings:{get total(){return d._bindings.length},get inUse(){return d._nActiveBindings}},controlInterpolants:{get total(){return d._controlInterpolants.length},get inUse(){return d._nActiveControlInterpolants}}}}_isActiveAction(d){const v=d._cacheIndex;return v!==null&&v<this._nActiveActions}_addInactiveAction(d,v,A){const C=this._actions,w=this._actionsByClip;let T=w[v];if(T===void 0)T={knownActions:[d],actionByRoot:{}},d._byClipCacheIndex=0,w[v]=T;else{const R=T.knownActions;d._byClipCacheIndex=R.length,R.push(d)}d._cacheIndex=C.length,C.push(d),T.actionByRoot[A]=d}_removeInactiveAction(d){const v=this._actions,A=v[v.length-1],C=d._cacheIndex;A._cacheIndex=C,v[C]=A,v.pop(),d._cacheIndex=null;const w=d._clip.uuid,T=this._actionsByClip,R=T[w],G=R.knownActions,I=G[G.length-1],z=d._byClipCacheIndex;I._byClipCacheIndex=z,G[z]=I,G.pop(),d._byClipCacheIndex=null;const H=R.actionByRoot,Y=(d._localRoot||this._root).uuid;delete H[Y],G.length===0&&delete T[w],this._removeInactiveBindingsForAction(d)}_removeInactiveBindingsForAction(d){const v=d._propertyBindings;for(let A=0,C=v.length;A!==C;++A){const w=v[A];--w.referenceCount===0&&this._removeInactiveBinding(w)}}_lendAction(d){const v=this._actions,A=d._cacheIndex,C=this._nActiveActions++,w=v[C];d._cacheIndex=C,v[C]=d,w._cacheIndex=A,v[A]=w}_takeBackAction(d){const v=this._actions,A=d._cacheIndex,C=--this._nActiveActions,w=v[C];d._cacheIndex=C,v[C]=d,w._cacheIndex=A,v[A]=w}_addInactiveBinding(d,v,A){const C=this._bindingsByRootAndName,w=this._bindings;let T=C[v];T===void 0&&(T={},C[v]=T),T[A]=d,d._cacheIndex=w.length,w.push(d)}_removeInactiveBinding(d){const v=this._bindings,A=d.binding,C=A.rootNode.uuid,w=A.path,T=this._bindingsByRootAndName,R=T[C],G=v[v.length-1],I=d._cacheIndex;G._cacheIndex=I,v[I]=G,v.pop(),delete R[w],Object.keys(R).length===0&&delete T[C]}_lendBinding(d){const v=this._bindings,A=d._cacheIndex,C=this._nActiveBindings++,w=v[C];d._cacheIndex=C,v[C]=d,w._cacheIndex=A,v[A]=w}_takeBackBinding(d){const v=this._bindings,A=d._cacheIndex,C=--this._nActiveBindings,w=v[C];d._cacheIndex=C,v[C]=d,w._cacheIndex=A,v[A]=w}_lendControlInterpolant(){const d=this._controlInterpolants,v=this._nActiveControlInterpolants++;let A=d[v];return A===void 0&&(A=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),A.__cacheIndex=v,d[v]=A),A}_takeBackControlInterpolant(d){const v=this._controlInterpolants,A=d.__cacheIndex,C=--this._nActiveControlInterpolants,w=v[C];d.__cacheIndex=C,v[C]=d,w.__cacheIndex=A,v[A]=w}clipAction(d,v,A){const C=v||this._root,w=C.uuid;let T=typeof d=="string"?AnimationClip.findByName(C,d):d;const R=T!==null?T.uuid:d,G=this._actionsByClip[R];let I=null;if(A===void 0&&(T!==null?A=T.blendMode:A=NormalAnimationBlendMode),G!==void 0){const H=G.actionByRoot[w];if(H!==void 0&&H.blendMode===A)return H;I=G.knownActions[0],T===null&&(T=I._clip)}if(T===null)return null;const z=new AnimationAction(this,T,v,A);return this._bindAction(z,I),this._addInactiveAction(z,R,w),z}existingAction(d,v){const A=v||this._root,C=A.uuid,w=typeof d=="string"?AnimationClip.findByName(A,d):d,T=w?w.uuid:d,R=this._actionsByClip[T];return R!==void 0&&R.actionByRoot[C]||null}stopAllAction(){const d=this._actions,v=this._nActiveActions;for(let A=v-1;A>=0;--A)d[A].stop();return this}update(d){d*=this.timeScale;const v=this._actions,A=this._nActiveActions,C=this.time+=d,w=Math.sign(d),T=this._accuIndex^=1;for(let I=0;I!==A;++I)v[I]._update(C,d,w,T);const R=this._bindings,G=this._nActiveBindings;for(let I=0;I!==G;++I)R[I].apply(T);return this}setTime(d){this.time=0;for(let v=0;v<this._actions.length;v++)this._actions[v].time=0;return this.update(d)}getRoot(){return this._root}uncacheClip(d){const v=this._actions,A=d.uuid,C=this._actionsByClip,w=C[A];if(w!==void 0){const T=w.knownActions;for(let R=0,G=T.length;R!==G;++R){const I=T[R];this._deactivateAction(I);const z=I._cacheIndex,H=v[v.length-1];I._cacheIndex=null,I._byClipCacheIndex=null,H._cacheIndex=z,v[z]=H,v.pop(),this._removeInactiveBindingsForAction(I)}delete C[A]}}uncacheRoot(d){const v=d.uuid,A=this._actionsByClip;for(const T in A){const R=A[T].actionByRoot,G=R[v];G!==void 0&&(this._deactivateAction(G),this._removeInactiveAction(G))}const C=this._bindingsByRootAndName,w=C[v];if(w!==void 0)for(const T in w){const R=w[T];R.restoreOriginalState(),this._removeInactiveBinding(R)}}uncacheAction(d,v){const A=this.existingAction(d,v);A!==null&&(this._deactivateAction(A),this._removeInactiveAction(A))}}class RenderTarget3D extends RenderTarget{constructor(d=1,v=1,A=1,C={}){super(d,v,C),this.isRenderTarget3D=!0,this.depth=A,this.texture=new Data3DTexture(null,d,v,A),this._setTextureOptions(C),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(d){this.value=d}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(d){return this.uniforms.push(d),this}remove(d){const v=this.uniforms.indexOf(d);return v!==-1&&this.uniforms.splice(v,1),this}setName(d){return this.name=d,this}setUsage(d){return this.usage=d,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(d){this.name=d.name,this.usage=d.usage;const v=d.uniforms;this.uniforms.length=0;for(let A=0,C=v.length;A<C;A++){const w=Array.isArray(v[A])?v[A]:[v[A]];for(let T=0;T<w.length;T++)this.uniforms.push(w[T].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(d,v,A=1){super(d,v),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=A}copy(d){return super.copy(d),this.meshPerAttribute=d.meshPerAttribute,this}clone(d){const v=super.clone(d);return v.meshPerAttribute=this.meshPerAttribute,v}toJSON(d){const v=super.toJSON(d);return v.isInstancedInterleavedBuffer=!0,v.meshPerAttribute=this.meshPerAttribute,v}}class GLBufferAttribute{constructor(d,v,A,C,w,T=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=d,this.type=v,this.itemSize=A,this.elementSize=C,this.count=w,this.normalized=T,this.version=0}set needsUpdate(d){d===!0&&this.version++}setBuffer(d){return this.buffer=d,this}setType(d,v){return this.type=d,this.elementSize=v,this}setItemSize(d){return this.itemSize=d,this}setCount(d){return this.count=d,this}}const _matrix=new Matrix4;class Raycaster{constructor(d,v,A=0,C=1/0){this.ray=new Ray(d,v),this.near=A,this.far=C,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(d,v){this.ray.set(d,v)}setFromCamera(d,v){v.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(v.matrixWorld),this.ray.direction.set(d.x,d.y,.5).unproject(v).sub(this.ray.origin).normalize(),this.camera=v):v.isOrthographicCamera?(this.ray.origin.set(d.x,d.y,(v.near+v.far)/(v.near-v.far)).unproject(v),this.ray.direction.set(0,0,-1).transformDirection(v.matrixWorld),this.camera=v):console.error("THREE.Raycaster: Unsupported camera type: "+v.type)}setFromXRController(d){return _matrix.identity().extractRotation(d.matrixWorld),this.ray.origin.setFromMatrixPosition(d.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(d,v=!0,A=[]){return intersect(d,this,A,v),A.sort(ascSort),A}intersectObjects(d,v=!0,A=[]){for(let C=0,w=d.length;C<w;C++)intersect(d[C],this,A,v);return A.sort(ascSort),A}}function ascSort(_,d){return _.distance-d.distance}function intersect(_,d,v,A){let C=!0;if(_.layers.test(d.layers)&&_.raycast(d,v)===!1&&(C=!1),C===!0&&A===!0){const w=_.children;for(let T=0,R=w.length;T<R;T++)intersect(w[T],d,v,!0)}}class Timer{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(d){this._document=d,d.hidden!==void 0&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),d.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(d){return this._timescale=d,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(d){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(d!==void 0?d:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function handleVisibilityChange(){this._document.hidden===!1&&this.reset()}class Spherical{constructor(d=1,v=0,A=0){this.radius=d,this.phi=v,this.theta=A}set(d,v,A){return this.radius=d,this.phi=v,this.theta=A,this}copy(d){return this.radius=d.radius,this.phi=d.phi,this.theta=d.theta,this}makeSafe(){return this.phi=clamp$2(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(d){return this.setFromCartesianCoords(d.x,d.y,d.z)}setFromCartesianCoords(d,v,A){return this.radius=Math.sqrt(d*d+v*v+A*A),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(d,A),this.phi=Math.acos(clamp$2(v/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(d=1,v=0,A=0){this.radius=d,this.theta=v,this.y=A}set(d,v,A){return this.radius=d,this.theta=v,this.y=A,this}copy(d){return this.radius=d.radius,this.theta=d.theta,this.y=d.y,this}setFromVector3(d){return this.setFromCartesianCoords(d.x,d.y,d.z)}setFromCartesianCoords(d,v,A){return this.radius=Math.sqrt(d*d+A*A),this.theta=Math.atan2(d,A),this.y=v,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(d,v,A,C){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],d!==void 0&&this.set(d,v,A,C)}identity(){return this.set(1,0,0,1),this}fromArray(d,v=0){for(let A=0;A<4;A++)this.elements[A]=d[A+v];return this}set(d,v,A,C){const w=this.elements;return w[0]=d,w[2]=v,w[1]=A,w[3]=C,this}}const _vector$4=new Vector2;class Box2{constructor(d=new Vector2(1/0,1/0),v=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=d,this.max=v}set(d,v){return this.min.copy(d),this.max.copy(v),this}setFromPoints(d){this.makeEmpty();for(let v=0,A=d.length;v<A;v++)this.expandByPoint(d[v]);return this}setFromCenterAndSize(d,v){const A=_vector$4.copy(v).multiplyScalar(.5);return this.min.copy(d).sub(A),this.max.copy(d).add(A),this}clone(){return new this.constructor().copy(this)}copy(d){return this.min.copy(d.min),this.max.copy(d.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(d){return this.isEmpty()?d.set(0,0):d.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(d){return this.isEmpty()?d.set(0,0):d.subVectors(this.max,this.min)}expandByPoint(d){return this.min.min(d),this.max.max(d),this}expandByVector(d){return this.min.sub(d),this.max.add(d),this}expandByScalar(d){return this.min.addScalar(-d),this.max.addScalar(d),this}containsPoint(d){return d.x>=this.min.x&&d.x<=this.max.x&&d.y>=this.min.y&&d.y<=this.max.y}containsBox(d){return this.min.x<=d.min.x&&d.max.x<=this.max.x&&this.min.y<=d.min.y&&d.max.y<=this.max.y}getParameter(d,v){return v.set((d.x-this.min.x)/(this.max.x-this.min.x),(d.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(d){return d.max.x>=this.min.x&&d.min.x<=this.max.x&&d.max.y>=this.min.y&&d.min.y<=this.max.y}clampPoint(d,v){return v.copy(d).clamp(this.min,this.max)}distanceToPoint(d){return this.clampPoint(d,_vector$4).distanceTo(d)}intersect(d){return this.min.max(d.min),this.max.min(d.max),this.isEmpty()&&this.makeEmpty(),this}union(d){return this.min.min(d.min),this.max.max(d.max),this}translate(d){return this.min.add(d),this.max.add(d),this}equals(d){return d.min.equals(this.min)&&d.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3,_d1=new Vector3,_d2=new Vector3,_r=new Vector3,_c1=new Vector3,_c2=new Vector3;class Line3{constructor(d=new Vector3,v=new Vector3){this.start=d,this.end=v}set(d,v){return this.start.copy(d),this.end.copy(v),this}copy(d){return this.start.copy(d.start),this.end.copy(d.end),this}getCenter(d){return d.addVectors(this.start,this.end).multiplyScalar(.5)}delta(d){return d.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(d,v){return this.delta(v).multiplyScalar(d).add(this.start)}closestPointToPointParameter(d,v){_startP.subVectors(d,this.start),_startEnd.subVectors(this.end,this.start);const A=_startEnd.dot(_startEnd);let w=_startEnd.dot(_startP)/A;return v&&(w=clamp$2(w,0,1)),w}closestPointToPoint(d,v,A){const C=this.closestPointToPointParameter(d,v);return this.delta(A).multiplyScalar(C).add(this.start)}distanceSqToLine3(d,v=_c1,A=_c2){const C=10000000000000001e-32;let w,T;const R=this.start,G=d.start,I=this.end,z=d.end;_d1.subVectors(I,R),_d2.subVectors(z,G),_r.subVectors(R,G);const H=_d1.dot(_d1),Y=_d2.dot(_d2),ee=_d2.dot(_r);if(H<=C&&Y<=C)return v.copy(R),A.copy(G),v.sub(A),v.dot(v);if(H<=C)w=0,T=ee/Y,T=clamp$2(T,0,1);else{const ie=_d1.dot(_r);if(Y<=C)T=0,w=clamp$2(-ie/H,0,1);else{const oe=_d1.dot(_d2),se=H*Y-oe*oe;se!==0?w=clamp$2((oe*ee-ie*Y)/se,0,1):w=0,T=(oe*w+ee)/Y,T<0?(T=0,w=clamp$2(-ie/H,0,1)):T>1&&(T=1,w=clamp$2((oe-ie)/H,0,1))}}return v.copy(R).add(_d1.multiplyScalar(w)),A.copy(G).add(_d2.multiplyScalar(T)),v.sub(A),v.dot(v)}applyMatrix4(d){return this.start.applyMatrix4(d),this.end.applyMatrix4(d),this}equals(d){return d.start.equals(this.start)&&d.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(d,v){super(),this.light=d,this.matrixAutoUpdate=!1,this.color=v,this.type="SpotLightHelper";const A=new BufferGeometry,C=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let T=0,R=1,G=32;T<G;T++,R++){const I=T/G*Math.PI*2,z=R/G*Math.PI*2;C.push(Math.cos(I),Math.sin(I),1,Math.cos(z),Math.sin(z),1)}A.setAttribute("position",new Float32BufferAttribute(C,3));const w=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(A,w),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const d=this.light.distance?this.light.distance:1e3,v=d*Math.tan(this.light.angle);this.cone.scale.set(v,v,d),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(d){const v=getBoneList(d),A=new BufferGeometry,C=[],w=[];for(let I=0;I<v.length;I++){const z=v[I];z.parent&&z.parent.isBone&&(C.push(0,0,0),C.push(0,0,0),w.push(0,0,0),w.push(0,0,0))}A.setAttribute("position",new Float32BufferAttribute(C,3)),A.setAttribute("color",new Float32BufferAttribute(w,3));const T=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(A,T),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=d,this.bones=v,this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1;const R=new Color(255),G=new Color(65280);this.setColors(R,G)}updateMatrixWorld(d){const v=this.bones,A=this.geometry,C=A.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let w=0,T=0;w<v.length;w++){const R=v[w];R.parent&&R.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,R.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),C.setXYZ(T,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,R.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),C.setXYZ(T+1,_vector$2.x,_vector$2.y,_vector$2.z),T+=2)}A.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(d)}setColors(d,v){const C=this.geometry.getAttribute("color");for(let w=0;w<C.count;w+=2)C.setXYZ(w,d.r,d.g,d.b),C.setXYZ(w+1,v.r,v.g,v.b);return C.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(_){const d=[];_.isBone===!0&&d.push(_);for(let v=0;v<_.children.length;v++)d.push(...getBoneList(_.children[v]));return d}class PointLightHelper extends Mesh{constructor(d,v,A){const C=new SphereGeometry(v,4,2),w=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(C,w),this.light=d,this.color=A,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(d,v,A){super(),this.light=d,this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.color=A,this.type="HemisphereLightHelper";const C=new OctahedronGeometry(v);C.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const w=C.getAttribute("position"),T=new Float32Array(w.count*3);C.setAttribute("color",new BufferAttribute(T,3)),this.add(new Mesh(C,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const d=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const v=d.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let A=0,C=v.count;A<C;A++){const w=A<C/2?_color1:_color2;v.setXYZ(A,w.r,w.g,w.b)}v.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),d.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(d=10,v=10,A=4473924,C=8947848){A=new Color(A),C=new Color(C);const w=v/2,T=d/v,R=d/2,G=[],I=[];for(let Y=0,ee=0,ie=-R;Y<=v;Y++,ie+=T){G.push(-R,0,ie,R,0,ie),G.push(ie,0,-R,ie,0,R);const oe=Y===w?A:C;oe.toArray(I,ee),ee+=3,oe.toArray(I,ee),ee+=3,oe.toArray(I,ee),ee+=3,oe.toArray(I,ee),ee+=3}const z=new BufferGeometry;z.setAttribute("position",new Float32BufferAttribute(G,3)),z.setAttribute("color",new Float32BufferAttribute(I,3));const H=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(z,H),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(d=10,v=16,A=8,C=64,w=4473924,T=8947848){w=new Color(w),T=new Color(T);const R=[],G=[];if(v>1)for(let H=0;H<v;H++){const Y=H/v*(Math.PI*2),ee=Math.sin(Y)*d,ie=Math.cos(Y)*d;R.push(0,0,0),R.push(ee,0,ie);const oe=H&1?w:T;G.push(oe.r,oe.g,oe.b),G.push(oe.r,oe.g,oe.b)}for(let H=0;H<A;H++){const Y=H&1?w:T,ee=d-d/A*H;for(let ie=0;ie<C;ie++){let oe=ie/C*(Math.PI*2),se=Math.sin(oe)*ee,re=Math.cos(oe)*ee;R.push(se,0,re),G.push(Y.r,Y.g,Y.b),oe=(ie+1)/C*(Math.PI*2),se=Math.sin(oe)*ee,re=Math.cos(oe)*ee,R.push(se,0,re),G.push(Y.r,Y.g,Y.b)}}const I=new BufferGeometry;I.setAttribute("position",new Float32BufferAttribute(R,3)),I.setAttribute("color",new Float32BufferAttribute(G,3));const z=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(I,z),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(d,v,A){super(),this.light=d,this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.color=A,this.type="DirectionalLightHelper",v===void 0&&(v=1);let C=new BufferGeometry;C.setAttribute("position",new Float32BufferAttribute([-v,v,0,v,v,0,v,-v,0,-v,-v,0,-v,v,0],3));const w=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(C,w),this.add(this.lightPlane),C=new BufferGeometry,C.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(C,w),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(d){const v=new BufferGeometry,A=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),C=[],w=[],T={};R("n1","n2"),R("n2","n4"),R("n4","n3"),R("n3","n1"),R("f1","f2"),R("f2","f4"),R("f4","f3"),R("f3","f1"),R("n1","f1"),R("n2","f2"),R("n3","f3"),R("n4","f4"),R("p","n1"),R("p","n2"),R("p","n3"),R("p","n4"),R("u1","u2"),R("u2","u3"),R("u3","u1"),R("c","t"),R("p","c"),R("cn1","cn2"),R("cn3","cn4"),R("cf1","cf2"),R("cf3","cf4");function R(ie,oe){G(ie),G(oe)}function G(ie){C.push(0,0,0),w.push(0,0,0),T[ie]===void 0&&(T[ie]=[]),T[ie].push(C.length/3-1)}v.setAttribute("position",new Float32BufferAttribute(C,3)),v.setAttribute("color",new Float32BufferAttribute(w,3)),super(v,A),this.type="CameraHelper",this.camera=d,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=T,this.update();const I=new Color(16755200),z=new Color(16711680),H=new Color(43775),Y=new Color(16777215),ee=new Color(3355443);this.setColors(I,z,H,Y,ee)}setColors(d,v,A,C,w){const R=this.geometry.getAttribute("color");return R.setXYZ(0,d.r,d.g,d.b),R.setXYZ(1,d.r,d.g,d.b),R.setXYZ(2,d.r,d.g,d.b),R.setXYZ(3,d.r,d.g,d.b),R.setXYZ(4,d.r,d.g,d.b),R.setXYZ(5,d.r,d.g,d.b),R.setXYZ(6,d.r,d.g,d.b),R.setXYZ(7,d.r,d.g,d.b),R.setXYZ(8,d.r,d.g,d.b),R.setXYZ(9,d.r,d.g,d.b),R.setXYZ(10,d.r,d.g,d.b),R.setXYZ(11,d.r,d.g,d.b),R.setXYZ(12,d.r,d.g,d.b),R.setXYZ(13,d.r,d.g,d.b),R.setXYZ(14,d.r,d.g,d.b),R.setXYZ(15,d.r,d.g,d.b),R.setXYZ(16,d.r,d.g,d.b),R.setXYZ(17,d.r,d.g,d.b),R.setXYZ(18,d.r,d.g,d.b),R.setXYZ(19,d.r,d.g,d.b),R.setXYZ(20,d.r,d.g,d.b),R.setXYZ(21,d.r,d.g,d.b),R.setXYZ(22,d.r,d.g,d.b),R.setXYZ(23,d.r,d.g,d.b),R.setXYZ(24,v.r,v.g,v.b),R.setXYZ(25,v.r,v.g,v.b),R.setXYZ(26,v.r,v.g,v.b),R.setXYZ(27,v.r,v.g,v.b),R.setXYZ(28,v.r,v.g,v.b),R.setXYZ(29,v.r,v.g,v.b),R.setXYZ(30,v.r,v.g,v.b),R.setXYZ(31,v.r,v.g,v.b),R.setXYZ(32,A.r,A.g,A.b),R.setXYZ(33,A.r,A.g,A.b),R.setXYZ(34,A.r,A.g,A.b),R.setXYZ(35,A.r,A.g,A.b),R.setXYZ(36,A.r,A.g,A.b),R.setXYZ(37,A.r,A.g,A.b),R.setXYZ(38,C.r,C.g,C.b),R.setXYZ(39,C.r,C.g,C.b),R.setXYZ(40,w.r,w.g,w.b),R.setXYZ(41,w.r,w.g,w.b),R.setXYZ(42,w.r,w.g,w.b),R.setXYZ(43,w.r,w.g,w.b),R.setXYZ(44,w.r,w.g,w.b),R.setXYZ(45,w.r,w.g,w.b),R.setXYZ(46,w.r,w.g,w.b),R.setXYZ(47,w.r,w.g,w.b),R.setXYZ(48,w.r,w.g,w.b),R.setXYZ(49,w.r,w.g,w.b),R.needsUpdate=!0,this}update(){const d=this.geometry,v=this.pointMap,A=1,C=1;let w,T;if(_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)w=1,T=0;else if(this.camera.coordinateSystem===WebGLCoordinateSystem)w=-1,T=1;else if(this.camera.coordinateSystem===WebGPUCoordinateSystem)w=0,T=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);setPoint("c",v,d,_camera,0,0,w),setPoint("t",v,d,_camera,0,0,T),setPoint("n1",v,d,_camera,-A,-C,w),setPoint("n2",v,d,_camera,A,-C,w),setPoint("n3",v,d,_camera,-A,C,w),setPoint("n4",v,d,_camera,A,C,w),setPoint("f1",v,d,_camera,-A,-C,T),setPoint("f2",v,d,_camera,A,-C,T),setPoint("f3",v,d,_camera,-A,C,T),setPoint("f4",v,d,_camera,A,C,T),setPoint("u1",v,d,_camera,A*.7,C*1.1,w),setPoint("u2",v,d,_camera,-A*.7,C*1.1,w),setPoint("u3",v,d,_camera,0,C*2,w),setPoint("cf1",v,d,_camera,-A,0,T),setPoint("cf2",v,d,_camera,A,0,T),setPoint("cf3",v,d,_camera,0,-C,T),setPoint("cf4",v,d,_camera,0,C,T),setPoint("cn1",v,d,_camera,-A,0,w),setPoint("cn2",v,d,_camera,A,0,w),setPoint("cn3",v,d,_camera,0,-C,w),setPoint("cn4",v,d,_camera,0,C,w),d.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(_,d,v,A,C,w,T){_vector.set(C,w,T).unproject(A);const R=d[_];if(R!==void 0){const G=v.getAttribute("position");for(let I=0,z=R.length;I<z;I++)G.setXYZ(R[I],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(d,v=16776960){const A=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),C=new Float32Array(8*3),w=new BufferGeometry;w.setIndex(new BufferAttribute(A,1)),w.setAttribute("position",new BufferAttribute(C,3)),super(w,new LineBasicMaterial({color:v,toneMapped:!1})),this.object=d,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const d=_box.min,v=_box.max,A=this.geometry.attributes.position,C=A.array;C[0]=v.x,C[1]=v.y,C[2]=v.z,C[3]=d.x,C[4]=v.y,C[5]=v.z,C[6]=d.x,C[7]=d.y,C[8]=v.z,C[9]=v.x,C[10]=d.y,C[11]=v.z,C[12]=v.x,C[13]=v.y,C[14]=d.z,C[15]=d.x,C[16]=v.y,C[17]=d.z,C[18]=d.x,C[19]=d.y,C[20]=d.z,C[21]=v.x,C[22]=d.y,C[23]=d.z,A.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(d){return this.object=d,this.update(),this}copy(d,v){return super.copy(d,v),this.object=d.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(d,v=16776960){const A=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),C=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],w=new BufferGeometry;w.setIndex(new BufferAttribute(A,1)),w.setAttribute("position",new Float32BufferAttribute(C,3)),super(w,new LineBasicMaterial({color:v,toneMapped:!1})),this.box=d,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(d){const v=this.box;v.isEmpty()||(v.getCenter(this.position),v.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(d))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(d,v=1,A=16776960){const C=A,w=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],T=new BufferGeometry;T.setAttribute("position",new Float32BufferAttribute(w,3)),T.computeBoundingSphere(),super(T,new LineBasicMaterial({color:C,toneMapped:!1})),this.type="PlaneHelper",this.plane=d,this.size=v;const R=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],G=new BufferGeometry;G.setAttribute("position",new Float32BufferAttribute(R,3)),G.computeBoundingSphere(),this.add(new Mesh(G,new MeshBasicMaterial({color:C,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(d){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(d)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(d=new Vector3(0,0,1),v=new Vector3(0,0,0),A=1,C=16776960,w=A*.2,T=w*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new ConeGeometry(.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(v),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:C,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:C,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(d),this.setLength(A,w,T)}setDirection(d){if(d.y>.99999)this.quaternion.set(0,0,0,1);else if(d.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(d.z,0,-d.x).normalize();const v=Math.acos(d.y);this.quaternion.setFromAxisAngle(_axis,v)}}setLength(d,v=d*.2,A=v*.2){this.line.scale.set(1,Math.max(1e-4,d-v),1),this.line.updateMatrix(),this.cone.scale.set(A,v,A),this.cone.position.y=d,this.cone.updateMatrix()}setColor(d){this.line.material.color.set(d),this.cone.material.color.set(d)}copy(d){return super.copy(d,!1),this.line.copy(d.line),this.cone.copy(d.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(d=1){const v=[0,0,0,d,0,0,0,0,0,0,d,0,0,0,0,0,0,d],A=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],C=new BufferGeometry;C.setAttribute("position",new Float32BufferAttribute(v,3)),C.setAttribute("color",new Float32BufferAttribute(A,3));const w=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(C,w),this.type="AxesHelper"}setColors(d,v,A){const C=new Color,w=this.geometry.attributes.color.array;return C.set(d),C.toArray(w,0),C.toArray(w,3),C.set(v),C.toArray(w,6),C.toArray(w,9),C.set(A),C.toArray(w,12),C.toArray(w,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(d,v){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(d,v),this}lineTo(d,v){return this.currentPath.lineTo(d,v),this}quadraticCurveTo(d,v,A,C){return this.currentPath.quadraticCurveTo(d,v,A,C),this}bezierCurveTo(d,v,A,C,w,T){return this.currentPath.bezierCurveTo(d,v,A,C,w,T),this}splineThru(d){return this.currentPath.splineThru(d),this}toShapes(d){function v(re){const fe=[];for(let ue=0,ge=re.length;ue<ge;ue++){const ye=re[ue],be=new Shape;be.curves=ye.curves,fe.push(be)}return fe}function A(re,fe){const ue=fe.length;let ge=!1;for(let ye=ue-1,be=0;be<ue;ye=be++){let ve=fe[ye],Me=fe[be],we=Me.x-ve.x,Be=Me.y-ve.y;if(Math.abs(Be)>Number.EPSILON){if(Be<0&&(ve=fe[be],we=-we,Me=fe[ye],Be=-Be),re.y<ve.y||re.y>Me.y)continue;if(re.y===ve.y){if(re.x===ve.x)return!0}else{const De=Be*(re.x-ve.x)-we*(re.y-ve.y);if(De===0)return!0;if(De<0)continue;ge=!ge}}else{if(re.y!==ve.y)continue;if(Me.x<=re.x&&re.x<=ve.x||ve.x<=re.x&&re.x<=Me.x)return!0}}return ge}const C=ShapeUtils.isClockWise,w=this.subPaths;if(w.length===0)return[];let T,R,G;const I=[];if(w.length===1)return R=w[0],G=new Shape,G.curves=R.curves,I.push(G),I;let z=!C(w[0].getPoints());z=d?!z:z;const H=[],Y=[];let ee=[],ie=0,oe;Y[ie]=void 0,ee[ie]=[];for(let re=0,fe=w.length;re<fe;re++)R=w[re],oe=R.getPoints(),T=C(oe),T=d?!T:T,T?(!z&&Y[ie]&&ie++,Y[ie]={s:new Shape,p:oe},Y[ie].s.curves=R.curves,z&&ie++,ee[ie]=[]):ee[ie].push({h:R,p:oe[0]});if(!Y[0])return v(w);if(Y.length>1){let re=!1,fe=0;for(let ue=0,ge=Y.length;ue<ge;ue++)H[ue]=[];for(let ue=0,ge=Y.length;ue<ge;ue++){const ye=ee[ue];for(let be=0;be<ye.length;be++){const ve=ye[be];let Me=!0;for(let we=0;we<Y.length;we++)A(ve.p,Y[we].p)&&(ue!==we&&fe++,Me?(Me=!1,H[we].push(ve)):re=!0);Me&&H[ue].push(ve)}}fe>0&&re===!1&&(ee=H)}let se;for(let re=0,fe=Y.length;re<fe;re++){G=Y[re].s,I.push(G),se=ee[re];for(let ue=0,ge=se.length;ue<ge;ue++)G.holes.push(se[ue].h)}return I}}class Controls extends EventDispatcher{constructor(d,v=null){super(),this.object=d,this.domElement=v,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(d){if(d===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=d}disconnect(){}dispose(){}update(){}}function contain(_,d){const v=_.image&&_.image.width?_.image.width/_.image.height:1;return v>d?(_.repeat.x=1,_.repeat.y=v/d,_.offset.x=0,_.offset.y=(1-_.repeat.y)/2):(_.repeat.x=d/v,_.repeat.y=1,_.offset.x=(1-_.repeat.x)/2,_.offset.y=0),_}function cover(_,d){const v=_.image&&_.image.width?_.image.width/_.image.height:1;return v>d?(_.repeat.x=d/v,_.repeat.y=1,_.offset.x=(1-_.repeat.x)/2,_.offset.y=0):(_.repeat.x=1,_.repeat.y=v/d,_.offset.x=0,_.offset.y=(1-_.repeat.y)/2),_}function fill(_){return _.repeat.x=1,_.repeat.y=1,_.offset.x=0,_.offset.y=0,_}function getByteLength(_,d,v,A){const C=getTextureTypeByteLength(A);switch(v){case AlphaFormat:return _*d;case RedFormat:return _*d/C.components*C.byteLength;case RedIntegerFormat:return _*d/C.components*C.byteLength;case RGFormat:return _*d*2/C.components*C.byteLength;case RGIntegerFormat:return _*d*2/C.components*C.byteLength;case RGBFormat:return _*d*3/C.components*C.byteLength;case RGBAFormat:return _*d*4/C.components*C.byteLength;case RGBAIntegerFormat:return _*d*4/C.components*C.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((_+3)/4)*Math.floor((d+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((_+3)/4)*Math.floor((d+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(_,16)*Math.max(d,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(_,8)*Math.max(d,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((_+3)/4)*Math.floor((d+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((_+3)/4)*Math.floor((d+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((_+3)/4)*Math.floor((d+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((_+4)/5)*Math.floor((d+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((_+4)/5)*Math.floor((d+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((_+5)/6)*Math.floor((d+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((_+5)/6)*Math.floor((d+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((_+7)/8)*Math.floor((d+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((_+7)/8)*Math.floor((d+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((_+7)/8)*Math.floor((d+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((_+9)/10)*Math.floor((d+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((_+9)/10)*Math.floor((d+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((_+9)/10)*Math.floor((d+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((_+9)/10)*Math.floor((d+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((_+11)/12)*Math.floor((d+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((_+11)/12)*Math.floor((d+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(_/4)*Math.ceil(d/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(_/4)*Math.ceil(d/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(_/4)*Math.ceil(d/4)*16}throw new Error(`Unable to determine texture byte length for ${v} format.`)}function getTextureTypeByteLength(_){switch(_){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${_}.`)}class TextureUtils{static contain(d,v){return contain(d,v)}static cover(d,v){return cover(d,v)}static fill(d){return fill(d)}static getByteLength(d,v,A,C){return getByteLength(d,v,A,C)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let _=null,d=!1,v=null,A=null;function C(w,T){v(w,T),A=_.requestAnimationFrame(C)}return{start:function(){d!==!0&&v!==null&&(A=_.requestAnimationFrame(C),d=!0)},stop:function(){_.cancelAnimationFrame(A),d=!1},setAnimationLoop:function(w){v=w},setContext:function(w){_=w}}}function WebGLAttributes(_){const d=new WeakMap;function v(R,G){const I=R.array,z=R.usage,H=I.byteLength,Y=_.createBuffer();_.bindBuffer(G,Y),_.bufferData(G,I,z),R.onUploadCallback();let ee;if(I instanceof Float32Array)ee=_.FLOAT;else if(typeof Float16Array<"u"&&I instanceof Float16Array)ee=_.HALF_FLOAT;else if(I instanceof Uint16Array)R.isFloat16BufferAttribute?ee=_.HALF_FLOAT:ee=_.UNSIGNED_SHORT;else if(I instanceof Int16Array)ee=_.SHORT;else if(I instanceof Uint32Array)ee=_.UNSIGNED_INT;else if(I instanceof Int32Array)ee=_.INT;else if(I instanceof Int8Array)ee=_.BYTE;else if(I instanceof Uint8Array)ee=_.UNSIGNED_BYTE;else if(I instanceof Uint8ClampedArray)ee=_.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+I);return{buffer:Y,type:ee,bytesPerElement:I.BYTES_PER_ELEMENT,version:R.version,size:H}}function A(R,G,I){const z=G.array,H=G.updateRanges;if(_.bindBuffer(I,R),H.length===0)_.bufferSubData(I,0,z);else{H.sort((ee,ie)=>ee.start-ie.start);let Y=0;for(let ee=1;ee<H.length;ee++){const ie=H[Y],oe=H[ee];oe.start<=ie.start+ie.count+1?ie.count=Math.max(ie.count,oe.start+oe.count-ie.start):(++Y,H[Y]=oe)}H.length=Y+1;for(let ee=0,ie=H.length;ee<ie;ee++){const oe=H[ee];_.bufferSubData(I,oe.start*z.BYTES_PER_ELEMENT,z,oe.start,oe.count)}G.clearUpdateRanges()}G.onUploadCallback()}function C(R){return R.isInterleavedBufferAttribute&&(R=R.data),d.get(R)}function w(R){R.isInterleavedBufferAttribute&&(R=R.data);const G=d.get(R);G&&(_.deleteBuffer(G.buffer),d.delete(R))}function T(R,G){if(R.isInterleavedBufferAttribute&&(R=R.data),R.isGLBufferAttribute){const z=d.get(R);(!z||z.version<R.version)&&d.set(R,{buffer:R.buffer,type:R.type,bytesPerElement:R.elementSize,version:R.version});return}const I=d.get(R);if(I===void 0)d.set(R,v(R,G));else if(I.version<R.version){if(I.size!==R.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");A(I.buffer,R,G),I.version=R.version}}return{get:C,remove:w,update:T}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(_,d,v,A,C,w,T){const R=new Color(0);let G=w===!0?0:1,I,z,H=null,Y=0,ee=null;function ie(ue){let ge=ue.isScene===!0?ue.background:null;return ge&&ge.isTexture&&(ge=(ue.backgroundBlurriness>0?v:d).get(ge)),ge}function oe(ue){let ge=!1;const ye=ie(ue);ye===null?re(R,G):ye&&ye.isColor&&(re(ye,1),ge=!0);const be=_.xr.getEnvironmentBlendMode();be==="additive"?A.buffers.color.setClear(0,0,0,1,T):be==="alpha-blend"&&A.buffers.color.setClear(0,0,0,0,T),(_.autoClear||ge)&&(A.buffers.depth.setTest(!0),A.buffers.depth.setMask(!0),A.buffers.color.setMask(!0),_.clear(_.autoClearColor,_.autoClearDepth,_.autoClearStencil))}function se(ue,ge){const ye=ie(ge);ye&&(ye.isCubeTexture||ye.mapping===CubeUVReflectionMapping)?(z===void 0&&(z=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),z.geometry.deleteAttribute("normal"),z.geometry.deleteAttribute("uv"),z.onBeforeRender=function(be,ve,Me){this.matrixWorld.copyPosition(Me.matrixWorld)},Object.defineProperty(z.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),C.update(z)),_e1$1.copy(ge.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,ye.isCubeTexture&&ye.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),z.material.uniforms.envMap.value=ye,z.material.uniforms.flipEnvMap.value=ye.isCubeTexture&&ye.isRenderTargetTexture===!1?-1:1,z.material.uniforms.backgroundBlurriness.value=ge.backgroundBlurriness,z.material.uniforms.backgroundIntensity.value=ge.backgroundIntensity,z.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),z.material.toneMapped=ColorManagement.getTransfer(ye.colorSpace)!==SRGBTransfer,(H!==ye||Y!==ye.version||ee!==_.toneMapping)&&(z.material.needsUpdate=!0,H=ye,Y=ye.version,ee=_.toneMapping),z.layers.enableAll(),ue.unshift(z,z.geometry,z.material,0,0,null)):ye&&ye.isTexture&&(I===void 0&&(I=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),I.geometry.deleteAttribute("normal"),Object.defineProperty(I.material,"map",{get:function(){return this.uniforms.t2D.value}}),C.update(I)),I.material.uniforms.t2D.value=ye,I.material.uniforms.backgroundIntensity.value=ge.backgroundIntensity,I.material.toneMapped=ColorManagement.getTransfer(ye.colorSpace)!==SRGBTransfer,ye.matrixAutoUpdate===!0&&ye.updateMatrix(),I.material.uniforms.uvTransform.value.copy(ye.matrix),(H!==ye||Y!==ye.version||ee!==_.toneMapping)&&(I.material.needsUpdate=!0,H=ye,Y=ye.version,ee=_.toneMapping),I.layers.enableAll(),ue.unshift(I,I.geometry,I.material,0,0,null))}function re(ue,ge){ue.getRGB(_rgb,getUnlitUniformColorSpace(_)),A.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,ge,T)}function fe(){z!==void 0&&(z.geometry.dispose(),z.material.dispose(),z=void 0),I!==void 0&&(I.geometry.dispose(),I.material.dispose(),I=void 0)}return{getClearColor:function(){return R},setClearColor:function(ue,ge=1){R.set(ue),G=ge,re(R,G)},getClearAlpha:function(){return G},setClearAlpha:function(ue){G=ue,re(R,G)},render:oe,addToRenderList:se,dispose:fe}}function WebGLBindingStates(_,d){const v=_.getParameter(_.MAX_VERTEX_ATTRIBS),A={},C=Y(null);let w=C,T=!1;function R(Be,De,Fe,Oe,Ge){let ze=!1;const je=H(Oe,Fe,De);w!==je&&(w=je,I(w.object)),ze=ee(Be,Oe,Fe,Ge),ze&&ie(Be,Oe,Fe,Ge),Ge!==null&&d.update(Ge,_.ELEMENT_ARRAY_BUFFER),(ze||T)&&(T=!1,ge(Be,De,Fe,Oe),Ge!==null&&_.bindBuffer(_.ELEMENT_ARRAY_BUFFER,d.get(Ge).buffer))}function G(){return _.createVertexArray()}function I(Be){return _.bindVertexArray(Be)}function z(Be){return _.deleteVertexArray(Be)}function H(Be,De,Fe){const Oe=Fe.wireframe===!0;let Ge=A[Be.id];Ge===void 0&&(Ge={},A[Be.id]=Ge);let ze=Ge[De.id];ze===void 0&&(ze={},Ge[De.id]=ze);let je=ze[Oe];return je===void 0&&(je=Y(G()),ze[Oe]=je),je}function Y(Be){const De=[],Fe=[],Oe=[];for(let Ge=0;Ge<v;Ge++)De[Ge]=0,Fe[Ge]=0,Oe[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:De,enabledAttributes:Fe,attributeDivisors:Oe,object:Be,attributes:{},index:null}}function ee(Be,De,Fe,Oe){const Ge=w.attributes,ze=De.attributes;let je=0;const He=Fe.getAttributes();for(const Xe in He)if(He[Xe].location>=0){const We=Ge[Xe];let nt=ze[Xe];if(nt===void 0&&(Xe==="instanceMatrix"&&Be.instanceMatrix&&(nt=Be.instanceMatrix),Xe==="instanceColor"&&Be.instanceColor&&(nt=Be.instanceColor)),We===void 0||We.attribute!==nt||nt&&We.data!==nt.data)return!0;je++}return w.attributesNum!==je||w.index!==Oe}function ie(Be,De,Fe,Oe){const Ge={},ze=De.attributes;let je=0;const He=Fe.getAttributes();for(const Xe in He)if(He[Xe].location>=0){let We=ze[Xe];We===void 0&&(Xe==="instanceMatrix"&&Be.instanceMatrix&&(We=Be.instanceMatrix),Xe==="instanceColor"&&Be.instanceColor&&(We=Be.instanceColor));const nt={};nt.attribute=We,We&&We.data&&(nt.data=We.data),Ge[Xe]=nt,je++}w.attributes=Ge,w.attributesNum=je,w.index=Oe}function oe(){const Be=w.newAttributes;for(let De=0,Fe=Be.length;De<Fe;De++)Be[De]=0}function se(Be){re(Be,0)}function re(Be,De){const Fe=w.newAttributes,Oe=w.enabledAttributes,Ge=w.attributeDivisors;Fe[Be]=1,Oe[Be]===0&&(_.enableVertexAttribArray(Be),Oe[Be]=1),Ge[Be]!==De&&(_.vertexAttribDivisor(Be,De),Ge[Be]=De)}function fe(){const Be=w.newAttributes,De=w.enabledAttributes;for(let Fe=0,Oe=De.length;Fe<Oe;Fe++)De[Fe]!==Be[Fe]&&(_.disableVertexAttribArray(Fe),De[Fe]=0)}function ue(Be,De,Fe,Oe,Ge,ze,je){je===!0?_.vertexAttribIPointer(Be,De,Fe,Ge,ze):_.vertexAttribPointer(Be,De,Fe,Oe,Ge,ze)}function ge(Be,De,Fe,Oe){oe();const Ge=Oe.attributes,ze=Fe.getAttributes(),je=De.defaultAttributeValues;for(const He in ze){const Xe=ze[He];if(Xe.location>=0){let $e=Ge[He];if($e===void 0&&(He==="instanceMatrix"&&Be.instanceMatrix&&($e=Be.instanceMatrix),He==="instanceColor"&&Be.instanceColor&&($e=Be.instanceColor)),$e!==void 0){const We=$e.normalized,nt=$e.itemSize,Qt=d.get($e);if(Qt===void 0)continue;const Wt=Qt.buffer,Bn=Qt.type,Lt=Qt.bytesPerElement,Mn=Bn===_.INT||Bn===_.UNSIGNED_INT||$e.gpuType===IntType;if($e.isInterleavedBufferAttribute){const cr=$e.data,In=cr.stride,Zn=$e.offset;if(cr.isInstancedInterleavedBuffer){for(let $n=0;$n<Xe.locationSize;$n++)re(Xe.location+$n,cr.meshPerAttribute);Be.isInstancedMesh!==!0&&Oe._maxInstanceCount===void 0&&(Oe._maxInstanceCount=cr.meshPerAttribute*cr.count)}else for(let $n=0;$n<Xe.locationSize;$n++)se(Xe.location+$n);_.bindBuffer(_.ARRAY_BUFFER,Wt);for(let $n=0;$n<Xe.locationSize;$n++)ue(Xe.location+$n,nt/Xe.locationSize,Bn,We,In*Lt,(Zn+nt/Xe.locationSize*$n)*Lt,Mn)}else{if($e.isInstancedBufferAttribute){for(let cr=0;cr<Xe.locationSize;cr++)re(Xe.location+cr,$e.meshPerAttribute);Be.isInstancedMesh!==!0&&Oe._maxInstanceCount===void 0&&(Oe._maxInstanceCount=$e.meshPerAttribute*$e.count)}else for(let cr=0;cr<Xe.locationSize;cr++)se(Xe.location+cr);_.bindBuffer(_.ARRAY_BUFFER,Wt);for(let cr=0;cr<Xe.locationSize;cr++)ue(Xe.location+cr,nt/Xe.locationSize,Bn,We,nt*Lt,nt/Xe.locationSize*cr*Lt,Mn)}}else if(je!==void 0){const We=je[He];if(We!==void 0)switch(We.length){case 2:_.vertexAttrib2fv(Xe.location,We);break;case 3:_.vertexAttrib3fv(Xe.location,We);break;case 4:_.vertexAttrib4fv(Xe.location,We);break;default:_.vertexAttrib1fv(Xe.location,We)}}}}fe()}function ye(){Me();for(const Be in A){const De=A[Be];for(const Fe in De){const Oe=De[Fe];for(const Ge in Oe)z(Oe[Ge].object),delete Oe[Ge];delete De[Fe]}delete A[Be]}}function be(Be){if(A[Be.id]===void 0)return;const De=A[Be.id];for(const Fe in De){const Oe=De[Fe];for(const Ge in Oe)z(Oe[Ge].object),delete Oe[Ge];delete De[Fe]}delete A[Be.id]}function ve(Be){for(const De in A){const Fe=A[De];if(Fe[Be.id]===void 0)continue;const Oe=Fe[Be.id];for(const Ge in Oe)z(Oe[Ge].object),delete Oe[Ge];delete Fe[Be.id]}}function Me(){we(),T=!0,w!==C&&(w=C,I(w.object))}function we(){C.geometry=null,C.program=null,C.wireframe=!1}return{setup:R,reset:Me,resetDefaultState:we,dispose:ye,releaseStatesOfGeometry:be,releaseStatesOfProgram:ve,initAttributes:oe,enableAttribute:se,disableUnusedAttributes:fe}}function WebGLBufferRenderer(_,d,v){let A;function C(I){A=I}function w(I,z){_.drawArrays(A,I,z),v.update(z,A,1)}function T(I,z,H){H!==0&&(_.drawArraysInstanced(A,I,z,H),v.update(z,A,H))}function R(I,z,H){if(H===0)return;d.get("WEBGL_multi_draw").multiDrawArraysWEBGL(A,I,0,z,0,H);let ee=0;for(let ie=0;ie<H;ie++)ee+=z[ie];v.update(ee,A,1)}function G(I,z,H,Y){if(H===0)return;const ee=d.get("WEBGL_multi_draw");if(ee===null)for(let ie=0;ie<I.length;ie++)T(I[ie],z[ie],Y[ie]);else{ee.multiDrawArraysInstancedWEBGL(A,I,0,z,0,Y,0,H);let ie=0;for(let oe=0;oe<H;oe++)ie+=z[oe]*Y[oe];v.update(ie,A,1)}}this.setMode=C,this.render=w,this.renderInstances=T,this.renderMultiDraw=R,this.renderMultiDrawInstances=G}function WebGLCapabilities(_,d,v,A){let C;function w(){if(C!==void 0)return C;if(d.has("EXT_texture_filter_anisotropic")===!0){const ve=d.get("EXT_texture_filter_anisotropic");C=_.getParameter(ve.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else C=0;return C}function T(ve){return!(ve!==RGBAFormat&&A.convert(ve)!==_.getParameter(_.IMPLEMENTATION_COLOR_READ_FORMAT))}function R(ve){const Me=ve===HalfFloatType&&(d.has("EXT_color_buffer_half_float")||d.has("EXT_color_buffer_float"));return!(ve!==UnsignedByteType&&A.convert(ve)!==_.getParameter(_.IMPLEMENTATION_COLOR_READ_TYPE)&&ve!==FloatType&&!Me)}function G(ve){if(ve==="highp"){if(_.getShaderPrecisionFormat(_.VERTEX_SHADER,_.HIGH_FLOAT).precision>0&&_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.HIGH_FLOAT).precision>0)return"highp";ve="mediump"}return ve==="mediump"&&_.getShaderPrecisionFormat(_.VERTEX_SHADER,_.MEDIUM_FLOAT).precision>0&&_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let I=v.precision!==void 0?v.precision:"highp";const z=G(I);z!==I&&(console.warn("THREE.WebGLRenderer:",I,"not supported, using",z,"instead."),I=z);const H=v.logarithmicDepthBuffer===!0,Y=v.reversedDepthBuffer===!0&&d.has("EXT_clip_control"),ee=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),ie=_.getParameter(_.MAX_VERTEX_TEXTURE_IMAGE_UNITS),oe=_.getParameter(_.MAX_TEXTURE_SIZE),se=_.getParameter(_.MAX_CUBE_MAP_TEXTURE_SIZE),re=_.getParameter(_.MAX_VERTEX_ATTRIBS),fe=_.getParameter(_.MAX_VERTEX_UNIFORM_VECTORS),ue=_.getParameter(_.MAX_VARYING_VECTORS),ge=_.getParameter(_.MAX_FRAGMENT_UNIFORM_VECTORS),ye=ie>0,be=_.getParameter(_.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:w,getMaxPrecision:G,textureFormatReadable:T,textureTypeReadable:R,precision:I,logarithmicDepthBuffer:H,reversedDepthBuffer:Y,maxTextures:ee,maxVertexTextures:ie,maxTextureSize:oe,maxCubemapSize:se,maxAttributes:re,maxVertexUniforms:fe,maxVaryings:ue,maxFragmentUniforms:ge,vertexTextures:ye,maxSamples:be}}function WebGLClipping(_){const d=this;let v=null,A=0,C=!1,w=!1;const T=new Plane,R=new Matrix3,G={value:null,needsUpdate:!1};this.uniform=G,this.numPlanes=0,this.numIntersection=0,this.init=function(H,Y){const ee=H.length!==0||Y||A!==0||C;return C=Y,A=H.length,ee},this.beginShadows=function(){w=!0,z(null)},this.endShadows=function(){w=!1},this.setGlobalState=function(H,Y){v=z(H,Y,0)},this.setState=function(H,Y,ee){const ie=H.clippingPlanes,oe=H.clipIntersection,se=H.clipShadows,re=_.get(H);if(!C||ie===null||ie.length===0||w&&!se)w?z(null):I();else{const fe=w?0:A,ue=fe*4;let ge=re.clippingState||null;G.value=ge,ge=z(ie,Y,ue,ee);for(let ye=0;ye!==ue;++ye)ge[ye]=v[ye];re.clippingState=ge,this.numIntersection=oe?this.numPlanes:0,this.numPlanes+=fe}};function I(){G.value!==v&&(G.value=v,G.needsUpdate=A>0),d.numPlanes=A,d.numIntersection=0}function z(H,Y,ee,ie){const oe=H!==null?H.length:0;let se=null;if(oe!==0){if(se=G.value,ie!==!0||se===null){const re=ee+oe*4,fe=Y.matrixWorldInverse;R.getNormalMatrix(fe),(se===null||se.length<re)&&(se=new Float32Array(re));for(let ue=0,ge=ee;ue!==oe;++ue,ge+=4)T.copy(H[ue]).applyMatrix4(fe,R),T.normal.toArray(se,ge),se[ge+3]=T.constant}G.value=se,G.needsUpdate=!0}return d.numPlanes=oe,d.numIntersection=0,se}}function WebGLCubeMaps(_){let d=new WeakMap;function v(T,R){return R===EquirectangularReflectionMapping?T.mapping=CubeReflectionMapping:R===EquirectangularRefractionMapping&&(T.mapping=CubeRefractionMapping),T}function A(T){if(T&&T.isTexture){const R=T.mapping;if(R===EquirectangularReflectionMapping||R===EquirectangularRefractionMapping)if(d.has(T)){const G=d.get(T).texture;return v(G,T.mapping)}else{const G=T.image;if(G&&G.height>0){const I=new WebGLCubeRenderTarget(G.height);return I.fromEquirectangularTexture(_,T),d.set(T,I),T.addEventListener("dispose",C),v(I.texture,T.mapping)}else return null}}return T}function C(T){const R=T.target;R.removeEventListener("dispose",C);const G=d.get(R);G!==void 0&&(d.delete(R),G.dispose())}function w(){d=new WeakMap}return{get:A,dispose:w}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)],_origin=new Vector3;class PMREMGenerator{constructor(d){this._renderer=d,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(d,v=0,A=.1,C=100,w={}){const{size:T=256,position:R=_origin}=w;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(T);const G=this._allocateTargets();return G.depthBuffer=!0,this._sceneToCubeUV(d,A,C,G,R),v>0&&this._blur(G,0,0,v),this._applyPMREM(G),this._cleanup(G),G}fromEquirectangular(d,v=null){return this._fromTexture(d,v)}fromCubemap(d,v=null){return this._fromTexture(d,v)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(d){this._lodMax=Math.floor(Math.log2(d)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let d=0;d<this._lodPlanes.length;d++)this._lodPlanes[d].dispose()}_cleanup(d){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,d.scissorTest=!1,_setViewport(d,0,0,d.width,d.height)}_fromTexture(d,v){d.mapping===CubeReflectionMapping||d.mapping===CubeRefractionMapping?this._setSize(d.image.length===0?16:d.image[0].width||d.image[0].image.width):this._setSize(d.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const A=v||this._allocateTargets();return this._textureToCubeUV(d,A),this._applyPMREM(A),this._cleanup(A),A}_allocateTargets(){const d=3*Math.max(this._cubeSize,112),v=4*this._cubeSize,A={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace$1,depthBuffer:!1},C=_createRenderTarget(d,v,A);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==d||this._pingPongRenderTarget.height!==v){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(d,v,A);const{_lodMax:w}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(w)),this._blurMaterial=_getBlurShader(w,d,v)}return C}_compileMaterial(d){const v=new Mesh(this._lodPlanes[0],d);this._renderer.compile(v,_flatCamera)}_sceneToCubeUV(d,v,A,C,w){const G=new PerspectiveCamera(90,1,v,A),I=[1,-1,1,1,1,1],z=[1,1,1,-1,-1,-1],H=this._renderer,Y=H.autoClear,ee=H.toneMapping;H.getClearColor(_clearColor),H.toneMapping=NoToneMapping,H.autoClear=!1,H.state.buffers.depth.getReversed()&&(H.setRenderTarget(C),H.clearDepth(),H.setRenderTarget(null));const oe=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),se=new Mesh(new BoxGeometry,oe);let re=!1;const fe=d.background;fe?fe.isColor&&(oe.color.copy(fe),d.background=null,re=!0):(oe.color.copy(_clearColor),re=!0);for(let ue=0;ue<6;ue++){const ge=ue%3;ge===0?(G.up.set(0,I[ue],0),G.position.set(w.x,w.y,w.z),G.lookAt(w.x+z[ue],w.y,w.z)):ge===1?(G.up.set(0,0,I[ue]),G.position.set(w.x,w.y,w.z),G.lookAt(w.x,w.y+z[ue],w.z)):(G.up.set(0,I[ue],0),G.position.set(w.x,w.y,w.z),G.lookAt(w.x,w.y,w.z+z[ue]));const ye=this._cubeSize;_setViewport(C,ge*ye,ue>2?ye:0,ye,ye),H.setRenderTarget(C),re&&H.render(se,G),H.render(d,G)}se.geometry.dispose(),se.material.dispose(),H.toneMapping=ee,H.autoClear=Y,d.background=fe}_textureToCubeUV(d,v){const A=this._renderer,C=d.mapping===CubeReflectionMapping||d.mapping===CubeRefractionMapping;C?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=d.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const w=C?this._cubemapMaterial:this._equirectMaterial,T=new Mesh(this._lodPlanes[0],w),R=w.uniforms;R.envMap.value=d;const G=this._cubeSize;_setViewport(v,0,0,3*G,2*G),A.setRenderTarget(v),A.render(T,_flatCamera)}_applyPMREM(d){const v=this._renderer,A=v.autoClear;v.autoClear=!1;const C=this._lodPlanes.length;for(let w=1;w<C;w++){const T=Math.sqrt(this._sigmas[w]*this._sigmas[w]-this._sigmas[w-1]*this._sigmas[w-1]),R=_axisDirections[(C-w-1)%_axisDirections.length];this._blur(d,w-1,w,T,R)}v.autoClear=A}_blur(d,v,A,C,w){const T=this._pingPongRenderTarget;this._halfBlur(d,T,v,A,C,"latitudinal",w),this._halfBlur(T,d,A,A,C,"longitudinal",w)}_halfBlur(d,v,A,C,w,T,R){const G=this._renderer,I=this._blurMaterial;T!=="latitudinal"&&T!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const z=3,H=new Mesh(this._lodPlanes[C],I),Y=I.uniforms,ee=this._sizeLods[A]-1,ie=isFinite(w)?Math.PI/(2*ee):2*Math.PI/(2*MAX_SAMPLES-1),oe=w/ie,se=isFinite(w)?1+Math.floor(z*oe):MAX_SAMPLES;se>MAX_SAMPLES&&console.warn(`sigmaRadians, ${w}, is too large and will clip, as it requested ${se} samples when the maximum is set to ${MAX_SAMPLES}`);const re=[];let fe=0;for(let ve=0;ve<MAX_SAMPLES;++ve){const Me=ve/oe,we=Math.exp(-Me*Me/2);re.push(we),ve===0?fe+=we:ve<se&&(fe+=2*we)}for(let ve=0;ve<re.length;ve++)re[ve]=re[ve]/fe;Y.envMap.value=d.texture,Y.samples.value=se,Y.weights.value=re,Y.latitudinal.value=T==="latitudinal",R&&(Y.poleAxis.value=R);const{_lodMax:ue}=this;Y.dTheta.value=ie,Y.mipInt.value=ue-A;const ge=this._sizeLods[C],ye=3*ge*(C>ue-LOD_MIN?C-ue+LOD_MIN:0),be=4*(this._cubeSize-ge);_setViewport(v,ye,be,3*ge,2*ge),G.setRenderTarget(v),G.render(H,_flatCamera)}}function _createPlanes(_){const d=[],v=[],A=[];let C=_;const w=_-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let T=0;T<w;T++){const R=Math.pow(2,C);v.push(R);let G=1/R;T>_-LOD_MIN?G=EXTRA_LOD_SIGMA[T-_+LOD_MIN-1]:T===0&&(G=0),A.push(G);const I=1/(R-2),z=-I,H=1+I,Y=[z,z,H,z,H,H,z,z,H,H,z,H],ee=6,ie=6,oe=3,se=2,re=1,fe=new Float32Array(oe*ie*ee),ue=new Float32Array(se*ie*ee),ge=new Float32Array(re*ie*ee);for(let be=0;be<ee;be++){const ve=be%3*2/3-1,Me=be>2?0:-1,we=[ve,Me,0,ve+2/3,Me,0,ve+2/3,Me+1,0,ve,Me,0,ve+2/3,Me+1,0,ve,Me+1,0];fe.set(we,oe*ie*be),ue.set(Y,se*ie*be);const Be=[be,be,be,be,be,be];ge.set(Be,re*ie*be)}const ye=new BufferGeometry;ye.setAttribute("position",new BufferAttribute(fe,oe)),ye.setAttribute("uv",new BufferAttribute(ue,se)),ye.setAttribute("faceIndex",new BufferAttribute(ge,re)),d.push(ye),C>LOD_MIN&&C--}return{lodPlanes:d,sizeLods:v,sigmas:A}}function _createRenderTarget(_,d,v){const A=new WebGLRenderTarget(_,d,v);return A.texture.mapping=CubeUVReflectionMapping,A.texture.name="PMREM.cubeUv",A.scissorTest=!0,A}function _setViewport(_,d,v,A,C){_.viewport.set(d,v,A,C),_.scissor.set(d,v,A,C)}function _getBlurShader(_,d,v){const A=new Float32Array(MAX_SAMPLES),C=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/d,CUBEUV_TEXEL_HEIGHT:1/v,CUBEUV_MAX_MIP:`${_}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:A},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:C}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(_){let d=new WeakMap,v=null;function A(R){if(R&&R.isTexture){const G=R.mapping,I=G===EquirectangularReflectionMapping||G===EquirectangularRefractionMapping,z=G===CubeReflectionMapping||G===CubeRefractionMapping;if(I||z){let H=d.get(R);const Y=H!==void 0?H.texture.pmremVersion:0;if(R.isRenderTargetTexture&&R.pmremVersion!==Y)return v===null&&(v=new PMREMGenerator(_)),H=I?v.fromEquirectangular(R,H):v.fromCubemap(R,H),H.texture.pmremVersion=R.pmremVersion,d.set(R,H),H.texture;if(H!==void 0)return H.texture;{const ee=R.image;return I&&ee&&ee.height>0||z&&ee&&C(ee)?(v===null&&(v=new PMREMGenerator(_)),H=I?v.fromEquirectangular(R):v.fromCubemap(R),H.texture.pmremVersion=R.pmremVersion,d.set(R,H),R.addEventListener("dispose",w),H.texture):null}}}return R}function C(R){let G=0;const I=6;for(let z=0;z<I;z++)R[z]!==void 0&&G++;return G===I}function w(R){const G=R.target;G.removeEventListener("dispose",w);const I=d.get(G);I!==void 0&&(d.delete(G),I.dispose())}function T(){d=new WeakMap,v!==null&&(v.dispose(),v=null)}return{get:A,dispose:T}}function WebGLExtensions(_){const d={};function v(A){if(d[A]!==void 0)return d[A];let C;switch(A){case"WEBGL_depth_texture":C=_.getExtension("WEBGL_depth_texture")||_.getExtension("MOZ_WEBGL_depth_texture")||_.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":C=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":C=_.getExtension("WEBGL_compressed_texture_s3tc")||_.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":C=_.getExtension("WEBGL_compressed_texture_pvrtc")||_.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:C=_.getExtension(A)}return d[A]=C,C}return{has:function(A){return v(A)!==null},init:function(){v("EXT_color_buffer_float"),v("WEBGL_clip_cull_distance"),v("OES_texture_float_linear"),v("EXT_color_buffer_half_float"),v("WEBGL_multisampled_render_to_texture"),v("WEBGL_render_shared_exponent")},get:function(A){const C=v(A);return C===null&&warnOnce("THREE.WebGLRenderer: "+A+" extension not supported."),C}}}function WebGLGeometries(_,d,v,A){const C={},w=new WeakMap;function T(H){const Y=H.target;Y.index!==null&&d.remove(Y.index);for(const ie in Y.attributes)d.remove(Y.attributes[ie]);Y.removeEventListener("dispose",T),delete C[Y.id];const ee=w.get(Y);ee&&(d.remove(ee),w.delete(Y)),A.releaseStatesOfGeometry(Y),Y.isInstancedBufferGeometry===!0&&delete Y._maxInstanceCount,v.memory.geometries--}function R(H,Y){return C[Y.id]===!0||(Y.addEventListener("dispose",T),C[Y.id]=!0,v.memory.geometries++),Y}function G(H){const Y=H.attributes;for(const ee in Y)d.update(Y[ee],_.ARRAY_BUFFER)}function I(H){const Y=[],ee=H.index,ie=H.attributes.position;let oe=0;if(ee!==null){const fe=ee.array;oe=ee.version;for(let ue=0,ge=fe.length;ue<ge;ue+=3){const ye=fe[ue+0],be=fe[ue+1],ve=fe[ue+2];Y.push(ye,be,be,ve,ve,ye)}}else if(ie!==void 0){const fe=ie.array;oe=ie.version;for(let ue=0,ge=fe.length/3-1;ue<ge;ue+=3){const ye=ue+0,be=ue+1,ve=ue+2;Y.push(ye,be,be,ve,ve,ye)}}else return;const se=new(arrayNeedsUint32(Y)?Uint32BufferAttribute:Uint16BufferAttribute)(Y,1);se.version=oe;const re=w.get(H);re&&d.remove(re),w.set(H,se)}function z(H){const Y=w.get(H);if(Y){const ee=H.index;ee!==null&&Y.version<ee.version&&I(H)}else I(H);return w.get(H)}return{get:R,update:G,getWireframeAttribute:z}}function WebGLIndexedBufferRenderer(_,d,v){let A;function C(Y){A=Y}let w,T;function R(Y){w=Y.type,T=Y.bytesPerElement}function G(Y,ee){_.drawElements(A,ee,w,Y*T),v.update(ee,A,1)}function I(Y,ee,ie){ie!==0&&(_.drawElementsInstanced(A,ee,w,Y*T,ie),v.update(ee,A,ie))}function z(Y,ee,ie){if(ie===0)return;d.get("WEBGL_multi_draw").multiDrawElementsWEBGL(A,ee,0,w,Y,0,ie);let se=0;for(let re=0;re<ie;re++)se+=ee[re];v.update(se,A,1)}function H(Y,ee,ie,oe){if(ie===0)return;const se=d.get("WEBGL_multi_draw");if(se===null)for(let re=0;re<Y.length;re++)I(Y[re]/T,ee[re],oe[re]);else{se.multiDrawElementsInstancedWEBGL(A,ee,0,w,Y,0,oe,0,ie);let re=0;for(let fe=0;fe<ie;fe++)re+=ee[fe]*oe[fe];v.update(re,A,1)}}this.setMode=C,this.setIndex=R,this.render=G,this.renderInstances=I,this.renderMultiDraw=z,this.renderMultiDrawInstances=H}function WebGLInfo(_){const d={geometries:0,textures:0},v={frame:0,calls:0,triangles:0,points:0,lines:0};function A(w,T,R){switch(v.calls++,T){case _.TRIANGLES:v.triangles+=R*(w/3);break;case _.LINES:v.lines+=R*(w/2);break;case _.LINE_STRIP:v.lines+=R*(w-1);break;case _.LINE_LOOP:v.lines+=R*w;break;case _.POINTS:v.points+=R*w;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",T);break}}function C(){v.calls=0,v.triangles=0,v.points=0,v.lines=0}return{memory:d,render:v,programs:null,autoReset:!0,reset:C,update:A}}function WebGLMorphtargets(_,d,v){const A=new WeakMap,C=new Vector4;function w(T,R,G){const I=T.morphTargetInfluences,z=R.morphAttributes.position||R.morphAttributes.normal||R.morphAttributes.color,H=z!==void 0?z.length:0;let Y=A.get(R);if(Y===void 0||Y.count!==H){let we=function(){ve.dispose(),A.delete(R),R.removeEventListener("dispose",we)};Y!==void 0&&Y.texture.dispose();const ee=R.morphAttributes.position!==void 0,ie=R.morphAttributes.normal!==void 0,oe=R.morphAttributes.color!==void 0,se=R.morphAttributes.position||[],re=R.morphAttributes.normal||[],fe=R.morphAttributes.color||[];let ue=0;ee===!0&&(ue=1),ie===!0&&(ue=2),oe===!0&&(ue=3);let ge=R.attributes.position.count*ue,ye=1;ge>d.maxTextureSize&&(ye=Math.ceil(ge/d.maxTextureSize),ge=d.maxTextureSize);const be=new Float32Array(ge*ye*4*H),ve=new DataArrayTexture(be,ge,ye,H);ve.type=FloatType,ve.needsUpdate=!0;const Me=ue*4;for(let Be=0;Be<H;Be++){const De=se[Be],Fe=re[Be],Oe=fe[Be],Ge=ge*ye*4*Be;for(let ze=0;ze<De.count;ze++){const je=ze*Me;ee===!0&&(C.fromBufferAttribute(De,ze),be[Ge+je+0]=C.x,be[Ge+je+1]=C.y,be[Ge+je+2]=C.z,be[Ge+je+3]=0),ie===!0&&(C.fromBufferAttribute(Fe,ze),be[Ge+je+4]=C.x,be[Ge+je+5]=C.y,be[Ge+je+6]=C.z,be[Ge+je+7]=0),oe===!0&&(C.fromBufferAttribute(Oe,ze),be[Ge+je+8]=C.x,be[Ge+je+9]=C.y,be[Ge+je+10]=C.z,be[Ge+je+11]=Oe.itemSize===4?C.w:1)}}Y={count:H,texture:ve,size:new Vector2(ge,ye)},A.set(R,Y),R.addEventListener("dispose",we)}if(T.isInstancedMesh===!0&&T.morphTexture!==null)G.getUniforms().setValue(_,"morphTexture",T.morphTexture,v);else{let ee=0;for(let oe=0;oe<I.length;oe++)ee+=I[oe];const ie=R.morphTargetsRelative?1:1-ee;G.getUniforms().setValue(_,"morphTargetBaseInfluence",ie),G.getUniforms().setValue(_,"morphTargetInfluences",I)}G.getUniforms().setValue(_,"morphTargetsTexture",Y.texture,v),G.getUniforms().setValue(_,"morphTargetsTextureSize",Y.size)}return{update:w}}function WebGLObjects(_,d,v,A){let C=new WeakMap;function w(G){const I=A.render.frame,z=G.geometry,H=d.get(G,z);if(C.get(H)!==I&&(d.update(H),C.set(H,I)),G.isInstancedMesh&&(G.hasEventListener("dispose",R)===!1&&G.addEventListener("dispose",R),C.get(G)!==I&&(v.update(G.instanceMatrix,_.ARRAY_BUFFER),G.instanceColor!==null&&v.update(G.instanceColor,_.ARRAY_BUFFER),C.set(G,I))),G.isSkinnedMesh){const Y=G.skeleton;C.get(Y)!==I&&(Y.update(),C.set(Y,I))}return H}function T(){C=new WeakMap}function R(G){const I=G.target;I.removeEventListener("dispose",R),v.remove(I.instanceMatrix),I.instanceColor!==null&&v.remove(I.instanceColor)}return{update:w,dispose:T}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(_,d,v){const A=_[0];if(A<=0||A>0)return _;const C=d*v;let w=arrayCacheF32[C];if(w===void 0&&(w=new Float32Array(C),arrayCacheF32[C]=w),d!==0){A.toArray(w,0);for(let T=1,R=0;T!==d;++T)R+=v,_[T].toArray(w,R)}return w}function arraysEqual(_,d){if(_.length!==d.length)return!1;for(let v=0,A=_.length;v<A;v++)if(_[v]!==d[v])return!1;return!0}function copyArray(_,d){for(let v=0,A=d.length;v<A;v++)_[v]=d[v]}function allocTexUnits(_,d){let v=arrayCacheI32[d];v===void 0&&(v=new Int32Array(d),arrayCacheI32[d]=v);for(let A=0;A!==d;++A)v[A]=_.allocateTextureUnit();return v}function setValueV1f(_,d){const v=this.cache;v[0]!==d&&(_.uniform1f(this.addr,d),v[0]=d)}function setValueV2f(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y)&&(_.uniform2f(this.addr,d.x,d.y),v[0]=d.x,v[1]=d.y);else{if(arraysEqual(v,d))return;_.uniform2fv(this.addr,d),copyArray(v,d)}}function setValueV3f(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y||v[2]!==d.z)&&(_.uniform3f(this.addr,d.x,d.y,d.z),v[0]=d.x,v[1]=d.y,v[2]=d.z);else if(d.r!==void 0)(v[0]!==d.r||v[1]!==d.g||v[2]!==d.b)&&(_.uniform3f(this.addr,d.r,d.g,d.b),v[0]=d.r,v[1]=d.g,v[2]=d.b);else{if(arraysEqual(v,d))return;_.uniform3fv(this.addr,d),copyArray(v,d)}}function setValueV4f(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y||v[2]!==d.z||v[3]!==d.w)&&(_.uniform4f(this.addr,d.x,d.y,d.z,d.w),v[0]=d.x,v[1]=d.y,v[2]=d.z,v[3]=d.w);else{if(arraysEqual(v,d))return;_.uniform4fv(this.addr,d),copyArray(v,d)}}function setValueM2(_,d){const v=this.cache,A=d.elements;if(A===void 0){if(arraysEqual(v,d))return;_.uniformMatrix2fv(this.addr,!1,d),copyArray(v,d)}else{if(arraysEqual(v,A))return;mat2array.set(A),_.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(v,A)}}function setValueM3(_,d){const v=this.cache,A=d.elements;if(A===void 0){if(arraysEqual(v,d))return;_.uniformMatrix3fv(this.addr,!1,d),copyArray(v,d)}else{if(arraysEqual(v,A))return;mat3array.set(A),_.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(v,A)}}function setValueM4(_,d){const v=this.cache,A=d.elements;if(A===void 0){if(arraysEqual(v,d))return;_.uniformMatrix4fv(this.addr,!1,d),copyArray(v,d)}else{if(arraysEqual(v,A))return;mat4array.set(A),_.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(v,A)}}function setValueV1i(_,d){const v=this.cache;v[0]!==d&&(_.uniform1i(this.addr,d),v[0]=d)}function setValueV2i(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y)&&(_.uniform2i(this.addr,d.x,d.y),v[0]=d.x,v[1]=d.y);else{if(arraysEqual(v,d))return;_.uniform2iv(this.addr,d),copyArray(v,d)}}function setValueV3i(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y||v[2]!==d.z)&&(_.uniform3i(this.addr,d.x,d.y,d.z),v[0]=d.x,v[1]=d.y,v[2]=d.z);else{if(arraysEqual(v,d))return;_.uniform3iv(this.addr,d),copyArray(v,d)}}function setValueV4i(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y||v[2]!==d.z||v[3]!==d.w)&&(_.uniform4i(this.addr,d.x,d.y,d.z,d.w),v[0]=d.x,v[1]=d.y,v[2]=d.z,v[3]=d.w);else{if(arraysEqual(v,d))return;_.uniform4iv(this.addr,d),copyArray(v,d)}}function setValueV1ui(_,d){const v=this.cache;v[0]!==d&&(_.uniform1ui(this.addr,d),v[0]=d)}function setValueV2ui(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y)&&(_.uniform2ui(this.addr,d.x,d.y),v[0]=d.x,v[1]=d.y);else{if(arraysEqual(v,d))return;_.uniform2uiv(this.addr,d),copyArray(v,d)}}function setValueV3ui(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y||v[2]!==d.z)&&(_.uniform3ui(this.addr,d.x,d.y,d.z),v[0]=d.x,v[1]=d.y,v[2]=d.z);else{if(arraysEqual(v,d))return;_.uniform3uiv(this.addr,d),copyArray(v,d)}}function setValueV4ui(_,d){const v=this.cache;if(d.x!==void 0)(v[0]!==d.x||v[1]!==d.y||v[2]!==d.z||v[3]!==d.w)&&(_.uniform4ui(this.addr,d.x,d.y,d.z,d.w),v[0]=d.x,v[1]=d.y,v[2]=d.z,v[3]=d.w);else{if(arraysEqual(v,d))return;_.uniform4uiv(this.addr,d),copyArray(v,d)}}function setValueT1(_,d,v){const A=this.cache,C=v.allocateTextureUnit();A[0]!==C&&(_.uniform1i(this.addr,C),A[0]=C);let w;this.type===_.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,w=emptyShadowTexture):w=emptyTexture,v.setTexture2D(d||w,C)}function setValueT3D1(_,d,v){const A=this.cache,C=v.allocateTextureUnit();A[0]!==C&&(_.uniform1i(this.addr,C),A[0]=C),v.setTexture3D(d||empty3dTexture,C)}function setValueT6(_,d,v){const A=this.cache,C=v.allocateTextureUnit();A[0]!==C&&(_.uniform1i(this.addr,C),A[0]=C),v.setTextureCube(d||emptyCubeTexture,C)}function setValueT2DArray1(_,d,v){const A=this.cache,C=v.allocateTextureUnit();A[0]!==C&&(_.uniform1i(this.addr,C),A[0]=C),v.setTexture2DArray(d||emptyArrayTexture,C)}function getSingularSetter(_){switch(_){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(_,d){_.uniform1fv(this.addr,d)}function setValueV2fArray(_,d){const v=flatten(d,this.size,2);_.uniform2fv(this.addr,v)}function setValueV3fArray(_,d){const v=flatten(d,this.size,3);_.uniform3fv(this.addr,v)}function setValueV4fArray(_,d){const v=flatten(d,this.size,4);_.uniform4fv(this.addr,v)}function setValueM2Array(_,d){const v=flatten(d,this.size,4);_.uniformMatrix2fv(this.addr,!1,v)}function setValueM3Array(_,d){const v=flatten(d,this.size,9);_.uniformMatrix3fv(this.addr,!1,v)}function setValueM4Array(_,d){const v=flatten(d,this.size,16);_.uniformMatrix4fv(this.addr,!1,v)}function setValueV1iArray(_,d){_.uniform1iv(this.addr,d)}function setValueV2iArray(_,d){_.uniform2iv(this.addr,d)}function setValueV3iArray(_,d){_.uniform3iv(this.addr,d)}function setValueV4iArray(_,d){_.uniform4iv(this.addr,d)}function setValueV1uiArray(_,d){_.uniform1uiv(this.addr,d)}function setValueV2uiArray(_,d){_.uniform2uiv(this.addr,d)}function setValueV3uiArray(_,d){_.uniform3uiv(this.addr,d)}function setValueV4uiArray(_,d){_.uniform4uiv(this.addr,d)}function setValueT1Array(_,d,v){const A=this.cache,C=d.length,w=allocTexUnits(v,C);arraysEqual(A,w)||(_.uniform1iv(this.addr,w),copyArray(A,w));for(let T=0;T!==C;++T)v.setTexture2D(d[T]||emptyTexture,w[T])}function setValueT3DArray(_,d,v){const A=this.cache,C=d.length,w=allocTexUnits(v,C);arraysEqual(A,w)||(_.uniform1iv(this.addr,w),copyArray(A,w));for(let T=0;T!==C;++T)v.setTexture3D(d[T]||empty3dTexture,w[T])}function setValueT6Array(_,d,v){const A=this.cache,C=d.length,w=allocTexUnits(v,C);arraysEqual(A,w)||(_.uniform1iv(this.addr,w),copyArray(A,w));for(let T=0;T!==C;++T)v.setTextureCube(d[T]||emptyCubeTexture,w[T])}function setValueT2DArrayArray(_,d,v){const A=this.cache,C=d.length,w=allocTexUnits(v,C);arraysEqual(A,w)||(_.uniform1iv(this.addr,w),copyArray(A,w));for(let T=0;T!==C;++T)v.setTexture2DArray(d[T]||emptyArrayTexture,w[T])}function getPureArraySetter(_){switch(_){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(d,v,A){this.id=d,this.addr=A,this.cache=[],this.type=v.type,this.setValue=getSingularSetter(v.type)}}class PureArrayUniform{constructor(d,v,A){this.id=d,this.addr=A,this.cache=[],this.type=v.type,this.size=v.size,this.setValue=getPureArraySetter(v.type)}}class StructuredUniform{constructor(d){this.id=d,this.seq=[],this.map={}}setValue(d,v,A){const C=this.seq;for(let w=0,T=C.length;w!==T;++w){const R=C[w];R.setValue(d,v[R.id],A)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(_,d){_.seq.push(d),_.map[d.id]=d}function parseUniform(_,d,v){const A=_.name,C=A.length;for(RePathPart.lastIndex=0;;){const w=RePathPart.exec(A),T=RePathPart.lastIndex;let R=w[1];const G=w[2]==="]",I=w[3];if(G&&(R=R|0),I===void 0||I==="["&&T+2===C){addUniform(v,I===void 0?new SingleUniform(R,_,d):new PureArrayUniform(R,_,d));break}else{let H=v.map[R];H===void 0&&(H=new StructuredUniform(R),addUniform(v,H)),v=H}}}class WebGLUniforms{constructor(d,v){this.seq=[],this.map={};const A=d.getProgramParameter(v,d.ACTIVE_UNIFORMS);for(let C=0;C<A;++C){const w=d.getActiveUniform(v,C),T=d.getUniformLocation(v,w.name);parseUniform(w,T,this)}}setValue(d,v,A,C){const w=this.map[v];w!==void 0&&w.setValue(d,A,C)}setOptional(d,v,A){const C=v[A];C!==void 0&&this.setValue(d,A,C)}static upload(d,v,A,C){for(let w=0,T=v.length;w!==T;++w){const R=v[w],G=A[R.id];G.needsUpdate!==!1&&R.setValue(d,G.value,C)}}static seqWithValue(d,v){const A=[];for(let C=0,w=d.length;C!==w;++C){const T=d[C];T.id in v&&A.push(T)}return A}}function WebGLShader(_,d,v){const A=_.createShader(d);return _.shaderSource(A,v),_.compileShader(A),A}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(_,d){const v=_.split(`
`),A=[],C=Math.max(d-6,0),w=Math.min(d+6,v.length);for(let T=C;T<w;T++){const R=T+1;A.push(`${R===d?">":" "} ${R}: ${v[T]}`)}return A.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(_){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,_);const d=`mat3( ${_m0.elements.map(v=>v.toFixed(4))} )`;switch(ColorManagement.getTransfer(_)){case LinearTransfer:return[d,"LinearTransferOETF"];case SRGBTransfer:return[d,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",_),[d,"LinearTransferOETF"]}}function getShaderErrors(_,d,v){const A=_.getShaderParameter(d,_.COMPILE_STATUS),w=(_.getShaderInfoLog(d)||"").trim();if(A&&w==="")return"";const T=/ERROR: 0:(\d+)/.exec(w);if(T){const R=parseInt(T[1]);return v.toUpperCase()+`

`+w+`

`+handleSource(_.getShaderSource(d),R)}else return w}function getTexelEncodingFunction(_,d){const v=getEncodingComponents(d);return[`vec4 ${_}( vec4 value ) {`,`	return ${v[1]}( vec4( value.rgb * ${v[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(_,d){let v;switch(d){case LinearToneMapping:v="Linear";break;case ReinhardToneMapping:v="Reinhard";break;case CineonToneMapping:v="Cineon";break;case ACESFilmicToneMapping:v="ACESFilmic";break;case AgXToneMapping:v="AgX";break;case NeutralToneMapping:v="Neutral";break;case CustomToneMapping:v="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",d),v="Linear"}return"vec3 "+_+"( vec3 color ) { return "+v+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const _=_v0.x.toFixed(4),d=_v0.y.toFixed(4),v=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${_}, ${d}, ${v} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(_){return[_.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",_.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(_){const d=[];for(const v in _){const A=_[v];A!==!1&&d.push("#define "+v+" "+A)}return d.join(`
`)}function fetchAttributeLocations(_,d){const v={},A=_.getProgramParameter(d,_.ACTIVE_ATTRIBUTES);for(let C=0;C<A;C++){const w=_.getActiveAttrib(d,C),T=w.name;let R=1;w.type===_.FLOAT_MAT2&&(R=2),w.type===_.FLOAT_MAT3&&(R=3),w.type===_.FLOAT_MAT4&&(R=4),v[T]={type:w.type,location:_.getAttribLocation(d,T),locationSize:R}}return v}function filterEmptyLine(_){return _!==""}function replaceLightNums(_,d){const v=d.numSpotLightShadows+d.numSpotLightMaps-d.numSpotLightShadowsWithMaps;return _.replace(/NUM_DIR_LIGHTS/g,d.numDirLights).replace(/NUM_SPOT_LIGHTS/g,d.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,d.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,v).replace(/NUM_RECT_AREA_LIGHTS/g,d.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,d.numPointLights).replace(/NUM_HEMI_LIGHTS/g,d.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,d.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,d.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,d.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,d.numPointLightShadows)}function replaceClippingPlaneNums(_,d){return _.replace(/NUM_CLIPPING_PLANES/g,d.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,d.numClippingPlanes-d.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(_){return _.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(_,d){let v=ShaderChunk[d];if(v===void 0){const A=shaderChunkMap.get(d);if(A!==void 0)v=ShaderChunk[A],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',d,A);else throw new Error("Can not resolve #include <"+d+">")}return resolveIncludes(v)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(_){return _.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(_,d,v,A){let C="";for(let w=parseInt(d);w<parseInt(v);w++)C+=A.replace(/\[\s*i\s*\]/g,"[ "+w+" ]").replace(/UNROLLED_LOOP_INDEX/g,w);return C}function generatePrecision(_){let d=`precision ${_.precision} float;
	precision ${_.precision} int;
	precision ${_.precision} sampler2D;
	precision ${_.precision} samplerCube;
	precision ${_.precision} sampler3D;
	precision ${_.precision} sampler2DArray;
	precision ${_.precision} sampler2DShadow;
	precision ${_.precision} samplerCubeShadow;
	precision ${_.precision} sampler2DArrayShadow;
	precision ${_.precision} isampler2D;
	precision ${_.precision} isampler3D;
	precision ${_.precision} isamplerCube;
	precision ${_.precision} isampler2DArray;
	precision ${_.precision} usampler2D;
	precision ${_.precision} usampler3D;
	precision ${_.precision} usamplerCube;
	precision ${_.precision} usampler2DArray;
	`;return _.precision==="highp"?d+=`
#define HIGH_PRECISION`:_.precision==="mediump"?d+=`
#define MEDIUM_PRECISION`:_.precision==="lowp"&&(d+=`
#define LOW_PRECISION`),d}function generateShadowMapTypeDefine(_){let d="SHADOWMAP_TYPE_BASIC";return _.shadowMapType===PCFShadowMap?d="SHADOWMAP_TYPE_PCF":_.shadowMapType===PCFSoftShadowMap?d="SHADOWMAP_TYPE_PCF_SOFT":_.shadowMapType===VSMShadowMap&&(d="SHADOWMAP_TYPE_VSM"),d}function generateEnvMapTypeDefine(_){let d="ENVMAP_TYPE_CUBE";if(_.envMap)switch(_.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:d="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:d="ENVMAP_TYPE_CUBE_UV";break}return d}function generateEnvMapModeDefine(_){let d="ENVMAP_MODE_REFLECTION";if(_.envMap)switch(_.envMapMode){case CubeRefractionMapping:d="ENVMAP_MODE_REFRACTION";break}return d}function generateEnvMapBlendingDefine(_){let d="ENVMAP_BLENDING_NONE";if(_.envMap)switch(_.combine){case MultiplyOperation:d="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:d="ENVMAP_BLENDING_MIX";break;case AddOperation:d="ENVMAP_BLENDING_ADD";break}return d}function generateCubeUVSize(_){const d=_.envMapCubeUVHeight;if(d===null)return null;const v=Math.log2(d)-2,A=1/d;return{texelWidth:1/(3*Math.max(Math.pow(2,v),7*16)),texelHeight:A,maxMip:v}}function WebGLProgram(_,d,v,A){const C=_.getContext(),w=v.defines;let T=v.vertexShader,R=v.fragmentShader;const G=generateShadowMapTypeDefine(v),I=generateEnvMapTypeDefine(v),z=generateEnvMapModeDefine(v),H=generateEnvMapBlendingDefine(v),Y=generateCubeUVSize(v),ee=generateVertexExtensions(v),ie=generateDefines(w),oe=C.createProgram();let se,re,fe=v.glslVersion?"#version "+v.glslVersion+`
`:"";v.isRawShaderMaterial?(se=["#define SHADER_TYPE "+v.shaderType,"#define SHADER_NAME "+v.shaderName,ie].filter(filterEmptyLine).join(`
`),se.length>0&&(se+=`
`),re=["#define SHADER_TYPE "+v.shaderType,"#define SHADER_NAME "+v.shaderName,ie].filter(filterEmptyLine).join(`
`),re.length>0&&(re+=`
`)):(se=[generatePrecision(v),"#define SHADER_TYPE "+v.shaderType,"#define SHADER_NAME "+v.shaderName,ie,v.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",v.batching?"#define USE_BATCHING":"",v.batchingColor?"#define USE_BATCHING_COLOR":"",v.instancing?"#define USE_INSTANCING":"",v.instancingColor?"#define USE_INSTANCING_COLOR":"",v.instancingMorph?"#define USE_INSTANCING_MORPH":"",v.useFog&&v.fog?"#define USE_FOG":"",v.useFog&&v.fogExp2?"#define FOG_EXP2":"",v.map?"#define USE_MAP":"",v.envMap?"#define USE_ENVMAP":"",v.envMap?"#define "+z:"",v.lightMap?"#define USE_LIGHTMAP":"",v.aoMap?"#define USE_AOMAP":"",v.bumpMap?"#define USE_BUMPMAP":"",v.normalMap?"#define USE_NORMALMAP":"",v.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",v.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",v.displacementMap?"#define USE_DISPLACEMENTMAP":"",v.emissiveMap?"#define USE_EMISSIVEMAP":"",v.anisotropy?"#define USE_ANISOTROPY":"",v.anisotropyMap?"#define USE_ANISOTROPYMAP":"",v.clearcoatMap?"#define USE_CLEARCOATMAP":"",v.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",v.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",v.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",v.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",v.specularMap?"#define USE_SPECULARMAP":"",v.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",v.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",v.roughnessMap?"#define USE_ROUGHNESSMAP":"",v.metalnessMap?"#define USE_METALNESSMAP":"",v.alphaMap?"#define USE_ALPHAMAP":"",v.alphaHash?"#define USE_ALPHAHASH":"",v.transmission?"#define USE_TRANSMISSION":"",v.transmissionMap?"#define USE_TRANSMISSIONMAP":"",v.thicknessMap?"#define USE_THICKNESSMAP":"",v.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",v.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",v.mapUv?"#define MAP_UV "+v.mapUv:"",v.alphaMapUv?"#define ALPHAMAP_UV "+v.alphaMapUv:"",v.lightMapUv?"#define LIGHTMAP_UV "+v.lightMapUv:"",v.aoMapUv?"#define AOMAP_UV "+v.aoMapUv:"",v.emissiveMapUv?"#define EMISSIVEMAP_UV "+v.emissiveMapUv:"",v.bumpMapUv?"#define BUMPMAP_UV "+v.bumpMapUv:"",v.normalMapUv?"#define NORMALMAP_UV "+v.normalMapUv:"",v.displacementMapUv?"#define DISPLACEMENTMAP_UV "+v.displacementMapUv:"",v.metalnessMapUv?"#define METALNESSMAP_UV "+v.metalnessMapUv:"",v.roughnessMapUv?"#define ROUGHNESSMAP_UV "+v.roughnessMapUv:"",v.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+v.anisotropyMapUv:"",v.clearcoatMapUv?"#define CLEARCOATMAP_UV "+v.clearcoatMapUv:"",v.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+v.clearcoatNormalMapUv:"",v.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+v.clearcoatRoughnessMapUv:"",v.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+v.iridescenceMapUv:"",v.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+v.iridescenceThicknessMapUv:"",v.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+v.sheenColorMapUv:"",v.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+v.sheenRoughnessMapUv:"",v.specularMapUv?"#define SPECULARMAP_UV "+v.specularMapUv:"",v.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+v.specularColorMapUv:"",v.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+v.specularIntensityMapUv:"",v.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+v.transmissionMapUv:"",v.thicknessMapUv?"#define THICKNESSMAP_UV "+v.thicknessMapUv:"",v.vertexTangents&&v.flatShading===!1?"#define USE_TANGENT":"",v.vertexColors?"#define USE_COLOR":"",v.vertexAlphas?"#define USE_COLOR_ALPHA":"",v.vertexUv1s?"#define USE_UV1":"",v.vertexUv2s?"#define USE_UV2":"",v.vertexUv3s?"#define USE_UV3":"",v.pointsUvs?"#define USE_POINTS_UV":"",v.flatShading?"#define FLAT_SHADED":"",v.skinning?"#define USE_SKINNING":"",v.morphTargets?"#define USE_MORPHTARGETS":"",v.morphNormals&&v.flatShading===!1?"#define USE_MORPHNORMALS":"",v.morphColors?"#define USE_MORPHCOLORS":"",v.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+v.morphTextureStride:"",v.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+v.morphTargetsCount:"",v.doubleSided?"#define DOUBLE_SIDED":"",v.flipSided?"#define FLIP_SIDED":"",v.shadowMapEnabled?"#define USE_SHADOWMAP":"",v.shadowMapEnabled?"#define "+G:"",v.sizeAttenuation?"#define USE_SIZEATTENUATION":"",v.numLightProbes>0?"#define USE_LIGHT_PROBES":"",v.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",v.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),re=[generatePrecision(v),"#define SHADER_TYPE "+v.shaderType,"#define SHADER_NAME "+v.shaderName,ie,v.useFog&&v.fog?"#define USE_FOG":"",v.useFog&&v.fogExp2?"#define FOG_EXP2":"",v.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",v.map?"#define USE_MAP":"",v.matcap?"#define USE_MATCAP":"",v.envMap?"#define USE_ENVMAP":"",v.envMap?"#define "+I:"",v.envMap?"#define "+z:"",v.envMap?"#define "+H:"",Y?"#define CUBEUV_TEXEL_WIDTH "+Y.texelWidth:"",Y?"#define CUBEUV_TEXEL_HEIGHT "+Y.texelHeight:"",Y?"#define CUBEUV_MAX_MIP "+Y.maxMip+".0":"",v.lightMap?"#define USE_LIGHTMAP":"",v.aoMap?"#define USE_AOMAP":"",v.bumpMap?"#define USE_BUMPMAP":"",v.normalMap?"#define USE_NORMALMAP":"",v.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",v.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",v.emissiveMap?"#define USE_EMISSIVEMAP":"",v.anisotropy?"#define USE_ANISOTROPY":"",v.anisotropyMap?"#define USE_ANISOTROPYMAP":"",v.clearcoat?"#define USE_CLEARCOAT":"",v.clearcoatMap?"#define USE_CLEARCOATMAP":"",v.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",v.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",v.dispersion?"#define USE_DISPERSION":"",v.iridescence?"#define USE_IRIDESCENCE":"",v.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",v.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",v.specularMap?"#define USE_SPECULARMAP":"",v.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",v.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",v.roughnessMap?"#define USE_ROUGHNESSMAP":"",v.metalnessMap?"#define USE_METALNESSMAP":"",v.alphaMap?"#define USE_ALPHAMAP":"",v.alphaTest?"#define USE_ALPHATEST":"",v.alphaHash?"#define USE_ALPHAHASH":"",v.sheen?"#define USE_SHEEN":"",v.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",v.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",v.transmission?"#define USE_TRANSMISSION":"",v.transmissionMap?"#define USE_TRANSMISSIONMAP":"",v.thicknessMap?"#define USE_THICKNESSMAP":"",v.vertexTangents&&v.flatShading===!1?"#define USE_TANGENT":"",v.vertexColors||v.instancingColor||v.batchingColor?"#define USE_COLOR":"",v.vertexAlphas?"#define USE_COLOR_ALPHA":"",v.vertexUv1s?"#define USE_UV1":"",v.vertexUv2s?"#define USE_UV2":"",v.vertexUv3s?"#define USE_UV3":"",v.pointsUvs?"#define USE_POINTS_UV":"",v.gradientMap?"#define USE_GRADIENTMAP":"",v.flatShading?"#define FLAT_SHADED":"",v.doubleSided?"#define DOUBLE_SIDED":"",v.flipSided?"#define FLIP_SIDED":"",v.shadowMapEnabled?"#define USE_SHADOWMAP":"",v.shadowMapEnabled?"#define "+G:"",v.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",v.numLightProbes>0?"#define USE_LIGHT_PROBES":"",v.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",v.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",v.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",v.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",v.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",v.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",v.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",v.toneMapping):"",v.dithering?"#define DITHERING":"",v.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",v.outputColorSpace),getLuminanceFunction(),v.useDepthPacking?"#define DEPTH_PACKING "+v.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),T=resolveIncludes(T),T=replaceLightNums(T,v),T=replaceClippingPlaneNums(T,v),R=resolveIncludes(R),R=replaceLightNums(R,v),R=replaceClippingPlaneNums(R,v),T=unrollLoops(T),R=unrollLoops(R),v.isRawShaderMaterial!==!0&&(fe=`#version 300 es
`,se=[ee,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+se,re=["#define varying in",v.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",v.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+re);const ue=fe+se+T,ge=fe+re+R,ye=WebGLShader(C,C.VERTEX_SHADER,ue),be=WebGLShader(C,C.FRAGMENT_SHADER,ge);C.attachShader(oe,ye),C.attachShader(oe,be),v.index0AttributeName!==void 0?C.bindAttribLocation(oe,0,v.index0AttributeName):v.morphTargets===!0&&C.bindAttribLocation(oe,0,"position"),C.linkProgram(oe);function ve(De){if(_.debug.checkShaderErrors){const Fe=C.getProgramInfoLog(oe)||"",Oe=C.getShaderInfoLog(ye)||"",Ge=C.getShaderInfoLog(be)||"",ze=Fe.trim(),je=Oe.trim(),He=Ge.trim();let Xe=!0,$e=!0;if(C.getProgramParameter(oe,C.LINK_STATUS)===!1)if(Xe=!1,typeof _.debug.onShaderError=="function")_.debug.onShaderError(C,oe,ye,be);else{const We=getShaderErrors(C,ye,"vertex"),nt=getShaderErrors(C,be,"fragment");console.error("THREE.WebGLProgram: Shader Error "+C.getError()+" - VALIDATE_STATUS "+C.getProgramParameter(oe,C.VALIDATE_STATUS)+`

Material Name: `+De.name+`
Material Type: `+De.type+`

Program Info Log: `+ze+`
`+We+`
`+nt)}else ze!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ze):(je===""||He==="")&&($e=!1);$e&&(De.diagnostics={runnable:Xe,programLog:ze,vertexShader:{log:je,prefix:se},fragmentShader:{log:He,prefix:re}})}C.deleteShader(ye),C.deleteShader(be),Me=new WebGLUniforms(C,oe),we=fetchAttributeLocations(C,oe)}let Me;this.getUniforms=function(){return Me===void 0&&ve(this),Me};let we;this.getAttributes=function(){return we===void 0&&ve(this),we};let Be=v.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Be===!1&&(Be=C.getProgramParameter(oe,COMPLETION_STATUS_KHR)),Be},this.destroy=function(){A.releaseStatesOfProgram(this),C.deleteProgram(oe),this.program=void 0},this.type=v.shaderType,this.name=v.shaderName,this.id=programIdCount++,this.cacheKey=d,this.usedTimes=1,this.program=oe,this.vertexShader=ye,this.fragmentShader=be,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(d){const v=d.vertexShader,A=d.fragmentShader,C=this._getShaderStage(v),w=this._getShaderStage(A),T=this._getShaderCacheForMaterial(d);return T.has(C)===!1&&(T.add(C),C.usedTimes++),T.has(w)===!1&&(T.add(w),w.usedTimes++),this}remove(d){const v=this.materialCache.get(d);for(const A of v)A.usedTimes--,A.usedTimes===0&&this.shaderCache.delete(A.code);return this.materialCache.delete(d),this}getVertexShaderID(d){return this._getShaderStage(d.vertexShader).id}getFragmentShaderID(d){return this._getShaderStage(d.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(d){const v=this.materialCache;let A=v.get(d);return A===void 0&&(A=new Set,v.set(d,A)),A}_getShaderStage(d){const v=this.shaderCache;let A=v.get(d);return A===void 0&&(A=new WebGLShaderStage(d),v.set(d,A)),A}}class WebGLShaderStage{constructor(d){this.id=_id++,this.code=d,this.usedTimes=0}}function WebGLPrograms(_,d,v,A,C,w,T){const R=new Layers,G=new WebGLShaderCache,I=new Set,z=[],H=C.logarithmicDepthBuffer,Y=C.vertexTextures;let ee=C.precision;const ie={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function oe(we){return I.add(we),we===0?"uv":`uv${we}`}function se(we,Be,De,Fe,Oe){const Ge=Fe.fog,ze=Oe.geometry,je=we.isMeshStandardMaterial?Fe.environment:null,He=(we.isMeshStandardMaterial?v:d).get(we.envMap||je),Xe=He&&He.mapping===CubeUVReflectionMapping?He.image.height:null,$e=ie[we.type];we.precision!==null&&(ee=C.getMaxPrecision(we.precision),ee!==we.precision&&console.warn("THREE.WebGLProgram.getParameters:",we.precision,"not supported, using",ee,"instead."));const We=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,nt=We!==void 0?We.length:0;let Qt=0;ze.morphAttributes.position!==void 0&&(Qt=1),ze.morphAttributes.normal!==void 0&&(Qt=2),ze.morphAttributes.color!==void 0&&(Qt=3);let Wt,Bn,Lt,Mn;if($e){const mn=ShaderLib[$e];Wt=mn.vertexShader,Bn=mn.fragmentShader}else Wt=we.vertexShader,Bn=we.fragmentShader,G.update(we),Lt=G.getVertexShaderID(we),Mn=G.getFragmentShaderID(we);const cr=_.getRenderTarget(),In=_.state.buffers.depth.getReversed(),Zn=Oe.isInstancedMesh===!0,$n=Oe.isBatchedMesh===!0,Rn=!!we.map,Dn=!!we.matcap,Gt=!!He,Jn=!!we.aoMap,Nn=!!we.lightMap,Xn=!!we.bumpMap,jn=!!we.normalMap,Un=!!we.displacementMap,bn=!!we.emissiveMap,Kn=!!we.metalnessMap,Qn=!!we.roughnessMap,pr=we.anisotropy>0,fn=we.clearcoat>0,Mt=we.dispersion>0,yn=we.iridescence>0,kn=we.sheen>0,nr=we.transmission>0,dr=pr&&!!we.anisotropyMap,Qr=fn&&!!we.clearcoatMap,Wr=fn&&!!we.clearcoatNormalMap,Gr=fn&&!!we.clearcoatRoughnessMap,Hr=yn&&!!we.iridescenceMap,Kr=yn&&!!we.iridescenceThicknessMap,ti=kn&&!!we.sheenColorMap,Mi=kn&&!!we.sheenRoughnessMap,Ci=!!we.specularMap,oi=!!we.specularColorMap,Ii=!!we.specularIntensityMap,wr=nr&&!!we.transmissionMap,Br=nr&&!!we.thicknessMap,ui=!!we.gradientMap,vi=!!we.alphaMap,qr=we.alphaTest>0,br=!!we.alphaHash,er=!!we.extensions;let Gn=NoToneMapping;we.toneMapped&&(cr===null||cr.isXRRenderTarget===!0)&&(Gn=_.toneMapping);const Er={shaderID:$e,shaderType:we.type,shaderName:we.name,vertexShader:Wt,fragmentShader:Bn,defines:we.defines,customVertexShaderID:Lt,customFragmentShaderID:Mn,isRawShaderMaterial:we.isRawShaderMaterial===!0,glslVersion:we.glslVersion,precision:ee,batching:$n,batchingColor:$n&&Oe._colorsTexture!==null,instancing:Zn,instancingColor:Zn&&Oe.instanceColor!==null,instancingMorph:Zn&&Oe.morphTexture!==null,supportsVertexTextures:Y,outputColorSpace:cr===null?_.outputColorSpace:cr.isXRRenderTarget===!0?cr.texture.colorSpace:LinearSRGBColorSpace$1,alphaToCoverage:!!we.alphaToCoverage,map:Rn,matcap:Dn,envMap:Gt,envMapMode:Gt&&He.mapping,envMapCubeUVHeight:Xe,aoMap:Jn,lightMap:Nn,bumpMap:Xn,normalMap:jn,displacementMap:Y&&Un,emissiveMap:bn,normalMapObjectSpace:jn&&we.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:jn&&we.normalMapType===TangentSpaceNormalMap,metalnessMap:Kn,roughnessMap:Qn,anisotropy:pr,anisotropyMap:dr,clearcoat:fn,clearcoatMap:Qr,clearcoatNormalMap:Wr,clearcoatRoughnessMap:Gr,dispersion:Mt,iridescence:yn,iridescenceMap:Hr,iridescenceThicknessMap:Kr,sheen:kn,sheenColorMap:ti,sheenRoughnessMap:Mi,specularMap:Ci,specularColorMap:oi,specularIntensityMap:Ii,transmission:nr,transmissionMap:wr,thicknessMap:Br,gradientMap:ui,opaque:we.transparent===!1&&we.blending===NormalBlending&&we.alphaToCoverage===!1,alphaMap:vi,alphaTest:qr,alphaHash:br,combine:we.combine,mapUv:Rn&&oe(we.map.channel),aoMapUv:Jn&&oe(we.aoMap.channel),lightMapUv:Nn&&oe(we.lightMap.channel),bumpMapUv:Xn&&oe(we.bumpMap.channel),normalMapUv:jn&&oe(we.normalMap.channel),displacementMapUv:Un&&oe(we.displacementMap.channel),emissiveMapUv:bn&&oe(we.emissiveMap.channel),metalnessMapUv:Kn&&oe(we.metalnessMap.channel),roughnessMapUv:Qn&&oe(we.roughnessMap.channel),anisotropyMapUv:dr&&oe(we.anisotropyMap.channel),clearcoatMapUv:Qr&&oe(we.clearcoatMap.channel),clearcoatNormalMapUv:Wr&&oe(we.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Gr&&oe(we.clearcoatRoughnessMap.channel),iridescenceMapUv:Hr&&oe(we.iridescenceMap.channel),iridescenceThicknessMapUv:Kr&&oe(we.iridescenceThicknessMap.channel),sheenColorMapUv:ti&&oe(we.sheenColorMap.channel),sheenRoughnessMapUv:Mi&&oe(we.sheenRoughnessMap.channel),specularMapUv:Ci&&oe(we.specularMap.channel),specularColorMapUv:oi&&oe(we.specularColorMap.channel),specularIntensityMapUv:Ii&&oe(we.specularIntensityMap.channel),transmissionMapUv:wr&&oe(we.transmissionMap.channel),thicknessMapUv:Br&&oe(we.thicknessMap.channel),alphaMapUv:vi&&oe(we.alphaMap.channel),vertexTangents:!!ze.attributes.tangent&&(jn||pr),vertexColors:we.vertexColors,vertexAlphas:we.vertexColors===!0&&!!ze.attributes.color&&ze.attributes.color.itemSize===4,pointsUvs:Oe.isPoints===!0&&!!ze.attributes.uv&&(Rn||vi),fog:!!Ge,useFog:we.fog===!0,fogExp2:!!Ge&&Ge.isFogExp2,flatShading:we.flatShading===!0&&we.wireframe===!1,sizeAttenuation:we.sizeAttenuation===!0,logarithmicDepthBuffer:H,reversedDepthBuffer:In,skinning:Oe.isSkinnedMesh===!0,morphTargets:ze.morphAttributes.position!==void 0,morphNormals:ze.morphAttributes.normal!==void 0,morphColors:ze.morphAttributes.color!==void 0,morphTargetsCount:nt,morphTextureStride:Qt,numDirLights:Be.directional.length,numPointLights:Be.point.length,numSpotLights:Be.spot.length,numSpotLightMaps:Be.spotLightMap.length,numRectAreaLights:Be.rectArea.length,numHemiLights:Be.hemi.length,numDirLightShadows:Be.directionalShadowMap.length,numPointLightShadows:Be.pointShadowMap.length,numSpotLightShadows:Be.spotShadowMap.length,numSpotLightShadowsWithMaps:Be.numSpotLightShadowsWithMaps,numLightProbes:Be.numLightProbes,numClippingPlanes:T.numPlanes,numClipIntersection:T.numIntersection,dithering:we.dithering,shadowMapEnabled:_.shadowMap.enabled&&De.length>0,shadowMapType:_.shadowMap.type,toneMapping:Gn,decodeVideoTexture:Rn&&we.map.isVideoTexture===!0&&ColorManagement.getTransfer(we.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:bn&&we.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(we.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:we.premultipliedAlpha,doubleSided:we.side===DoubleSide,flipSided:we.side===BackSide,useDepthPacking:we.depthPacking>=0,depthPacking:we.depthPacking||0,index0AttributeName:we.index0AttributeName,extensionClipCullDistance:er&&we.extensions.clipCullDistance===!0&&A.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(er&&we.extensions.multiDraw===!0||$n)&&A.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:A.has("KHR_parallel_shader_compile"),customProgramCacheKey:we.customProgramCacheKey()};return Er.vertexUv1s=I.has(1),Er.vertexUv2s=I.has(2),Er.vertexUv3s=I.has(3),I.clear(),Er}function re(we){const Be=[];if(we.shaderID?Be.push(we.shaderID):(Be.push(we.customVertexShaderID),Be.push(we.customFragmentShaderID)),we.defines!==void 0)for(const De in we.defines)Be.push(De),Be.push(we.defines[De]);return we.isRawShaderMaterial===!1&&(fe(Be,we),ue(Be,we),Be.push(_.outputColorSpace)),Be.push(we.customProgramCacheKey),Be.join()}function fe(we,Be){we.push(Be.precision),we.push(Be.outputColorSpace),we.push(Be.envMapMode),we.push(Be.envMapCubeUVHeight),we.push(Be.mapUv),we.push(Be.alphaMapUv),we.push(Be.lightMapUv),we.push(Be.aoMapUv),we.push(Be.bumpMapUv),we.push(Be.normalMapUv),we.push(Be.displacementMapUv),we.push(Be.emissiveMapUv),we.push(Be.metalnessMapUv),we.push(Be.roughnessMapUv),we.push(Be.anisotropyMapUv),we.push(Be.clearcoatMapUv),we.push(Be.clearcoatNormalMapUv),we.push(Be.clearcoatRoughnessMapUv),we.push(Be.iridescenceMapUv),we.push(Be.iridescenceThicknessMapUv),we.push(Be.sheenColorMapUv),we.push(Be.sheenRoughnessMapUv),we.push(Be.specularMapUv),we.push(Be.specularColorMapUv),we.push(Be.specularIntensityMapUv),we.push(Be.transmissionMapUv),we.push(Be.thicknessMapUv),we.push(Be.combine),we.push(Be.fogExp2),we.push(Be.sizeAttenuation),we.push(Be.morphTargetsCount),we.push(Be.morphAttributeCount),we.push(Be.numDirLights),we.push(Be.numPointLights),we.push(Be.numSpotLights),we.push(Be.numSpotLightMaps),we.push(Be.numHemiLights),we.push(Be.numRectAreaLights),we.push(Be.numDirLightShadows),we.push(Be.numPointLightShadows),we.push(Be.numSpotLightShadows),we.push(Be.numSpotLightShadowsWithMaps),we.push(Be.numLightProbes),we.push(Be.shadowMapType),we.push(Be.toneMapping),we.push(Be.numClippingPlanes),we.push(Be.numClipIntersection),we.push(Be.depthPacking)}function ue(we,Be){R.disableAll(),Be.supportsVertexTextures&&R.enable(0),Be.instancing&&R.enable(1),Be.instancingColor&&R.enable(2),Be.instancingMorph&&R.enable(3),Be.matcap&&R.enable(4),Be.envMap&&R.enable(5),Be.normalMapObjectSpace&&R.enable(6),Be.normalMapTangentSpace&&R.enable(7),Be.clearcoat&&R.enable(8),Be.iridescence&&R.enable(9),Be.alphaTest&&R.enable(10),Be.vertexColors&&R.enable(11),Be.vertexAlphas&&R.enable(12),Be.vertexUv1s&&R.enable(13),Be.vertexUv2s&&R.enable(14),Be.vertexUv3s&&R.enable(15),Be.vertexTangents&&R.enable(16),Be.anisotropy&&R.enable(17),Be.alphaHash&&R.enable(18),Be.batching&&R.enable(19),Be.dispersion&&R.enable(20),Be.batchingColor&&R.enable(21),Be.gradientMap&&R.enable(22),we.push(R.mask),R.disableAll(),Be.fog&&R.enable(0),Be.useFog&&R.enable(1),Be.flatShading&&R.enable(2),Be.logarithmicDepthBuffer&&R.enable(3),Be.reversedDepthBuffer&&R.enable(4),Be.skinning&&R.enable(5),Be.morphTargets&&R.enable(6),Be.morphNormals&&R.enable(7),Be.morphColors&&R.enable(8),Be.premultipliedAlpha&&R.enable(9),Be.shadowMapEnabled&&R.enable(10),Be.doubleSided&&R.enable(11),Be.flipSided&&R.enable(12),Be.useDepthPacking&&R.enable(13),Be.dithering&&R.enable(14),Be.transmission&&R.enable(15),Be.sheen&&R.enable(16),Be.opaque&&R.enable(17),Be.pointsUvs&&R.enable(18),Be.decodeVideoTexture&&R.enable(19),Be.decodeVideoTextureEmissive&&R.enable(20),Be.alphaToCoverage&&R.enable(21),we.push(R.mask)}function ge(we){const Be=ie[we.type];let De;if(Be){const Fe=ShaderLib[Be];De=UniformsUtils.clone(Fe.uniforms)}else De=we.uniforms;return De}function ye(we,Be){let De;for(let Fe=0,Oe=z.length;Fe<Oe;Fe++){const Ge=z[Fe];if(Ge.cacheKey===Be){De=Ge,++De.usedTimes;break}}return De===void 0&&(De=new WebGLProgram(_,Be,we,w),z.push(De)),De}function be(we){if(--we.usedTimes===0){const Be=z.indexOf(we);z[Be]=z[z.length-1],z.pop(),we.destroy()}}function ve(we){G.remove(we)}function Me(){G.dispose()}return{getParameters:se,getProgramCacheKey:re,getUniforms:ge,acquireProgram:ye,releaseProgram:be,releaseShaderCache:ve,programs:z,dispose:Me}}function WebGLProperties(){let _=new WeakMap;function d(T){return _.has(T)}function v(T){let R=_.get(T);return R===void 0&&(R={},_.set(T,R)),R}function A(T){_.delete(T)}function C(T,R,G){_.get(T)[R]=G}function w(){_=new WeakMap}return{has:d,get:v,remove:A,update:C,dispose:w}}function painterSortStable(_,d){return _.groupOrder!==d.groupOrder?_.groupOrder-d.groupOrder:_.renderOrder!==d.renderOrder?_.renderOrder-d.renderOrder:_.material.id!==d.material.id?_.material.id-d.material.id:_.z!==d.z?_.z-d.z:_.id-d.id}function reversePainterSortStable(_,d){return _.groupOrder!==d.groupOrder?_.groupOrder-d.groupOrder:_.renderOrder!==d.renderOrder?_.renderOrder-d.renderOrder:_.z!==d.z?d.z-_.z:_.id-d.id}function WebGLRenderList(){const _=[];let d=0;const v=[],A=[],C=[];function w(){d=0,v.length=0,A.length=0,C.length=0}function T(H,Y,ee,ie,oe,se){let re=_[d];return re===void 0?(re={id:H.id,object:H,geometry:Y,material:ee,groupOrder:ie,renderOrder:H.renderOrder,z:oe,group:se},_[d]=re):(re.id=H.id,re.object=H,re.geometry=Y,re.material=ee,re.groupOrder=ie,re.renderOrder=H.renderOrder,re.z=oe,re.group=se),d++,re}function R(H,Y,ee,ie,oe,se){const re=T(H,Y,ee,ie,oe,se);ee.transmission>0?A.push(re):ee.transparent===!0?C.push(re):v.push(re)}function G(H,Y,ee,ie,oe,se){const re=T(H,Y,ee,ie,oe,se);ee.transmission>0?A.unshift(re):ee.transparent===!0?C.unshift(re):v.unshift(re)}function I(H,Y){v.length>1&&v.sort(H||painterSortStable),A.length>1&&A.sort(Y||reversePainterSortStable),C.length>1&&C.sort(Y||reversePainterSortStable)}function z(){for(let H=d,Y=_.length;H<Y;H++){const ee=_[H];if(ee.id===null)break;ee.id=null,ee.object=null,ee.geometry=null,ee.material=null,ee.group=null}}return{opaque:v,transmissive:A,transparent:C,init:w,push:R,unshift:G,finish:z,sort:I}}function WebGLRenderLists(){let _=new WeakMap;function d(A,C){const w=_.get(A);let T;return w===void 0?(T=new WebGLRenderList,_.set(A,[T])):C>=w.length?(T=new WebGLRenderList,w.push(T)):T=w[C],T}function v(){_=new WeakMap}return{get:d,dispose:v}}function UniformsCache(){const _={};return{get:function(d){if(_[d.id]!==void 0)return _[d.id];let v;switch(d.type){case"DirectionalLight":v={direction:new Vector3,color:new Color};break;case"SpotLight":v={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":v={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":v={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":v={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return _[d.id]=v,v}}}function ShadowUniformsCache(){const _={};return{get:function(d){if(_[d.id]!==void 0)return _[d.id];let v;switch(d.type){case"DirectionalLight":v={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":v={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":v={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return _[d.id]=v,v}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(_,d){return(d.castShadow?2:0)-(_.castShadow?2:0)+(d.map?1:0)-(_.map?1:0)}function WebGLLights(_){const d=new UniformsCache,v=ShadowUniformsCache(),A={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let I=0;I<9;I++)A.probe.push(new Vector3);const C=new Vector3,w=new Matrix4,T=new Matrix4;function R(I){let z=0,H=0,Y=0;for(let we=0;we<9;we++)A.probe[we].set(0,0,0);let ee=0,ie=0,oe=0,se=0,re=0,fe=0,ue=0,ge=0,ye=0,be=0,ve=0;I.sort(shadowCastingAndTexturingLightsFirst);for(let we=0,Be=I.length;we<Be;we++){const De=I[we],Fe=De.color,Oe=De.intensity,Ge=De.distance,ze=De.shadow&&De.shadow.map?De.shadow.map.texture:null;if(De.isAmbientLight)z+=Fe.r*Oe,H+=Fe.g*Oe,Y+=Fe.b*Oe;else if(De.isLightProbe){for(let je=0;je<9;je++)A.probe[je].addScaledVector(De.sh.coefficients[je],Oe);ve++}else if(De.isDirectionalLight){const je=d.get(De);if(je.color.copy(De.color).multiplyScalar(De.intensity),De.castShadow){const He=De.shadow,Xe=v.get(De);Xe.shadowIntensity=He.intensity,Xe.shadowBias=He.bias,Xe.shadowNormalBias=He.normalBias,Xe.shadowRadius=He.radius,Xe.shadowMapSize=He.mapSize,A.directionalShadow[ee]=Xe,A.directionalShadowMap[ee]=ze,A.directionalShadowMatrix[ee]=De.shadow.matrix,fe++}A.directional[ee]=je,ee++}else if(De.isSpotLight){const je=d.get(De);je.position.setFromMatrixPosition(De.matrixWorld),je.color.copy(Fe).multiplyScalar(Oe),je.distance=Ge,je.coneCos=Math.cos(De.angle),je.penumbraCos=Math.cos(De.angle*(1-De.penumbra)),je.decay=De.decay,A.spot[oe]=je;const He=De.shadow;if(De.map&&(A.spotLightMap[ye]=De.map,ye++,He.updateMatrices(De),De.castShadow&&be++),A.spotLightMatrix[oe]=He.matrix,De.castShadow){const Xe=v.get(De);Xe.shadowIntensity=He.intensity,Xe.shadowBias=He.bias,Xe.shadowNormalBias=He.normalBias,Xe.shadowRadius=He.radius,Xe.shadowMapSize=He.mapSize,A.spotShadow[oe]=Xe,A.spotShadowMap[oe]=ze,ge++}oe++}else if(De.isRectAreaLight){const je=d.get(De);je.color.copy(Fe).multiplyScalar(Oe),je.halfWidth.set(De.width*.5,0,0),je.halfHeight.set(0,De.height*.5,0),A.rectArea[se]=je,se++}else if(De.isPointLight){const je=d.get(De);if(je.color.copy(De.color).multiplyScalar(De.intensity),je.distance=De.distance,je.decay=De.decay,De.castShadow){const He=De.shadow,Xe=v.get(De);Xe.shadowIntensity=He.intensity,Xe.shadowBias=He.bias,Xe.shadowNormalBias=He.normalBias,Xe.shadowRadius=He.radius,Xe.shadowMapSize=He.mapSize,Xe.shadowCameraNear=He.camera.near,Xe.shadowCameraFar=He.camera.far,A.pointShadow[ie]=Xe,A.pointShadowMap[ie]=ze,A.pointShadowMatrix[ie]=De.shadow.matrix,ue++}A.point[ie]=je,ie++}else if(De.isHemisphereLight){const je=d.get(De);je.skyColor.copy(De.color).multiplyScalar(Oe),je.groundColor.copy(De.groundColor).multiplyScalar(Oe),A.hemi[re]=je,re++}}se>0&&(_.has("OES_texture_float_linear")===!0?(A.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,A.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(A.rectAreaLTC1=UniformsLib.LTC_HALF_1,A.rectAreaLTC2=UniformsLib.LTC_HALF_2)),A.ambient[0]=z,A.ambient[1]=H,A.ambient[2]=Y;const Me=A.hash;(Me.directionalLength!==ee||Me.pointLength!==ie||Me.spotLength!==oe||Me.rectAreaLength!==se||Me.hemiLength!==re||Me.numDirectionalShadows!==fe||Me.numPointShadows!==ue||Me.numSpotShadows!==ge||Me.numSpotMaps!==ye||Me.numLightProbes!==ve)&&(A.directional.length=ee,A.spot.length=oe,A.rectArea.length=se,A.point.length=ie,A.hemi.length=re,A.directionalShadow.length=fe,A.directionalShadowMap.length=fe,A.pointShadow.length=ue,A.pointShadowMap.length=ue,A.spotShadow.length=ge,A.spotShadowMap.length=ge,A.directionalShadowMatrix.length=fe,A.pointShadowMatrix.length=ue,A.spotLightMatrix.length=ge+ye-be,A.spotLightMap.length=ye,A.numSpotLightShadowsWithMaps=be,A.numLightProbes=ve,Me.directionalLength=ee,Me.pointLength=ie,Me.spotLength=oe,Me.rectAreaLength=se,Me.hemiLength=re,Me.numDirectionalShadows=fe,Me.numPointShadows=ue,Me.numSpotShadows=ge,Me.numSpotMaps=ye,Me.numLightProbes=ve,A.version=nextVersion++)}function G(I,z){let H=0,Y=0,ee=0,ie=0,oe=0;const se=z.matrixWorldInverse;for(let re=0,fe=I.length;re<fe;re++){const ue=I[re];if(ue.isDirectionalLight){const ge=A.directional[H];ge.direction.setFromMatrixPosition(ue.matrixWorld),C.setFromMatrixPosition(ue.target.matrixWorld),ge.direction.sub(C),ge.direction.transformDirection(se),H++}else if(ue.isSpotLight){const ge=A.spot[ee];ge.position.setFromMatrixPosition(ue.matrixWorld),ge.position.applyMatrix4(se),ge.direction.setFromMatrixPosition(ue.matrixWorld),C.setFromMatrixPosition(ue.target.matrixWorld),ge.direction.sub(C),ge.direction.transformDirection(se),ee++}else if(ue.isRectAreaLight){const ge=A.rectArea[ie];ge.position.setFromMatrixPosition(ue.matrixWorld),ge.position.applyMatrix4(se),T.identity(),w.copy(ue.matrixWorld),w.premultiply(se),T.extractRotation(w),ge.halfWidth.set(ue.width*.5,0,0),ge.halfHeight.set(0,ue.height*.5,0),ge.halfWidth.applyMatrix4(T),ge.halfHeight.applyMatrix4(T),ie++}else if(ue.isPointLight){const ge=A.point[Y];ge.position.setFromMatrixPosition(ue.matrixWorld),ge.position.applyMatrix4(se),Y++}else if(ue.isHemisphereLight){const ge=A.hemi[oe];ge.direction.setFromMatrixPosition(ue.matrixWorld),ge.direction.transformDirection(se),oe++}}}return{setup:R,setupView:G,state:A}}function WebGLRenderState(_){const d=new WebGLLights(_),v=[],A=[];function C(z){I.camera=z,v.length=0,A.length=0}function w(z){v.push(z)}function T(z){A.push(z)}function R(){d.setup(v)}function G(z){d.setupView(v,z)}const I={lightsArray:v,shadowsArray:A,camera:null,lights:d,transmissionRenderTarget:{}};return{init:C,state:I,setupLights:R,setupLightsView:G,pushLight:w,pushShadow:T}}function WebGLRenderStates(_){let d=new WeakMap;function v(C,w=0){const T=d.get(C);let R;return T===void 0?(R=new WebGLRenderState(_),d.set(C,[R])):w>=T.length?(R=new WebGLRenderState(_),T.push(R)):R=T[w],R}function A(){d=new WeakMap}return{get:v,dispose:A}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(_,d,v){let A=new Frustum;const C=new Vector2,w=new Vector2,T=new Vector4,R=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),G=new MeshDistanceMaterial,I={},z=v.maxTextureSize,H={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},Y=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),ee=Y.clone();ee.defines.HORIZONTAL_PASS=1;const ie=new BufferGeometry;ie.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const oe=new Mesh(ie,Y),se=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let re=this.type;this.render=function(be,ve,Me){if(se.enabled===!1||se.autoUpdate===!1&&se.needsUpdate===!1||be.length===0)return;const we=_.getRenderTarget(),Be=_.getActiveCubeFace(),De=_.getActiveMipmapLevel(),Fe=_.state;Fe.setBlending(NoBlending),Fe.buffers.depth.getReversed()?Fe.buffers.color.setClear(0,0,0,0):Fe.buffers.color.setClear(1,1,1,1),Fe.buffers.depth.setTest(!0),Fe.setScissorTest(!1);const Oe=re!==VSMShadowMap&&this.type===VSMShadowMap,Ge=re===VSMShadowMap&&this.type!==VSMShadowMap;for(let ze=0,je=be.length;ze<je;ze++){const He=be[ze],Xe=He.shadow;if(Xe===void 0){console.warn("THREE.WebGLShadowMap:",He,"has no shadow.");continue}if(Xe.autoUpdate===!1&&Xe.needsUpdate===!1)continue;C.copy(Xe.mapSize);const $e=Xe.getFrameExtents();if(C.multiply($e),w.copy(Xe.mapSize),(C.x>z||C.y>z)&&(C.x>z&&(w.x=Math.floor(z/$e.x),C.x=w.x*$e.x,Xe.mapSize.x=w.x),C.y>z&&(w.y=Math.floor(z/$e.y),C.y=w.y*$e.y,Xe.mapSize.y=w.y)),Xe.map===null||Oe===!0||Ge===!0){const nt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};Xe.map!==null&&Xe.map.dispose(),Xe.map=new WebGLRenderTarget(C.x,C.y,nt),Xe.map.texture.name=He.name+".shadowMap",Xe.camera.updateProjectionMatrix()}_.setRenderTarget(Xe.map),_.clear();const We=Xe.getViewportCount();for(let nt=0;nt<We;nt++){const Qt=Xe.getViewport(nt);T.set(w.x*Qt.x,w.y*Qt.y,w.x*Qt.z,w.y*Qt.w),Fe.viewport(T),Xe.updateMatrices(He,nt),A=Xe.getFrustum(),ge(ve,Me,Xe.camera,He,this.type)}Xe.isPointLightShadow!==!0&&this.type===VSMShadowMap&&fe(Xe,Me),Xe.needsUpdate=!1}re=this.type,se.needsUpdate=!1,_.setRenderTarget(we,Be,De)};function fe(be,ve){const Me=d.update(oe);Y.defines.VSM_SAMPLES!==be.blurSamples&&(Y.defines.VSM_SAMPLES=be.blurSamples,ee.defines.VSM_SAMPLES=be.blurSamples,Y.needsUpdate=!0,ee.needsUpdate=!0),be.mapPass===null&&(be.mapPass=new WebGLRenderTarget(C.x,C.y)),Y.uniforms.shadow_pass.value=be.map.texture,Y.uniforms.resolution.value=be.mapSize,Y.uniforms.radius.value=be.radius,_.setRenderTarget(be.mapPass),_.clear(),_.renderBufferDirect(ve,null,Me,Y,oe,null),ee.uniforms.shadow_pass.value=be.mapPass.texture,ee.uniforms.resolution.value=be.mapSize,ee.uniforms.radius.value=be.radius,_.setRenderTarget(be.map),_.clear(),_.renderBufferDirect(ve,null,Me,ee,oe,null)}function ue(be,ve,Me,we){let Be=null;const De=Me.isPointLight===!0?be.customDistanceMaterial:be.customDepthMaterial;if(De!==void 0)Be=De;else if(Be=Me.isPointLight===!0?G:R,_.localClippingEnabled&&ve.clipShadows===!0&&Array.isArray(ve.clippingPlanes)&&ve.clippingPlanes.length!==0||ve.displacementMap&&ve.displacementScale!==0||ve.alphaMap&&ve.alphaTest>0||ve.map&&ve.alphaTest>0||ve.alphaToCoverage===!0){const Fe=Be.uuid,Oe=ve.uuid;let Ge=I[Fe];Ge===void 0&&(Ge={},I[Fe]=Ge);let ze=Ge[Oe];ze===void 0&&(ze=Be.clone(),Ge[Oe]=ze,ve.addEventListener("dispose",ye)),Be=ze}if(Be.visible=ve.visible,Be.wireframe=ve.wireframe,we===VSMShadowMap?Be.side=ve.shadowSide!==null?ve.shadowSide:ve.side:Be.side=ve.shadowSide!==null?ve.shadowSide:H[ve.side],Be.alphaMap=ve.alphaMap,Be.alphaTest=ve.alphaToCoverage===!0?.5:ve.alphaTest,Be.map=ve.map,Be.clipShadows=ve.clipShadows,Be.clippingPlanes=ve.clippingPlanes,Be.clipIntersection=ve.clipIntersection,Be.displacementMap=ve.displacementMap,Be.displacementScale=ve.displacementScale,Be.displacementBias=ve.displacementBias,Be.wireframeLinewidth=ve.wireframeLinewidth,Be.linewidth=ve.linewidth,Me.isPointLight===!0&&Be.isMeshDistanceMaterial===!0){const Fe=_.properties.get(Be);Fe.light=Me}return Be}function ge(be,ve,Me,we,Be){if(be.visible===!1)return;if(be.layers.test(ve.layers)&&(be.isMesh||be.isLine||be.isPoints)&&(be.castShadow||be.receiveShadow&&Be===VSMShadowMap)&&(!be.frustumCulled||A.intersectsObject(be))){be.modelViewMatrix.multiplyMatrices(Me.matrixWorldInverse,be.matrixWorld);const Oe=d.update(be),Ge=be.material;if(Array.isArray(Ge)){const ze=Oe.groups;for(let je=0,He=ze.length;je<He;je++){const Xe=ze[je],$e=Ge[Xe.materialIndex];if($e&&$e.visible){const We=ue(be,$e,we,Be);be.onBeforeShadow(_,be,ve,Me,Oe,We,Xe),_.renderBufferDirect(Me,null,Oe,We,be,Xe),be.onAfterShadow(_,be,ve,Me,Oe,We,Xe)}}}else if(Ge.visible){const ze=ue(be,Ge,we,Be);be.onBeforeShadow(_,be,ve,Me,Oe,ze,null),_.renderBufferDirect(Me,null,Oe,ze,be,null),be.onAfterShadow(_,be,ve,Me,Oe,ze,null)}}const Fe=be.children;for(let Oe=0,Ge=Fe.length;Oe<Ge;Oe++)ge(Fe[Oe],ve,Me,we,Be)}function ye(be){be.target.removeEventListener("dispose",ye);for(const Me in I){const we=I[Me],Be=be.target.uuid;Be in we&&(we[Be].dispose(),delete we[Be])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(_,d){function v(){let wr=!1;const Br=new Vector4;let ui=null;const vi=new Vector4(0,0,0,0);return{setMask:function(qr){ui!==qr&&!wr&&(_.colorMask(qr,qr,qr,qr),ui=qr)},setLocked:function(qr){wr=qr},setClear:function(qr,br,er,Gn,Er){Er===!0&&(qr*=Gn,br*=Gn,er*=Gn),Br.set(qr,br,er,Gn),vi.equals(Br)===!1&&(_.clearColor(qr,br,er,Gn),vi.copy(Br))},reset:function(){wr=!1,ui=null,vi.set(-1,0,0,0)}}}function A(){let wr=!1,Br=!1,ui=null,vi=null,qr=null;return{setReversed:function(br){if(Br!==br){const er=d.get("EXT_clip_control");br?er.clipControlEXT(er.LOWER_LEFT_EXT,er.ZERO_TO_ONE_EXT):er.clipControlEXT(er.LOWER_LEFT_EXT,er.NEGATIVE_ONE_TO_ONE_EXT),Br=br;const Gn=qr;qr=null,this.setClear(Gn)}},getReversed:function(){return Br},setTest:function(br){br?cr(_.DEPTH_TEST):In(_.DEPTH_TEST)},setMask:function(br){ui!==br&&!wr&&(_.depthMask(br),ui=br)},setFunc:function(br){if(Br&&(br=reversedFuncs[br]),vi!==br){switch(br){case NeverDepth:_.depthFunc(_.NEVER);break;case AlwaysDepth:_.depthFunc(_.ALWAYS);break;case LessDepth:_.depthFunc(_.LESS);break;case LessEqualDepth:_.depthFunc(_.LEQUAL);break;case EqualDepth:_.depthFunc(_.EQUAL);break;case GreaterEqualDepth:_.depthFunc(_.GEQUAL);break;case GreaterDepth:_.depthFunc(_.GREATER);break;case NotEqualDepth:_.depthFunc(_.NOTEQUAL);break;default:_.depthFunc(_.LEQUAL)}vi=br}},setLocked:function(br){wr=br},setClear:function(br){qr!==br&&(Br&&(br=1-br),_.clearDepth(br),qr=br)},reset:function(){wr=!1,ui=null,vi=null,qr=null,Br=!1}}}function C(){let wr=!1,Br=null,ui=null,vi=null,qr=null,br=null,er=null,Gn=null,Er=null;return{setTest:function(mn){wr||(mn?cr(_.STENCIL_TEST):In(_.STENCIL_TEST))},setMask:function(mn){Br!==mn&&!wr&&(_.stencilMask(mn),Br=mn)},setFunc:function(mn,tr,vr){(ui!==mn||vi!==tr||qr!==vr)&&(_.stencilFunc(mn,tr,vr),ui=mn,vi=tr,qr=vr)},setOp:function(mn,tr,vr){(br!==mn||er!==tr||Gn!==vr)&&(_.stencilOp(mn,tr,vr),br=mn,er=tr,Gn=vr)},setLocked:function(mn){wr=mn},setClear:function(mn){Er!==mn&&(_.clearStencil(mn),Er=mn)},reset:function(){wr=!1,Br=null,ui=null,vi=null,qr=null,br=null,er=null,Gn=null,Er=null}}}const w=new v,T=new A,R=new C,G=new WeakMap,I=new WeakMap;let z={},H={},Y=new WeakMap,ee=[],ie=null,oe=!1,se=null,re=null,fe=null,ue=null,ge=null,ye=null,be=null,ve=new Color(0,0,0),Me=0,we=!1,Be=null,De=null,Fe=null,Oe=null,Ge=null;const ze=_.getParameter(_.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let je=!1,He=0;const Xe=_.getParameter(_.VERSION);Xe.indexOf("WebGL")!==-1?(He=parseFloat(/^WebGL (\d)/.exec(Xe)[1]),je=He>=1):Xe.indexOf("OpenGL ES")!==-1&&(He=parseFloat(/^OpenGL ES (\d)/.exec(Xe)[1]),je=He>=2);let $e=null,We={};const nt=_.getParameter(_.SCISSOR_BOX),Qt=_.getParameter(_.VIEWPORT),Wt=new Vector4().fromArray(nt),Bn=new Vector4().fromArray(Qt);function Lt(wr,Br,ui,vi){const qr=new Uint8Array(4),br=_.createTexture();_.bindTexture(wr,br),_.texParameteri(wr,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(wr,_.TEXTURE_MAG_FILTER,_.NEAREST);for(let er=0;er<ui;er++)wr===_.TEXTURE_3D||wr===_.TEXTURE_2D_ARRAY?_.texImage3D(Br,0,_.RGBA,1,1,vi,0,_.RGBA,_.UNSIGNED_BYTE,qr):_.texImage2D(Br+er,0,_.RGBA,1,1,0,_.RGBA,_.UNSIGNED_BYTE,qr);return br}const Mn={};Mn[_.TEXTURE_2D]=Lt(_.TEXTURE_2D,_.TEXTURE_2D,1),Mn[_.TEXTURE_CUBE_MAP]=Lt(_.TEXTURE_CUBE_MAP,_.TEXTURE_CUBE_MAP_POSITIVE_X,6),Mn[_.TEXTURE_2D_ARRAY]=Lt(_.TEXTURE_2D_ARRAY,_.TEXTURE_2D_ARRAY,1,1),Mn[_.TEXTURE_3D]=Lt(_.TEXTURE_3D,_.TEXTURE_3D,1,1),w.setClear(0,0,0,1),T.setClear(1),R.setClear(0),cr(_.DEPTH_TEST),T.setFunc(LessEqualDepth),Xn(!1),jn(CullFaceBack),cr(_.CULL_FACE),Jn(NoBlending);function cr(wr){z[wr]!==!0&&(_.enable(wr),z[wr]=!0)}function In(wr){z[wr]!==!1&&(_.disable(wr),z[wr]=!1)}function Zn(wr,Br){return H[wr]!==Br?(_.bindFramebuffer(wr,Br),H[wr]=Br,wr===_.DRAW_FRAMEBUFFER&&(H[_.FRAMEBUFFER]=Br),wr===_.FRAMEBUFFER&&(H[_.DRAW_FRAMEBUFFER]=Br),!0):!1}function $n(wr,Br){let ui=ee,vi=!1;if(wr){ui=Y.get(Br),ui===void 0&&(ui=[],Y.set(Br,ui));const qr=wr.textures;if(ui.length!==qr.length||ui[0]!==_.COLOR_ATTACHMENT0){for(let br=0,er=qr.length;br<er;br++)ui[br]=_.COLOR_ATTACHMENT0+br;ui.length=qr.length,vi=!0}}else ui[0]!==_.BACK&&(ui[0]=_.BACK,vi=!0);vi&&_.drawBuffers(ui)}function Rn(wr){return ie!==wr?(_.useProgram(wr),ie=wr,!0):!1}const Dn={[AddEquation]:_.FUNC_ADD,[SubtractEquation]:_.FUNC_SUBTRACT,[ReverseSubtractEquation]:_.FUNC_REVERSE_SUBTRACT};Dn[MinEquation]=_.MIN,Dn[MaxEquation]=_.MAX;const Gt={[ZeroFactor]:_.ZERO,[OneFactor]:_.ONE,[SrcColorFactor]:_.SRC_COLOR,[SrcAlphaFactor]:_.SRC_ALPHA,[SrcAlphaSaturateFactor]:_.SRC_ALPHA_SATURATE,[DstColorFactor]:_.DST_COLOR,[DstAlphaFactor]:_.DST_ALPHA,[OneMinusSrcColorFactor]:_.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:_.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:_.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:_.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:_.CONSTANT_COLOR,[OneMinusConstantColorFactor]:_.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:_.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:_.ONE_MINUS_CONSTANT_ALPHA};function Jn(wr,Br,ui,vi,qr,br,er,Gn,Er,mn){if(wr===NoBlending){oe===!0&&(In(_.BLEND),oe=!1);return}if(oe===!1&&(cr(_.BLEND),oe=!0),wr!==CustomBlending){if(wr!==se||mn!==we){if((re!==AddEquation||ge!==AddEquation)&&(_.blendEquation(_.FUNC_ADD),re=AddEquation,ge=AddEquation),mn)switch(wr){case NormalBlending:_.blendFuncSeparate(_.ONE,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:_.blendFunc(_.ONE,_.ONE);break;case SubtractiveBlending:_.blendFuncSeparate(_.ZERO,_.ONE_MINUS_SRC_COLOR,_.ZERO,_.ONE);break;case MultiplyBlending:_.blendFuncSeparate(_.DST_COLOR,_.ONE_MINUS_SRC_ALPHA,_.ZERO,_.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",wr);break}else switch(wr){case NormalBlending:_.blendFuncSeparate(_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:_.blendFuncSeparate(_.SRC_ALPHA,_.ONE,_.ONE,_.ONE);break;case SubtractiveBlending:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MultiplyBlending:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",wr);break}fe=null,ue=null,ye=null,be=null,ve.set(0,0,0),Me=0,se=wr,we=mn}return}qr=qr||Br,br=br||ui,er=er||vi,(Br!==re||qr!==ge)&&(_.blendEquationSeparate(Dn[Br],Dn[qr]),re=Br,ge=qr),(ui!==fe||vi!==ue||br!==ye||er!==be)&&(_.blendFuncSeparate(Gt[ui],Gt[vi],Gt[br],Gt[er]),fe=ui,ue=vi,ye=br,be=er),(Gn.equals(ve)===!1||Er!==Me)&&(_.blendColor(Gn.r,Gn.g,Gn.b,Er),ve.copy(Gn),Me=Er),se=wr,we=!1}function Nn(wr,Br){wr.side===DoubleSide?In(_.CULL_FACE):cr(_.CULL_FACE);let ui=wr.side===BackSide;Br&&(ui=!ui),Xn(ui),wr.blending===NormalBlending&&wr.transparent===!1?Jn(NoBlending):Jn(wr.blending,wr.blendEquation,wr.blendSrc,wr.blendDst,wr.blendEquationAlpha,wr.blendSrcAlpha,wr.blendDstAlpha,wr.blendColor,wr.blendAlpha,wr.premultipliedAlpha),T.setFunc(wr.depthFunc),T.setTest(wr.depthTest),T.setMask(wr.depthWrite),w.setMask(wr.colorWrite);const vi=wr.stencilWrite;R.setTest(vi),vi&&(R.setMask(wr.stencilWriteMask),R.setFunc(wr.stencilFunc,wr.stencilRef,wr.stencilFuncMask),R.setOp(wr.stencilFail,wr.stencilZFail,wr.stencilZPass)),bn(wr.polygonOffset,wr.polygonOffsetFactor,wr.polygonOffsetUnits),wr.alphaToCoverage===!0?cr(_.SAMPLE_ALPHA_TO_COVERAGE):In(_.SAMPLE_ALPHA_TO_COVERAGE)}function Xn(wr){Be!==wr&&(wr?_.frontFace(_.CW):_.frontFace(_.CCW),Be=wr)}function jn(wr){wr!==CullFaceNone?(cr(_.CULL_FACE),wr!==De&&(wr===CullFaceBack?_.cullFace(_.BACK):wr===CullFaceFront?_.cullFace(_.FRONT):_.cullFace(_.FRONT_AND_BACK))):In(_.CULL_FACE),De=wr}function Un(wr){wr!==Fe&&(je&&_.lineWidth(wr),Fe=wr)}function bn(wr,Br,ui){wr?(cr(_.POLYGON_OFFSET_FILL),(Oe!==Br||Ge!==ui)&&(_.polygonOffset(Br,ui),Oe=Br,Ge=ui)):In(_.POLYGON_OFFSET_FILL)}function Kn(wr){wr?cr(_.SCISSOR_TEST):In(_.SCISSOR_TEST)}function Qn(wr){wr===void 0&&(wr=_.TEXTURE0+ze-1),$e!==wr&&(_.activeTexture(wr),$e=wr)}function pr(wr,Br,ui){ui===void 0&&($e===null?ui=_.TEXTURE0+ze-1:ui=$e);let vi=We[ui];vi===void 0&&(vi={type:void 0,texture:void 0},We[ui]=vi),(vi.type!==wr||vi.texture!==Br)&&($e!==ui&&(_.activeTexture(ui),$e=ui),_.bindTexture(wr,Br||Mn[wr]),vi.type=wr,vi.texture=Br)}function fn(){const wr=We[$e];wr!==void 0&&wr.type!==void 0&&(_.bindTexture(wr.type,null),wr.type=void 0,wr.texture=void 0)}function Mt(){try{_.compressedTexImage2D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function yn(){try{_.compressedTexImage3D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function kn(){try{_.texSubImage2D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function nr(){try{_.texSubImage3D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function dr(){try{_.compressedTexSubImage2D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function Qr(){try{_.compressedTexSubImage3D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function Wr(){try{_.texStorage2D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function Gr(){try{_.texStorage3D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function Hr(){try{_.texImage2D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function Kr(){try{_.texImage3D(...arguments)}catch(wr){console.error("THREE.WebGLState:",wr)}}function ti(wr){Wt.equals(wr)===!1&&(_.scissor(wr.x,wr.y,wr.z,wr.w),Wt.copy(wr))}function Mi(wr){Bn.equals(wr)===!1&&(_.viewport(wr.x,wr.y,wr.z,wr.w),Bn.copy(wr))}function Ci(wr,Br){let ui=I.get(Br);ui===void 0&&(ui=new WeakMap,I.set(Br,ui));let vi=ui.get(wr);vi===void 0&&(vi=_.getUniformBlockIndex(Br,wr.name),ui.set(wr,vi))}function oi(wr,Br){const vi=I.get(Br).get(wr);G.get(Br)!==vi&&(_.uniformBlockBinding(Br,vi,wr.__bindingPointIndex),G.set(Br,vi))}function Ii(){_.disable(_.BLEND),_.disable(_.CULL_FACE),_.disable(_.DEPTH_TEST),_.disable(_.POLYGON_OFFSET_FILL),_.disable(_.SCISSOR_TEST),_.disable(_.STENCIL_TEST),_.disable(_.SAMPLE_ALPHA_TO_COVERAGE),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ZERO),_.blendFuncSeparate(_.ONE,_.ZERO,_.ONE,_.ZERO),_.blendColor(0,0,0,0),_.colorMask(!0,!0,!0,!0),_.clearColor(0,0,0,0),_.depthMask(!0),_.depthFunc(_.LESS),T.setReversed(!1),_.clearDepth(1),_.stencilMask(4294967295),_.stencilFunc(_.ALWAYS,0,4294967295),_.stencilOp(_.KEEP,_.KEEP,_.KEEP),_.clearStencil(0),_.cullFace(_.BACK),_.frontFace(_.CCW),_.polygonOffset(0,0),_.activeTexture(_.TEXTURE0),_.bindFramebuffer(_.FRAMEBUFFER,null),_.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),_.bindFramebuffer(_.READ_FRAMEBUFFER,null),_.useProgram(null),_.lineWidth(1),_.scissor(0,0,_.canvas.width,_.canvas.height),_.viewport(0,0,_.canvas.width,_.canvas.height),z={},$e=null,We={},H={},Y=new WeakMap,ee=[],ie=null,oe=!1,se=null,re=null,fe=null,ue=null,ge=null,ye=null,be=null,ve=new Color(0,0,0),Me=0,we=!1,Be=null,De=null,Fe=null,Oe=null,Ge=null,Wt.set(0,0,_.canvas.width,_.canvas.height),Bn.set(0,0,_.canvas.width,_.canvas.height),w.reset(),T.reset(),R.reset()}return{buffers:{color:w,depth:T,stencil:R},enable:cr,disable:In,bindFramebuffer:Zn,drawBuffers:$n,useProgram:Rn,setBlending:Jn,setMaterial:Nn,setFlipSided:Xn,setCullFace:jn,setLineWidth:Un,setPolygonOffset:bn,setScissorTest:Kn,activeTexture:Qn,bindTexture:pr,unbindTexture:fn,compressedTexImage2D:Mt,compressedTexImage3D:yn,texImage2D:Hr,texImage3D:Kr,updateUBOMapping:Ci,uniformBlockBinding:oi,texStorage2D:Wr,texStorage3D:Gr,texSubImage2D:kn,texSubImage3D:nr,compressedTexSubImage2D:dr,compressedTexSubImage3D:Qr,scissor:ti,viewport:Mi,reset:Ii}}function WebGLTextures(_,d,v,A,C,w,T){const R=d.has("WEBGL_multisampled_render_to_texture")?d.get("WEBGL_multisampled_render_to_texture"):null,G=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),I=new Vector2,z=new WeakMap;let H;const Y=new WeakMap;let ee=!1;try{ee=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function ie(fn,Mt){return ee?new OffscreenCanvas(fn,Mt):createElementNS("canvas")}function oe(fn,Mt,yn){let kn=1;const nr=pr(fn);if((nr.width>yn||nr.height>yn)&&(kn=yn/Math.max(nr.width,nr.height)),kn<1)if(typeof HTMLImageElement<"u"&&fn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fn instanceof ImageBitmap||typeof VideoFrame<"u"&&fn instanceof VideoFrame){const dr=Math.floor(kn*nr.width),Qr=Math.floor(kn*nr.height);H===void 0&&(H=ie(dr,Qr));const Wr=Mt?ie(dr,Qr):H;return Wr.width=dr,Wr.height=Qr,Wr.getContext("2d").drawImage(fn,0,0,dr,Qr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+nr.width+"x"+nr.height+") to ("+dr+"x"+Qr+")."),Wr}else return"data"in fn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+nr.width+"x"+nr.height+")."),fn;return fn}function se(fn){return fn.generateMipmaps}function re(fn){_.generateMipmap(fn)}function fe(fn){return fn.isWebGLCubeRenderTarget?_.TEXTURE_CUBE_MAP:fn.isWebGL3DRenderTarget?_.TEXTURE_3D:fn.isWebGLArrayRenderTarget||fn.isCompressedArrayTexture?_.TEXTURE_2D_ARRAY:_.TEXTURE_2D}function ue(fn,Mt,yn,kn,nr=!1){if(fn!==null){if(_[fn]!==void 0)return _[fn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fn+"'")}let dr=Mt;if(Mt===_.RED&&(yn===_.FLOAT&&(dr=_.R32F),yn===_.HALF_FLOAT&&(dr=_.R16F),yn===_.UNSIGNED_BYTE&&(dr=_.R8)),Mt===_.RED_INTEGER&&(yn===_.UNSIGNED_BYTE&&(dr=_.R8UI),yn===_.UNSIGNED_SHORT&&(dr=_.R16UI),yn===_.UNSIGNED_INT&&(dr=_.R32UI),yn===_.BYTE&&(dr=_.R8I),yn===_.SHORT&&(dr=_.R16I),yn===_.INT&&(dr=_.R32I)),Mt===_.RG&&(yn===_.FLOAT&&(dr=_.RG32F),yn===_.HALF_FLOAT&&(dr=_.RG16F),yn===_.UNSIGNED_BYTE&&(dr=_.RG8)),Mt===_.RG_INTEGER&&(yn===_.UNSIGNED_BYTE&&(dr=_.RG8UI),yn===_.UNSIGNED_SHORT&&(dr=_.RG16UI),yn===_.UNSIGNED_INT&&(dr=_.RG32UI),yn===_.BYTE&&(dr=_.RG8I),yn===_.SHORT&&(dr=_.RG16I),yn===_.INT&&(dr=_.RG32I)),Mt===_.RGB_INTEGER&&(yn===_.UNSIGNED_BYTE&&(dr=_.RGB8UI),yn===_.UNSIGNED_SHORT&&(dr=_.RGB16UI),yn===_.UNSIGNED_INT&&(dr=_.RGB32UI),yn===_.BYTE&&(dr=_.RGB8I),yn===_.SHORT&&(dr=_.RGB16I),yn===_.INT&&(dr=_.RGB32I)),Mt===_.RGBA_INTEGER&&(yn===_.UNSIGNED_BYTE&&(dr=_.RGBA8UI),yn===_.UNSIGNED_SHORT&&(dr=_.RGBA16UI),yn===_.UNSIGNED_INT&&(dr=_.RGBA32UI),yn===_.BYTE&&(dr=_.RGBA8I),yn===_.SHORT&&(dr=_.RGBA16I),yn===_.INT&&(dr=_.RGBA32I)),Mt===_.RGB&&yn===_.UNSIGNED_INT_5_9_9_9_REV&&(dr=_.RGB9_E5),Mt===_.RGBA){const Qr=nr?LinearTransfer:ColorManagement.getTransfer(kn);yn===_.FLOAT&&(dr=_.RGBA32F),yn===_.HALF_FLOAT&&(dr=_.RGBA16F),yn===_.UNSIGNED_BYTE&&(dr=Qr===SRGBTransfer?_.SRGB8_ALPHA8:_.RGBA8),yn===_.UNSIGNED_SHORT_4_4_4_4&&(dr=_.RGBA4),yn===_.UNSIGNED_SHORT_5_5_5_1&&(dr=_.RGB5_A1)}return(dr===_.R16F||dr===_.R32F||dr===_.RG16F||dr===_.RG32F||dr===_.RGBA16F||dr===_.RGBA32F)&&d.get("EXT_color_buffer_float"),dr}function ge(fn,Mt){let yn;return fn?Mt===null||Mt===UnsignedIntType||Mt===UnsignedInt248Type?yn=_.DEPTH24_STENCIL8:Mt===FloatType?yn=_.DEPTH32F_STENCIL8:Mt===UnsignedShortType&&(yn=_.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Mt===null||Mt===UnsignedIntType||Mt===UnsignedInt248Type?yn=_.DEPTH_COMPONENT24:Mt===FloatType?yn=_.DEPTH_COMPONENT32F:Mt===UnsignedShortType&&(yn=_.DEPTH_COMPONENT16),yn}function ye(fn,Mt){return se(fn)===!0||fn.isFramebufferTexture&&fn.minFilter!==NearestFilter&&fn.minFilter!==LinearFilter?Math.log2(Math.max(Mt.width,Mt.height))+1:fn.mipmaps!==void 0&&fn.mipmaps.length>0?fn.mipmaps.length:fn.isCompressedTexture&&Array.isArray(fn.image)?Mt.mipmaps.length:1}function be(fn){const Mt=fn.target;Mt.removeEventListener("dispose",be),Me(Mt),Mt.isVideoTexture&&z.delete(Mt)}function ve(fn){const Mt=fn.target;Mt.removeEventListener("dispose",ve),Be(Mt)}function Me(fn){const Mt=A.get(fn);if(Mt.__webglInit===void 0)return;const yn=fn.source,kn=Y.get(yn);if(kn){const nr=kn[Mt.__cacheKey];nr.usedTimes--,nr.usedTimes===0&&we(fn),Object.keys(kn).length===0&&Y.delete(yn)}A.remove(fn)}function we(fn){const Mt=A.get(fn);_.deleteTexture(Mt.__webglTexture);const yn=fn.source,kn=Y.get(yn);delete kn[Mt.__cacheKey],T.memory.textures--}function Be(fn){const Mt=A.get(fn);if(fn.depthTexture&&(fn.depthTexture.dispose(),A.remove(fn.depthTexture)),fn.isWebGLCubeRenderTarget)for(let kn=0;kn<6;kn++){if(Array.isArray(Mt.__webglFramebuffer[kn]))for(let nr=0;nr<Mt.__webglFramebuffer[kn].length;nr++)_.deleteFramebuffer(Mt.__webglFramebuffer[kn][nr]);else _.deleteFramebuffer(Mt.__webglFramebuffer[kn]);Mt.__webglDepthbuffer&&_.deleteRenderbuffer(Mt.__webglDepthbuffer[kn])}else{if(Array.isArray(Mt.__webglFramebuffer))for(let kn=0;kn<Mt.__webglFramebuffer.length;kn++)_.deleteFramebuffer(Mt.__webglFramebuffer[kn]);else _.deleteFramebuffer(Mt.__webglFramebuffer);if(Mt.__webglDepthbuffer&&_.deleteRenderbuffer(Mt.__webglDepthbuffer),Mt.__webglMultisampledFramebuffer&&_.deleteFramebuffer(Mt.__webglMultisampledFramebuffer),Mt.__webglColorRenderbuffer)for(let kn=0;kn<Mt.__webglColorRenderbuffer.length;kn++)Mt.__webglColorRenderbuffer[kn]&&_.deleteRenderbuffer(Mt.__webglColorRenderbuffer[kn]);Mt.__webglDepthRenderbuffer&&_.deleteRenderbuffer(Mt.__webglDepthRenderbuffer)}const yn=fn.textures;for(let kn=0,nr=yn.length;kn<nr;kn++){const dr=A.get(yn[kn]);dr.__webglTexture&&(_.deleteTexture(dr.__webglTexture),T.memory.textures--),A.remove(yn[kn])}A.remove(fn)}let De=0;function Fe(){De=0}function Oe(){const fn=De;return fn>=C.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+fn+" texture units while this GPU supports only "+C.maxTextures),De+=1,fn}function Ge(fn){const Mt=[];return Mt.push(fn.wrapS),Mt.push(fn.wrapT),Mt.push(fn.wrapR||0),Mt.push(fn.magFilter),Mt.push(fn.minFilter),Mt.push(fn.anisotropy),Mt.push(fn.internalFormat),Mt.push(fn.format),Mt.push(fn.type),Mt.push(fn.generateMipmaps),Mt.push(fn.premultiplyAlpha),Mt.push(fn.flipY),Mt.push(fn.unpackAlignment),Mt.push(fn.colorSpace),Mt.join()}function ze(fn,Mt){const yn=A.get(fn);if(fn.isVideoTexture&&Kn(fn),fn.isRenderTargetTexture===!1&&fn.isExternalTexture!==!0&&fn.version>0&&yn.__version!==fn.version){const kn=fn.image;if(kn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(kn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Mn(yn,fn,Mt);return}}else fn.isExternalTexture&&(yn.__webglTexture=fn.sourceTexture?fn.sourceTexture:null);v.bindTexture(_.TEXTURE_2D,yn.__webglTexture,_.TEXTURE0+Mt)}function je(fn,Mt){const yn=A.get(fn);if(fn.isRenderTargetTexture===!1&&fn.version>0&&yn.__version!==fn.version){Mn(yn,fn,Mt);return}v.bindTexture(_.TEXTURE_2D_ARRAY,yn.__webglTexture,_.TEXTURE0+Mt)}function He(fn,Mt){const yn=A.get(fn);if(fn.isRenderTargetTexture===!1&&fn.version>0&&yn.__version!==fn.version){Mn(yn,fn,Mt);return}v.bindTexture(_.TEXTURE_3D,yn.__webglTexture,_.TEXTURE0+Mt)}function Xe(fn,Mt){const yn=A.get(fn);if(fn.version>0&&yn.__version!==fn.version){cr(yn,fn,Mt);return}v.bindTexture(_.TEXTURE_CUBE_MAP,yn.__webglTexture,_.TEXTURE0+Mt)}const $e={[RepeatWrapping]:_.REPEAT,[ClampToEdgeWrapping]:_.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:_.MIRRORED_REPEAT},We={[NearestFilter]:_.NEAREST,[NearestMipmapNearestFilter]:_.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:_.NEAREST_MIPMAP_LINEAR,[LinearFilter]:_.LINEAR,[LinearMipmapNearestFilter]:_.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:_.LINEAR_MIPMAP_LINEAR},nt={[NeverCompare]:_.NEVER,[AlwaysCompare]:_.ALWAYS,[LessCompare]:_.LESS,[LessEqualCompare]:_.LEQUAL,[EqualCompare]:_.EQUAL,[GreaterEqualCompare]:_.GEQUAL,[GreaterCompare]:_.GREATER,[NotEqualCompare]:_.NOTEQUAL};function Qt(fn,Mt){if(Mt.type===FloatType&&d.has("OES_texture_float_linear")===!1&&(Mt.magFilter===LinearFilter||Mt.magFilter===LinearMipmapNearestFilter||Mt.magFilter===NearestMipmapLinearFilter||Mt.magFilter===LinearMipmapLinearFilter||Mt.minFilter===LinearFilter||Mt.minFilter===LinearMipmapNearestFilter||Mt.minFilter===NearestMipmapLinearFilter||Mt.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),_.texParameteri(fn,_.TEXTURE_WRAP_S,$e[Mt.wrapS]),_.texParameteri(fn,_.TEXTURE_WRAP_T,$e[Mt.wrapT]),(fn===_.TEXTURE_3D||fn===_.TEXTURE_2D_ARRAY)&&_.texParameteri(fn,_.TEXTURE_WRAP_R,$e[Mt.wrapR]),_.texParameteri(fn,_.TEXTURE_MAG_FILTER,We[Mt.magFilter]),_.texParameteri(fn,_.TEXTURE_MIN_FILTER,We[Mt.minFilter]),Mt.compareFunction&&(_.texParameteri(fn,_.TEXTURE_COMPARE_MODE,_.COMPARE_REF_TO_TEXTURE),_.texParameteri(fn,_.TEXTURE_COMPARE_FUNC,nt[Mt.compareFunction])),d.has("EXT_texture_filter_anisotropic")===!0){if(Mt.magFilter===NearestFilter||Mt.minFilter!==NearestMipmapLinearFilter&&Mt.minFilter!==LinearMipmapLinearFilter||Mt.type===FloatType&&d.has("OES_texture_float_linear")===!1)return;if(Mt.anisotropy>1||A.get(Mt).__currentAnisotropy){const yn=d.get("EXT_texture_filter_anisotropic");_.texParameterf(fn,yn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Mt.anisotropy,C.getMaxAnisotropy())),A.get(Mt).__currentAnisotropy=Mt.anisotropy}}}function Wt(fn,Mt){let yn=!1;fn.__webglInit===void 0&&(fn.__webglInit=!0,Mt.addEventListener("dispose",be));const kn=Mt.source;let nr=Y.get(kn);nr===void 0&&(nr={},Y.set(kn,nr));const dr=Ge(Mt);if(dr!==fn.__cacheKey){nr[dr]===void 0&&(nr[dr]={texture:_.createTexture(),usedTimes:0},T.memory.textures++,yn=!0),nr[dr].usedTimes++;const Qr=nr[fn.__cacheKey];Qr!==void 0&&(nr[fn.__cacheKey].usedTimes--,Qr.usedTimes===0&&we(Mt)),fn.__cacheKey=dr,fn.__webglTexture=nr[dr].texture}return yn}function Bn(fn,Mt,yn){return Math.floor(Math.floor(fn/yn)/Mt)}function Lt(fn,Mt,yn,kn){const dr=fn.updateRanges;if(dr.length===0)v.texSubImage2D(_.TEXTURE_2D,0,0,0,Mt.width,Mt.height,yn,kn,Mt.data);else{dr.sort((Kr,ti)=>Kr.start-ti.start);let Qr=0;for(let Kr=1;Kr<dr.length;Kr++){const ti=dr[Qr],Mi=dr[Kr],Ci=ti.start+ti.count,oi=Bn(Mi.start,Mt.width,4),Ii=Bn(ti.start,Mt.width,4);Mi.start<=Ci+1&&oi===Ii&&Bn(Mi.start+Mi.count-1,Mt.width,4)===oi?ti.count=Math.max(ti.count,Mi.start+Mi.count-ti.start):(++Qr,dr[Qr]=Mi)}dr.length=Qr+1;const Wr=_.getParameter(_.UNPACK_ROW_LENGTH),Gr=_.getParameter(_.UNPACK_SKIP_PIXELS),Hr=_.getParameter(_.UNPACK_SKIP_ROWS);_.pixelStorei(_.UNPACK_ROW_LENGTH,Mt.width);for(let Kr=0,ti=dr.length;Kr<ti;Kr++){const Mi=dr[Kr],Ci=Math.floor(Mi.start/4),oi=Math.ceil(Mi.count/4),Ii=Ci%Mt.width,wr=Math.floor(Ci/Mt.width),Br=oi,ui=1;_.pixelStorei(_.UNPACK_SKIP_PIXELS,Ii),_.pixelStorei(_.UNPACK_SKIP_ROWS,wr),v.texSubImage2D(_.TEXTURE_2D,0,Ii,wr,Br,ui,yn,kn,Mt.data)}fn.clearUpdateRanges(),_.pixelStorei(_.UNPACK_ROW_LENGTH,Wr),_.pixelStorei(_.UNPACK_SKIP_PIXELS,Gr),_.pixelStorei(_.UNPACK_SKIP_ROWS,Hr)}}function Mn(fn,Mt,yn){let kn=_.TEXTURE_2D;(Mt.isDataArrayTexture||Mt.isCompressedArrayTexture)&&(kn=_.TEXTURE_2D_ARRAY),Mt.isData3DTexture&&(kn=_.TEXTURE_3D);const nr=Wt(fn,Mt),dr=Mt.source;v.bindTexture(kn,fn.__webglTexture,_.TEXTURE0+yn);const Qr=A.get(dr);if(dr.version!==Qr.__version||nr===!0){v.activeTexture(_.TEXTURE0+yn);const Wr=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Gr=Mt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Mt.colorSpace),Hr=Mt.colorSpace===NoColorSpace||Wr===Gr?_.NONE:_.BROWSER_DEFAULT_WEBGL;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,Mt.flipY),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mt.premultiplyAlpha),_.pixelStorei(_.UNPACK_ALIGNMENT,Mt.unpackAlignment),_.pixelStorei(_.UNPACK_COLORSPACE_CONVERSION_WEBGL,Hr);let Kr=oe(Mt.image,!1,C.maxTextureSize);Kr=Qn(Mt,Kr);const ti=w.convert(Mt.format,Mt.colorSpace),Mi=w.convert(Mt.type);let Ci=ue(Mt.internalFormat,ti,Mi,Mt.colorSpace,Mt.isVideoTexture);Qt(kn,Mt);let oi;const Ii=Mt.mipmaps,wr=Mt.isVideoTexture!==!0,Br=Qr.__version===void 0||nr===!0,ui=dr.dataReady,vi=ye(Mt,Kr);if(Mt.isDepthTexture)Ci=ge(Mt.format===DepthStencilFormat,Mt.type),Br&&(wr?v.texStorage2D(_.TEXTURE_2D,1,Ci,Kr.width,Kr.height):v.texImage2D(_.TEXTURE_2D,0,Ci,Kr.width,Kr.height,0,ti,Mi,null));else if(Mt.isDataTexture)if(Ii.length>0){wr&&Br&&v.texStorage2D(_.TEXTURE_2D,vi,Ci,Ii[0].width,Ii[0].height);for(let qr=0,br=Ii.length;qr<br;qr++)oi=Ii[qr],wr?ui&&v.texSubImage2D(_.TEXTURE_2D,qr,0,0,oi.width,oi.height,ti,Mi,oi.data):v.texImage2D(_.TEXTURE_2D,qr,Ci,oi.width,oi.height,0,ti,Mi,oi.data);Mt.generateMipmaps=!1}else wr?(Br&&v.texStorage2D(_.TEXTURE_2D,vi,Ci,Kr.width,Kr.height),ui&&Lt(Mt,Kr,ti,Mi)):v.texImage2D(_.TEXTURE_2D,0,Ci,Kr.width,Kr.height,0,ti,Mi,Kr.data);else if(Mt.isCompressedTexture)if(Mt.isCompressedArrayTexture){wr&&Br&&v.texStorage3D(_.TEXTURE_2D_ARRAY,vi,Ci,Ii[0].width,Ii[0].height,Kr.depth);for(let qr=0,br=Ii.length;qr<br;qr++)if(oi=Ii[qr],Mt.format!==RGBAFormat)if(ti!==null)if(wr){if(ui)if(Mt.layerUpdates.size>0){const er=getByteLength(oi.width,oi.height,Mt.format,Mt.type);for(const Gn of Mt.layerUpdates){const Er=oi.data.subarray(Gn*er/oi.data.BYTES_PER_ELEMENT,(Gn+1)*er/oi.data.BYTES_PER_ELEMENT);v.compressedTexSubImage3D(_.TEXTURE_2D_ARRAY,qr,0,0,Gn,oi.width,oi.height,1,ti,Er)}Mt.clearLayerUpdates()}else v.compressedTexSubImage3D(_.TEXTURE_2D_ARRAY,qr,0,0,0,oi.width,oi.height,Kr.depth,ti,oi.data)}else v.compressedTexImage3D(_.TEXTURE_2D_ARRAY,qr,Ci,oi.width,oi.height,Kr.depth,0,oi.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else wr?ui&&v.texSubImage3D(_.TEXTURE_2D_ARRAY,qr,0,0,0,oi.width,oi.height,Kr.depth,ti,Mi,oi.data):v.texImage3D(_.TEXTURE_2D_ARRAY,qr,Ci,oi.width,oi.height,Kr.depth,0,ti,Mi,oi.data)}else{wr&&Br&&v.texStorage2D(_.TEXTURE_2D,vi,Ci,Ii[0].width,Ii[0].height);for(let qr=0,br=Ii.length;qr<br;qr++)oi=Ii[qr],Mt.format!==RGBAFormat?ti!==null?wr?ui&&v.compressedTexSubImage2D(_.TEXTURE_2D,qr,0,0,oi.width,oi.height,ti,oi.data):v.compressedTexImage2D(_.TEXTURE_2D,qr,Ci,oi.width,oi.height,0,oi.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):wr?ui&&v.texSubImage2D(_.TEXTURE_2D,qr,0,0,oi.width,oi.height,ti,Mi,oi.data):v.texImage2D(_.TEXTURE_2D,qr,Ci,oi.width,oi.height,0,ti,Mi,oi.data)}else if(Mt.isDataArrayTexture)if(wr){if(Br&&v.texStorage3D(_.TEXTURE_2D_ARRAY,vi,Ci,Kr.width,Kr.height,Kr.depth),ui)if(Mt.layerUpdates.size>0){const qr=getByteLength(Kr.width,Kr.height,Mt.format,Mt.type);for(const br of Mt.layerUpdates){const er=Kr.data.subarray(br*qr/Kr.data.BYTES_PER_ELEMENT,(br+1)*qr/Kr.data.BYTES_PER_ELEMENT);v.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,br,Kr.width,Kr.height,1,ti,Mi,er)}Mt.clearLayerUpdates()}else v.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,0,Kr.width,Kr.height,Kr.depth,ti,Mi,Kr.data)}else v.texImage3D(_.TEXTURE_2D_ARRAY,0,Ci,Kr.width,Kr.height,Kr.depth,0,ti,Mi,Kr.data);else if(Mt.isData3DTexture)wr?(Br&&v.texStorage3D(_.TEXTURE_3D,vi,Ci,Kr.width,Kr.height,Kr.depth),ui&&v.texSubImage3D(_.TEXTURE_3D,0,0,0,0,Kr.width,Kr.height,Kr.depth,ti,Mi,Kr.data)):v.texImage3D(_.TEXTURE_3D,0,Ci,Kr.width,Kr.height,Kr.depth,0,ti,Mi,Kr.data);else if(Mt.isFramebufferTexture){if(Br)if(wr)v.texStorage2D(_.TEXTURE_2D,vi,Ci,Kr.width,Kr.height);else{let qr=Kr.width,br=Kr.height;for(let er=0;er<vi;er++)v.texImage2D(_.TEXTURE_2D,er,Ci,qr,br,0,ti,Mi,null),qr>>=1,br>>=1}}else if(Ii.length>0){if(wr&&Br){const qr=pr(Ii[0]);v.texStorage2D(_.TEXTURE_2D,vi,Ci,qr.width,qr.height)}for(let qr=0,br=Ii.length;qr<br;qr++)oi=Ii[qr],wr?ui&&v.texSubImage2D(_.TEXTURE_2D,qr,0,0,ti,Mi,oi):v.texImage2D(_.TEXTURE_2D,qr,Ci,ti,Mi,oi);Mt.generateMipmaps=!1}else if(wr){if(Br){const qr=pr(Kr);v.texStorage2D(_.TEXTURE_2D,vi,Ci,qr.width,qr.height)}ui&&v.texSubImage2D(_.TEXTURE_2D,0,0,0,ti,Mi,Kr)}else v.texImage2D(_.TEXTURE_2D,0,Ci,ti,Mi,Kr);se(Mt)&&re(kn),Qr.__version=dr.version,Mt.onUpdate&&Mt.onUpdate(Mt)}fn.__version=Mt.version}function cr(fn,Mt,yn){if(Mt.image.length!==6)return;const kn=Wt(fn,Mt),nr=Mt.source;v.bindTexture(_.TEXTURE_CUBE_MAP,fn.__webglTexture,_.TEXTURE0+yn);const dr=A.get(nr);if(nr.version!==dr.__version||kn===!0){v.activeTexture(_.TEXTURE0+yn);const Qr=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Wr=Mt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Mt.colorSpace),Gr=Mt.colorSpace===NoColorSpace||Qr===Wr?_.NONE:_.BROWSER_DEFAULT_WEBGL;_.pixelStorei(_.UNPACK_FLIP_Y_WEBGL,Mt.flipY),_.pixelStorei(_.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Mt.premultiplyAlpha),_.pixelStorei(_.UNPACK_ALIGNMENT,Mt.unpackAlignment),_.pixelStorei(_.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gr);const Hr=Mt.isCompressedTexture||Mt.image[0].isCompressedTexture,Kr=Mt.image[0]&&Mt.image[0].isDataTexture,ti=[];for(let br=0;br<6;br++)!Hr&&!Kr?ti[br]=oe(Mt.image[br],!0,C.maxCubemapSize):ti[br]=Kr?Mt.image[br].image:Mt.image[br],ti[br]=Qn(Mt,ti[br]);const Mi=ti[0],Ci=w.convert(Mt.format,Mt.colorSpace),oi=w.convert(Mt.type),Ii=ue(Mt.internalFormat,Ci,oi,Mt.colorSpace),wr=Mt.isVideoTexture!==!0,Br=dr.__version===void 0||kn===!0,ui=nr.dataReady;let vi=ye(Mt,Mi);Qt(_.TEXTURE_CUBE_MAP,Mt);let qr;if(Hr){wr&&Br&&v.texStorage2D(_.TEXTURE_CUBE_MAP,vi,Ii,Mi.width,Mi.height);for(let br=0;br<6;br++){qr=ti[br].mipmaps;for(let er=0;er<qr.length;er++){const Gn=qr[er];Mt.format!==RGBAFormat?Ci!==null?wr?ui&&v.compressedTexSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er,0,0,Gn.width,Gn.height,Ci,Gn.data):v.compressedTexImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er,Ii,Gn.width,Gn.height,0,Gn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wr?ui&&v.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er,0,0,Gn.width,Gn.height,Ci,oi,Gn.data):v.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er,Ii,Gn.width,Gn.height,0,Ci,oi,Gn.data)}}}else{if(qr=Mt.mipmaps,wr&&Br){qr.length>0&&vi++;const br=pr(ti[0]);v.texStorage2D(_.TEXTURE_CUBE_MAP,vi,Ii,br.width,br.height)}for(let br=0;br<6;br++)if(Kr){wr?ui&&v.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,0,0,0,ti[br].width,ti[br].height,Ci,oi,ti[br].data):v.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,0,Ii,ti[br].width,ti[br].height,0,Ci,oi,ti[br].data);for(let er=0;er<qr.length;er++){const Er=qr[er].image[br].image;wr?ui&&v.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er+1,0,0,Er.width,Er.height,Ci,oi,Er.data):v.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er+1,Ii,Er.width,Er.height,0,Ci,oi,Er.data)}}else{wr?ui&&v.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,0,0,0,Ci,oi,ti[br]):v.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,0,Ii,Ci,oi,ti[br]);for(let er=0;er<qr.length;er++){const Gn=qr[er];wr?ui&&v.texSubImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er+1,0,0,Ci,oi,Gn.image[br]):v.texImage2D(_.TEXTURE_CUBE_MAP_POSITIVE_X+br,er+1,Ii,Ci,oi,Gn.image[br])}}}se(Mt)&&re(_.TEXTURE_CUBE_MAP),dr.__version=nr.version,Mt.onUpdate&&Mt.onUpdate(Mt)}fn.__version=Mt.version}function In(fn,Mt,yn,kn,nr,dr){const Qr=w.convert(yn.format,yn.colorSpace),Wr=w.convert(yn.type),Gr=ue(yn.internalFormat,Qr,Wr,yn.colorSpace),Hr=A.get(Mt),Kr=A.get(yn);if(Kr.__renderTarget=Mt,!Hr.__hasExternalTextures){const ti=Math.max(1,Mt.width>>dr),Mi=Math.max(1,Mt.height>>dr);nr===_.TEXTURE_3D||nr===_.TEXTURE_2D_ARRAY?v.texImage3D(nr,dr,Gr,ti,Mi,Mt.depth,0,Qr,Wr,null):v.texImage2D(nr,dr,Gr,ti,Mi,0,Qr,Wr,null)}v.bindFramebuffer(_.FRAMEBUFFER,fn),bn(Mt)?R.framebufferTexture2DMultisampleEXT(_.FRAMEBUFFER,kn,nr,Kr.__webglTexture,0,Un(Mt)):(nr===_.TEXTURE_2D||nr>=_.TEXTURE_CUBE_MAP_POSITIVE_X&&nr<=_.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&_.framebufferTexture2D(_.FRAMEBUFFER,kn,nr,Kr.__webglTexture,dr),v.bindFramebuffer(_.FRAMEBUFFER,null)}function Zn(fn,Mt,yn){if(_.bindRenderbuffer(_.RENDERBUFFER,fn),Mt.depthBuffer){const kn=Mt.depthTexture,nr=kn&&kn.isDepthTexture?kn.type:null,dr=ge(Mt.stencilBuffer,nr),Qr=Mt.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,Wr=Un(Mt);bn(Mt)?R.renderbufferStorageMultisampleEXT(_.RENDERBUFFER,Wr,dr,Mt.width,Mt.height):yn?_.renderbufferStorageMultisample(_.RENDERBUFFER,Wr,dr,Mt.width,Mt.height):_.renderbufferStorage(_.RENDERBUFFER,dr,Mt.width,Mt.height),_.framebufferRenderbuffer(_.FRAMEBUFFER,Qr,_.RENDERBUFFER,fn)}else{const kn=Mt.textures;for(let nr=0;nr<kn.length;nr++){const dr=kn[nr],Qr=w.convert(dr.format,dr.colorSpace),Wr=w.convert(dr.type),Gr=ue(dr.internalFormat,Qr,Wr,dr.colorSpace),Hr=Un(Mt);yn&&bn(Mt)===!1?_.renderbufferStorageMultisample(_.RENDERBUFFER,Hr,Gr,Mt.width,Mt.height):bn(Mt)?R.renderbufferStorageMultisampleEXT(_.RENDERBUFFER,Hr,Gr,Mt.width,Mt.height):_.renderbufferStorage(_.RENDERBUFFER,Gr,Mt.width,Mt.height)}}_.bindRenderbuffer(_.RENDERBUFFER,null)}function $n(fn,Mt){if(Mt&&Mt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(v.bindFramebuffer(_.FRAMEBUFFER,fn),!(Mt.depthTexture&&Mt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const kn=A.get(Mt.depthTexture);kn.__renderTarget=Mt,(!kn.__webglTexture||Mt.depthTexture.image.width!==Mt.width||Mt.depthTexture.image.height!==Mt.height)&&(Mt.depthTexture.image.width=Mt.width,Mt.depthTexture.image.height=Mt.height,Mt.depthTexture.needsUpdate=!0),ze(Mt.depthTexture,0);const nr=kn.__webglTexture,dr=Un(Mt);if(Mt.depthTexture.format===DepthFormat)bn(Mt)?R.framebufferTexture2DMultisampleEXT(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.TEXTURE_2D,nr,0,dr):_.framebufferTexture2D(_.FRAMEBUFFER,_.DEPTH_ATTACHMENT,_.TEXTURE_2D,nr,0);else if(Mt.depthTexture.format===DepthStencilFormat)bn(Mt)?R.framebufferTexture2DMultisampleEXT(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.TEXTURE_2D,nr,0,dr):_.framebufferTexture2D(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.TEXTURE_2D,nr,0);else throw new Error("Unknown depthTexture format")}function Rn(fn){const Mt=A.get(fn),yn=fn.isWebGLCubeRenderTarget===!0;if(Mt.__boundDepthTexture!==fn.depthTexture){const kn=fn.depthTexture;if(Mt.__depthDisposeCallback&&Mt.__depthDisposeCallback(),kn){const nr=()=>{delete Mt.__boundDepthTexture,delete Mt.__depthDisposeCallback,kn.removeEventListener("dispose",nr)};kn.addEventListener("dispose",nr),Mt.__depthDisposeCallback=nr}Mt.__boundDepthTexture=kn}if(fn.depthTexture&&!Mt.__autoAllocateDepthBuffer){if(yn)throw new Error("target.depthTexture not supported in Cube render targets");const kn=fn.texture.mipmaps;kn&&kn.length>0?$n(Mt.__webglFramebuffer[0],fn):$n(Mt.__webglFramebuffer,fn)}else if(yn){Mt.__webglDepthbuffer=[];for(let kn=0;kn<6;kn++)if(v.bindFramebuffer(_.FRAMEBUFFER,Mt.__webglFramebuffer[kn]),Mt.__webglDepthbuffer[kn]===void 0)Mt.__webglDepthbuffer[kn]=_.createRenderbuffer(),Zn(Mt.__webglDepthbuffer[kn],fn,!1);else{const nr=fn.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,dr=Mt.__webglDepthbuffer[kn];_.bindRenderbuffer(_.RENDERBUFFER,dr),_.framebufferRenderbuffer(_.FRAMEBUFFER,nr,_.RENDERBUFFER,dr)}}else{const kn=fn.texture.mipmaps;if(kn&&kn.length>0?v.bindFramebuffer(_.FRAMEBUFFER,Mt.__webglFramebuffer[0]):v.bindFramebuffer(_.FRAMEBUFFER,Mt.__webglFramebuffer),Mt.__webglDepthbuffer===void 0)Mt.__webglDepthbuffer=_.createRenderbuffer(),Zn(Mt.__webglDepthbuffer,fn,!1);else{const nr=fn.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,dr=Mt.__webglDepthbuffer;_.bindRenderbuffer(_.RENDERBUFFER,dr),_.framebufferRenderbuffer(_.FRAMEBUFFER,nr,_.RENDERBUFFER,dr)}}v.bindFramebuffer(_.FRAMEBUFFER,null)}function Dn(fn,Mt,yn){const kn=A.get(fn);Mt!==void 0&&In(kn.__webglFramebuffer,fn,fn.texture,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,0),yn!==void 0&&Rn(fn)}function Gt(fn){const Mt=fn.texture,yn=A.get(fn),kn=A.get(Mt);fn.addEventListener("dispose",ve);const nr=fn.textures,dr=fn.isWebGLCubeRenderTarget===!0,Qr=nr.length>1;if(Qr||(kn.__webglTexture===void 0&&(kn.__webglTexture=_.createTexture()),kn.__version=Mt.version,T.memory.textures++),dr){yn.__webglFramebuffer=[];for(let Wr=0;Wr<6;Wr++)if(Mt.mipmaps&&Mt.mipmaps.length>0){yn.__webglFramebuffer[Wr]=[];for(let Gr=0;Gr<Mt.mipmaps.length;Gr++)yn.__webglFramebuffer[Wr][Gr]=_.createFramebuffer()}else yn.__webglFramebuffer[Wr]=_.createFramebuffer()}else{if(Mt.mipmaps&&Mt.mipmaps.length>0){yn.__webglFramebuffer=[];for(let Wr=0;Wr<Mt.mipmaps.length;Wr++)yn.__webglFramebuffer[Wr]=_.createFramebuffer()}else yn.__webglFramebuffer=_.createFramebuffer();if(Qr)for(let Wr=0,Gr=nr.length;Wr<Gr;Wr++){const Hr=A.get(nr[Wr]);Hr.__webglTexture===void 0&&(Hr.__webglTexture=_.createTexture(),T.memory.textures++)}if(fn.samples>0&&bn(fn)===!1){yn.__webglMultisampledFramebuffer=_.createFramebuffer(),yn.__webglColorRenderbuffer=[],v.bindFramebuffer(_.FRAMEBUFFER,yn.__webglMultisampledFramebuffer);for(let Wr=0;Wr<nr.length;Wr++){const Gr=nr[Wr];yn.__webglColorRenderbuffer[Wr]=_.createRenderbuffer(),_.bindRenderbuffer(_.RENDERBUFFER,yn.__webglColorRenderbuffer[Wr]);const Hr=w.convert(Gr.format,Gr.colorSpace),Kr=w.convert(Gr.type),ti=ue(Gr.internalFormat,Hr,Kr,Gr.colorSpace,fn.isXRRenderTarget===!0),Mi=Un(fn);_.renderbufferStorageMultisample(_.RENDERBUFFER,Mi,ti,fn.width,fn.height),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0+Wr,_.RENDERBUFFER,yn.__webglColorRenderbuffer[Wr])}_.bindRenderbuffer(_.RENDERBUFFER,null),fn.depthBuffer&&(yn.__webglDepthRenderbuffer=_.createRenderbuffer(),Zn(yn.__webglDepthRenderbuffer,fn,!0)),v.bindFramebuffer(_.FRAMEBUFFER,null)}}if(dr){v.bindTexture(_.TEXTURE_CUBE_MAP,kn.__webglTexture),Qt(_.TEXTURE_CUBE_MAP,Mt);for(let Wr=0;Wr<6;Wr++)if(Mt.mipmaps&&Mt.mipmaps.length>0)for(let Gr=0;Gr<Mt.mipmaps.length;Gr++)In(yn.__webglFramebuffer[Wr][Gr],fn,Mt,_.COLOR_ATTACHMENT0,_.TEXTURE_CUBE_MAP_POSITIVE_X+Wr,Gr);else In(yn.__webglFramebuffer[Wr],fn,Mt,_.COLOR_ATTACHMENT0,_.TEXTURE_CUBE_MAP_POSITIVE_X+Wr,0);se(Mt)&&re(_.TEXTURE_CUBE_MAP),v.unbindTexture()}else if(Qr){for(let Wr=0,Gr=nr.length;Wr<Gr;Wr++){const Hr=nr[Wr],Kr=A.get(Hr);let ti=_.TEXTURE_2D;(fn.isWebGL3DRenderTarget||fn.isWebGLArrayRenderTarget)&&(ti=fn.isWebGL3DRenderTarget?_.TEXTURE_3D:_.TEXTURE_2D_ARRAY),v.bindTexture(ti,Kr.__webglTexture),Qt(ti,Hr),In(yn.__webglFramebuffer,fn,Hr,_.COLOR_ATTACHMENT0+Wr,ti,0),se(Hr)&&re(ti)}v.unbindTexture()}else{let Wr=_.TEXTURE_2D;if((fn.isWebGL3DRenderTarget||fn.isWebGLArrayRenderTarget)&&(Wr=fn.isWebGL3DRenderTarget?_.TEXTURE_3D:_.TEXTURE_2D_ARRAY),v.bindTexture(Wr,kn.__webglTexture),Qt(Wr,Mt),Mt.mipmaps&&Mt.mipmaps.length>0)for(let Gr=0;Gr<Mt.mipmaps.length;Gr++)In(yn.__webglFramebuffer[Gr],fn,Mt,_.COLOR_ATTACHMENT0,Wr,Gr);else In(yn.__webglFramebuffer,fn,Mt,_.COLOR_ATTACHMENT0,Wr,0);se(Mt)&&re(Wr),v.unbindTexture()}fn.depthBuffer&&Rn(fn)}function Jn(fn){const Mt=fn.textures;for(let yn=0,kn=Mt.length;yn<kn;yn++){const nr=Mt[yn];if(se(nr)){const dr=fe(fn),Qr=A.get(nr).__webglTexture;v.bindTexture(dr,Qr),re(dr),v.unbindTexture()}}}const Nn=[],Xn=[];function jn(fn){if(fn.samples>0){if(bn(fn)===!1){const Mt=fn.textures,yn=fn.width,kn=fn.height;let nr=_.COLOR_BUFFER_BIT;const dr=fn.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT,Qr=A.get(fn),Wr=Mt.length>1;if(Wr)for(let Hr=0;Hr<Mt.length;Hr++)v.bindFramebuffer(_.FRAMEBUFFER,Qr.__webglMultisampledFramebuffer),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0+Hr,_.RENDERBUFFER,null),v.bindFramebuffer(_.FRAMEBUFFER,Qr.__webglFramebuffer),_.framebufferTexture2D(_.DRAW_FRAMEBUFFER,_.COLOR_ATTACHMENT0+Hr,_.TEXTURE_2D,null,0);v.bindFramebuffer(_.READ_FRAMEBUFFER,Qr.__webglMultisampledFramebuffer);const Gr=fn.texture.mipmaps;Gr&&Gr.length>0?v.bindFramebuffer(_.DRAW_FRAMEBUFFER,Qr.__webglFramebuffer[0]):v.bindFramebuffer(_.DRAW_FRAMEBUFFER,Qr.__webglFramebuffer);for(let Hr=0;Hr<Mt.length;Hr++){if(fn.resolveDepthBuffer&&(fn.depthBuffer&&(nr|=_.DEPTH_BUFFER_BIT),fn.stencilBuffer&&fn.resolveStencilBuffer&&(nr|=_.STENCIL_BUFFER_BIT)),Wr){_.framebufferRenderbuffer(_.READ_FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.RENDERBUFFER,Qr.__webglColorRenderbuffer[Hr]);const Kr=A.get(Mt[Hr]).__webglTexture;_.framebufferTexture2D(_.DRAW_FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,Kr,0)}_.blitFramebuffer(0,0,yn,kn,0,0,yn,kn,nr,_.NEAREST),G===!0&&(Nn.length=0,Xn.length=0,Nn.push(_.COLOR_ATTACHMENT0+Hr),fn.depthBuffer&&fn.resolveDepthBuffer===!1&&(Nn.push(dr),Xn.push(dr),_.invalidateFramebuffer(_.DRAW_FRAMEBUFFER,Xn)),_.invalidateFramebuffer(_.READ_FRAMEBUFFER,Nn))}if(v.bindFramebuffer(_.READ_FRAMEBUFFER,null),v.bindFramebuffer(_.DRAW_FRAMEBUFFER,null),Wr)for(let Hr=0;Hr<Mt.length;Hr++){v.bindFramebuffer(_.FRAMEBUFFER,Qr.__webglMultisampledFramebuffer),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0+Hr,_.RENDERBUFFER,Qr.__webglColorRenderbuffer[Hr]);const Kr=A.get(Mt[Hr]).__webglTexture;v.bindFramebuffer(_.FRAMEBUFFER,Qr.__webglFramebuffer),_.framebufferTexture2D(_.DRAW_FRAMEBUFFER,_.COLOR_ATTACHMENT0+Hr,_.TEXTURE_2D,Kr,0)}v.bindFramebuffer(_.DRAW_FRAMEBUFFER,Qr.__webglMultisampledFramebuffer)}else if(fn.depthBuffer&&fn.resolveDepthBuffer===!1&&G){const Mt=fn.stencilBuffer?_.DEPTH_STENCIL_ATTACHMENT:_.DEPTH_ATTACHMENT;_.invalidateFramebuffer(_.DRAW_FRAMEBUFFER,[Mt])}}}function Un(fn){return Math.min(C.maxSamples,fn.samples)}function bn(fn){const Mt=A.get(fn);return fn.samples>0&&d.has("WEBGL_multisampled_render_to_texture")===!0&&Mt.__useRenderToTexture!==!1}function Kn(fn){const Mt=T.render.frame;z.get(fn)!==Mt&&(z.set(fn,Mt),fn.update())}function Qn(fn,Mt){const yn=fn.colorSpace,kn=fn.format,nr=fn.type;return fn.isCompressedTexture===!0||fn.isVideoTexture===!0||yn!==LinearSRGBColorSpace$1&&yn!==NoColorSpace&&(ColorManagement.getTransfer(yn)===SRGBTransfer?(kn!==RGBAFormat||nr!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",yn)),Mt}function pr(fn){return typeof HTMLImageElement<"u"&&fn instanceof HTMLImageElement?(I.width=fn.naturalWidth||fn.width,I.height=fn.naturalHeight||fn.height):typeof VideoFrame<"u"&&fn instanceof VideoFrame?(I.width=fn.displayWidth,I.height=fn.displayHeight):(I.width=fn.width,I.height=fn.height),I}this.allocateTextureUnit=Oe,this.resetTextureUnits=Fe,this.setTexture2D=ze,this.setTexture2DArray=je,this.setTexture3D=He,this.setTextureCube=Xe,this.rebindTextures=Dn,this.setupRenderTarget=Gt,this.updateRenderTargetMipmap=Jn,this.updateMultisampleRenderTarget=jn,this.setupDepthRenderbuffer=Rn,this.setupFrameBufferTexture=In,this.useMultisampledRTT=bn}function WebGLUtils(_,d){function v(A,C=NoColorSpace){let w;const T=ColorManagement.getTransfer(C);if(A===UnsignedByteType)return _.UNSIGNED_BYTE;if(A===UnsignedShort4444Type)return _.UNSIGNED_SHORT_4_4_4_4;if(A===UnsignedShort5551Type)return _.UNSIGNED_SHORT_5_5_5_1;if(A===UnsignedInt5999Type)return _.UNSIGNED_INT_5_9_9_9_REV;if(A===ByteType)return _.BYTE;if(A===ShortType)return _.SHORT;if(A===UnsignedShortType)return _.UNSIGNED_SHORT;if(A===IntType)return _.INT;if(A===UnsignedIntType)return _.UNSIGNED_INT;if(A===FloatType)return _.FLOAT;if(A===HalfFloatType)return _.HALF_FLOAT;if(A===AlphaFormat)return _.ALPHA;if(A===RGBFormat)return _.RGB;if(A===RGBAFormat)return _.RGBA;if(A===DepthFormat)return _.DEPTH_COMPONENT;if(A===DepthStencilFormat)return _.DEPTH_STENCIL;if(A===RedFormat)return _.RED;if(A===RedIntegerFormat)return _.RED_INTEGER;if(A===RGFormat)return _.RG;if(A===RGIntegerFormat)return _.RG_INTEGER;if(A===RGBAIntegerFormat)return _.RGBA_INTEGER;if(A===RGB_S3TC_DXT1_Format||A===RGBA_S3TC_DXT1_Format||A===RGBA_S3TC_DXT3_Format||A===RGBA_S3TC_DXT5_Format)if(T===SRGBTransfer)if(w=d.get("WEBGL_compressed_texture_s3tc_srgb"),w!==null){if(A===RGB_S3TC_DXT1_Format)return w.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(A===RGBA_S3TC_DXT1_Format)return w.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(A===RGBA_S3TC_DXT3_Format)return w.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(A===RGBA_S3TC_DXT5_Format)return w.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(w=d.get("WEBGL_compressed_texture_s3tc"),w!==null){if(A===RGB_S3TC_DXT1_Format)return w.COMPRESSED_RGB_S3TC_DXT1_EXT;if(A===RGBA_S3TC_DXT1_Format)return w.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(A===RGBA_S3TC_DXT3_Format)return w.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(A===RGBA_S3TC_DXT5_Format)return w.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(A===RGB_PVRTC_4BPPV1_Format||A===RGB_PVRTC_2BPPV1_Format||A===RGBA_PVRTC_4BPPV1_Format||A===RGBA_PVRTC_2BPPV1_Format)if(w=d.get("WEBGL_compressed_texture_pvrtc"),w!==null){if(A===RGB_PVRTC_4BPPV1_Format)return w.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(A===RGB_PVRTC_2BPPV1_Format)return w.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(A===RGBA_PVRTC_4BPPV1_Format)return w.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(A===RGBA_PVRTC_2BPPV1_Format)return w.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(A===RGB_ETC1_Format||A===RGB_ETC2_Format||A===RGBA_ETC2_EAC_Format)if(w=d.get("WEBGL_compressed_texture_etc"),w!==null){if(A===RGB_ETC1_Format||A===RGB_ETC2_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ETC2:w.COMPRESSED_RGB8_ETC2;if(A===RGBA_ETC2_EAC_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:w.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(A===RGBA_ASTC_4x4_Format||A===RGBA_ASTC_5x4_Format||A===RGBA_ASTC_5x5_Format||A===RGBA_ASTC_6x5_Format||A===RGBA_ASTC_6x6_Format||A===RGBA_ASTC_8x5_Format||A===RGBA_ASTC_8x6_Format||A===RGBA_ASTC_8x8_Format||A===RGBA_ASTC_10x5_Format||A===RGBA_ASTC_10x6_Format||A===RGBA_ASTC_10x8_Format||A===RGBA_ASTC_10x10_Format||A===RGBA_ASTC_12x10_Format||A===RGBA_ASTC_12x12_Format)if(w=d.get("WEBGL_compressed_texture_astc"),w!==null){if(A===RGBA_ASTC_4x4_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:w.COMPRESSED_RGBA_ASTC_4x4_KHR;if(A===RGBA_ASTC_5x4_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:w.COMPRESSED_RGBA_ASTC_5x4_KHR;if(A===RGBA_ASTC_5x5_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:w.COMPRESSED_RGBA_ASTC_5x5_KHR;if(A===RGBA_ASTC_6x5_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:w.COMPRESSED_RGBA_ASTC_6x5_KHR;if(A===RGBA_ASTC_6x6_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:w.COMPRESSED_RGBA_ASTC_6x6_KHR;if(A===RGBA_ASTC_8x5_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:w.COMPRESSED_RGBA_ASTC_8x5_KHR;if(A===RGBA_ASTC_8x6_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:w.COMPRESSED_RGBA_ASTC_8x6_KHR;if(A===RGBA_ASTC_8x8_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:w.COMPRESSED_RGBA_ASTC_8x8_KHR;if(A===RGBA_ASTC_10x5_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:w.COMPRESSED_RGBA_ASTC_10x5_KHR;if(A===RGBA_ASTC_10x6_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:w.COMPRESSED_RGBA_ASTC_10x6_KHR;if(A===RGBA_ASTC_10x8_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:w.COMPRESSED_RGBA_ASTC_10x8_KHR;if(A===RGBA_ASTC_10x10_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:w.COMPRESSED_RGBA_ASTC_10x10_KHR;if(A===RGBA_ASTC_12x10_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:w.COMPRESSED_RGBA_ASTC_12x10_KHR;if(A===RGBA_ASTC_12x12_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:w.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(A===RGBA_BPTC_Format||A===RGB_BPTC_SIGNED_Format||A===RGB_BPTC_UNSIGNED_Format)if(w=d.get("EXT_texture_compression_bptc"),w!==null){if(A===RGBA_BPTC_Format)return T===SRGBTransfer?w.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:w.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(A===RGB_BPTC_SIGNED_Format)return w.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(A===RGB_BPTC_UNSIGNED_Format)return w.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(A===RED_RGTC1_Format||A===SIGNED_RED_RGTC1_Format||A===RED_GREEN_RGTC2_Format||A===SIGNED_RED_GREEN_RGTC2_Format)if(w=d.get("EXT_texture_compression_rgtc"),w!==null){if(A===RGBA_BPTC_Format)return w.COMPRESSED_RED_RGTC1_EXT;if(A===SIGNED_RED_RGTC1_Format)return w.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(A===RED_GREEN_RGTC2_Format)return w.COMPRESSED_RED_GREEN_RGTC2_EXT;if(A===SIGNED_RED_GREEN_RGTC2_Format)return w.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return A===UnsignedInt248Type?_.UNSIGNED_INT_24_8:_[A]!==void 0?_[A]:null}return{convert:v}}class ExternalTexture extends Texture{constructor(d=null){super(),this.sourceTexture=d,this.isExternalTexture=!0}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(d,v){if(this.texture===null){const A=new ExternalTexture(d.texture);(d.depthNear!==v.depthNear||d.depthFar!==v.depthFar)&&(this.depthNear=d.depthNear,this.depthFar=d.depthFar),this.texture=A}}getMesh(d){if(this.texture!==null&&this.mesh===null){const v=d.cameras[0].viewport,A=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:v.z},depthHeight:{value:v.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),A)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(d,v){super();const A=this;let C=null,w=1,T=null,R="local-floor",G=1,I=null,z=null,H=null,Y=null,ee=null,ie=null;const oe=new WebXRDepthSensing,se={},re=v.getContextAttributes();let fe=null,ue=null;const ge=[],ye=[],be=new Vector2;let ve=null;const Me=new PerspectiveCamera;Me.viewport=new Vector4;const we=new PerspectiveCamera;we.viewport=new Vector4;const Be=[Me,we],De=new ArrayCamera;let Fe=null,Oe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Lt){let Mn=ge[Lt];return Mn===void 0&&(Mn=new WebXRController,ge[Lt]=Mn),Mn.getTargetRaySpace()},this.getControllerGrip=function(Lt){let Mn=ge[Lt];return Mn===void 0&&(Mn=new WebXRController,ge[Lt]=Mn),Mn.getGripSpace()},this.getHand=function(Lt){let Mn=ge[Lt];return Mn===void 0&&(Mn=new WebXRController,ge[Lt]=Mn),Mn.getHandSpace()};function Ge(Lt){const Mn=ye.indexOf(Lt.inputSource);if(Mn===-1)return;const cr=ge[Mn];cr!==void 0&&(cr.update(Lt.inputSource,Lt.frame,I||T),cr.dispatchEvent({type:Lt.type,data:Lt.inputSource}))}function ze(){C.removeEventListener("select",Ge),C.removeEventListener("selectstart",Ge),C.removeEventListener("selectend",Ge),C.removeEventListener("squeeze",Ge),C.removeEventListener("squeezestart",Ge),C.removeEventListener("squeezeend",Ge),C.removeEventListener("end",ze),C.removeEventListener("inputsourceschange",je);for(let Lt=0;Lt<ge.length;Lt++){const Mn=ye[Lt];Mn!==null&&(ye[Lt]=null,ge[Lt].disconnect(Mn))}Fe=null,Oe=null,oe.reset();for(const Lt in se)delete se[Lt];d.setRenderTarget(fe),ee=null,Y=null,H=null,C=null,ue=null,Bn.stop(),A.isPresenting=!1,d.setPixelRatio(ve),d.setSize(be.width,be.height,!1),A.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Lt){w=Lt,A.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Lt){R=Lt,A.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return I||T},this.setReferenceSpace=function(Lt){I=Lt},this.getBaseLayer=function(){return Y!==null?Y:ee},this.getBinding=function(){return H},this.getFrame=function(){return ie},this.getSession=function(){return C},this.setSession=async function(Lt){if(C=Lt,C!==null){if(fe=d.getRenderTarget(),C.addEventListener("select",Ge),C.addEventListener("selectstart",Ge),C.addEventListener("selectend",Ge),C.addEventListener("squeeze",Ge),C.addEventListener("squeezestart",Ge),C.addEventListener("squeezeend",Ge),C.addEventListener("end",ze),C.addEventListener("inputsourceschange",je),re.xrCompatible!==!0&&await v.makeXRCompatible(),ve=d.getPixelRatio(),d.getSize(be),typeof XRWebGLBinding<"u"&&(H=new XRWebGLBinding(C,v)),H!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let cr=null,In=null,Zn=null;re.depth&&(Zn=re.stencil?v.DEPTH24_STENCIL8:v.DEPTH_COMPONENT24,cr=re.stencil?DepthStencilFormat:DepthFormat,In=re.stencil?UnsignedInt248Type:UnsignedIntType);const $n={colorFormat:v.RGBA8,depthFormat:Zn,scaleFactor:w};Y=H.createProjectionLayer($n),C.updateRenderState({layers:[Y]}),d.setPixelRatio(1),d.setSize(Y.textureWidth,Y.textureHeight,!1),ue=new WebGLRenderTarget(Y.textureWidth,Y.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(Y.textureWidth,Y.textureHeight,In,void 0,void 0,void 0,void 0,void 0,void 0,cr),stencilBuffer:re.stencil,colorSpace:d.outputColorSpace,samples:re.antialias?4:0,resolveDepthBuffer:Y.ignoreDepthValues===!1,resolveStencilBuffer:Y.ignoreDepthValues===!1})}else{const cr={antialias:re.antialias,alpha:!0,depth:re.depth,stencil:re.stencil,framebufferScaleFactor:w};ee=new XRWebGLLayer(C,v,cr),C.updateRenderState({baseLayer:ee}),d.setPixelRatio(1),d.setSize(ee.framebufferWidth,ee.framebufferHeight,!1),ue=new WebGLRenderTarget(ee.framebufferWidth,ee.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:d.outputColorSpace,stencilBuffer:re.stencil,resolveDepthBuffer:ee.ignoreDepthValues===!1,resolveStencilBuffer:ee.ignoreDepthValues===!1})}ue.isXRRenderTarget=!0,this.setFoveation(G),I=null,T=await C.requestReferenceSpace(R),Bn.setContext(C),Bn.start(),A.isPresenting=!0,A.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(C!==null)return C.environmentBlendMode},this.getDepthTexture=function(){return oe.getDepthTexture()};function je(Lt){for(let Mn=0;Mn<Lt.removed.length;Mn++){const cr=Lt.removed[Mn],In=ye.indexOf(cr);In>=0&&(ye[In]=null,ge[In].disconnect(cr))}for(let Mn=0;Mn<Lt.added.length;Mn++){const cr=Lt.added[Mn];let In=ye.indexOf(cr);if(In===-1){for(let $n=0;$n<ge.length;$n++)if($n>=ye.length){ye.push(cr),In=$n;break}else if(ye[$n]===null){ye[$n]=cr,In=$n;break}if(In===-1)break}const Zn=ge[In];Zn&&Zn.connect(cr)}}const He=new Vector3,Xe=new Vector3;function $e(Lt,Mn,cr){He.setFromMatrixPosition(Mn.matrixWorld),Xe.setFromMatrixPosition(cr.matrixWorld);const In=He.distanceTo(Xe),Zn=Mn.projectionMatrix.elements,$n=cr.projectionMatrix.elements,Rn=Zn[14]/(Zn[10]-1),Dn=Zn[14]/(Zn[10]+1),Gt=(Zn[9]+1)/Zn[5],Jn=(Zn[9]-1)/Zn[5],Nn=(Zn[8]-1)/Zn[0],Xn=($n[8]+1)/$n[0],jn=Rn*Nn,Un=Rn*Xn,bn=In/(-Nn+Xn),Kn=bn*-Nn;if(Mn.matrixWorld.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.translateX(Kn),Lt.translateZ(bn),Lt.matrixWorld.compose(Lt.position,Lt.quaternion,Lt.scale),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert(),Zn[10]===-1)Lt.projectionMatrix.copy(Mn.projectionMatrix),Lt.projectionMatrixInverse.copy(Mn.projectionMatrixInverse);else{const Qn=Rn+bn,pr=Dn+bn,fn=jn-Kn,Mt=Un+(In-Kn),yn=Gt*Dn/pr*Qn,kn=Jn*Dn/pr*Qn;Lt.projectionMatrix.makePerspective(fn,Mt,yn,kn,Qn,pr),Lt.projectionMatrixInverse.copy(Lt.projectionMatrix).invert()}}function We(Lt,Mn){Mn===null?Lt.matrixWorld.copy(Lt.matrix):Lt.matrixWorld.multiplyMatrices(Mn.matrixWorld,Lt.matrix),Lt.matrixWorldInverse.copy(Lt.matrixWorld).invert()}this.updateCamera=function(Lt){if(C===null)return;let Mn=Lt.near,cr=Lt.far;oe.texture!==null&&(oe.depthNear>0&&(Mn=oe.depthNear),oe.depthFar>0&&(cr=oe.depthFar)),De.near=we.near=Me.near=Mn,De.far=we.far=Me.far=cr,(Fe!==De.near||Oe!==De.far)&&(C.updateRenderState({depthNear:De.near,depthFar:De.far}),Fe=De.near,Oe=De.far),De.layers.mask=Lt.layers.mask|6,Me.layers.mask=De.layers.mask&3,we.layers.mask=De.layers.mask&5;const In=Lt.parent,Zn=De.cameras;We(De,In);for(let $n=0;$n<Zn.length;$n++)We(Zn[$n],In);Zn.length===2?$e(De,Me,we):De.projectionMatrix.copy(Me.projectionMatrix),nt(Lt,De,In)};function nt(Lt,Mn,cr){cr===null?Lt.matrix.copy(Mn.matrixWorld):(Lt.matrix.copy(cr.matrixWorld),Lt.matrix.invert(),Lt.matrix.multiply(Mn.matrixWorld)),Lt.matrix.decompose(Lt.position,Lt.quaternion,Lt.scale),Lt.updateMatrixWorld(!0),Lt.projectionMatrix.copy(Mn.projectionMatrix),Lt.projectionMatrixInverse.copy(Mn.projectionMatrixInverse),Lt.isPerspectiveCamera&&(Lt.fov=RAD2DEG*2*Math.atan(1/Lt.projectionMatrix.elements[5]),Lt.zoom=1)}this.getCamera=function(){return De},this.getFoveation=function(){if(!(Y===null&&ee===null))return G},this.setFoveation=function(Lt){G=Lt,Y!==null&&(Y.fixedFoveation=Lt),ee!==null&&ee.fixedFoveation!==void 0&&(ee.fixedFoveation=Lt)},this.hasDepthSensing=function(){return oe.texture!==null},this.getDepthSensingMesh=function(){return oe.getMesh(De)},this.getCameraTexture=function(Lt){return se[Lt]};let Qt=null;function Wt(Lt,Mn){if(z=Mn.getViewerPose(I||T),ie=Mn,z!==null){const cr=z.views;ee!==null&&(d.setRenderTargetFramebuffer(ue,ee.framebuffer),d.setRenderTarget(ue));let In=!1;cr.length!==De.cameras.length&&(De.cameras.length=0,In=!0);for(let Dn=0;Dn<cr.length;Dn++){const Gt=cr[Dn];let Jn=null;if(ee!==null)Jn=ee.getViewport(Gt);else{const Xn=H.getViewSubImage(Y,Gt);Jn=Xn.viewport,Dn===0&&(d.setRenderTargetTextures(ue,Xn.colorTexture,Xn.depthStencilTexture),d.setRenderTarget(ue))}let Nn=Be[Dn];Nn===void 0&&(Nn=new PerspectiveCamera,Nn.layers.enable(Dn),Nn.viewport=new Vector4,Be[Dn]=Nn),Nn.matrix.fromArray(Gt.transform.matrix),Nn.matrix.decompose(Nn.position,Nn.quaternion,Nn.scale),Nn.projectionMatrix.fromArray(Gt.projectionMatrix),Nn.projectionMatrixInverse.copy(Nn.projectionMatrix).invert(),Nn.viewport.set(Jn.x,Jn.y,Jn.width,Jn.height),Dn===0&&(De.matrix.copy(Nn.matrix),De.matrix.decompose(De.position,De.quaternion,De.scale)),In===!0&&De.cameras.push(Nn)}const Zn=C.enabledFeatures;if(Zn&&Zn.includes("depth-sensing")&&C.depthUsage=="gpu-optimized"&&H){const Dn=H.getDepthInformation(cr[0]);Dn&&Dn.isValid&&Dn.texture&&oe.init(Dn,C.renderState)}if(Zn&&Zn.includes("camera-access")&&(d.state.unbindTexture(),H))for(let Dn=0;Dn<cr.length;Dn++){const Gt=cr[Dn].camera;if(Gt){let Jn=se[Gt];Jn||(Jn=new ExternalTexture,se[Gt]=Jn);const Nn=H.getCameraImage(Gt);Jn.sourceTexture=Nn}}}for(let cr=0;cr<ge.length;cr++){const In=ye[cr],Zn=ge[cr];In!==null&&Zn!==void 0&&Zn.update(In,Mn,I||T)}Qt&&Qt(Lt,Mn),Mn.detectedPlanes&&A.dispatchEvent({type:"planesdetected",data:Mn}),ie=null}const Bn=new WebGLAnimation;Bn.setAnimationLoop(Wt),this.setAnimationLoop=function(Lt){Qt=Lt},this.dispose=function(){}}}const _e1=new Euler,_m1$2=new Matrix4;function WebGLMaterials(_,d){function v(se,re){se.matrixAutoUpdate===!0&&se.updateMatrix(),re.value.copy(se.matrix)}function A(se,re){re.color.getRGB(se.fogColor.value,getUnlitUniformColorSpace(_)),re.isFog?(se.fogNear.value=re.near,se.fogFar.value=re.far):re.isFogExp2&&(se.fogDensity.value=re.density)}function C(se,re,fe,ue,ge){re.isMeshBasicMaterial||re.isMeshLambertMaterial?w(se,re):re.isMeshToonMaterial?(w(se,re),H(se,re)):re.isMeshPhongMaterial?(w(se,re),z(se,re)):re.isMeshStandardMaterial?(w(se,re),Y(se,re),re.isMeshPhysicalMaterial&&ee(se,re,ge)):re.isMeshMatcapMaterial?(w(se,re),ie(se,re)):re.isMeshDepthMaterial?w(se,re):re.isMeshDistanceMaterial?(w(se,re),oe(se,re)):re.isMeshNormalMaterial?w(se,re):re.isLineBasicMaterial?(T(se,re),re.isLineDashedMaterial&&R(se,re)):re.isPointsMaterial?G(se,re,fe,ue):re.isSpriteMaterial?I(se,re):re.isShadowMaterial?(se.color.value.copy(re.color),se.opacity.value=re.opacity):re.isShaderMaterial&&(re.uniformsNeedUpdate=!1)}function w(se,re){se.opacity.value=re.opacity,re.color&&se.diffuse.value.copy(re.color),re.emissive&&se.emissive.value.copy(re.emissive).multiplyScalar(re.emissiveIntensity),re.map&&(se.map.value=re.map,v(re.map,se.mapTransform)),re.alphaMap&&(se.alphaMap.value=re.alphaMap,v(re.alphaMap,se.alphaMapTransform)),re.bumpMap&&(se.bumpMap.value=re.bumpMap,v(re.bumpMap,se.bumpMapTransform),se.bumpScale.value=re.bumpScale,re.side===BackSide&&(se.bumpScale.value*=-1)),re.normalMap&&(se.normalMap.value=re.normalMap,v(re.normalMap,se.normalMapTransform),se.normalScale.value.copy(re.normalScale),re.side===BackSide&&se.normalScale.value.negate()),re.displacementMap&&(se.displacementMap.value=re.displacementMap,v(re.displacementMap,se.displacementMapTransform),se.displacementScale.value=re.displacementScale,se.displacementBias.value=re.displacementBias),re.emissiveMap&&(se.emissiveMap.value=re.emissiveMap,v(re.emissiveMap,se.emissiveMapTransform)),re.specularMap&&(se.specularMap.value=re.specularMap,v(re.specularMap,se.specularMapTransform)),re.alphaTest>0&&(se.alphaTest.value=re.alphaTest);const fe=d.get(re),ue=fe.envMap,ge=fe.envMapRotation;ue&&(se.envMap.value=ue,_e1.copy(ge),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,ue.isCubeTexture&&ue.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),se.envMapRotation.value.setFromMatrix4(_m1$2.makeRotationFromEuler(_e1)),se.flipEnvMap.value=ue.isCubeTexture&&ue.isRenderTargetTexture===!1?-1:1,se.reflectivity.value=re.reflectivity,se.ior.value=re.ior,se.refractionRatio.value=re.refractionRatio),re.lightMap&&(se.lightMap.value=re.lightMap,se.lightMapIntensity.value=re.lightMapIntensity,v(re.lightMap,se.lightMapTransform)),re.aoMap&&(se.aoMap.value=re.aoMap,se.aoMapIntensity.value=re.aoMapIntensity,v(re.aoMap,se.aoMapTransform))}function T(se,re){se.diffuse.value.copy(re.color),se.opacity.value=re.opacity,re.map&&(se.map.value=re.map,v(re.map,se.mapTransform))}function R(se,re){se.dashSize.value=re.dashSize,se.totalSize.value=re.dashSize+re.gapSize,se.scale.value=re.scale}function G(se,re,fe,ue){se.diffuse.value.copy(re.color),se.opacity.value=re.opacity,se.size.value=re.size*fe,se.scale.value=ue*.5,re.map&&(se.map.value=re.map,v(re.map,se.uvTransform)),re.alphaMap&&(se.alphaMap.value=re.alphaMap,v(re.alphaMap,se.alphaMapTransform)),re.alphaTest>0&&(se.alphaTest.value=re.alphaTest)}function I(se,re){se.diffuse.value.copy(re.color),se.opacity.value=re.opacity,se.rotation.value=re.rotation,re.map&&(se.map.value=re.map,v(re.map,se.mapTransform)),re.alphaMap&&(se.alphaMap.value=re.alphaMap,v(re.alphaMap,se.alphaMapTransform)),re.alphaTest>0&&(se.alphaTest.value=re.alphaTest)}function z(se,re){se.specular.value.copy(re.specular),se.shininess.value=Math.max(re.shininess,1e-4)}function H(se,re){re.gradientMap&&(se.gradientMap.value=re.gradientMap)}function Y(se,re){se.metalness.value=re.metalness,re.metalnessMap&&(se.metalnessMap.value=re.metalnessMap,v(re.metalnessMap,se.metalnessMapTransform)),se.roughness.value=re.roughness,re.roughnessMap&&(se.roughnessMap.value=re.roughnessMap,v(re.roughnessMap,se.roughnessMapTransform)),re.envMap&&(se.envMapIntensity.value=re.envMapIntensity)}function ee(se,re,fe){se.ior.value=re.ior,re.sheen>0&&(se.sheenColor.value.copy(re.sheenColor).multiplyScalar(re.sheen),se.sheenRoughness.value=re.sheenRoughness,re.sheenColorMap&&(se.sheenColorMap.value=re.sheenColorMap,v(re.sheenColorMap,se.sheenColorMapTransform)),re.sheenRoughnessMap&&(se.sheenRoughnessMap.value=re.sheenRoughnessMap,v(re.sheenRoughnessMap,se.sheenRoughnessMapTransform))),re.clearcoat>0&&(se.clearcoat.value=re.clearcoat,se.clearcoatRoughness.value=re.clearcoatRoughness,re.clearcoatMap&&(se.clearcoatMap.value=re.clearcoatMap,v(re.clearcoatMap,se.clearcoatMapTransform)),re.clearcoatRoughnessMap&&(se.clearcoatRoughnessMap.value=re.clearcoatRoughnessMap,v(re.clearcoatRoughnessMap,se.clearcoatRoughnessMapTransform)),re.clearcoatNormalMap&&(se.clearcoatNormalMap.value=re.clearcoatNormalMap,v(re.clearcoatNormalMap,se.clearcoatNormalMapTransform),se.clearcoatNormalScale.value.copy(re.clearcoatNormalScale),re.side===BackSide&&se.clearcoatNormalScale.value.negate())),re.dispersion>0&&(se.dispersion.value=re.dispersion),re.iridescence>0&&(se.iridescence.value=re.iridescence,se.iridescenceIOR.value=re.iridescenceIOR,se.iridescenceThicknessMinimum.value=re.iridescenceThicknessRange[0],se.iridescenceThicknessMaximum.value=re.iridescenceThicknessRange[1],re.iridescenceMap&&(se.iridescenceMap.value=re.iridescenceMap,v(re.iridescenceMap,se.iridescenceMapTransform)),re.iridescenceThicknessMap&&(se.iridescenceThicknessMap.value=re.iridescenceThicknessMap,v(re.iridescenceThicknessMap,se.iridescenceThicknessMapTransform))),re.transmission>0&&(se.transmission.value=re.transmission,se.transmissionSamplerMap.value=fe.texture,se.transmissionSamplerSize.value.set(fe.width,fe.height),re.transmissionMap&&(se.transmissionMap.value=re.transmissionMap,v(re.transmissionMap,se.transmissionMapTransform)),se.thickness.value=re.thickness,re.thicknessMap&&(se.thicknessMap.value=re.thicknessMap,v(re.thicknessMap,se.thicknessMapTransform)),se.attenuationDistance.value=re.attenuationDistance,se.attenuationColor.value.copy(re.attenuationColor)),re.anisotropy>0&&(se.anisotropyVector.value.set(re.anisotropy*Math.cos(re.anisotropyRotation),re.anisotropy*Math.sin(re.anisotropyRotation)),re.anisotropyMap&&(se.anisotropyMap.value=re.anisotropyMap,v(re.anisotropyMap,se.anisotropyMapTransform))),se.specularIntensity.value=re.specularIntensity,se.specularColor.value.copy(re.specularColor),re.specularColorMap&&(se.specularColorMap.value=re.specularColorMap,v(re.specularColorMap,se.specularColorMapTransform)),re.specularIntensityMap&&(se.specularIntensityMap.value=re.specularIntensityMap,v(re.specularIntensityMap,se.specularIntensityMapTransform))}function ie(se,re){re.matcap&&(se.matcap.value=re.matcap)}function oe(se,re){const fe=d.get(re).light;se.referencePosition.value.setFromMatrixPosition(fe.matrixWorld),se.nearDistance.value=fe.shadow.camera.near,se.farDistance.value=fe.shadow.camera.far}return{refreshFogUniforms:A,refreshMaterialUniforms:C}}function WebGLUniformsGroups(_,d,v,A){let C={},w={},T=[];const R=_.getParameter(_.MAX_UNIFORM_BUFFER_BINDINGS);function G(fe,ue){const ge=ue.program;A.uniformBlockBinding(fe,ge)}function I(fe,ue){let ge=C[fe.id];ge===void 0&&(ie(fe),ge=z(fe),C[fe.id]=ge,fe.addEventListener("dispose",se));const ye=ue.program;A.updateUBOMapping(fe,ye);const be=d.render.frame;w[fe.id]!==be&&(Y(fe),w[fe.id]=be)}function z(fe){const ue=H();fe.__bindingPointIndex=ue;const ge=_.createBuffer(),ye=fe.__size,be=fe.usage;return _.bindBuffer(_.UNIFORM_BUFFER,ge),_.bufferData(_.UNIFORM_BUFFER,ye,be),_.bindBuffer(_.UNIFORM_BUFFER,null),_.bindBufferBase(_.UNIFORM_BUFFER,ue,ge),ge}function H(){for(let fe=0;fe<R;fe++)if(T.indexOf(fe)===-1)return T.push(fe),fe;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Y(fe){const ue=C[fe.id],ge=fe.uniforms,ye=fe.__cache;_.bindBuffer(_.UNIFORM_BUFFER,ue);for(let be=0,ve=ge.length;be<ve;be++){const Me=Array.isArray(ge[be])?ge[be]:[ge[be]];for(let we=0,Be=Me.length;we<Be;we++){const De=Me[we];if(ee(De,be,we,ye)===!0){const Fe=De.__offset,Oe=Array.isArray(De.value)?De.value:[De.value];let Ge=0;for(let ze=0;ze<Oe.length;ze++){const je=Oe[ze],He=oe(je);typeof je=="number"||typeof je=="boolean"?(De.__data[0]=je,_.bufferSubData(_.UNIFORM_BUFFER,Fe+Ge,De.__data)):je.isMatrix3?(De.__data[0]=je.elements[0],De.__data[1]=je.elements[1],De.__data[2]=je.elements[2],De.__data[3]=0,De.__data[4]=je.elements[3],De.__data[5]=je.elements[4],De.__data[6]=je.elements[5],De.__data[7]=0,De.__data[8]=je.elements[6],De.__data[9]=je.elements[7],De.__data[10]=je.elements[8],De.__data[11]=0):(je.toArray(De.__data,Ge),Ge+=He.storage/Float32Array.BYTES_PER_ELEMENT)}_.bufferSubData(_.UNIFORM_BUFFER,Fe,De.__data)}}}_.bindBuffer(_.UNIFORM_BUFFER,null)}function ee(fe,ue,ge,ye){const be=fe.value,ve=ue+"_"+ge;if(ye[ve]===void 0)return typeof be=="number"||typeof be=="boolean"?ye[ve]=be:ye[ve]=be.clone(),!0;{const Me=ye[ve];if(typeof be=="number"||typeof be=="boolean"){if(Me!==be)return ye[ve]=be,!0}else if(Me.equals(be)===!1)return Me.copy(be),!0}return!1}function ie(fe){const ue=fe.uniforms;let ge=0;const ye=16;for(let ve=0,Me=ue.length;ve<Me;ve++){const we=Array.isArray(ue[ve])?ue[ve]:[ue[ve]];for(let Be=0,De=we.length;Be<De;Be++){const Fe=we[Be],Oe=Array.isArray(Fe.value)?Fe.value:[Fe.value];for(let Ge=0,ze=Oe.length;Ge<ze;Ge++){const je=Oe[Ge],He=oe(je),Xe=ge%ye,$e=Xe%He.boundary,We=Xe+$e;ge+=$e,We!==0&&ye-We<He.storage&&(ge+=ye-We),Fe.__data=new Float32Array(He.storage/Float32Array.BYTES_PER_ELEMENT),Fe.__offset=ge,ge+=He.storage}}}const be=ge%ye;return be>0&&(ge+=ye-be),fe.__size=ge,fe.__cache={},this}function oe(fe){const ue={boundary:0,storage:0};return typeof fe=="number"||typeof fe=="boolean"?(ue.boundary=4,ue.storage=4):fe.isVector2?(ue.boundary=8,ue.storage=8):fe.isVector3||fe.isColor?(ue.boundary=16,ue.storage=12):fe.isVector4?(ue.boundary=16,ue.storage=16):fe.isMatrix3?(ue.boundary=48,ue.storage=48):fe.isMatrix4?(ue.boundary=64,ue.storage=64):fe.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",fe),ue}function se(fe){const ue=fe.target;ue.removeEventListener("dispose",se);const ge=T.indexOf(ue.__bindingPointIndex);T.splice(ge,1),_.deleteBuffer(C[ue.id]),delete C[ue.id],delete w[ue.id]}function re(){for(const fe in C)_.deleteBuffer(C[fe]);T=[],C={},w={}}return{bind:G,update:I,dispose:re}}class WebGLRenderer{constructor(d={}){const{canvas:v=createCanvasElement(),context:A=null,depth:C=!0,stencil:w=!1,alpha:T=!1,antialias:R=!1,premultipliedAlpha:G=!0,preserveDrawingBuffer:I=!1,powerPreference:z="default",failIfMajorPerformanceCaveat:H=!1,reversedDepthBuffer:Y=!1}=d;this.isWebGLRenderer=!0;let ee;if(A!==null){if(typeof WebGLRenderingContext<"u"&&A instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ee=A.getContextAttributes().alpha}else ee=T;const ie=new Uint32Array(4),oe=new Int32Array(4);let se=null,re=null;const fe=[],ue=[];this.domElement=v,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const ge=this;let ye=!1;this._outputColorSpace=SRGBColorSpace$1;let be=0,ve=0,Me=null,we=-1,Be=null;const De=new Vector4,Fe=new Vector4;let Oe=null;const Ge=new Color(0);let ze=0,je=v.width,He=v.height,Xe=1,$e=null,We=null;const nt=new Vector4(0,0,je,He),Qt=new Vector4(0,0,je,He);let Wt=!1;const Bn=new Frustum;let Lt=!1,Mn=!1;const cr=new Matrix4,In=new Vector3,Zn=new Vector4,$n={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Rn=!1;function Dn(){return Me===null?Xe:1}let Gt=A;function Jn(rt,ln){return v.getContext(rt,ln)}try{const rt={alpha:!0,depth:C,stencil:w,antialias:R,premultipliedAlpha:G,preserveDrawingBuffer:I,powerPreference:z,failIfMajorPerformanceCaveat:H};if("setAttribute"in v&&v.setAttribute("data-engine",`three.js r${REVISION}`),v.addEventListener("webglcontextlost",ui,!1),v.addEventListener("webglcontextrestored",vi,!1),v.addEventListener("webglcontextcreationerror",qr,!1),Gt===null){const ln="webgl2";if(Gt=Jn(ln,rt),Gt===null)throw Jn(ln)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(rt){throw console.error("THREE.WebGLRenderer: "+rt.message),rt}let Nn,Xn,jn,Un,bn,Kn,Qn,pr,fn,Mt,yn,kn,nr,dr,Qr,Wr,Gr,Hr,Kr,ti,Mi,Ci,oi,Ii;function wr(){Nn=new WebGLExtensions(Gt),Nn.init(),Ci=new WebGLUtils(Gt,Nn),Xn=new WebGLCapabilities(Gt,Nn,d,Ci),jn=new WebGLState(Gt,Nn),Xn.reversedDepthBuffer&&Y&&jn.buffers.depth.setReversed(!0),Un=new WebGLInfo(Gt),bn=new WebGLProperties,Kn=new WebGLTextures(Gt,Nn,jn,bn,Xn,Ci,Un),Qn=new WebGLCubeMaps(ge),pr=new WebGLCubeUVMaps(ge),fn=new WebGLAttributes(Gt),oi=new WebGLBindingStates(Gt,fn),Mt=new WebGLGeometries(Gt,fn,Un,oi),yn=new WebGLObjects(Gt,Mt,fn,Un),Kr=new WebGLMorphtargets(Gt,Xn,Kn),Wr=new WebGLClipping(bn),kn=new WebGLPrograms(ge,Qn,pr,Nn,Xn,oi,Wr),nr=new WebGLMaterials(ge,bn),dr=new WebGLRenderLists,Qr=new WebGLRenderStates(Nn),Hr=new WebGLBackground(ge,Qn,pr,jn,yn,ee,G),Gr=new WebGLShadowMap(ge,yn,Xn),Ii=new WebGLUniformsGroups(Gt,Un,Xn,jn),ti=new WebGLBufferRenderer(Gt,Nn,Un),Mi=new WebGLIndexedBufferRenderer(Gt,Nn,Un),Un.programs=kn.programs,ge.capabilities=Xn,ge.extensions=Nn,ge.properties=bn,ge.renderLists=dr,ge.shadowMap=Gr,ge.state=jn,ge.info=Un}wr();const Br=new WebXRManager(ge,Gt);this.xr=Br,this.getContext=function(){return Gt},this.getContextAttributes=function(){return Gt.getContextAttributes()},this.forceContextLoss=function(){const rt=Nn.get("WEBGL_lose_context");rt&&rt.loseContext()},this.forceContextRestore=function(){const rt=Nn.get("WEBGL_lose_context");rt&&rt.restoreContext()},this.getPixelRatio=function(){return Xe},this.setPixelRatio=function(rt){rt!==void 0&&(Xe=rt,this.setSize(je,He,!1))},this.getSize=function(rt){return rt.set(je,He)},this.setSize=function(rt,ln,Cn=!0){if(Br.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}je=rt,He=ln,v.width=Math.floor(rt*Xe),v.height=Math.floor(ln*Xe),Cn===!0&&(v.style.width=rt+"px",v.style.height=ln+"px"),this.setViewport(0,0,rt,ln)},this.getDrawingBufferSize=function(rt){return rt.set(je*Xe,He*Xe).floor()},this.setDrawingBufferSize=function(rt,ln,Cn){je=rt,He=ln,Xe=Cn,v.width=Math.floor(rt*Cn),v.height=Math.floor(ln*Cn),this.setViewport(0,0,rt,ln)},this.getCurrentViewport=function(rt){return rt.copy(De)},this.getViewport=function(rt){return rt.copy(nt)},this.setViewport=function(rt,ln,Cn,zn){rt.isVector4?nt.set(rt.x,rt.y,rt.z,rt.w):nt.set(rt,ln,Cn,zn),jn.viewport(De.copy(nt).multiplyScalar(Xe).round())},this.getScissor=function(rt){return rt.copy(Qt)},this.setScissor=function(rt,ln,Cn,zn){rt.isVector4?Qt.set(rt.x,rt.y,rt.z,rt.w):Qt.set(rt,ln,Cn,zn),jn.scissor(Fe.copy(Qt).multiplyScalar(Xe).round())},this.getScissorTest=function(){return Wt},this.setScissorTest=function(rt){jn.setScissorTest(Wt=rt)},this.setOpaqueSort=function(rt){$e=rt},this.setTransparentSort=function(rt){We=rt},this.getClearColor=function(rt){return rt.copy(Hr.getClearColor())},this.setClearColor=function(){Hr.setClearColor(...arguments)},this.getClearAlpha=function(){return Hr.getClearAlpha()},this.setClearAlpha=function(){Hr.setClearAlpha(...arguments)},this.clear=function(rt=!0,ln=!0,Cn=!0){let zn=0;if(rt){let Sn=!1;if(Me!==null){const yr=Me.texture.format;Sn=yr===RGBAIntegerFormat||yr===RGIntegerFormat||yr===RedIntegerFormat}if(Sn){const yr=Me.texture.type,ur=yr===UnsignedByteType||yr===UnsignedIntType||yr===UnsignedShortType||yr===UnsignedInt248Type||yr===UnsignedShort4444Type||yr===UnsignedShort5551Type,hr=Hr.getClearColor(),fr=Hr.getClearAlpha(),Sr=hr.r,Lr=hr.g,Nr=hr.b;ur?(ie[0]=Sr,ie[1]=Lr,ie[2]=Nr,ie[3]=fr,Gt.clearBufferuiv(Gt.COLOR,0,ie)):(oe[0]=Sr,oe[1]=Lr,oe[2]=Nr,oe[3]=fr,Gt.clearBufferiv(Gt.COLOR,0,oe))}else zn|=Gt.COLOR_BUFFER_BIT}ln&&(zn|=Gt.DEPTH_BUFFER_BIT),Cn&&(zn|=Gt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Gt.clear(zn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){v.removeEventListener("webglcontextlost",ui,!1),v.removeEventListener("webglcontextrestored",vi,!1),v.removeEventListener("webglcontextcreationerror",qr,!1),Hr.dispose(),dr.dispose(),Qr.dispose(),bn.dispose(),Qn.dispose(),pr.dispose(),yn.dispose(),oi.dispose(),Ii.dispose(),kn.dispose(),Br.dispose(),Br.removeEventListener("sessionstart",vr),Br.removeEventListener("sessionend",Ar),Tn.stop()};function ui(rt){rt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ye=!0}function vi(){console.log("THREE.WebGLRenderer: Context Restored."),ye=!1;const rt=Un.autoReset,ln=Gr.enabled,Cn=Gr.autoUpdate,zn=Gr.needsUpdate,Sn=Gr.type;wr(),Un.autoReset=rt,Gr.enabled=ln,Gr.autoUpdate=Cn,Gr.needsUpdate=zn,Gr.type=Sn}function qr(rt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",rt.statusMessage)}function br(rt){const ln=rt.target;ln.removeEventListener("dispose",br),er(ln)}function er(rt){Gn(rt),bn.remove(rt)}function Gn(rt){const ln=bn.get(rt).programs;ln!==void 0&&(ln.forEach(function(Cn){kn.releaseProgram(Cn)}),rt.isShaderMaterial&&kn.releaseShaderCache(rt))}this.renderBufferDirect=function(rt,ln,Cn,zn,Sn,yr){ln===null&&(ln=$n);const ur=Sn.isMesh&&Sn.matrixWorld.determinant()<0,hr=At(rt,ln,Cn,zn,Sn);jn.setMaterial(zn,ur);let fr=Cn.index,Sr=1;if(zn.wireframe===!0){if(fr=Mt.getWireframeAttribute(Cn),fr===void 0)return;Sr=2}const Lr=Cn.drawRange,Nr=Cn.attributes.position;let xr=Lr.start*Sr,Cr=(Lr.start+Lr.count)*Sr;yr!==null&&(xr=Math.max(xr,yr.start*Sr),Cr=Math.min(Cr,(yr.start+yr.count)*Sr)),fr!==null?(xr=Math.max(xr,0),Cr=Math.min(Cr,fr.count)):Nr!=null&&(xr=Math.max(xr,0),Cr=Math.min(Cr,Nr.count));const Or=Cr-xr;if(Or<0||Or===1/0)return;oi.setup(Sn,zn,hr,Cn,fr);let Ur,Pr=ti;if(fr!==null&&(Ur=fn.get(fr),Pr=Mi,Pr.setIndex(Ur)),Sn.isMesh)zn.wireframe===!0?(jn.setLineWidth(zn.wireframeLinewidth*Dn()),Pr.setMode(Gt.LINES)):Pr.setMode(Gt.TRIANGLES);else if(Sn.isLine){let Vr=zn.linewidth;Vr===void 0&&(Vr=1),jn.setLineWidth(Vr*Dn()),Sn.isLineSegments?Pr.setMode(Gt.LINES):Sn.isLineLoop?Pr.setMode(Gt.LINE_LOOP):Pr.setMode(Gt.LINE_STRIP)}else Sn.isPoints?Pr.setMode(Gt.POINTS):Sn.isSprite&&Pr.setMode(Gt.TRIANGLES);if(Sn.isBatchedMesh)if(Sn._multiDrawInstances!==null)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Pr.renderMultiDrawInstances(Sn._multiDrawStarts,Sn._multiDrawCounts,Sn._multiDrawCount,Sn._multiDrawInstances);else if(Nn.get("WEBGL_multi_draw"))Pr.renderMultiDraw(Sn._multiDrawStarts,Sn._multiDrawCounts,Sn._multiDrawCount);else{const Vr=Sn._multiDrawStarts,xi=Sn._multiDrawCounts,Ai=Sn._multiDrawCount,Ti=fr?fn.get(fr).bytesPerElement:1,Si=bn.get(zn).currentProgram.getUniforms();for(let ir=0;ir<Ai;ir++)Si.setValue(Gt,"_gl_DrawID",ir),Pr.render(Vr[ir]/Ti,xi[ir])}else if(Sn.isInstancedMesh)Pr.renderInstances(xr,Or,Sn.count);else if(Cn.isInstancedBufferGeometry){const Vr=Cn._maxInstanceCount!==void 0?Cn._maxInstanceCount:1/0,xi=Math.min(Cn.instanceCount,Vr);Pr.renderInstances(xr,Or,xi)}else Pr.render(xr,Or)};function Er(rt,ln,Cn){rt.transparent===!0&&rt.side===DoubleSide&&rt.forceSinglePass===!1?(rt.side=BackSide,rt.needsUpdate=!0,sr(rt,ln,Cn),rt.side=FrontSide,rt.needsUpdate=!0,sr(rt,ln,Cn),rt.side=DoubleSide):sr(rt,ln,Cn)}this.compile=function(rt,ln,Cn=null){Cn===null&&(Cn=rt),re=Qr.get(Cn),re.init(ln),ue.push(re),Cn.traverseVisible(function(Sn){Sn.isLight&&Sn.layers.test(ln.layers)&&(re.pushLight(Sn),Sn.castShadow&&re.pushShadow(Sn))}),rt!==Cn&&rt.traverseVisible(function(Sn){Sn.isLight&&Sn.layers.test(ln.layers)&&(re.pushLight(Sn),Sn.castShadow&&re.pushShadow(Sn))}),re.setupLights();const zn=new Set;return rt.traverse(function(Sn){if(!(Sn.isMesh||Sn.isPoints||Sn.isLine||Sn.isSprite))return;const yr=Sn.material;if(yr)if(Array.isArray(yr))for(let ur=0;ur<yr.length;ur++){const hr=yr[ur];Er(hr,Cn,Sn),zn.add(hr)}else Er(yr,Cn,Sn),zn.add(yr)}),re=ue.pop(),zn},this.compileAsync=function(rt,ln,Cn=null){const zn=this.compile(rt,ln,Cn);return new Promise(Sn=>{function yr(){if(zn.forEach(function(ur){bn.get(ur).currentProgram.isReady()&&zn.delete(ur)}),zn.size===0){Sn(rt);return}setTimeout(yr,10)}Nn.get("KHR_parallel_shader_compile")!==null?yr():setTimeout(yr,10)})};let mn=null;function tr(rt){mn&&mn(rt)}function vr(){Tn.stop()}function Ar(){Tn.start()}const Tn=new WebGLAnimation;Tn.setAnimationLoop(tr),typeof self<"u"&&Tn.setContext(self),this.setAnimationLoop=function(rt){mn=rt,Br.setAnimationLoop(rt),rt===null?Tn.stop():Tn.start()},Br.addEventListener("sessionstart",vr),Br.addEventListener("sessionend",Ar),this.render=function(rt,ln){if(ln!==void 0&&ln.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(ye===!0)return;if(rt.matrixWorldAutoUpdate===!0&&rt.updateMatrixWorld(),ln.parent===null&&ln.matrixWorldAutoUpdate===!0&&ln.updateMatrixWorld(),Br.enabled===!0&&Br.isPresenting===!0&&(Br.cameraAutoUpdate===!0&&Br.updateCamera(ln),ln=Br.getCamera()),rt.isScene===!0&&rt.onBeforeRender(ge,rt,ln,Me),re=Qr.get(rt,ue.length),re.init(ln),ue.push(re),cr.multiplyMatrices(ln.projectionMatrix,ln.matrixWorldInverse),Bn.setFromProjectionMatrix(cr,WebGLCoordinateSystem,ln.reversedDepth),Mn=this.localClippingEnabled,Lt=Wr.init(this.clippingPlanes,Mn),se=dr.get(rt,fe.length),se.init(),fe.push(se),Br.enabled===!0&&Br.isPresenting===!0){const yr=ge.xr.getDepthSensingMesh();yr!==null&&tt(yr,ln,-1/0,ge.sortObjects)}tt(rt,ln,0,ge.sortObjects),se.finish(),ge.sortObjects===!0&&se.sort($e,We),Rn=Br.enabled===!1||Br.isPresenting===!1||Br.hasDepthSensing()===!1,Rn&&Hr.addToRenderList(se,rt),this.info.render.frame++,Lt===!0&&Wr.beginShadows();const Cn=re.state.shadowsArray;Gr.render(Cn,rt,ln),Lt===!0&&Wr.endShadows(),this.info.autoReset===!0&&this.info.reset();const zn=se.opaque,Sn=se.transmissive;if(re.setupLights(),ln.isArrayCamera){const yr=ln.cameras;if(Sn.length>0)for(let ur=0,hr=yr.length;ur<hr;ur++){const fr=yr[ur];dn(zn,Sn,rt,fr)}Rn&&Hr.render(rt);for(let ur=0,hr=yr.length;ur<hr;ur++){const fr=yr[ur];$t(se,rt,fr,fr.viewport)}}else Sn.length>0&&dn(zn,Sn,rt,ln),Rn&&Hr.render(rt),$t(se,rt,ln);Me!==null&&ve===0&&(Kn.updateMultisampleRenderTarget(Me),Kn.updateRenderTargetMipmap(Me)),rt.isScene===!0&&rt.onAfterRender(ge,rt,ln),oi.resetDefaultState(),we=-1,Be=null,ue.pop(),ue.length>0?(re=ue[ue.length-1],Lt===!0&&Wr.setGlobalState(ge.clippingPlanes,re.state.camera)):re=null,fe.pop(),fe.length>0?se=fe[fe.length-1]:se=null};function tt(rt,ln,Cn,zn){if(rt.visible===!1)return;if(rt.layers.test(ln.layers)){if(rt.isGroup)Cn=rt.renderOrder;else if(rt.isLOD)rt.autoUpdate===!0&&rt.update(ln);else if(rt.isLight)re.pushLight(rt),rt.castShadow&&re.pushShadow(rt);else if(rt.isSprite){if(!rt.frustumCulled||Bn.intersectsSprite(rt)){zn&&Zn.setFromMatrixPosition(rt.matrixWorld).applyMatrix4(cr);const ur=yn.update(rt),hr=rt.material;hr.visible&&se.push(rt,ur,hr,Cn,Zn.z,null)}}else if((rt.isMesh||rt.isLine||rt.isPoints)&&(!rt.frustumCulled||Bn.intersectsObject(rt))){const ur=yn.update(rt),hr=rt.material;if(zn&&(rt.boundingSphere!==void 0?(rt.boundingSphere===null&&rt.computeBoundingSphere(),Zn.copy(rt.boundingSphere.center)):(ur.boundingSphere===null&&ur.computeBoundingSphere(),Zn.copy(ur.boundingSphere.center)),Zn.applyMatrix4(rt.matrixWorld).applyMatrix4(cr)),Array.isArray(hr)){const fr=ur.groups;for(let Sr=0,Lr=fr.length;Sr<Lr;Sr++){const Nr=fr[Sr],xr=hr[Nr.materialIndex];xr&&xr.visible&&se.push(rt,ur,xr,Cn,Zn.z,Nr)}}else hr.visible&&se.push(rt,ur,hr,Cn,Zn.z,null)}}const yr=rt.children;for(let ur=0,hr=yr.length;ur<hr;ur++)tt(yr[ur],ln,Cn,zn)}function $t(rt,ln,Cn,zn){const Sn=rt.opaque,yr=rt.transmissive,ur=rt.transparent;re.setupLightsView(Cn),Lt===!0&&Wr.setGlobalState(ge.clippingPlanes,Cn),zn&&jn.viewport(De.copy(zn)),Sn.length>0&&Qe(Sn,ln,Cn),yr.length>0&&Qe(yr,ln,Cn),ur.length>0&&Qe(ur,ln,Cn),jn.buffers.depth.setTest(!0),jn.buffers.depth.setMask(!0),jn.buffers.color.setMask(!0),jn.setPolygonOffset(!1)}function dn(rt,ln,Cn,zn){if((Cn.isScene===!0?Cn.overrideMaterial:null)!==null)return;re.state.transmissionRenderTarget[zn.id]===void 0&&(re.state.transmissionRenderTarget[zn.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Nn.has("EXT_color_buffer_half_float")||Nn.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:w,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const yr=re.state.transmissionRenderTarget[zn.id],ur=zn.viewport||De;yr.setSize(ur.z*ge.transmissionResolutionScale,ur.w*ge.transmissionResolutionScale);const hr=ge.getRenderTarget(),fr=ge.getActiveCubeFace(),Sr=ge.getActiveMipmapLevel();ge.setRenderTarget(yr),ge.getClearColor(Ge),ze=ge.getClearAlpha(),ze<1&&ge.setClearColor(16777215,.5),ge.clear(),Rn&&Hr.render(Cn);const Lr=ge.toneMapping;ge.toneMapping=NoToneMapping;const Nr=zn.viewport;if(zn.viewport!==void 0&&(zn.viewport=void 0),re.setupLightsView(zn),Lt===!0&&Wr.setGlobalState(ge.clippingPlanes,zn),Qe(rt,Cn,zn),Kn.updateMultisampleRenderTarget(yr),Kn.updateRenderTargetMipmap(yr),Nn.has("WEBGL_multisampled_render_to_texture")===!1){let xr=!1;for(let Cr=0,Or=ln.length;Cr<Or;Cr++){const Ur=ln[Cr],Pr=Ur.object,Vr=Ur.geometry,xi=Ur.material,Ai=Ur.group;if(xi.side===DoubleSide&&Pr.layers.test(zn.layers)){const Ti=xi.side;xi.side=BackSide,xi.needsUpdate=!0,gn(Pr,Cn,zn,Vr,xi,Ai),xi.side=Ti,xi.needsUpdate=!0,xr=!0}}xr===!0&&(Kn.updateMultisampleRenderTarget(yr),Kn.updateRenderTargetMipmap(yr))}ge.setRenderTarget(hr,fr,Sr),ge.setClearColor(Ge,ze),Nr!==void 0&&(zn.viewport=Nr),ge.toneMapping=Lr}function Qe(rt,ln,Cn){const zn=ln.isScene===!0?ln.overrideMaterial:null;for(let Sn=0,yr=rt.length;Sn<yr;Sn++){const ur=rt[Sn],hr=ur.object,fr=ur.geometry,Sr=ur.group;let Lr=ur.material;Lr.allowOverride===!0&&zn!==null&&(Lr=zn),hr.layers.test(Cn.layers)&&gn(hr,ln,Cn,fr,Lr,Sr)}}function gn(rt,ln,Cn,zn,Sn,yr){rt.onBeforeRender(ge,ln,Cn,zn,Sn,yr),rt.modelViewMatrix.multiplyMatrices(Cn.matrixWorldInverse,rt.matrixWorld),rt.normalMatrix.getNormalMatrix(rt.modelViewMatrix),Sn.onBeforeRender(ge,ln,Cn,zn,rt,yr),Sn.transparent===!0&&Sn.side===DoubleSide&&Sn.forceSinglePass===!1?(Sn.side=BackSide,Sn.needsUpdate=!0,ge.renderBufferDirect(Cn,ln,zn,Sn,rt,yr),Sn.side=FrontSide,Sn.needsUpdate=!0,ge.renderBufferDirect(Cn,ln,zn,Sn,rt,yr),Sn.side=DoubleSide):ge.renderBufferDirect(Cn,ln,zn,Sn,rt,yr),rt.onAfterRender(ge,ln,Cn,zn,Sn,yr)}function sr(rt,ln,Cn){ln.isScene!==!0&&(ln=$n);const zn=bn.get(rt),Sn=re.state.lights,yr=re.state.shadowsArray,ur=Sn.state.version,hr=kn.getParameters(rt,Sn.state,yr,ln,Cn),fr=kn.getProgramCacheKey(hr);let Sr=zn.programs;zn.environment=rt.isMeshStandardMaterial?ln.environment:null,zn.fog=ln.fog,zn.envMap=(rt.isMeshStandardMaterial?pr:Qn).get(rt.envMap||zn.environment),zn.envMapRotation=zn.environment!==null&&rt.envMap===null?ln.environmentRotation:rt.envMapRotation,Sr===void 0&&(rt.addEventListener("dispose",br),Sr=new Map,zn.programs=Sr);let Lr=Sr.get(fr);if(Lr!==void 0){if(zn.currentProgram===Lr&&zn.lightsStateVersion===ur)return it(rt,hr),Lr}else hr.uniforms=kn.getUniforms(rt),rt.onBeforeCompile(hr,ge),Lr=kn.acquireProgram(hr,fr),Sr.set(fr,Lr),zn.uniforms=hr.uniforms;const Nr=zn.uniforms;return(!rt.isShaderMaterial&&!rt.isRawShaderMaterial||rt.clipping===!0)&&(Nr.clippingPlanes=Wr.uniform),it(rt,hr),zn.needsLights=Ft(rt),zn.lightsStateVersion=ur,zn.needsLights&&(Nr.ambientLightColor.value=Sn.state.ambient,Nr.lightProbe.value=Sn.state.probe,Nr.directionalLights.value=Sn.state.directional,Nr.directionalLightShadows.value=Sn.state.directionalShadow,Nr.spotLights.value=Sn.state.spot,Nr.spotLightShadows.value=Sn.state.spotShadow,Nr.rectAreaLights.value=Sn.state.rectArea,Nr.ltc_1.value=Sn.state.rectAreaLTC1,Nr.ltc_2.value=Sn.state.rectAreaLTC2,Nr.pointLights.value=Sn.state.point,Nr.pointLightShadows.value=Sn.state.pointShadow,Nr.hemisphereLights.value=Sn.state.hemi,Nr.directionalShadowMap.value=Sn.state.directionalShadowMap,Nr.directionalShadowMatrix.value=Sn.state.directionalShadowMatrix,Nr.spotShadowMap.value=Sn.state.spotShadowMap,Nr.spotLightMatrix.value=Sn.state.spotLightMatrix,Nr.spotLightMap.value=Sn.state.spotLightMap,Nr.pointShadowMap.value=Sn.state.pointShadowMap,Nr.pointShadowMatrix.value=Sn.state.pointShadowMatrix),zn.currentProgram=Lr,zn.uniformsList=null,Lr}function rr(rt){if(rt.uniformsList===null){const ln=rt.currentProgram.getUniforms();rt.uniformsList=WebGLUniforms.seqWithValue(ln.seq,rt.uniforms)}return rt.uniformsList}function it(rt,ln){const Cn=bn.get(rt);Cn.outputColorSpace=ln.outputColorSpace,Cn.batching=ln.batching,Cn.batchingColor=ln.batchingColor,Cn.instancing=ln.instancing,Cn.instancingColor=ln.instancingColor,Cn.instancingMorph=ln.instancingMorph,Cn.skinning=ln.skinning,Cn.morphTargets=ln.morphTargets,Cn.morphNormals=ln.morphNormals,Cn.morphColors=ln.morphColors,Cn.morphTargetsCount=ln.morphTargetsCount,Cn.numClippingPlanes=ln.numClippingPlanes,Cn.numIntersection=ln.numClipIntersection,Cn.vertexAlphas=ln.vertexAlphas,Cn.vertexTangents=ln.vertexTangents,Cn.toneMapping=ln.toneMapping}function At(rt,ln,Cn,zn,Sn){ln.isScene!==!0&&(ln=$n),Kn.resetTextureUnits();const yr=ln.fog,ur=zn.isMeshStandardMaterial?ln.environment:null,hr=Me===null?ge.outputColorSpace:Me.isXRRenderTarget===!0?Me.texture.colorSpace:LinearSRGBColorSpace$1,fr=(zn.isMeshStandardMaterial?pr:Qn).get(zn.envMap||ur),Sr=zn.vertexColors===!0&&!!Cn.attributes.color&&Cn.attributes.color.itemSize===4,Lr=!!Cn.attributes.tangent&&(!!zn.normalMap||zn.anisotropy>0),Nr=!!Cn.morphAttributes.position,xr=!!Cn.morphAttributes.normal,Cr=!!Cn.morphAttributes.color;let Or=NoToneMapping;zn.toneMapped&&(Me===null||Me.isXRRenderTarget===!0)&&(Or=ge.toneMapping);const Ur=Cn.morphAttributes.position||Cn.morphAttributes.normal||Cn.morphAttributes.color,Pr=Ur!==void 0?Ur.length:0,Vr=bn.get(zn),xi=re.state.lights;if(Lt===!0&&(Mn===!0||rt!==Be)){const Mr=rt===Be&&zn.id===we;Wr.setState(zn,rt,Mr)}let Ai=!1;zn.version===Vr.__version?(Vr.needsLights&&Vr.lightsStateVersion!==xi.state.version||Vr.outputColorSpace!==hr||Sn.isBatchedMesh&&Vr.batching===!1||!Sn.isBatchedMesh&&Vr.batching===!0||Sn.isBatchedMesh&&Vr.batchingColor===!0&&Sn.colorTexture===null||Sn.isBatchedMesh&&Vr.batchingColor===!1&&Sn.colorTexture!==null||Sn.isInstancedMesh&&Vr.instancing===!1||!Sn.isInstancedMesh&&Vr.instancing===!0||Sn.isSkinnedMesh&&Vr.skinning===!1||!Sn.isSkinnedMesh&&Vr.skinning===!0||Sn.isInstancedMesh&&Vr.instancingColor===!0&&Sn.instanceColor===null||Sn.isInstancedMesh&&Vr.instancingColor===!1&&Sn.instanceColor!==null||Sn.isInstancedMesh&&Vr.instancingMorph===!0&&Sn.morphTexture===null||Sn.isInstancedMesh&&Vr.instancingMorph===!1&&Sn.morphTexture!==null||Vr.envMap!==fr||zn.fog===!0&&Vr.fog!==yr||Vr.numClippingPlanes!==void 0&&(Vr.numClippingPlanes!==Wr.numPlanes||Vr.numIntersection!==Wr.numIntersection)||Vr.vertexAlphas!==Sr||Vr.vertexTangents!==Lr||Vr.morphTargets!==Nr||Vr.morphNormals!==xr||Vr.morphColors!==Cr||Vr.toneMapping!==Or||Vr.morphTargetsCount!==Pr)&&(Ai=!0):(Ai=!0,Vr.__version=zn.version);let Ti=Vr.currentProgram;Ai===!0&&(Ti=sr(zn,ln,Sn));let Si=!1,ir=!1,bi=!1;const vn=Ti.getUniforms(),Ln=Vr.uniforms;if(jn.useProgram(Ti.program)&&(Si=!0,ir=!0,bi=!0),zn.id!==we&&(we=zn.id,ir=!0),Si||Be!==rt){jn.buffers.depth.getReversed()&&rt.reversedDepth!==!0&&(rt._reversedDepth=!0,rt.updateProjectionMatrix()),vn.setValue(Gt,"projectionMatrix",rt.projectionMatrix),vn.setValue(Gt,"viewMatrix",rt.matrixWorldInverse);const kr=vn.map.cameraPosition;kr!==void 0&&kr.setValue(Gt,In.setFromMatrixPosition(rt.matrixWorld)),Xn.logarithmicDepthBuffer&&vn.setValue(Gt,"logDepthBufFC",2/(Math.log(rt.far+1)/Math.LN2)),(zn.isMeshPhongMaterial||zn.isMeshToonMaterial||zn.isMeshLambertMaterial||zn.isMeshBasicMaterial||zn.isMeshStandardMaterial||zn.isShaderMaterial)&&vn.setValue(Gt,"isOrthographic",rt.isOrthographicCamera===!0),Be!==rt&&(Be=rt,ir=!0,bi=!0)}if(Sn.isSkinnedMesh){vn.setOptional(Gt,Sn,"bindMatrix"),vn.setOptional(Gt,Sn,"bindMatrixInverse");const Mr=Sn.skeleton;Mr&&(Mr.boneTexture===null&&Mr.computeBoneTexture(),vn.setValue(Gt,"boneTexture",Mr.boneTexture,Kn))}Sn.isBatchedMesh&&(vn.setOptional(Gt,Sn,"batchingTexture"),vn.setValue(Gt,"batchingTexture",Sn._matricesTexture,Kn),vn.setOptional(Gt,Sn,"batchingIdTexture"),vn.setValue(Gt,"batchingIdTexture",Sn._indirectTexture,Kn),vn.setOptional(Gt,Sn,"batchingColorTexture"),Sn._colorsTexture!==null&&vn.setValue(Gt,"batchingColorTexture",Sn._colorsTexture,Kn));const ar=Cn.morphAttributes;if((ar.position!==void 0||ar.normal!==void 0||ar.color!==void 0)&&Kr.update(Sn,Cn,Ti),(ir||Vr.receiveShadow!==Sn.receiveShadow)&&(Vr.receiveShadow=Sn.receiveShadow,vn.setValue(Gt,"receiveShadow",Sn.receiveShadow)),zn.isMeshGouraudMaterial&&zn.envMap!==null&&(Ln.envMap.value=fr,Ln.flipEnvMap.value=fr.isCubeTexture&&fr.isRenderTargetTexture===!1?-1:1),zn.isMeshStandardMaterial&&zn.envMap===null&&ln.environment!==null&&(Ln.envMapIntensity.value=ln.environmentIntensity),ir&&(vn.setValue(Gt,"toneMappingExposure",ge.toneMappingExposure),Vr.needsLights&&An(Ln,bi),yr&&zn.fog===!0&&nr.refreshFogUniforms(Ln,yr),nr.refreshMaterialUniforms(Ln,zn,Xe,He,re.state.transmissionRenderTarget[rt.id]),WebGLUniforms.upload(Gt,rr(Vr),Ln,Kn)),zn.isShaderMaterial&&zn.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(Gt,rr(Vr),Ln,Kn),zn.uniformsNeedUpdate=!1),zn.isSpriteMaterial&&vn.setValue(Gt,"center",Sn.center),vn.setValue(Gt,"modelViewMatrix",Sn.modelViewMatrix),vn.setValue(Gt,"normalMatrix",Sn.normalMatrix),vn.setValue(Gt,"modelMatrix",Sn.matrixWorld),zn.isShaderMaterial||zn.isRawShaderMaterial){const Mr=zn.uniformsGroups;for(let kr=0,gi=Mr.length;kr<gi;kr++){const di=Mr[kr];Ii.update(di,Ti),Ii.bind(di,Ti)}}return Ti}function An(rt,ln){rt.ambientLightColor.needsUpdate=ln,rt.lightProbe.needsUpdate=ln,rt.directionalLights.needsUpdate=ln,rt.directionalLightShadows.needsUpdate=ln,rt.pointLights.needsUpdate=ln,rt.pointLightShadows.needsUpdate=ln,rt.spotLights.needsUpdate=ln,rt.spotLightShadows.needsUpdate=ln,rt.rectAreaLights.needsUpdate=ln,rt.hemisphereLights.needsUpdate=ln}function Ft(rt){return rt.isMeshLambertMaterial||rt.isMeshToonMaterial||rt.isMeshPhongMaterial||rt.isMeshStandardMaterial||rt.isShadowMaterial||rt.isShaderMaterial&&rt.lights===!0}this.getActiveCubeFace=function(){return be},this.getActiveMipmapLevel=function(){return ve},this.getRenderTarget=function(){return Me},this.setRenderTargetTextures=function(rt,ln,Cn){const zn=bn.get(rt);zn.__autoAllocateDepthBuffer=rt.resolveDepthBuffer===!1,zn.__autoAllocateDepthBuffer===!1&&(zn.__useRenderToTexture=!1),bn.get(rt.texture).__webglTexture=ln,bn.get(rt.depthTexture).__webglTexture=zn.__autoAllocateDepthBuffer?void 0:Cn,zn.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(rt,ln){const Cn=bn.get(rt);Cn.__webglFramebuffer=ln,Cn.__useDefaultFramebuffer=ln===void 0};const Hn=Gt.createFramebuffer();this.setRenderTarget=function(rt,ln=0,Cn=0){Me=rt,be=ln,ve=Cn;let zn=!0,Sn=null,yr=!1,ur=!1;if(rt){const fr=bn.get(rt);if(fr.__useDefaultFramebuffer!==void 0)jn.bindFramebuffer(Gt.FRAMEBUFFER,null),zn=!1;else if(fr.__webglFramebuffer===void 0)Kn.setupRenderTarget(rt);else if(fr.__hasExternalTextures)Kn.rebindTextures(rt,bn.get(rt.texture).__webglTexture,bn.get(rt.depthTexture).__webglTexture);else if(rt.depthBuffer){const Nr=rt.depthTexture;if(fr.__boundDepthTexture!==Nr){if(Nr!==null&&bn.has(Nr)&&(rt.width!==Nr.image.width||rt.height!==Nr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Kn.setupDepthRenderbuffer(rt)}}const Sr=rt.texture;(Sr.isData3DTexture||Sr.isDataArrayTexture||Sr.isCompressedArrayTexture)&&(ur=!0);const Lr=bn.get(rt).__webglFramebuffer;rt.isWebGLCubeRenderTarget?(Array.isArray(Lr[ln])?Sn=Lr[ln][Cn]:Sn=Lr[ln],yr=!0):rt.samples>0&&Kn.useMultisampledRTT(rt)===!1?Sn=bn.get(rt).__webglMultisampledFramebuffer:Array.isArray(Lr)?Sn=Lr[Cn]:Sn=Lr,De.copy(rt.viewport),Fe.copy(rt.scissor),Oe=rt.scissorTest}else De.copy(nt).multiplyScalar(Xe).floor(),Fe.copy(Qt).multiplyScalar(Xe).floor(),Oe=Wt;if(Cn!==0&&(Sn=Hn),jn.bindFramebuffer(Gt.FRAMEBUFFER,Sn)&&zn&&jn.drawBuffers(rt,Sn),jn.viewport(De),jn.scissor(Fe),jn.setScissorTest(Oe),yr){const fr=bn.get(rt.texture);Gt.framebufferTexture2D(Gt.FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_CUBE_MAP_POSITIVE_X+ln,fr.__webglTexture,Cn)}else if(ur){const fr=ln;for(let Sr=0;Sr<rt.textures.length;Sr++){const Lr=bn.get(rt.textures[Sr]);Gt.framebufferTextureLayer(Gt.FRAMEBUFFER,Gt.COLOR_ATTACHMENT0+Sr,Lr.__webglTexture,Cn,fr)}}else if(rt!==null&&Cn!==0){const fr=bn.get(rt.texture);Gt.framebufferTexture2D(Gt.FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_2D,fr.__webglTexture,Cn)}we=-1},this.readRenderTargetPixels=function(rt,ln,Cn,zn,Sn,yr,ur,hr=0){if(!(rt&&rt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let fr=bn.get(rt).__webglFramebuffer;if(rt.isWebGLCubeRenderTarget&&ur!==void 0&&(fr=fr[ur]),fr){jn.bindFramebuffer(Gt.FRAMEBUFFER,fr);try{const Sr=rt.textures[hr],Lr=Sr.format,Nr=Sr.type;if(!Xn.textureFormatReadable(Lr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Xn.textureTypeReadable(Nr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ln>=0&&ln<=rt.width-zn&&Cn>=0&&Cn<=rt.height-Sn&&(rt.textures.length>1&&Gt.readBuffer(Gt.COLOR_ATTACHMENT0+hr),Gt.readPixels(ln,Cn,zn,Sn,Ci.convert(Lr),Ci.convert(Nr),yr))}finally{const Sr=Me!==null?bn.get(Me).__webglFramebuffer:null;jn.bindFramebuffer(Gt.FRAMEBUFFER,Sr)}}},this.readRenderTargetPixelsAsync=async function(rt,ln,Cn,zn,Sn,yr,ur,hr=0){if(!(rt&&rt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let fr=bn.get(rt).__webglFramebuffer;if(rt.isWebGLCubeRenderTarget&&ur!==void 0&&(fr=fr[ur]),fr)if(ln>=0&&ln<=rt.width-zn&&Cn>=0&&Cn<=rt.height-Sn){jn.bindFramebuffer(Gt.FRAMEBUFFER,fr);const Sr=rt.textures[hr],Lr=Sr.format,Nr=Sr.type;if(!Xn.textureFormatReadable(Lr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xn.textureTypeReadable(Nr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const xr=Gt.createBuffer();Gt.bindBuffer(Gt.PIXEL_PACK_BUFFER,xr),Gt.bufferData(Gt.PIXEL_PACK_BUFFER,yr.byteLength,Gt.STREAM_READ),rt.textures.length>1&&Gt.readBuffer(Gt.COLOR_ATTACHMENT0+hr),Gt.readPixels(ln,Cn,zn,Sn,Ci.convert(Lr),Ci.convert(Nr),0);const Cr=Me!==null?bn.get(Me).__webglFramebuffer:null;jn.bindFramebuffer(Gt.FRAMEBUFFER,Cr);const Or=Gt.fenceSync(Gt.SYNC_GPU_COMMANDS_COMPLETE,0);return Gt.flush(),await probeAsync(Gt,Or,4),Gt.bindBuffer(Gt.PIXEL_PACK_BUFFER,xr),Gt.getBufferSubData(Gt.PIXEL_PACK_BUFFER,0,yr),Gt.deleteBuffer(xr),Gt.deleteSync(Or),yr}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(rt,ln=null,Cn=0){const zn=Math.pow(2,-Cn),Sn=Math.floor(rt.image.width*zn),yr=Math.floor(rt.image.height*zn),ur=ln!==null?ln.x:0,hr=ln!==null?ln.y:0;Kn.setTexture2D(rt,0),Gt.copyTexSubImage2D(Gt.TEXTURE_2D,Cn,0,0,ur,hr,Sn,yr),jn.unbindTexture()};const wn=Gt.createFramebuffer(),lr=Gt.createFramebuffer();this.copyTextureToTexture=function(rt,ln,Cn=null,zn=null,Sn=0,yr=null){yr===null&&(Sn!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),yr=Sn,Sn=0):yr=0);let ur,hr,fr,Sr,Lr,Nr,xr,Cr,Or;const Ur=rt.isCompressedTexture?rt.mipmaps[yr]:rt.image;if(Cn!==null)ur=Cn.max.x-Cn.min.x,hr=Cn.max.y-Cn.min.y,fr=Cn.isBox3?Cn.max.z-Cn.min.z:1,Sr=Cn.min.x,Lr=Cn.min.y,Nr=Cn.isBox3?Cn.min.z:0;else{const ar=Math.pow(2,-Sn);ur=Math.floor(Ur.width*ar),hr=Math.floor(Ur.height*ar),rt.isDataArrayTexture?fr=Ur.depth:rt.isData3DTexture?fr=Math.floor(Ur.depth*ar):fr=1,Sr=0,Lr=0,Nr=0}zn!==null?(xr=zn.x,Cr=zn.y,Or=zn.z):(xr=0,Cr=0,Or=0);const Pr=Ci.convert(ln.format),Vr=Ci.convert(ln.type);let xi;ln.isData3DTexture?(Kn.setTexture3D(ln,0),xi=Gt.TEXTURE_3D):ln.isDataArrayTexture||ln.isCompressedArrayTexture?(Kn.setTexture2DArray(ln,0),xi=Gt.TEXTURE_2D_ARRAY):(Kn.setTexture2D(ln,0),xi=Gt.TEXTURE_2D),Gt.pixelStorei(Gt.UNPACK_FLIP_Y_WEBGL,ln.flipY),Gt.pixelStorei(Gt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ln.premultiplyAlpha),Gt.pixelStorei(Gt.UNPACK_ALIGNMENT,ln.unpackAlignment);const Ai=Gt.getParameter(Gt.UNPACK_ROW_LENGTH),Ti=Gt.getParameter(Gt.UNPACK_IMAGE_HEIGHT),Si=Gt.getParameter(Gt.UNPACK_SKIP_PIXELS),ir=Gt.getParameter(Gt.UNPACK_SKIP_ROWS),bi=Gt.getParameter(Gt.UNPACK_SKIP_IMAGES);Gt.pixelStorei(Gt.UNPACK_ROW_LENGTH,Ur.width),Gt.pixelStorei(Gt.UNPACK_IMAGE_HEIGHT,Ur.height),Gt.pixelStorei(Gt.UNPACK_SKIP_PIXELS,Sr),Gt.pixelStorei(Gt.UNPACK_SKIP_ROWS,Lr),Gt.pixelStorei(Gt.UNPACK_SKIP_IMAGES,Nr);const vn=rt.isDataArrayTexture||rt.isData3DTexture,Ln=ln.isDataArrayTexture||ln.isData3DTexture;if(rt.isDepthTexture){const ar=bn.get(rt),Mr=bn.get(ln),kr=bn.get(ar.__renderTarget),gi=bn.get(Mr.__renderTarget);jn.bindFramebuffer(Gt.READ_FRAMEBUFFER,kr.__webglFramebuffer),jn.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,gi.__webglFramebuffer);for(let di=0;di<fr;di++)vn&&(Gt.framebufferTextureLayer(Gt.READ_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,bn.get(rt).__webglTexture,Sn,Nr+di),Gt.framebufferTextureLayer(Gt.DRAW_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,bn.get(ln).__webglTexture,yr,Or+di)),Gt.blitFramebuffer(Sr,Lr,ur,hr,xr,Cr,ur,hr,Gt.DEPTH_BUFFER_BIT,Gt.NEAREST);jn.bindFramebuffer(Gt.READ_FRAMEBUFFER,null),jn.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,null)}else if(Sn!==0||rt.isRenderTargetTexture||bn.has(rt)){const ar=bn.get(rt),Mr=bn.get(ln);jn.bindFramebuffer(Gt.READ_FRAMEBUFFER,wn),jn.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,lr);for(let kr=0;kr<fr;kr++)vn?Gt.framebufferTextureLayer(Gt.READ_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,ar.__webglTexture,Sn,Nr+kr):Gt.framebufferTexture2D(Gt.READ_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_2D,ar.__webglTexture,Sn),Ln?Gt.framebufferTextureLayer(Gt.DRAW_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Mr.__webglTexture,yr,Or+kr):Gt.framebufferTexture2D(Gt.DRAW_FRAMEBUFFER,Gt.COLOR_ATTACHMENT0,Gt.TEXTURE_2D,Mr.__webglTexture,yr),Sn!==0?Gt.blitFramebuffer(Sr,Lr,ur,hr,xr,Cr,ur,hr,Gt.COLOR_BUFFER_BIT,Gt.NEAREST):Ln?Gt.copyTexSubImage3D(xi,yr,xr,Cr,Or+kr,Sr,Lr,ur,hr):Gt.copyTexSubImage2D(xi,yr,xr,Cr,Sr,Lr,ur,hr);jn.bindFramebuffer(Gt.READ_FRAMEBUFFER,null),jn.bindFramebuffer(Gt.DRAW_FRAMEBUFFER,null)}else Ln?rt.isDataTexture||rt.isData3DTexture?Gt.texSubImage3D(xi,yr,xr,Cr,Or,ur,hr,fr,Pr,Vr,Ur.data):ln.isCompressedArrayTexture?Gt.compressedTexSubImage3D(xi,yr,xr,Cr,Or,ur,hr,fr,Pr,Ur.data):Gt.texSubImage3D(xi,yr,xr,Cr,Or,ur,hr,fr,Pr,Vr,Ur):rt.isDataTexture?Gt.texSubImage2D(Gt.TEXTURE_2D,yr,xr,Cr,ur,hr,Pr,Vr,Ur.data):rt.isCompressedTexture?Gt.compressedTexSubImage2D(Gt.TEXTURE_2D,yr,xr,Cr,Ur.width,Ur.height,Pr,Ur.data):Gt.texSubImage2D(Gt.TEXTURE_2D,yr,xr,Cr,ur,hr,Pr,Vr,Ur);Gt.pixelStorei(Gt.UNPACK_ROW_LENGTH,Ai),Gt.pixelStorei(Gt.UNPACK_IMAGE_HEIGHT,Ti),Gt.pixelStorei(Gt.UNPACK_SKIP_PIXELS,Si),Gt.pixelStorei(Gt.UNPACK_SKIP_ROWS,ir),Gt.pixelStorei(Gt.UNPACK_SKIP_IMAGES,bi),yr===0&&ln.generateMipmaps&&Gt.generateMipmap(xi),jn.unbindTexture()},this.copyTextureToTexture3D=function(rt,ln,Cn=null,zn=null,Sn=0){return warnOnce('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(rt,ln,Cn,zn,Sn)},this.initRenderTarget=function(rt){bn.get(rt).__webglFramebuffer===void 0&&Kn.setupRenderTarget(rt)},this.initTexture=function(rt){rt.isCubeTexture?Kn.setTextureCube(rt,0):rt.isData3DTexture?Kn.setTexture3D(rt,0):rt.isDataArrayTexture||rt.isCompressedArrayTexture?Kn.setTexture2DArray(rt,0):Kn.setTexture2D(rt,0),jn.unbindTexture()},this.resetState=function(){be=0,ve=0,Me=null,jn.reset(),oi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(d){this._outputColorSpace=d;const v=this.getContext();v.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(d),v.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,FrustumArray,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InterpolationSamplingMode,InterpolationSamplingType,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace:LinearSRGBColorSpace$1,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace:SRGBColorSpace$1,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,Timer,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants(),withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var _=requireReact();function d(H,Y){return H===Y&&(H!==0||1/H===1/Y)||H!==H&&Y!==Y}var v=typeof Object.is=="function"?Object.is:d,A=_.useState,C=_.useEffect,w=_.useLayoutEffect,T=_.useDebugValue;function R(H,Y){var ee=Y(),ie=A({inst:{value:ee,getSnapshot:Y}}),oe=ie[0].inst,se=ie[1];return w(function(){oe.value=ee,oe.getSnapshot=Y,G(oe)&&se({inst:oe})},[H,ee,Y]),C(function(){return G(oe)&&se({inst:oe}),H(function(){G(oe)&&se({inst:oe})})},[H]),T(ee),ee}function G(H){var Y=H.getSnapshot;H=H.value;try{var ee=Y();return!v(H,ee)}catch{return!0}}function I(H,Y){return Y()}var z=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?I:R;return useSyncExternalStoreShim_production.useSyncExternalStore=_.useSyncExternalStore!==void 0?_.useSyncExternalStore:z,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var _=requireReact(),d=requireShim();function v(I,z){return I===z&&(I!==0||1/I===1/z)||I!==I&&z!==z}var A=typeof Object.is=="function"?Object.is:v,C=d.useSyncExternalStore,w=_.useRef,T=_.useEffect,R=_.useMemo,G=_.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(I,z,H,Y,ee){var ie=w(null);if(ie.current===null){var oe={hasValue:!1,value:null};ie.current=oe}else oe=ie.current;ie=R(function(){function re(be){if(!fe){if(fe=!0,ue=be,be=Y(be),ee!==void 0&&oe.hasValue){var ve=oe.value;if(ee(ve,be))return ge=ve}return ge=be}if(ve=ge,A(ue,be))return ve;var Me=Y(be);return ee!==void 0&&ee(ve,Me)?(ue=be,ve):(ue=be,ge=Me)}var fe=!1,ue,ge,ye=H===void 0?null:H;return[function(){return re(z())},ye===null?void 0:function(){return re(ye())}]},[z,H,Y,ee]);var se=C(I,ie[0],ie[1]);return T(function(){oe.hasValue=!0,oe.value=se},[se]),G(se),se},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),createStoreImpl$1=_=>{let d;const v=new Set,A=(I,z)=>{const H=typeof I=="function"?I(d):I;if(!Object.is(H,d)){const Y=d;d=z??(typeof H!="object"||H===null)?H:Object.assign({},d,H),v.forEach(ee=>ee(d,Y))}},C=()=>d,R={setState:A,getState:C,getInitialState:()=>G,subscribe:I=>(v.add(I),()=>v.delete(I))},G=d=_(A,C,R);return R},createStore$2=_=>_?createStoreImpl$1(_):createStoreImpl$1,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity$2=_=>_;function useStoreWithEqualityFn(_,d=identity$2,v){const A=useSyncExternalStoreWithSelector(_.subscribe,_.getState,_.getInitialState,d,v);return React.useDebugValue(A),A}const createWithEqualityFnImpl=(_,d)=>{const v=createStore$2(_),A=(C,w=d)=>useStoreWithEqualityFn(v,C,w);return Object.assign(A,v),A},createWithEqualityFn=(_,d)=>_?createWithEqualityFnImpl(_,d):createWithEqualityFnImpl,isPromise=_=>typeof _=="object"&&typeof _.then=="function",globalCache=[];function shallowEqualArrays(_,d,v=(A,C)=>A===C){if(_===d)return!0;if(!_||!d)return!1;const A=_.length;if(d.length!==A)return!1;for(let C=0;C<A;C++)if(!v(_[C],d[C]))return!1;return!0}function query(_,d=null,v=!1,A={}){d===null&&(d=[_]);for(const w of globalCache)if(shallowEqualArrays(d,w.keys,w.equal)){if(v)return;if(Object.prototype.hasOwnProperty.call(w,"error"))throw w.error;if(Object.prototype.hasOwnProperty.call(w,"response"))return A.lifespan&&A.lifespan>0&&(w.timeout&&clearTimeout(w.timeout),w.timeout=setTimeout(w.remove,A.lifespan)),w.response;if(!v)throw w.promise}const C={keys:d,equal:A.equal,remove:()=>{const w=globalCache.indexOf(C);w!==-1&&globalCache.splice(w,1)},promise:(isPromise(_)?_:_(...d)).then(w=>{C.response=w,A.lifespan&&A.lifespan>0&&(C.timeout=setTimeout(C.remove,A.lifespan))}).catch(w=>C.error=w)};if(globalCache.push(C),!v)throw C.promise}const suspend=(_,d,v)=>query(_,d,!1,v),preload$1=(_,d,v)=>void query(_,d,!0,v),clear=_=>{if(_===void 0||_.length===0)globalCache.splice(0,globalCache.length);else{const d=globalCache.find(v=>shallowEqualArrays(_,v.keys,v.equal));d&&d.remove()}};var reactReconciler={exports:{}},reactReconciler_production={exports:{}},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(_){function d(je,He){var Xe=je.length;je.push(He);e:for(;0<Xe;){var $e=Xe-1>>>1,We=je[$e];if(0<C(We,He))je[$e]=He,je[Xe]=We,Xe=$e;else break e}}function v(je){return je.length===0?null:je[0]}function A(je){if(je.length===0)return null;var He=je[0],Xe=je.pop();if(Xe!==He){je[0]=Xe;e:for(var $e=0,We=je.length,nt=We>>>1;$e<nt;){var Qt=2*($e+1)-1,Wt=je[Qt],Bn=Qt+1,Lt=je[Bn];if(0>C(Wt,Xe))Bn<We&&0>C(Lt,Wt)?(je[$e]=Lt,je[Bn]=Xe,$e=Bn):(je[$e]=Wt,je[Qt]=Xe,$e=Qt);else if(Bn<We&&0>C(Lt,Xe))je[$e]=Lt,je[Bn]=Xe,$e=Bn;else break e}}return He}function C(je,He){var Xe=je.sortIndex-He.sortIndex;return Xe!==0?Xe:je.id-He.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var w=performance;_.unstable_now=function(){return w.now()}}else{var T=Date,R=T.now();_.unstable_now=function(){return T.now()-R}}var G=[],I=[],z=1,H=null,Y=3,ee=!1,ie=!1,oe=!1,se=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function ue(je){for(var He=v(I);He!==null;){if(He.callback===null)A(I);else if(He.startTime<=je)A(I),He.sortIndex=He.expirationTime,d(G,He);else break;He=v(I)}}function ge(je){if(oe=!1,ue(je),!ie)if(v(G)!==null)ie=!0,Ge();else{var He=v(I);He!==null&&ze(ge,He.startTime-je)}}var ye=!1,be=-1,ve=5,Me=-1;function we(){return!(_.unstable_now()-Me<ve)}function Be(){if(ye){var je=_.unstable_now();Me=je;var He=!0;try{e:{ie=!1,oe&&(oe=!1,re(be),be=-1),ee=!0;var Xe=Y;try{t:{for(ue(je),H=v(G);H!==null&&!(H.expirationTime>je&&we());){var $e=H.callback;if(typeof $e=="function"){H.callback=null,Y=H.priorityLevel;var We=$e(H.expirationTime<=je);if(je=_.unstable_now(),typeof We=="function"){H.callback=We,ue(je),He=!0;break t}H===v(G)&&A(G),ue(je)}else A(G);H=v(G)}if(H!==null)He=!0;else{var nt=v(I);nt!==null&&ze(ge,nt.startTime-je),He=!1}}break e}finally{H=null,Y=Xe,ee=!1}He=void 0}}finally{He?De():ye=!1}}}var De;if(typeof fe=="function")De=function(){fe(Be)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Oe=Fe.port2;Fe.port1.onmessage=Be,De=function(){Oe.postMessage(null)}}else De=function(){se(Be,0)};function Ge(){ye||(ye=!0,De())}function ze(je,He){be=se(function(){je(_.unstable_now())},He)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(je){je.callback=null},_.unstable_continueExecution=function(){ie||ee||(ie=!0,Ge())},_.unstable_forceFrameRate=function(je){0>je||125<je?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<je?Math.floor(1e3/je):5},_.unstable_getCurrentPriorityLevel=function(){return Y},_.unstable_getFirstCallbackNode=function(){return v(G)},_.unstable_next=function(je){switch(Y){case 1:case 2:case 3:var He=3;break;default:He=Y}var Xe=Y;Y=He;try{return je()}finally{Y=Xe}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=function(){},_.unstable_runWithPriority=function(je,He){switch(je){case 1:case 2:case 3:case 4:case 5:break;default:je=3}var Xe=Y;Y=je;try{return He()}finally{Y=Xe}},_.unstable_scheduleCallback=function(je,He,Xe){var $e=_.unstable_now();switch(typeof Xe=="object"&&Xe!==null?(Xe=Xe.delay,Xe=typeof Xe=="number"&&0<Xe?$e+Xe:$e):Xe=$e,je){case 1:var We=-1;break;case 2:We=250;break;case 5:We=1073741823;break;case 4:We=1e4;break;default:We=5e3}return We=Xe+We,je={id:z++,callback:He,priorityLevel:je,startTime:Xe,expirationTime:We,sortIndex:-1},Xe>$e?(je.sortIndex=Xe,d(I,je),v(G)===null&&je===v(I)&&(oe?(re(be),be=-1):oe=!0,ze(ge,Xe-$e))):(je.sortIndex=We,d(G,je),ie||ee||(ie=!0,Ge())),je},_.unstable_shouldYield=we,_.unstable_wrapCallback=function(je){var He=Y;return function(){var Xe=Y;Y=He;try{return je.apply(this,arguments)}finally{Y=Xe}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,function(_){_.exports=function(d){function v(ae,le,Ne,Ve){return new Tf(ae,le,Ne,Ve)}function A(){}function C(ae){var le="https://react.dev/errors/"+ae;if(1<arguments.length){le+="?args[]="+encodeURIComponent(arguments[1]);for(var Ne=2;Ne<arguments.length;Ne++)le+="&args[]="+encodeURIComponent(arguments[Ne])}return"Minified React error #"+ae+"; visit "+le+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function w(ae){return ae===null||typeof ae!="object"?null:(ae=tc&&ae[tc]||ae["@@iterator"],typeof ae=="function"?ae:null)}function T(ae){if(ae==null)return null;if(typeof ae=="function")return ae.$$typeof===kf?null:ae.displayName||ae.name||null;if(typeof ae=="string")return ae;switch(ae){case Ac:return"Fragment";case il:return"Portal";case $d:return"Profiler";case Ad:return"StrictMode";case Wd:return"Suspense";case Lu:return"SuspenseList"}if(typeof ae=="object")switch(ae.$$typeof){case yl:return(ae.displayName||"Context")+".Provider";case Mf:return(ae._context.displayName||"Context")+".Consumer";case Cd:var le=ae.render;return ae=ae.displayName,ae||(ae=le.displayName||le.name||"",ae=ae!==""?"ForwardRef("+ae+")":"ForwardRef"),ae;case Kd:return le=ae.displayName||null,le!==null?le:T(ae.type)||"Memo";case al:le=ae._payload,ae=ae._init;try{return T(ae(le))}catch{}}return null}function R(ae){if(jl===void 0)try{throw Error()}catch(Ne){var le=Ne.stack.trim().match(/\n( *(at )?)/);jl=le&&le[1]||"",nc=-1<Ne.stack.indexOf(`
    at`)?" (<anonymous>)":-1<Ne.stack.indexOf("@")?"@unknown:0:0":""}return`
`+jl+ae+nc}function G(ae,le){if(!ae||tu)return"";tu=!0;var Ne=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Ve={DetermineComponentFrameRoot:function(){try{if(le){var Vi=function(){throw Error()};if(Object.defineProperty(Vi.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Vi,[])}catch(ga){var zi=ga}Reflect.construct(ae,[],Vi)}else{try{Vi.call()}catch(ga){zi=ga}ae.call(Vi.prototype)}}else{try{throw Error()}catch(ga){zi=ga}(Vi=ae())&&typeof Vi.catch=="function"&&Vi.catch(function(){})}}catch(ga){if(ga&&zi&&typeof ga.stack=="string")return[ga.stack,zi.stack]}return[null,null]}};Ve.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Je=Object.getOwnPropertyDescriptor(Ve.DetermineComponentFrameRoot,"name");Je&&Je.configurable&&Object.defineProperty(Ve.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var kt=Ve.DetermineComponentFrameRoot(),Wn=kt[0],Rr=kt[1];if(Wn&&Rr){var Jr=Wn.split(`
`),hi=Rr.split(`
`);for(Je=Ve=0;Ve<Jr.length&&!Jr[Ve].includes("DetermineComponentFrameRoot");)Ve++;for(;Je<hi.length&&!hi[Je].includes("DetermineComponentFrameRoot");)Je++;if(Ve===Jr.length||Je===hi.length)for(Ve=Jr.length-1,Je=hi.length-1;1<=Ve&&0<=Je&&Jr[Ve]!==hi[Je];)Je--;for(;1<=Ve&&0<=Je;Ve--,Je--)if(Jr[Ve]!==hi[Je]){if(Ve!==1||Je!==1)do if(Ve--,Je--,0>Je||Jr[Ve]!==hi[Je]){var Bi=`
`+Jr[Ve].replace(" at new "," at ");return ae.displayName&&Bi.includes("<anonymous>")&&(Bi=Bi.replace("<anonymous>",ae.displayName)),Bi}while(1<=Ve&&0<=Je);break}}}finally{tu=!1,Error.prepareStackTrace=Ne}return(Ne=ae?ae.displayName||ae.name:"")?R(Ne):""}function I(ae){switch(ae.tag){case 26:case 27:case 5:return R(ae.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 15:return ae=G(ae.type,!1),ae;case 11:return ae=G(ae.type.render,!1),ae;case 1:return ae=G(ae.type,!0),ae;default:return""}}function z(ae){try{var le="";do le+=I(ae),ae=ae.return;while(ae);return le}catch(Ne){return`
Error generating stack: `+Ne.message+`
`+Ne.stack}}function H(ae){var le=ae,Ne=ae;if(ae.alternate)for(;le.return;)le=le.return;else{ae=le;do le=ae,(le.flags&4098)!==0&&(Ne=le.return),ae=le.return;while(ae)}return le.tag===3?Ne:null}function Y(ae){if(H(ae)!==ae)throw Error(C(188))}function ee(ae){var le=ae.alternate;if(!le){if(le=H(ae),le===null)throw Error(C(188));return le!==ae?null:ae}for(var Ne=ae,Ve=le;;){var Je=Ne.return;if(Je===null)break;var kt=Je.alternate;if(kt===null){if(Ve=Je.return,Ve!==null){Ne=Ve;continue}break}if(Je.child===kt.child){for(kt=Je.child;kt;){if(kt===Ne)return Y(Je),ae;if(kt===Ve)return Y(Je),le;kt=kt.sibling}throw Error(C(188))}if(Ne.return!==Ve.return)Ne=Je,Ve=kt;else{for(var Wn=!1,Rr=Je.child;Rr;){if(Rr===Ne){Wn=!0,Ne=Je,Ve=kt;break}if(Rr===Ve){Wn=!0,Ve=Je,Ne=kt;break}Rr=Rr.sibling}if(!Wn){for(Rr=kt.child;Rr;){if(Rr===Ne){Wn=!0,Ne=kt,Ve=Je;break}if(Rr===Ve){Wn=!0,Ve=kt,Ne=Je;break}Rr=Rr.sibling}if(!Wn)throw Error(C(189))}}if(Ne.alternate!==Ve)throw Error(C(190))}if(Ne.tag!==3)throw Error(C(188));return Ne.stateNode.current===Ne?ae:le}function ie(ae){var le=ae.tag;if(le===5||le===26||le===27||le===6)return ae;for(ae=ae.child;ae!==null;){if(le=ie(ae),le!==null)return le;ae=ae.sibling}return null}function oe(ae){var le=ae.tag;if(le===5||le===26||le===27||le===6)return ae;for(ae=ae.child;ae!==null;){if(ae.tag!==4&&(le=oe(ae),le!==null))return le;ae=ae.sibling}return null}function se(ae){return{current:ae}}function re(ae){0>sc||(ae.current=Ps[sc],Ps[sc]=null,sc--)}function fe(ae,le){sc++,Ps[sc]=ae.current,ae.current=le}function ue(ae){return ae>>>=0,ae===0?32:31-(Qh(ae)/Jh|0)|0}function ge(ae){var le=ae&42;if(le!==0)return le;switch(ae&-ae){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ae&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return ae&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return ae}}function ye(ae,le){var Ne=ae.pendingLanes;if(Ne===0)return 0;var Ve=0,Je=ae.suspendedLanes,kt=ae.pingedLanes,Wn=ae.warmLanes;ae=ae.finishedLanes!==0;var Rr=Ne&134217727;return Rr!==0?(Ne=Rr&~Je,Ne!==0?Ve=ge(Ne):(kt&=Rr,kt!==0?Ve=ge(kt):ae||(Wn=Rr&~Wn,Wn!==0&&(Ve=ge(Wn))))):(Rr=Ne&~Je,Rr!==0?Ve=ge(Rr):kt!==0?Ve=ge(kt):ae||(Wn=Ne&~Wn,Wn!==0&&(Ve=ge(Wn)))),Ve===0?0:le!==0&&le!==Ve&&(le&Je)===0&&(Je=Ve&-Ve,Wn=le&-le,Je>=Wn||Je===32&&(Wn&4194176)!==0)?le:Ve}function be(ae,le){return(ae.pendingLanes&~(ae.suspendedLanes&~ae.pingedLanes)&le)===0}function ve(ae,le){switch(ae){case 1:case 2:case 4:case 8:return le+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return le+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Me(){var ae=Ol;return Ol<<=1,(Ol&4194176)===0&&(Ol=128),ae}function we(){var ae=au;return au<<=1,(au&62914560)===0&&(au=4194304),ae}function Be(ae){for(var le=[],Ne=0;31>Ne;Ne++)le.push(ae);return le}function De(ae,le){ae.pendingLanes|=le,le!==268435456&&(ae.suspendedLanes=0,ae.pingedLanes=0,ae.warmLanes=0)}function Fe(ae,le,Ne,Ve,Je,kt){var Wn=ae.pendingLanes;ae.pendingLanes=Ne,ae.suspendedLanes=0,ae.pingedLanes=0,ae.warmLanes=0,ae.expiredLanes&=Ne,ae.entangledLanes&=Ne,ae.errorRecoveryDisabledLanes&=Ne,ae.shellSuspendCounter=0;var Rr=ae.entanglements,Jr=ae.expirationTimes,hi=ae.hiddenUpdates;for(Ne=Wn&~Ne;0<Ne;){var Bi=31-To(Ne),Vi=1<<Bi;Rr[Bi]=0,Jr[Bi]=-1;var zi=hi[Bi];if(zi!==null)for(hi[Bi]=null,Bi=0;Bi<zi.length;Bi++){var ga=zi[Bi];ga!==null&&(ga.lane&=-536870913)}Ne&=~Vi}Ve!==0&&Oe(ae,Ve,0),kt!==0&&Je===0&&ae.tag!==0&&(ae.suspendedLanes|=kt&~(Wn&~le))}function Oe(ae,le,Ne){ae.pendingLanes|=le,ae.suspendedLanes&=~le;var Ve=31-To(le);ae.entangledLanes|=le,ae.entanglements[Ve]=ae.entanglements[Ve]|1073741824|Ne&4194218}function Ge(ae,le){var Ne=ae.entangledLanes|=le;for(ae=ae.entanglements;Ne;){var Ve=31-To(Ne),Je=1<<Ve;Je&le|ae[Ve]&le&&(ae[Ve]|=le),Ne&=~Je}}function ze(ae){return ae&=-ae,2<ae?8<ae?(ae&134217727)!==0?32:268435456:8:2}function je(ae){if(Oo&&typeof Oo.onCommitFiberRoot=="function")try{Oo.onCommitFiberRoot(Bs,ae,void 0,(ae.current.flags&128)===128)}catch{}}function He(ae){if(typeof tp=="function"&&eo(ae),Oo&&typeof Oo.setStrictMode=="function")try{Oo.setStrictMode(Bs,ae)}catch{}}function Xe(ae,le){return ae===le&&(ae!==0||1/ae===1/le)||ae!==ae&&le!==le}function $e(ae,le){if(typeof ae=="object"&&ae!==null){var Ne=Xf.get(ae);return Ne!==void 0?Ne:(le={value:ae,source:le,stack:z(le)},Xf.set(ae,le),le)}return{value:ae,source:le,stack:z(le)}}function We(ae,le){su[ou++]=$u,su[ou++]=lu,lu=ae,$u=le}function nt(ae,le,Ne){Ho[qo++]=Al,Ho[qo++]=Sl,Ho[qo++]=Ic,Ic=ae;var Ve=Al;ae=Sl;var Je=32-To(Ve)-1;Ve&=~(1<<Je),Ne+=1;var kt=32-To(le)+Je;if(30<kt){var Wn=Je-Je%5;kt=(Ve&(1<<Wn)-1).toString(32),Ve>>=Wn,Je-=Wn,Al=1<<32-To(le)+Je|Ne<<Je|Ve,Sl=kt+ae}else Al=1<<kt|Ne<<Je|Ve,Sl=ae}function Qt(ae){ae.return!==null&&(We(ae,1),nt(ae,1,0))}function Wt(ae){for(;ae===lu;)lu=su[--ou],su[ou]=null,$u=su[--ou],su[ou]=null;for(;ae===Ic;)Ic=Ho[--qo],Ho[qo]=null,Sl=Ho[--qo],Ho[qo]=null,Al=Ho[--qo],Ho[qo]=null}function Bn(ae,le){fe(Fl,le),fe(Wu,ae),fe(Ks,null),ae=mh(le),re(Ks),fe(Ks,ae)}function Lt(){re(Ks),re(Wu),re(Fl)}function Mn(ae){ae.memoizedState!==null&&fe(cu,ae);var le=Ks.current,Ne=Vu(le,ae.type);le!==Ne&&(fe(Wu,ae),fe(Ks,Ne))}function cr(ae){Wu.current===ae&&(re(Ks),re(Wu)),cu.current===ae&&(re(cu),Co?bl._currentValue=Cc:bl._currentValue2=Cc)}function In(ae){var le=Error(C(418,""));throw Gt($e(le,ae)),Bd}function Zn(ae,le){if(!uo)throw Error(C(175));Vh(ae.stateNode,ae.type,ae.memoizedProps,le,ae)||In(ae)}function $n(ae){for(fo=ae.return;fo;)switch(fo.tag){case 3:case 27:ro=!0;return;case 5:case 13:ro=!1;return;default:fo=fo.return}}function Rn(ae){if(!uo||ae!==fo)return!1;if(!Pa)return $n(ae),Pa=!0,!1;var le=!1;if(Ya?ae.tag!==3&&ae.tag!==27&&(ae.tag!==5||rf(ae.type)&&!ba(ae.type,ae.memoizedProps))&&(le=!0):ae.tag!==3&&(ae.tag!==5||rf(ae.type)&&!ba(ae.type,ae.memoizedProps))&&(le=!0),le&&ho&&In(ae),$n(ae),ae.tag===13){if(!uo)throw Error(C(316));if(ae=ae.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(C(317));ho=zh(ae)}else ho=fo?$f(ae.stateNode):null;return!0}function Dn(){uo&&(ho=fo=null,Pa=!1)}function Gt(ae){ll===null?ll=[ae]:ll.push(ae)}function Jn(){for(var ae=uu,le=Cl=uu=0;le<ae;){var Ne=cl[le];cl[le++]=null;var Ve=cl[le];cl[le++]=null;var Je=cl[le];cl[le++]=null;var kt=cl[le];if(cl[le++]=null,Ve!==null&&Je!==null){var Wn=Ve.pending;Wn===null?Je.next=Je:(Je.next=Wn.next,Wn.next=Je),Ve.pending=Je}kt!==0&&Un(Ne,Je,kt)}}function Nn(ae,le,Ne,Ve){cl[uu++]=ae,cl[uu++]=le,cl[uu++]=Ne,cl[uu++]=Ve,Cl|=Ve,ae.lanes|=Ve,ae=ae.alternate,ae!==null&&(ae.lanes|=Ve)}function Xn(ae,le,Ne,Ve){return Nn(ae,le,Ne,Ve),bn(ae)}function jn(ae,le){return Nn(ae,null,null,le),bn(ae)}function Un(ae,le,Ne){ae.lanes|=Ne;var Ve=ae.alternate;Ve!==null&&(Ve.lanes|=Ne);for(var Je=!1,kt=ae.return;kt!==null;)kt.childLanes|=Ne,Ve=kt.alternate,Ve!==null&&(Ve.childLanes|=Ne),kt.tag===22&&(ae=kt.stateNode,ae===null||ae._visibility&1||(Je=!0)),ae=kt,kt=kt.return;Je&&le!==null&&ae.tag===3&&(kt=ae.stateNode,Je=31-To(Ne),kt=kt.hiddenUpdates,ae=kt[Je],ae===null?kt[Je]=[le]:ae.push(le),le.lane=Ne|536870912)}function bn(ae){if(50<rd)throw rd=0,yf=null,Error(C(185));for(var le=ae.return;le!==null;)ae=le,le=ae.return;return ae.tag===3?ae.stateNode:null}function Kn(ae){ae!==oc&&ae.next===null&&(oc===null?Dd=oc=ae:oc=oc.next=ae),as=!0,du||(du=!0,kn(pr))}function Qn(ae,le){if(!Qf&&as){Qf=!0;do for(var Ne=!1,Ve=Dd;Ve!==null;){if(ae!==0){var Je=Ve.pendingLanes;if(Je===0)var kt=0;else{var Wn=Ve.suspendedLanes,Rr=Ve.pingedLanes;kt=(1<<31-To(42|ae)+1)-1,kt&=Je&~(Wn&~Rr),kt=kt&201326677?kt&201326677|1:kt?kt|2:0}kt!==0&&(Ne=!0,yn(Ve,kt))}else kt=Ma,kt=ye(Ve,Ve===za?kt:0),(kt&3)===0||be(Ve,kt)||(Ne=!0,yn(Ve,kt));Ve=Ve.next}while(Ne);Qf=!1}}function pr(){as=du=!1;var ae=0;Ku!==0&&(yh()&&(ae=Ku),Ku=0);for(var le=ol(),Ne=null,Ve=Dd;Ve!==null;){var Je=Ve.next,kt=fn(Ve,le);kt===0?(Ve.next=null,Ne===null?Dd=Je:Ne.next=Je,Je===null&&(oc=Ne)):(Ne=Ve,(ae!==0||(kt&3)!==0)&&(as=!0)),Ve=Je}Qn(ae)}function fn(ae,le){for(var Ne=ae.suspendedLanes,Ve=ae.pingedLanes,Je=ae.expirationTimes,kt=ae.pendingLanes&-62914561;0<kt;){var Wn=31-To(kt),Rr=1<<Wn,Jr=Je[Wn];Jr===-1?((Rr&Ne)===0||(Rr&Ve)!==0)&&(Je[Wn]=ve(Rr,le)):Jr<=le&&(ae.expiredLanes|=Rr),kt&=~Rr}if(le=za,Ne=Ma,Ne=ye(ae,ae===le?Ne:0),Ve=ae.callbackNode,Ne===0||ae===le&&Ka===2||ae.cancelPendingCommit!==null)return Ve!==null&&Ve!==null&&lf(Ve),ae.callbackNode=null,ae.callbackPriority=0;if((Ne&3)===0||be(ae,Ne)){if(le=Ne&-Ne,le===ae.callbackPriority)return le;switch(Ve!==null&&lf(Ve),ze(Ne)){case 2:case 8:Ne=ep;break;case 32:Ne=df;break;case 268435456:Ne=Rp;break;default:Ne=df}return Ve=Mt.bind(null,ae),Ne=Pd(Ne,Ve),ae.callbackPriority=le,ae.callbackNode=Ne,le}return Ve!==null&&Ve!==null&&lf(Ve),ae.callbackPriority=2,ae.callbackNode=null,2}function Mt(ae,le){var Ne=ae.callbackNode;if(xl()&&ae.callbackNode!==Ne)return null;var Ve=Ma;return Ve=ye(ae,ae===za?Ve:0),Ve===0?null:(Bl(ae,Ve,le),fn(ae,ol()),ae.callbackNode!=null&&ae.callbackNode===Ne?Mt.bind(null,ae):null)}function yn(ae,le){if(xl())return null;Bl(ae,le,!0)}function kn(ae){jf?ac(function(){(La&6)!==0?Pd(uf,ae):ae()}):Pd(uf,ae)}function nr(){return Ku===0&&(Ku=Me()),Ku}function dr(ae,le){if(Yu===null){var Ne=Yu=[];fu=0,$o=nr(),hu={status:"pending",value:void 0,then:function(Ve){Ne.push(Ve)}}}return fu++,le.then(Qr,Qr),le}function Qr(){if(--fu===0&&Yu!==null){hu!==null&&(hu.status="fulfilled");var ae=Yu;Yu=null,$o=0,hu=null;for(var le=0;le<ae.length;le++)(0,ae[le])()}}function Wr(ae,le){var Ne=[],Ve={status:"pending",value:null,reason:null,then:function(Je){Ne.push(Je)}};return ae.then(function(){Ve.status="fulfilled",Ve.value=le;for(var Je=0;Je<Ne.length;Je++)(0,Ne[Je])(le)},function(Je){for(Ve.status="rejected",Ve.reason=Je,Je=0;Je<Ne.length;Je++)(0,Ne[Je])(void 0)}),Ve}function Gr(ae){ae.updateQueue={baseState:ae.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hr(ae,le){ae=ae.updateQueue,le.updateQueue===ae&&(le.updateQueue={baseState:ae.baseState,firstBaseUpdate:ae.firstBaseUpdate,lastBaseUpdate:ae.lastBaseUpdate,shared:ae.shared,callbacks:null})}function Kr(ae){return{lane:ae,tag:0,payload:null,callback:null,next:null}}function ti(ae,le,Ne){var Ve=ae.updateQueue;if(Ve===null)return null;if(Ve=Ve.shared,(La&2)!==0){var Je=Ve.pending;return Je===null?le.next=le:(le.next=Je.next,Je.next=le),Ve.pending=le,le=bn(ae),Un(ae,null,Ne),le}return Nn(ae,Ve,le,Ne),bn(ae)}function Mi(ae,le,Ne){if(le=le.updateQueue,le!==null&&(le=le.shared,(Ne&4194176)!==0)){var Ve=le.lanes;Ve&=ae.pendingLanes,Ne|=Ve,le.lanes=Ne,Ge(ae,Ne)}}function Ci(ae,le){var Ne=ae.updateQueue,Ve=ae.alternate;if(Ve!==null&&(Ve=Ve.updateQueue,Ne===Ve)){var Je=null,kt=null;if(Ne=Ne.firstBaseUpdate,Ne!==null){do{var Wn={lane:Ne.lane,tag:Ne.tag,payload:Ne.payload,callback:null,next:null};kt===null?Je=kt=Wn:kt=kt.next=Wn,Ne=Ne.next}while(Ne!==null);kt===null?Je=kt=le:kt=kt.next=le}else Je=kt=le;Ne={baseState:Ve.baseState,firstBaseUpdate:Je,lastBaseUpdate:kt,shared:Ve.shared,callbacks:Ve.callbacks},ae.updateQueue=Ne;return}ae=Ne.lastBaseUpdate,ae===null?Ne.firstBaseUpdate=le:ae.next=le,Ne.lastBaseUpdate=le}function oi(){if(pu){var ae=hu;if(ae!==null)throw ae}}function Ii(ae,le,Ne,Ve){pu=!1;var Je=ae.updateQueue;lc=!1;var kt=Je.firstBaseUpdate,Wn=Je.lastBaseUpdate,Rr=Je.shared.pending;if(Rr!==null){Je.shared.pending=null;var Jr=Rr,hi=Jr.next;Jr.next=null,Wn===null?kt=hi:Wn.next=hi,Wn=Jr;var Bi=ae.alternate;Bi!==null&&(Bi=Bi.updateQueue,Rr=Bi.lastBaseUpdate,Rr!==Wn&&(Rr===null?Bi.firstBaseUpdate=hi:Rr.next=hi,Bi.lastBaseUpdate=Jr))}if(kt!==null){var Vi=Je.baseState;Wn=0,Bi=hi=Jr=null,Rr=kt;do{var zi=Rr.lane&-536870913,ga=zi!==Rr.lane;if(ga?(Ma&zi)===zi:(Ve&zi)===zi){zi!==0&&zi===$o&&(pu=!0),Bi!==null&&(Bi=Bi.next={lane:0,tag:Rr.tag,payload:Rr.payload,callback:null,next:null});e:{var el=ae,Fc=Rr;zi=le;var Uc=Ne;switch(Fc.tag){case 1:if(el=Fc.payload,typeof el=="function"){Vi=el.call(Uc,Vi,zi);break e}Vi=el;break e;case 3:el.flags=el.flags&-65537|128;case 0:if(el=Fc.payload,zi=typeof el=="function"?el.call(Uc,Vi,zi):el,zi==null)break e;Vi=qd({},Vi,zi);break e;case 2:lc=!0}}zi=Rr.callback,zi!==null&&(ae.flags|=64,ga&&(ae.flags|=8192),ga=Je.callbacks,ga===null?Je.callbacks=[zi]:ga.push(zi))}else ga={lane:zi,tag:Rr.tag,payload:Rr.payload,callback:Rr.callback,next:null},Bi===null?(hi=Bi=ga,Jr=Vi):Bi=Bi.next=ga,Wn|=zi;if(Rr=Rr.next,Rr===null){if(Rr=Je.shared.pending,Rr===null)break;ga=Rr,Rr=ga.next,ga.next=null,Je.lastBaseUpdate=ga,Je.shared.pending=null}}while(!0);Bi===null&&(Jr=Vi),Je.baseState=Jr,Je.firstBaseUpdate=hi,Je.lastBaseUpdate=Bi,kt===null&&(Je.shared.lanes=0),Jo|=Wn,ae.lanes=Wn,ae.memoizedState=Vi}}function wr(ae,le){if(typeof ae!="function")throw Error(C(191,ae));ae.call(le)}function Br(ae,le){var Ne=ae.callbacks;if(Ne!==null)for(ae.callbacks=null,ae=0;ae<Ne.length;ae++)wr(Ne[ae],le)}function ui(ae,le){if(Fo(ae,le))return!0;if(typeof ae!="object"||ae===null||typeof le!="object"||le===null)return!1;var Ne=Object.keys(ae),Ve=Object.keys(le);if(Ne.length!==Ve.length)return!1;for(Ve=0;Ve<Ne.length;Ve++){var Je=Ne[Ve];if(!Ul.call(le,Je)||!Fo(ae[Je],le[Je]))return!1}return!0}function vi(ae){return ae=ae.status,ae==="fulfilled"||ae==="rejected"}function qr(){}function br(ae,le,Ne){switch(Ne=ae[Ne],Ne===void 0?ae.push(le):Ne!==le&&(le.then(qr,qr),le=Ne),le.status){case"fulfilled":return le.value;case"rejected":throw ae=le.reason,ae===Xu?Error(C(483)):ae;default:if(typeof le.status=="string")le.then(qr,qr);else{if(ae=za,ae!==null&&100<ae.shellSuspendCounter)throw Error(C(482));ae=le,ae.status="pending",ae.then(function(Ve){if(le.status==="pending"){var Je=le;Je.status="fulfilled",Je.value=Ve}},function(Ve){if(le.status==="pending"){var Je=le;Je.status="rejected",Je.reason=Ve}})}switch(le.status){case"fulfilled":return le.value;case"rejected":throw ae=le.reason,ae===Xu?Error(C(483)):ae}throw kc=le,Xu}}function er(){if(kc===null)throw Error(C(459));var ae=kc;return kc=null,ae}function Gn(ae){var le=Pc;return Pc+=1,Nc===null&&(Nc=[]),br(Nc,ae,le)}function Er(ae,le){le=le.props.ref,ae.ref=le!==void 0?le:null}function mn(ae,le){throw le.$$typeof===bp?Error(C(525)):(ae=Object.prototype.toString.call(le),Error(C(31,ae==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":ae)))}function tr(ae){var le=ae._init;return le(ae._payload)}function vr(ae){function le(ni,jr){if(ae){var si=ni.deletions;si===null?(ni.deletions=[jr],ni.flags|=16):si.push(jr)}}function Ne(ni,jr){if(!ae)return null;for(;jr!==null;)le(ni,jr),jr=jr.sibling;return null}function Ve(ni){for(var jr=new Map;ni!==null;)ni.key!==null?jr.set(ni.key,ni):jr.set(ni.index,ni),ni=ni.sibling;return jr}function Je(ni,jr){return ni=rl(ni,jr),ni.index=0,ni.sibling=null,ni}function kt(ni,jr,si){return ni.index=si,ae?(si=ni.alternate,si!==null?(si=si.index,si<jr?(ni.flags|=33554434,jr):si):(ni.flags|=33554434,jr)):(ni.flags|=1048576,jr)}function Wn(ni){return ae&&ni.alternate===null&&(ni.flags|=33554434),ni}function Rr(ni,jr,si,Ni){return jr===null||jr.tag!==6?(jr=zd(si,ni.mode,Ni),jr.return=ni,jr):(jr=Je(jr,si),jr.return=ni,jr)}function Jr(ni,jr,si,Ni){var Qi=si.type;return Qi===Ac?Bi(ni,jr,si.props.children,Ni,si.key):jr!==null&&(jr.elementType===Qi||typeof Qi=="object"&&Qi!==null&&Qi.$$typeof===al&&tr(Qi)===jr.type)?(jr=Je(jr,si.props),Er(jr,si),jr.return=ni,jr):(jr=Dl(si.type,si.key,si.props,null,ni.mode,Ni),Er(jr,si),jr.return=ni,jr)}function hi(ni,jr,si,Ni){return jr===null||jr.tag!==4||jr.stateNode.containerInfo!==si.containerInfo||jr.stateNode.implementation!==si.implementation?(jr=Rf(si,ni.mode,Ni),jr.return=ni,jr):(jr=Je(jr,si.children||[]),jr.return=ni,jr)}function Bi(ni,jr,si,Ni,Qi){return jr===null||jr.tag!==7?(jr=ys(si,ni.mode,Ni,Qi),jr.return=ni,jr):(jr=Je(jr,si),jr.return=ni,jr)}function Vi(ni,jr,si){if(typeof jr=="string"&&jr!==""||typeof jr=="number"||typeof jr=="bigint")return jr=zd(""+jr,ni.mode,si),jr.return=ni,jr;if(typeof jr=="object"&&jr!==null){switch(jr.$$typeof){case Ed:return si=Dl(jr.type,jr.key,jr.props,null,ni.mode,si),Er(si,jr),si.return=ni,si;case il:return jr=Rf(jr,ni.mode,si),jr.return=ni,jr;case al:var Ni=jr._init;return jr=Ni(jr._payload),Vi(ni,jr,si)}if(Ou(jr)||w(jr))return jr=ys(jr,ni.mode,si,null),jr.return=ni,jr;if(typeof jr.then=="function")return Vi(ni,Gn(jr),si);if(jr.$$typeof===yl)return Vi(ni,ii(ni,jr),si);mn(ni,jr)}return null}function zi(ni,jr,si,Ni){var Qi=jr!==null?jr.key:null;if(typeof si=="string"&&si!==""||typeof si=="number"||typeof si=="bigint")return Qi!==null?null:Rr(ni,jr,""+si,Ni);if(typeof si=="object"&&si!==null){switch(si.$$typeof){case Ed:return si.key===Qi?Jr(ni,jr,si,Ni):null;case il:return si.key===Qi?hi(ni,jr,si,Ni):null;case al:return Qi=si._init,si=Qi(si._payload),zi(ni,jr,si,Ni)}if(Ou(si)||w(si))return Qi!==null?null:Bi(ni,jr,si,Ni,null);if(typeof si.then=="function")return zi(ni,jr,Gn(si),Ni);if(si.$$typeof===yl)return zi(ni,jr,ii(ni,si),Ni);mn(ni,si)}return null}function ga(ni,jr,si,Ni,Qi){if(typeof Ni=="string"&&Ni!==""||typeof Ni=="number"||typeof Ni=="bigint")return ni=ni.get(si)||null,Rr(jr,ni,""+Ni,Qi);if(typeof Ni=="object"&&Ni!==null){switch(Ni.$$typeof){case Ed:return ni=ni.get(Ni.key===null?si:Ni.key)||null,Jr(jr,ni,Ni,Qi);case il:return ni=ni.get(Ni.key===null?si:Ni.key)||null,hi(jr,ni,Ni,Qi);case al:var hs=Ni._init;return Ni=hs(Ni._payload),ga(ni,jr,si,Ni,Qi)}if(Ou(Ni)||w(Ni))return ni=ni.get(si)||null,Bi(jr,ni,Ni,Qi,null);if(typeof Ni.then=="function")return ga(ni,jr,si,Gn(Ni),Qi);if(Ni.$$typeof===yl)return ga(ni,jr,si,ii(jr,Ni),Qi);mn(jr,Ni)}return null}function el(ni,jr,si,Ni){for(var Qi=null,hs=null,ua=jr,Oa=jr=0,Ds=null;ua!==null&&Oa<si.length;Oa++){ua.index>Oa?(Ds=ua,ua=null):Ds=ua.sibling;var Ra=zi(ni,ua,si[Oa],Ni);if(Ra===null){ua===null&&(ua=Ds);break}ae&&ua&&Ra.alternate===null&&le(ni,ua),jr=kt(Ra,jr,Oa),hs===null?Qi=Ra:hs.sibling=Ra,hs=Ra,ua=Ds}if(Oa===si.length)return Ne(ni,ua),Pa&&We(ni,Oa),Qi;if(ua===null){for(;Oa<si.length;Oa++)ua=Vi(ni,si[Oa],Ni),ua!==null&&(jr=kt(ua,jr,Oa),hs===null?Qi=ua:hs.sibling=ua,hs=ua);return Pa&&We(ni,Oa),Qi}for(ua=Ve(ua);Oa<si.length;Oa++)Ds=ga(ua,ni,Oa,si[Oa],Ni),Ds!==null&&(ae&&Ds.alternate!==null&&ua.delete(Ds.key===null?Oa:Ds.key),jr=kt(Ds,jr,Oa),hs===null?Qi=Ds:hs.sibling=Ds,hs=Ds);return ae&&ua.forEach(function(Kl){return le(ni,Kl)}),Pa&&We(ni,Oa),Qi}function Fc(ni,jr,si,Ni){if(si==null)throw Error(C(151));for(var Qi=null,hs=null,ua=jr,Oa=jr=0,Ds=null,Ra=si.next();ua!==null&&!Ra.done;Oa++,Ra=si.next()){ua.index>Oa?(Ds=ua,ua=null):Ds=ua.sibling;var Kl=zi(ni,ua,Ra.value,Ni);if(Kl===null){ua===null&&(ua=Ds);break}ae&&ua&&Kl.alternate===null&&le(ni,ua),jr=kt(Kl,jr,Oa),hs===null?Qi=Kl:hs.sibling=Kl,hs=Kl,ua=Ds}if(Ra.done)return Ne(ni,ua),Pa&&We(ni,Oa),Qi;if(ua===null){for(;!Ra.done;Oa++,Ra=si.next())Ra=Vi(ni,Ra.value,Ni),Ra!==null&&(jr=kt(Ra,jr,Oa),hs===null?Qi=Ra:hs.sibling=Ra,hs=Ra);return Pa&&We(ni,Oa),Qi}for(ua=Ve(ua);!Ra.done;Oa++,Ra=si.next())Ra=ga(ua,ni,Oa,Ra.value,Ni),Ra!==null&&(ae&&Ra.alternate!==null&&ua.delete(Ra.key===null?Oa:Ra.key),jr=kt(Ra,jr,Oa),hs===null?Qi=Ra:hs.sibling=Ra,hs=Ra);return ae&&ua.forEach(function(bf){return le(ni,bf)}),Pa&&We(ni,Oa),Qi}function Uc(ni,jr,si,Ni){if(typeof si=="object"&&si!==null&&si.type===Ac&&si.key===null&&(si=si.props.children),typeof si=="object"&&si!==null){switch(si.$$typeof){case Ed:e:{for(var Qi=si.key;jr!==null;){if(jr.key===Qi){if(Qi=si.type,Qi===Ac){if(jr.tag===7){Ne(ni,jr.sibling),Ni=Je(jr,si.props.children),Ni.return=ni,ni=Ni;break e}}else if(jr.elementType===Qi||typeof Qi=="object"&&Qi!==null&&Qi.$$typeof===al&&tr(Qi)===jr.type){Ne(ni,jr.sibling),Ni=Je(jr,si.props),Er(Ni,si),Ni.return=ni,ni=Ni;break e}Ne(ni,jr);break}else le(ni,jr);jr=jr.sibling}si.type===Ac?(Ni=ys(si.props.children,ni.mode,Ni,si.key),Ni.return=ni,ni=Ni):(Ni=Dl(si.type,si.key,si.props,null,ni.mode,Ni),Er(Ni,si),Ni.return=ni,ni=Ni)}return Wn(ni);case il:e:{for(Qi=si.key;jr!==null;){if(jr.key===Qi)if(jr.tag===4&&jr.stateNode.containerInfo===si.containerInfo&&jr.stateNode.implementation===si.implementation){Ne(ni,jr.sibling),Ni=Je(jr,si.children||[]),Ni.return=ni,ni=Ni;break e}else{Ne(ni,jr);break}else le(ni,jr);jr=jr.sibling}Ni=Rf(si,ni.mode,Ni),Ni.return=ni,ni=Ni}return Wn(ni);case al:return Qi=si._init,si=Qi(si._payload),Uc(ni,jr,si,Ni)}if(Ou(si))return el(ni,jr,si,Ni);if(w(si)){if(Qi=w(si),typeof Qi!="function")throw Error(C(150));return si=Qi.call(si),Fc(ni,jr,si,Ni)}if(typeof si.then=="function")return Uc(ni,jr,Gn(si),Ni);if(si.$$typeof===yl)return Uc(ni,jr,ii(ni,si),Ni);mn(ni,si)}return typeof si=="string"&&si!==""||typeof si=="number"||typeof si=="bigint"?(si=""+si,jr!==null&&jr.tag===6?(Ne(ni,jr.sibling),Ni=Je(jr,si),Ni.return=ni,ni=Ni):(Ne(ni,jr),Ni=zd(si,ni.mode,Ni),Ni.return=ni,ni=Ni),Wn(ni)):Ne(ni,jr)}return function(ni,jr,si,Ni){try{Pc=0;var Qi=Uc(ni,jr,si,Ni);return Nc=null,Qi}catch(ua){if(ua===Xu)throw ua;var hs=v(29,ua,null,ni.mode);return hs.lanes=Ni,hs.return=ni,hs}finally{}}}function Ar(ae,le){ae=yo,fe(Qu,ae),fe(ss,le),yo=ae|le.baseLanes}function Tn(){fe(Qu,yo),fe(ss,ss.current)}function tt(){yo=Qu.current,re(ss),re(Qu)}function $t(ae){var le=ae.alternate;fe(Ys,Ys.current&1),fe(Wo,ae),Xa===null&&(le===null||ss.current!==null||le.memoizedState!==null)&&(Xa=ae)}function dn(ae){if(ae.tag===22){if(fe(Ys,Ys.current),fe(Wo,ae),Xa===null){var le=ae.alternate;le!==null&&le.memoizedState!==null&&(Xa=ae)}}else Qe()}function Qe(){fe(Ys,Ys.current),fe(Wo,Wo.current)}function gn(ae){re(Wo),Xa===ae&&(Xa=null),re(Ys)}function sr(ae){for(var le=ae;le!==null;){if(le.tag===13){var Ne=le.memoizedState;if(Ne!==null&&(Ne=Ne.dehydrated,Ne===null||ef(Ne)||tf(Ne)))return le}else if(le.tag===19&&le.memoizedProps.revealOrder!==void 0){if((le.flags&128)!==0)return le}else if(le.child!==null){le.child.return=le,le=le.child;continue}if(le===ae)break;for(;le.sibling===null;){if(le.return===null||le.return===ae)return null;le=le.return}le.sibling.return=le.return,le=le.sibling}return null}function rr(){throw Error(C(321))}function it(ae,le){if(le===null)return!1;for(var Ne=0;Ne<le.length&&Ne<ae.length;Ne++)if(!Fo(ae[Ne],le[Ne]))return!1;return!0}function At(ae,le,Ne,Ve,Je,kt){return cc=kt,Ca=le,le.memoizedState=null,le.updateQueue=null,le.lanes=0,ca.H=ae===null||ae.memoizedState===null?jc:Ro,Dc=!1,kt=Ne(Ve,Je),Dc=!1,mu&&(kt=Ft(le,Ne,Ve,Je)),An(ae),kt}function An(ae){ca.H=bs;var le=na!==null&&na.next!==null;if(cc=0,ja=na=Ca=null,ul=!1,gu=0,io=null,le)throw Error(C(300));ae===null||Qa||(ae=ae.dependencies,ae!==null&&zt(ae)&&(Qa=!0))}function Ft(ae,le,Ne,Ve){Ca=ae;var Je=0;do{if(mu&&(io=null),gu=0,mu=!1,25<=Je)throw Error(C(301));if(Je+=1,ja=na=null,ae.updateQueue!=null){var kt=ae.updateQueue;kt.lastEffect=null,kt.events=null,kt.stores=null,kt.memoCache!=null&&(kt.memoCache.index=0)}ca.H=Ko,kt=le(Ne,Ve)}while(mu);return kt}function Hn(){var ae=ca.H,le=ae.useState()[0];return le=typeof le.then=="function"?zn(le):le,ae=ae.useState()[0],(na!==null?na.memoizedState:null)!==ae&&(Ca.flags|=1024),le}function wn(){var ae=ff!==0;return ff=0,ae}function lr(ae,le,Ne){le.updateQueue=ae.updateQueue,le.flags&=-2053,ae.lanes&=~Ne}function rt(ae){if(ul){for(ae=ae.memoizedState;ae!==null;){var le=ae.queue;le!==null&&(le.pending=null),ae=ae.next}ul=!1}cc=0,ja=na=Ca=null,mu=!1,gu=ff=0,io=null}function ln(){var ae={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ja===null?Ca.memoizedState=ja=ae:ja=ja.next=ae,ja}function Cn(){if(na===null){var ae=Ca.alternate;ae=ae!==null?ae.memoizedState:null}else ae=na.next;var le=ja===null?Ca.memoizedState:ja.next;if(le!==null)ja=le,na=ae;else{if(ae===null)throw Ca.alternate===null?Error(C(467)):Error(C(310));na=ae,ae={memoizedState:na.memoizedState,baseState:na.baseState,baseQueue:na.baseQueue,queue:na.queue,next:null},ja===null?Ca.memoizedState=ja=ae:ja=ja.next=ae}return ja}function zn(ae){var le=gu;return gu+=1,io===null&&(io=[]),ae=br(io,ae,le),le=Ca,(ja===null?le.memoizedState:ja.next)===null&&(le=le.alternate,ca.H=le===null||le.memoizedState===null?jc:Ro),ae}function Sn(ae){if(ae!==null&&typeof ae=="object"){if(typeof ae.then=="function")return zn(ae);if(ae.$$typeof===yl)return zr(ae)}throw Error(C(438,String(ae)))}function yr(ae){var le=null,Ne=Ca.updateQueue;if(Ne!==null&&(le=Ne.memoCache),le==null){var Ve=Ca.alternate;Ve!==null&&(Ve=Ve.updateQueue,Ve!==null&&(Ve=Ve.memoCache,Ve!=null&&(le={data:Ve.data.map(function(Je){return Je.slice()}),index:0})))}if(le==null&&(le={data:[],index:0}),Ne===null&&(Ne=hf(),Ca.updateQueue=Ne),Ne.memoCache=le,Ne=le.data[le.index],Ne===void 0)for(Ne=le.data[le.index]=Array(ae),Ve=0;Ve<ae;Ve++)Ne[Ve]=ph;return le.index++,Ne}function ur(ae,le){return typeof le=="function"?le(ae):le}function hr(ae){var le=Cn();return fr(le,na,ae)}function fr(ae,le,Ne){var Ve=ae.queue;if(Ve===null)throw Error(C(311));Ve.lastRenderedReducer=Ne;var Je=ae.baseQueue,kt=Ve.pending;if(kt!==null){if(Je!==null){var Wn=Je.next;Je.next=kt.next,kt.next=Wn}le.baseQueue=Je=kt,Ve.pending=null}if(kt=ae.baseState,Je===null)ae.memoizedState=kt;else{le=Je.next;var Rr=Wn=null,Jr=null,hi=le,Bi=!1;do{var Vi=hi.lane&-536870913;if(Vi!==hi.lane?(Ma&Vi)===Vi:(cc&Vi)===Vi){var zi=hi.revertLane;if(zi===0)Jr!==null&&(Jr=Jr.next={lane:0,revertLane:0,action:hi.action,hasEagerState:hi.hasEagerState,eagerState:hi.eagerState,next:null}),Vi===$o&&(Bi=!0);else if((cc&zi)===zi){hi=hi.next,zi===$o&&(Bi=!0);continue}else Vi={lane:0,revertLane:hi.revertLane,action:hi.action,hasEagerState:hi.hasEagerState,eagerState:hi.eagerState,next:null},Jr===null?(Rr=Jr=Vi,Wn=kt):Jr=Jr.next=Vi,Ca.lanes|=zi,Jo|=zi;Vi=hi.action,Dc&&Ne(kt,Vi),kt=hi.hasEagerState?hi.eagerState:Ne(kt,Vi)}else zi={lane:Vi,revertLane:hi.revertLane,action:hi.action,hasEagerState:hi.hasEagerState,eagerState:hi.eagerState,next:null},Jr===null?(Rr=Jr=zi,Wn=kt):Jr=Jr.next=zi,Ca.lanes|=Vi,Jo|=Vi;hi=hi.next}while(hi!==null&&hi!==le);if(Jr===null?Wn=kt:Jr.next=Rr,!Fo(kt,ae.memoizedState)&&(Qa=!0,Bi&&(Ne=hu,Ne!==null)))throw Ne;ae.memoizedState=kt,ae.baseState=Wn,ae.baseQueue=Jr,Ve.lastRenderedState=kt}return Je===null&&(Ve.lanes=0),[ae.memoizedState,Ve.dispatch]}function Sr(ae){var le=Cn(),Ne=le.queue;if(Ne===null)throw Error(C(311));Ne.lastRenderedReducer=ae;var Ve=Ne.dispatch,Je=Ne.pending,kt=le.memoizedState;if(Je!==null){Ne.pending=null;var Wn=Je=Je.next;do kt=ae(kt,Wn.action),Wn=Wn.next;while(Wn!==Je);Fo(kt,le.memoizedState)||(Qa=!0),le.memoizedState=kt,le.baseQueue===null&&(le.baseState=kt),Ne.lastRenderedState=kt}return[kt,Ve]}function Lr(ae,le,Ne){var Ve=Ca,Je=Cn(),kt=Pa;if(kt){if(Ne===void 0)throw Error(C(407));Ne=Ne()}else Ne=le();var Wn=!Fo((na||Je).memoizedState,Ne);if(Wn&&(Je.memoizedState=Ne,Qa=!0),Je=Je.queue,Ki(Cr.bind(null,Ve,Je,ae),[ae]),Je.getSnapshot!==le||Wn||ja!==null&&ja.memoizedState.tag&1){if(Ve.flags|=2048,di(9,xr.bind(null,Ve,Je,Ne,le),{destroy:void 0},null),za===null)throw Error(C(349));kt||(cc&60)!==0||Nr(Ve,le,Ne)}return Ne}function Nr(ae,le,Ne){ae.flags|=16384,ae={getSnapshot:le,value:Ne},le=Ca.updateQueue,le===null?(le=hf(),Ca.updateQueue=le,le.stores=[ae]):(Ne=le.stores,Ne===null?le.stores=[ae]:Ne.push(ae))}function xr(ae,le,Ne,Ve){le.value=Ne,le.getSnapshot=Ve,Or(le)&&Ur(ae)}function Cr(ae,le,Ne){return Ne(function(){Or(le)&&Ur(ae)})}function Or(ae){var le=ae.getSnapshot;ae=ae.value;try{var Ne=le();return!Fo(ae,Ne)}catch{return!0}}function Ur(ae){var le=jn(ae,2);le!==null&&Os(le,ae,2)}function Pr(ae){var le=ln();if(typeof ae=="function"){var Ne=ae;if(ae=Ne(),Dc){He(!0);try{Ne()}finally{He(!1)}}}return le.memoizedState=le.baseState=ae,le.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:ae},le}function Vr(ae,le,Ne,Ve){return ae.baseState=Ne,fr(ae,na,typeof Ve=="function"?Ve:ur)}function xi(ae,le,Ne,Ve,Je){if(ao(ae))throw Error(C(485));if(ae=le.action,ae!==null){var kt={payload:Je,action:ae,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Wn){kt.listeners.push(Wn)}};ca.T!==null?Ne(!0):kt.isTransition=!1,Ve(kt),Ne=le.pending,Ne===null?(kt.next=le.pending=kt,Ai(le,kt)):(kt.next=Ne.next,le.pending=Ne.next=kt)}}function Ai(ae,le){var Ne=le.action,Ve=le.payload,Je=ae.state;if(le.isTransition){var kt=ca.T,Wn={};ca.T=Wn;try{var Rr=Ne(Je,Ve),Jr=ca.S;Jr!==null&&Jr(Wn,Rr),Ti(ae,le,Rr)}catch(hi){ir(ae,le,hi)}finally{ca.T=kt}}else try{kt=Ne(Je,Ve),Ti(ae,le,kt)}catch(hi){ir(ae,le,hi)}}function Ti(ae,le,Ne){Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"?Ne.then(function(Ve){Si(ae,le,Ve)},function(Ve){return ir(ae,le,Ve)}):Si(ae,le,Ne)}function Si(ae,le,Ne){le.status="fulfilled",le.value=Ne,bi(le),ae.state=Ne,le=ae.pending,le!==null&&(Ne=le.next,Ne===le?ae.pending=null:(Ne=Ne.next,le.next=Ne,Ai(ae,Ne)))}function ir(ae,le,Ne){var Ve=ae.pending;if(ae.pending=null,Ve!==null){Ve=Ve.next;do le.status="rejected",le.reason=Ne,bi(le),le=le.next;while(le!==Ve)}ae.action=null}function bi(ae){ae=ae.listeners;for(var le=0;le<ae.length;le++)(0,ae[le])()}function vn(ae,le){return le}function Ln(ae,le){if(Pa){var Ne=za.formState;if(Ne!==null){e:{var Ve=Ca;if(Pa){if(ho){var Je=qf(ho,ro);if(Je){ho=$f(Je),Ve=Lh(Je);break e}}In(Ve)}Ve=!1}Ve&&(le=Ne[0])}}Ne=ln(),Ne.memoizedState=Ne.baseState=le,Ve={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vn,lastRenderedState:le},Ne.queue=Ve,Ne=ji.bind(null,Ca,Ve),Ve.dispatch=Ne,Ve=Pr(!1);var kt=ha.bind(null,Ca,!1,Ve.queue);return Ve=ln(),Je={state:le,dispatch:null,action:ae,pending:null},Ve.queue=Je,Ne=xi.bind(null,Ca,Je,kt,Ne),Je.dispatch=Ne,Ve.memoizedState=ae,[le,Ne,!1]}function ar(ae){var le=Cn();return Mr(le,na,ae)}function Mr(ae,le,Ne){le=fr(ae,le,vn)[0],ae=hr(ur)[0],le=typeof le=="object"&&le!==null&&typeof le.then=="function"?zn(le):le;var Ve=Cn(),Je=Ve.queue,kt=Je.dispatch;return Ne!==Ve.memoizedState&&(Ca.flags|=2048,di(9,kr.bind(null,Je,Ne),{destroy:void 0},null)),[le,kt,ae]}function kr(ae,le){ae.action=le}function gi(ae){var le=Cn(),Ne=na;if(Ne!==null)return Mr(le,Ne,ae);Cn(),le=le.memoizedState,Ne=Cn();var Ve=Ne.queue.dispatch;return Ne.memoizedState=ae,[le,Ve,!1]}function di(ae,le,Ne,Ve){return ae={tag:ae,create:le,inst:Ne,deps:Ve,next:null},le=Ca.updateQueue,le===null&&(le=hf(),Ca.updateQueue=le),Ne=le.lastEffect,Ne===null?le.lastEffect=ae.next=ae:(Ve=Ne.next,Ne.next=ae,ae.next=Ve,le.lastEffect=ae),ae}function _i(){return Cn().memoizedState}function Hi(ae,le,Ne,Ve){var Je=ln();Ca.flags|=ae,Je.memoizedState=di(1|le,Ne,{destroy:void 0},Ve===void 0?null:Ve)}function fi(ae,le,Ne,Ve){var Je=Cn();Ve=Ve===void 0?null:Ve;var kt=Je.memoizedState.inst;na!==null&&Ve!==null&&it(Ve,na.memoizedState.deps)?Je.memoizedState=di(le,Ne,kt,Ve):(Ca.flags|=ae,Je.memoizedState=di(1|le,Ne,kt,Ve))}function qi(ae,le){Hi(8390656,8,ae,le)}function Ki(ae,le){fi(2048,8,ae,le)}function $i(ae,le){return fi(4,2,ae,le)}function wi(ae,le){return fi(4,4,ae,le)}function Oi(ae,le){if(typeof le=="function"){ae=ae();var Ne=le(ae);return function(){typeof Ne=="function"?Ne():le(null)}}if(le!=null)return ae=ae(),le.current=ae,function(){le.current=null}}function Gi(ae,le,Ne){Ne=Ne!=null?Ne.concat([ae]):null,fi(4,4,Oi.bind(null,le,ae),Ne)}function wa(){}function Fi(ae,le){var Ne=Cn();le=le===void 0?null:le;var Ve=Ne.memoizedState;return le!==null&&it(le,Ve[1])?Ve[0]:(Ne.memoizedState=[ae,le],ae)}function Ba(ae,le){var Ne=Cn();le=le===void 0?null:le;var Ve=Ne.memoizedState;if(le!==null&&it(le,Ve[1]))return Ve[0];if(Ve=ae(),Dc){He(!0);try{ae()}finally{He(!1)}}return Ne.memoizedState=[Ve,le],Ve}function ta(ae,le,Ne){return Ne===void 0||(cc&1073741824)!==0?ae.memoizedState=le:(ae.memoizedState=Ne,ae=gd(),Ca.lanes|=ae,Jo|=ae,Ne)}function Ua(ae,le,Ne,Ve){return Fo(Ne,le)?Ne:ss.current!==null?(ae=ta(ae,Ne,Ve),Fo(ae,le)||(Qa=!0),ae):(cc&42)===0?(Qa=!0,ae.memoizedState=Ne):(ae=gd(),Ca.lanes|=ae,Jo|=ae,le)}function Ss(ae,le,Ne,Ve,Je){var kt=ic();_o(kt!==0&&8>kt?kt:8);var Wn=ca.T,Rr={};ca.T=Rr,ha(ae,!1,le,Ne);try{var Jr=Je(),hi=ca.S;if(hi!==null&&hi(Rr,Jr),Jr!==null&&typeof Jr=="object"&&typeof Jr.then=="function"){var Bi=Wr(Jr,Ve);Da(ae,le,Bi,gs(ae))}else Da(ae,le,Ve,gs(ae))}catch(Vi){Da(ae,le,{then:function(){},status:"rejected",reason:Vi},gs())}finally{_o(kt),ca.T=Wn}}function Gs(ae){var le=ae.memoizedState;if(le!==null)return le;le={memoizedState:Cc,baseState:Cc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:Cc},next:null};var Ne={};return le.next={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ur,lastRenderedState:Ne},next:null},ae.memoizedState=le,ae=ae.alternate,ae!==null&&(ae.memoizedState=le),le}function Cs(){return zr(bl)}function ko(){return Cn().memoizedState}function ws(){return Cn().memoizedState}function No(ae){for(var le=ae.return;le!==null;){switch(le.tag){case 24:case 3:var Ne=gs();ae=Kr(Ne);var Ve=ti(le,ae,Ne);Ve!==null&&(Os(Ve,le,Ne),Mi(Ve,le,Ne)),le={cache:xa()},ae.payload=le;return}le=le.return}}function po(ae,le,Ne){var Ve=gs();Ne={lane:Ve,revertLane:0,action:Ne,hasEagerState:!1,eagerState:null,next:null},ao(ae)?ms(le,Ne):(Ne=Xn(ae,le,Ne,Ve),Ne!==null&&(Os(Ne,ae,Ve),ka(Ne,le,Ve)))}function ji(ae,le,Ne){var Ve=gs();Da(ae,le,Ne,Ve)}function Da(ae,le,Ne,Ve){var Je={lane:Ve,revertLane:0,action:Ne,hasEagerState:!1,eagerState:null,next:null};if(ao(ae))ms(le,Je);else{var kt=ae.alternate;if(ae.lanes===0&&(kt===null||kt.lanes===0)&&(kt=le.lastRenderedReducer,kt!==null))try{var Wn=le.lastRenderedState,Rr=kt(Wn,Ne);if(Je.hasEagerState=!0,Je.eagerState=Rr,Fo(Rr,Wn))return Nn(ae,le,Je,0),za===null&&Jn(),!1}catch{}finally{}if(Ne=Xn(ae,le,Je,Ve),Ne!==null)return Os(Ne,ae,Ve),ka(Ne,le,Ve),!0}return!1}function ha(ae,le,Ne,Ve){if(Ve={lane:2,revertLane:nr(),action:Ve,hasEagerState:!1,eagerState:null,next:null},ao(ae)){if(le)throw Error(C(479))}else le=Xn(ae,Ne,Ve,2),le!==null&&Os(le,ae,2)}function ao(ae){var le=ae.alternate;return ae===Ca||le!==null&&le===Ca}function ms(ae,le){mu=ul=!0;var Ne=ae.pending;Ne===null?le.next=le:(le.next=Ne.next,Ne.next=le),ae.pending=le}function ka(ae,le,Ne){if((Ne&4194176)!==0){var Ve=le.lanes;Ve&=ae.pendingLanes,Ne|=Ve,le.lanes=Ne,Ge(ae,Ne)}}function Uo(ae,le,Ne,Ve){le=ae.memoizedState,Ne=Ne(Ve,le),Ne=Ne==null?le:qd({},le,Ne),ae.memoizedState=Ne,ae.lanes===0&&(ae.updateQueue.baseState=Ne)}function Po(ae,le,Ne,Ve,Je,kt,Wn){return ae=ae.stateNode,typeof ae.shouldComponentUpdate=="function"?ae.shouldComponentUpdate(Ve,kt,Wn):le.prototype&&le.prototype.isPureReactComponent?!ui(Ne,Ve)||!ui(Je,kt):!0}function Xl(ae,le,Ne,Ve){ae=le.state,typeof le.componentWillReceiveProps=="function"&&le.componentWillReceiveProps(Ne,Ve),typeof le.UNSAFE_componentWillReceiveProps=="function"&&le.UNSAFE_componentWillReceiveProps(Ne,Ve),le.state!==ae&&Gl.enqueueReplaceState(le,le.state,null)}function so(ae,le){var Ne=le;if("ref"in le){Ne={};for(var Ve in le)Ve!=="ref"&&(Ne[Ve]=le[Ve])}if(ae=ae.defaultProps){Ne===le&&(Ne=qd({},Ne));for(var Je in ae)Ne[Je]===void 0&&(Ne[Je]=ae[Je])}return Ne}function Bo(ae,le){try{var Ne=ae.onUncaughtError;Ne(le.value,{componentStack:le.stack})}catch(Ve){setTimeout(function(){throw Ve})}}function Eo(ae,le,Ne){try{var Ve=ae.onCaughtError;Ve(Ne.value,{componentStack:Ne.stack,errorBoundary:le.tag===1?le.stateNode:null})}catch(Je){setTimeout(function(){throw Je})}}function Do(ae,le,Ne){return Ne=Kr(Ne),Ne.tag=3,Ne.payload={element:null},Ne.callback=function(){Bo(ae,le)},Ne}function Di(ae){return ae=Kr(ae),ae.tag=3,ae}function Xi(ae,le,Ne,Ve){var Je=Ne.type.getDerivedStateFromError;if(typeof Je=="function"){var kt=Ve.value;ae.payload=function(){return Je(kt)},ae.callback=function(){Eo(le,Ne,Ve)}}var Wn=Ne.stateNode;Wn!==null&&typeof Wn.componentDidCatch=="function"&&(ae.callback=function(){Eo(le,Ne,Ve),typeof Je!="function"&&(Lc===null?Lc=new Set([this]):Lc.add(this));var Rr=Ve.stack;this.componentDidCatch(Ve.value,{componentStack:Rr!==null?Rr:""})})}function On(ae,le,Ne,Ve,Je){if(Ne.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){if(le=Ne.alternate,le!==null&&st(le,Ne,Je,!0),Ne=Wo.current,Ne!==null){switch(Ne.tag){case 13:return Xa===null?li():Ne.alternate===null&&Ja===0&&(Ja=3),Ne.flags&=-257,Ne.flags|=65536,Ne.lanes=Je,Ve===Ld?Ne.flags|=16384:(le=Ne.updateQueue,le===null?Ne.updateQueue=new Set([Ve]):le.add(Ve),eu(ae,Ve,Je)),!1;case 22:return Ne.flags|=65536,Ve===Ld?Ne.flags|=16384:(le=Ne.updateQueue,le===null?(le={transitions:null,markerInstances:null,retryQueue:new Set([Ve])},Ne.updateQueue=le):(Ne=le.retryQueue,Ne===null?le.retryQueue=new Set([Ve]):Ne.add(Ve)),eu(ae,Ve,Je)),!1}throw Error(C(435,Ne.tag))}return eu(ae,Ve,Je),li(),!1}if(Pa)return le=Wo.current,le!==null?((le.flags&65536)===0&&(le.flags|=256),le.flags|=65536,le.lanes=Je,Ve!==Bd&&(ae=Error(C(422),{cause:Ve}),Gt($e(ae,Ne)))):(Ve!==Bd&&(le=Error(C(423),{cause:Ve}),Gt($e(le,Ne))),ae=ae.current.alternate,ae.flags|=65536,Je&=-Je,ae.lanes|=Je,Ve=$e(Ve,Ne),Je=Do(ae.stateNode,Ve,Je),Ci(ae,Je),Ja!==4&&(Ja=2)),!1;var kt=Error(C(520),{cause:Ve});if(kt=$e(kt,Ne),_u===null?_u=[kt]:_u.push(kt),Ja!==4&&(Ja=2),le===null)return!0;Ve=$e(Ve,Ne),Ne=le;do{switch(Ne.tag){case 3:return Ne.flags|=65536,ae=Je&-Je,Ne.lanes|=ae,ae=Do(Ne.stateNode,Ve,ae),Ci(Ne,ae),!1;case 1:if(le=Ne.type,kt=Ne.stateNode,(Ne.flags&128)===0&&(typeof le.getDerivedStateFromError=="function"||kt!==null&&typeof kt.componentDidCatch=="function"&&(Lc===null||!Lc.has(kt))))return Ne.flags|=65536,Je&=-Je,Ne.lanes|=Je,Je=Di(Je),Xi(Je,ae,Ne,Ve),Ci(Ne,Je),!1}Ne=Ne.return}while(Ne!==null);return!1}function Fn(ae,le,Ne,Ve){le.child=ae===null?Vl(le,null,Ne,Ve):Bc(le,ae.child,Ne,Ve)}function mr(ae,le,Ne,Ve,Je){Ne=Ne.render;var kt=le.ref;if("ref"in Ve){var Wn={};for(var Rr in Ve)Rr!=="ref"&&(Wn[Rr]=Ve[Rr])}else Wn=Ve;return qn(le),Ve=At(ae,le,Ne,Wn,kt,Je),Rr=wn(),ae!==null&&!Qa?(lr(ae,le,Je),xs(ae,le,Je)):(Pa&&Rr&&Qt(le),le.flags|=1,Fn(ae,le,Ve,Je),le.child)}function Xr(ae,le,Ne,Ve,Je){if(ae===null){var kt=Ne.type;return typeof kt=="function"&&!vd(kt)&&kt.defaultProps===void 0&&Ne.compare===null?(le.tag=15,le.type=kt,Ei(ae,le,kt,Ve,Je)):(ae=Dl(Ne.type,null,Ve,le,le.mode,Je),ae.ref=le.ref,ae.return=le,le.child=ae)}if(kt=ae.child,!Ms(ae,Je)){var Wn=kt.memoizedProps;if(Ne=Ne.compare,Ne=Ne!==null?Ne:ui,Ne(Wn,Ve)&&ae.ref===le.ref)return xs(ae,le,Je)}return le.flags|=1,ae=rl(kt,Ve),ae.ref=le.ref,ae.return=le,le.child=ae}function Ei(ae,le,Ne,Ve,Je){if(ae!==null){var kt=ae.memoizedProps;if(ui(kt,Ve)&&ae.ref===le.ref)if(Qa=!1,le.pendingProps=Ve=kt,Ms(ae,Je))(ae.flags&131072)!==0&&(Qa=!0);else return le.lanes=ae.lanes,xs(ae,le,Je)}return ki(ae,le,Ne,Ve,Je)}function ci(ae,le,Ne){var Ve=le.pendingProps,Je=Ve.children,kt=(le.stateNode._pendingVisibility&2)!==0,Wn=ae!==null?ae.memoizedState:null;if(Ui(ae,le),Ve.mode==="hidden"||kt){if((le.flags&128)!==0){if(Ve=Wn!==null?Wn.baseLanes|Ne:Ne,ae!==null){for(Je=le.child=ae.child,kt=0;Je!==null;)kt=kt|Je.lanes|Je.childLanes,Je=Je.sibling;le.childLanes=kt&~Ve}else le.childLanes=0,le.child=null;return Ri(ae,le,Ve,Ne)}if((Ne&536870912)!==0)le.memoizedState={baseLanes:0,cachePool:null},ae!==null&&ns(le,Wn!==null?Wn.cachePool:null),Wn!==null?Ar(le,Wn):Tn(),dn(le);else return le.lanes=le.childLanes=536870912,Ri(ae,le,Wn!==null?Wn.baseLanes|Ne:Ne,Ne)}else Wn!==null?(ns(le,Wn.cachePool),Ar(le,Wn),Qe(),le.memoizedState=null):(ae!==null&&ns(le,null),Tn(),Qe());return Fn(ae,le,Je,Ne),le.child}function Ri(ae,le,Ne,Ve){var Je=Aa();return Je=Je===null?null:{parent:Co?os._currentValue:os._currentValue2,pool:Je},le.memoizedState={baseLanes:Ne,cachePool:Je},ae!==null&&ns(le,null),Tn(),dn(le),ae!==null&&st(ae,le,Ve,!0),null}function Ui(ae,le){var Ne=le.ref;if(Ne===null)ae!==null&&ae.ref!==null&&(le.flags|=2097664);else{if(typeof Ne!="function"&&typeof Ne!="object")throw Error(C(284));(ae===null||ae.ref!==Ne)&&(le.flags|=2097664)}}function ki(ae,le,Ne,Ve,Je){return qn(le),Ne=At(ae,le,Ne,Ve,void 0,Je),Ve=wn(),ae!==null&&!Qa?(lr(ae,le,Je),xs(ae,le,Je)):(Pa&&Ve&&Qt(le),le.flags|=1,Fn(ae,le,Ne,Je),le.child)}function Yi(ae,le,Ne,Ve,Je,kt){return qn(le),le.updateQueue=null,Ne=Ft(le,Ve,Ne,Je),An(ae),Ve=wn(),ae!==null&&!Qa?(lr(ae,le,kt),xs(ae,le,kt)):(Pa&&Ve&&Qt(le),le.flags|=1,Fn(ae,le,Ne,kt),le.child)}function Ea(ae,le,Ne,Ve,Je){if(qn(le),le.stateNode===null){var kt=Mc,Wn=Ne.contextType;typeof Wn=="object"&&Wn!==null&&(kt=zr(Wn)),kt=new Ne(Ve,kt),le.memoizedState=kt.state!==null&&kt.state!==void 0?kt.state:null,kt.updater=Gl,le.stateNode=kt,kt._reactInternals=le,kt=le.stateNode,kt.props=Ve,kt.state=le.memoizedState,kt.refs={},Gr(le),Wn=Ne.contextType,kt.context=typeof Wn=="object"&&Wn!==null?zr(Wn):Mc,kt.state=le.memoizedState,Wn=Ne.getDerivedStateFromProps,typeof Wn=="function"&&(Uo(le,Ne,Wn,Ve),kt.state=le.memoizedState),typeof Ne.getDerivedStateFromProps=="function"||typeof kt.getSnapshotBeforeUpdate=="function"||typeof kt.UNSAFE_componentWillMount!="function"&&typeof kt.componentWillMount!="function"||(Wn=kt.state,typeof kt.componentWillMount=="function"&&kt.componentWillMount(),typeof kt.UNSAFE_componentWillMount=="function"&&kt.UNSAFE_componentWillMount(),Wn!==kt.state&&Gl.enqueueReplaceState(kt,kt.state,null),Ii(le,Ve,kt,Je),oi(),kt.state=le.memoizedState),typeof kt.componentDidMount=="function"&&(le.flags|=4194308),Ve=!0}else if(ae===null){kt=le.stateNode;var Rr=le.memoizedProps,Jr=so(Ne,Rr);kt.props=Jr;var hi=kt.context,Bi=Ne.contextType;Wn=Mc,typeof Bi=="object"&&Bi!==null&&(Wn=zr(Bi));var Vi=Ne.getDerivedStateFromProps;Bi=typeof Vi=="function"||typeof kt.getSnapshotBeforeUpdate=="function",Rr=le.pendingProps!==Rr,Bi||typeof kt.UNSAFE_componentWillReceiveProps!="function"&&typeof kt.componentWillReceiveProps!="function"||(Rr||hi!==Wn)&&Xl(le,kt,Ve,Wn),lc=!1;var zi=le.memoizedState;kt.state=zi,Ii(le,Ve,kt,Je),oi(),hi=le.memoizedState,Rr||zi!==hi||lc?(typeof Vi=="function"&&(Uo(le,Ne,Vi,Ve),hi=le.memoizedState),(Jr=lc||Po(le,Ne,Jr,Ve,zi,hi,Wn))?(Bi||typeof kt.UNSAFE_componentWillMount!="function"&&typeof kt.componentWillMount!="function"||(typeof kt.componentWillMount=="function"&&kt.componentWillMount(),typeof kt.UNSAFE_componentWillMount=="function"&&kt.UNSAFE_componentWillMount()),typeof kt.componentDidMount=="function"&&(le.flags|=4194308)):(typeof kt.componentDidMount=="function"&&(le.flags|=4194308),le.memoizedProps=Ve,le.memoizedState=hi),kt.props=Ve,kt.state=hi,kt.context=Wn,Ve=Jr):(typeof kt.componentDidMount=="function"&&(le.flags|=4194308),Ve=!1)}else{kt=le.stateNode,Hr(ae,le),Wn=le.memoizedProps,Bi=so(Ne,Wn),kt.props=Bi,Vi=le.pendingProps,zi=kt.context,hi=Ne.contextType,Jr=Mc,typeof hi=="object"&&hi!==null&&(Jr=zr(hi)),Rr=Ne.getDerivedStateFromProps,(hi=typeof Rr=="function"||typeof kt.getSnapshotBeforeUpdate=="function")||typeof kt.UNSAFE_componentWillReceiveProps!="function"&&typeof kt.componentWillReceiveProps!="function"||(Wn!==Vi||zi!==Jr)&&Xl(le,kt,Ve,Jr),lc=!1,zi=le.memoizedState,kt.state=zi,Ii(le,Ve,kt,Je),oi();var ga=le.memoizedState;Wn!==Vi||zi!==ga||lc||ae!==null&&ae.dependencies!==null&&zt(ae.dependencies)?(typeof Rr=="function"&&(Uo(le,Ne,Rr,Ve),ga=le.memoizedState),(Bi=lc||Po(le,Ne,Bi,Ve,zi,ga,Jr)||ae!==null&&ae.dependencies!==null&&zt(ae.dependencies))?(hi||typeof kt.UNSAFE_componentWillUpdate!="function"&&typeof kt.componentWillUpdate!="function"||(typeof kt.componentWillUpdate=="function"&&kt.componentWillUpdate(Ve,ga,Jr),typeof kt.UNSAFE_componentWillUpdate=="function"&&kt.UNSAFE_componentWillUpdate(Ve,ga,Jr)),typeof kt.componentDidUpdate=="function"&&(le.flags|=4),typeof kt.getSnapshotBeforeUpdate=="function"&&(le.flags|=1024)):(typeof kt.componentDidUpdate!="function"||Wn===ae.memoizedProps&&zi===ae.memoizedState||(le.flags|=4),typeof kt.getSnapshotBeforeUpdate!="function"||Wn===ae.memoizedProps&&zi===ae.memoizedState||(le.flags|=1024),le.memoizedProps=Ve,le.memoizedState=ga),kt.props=Ve,kt.state=ga,kt.context=Jr,Ve=Bi):(typeof kt.componentDidUpdate!="function"||Wn===ae.memoizedProps&&zi===ae.memoizedState||(le.flags|=4),typeof kt.getSnapshotBeforeUpdate!="function"||Wn===ae.memoizedProps&&zi===ae.memoizedState||(le.flags|=1024),Ve=!1)}return kt=Ve,Ui(ae,le),Ve=(le.flags&128)!==0,kt||Ve?(kt=le.stateNode,Ne=Ve&&typeof Ne.getDerivedStateFromError!="function"?null:kt.render(),le.flags|=1,ae!==null&&Ve?(le.child=Bc(le,ae.child,null,Je),le.child=Bc(le,null,Ne,Je)):Fn(ae,le,Ne,Je),le.memoizedState=kt.state,ae=le.child):ae=xs(ae,le,Je),ae}function qa(ae,le,Ne,Ve){return Dn(),le.flags|=256,Fn(ae,le,Ne,Ve),le.child}function Fa(ae){return{baseLanes:ae,cachePool:ds()}}function va(ae,le,Ne){return ae=ae!==null?ae.childLanes&~Ne:0,le&&(ae|=Zo),ae}function $a(ae,le,Ne){var Ve=le.pendingProps,Je=!1,kt=(le.flags&128)!==0,Wn;if((Wn=kt)||(Wn=ae!==null&&ae.memoizedState===null?!1:(Ys.current&2)!==0),Wn&&(Je=!0,le.flags&=-129),Wn=(le.flags&32)!==0,le.flags&=-33,ae===null){if(Pa){if(Je?$t(le):Qe(),Pa){var Rr=ho,Jr;(Jr=Rr)&&(Rr=Uh(Rr,ro),Rr!==null?(le.memoizedState={dehydrated:Rr,treeContext:Ic!==null?{id:Al,overflow:Sl}:null,retryLane:536870912},Jr=v(18,null,null,0),Jr.stateNode=Rr,Jr.return=le,le.child=Jr,fo=le,ho=null,Jr=!0):Jr=!1),Jr||In(le)}if(Rr=le.memoizedState,Rr!==null&&(Rr=Rr.dehydrated,Rr!==null))return tf(Rr)?le.lanes=16:le.lanes=536870912,null;gn(le)}return Rr=Ve.children,Ve=Ve.fallback,Je?(Qe(),Je=le.mode,Rr=Za({mode:"hidden",children:Rr},Je),Ve=ys(Ve,Je,Ne,null),Rr.return=le,Ve.return=le,Rr.sibling=Ve,le.child=Rr,Je=le.child,Je.memoizedState=Fa(Ne),Je.childLanes=va(ae,Wn,Ne),le.memoizedState=gf,Ve):($t(le),Ts(le,Rr))}if(Jr=ae.memoizedState,Jr!==null&&(Rr=Jr.dehydrated,Rr!==null)){if(kt)le.flags&256?($t(le),le.flags&=-257,le=Rs(ae,le,Ne)):le.memoizedState!==null?(Qe(),le.child=ae.child,le.flags|=128,le=null):(Qe(),Je=Ve.fallback,Rr=le.mode,Ve=Za({mode:"visible",children:Ve.children},Rr),Je=ys(Je,Rr,Ne,null),Je.flags|=2,Ve.return=le,Je.return=le,Ve.sibling=Je,le.child=Ve,Bc(le,ae.child,null,Ne),Ve=le.child,Ve.memoizedState=Fa(Ne),Ve.childLanes=va(ae,Wn,Ne),le.memoizedState=gf,le=Je);else if($t(le),tf(Rr))Wn=Dh(Rr).digest,Ve=Error(C(419)),Ve.stack="",Ve.digest=Wn,Gt({value:Ve,source:null,stack:null}),le=Rs(ae,le,Ne);else if(Qa||st(ae,le,Ne,!1),Wn=(Ne&ae.childLanes)!==0,Qa||Wn){if(Wn=za,Wn!==null){if(Ve=Ne&-Ne,(Ve&42)!==0)Ve=1;else switch(Ve){case 2:Ve=1;break;case 8:Ve=4;break;case 32:Ve=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Ve=64;break;case 268435456:Ve=134217728;break;default:Ve=0}if(Ve=(Ve&(Wn.suspendedLanes|Ne))!==0?0:Ve,Ve!==0&&Ve!==Jr.retryLane)throw Jr.retryLane=Ve,jn(ae,Ve),Os(Wn,ae,Ve),mf}ef(Rr)||li(),le=Rs(ae,le,Ne)}else ef(Rr)?(le.flags|=128,le.child=ae.child,le=Zl.bind(null,ae),jh(Rr,le),le=null):(ae=Jr.treeContext,uo&&(ho=Fh(Rr),fo=le,Pa=!0,ll=null,ro=!1,ae!==null&&(Ho[qo++]=Al,Ho[qo++]=Sl,Ho[qo++]=Ic,Al=ae.id,Sl=ae.overflow,Ic=le)),le=Ts(le,Ve.children),le.flags|=4096);return le}return Je?(Qe(),Je=Ve.fallback,Rr=le.mode,Jr=ae.child,kt=Jr.sibling,Ve=rl(Jr,{mode:"hidden",children:Ve.children}),Ve.subtreeFlags=Jr.subtreeFlags&31457280,kt!==null?Je=rl(kt,Je):(Je=ys(Je,Rr,Ne,null),Je.flags|=2),Je.return=le,Ve.return=le,Ve.sibling=Je,le.child=Ve,Ve=Je,Je=le.child,Rr=ae.child.memoizedState,Rr===null?Rr=Fa(Ne):(Jr=Rr.cachePool,Jr!==null?(kt=Co?os._currentValue:os._currentValue2,Jr=Jr.parent!==kt?{parent:kt,pool:kt}:Jr):Jr=ds(),Rr={baseLanes:Rr.baseLanes|Ne,cachePool:Jr}),Je.memoizedState=Rr,Je.childLanes=va(ae,Wn,Ne),le.memoizedState=gf,Ve):($t(le),Ne=ae.child,ae=Ne.sibling,Ne=rl(Ne,{mode:"visible",children:Ve.children}),Ne.return=le,Ne.sibling=null,ae!==null&&(Wn=le.deletions,Wn===null?(le.deletions=[ae],le.flags|=16):Wn.push(ae)),le.child=Ne,le.memoizedState=null,Ne)}function Ts(ae,le){return le=Za({mode:"visible",children:le},ae.mode),le.return=ae,ae.child=le}function Za(ae,le){return yd(ae,le,0,null)}function Rs(ae,le,Ne){return Bc(le,ae.child,null,Ne),ae=Ts(le,le.pendingProps.children),ae.flags|=2,le.memoizedState=null,ae}function us(ae,le,Ne){ae.lanes|=le;var Ve=ae.alternate;Ve!==null&&(Ve.lanes|=le),Ls(ae.return,le,Ne)}function Qs(ae,le,Ne,Ve,Je){var kt=ae.memoizedState;kt===null?ae.memoizedState={isBackwards:le,rendering:null,renderingStartTime:0,last:Ve,tail:Ne,tailMode:Je}:(kt.isBackwards=le,kt.rendering=null,kt.renderingStartTime=0,kt.last=Ve,kt.tail=Ne,kt.tailMode=Je)}function Ao(ae,le,Ne){var Ve=le.pendingProps,Je=Ve.revealOrder,kt=Ve.tail;if(Fn(ae,le,Ve.children,Ne),Ve=Ys.current,(Ve&2)!==0)Ve=Ve&1|2,le.flags|=128;else{if(ae!==null&&(ae.flags&128)!==0)e:for(ae=le.child;ae!==null;){if(ae.tag===13)ae.memoizedState!==null&&us(ae,Ne,le);else if(ae.tag===19)us(ae,Ne,le);else if(ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===le)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===le)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}Ve&=1}switch(fe(Ys,Ve),Je){case"forwards":for(Ne=le.child,Je=null;Ne!==null;)ae=Ne.alternate,ae!==null&&sr(ae)===null&&(Je=Ne),Ne=Ne.sibling;Ne=Je,Ne===null?(Je=le.child,le.child=null):(Je=Ne.sibling,Ne.sibling=null),Qs(le,!1,Je,Ne,kt);break;case"backwards":for(Ne=null,Je=le.child,le.child=null;Je!==null;){if(ae=Je.alternate,ae!==null&&sr(ae)===null){le.child=Je;break}ae=Je.sibling,Je.sibling=Ne,Ne=Je,Je=ae}Qs(le,!0,Ne,null,kt);break;case"together":Qs(le,!1,null,null,void 0);break;default:le.memoizedState=null}return le.child}function xs(ae,le,Ne){if(ae!==null&&(le.dependencies=ae.dependencies),Jo|=le.lanes,(Ne&le.childLanes)===0)if(ae!==null){if(st(ae,le,Ne,!1),(Ne&le.childLanes)===0)return null}else return null;if(ae!==null&&le.child!==ae.child)throw Error(C(153));if(le.child!==null){for(ae=le.child,Ne=rl(ae,ae.pendingProps),le.child=Ne,Ne.return=le;ae.sibling!==null;)ae=ae.sibling,Ne=Ne.sibling=rl(ae,ae.pendingProps),Ne.return=le;Ne.sibling=null}return le.child}function Ms(ae,le){return(ae.lanes&le)!==0?!0:(ae=ae.dependencies,!!(ae!==null&&zt(ae)))}function Js(ae,le,Ne){switch(le.tag){case 3:Bn(le,le.stateNode.containerInfo),js(le,os,ae.memoizedState.cache),Dn();break;case 27:case 5:Mn(le);break;case 4:Bn(le,le.stateNode.containerInfo);break;case 10:js(le,le.type,le.memoizedProps.value);break;case 13:var Ve=le.memoizedState;if(Ve!==null)return Ve.dehydrated!==null?($t(le),le.flags|=128,null):(Ne&le.child.childLanes)!==0?$a(ae,le,Ne):($t(le),ae=xs(ae,le,Ne),ae!==null?ae.sibling:null);$t(le);break;case 19:var Je=(ae.flags&128)!==0;if(Ve=(Ne&le.childLanes)!==0,Ve||(st(ae,le,Ne,!1),Ve=(Ne&le.childLanes)!==0),Je){if(Ve)return Ao(ae,le,Ne);le.flags|=128}if(Je=le.memoizedState,Je!==null&&(Je.rendering=null,Je.tail=null,Je.lastEffect=null),fe(Ys,Ys.current),Ve)break;return null;case 22:case 23:return le.lanes=0,ci(ae,le,Ne);case 24:js(le,os,ae.memoizedState.cache)}return xs(ae,le,Ne)}function es(ae,le,Ne){if(ae!==null)if(ae.memoizedProps!==le.pendingProps)Qa=!0;else{if(!Ms(ae,Ne)&&(le.flags&128)===0)return Qa=!1,Js(ae,le,Ne);Qa=(ae.flags&131072)!==0}else Qa=!1,Pa&&(le.flags&1048576)!==0&&nt(le,$u,le.index);switch(le.lanes=0,le.tag){case 16:e:{ae=le.pendingProps;var Ve=le.elementType,Je=Ve._init;if(Ve=Je(Ve._payload),le.type=Ve,typeof Ve=="function")vd(Ve)?(ae=so(Ve,ae),le.tag=1,le=Ea(null,le,Ve,ae,Ne)):(le.tag=0,le=ki(null,le,Ve,ae,Ne));else{if(Ve!=null){if(Je=Ve.$$typeof,Je===Cd){le.tag=11,le=mr(null,le,Ve,ae,Ne);break e}else if(Je===Kd){le.tag=14,le=Xr(null,le,Ve,ae,Ne);break e}}throw le=T(Ve)||Ve,Error(C(306,le,""))}}return le;case 0:return ki(ae,le,le.type,le.pendingProps,Ne);case 1:return Ve=le.type,Je=so(Ve,le.pendingProps),Ea(ae,le,Ve,Je,Ne);case 3:e:{if(Bn(le,le.stateNode.containerInfo),ae===null)throw Error(C(387));var kt=le.pendingProps;Je=le.memoizedState,Ve=Je.element,Hr(ae,le),Ii(le,kt,null,Ne);var Wn=le.memoizedState;if(kt=Wn.cache,js(le,os,kt),kt!==Je.cache&&Le(le,[os],Ne,!0),oi(),kt=Wn.element,uo&&Je.isDehydrated)if(Je={element:kt,isDehydrated:!1,cache:Wn.cache},le.updateQueue.baseState=Je,le.memoizedState=Je,le.flags&256){le=qa(ae,le,kt,Ne);break e}else if(kt!==Ve){Ve=$e(Error(C(424)),le),Gt(Ve),le=qa(ae,le,kt,Ne);break e}else for(uo&&(ho=Oh(le.stateNode.containerInfo),fo=le,Pa=!0,ll=null,ro=!0),Ne=Vl(le,null,kt,Ne),le.child=Ne;Ne;)Ne.flags=Ne.flags&-3|4096,Ne=Ne.sibling;else{if(Dn(),kt===Ve){le=xs(ae,le,Ne);break e}Fn(ae,le,kt,Ne)}le=le.child}return le;case 26:if(zo)return Ui(ae,le),ae===null?(Ne=Yf(le.type,null,le.pendingProps,null))?le.memoizedState=Ne:Pa||(le.stateNode=of(le.type,le.pendingProps,Fl.current,le)):le.memoizedState=Yf(le.type,ae.memoizedProps,le.pendingProps,ae.memoizedState),null;case 27:if(Ya)return Mn(le),ae===null&&Ya&&Pa&&(Ve=le.stateNode=El(le.type,le.pendingProps,Fl.current,Ks.current,!1),fo=le,ro=!0,ho=nf(Ve)),Ve=le.pendingProps.children,ae!==null||Pa?Fn(ae,le,Ve,Ne):le.child=Bc(le,null,Ve,Ne),Ui(ae,le),le.child;case 5:return ae===null&&Pa&&(af(le.type,le.pendingProps,Ks.current),(Je=Ve=ho)&&(Ve=Cp(Ve,le.type,le.pendingProps,ro),Ve!==null?(le.stateNode=Ve,fo=le,ho=nf(Ve),ro=!1,Je=!0):Je=!1),Je||In(le)),Mn(le),Je=le.type,kt=le.pendingProps,Wn=ae!==null?ae.memoizedProps:null,Ve=kt.children,ba(Je,kt)?Ve=null:Wn!==null&&ba(Je,Wn)&&(le.flags|=32),le.memoizedState!==null&&(Je=At(ae,le,Hn,null,null,Ne),Co?bl._currentValue=Je:bl._currentValue2=Je),Ui(ae,le),Fn(ae,le,Ve,Ne),le.child;case 6:return ae===null&&Pa&&(qh(le.pendingProps,Ks.current),(ae=Ne=ho)&&(Ne=Wf(Ne,le.pendingProps,ro),Ne!==null?(le.stateNode=Ne,fo=le,ho=null,ae=!0):ae=!1),ae||In(le)),null;case 13:return $a(ae,le,Ne);case 4:return Bn(le,le.stateNode.containerInfo),Ve=le.pendingProps,ae===null?le.child=Bc(le,null,Ve,Ne):Fn(ae,le,Ve,Ne),le.child;case 11:return mr(ae,le,le.type,le.pendingProps,Ne);case 7:return Fn(ae,le,le.pendingProps,Ne),le.child;case 8:return Fn(ae,le,le.pendingProps.children,Ne),le.child;case 12:return Fn(ae,le,le.pendingProps.children,Ne),le.child;case 10:return Ve=le.pendingProps,js(le,le.type,Ve.value),Fn(ae,le,Ve.children,Ne),le.child;case 9:return Je=le.type._context,Ve=le.pendingProps.children,qn(le),Je=zr(Je),Ve=Ve(Je),le.flags|=1,Fn(ae,le,Ve,Ne),le.child;case 14:return Xr(ae,le,le.type,le.pendingProps,Ne);case 15:return Ei(ae,le,le.type,le.pendingProps,Ne);case 19:return Ao(ae,le,Ne);case 22:return ci(ae,le,Ne);case 24:return qn(le),Ve=zr(os),ae===null?(Je=Aa(),Je===null&&(Je=za,kt=xa(),Je.pooledCache=kt,kt.refCount++,kt!==null&&(Je.pooledCacheLanes|=Ne),Je=kt),le.memoizedState={parent:Ve,cache:Je},Gr(le),js(le,os,Je)):((ae.lanes&Ne)!==0&&(Hr(ae,le),Ii(le,null,null,Ne),oi()),Je=ae.memoizedState,kt=le.memoizedState,Je.parent!==Ve?(Je={parent:Ve,cache:Ve},le.memoizedState=Je,le.lanes===0&&(le.memoizedState=le.updateQueue.baseState=Je),js(le,os,Ve)):(Ve=kt.cache,js(le,os,Ve),Ve!==Je.cache&&Le(le,[os],Ne,!0))),Fn(ae,le,le.pendingProps.children,Ne),le.child;case 29:throw le.pendingProps}throw Error(C(156,le.tag))}function js(ae,le,Ne){Co?(fe(uc,le._currentValue),le._currentValue=Ne):(fe(uc,le._currentValue2),le._currentValue2=Ne)}function zs(ae){var le=uc.current;Co?ae._currentValue=le:ae._currentValue2=le,re(uc)}function Ls(ae,le,Ne){for(;ae!==null;){var Ve=ae.alternate;if((ae.childLanes&le)!==le?(ae.childLanes|=le,Ve!==null&&(Ve.childLanes|=le)):Ve!==null&&(Ve.childLanes&le)!==le&&(Ve.childLanes|=le),ae===Ne)break;ae=ae.return}}function Le(ae,le,Ne,Ve){var Je=ae.child;for(Je!==null&&(Je.return=ae);Je!==null;){var kt=Je.dependencies;if(kt!==null){var Wn=Je.child;kt=kt.firstContext;e:for(;kt!==null;){var Rr=kt;kt=Je;for(var Jr=0;Jr<le.length;Jr++)if(Rr.context===le[Jr]){kt.lanes|=Ne,Rr=kt.alternate,Rr!==null&&(Rr.lanes|=Ne),Ls(kt.return,Ne,ae),Ve||(Wn=null);break e}kt=Rr.next}}else if(Je.tag===18){if(Wn=Je.return,Wn===null)throw Error(C(341));Wn.lanes|=Ne,kt=Wn.alternate,kt!==null&&(kt.lanes|=Ne),Ls(Wn,Ne,ae),Wn=null}else Wn=Je.child;if(Wn!==null)Wn.return=Je;else for(Wn=Je;Wn!==null;){if(Wn===ae){Wn=null;break}if(Je=Wn.sibling,Je!==null){Je.return=Wn.return,Wn=Je;break}Wn=Wn.return}Je=Wn}}function st(ae,le,Ne,Ve){ae=null;for(var Je=le,kt=!1;Je!==null;){if(!kt){if((Je.flags&524288)!==0)kt=!0;else if((Je.flags&262144)!==0)break}if(Je.tag===10){var Wn=Je.alternate;if(Wn===null)throw Error(C(387));if(Wn=Wn.memoizedProps,Wn!==null){var Rr=Je.type;Fo(Je.pendingProps.value,Wn.value)||(ae!==null?ae.push(Rr):ae=[Rr])}}else if(Je===cu.current){if(Wn=Je.alternate,Wn===null)throw Error(C(387));Wn.memoizedState.memoizedState!==Je.memoizedState.memoizedState&&(ae!==null?ae.push(bl):ae=[bl])}Je=Je.return}ae!==null&&Le(le,ae,Ne,Ve),le.flags|=262144}function zt(ae){for(ae=ae.firstContext;ae!==null;){var le=ae.context;if(!Fo(Co?le._currentValue:le._currentValue2,ae.memoizedValue))return!0;ae=ae.next}return!1}function qn(ae){Tl=ae,Yo=null,ae=ae.dependencies,ae!==null&&(ae.firstContext=null)}function zr(ae){return Pi(Tl,ae)}function ii(ae,le){return Tl===null&&qn(ae),Pi(ae,le)}function Pi(ae,le){var Ne=Co?le._currentValue:le._currentValue2;if(le={context:le,memoizedValue:Ne,next:null},Yo===null){if(ae===null)throw Error(C(308));Yo=le,ae.dependencies={lanes:0,firstContext:le},ae.flags|=524288}else Yo=Yo.next=le;return Ne}function xa(){return{controller:new Ju,data:new Map,refCount:0}}function da(ae){ae.refCount--,ae.refCount===0&&np(rp,function(){ae.controller.abort()})}function Aa(){var ae=zl.current;return ae!==null?ae:za.pooledCache}function ns(ae,le){le===null?fe(zl,zl.current):fe(zl,le.pool)}function ds(){var ae=Aa();return ae===null?null:{parent:Co?os._currentValue:os._currentValue2,pool:ae}}function ps(ae){ae.flags|=4}function Is(ae,le){if(ae!==null&&ae.child===le.child)return!1;if((le.flags&16)!==0)return!0;for(ae=le.child;ae!==null;){if((ae.flags&13878)!==0||(ae.subtreeFlags&13878)!==0)return!0;ae=ae.sibling}return!1}function oo(ae,le,Ne,Ve){if(Ws)for(Ne=le.child;Ne!==null;){if(Ne.tag===5||Ne.tag===6)Td(ae,Ne.stateNode);else if(!(Ne.tag===4||Ya&&Ne.tag===27)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===le)break;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===le)return;Ne=Ne.return}Ne.sibling.return=Ne.return,Ne=Ne.sibling}else if(sl)for(var Je=le.child;Je!==null;){if(Je.tag===5){var kt=Je.stateNode;Ne&&Ve&&(kt=zf(kt,Je.type,Je.memoizedProps)),Td(ae,kt)}else if(Je.tag===6)kt=Je.stateNode,Ne&&Ve&&(kt=Hf(kt,Je.memoizedProps)),Td(ae,kt);else if(Je.tag!==4){if(Je.tag===22&&Je.memoizedState!==null)kt=Je.child,kt!==null&&(kt.return=Je),oo(ae,Je,!0,!0);else if(Je.child!==null){Je.child.return=Je,Je=Je.child;continue}}if(Je===le)break;for(;Je.sibling===null;){if(Je.return===null||Je.return===le)return;Je=Je.return}Je.sibling.return=Je.return,Je=Je.sibling}}function hc(ae,le,Ne,Ve){if(sl)for(var Je=le.child;Je!==null;){if(Je.tag===5){var kt=Je.stateNode;Ne&&Ve&&(kt=zf(kt,Je.type,Je.memoizedProps)),Gf(ae,kt)}else if(Je.tag===6)kt=Je.stateNode,Ne&&Ve&&(kt=Hf(kt,Je.memoizedProps)),Gf(ae,kt);else if(Je.tag!==4){if(Je.tag===22&&Je.memoizedState!==null)kt=Je.child,kt!==null&&(kt.return=Je),hc(ae,Je,!(Je.memoizedProps!==null&&Je.memoizedProps.mode==="manual"),!0);else if(Je.child!==null){Je.child.return=Je,Je=Je.child;continue}}if(Je===le)break;for(;Je.sibling===null;){if(Je.return===null||Je.return===le)return;Je=Je.return}Je.sibling.return=Je.return,Je=Je.sibling}}function pc(ae,le){if(sl&&Is(ae,le)){ae=le.stateNode;var Ne=ae.containerInfo,Ve=Rd();hc(Ve,le,!1,!1),ae.pendingChildren=Ve,ps(le),Zd(Ne,Ve)}}function Eu(ae,le,Ne,Ve){if(Ws)ae.memoizedProps!==Ve&&ps(le);else if(sl){var Je=ae.stateNode,kt=ae.memoizedProps;if((ae=Is(ae,le))||kt!==Ve){var Wn=Ks.current;kt=zu(Je,Ne,kt,Ve,!ae,null),kt===Je?le.stateNode=Je:(rc(kt,Ne,Ve,Wn)&&ps(le),le.stateNode=kt,ae?oo(kt,le,!1,!1):ps(le))}else le.stateNode=Je}}function Au(ae,le,Ne){if(Bf(le,Ne)){if(ae.flags|=16777216,!Qd(le,Ne))if(Ir())ae.flags|=8192;else throw kc=Ld,jd}else ae.flags&=-16777217}function Su(ae,le){if(Kh(le)){if(ae.flags|=16777216,!iu(le))if(Ir())ae.flags|=8192;else throw kc=Ld,jd}else ae.flags&=-16777217}function mc(ae,le){le!==null&&(ae.flags|=4),ae.flags&16384&&(le=ae.tag!==22?we():536870912,ae.lanes|=le,$l|=le)}function ml(ae,le){if(!Pa)switch(ae.tailMode){case"hidden":le=ae.tail;for(var Ne=null;le!==null;)le.alternate!==null&&(Ne=le),le=le.sibling;Ne===null?ae.tail=null:Ne.sibling=null;break;case"collapsed":Ne=ae.tail;for(var Ve=null;Ne!==null;)Ne.alternate!==null&&(Ve=Ne),Ne=Ne.sibling;Ve===null?le||ae.tail===null?ae.tail=null:ae.tail.sibling=null:Ve.sibling=null}}function rs(ae){var le=ae.alternate!==null&&ae.alternate.child===ae.child,Ne=0,Ve=0;if(le)for(var Je=ae.child;Je!==null;)Ne|=Je.lanes|Je.childLanes,Ve|=Je.subtreeFlags&31457280,Ve|=Je.flags&31457280,Je.return=ae,Je=Je.sibling;else for(Je=ae.child;Je!==null;)Ne|=Je.lanes|Je.childLanes,Ve|=Je.subtreeFlags,Ve|=Je.flags,Je.return=ae,Je=Je.sibling;return ae.subtreeFlags|=Ve,ae.childLanes=Ne,le}function Cu(ae,le,Ne){var Ve=le.pendingProps;switch(Wt(le),le.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rs(le),null;case 1:return rs(le),null;case 3:return Ne=le.stateNode,Ve=null,ae!==null&&(Ve=ae.memoizedState.cache),le.memoizedState.cache!==Ve&&(le.flags|=2048),zs(os),Lt(),Ne.pendingContext&&(Ne.context=Ne.pendingContext,Ne.pendingContext=null),(ae===null||ae.child===null)&&(Rn(le)?ps(le):ae===null||ae.memoizedState.isDehydrated&&(le.flags&256)===0||(le.flags|=1024,ll!==null&&(Qc(ll),ll=null))),pc(ae,le),rs(le),null;case 26:if(zo){Ne=le.type;var Je=le.memoizedState;return ae===null?(ps(le),Je!==null?(rs(le),Su(le,Je)):(rs(le),Au(le,Ne,Ve))):Je?Je!==ae.memoizedState?(ps(le),rs(le),Su(le,Je)):(rs(le),le.flags&=-16777217):(Ws?ae.memoizedProps!==Ve&&ps(le):Eu(ae,le,Ne,Ve),rs(le),Au(le,Ne,Ve)),null}case 27:if(Ya){if(cr(le),Ne=Fl.current,Je=le.type,ae!==null&&le.stateNode!=null)Ws?ae.memoizedProps!==Ve&&ps(le):Eu(ae,le,Je,Ve);else{if(!Ve){if(le.stateNode===null)throw Error(C(166));return rs(le),null}ae=Ks.current,Rn(le)?Zn(le,ae):(ae=El(Je,Ve,Ne,ae,!0),le.stateNode=ae,ps(le))}return rs(le),null}case 5:if(cr(le),Ne=le.type,ae!==null&&le.stateNode!=null)Eu(ae,le,Ne,Ve);else{if(!Ve){if(le.stateNode===null)throw Error(C(166));return rs(le),null}ae=Ks.current,Rn(le)?Zn(le,ae):(Je=Pf(Ne,Ve,Fl.current,ae,le),oo(Je,le,!1,!1),le.stateNode=Je,rc(Je,Ne,Ve,ae)&&ps(le))}return rs(le),Au(le,le.type,le.pendingProps),null;case 6:if(ae&&le.stateNode!=null)Ne=ae.memoizedProps,Ws?Ne!==Ve&&ps(le):sl&&(Ne!==Ve?(le.stateNode=Wa(Ve,Fl.current,Ks.current,le),ps(le)):le.stateNode=ae.stateNode);else{if(typeof Ve!="string"&&le.stateNode===null)throw Error(C(166));if(ae=Fl.current,Ne=Ks.current,Rn(le)){if(!uo)throw Error(C(176));if(ae=le.stateNode,Ne=le.memoizedProps,Ve=null,Je=fo,Je!==null)switch(Je.tag){case 27:case 5:Ve=Je.memoizedProps}Kf(ae,Ne,le,Ve)||In(le)}else le.stateNode=Wa(Ve,ae,Ne,le)}return rs(le),null;case 13:if(Ve=le.memoizedState,ae===null||ae.memoizedState!==null&&ae.memoizedState.dehydrated!==null){if(Je=Rn(le),Ve!==null&&Ve.dehydrated!==null){if(ae===null){if(!Je)throw Error(C(318));if(!uo)throw Error(C(344));if(Je=le.memoizedState,Je=Je!==null?Je.dehydrated:null,!Je)throw Error(C(317));Gh(Je,le)}else Dn(),(le.flags&128)===0&&(le.memoizedState=null),le.flags|=4;rs(le),Je=!1}else ll!==null&&(Qc(ll),ll=null),Je=!0;if(!Je)return le.flags&256?(gn(le),le):(gn(le),null)}if(gn(le),(le.flags&128)!==0)return le.lanes=Ne,le;if(Ne=Ve!==null,ae=ae!==null&&ae.memoizedState!==null,Ne){Ve=le.child,Je=null,Ve.alternate!==null&&Ve.alternate.memoizedState!==null&&Ve.alternate.memoizedState.cachePool!==null&&(Je=Ve.alternate.memoizedState.cachePool.pool);var kt=null;Ve.memoizedState!==null&&Ve.memoizedState.cachePool!==null&&(kt=Ve.memoizedState.cachePool.pool),kt!==Je&&(Ve.flags|=2048)}return Ne!==ae&&Ne&&(le.child.flags|=8192),mc(le,le.updateQueue),rs(le),null;case 4:return Lt(),pc(ae,le),ae===null&&Ns(le.stateNode.containerInfo),rs(le),null;case 10:return zs(le.type),rs(le),null;case 19:if(re(Ys),Je=le.memoizedState,Je===null)return rs(le),null;if(Ve=(le.flags&128)!==0,kt=Je.rendering,kt===null)if(Ve)ml(Je,!1);else{if(Ja!==0||ae!==null&&(ae.flags&128)!==0)for(ae=le.child;ae!==null;){if(kt=sr(ae),kt!==null){for(le.flags|=128,ml(Je,!1),ae=kt.updateQueue,le.updateQueue=ae,mc(le,ae),le.subtreeFlags=0,ae=Ne,Ne=le.child;Ne!==null;)xd(Ne,ae),Ne=Ne.sibling;return fe(Ys,Ys.current&1|2),le.child}ae=ae.sibling}Je.tail!==null&&ol()>nd&&(le.flags|=128,Ve=!0,ml(Je,!1),le.lanes=4194304)}else{if(!Ve)if(ae=sr(kt),ae!==null){if(le.flags|=128,Ve=!0,ae=ae.updateQueue,le.updateQueue=ae,mc(le,ae),ml(Je,!0),Je.tail===null&&Je.tailMode==="hidden"&&!kt.alternate&&!Pa)return rs(le),null}else 2*ol()-Je.renderingStartTime>nd&&Ne!==536870912&&(le.flags|=128,Ve=!0,ml(Je,!1),le.lanes=4194304);Je.isBackwards?(kt.sibling=le.child,le.child=kt):(ae=Je.last,ae!==null?ae.sibling=kt:le.child=kt,Je.last=kt)}return Je.tail!==null?(le=Je.tail,Je.rendering=le,Je.tail=le.sibling,Je.renderingStartTime=ol(),le.sibling=null,ae=Ys.current,fe(Ys,Ve?ae&1|2:ae&1),le):(rs(le),null);case 22:case 23:return gn(le),tt(),Ve=le.memoizedState!==null,ae!==null?ae.memoizedState!==null!==Ve&&(le.flags|=8192):Ve&&(le.flags|=8192),Ve?(Ne&536870912)!==0&&(le.flags&128)===0&&(rs(le),le.subtreeFlags&6&&(le.flags|=8192)):rs(le),Ne=le.updateQueue,Ne!==null&&mc(le,Ne.retryQueue),Ne=null,ae!==null&&ae.memoizedState!==null&&ae.memoizedState.cachePool!==null&&(Ne=ae.memoizedState.cachePool.pool),Ve=null,le.memoizedState!==null&&le.memoizedState.cachePool!==null&&(Ve=le.memoizedState.cachePool.pool),Ve!==Ne&&(le.flags|=2048),ae!==null&&re(zl),null;case 24:return Ne=null,ae!==null&&(Ne=ae.memoizedState.cache),le.memoizedState.cache!==Ne&&(le.flags|=2048),zs(os),rs(le),null;case 25:return null}throw Error(C(156,le.tag))}function gl(ae,le){switch(Wt(le),le.tag){case 1:return ae=le.flags,ae&65536?(le.flags=ae&-65537|128,le):null;case 3:return zs(os),Lt(),ae=le.flags,(ae&65536)!==0&&(ae&128)===0?(le.flags=ae&-65537|128,le):null;case 26:case 27:case 5:return cr(le),null;case 13:if(gn(le),ae=le.memoizedState,ae!==null&&ae.dehydrated!==null){if(le.alternate===null)throw Error(C(340));Dn()}return ae=le.flags,ae&65536?(le.flags=ae&-65537|128,le):null;case 19:return re(Ys),null;case 4:return Lt(),null;case 10:return zs(le.type),null;case 22:case 23:return gn(le),tt(),ae!==null&&re(zl),ae=le.flags,ae&65536?(le.flags=ae&-65537|128,le):null;case 24:return zs(os),null;case 25:return null;default:return null}}function Vd(ae,le){switch(Wt(le),le.tag){case 3:zs(os),Lt();break;case 26:case 27:case 5:cr(le);break;case 4:Lt();break;case 13:gn(le);break;case 19:re(Ys);break;case 10:zs(le.type);break;case 22:case 23:gn(le),tt(),ae!==null&&re(zl);break;case 24:zs(os)}}function Gc(ae,le){try{var Ne=le.updateQueue,Ve=Ne!==null?Ne.lastEffect:null;if(Ve!==null){var Je=Ve.next;Ne=Je;do{if((Ne.tag&ae)===ae){Ve=void 0;var kt=Ne.create,Wn=Ne.inst;Ve=kt(),Wn.destroy=Ve}Ne=Ne.next}while(Ne!==Je)}}catch(Rr){Va(le,le.return,Rr)}}function Il(ae,le,Ne){try{var Ve=le.updateQueue,Je=Ve!==null?Ve.lastEffect:null;if(Je!==null){var kt=Je.next;Ve=kt;do{if((Ve.tag&ae)===ae){var Wn=Ve.inst,Rr=Wn.destroy;if(Rr!==void 0){Wn.destroy=void 0,Je=le;var Jr=Ne;try{Rr()}catch(hi){Va(Je,Jr,hi)}}}Ve=Ve.next}while(Ve!==kt)}}catch(hi){Va(le,le.return,hi)}}function ud(ae){var le=ae.updateQueue;if(le!==null){var Ne=ae.stateNode;try{Br(le,Ne)}catch(Ve){Va(ae,ae.return,Ve)}}}function lo(ae,le,Ne){Ne.props=so(ae.type,ae.memoizedProps),Ne.state=ae.memoizedState;try{Ne.componentWillUnmount()}catch(Ve){Va(ae,le,Ve)}}function Vo(ae,le){try{var Ne=ae.ref;if(Ne!==null){var Ve=ae.stateNode;switch(ae.tag){case 26:case 27:case 5:var Je=Uu(Ve);break;default:Je=Ve}typeof Ne=="function"?ae.refCleanup=Ne(Je):Ne.current=Je}}catch(kt){Va(ae,le,kt)}}function mo(ae,le){var Ne=ae.ref,Ve=ae.refCleanup;if(Ne!==null)if(typeof Ve=="function")try{Ve()}catch(Je){Va(ae,le,Je)}finally{ae.refCleanup=null,ae=ae.alternate,ae!=null&&(ae.refCleanup=null)}else if(typeof Ne=="function")try{Ne(null)}catch(Je){Va(ae,le,Je)}else Ne.current=null}function dd(ae){var le=ae.type,Ne=ae.memoizedProps,Ve=ae.stateNode;try{Ap(Ve,le,Ne,ae)}catch(Je){Va(ae,ae.return,Je)}}function hd(ae,le,Ne){try{Th(ae.stateNode,ae.type,Ne,le,ae)}catch(Ve){Va(ae,ae.return,Ve)}}function wu(ae){return ae.tag===5||ae.tag===3||(zo?ae.tag===26:!1)||(Ya?ae.tag===27:!1)||ae.tag===4}function zc(ae){e:for(;;){for(;ae.sibling===null;){if(ae.return===null||wu(ae.return))return null;ae=ae.return}for(ae.sibling.return=ae.return,ae=ae.sibling;ae.tag!==5&&ae.tag!==6&&(!Ya||ae.tag!==27)&&ae.tag!==18;){if(ae.flags&2||ae.child===null||ae.tag===4)continue e;ae.child.return=ae,ae=ae.child}if(!(ae.flags&2))return ae.stateNode}}function Hc(ae,le,Ne){var Ve=ae.tag;if(Ve===5||Ve===6)ae=ae.stateNode,le?Mh(Ne,ae,le):Ff(Ne,ae);else if(!(Ve===4||Ya&&Ve===27)&&(ae=ae.child,ae!==null))for(Hc(ae,le,Ne),ae=ae.sibling;ae!==null;)Hc(ae,le,Ne),ae=ae.sibling}function vl(ae,le,Ne){var Ve=ae.tag;if(Ve===5||Ve===6)ae=ae.stateNode,le?Rh(Ne,ae,le):Ch(Ne,ae);else if(!(Ve===4||Ya&&Ve===27)&&(ae=ae.child,ae!==null))for(vl(ae,le,Ne),ae=ae.sibling;ae!==null;)vl(ae,le,Ne),ae=ae.sibling}function Tu(ae,le,Ne){ae=ae.containerInfo;try{Hu(ae,Ne)}catch(Ve){Va(le,le.return,Ve)}}function gc(ae,le){for(Yd(ae.containerInfo),ma=le;ma!==null;)if(ae=ma,le=ae.child,(ae.subtreeFlags&1028)!==0&&le!==null)le.return=ae,ma=le;else for(;ma!==null;){ae=ma;var Ne=ae.alternate;switch(le=ae.flags,ae.tag){case 0:break;case 11:case 15:break;case 1:if((le&1024)!==0&&Ne!==null){le=void 0;var Ve=ae,Je=Ne.memoizedProps;Ne=Ne.memoizedState;var kt=Ve.stateNode;try{var Wn=so(Ve.type,Je,Ve.elementType===Ve.type);le=kt.getSnapshotBeforeUpdate(Wn,Ne),kt.__reactInternalSnapshotBeforeUpdate=le}catch(Rr){Va(Ve,Ve.return,Rr)}}break;case 3:(le&1024)!==0&&Ws&&Bh(ae.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((le&1024)!==0)throw Error(C(163))}if(le=ae.sibling,le!==null){le.return=ae.return,ma=le;break}ma=ae.return}return Wn=Ta,Ta=!1,Wn}function Ql(ae,le,Ne){var Ve=Ne.flags;switch(Ne.tag){case 0:case 11:case 15:tl(ae,Ne),Ve&4&&Gc(5,Ne);break;case 1:if(tl(ae,Ne),Ve&4)if(ae=Ne.stateNode,le===null)try{ae.componentDidMount()}catch(Rr){Va(Ne,Ne.return,Rr)}else{var Je=so(Ne.type,le.memoizedProps);le=le.memoizedState;try{ae.componentDidUpdate(Je,le,ae.__reactInternalSnapshotBeforeUpdate)}catch(Rr){Va(Ne,Ne.return,Rr)}}Ve&64&&ud(Ne),Ve&512&&Vo(Ne,Ne.return);break;case 3:if(tl(ae,Ne),Ve&64&&(Ve=Ne.updateQueue,Ve!==null)){if(ae=null,Ne.child!==null)switch(Ne.child.tag){case 27:case 5:ae=Uu(Ne.child.stateNode);break;case 1:ae=Ne.child.stateNode}try{Br(Ve,ae)}catch(Rr){Va(Ne,Ne.return,Rr)}}break;case 26:if(zo){tl(ae,Ne),Ve&512&&Vo(Ne,Ne.return);break}case 27:case 5:tl(ae,Ne),le===null&&Ve&4&&dd(Ne),Ve&512&&Vo(Ne,Ne.return);break;case 12:tl(ae,Ne);break;case 13:tl(ae,Ne),Ve&4&&qc(ae,Ne);break;case 22:if(Je=Ne.memoizedState!==null||Hl,!Je){le=le!==null&&le.memoizedState!==null||Es;var kt=Hl,Wn=Es;Hl=Je,(Es=le)&&!Wn?_l(ae,Ne,(Ne.subtreeFlags&8772)!==0):tl(ae,Ne),Hl=kt,Es=Wn}Ve&512&&(Ne.memoizedProps.mode==="manual"?Vo(Ne,Ne.return):mo(Ne,Ne.return));break;default:tl(ae,Ne)}}function vc(ae){var le=ae.alternate;le!==null&&(ae.alternate=null,vc(le)),ae.child=null,ae.deletions=null,ae.sibling=null,ae.tag===5&&(le=ae.stateNode,le!==null&&Ep(le)),ae.stateNode=null,ae.return=null,ae.dependencies=null,ae.memoizedProps=null,ae.memoizedState=null,ae.pendingProps=null,ae.stateNode=null,ae.updateQueue=null}function Hs(ae,le,Ne){for(Ne=Ne.child;Ne!==null;)kl(ae,le,Ne),Ne=Ne.sibling}function kl(ae,le,Ne){if(Oo&&typeof Oo.onCommitFiberUnmount=="function")try{Oo.onCommitFiberUnmount(Bs,Ne)}catch{}switch(Ne.tag){case 26:if(zo){Es||mo(Ne,le),Hs(ae,le,Ne),Ne.memoizedState?nu(Ne.memoizedState):Ne.stateNode&&qu(Ne.stateNode);break}case 27:if(Ya){Es||mo(Ne,le);var Ve=ea,Je=Sa;ea=Ne.stateNode,Hs(ae,le,Ne),Rc(Ne.stateNode),ea=Ve,Sa=Je;break}case 5:Es||mo(Ne,le);case 6:if(Ws){if(Ve=ea,Je=Sa,ea=null,Hs(ae,le,Ne),ea=Ve,Sa=Je,ea!==null)if(Sa)try{Ih(ea,Ne.stateNode)}catch(kt){Va(Ne,le,kt)}else try{Uf(ea,Ne.stateNode)}catch(kt){Va(Ne,le,kt)}}else Hs(ae,le,Ne);break;case 18:Ws&&ea!==null&&(Sa?Md(ea,Ne.stateNode):Hh(ea,Ne.stateNode));break;case 4:Ws?(Ve=ea,Je=Sa,ea=Ne.stateNode.containerInfo,Sa=!0,Hs(ae,le,Ne),ea=Ve,Sa=Je):(sl&&Tu(Ne.stateNode,Ne,Rd()),Hs(ae,le,Ne));break;case 0:case 11:case 14:case 15:Es||Il(2,Ne,le),Es||Il(4,Ne,le),Hs(ae,le,Ne);break;case 1:Es||(mo(Ne,le),Ve=Ne.stateNode,typeof Ve.componentWillUnmount=="function"&&lo(Ne,le,Ve)),Hs(ae,le,Ne);break;case 21:Hs(ae,le,Ne);break;case 22:Es||mo(Ne,le),Es=(Ve=Es)||Ne.memoizedState!==null,Hs(ae,le,Ne),Es=Ve;break;default:Hs(ae,le,Ne)}}function qc(ae,le){if(uo&&le.memoizedState===null&&(ae=le.alternate,ae!==null&&(ae=ae.memoizedState,ae!==null&&(ae=ae.dehydrated,ae!==null))))try{Tp(ae)}catch(Ne){Va(le,le.return,Ne)}}function pd(ae){switch(ae.tag){case 13:case 19:var le=ae.stateNode;return le===null&&(le=ae.stateNode=new Ga),le;case 22:return ae=ae.stateNode,le=ae._retryCache,le===null&&(le=ae._retryCache=new Ga),le;default:throw Error(C(435,ae.tag))}}function jo(ae,le){var Ne=pd(ae);le.forEach(function(Ve){var Je=Ec.bind(null,ae,Ve);Ne.has(Ve)||(Ne.add(Ve),Ve.then(Je,Je))})}function co(ae,le){var Ne=le.deletions;if(Ne!==null)for(var Ve=0;Ve<Ne.length;Ve++){var Je=Ne[Ve],kt=ae,Wn=le;if(Ws){var Rr=Wn;e:for(;Rr!==null;){switch(Rr.tag){case 27:case 5:ea=Rr.stateNode,Sa=!1;break e;case 3:ea=Rr.stateNode.containerInfo,Sa=!0;break e;case 4:ea=Rr.stateNode.containerInfo,Sa=!0;break e}Rr=Rr.return}if(ea===null)throw Error(C(160));kl(kt,Wn,Je),ea=null,Sa=!1}else kl(kt,Wn,Je);kt=Je.alternate,kt!==null&&(kt.return=null),Je.return=null}if(le.subtreeFlags&13878)for(le=le.child;le!==null;)md(le,ae),le=le.sibling}function md(ae,le){var Ne=ae.alternate,Ve=ae.flags;switch(ae.tag){case 0:case 11:case 14:case 15:co(le,ae),go(ae),Ve&4&&(Il(3,ae,ae.return),Gc(3,ae),Il(5,ae,ae.return));break;case 1:co(le,ae),go(ae),Ve&512&&(Es||Ne===null||mo(Ne,Ne.return)),Ve&64&&Hl&&(ae=ae.updateQueue,ae!==null&&(Ve=ae.callbacks,Ve!==null&&(Ne=ae.shared.hiddenCallbacks,ae.shared.hiddenCallbacks=Ne===null?Ve:Ne.concat(Ve))));break;case 26:if(zo){var Je=_s;co(le,ae),go(ae),Ve&512&&(Es||Ne===null||mo(Ne,Ne.return)),Ve&4&&(Ve=Ne!==null?Ne.memoizedState:null,le=ae.memoizedState,Ne===null?le===null?ae.stateNode===null?ae.stateNode=kd(Je,ae.type,ae.memoizedProps,ae):Nd(Je,ae.type,ae.stateNode):ae.stateNode=$h(Je,le,ae.memoizedProps):Ve!==le?(Ve===null?Ne.stateNode!==null&&qu(Ne.stateNode):nu(Ve),le===null?Nd(Je,ae.type,ae.stateNode):$h(Je,le,ae.memoizedProps)):le===null&&ae.stateNode!==null&&hd(ae,ae.memoizedProps,Ne.memoizedProps));break}case 27:if(Ya&&Ve&4&&ae.alternate===null){Je=ae.stateNode;var kt=ae.memoizedProps;try{Tc(Je),Xh(ae.type,kt,Je,ae)}catch(Bi){Va(ae,ae.return,Bi)}}case 5:if(co(le,ae),go(ae),Ve&512&&(Es||Ne===null||mo(Ne,Ne.return)),Ws){if(ae.flags&32){le=ae.stateNode;try{Vf(le)}catch(Bi){Va(ae,ae.return,Bi)}}Ve&4&&ae.stateNode!=null&&(le=ae.memoizedProps,hd(ae,le,Ne!==null?Ne.memoizedProps:le)),Ve&1024&&(Zf=!0)}break;case 6:if(co(le,ae),go(ae),Ve&4&&Ws){if(ae.stateNode===null)throw Error(C(162));Ve=ae.memoizedProps,Ne=Ne!==null?Ne.memoizedProps:Ve,le=ae.stateNode;try{wh(le,Ne,Ve)}catch(Bi){Va(ae,ae.return,Bi)}}break;case 3:if(zo?(Wh(),Je=_s,_s=sf(le.containerInfo),co(le,ae),_s=Je):co(le,ae),go(ae),Ve&4){if(Ws&&uo&&Ne!==null&&Ne.memoizedState.isDehydrated)try{wp(le.containerInfo)}catch(Bi){Va(ae,ae.return,Bi)}if(sl){Ve=le.containerInfo,Ne=le.pendingChildren;try{Hu(Ve,Ne)}catch(Bi){Va(ae,ae.return,Bi)}}}Zf&&(Zf=!1,Gd(ae));break;case 4:zo?(Ne=_s,_s=sf(ae.stateNode.containerInfo),co(le,ae),go(ae),_s=Ne):(co(le,ae),go(ae)),Ve&4&&sl&&Tu(ae.stateNode,ae,ae.stateNode.pendingChildren);break;case 12:co(le,ae),go(ae);break;case 13:co(le,ae),go(ae),ae.child.flags&8192&&ae.memoizedState!==null!=(Ne!==null&&Ne.memoizedState!==null)&&(Mo=ol()),Ve&4&&(Ve=ae.updateQueue,Ve!==null&&(ae.updateQueue=null,jo(ae,Ve)));break;case 22:Ve&512&&(Es||Ne===null||mo(Ne,Ne.return)),Je=ae.memoizedState!==null;var Wn=Ne!==null&&Ne.memoizedState!==null,Rr=Hl,Jr=Es;if(Hl=Rr||Je,Es=Jr||Wn,co(le,ae),Es=Jr,Hl=Rr,go(ae),le=ae.stateNode,le._current=ae,le._visibility&=-3,le._visibility|=le._pendingVisibility&2,Ve&8192&&(le._visibility=Je?le._visibility&-2:le._visibility|1,Je&&(le=Hl||Es,Ne===null||Wn||le||Jl(ae)),Ws&&(ae.memoizedProps===null||ae.memoizedProps.mode!=="manual"))){e:if(Ne=null,Ws)for(le=ae;;){if(le.tag===5||zo&&le.tag===26||Ya&&le.tag===27){if(Ne===null){Wn=Ne=le;try{kt=Wn.stateNode,Je?kh(kt):Ph(Wn.stateNode,Wn.memoizedProps)}catch(Bi){Va(Wn,Wn.return,Bi)}}}else if(le.tag===6){if(Ne===null){Wn=le;try{var hi=Wn.stateNode;Je?Nh(hi):Sp(hi,Wn.memoizedProps)}catch(Bi){Va(Wn,Wn.return,Bi)}}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===ae)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===ae)break e;for(;le.sibling===null;){if(le.return===null||le.return===ae)break e;Ne===le&&(Ne=null),le=le.return}Ne===le&&(Ne=null),le.sibling.return=le.return,le=le.sibling}}Ve&4&&(Ve=ae.updateQueue,Ve!==null&&(Ne=Ve.retryQueue,Ne!==null&&(Ve.retryQueue=null,jo(ae,Ne))));break;case 19:co(le,ae),go(ae),Ve&4&&(Ve=ae.updateQueue,Ve!==null&&(ae.updateQueue=null,jo(ae,Ve)));break;case 21:break;default:co(le,ae),go(ae)}}function go(ae){var le=ae.flags;if(le&2){try{if(Ws&&(!Ya||ae.tag!==27)){e:{for(var Ne=ae.return;Ne!==null;){if(wu(Ne)){var Ve=Ne;break e}Ne=Ne.return}throw Error(C(160))}switch(Ve.tag){case 27:if(Ya){var Je=Ve.stateNode,kt=zc(ae);vl(ae,kt,Je);break}case 5:var Wn=Ve.stateNode;Ve.flags&32&&(Vf(Wn),Ve.flags&=-33);var Rr=zc(ae);vl(ae,Rr,Wn);break;case 3:case 4:var Jr=Ve.stateNode.containerInfo,hi=zc(ae);Hc(ae,hi,Jr);break;default:throw Error(C(161))}}}catch(Bi){Va(ae,ae.return,Bi)}ae.flags&=-3}le&4096&&(ae.flags&=-4097)}function Gd(ae){if(ae.subtreeFlags&1024)for(ae=ae.child;ae!==null;){var le=ae;Gd(le),le.tag===5&&le.flags&1024&&Jd(le.stateNode),ae=ae.sibling}}function tl(ae,le){if(le.subtreeFlags&8772)for(le=le.child;le!==null;)Ql(ae,le.alternate,le),le=le.sibling}function Jl(ae){for(ae=ae.child;ae!==null;){var le=ae;switch(le.tag){case 0:case 11:case 14:case 15:Il(4,le,le.return),Jl(le);break;case 1:mo(le,le.return);var Ne=le.stateNode;typeof Ne.componentWillUnmount=="function"&&lo(le,le.return,Ne),Jl(le);break;case 26:case 27:case 5:mo(le,le.return),Jl(le);break;case 22:mo(le,le.return),le.memoizedState===null&&Jl(le);break;default:Jl(le)}ae=ae.sibling}}function _l(ae,le,Ne){for(Ne=Ne&&(le.subtreeFlags&8772)!==0,le=le.child;le!==null;){var Ve=le.alternate,Je=ae,kt=le,Wn=kt.flags;switch(kt.tag){case 0:case 11:case 15:_l(Je,kt,Ne),Gc(4,kt);break;case 1:if(_l(Je,kt,Ne),Ve=kt,Je=Ve.stateNode,typeof Je.componentDidMount=="function")try{Je.componentDidMount()}catch(hi){Va(Ve,Ve.return,hi)}if(Ve=kt,Je=Ve.updateQueue,Je!==null){var Rr=Ve.stateNode;try{var Jr=Je.shared.hiddenCallbacks;if(Jr!==null)for(Je.shared.hiddenCallbacks=null,Je=0;Je<Jr.length;Je++)wr(Jr[Je],Rr)}catch(hi){Va(Ve,Ve.return,hi)}}Ne&&Wn&64&&ud(kt),Vo(kt,kt.return);break;case 26:case 27:case 5:_l(Je,kt,Ne),Ne&&Ve===null&&Wn&4&&dd(kt),Vo(kt,kt.return);break;case 12:_l(Je,kt,Ne);break;case 13:_l(Je,kt,Ne),Ne&&Wn&4&&qc(Je,kt);break;case 22:kt.memoizedState===null&&_l(Je,kt,Ne),Vo(kt,kt.return);break;default:_l(Je,kt,Ne)}le=le.sibling}}function Ru(ae,le){var Ne=null;ae!==null&&ae.memoizedState!==null&&ae.memoizedState.cachePool!==null&&(Ne=ae.memoizedState.cachePool.pool),ae=null,le.memoizedState!==null&&le.memoizedState.cachePool!==null&&(ae=le.memoizedState.cachePool.pool),ae!==Ne&&(ae!=null&&ae.refCount++,Ne!=null&&da(Ne))}function $c(ae,le){ae=null,le.alternate!==null&&(ae=le.alternate.memoizedState.cache),le=le.memoizedState.cache,le!==ae&&(le.refCount++,ae!=null&&da(ae))}function ks(ae,le,Ne,Ve){if(le.subtreeFlags&10256)for(le=le.child;le!==null;)Mu(ae,le,Ne,Ve),le=le.sibling}function Mu(ae,le,Ne,Ve){var Je=le.flags;switch(le.tag){case 0:case 11:case 15:ks(ae,le,Ne,Ve),Je&2048&&Gc(9,le);break;case 3:ks(ae,le,Ne,Ve),Je&2048&&(ae=null,le.alternate!==null&&(ae=le.alternate.memoizedState.cache),le=le.memoizedState.cache,le!==ae&&(le.refCount++,ae!=null&&da(ae)));break;case 12:if(Je&2048){ks(ae,le,Ne,Ve),ae=le.stateNode;try{var kt=le.memoizedProps,Wn=kt.id,Rr=kt.onPostCommit;typeof Rr=="function"&&Rr(Wn,le.alternate===null?"mount":"update",ae.passiveEffectDuration,-0)}catch(Jr){Va(le,le.return,Jr)}}else ks(ae,le,Ne,Ve);break;case 23:break;case 22:kt=le.stateNode,le.memoizedState!==null?kt._visibility&4?ks(ae,le,Ne,Ve):Zs(ae,le):kt._visibility&4?ks(ae,le,Ne,Ve):(kt._visibility|=4,qs(ae,le,Ne,Ve,(le.subtreeFlags&10256)!==0)),Je&2048&&Ru(le.alternate,le);break;case 24:ks(ae,le,Ne,Ve),Je&2048&&$c(le.alternate,le);break;default:ks(ae,le,Ne,Ve)}}function qs(ae,le,Ne,Ve,Je){for(Je=Je&&(le.subtreeFlags&10256)!==0,le=le.child;le!==null;){var kt=ae,Wn=le,Rr=Ne,Jr=Ve,hi=Wn.flags;switch(Wn.tag){case 0:case 11:case 15:qs(kt,Wn,Rr,Jr,Je),Gc(8,Wn);break;case 23:break;case 22:var Bi=Wn.stateNode;Wn.memoizedState!==null?Bi._visibility&4?qs(kt,Wn,Rr,Jr,Je):Zs(kt,Wn):(Bi._visibility|=4,qs(kt,Wn,Rr,Jr,Je)),Je&&hi&2048&&Ru(Wn.alternate,Wn);break;case 24:qs(kt,Wn,Rr,Jr,Je),Je&&hi&2048&&$c(Wn.alternate,Wn);break;default:qs(kt,Wn,Rr,Jr,Je)}le=le.sibling}}function Zs(ae,le){if(le.subtreeFlags&10256)for(le=le.child;le!==null;){var Ne=ae,Ve=le,Je=Ve.flags;switch(Ve.tag){case 22:Zs(Ne,Ve),Je&2048&&Ru(Ve.alternate,Ve);break;case 24:Zs(Ne,Ve),Je&2048&&$c(Ve.alternate,Ve);break;default:Zs(Ne,Ve)}le=le.sibling}}function Lo(ae){if(ae.subtreeFlags&Xo)for(ae=ae.child;ae!==null;)Iu(ae),ae=ae.sibling}function Iu(ae){switch(ae.tag){case 26:Lo(ae),ae.flags&Xo&&(ae.memoizedState!==null?Yh(_s,ae.memoizedState,ae.memoizedProps):wo(ae.type,ae.memoizedProps));break;case 5:Lo(ae),ae.flags&Xo&&wo(ae.type,ae.memoizedProps);break;case 3:case 4:if(zo){var le=_s;_s=sf(ae.stateNode.containerInfo),Lo(ae),_s=le}else Lo(ae);break;case 22:ae.memoizedState===null&&(le=ae.alternate,le!==null&&le.memoizedState!==null?(le=Xo,Xo=16777216,Lo(ae),Xo=le):Lo(ae));break;default:Lo(ae)}}function Wc(ae){var le=ae.alternate;if(le!==null&&(ae=le.child,ae!==null)){le.child=null;do le=ae.sibling,ae.sibling=null,ae=le;while(ae!==null)}}function Nl(ae){var le=ae.deletions;if((ae.flags&16)!==0){if(le!==null)for(var Ne=0;Ne<le.length;Ne++){var Ve=le[Ne];ma=Ve,Yc(Ve,ae)}Wc(ae)}if(ae.subtreeFlags&10256)for(ae=ae.child;ae!==null;)Kc(ae),ae=ae.sibling}function Kc(ae){switch(ae.tag){case 0:case 11:case 15:Nl(ae),ae.flags&2048&&Il(9,ae,ae.return);break;case 3:Nl(ae);break;case 12:Nl(ae);break;case 22:var le=ae.stateNode;ae.memoizedState!==null&&le._visibility&4&&(ae.return===null||ae.return.tag!==13)?(le._visibility&=-5,nl(ae)):Nl(ae);break;default:Nl(ae)}}function nl(ae){var le=ae.deletions;if((ae.flags&16)!==0){if(le!==null)for(var Ne=0;Ne<le.length;Ne++){var Ve=le[Ne];ma=Ve,Yc(Ve,ae)}Wc(ae)}for(ae=ae.child;ae!==null;){switch(le=ae,le.tag){case 0:case 11:case 15:Il(8,le,le.return),nl(le);break;case 22:Ne=le.stateNode,Ne._visibility&4&&(Ne._visibility&=-5,nl(le));break;default:nl(le)}ae=ae.sibling}}function Yc(ae,le){for(;ma!==null;){var Ne=ma;switch(Ne.tag){case 0:case 11:case 15:Il(8,Ne,le);break;case 23:case 22:if(Ne.memoizedState!==null&&Ne.memoizedState.cachePool!==null){var Ve=Ne.memoizedState.cachePool.pool;Ve!=null&&Ve.refCount++}break;case 24:da(Ne.memoizedState.cache)}if(Ve=Ne.child,Ve!==null)Ve.return=Ne,ma=Ve;else e:for(Ne=ae;ma!==null;){Ve=ma;var Je=Ve.sibling,kt=Ve.return;if(vc(Ve),Ve===Ne){ma=null;break e}if(Je!==null){Je.return=kt,ma=Je;break e}ma=kt}}}function xc(ae){var le=vh(ae);if(le!=null){if(typeof le.memoizedProps["data-testname"]!="string")throw Error(C(364));return le}if(ae=Lf(ae),ae===null)throw Error(C(362));return ae.stateNode.current}function Pl(ae,le){var Ne=ae.tag;switch(le.$$typeof){case ed:if(ae.type===le.value)return!0;break;case dl:e:{for(le=le.value,ae=[ae,0],Ne=0;Ne<ae.length;){var Ve=ae[Ne++],Je=Ve.tag,kt=ae[Ne++],Wn=le[kt];if(Je!==5&&Je!==26&&Je!==27||!Gu(Ve)){for(;Wn!=null&&Pl(Ve,Wn);)kt++,Wn=le[kt];if(kt===le.length){le=!0;break e}else for(Ve=Ve.child;Ve!==null;)ae.push(Ve,kt),Ve=Ve.sibling}}le=!1}return le;case fs:if((Ne===5||Ne===26||Ne===27)&&Eh(ae.stateNode,le.value))return!0;break;case ql:if((Ne===5||Ne===6||Ne===26||Ne===27)&&(ae=bh(ae),ae!==null&&0<=ae.indexOf(le.value)))return!0;break;case Rl:if((Ne===5||Ne===26||Ne===27)&&(ae=ae.memoizedProps["data-testname"],typeof ae=="string"&&ae.toLowerCase()===le.value.toLowerCase()))return!0;break;default:throw Error(C(365))}return!1}function ku(ae){switch(ae.$$typeof){case ed:return"<"+(T(ae.value)||"Unknown")+">";case dl:return":has("+(ku(ae)||"")+")";case fs:return'[role="'+ae.value+'"]';case ql:return'"'+ae.value+'"';case Rl:return'[data-testname="'+ae.value+'"]';default:throw Error(C(365))}}function $s(ae,le){var Ne=[];ae=[ae,0];for(var Ve=0;Ve<ae.length;){var Je=ae[Ve++],kt=Je.tag,Wn=ae[Ve++],Rr=le[Wn];if(kt!==5&&kt!==26&&kt!==27||!Gu(Je)){for(;Rr!=null&&Pl(Je,Rr);)Wn++,Rr=le[Wn];if(Wn===le.length)Ne.push(Je);else for(Je=Je.child;Je!==null;)ae.push(Je,Wn),Je=Je.sibling}}return Ne}function Xc(ae,le){if(!wc)throw Error(C(363));ae=xc(ae),ae=$s(ae,le),le=[],ae=Array.from(ae);for(var Ne=0;Ne<ae.length;){var Ve=ae[Ne++],Je=Ve.tag;if(Je===5||Je===26||Je===27)Gu(Ve)||le.push(Ve.stateNode);else for(Ve=Ve.child;Ve!==null;)ae.push(Ve),Ve=Ve.sibling}return le}function gs(){if((La&2)!==0&&Ma!==0)return Ma&-Ma;if(ca.T!==null){var ae=$o;return ae!==0?ae:nr()}return xh()}function gd(){Zo===0&&(Zo=(Ma&536870912)===0||Pa?Me():536870912);var ae=Wo.current;return ae!==null&&(ae.flags|=32),Zo}function Os(ae,le,Ne){(ae===za&&Ka===2||ae.cancelPendingCommit!==null)&&(xn(ae,0),Yn(ae,Ma,Zo,!1)),De(ae,Ne),((La&2)===0||ae!==za)&&(ae===za&&((La&2)===0&&(dc|=Ne),Ja===4&&Yn(ae,Ma,Zo,!1)),Kn(ae))}function Bl(ae,le,Ne){if((La&6)!==0)throw Error(C(327));var Ve=!Ne&&(le&60)===0&&(le&ae.expiredLanes)===0||be(ae,le),Je=Ve?pa(ae,le):Li(ae,le,!0),kt=Ve;do{if(Je===0){Qo&&!Ve&&Yn(ae,le,0,!1);break}else if(Je===6)Yn(ae,le,0,!pl);else{if(Ne=ae.current.alternate,kt&&!En(Ne)){Je=Li(ae,le,!1),kt=!1;continue}if(Je===2){if(kt=le,ae.errorRecoveryDisabledLanes&kt)var Wn=0;else Wn=ae.pendingLanes&-536870913,Wn=Wn!==0?Wn:Wn&536870912?536870912:0;if(Wn!==0){le=Wn;e:{var Rr=ae;Je=_u;var Jr=uo&&Rr.current.memoizedState.isDehydrated;if(Jr&&(xn(Rr,Wn).flags|=256),Wn=Li(Rr,Wn,!1),Wn!==2){if(Xs&&!Jr){Rr.errorRecoveryDisabledLanes|=kt,dc|=kt,Je=4;break e}kt=As,As=Je,kt!==null&&Qc(kt)}Je=Wn}if(kt=!1,Je!==2)continue}}if(Je===1){xn(ae,0),Yn(ae,le,0,!0);break}e:{switch(Ve=ae,Je){case 0:case 1:throw Error(C(345));case 4:if((le&4194176)===le){Yn(Ve,le,Zo,!pl);break e}break;case 2:As=null;break;case 3:case 5:break;default:throw Error(C(329))}if(Ve.finishedWork=Ne,Ve.finishedLanes=le,(le&62914560)===le&&(kt=Mo+300-ol(),10<kt)){if(Yn(Ve,le,Zo,!pl),ye(Ve,0)!==0)break e;Ve.timeoutHandle=Us(Nu.bind(null,Ve,Ne,As,Fd,vf,le,Zo,dc,$l,pl,2,-0,0),kt);break e}Nu(Ve,Ne,As,Fd,vf,le,Zo,dc,$l,pl,0,-0,0)}}break}while(!0);Kn(ae)}function Qc(ae){As===null?As=ae:As.push.apply(As,ae)}function Nu(ae,le,Ne,Ve,Je,kt,Wn,Rr,Jr,hi,Bi,Vi,zi){var ga=le.subtreeFlags;if((ga&8192||(ga&16785408)===16785408)&&(Df(),Iu(le),le=Vs(),le!==null)){ae.cancelPendingCommit=le(So.bind(null,ae,Ne,Ve,Je,Wn,Rr,Jr,1,Vi,zi)),Yn(ae,kt,Wn,!hi);return}So(ae,Ne,Ve,Je,Wn,Rr,Jr,Bi,Vi,zi)}function En(ae){for(var le=ae;;){var Ne=le.tag;if((Ne===0||Ne===11||Ne===15)&&le.flags&16384&&(Ne=le.updateQueue,Ne!==null&&(Ne=Ne.stores,Ne!==null)))for(var Ve=0;Ve<Ne.length;Ve++){var Je=Ne[Ve],kt=Je.getSnapshot;Je=Je.value;try{if(!Fo(kt(),Je))return!1}catch{return!1}}if(Ne=le.child,le.subtreeFlags&16384&&Ne!==null)Ne.return=le,le=Ne;else{if(le===ae)break;for(;le.sibling===null;){if(le.return===null||le.return===ae)return!0;le=le.return}le.sibling.return=le.return,le=le.sibling}}return!0}function Yn(ae,le,Ne,Ve){le&=~Od,le&=~dc,ae.suspendedLanes|=le,ae.pingedLanes&=~le,Ve&&(ae.warmLanes|=le),Ve=ae.expirationTimes;for(var Je=le;0<Je;){var kt=31-To(Je),Wn=1<<kt;Ve[kt]=-1,Je&=~Wn}Ne!==0&&Oe(ae,Ne,le)}function Ze(){return(La&6)===0?(Qn(0),!1):!0}function jt(){if(ra!==null){if(Ka===0)var ae=ra.return;else ae=ra,Yo=Tl=null,rt(ae),Nc=null,Pc=0,ae=ra;for(;ae!==null;)Vd(ae.alternate,ae),ae=ae.return;ra=null}}function xn(ae,le){ae.finishedWork=null,ae.finishedLanes=0;var Ne=ae.timeoutHandle;Ne!==Sc&&(ae.timeoutHandle=Sc,Xd(Ne)),Ne=ae.cancelPendingCommit,Ne!==null&&(ae.cancelPendingCommit=null,Ne()),jt(),za=ae,ra=Ne=rl(ae.current,null),Ma=le,Ka=0,xo=null,pl=!1,Qo=be(ae,le),Xs=!1,$l=Zo=Od=dc=Jo=Ja=0,As=_u=null,vf=!1,(le&8)!==0&&(le|=le&32);var Ve=ae.entangledLanes;if(Ve!==0)for(ae=ae.entanglements,Ve&=le;0<Ve;){var Je=31-To(Ve),kt=1<<Je;le|=ae[Je],Ve&=~kt}return yo=le,Jn(),Ne}function gr(ae,le){Ca=null,ca.H=bs,le===Xu?(le=er(),Ka=3):le===jd?(le=er(),Ka=4):Ka=le===mf?8:le!==null&&typeof le=="object"&&typeof le.then=="function"?6:1,xo=le,ra===null&&(Ja=1,Bo(ae,$e(le,ae.current)))}function Ir(){var ae=Wo.current;return ae===null?!0:(Ma&4194176)===Ma?Xa===null:(Ma&62914560)===Ma||(Ma&536870912)!==0?ae===Xa:!1}function Dr(){var ae=ca.H;return ca.H=bs,ae===null?bs:ae}function $r(){var ae=ca.A;return ca.A=Zu,ae}function li(){Ja=4,pl||(Ma&4194176)!==Ma&&Wo.current!==null||(Qo=!0),(Jo&134217727)===0&&(dc&134217727)===0||za===null||Yn(za,Ma,Zo,!1)}function Li(ae,le,Ne){var Ve=La;La|=2;var Je=Dr(),kt=$r();(za!==ae||Ma!==le)&&(Fd=null,xn(ae,le)),le=!1;var Wn=Ja;e:do try{if(Ka!==0&&ra!==null){var Rr=ra,Jr=xo;switch(Ka){case 8:jt(),Wn=6;break e;case 3:case 2:case 6:Wo.current===null&&(le=!0);var hi=Ka;if(Ka=0,xo=null,vs(ae,Rr,Jr,hi),Ne&&Qo){Wn=0;break e}break;default:hi=Ka,Ka=0,xo=null,vs(ae,Rr,Jr,hi)}}aa(),Wn=Ja;break}catch(Bi){gr(ae,Bi)}while(!0);return le&&ae.shellSuspendCounter++,Yo=Tl=null,La=Ve,ca.H=Je,ca.A=kt,ra===null&&(za=null,Ma=0,Jn()),Wn}function aa(){for(;ra!==null;)Ji(ra)}function pa(ae,le){var Ne=La;La|=2;var Ve=Dr(),Je=$r();za!==ae||Ma!==le?(Fd=null,nd=ol()+500,xn(ae,le)):Qo=be(ae,le);e:do try{if(Ka!==0&&ra!==null){le=ra;var kt=xo;t:switch(Ka){case 1:Ka=0,xo=null,vs(ae,le,kt,1);break;case 2:if(vi(kt)){Ka=0,xo=null,sa(le);break}le=function(){Ka===2&&za===ae&&(Ka=7),Kn(ae)},kt.then(le,le);break e;case 3:Ka=7;break e;case 4:Ka=5;break e;case 7:vi(kt)?(Ka=0,xo=null,sa(le)):(Ka=0,xo=null,vs(ae,le,kt,7));break;case 5:var Wn=null;switch(ra.tag){case 26:Wn=ra.memoizedState;case 5:case 27:var Rr=ra,Jr=Rr.type,hi=Rr.pendingProps;if(Wn?iu(Wn):Qd(Jr,hi)){Ka=0,xo=null;var Bi=Rr.sibling;if(Bi!==null)ra=Bi;else{var Vi=Rr.return;Vi!==null?(ra=Vi,vo(Vi)):ra=null}break t}}Ka=0,xo=null,vs(ae,le,kt,5);break;case 6:Ka=0,xo=null,vs(ae,le,kt,6);break;case 8:jt(),Ja=6;break e;default:throw Error(C(462))}}la();break}catch(zi){gr(ae,zi)}while(!0);return Yo=Tl=null,ca.H=Ve,ca.A=Je,La=Ne,ra!==null?0:(za=null,Ma=0,Jn(),Ja)}function la(){for(;ra!==null&&!Zh();)Ji(ra)}function Ji(ae){var le=es(ae.alternate,ae,yo);ae.memoizedProps=ae.pendingProps,le===null?vo(ae):ra=le}function sa(ae){var le=ae,Ne=le.alternate;switch(le.tag){case 15:case 0:le=Yi(Ne,le,le.pendingProps,le.type,void 0,Ma);break;case 11:le=Yi(Ne,le,le.pendingProps,le.type.render,le.ref,Ma);break;case 5:rt(le);default:Vd(Ne,le),le=ra=xd(le,yo),le=es(Ne,le,yo)}ae.memoizedProps=ae.pendingProps,le===null?vo(ae):ra=le}function vs(ae,le,Ne,Ve){Yo=Tl=null,rt(le),Nc=null,Pc=0;var Je=le.return;try{if(On(ae,Je,le,Ne,Ma)){Ja=1,Bo(ae,$e(Ne,ae.current)),ra=null;return}}catch(kt){if(Je!==null)throw ra=Je,kt;Ja=1,Bo(ae,$e(Ne,ae.current)),ra=null;return}le.flags&32768?(Pa||Ve===1?ae=!0:Qo||(Ma&536870912)!==0?ae=!1:(pl=ae=!0,(Ve===2||Ve===3||Ve===6)&&(Ve=Wo.current,Ve!==null&&Ve.tag===13&&(Ve.flags|=16384))),Jc(le,ae)):vo(le)}function vo(ae){var le=ae;do{if((le.flags&32768)!==0){Jc(le,pl);return}ae=le.return;var Ne=Cu(le.alternate,le,yo);if(Ne!==null){ra=Ne;return}if(le=le.sibling,le!==null){ra=le;return}ra=le=ae}while(le!==null);Ja===0&&(Ja=5)}function Jc(ae,le){do{var Ne=gl(ae.alternate,ae);if(Ne!==null){Ne.flags&=32767,ra=Ne;return}if(Ne=ae.return,Ne!==null&&(Ne.flags|=32768,Ne.subtreeFlags=0,Ne.deletions=null),!le&&(ae=ae.sibling,ae!==null)){ra=ae;return}ra=ae=Ne}while(ae!==null);Ja=6,ra=null}function So(ae,le,Ne,Ve,Je,kt,Wn,Rr,Jr,hi){var Bi=ca.T,Vi=ic();try{_o(2),ca.T=null,Zc(ae,le,Ne,Ve,Vi,Je,kt,Wn,Rr,Jr,hi)}finally{ca.T=Bi,_o(Vi)}}function Zc(ae,le,Ne,Ve,Je,kt,Wn,Rr){do xl();while(Wl!==null);if((La&6)!==0)throw Error(C(327));var Jr=ae.finishedWork;if(Ve=ae.finishedLanes,Jr===null)return null;if(ae.finishedWork=null,ae.finishedLanes=0,Jr===ae.current)throw Error(C(177));ae.callbackNode=null,ae.callbackPriority=0,ae.cancelPendingCommit=null;var hi=Jr.lanes|Jr.childLanes;if(hi|=Cl,Fe(ae,Ve,hi,kt,Wn,Rr),ae===za&&(ra=za=null,Ma=0),(Jr.subtreeFlags&10256)===0&&(Jr.flags&10256)===0||Ml||(Ml=!0,Oc=hi,xf=Ne,ec(df,function(){return xl(),null})),Ne=(Jr.flags&15990)!==0,(Jr.subtreeFlags&15990)!==0||Ne?(Ne=ca.T,ca.T=null,kt=ic(),_o(2),Wn=La,La|=4,gc(ae,Jr),md(Jr,ae),gh(ae.containerInfo),ae.current=Jr,Ql(ae,Jr.alternate,Jr),cf(),La=Wn,_o(kt),ca.T=Ne):ae.current=Jr,Ml?(Ml=!1,Wl=ae,xu=Ve):yc(ae,hi),hi=ae.pendingLanes,hi===0&&(Lc=null),je(Jr.stateNode),Kn(ae),le!==null)for(Je=ae.onRecoverableError,Jr=0;Jr<le.length;Jr++)hi=le[Jr],Je(hi.value,{componentStack:hi.stack});return(xu&3)!==0&&xl(),hi=ae.pendingLanes,(Ve&4194218)!==0&&(hi&42)!==0?ae===yf?rd++:(rd=0,yf=ae):rd=0,Qn(0),null}function yc(ae,le){(ae.pooledCacheLanes&=le)===0&&(le=ae.pooledCache,le!=null&&(ae.pooledCache=null,da(le)))}function xl(){if(Wl!==null){var ae=Wl,le=Oc;Oc=0;var Ne=ze(xu),Ve=32>Ne?32:Ne;Ne=ca.T;var Je=ic();try{if(_o(Ve),ca.T=null,Wl===null)var kt=!1;else{Ve=xf,xf=null;var Wn=Wl,Rr=xu;if(Wl=null,xu=0,(La&6)!==0)throw Error(C(331));var Jr=La;if(La|=4,Kc(Wn.current),Mu(Wn,Wn.current,Rr,Ve),La=Jr,Qn(0,!1),Oo&&typeof Oo.onPostCommitFiberRoot=="function")try{Oo.onPostCommitFiberRoot(Bs,Wn)}catch{}kt=!0}return kt}finally{_o(Je),ca.T=Ne,yc(ae,le)}}return!1}function Pu(ae,le,Ne){le=$e(Ne,le),le=Do(ae.stateNode,le,2),ae=ti(ae,le,2),ae!==null&&(De(ae,2),Kn(ae))}function Va(ae,le,Ne){if(ae.tag===3)Pu(ae,ae,Ne);else for(;le!==null;){if(le.tag===3){Pu(le,ae,Ne);break}else if(le.tag===1){var Ve=le.stateNode;if(typeof le.type.getDerivedStateFromError=="function"||typeof Ve.componentDidCatch=="function"&&(Lc===null||!Lc.has(Ve))){ae=$e(Ne,ae),Ne=Di(2),Ve=ti(le,Ne,2),Ve!==null&&(Xi(Ne,Ve,le,ae),De(Ve,2),Kn(Ve));break}}le=le.return}}function eu(ae,le,Ne){var Ve=ae.pingCache;if(Ve===null){Ve=ae.pingCache=new hl;var Je=new Set;Ve.set(le,Je)}else Je=Ve.get(le),Je===void 0&&(Je=new Set,Ve.set(le,Je));Je.has(Ne)||(Xs=!0,Je.add(Ne),ae=wf.bind(null,ae,le,Ne),le.then(ae,ae))}function wf(ae,le,Ne){var Ve=ae.pingCache;Ve!==null&&Ve.delete(le),ae.pingedLanes|=ae.suspendedLanes&Ne,ae.warmLanes&=~Ne,za===ae&&(Ma&Ne)===Ne&&(Ja===4||Ja===3&&(Ma&62914560)===Ma&&300>ol()-Mo?(La&2)===0&&xn(ae,0):Od|=Ne,$l===Ma&&($l=0)),Kn(ae)}function bc(ae,le){le===0&&(le=we()),ae=jn(ae,le),ae!==null&&(De(ae,le),Kn(ae))}function Zl(ae){var le=ae.memoizedState,Ne=0;le!==null&&(Ne=le.retryLane),bc(ae,Ne)}function Ec(ae,le){var Ne=0;switch(ae.tag){case 13:var Ve=ae.stateNode,Je=ae.memoizedState;Je!==null&&(Ne=Je.retryLane);break;case 19:Ve=ae.stateNode;break;case 22:Ve=ae.stateNode._retryCache;break;default:throw Error(C(314))}Ve!==null&&Ve.delete(le),bc(ae,Ne)}function ec(ae,le){return Pd(ae,le)}function Tf(ae,le,Ne,Ve){this.tag=ae,this.key=Ne,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=le,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ve,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vd(ae){return ae=ae.prototype,!(!ae||!ae.isReactComponent)}function rl(ae,le){var Ne=ae.alternate;return Ne===null?(Ne=v(ae.tag,le,ae.key,ae.mode),Ne.elementType=ae.elementType,Ne.type=ae.type,Ne.stateNode=ae.stateNode,Ne.alternate=ae,ae.alternate=Ne):(Ne.pendingProps=le,Ne.type=ae.type,Ne.flags=0,Ne.subtreeFlags=0,Ne.deletions=null),Ne.flags=ae.flags&31457280,Ne.childLanes=ae.childLanes,Ne.lanes=ae.lanes,Ne.child=ae.child,Ne.memoizedProps=ae.memoizedProps,Ne.memoizedState=ae.memoizedState,Ne.updateQueue=ae.updateQueue,le=ae.dependencies,Ne.dependencies=le===null?null:{lanes:le.lanes,firstContext:le.firstContext},Ne.sibling=ae.sibling,Ne.index=ae.index,Ne.ref=ae.ref,Ne.refCleanup=ae.refCleanup,Ne}function xd(ae,le){ae.flags&=31457282;var Ne=ae.alternate;return Ne===null?(ae.childLanes=0,ae.lanes=le,ae.child=null,ae.subtreeFlags=0,ae.memoizedProps=null,ae.memoizedState=null,ae.updateQueue=null,ae.dependencies=null,ae.stateNode=null):(ae.childLanes=Ne.childLanes,ae.lanes=Ne.lanes,ae.child=Ne.child,ae.subtreeFlags=0,ae.deletions=null,ae.memoizedProps=Ne.memoizedProps,ae.memoizedState=Ne.memoizedState,ae.updateQueue=Ne.updateQueue,ae.type=Ne.type,le=Ne.dependencies,ae.dependencies=le===null?null:{lanes:le.lanes,firstContext:le.firstContext}),ae}function Dl(ae,le,Ne,Ve,Je,kt){var Wn=0;if(Ve=ae,typeof ae=="function")vd(ae)&&(Wn=1);else if(typeof ae=="string")Wn=zo&&Ya?Id(ae,Ne,Ks.current)?26:Ll(ae)?27:5:zo?Id(ae,Ne,Ks.current)?26:5:Ya&&Ll(ae)?27:5;else e:switch(ae){case Ac:return ys(Ne.children,Je,kt,le);case Ad:Wn=8,Je|=24;break;case $d:return ae=v(12,Ne,le,Je|2),ae.elementType=$d,ae.lanes=kt,ae;case Wd:return ae=v(13,Ne,le,Je),ae.elementType=Wd,ae.lanes=kt,ae;case Lu:return ae=v(19,Ne,le,Je),ae.elementType=Lu,ae.lanes=kt,ae;case If:return yd(Ne,Je,kt,le);default:if(typeof ae=="object"&&ae!==null)switch(ae.$$typeof){case Sd:case yl:Wn=10;break e;case Mf:Wn=9;break e;case Cd:Wn=11;break e;case Kd:Wn=14;break e;case al:Wn=16,Ve=null;break e}Wn=29,Ne=Error(C(130,ae===null?"null":typeof ae,"")),Ve=null}return le=v(Wn,Ne,le,Je),le.elementType=ae,le.type=Ve,le.lanes=kt,le}function ys(ae,le,Ne,Ve){return ae=v(7,ae,Ve,le),ae.lanes=Ne,ae}function yd(ae,le,Ne,Ve){ae=v(22,ae,Ve,le),ae.elementType=If,ae.lanes=Ne;var Je={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var kt=Je._current;if(kt===null)throw Error(C(456));if((Je._pendingVisibility&2)===0){var Wn=jn(kt,2);Wn!==null&&(Je._pendingVisibility|=2,Os(Wn,kt,2))}},attach:function(){var kt=Je._current;if(kt===null)throw Error(C(456));if((Je._pendingVisibility&2)!==0){var Wn=jn(kt,2);Wn!==null&&(Je._pendingVisibility&=-3,Os(Wn,kt,2))}}};return ae.stateNode=Je,ae}function zd(ae,le,Ne){return ae=v(6,ae,null,le),ae.lanes=Ne,ae}function Rf(ae,le,Ne){return le=v(4,ae.children!==null?ae.children:[],ae.key,le),le.lanes=Ne,le.stateNode={containerInfo:ae.containerInfo,pendingChildren:null,implementation:ae.implementation},le}function yp(ae,le,Ne,Ve,Je,kt,Wn,Rr){this.tag=1,this.containerInfo=ae,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Sc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=Ve,this.onUncaughtError=Je,this.onCaughtError=kt,this.onRecoverableError=Wn,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Rr,this.incompleteTransitions=new Map}function hh(ae,le,Ne,Ve,Je,kt,Wn,Rr,Jr,hi,Bi,Vi){return ae=new yp(ae,le,Ne,Wn,Rr,Jr,hi,Vi),le=1,kt===!0&&(le|=24),kt=v(3,null,null,le),ae.current=kt,kt.stateNode=ae,le=xa(),le.refCount++,ae.pooledCache=le,le.refCount++,kt.memoizedState={element:Ve,isDehydrated:Ne,cache:le},Gr(kt),ae}function Fs(ae){return ae?(ae=Mc,ae):Mc}function Hd(ae){var le=ae._reactInternals;if(le===void 0)throw typeof ae.render=="function"?Error(C(188)):(ae=Object.keys(ae).join(","),Error(C(268,ae)));return ae=ee(le),ae=ae!==null?ie(ae):null,ae===null?null:Uu(ae.stateNode)}function Bu(ae,le,Ne,Ve,Je,kt){Je=Fs(Je),Ve.context===null?Ve.context=Je:Ve.pendingContext=Je,Ve=Kr(le),Ve.payload={element:Ne},kt=kt===void 0?null:kt,kt!==null&&(Ve.callback=kt),Ne=ti(ae,Ve,le),Ne!==null&&(Os(Ne,ae,le),Mi(Ne,ae,le))}function Du(ae,le){if(ae=ae.memoizedState,ae!==null&&ae.dehydrated!==null){var Ne=ae.retryLane;ae.retryLane=Ne!==0&&Ne<le?Ne:le}}function bd(ae,le){Du(ae,le),(ae=ae.alternate)&&Du(ae,le)}var ya={},ju=requireReact(),Go=requireScheduler(),qd=Object.assign,bp=Symbol.for("react.element"),Ed=Symbol.for("react.transitional.element"),il=Symbol.for("react.portal"),Ac=Symbol.for("react.fragment"),Ad=Symbol.for("react.strict_mode"),$d=Symbol.for("react.profiler"),Sd=Symbol.for("react.provider"),Mf=Symbol.for("react.consumer"),yl=Symbol.for("react.context"),Cd=Symbol.for("react.forward_ref"),Wd=Symbol.for("react.suspense"),Lu=Symbol.for("react.suspense_list"),Kd=Symbol.for("react.memo"),al=Symbol.for("react.lazy"),If=Symbol.for("react.offscreen"),ph=Symbol.for("react.memo_cache_sentinel"),tc=Symbol.iterator,kf=Symbol.for("react.client.reference"),ca=ju.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,jl,nc,tu=!1,Ou=Array.isArray,Nf=d.rendererVersion,wd=d.rendererPackageName,Fu=d.extraDevToolsConfig,Uu=d.getPublicInstance,mh=d.getRootHostContext,Vu=d.getChildHostContext,Yd=d.prepareForCommit,gh=d.resetAfterCommit,Pf=d.createInstance,Td=d.appendInitialChild,rc=d.finalizeInitialChildren,ba=d.shouldSetTextContent,Wa=d.createTextInstance,Us=d.scheduleTimeout,Xd=d.cancelTimeout,Sc=d.noTimeout,Co=d.isPrimaryRenderer;d.warnsIfNotActing;var Ws=d.supportsMutation,sl=d.supportsPersistence,uo=d.supportsHydration,vh=d.getInstanceFromNode;d.beforeActiveInstanceBlur,d.afterActiveInstanceBlur;var Ns=d.preparePortalMount;d.prepareScopeUpdate,d.getInstanceFromScope;var _o=d.setCurrentUpdatePriority,ic=d.getCurrentUpdatePriority,xh=d.resolveUpdatePriority;d.resolveEventType,d.resolveEventTimeStamp;var yh=d.shouldAttemptEagerTransition,Ep=d.detachDeletedInstance;d.requestPostPaintCallback;var Bf=d.maySuspendCommit,Qd=d.preloadInstance,Df=d.startSuspendingCommit,wo=d.suspendInstance,Vs=d.waitForCommitToBeReady,Cc=d.NotPendingTransition,bl=d.HostTransitionContext,Jd=d.resetFormInstance;d.bindToConsole;var jf=d.supportsMicrotasks,ac=d.scheduleMicrotask,wc=d.supportsTestSelectors,Lf=d.findFiberRoot,Of=d.getBoundingRect,bh=d.getTextContent,Gu=d.isHiddenSubtree,Eh=d.matchAccessibilityRole,Ah=d.setFocusIfFocusable,Sh=d.setupIntersectionObserver,Ch=d.appendChild,Ff=d.appendChildToContainer,wh=d.commitTextUpdate,Ap=d.commitMount,Th=d.commitUpdate,Rh=d.insertBefore,Mh=d.insertInContainerBefore,Uf=d.removeChild,Ih=d.removeChildFromContainer,Vf=d.resetTextContent,kh=d.hideInstance,Nh=d.hideTextInstance,Ph=d.unhideInstance,Sp=d.unhideTextInstance,Bh=d.clearContainer,zu=d.cloneInstance,Rd=d.createContainerChildSet,Gf=d.appendChildToContainerChildSet,Zd=d.finalizeContainerChildren,Hu=d.replaceContainerChildren,zf=d.cloneHiddenInstance,Hf=d.cloneHiddenTextInstance,ef=d.isSuspenseInstancePending,tf=d.isSuspenseInstanceFallback,Dh=d.getSuspenseInstanceFallbackErrorDetails,jh=d.registerSuspenseInstanceRetry,qf=d.canHydrateFormStateMarker,Lh=d.isFormStateMarkerMatching,$f=d.getNextHydratableSibling,nf=d.getFirstHydratableChild,Oh=d.getFirstHydratableChildWithinContainer,Fh=d.getFirstHydratableChildWithinSuspenseInstance,Cp=d.canHydrateInstance,Wf=d.canHydrateTextInstance,Uh=d.canHydrateSuspenseInstance,Vh=d.hydrateInstance,Kf=d.hydrateTextInstance,Gh=d.hydrateSuspenseInstance,zh=d.getNextHydratableInstanceAfterSuspenseInstance,wp=d.commitHydratedContainer,Tp=d.commitHydratedSuspenseInstance,Hh=d.clearSuspenseBoundary,Md=d.clearSuspenseBoundaryFromContainer,rf=d.shouldDeleteUnhydratedTailInstances;d.diffHydratedPropsForDevWarnings,d.diffHydratedTextForDevWarnings,d.describeHydratableInstanceForDevWarnings;var af=d.validateHydratableInstance,qh=d.validateHydratableTextInstance,zo=d.supportsResources,Id=d.isHostHoistableType,sf=d.getHoistableRoot,Yf=d.getResource,$h=d.acquireResource,nu=d.releaseResource,kd=d.hydrateHoistable,Nd=d.mountHoistable,qu=d.unmountHoistable,of=d.createHoistableInstance,Wh=d.prepareToCommitHoistables,Kh=d.mayResourceSuspendCommit,iu=d.preloadResource,Yh=d.suspendResource,Ya=d.supportsSingletons,El=d.resolveSingletonInstance,Tc=d.clearSingleton,Xh=d.acquireSingletonInstance,Rc=d.releaseSingletonInstance,Ll=d.isHostSingletonType,Ps=[],sc=-1,Mc={},To=Math.clz32?Math.clz32:ue,Qh=Math.log,Jh=Math.LN2,Ol=128,au=4194304,Pd=Go.unstable_scheduleCallback,lf=Go.unstable_cancelCallback,Zh=Go.unstable_shouldYield,cf=Go.unstable_requestPaint,ol=Go.unstable_now,uf=Go.unstable_ImmediatePriority,ep=Go.unstable_UserBlockingPriority,df=Go.unstable_NormalPriority,Rp=Go.unstable_IdlePriority,tp=Go.log,eo=Go.unstable_setDisableYieldValue,Bs=null,Oo=null,Fo=typeof Object.is=="function"?Object.is:Xe,Xf=new WeakMap,su=[],ou=0,lu=null,$u=0,Ho=[],qo=0,Ic=null,Al=1,Sl="",Ks=se(null),Wu=se(null),Fl=se(null),cu=se(null),fo=null,ho=null,Pa=!1,ll=null,ro=!1,Bd=Error(C(519)),cl=[],uu=0,Cl=0,Dd=null,oc=null,du=!1,as=!1,Qf=!1,Ku=0,Yu=null,fu=0,$o=0,hu=null,lc=!1,pu=!1,Ul=Object.prototype.hasOwnProperty,Xu=Error(C(460)),jd=Error(C(474)),Ld={then:function(){}},kc=null,Nc=null,Pc=0,Bc=vr(!0),Vl=vr(!1),ss=se(null),Qu=se(0),Wo=se(null),Xa=null,Ys=se(0),cc=0,Ca=null,na=null,ja=null,ul=!1,mu=!1,Dc=!1,ff=0,gu=0,io=null,wl=0,hf=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},bs={readContext:zr,use:Sn,useCallback:rr,useContext:rr,useEffect:rr,useImperativeHandle:rr,useLayoutEffect:rr,useInsertionEffect:rr,useMemo:rr,useReducer:rr,useRef:rr,useState:rr,useDebugValue:rr,useDeferredValue:rr,useTransition:rr,useSyncExternalStore:rr,useId:rr};bs.useCacheRefresh=rr,bs.useMemoCache=rr,bs.useHostTransitionStatus=rr,bs.useFormState=rr,bs.useActionState=rr,bs.useOptimistic=rr;var jc={readContext:zr,use:Sn,useCallback:function(ae,le){return ln().memoizedState=[ae,le===void 0?null:le],ae},useContext:zr,useEffect:qi,useImperativeHandle:function(ae,le,Ne){Ne=Ne!=null?Ne.concat([ae]):null,Hi(4194308,4,Oi.bind(null,le,ae),Ne)},useLayoutEffect:function(ae,le){return Hi(4194308,4,ae,le)},useInsertionEffect:function(ae,le){Hi(4,2,ae,le)},useMemo:function(ae,le){var Ne=ln();le=le===void 0?null:le;var Ve=ae();if(Dc){He(!0);try{ae()}finally{He(!1)}}return Ne.memoizedState=[Ve,le],Ve},useReducer:function(ae,le,Ne){var Ve=ln();if(Ne!==void 0){var Je=Ne(le);if(Dc){He(!0);try{Ne(le)}finally{He(!1)}}}else Je=le;return Ve.memoizedState=Ve.baseState=Je,ae={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ae,lastRenderedState:Je},Ve.queue=ae,ae=ae.dispatch=po.bind(null,Ca,ae),[Ve.memoizedState,ae]},useRef:function(ae){var le=ln();return ae={current:ae},le.memoizedState=ae},useState:function(ae){ae=Pr(ae);var le=ae.queue,Ne=ji.bind(null,Ca,le);return le.dispatch=Ne,[ae.memoizedState,Ne]},useDebugValue:wa,useDeferredValue:function(ae,le){var Ne=ln();return ta(Ne,ae,le)},useTransition:function(){var ae=Pr(!1);return ae=Ss.bind(null,Ca,ae.queue,!0,!1),ln().memoizedState=ae,[!1,ae]},useSyncExternalStore:function(ae,le,Ne){var Ve=Ca,Je=ln();if(Pa){if(Ne===void 0)throw Error(C(407));Ne=Ne()}else{if(Ne=le(),za===null)throw Error(C(349));(Ma&60)!==0||Nr(Ve,le,Ne)}Je.memoizedState=Ne;var kt={value:Ne,getSnapshot:le};return Je.queue=kt,qi(Cr.bind(null,Ve,kt,ae),[ae]),Ve.flags|=2048,di(9,xr.bind(null,Ve,kt,Ne,le),{destroy:void 0},null),Ne},useId:function(){var ae=ln(),le=za.identifierPrefix;if(Pa){var Ne=Sl,Ve=Al;Ne=(Ve&~(1<<32-To(Ve)-1)).toString(32)+Ne,le=":"+le+"R"+Ne,Ne=ff++,0<Ne&&(le+="H"+Ne.toString(32)),le+=":"}else Ne=wl++,le=":"+le+"r"+Ne.toString(32)+":";return ae.memoizedState=le},useCacheRefresh:function(){return ln().memoizedState=No.bind(null,Ca)}};jc.useMemoCache=yr,jc.useHostTransitionStatus=Cs,jc.useFormState=Ln,jc.useActionState=Ln,jc.useOptimistic=function(ae){var le=ln();le.memoizedState=le.baseState=ae;var Ne={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return le.queue=Ne,le=ha.bind(null,Ca,!0,Ne),Ne.dispatch=le,[ae,le]};var Ro={readContext:zr,use:Sn,useCallback:Fi,useContext:zr,useEffect:Ki,useImperativeHandle:Gi,useInsertionEffect:$i,useLayoutEffect:wi,useMemo:Ba,useReducer:hr,useRef:_i,useState:function(){return hr(ur)},useDebugValue:wa,useDeferredValue:function(ae,le){var Ne=Cn();return Ua(Ne,na.memoizedState,ae,le)},useTransition:function(){var ae=hr(ur)[0],le=Cn().memoizedState;return[typeof ae=="boolean"?ae:zn(ae),le]},useSyncExternalStore:Lr,useId:ko};Ro.useCacheRefresh=ws,Ro.useMemoCache=yr,Ro.useHostTransitionStatus=Cs,Ro.useFormState=ar,Ro.useActionState=ar,Ro.useOptimistic=function(ae,le){var Ne=Cn();return Vr(Ne,na,ae,le)};var Ko={readContext:zr,use:Sn,useCallback:Fi,useContext:zr,useEffect:Ki,useImperativeHandle:Gi,useInsertionEffect:$i,useLayoutEffect:wi,useMemo:Ba,useReducer:Sr,useRef:_i,useState:function(){return Sr(ur)},useDebugValue:wa,useDeferredValue:function(ae,le){var Ne=Cn();return na===null?ta(Ne,ae,le):Ua(Ne,na.memoizedState,ae,le)},useTransition:function(){var ae=Sr(ur)[0],le=Cn().memoizedState;return[typeof ae=="boolean"?ae:zn(ae),le]},useSyncExternalStore:Lr,useId:ko};Ko.useCacheRefresh=ws,Ko.useMemoCache=yr,Ko.useHostTransitionStatus=Cs,Ko.useFormState=gi,Ko.useActionState=gi,Ko.useOptimistic=function(ae,le){var Ne=Cn();return na!==null?Vr(Ne,na,ae,le):(Ne.baseState=ae,[ae,Ne.queue.dispatch])};var Gl={isMounted:function(ae){return(ae=ae._reactInternals)?H(ae)===ae:!1},enqueueSetState:function(ae,le,Ne){ae=ae._reactInternals;var Ve=gs(),Je=Kr(Ve);Je.payload=le,Ne!=null&&(Je.callback=Ne),le=ti(ae,Je,Ve),le!==null&&(Os(le,ae,Ve),Mi(le,ae,Ve))},enqueueReplaceState:function(ae,le,Ne){ae=ae._reactInternals;var Ve=gs(),Je=Kr(Ve);Je.tag=1,Je.payload=le,Ne!=null&&(Je.callback=Ne),le=ti(ae,Je,Ve),le!==null&&(Os(le,ae,Ve),Mi(le,ae,Ve))},enqueueForceUpdate:function(ae,le){ae=ae._reactInternals;var Ne=gs(),Ve=Kr(Ne);Ve.tag=2,le!=null&&(Ve.callback=le),le=ti(ae,Ve,Ne),le!==null&&(Os(le,ae,Ne),Mi(le,ae,Ne))}},pf=typeof reportError=="function"?reportError:function(ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ae=="object"&&ae!==null&&typeof ae.message=="string"?String(ae.message):String(ae),error:ae});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ae);return}console.error(ae)},mf=Error(C(461)),Qa=!1,gf={dehydrated:null,treeContext:null,retryLane:0},uc=se(null),Tl=null,Yo=null,Ju=typeof AbortController<"u"?AbortController:function(){var ae=[],le=this.signal={aborted:!1,addEventListener:function(Ne,Ve){ae.push(Ve)}};this.abort=function(){le.aborted=!0,ae.forEach(function(Ne){return Ne()})}},np=Go.unstable_scheduleCallback,rp=Go.unstable_NormalPriority,os={$$typeof:yl,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Jf=ca.S;ca.S=function(ae,le){typeof le=="object"&&le!==null&&typeof le.then=="function"&&dr(ae,le),Jf!==null&&Jf(ae,le)};var zl=se(null),Hl=!1,Es=!1,Zf=!1,Ga=typeof WeakSet=="function"?WeakSet:Set,ma=null,Ta=!1,ea=null,Sa=!1,_s=null,Xo=8192,Zu={getCacheForType:function(ae){var le=zr(os),Ne=le.data.get(ae);return Ne===void 0&&(Ne=ae(),le.data.set(ae,Ne)),Ne}},ed=0,dl=1,fs=2,Rl=3,ql=4;if(typeof Symbol=="function"&&Symbol.for){var vu=Symbol.for;ed=vu("selector.component"),dl=vu("selector.has_pseudo_class"),fs=vu("selector.role"),Rl=vu("selector.test_id"),ql=vu("selector.text")}var hl=typeof WeakMap=="function"?WeakMap:Map,La=0,za=null,ra=null,Ma=0,Ka=0,xo=null,pl=!1,Qo=!1,Xs=!1,yo=0,Ja=0,Jo=0,dc=0,Od=0,Zo=0,$l=0,_u=null,As=null,vf=!1,Mo=0,nd=1/0,Fd=null,Lc=null,Ml=!1,Wl=null,xu=0,Oc=0,xf=null,rd=0,yf=null;return ya.attemptContinuousHydration=function(ae){if(ae.tag===13){var le=jn(ae,67108864);le!==null&&Os(le,ae,67108864),bd(ae,67108864)}},ya.attemptHydrationAtCurrentPriority=function(ae){if(ae.tag===13){var le=gs(),Ne=jn(ae,le);Ne!==null&&Os(Ne,ae,le),bd(ae,le)}},ya.attemptSynchronousHydration=function(ae){switch(ae.tag){case 3:if(ae=ae.stateNode,ae.current.memoizedState.isDehydrated){var le=ge(ae.pendingLanes);if(le!==0){for(ae.pendingLanes|=2,ae.entangledLanes|=2;le;){var Ne=1<<31-To(le);ae.entanglements[1]|=Ne,le&=~Ne}Kn(ae),(La&6)===0&&(nd=ol()+500,Qn(0))}}break;case 13:le=jn(ae,2),le!==null&&Os(le,ae,2),Ze(),bd(ae,2)}},ya.batchedUpdates=function(ae,le){return ae(le)},ya.createComponentSelector=function(ae){return{$$typeof:ed,value:ae}},ya.createContainer=function(ae,le,Ne,Ve,Je,kt,Wn,Rr,Jr,hi){return hh(ae,le,!1,null,Ne,Ve,kt,Wn,Rr,Jr,hi,null)},ya.createHasPseudoClassSelector=function(ae){return{$$typeof:dl,value:ae}},ya.createHydrationContainer=function(ae,le,Ne,Ve,Je,kt,Wn,Rr,Jr,hi,Bi,Vi,zi){return ae=hh(Ne,Ve,!0,ae,Je,kt,Rr,Jr,hi,Bi,Vi,zi),ae.context=Fs(null),Ne=ae.current,Ve=gs(),Je=Kr(Ve),Je.callback=le??null,ti(Ne,Je,Ve),ae.current.lanes=Ve,De(ae,Ve),Kn(ae),ae},ya.createPortal=function(ae,le,Ne){var Ve=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:il,key:Ve==null?null:""+Ve,children:ae,containerInfo:le,implementation:Ne}},ya.createRoleSelector=function(ae){return{$$typeof:fs,value:ae}},ya.createTestNameSelector=function(ae){return{$$typeof:Rl,value:ae}},ya.createTextSelector=function(ae){return{$$typeof:ql,value:ae}},ya.defaultOnCaughtError=function(ae){console.error(ae)},ya.defaultOnRecoverableError=function(ae){pf(ae)},ya.defaultOnUncaughtError=function(ae){pf(ae)},ya.deferredUpdates=function(ae){var le=ca.T,Ne=ic();try{return _o(32),ca.T=null,ae()}finally{_o(Ne),ca.T=le}},ya.discreteUpdates=function(ae,le,Ne,Ve,Je){var kt=ca.T,Wn=ic();try{return _o(2),ca.T=null,ae(le,Ne,Ve,Je)}finally{_o(Wn),ca.T=kt,La===0&&(nd=ol()+500)}},ya.findAllNodes=Xc,ya.findBoundingRects=function(ae,le){if(!wc)throw Error(C(363));le=Xc(ae,le),ae=[];for(var Ne=0;Ne<le.length;Ne++)ae.push(Of(le[Ne]));for(le=ae.length-1;0<le;le--){Ne=ae[le];for(var Ve=Ne.x,Je=Ve+Ne.width,kt=Ne.y,Wn=kt+Ne.height,Rr=le-1;0<=Rr;Rr--)if(le!==Rr){var Jr=ae[Rr],hi=Jr.x,Bi=hi+Jr.width,Vi=Jr.y,zi=Vi+Jr.height;if(Ve>=hi&&kt>=Vi&&Je<=Bi&&Wn<=zi){ae.splice(le,1);break}else if(Ve!==hi||Ne.width!==Jr.width||zi<kt||Vi>Wn){if(!(kt!==Vi||Ne.height!==Jr.height||Bi<Ve||hi>Je)){hi>Ve&&(Jr.width+=hi-Ve,Jr.x=Ve),Bi<Je&&(Jr.width=Je-hi),ae.splice(le,1);break}}else{Vi>kt&&(Jr.height+=Vi-kt,Jr.y=kt),zi<Wn&&(Jr.height=Wn-Vi),ae.splice(le,1);break}}}return ae},ya.findHostInstance=Hd,ya.findHostInstanceWithNoPortals=function(ae){return ae=ee(ae),ae=ae!==null?oe(ae):null,ae===null?null:Uu(ae.stateNode)},ya.findHostInstanceWithWarning=function(ae){return Hd(ae)},ya.flushPassiveEffects=xl,ya.flushSyncFromReconciler=function(ae){var le=La;La|=1;var Ne=ca.T,Ve=ic();try{if(_o(2),ca.T=null,ae)return ae()}finally{_o(Ve),ca.T=Ne,La=le,(La&6)===0&&Qn(0)}},ya.flushSyncWork=Ze,ya.focusWithin=function(ae,le){if(!wc)throw Error(C(363));for(ae=xc(ae),le=$s(ae,le),le=Array.from(le),ae=0;ae<le.length;){var Ne=le[ae++],Ve=Ne.tag;if(!Gu(Ne)){if((Ve===5||Ve===26||Ve===27)&&Ah(Ne.stateNode))return!0;for(Ne=Ne.child;Ne!==null;)le.push(Ne),Ne=Ne.sibling}}return!1},ya.getFindAllNodesFailureDescription=function(ae,le){if(!wc)throw Error(C(363));var Ne=0,Ve=[];ae=[xc(ae),0];for(var Je=0;Je<ae.length;){var kt=ae[Je++],Wn=kt.tag,Rr=ae[Je++],Jr=le[Rr];if((Wn!==5&&Wn!==26&&Wn!==27||!Gu(kt))&&(Pl(kt,Jr)&&(Ve.push(ku(Jr)),Rr++,Rr>Ne&&(Ne=Rr)),Rr<le.length))for(kt=kt.child;kt!==null;)ae.push(kt,Rr),kt=kt.sibling}if(Ne<le.length){for(ae=[];Ne<le.length;Ne++)ae.push(ku(le[Ne]));return`findAllNodes was able to match part of the selector:
  `+(Ve.join(" > ")+`

No matching component was found for:
  `)+ae.join(" > ")}return null},ya.getPublicRootInstance=function(ae){if(ae=ae.current,!ae.child)return null;switch(ae.child.tag){case 27:case 5:return Uu(ae.child.stateNode);default:return ae.child.stateNode}},ya.injectIntoDevTools=function(){var ae={bundleType:0,version:Nf,rendererPackageName:wd,currentDispatcherRef:ca,findFiberByHostInstance:vh,reconcilerVersion:"19.0.0"};if(Fu!==null&&(ae.rendererConfig=Fu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")ae=!1;else{var le=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(le.isDisabled||!le.supportsFiber)ae=!0;else{try{Bs=le.inject(ae),Oo=le}catch{}ae=!!le.checkDCE}}return ae},ya.isAlreadyRendering=function(){return!1},ya.observeVisibleRects=function(ae,le,Ne,Ve){if(!wc)throw Error(C(363));ae=Xc(ae,le);var Je=Sh(ae,Ne,Ve).disconnect;return{disconnect:function(){Je()}}},ya.shouldError=function(){return null},ya.shouldSuspend=function(){return!1},ya.startHostTransition=function(ae,le,Ne,Ve){if(ae.tag!==5)throw Error(C(476));var Je=Gs(ae).queue;Ss(ae,Je,le,Cc,Ne===null?A:function(){var kt=Gs(ae).next.queue;return Da(ae,kt,{},gs()),Ne(Ve)})},ya.updateContainer=function(ae,le,Ne,Ve){var Je=le.current,kt=gs();return Bu(Je,kt,ae,le,Ne,Ve),kt},ya.updateContainerSync=function(ae,le,Ne,Ve){return le.tag===0&&xl(),Bu(le.current,2,ae,le,Ne,Ve),2},ya},_.exports.default=_.exports,Object.defineProperty(_.exports,"__esModule",{value:!0})}(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const Reconciler=getDefaultExportFromCjs(reactReconcilerExports);var schedulerExports=requireScheduler();function i$2(_,d,v){if(!_)return;if(v(_)===!0)return _;let A=d?_.return:_.child;for(;A;){const C=i$2(A,d,v);if(C)return C;A=d?null:A.sibling}}function l(_){try{return Object.defineProperties(_,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return _}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const _=reactExports.useContext(a);if(_===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const d=reactExports.useId();return reactExports.useMemo(()=>{for(const v of[_,_?.alternate]){if(!v)continue;const A=i$2(v,!1,C=>{let w=C.memoizedState;for(;w;){if(w.memoizedState===d)return!0;w=w.next}});if(A)return A}},[_,d])}const p$1=Symbol.for("react.context"),b$1=_=>_!==null&&typeof _=="object"&&"$$typeof"in _&&_.$$typeof===p$1;function h$1(){const _=c(),[d]=reactExports.useState(()=>new Map);d.clear();let v=_;for(;v;){const A=v.type;b$1(A)&&A!==a&&!d.has(A)&&d.set(A,reactExports.use(l(A))),v=v.return}return d}function x$1(){const _=h$1();return reactExports.useMemo(()=>Array.from(_.keys()).reduce((d,v)=>A=>reactExports.createElement(d,null,reactExports.createElement(v.Provider,{...A,value:_.get(v)})),d=>reactExports.createElement(m,{...d})),[_])}function findInitialRoot(_){let d=_.root;for(;d.getState().previousRoot;)d=d.getState().previousRoot;return d}const isOrthographicCamera=_=>_&&_.isOrthographicCamera,isRef$1=_=>_&&_.hasOwnProperty("current"),isColorRepresentation=_=>_!=null&&(typeof _=="string"||typeof _=="number"||_.isColor),useIsomorphicLayoutEffect$1=((_,d)=>typeof window<"u"&&(((_=window.document)==null?void 0:_.createElement)||((d=window.navigator)==null?void 0:d.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(_){const d=reactExports.useRef(_);return useIsomorphicLayoutEffect$1(()=>void(d.current=_),[_]),d}function useBridge(){const _=c(),d=x$1();return reactExports.useMemo(()=>({children:v})=>{const C=!!i$2(_,!0,w=>w.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(C,{children:jsxRuntimeExports.jsx(d,{children:v})})},[_,d])}function Block({set:_}){return useIsomorphicLayoutEffect$1(()=>(_(new Promise(()=>null)),()=>_(!1)),[_]),null}const ErrorBoundary=(_=>(_=class extends reactExports.Component{constructor(...v){super(...v),this.state={error:!1}}componentDidCatch(v){this.props.set(v)}render(){return this.state.error?null:this.props.children}},_.getDerivedStateFromError=()=>({error:!0}),_))();function calculateDpr(_){var d;const v=typeof window<"u"?(d=window.devicePixelRatio)!=null?d:2:1;return Array.isArray(_)?Math.min(Math.max(_[0],v),_[1]):_}function getRootState(_){var d;return(d=_.__r3f)==null?void 0:d.root.getState()}const is={obj:_=>_===Object(_)&&!is.arr(_)&&typeof _!="function",fun:_=>typeof _=="function",str:_=>typeof _=="string",num:_=>typeof _=="number",boo:_=>typeof _=="boolean",und:_=>_===void 0,nul:_=>_===null,arr:_=>Array.isArray(_),equ(_,d,{arrays:v="shallow",objects:A="reference",strict:C=!0}={}){if(typeof _!=typeof d||!!_!=!!d)return!1;if(is.str(_)||is.num(_)||is.boo(_))return _===d;const w=is.obj(_);if(w&&A==="reference")return _===d;const T=is.arr(_);if(T&&v==="reference")return _===d;if((T||w)&&_===d)return!0;let R;for(R in _)if(!(R in d))return!1;if(w&&v==="shallow"&&A==="shallow"){for(R in C?d:_)if(!is.equ(_[R],d[R],{strict:C,objects:"reference"}))return!1}else for(R in C?d:_)if(_[R]!==d[R])return!1;if(is.und(R)){if(T&&_.length===0&&d.length===0||w&&Object.keys(_).length===0&&Object.keys(d).length===0)return!0;if(_!==d)return!1}return!0}};function buildGraph(_){const d={nodes:{},materials:{},meshes:{}};return _&&_.traverse(v=>{v.name&&(d.nodes[v.name]=v),v.material&&!d.materials[v.material.name]&&(d.materials[v.material.name]=v.material),v.isMesh&&!d.meshes[v.name]&&(d.meshes[v.name]=v)}),d}function dispose(_){_.type!=="Scene"&&(_.dispose==null||_.dispose());for(const d in _){const v=_[d];v?.type!=="Scene"&&(v==null||v.dispose==null||v.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(_){const d={};for(const v in _)REACT_INTERNAL_PROPS.includes(v)||(d[v]=_[v]);return d}function prepare(_,d,v,A){const C=_;let w=C?.__r3f;return w||(w={root:d,type:v,parent:null,children:[],props:getInstanceProps(A),object:C,eventCount:0,handlers:{},isHidden:!1},C&&(C.__r3f=w)),w}function resolve(_,d){let v=_[d];if(!d.includes("-"))return{root:_,key:d,target:v};v=_;for(const C of d.split("-")){var A;d=C,_=v,v=(A=v)==null?void 0:A[d]}return{root:_,key:d,target:v}}const INDEX_REGEX=/-\d+$/;function attach(_,d){if(is.str(d.props.attach)){if(INDEX_REGEX.test(d.props.attach)){const C=d.props.attach.replace(INDEX_REGEX,""),{root:w,key:T}=resolve(_.object,C);Array.isArray(w[T])||(w[T]=[])}const{root:v,key:A}=resolve(_.object,d.props.attach);d.previousAttach=v[A],v[A]=d.object}else is.fun(d.props.attach)&&(d.previousAttach=d.props.attach(_.object,d.object))}function detach(_,d){if(is.str(d.props.attach)){const{root:v,key:A}=resolve(_.object,d.props.attach),C=d.previousAttach;C===void 0?delete v[A]:v[A]=C}else d.previousAttach==null||d.previousAttach(_.object,d.object);delete d.previousAttach}const RESERVED_PROPS=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(_){let d=MEMOIZED_PROTOTYPES.get(_.constructor);try{d||(d=new _.constructor,MEMOIZED_PROTOTYPES.set(_.constructor,d))}catch{}return d}function diffProps(_,d){const v={};for(const A in d)if(!RESERVED_PROPS.includes(A)&&!is.equ(d[A],_.props[A])){v[A]=d[A];for(const C in d)C.startsWith(`${A}-`)&&(v[C]=d[C])}for(const A in _.props){if(RESERVED_PROPS.includes(A)||d.hasOwnProperty(A))continue;const{root:C,key:w}=resolve(_.object,A);if(C.constructor&&C.constructor.length===0){const T=getMemoizedPrototype(C);is.und(T)||(v[w]=T[w])}else v[w]=0}return v}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(_,d){var v;const A=_.__r3f,C=A&&findInitialRoot(A).getState(),w=A?.eventCount;for(const R in d){let G=d[R];if(RESERVED_PROPS.includes(R))continue;if(A&&EVENT_REGEX.test(R)){typeof G=="function"?A.handlers[R]=G:delete A.handlers[R],A.eventCount=Object.keys(A.handlers).length;continue}if(G===void 0)continue;let{root:I,key:z,target:H}=resolve(_,R);if(H instanceof Layers&&G instanceof Layers)H.mask=G.mask;else if(H instanceof Color&&isColorRepresentation(G))H.set(G);else if(H!==null&&typeof H=="object"&&typeof H.set=="function"&&typeof H.copy=="function"&&G!=null&&G.constructor&&H.constructor===G.constructor)H.copy(G);else if(H!==null&&typeof H=="object"&&typeof H.set=="function"&&Array.isArray(G))typeof H.fromArray=="function"?H.fromArray(G):H.set(...G);else if(H!==null&&typeof H=="object"&&typeof H.set=="function"&&typeof G=="number")typeof H.setScalar=="function"?H.setScalar(G):H.set(G);else{var T;I[z]=G,C&&!C.linear&&colorMaps.includes(z)&&(T=I[z])!=null&&T.isTexture&&I[z].format===RGBAFormat&&I[z].type===UnsignedByteType&&(I[z].colorSpace=SRGBColorSpace$1)}}if(A!=null&&A.parent&&C!=null&&C.internal&&(v=A.object)!=null&&v.isObject3D&&w!==A.eventCount){const R=A.object,G=C.internal.interaction.indexOf(R);G>-1&&C.internal.interaction.splice(G,1),A.eventCount&&R.raycast!==null&&C.internal.interaction.push(R)}return A&&A.props.attach===void 0&&(A.object.isBufferGeometry?A.props.attach="geometry":A.object.isMaterial&&(A.props.attach="material")),A&&invalidateInstance(A),_}function invalidateInstance(_){var d;if(!_.parent)return;_.props.onUpdate==null||_.props.onUpdate(_.object);const v=(d=_.root)==null||d.getState==null?void 0:d.getState();v&&v.internal.frames===0&&v.invalidate()}function updateCamera(_,d){_.manual||(isOrthographicCamera(_)?(_.left=d.width/-2,_.right=d.width/2,_.top=d.height/2,_.bottom=d.height/-2):_.aspect=d.width/d.height,_.updateProjectionMatrix())}const isObject3D=_=>_?.isObject3D;function makeId(_){return(_.eventObject||_.object).uuid+"/"+_.index+_.instanceId}function releaseInternalPointerCapture(_,d,v,A){const C=v.get(d);C&&(v.delete(d),v.size===0&&(_.delete(A),C.target.releasePointerCapture(A)))}function removeInteractivity(_,d){const{internal:v}=_.getState();v.interaction=v.interaction.filter(A=>A!==d),v.initialHits=v.initialHits.filter(A=>A!==d),v.hovered.forEach((A,C)=>{(A.eventObject===d||A.object===d)&&v.hovered.delete(C)}),v.capturedMap.forEach((A,C)=>{releaseInternalPointerCapture(v.capturedMap,d,A,C)})}function createEvents(_){function d(G){const{internal:I}=_.getState(),z=G.offsetX-I.initialClick[0],H=G.offsetY-I.initialClick[1];return Math.round(Math.sqrt(z*z+H*H))}function v(G){return G.filter(I=>["Move","Over","Enter","Out","Leave"].some(z=>{var H;return(H=I.__r3f)==null?void 0:H.handlers["onPointer"+z]}))}function A(G,I){const z=_.getState(),H=new Set,Y=[],ee=I?I(z.internal.interaction):z.internal.interaction;for(let re=0;re<ee.length;re++){const fe=getRootState(ee[re]);fe&&(fe.raycaster.camera=void 0)}z.previousRoot||z.events.compute==null||z.events.compute(G,z);function ie(re){const fe=getRootState(re);if(!fe||!fe.events.enabled||fe.raycaster.camera===null)return[];if(fe.raycaster.camera===void 0){var ue;fe.events.compute==null||fe.events.compute(G,fe,(ue=fe.previousRoot)==null?void 0:ue.getState()),fe.raycaster.camera===void 0&&(fe.raycaster.camera=null)}return fe.raycaster.camera?fe.raycaster.intersectObject(re,!0):[]}let oe=ee.flatMap(ie).sort((re,fe)=>{const ue=getRootState(re.object),ge=getRootState(fe.object);return!ue||!ge?re.distance-fe.distance:ge.events.priority-ue.events.priority||re.distance-fe.distance}).filter(re=>{const fe=makeId(re);return H.has(fe)?!1:(H.add(fe),!0)});z.events.filter&&(oe=z.events.filter(oe,z));for(const re of oe){let fe=re.object;for(;fe;){var se;(se=fe.__r3f)!=null&&se.eventCount&&Y.push({...re,eventObject:fe}),fe=fe.parent}}if("pointerId"in G&&z.internal.capturedMap.has(G.pointerId))for(let re of z.internal.capturedMap.get(G.pointerId).values())H.has(makeId(re.intersection))||Y.push(re.intersection);return Y}function C(G,I,z,H){if(G.length){const Y={stopped:!1};for(const ee of G){let ie=getRootState(ee.object);if(ie||ee.object.traverseAncestors(oe=>{const se=getRootState(oe);if(se)return ie=se,!1}),ie){const{raycaster:oe,pointer:se,camera:re,internal:fe}=ie,ue=new Vector3(se.x,se.y,0).unproject(re),ge=we=>{var Be,De;return(Be=(De=fe.capturedMap.get(we))==null?void 0:De.has(ee.eventObject))!=null?Be:!1},ye=we=>{const Be={intersection:ee,target:I.target};fe.capturedMap.has(we)?fe.capturedMap.get(we).set(ee.eventObject,Be):fe.capturedMap.set(we,new Map([[ee.eventObject,Be]])),I.target.setPointerCapture(we)},be=we=>{const Be=fe.capturedMap.get(we);Be&&releaseInternalPointerCapture(fe.capturedMap,ee.eventObject,Be,we)};let ve={};for(let we in I){let Be=I[we];typeof Be!="function"&&(ve[we]=Be)}let Me={...ee,...ve,pointer:se,intersections:G,stopped:Y.stopped,delta:z,unprojectedPoint:ue,ray:oe.ray,camera:re,stopPropagation(){const we="pointerId"in I&&fe.capturedMap.get(I.pointerId);if((!we||we.has(ee.eventObject))&&(Me.stopped=Y.stopped=!0,fe.hovered.size&&Array.from(fe.hovered.values()).find(Be=>Be.eventObject===ee.eventObject))){const Be=G.slice(0,G.indexOf(ee));w([...Be,ee])}},target:{hasPointerCapture:ge,setPointerCapture:ye,releasePointerCapture:be},currentTarget:{hasPointerCapture:ge,setPointerCapture:ye,releasePointerCapture:be},nativeEvent:I};if(H(Me),Y.stopped===!0)break}}}return G}function w(G){const{internal:I}=_.getState();for(const z of I.hovered.values())if(!G.length||!G.find(H=>H.object===z.object&&H.index===z.index&&H.instanceId===z.instanceId)){const Y=z.eventObject.__r3f;if(I.hovered.delete(makeId(z)),Y!=null&&Y.eventCount){const ee=Y.handlers,ie={...z,intersections:G};ee.onPointerOut==null||ee.onPointerOut(ie),ee.onPointerLeave==null||ee.onPointerLeave(ie)}}}function T(G,I){for(let z=0;z<I.length;z++){const H=I[z].__r3f;H==null||H.handlers.onPointerMissed==null||H.handlers.onPointerMissed(G)}}function R(G){switch(G){case"onPointerLeave":case"onPointerCancel":return()=>w([]);case"onLostPointerCapture":return I=>{const{internal:z}=_.getState();"pointerId"in I&&z.capturedMap.has(I.pointerId)&&requestAnimationFrame(()=>{z.capturedMap.has(I.pointerId)&&(z.capturedMap.delete(I.pointerId),w([]))})}}return function(z){const{onPointerMissed:H,internal:Y}=_.getState();Y.lastEvent.current=z;const ee=G==="onPointerMove",ie=G==="onClick"||G==="onContextMenu"||G==="onDoubleClick",se=A(z,ee?v:void 0),re=ie?d(z):0;G==="onPointerDown"&&(Y.initialClick=[z.offsetX,z.offsetY],Y.initialHits=se.map(ue=>ue.eventObject)),ie&&!se.length&&re<=2&&(T(z,Y.interaction),H&&H(z)),ee&&w(se);function fe(ue){const ge=ue.eventObject,ye=ge.__r3f;if(!(ye!=null&&ye.eventCount))return;const be=ye.handlers;if(ee){if(be.onPointerOver||be.onPointerEnter||be.onPointerOut||be.onPointerLeave){const ve=makeId(ue),Me=Y.hovered.get(ve);Me?Me.stopped&&ue.stopPropagation():(Y.hovered.set(ve,ue),be.onPointerOver==null||be.onPointerOver(ue),be.onPointerEnter==null||be.onPointerEnter(ue))}be.onPointerMove==null||be.onPointerMove(ue)}else{const ve=be[G];ve?(!ie||Y.initialHits.includes(ge))&&(T(z,Y.interaction.filter(Me=>!Y.initialHits.includes(Me))),ve(ue)):ie&&Y.initialHits.includes(ge)&&T(z,Y.interaction.filter(Me=>!Y.initialHits.includes(Me)))}}C(se,z,re,fe)}}return{handlePointer:R}}const isRenderer=_=>!!(_!=null&&_.render),context=reactExports.createContext(null),createStore$1=(_,d)=>{const v=createWithEqualityFn((R,G)=>{const I=new Vector3,z=new Vector3,H=new Vector3;function Y(re=G().camera,fe=z,ue=G().size){const{width:ge,height:ye,top:be,left:ve}=ue,Me=ge/ye;fe.isVector3?H.copy(fe):H.set(...fe);const we=re.getWorldPosition(I).distanceTo(H);if(isOrthographicCamera(re))return{width:ge/re.zoom,height:ye/re.zoom,top:be,left:ve,factor:1,distance:we,aspect:Me};{const Be=re.fov*Math.PI/180,De=2*Math.tan(Be/2)*we,Fe=De*(ge/ye);return{width:Fe,height:De,top:be,left:ve,factor:ge/Fe,distance:we,aspect:Me}}}let ee;const ie=re=>R(fe=>({performance:{...fe.performance,current:re}})),oe=new Vector2;return{set:R,get:G,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(re=1)=>_(G(),re),advance:(re,fe)=>d(re,fe,G()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:oe,mouse:oe,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const re=G();ee&&clearTimeout(ee),re.performance.current!==re.performance.min&&ie(re.performance.min),ee=setTimeout(()=>ie(G().performance.max),re.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Y},setEvents:re=>R(fe=>({...fe,events:{...fe.events,...re}})),setSize:(re,fe,ue=0,ge=0)=>{const ye=G().camera,be={width:re,height:fe,top:ue,left:ge};R(ve=>({size:be,viewport:{...ve.viewport,...Y(ye,z,be)}}))},setDpr:re=>R(fe=>{const ue=calculateDpr(re);return{viewport:{...fe.viewport,dpr:ue,initialDpr:fe.viewport.initialDpr||ue}}}),setFrameloop:(re="always")=>{const fe=G().clock;fe.stop(),fe.elapsedTime=0,re!=="never"&&(fe.start(),fe.elapsedTime=0),R(()=>({frameloop:re}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(re,fe,ue)=>{const ge=G().internal;return ge.priority=ge.priority+(fe>0?1:0),ge.subscribers.push({ref:re,priority:fe,store:ue}),ge.subscribers=ge.subscribers.sort((ye,be)=>ye.priority-be.priority),()=>{const ye=G().internal;ye!=null&&ye.subscribers&&(ye.priority=ye.priority-(fe>0?1:0),ye.subscribers=ye.subscribers.filter(be=>be.ref!==re))}}}}}),A=v.getState();let C=A.size,w=A.viewport.dpr,T=A.camera;return v.subscribe(()=>{const{camera:R,size:G,viewport:I,gl:z,set:H}=v.getState();if(G.width!==C.width||G.height!==C.height||I.dpr!==w){C=G,w=I.dpr,updateCamera(R,G),I.dpr>0&&z.setPixelRatio(I.dpr);const Y=typeof HTMLCanvasElement<"u"&&z.domElement instanceof HTMLCanvasElement;z.setSize(G.width,G.height,Y)}R!==T&&(T=R,H(Y=>({viewport:{...Y.viewport,...Y.viewport.getCurrentViewport(R)}})))}),v.subscribe(R=>_(R)),v};function useStore$1(){const _=reactExports.useContext(context);if(!_)throw new Error("R3F: Hooks can only be used within the Canvas component!");return _}function useThree(_=v=>v,d){return useStore$1()(_,d)}function useFrame(_,d=0){const v=useStore$1(),A=v.getState().internal.subscribe,C=useMutableCallback(_);return useIsomorphicLayoutEffect$1(()=>A(C,d,v),[d,A,v]),null}const memoizedLoaders=new WeakMap,isConstructor$1=_=>{var d;return typeof _=="function"&&(_==null||(d=_.prototype)==null?void 0:d.constructor)===_};function loadingFn(_,d){return function(v,...A){let C;return isConstructor$1(v)?(C=memoizedLoaders.get(v),C||(C=new v,memoizedLoaders.set(v,C))):C=v,_&&_(C),Promise.all(A.map(w=>new Promise((T,R)=>C.load(w,G=>{isObject3D(G?.scene)&&Object.assign(G,buildGraph(G.scene)),T(G)},d,G=>R(new Error(`Could not load ${w}: ${G?.message}`))))))}}function useLoader(_,d,v,A){const C=Array.isArray(d)?d:[d],w=suspend(loadingFn(v,A),[_,...C],{equal:is.equ});return Array.isArray(d)?w:w[0]}useLoader.preload=function(_,d,v){const A=Array.isArray(d)?d:[d];return preload$1(loadingFn(v),[_,...A])};useLoader.clear=function(_,d){const v=Array.isArray(d)?d:[d];return clear([_,...v])};function createReconciler(_){const d=Reconciler(_);return d.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version}),d}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=_=>`${_[0].toUpperCase()}${_.slice(1)}`;let i$1=0;const isConstructor=_=>typeof _=="function";function extend$3(_){if(isConstructor(_)){const d=`${i$1++}`;return catalogue[d]=_,d}else Object.assign(catalogue,_)}function validateInstance(_,d){const v=toPascalCase(_),A=catalogue[v];if(_!=="primitive"&&!A)throw new Error(`R3F: ${v} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(_==="primitive"&&!d.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(d.args!==void 0&&!Array.isArray(d.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(_,d,v){var A;return _=toPascalCase(_)in catalogue?_:_.replace(PREFIX_REGEX,""),validateInstance(_,d),_==="primitive"&&(A=d.object)!=null&&A.__r3f&&delete d.object.__r3f,prepare(d.object,v,_,d)}function hideInstance(_){if(!_.isHidden){var d;_.props.attach&&(d=_.parent)!=null&&d.object?detach(_.parent,_):isObject3D(_.object)&&(_.object.visible=!1),_.isHidden=!0,invalidateInstance(_)}}function unhideInstance(_){if(_.isHidden){var d;_.props.attach&&(d=_.parent)!=null&&d.object?attach(_.parent,_):isObject3D(_.object)&&_.props.visible!==!1&&(_.object.visible=!0),_.isHidden=!1,invalidateInstance(_)}}function handleContainerEffects(_,d,v){const A=d.root.getState();if(!(!_.parent&&_.object!==A.scene)){if(!d.object){var C,w;const T=catalogue[toPascalCase(d.type)];d.object=(C=d.props.object)!=null?C:new T(...(w=d.props.args)!=null?w:[]),d.object.__r3f=d}if(applyProps(d.object,d.props),d.props.attach)attach(_,d);else if(isObject3D(d.object)&&isObject3D(_.object)){const T=_.object.children.indexOf(v?.object);if(v&&T!==-1){const R=_.object.children.indexOf(d.object);if(R!==-1){_.object.children.splice(R,1);const G=R<T?T-1:T;_.object.children.splice(G,0,d.object)}else d.object.parent=_.object,_.object.children.splice(T,0,d.object),d.object.dispatchEvent({type:"added"}),_.object.dispatchEvent({type:"childadded",child:d.object})}else _.object.add(d.object)}for(const T of d.children)handleContainerEffects(d,T);invalidateInstance(d)}}function appendChild(_,d){d&&(d.parent=_,_.children.push(d),handleContainerEffects(_,d))}function insertBefore(_,d,v){if(!d||!v)return;d.parent=_;const A=_.children.indexOf(v);A!==-1?_.children.splice(A,0,d):_.children.push(d),handleContainerEffects(_,d,v)}function disposeOnIdle(_){if(typeof _.dispose=="function"){const d=()=>{try{_.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?d():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,d)}}function removeChild(_,d,v){if(!d)return;d.parent=null;const A=_.children.indexOf(d);A!==-1&&_.children.splice(A,1),d.props.attach?detach(_,d):isObject3D(d.object)&&isObject3D(_.object)&&(_.object.remove(d.object),removeInteractivity(findInitialRoot(d),d.object));const C=d.props.dispose!==null&&v!==!1;for(let w=d.children.length-1;w>=0;w--){const T=d.children[w];removeChild(d,T,C)}d.children.length=0,delete d.object.__r3f,C&&d.type!=="primitive"&&d.object.type!=="Scene"&&disposeOnIdle(d.object),v===void 0&&invalidateInstance(d)}function setFiberRef(_,d){for(const v of[_,_.alternate])if(v!==null)if(typeof v.ref=="function"){v.refCleanup==null||v.refCleanup();const A=v.ref(d);typeof A=="function"&&(v.refCleanup=A)}else v.ref&&(v.ref.current=d)}const reconstructed=[];function swapInstances(){for(const[v]of reconstructed){const A=v.parent;if(A){v.props.attach?detach(A,v):isObject3D(v.object)&&isObject3D(A.object)&&A.object.remove(v.object);for(const C of v.children)C.props.attach?detach(v,C):isObject3D(C.object)&&isObject3D(v.object)&&v.object.remove(C.object)}v.isHidden&&unhideInstance(v),v.object.__r3f&&delete v.object.__r3f,v.type!=="primitive"&&disposeOnIdle(v.object)}for(const[v,A,C]of reconstructed){v.props=A;const w=v.parent;if(w){var _,d;const T=catalogue[toPascalCase(v.type)];v.object=(_=v.props.object)!=null?_:new T(...(d=v.props.args)!=null?d:[]),v.object.__r3f=v,setFiberRef(C,v.object),applyProps(v.object,v.props),v.props.attach?attach(w,v):isObject3D(v.object)&&isObject3D(w.object)&&w.object.add(v.object);for(const R of v.children)R.props.attach?attach(v,R):isObject3D(R.object)&&isObject3D(v.object)&&v.object.add(R.object);invalidateInstance(v)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(_,d){const v=_.getState().scene.__r3f;!d||!v||appendChild(v,d)},removeChildFromContainer(_,d){const v=_.getState().scene.__r3f;!d||!v||removeChild(v,d)},insertInContainerBefore(_,d,v){const A=_.getState().scene.__r3f;!d||!v||!A||insertBefore(A,d,v)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(_,d,v,A,C){var w,T,R;validateInstance(d,A);let G=!1;if((_.type==="primitive"&&v.object!==A.object||((w=A.args)==null?void 0:w.length)!==((T=v.args)==null?void 0:T.length)||(R=A.args)!=null&&R.some((z,H)=>{var Y;return z!==((Y=v.args)==null?void 0:Y[H])}))&&(G=!0),G)reconstructed.push([_,{...A},C]);else{const z=diffProps(_,A);Object.keys(z).length&&(Object.assign(_.props,z),applyProps(_.object,z))}(C.sibling===null||(C.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:_=>_?.object,prepareForCommit:()=>null,preparePortalMount:_=>prepare(_.getState().scene,_,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(_){currentUpdatePriority=_},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var _;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((_=window.event)==null?void 0:_.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}},resetFormInstance(){}}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(_,d){if(!d&&typeof HTMLCanvasElement<"u"&&_ instanceof HTMLCanvasElement&&_.parentElement){const{width:v,height:A,top:C,left:w}=_.parentElement.getBoundingClientRect();return{width:v,height:A,top:C,left:w}}else if(!d&&typeof OffscreenCanvas<"u"&&_ instanceof OffscreenCanvas)return{width:_.width,height:_.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...d}}function createRoot(_){const d=_roots.get(_),v=d?.fiber,A=d?.store;d&&console.warn("R3F.createRoot should only be called once!");const C=typeof reportError=="function"?reportError:console.error,w=A||createStore$1(invalidate,advance),T=v||reconciler.createContainer(w,constantsExports.ConcurrentRoot,null,!1,null,"",C,C,C,null);d||_roots.set(_,{fiber:T,store:w});let R,G,I=!1,z=null;return{async configure(H={}){let Y;z=new Promise(nt=>Y=nt);let{gl:ee,size:ie,scene:oe,events:se,onCreated:re,shadows:fe=!1,linear:ue=!1,flat:ge=!1,legacy:ye=!1,orthographic:be=!1,frameloop:ve="always",dpr:Me=[1,2],performance:we,raycaster:Be,camera:De,onPointerMissed:Fe}=H,Oe=w.getState(),Ge=Oe.gl;if(!Oe.gl){const nt={canvas:_,powerPreference:"high-performance",antialias:!0,alpha:!0},Qt=typeof ee=="function"?await ee(nt):ee;isRenderer(Qt)?Ge=Qt:Ge=new WebGLRenderer({...nt,...ee}),Oe.set({gl:Ge})}let ze=Oe.raycaster;ze||Oe.set({raycaster:ze=new Raycaster});const{params:je,...He}=Be||{};if(is.equ(He,ze,shallowLoose)||applyProps(ze,{...He}),is.equ(je,ze.params,shallowLoose)||applyProps(ze,{params:{...ze.params,...je}}),!Oe.camera||Oe.camera===G&&!is.equ(G,De,shallowLoose)){G=De;const nt=De?.isCamera,Qt=nt?De:be?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);nt||(Qt.position.z=5,De&&(applyProps(Qt,De),Qt.manual||("aspect"in De||"left"in De||"right"in De||"bottom"in De||"top"in De)&&(Qt.manual=!0,Qt.updateProjectionMatrix())),!Oe.camera&&!(De!=null&&De.rotation)&&Qt.lookAt(0,0,0)),Oe.set({camera:Qt}),ze.camera=Qt}if(!Oe.scene){let nt;oe!=null&&oe.isScene?(nt=oe,prepare(nt,w,"",{})):(nt=new Scene,prepare(nt,w,"",{}),oe&&applyProps(nt,oe)),Oe.set({scene:nt})}se&&!Oe.events.handlers&&Oe.set({events:se(w)});const Xe=computeInitialSize(_,ie);if(is.equ(Xe,Oe.size,shallowLoose)||Oe.setSize(Xe.width,Xe.height,Xe.top,Xe.left),Me&&Oe.viewport.dpr!==calculateDpr(Me)&&Oe.setDpr(Me),Oe.frameloop!==ve&&Oe.setFrameloop(ve),Oe.onPointerMissed||Oe.set({onPointerMissed:Fe}),we&&!is.equ(we,Oe.performance,shallowLoose)&&Oe.set(nt=>({performance:{...nt.performance,...we}})),!Oe.xr){var $e;const nt=(Bn,Lt)=>{const Mn=w.getState();Mn.frameloop!=="never"&&advance(Bn,!0,Mn,Lt)},Qt=()=>{const Bn=w.getState();Bn.gl.xr.enabled=Bn.gl.xr.isPresenting,Bn.gl.xr.setAnimationLoop(Bn.gl.xr.isPresenting?nt:null),Bn.gl.xr.isPresenting||invalidate(Bn)},Wt={connect(){const Bn=w.getState().gl;Bn.xr.addEventListener("sessionstart",Qt),Bn.xr.addEventListener("sessionend",Qt)},disconnect(){const Bn=w.getState().gl;Bn.xr.removeEventListener("sessionstart",Qt),Bn.xr.removeEventListener("sessionend",Qt)}};typeof(($e=Ge.xr)==null?void 0:$e.addEventListener)=="function"&&Wt.connect(),Oe.set({xr:Wt})}if(Ge.shadowMap){const nt=Ge.shadowMap.enabled,Qt=Ge.shadowMap.type;if(Ge.shadowMap.enabled=!!fe,is.boo(fe))Ge.shadowMap.type=PCFSoftShadowMap;else if(is.str(fe)){var We;const Wt={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ge.shadowMap.type=(We=Wt[fe])!=null?We:PCFSoftShadowMap}else is.obj(fe)&&Object.assign(Ge.shadowMap,fe);(nt!==Ge.shadowMap.enabled||Qt!==Ge.shadowMap.type)&&(Ge.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!ye,I||(Ge.outputColorSpace=ue?LinearSRGBColorSpace$1:SRGBColorSpace$1,Ge.toneMapping=ge?NoToneMapping:ACESFilmicToneMapping),Oe.legacy!==ye&&Oe.set(()=>({legacy:ye})),Oe.linear!==ue&&Oe.set(()=>({linear:ue})),Oe.flat!==ge&&Oe.set(()=>({flat:ge})),ee&&!is.fun(ee)&&!isRenderer(ee)&&!is.equ(ee,Ge,shallowLoose)&&applyProps(Ge,ee),R=re,I=!0,Y(),this},render(H){return!I&&!z&&this.configure(),z.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:w,children:H,onCreated:R,rootElement:_}),T,null,()=>{})}),w},unmount(){unmountComponentAtNode(_)}}}function Provider({store:_,children:d,onCreated:v,rootElement:A}){return useIsomorphicLayoutEffect$1(()=>{const C=_.getState();C.set(w=>({internal:{...w.internal,active:!0}})),v&&v(C),_.getState().events.connected||C.events.connect==null||C.events.connect(A)},[]),jsxRuntimeExports.jsx(context.Provider,{value:_,children:d})}function unmountComponentAtNode(_,d){const v=_roots.get(_),A=v?.fiber;if(A){const C=v?.store.getState();C&&(C.internal.active=!1),reconciler.updateContainer(null,A,null,()=>{C&&setTimeout(()=>{try{var w,T,R,G;C.events.disconnect==null||C.events.disconnect(),(w=C.gl)==null||(T=w.renderLists)==null||T.dispose==null||T.dispose(),(R=C.gl)==null||R.forceContextLoss==null||R.forceContextLoss(),(G=C.gl)!=null&&G.xr&&C.xr.disconnect(),dispose(C.scene),_roots.delete(_)}catch{}},500)})}}function createPortal(_,d,v){return jsxRuntimeExports.jsx(Portal,{children:_,container:d,state:v})}function Portal({state:_={},children:d,container:v}){const{events:A,size:C,...w}=_,T=useStore$1(),[R]=reactExports.useState(()=>new Raycaster),[G]=reactExports.useState(()=>new Vector2),I=useMutableCallback((H,Y)=>{let ee;if(Y.camera&&C){const ie=Y.camera;ee=H.viewport.getCurrentViewport(ie,new Vector3,C),ie!==H.camera&&updateCamera(ie,C)}return{...H,...Y,scene:v,raycaster:R,pointer:G,mouse:G,previousRoot:T,events:{...H.events,...Y.events,...A},size:{...H.size,...C},viewport:{...H.viewport,...ee},setEvents:ie=>Y.set(oe=>({...oe,events:{...oe.events,...ie}}))}}),z=reactExports.useMemo(()=>{const H=createWithEqualityFn((ee,ie)=>({...w,set:ee,get:ie})),Y=ee=>H.setState(ie=>I.current(ee,ie));return Y(T.getState()),T.subscribe(Y),H},[T,v]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reconciler.createPortal(jsxRuntimeExports.jsx(context.Provider,{value:z,children:d}),z,null)})}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(_,d){if(_.size)for(const{callback:v}of _.values())v(d)}function flushGlobalEffects(_,d){switch(_){case"before":return run(globalEffects,d);case"after":return run(globalAfterEffects,d);case"tail":return run(globalTailEffects,d)}}let subscribers,subscription;function update$1(_,d,v){let A=d.clock.getDelta();d.frameloop==="never"&&typeof _=="number"&&(A=_-d.clock.elapsedTime,d.clock.oldTime=d.clock.elapsedTime,d.clock.elapsedTime=_),subscribers=d.internal.subscribers;for(let C=0;C<subscribers.length;C++)subscription=subscribers[C],subscription.ref.current(subscription.store.getState(),A,v);return!d.internal.priority&&d.gl.render&&d.gl.render(d.scene,d.camera),d.internal.frames=Math.max(0,d.internal.frames-1),d.frameloop==="always"?1:d.internal.frames}let running=!1,useFrameInProgress=!1,repeat$1,frame,state;function loop$1(_){frame=requestAnimationFrame(loop$1),running=!0,repeat$1=0,flushGlobalEffects("before",_),useFrameInProgress=!0;for(const v of _roots.values()){var d;state=v.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((d=state.gl.xr)!=null&&d.isPresenting)&&(repeat$1+=update$1(_,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",_),repeat$1===0)return flushGlobalEffects("tail",_),running=!1,cancelAnimationFrame(frame)}function invalidate(_,d=1){var v;if(!_)return _roots.forEach(A=>invalidate(A.store.getState(),d));(v=_.gl.xr)!=null&&v.isPresenting||!_.internal.active||_.frameloop==="never"||(d>1?_.internal.frames=Math.min(60,_.internal.frames+d):useFrameInProgress?_.internal.frames=2:_.internal.frames=1,running||(running=!0,requestAnimationFrame(loop$1)))}function advance(_,d=!0,v,A){if(d&&flushGlobalEffects("before",_),v)update$1(_,v,A);else for(const C of _roots.values())update$1(_,C.store.getState());d&&flushGlobalEffects("after",_)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(_){const{handlePointer:d}=createEvents(_);return{priority:1,enabled:!0,compute(v,A,C){A.pointer.set(v.offsetX/A.size.width*2-1,-(v.offsetY/A.size.height)*2+1),A.raycaster.setFromCamera(A.pointer,A.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((v,A)=>({...v,[A]:d(A)}),{}),update:()=>{var v;const{events:A,internal:C}=_.getState();(v=C.lastEvent)!=null&&v.current&&A.handlers&&A.handlers.onPointerMove(C.lastEvent.current)},connect:v=>{const{set:A,events:C}=_.getState();if(C.disconnect==null||C.disconnect(),A(w=>({events:{...w.events,connected:v}})),C.handlers)for(const w in C.handlers){const T=C.handlers[w],[R,G]=DOM_EVENTS[w];v.addEventListener(R,T,{passive:G})}},disconnect:()=>{const{set:v,events:A}=_.getState();if(A.connected){if(A.handlers)for(const C in A.handlers){const w=A.handlers[C],[T]=DOM_EVENTS[C];A.connected.removeEventListener(T,w)}v(C=>({events:{...C.events,connected:void 0}}))}}}}function g$1(_,d){let v;return(...A)=>{window.clearTimeout(v),v=window.setTimeout(()=>_(...A),d)}}function j({debounce:_,scroll:d,polyfill:v,offsetSize:A}={debounce:0,scroll:!1,offsetSize:!1}){const C=v||(typeof window>"u"?class{}:window.ResizeObserver);if(!C)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[w,T]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),R=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:w,orientationHandler:null}),G=_?typeof _=="number"?_:_.scroll:null,I=_?typeof _=="number"?_:_.resize:null,z=reactExports.useRef(!1);reactExports.useEffect(()=>(z.current=!0,()=>void(z.current=!1)));const[H,Y,ee]=reactExports.useMemo(()=>{const re=()=>{if(!R.current.element)return;const{left:fe,top:ue,width:ge,height:ye,bottom:be,right:ve,x:Me,y:we}=R.current.element.getBoundingClientRect(),Be={left:fe,top:ue,width:ge,height:ye,bottom:be,right:ve,x:Me,y:we};R.current.element instanceof HTMLElement&&A&&(Be.height=R.current.element.offsetHeight,Be.width=R.current.element.offsetWidth),Object.freeze(Be),z.current&&!D$1(R.current.lastBounds,Be)&&T(R.current.lastBounds=Be)};return[re,I?g$1(re,I):re,G?g$1(re,G):re]},[T,A,G,I]);function ie(){R.current.scrollContainers&&(R.current.scrollContainers.forEach(re=>re.removeEventListener("scroll",ee,!0)),R.current.scrollContainers=null),R.current.resizeObserver&&(R.current.resizeObserver.disconnect(),R.current.resizeObserver=null),R.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",R.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",R.current.orientationHandler))}function oe(){R.current.element&&(R.current.resizeObserver=new C(ee),R.current.resizeObserver.observe(R.current.element),d&&R.current.scrollContainers&&R.current.scrollContainers.forEach(re=>re.addEventListener("scroll",ee,{capture:!0,passive:!0})),R.current.orientationHandler=()=>{ee()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",R.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",R.current.orientationHandler))}const se=re=>{!re||re===R.current.element||(ie(),R.current.element=re,R.current.scrollContainers=E$1(re),oe())};return X$1(ee,!!d),W(Y),reactExports.useEffect(()=>{ie(),oe()},[d,ee,Y]),reactExports.useEffect(()=>ie,[]),[se,w,H]}function W(_){reactExports.useEffect(()=>{const d=_;return window.addEventListener("resize",d),()=>void window.removeEventListener("resize",d)},[_])}function X$1(_,d){reactExports.useEffect(()=>{if(d){const v=_;return window.addEventListener("scroll",v,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",v,!0)}},[_,d])}function E$1(_){const d=[];if(!_||_===document.body)return d;const{overflow:v,overflowX:A,overflowY:C}=window.getComputedStyle(_);return[v,A,C].some(w=>w==="auto"||w==="scroll")&&d.push(_),[...d,...E$1(_.parentElement)]}const k=["x","y","top","bottom","left","right","width","height"],D$1=(_,d)=>k.every(v=>_[v]===d[v]);function CanvasImpl({ref:_,children:d,fallback:v,resize:A,style:C,gl:w,events:T=createPointerEvents,eventSource:R,eventPrefix:G,shadows:I,linear:z,flat:H,legacy:Y,orthographic:ee,frameloop:ie,dpr:oe,performance:se,raycaster:re,camera:fe,scene:ue,onPointerMissed:ge,onCreated:ye,...be}){reactExports.useMemo(()=>extend$3(THREE),[]);const ve=useBridge(),[Me,we]=j({scroll:!0,debounce:{scroll:50,resize:0},...A}),Be=reactExports.useRef(null),De=reactExports.useRef(null);reactExports.useImperativeHandle(_,()=>Be.current);const Fe=useMutableCallback(ge),[Oe,Ge]=reactExports.useState(!1),[ze,je]=reactExports.useState(!1);if(Oe)throw Oe;if(ze)throw ze;const He=reactExports.useRef(null);useIsomorphicLayoutEffect$1(()=>{const $e=Be.current;if(we.width>0&&we.height>0&&$e){He.current||(He.current=createRoot($e));async function We(){await He.current.configure({gl:w,scene:ue,events:T,shadows:I,linear:z,flat:H,legacy:Y,orthographic:ee,frameloop:ie,dpr:oe,performance:se,raycaster:re,camera:fe,size:we,onPointerMissed:(...nt)=>Fe.current==null?void 0:Fe.current(...nt),onCreated:nt=>{nt.events.connect==null||nt.events.connect(R?isRef$1(R)?R.current:R:De.current),G&&nt.setEvents({compute:(Qt,Wt)=>{const Bn=Qt[G+"X"],Lt=Qt[G+"Y"];Wt.pointer.set(Bn/Wt.size.width*2-1,-(Lt/Wt.size.height)*2+1),Wt.raycaster.setFromCamera(Wt.pointer,Wt.camera)}}),ye?.(nt)}}),He.current.render(jsxRuntimeExports.jsx(ve,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:je,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Ge}),children:d??null})})}))}We()}}),reactExports.useEffect(()=>{const $e=Be.current;if($e)return()=>unmountComponentAtNode($e)},[]);const Xe=R?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:De,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Xe,...C},...be,children:jsxRuntimeExports.jsx("div",{ref:Me,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Be,style:{display:"block"},children:v})})})}function Canvas(_){return jsxRuntimeExports.jsx(m,{children:jsxRuntimeExports.jsx(CanvasImpl,{..._})})}const createStoreImpl=_=>{let d;const v=new Set,A=(I,z)=>{const H=typeof I=="function"?I(d):I;if(!Object.is(H,d)){const Y=d;d=z??(typeof H!="object"||H===null)?H:Object.assign({},d,H),v.forEach(ee=>ee(d,Y))}},C=()=>d,R={setState:A,getState:C,getInitialState:()=>G,subscribe:I=>(v.add(I),()=>v.delete(I))},G=d=_(A,C,R);return R},createStore=_=>_?createStoreImpl(_):createStoreImpl,identity$1=_=>_;function useStore(_,d=identity$1){const v=React.useSyncExternalStore(_.subscribe,()=>d(_.getState()),()=>d(_.getInitialState()));return React.useDebugValue(v),v}const createImpl=_=>{const d=createStore(_),v=A=>useStore(d,A);return Object.assign(v,d),v},create=_=>_?createImpl(_):createImpl;let saveLastTotalLoaded=0;const useProgress=create(_=>(DefaultLoadingManager.onStart=(d,v,A)=>{_({active:!0,item:d,loaded:v,total:A,progress:(v-saveLastTotalLoaded)/(A-saveLastTotalLoaded)*100})},DefaultLoadingManager.onLoad=()=>{_({active:!1})},DefaultLoadingManager.onError=d=>_(v=>({errors:[...v.errors,d]})),DefaultLoadingManager.onProgress=(d,v,A)=>{v===A&&(saveLastTotalLoaded=A),_({active:!0,item:d,loaded:v,total:A,progress:(v-saveLastTotalLoaded)/(A-saveLastTotalLoaded)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function clamp$1(_,d,v){return Math.max(d,Math.min(_,v))}const V$1={toVector(_,d){return _===void 0&&(_=d),Array.isArray(_)?_:[_,_]},add(_,d){return[_[0]+d[0],_[1]+d[1]]},sub(_,d){return[_[0]-d[0],_[1]-d[1]]},addTo(_,d){_[0]+=d[0],_[1]+=d[1]},subTo(_,d){_[0]-=d[0],_[1]-=d[1]}};function rubberband(_,d,v){return d===0||Math.abs(d)===1/0?Math.pow(_,v*5):_*d*v/(d+v*_)}function rubberbandIfOutOfBounds(_,d,v,A=.15){return A===0?clamp$1(_,d,v):_<d?-rubberband(d-_,v-d,A)+d:_>v?+rubberband(_-v,v-d,A)+v:_}function computeRubberband(_,[d,v],[A,C]){const[[w,T],[R,G]]=_;return[rubberbandIfOutOfBounds(d,w,T,A),rubberbandIfOutOfBounds(v,R,G,C)]}function _toPrimitive(_,d){if(typeof _!="object"||_===null)return _;var v=_[Symbol.toPrimitive];if(v!==void 0){var A=v.call(_,d);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(_)}function _toPropertyKey(_){var d=_toPrimitive(_,"string");return typeof d=="symbol"?d:String(d)}function _defineProperty$1(_,d,v){return d=_toPropertyKey(d),d in _?Object.defineProperty(_,d,{value:v,enumerable:!0,configurable:!0,writable:!0}):_[d]=v,_}function ownKeys(_,d){var v=Object.keys(_);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(_);d&&(A=A.filter(function(C){return Object.getOwnPropertyDescriptor(_,C).enumerable})),v.push.apply(v,A)}return v}function _objectSpread2(_){for(var d=1;d<arguments.length;d++){var v=arguments[d]!=null?arguments[d]:{};d%2?ownKeys(Object(v),!0).forEach(function(A){_defineProperty$1(_,A,v[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(v)):ownKeys(Object(v)).forEach(function(A){Object.defineProperty(_,A,Object.getOwnPropertyDescriptor(v,A))})}return _}const EVENT_TYPE_MAP={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function capitalize(_){return _?_[0].toUpperCase()+_.slice(1):""}const actionsWithoutCaptureSupported=["enter","leave"];function hasCapture(_=!1,d){return _&&!actionsWithoutCaptureSupported.includes(d)}function toHandlerProp(_,d="",v=!1){const A=EVENT_TYPE_MAP[_],C=A&&A[d]||d;return"on"+capitalize(_)+capitalize(C)+(hasCapture(v,C)?"Capture":"")}const pointerCaptureEvents=["gotpointercapture","lostpointercapture"];function parseProp(_){let d=_.substring(2).toLowerCase();const v=!!~d.indexOf("passive");v&&(d=d.replace("passive",""));const A=pointerCaptureEvents.includes(d)?"capturecapture":"capture",C=!!~d.indexOf(A);return C&&(d=d.replace("capture","")),{device:d,capture:C,passive:v}}function toDomEventType(_,d=""){const v=EVENT_TYPE_MAP[_],A=v&&v[d]||d;return _+A}function isTouch(_){return"touches"in _}function getPointerType(_){return isTouch(_)?"touch":"pointerType"in _?_.pointerType:"mouse"}function getCurrentTargetTouchList(_){return Array.from(_.touches).filter(d=>{var v,A;return d.target===_.currentTarget||((v=_.currentTarget)===null||v===void 0||(A=v.contains)===null||A===void 0?void 0:A.call(v,d.target))})}function getTouchList(_){return _.type==="touchend"||_.type==="touchcancel"?_.changedTouches:_.targetTouches}function getValueEvent(_){return isTouch(_)?getTouchList(_)[0]:_}function distanceAngle(_,d){try{const v=d.clientX-_.clientX,A=d.clientY-_.clientY,C=(d.clientX+_.clientX)/2,w=(d.clientY+_.clientY)/2,T=Math.hypot(v,A);return{angle:-(Math.atan2(v,A)*180)/Math.PI,distance:T,origin:[C,w]}}catch{}return null}function touchIds(_){return getCurrentTargetTouchList(_).map(d=>d.identifier)}function touchDistanceAngle(_,d){const[v,A]=Array.from(_.touches).filter(C=>d.includes(C.identifier));return distanceAngle(v,A)}function pointerId(_){const d=getValueEvent(_);return isTouch(_)?d.identifier:d.pointerId}function pointerValues(_){const d=getValueEvent(_);return[d.clientX,d.clientY]}const LINE_HEIGHT=40,PAGE_HEIGHT=800;function wheelValues(_){let{deltaX:d,deltaY:v,deltaMode:A}=_;return A===1?(d*=LINE_HEIGHT,v*=LINE_HEIGHT):A===2&&(d*=PAGE_HEIGHT,v*=PAGE_HEIGHT),[d,v]}function scrollValues(_){var d,v;const{scrollX:A,scrollY:C,scrollLeft:w,scrollTop:T}=_.currentTarget;return[(d=A??w)!==null&&d!==void 0?d:0,(v=C??T)!==null&&v!==void 0?v:0]}function getEventDetails(_){const d={};if("buttons"in _&&(d.buttons=_.buttons),"shiftKey"in _){const{shiftKey:v,altKey:A,metaKey:C,ctrlKey:w}=_;Object.assign(d,{shiftKey:v,altKey:A,metaKey:C,ctrlKey:w})}return d}function call(_,...d){return typeof _=="function"?_(...d):_}function noop(){}function chain(..._){return _.length===0?noop:_.length===1?_[0]:function(){let d;for(const v of _)d=v.apply(this,arguments)||d;return d}}function assignDefault(_,d){return Object.assign({},d,_||{})}const BEFORE_LAST_KINEMATICS_DELAY=32;class Engine{constructor(d,v,A){this.ctrl=d,this.args=v,this.key=A,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(d){this.ctrl.state[this.key]=d}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:d,shared:v,ingKey:A,args:C}=this;v[A]=d._active=d.active=d._blocked=d._force=!1,d._step=[!1,!1],d.intentional=!1,d._movement=[0,0],d._distance=[0,0],d._direction=[0,0],d._delta=[0,0],d._bounds=[[-1/0,1/0],[-1/0,1/0]],d.args=C,d.axis=void 0,d.memo=void 0,d.elapsedTime=d.timeDelta=0,d.direction=[0,0],d.distance=[0,0],d.overflow=[0,0],d._movementBound=[!1,!1],d.velocity=[0,0],d.movement=[0,0],d.delta=[0,0],d.timeStamp=0}start(d){const v=this.state,A=this.config;v._active||(this.reset(),this.computeInitial(),v._active=!0,v.target=d.target,v.currentTarget=d.currentTarget,v.lastOffset=A.from?call(A.from,v):v.offset,v.offset=v.lastOffset,v.startTime=v.timeStamp=d.timeStamp)}computeValues(d){const v=this.state;v._values=d,v.values=this.config.transform(d)}computeInitial(){const d=this.state;d._initial=d._values,d.initial=d.values}compute(d){const{state:v,config:A,shared:C}=this;v.args=this.args;let w=0;if(d&&(v.event=d,A.preventDefault&&d.cancelable&&v.event.preventDefault(),v.type=d.type,C.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,C.locked=!!document.pointerLockElement,Object.assign(C,getEventDetails(d)),C.down=C.pressed=C.buttons%2===1||C.touches>0,w=d.timeStamp-v.timeStamp,v.timeStamp=d.timeStamp,v.elapsedTime=v.timeStamp-v.startTime),v._active){const be=v._delta.map(Math.abs);V$1.addTo(v._distance,be)}this.axisIntent&&this.axisIntent(d);const[T,R]=v._movement,[G,I]=A.threshold,{_step:z,values:H}=v;if(A.hasCustomTransform?(z[0]===!1&&(z[0]=Math.abs(T)>=G&&H[0]),z[1]===!1&&(z[1]=Math.abs(R)>=I&&H[1])):(z[0]===!1&&(z[0]=Math.abs(T)>=G&&Math.sign(T)*G),z[1]===!1&&(z[1]=Math.abs(R)>=I&&Math.sign(R)*I)),v.intentional=z[0]!==!1||z[1]!==!1,!v.intentional)return;const Y=[0,0];if(A.hasCustomTransform){const[be,ve]=H;Y[0]=z[0]!==!1?be-z[0]:0,Y[1]=z[1]!==!1?ve-z[1]:0}else Y[0]=z[0]!==!1?T-z[0]:0,Y[1]=z[1]!==!1?R-z[1]:0;this.restrictToAxis&&!v._blocked&&this.restrictToAxis(Y);const ee=v.offset,ie=v._active&&!v._blocked||v.active;ie&&(v.first=v._active&&!v.active,v.last=!v._active&&v.active,v.active=C[this.ingKey]=v._active,d&&(v.first&&("bounds"in A&&(v._bounds=call(A.bounds,v)),this.setup&&this.setup()),v.movement=Y,this.computeOffset()));const[oe,se]=v.offset,[[re,fe],[ue,ge]]=v._bounds;v.overflow=[oe<re?-1:oe>fe?1:0,se<ue?-1:se>ge?1:0],v._movementBound[0]=v.overflow[0]?v._movementBound[0]===!1?v._movement[0]:v._movementBound[0]:!1,v._movementBound[1]=v.overflow[1]?v._movementBound[1]===!1?v._movement[1]:v._movementBound[1]:!1;const ye=v._active?A.rubberband||[0,0]:[0,0];if(v.offset=computeRubberband(v._bounds,v.offset,ye),v.delta=V$1.sub(v.offset,ee),this.computeMovement(),ie&&(!v.last||w>BEFORE_LAST_KINEMATICS_DELAY)){v.delta=V$1.sub(v.offset,ee);const be=v.delta.map(Math.abs);V$1.addTo(v.distance,be),v.direction=v.delta.map(Math.sign),v._direction=v._delta.map(Math.sign),!v.first&&w>0&&(v.velocity=[be[0]/w,be[1]/w],v.timeDelta=w)}}emit(){const d=this.state,v=this.shared,A=this.config;if(d._active||this.clean(),(d._blocked||!d.intentional)&&!d._force&&!A.triggerAllEvents)return;const C=this.handler(_objectSpread2(_objectSpread2(_objectSpread2({},v),d),{},{[this.aliasKey]:d.values}));C!==void 0&&(d.memo=C)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function selectAxis([_,d],v){const A=Math.abs(_),C=Math.abs(d);if(A>C&&A>v)return"x";if(C>A&&C>v)return"y"}class CoordinatesEngine extends Engine{constructor(...d){super(...d),_defineProperty$1(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=V$1.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=V$1.sub(this.state.offset,this.state.lastOffset)}axisIntent(d){const v=this.state,A=this.config;if(!v.axis&&d){const C=typeof A.axisThreshold=="object"?A.axisThreshold[getPointerType(d)]:A.axisThreshold;v.axis=selectAxis(v._movement,C)}v._blocked=(A.lockDirection||!!A.axis)&&!v.axis||!!A.axis&&A.axis!==v.axis}restrictToAxis(d){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":d[1]=0;break;case"y":d[0]=0;break}}}const identity=_=>_,DEFAULT_RUBBERBAND=.15,commonConfigResolver={enabled(_=!0){return _},eventOptions(_,d,v){return _objectSpread2(_objectSpread2({},v.shared.eventOptions),_)},preventDefault(_=!1){return _},triggerAllEvents(_=!1){return _},rubberband(_=0){switch(_){case!0:return[DEFAULT_RUBBERBAND,DEFAULT_RUBBERBAND];case!1:return[0,0];default:return V$1.toVector(_)}},from(_){if(typeof _=="function")return _;if(_!=null)return V$1.toVector(_)},transform(_,d,v){const A=_||v.shared.transform;return this.hasCustomTransform=!!A,A||identity},threshold(_){return V$1.toVector(_,0)}},DEFAULT_AXIS_THRESHOLD=0,coordinatesConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{axis(_,d,{axis:v}){if(this.lockDirection=v==="lock",!this.lockDirection)return v},axisThreshold(_=DEFAULT_AXIS_THRESHOLD){return _},bounds(_={}){if(typeof _=="function")return w=>coordinatesConfigResolver.bounds(_(w));if("current"in _)return()=>_.current;if(typeof HTMLElement=="function"&&_ instanceof HTMLElement)return _;const{left:d=-1/0,right:v=1/0,top:A=-1/0,bottom:C=1/0}=_;return[[d,v],[A,C]]}}),KEYS_DELTA_MAP={ArrowRight:(_,d=1)=>[_*d,0],ArrowLeft:(_,d=1)=>[-1*_*d,0],ArrowUp:(_,d=1)=>[0,-1*_*d],ArrowDown:(_,d=1)=>[0,_*d]};class DragEngine extends CoordinatesEngine{constructor(...d){super(...d),_defineProperty$1(this,"ingKey","dragging")}reset(){super.reset();const d=this.state;d._pointerId=void 0,d._pointerActive=!1,d._keyboardActive=!1,d._preventScroll=!1,d._delayed=!1,d.swipe=[0,0],d.tap=!1,d.canceled=!1,d.cancel=this.cancel.bind(this)}setup(){const d=this.state;if(d._bounds instanceof HTMLElement){const v=d._bounds.getBoundingClientRect(),A=d.currentTarget.getBoundingClientRect(),C={left:v.left-A.left+d.offset[0],right:v.right-A.right+d.offset[0],top:v.top-A.top+d.offset[1],bottom:v.bottom-A.bottom+d.offset[1]};d._bounds=coordinatesConfigResolver.bounds(C)}}cancel(){const d=this.state;d.canceled||(d.canceled=!0,d._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(d){const v=this.config,A=this.state;if(d.buttons!=null&&(Array.isArray(v.pointerButtons)?!v.pointerButtons.includes(d.buttons):v.pointerButtons!==-1&&v.pointerButtons!==d.buttons))return;const C=this.ctrl.setEventIds(d);v.pointerCapture&&d.target.setPointerCapture(d.pointerId),!(C&&C.size>1&&A._pointerActive)&&(this.start(d),this.setupPointer(d),A._pointerId=pointerId(d),A._pointerActive=!0,this.computeValues(pointerValues(d)),this.computeInitial(),v.preventScrollAxis&&getPointerType(d)!=="mouse"?(A._active=!1,this.setupScrollPrevention(d)):v.delay>0?(this.setupDelayTrigger(d),v.triggerAllEvents&&(this.compute(d),this.emit())):this.startPointerDrag(d))}startPointerDrag(d){const v=this.state;v._active=!0,v._preventScroll=!0,v._delayed=!1,this.compute(d),this.emit()}pointerMove(d){const v=this.state,A=this.config;if(!v._pointerActive)return;const C=pointerId(d);if(v._pointerId!==void 0&&C!==v._pointerId)return;const w=pointerValues(d);if(document.pointerLockElement===d.target?v._delta=[d.movementX,d.movementY]:(v._delta=V$1.sub(w,v._values),this.computeValues(w)),V$1.addTo(v._movement,v._delta),this.compute(d),v._delayed&&v.intentional){this.timeoutStore.remove("dragDelay"),v.active=!1,this.startPointerDrag(d);return}if(A.preventScrollAxis&&!v._preventScroll)if(v.axis)if(v.axis===A.preventScrollAxis||A.preventScrollAxis==="xy"){v._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(d);return}else return;this.emit()}pointerUp(d){this.ctrl.setEventIds(d);try{this.config.pointerCapture&&d.target.hasPointerCapture(d.pointerId)&&d.target.releasePointerCapture(d.pointerId)}catch{}const v=this.state,A=this.config;if(!v._active||!v._pointerActive)return;const C=pointerId(d);if(v._pointerId!==void 0&&C!==v._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(d);const[w,T]=v._distance;if(v.tap=w<=A.tapsThreshold&&T<=A.tapsThreshold,v.tap&&A.filterTaps)v._force=!0;else{const[R,G]=v._delta,[I,z]=v._movement,[H,Y]=A.swipe.velocity,[ee,ie]=A.swipe.distance,oe=A.swipe.duration;if(v.elapsedTime<oe){const se=Math.abs(R/v.timeDelta),re=Math.abs(G/v.timeDelta);se>H&&Math.abs(I)>ee&&(v.swipe[0]=Math.sign(R)),re>Y&&Math.abs(z)>ie&&(v.swipe[1]=Math.sign(G))}}this.emit()}pointerClick(d){!this.state.tap&&d.detail>0&&(d.preventDefault(),d.stopPropagation())}setupPointer(d){const v=this.config,A=v.device;v.pointerLock&&d.currentTarget.requestPointerLock(),v.pointerCapture||(this.eventStore.add(this.sharedConfig.window,A,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,A,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,A,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(d){this.state._preventScroll&&d.cancelable&&d.preventDefault()}setupScrollPrevention(d){this.state._preventScroll=!1,persistEvent(d);const v=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",v),this.eventStore.add(this.sharedConfig.window,"touch","cancel",v),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,d)}setupDelayTrigger(d){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(d)},this.config.delay)}keyDown(d){const v=KEYS_DELTA_MAP[d.key];if(v){const A=this.state,C=d.shiftKey?10:d.altKey?.1:1;this.start(d),A._delta=v(this.config.keyboardDisplacement,C),A._keyboardActive=!0,V$1.addTo(A._movement,A._delta),this.compute(d),this.emit()}}keyUp(d){d.key in KEYS_DELTA_MAP&&(this.state._keyboardActive=!1,this.setActive(),this.compute(d),this.emit())}bind(d){const v=this.config.device;d(v,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(d(v,"change",this.pointerMove.bind(this)),d(v,"end",this.pointerUp.bind(this)),d(v,"cancel",this.pointerUp.bind(this)),d("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(d("key","down",this.keyDown.bind(this)),d("key","up",this.keyUp.bind(this))),this.config.filterTaps&&d("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function persistEvent(_){"persist"in _&&typeof _.persist=="function"&&_.persist()}const isBrowser=typeof window<"u"&&window.document&&window.document.createElement;function supportsTouchEvents(){return isBrowser&&"ontouchstart"in window}function isTouchScreen(){return supportsTouchEvents()||isBrowser&&window.navigator.maxTouchPoints>1}function supportsPointerEvents(){return isBrowser&&"onpointerdown"in window}function supportsPointerLock(){return isBrowser&&"exitPointerLock"in window.document}function supportsGestureEvents(){try{return"constructor"in GestureEvent}catch{return!1}}const SUPPORT={isBrowser,gesture:supportsGestureEvents(),touch:supportsTouchEvents(),touchscreen:isTouchScreen(),pointer:supportsPointerEvents(),pointerLock:supportsPointerLock()},DEFAULT_PREVENT_SCROLL_DELAY=250,DEFAULT_DRAG_DELAY=180,DEFAULT_SWIPE_VELOCITY=.5,DEFAULT_SWIPE_DISTANCE=50,DEFAULT_SWIPE_DURATION=250,DEFAULT_KEYBOARD_DISPLACEMENT=10,DEFAULT_DRAG_AXIS_THRESHOLD={mouse:0,touch:0,pen:8},dragConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{device(_,d,{pointer:{touch:v=!1,lock:A=!1,mouse:C=!1}={}}){return this.pointerLock=A&&SUPPORT.pointerLock,SUPPORT.touch&&v?"touch":this.pointerLock?"mouse":SUPPORT.pointer&&!C?"pointer":SUPPORT.touch?"touch":"mouse"},preventScrollAxis(_,d,{preventScroll:v}){if(this.preventScrollDelay=typeof v=="number"?v:v||v===void 0&&_?DEFAULT_PREVENT_SCROLL_DELAY:void 0,!(!SUPPORT.touchscreen||v===!1))return _||(v!==void 0?"y":void 0)},pointerCapture(_,d,{pointer:{capture:v=!0,buttons:A=1,keys:C=!0}={}}){return this.pointerButtons=A,this.keys=C,!this.pointerLock&&this.device==="pointer"&&v},threshold(_,d,{filterTaps:v=!1,tapsThreshold:A=3,axis:C=void 0}){const w=V$1.toVector(_,v?A:C?1:0);return this.filterTaps=v,this.tapsThreshold=A,w},swipe({velocity:_=DEFAULT_SWIPE_VELOCITY,distance:d=DEFAULT_SWIPE_DISTANCE,duration:v=DEFAULT_SWIPE_DURATION}={}){return{velocity:this.transform(V$1.toVector(_)),distance:this.transform(V$1.toVector(d)),duration:v}},delay(_=0){switch(_){case!0:return DEFAULT_DRAG_DELAY;case!1:return 0;default:return _}},axisThreshold(_){return _?_objectSpread2(_objectSpread2({},DEFAULT_DRAG_AXIS_THRESHOLD),_):DEFAULT_DRAG_AXIS_THRESHOLD},keyboardDisplacement(_=DEFAULT_KEYBOARD_DISPLACEMENT){return _}});function clampStateInternalMovementToBounds(_){const[d,v]=_.overflow,[A,C]=_._delta,[w,T]=_._direction;(d<0&&A>0&&w<0||d>0&&A<0&&w>0)&&(_._movement[0]=_._movementBound[0]),(v<0&&C>0&&T<0||v>0&&C<0&&T>0)&&(_._movement[1]=_._movementBound[1])}const SCALE_ANGLE_RATIO_INTENT_DEG=30,PINCH_WHEEL_RATIO=100;class PinchEngine extends Engine{constructor(...d){super(...d),_defineProperty$1(this,"ingKey","pinching"),_defineProperty$1(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const d=this.state;d._touchIds=[],d.canceled=!1,d.cancel=this.cancel.bind(this),d.turns=0}computeOffset(){const{type:d,movement:v,lastOffset:A}=this.state;d==="wheel"?this.state.offset=V$1.add(v,A):this.state.offset=[(1+v[0])*A[0],v[1]+A[1]]}computeMovement(){const{offset:d,lastOffset:v}=this.state;this.state.movement=[d[0]/v[0],d[1]-v[1]]}axisIntent(){const d=this.state,[v,A]=d._movement;if(!d.axis){const C=Math.abs(v)*SCALE_ANGLE_RATIO_INTENT_DEG-Math.abs(A);C<0?d.axis="angle":C>0&&(d.axis="scale")}}restrictToAxis(d){this.config.lockDirection&&(this.state.axis==="scale"?d[1]=0:this.state.axis==="angle"&&(d[0]=0))}cancel(){const d=this.state;d.canceled||setTimeout(()=>{d.canceled=!0,d._active=!1,this.compute(),this.emit()},0)}touchStart(d){this.ctrl.setEventIds(d);const v=this.state,A=this.ctrl.touchIds;if(v._active&&v._touchIds.every(w=>A.has(w))||A.size<2)return;this.start(d),v._touchIds=Array.from(A).slice(0,2);const C=touchDistanceAngle(d,v._touchIds);C&&this.pinchStart(d,C)}pointerStart(d){if(d.buttons!=null&&d.buttons%2!==1)return;this.ctrl.setEventIds(d),d.target.setPointerCapture(d.pointerId);const v=this.state,A=v._pointerEvents,C=this.ctrl.pointerIds;if(v._active&&Array.from(A.keys()).every(T=>C.has(T))||(A.size<2&&A.set(d.pointerId,d),v._pointerEvents.size<2))return;this.start(d);const w=distanceAngle(...Array.from(A.values()));w&&this.pinchStart(d,w)}pinchStart(d,v){const A=this.state;A.origin=v.origin,this.computeValues([v.distance,v.angle]),this.computeInitial(),this.compute(d),this.emit()}touchMove(d){if(!this.state._active)return;const v=touchDistanceAngle(d,this.state._touchIds);v&&this.pinchMove(d,v)}pointerMove(d){const v=this.state._pointerEvents;if(v.has(d.pointerId)&&v.set(d.pointerId,d),!this.state._active)return;const A=distanceAngle(...Array.from(v.values()));A&&this.pinchMove(d,A)}pinchMove(d,v){const A=this.state,C=A._values[1],w=v.angle-C;let T=0;Math.abs(w)>270&&(T+=Math.sign(w)),this.computeValues([v.distance,v.angle-360*T]),A.origin=v.origin,A.turns=T,A._movement=[A._values[0]/A._initial[0]-1,A._values[1]-A._initial[1]],this.compute(d),this.emit()}touchEnd(d){this.ctrl.setEventIds(d),this.state._active&&this.state._touchIds.some(v=>!this.ctrl.touchIds.has(v))&&(this.state._active=!1,this.compute(d),this.emit())}pointerEnd(d){const v=this.state;this.ctrl.setEventIds(d);try{d.target.releasePointerCapture(d.pointerId)}catch{}v._pointerEvents.has(d.pointerId)&&v._pointerEvents.delete(d.pointerId),v._active&&v._pointerEvents.size<2&&(v._active=!1,this.compute(d),this.emit())}gestureStart(d){d.cancelable&&d.preventDefault();const v=this.state;v._active||(this.start(d),this.computeValues([d.scale,d.rotation]),v.origin=[d.clientX,d.clientY],this.compute(d),this.emit())}gestureMove(d){if(d.cancelable&&d.preventDefault(),!this.state._active)return;const v=this.state;this.computeValues([d.scale,d.rotation]),v.origin=[d.clientX,d.clientY];const A=v._movement;v._movement=[d.scale-1,d.rotation],v._delta=V$1.sub(v._movement,A),this.compute(d),this.emit()}gestureEnd(d){this.state._active&&(this.state._active=!1,this.compute(d),this.emit())}wheel(d){const v=this.config.modifierKey;v&&(Array.isArray(v)?!v.find(A=>d[A]):!d[v])||(this.state._active?this.wheelChange(d):this.wheelStart(d),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(d){this.start(d),this.wheelChange(d)}wheelChange(d){"uv"in d||d.cancelable&&d.preventDefault();const A=this.state;A._delta=[-wheelValues(d)[1]/PINCH_WHEEL_RATIO*A.offset[0],0],V$1.addTo(A._movement,A._delta),clampStateInternalMovementToBounds(A),this.state.origin=[d.clientX,d.clientY],this.compute(d),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(d){const v=this.config.device;v&&(d(v,"start",this[v+"Start"].bind(this)),d(v,"change",this[v+"Move"].bind(this)),d(v,"end",this[v+"End"].bind(this)),d(v,"cancel",this[v+"End"].bind(this)),d("lostPointerCapture","",this[v+"End"].bind(this))),this.config.pinchOnWheel&&d("wheel","",this.wheel.bind(this),{passive:!1})}}const pinchConfigResolver=_objectSpread2(_objectSpread2({},commonConfigResolver),{},{device(_,d,{shared:v,pointer:{touch:A=!1}={}}){if(v.target&&!SUPPORT.touch&&SUPPORT.gesture)return"gesture";if(SUPPORT.touch&&A)return"touch";if(SUPPORT.touchscreen){if(SUPPORT.pointer)return"pointer";if(SUPPORT.touch)return"touch"}},bounds(_,d,{scaleBounds:v={},angleBounds:A={}}){const C=T=>{const R=assignDefault(call(v,T),{min:-1/0,max:1/0});return[R.min,R.max]},w=T=>{const R=assignDefault(call(A,T),{min:-1/0,max:1/0});return[R.min,R.max]};return typeof v!="function"&&typeof A!="function"?[C(),w()]:T=>[C(T),w(T)]},threshold(_,d,v){return this.lockDirection=v.axis==="lock",V$1.toVector(_,this.lockDirection?[.1,3]:0)},modifierKey(_){return _===void 0?"ctrlKey":_},pinchOnWheel(_=!0){return _}});class MoveEngine extends CoordinatesEngine{constructor(...d){super(...d),_defineProperty$1(this,"ingKey","moving")}move(d){this.config.mouseOnly&&d.pointerType!=="mouse"||(this.state._active?this.moveChange(d):this.moveStart(d),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(d){this.start(d),this.computeValues(pointerValues(d)),this.compute(d),this.computeInitial(),this.emit()}moveChange(d){if(!this.state._active)return;const v=pointerValues(d),A=this.state;A._delta=V$1.sub(v,A._values),V$1.addTo(A._movement,A._delta),this.computeValues(v),this.compute(d),this.emit()}moveEnd(d){this.state._active&&(this.state._active=!1,this.compute(d),this.emit())}bind(d){d("pointer","change",this.move.bind(this)),d("pointer","leave",this.moveEnd.bind(this))}}const moveConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(_=!0)=>_});class ScrollEngine extends CoordinatesEngine{constructor(...d){super(...d),_defineProperty$1(this,"ingKey","scrolling")}scroll(d){this.state._active||this.start(d),this.scrollChange(d),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(d){d.cancelable&&d.preventDefault();const v=this.state,A=scrollValues(d);v._delta=V$1.sub(A,v._values),V$1.addTo(v._movement,v._delta),this.computeValues(A),this.compute(d),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(d){d("scroll","",this.scroll.bind(this))}}const scrollConfigResolver=coordinatesConfigResolver;class WheelEngine extends CoordinatesEngine{constructor(...d){super(...d),_defineProperty$1(this,"ingKey","wheeling")}wheel(d){this.state._active||this.start(d),this.wheelChange(d),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(d){const v=this.state;v._delta=wheelValues(d),V$1.addTo(v._movement,v._delta),clampStateInternalMovementToBounds(v),this.compute(d),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(d){d("wheel","",this.wheel.bind(this))}}const wheelConfigResolver=coordinatesConfigResolver;class HoverEngine extends CoordinatesEngine{constructor(...d){super(...d),_defineProperty$1(this,"ingKey","hovering")}enter(d){this.config.mouseOnly&&d.pointerType!=="mouse"||(this.start(d),this.computeValues(pointerValues(d)),this.compute(d),this.emit())}leave(d){if(this.config.mouseOnly&&d.pointerType!=="mouse")return;const v=this.state;if(!v._active)return;v._active=!1;const A=pointerValues(d);v._movement=v._delta=V$1.sub(A,v._values),this.computeValues(A),this.compute(d),v.delta=v.movement,this.emit()}bind(d){d("pointer","enter",this.enter.bind(this)),d("pointer","leave",this.leave.bind(this))}}const hoverConfigResolver=_objectSpread2(_objectSpread2({},coordinatesConfigResolver),{},{mouseOnly:(_=!0)=>_}),EngineMap=new Map,ConfigResolverMap=new Map;function registerAction(_){EngineMap.set(_.key,_.engine),ConfigResolverMap.set(_.key,_.resolver)}const dragAction={key:"drag",engine:DragEngine,resolver:dragConfigResolver},hoverAction={key:"hover",engine:HoverEngine,resolver:hoverConfigResolver},moveAction={key:"move",engine:MoveEngine,resolver:moveConfigResolver},pinchAction={key:"pinch",engine:PinchEngine,resolver:pinchConfigResolver},scrollAction={key:"scroll",engine:ScrollEngine,resolver:scrollConfigResolver},wheelAction={key:"wheel",engine:WheelEngine,resolver:wheelConfigResolver};function _objectWithoutPropertiesLoose(_,d){if(_==null)return{};var v={},A=Object.keys(_),C,w;for(w=0;w<A.length;w++)C=A[w],!(d.indexOf(C)>=0)&&(v[C]=_[C]);return v}function _objectWithoutProperties(_,d){if(_==null)return{};var v=_objectWithoutPropertiesLoose(_,d),A,C;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(_);for(C=0;C<w.length;C++)A=w[C],!(d.indexOf(A)>=0)&&Object.prototype.propertyIsEnumerable.call(_,A)&&(v[A]=_[A])}return v}const sharedConfigResolver={target(_){if(_)return()=>"current"in _?_.current:_},enabled(_=!0){return _},window(_=SUPPORT.isBrowser?window:void 0){return _},eventOptions({passive:_=!0,capture:d=!1}={}){return{passive:_,capture:d}},transform(_){return _}},_excluded=["target","eventOptions","window","enabled","transform"];function resolveWith(_={},d){const v={};for(const[A,C]of Object.entries(d))switch(typeof C){case"function":v[A]=C.call(v,_[A],A,_);break;case"object":v[A]=resolveWith(_[A],C);break;case"boolean":C&&(v[A]=_[A]);break}return v}function parse(_,d,v={}){const A=_,{target:C,eventOptions:w,window:T,enabled:R,transform:G}=A,I=_objectWithoutProperties(A,_excluded);if(v.shared=resolveWith({target:C,eventOptions:w,window:T,enabled:R,transform:G},sharedConfigResolver),d){const z=ConfigResolverMap.get(d);v[d]=resolveWith(_objectSpread2({shared:v.shared},I),z)}else for(const z in I){const H=ConfigResolverMap.get(z);H&&(v[z]=resolveWith(_objectSpread2({shared:v.shared},I[z]),H))}return v}class EventStore{constructor(d,v){_defineProperty$1(this,"_listeners",new Set),this._ctrl=d,this._gestureKey=v}add(d,v,A,C,w){const T=this._listeners,R=toDomEventType(v,A),G=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},I=_objectSpread2(_objectSpread2({},G),w);d.addEventListener(R,C,I);const z=()=>{d.removeEventListener(R,C,I),T.delete(z)};return T.add(z),z}clean(){this._listeners.forEach(d=>d()),this._listeners.clear()}}class TimeoutStore{constructor(){_defineProperty$1(this,"_timeouts",new Map)}add(d,v,A=140,...C){this.remove(d),this._timeouts.set(d,window.setTimeout(v,A,...C))}remove(d){const v=this._timeouts.get(d);v&&window.clearTimeout(v)}clean(){this._timeouts.forEach(d=>void window.clearTimeout(d)),this._timeouts.clear()}}class Controller{constructor(d){_defineProperty$1(this,"gestures",new Set),_defineProperty$1(this,"_targetEventStore",new EventStore(this)),_defineProperty$1(this,"gestureEventStores",{}),_defineProperty$1(this,"gestureTimeoutStores",{}),_defineProperty$1(this,"handlers",{}),_defineProperty$1(this,"config",{}),_defineProperty$1(this,"pointerIds",new Set),_defineProperty$1(this,"touchIds",new Set),_defineProperty$1(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),resolveGestures(this,d)}setEventIds(d){if(isTouch(d))return this.touchIds=new Set(touchIds(d)),this.touchIds;if("pointerId"in d)return d.type==="pointerup"||d.type==="pointercancel"?this.pointerIds.delete(d.pointerId):d.type==="pointerdown"&&this.pointerIds.add(d.pointerId),this.pointerIds}applyHandlers(d,v){this.handlers=d,this.nativeHandlers=v}applyConfig(d,v){this.config=parse(d,v,this.config)}clean(){this._targetEventStore.clean();for(const d of this.gestures)this.gestureEventStores[d].clean(),this.gestureTimeoutStores[d].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...d){const v=this.config.shared,A={};let C;if(!(v.target&&(C=v.target(),!C))){if(v.enabled){for(const T of this.gestures){const R=this.config[T],G=bindToProps(A,R.eventOptions,!!C);if(R.enabled){const I=EngineMap.get(T);new I(this,d,T).bind(G)}}const w=bindToProps(A,v.eventOptions,!!C);for(const T in this.nativeHandlers)w(T,"",R=>this.nativeHandlers[T](_objectSpread2(_objectSpread2({},this.state.shared),{},{event:R,args:d})),void 0,!0)}for(const w in A)A[w]=chain(...A[w]);if(!C)return A;for(const w in A){const{device:T,capture:R,passive:G}=parseProp(w);this._targetEventStore.add(C,T,"",A[w],{capture:R,passive:G})}}}}function setupGesture(_,d){_.gestures.add(d),_.gestureEventStores[d]=new EventStore(_,d),_.gestureTimeoutStores[d]=new TimeoutStore}function resolveGestures(_,d){d.drag&&setupGesture(_,"drag"),d.wheel&&setupGesture(_,"wheel"),d.scroll&&setupGesture(_,"scroll"),d.move&&setupGesture(_,"move"),d.pinch&&setupGesture(_,"pinch"),d.hover&&setupGesture(_,"hover")}const bindToProps=(_,d,v)=>(A,C,w,T={},R=!1)=>{var G,I;const z=(G=T.capture)!==null&&G!==void 0?G:d.capture,H=(I=T.passive)!==null&&I!==void 0?I:d.passive;let Y=R?A:toHandlerProp(A,C,z);v&&H&&(Y+="Passive"),_[Y]=_[Y]||[],_[Y].push(w)},RE_NOT_NATIVE=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function sortHandlers(_){const d={},v={},A=new Set;for(let C in _)RE_NOT_NATIVE.test(C)?(A.add(RegExp.lastMatch),v[C]=_[C]):d[C]=_[C];return[v,d,A]}function registerGesture(_,d,v,A,C,w){if(!_.has(v)||!EngineMap.has(A))return;const T=v+"Start",R=v+"End",G=I=>{let z;return I.first&&T in d&&d[T](I),v in d&&(z=d[v](I)),I.last&&R in d&&d[R](I),z};C[A]=G,w[A]=w[A]||{}}function parseMergedHandlers(_,d){const[v,A,C]=sortHandlers(_),w={};return registerGesture(C,v,"onDrag","drag",w,d),registerGesture(C,v,"onWheel","wheel",w,d),registerGesture(C,v,"onScroll","scroll",w,d),registerGesture(C,v,"onPinch","pinch",w,d),registerGesture(C,v,"onMove","move",w,d),registerGesture(C,v,"onHover","hover",w,d),{handlers:w,config:d,nativeHandlers:A}}function useRecognizers(_,d={},v,A){const C=React.useMemo(()=>new Controller(_),[]);if(C.applyHandlers(_,A),C.applyConfig(d,v),React.useEffect(C.effect.bind(C)),React.useEffect(()=>C.clean.bind(C),[]),d.target===void 0)return C.bind.bind(C)}function useDrag(_,d){return registerAction(dragAction),useRecognizers({drag:_},d||{},"drag")}function createUseGesture(_){return _.forEach(registerAction),function(v,A){const{handlers:C,nativeHandlers:w,config:T}=parseMergedHandlers(v,A||{});return useRecognizers(C,T,void 0,w)}}function useGesture(_,d){return createUseGesture([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(_,d||{})}function _defineProperty(_,d,v){return d in _?Object.defineProperty(_,d,{value:v,enumerable:!0,configurable:!0,writable:!0}):_[d]=v,_}function _arrayLikeToArray(_,d){(d==null||d>_.length)&&(d=_.length);for(var v=0,A=new Array(d);v<d;v++)A[v]=_[v];return A}function _unsupportedIterableToArray(_,d){if(_){if(typeof _=="string")return _arrayLikeToArray(_,d);var v=Object.prototype.toString.call(_).slice(8,-1);if(v==="Object"&&_.constructor&&(v=_.constructor.name),v==="Map"||v==="Set")return Array.from(_);if(v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v))return _arrayLikeToArray(_,d)}}function _arrayWithoutHoles(_){if(Array.isArray(_))return _arrayLikeToArray(_)}function _iterableToArray(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(_){return _arrayWithoutHoles(_)||_iterableToArray(_)||_unsupportedIterableToArray(_)||_nonIterableSpread()}new Vector2;new Vector2;function clamp(_,d,v){return Math.max(d,Math.min(v,_))}function repeat(_,d){return clamp(_-Math.floor(_/d)*d,0,d)}function deltaAngle(_,d){var v=repeat(d-_,Math.PI*2);return v>Math.PI&&(v-=Math.PI*2),v}function _classCallCheck(_,d){if(!(_ instanceof d))throw new TypeError("Cannot call a class as a function")}var Grad=function _(d,v,A){var C=this;_classCallCheck(this,_),_defineProperty(this,"dot2",function(w,T){return C.x*w+C.y*T}),_defineProperty(this,"dot3",function(w,T,R){return C.x*w+C.y*T+C.z*R}),this.x=d,this.y=v,this.z=A},grad3=[new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)],p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],perm=new Array(512),gradP=new Array(512),seed=function _(d){d>0&&d<1&&(d*=65536),d=Math.floor(d),d<256&&(d|=d<<8);for(var v=0;v<256;v++){var A;v&1?A=p[v]^d&255:A=p[v]^d>>8&255,perm[v]=perm[v+256]=A,gradP[v]=gradP[v+256]=grad3[A%12]}};seed(0);function normalizeSeed(_){if(typeof _=="number")_=Math.abs(_);else if(typeof _=="string"){var d=_;_=0;for(var v=0;v<d.length;v++)_=(_+(v+1)*(d.charCodeAt(v)%96))%2147483647}return _===0&&(_=311),_}function lcgRandom(_){var d=normalizeSeed(_);return function(){var v=d*48271%2147483647;return d=v,v/2147483647}}var Generator=function _(d){var v=this;_classCallCheck(this,_),_defineProperty(this,"seed",0),_defineProperty(this,"init",function(A){v.seed=A,v.value=lcgRandom(A)}),_defineProperty(this,"value",lcgRandom(this.seed)),this.init(d)};new Generator(Math.random());var rsqw=function _(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return A/Math.atan(1/v)*Math.atan(Math.sin(2*Math.PI*d*C)/v)},exp=function _(d){return 1/(1+d+.48*d*d+.235*d*d*d)},linear=function _(d){return d},sine={in:function _(d){return 1-Math.cos(d*Math.PI/2)},out:function _(d){return Math.sin(d*Math.PI/2)},inOut:function _(d){return-(Math.cos(Math.PI*d)-1)/2}},cubic={in:function _(d){return d*d*d},out:function _(d){return 1-Math.pow(1-d,3)},inOut:function _(d){return d<.5?4*d*d*d:1-Math.pow(-2*d+2,3)/2}},quint={in:function _(d){return d*d*d*d*d},out:function _(d){return 1-Math.pow(1-d,5)},inOut:function _(d){return d<.5?16*d*d*d*d*d:1-Math.pow(-2*d+2,5)/2}},circ={in:function _(d){return 1-Math.sqrt(1-Math.pow(d,2))},out:function _(d){return Math.sqrt(1-Math.pow(d-1,2))},inOut:function _(d){return d<.5?(1-Math.sqrt(1-Math.pow(2*d,2)))/2:(Math.sqrt(1-Math.pow(-2*d+2,2))+1)/2}},quart={in:function _(d){return d*d*d*d},out:function _(d){return 1- --d*d*d*d},inOut:function _(d){return d<.5?8*d*d*d*d:1-8*--d*d*d*d}},expo={in:function _(d){return d===0?0:Math.pow(2,10*d-10)},out:function _(d){return d===1?1:1-Math.pow(2,-10*d)},inOut:function _(d){return d===0?0:d===1?1:d<.5?Math.pow(2,20*d-10)/2:(2-Math.pow(2,-20*d+10))/2}};function damp(_,d,v){var A=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,C=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,w=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,T=arguments.length>6&&arguments[6]!==void 0?arguments[6]:exp,R=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,G="velocity_"+d;if(_.__damp===void 0&&(_.__damp={}),_.__damp[G]===void 0&&(_.__damp[G]=0),Math.abs(_[d]-v)<=R)return _[d]=v,!1;A=Math.max(1e-4,A);var I=2/A,z=T(I*C),H=_[d]-v,Y=v,ee=w*A;H=Math.min(Math.max(H,-ee),ee),v=_[d]-H;var ie=(_.__damp[G]+I*H)*C;_.__damp[G]=(_.__damp[G]-I*ie)*z;var oe=v+(H+ie)*z;return Y-_[d]>0==oe>Y&&(oe=Y,_.__damp[G]=(oe-Y)/C),_[d]=oe,!0}var isCamera=function _(d){return d&&d.isCamera},isLight=function _(d){return d&&d.isLight},vl3d=new Vector3,_q1=new Quaternion,_q2=new Quaternion,_m1=new Matrix4,_position=new Vector3;function dampLookAt(_,d,v,A,C,w,T){typeof d=="number"?vl3d.setScalar(d):Array.isArray(d)?vl3d.set(d[0],d[1],d[2]):vl3d.copy(d);var R=_.parent;_.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(_.matrixWorld),isCamera(_)||isLight(_)?_m1.lookAt(_position,vl3d,_.up):_m1.lookAt(vl3d,_position,_.up),dampQ(_.quaternion,_q2.setFromRotationMatrix(_m1),v,A,C,w,T),R&&(_m1.extractRotation(R.matrixWorld),_q1.setFromRotationMatrix(_m1),dampQ(_.quaternion,_q2.copy(_.quaternion).premultiply(_q1.invert()),v,A,C,w,T))}function dampAngle(_,d,v,A,C,w,T,R){return damp(_,d,_[d]+deltaAngle(_[d],v),A,C,w,T,R)}var v2d=new Vector2,a2,b2;function damp2(_,d,v,A,C,w,T){return typeof d=="number"?v2d.setScalar(d):Array.isArray(d)?v2d.set(d[0],d[1]):v2d.copy(d),a2=damp(_,"x",v2d.x,v,A,C,w,T),b2=damp(_,"y",v2d.y,v,A,C,w,T),a2||b2}var v3d=new Vector3,a3,b3,c3;function damp3(_,d,v,A,C,w,T){return typeof d=="number"?v3d.setScalar(d):Array.isArray(d)?v3d.set(d[0],d[1],d[2]):v3d.copy(d),a3=damp(_,"x",v3d.x,v,A,C,w,T),b3=damp(_,"y",v3d.y,v,A,C,w,T),c3=damp(_,"z",v3d.z,v,A,C,w,T),a3||b3||c3}var v4d=new Vector4,a4,b4,c4,d4;function damp4(_,d,v,A,C,w,T){return typeof d=="number"?v4d.setScalar(d):Array.isArray(d)?v4d.set(d[0],d[1],d[2],d[3]):v4d.copy(d),a4=damp(_,"x",v4d.x,v,A,C,w,T),b4=damp(_,"y",v4d.y,v,A,C,w,T),c4=damp(_,"z",v4d.z,v,A,C,w,T),d4=damp(_,"w",v4d.w,v,A,C,w,T),a4||b4||c4||d4}var rot=new Euler,aE,bE,cE;function dampE(_,d,v,A,C,w,T){return Array.isArray(d)?rot.set(d[0],d[1],d[2],d[3]):rot.copy(d),aE=dampAngle(_,"x",rot.x,v,A,C,w,T),bE=dampAngle(_,"y",rot.y,v,A,C,w,T),cE=dampAngle(_,"z",rot.z,v,A,C,w,T),aE||bE||cE}var col=new Color,aC,bC,cC;function dampC(_,d,v,A,C,w,T){return d instanceof Color?col.copy(d):Array.isArray(d)?col.setRGB(d[0],d[1],d[2]):col.set(d),aC=damp(_,"r",col.r,v,A,C,w,T),bC=damp(_,"g",col.g,v,A,C,w,T),cC=damp(_,"b",col.b,v,A,C,w,T),aC||bC||cC}var qt=new Quaternion,v4result=new Vector4,v4velocity=new Vector4,v4error=new Vector4,aQ,bQ,cQ,dQ;function dampQ(_,d,v,A,C,w,T){var R=_;Array.isArray(d)?qt.set(d[0],d[1],d[2],d[3]):qt.copy(d);var G=_.dot(qt)>0?1:-1;return qt.x*=G,qt.y*=G,qt.z*=G,qt.w*=G,aQ=damp(_,"x",qt.x,v,A,C,w,T),bQ=damp(_,"y",qt.y,v,A,C,w,T),cQ=damp(_,"z",qt.z,v,A,C,w,T),dQ=damp(_,"w",qt.w,v,A,C,w,T),v4result.set(_.x,_.y,_.z,_.w).normalize(),v4velocity.set(R.__damp.velocity_x,R.__damp.velocity_y,R.__damp.velocity_z,R.__damp.velocity_w),v4error.copy(v4result).multiplyScalar(v4velocity.dot(v4result)/v4result.dot(v4result)),R.__damp.velocity_x-=v4error.x,R.__damp.velocity_y-=v4error.y,R.__damp.velocity_z-=v4error.z,R.__damp.velocity_w-=v4error.w,_.set(v4result.x,v4result.y,v4result.z,v4result.w),aQ||bQ||cQ||dQ}var spherical=new Spherical,aS,bS,cS;function dampS(_,d,v,A,C,w,T){return Array.isArray(d)?spherical.set(d[0],d[1],d[2]):spherical.copy(d),aS=damp(_,"radius",spherical.radius,v,A,C,w,T),bS=dampAngle(_,"phi",spherical.phi,v,A,C,w,T),cS=dampAngle(_,"theta",spherical.theta,v,A,C,w,T),aS||bS||cS}var mat=new Matrix4,mPos=new Vector3,mRot=new Quaternion,mSca=new Vector3,aM,bM,cM;function dampM(_,d,v,A,C,w,T){var R=_;return R.__damp===void 0&&(R.__damp={position:new Vector3,rotation:new Quaternion,scale:new Vector3},_.decompose(R.__damp.position,R.__damp.rotation,R.__damp.scale)),Array.isArray(d)?mat.set.apply(mat,_toConsumableArray(d)):mat.copy(d),mat.decompose(mPos,mRot,mSca),aM=damp3(R.__damp.position,mPos,v,A,C,w,T),bM=dampQ(R.__damp.rotation,mRot,v,A,C,w,T),cM=damp3(R.__damp.scale,mSca,v,A,C,w,T),_.compose(R.__damp.position,R.__damp.rotation,R.__damp.scale),aM||bM||cM}var easing=Object.freeze({__proto__:null,rsqw,exp,linear,sine,cubic,quint,circ,quart,expo,damp,dampLookAt,dampAngle,damp2,damp3,damp4,dampE,dampC,dampQ,dampS,dampM});function PresentationControls({enabled:_=!0,snap:d,global:v,domElement:A,cursor:C=!0,children:w,speed:T=1,rotation:R=[0,0,0],zoom:G=1,polar:I=[0,Math.PI/2],azimuth:z=[-1/0,1/0],damping:H=.25}){const Y=useThree(be=>be.events),ee=useThree(be=>be.gl),ie=A||Y.connected||ee.domElement,{size:oe}=useThree(),se=reactExports.useMemo(()=>[R[0]+I[0],R[0]+I[1]],[R[0],I[0],I[1]]),re=reactExports.useMemo(()=>[R[1]+z[0],R[1]+z[1]],[R[1],z[0],z[1]]),fe=reactExports.useMemo(()=>[MathUtils.clamp(R[0],...se),MathUtils.clamp(R[1],...re),R[2]],[R[0],R[1],R[2],se,re]);reactExports.useEffect(()=>{if(v&&C&&_)return ie.style.cursor="grab",ee.domElement.style.cursor="",()=>{ie.style.cursor="default",ee.domElement.style.cursor="default"}},[v,C,ie,_]);const[ue]=reactExports.useState({scale:1,rotation:fe,damping:H}),ge=reactExports.useRef(null);useFrame((be,ve)=>{easing.damp3(ge.current.scale,ue.scale,ue.damping,ve),easing.dampE(ge.current.rotation,ue.rotation,ue.damping,ve)});const ye=useGesture({onHover:({last:be})=>{C&&!v&&_&&(ie.style.cursor=be?"auto":"grab")},onDrag:({down:be,delta:[ve,Me],memo:[we,Be]=ue.rotation||fe})=>_?(C&&(ie.style.cursor=be?"grabbing":"grab"),ve=MathUtils.clamp(Be+ve/oe.width*Math.PI*T,...re),Me=MathUtils.clamp(we+Me/oe.height*Math.PI*T,...se),ue.scale=be&&Me>se[1]/2?G:1,ue.rotation=d&&!be?fe:[Me,ve,0],ue.damping=d&&!be&&typeof d!="boolean"?d:H,[Me,ve]):[Me,ve]},{target:v?ie:void 0});return reactExports.createElement("group",_extends$1({ref:ge},ye?.()),w)}const version=parseInt(REVISION.replace(/\D+/g,""));function toTrianglesDrawMode(_,d){if(d===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),_;if(d===TriangleFanDrawMode||d===TriangleStripDrawMode){let v=_.getIndex();if(v===null){const T=[],R=_.getAttribute("position");if(R!==void 0){for(let G=0;G<R.count;G++)T.push(G);_.setIndex(T),v=_.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),_}const A=v.count-2,C=[];if(v)if(d===TriangleFanDrawMode)for(let T=1;T<=A;T++)C.push(v.getX(0)),C.push(v.getX(T)),C.push(v.getX(T+1));else for(let T=0;T<A;T++)T%2===0?(C.push(v.getX(T)),C.push(v.getX(T+1)),C.push(v.getX(T+2))):(C.push(v.getX(T+2)),C.push(v.getX(T+1)),C.push(v.getX(T)));C.length/3!==A&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const w=_.clone();return w.setIndex(C),w.clearGroups(),w}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",d),_}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(_,d){for(var v=new u16(31),A=0;A<31;++A)v[A]=d+=1<<_[A-1];for(var C=new u32(v[30]),A=1;A<30;++A)for(var w=v[A];w<v[A+1];++w)C[w]=w-v[A]<<5|A;return[v,C]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}var hMap=function(_,d,v){for(var A=_.length,C=0,w=new u16(d);C<A;++C)++w[_[C]-1];var T=new u16(d);for(C=0;C<d;++C)T[C]=T[C-1]+w[C-1]<<1;var R;if(v){R=new u16(1<<d);var G=15-d;for(C=0;C<A;++C)if(_[C])for(var I=C<<4|_[C],z=d-_[C],H=T[_[C]-1]++<<z,Y=H|(1<<z)-1;H<=Y;++H)R[rev[H]>>>G]=I}else for(R=new u16(A),C=0;C<A;++C)_[C]&&(R[C]=rev[T[_[C]-1]++]>>>15-_[C]);return R},flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(_){for(var d=_[0],v=1;v<_.length;++v)_[v]>d&&(d=_[v]);return d},bits=function(_,d,v){var A=d/8|0;return(_[A]|_[A+1]<<8)>>(d&7)&v},bits16=function(_,d){var v=d/8|0;return(_[v]|_[v+1]<<8|_[v+2]<<16)>>(d&7)},shft=function(_){return(_/8|0)+(_&7&&1)},slc=function(_,d,v){(v==null||v>_.length)&&(v=_.length);var A=new(_ instanceof u16?u16:_ instanceof u32?u32:u8)(v-d);return A.set(_.subarray(d,v)),A},inflt=function(_,d,v){var A=_.length;if(!A||v&&!v.l&&A<5)return d||new u8(0);var C=!d||v,w=!v||v.i;v||(v={}),d||(d=new u8(A*3));var T=function(Mn){var cr=d.length;if(Mn>cr){var In=new u8(Math.max(cr*2,Mn));In.set(d),d=In}},R=v.f||0,G=v.p||0,I=v.b||0,z=v.l,H=v.d,Y=v.m,ee=v.n,ie=A*8;do{if(!z){v.f=R=bits(_,G,1);var oe=bits(_,G+1,3);if(G+=3,oe)if(oe==1)z=flrm,H=fdrm,Y=9,ee=5;else if(oe==2){var ue=bits(_,G,31)+257,ge=bits(_,G+10,15)+4,ye=ue+bits(_,G+5,31)+1;G+=14;for(var be=new u8(ye),ve=new u8(19),Me=0;Me<ge;++Me)ve[clim[Me]]=bits(_,G+Me*3,7);G+=ge*3;for(var we=max(ve),Be=(1<<we)-1,De=hMap(ve,we,1),Me=0;Me<ye;){var Fe=De[bits(_,G,Be)];G+=Fe&15;var se=Fe>>>4;if(se<16)be[Me++]=se;else{var Oe=0,Ge=0;for(se==16?(Ge=3+bits(_,G,3),G+=2,Oe=be[Me-1]):se==17?(Ge=3+bits(_,G,7),G+=3):se==18&&(Ge=11+bits(_,G,127),G+=7);Ge--;)be[Me++]=Oe}}var ze=be.subarray(0,ue),je=be.subarray(ue);Y=max(ze),ee=max(je),z=hMap(ze,Y,1),H=hMap(je,ee,1)}else throw"invalid block type";else{var se=shft(G)+4,re=_[se-4]|_[se-3]<<8,fe=se+re;if(fe>A){if(w)throw"unexpected EOF";break}C&&T(I+re),d.set(_.subarray(se,fe),I),v.b=I+=re,v.p=G=fe*8;continue}if(G>ie){if(w)throw"unexpected EOF";break}}C&&T(I+131072);for(var He=(1<<Y)-1,Xe=(1<<ee)-1,$e=G;;$e=G){var Oe=z[bits16(_,G)&He],We=Oe>>>4;if(G+=Oe&15,G>ie){if(w)throw"unexpected EOF";break}if(!Oe)throw"invalid length/literal";if(We<256)d[I++]=We;else if(We==256){$e=G,z=null;break}else{var nt=We-254;if(We>264){var Me=We-257,Qt=fleb[Me];nt=bits(_,G,(1<<Qt)-1)+fl[Me],G+=Qt}var Wt=H[bits16(_,G)&Xe],Bn=Wt>>>4;if(!Wt)throw"invalid distance";G+=Wt&15;var je=fd[Bn];if(Bn>3){var Qt=fdeb[Bn];je+=bits16(_,G)&(1<<Qt)-1,G+=Qt}if(G>ie){if(w)throw"unexpected EOF";break}C&&T(I+131072);for(var Lt=I+nt;I<Lt;I+=4)d[I]=d[I-je],d[I+1]=d[I+1-je],d[I+2]=d[I+2-je],d[I+3]=d[I+3-je];I=Lt}}v.l=z,v.p=$e,v.b=I,z&&(R=1,v.m=Y,v.d=H,v.n=ee)}while(!R);return I==d.length?d:slc(d,0,I)},et=new u8(0),zlv=function(_){if((_[0]&15)!=8||_[0]>>>4>7||(_[0]<<8|_[1])%31)throw"invalid zlib data";if(_[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(_,d){return inflt((zlv(_),_.subarray(2,-4)),d)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(_){}const isCubeTexture=_=>_&&_.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(d,v){var A,C;const w=isCubeTexture(d),R=((C=w?(A=d.image[0])==null?void 0:A.width:d.image.width)!=null?C:1024)/4,G=Math.floor(Math.log2(R)),I=Math.pow(2,G),z=3*Math.max(I,16*7),H=4*I,Y=[w?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/z}`,`#define CUBEUV_TEXEL_HEIGHT ${1/H}`,`#define CUBEUV_MAX_MIP ${G}.0`],ee=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,ie=Y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,oe={map:{value:d},height:{value:v?.height||15},radius:{value:v?.radius||100}},se=new IcosahedronGeometry(1,16),re=new ShaderMaterial({uniforms:oe,fragmentShader:ie,vertexShader:ee,side:DoubleSide});super(se,re)}set radius(d){this.material.uniforms.radius.value=d}get radius(){return this.material.uniforms.radius.value}set height(d){this.material.uniforms.height.value=d}get height(){return this.material.uniforms.height.value}}function decodeText(_){if(typeof TextDecoder<"u")return new TextDecoder().decode(_);let d="";for(let v=0,A=_.length;v<A;v++)d+=String.fromCharCode(_[v]);try{return decodeURIComponent(escape(d))}catch{return d}}const SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",sRGBEncoding=3001,LinearEncoding=3e3;class GLTFLoader extends Loader{constructor(d){super(d),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(v){return new GLTFMaterialsClearcoatExtension(v)}),this.register(function(v){return new GLTFMaterialsDispersionExtension(v)}),this.register(function(v){return new GLTFTextureBasisUExtension(v)}),this.register(function(v){return new GLTFTextureWebPExtension(v)}),this.register(function(v){return new GLTFTextureAVIFExtension(v)}),this.register(function(v){return new GLTFMaterialsSheenExtension(v)}),this.register(function(v){return new GLTFMaterialsTransmissionExtension(v)}),this.register(function(v){return new GLTFMaterialsVolumeExtension(v)}),this.register(function(v){return new GLTFMaterialsIorExtension(v)}),this.register(function(v){return new GLTFMaterialsEmissiveStrengthExtension(v)}),this.register(function(v){return new GLTFMaterialsSpecularExtension(v)}),this.register(function(v){return new GLTFMaterialsIridescenceExtension(v)}),this.register(function(v){return new GLTFMaterialsAnisotropyExtension(v)}),this.register(function(v){return new GLTFMaterialsBumpExtension(v)}),this.register(function(v){return new GLTFLightsExtension(v)}),this.register(function(v){return new GLTFMeshoptCompression(v)}),this.register(function(v){return new GLTFMeshGpuInstancing(v)})}load(d,v,A,C){const w=this;let T;if(this.resourcePath!=="")T=this.resourcePath;else if(this.path!==""){const I=LoaderUtils.extractUrlBase(d);T=LoaderUtils.resolveURL(I,this.path)}else T=LoaderUtils.extractUrlBase(d);this.manager.itemStart(d);const R=function(I){C?C(I):console.error(I),w.manager.itemError(d),w.manager.itemEnd(d)},G=new FileLoader(this.manager);G.setPath(this.path),G.setResponseType("arraybuffer"),G.setRequestHeader(this.requestHeader),G.setWithCredentials(this.withCredentials),G.load(d,function(I){try{w.parse(I,T,function(z){v(z),w.manager.itemEnd(d)},R)}catch(z){R(z)}},A,R)}setDRACOLoader(d){return this.dracoLoader=d,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(d){return this.ktx2Loader=d,this}setMeshoptDecoder(d){return this.meshoptDecoder=d,this}register(d){return this.pluginCallbacks.indexOf(d)===-1&&this.pluginCallbacks.push(d),this}unregister(d){return this.pluginCallbacks.indexOf(d)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(d),1),this}parse(d,v,A,C){let w;const T={},R={};if(typeof d=="string")w=JSON.parse(d);else if(d instanceof ArrayBuffer)if(decodeText(new Uint8Array(d.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC){try{T[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(d)}catch(z){C&&C(z);return}w=JSON.parse(T[EXTENSIONS.KHR_BINARY_GLTF].content)}else w=JSON.parse(decodeText(new Uint8Array(d)));else w=d;if(w.asset===void 0||w.asset.version[0]<2){C&&C(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const G=new GLTFParser(w,{path:v||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});G.fileLoader.setRequestHeader(this.requestHeader);for(let I=0;I<this.pluginCallbacks.length;I++){const z=this.pluginCallbacks[I](G);z.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),R[z.name]=z,T[z.name]=!0}if(w.extensionsUsed)for(let I=0;I<w.extensionsUsed.length;++I){const z=w.extensionsUsed[I],H=w.extensionsRequired||[];switch(z){case EXTENSIONS.KHR_MATERIALS_UNLIT:T[z]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:T[z]=new GLTFDracoMeshCompressionExtension(w,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:T[z]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:T[z]=new GLTFMeshQuantizationExtension;break;default:H.indexOf(z)>=0&&R[z]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+z+'".')}}G.setExtensions(T),G.setPlugins(R),G.parse(A,C)}parseAsync(d,v){const A=this;return new Promise(function(C,w){A.parse(d,v,C,w)})}}function GLTFRegistry(){let _={};return{get:function(d){return _[d]},add:function(d,v){_[d]=v},remove:function(d){delete _[d]},removeAll:function(){_={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const d=this.parser,v=this.parser.json.nodes||[];for(let A=0,C=v.length;A<C;A++){const w=v[A];w.extensions&&w.extensions[this.name]&&w.extensions[this.name].light!==void 0&&d._addNodeRef(this.cache,w.extensions[this.name].light)}}_loadLight(d){const v=this.parser,A="light:"+d;let C=v.cache.get(A);if(C)return C;const w=v.json,G=((w.extensions&&w.extensions[this.name]||{}).lights||[])[d];let I;const z=new Color(16777215);G.color!==void 0&&z.setRGB(G.color[0],G.color[1],G.color[2],LinearSRGBColorSpace);const H=G.range!==void 0?G.range:0;switch(G.type){case"directional":I=new DirectionalLight(z),I.target.position.set(0,0,-1),I.add(I.target);break;case"point":I=new PointLight(z),I.distance=H;break;case"spot":I=new SpotLight(z),I.distance=H,G.spot=G.spot||{},G.spot.innerConeAngle=G.spot.innerConeAngle!==void 0?G.spot.innerConeAngle:0,G.spot.outerConeAngle=G.spot.outerConeAngle!==void 0?G.spot.outerConeAngle:Math.PI/4,I.angle=G.spot.outerConeAngle,I.penumbra=1-G.spot.innerConeAngle/G.spot.outerConeAngle,I.target.position.set(0,0,-1),I.add(I.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+G.type)}return I.position.set(0,0,0),I.decay=2,assignExtrasToUserData(I,G),G.intensity!==void 0&&(I.intensity=G.intensity),I.name=v.createUniqueName(G.name||"light_"+d),C=Promise.resolve(I),v.cache.add(A,C),C}getDependency(d,v){if(d==="light")return this._loadLight(v)}createNodeAttachment(d){const v=this,A=this.parser,w=A.json.nodes[d],R=(w.extensions&&w.extensions[this.name]||{}).light;return R===void 0?null:this._loadLight(R).then(function(G){return A._getNodeRef(v.cache,R,G)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(d,v,A){const C=[];d.color=new Color(1,1,1),d.opacity=1;const w=v.pbrMetallicRoughness;if(w){if(Array.isArray(w.baseColorFactor)){const T=w.baseColorFactor;d.color.setRGB(T[0],T[1],T[2],LinearSRGBColorSpace),d.opacity=T[3]}w.baseColorTexture!==void 0&&C.push(A.assignTexture(d,"map",w.baseColorTexture,SRGBColorSpace))}return Promise.all(C)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(d,v){const C=this.parser.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=C.extensions[this.name].emissiveStrength;return w!==void 0&&(v.emissiveIntensity=w),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];if(T.clearcoatFactor!==void 0&&(v.clearcoat=T.clearcoatFactor),T.clearcoatTexture!==void 0&&w.push(A.assignTexture(v,"clearcoatMap",T.clearcoatTexture)),T.clearcoatRoughnessFactor!==void 0&&(v.clearcoatRoughness=T.clearcoatRoughnessFactor),T.clearcoatRoughnessTexture!==void 0&&w.push(A.assignTexture(v,"clearcoatRoughnessMap",T.clearcoatRoughnessTexture)),T.clearcoatNormalTexture!==void 0&&(w.push(A.assignTexture(v,"clearcoatNormalMap",T.clearcoatNormalTexture)),T.clearcoatNormalTexture.scale!==void 0)){const R=T.clearcoatNormalTexture.scale;v.clearcoatNormalScale=new Vector2(R,R)}return Promise.all(w)}}class GLTFMaterialsDispersionExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const C=this.parser.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=C.extensions[this.name];return v.dispersion=w.dispersion!==void 0?w.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];return T.iridescenceFactor!==void 0&&(v.iridescence=T.iridescenceFactor),T.iridescenceTexture!==void 0&&w.push(A.assignTexture(v,"iridescenceMap",T.iridescenceTexture)),T.iridescenceIor!==void 0&&(v.iridescenceIOR=T.iridescenceIor),v.iridescenceThicknessRange===void 0&&(v.iridescenceThicknessRange=[100,400]),T.iridescenceThicknessMinimum!==void 0&&(v.iridescenceThicknessRange[0]=T.iridescenceThicknessMinimum),T.iridescenceThicknessMaximum!==void 0&&(v.iridescenceThicknessRange[1]=T.iridescenceThicknessMaximum),T.iridescenceThicknessTexture!==void 0&&w.push(A.assignTexture(v,"iridescenceThicknessMap",T.iridescenceThicknessTexture)),Promise.all(w)}}class GLTFMaterialsSheenExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[];v.sheenColor=new Color(0,0,0),v.sheenRoughness=0,v.sheen=1;const T=C.extensions[this.name];if(T.sheenColorFactor!==void 0){const R=T.sheenColorFactor;v.sheenColor.setRGB(R[0],R[1],R[2],LinearSRGBColorSpace)}return T.sheenRoughnessFactor!==void 0&&(v.sheenRoughness=T.sheenRoughnessFactor),T.sheenColorTexture!==void 0&&w.push(A.assignTexture(v,"sheenColorMap",T.sheenColorTexture,SRGBColorSpace)),T.sheenRoughnessTexture!==void 0&&w.push(A.assignTexture(v,"sheenRoughnessMap",T.sheenRoughnessTexture)),Promise.all(w)}}class GLTFMaterialsTransmissionExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];return T.transmissionFactor!==void 0&&(v.transmission=T.transmissionFactor),T.transmissionTexture!==void 0&&w.push(A.assignTexture(v,"transmissionMap",T.transmissionTexture)),Promise.all(w)}}class GLTFMaterialsVolumeExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];v.thickness=T.thicknessFactor!==void 0?T.thicknessFactor:0,T.thicknessTexture!==void 0&&w.push(A.assignTexture(v,"thicknessMap",T.thicknessTexture)),v.attenuationDistance=T.attenuationDistance||1/0;const R=T.attenuationColor||[1,1,1];return v.attenuationColor=new Color().setRGB(R[0],R[1],R[2],LinearSRGBColorSpace),Promise.all(w)}}class GLTFMaterialsIorExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const C=this.parser.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=C.extensions[this.name];return v.ior=w.ior!==void 0?w.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];v.specularIntensity=T.specularFactor!==void 0?T.specularFactor:1,T.specularTexture!==void 0&&w.push(A.assignTexture(v,"specularIntensityMap",T.specularTexture));const R=T.specularColorFactor||[1,1,1];return v.specularColor=new Color().setRGB(R[0],R[1],R[2],LinearSRGBColorSpace),T.specularColorTexture!==void 0&&w.push(A.assignTexture(v,"specularColorMap",T.specularColorTexture,SRGBColorSpace)),Promise.all(w)}}class GLTFMaterialsBumpExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];return v.bumpScale=T.bumpFactor!==void 0?T.bumpFactor:1,T.bumpTexture!==void 0&&w.push(A.assignTexture(v,"bumpMap",T.bumpTexture)),Promise.all(w)}}class GLTFMaterialsAnisotropyExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(d){const A=this.parser.json.materials[d];return!A.extensions||!A.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(d,v){const A=this.parser,C=A.json.materials[d];if(!C.extensions||!C.extensions[this.name])return Promise.resolve();const w=[],T=C.extensions[this.name];return T.anisotropyStrength!==void 0&&(v.anisotropy=T.anisotropyStrength),T.anisotropyRotation!==void 0&&(v.anisotropyRotation=T.anisotropyRotation),T.anisotropyTexture!==void 0&&w.push(A.assignTexture(v,"anisotropyMap",T.anisotropyTexture)),Promise.all(w)}}class GLTFTextureBasisUExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(d){const v=this.parser,A=v.json,C=A.textures[d];if(!C.extensions||!C.extensions[this.name])return null;const w=C.extensions[this.name],T=v.options.ktx2Loader;if(!T){if(A.extensionsRequired&&A.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return v.loadTextureImage(d,w.source,T)}}class GLTFTextureWebPExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(d){const v=this.name,A=this.parser,C=A.json,w=C.textures[d];if(!w.extensions||!w.extensions[v])return null;const T=w.extensions[v],R=C.images[T.source];let G=A.textureLoader;if(R.uri){const I=A.options.manager.getHandler(R.uri);I!==null&&(G=I)}return this.detectSupport().then(function(I){if(I)return A.loadTextureImage(d,T.source,G);if(C.extensionsRequired&&C.extensionsRequired.indexOf(v)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return A.loadTexture(d)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(d){const v=new Image;v.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",v.onload=v.onerror=function(){d(v.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(d){this.parser=d,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(d){const v=this.name,A=this.parser,C=A.json,w=C.textures[d];if(!w.extensions||!w.extensions[v])return null;const T=w.extensions[v],R=C.images[T.source];let G=A.textureLoader;if(R.uri){const I=A.options.manager.getHandler(R.uri);I!==null&&(G=I)}return this.detectSupport().then(function(I){if(I)return A.loadTextureImage(d,T.source,G);if(C.extensionsRequired&&C.extensionsRequired.indexOf(v)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return A.loadTexture(d)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(d){const v=new Image;v.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",v.onload=v.onerror=function(){d(v.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(d){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=d}loadBufferView(d){const v=this.parser.json,A=v.bufferViews[d];if(A.extensions&&A.extensions[this.name]){const C=A.extensions[this.name],w=this.parser.getDependency("buffer",C.buffer),T=this.parser.options.meshoptDecoder;if(!T||!T.supported){if(v.extensionsRequired&&v.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return w.then(function(R){const G=C.byteOffset||0,I=C.byteLength||0,z=C.count,H=C.byteStride,Y=new Uint8Array(R,G,I);return T.decodeGltfBufferAsync?T.decodeGltfBufferAsync(z,H,Y,C.mode,C.filter).then(function(ee){return ee.buffer}):T.ready.then(function(){const ee=new ArrayBuffer(z*H);return T.decodeGltfBuffer(new Uint8Array(ee),z,H,Y,C.mode,C.filter),ee})})}else return null}}class GLTFMeshGpuInstancing{constructor(d){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=d}createNodeMesh(d){const v=this.parser.json,A=v.nodes[d];if(!A.extensions||!A.extensions[this.name]||A.mesh===void 0)return null;const C=v.meshes[A.mesh];for(const I of C.primitives)if(I.mode!==WEBGL_CONSTANTS.TRIANGLES&&I.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&I.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&I.mode!==void 0)return null;const T=A.extensions[this.name].attributes,R=[],G={};for(const I in T)R.push(this.parser.getDependency("accessor",T[I]).then(z=>(G[I]=z,G[I])));return R.length<1?null:(R.push(this.parser.createNodeMesh(d)),Promise.all(R).then(I=>{const z=I.pop(),H=z.isGroup?z.children:[z],Y=I[0].count,ee=[];for(const ie of H){const oe=new Matrix4,se=new Vector3,re=new Quaternion,fe=new Vector3(1,1,1),ue=new InstancedMesh(ie.geometry,ie.material,Y);for(let ge=0;ge<Y;ge++)G.TRANSLATION&&se.fromBufferAttribute(G.TRANSLATION,ge),G.ROTATION&&re.fromBufferAttribute(G.ROTATION,ge),G.SCALE&&fe.fromBufferAttribute(G.SCALE,ge),ue.setMatrixAt(ge,oe.compose(se,re,fe));for(const ge in G)if(ge==="_COLOR_0"){const ye=G[ge];ue.instanceColor=new InstancedBufferAttribute(ye.array,ye.itemSize,ye.normalized)}else ge!=="TRANSLATION"&&ge!=="ROTATION"&&ge!=="SCALE"&&ie.geometry.setAttribute(ge,G[ge]);Object3D.prototype.copy.call(ue,ie),this.parser.assignFinalMaterial(ue),ee.push(ue)}return z.isGroup?(z.clear(),z.add(...ee),z):ee[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(d){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const v=new DataView(d,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:decodeText(new Uint8Array(d.slice(0,4))),version:v.getUint32(4,!0),length:v.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const A=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,C=new DataView(d,BINARY_EXTENSION_HEADER_LENGTH);let w=0;for(;w<A;){const T=C.getUint32(w,!0);w+=4;const R=C.getUint32(w,!0);if(w+=4,R===BINARY_EXTENSION_CHUNK_TYPES.JSON){const G=new Uint8Array(d,BINARY_EXTENSION_HEADER_LENGTH+w,T);this.content=decodeText(G)}else if(R===BINARY_EXTENSION_CHUNK_TYPES.BIN){const G=BINARY_EXTENSION_HEADER_LENGTH+w;this.body=d.slice(G,G+T)}w+=T}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(d,v){if(!v)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=d,this.dracoLoader=v,this.dracoLoader.preload()}decodePrimitive(d,v){const A=this.json,C=this.dracoLoader,w=d.extensions[this.name].bufferView,T=d.extensions[this.name].attributes,R={},G={},I={};for(const z in T){const H=ATTRIBUTES[z]||z.toLowerCase();R[H]=T[z]}for(const z in d.attributes){const H=ATTRIBUTES[z]||z.toLowerCase();if(T[z]!==void 0){const Y=A.accessors[d.attributes[z]],ee=WEBGL_COMPONENT_TYPES[Y.componentType];I[H]=ee.name,G[H]=Y.normalized===!0}}return v.getDependency("bufferView",w).then(function(z){return new Promise(function(H,Y){C.decodeDracoFile(z,function(ee){for(const ie in ee.attributes){const oe=ee.attributes[ie],se=G[ie];se!==void 0&&(oe.normalized=se)}H(ee)},R,I,LinearSRGBColorSpace,Y)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(d,v){return(v.texCoord===void 0||v.texCoord===d.channel)&&v.offset===void 0&&v.rotation===void 0&&v.scale===void 0||(d=d.clone(),v.texCoord!==void 0&&(d.channel=v.texCoord),v.offset!==void 0&&d.offset.fromArray(v.offset),v.rotation!==void 0&&(d.rotation=v.rotation),v.scale!==void 0&&d.repeat.fromArray(v.scale),d.needsUpdate=!0),d}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(d,v,A,C){super(d,v,A,C)}copySampleValue_(d){const v=this.resultBuffer,A=this.sampleValues,C=this.valueSize,w=d*C*3+C;for(let T=0;T!==C;T++)v[T]=A[w+T];return v}interpolate_(d,v,A,C){const w=this.resultBuffer,T=this.sampleValues,R=this.valueSize,G=R*2,I=R*3,z=C-v,H=(A-v)/z,Y=H*H,ee=Y*H,ie=d*I,oe=ie-I,se=-2*ee+3*Y,re=ee-Y,fe=1-se,ue=re-Y+H;for(let ge=0;ge!==R;ge++){const ye=T[oe+ge+R],be=T[oe+ge+G]*z,ve=T[ie+ge+R],Me=T[ie+ge]*z;w[ge]=fe*ye+ue*be+se*ve+re*Me}return w}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(d,v,A,C){const w=super.interpolate_(d,v,A,C);return _q.fromArray(w).normalize().toArray(w),w}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...version>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(_){return _.DefaultMaterial===void 0&&(_.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),_.DefaultMaterial}function addUnknownExtensionsToUserData(_,d,v){for(const A in v.extensions)_[A]===void 0&&(d.userData.gltfExtensions=d.userData.gltfExtensions||{},d.userData.gltfExtensions[A]=v.extensions[A])}function assignExtrasToUserData(_,d){d.extras!==void 0&&(typeof d.extras=="object"?Object.assign(_.userData,d.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+d.extras))}function addMorphTargets(_,d,v){let A=!1,C=!1,w=!1;for(let I=0,z=d.length;I<z;I++){const H=d[I];if(H.POSITION!==void 0&&(A=!0),H.NORMAL!==void 0&&(C=!0),H.COLOR_0!==void 0&&(w=!0),A&&C&&w)break}if(!A&&!C&&!w)return Promise.resolve(_);const T=[],R=[],G=[];for(let I=0,z=d.length;I<z;I++){const H=d[I];if(A){const Y=H.POSITION!==void 0?v.getDependency("accessor",H.POSITION):_.attributes.position;T.push(Y)}if(C){const Y=H.NORMAL!==void 0?v.getDependency("accessor",H.NORMAL):_.attributes.normal;R.push(Y)}if(w){const Y=H.COLOR_0!==void 0?v.getDependency("accessor",H.COLOR_0):_.attributes.color;G.push(Y)}}return Promise.all([Promise.all(T),Promise.all(R),Promise.all(G)]).then(function(I){const z=I[0],H=I[1],Y=I[2];return A&&(_.morphAttributes.position=z),C&&(_.morphAttributes.normal=H),w&&(_.morphAttributes.color=Y),_.morphTargetsRelative=!0,_})}function updateMorphTargets(_,d){if(_.updateMorphTargets(),d.weights!==void 0)for(let v=0,A=d.weights.length;v<A;v++)_.morphTargetInfluences[v]=d.weights[v];if(d.extras&&Array.isArray(d.extras.targetNames)){const v=d.extras.targetNames;if(_.morphTargetInfluences.length===v.length){_.morphTargetDictionary={};for(let A=0,C=v.length;A<C;A++)_.morphTargetDictionary[v[A]]=A}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(_){let d;const v=_.extensions&&_.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(v?d="draco:"+v.bufferView+":"+v.indices+":"+createAttributesKey(v.attributes):d=_.indices+":"+createAttributesKey(_.attributes)+":"+_.mode,_.targets!==void 0)for(let A=0,C=_.targets.length;A<C;A++)d+=":"+createAttributesKey(_.targets[A]);return d}function createAttributesKey(_){let d="";const v=Object.keys(_).sort();for(let A=0,C=v.length;A<C;A++)d+=v[A]+":"+_[v[A]]+";";return d}function getNormalizedComponentScale(_){switch(_){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(_){return _.search(/\.jpe?g($|\?)/i)>0||_.search(/^data\:image\/jpeg/)===0?"image/jpeg":_.search(/\.webp($|\?)/i)>0||_.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(d={},v={}){this.json=d,this.extensions={},this.plugins={},this.options=v,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let A=!1,C=!1,w=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(A=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,C=navigator.userAgent.indexOf("Firefox")>-1,w=C?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||A||C&&w<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(d){this.extensions=d}setPlugins(d){this.plugins=d}parse(d,v){const A=this,C=this.json,w=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(T){return T._markDefs&&T._markDefs()}),Promise.all(this._invokeAll(function(T){return T.beforeRoot&&T.beforeRoot()})).then(function(){return Promise.all([A.getDependencies("scene"),A.getDependencies("animation"),A.getDependencies("camera")])}).then(function(T){const R={scene:T[0][C.scene||0],scenes:T[0],animations:T[1],cameras:T[2],asset:C.asset,parser:A,userData:{}};return addUnknownExtensionsToUserData(w,R,C),assignExtrasToUserData(R,C),Promise.all(A._invokeAll(function(G){return G.afterRoot&&G.afterRoot(R)})).then(function(){for(const G of R.scenes)G.updateMatrixWorld();d(R)})}).catch(v)}_markDefs(){const d=this.json.nodes||[],v=this.json.skins||[],A=this.json.meshes||[];for(let C=0,w=v.length;C<w;C++){const T=v[C].joints;for(let R=0,G=T.length;R<G;R++)d[T[R]].isBone=!0}for(let C=0,w=d.length;C<w;C++){const T=d[C];T.mesh!==void 0&&(this._addNodeRef(this.meshCache,T.mesh),T.skin!==void 0&&(A[T.mesh].isSkinnedMesh=!0)),T.camera!==void 0&&this._addNodeRef(this.cameraCache,T.camera)}}_addNodeRef(d,v){v!==void 0&&(d.refs[v]===void 0&&(d.refs[v]=d.uses[v]=0),d.refs[v]++)}_getNodeRef(d,v,A){if(d.refs[v]<=1)return A;const C=A.clone(),w=(T,R)=>{const G=this.associations.get(T);G!=null&&this.associations.set(R,G);for(const[I,z]of T.children.entries())w(z,R.children[I])};return w(A,C),C.name+="_instance_"+d.uses[v]++,C}_invokeOne(d){const v=Object.values(this.plugins);v.push(this);for(let A=0;A<v.length;A++){const C=d(v[A]);if(C)return C}return null}_invokeAll(d){const v=Object.values(this.plugins);v.unshift(this);const A=[];for(let C=0;C<v.length;C++){const w=d(v[C]);w&&A.push(w)}return A}getDependency(d,v){const A=d+":"+v;let C=this.cache.get(A);if(!C){switch(d){case"scene":C=this.loadScene(v);break;case"node":C=this._invokeOne(function(w){return w.loadNode&&w.loadNode(v)});break;case"mesh":C=this._invokeOne(function(w){return w.loadMesh&&w.loadMesh(v)});break;case"accessor":C=this.loadAccessor(v);break;case"bufferView":C=this._invokeOne(function(w){return w.loadBufferView&&w.loadBufferView(v)});break;case"buffer":C=this.loadBuffer(v);break;case"material":C=this._invokeOne(function(w){return w.loadMaterial&&w.loadMaterial(v)});break;case"texture":C=this._invokeOne(function(w){return w.loadTexture&&w.loadTexture(v)});break;case"skin":C=this.loadSkin(v);break;case"animation":C=this._invokeOne(function(w){return w.loadAnimation&&w.loadAnimation(v)});break;case"camera":C=this.loadCamera(v);break;default:if(C=this._invokeOne(function(w){return w!=this&&w.getDependency&&w.getDependency(d,v)}),!C)throw new Error("Unknown type: "+d);break}this.cache.add(A,C)}return C}getDependencies(d){let v=this.cache.get(d);if(!v){const A=this,C=this.json[d+(d==="mesh"?"es":"s")]||[];v=Promise.all(C.map(function(w,T){return A.getDependency(d,T)})),this.cache.add(d,v)}return v}loadBuffer(d){const v=this.json.buffers[d],A=this.fileLoader;if(v.type&&v.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+v.type+" buffer type is not supported.");if(v.uri===void 0&&d===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const C=this.options;return new Promise(function(w,T){A.load(LoaderUtils.resolveURL(v.uri,C.path),w,void 0,function(){T(new Error('THREE.GLTFLoader: Failed to load buffer "'+v.uri+'".'))})})}loadBufferView(d){const v=this.json.bufferViews[d];return this.getDependency("buffer",v.buffer).then(function(A){const C=v.byteLength||0,w=v.byteOffset||0;return A.slice(w,w+C)})}loadAccessor(d){const v=this,A=this.json,C=this.json.accessors[d];if(C.bufferView===void 0&&C.sparse===void 0){const T=WEBGL_TYPE_SIZES[C.type],R=WEBGL_COMPONENT_TYPES[C.componentType],G=C.normalized===!0,I=new R(C.count*T);return Promise.resolve(new BufferAttribute(I,T,G))}const w=[];return C.bufferView!==void 0?w.push(this.getDependency("bufferView",C.bufferView)):w.push(null),C.sparse!==void 0&&(w.push(this.getDependency("bufferView",C.sparse.indices.bufferView)),w.push(this.getDependency("bufferView",C.sparse.values.bufferView))),Promise.all(w).then(function(T){const R=T[0],G=WEBGL_TYPE_SIZES[C.type],I=WEBGL_COMPONENT_TYPES[C.componentType],z=I.BYTES_PER_ELEMENT,H=z*G,Y=C.byteOffset||0,ee=C.bufferView!==void 0?A.bufferViews[C.bufferView].byteStride:void 0,ie=C.normalized===!0;let oe,se;if(ee&&ee!==H){const re=Math.floor(Y/ee),fe="InterleavedBuffer:"+C.bufferView+":"+C.componentType+":"+re+":"+C.count;let ue=v.cache.get(fe);ue||(oe=new I(R,re*ee,C.count*ee/z),ue=new InterleavedBuffer(oe,ee/z),v.cache.add(fe,ue)),se=new InterleavedBufferAttribute(ue,G,Y%ee/z,ie)}else R===null?oe=new I(C.count*G):oe=new I(R,Y,C.count*G),se=new BufferAttribute(oe,G,ie);if(C.sparse!==void 0){const re=WEBGL_TYPE_SIZES.SCALAR,fe=WEBGL_COMPONENT_TYPES[C.sparse.indices.componentType],ue=C.sparse.indices.byteOffset||0,ge=C.sparse.values.byteOffset||0,ye=new fe(T[1],ue,C.sparse.count*re),be=new I(T[2],ge,C.sparse.count*G);R!==null&&(se=new BufferAttribute(se.array.slice(),se.itemSize,se.normalized));for(let ve=0,Me=ye.length;ve<Me;ve++){const we=ye[ve];if(se.setX(we,be[ve*G]),G>=2&&se.setY(we,be[ve*G+1]),G>=3&&se.setZ(we,be[ve*G+2]),G>=4&&se.setW(we,be[ve*G+3]),G>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return se})}loadTexture(d){const v=this.json,A=this.options,w=v.textures[d].source,T=v.images[w];let R=this.textureLoader;if(T.uri){const G=A.manager.getHandler(T.uri);G!==null&&(R=G)}return this.loadTextureImage(d,w,R)}loadTextureImage(d,v,A){const C=this,w=this.json,T=w.textures[d],R=w.images[v],G=(R.uri||R.bufferView)+":"+T.sampler;if(this.textureCache[G])return this.textureCache[G];const I=this.loadImageSource(v,A).then(function(z){z.flipY=!1,z.name=T.name||R.name||"",z.name===""&&typeof R.uri=="string"&&R.uri.startsWith("data:image/")===!1&&(z.name=R.uri);const Y=(w.samplers||{})[T.sampler]||{};return z.magFilter=WEBGL_FILTERS[Y.magFilter]||LinearFilter,z.minFilter=WEBGL_FILTERS[Y.minFilter]||LinearMipmapLinearFilter,z.wrapS=WEBGL_WRAPPINGS[Y.wrapS]||RepeatWrapping,z.wrapT=WEBGL_WRAPPINGS[Y.wrapT]||RepeatWrapping,C.associations.set(z,{textures:d}),z}).catch(function(){return null});return this.textureCache[G]=I,I}loadImageSource(d,v){const A=this,C=this.json,w=this.options;if(this.sourceCache[d]!==void 0)return this.sourceCache[d].then(H=>H.clone());const T=C.images[d],R=self.URL||self.webkitURL;let G=T.uri||"",I=!1;if(T.bufferView!==void 0)G=A.getDependency("bufferView",T.bufferView).then(function(H){I=!0;const Y=new Blob([H],{type:T.mimeType});return G=R.createObjectURL(Y),G});else if(T.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+d+" is missing URI and bufferView");const z=Promise.resolve(G).then(function(H){return new Promise(function(Y,ee){let ie=Y;v.isImageBitmapLoader===!0&&(ie=function(oe){const se=new Texture(oe);se.needsUpdate=!0,Y(se)}),v.load(LoaderUtils.resolveURL(H,w.path),ie,void 0,ee)})}).then(function(H){return I===!0&&R.revokeObjectURL(G),assignExtrasToUserData(H,T),H.userData.mimeType=T.mimeType||getImageURIMimeType(T.uri),H}).catch(function(H){throw console.error("THREE.GLTFLoader: Couldn't load texture",G),H});return this.sourceCache[d]=z,z}assignTexture(d,v,A,C){const w=this;return this.getDependency("texture",A.index).then(function(T){if(!T)return null;if(A.texCoord!==void 0&&A.texCoord>0&&(T=T.clone(),T.channel=A.texCoord),w.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const R=A.extensions!==void 0?A.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(R){const G=w.associations.get(T);T=w.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(T,R),w.associations.set(T,G)}}return C!==void 0&&(typeof C=="number"&&(C=C===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace),"colorSpace"in T?T.colorSpace=C:T.encoding=C===SRGBColorSpace?sRGBEncoding:LinearEncoding),d[v]=T,T})}assignFinalMaterial(d){const v=d.geometry;let A=d.material;const C=v.attributes.tangent===void 0,w=v.attributes.color!==void 0,T=v.attributes.normal===void 0;if(d.isPoints){const R="PointsMaterial:"+A.uuid;let G=this.cache.get(R);G||(G=new PointsMaterial,Material.prototype.copy.call(G,A),G.color.copy(A.color),G.map=A.map,G.sizeAttenuation=!1,this.cache.add(R,G)),A=G}else if(d.isLine){const R="LineBasicMaterial:"+A.uuid;let G=this.cache.get(R);G||(G=new LineBasicMaterial,Material.prototype.copy.call(G,A),G.color.copy(A.color),G.map=A.map,this.cache.add(R,G)),A=G}if(C||w||T){let R="ClonedMaterial:"+A.uuid+":";C&&(R+="derivative-tangents:"),w&&(R+="vertex-colors:"),T&&(R+="flat-shading:");let G=this.cache.get(R);G||(G=A.clone(),w&&(G.vertexColors=!0),T&&(G.flatShading=!0),C&&(G.normalScale&&(G.normalScale.y*=-1),G.clearcoatNormalScale&&(G.clearcoatNormalScale.y*=-1)),this.cache.add(R,G),this.associations.set(G,this.associations.get(A))),A=G}d.material=A}getMaterialType(){return MeshStandardMaterial}loadMaterial(d){const v=this,A=this.json,C=this.extensions,w=A.materials[d];let T;const R={},G=w.extensions||{},I=[];if(G[EXTENSIONS.KHR_MATERIALS_UNLIT]){const H=C[EXTENSIONS.KHR_MATERIALS_UNLIT];T=H.getMaterialType(),I.push(H.extendParams(R,w,v))}else{const H=w.pbrMetallicRoughness||{};if(R.color=new Color(1,1,1),R.opacity=1,Array.isArray(H.baseColorFactor)){const Y=H.baseColorFactor;R.color.setRGB(Y[0],Y[1],Y[2],LinearSRGBColorSpace),R.opacity=Y[3]}H.baseColorTexture!==void 0&&I.push(v.assignTexture(R,"map",H.baseColorTexture,SRGBColorSpace)),R.metalness=H.metallicFactor!==void 0?H.metallicFactor:1,R.roughness=H.roughnessFactor!==void 0?H.roughnessFactor:1,H.metallicRoughnessTexture!==void 0&&(I.push(v.assignTexture(R,"metalnessMap",H.metallicRoughnessTexture)),I.push(v.assignTexture(R,"roughnessMap",H.metallicRoughnessTexture))),T=this._invokeOne(function(Y){return Y.getMaterialType&&Y.getMaterialType(d)}),I.push(Promise.all(this._invokeAll(function(Y){return Y.extendMaterialParams&&Y.extendMaterialParams(d,R)})))}w.doubleSided===!0&&(R.side=DoubleSide);const z=w.alphaMode||ALPHA_MODES.OPAQUE;if(z===ALPHA_MODES.BLEND?(R.transparent=!0,R.depthWrite=!1):(R.transparent=!1,z===ALPHA_MODES.MASK&&(R.alphaTest=w.alphaCutoff!==void 0?w.alphaCutoff:.5)),w.normalTexture!==void 0&&T!==MeshBasicMaterial&&(I.push(v.assignTexture(R,"normalMap",w.normalTexture)),R.normalScale=new Vector2(1,1),w.normalTexture.scale!==void 0)){const H=w.normalTexture.scale;R.normalScale.set(H,H)}if(w.occlusionTexture!==void 0&&T!==MeshBasicMaterial&&(I.push(v.assignTexture(R,"aoMap",w.occlusionTexture)),w.occlusionTexture.strength!==void 0&&(R.aoMapIntensity=w.occlusionTexture.strength)),w.emissiveFactor!==void 0&&T!==MeshBasicMaterial){const H=w.emissiveFactor;R.emissive=new Color().setRGB(H[0],H[1],H[2],LinearSRGBColorSpace)}return w.emissiveTexture!==void 0&&T!==MeshBasicMaterial&&I.push(v.assignTexture(R,"emissiveMap",w.emissiveTexture,SRGBColorSpace)),Promise.all(I).then(function(){const H=new T(R);return w.name&&(H.name=w.name),assignExtrasToUserData(H,w),v.associations.set(H,{materials:d}),w.extensions&&addUnknownExtensionsToUserData(C,H,w),H})}createUniqueName(d){const v=PropertyBinding.sanitizeNodeName(d||"");return v in this.nodeNamesUsed?v+"_"+ ++this.nodeNamesUsed[v]:(this.nodeNamesUsed[v]=0,v)}loadGeometries(d){const v=this,A=this.extensions,C=this.primitiveCache;function w(R){return A[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(R,v).then(function(G){return addPrimitiveAttributes(G,R,v)})}const T=[];for(let R=0,G=d.length;R<G;R++){const I=d[R],z=createPrimitiveKey(I),H=C[z];if(H)T.push(H.promise);else{let Y;I.extensions&&I.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?Y=w(I):Y=addPrimitiveAttributes(new BufferGeometry,I,v),C[z]={primitive:I,promise:Y},T.push(Y)}}return Promise.all(T)}loadMesh(d){const v=this,A=this.json,C=this.extensions,w=A.meshes[d],T=w.primitives,R=[];for(let G=0,I=T.length;G<I;G++){const z=T[G].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",T[G].material);R.push(z)}return R.push(v.loadGeometries(T)),Promise.all(R).then(function(G){const I=G.slice(0,G.length-1),z=G[G.length-1],H=[];for(let ee=0,ie=z.length;ee<ie;ee++){const oe=z[ee],se=T[ee];let re;const fe=I[ee];if(se.mode===WEBGL_CONSTANTS.TRIANGLES||se.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||se.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||se.mode===void 0)re=w.isSkinnedMesh===!0?new SkinnedMesh(oe,fe):new Mesh(oe,fe),re.isSkinnedMesh===!0&&re.normalizeSkinWeights(),se.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?re.geometry=toTrianglesDrawMode(re.geometry,TriangleStripDrawMode):se.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(re.geometry=toTrianglesDrawMode(re.geometry,TriangleFanDrawMode));else if(se.mode===WEBGL_CONSTANTS.LINES)re=new LineSegments(oe,fe);else if(se.mode===WEBGL_CONSTANTS.LINE_STRIP)re=new Line(oe,fe);else if(se.mode===WEBGL_CONSTANTS.LINE_LOOP)re=new LineLoop(oe,fe);else if(se.mode===WEBGL_CONSTANTS.POINTS)re=new Points(oe,fe);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+se.mode);Object.keys(re.geometry.morphAttributes).length>0&&updateMorphTargets(re,w),re.name=v.createUniqueName(w.name||"mesh_"+d),assignExtrasToUserData(re,w),se.extensions&&addUnknownExtensionsToUserData(C,re,se),v.assignFinalMaterial(re),H.push(re)}for(let ee=0,ie=H.length;ee<ie;ee++)v.associations.set(H[ee],{meshes:d,primitives:ee});if(H.length===1)return w.extensions&&addUnknownExtensionsToUserData(C,H[0],w),H[0];const Y=new Group;w.extensions&&addUnknownExtensionsToUserData(C,Y,w),v.associations.set(Y,{meshes:d});for(let ee=0,ie=H.length;ee<ie;ee++)Y.add(H[ee]);return Y})}loadCamera(d){let v;const A=this.json.cameras[d],C=A[A.type];if(!C){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return A.type==="perspective"?v=new PerspectiveCamera(MathUtils.radToDeg(C.yfov),C.aspectRatio||1,C.znear||1,C.zfar||2e6):A.type==="orthographic"&&(v=new OrthographicCamera(-C.xmag,C.xmag,C.ymag,-C.ymag,C.znear,C.zfar)),A.name&&(v.name=this.createUniqueName(A.name)),assignExtrasToUserData(v,A),Promise.resolve(v)}loadSkin(d){const v=this.json.skins[d],A=[];for(let C=0,w=v.joints.length;C<w;C++)A.push(this._loadNodeShallow(v.joints[C]));return v.inverseBindMatrices!==void 0?A.push(this.getDependency("accessor",v.inverseBindMatrices)):A.push(null),Promise.all(A).then(function(C){const w=C.pop(),T=C,R=[],G=[];for(let I=0,z=T.length;I<z;I++){const H=T[I];if(H){R.push(H);const Y=new Matrix4;w!==null&&Y.fromArray(w.array,I*16),G.push(Y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',v.joints[I])}return new Skeleton(R,G)})}loadAnimation(d){const v=this.json,A=this,C=v.animations[d],w=C.name?C.name:"animation_"+d,T=[],R=[],G=[],I=[],z=[];for(let H=0,Y=C.channels.length;H<Y;H++){const ee=C.channels[H],ie=C.samplers[ee.sampler],oe=ee.target,se=oe.node,re=C.parameters!==void 0?C.parameters[ie.input]:ie.input,fe=C.parameters!==void 0?C.parameters[ie.output]:ie.output;oe.node!==void 0&&(T.push(this.getDependency("node",se)),R.push(this.getDependency("accessor",re)),G.push(this.getDependency("accessor",fe)),I.push(ie),z.push(oe))}return Promise.all([Promise.all(T),Promise.all(R),Promise.all(G),Promise.all(I),Promise.all(z)]).then(function(H){const Y=H[0],ee=H[1],ie=H[2],oe=H[3],se=H[4],re=[];for(let fe=0,ue=Y.length;fe<ue;fe++){const ge=Y[fe],ye=ee[fe],be=ie[fe],ve=oe[fe],Me=se[fe];if(ge===void 0)continue;ge.updateMatrix&&ge.updateMatrix();const we=A._createAnimationTracks(ge,ye,be,ve,Me);if(we)for(let Be=0;Be<we.length;Be++)re.push(we[Be])}return new AnimationClip(w,void 0,re)})}createNodeMesh(d){const v=this.json,A=this,C=v.nodes[d];return C.mesh===void 0?null:A.getDependency("mesh",C.mesh).then(function(w){const T=A._getNodeRef(A.meshCache,C.mesh,w);return C.weights!==void 0&&T.traverse(function(R){if(R.isMesh)for(let G=0,I=C.weights.length;G<I;G++)R.morphTargetInfluences[G]=C.weights[G]}),T})}loadNode(d){const v=this.json,A=this,C=v.nodes[d],w=A._loadNodeShallow(d),T=[],R=C.children||[];for(let I=0,z=R.length;I<z;I++)T.push(A.getDependency("node",R[I]));const G=C.skin===void 0?Promise.resolve(null):A.getDependency("skin",C.skin);return Promise.all([w,Promise.all(T),G]).then(function(I){const z=I[0],H=I[1],Y=I[2];Y!==null&&z.traverse(function(ee){ee.isSkinnedMesh&&ee.bind(Y,_identityMatrix)});for(let ee=0,ie=H.length;ee<ie;ee++)z.add(H[ee]);return z})}_loadNodeShallow(d){const v=this.json,A=this.extensions,C=this;if(this.nodeCache[d]!==void 0)return this.nodeCache[d];const w=v.nodes[d],T=w.name?C.createUniqueName(w.name):"",R=[],G=C._invokeOne(function(I){return I.createNodeMesh&&I.createNodeMesh(d)});return G&&R.push(G),w.camera!==void 0&&R.push(C.getDependency("camera",w.camera).then(function(I){return C._getNodeRef(C.cameraCache,w.camera,I)})),C._invokeAll(function(I){return I.createNodeAttachment&&I.createNodeAttachment(d)}).forEach(function(I){R.push(I)}),this.nodeCache[d]=Promise.all(R).then(function(I){let z;if(w.isBone===!0?z=new Bone:I.length>1?z=new Group:I.length===1?z=I[0]:z=new Object3D,z!==I[0])for(let H=0,Y=I.length;H<Y;H++)z.add(I[H]);if(w.name&&(z.userData.name=w.name,z.name=T),assignExtrasToUserData(z,w),w.extensions&&addUnknownExtensionsToUserData(A,z,w),w.matrix!==void 0){const H=new Matrix4;H.fromArray(w.matrix),z.applyMatrix4(H)}else w.translation!==void 0&&z.position.fromArray(w.translation),w.rotation!==void 0&&z.quaternion.fromArray(w.rotation),w.scale!==void 0&&z.scale.fromArray(w.scale);return C.associations.has(z)||C.associations.set(z,{}),C.associations.get(z).nodes=d,z}),this.nodeCache[d]}loadScene(d){const v=this.extensions,A=this.json.scenes[d],C=this,w=new Group;A.name&&(w.name=C.createUniqueName(A.name)),assignExtrasToUserData(w,A),A.extensions&&addUnknownExtensionsToUserData(v,w,A);const T=A.nodes||[],R=[];for(let G=0,I=T.length;G<I;G++)R.push(C.getDependency("node",T[G]));return Promise.all(R).then(function(G){for(let z=0,H=G.length;z<H;z++)w.add(G[z]);const I=z=>{const H=new Map;for(const[Y,ee]of C.associations)(Y instanceof Material||Y instanceof Texture)&&H.set(Y,ee);return z.traverse(Y=>{const ee=C.associations.get(Y);ee!=null&&H.set(Y,ee)}),H};return C.associations=I(w),w})}_createAnimationTracks(d,v,A,C,w){const T=[],R=d.name?d.name:d.uuid,G=[];PATH_PROPERTIES[w.path]===PATH_PROPERTIES.weights?d.traverse(function(Y){Y.morphTargetInfluences&&G.push(Y.name?Y.name:Y.uuid)}):G.push(R);let I;switch(PATH_PROPERTIES[w.path]){case PATH_PROPERTIES.weights:I=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:I=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:I=VectorKeyframeTrack;break;default:switch(A.itemSize){case 1:I=NumberKeyframeTrack;break;case 2:case 3:default:I=VectorKeyframeTrack;break}break}const z=C.interpolation!==void 0?INTERPOLATION[C.interpolation]:InterpolateLinear,H=this._getArrayFromAccessor(A);for(let Y=0,ee=G.length;Y<ee;Y++){const ie=new I(G[Y]+"."+PATH_PROPERTIES[w.path],v.array,H,z);C.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(ie),T.push(ie)}return T}_getArrayFromAccessor(d){let v=d.array;if(d.normalized){const A=getNormalizedComponentScale(v.constructor),C=new Float32Array(v.length);for(let w=0,T=v.length;w<T;w++)C[w]=v[w]*A;v=C}return v}_createCubicSplineTrackInterpolant(d){d.createInterpolant=function(A){const C=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new C(this.times,this.values,this.getValueSize()/3,A)},d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(_,d,v){const A=d.attributes,C=new Box3;if(A.POSITION!==void 0){const R=v.json.accessors[A.POSITION],G=R.min,I=R.max;if(G!==void 0&&I!==void 0){if(C.set(new Vector3(G[0],G[1],G[2]),new Vector3(I[0],I[1],I[2])),R.normalized){const z=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[R.componentType]);C.min.multiplyScalar(z),C.max.multiplyScalar(z)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const w=d.targets;if(w!==void 0){const R=new Vector3,G=new Vector3;for(let I=0,z=w.length;I<z;I++){const H=w[I];if(H.POSITION!==void 0){const Y=v.json.accessors[H.POSITION],ee=Y.min,ie=Y.max;if(ee!==void 0&&ie!==void 0){if(G.setX(Math.max(Math.abs(ee[0]),Math.abs(ie[0]))),G.setY(Math.max(Math.abs(ee[1]),Math.abs(ie[1]))),G.setZ(Math.max(Math.abs(ee[2]),Math.abs(ie[2]))),Y.normalized){const oe=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Y.componentType]);G.multiplyScalar(oe)}R.max(G)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}C.expandByVector(R)}_.boundingBox=C;const T=new Sphere;C.getCenter(T.center),T.radius=C.min.distanceTo(C.max)/2,_.boundingSphere=T}function addPrimitiveAttributes(_,d,v){const A=d.attributes,C=[];function w(T,R){return v.getDependency("accessor",T).then(function(G){_.setAttribute(R,G)})}for(const T in A){const R=ATTRIBUTES[T]||T.toLowerCase();R in _.attributes||C.push(w(A[T],R))}if(d.indices!==void 0&&!_.index){const T=v.getDependency("accessor",d.indices).then(function(R){_.setIndex(R)});C.push(T)}return assignExtrasToUserData(_,d),computeBounds(_,d,v),Promise.all(C).then(function(){return d.targets!==void 0?addMorphTargets(_,d.targets,v):_})}class RGBELoader extends DataTextureLoader{constructor(d){super(d),this.type=HalfFloatType}parse(d){const T=function(Me,we){switch(Me){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(we||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(we||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(we||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(we||""))}},z=`
`,H=function(Me,we,Be){we=we||1024;let Fe=Me.pos,Oe=-1,Ge=0,ze="",je=String.fromCharCode.apply(null,new Uint16Array(Me.subarray(Fe,Fe+128)));for(;0>(Oe=je.indexOf(z))&&Ge<we&&Fe<Me.byteLength;)ze+=je,Ge+=je.length,Fe+=128,je+=String.fromCharCode.apply(null,new Uint16Array(Me.subarray(Fe,Fe+128)));return-1<Oe?(Me.pos+=Ge+Oe+1,ze+je.slice(0,Oe)):!1},Y=function(Me){const we=/^#\?(\S+)/,Be=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,De=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Fe=/^\s*FORMAT=(\S+)\s*$/,Oe=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Ge={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ze,je;for((Me.pos>=Me.byteLength||!(ze=H(Me)))&&T(1,"no header found"),(je=ze.match(we))||T(3,"bad initial token"),Ge.valid|=1,Ge.programtype=je[1],Ge.string+=ze+`
`;ze=H(Me),ze!==!1;){if(Ge.string+=ze+`
`,ze.charAt(0)==="#"){Ge.comments+=ze+`
`;continue}if((je=ze.match(Be))&&(Ge.gamma=parseFloat(je[1])),(je=ze.match(De))&&(Ge.exposure=parseFloat(je[1])),(je=ze.match(Fe))&&(Ge.valid|=2,Ge.format=je[1]),(je=ze.match(Oe))&&(Ge.valid|=4,Ge.height=parseInt(je[1],10),Ge.width=parseInt(je[2],10)),Ge.valid&2&&Ge.valid&4)break}return Ge.valid&2||T(3,"missing format specifier"),Ge.valid&4||T(3,"missing image size specifier"),Ge},ee=function(Me,we,Be){const De=we;if(De<8||De>32767||Me[0]!==2||Me[1]!==2||Me[2]&128)return new Uint8Array(Me);De!==(Me[2]<<8|Me[3])&&T(3,"wrong scanline width");const Fe=new Uint8Array(4*we*Be);Fe.length||T(4,"unable to allocate buffer space");let Oe=0,Ge=0;const ze=4*De,je=new Uint8Array(4),He=new Uint8Array(ze);let Xe=Be;for(;Xe>0&&Ge<Me.byteLength;){Ge+4>Me.byteLength&&T(1),je[0]=Me[Ge++],je[1]=Me[Ge++],je[2]=Me[Ge++],je[3]=Me[Ge++],(je[0]!=2||je[1]!=2||(je[2]<<8|je[3])!=De)&&T(3,"bad rgbe scanline format");let $e=0,We;for(;$e<ze&&Ge<Me.byteLength;){We=Me[Ge++];const Qt=We>128;if(Qt&&(We-=128),(We===0||$e+We>ze)&&T(3,"bad scanline data"),Qt){const Wt=Me[Ge++];for(let Bn=0;Bn<We;Bn++)He[$e++]=Wt}else He.set(Me.subarray(Ge,Ge+We),$e),$e+=We,Ge+=We}const nt=De;for(let Qt=0;Qt<nt;Qt++){let Wt=0;Fe[Oe]=He[Qt+Wt],Wt+=De,Fe[Oe+1]=He[Qt+Wt],Wt+=De,Fe[Oe+2]=He[Qt+Wt],Wt+=De,Fe[Oe+3]=He[Qt+Wt],Oe+=4}Xe--}return Fe},ie=function(Me,we,Be,De){const Fe=Me[we+3],Oe=Math.pow(2,Fe-128)/255;Be[De+0]=Me[we+0]*Oe,Be[De+1]=Me[we+1]*Oe,Be[De+2]=Me[we+2]*Oe,Be[De+3]=1},oe=function(Me,we,Be,De){const Fe=Me[we+3],Oe=Math.pow(2,Fe-128)/255;Be[De+0]=DataUtils.toHalfFloat(Math.min(Me[we+0]*Oe,65504)),Be[De+1]=DataUtils.toHalfFloat(Math.min(Me[we+1]*Oe,65504)),Be[De+2]=DataUtils.toHalfFloat(Math.min(Me[we+2]*Oe,65504)),Be[De+3]=DataUtils.toHalfFloat(1)},se=new Uint8Array(d);se.pos=0;const re=Y(se),fe=re.width,ue=re.height,ge=ee(se.subarray(se.pos),fe,ue);let ye,be,ve;switch(this.type){case FloatType:ve=ge.length/4;const Me=new Float32Array(ve*4);for(let Be=0;Be<ve;Be++)ie(ge,Be*4,Me,Be*4);ye=Me,be=FloatType;break;case HalfFloatType:ve=ge.length/4;const we=new Uint16Array(ve*4);for(let Be=0;Be<ve;Be++)oe(ge,Be*4,we,Be*4);ye=we,be=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:fe,height:ue,data:ye,header:re.string,gamma:re.gamma,exposure:re.exposure,type:be}}setDataType(d){return this.type=d,this}load(d,v,A,C){function w(T,R){switch(T.type){case FloatType:case HalfFloatType:"colorSpace"in T?T.colorSpace="srgb-linear":T.encoding=3e3,T.minFilter=LinearFilter,T.magFilter=LinearFilter,T.generateMipmaps=!1,T.flipY=!0;break}v&&v(T,R)}return super.load(d,w,A,C)}}const hasColorSpace=version>=152;class EXRLoader extends DataTextureLoader{constructor(d){super(d),this.type=HalfFloatType}parse(d){const we=Math.pow(2.7182818,2.2);function Be(it,At){for(var An=0,Ft=0;Ft<65536;++Ft)(Ft==0||it[Ft>>3]&1<<(Ft&7))&&(At[An++]=Ft);for(var Hn=An-1;An<65536;)At[An++]=0;return Hn}function De(it){for(var At=0;At<16384;At++)it[At]={},it[At].len=0,it[At].lit=0,it[At].p=null}const Fe={l:0,c:0,lc:0};function Oe(it,At,An,Ft,Hn){for(;An<it;)At=At<<8|Mi(Ft,Hn),An+=8;An-=it,Fe.l=At>>An&(1<<it)-1,Fe.c=At,Fe.lc=An}const Ge=new Array(59);function ze(it){for(var At=0;At<=58;++At)Ge[At]=0;for(var At=0;At<65537;++At)Ge[it[At]]+=1;for(var An=0,At=58;At>0;--At){var Ft=An+Ge[At]>>1;Ge[At]=An,An=Ft}for(var At=0;At<65537;++At){var Hn=it[At];Hn>0&&(it[At]=Hn|Ge[Hn]++<<6)}}function je(it,At,An,Ft,Hn,wn,lr){for(var rt=An,ln=0,Cn=0;Hn<=wn;Hn++){if(rt.value-An.value>Ft)return!1;Oe(6,ln,Cn,it,rt);var zn=Fe.l;if(ln=Fe.c,Cn=Fe.lc,lr[Hn]=zn,zn==63){if(rt.value-An.value>Ft)throw"Something wrong with hufUnpackEncTable";Oe(8,ln,Cn,it,rt);var Sn=Fe.l+6;if(ln=Fe.c,Cn=Fe.lc,Hn+Sn>wn+1)throw"Something wrong with hufUnpackEncTable";for(;Sn--;)lr[Hn++]=0;Hn--}else if(zn>=59){var Sn=zn-59+2;if(Hn+Sn>wn+1)throw"Something wrong with hufUnpackEncTable";for(;Sn--;)lr[Hn++]=0;Hn--}}ze(lr)}function He(it){return it&63}function Xe(it){return it>>6}function $e(it,At,An,Ft){for(;At<=An;At++){var Hn=Xe(it[At]),wn=He(it[At]);if(Hn>>wn)throw"Invalid table entry";if(wn>14){var lr=Ft[Hn>>wn-14];if(lr.len)throw"Invalid table entry";if(lr.lit++,lr.p){var rt=lr.p;lr.p=new Array(lr.lit);for(var ln=0;ln<lr.lit-1;++ln)lr.p[ln]=rt[ln]}else lr.p=new Array(1);lr.p[lr.lit-1]=At}else if(wn)for(var Cn=0,ln=1<<14-wn;ln>0;ln--){var lr=Ft[(Hn<<14-wn)+Cn];if(lr.len||lr.p)throw"Invalid table entry";lr.len=wn,lr.lit=At,Cn++}}return!0}const We={c:0,lc:0};function nt(it,At,An,Ft){it=it<<8|Mi(An,Ft),At+=8,We.c=it,We.lc=At}const Qt={c:0,lc:0};function Wt(it,At,An,Ft,Hn,wn,lr,rt,ln,Cn){if(it==At){Ft<8&&(nt(An,Ft,Hn,lr),An=We.c,Ft=We.lc),Ft-=8;var zn=An>>Ft,zn=new Uint8Array([zn])[0];if(ln.value+zn>Cn)return!1;for(var Sn=rt[ln.value-1];zn-- >0;)rt[ln.value++]=Sn}else if(ln.value<Cn)rt[ln.value++]=it;else return!1;Qt.c=An,Qt.lc=Ft}function Bn(it){return it&65535}function Lt(it){var At=Bn(it);return At>32767?At-65536:At}const Mn={a:0,b:0};function cr(it,At){var An=Lt(it),Ft=Lt(At),Hn=Ft,wn=An+(Hn&1)+(Hn>>1),lr=wn,rt=wn-Hn;Mn.a=lr,Mn.b=rt}function In(it,At){var An=Bn(it),Ft=Bn(At),Hn=An-(Ft>>1)&65535,wn=Ft+Hn-32768&65535;Mn.a=wn,Mn.b=Hn}function Zn(it,At,An,Ft,Hn,wn,lr){for(var rt=lr<16384,ln=An>Hn?Hn:An,Cn=1,zn;Cn<=ln;)Cn<<=1;for(Cn>>=1,zn=Cn,Cn>>=1;Cn>=1;){for(var Sn=0,yr=Sn+wn*(Hn-zn),ur=wn*Cn,hr=wn*zn,fr=Ft*Cn,Sr=Ft*zn,Lr,Nr,xr,Cr;Sn<=yr;Sn+=hr){for(var Or=Sn,Ur=Sn+Ft*(An-zn);Or<=Ur;Or+=Sr){var Pr=Or+fr,Vr=Or+ur,xi=Vr+fr;rt?(cr(it[Or+At],it[Vr+At]),Lr=Mn.a,xr=Mn.b,cr(it[Pr+At],it[xi+At]),Nr=Mn.a,Cr=Mn.b,cr(Lr,Nr),it[Or+At]=Mn.a,it[Pr+At]=Mn.b,cr(xr,Cr),it[Vr+At]=Mn.a,it[xi+At]=Mn.b):(In(it[Or+At],it[Vr+At]),Lr=Mn.a,xr=Mn.b,In(it[Pr+At],it[xi+At]),Nr=Mn.a,Cr=Mn.b,In(Lr,Nr),it[Or+At]=Mn.a,it[Pr+At]=Mn.b,In(xr,Cr),it[Vr+At]=Mn.a,it[xi+At]=Mn.b)}if(An&Cn){var Vr=Or+ur;rt?cr(it[Or+At],it[Vr+At]):In(it[Or+At],it[Vr+At]),Lr=Mn.a,it[Vr+At]=Mn.b,it[Or+At]=Lr}}if(Hn&Cn)for(var Or=Sn,Ur=Sn+Ft*(An-zn);Or<=Ur;Or+=Sr){var Pr=Or+fr;rt?cr(it[Or+At],it[Pr+At]):In(it[Or+At],it[Pr+At]),Lr=Mn.a,it[Pr+At]=Mn.b,it[Or+At]=Lr}zn=Cn,Cn>>=1}return Sn}function $n(it,At,An,Ft,Hn,wn,lr,rt,ln,Cn){for(var zn=0,Sn=0,yr=rt,ur=Math.trunc(Hn.value+(wn+7)/8);Hn.value<ur;)for(nt(zn,Sn,An,Hn),zn=We.c,Sn=We.lc;Sn>=14;){var hr=zn>>Sn-14&16383,fr=At[hr];if(fr.len)Sn-=fr.len,Wt(fr.lit,lr,zn,Sn,An,Ft,Hn,ln,Cn,yr),zn=Qt.c,Sn=Qt.lc;else{if(!fr.p)throw"hufDecode issues";var Sr;for(Sr=0;Sr<fr.lit;Sr++){for(var Lr=He(it[fr.p[Sr]]);Sn<Lr&&Hn.value<ur;)nt(zn,Sn,An,Hn),zn=We.c,Sn=We.lc;if(Sn>=Lr&&Xe(it[fr.p[Sr]])==(zn>>Sn-Lr&(1<<Lr)-1)){Sn-=Lr,Wt(fr.p[Sr],lr,zn,Sn,An,Ft,Hn,ln,Cn,yr),zn=Qt.c,Sn=Qt.lc;break}}if(Sr==fr.lit)throw"hufDecode issues"}}var Nr=8-wn&7;for(zn>>=Nr,Sn-=Nr;Sn>0;){var fr=At[zn<<14-Sn&16383];if(fr.len)Sn-=fr.len,Wt(fr.lit,lr,zn,Sn,An,Ft,Hn,ln,Cn,yr),zn=Qt.c,Sn=Qt.lc;else throw"hufDecode issues"}return!0}function Rn(it,At,An,Ft,Hn,wn){var lr={value:0},rt=An.value,ln=ti(At,An),Cn=ti(At,An);An.value+=4;var zn=ti(At,An);if(An.value+=4,ln<0||ln>=65537||Cn<0||Cn>=65537)throw"Something wrong with HUF_ENCSIZE";var Sn=new Array(65537),yr=new Array(16384);De(yr);var ur=Ft-(An.value-rt);if(je(it,At,An,ur,ln,Cn,Sn),zn>8*(Ft-(An.value-rt)))throw"Something wrong with hufUncompress";$e(Sn,ln,Cn,yr),$n(Sn,yr,it,At,An,zn,Cn,wn,Hn,lr)}function Dn(it,At,An){for(var Ft=0;Ft<An;++Ft)At[Ft]=it[At[Ft]]}function Gt(it){for(var At=1;At<it.length;At++){var An=it[At-1]+it[At]-128;it[At]=An}}function Jn(it,At){for(var An=0,Ft=Math.floor((it.length+1)/2),Hn=0,wn=it.length-1;!(Hn>wn||(At[Hn++]=it[An++],Hn>wn));)At[Hn++]=it[Ft++]}function Nn(it){for(var At=it.byteLength,An=new Array,Ft=0,Hn=new DataView(it);At>0;){var wn=Hn.getInt8(Ft++);if(wn<0){var lr=-wn;At-=lr+1;for(var rt=0;rt<lr;rt++)An.push(Hn.getUint8(Ft++))}else{var lr=wn;At-=2;for(var ln=Hn.getUint8(Ft++),rt=0;rt<lr+1;rt++)An.push(ln)}}return An}function Xn(it,At,An,Ft,Hn,wn){var Pr=new DataView(wn.buffer),lr=An[it.idx[0]].width,rt=An[it.idx[0]].height,ln=3,Cn=Math.floor(lr/8),zn=Math.ceil(lr/8),Sn=Math.ceil(rt/8),yr=lr-(zn-1)*8,ur=rt-(Sn-1)*8,hr={value:0},fr=new Array(ln),Sr=new Array(ln),Lr=new Array(ln),Nr=new Array(ln),xr=new Array(ln);for(let Si=0;Si<ln;++Si)xr[Si]=At[it.idx[Si]],fr[Si]=Si<1?0:fr[Si-1]+zn*Sn,Sr[Si]=new Float32Array(64),Lr[Si]=new Uint16Array(64),Nr[Si]=new Uint16Array(zn*64);for(let Si=0;Si<Sn;++Si){var Cr=8;Si==Sn-1&&(Cr=ur);var Or=8;for(let bi=0;bi<zn;++bi){bi==zn-1&&(Or=yr);for(let vn=0;vn<ln;++vn)Lr[vn].fill(0),Lr[vn][0]=Hn[fr[vn]++],jn(hr,Ft,Lr[vn]),Un(Lr[vn],Sr[vn]),bn(Sr[vn]);Kn(Sr);for(let vn=0;vn<ln;++vn)Qn(Sr[vn],Nr[vn],bi*64)}let ir=0;for(let bi=0;bi<ln;++bi){const vn=An[it.idx[bi]].type;for(let Ln=8*Si;Ln<8*Si+Cr;++Ln){ir=xr[bi][Ln];for(let ar=0;ar<Cn;++ar){const Mr=ar*64+(Ln&7)*8;Pr.setUint16(ir+0*2*vn,Nr[bi][Mr+0],!0),Pr.setUint16(ir+1*2*vn,Nr[bi][Mr+1],!0),Pr.setUint16(ir+2*2*vn,Nr[bi][Mr+2],!0),Pr.setUint16(ir+3*2*vn,Nr[bi][Mr+3],!0),Pr.setUint16(ir+4*2*vn,Nr[bi][Mr+4],!0),Pr.setUint16(ir+5*2*vn,Nr[bi][Mr+5],!0),Pr.setUint16(ir+6*2*vn,Nr[bi][Mr+6],!0),Pr.setUint16(ir+7*2*vn,Nr[bi][Mr+7],!0),ir+=8*2*vn}}if(Cn!=zn)for(let Ln=8*Si;Ln<8*Si+Cr;++Ln){const ar=xr[bi][Ln]+8*Cn*2*vn,Mr=Cn*64+(Ln&7)*8;for(let kr=0;kr<Or;++kr)Pr.setUint16(ar+kr*2*vn,Nr[bi][Mr+kr],!0)}}}for(var Ur=new Uint16Array(lr),Pr=new DataView(wn.buffer),Vr=0;Vr<ln;++Vr){An[it.idx[Vr]].decoded=!0;var xi=An[it.idx[Vr]].type;if(An[Vr].type==2)for(var Ai=0;Ai<rt;++Ai){const Si=xr[Vr][Ai];for(var Ti=0;Ti<lr;++Ti)Ur[Ti]=Pr.getUint16(Si+Ti*2*xi,!0);for(var Ti=0;Ti<lr;++Ti)Pr.setFloat32(Si+Ti*2*xi,Br(Ur[Ti]),!0)}}}function jn(it,At,An){for(var Ft,Hn=1;Hn<64;)Ft=At[it.value],Ft==65280?Hn=64:Ft>>8==255?Hn+=Ft&255:(An[Hn]=Ft,Hn++),it.value++}function Un(it,At){At[0]=Br(it[0]),At[1]=Br(it[1]),At[2]=Br(it[5]),At[3]=Br(it[6]),At[4]=Br(it[14]),At[5]=Br(it[15]),At[6]=Br(it[27]),At[7]=Br(it[28]),At[8]=Br(it[2]),At[9]=Br(it[4]),At[10]=Br(it[7]),At[11]=Br(it[13]),At[12]=Br(it[16]),At[13]=Br(it[26]),At[14]=Br(it[29]),At[15]=Br(it[42]),At[16]=Br(it[3]),At[17]=Br(it[8]),At[18]=Br(it[12]),At[19]=Br(it[17]),At[20]=Br(it[25]),At[21]=Br(it[30]),At[22]=Br(it[41]),At[23]=Br(it[43]),At[24]=Br(it[9]),At[25]=Br(it[11]),At[26]=Br(it[18]),At[27]=Br(it[24]),At[28]=Br(it[31]),At[29]=Br(it[40]),At[30]=Br(it[44]),At[31]=Br(it[53]),At[32]=Br(it[10]),At[33]=Br(it[19]),At[34]=Br(it[23]),At[35]=Br(it[32]),At[36]=Br(it[39]),At[37]=Br(it[45]),At[38]=Br(it[52]),At[39]=Br(it[54]),At[40]=Br(it[20]),At[41]=Br(it[22]),At[42]=Br(it[33]),At[43]=Br(it[38]),At[44]=Br(it[46]),At[45]=Br(it[51]),At[46]=Br(it[55]),At[47]=Br(it[60]),At[48]=Br(it[21]),At[49]=Br(it[34]),At[50]=Br(it[37]),At[51]=Br(it[47]),At[52]=Br(it[50]),At[53]=Br(it[56]),At[54]=Br(it[59]),At[55]=Br(it[61]),At[56]=Br(it[35]),At[57]=Br(it[36]),At[58]=Br(it[48]),At[59]=Br(it[49]),At[60]=Br(it[57]),At[61]=Br(it[58]),At[62]=Br(it[62]),At[63]=Br(it[63])}function bn(it){const At=.5*Math.cos(.7853975),An=.5*Math.cos(3.14159/16),Ft=.5*Math.cos(3.14159/8),Hn=.5*Math.cos(3*3.14159/16),wn=.5*Math.cos(5*3.14159/16),lr=.5*Math.cos(3*3.14159/8),rt=.5*Math.cos(7*3.14159/16);for(var ln=new Array(4),Cn=new Array(4),zn=new Array(4),Sn=new Array(4),yr=0;yr<8;++yr){var ur=yr*8;ln[0]=Ft*it[ur+2],ln[1]=lr*it[ur+2],ln[2]=Ft*it[ur+6],ln[3]=lr*it[ur+6],Cn[0]=An*it[ur+1]+Hn*it[ur+3]+wn*it[ur+5]+rt*it[ur+7],Cn[1]=Hn*it[ur+1]-rt*it[ur+3]-An*it[ur+5]-wn*it[ur+7],Cn[2]=wn*it[ur+1]-An*it[ur+3]+rt*it[ur+5]+Hn*it[ur+7],Cn[3]=rt*it[ur+1]-wn*it[ur+3]+Hn*it[ur+5]-An*it[ur+7],zn[0]=At*(it[ur+0]+it[ur+4]),zn[3]=At*(it[ur+0]-it[ur+4]),zn[1]=ln[0]+ln[3],zn[2]=ln[1]-ln[2],Sn[0]=zn[0]+zn[1],Sn[1]=zn[3]+zn[2],Sn[2]=zn[3]-zn[2],Sn[3]=zn[0]-zn[1],it[ur+0]=Sn[0]+Cn[0],it[ur+1]=Sn[1]+Cn[1],it[ur+2]=Sn[2]+Cn[2],it[ur+3]=Sn[3]+Cn[3],it[ur+4]=Sn[3]-Cn[3],it[ur+5]=Sn[2]-Cn[2],it[ur+6]=Sn[1]-Cn[1],it[ur+7]=Sn[0]-Cn[0]}for(var hr=0;hr<8;++hr)ln[0]=Ft*it[16+hr],ln[1]=lr*it[16+hr],ln[2]=Ft*it[48+hr],ln[3]=lr*it[48+hr],Cn[0]=An*it[8+hr]+Hn*it[24+hr]+wn*it[40+hr]+rt*it[56+hr],Cn[1]=Hn*it[8+hr]-rt*it[24+hr]-An*it[40+hr]-wn*it[56+hr],Cn[2]=wn*it[8+hr]-An*it[24+hr]+rt*it[40+hr]+Hn*it[56+hr],Cn[3]=rt*it[8+hr]-wn*it[24+hr]+Hn*it[40+hr]-An*it[56+hr],zn[0]=At*(it[hr]+it[32+hr]),zn[3]=At*(it[hr]-it[32+hr]),zn[1]=ln[0]+ln[3],zn[2]=ln[1]-ln[2],Sn[0]=zn[0]+zn[1],Sn[1]=zn[3]+zn[2],Sn[2]=zn[3]-zn[2],Sn[3]=zn[0]-zn[1],it[0+hr]=Sn[0]+Cn[0],it[8+hr]=Sn[1]+Cn[1],it[16+hr]=Sn[2]+Cn[2],it[24+hr]=Sn[3]+Cn[3],it[32+hr]=Sn[3]-Cn[3],it[40+hr]=Sn[2]-Cn[2],it[48+hr]=Sn[1]-Cn[1],it[56+hr]=Sn[0]-Cn[0]}function Kn(it){for(var At=0;At<64;++At){var An=it[0][At],Ft=it[1][At],Hn=it[2][At];it[0][At]=An+1.5747*Hn,it[1][At]=An-.1873*Ft-.4682*Hn,it[2][At]=An+1.8556*Ft}}function Qn(it,At,An){for(var Ft=0;Ft<64;++Ft)At[An+Ft]=DataUtils.toHalfFloat(pr(it[Ft]))}function pr(it){return it<=1?Math.sign(it)*Math.pow(Math.abs(it),2.2):Math.sign(it)*Math.pow(we,Math.abs(it)-1)}function fn(it){return new DataView(it.array.buffer,it.offset.value,it.size)}function Mt(it){var At=it.viewer.buffer.slice(it.offset.value,it.offset.value+it.size),An=new Uint8Array(Nn(At)),Ft=new Uint8Array(An.length);return Gt(An),Jn(An,Ft),new DataView(Ft.buffer)}function yn(it){var At=it.array.slice(it.offset.value,it.offset.value+it.size),An=unzlibSync(At),Ft=new Uint8Array(An.length);return Gt(An),Jn(An,Ft),new DataView(Ft.buffer)}function kn(it){for(var At=it.viewer,An={value:it.offset.value},Ft=new Uint16Array(it.width*it.scanlineBlockSize*(it.channels*it.type)),Hn=new Uint8Array(8192),wn=0,lr=new Array(it.channels),rt=0;rt<it.channels;rt++)lr[rt]={},lr[rt].start=wn,lr[rt].end=lr[rt].start,lr[rt].nx=it.width,lr[rt].ny=it.lines,lr[rt].size=it.type,wn+=lr[rt].nx*lr[rt].ny*lr[rt].size;var ln=ui(At,An),Cn=ui(At,An);if(Cn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ln<=Cn)for(var rt=0;rt<Cn-ln+1;rt++)Hn[rt+ln]=Ci(At,An);var zn=new Uint16Array(65536),Sn=Be(Hn,zn),yr=ti(At,An);Rn(it.array,At,An,yr,Ft,wn);for(var rt=0;rt<it.channels;++rt)for(var ur=lr[rt],hr=0;hr<lr[rt].size;++hr)Zn(Ft,ur.start+hr,ur.nx,ur.size,ur.ny,ur.nx*ur.size,Sn);Dn(zn,Ft,wn);for(var fr=0,Sr=new Uint8Array(Ft.buffer.byteLength),Lr=0;Lr<it.lines;Lr++)for(var Nr=0;Nr<it.channels;Nr++){var ur=lr[Nr],xr=ur.nx*ur.size,Cr=new Uint8Array(Ft.buffer,ur.end*2,xr*2);Sr.set(Cr,fr),fr+=xr*2,ur.end+=xr}return new DataView(Sr.buffer)}function nr(it){var At=it.array.slice(it.offset.value,it.offset.value+it.size),An=unzlibSync(At);const Ft=it.lines*it.channels*it.width,Hn=it.type==1?new Uint16Array(Ft):new Uint32Array(Ft);let wn=0,lr=0;const rt=new Array(4);for(let ln=0;ln<it.lines;ln++)for(let Cn=0;Cn<it.channels;Cn++){let zn=0;switch(it.type){case 1:rt[0]=wn,rt[1]=rt[0]+it.width,wn=rt[1]+it.width;for(let Sn=0;Sn<it.width;++Sn){const yr=An[rt[0]++]<<8|An[rt[1]++];zn+=yr,Hn[lr]=zn,lr++}break;case 2:rt[0]=wn,rt[1]=rt[0]+it.width,rt[2]=rt[1]+it.width,wn=rt[2]+it.width;for(let Sn=0;Sn<it.width;++Sn){const yr=An[rt[0]++]<<24|An[rt[1]++]<<16|An[rt[2]++]<<8;zn+=yr,Hn[lr]=zn,lr++}break}}return new DataView(Hn.buffer)}function dr(it){var At=it.viewer,An={value:it.offset.value},Ft=new Uint8Array(it.width*it.lines*(it.channels*it.type*2)),Hn={version:oi(At,An),unknownUncompressedSize:oi(At,An),unknownCompressedSize:oi(At,An),acCompressedSize:oi(At,An),dcCompressedSize:oi(At,An),rleCompressedSize:oi(At,An),rleUncompressedSize:oi(At,An),rleRawSize:oi(At,An),totalAcUncompressedCount:oi(At,An),totalDcUncompressedCount:oi(At,An),acCompression:oi(At,An)};if(Hn.version<2)throw"EXRLoader.parse: "+Qe.compression+" version "+Hn.version+" is unsupported";for(var wn=new Array,lr=ui(At,An)-2;lr>0;){var rt=Qr(At.buffer,An),ln=Ci(At,An),Cn=ln>>2&3,zn=(ln>>4)-1,Sn=new Int8Array([zn])[0],yr=Ci(At,An);wn.push({name:rt,index:Sn,type:yr,compression:Cn}),lr-=rt.length+3}for(var ur=Qe.channels,hr=new Array(it.channels),fr=0;fr<it.channels;++fr){var Sr=hr[fr]={},Lr=ur[fr];Sr.name=Lr.name,Sr.compression=0,Sr.decoded=!1,Sr.type=Lr.pixelType,Sr.pLinear=Lr.pLinear,Sr.width=it.width,Sr.height=it.lines}for(var Nr={idx:new Array(3)},xr=0;xr<it.channels;++xr)for(var Sr=hr[xr],fr=0;fr<wn.length;++fr){var Cr=wn[fr];Sr.name==Cr.name&&(Sr.compression=Cr.compression,Cr.index>=0&&(Nr.idx[Cr.index]=xr),Sr.offset=xr)}if(Hn.acCompressedSize>0)switch(Hn.acCompression){case 0:var Pr=new Uint16Array(Hn.totalAcUncompressedCount);Rn(it.array,At,An,Hn.acCompressedSize,Pr,Hn.totalAcUncompressedCount);break;case 1:var Or=it.array.slice(An.value,An.value+Hn.totalAcUncompressedCount),Ur=unzlibSync(Or),Pr=new Uint16Array(Ur.buffer);An.value+=Hn.totalAcUncompressedCount;break}if(Hn.dcCompressedSize>0){var Vr={array:it.array,offset:An,size:Hn.dcCompressedSize},xi=new Uint16Array(yn(Vr).buffer);An.value+=Hn.dcCompressedSize}if(Hn.rleRawSize>0){var Or=it.array.slice(An.value,An.value+Hn.rleCompressedSize),Ur=unzlibSync(Or),Ai=Nn(Ur.buffer);An.value+=Hn.rleCompressedSize}for(var Ti=0,Si=new Array(hr.length),fr=0;fr<Si.length;++fr)Si[fr]=new Array;for(var ir=0;ir<it.lines;++ir)for(var bi=0;bi<hr.length;++bi)Si[bi].push(Ti),Ti+=hr[bi].width*it.type*2;Xn(Nr,Si,hr,Pr,xi,Ft);for(var fr=0;fr<hr.length;++fr){var Sr=hr[fr];if(!Sr.decoded)switch(Sr.compression){case 2:for(var vn=0,Ln=0,ir=0;ir<it.lines;++ir){for(var ar=Si[fr][vn],Mr=0;Mr<Sr.width;++Mr){for(var kr=0;kr<2*Sr.type;++kr)Ft[ar++]=Ai[Ln+kr*Sr.width*Sr.height];Ln++}vn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Ft.buffer)}function Qr(it,At){for(var An=new Uint8Array(it),Ft=0;An[At.value+Ft]!=0;)Ft+=1;var Hn=new TextDecoder().decode(An.slice(At.value,At.value+Ft));return At.value=At.value+Ft+1,Hn}function Wr(it,At,An){var Ft=new TextDecoder().decode(new Uint8Array(it).slice(At.value,At.value+An));return At.value=At.value+An,Ft}function Gr(it,At){var An=Kr(it,At),Ft=ti(it,At);return[An,Ft]}function Hr(it,At){var An=ti(it,At),Ft=ti(it,At);return[An,Ft]}function Kr(it,At){var An=it.getInt32(At.value,!0);return At.value=At.value+4,An}function ti(it,At){var An=it.getUint32(At.value,!0);return At.value=At.value+4,An}function Mi(it,At){var An=it[At.value];return At.value=At.value+1,An}function Ci(it,At){var An=it.getUint8(At.value);return At.value=At.value+1,An}const oi=function(it,At){let An;return"getBigInt64"in DataView.prototype?An=Number(it.getBigInt64(At.value,!0)):An=it.getUint32(At.value+4,!0)+Number(it.getUint32(At.value,!0)<<32),At.value+=8,An};function Ii(it,At){var An=it.getFloat32(At.value,!0);return At.value+=4,An}function wr(it,At){return DataUtils.toHalfFloat(Ii(it,At))}function Br(it){var At=(it&31744)>>10,An=it&1023;return(it>>15?-1:1)*(At?At===31?An?NaN:1/0:Math.pow(2,At-15)*(1+An/1024):6103515625e-14*(An/1024))}function ui(it,At){var An=it.getUint16(At.value,!0);return At.value+=2,An}function vi(it,At){return Br(ui(it,At))}function qr(it,At,An,Ft){for(var Hn=An.value,wn=[];An.value<Hn+Ft-1;){var lr=Qr(At,An),rt=Kr(it,An),ln=Ci(it,An);An.value+=3;var Cn=Kr(it,An),zn=Kr(it,An);wn.push({name:lr,pixelType:rt,pLinear:ln,xSampling:Cn,ySampling:zn})}return An.value+=1,wn}function br(it,At){var An=Ii(it,At),Ft=Ii(it,At),Hn=Ii(it,At),wn=Ii(it,At),lr=Ii(it,At),rt=Ii(it,At),ln=Ii(it,At),Cn=Ii(it,At);return{redX:An,redY:Ft,greenX:Hn,greenY:wn,blueX:lr,blueY:rt,whiteX:ln,whiteY:Cn}}function er(it,At){var An=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Ft=Ci(it,At);return An[Ft]}function Gn(it,At){var An=ti(it,At),Ft=ti(it,At),Hn=ti(it,At),wn=ti(it,At);return{xMin:An,yMin:Ft,xMax:Hn,yMax:wn}}function Er(it,At){var An=["INCREASING_Y"],Ft=Ci(it,At);return An[Ft]}function mn(it,At){var An=Ii(it,At),Ft=Ii(it,At);return[An,Ft]}function tr(it,At){var An=Ii(it,At),Ft=Ii(it,At),Hn=Ii(it,At);return[An,Ft,Hn]}function vr(it,At,An,Ft,Hn){if(Ft==="string"||Ft==="stringvector"||Ft==="iccProfile")return Wr(At,An,Hn);if(Ft==="chlist")return qr(it,At,An,Hn);if(Ft==="chromaticities")return br(it,An);if(Ft==="compression")return er(it,An);if(Ft==="box2i")return Gn(it,An);if(Ft==="lineOrder")return Er(it,An);if(Ft==="float")return Ii(it,An);if(Ft==="v2f")return mn(it,An);if(Ft==="v3f")return tr(it,An);if(Ft==="int")return Kr(it,An);if(Ft==="rational")return Gr(it,An);if(Ft==="timecode")return Hr(it,An);if(Ft==="preview")return An.value+=Hn,"skipped";An.value+=Hn}function Ar(it,At,An){const Ft={};if(it.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Ft.version=it.getUint8(4);const Hn=it.getUint8(5);Ft.spec={singleTile:!!(Hn&2),longName:!!(Hn&4),deepFormat:!!(Hn&8),multiPart:!!(Hn&16)},An.value=8;for(var wn=!0;wn;){var lr=Qr(At,An);if(lr==0)wn=!1;else{var rt=Qr(At,An),ln=ti(it,An),Cn=vr(it,At,An,rt,ln);Cn===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${rt}'.`):Ft[lr]=Cn}}if((Hn&-5)!=0)throw console.error("EXRHeader:",Ft),"THREE.EXRLoader: provided file is currently unsupported.";return Ft}function Tn(it,At,An,Ft,Hn){const wn={size:0,viewer:At,array:An,offset:Ft,width:it.dataWindow.xMax-it.dataWindow.xMin+1,height:it.dataWindow.yMax-it.dataWindow.yMin+1,channels:it.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:it.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(it.compression){case"NO_COMPRESSION":wn.lines=1,wn.uncompress=fn;break;case"RLE_COMPRESSION":wn.lines=1,wn.uncompress=Mt;break;case"ZIPS_COMPRESSION":wn.lines=1,wn.uncompress=yn;break;case"ZIP_COMPRESSION":wn.lines=16,wn.uncompress=yn;break;case"PIZ_COMPRESSION":wn.lines=32,wn.uncompress=kn;break;case"PXR24_COMPRESSION":wn.lines=16,wn.uncompress=nr;break;case"DWAA_COMPRESSION":wn.lines=32,wn.uncompress=dr;break;case"DWAB_COMPRESSION":wn.lines=256,wn.uncompress=dr;break;default:throw"EXRLoader.parse: "+it.compression+" is unsupported"}if(wn.scanlineBlockSize=wn.lines,wn.type==1)switch(Hn){case FloatType:wn.getter=vi,wn.inputSize=2;break;case HalfFloatType:wn.getter=ui,wn.inputSize=2;break}else if(wn.type==2)switch(Hn){case FloatType:wn.getter=Ii,wn.inputSize=4;break;case HalfFloatType:wn.getter=wr,wn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+wn.type+" for "+it.compression+".";wn.blockCount=(it.dataWindow.yMax+1)/wn.scanlineBlockSize;for(var lr=0;lr<wn.blockCount;lr++)oi(At,Ft);wn.outputChannels=wn.channels==3?4:wn.channels;const rt=wn.width*wn.height*wn.outputChannels;switch(Hn){case FloatType:wn.byteArray=new Float32Array(rt),wn.channels<wn.outputChannels&&wn.byteArray.fill(1,0,rt);break;case HalfFloatType:wn.byteArray=new Uint16Array(rt),wn.channels<wn.outputChannels&&wn.byteArray.fill(15360,0,rt);break;default:console.error("THREE.EXRLoader: unsupported type: ",Hn);break}return wn.bytesPerLine=wn.width*wn.inputSize*wn.channels,wn.outputChannels==4?wn.format=RGBAFormat:wn.format=RedFormat,hasColorSpace?wn.colorSpace="srgb-linear":wn.encoding=3e3,wn}const tt=new DataView(d),$t=new Uint8Array(d),dn={value:0},Qe=Ar(tt,d,dn),gn=Tn(Qe,tt,$t,dn,this.type),sr={value:0},rr={R:0,G:1,B:2,A:3,Y:0};for(let it=0;it<gn.height/gn.scanlineBlockSize;it++){const At=ti(tt,dn);gn.size=ti(tt,dn),gn.lines=At+gn.scanlineBlockSize>gn.height?gn.height-At:gn.scanlineBlockSize;const Ft=gn.size<gn.lines*gn.bytesPerLine?gn.uncompress(gn):fn(gn);dn.value+=gn.size;for(let Hn=0;Hn<gn.scanlineBlockSize;Hn++){const wn=Hn+it*gn.scanlineBlockSize;if(wn>=gn.height)break;for(let lr=0;lr<gn.channels;lr++){const rt=rr[Qe.channels[lr].name];for(let ln=0;ln<gn.width;ln++){sr.value=(Hn*(gn.channels*gn.width)+lr*gn.width+ln)*gn.inputSize;const Cn=(gn.height-1-wn)*(gn.width*gn.outputChannels)+ln*gn.outputChannels+rt;gn.byteArray[Cn]=gn.getter(Ft,sr)}}}}return{header:Qe,width:gn.width,height:gn.height,data:gn.byteArray,format:gn.format,[hasColorSpace?"colorSpace":"encoding"]:gn[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(d){return this.type=d,this}load(d,v,A,C){function w(T,R){hasColorSpace?T.colorSpace=R.colorSpace:T.encoding=R.encoding,T.minFilter=LinearFilter,T.magFilter=LinearFilter,T.generateMipmaps=!1,T.flipY=!1,v&&v(T,R)}return super.load(d,w,A,C)}}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(d){super(d),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(d){return this.decoderPath=d,this}setDecoderConfig(d){return this.decoderConfig=d,this}setWorkerLimit(d){return this.workerLimit=d,this}load(d,v,A,C){const w=new FileLoader(this.manager);w.setPath(this.path),w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials),w.load(d,T=>{const R={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(T,R).then(v).catch(C)},A,C)}decodeDracoFile(d,v,A,C){const w={attributeIDs:A||this.defaultAttributeIDs,attributeTypes:C||this.defaultAttributeTypes,useUniqueIDs:!!A};this.decodeGeometry(d,w).then(v)}decodeGeometry(d,v){for(const G in v.attributeTypes){const I=v.attributeTypes[G];I.BYTES_PER_ELEMENT!==void 0&&(v.attributeTypes[G]=I.name)}const A=JSON.stringify(v);if(_taskCache.has(d)){const G=_taskCache.get(d);if(G.key===A)return G.promise;if(d.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let C;const w=this.workerNextTaskID++,T=d.byteLength,R=this._getWorker(w,T).then(G=>(C=G,new Promise((I,z)=>{C._callbacks[w]={resolve:I,reject:z},C.postMessage({type:"decode",id:w,taskConfig:v,buffer:d},[d])}))).then(G=>this._createGeometry(G.geometry));return R.catch(()=>!0).then(()=>{C&&w&&this._releaseTask(C,w)}),_taskCache.set(d,{key:A,promise:R}),R}_createGeometry(d){const v=new BufferGeometry;d.index&&v.setIndex(new BufferAttribute(d.index.array,1));for(let A=0;A<d.attributes.length;A++){const C=d.attributes[A],w=C.name,T=C.array,R=C.itemSize;v.setAttribute(w,new BufferAttribute(T,R))}return v}_loadLibrary(d,v){const A=new FileLoader(this.manager);return A.setPath(this.decoderPath),A.setResponseType(v),A.setWithCredentials(this.withCredentials),new Promise((C,w)=>{A.load(d,C,void 0,w)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const d=typeof WebAssembly!="object"||this.decoderConfig.type==="js",v=[];return d?v.push(this._loadLibrary("draco_decoder.js","text")):(v.push(this._loadLibrary("draco_wasm_wrapper.js","text")),v.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(v).then(A=>{const C=A[0];d||(this.decoderConfig.wasmBinary=A[1]);const w=DRACOWorker.toString(),T=["/* draco decoder */",C,"","/* worker */",w.substring(w.indexOf("{")+1,w.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([T]))}),this.decoderPending}_getWorker(d,v){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const C=new Worker(this.workerSourceURL);C._callbacks={},C._taskCosts={},C._taskLoad=0,C.postMessage({type:"init",decoderConfig:this.decoderConfig}),C.onmessage=function(w){const T=w.data;switch(T.type){case"decode":C._callbacks[T.id].resolve(T);break;case"error":C._callbacks[T.id].reject(T);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+T.type+'"')}},this.workerPool.push(C)}else this.workerPool.sort(function(C,w){return C._taskLoad>w._taskLoad?-1:1});const A=this.workerPool[this.workerPool.length-1];return A._taskCosts[d]=v,A._taskLoad+=v,A})}_releaseTask(d,v){d._taskLoad-=d._taskCosts[v],delete d._callbacks[v],delete d._taskCosts[v]}debug(){console.log("Task load: ",this.workerPool.map(d=>d._taskLoad))}dispose(){for(let d=0;d<this.workerPool.length;++d)this.workerPool[d].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let _,d;onmessage=function(T){const R=T.data;switch(R.type){case"init":_=R.decoderConfig,d=new Promise(function(z){_.onModuleLoaded=function(H){z({draco:H})},DracoDecoderModule(_)});break;case"decode":const G=R.buffer,I=R.taskConfig;d.then(z=>{const H=z.draco,Y=new H.Decoder,ee=new H.DecoderBuffer;ee.Init(new Int8Array(G),G.byteLength);try{const ie=v(H,Y,ee,I),oe=ie.attributes.map(se=>se.array.buffer);ie.index&&oe.push(ie.index.array.buffer),self.postMessage({type:"decode",id:R.id,geometry:ie},oe)}catch(ie){console.error(ie),self.postMessage({type:"error",id:R.id,error:ie.message})}finally{H.destroy(ee),H.destroy(Y)}});break}};function v(T,R,G,I){const z=I.attributeIDs,H=I.attributeTypes;let Y,ee;const ie=R.GetEncodedGeometryType(G);if(ie===T.TRIANGULAR_MESH)Y=new T.Mesh,ee=R.DecodeBufferToMesh(G,Y);else if(ie===T.POINT_CLOUD)Y=new T.PointCloud,ee=R.DecodeBufferToPointCloud(G,Y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ee.ok()||Y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ee.error_msg());const oe={index:null,attributes:[]};for(const se in z){const re=self[H[se]];let fe,ue;if(I.useUniqueIDs)ue=z[se],fe=R.GetAttributeByUniqueId(Y,ue);else{if(ue=R.GetAttributeId(Y,T[z[se]]),ue===-1)continue;fe=R.GetAttribute(Y,ue)}oe.attributes.push(C(T,R,Y,se,re,fe))}return ie===T.TRIANGULAR_MESH&&(oe.index=A(T,R,Y)),T.destroy(Y),oe}function A(T,R,G){const z=G.num_faces()*3,H=z*4,Y=T._malloc(H);R.GetTrianglesUInt32Array(G,H,Y);const ee=new Uint32Array(T.HEAPF32.buffer,Y,z).slice();return T._free(Y),{array:ee,itemSize:1}}function C(T,R,G,I,z,H){const Y=H.num_components(),ie=G.num_points()*Y,oe=ie*z.BYTES_PER_ELEMENT,se=w(T,z),re=T._malloc(oe);R.GetAttributeDataArrayForAllPoints(G,H,se,oe,re);const fe=new z(T.HEAPF32.buffer,re,ie).slice();return T._free(re),{name:I,array:fe,itemSize:Y}}function w(T,R){switch(R){case Float32Array:return T.DT_FLOAT32;case Int8Array:return T.DT_INT8;case Int16Array:return T.DT_INT16;case Int32Array:return T.DT_INT32;case Uint8Array:return T.DT_UINT8;case Uint16Array:return T.DT_UINT16;case Uint32Array:return T.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const _="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",d="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",v=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),A=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let C=_;WebAssembly.validate(v)&&(C=d);let w;const T=WebAssembly.instantiate(R(C),{}).then(H=>{w=H.instance,w.exports.__wasm_call_ctors()});function R(H){const Y=new Uint8Array(H.length);for(let ie=0;ie<H.length;++ie){const oe=H.charCodeAt(ie);Y[ie]=oe>96?oe-71:oe>64?oe-65:oe>47?oe+4:oe>46?63:62}let ee=0;for(let ie=0;ie<H.length;++ie)Y[ee++]=Y[ie]<60?A[Y[ie]]:(Y[ie]-60)*64+Y[++ie];return Y.buffer.slice(0,ee)}function G(H,Y,ee,ie,oe,se){const re=w.exports.sbrk,fe=ee+3&-4,ue=re(fe*ie),ge=re(oe.length),ye=new Uint8Array(w.exports.memory.buffer);ye.set(oe,ge);const be=H(ue,ee,ie,ge,oe.length);if(be===0&&se&&se(ue,fe,ie),Y.set(ye.subarray(ue,ue+ee*ie)),re(ue-re(0)),be!==0)throw new Error(`Malformed buffer data: ${be}`)}const I={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},z={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:T,supported:!0,decodeVertexBuffer(H,Y,ee,ie,oe){G(w.exports.meshopt_decodeVertexBuffer,H,Y,ee,ie,w.exports[I[oe]])},decodeIndexBuffer(H,Y,ee,ie){G(w.exports.meshopt_decodeIndexBuffer,H,Y,ee,ie)},decodeIndexSequence(H,Y,ee,ie){G(w.exports.meshopt_decodeIndexSequence,H,Y,ee,ie)},decodeGltfBuffer(H,Y,ee,ie,oe,se){G(w.exports[z[oe]],H,Y,ee,ie,w.exports[I[se]])}},generated};let dracoLoader=null,decoderPath="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function extensions(_=!0,d=!0,v){return A=>{v&&v(A),_&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof _=="string"?_:decoderPath),A.setDRACOLoader(dracoLoader)),d&&A.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}const useGLTF=(_,d,v,A)=>useLoader(GLTFLoader,_,extensions(d,v,A));useGLTF.preload=(_,d,v,A)=>useLoader.preload(GLTFLoader,_,extensions(d,v,A));useGLTF.clear=_=>useLoader.clear(GLTFLoader,_);useGLTF.setDecoderPath=_=>{decoderPath=_};const getBufferForType=(_,d,v)=>{let A;switch(_){case UnsignedByteType:A=new Uint8ClampedArray(d*v*4);break;case HalfFloatType:A=new Uint16Array(d*v*4);break;case UnsignedIntType:A=new Uint32Array(d*v*4);break;case ByteType:A=new Int8Array(d*v*4);break;case ShortType:A=new Int16Array(d*v*4);break;case IntType:A=new Int32Array(d*v*4);break;case FloatType:A=new Float32Array(d*v*4);break;default:throw new Error("Unsupported data type")}return A};let _canReadPixelsResult;const canReadPixels=(_,d,v,A)=>{if(_canReadPixelsResult!==void 0)return _canReadPixelsResult;const C=new WebGLRenderTarget(1,1,A);d.setRenderTarget(C);const w=new Mesh(new PlaneGeometry,new MeshBasicMaterial({color:16777215}));d.render(w,v),d.setRenderTarget(null);const T=getBufferForType(_,C.width,C.height);return d.readRenderTargetPixels(C,0,0,C.width,C.height,T),C.dispose(),w.geometry.dispose(),w.material.dispose(),_canReadPixelsResult=T[0]!==0,_canReadPixelsResult};class QuadRenderer{constructor(d){var v,A,C,w,T,R,G,I,z,H,Y,ee,ie,oe,se,re;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(ue){throw this._renderer.setRenderTarget(null),ue}this._renderer.setRenderTarget(null)},this._width=d.width,this._height=d.height,this._type=d.type,this._colorSpace=d.colorSpace;const fe={format:RGBAFormat,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((v=d.renderTargetOptions)===null||v===void 0?void 0:v.anisotropy)!==void 0?(A=d.renderTargetOptions)===null||A===void 0?void 0:A.anisotropy:1,generateMipmaps:((C=d.renderTargetOptions)===null||C===void 0?void 0:C.generateMipmaps)!==void 0?(w=d.renderTargetOptions)===null||w===void 0?void 0:w.generateMipmaps:!1,magFilter:((T=d.renderTargetOptions)===null||T===void 0?void 0:T.magFilter)!==void 0?(R=d.renderTargetOptions)===null||R===void 0?void 0:R.magFilter:LinearFilter,minFilter:((G=d.renderTargetOptions)===null||G===void 0?void 0:G.minFilter)!==void 0?(I=d.renderTargetOptions)===null||I===void 0?void 0:I.minFilter:LinearFilter,samples:((z=d.renderTargetOptions)===null||z===void 0?void 0:z.samples)!==void 0?(H=d.renderTargetOptions)===null||H===void 0?void 0:H.samples:void 0,wrapS:((Y=d.renderTargetOptions)===null||Y===void 0?void 0:Y.wrapS)!==void 0?(ee=d.renderTargetOptions)===null||ee===void 0?void 0:ee.wrapS:ClampToEdgeWrapping,wrapT:((ie=d.renderTargetOptions)===null||ie===void 0?void 0:ie.wrapT)!==void 0?(oe=d.renderTargetOptions)===null||oe===void 0?void 0:oe.wrapT:ClampToEdgeWrapping};if(this._material=d.material,d.renderer?this._renderer=d.renderer:(this._renderer=QuadRenderer.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Scene,this._camera=new OrthographicCamera,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!canReadPixels(this._type,this._renderer,this._camera,fe)){let ue;switch(this._type){case HalfFloatType:ue=this._renderer.extensions.has("EXT_color_buffer_float")?FloatType:void 0;break}ue!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`),this._type=ue):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Mesh(new PlaneGeometry,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new WebGLRenderTarget(this.width,this.height,fe),this._renderTarget.texture.mapping=((se=d.renderTargetOptions)===null||se===void 0?void 0:se.mapping)!==void 0?(re=d.renderTargetOptions)===null||re===void 0?void 0:re.mapping:UVMapping}static instantiateRenderer(){const d=new WebGLRenderer;return d.setSize(128,128),d}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const d=getBufferForType(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,d),d}toDataTexture(d){const v=new DataTexture(this.toArray(),this.width,this.height,RGBAFormat,this._type,d?.mapping||UVMapping,d?.wrapS||ClampToEdgeWrapping,d?.wrapT||ClampToEdgeWrapping,d?.magFilter||LinearFilter,d?.minFilter||LinearFilter,d?.anisotropy||1,LinearSRGBColorSpace$1);return v.generateMipmaps=d?.generateMipmaps!==void 0?d?.generateMipmaps:!1,v}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(d){this.disposeOnDemandRenderer(),d&&this.renderTarget.dispose(),this.material instanceof ShaderMaterial&&Object.values(this.material.uniforms).forEach(v=>{v.value instanceof Texture&&v.value.dispose()}),Object.values(this.material).forEach(v=>{v instanceof Texture&&v.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(d){this._width=d,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(d){this._height=d,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(d){this._renderTarget=d,this._width=d.width,this._height=d.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const vertexShader=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class GainMapDecoderMaterial extends ShaderMaterial{constructor({gamma:d,offsetHdr:v,offsetSdr:A,gainMapMin:C,gainMapMax:w,maxDisplayBoost:T,hdrCapacityMin:R,hdrCapacityMax:G,sdr:I,gainMap:z}){super({name:"GainMapDecoderMaterial",vertexShader,fragmentShader,uniforms:{sdr:{value:I},gainMap:{value:z},gamma:{value:new Vector3(1/d[0],1/d[1],1/d[2])},offsetHdr:{value:new Vector3().fromArray(v)},offsetSdr:{value:new Vector3().fromArray(A)},gainMapMin:{value:new Vector3().fromArray(C)},gainMapMax:{value:new Vector3().fromArray(w)},weightFactor:{value:(Math.log2(T)-R)/(G-R)}},blending:NoBlending,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=T,this._hdrCapacityMin=R,this._hdrCapacityMax=G,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(d){this.uniforms.sdr.value=d}get gainMap(){return this.uniforms.gainMap.value}set gainMap(d){this.uniforms.gainMap.value=d}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(d){this.uniforms.offsetHdr.value.fromArray(d)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(d){this.uniforms.offsetSdr.value.fromArray(d)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(d){this.uniforms.gainMapMin.value.fromArray(d)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(d){this.uniforms.gainMapMax.value.fromArray(d)}get gamma(){const d=this.uniforms.gamma.value;return[1/d.x,1/d.y,1/d.z]}set gamma(d){const v=this.uniforms.gamma.value;v.x=1/d[0],v.y=1/d[1],v.z=1/d[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(d){this._hdrCapacityMin=d,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(d){this._hdrCapacityMax=d,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(d){this._maxDisplayBoost=Math.max(1,Math.min(65504,d)),this.calculateWeight()}calculateWeight(){const d=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,d))}}class GainMapNotFoundError extends Error{}class XMPMetadataNotFoundError extends Error{}const getXMLValue=(_,d,v)=>{const A=new RegExp(`${d}="([^"]*)"`,"i").exec(_);if(A)return A[1];const C=new RegExp(`<${d}[^>]*>([\\s\\S]*?)</${d}>`,"i").exec(_);if(C){const w=C[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return w&&w.length===3?w.map(T=>T.replace(/<\/?rdf:li>/g,"")):C[1].trim()}if(v!==void 0)return v;throw new Error(`Can't find ${d} in gainmap metadata`)},extractXMP=_=>{let d;typeof TextDecoder<"u"?d=new TextDecoder().decode(_):d=_.toString();let v=d.indexOf("<x:xmpmeta");for(;v!==-1;){const A=d.indexOf("x:xmpmeta>",v),C=d.slice(v,A+10);try{const w=getXMLValue(C,"hdrgm:GainMapMin","0"),T=getXMLValue(C,"hdrgm:GainMapMax"),R=getXMLValue(C,"hdrgm:Gamma","1"),G=getXMLValue(C,"hdrgm:OffsetSDR","0.015625"),I=getXMLValue(C,"hdrgm:OffsetHDR","0.015625"),z=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(C),H=z?z[1]:"0",Y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(C);if(!Y)throw new Error("Incomplete gainmap metadata");const ee=Y[1];return{gainMapMin:Array.isArray(w)?w.map(ie=>parseFloat(ie)):[parseFloat(w),parseFloat(w),parseFloat(w)],gainMapMax:Array.isArray(T)?T.map(ie=>parseFloat(ie)):[parseFloat(T),parseFloat(T),parseFloat(T)],gamma:Array.isArray(R)?R.map(ie=>parseFloat(ie)):[parseFloat(R),parseFloat(R),parseFloat(R)],offsetSdr:Array.isArray(G)?G.map(ie=>parseFloat(ie)):[parseFloat(G),parseFloat(G),parseFloat(G)],offsetHdr:Array.isArray(I)?I.map(ie=>parseFloat(ie)):[parseFloat(I),parseFloat(I),parseFloat(I)],hdrCapacityMin:parseFloat(H),hdrCapacityMax:parseFloat(ee)}}catch{}v=d.indexOf("<x:xmpmeta",A)}};class MPFExtractor{constructor(d){this.options={debug:d&&d.debug!==void 0?d.debug:!1,extractFII:d&&d.extractFII!==void 0?d.extractFII:!0,extractNonFII:d&&d.extractNonFII!==void 0?d.extractNonFII:!0}}extract(d){return new Promise((v,A)=>{const C=this.options.debug,w=new DataView(d.buffer);if(w.getUint16(0)!==65496){A(new Error("Not a valid jpeg"));return}const T=w.byteLength;let R=2,G=0,I;for(;R<T;){if(++G>250){A(new Error(`Found no marker after ${G} loops `));return}if(w.getUint8(R)!==255){A(new Error(`Not a valid marker at offset 0x${R.toString(16)}, found: 0x${w.getUint8(R).toString(16)}`));return}if(I=w.getUint8(R+1),C&&console.log(`Marker: ${I.toString(16)}`),I===226){C&&console.log("Found APP2 marker (0xffe2)");const z=R+4;if(w.getUint32(z)===1297106432){const H=z+4;let Y;if(w.getUint16(H)===18761)Y=!1;else if(w.getUint16(H)===19789)Y=!0;else{A(new Error("No valid endianness marker found in TIFF header"));return}if(w.getUint16(H+2,!Y)!==42){A(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const ee=w.getUint32(H+4,!Y);if(ee<8){A(new Error("Not valid TIFF data! (First offset less than 8)"));return}const ie=H+ee,oe=w.getUint16(ie,!Y),se=ie+2;let re=0;for(let ye=se;ye<se+12*oe;ye+=12)w.getUint16(ye,!Y)===45057&&(re=w.getUint32(ye+8,!Y));const ue=ie+2+oe*12+4,ge=[];for(let ye=ue;ye<ue+re*16;ye+=16){const be={MPType:w.getUint32(ye,!Y),size:w.getUint32(ye+4,!Y),dataOffset:w.getUint32(ye+8,!Y),dependantImages:w.getUint32(ye+12,!Y),start:-1,end:-1,isFII:!1};be.dataOffset?(be.start=H+be.dataOffset,be.isFII=!1):(be.start=0,be.isFII=!0),be.end=be.start+be.size,ge.push(be)}if(this.options.extractNonFII&&ge.length){const ye=new Blob([w]),be=[];for(const ve of ge){if(ve.isFII&&!this.options.extractFII)continue;const Me=ye.slice(ve.start,ve.end+1,"image/jpeg");be.push(Me)}v(be)}}}R+=2+w.getUint16(R+2)}})}}const extractGainmapFromJPEG=async _=>{const d=extractXMP(_);if(!d)throw new XMPMetadataNotFoundError("Gain map XMP metadata not found");const A=await new MPFExtractor({extractFII:!0,extractNonFII:!0}).extract(_);if(A.length!==2)throw new GainMapNotFoundError("Gain map recovery image not found");return{sdr:new Uint8Array(await A[0].arrayBuffer()),gainMap:new Uint8Array(await A[1].arrayBuffer()),metadata:d}},getHTMLImageFromBlob=_=>new Promise((d,v)=>{const A=document.createElement("img");A.onload=()=>{d(A)},A.onerror=C=>{v(C)},A.src=URL.createObjectURL(_)});class LoaderBase extends Loader{constructor(d,v){super(v),d&&(this._renderer=d),this._internalLoadingManager=new LoadingManager}setRenderer(d){return this._renderer=d,this}setRenderTargetOptions(d){return this._renderTargetOptions=d,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const d=new GainMapDecoderMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Texture,sdr:new Texture});return new QuadRenderer({width:16,height:16,type:HalfFloatType,colorSpace:LinearSRGBColorSpace$1,material:d,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(d,v,A,C){const w=C?new Blob([C],{type:"image/jpeg"}):void 0,T=new Blob([A],{type:"image/jpeg"});let R,G,I=!1;if(typeof createImageBitmap>"u"){const Y=await Promise.all([w?getHTMLImageFromBlob(w):Promise.resolve(void 0),getHTMLImageFromBlob(T)]);G=Y[0],R=Y[1],I=!0}else{const Y=await Promise.all([w?createImageBitmap(w,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(T,{imageOrientation:"flipY"})]);G=Y[0],R=Y[1]}const z=new Texture(G||new ImageData(2,2),UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,LinearSRGBColorSpace$1);z.flipY=I,z.needsUpdate=!0;const H=new Texture(R,UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,SRGBColorSpace$1);H.flipY=I,H.needsUpdate=!0,d.width=R.width,d.height=R.height,d.material.gainMap=z,d.material.sdr=H,d.material.gainMapMin=v.gainMapMin,d.material.gainMapMax=v.gainMapMax,d.material.offsetHdr=v.offsetHdr,d.material.offsetSdr=v.offsetSdr,d.material.gamma=v.gamma,d.material.hdrCapacityMin=v.hdrCapacityMin,d.material.hdrCapacityMax=v.hdrCapacityMax,d.material.maxDisplayBoost=Math.pow(2,v.hdrCapacityMax),d.material.needsUpdate=!0,d.render()}}class GainMapLoader extends LoaderBase{load([d,v,A],C,w,T){const R=this.prepareQuadRenderer();let G,I,z;const H=async()=>{if(G&&I&&z){try{await this.render(R,z,G,I)}catch(we){this.manager.itemError(d),this.manager.itemError(v),this.manager.itemError(A),typeof T=="function"&&T(we),R.disposeOnDemandRenderer();return}typeof C=="function"&&C(R),this.manager.itemEnd(d),this.manager.itemEnd(v),this.manager.itemEnd(A),R.disposeOnDemandRenderer()}};let Y=!0,ee=0,ie=0,oe=!0,se=0,re=0,fe=!0,ue=0,ge=0;const ye=()=>{if(typeof w=="function"){const we=ee+se+ue,Be=ie+re+ge,De=Y&&oe&&fe;w(new ProgressEvent("progress",{lengthComputable:De,loaded:Be,total:we}))}};this.manager.itemStart(d),this.manager.itemStart(v),this.manager.itemStart(A);const be=new FileLoader(this._internalLoadingManager);be.setResponseType("arraybuffer"),be.setRequestHeader(this.requestHeader),be.setPath(this.path),be.setWithCredentials(this.withCredentials),be.load(d,async we=>{if(typeof we=="string")throw new Error("Invalid sdr buffer");G=we,await H()},we=>{Y=we.lengthComputable,ie=we.loaded,ee=we.total,ye()},we=>{this.manager.itemError(d),typeof T=="function"&&T(we)});const ve=new FileLoader(this._internalLoadingManager);ve.setResponseType("arraybuffer"),ve.setRequestHeader(this.requestHeader),ve.setPath(this.path),ve.setWithCredentials(this.withCredentials),ve.load(v,async we=>{if(typeof we=="string")throw new Error("Invalid gainmap buffer");I=we,await H()},we=>{oe=we.lengthComputable,re=we.loaded,se=we.total,ye()},we=>{this.manager.itemError(v),typeof T=="function"&&T(we)});const Me=new FileLoader(this._internalLoadingManager);return Me.setRequestHeader(this.requestHeader),Me.setPath(this.path),Me.setWithCredentials(this.withCredentials),Me.load(A,async we=>{if(typeof we!="string")throw new Error("Invalid metadata string");z=JSON.parse(we),await H()},we=>{fe=we.lengthComputable,ge=we.loaded,ue=we.total,ye()},we=>{this.manager.itemError(A),typeof T=="function"&&T(we)}),R}}class HDRJPGLoader extends LoaderBase{load(d,v,A,C){const w=this.prepareQuadRenderer(),T=new FileLoader(this._internalLoadingManager);return T.setResponseType("arraybuffer"),T.setRequestHeader(this.requestHeader),T.setPath(this.path),T.setWithCredentials(this.withCredentials),this.manager.itemStart(d),T.load(d,async R=>{if(typeof R=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const G=new Uint8Array(R);let I,z,H;try{const Y=await extractGainmapFromJPEG(G);I=Y.sdr,z=Y.gainMap,H=Y.metadata}catch(Y){if(Y instanceof XMPMetadataNotFoundError||Y instanceof GainMapNotFoundError)console.warn(`Failure to reconstruct an HDR image from ${d}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),H={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},I=G;else throw Y}try{await this.render(w,H,I,z)}catch(Y){this.manager.itemError(d),typeof C=="function"&&C(Y),w.disposeOnDemandRenderer();return}typeof v=="function"&&v(w),this.manager.itemEnd(d),w.disposeOnDemandRenderer()},A,R=>{this.manager.itemError(d),typeof C=="function"&&C(R)}),w}}const presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray=_=>Array.isArray(_),defaultFiles=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function useEnvironment({files:_=defaultFiles,path:d="",preset:v=void 0,colorSpace:A=void 0,extensions:C}={}){v&&(validatePreset(v),_=presetsObj[v],d=CUBEMAP_ROOT);const w=isArray(_),{extension:T,isCubemap:R}=getExtension(_),G=getLoader(T);if(!G)throw new Error("useEnvironment: Unrecognized file extension: "+_);const I=useThree(ee=>ee.gl);reactExports.useLayoutEffect(()=>{if(T!=="webp"&&T!=="jpg"&&T!=="jpeg")return;function ee(){useLoader.clear(G,w?[_]:_)}I.domElement.addEventListener("webglcontextlost",ee,{once:!0})},[_,I.domElement]);const z=useLoader(G,w?[_]:_,ee=>{(T==="webp"||T==="jpg"||T==="jpeg")&&ee.setRenderer(I),ee.setPath==null||ee.setPath(d),C&&C(ee)});let H=w?z[0]:z;if(T==="jpg"||T==="jpeg"||T==="webp"){var Y;H=(Y=H.renderTarget)==null?void 0:Y.texture}return H.mapping=R?CubeReflectionMapping:EquirectangularReflectionMapping,H.colorSpace=A??(R?"srgb":"srgb-linear"),H}const preloadDefaultOptions={files:defaultFiles,path:"",preset:void 0,extensions:void 0};useEnvironment.preload=_=>{const d={...preloadDefaultOptions,..._};let{files:v,path:A=""}=d;const{preset:C,extensions:w}=d;C&&(validatePreset(C),v=presetsObj[C],A=CUBEMAP_ROOT);const{extension:T}=getExtension(v);if(T==="webp"||T==="jpg"||T==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const R=getLoader(T);if(!R)throw new Error("useEnvironment: Unrecognized file extension: "+v);useLoader.preload(R,isArray(v)?[v]:v,G=>{G.setPath==null||G.setPath(A),w&&w(G)})};const clearDefaultOptins={files:defaultFiles,preset:void 0};useEnvironment.clear=_=>{const d={...clearDefaultOptins,..._};let{files:v}=d;const{preset:A}=d;A&&(validatePreset(A),v=presetsObj[A]);const{extension:C}=getExtension(v),w=getLoader(C);if(!w)throw new Error("useEnvironment: Unrecognized file extension: "+v);useLoader.clear(w,isArray(v)?[v]:v)};function validatePreset(_){if(!(_ in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "))}function getExtension(_){var d;const v=isArray(_)&&_.length===6,A=isArray(_)&&_.length===3&&_.some(T=>T.endsWith("json")),C=isArray(_)?_[0]:_;return{extension:v?"cube":A?"webp":C.startsWith("data:application/exr")?"exr":C.startsWith("data:application/hdr")?"hdr":C.startsWith("data:image/jpeg")?"jpg":(d=C.split(".").pop())==null||(d=d.split("?"))==null||(d=d.shift())==null?void 0:d.toLowerCase(),isCubemap:v,isGainmap:A}}function getLoader(_){return _==="cube"?CubeTextureLoader:_==="hdr"?RGBELoader:_==="exr"?EXRLoader:_==="jpg"||_==="jpeg"?HDRJPGLoader:_==="webp"?GainMapLoader:null}const isRef=_=>_.current&&_.current.isScene,resolveScene=_=>isRef(_)?_.current:_;function setEnvProps(_,d,v,A,C={}){var w,T,R,G;C={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...C};const I=resolveScene(d||v),z=I.background,H=I.environment,Y={backgroundBlurriness:I.backgroundBlurriness,backgroundIntensity:I.backgroundIntensity,backgroundRotation:(w=(T=I.backgroundRotation)==null||T.clone==null?void 0:T.clone())!==null&&w!==void 0?w:[0,0,0],environmentIntensity:I.environmentIntensity,environmentRotation:(R=(G=I.environmentRotation)==null||G.clone==null?void 0:G.clone())!==null&&R!==void 0?R:[0,0,0]};return _!=="only"&&(I.environment=A),_&&(I.background=A),applyProps(I,C),()=>{_!=="only"&&(I.environment=H),_&&(I.background=z),applyProps(I,Y)}}function EnvironmentMap({scene:_,background:d=!1,map:v,...A}){const C=useThree(w=>w.scene);return reactExports.useLayoutEffect(()=>{if(v)return setEnvProps(d,_,C,v,A)}),null}function EnvironmentCube({background:_=!1,scene:d,blur:v,backgroundBlurriness:A,backgroundIntensity:C,backgroundRotation:w,environmentIntensity:T,environmentRotation:R,...G}){const I=useEnvironment(G),z=useThree(H=>H.scene);return reactExports.useLayoutEffect(()=>setEnvProps(_,d,z,I,{backgroundBlurriness:v??A,backgroundIntensity:C,backgroundRotation:w,environmentIntensity:T,environmentRotation:R})),reactExports.useEffect(()=>()=>{I.dispose()},[I]),null}function EnvironmentPortal({children:_,near:d=.1,far:v=1e3,resolution:A=256,frames:C=1,map:w,background:T=!1,blur:R,backgroundBlurriness:G,backgroundIntensity:I,backgroundRotation:z,environmentIntensity:H,environmentRotation:Y,scene:ee,files:ie,path:oe,preset:se=void 0,extensions:re}){const fe=useThree(Me=>Me.gl),ue=useThree(Me=>Me.scene),ge=reactExports.useRef(null),[ye]=reactExports.useState(()=>new Scene),be=reactExports.useMemo(()=>{const Me=new WebGLCubeRenderTarget(A);return Me.texture.type=HalfFloatType,Me},[A]);reactExports.useEffect(()=>()=>{be.dispose()},[be]),reactExports.useLayoutEffect(()=>{if(C===1){const Me=fe.autoClear;fe.autoClear=!0,ge.current.update(fe,ye),fe.autoClear=Me}return setEnvProps(T,ee,ue,be.texture,{backgroundBlurriness:R??G,backgroundIntensity:I,backgroundRotation:z,environmentIntensity:H,environmentRotation:Y})},[_,ye,be.texture,ee,ue,T,C,fe]);let ve=1;return useFrame(()=>{if(C===1/0||ve<C){const Me=fe.autoClear;fe.autoClear=!0,ge.current.update(fe,ye),fe.autoClear=Me,ve++}}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,_,reactExports.createElement("cubeCamera",{ref:ge,args:[d,v,be]}),ie||se?reactExports.createElement(EnvironmentCube,{background:!0,files:ie,preset:se,path:oe,extensions:re}):w?reactExports.createElement(EnvironmentMap,{background:!0,map:w,extensions:re}):null),ye))}function EnvironmentGround(_){var d,v,A,C;const w=useEnvironment(_),T=_.map||w;reactExports.useMemo(()=>extend$3({GroundProjectedEnvImpl:GroundProjectedEnv}),[]),reactExports.useEffect(()=>()=>{w.dispose()},[w]);const R=reactExports.useMemo(()=>[T],[T]),G=(d=_.ground)==null?void 0:d.height,I=(v=_.ground)==null?void 0:v.radius,z=(A=(C=_.ground)==null?void 0:C.scale)!==null&&A!==void 0?A:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends$1({},_,{map:T})),reactExports.createElement("groundProjectedEnvImpl",{args:R,scale:z,height:G,radius:I}))}function Environment(_){return _.ground?reactExports.createElement(EnvironmentGround,_):_.map?reactExports.createElement(EnvironmentMap,_):_.children?reactExports.createElement(EnvironmentPortal,_):reactExports.createElement(EnvironmentCube,_)}const Cap3DLoader=()=>{const{t:_}=useTranslation(),{active:d,progress:v}=useProgress();if(!d&&v===100)return null;const A=Math.round(v);return jsxRuntimeExports.jsxs("div",{className:"cap-3d-loader",children:[jsxRuntimeExports.jsx("div",{className:"cap-3d-loader__progress",children:jsxRuntimeExports.jsx("div",{className:"cap-3d-loader__progress-track",children:jsxRuntimeExports.jsx("div",{className:"cap-3d-loader__progress-fill",style:{width:`${A}%`}})})}),jsxRuntimeExports.jsx("div",{className:"cap-3d-loader__text",children:_("loading")})]})},Cap3DLoader$1=reactExports.memo(Cap3DLoader),LazyCap3DWrapper=reactExports.lazy(()=>__vitePreload(()=>import("./Cap3DWrapper-BO9bI_Z_.js"),__vite__mapDeps([0,1]))),Cap3DRenderer=({cap:_,frontTextureUrl:d})=>jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{className:"cap-3d-loader-container",children:jsxRuntimeExports.jsx(Cap3DLoader$1,{})}),children:jsxRuntimeExports.jsx(LazyCap3DWrapper,{cap:_,fallback:jsxRuntimeExports.jsx("img",{className:"cap__img",src:d,alt:"cap image"})})}),CapElementSkeleton=reactExports.memo(function(_){return jsxRuntimeExports.jsx("div",{className:`cap__element-wrapper ${_.className??""}`,children:jsxRuntimeExports.jsxs("div",{className:`cap__element cap__element--loading cap__element--common cap__element--${_.size}`,children:[jsxRuntimeExports.jsx("div",{className:"cap__img-wrapper",children:jsxRuntimeExports.jsx("div",{className:"cap__img"})}),jsxRuntimeExports.jsx("div",{className:"cap__number"}),_.size==="medium"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"cap__collection"}),_.isPve&&jsxRuntimeExports.jsx("div",{className:"cap__power"}),jsxRuntimeExports.jsx("div",{className:"cap__power"})]})]})})}),CapElement=reactExports.forwardRef((_,d)=>{const{t:v}=useTranslation(),{appState:A}=useAppState();let C=_.bgType??"full";const w=reactExports.useMemo(()=>_.cap?.url?firebaseService.getCollectionCapUrl(_.cap.url):capImage$1,[_.cap]),T=[];_.variant==="pve-medium"&&T.push("cap__element--pve-medium"),(_.variant==="pve-small"||_.variant=="pvenew-small")&&T.push("cap__element--pve-small"),(_.variant==="medium"||_.variant==="pve-medium")&&(T.push("cap__element--medium"),C="preview"),(_.variant==="small"||_.variant==="pve-small"||_.variant=="pvenew-small")&&T.push("cap__element--small"),_.variant==="large"&&(T.push("cap__element--large"),C="full"),_.variant==="large"&&!A.user?.is3dModeDisabled&&T.push("cap__element--3d-mode");const R=_.pendingable&&_.cap&&!["READY","STAKED","SALE","NFT_EDITING"].includes(_.cap.status),G=_.cap?.status==="STAKED",I=_.cap?.status==="SALE";_.cap?.grade&&T.push(`cap__element--${getBaseGrade(_.cap.grade).toLowerCase()}`),R&&T.push("cap__element--pending"),(G||I&&!_.isPriceShow)&&_.variant==="medium"&&T.push("cap__element--staked"),_.selectedNumber&&T.push("cap__element--selected"),_.isRemoved&&T.push("cap__element--removed"),_.isBg&&T.push("cap__element--bg"),_.isNew&&T.push("cap__element--new");const z=getCapGdGrade(_.cap,A.capsGd),H=_.cap&&!_.power?z:void 0,Y=_.cap&&_.variant==="pve-medium"?getCapPveHp(_.cap,A.pveGd):void 0,ee=_.cap&&["pve-medium","pve-small"].includes(_.variant)?getFactionFromCap(_.cap,A.pveGd):void 0,ie=_.cap?firebaseService.getCustomBackground(_.cap,C,A.capsCollections):void 0,oe=_.cap&&_.cap.grade?getStakingSpeed(_.cap,Timestamp.now(),A.capsGd):0,se=_.cap&&A.user?getStakingBonus(_.cap,A.user,A.capsGd):0,re=_.cap?.skin?.outline?.shape||"default",fe=_.cap?.skin?.outline?firebaseService.getBaseImageUrl(`3d/frames/${_.cap.skin.outline.source}/${_.cap.skin.outline.skin}/${_.cap.skin.outline.type}/${re}.png`):void 0;return _.cap?.skin?.outline?.source==="intoTheMadness"?T.push("cap__element--into-the-madness-frame"):_.cap?.skin?.outline?.source==="rerollsMachine"&&T.push("cap__element--rerolls-machine-frame"),jsxRuntimeExports.jsxs("div",{className:`cap__element-wrapper ${_.className??""}`,style:ie?{"--cap-bg-url":`url(${ie})`}:void 0,children:[_.children,_.isRemoved&&jsxRuntimeExports.jsx("div",{className:"cap__removed"}),jsxRuntimeExports.jsxs("button",{className:`cap__element ${T.join(" ")}`,onClick:ue=>{_.stopPropagation&&ue.stopPropagation(),_.cap&&_.onClickCallback?.(_.cap)},children:[_.childrenElement,R&&jsxRuntimeExports.jsx("div",{className:"cap__pending",children:jsxRuntimeExports.jsx(Spinner,{})}),G&&_.variant==="medium"&&jsxRuntimeExports.jsx("img",{src:"/icons/staked.png",className:"cap__staked",alt:"staked"}),jsxRuntimeExports.jsxs(animated.div,{className:"cap__img-wrapper",ref:d,style:_.style,children:[(_.variant=="small"||_.variant=="pve-small"||_.variant=="pvenew-small"||_.variant=="medium"||_.variant=="pve-medium")&&jsxRuntimeExports.jsx("img",{className:"cap__img",src:w,alt:"cap image"}),_.variant=="large"&&(A.user?.is3dModeDisabled?jsxRuntimeExports.jsx("img",{className:"cap__img",src:w,alt:"cap image"}):jsxRuntimeExports.jsx(Cap3DRenderer,{cap:_.cap,frontTextureUrl:w})),fe&&jsxRuntimeExports.jsx("img",{className:"cap__frame",src:fe,alt:"cap frame"}),_.variant==="pve-medium"&&_.cap&&jsxRuntimeExports.jsx("div",{className:"cap__grade",children:getGradeTitle(_.cap.grade)}),(_.variant==="medium"||_.isNumberShow)&&_.cap&&_.cap.number>0&&jsxRuntimeExports.jsx("div",{className:"cap__element-number",children:jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{id:"circlePath",fill:"none",d:"M 10, 50 a 40,40 0 1,1 80,0 a 40,40 0 1,1 -80,0"}),jsxRuntimeExports.jsx("text",{id:"text",children:jsxRuntimeExports.jsxs("textPath",{id:"textPath",href:"#circlePath",children:["#",_.cap.number]})})]})})]}),!_.isNftHide&&_.cap?.isNft&&(_.variant==="small"||_.variant==="large"||_.variant==="medium")&&jsxRuntimeExports.jsx("div",{className:"cap__nft"}),_.isNew&&jsxRuntimeExports.jsx("div",{className:"cap__new",children:v("new")}),_.cap&&!_.isCapNumberHide&&jsxRuntimeExports.jsxs("div",{className:"cap__number",children:["#",_.cap.collectionNumber]}),_.cap&&_.variant=="pvenew-small"&&jsxRuntimeExports.jsxs("div",{className:"cap__number",children:["",z?.from]}),_.variant==="pve-small"&&ee&&jsxRuntimeExports.jsx("div",{className:"cap__faction-wrapper",children:jsxRuntimeExports.jsx("img",{className:"cap__faction",src:`/icons/${ee.icon}`,alt:"faction"})}),_.variant==="pvenew-small"&&_.cap&&jsxRuntimeExports.jsxs("div",{className:"cap__faction-wrapper",children:["",jsxRuntimeExports.jsx("br",{}),_.cap.health??getCapPveHp(_.cap,A.pveGd),"/",_.cap.maxHealth]}),_.variant==="medium"&&_.cap&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[I&&!_.isPriceShow&&jsxRuntimeExports.jsx("div",{className:"cap__sell-wrapper",children:jsxRuntimeExports.jsx("img",{src:"/icons/sell.png",className:"cap__sell-img",alt:"sell"})}),jsxRuntimeExports.jsx("div",{className:"cap__collection",children:_.cap.collection}),_.isScoreShow&&!_.isStakingSpeedShow&&!_.isPriceShow&&jsxRuntimeExports.jsxs("div",{className:"cap__power",children:[getGradeTitle(_.cap.grade)," "," ",jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",z?.score]}),H&&!_.isStakingSpeedShow&&!_.isPriceShow&&!_.isScoreShow&&jsxRuntimeExports.jsxs("div",{className:"cap__power",children:[getGradeTitle(_.cap.grade)," "," ",jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",H.from,"-",H.to]}),_.isPriceShow&&jsxRuntimeExports.jsxs("div",{className:"cap__power",children:[getGradeTitle(_.cap.grade)," "," ",(_.cap.price??0)/1e9,jsxRuntimeExports.jsx("img",{className:"cap__ton-img",src:tonImage,alt:"ton"})]}),_.isStakingSpeedShow&&jsxRuntimeExports.jsxs("div",{className:"cap__power",children:[`${v("staking.farming")}: ${oe.toFixed(3)}/h`,jsxRuntimeExports.jsx("img",{className:"cap__staking-img",src:StakedCoin,alt:"lightning"}),`${se>0&&oe>0?` +${se*100}%`:""}`]}),_.power&&jsxRuntimeExports.jsx("div",{className:"cap__grade",children:jsxRuntimeExports.jsxs("span",{className:`cap__power cap__power-${_.powerColor}`,children:[getGradeTitle(_.cap.grade)," ",jsxRuntimeExports.jsx("img",{className:"cap__lightning",src:lightningGrayImage,alt:"lightning"})," ",jsxRuntimeExports.jsx("span",{children:_.power})]})}),!H&&!_.power&&jsxRuntimeExports.jsxs("div",{className:"cap__grade",children:[v("grade"),":"," ",jsxRuntimeExports.jsx("span",{className:"cap__grade-name",children:getGradeTitle(_.cap.grade)})]})]}),_.variant==="pve-medium"&&_.cap&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"cap__collection",children:[_.cap.collection,ee&&jsxRuntimeExports.jsx("img",{className:"cap__faction",src:`/icons/${ee.icon}`,alt:"faction"})]}),jsxRuntimeExports.jsxs("div",{className:"cap__health",children:[jsxRuntimeExports.jsx("span",{className:"cap__health-title",children:v("pve.health")}),jsxRuntimeExports.jsx("img",{className:"cap__health-icon",src:heartImage,alt:"heart"})," ",Y]}),H&&jsxRuntimeExports.jsxs("div",{className:"cap__health",children:[jsxRuntimeExports.jsx("span",{className:"cap__health-title",children:v("profile.power")}),jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",H.from,"-",H.to]})]}),_.cap?.grade&&!_.isGradeHide&&(_.variant==="small"||_.variant==="pve-small"||_.variant==="pvenew-small"||_.variant==="large")&&jsxRuntimeExports.jsx("div",{className:"cap__grade",children:getGradeTitle(_.cap.grade)}),_.collectionCounter&&jsxRuntimeExports.jsxs("div",{className:"cap__collection-counter",children:["x",_.collectionCounter]})]}),["pve-medium","medium"].includes(_.variant)&&_.selectedNumber&&_.selectedNumber>0?jsxRuntimeExports.jsx("div",{className:"cap__selected-number",children:_.selectedNumber}):null]})});function calculate(_,d,v,A,C,w,T,R,G){const I=document.getElementById("book-container").getBoundingClientRect().left,z=document.getElementById("book-container").offsetTop,H={},Y=A[0]-I,ee=A[1]-z;let ie=d-I,oe=v-z;ie>T?ie=T:ie<0&&(ie=0),oe>R?oe=R:oe<0&&(oe=0);let se=_==="right"?T:0,re=ee,fe=_==="right"?T-Y:Y;fe>ee&&(se=Y,re=0,fe=ee),fe>R-ee&&(se=Y,re=R),se>T?se=T:se<0&&(se=0),_==="right"&&ie>se?se=ie+1:_==="left"&&ie<se&&(se=ie-1);const ue=(ie-se)/(re-oe),ge=(ie+se)/2,ye=(oe+re)/2;let be=-ye/ue+ge,ve=0,Me=0;_==="right"?(be>T&&(be=T,ve=ue*(T-ge)+ye,Me=1),be<G&&(be=G)):_==="left"&&(be<0&&(be=0,ve=-ue*ge+ye,Me=1),be>G&&(be=G));let we=(R-ye)/ue+ge,Be=R,De=0;_==="right"?(we>T&&(we=T,Be=ue*(T-ge)+ye,De=1),we<G&&(we=G)):_==="left"&&(we<0&&(we=0,Be=-ue*ge+ye,De=1),we>G&&(we=G));const Fe=Be-ve,Oe=be-we,Ge=-(Fe*be+Oe*ve);function ze(Bn,Lt){return((Oe*Oe-Fe*Fe)*Bn-2*Fe*Oe*Lt-2*Fe*Ge)/(Fe*Fe+Oe*Oe)}function je(Bn,Lt){return((Fe*Fe-Oe*Oe)*Lt-2*Fe*Oe*Bn-2*Oe*Ge)/(Fe*Fe+Oe*Oe)}const He=ze(_==="right"?T:0,0),Xe=je(_==="right"?T:0,0),$e=ze(_==="right"?T:0,R),We=je(_==="right"?T:0,R);H.z0x=be,H.z0y=ve,H.z1x=we,H.z1y=Be;const nt=Math.atan2(We-Xe,$e-He)-Math.PI/2,Qt=dist$2(be,ve,He,Xe),Wt=dist$2(we,Be,$e,We);return H.x=_==="right"?He:He-G,H.y=Xe,H.r=nt,H.display="block",H.z0=Me,H.z1=De,Me===0&&De===0?_==="right"?(H.x1=0,H.y1=0,H.x2=Qt,H.y2=0,H.x3=Wt,H.y3=R,H.x4=0,H.y4=R):(H.x1=G-Qt,H.y1=0,H.x2=G,H.y2=0,H.x3=G,H.y3=R,H.x4=G-Wt,H.y4=R):Me===1?_==="right"?(H.x1=0,H.y1=R,H.x2=Wt,H.y2=R,H.x3=0,H.y3=R,H.x4=H.x3,H.y4=H.y3):(H.x1=G,H.y1=Qt,H.x2=G-Wt,H.y2=R,H.x3=G,H.y3=R,H.x4=H.x3,H.y4=H.y3):De===1&&(_==="right"?(H.x1=0,H.y1=0,H.x2=0,H.y2=0,H.x3=0,H.y3=R-Wt,H.x4=H.x3,H.y4=H.x3):(H.x1=G,H.y1=0,H.x2=G-Qt,H.y2=0,H.x3=G,H.y3=R-Wt,H.x4=H.x3,H.y4=H.x3)),C||(w?_==="right"?(H.x=0,H.x1=0,H.x2=G,H.x3=G,H.x4=0,H.y=0,H.y1=0,H.y2=0,H.y3=R,H.y4=R,H.r=0,H.z0x=G,H.z0y=0,H.z1x=G,H.z1y=R):(H.x=G,H.x1=0,H.x2=G,H.x3=G,H.x4=0,H.y=0,H.y1=0,H.y2=0,H.y3=R,H.y4=R,H.r=0,H.z0x=G,H.z0y=0,H.z1x=G,H.z1y=R):_==="right"?De===1?(H.y=0,H.x=T,H.x2=0,H.x3=0,H.x4=0,H.y1=0,H.y2=0,H.y3=0,H.z0x=0,H.z0y=0,H.z1x=0,H.z1y=0):Me===1?(H.x=T+He-$e,H.y=R+Xe-We,H.x1=0,H.y1=R,H.x2=0,H.y2=R,H.x3=H.x2,H.x4=H.x2,H.y3=H.y2,H.y4=H.y2,H.z0x=0,H.z0y=0,H.z1x=0,H.z1y=0):(H.r=0,H.y=0,H.x=T,H.x1=0,H.x2=0,H.x3=0,H.x4=0,H.y1=0,H.y2=0,H.y3=R,H.y4=R,H.z0x=0,H.z0y=0,H.z1x=0,H.z1y=0):De===1?(H.x=-G,H.y=0,H.x1=G,H.x2=G,H.x3=G,H.x4=G,H.x5=G,H.y1=0,H.y2=0,H.y3=0,H.y4=0,H.y5=0,H.z0x=0,H.z0y=0,H.z1x=0,H.z1y=0):Me===1?(H.x=-G,H.x1=G,H.x2=G,H.x3=G,H.x4=G,H.x5=G,H.y=R,H.y1=0,H.y2=0,H.y3=0,H.y4=0,H.y5=0,H.z0x=0,H.z0y=R,H.z1x=0,H.z1y=R):(H.r=0,H.y=0,H.x=-G,H.x1=G,H.x2=G,H.x3=G,H.x4=G,H.y1=0,H.y2=0,H.y3=R,H.y4=R,H.z0x=0,H.z0y=0,H.z1x=0,H.z1y=R)),H}function dist$2(_,d,v,A){const C=_-v,w=d-A;return Math.sqrt(C*C+w*w)}const fingerImage="/icons/finger.png",BOOK_WIDTH=568,BOOK_HEIGHT=73,pages=["one","two"],PAGE_WIDTH=BOOK_WIDTH/2,getSoundNumber=_=>{const d=BOOK_WIDTH,v=BOOK_WIDTH/2;return Math.floor((_-v)/(d-v)*9)+1},from=_=>({x:PAGE_WIDTH,y:0,x1:0,y1:0,x2:PAGE_WIDTH,y2:0,x3:PAGE_WIDTH,y3:BOOK_HEIGHT,x4:0,y4:BOOK_HEIGHT,x5:0,y5:BOOK_HEIGHT,z:_===0?2:_>=2?0:1,display:_<=2?"block":"none",bgPos:0,bgPosY:0,bgRad:0,bgHeight:BOOK_HEIGHT,bgDisplay:"none",bgY2:0,r:0,scaleX:1,index:0}),to=from,Book=({children:_,onFinishFlip:d,className:v})=>{const[A,C]=React.useState(!1),[w,T]=React.useState(!1),[R]=useAtom(tutorialAtom),[G,I]=useSprings(pages.length,se=>({...to(se),from:from(se)})),[z,H]=React.useState(0),ie=useGesture({onDrag:({args:[se],down:re,distance:fe,direction:[ue],movement:ge,initial:ye,xy:be,memo:ve})=>{if(T(!0),fe===0)return;const Me=ue<0?-1:1;let we=0,Be=0,De="none",Fe=0;const Oe=0;let Ge=BOOK_HEIGHT;const ze={friction:0,tension:re?0:100,clamp:!0,precision:0},je={x:PAGE_WIDTH,y:0,x1:0,y1:0,x2:PAGE_WIDTH,y2:0,x3:PAGE_WIDTH,y3:BOOK_HEIGHT,x4:0,y4:BOOK_HEIGHT,x5:0,y5:BOOK_HEIGHT,z:1,bgPos:0,bgPosY:0,bgRad:0,bgY2:0,bgHeight:BOOK_HEIGHT,bgDisplay:"none",display:"none",config:ze,onRest:null,immediate:!1,r:0,scaleX:1,index:se};let He;const Xe=document.getElementById("book-container").offsetLeft;ye[0]-Xe<=PAGE_WIDTH?He="left":ye[0]-Xe>PAGE_WIDTH||Me===-1?He="right":He="left";const $e=!re&&(ge[0]>100&&He==="left"||ge[0]<-100&&He==="right"),We=()=>{d(),C(!0)},nt=()=>{!re&&$e&&We()},Qt=calculate(He,be[0],be[1],ye,re,$e,BOOK_WIDTH,BOOK_HEIGHT,PAGE_WIDTH),Wt=Qt;if(I.start(Bn=>{let Lt=0,Mn=0,cr=0,In=0,Zn=0,$n=0,Rn=0,Dn=0;if(se===Bn){Math.abs(z-Qt.z0x)>HAPTIC_GAP&&(CapsWebApp.handleVibration("light"),z-Qt.z0x>BOOK_WIDTH/4?CapsWebApp.playSound("pack/open-start.mp3"):CapsWebApp.playSound(`pack/${z-Qt.z0x>0?"open":"close"}/${getSoundNumber(Qt.z0x)}.mp3`),H(Qt.z0x));let Gt=!1;if(Qt.z1===1){Lt=Qt.z0x-PAGE_WIDTH,cr=Qt.z1x-PAGE_WIDTH,In=Qt.z1y,Zn=PAGE_WIDTH,$n=BOOK_HEIGHT,Rn=0,Dn=BOOK_HEIGHT,!re&&!$e&&(Lt=PAGE_WIDTH,Mn=0,cr=PAGE_WIDTH,In=0,Zn=PAGE_WIDTH,$n=BOOK_HEIGHT,Rn=0,Dn=BOOK_HEIGHT),Lt=Qt.z0x;const Nn=Math.abs(PAGE_WIDTH-Lt),Xn=Math.abs(BOOK_HEIGHT-In);Be=-(Math.atan(Nn/Xn)*180/Math.PI),Ge=Math.sqrt(Xn*Xn+Nn*Nn),Fe=Ge-BOOK_HEIGHT,Gt=!0}else Qt.z0===1?(Lt=PAGE_WIDTH,Mn=0,cr=Qt.z0x-PAGE_WIDTH,In=Qt.z0y,Zn=Qt.z1x-PAGE_WIDTH,$n=Qt.z1y,Rn=0,Dn=BOOK_HEIGHT,!re&&!$e&&(cr=PAGE_WIDTH,In=BOOK_HEIGHT,Zn=PAGE_WIDTH,$n=BOOK_HEIGHT,Rn=0,Dn=BOOK_HEIGHT),In=BOOK_HEIGHT):(Lt=Qt.z0x-PAGE_WIDTH,cr=Qt.z1x-PAGE_WIDTH,In=Qt.z1y,$n=BOOK_HEIGHT,Rn=Zn,Dn=$n,!re&&!$e&&(Lt=PAGE_WIDTH,Mn=0,cr=PAGE_WIDTH,In=BOOK_HEIGHT,Zn=0,$n=BOOK_HEIGHT,Rn=0,Dn=BOOK_HEIGHT));if(!Gt){const Nn=Math.abs(Lt-cr),Xn=BOOK_HEIGHT;Be=-90+Math.atan(Xn/Nn)*180/Math.PI,Ge=Math.sqrt(Xn*Xn+Nn*Nn),Fe=Ge-BOOK_HEIGHT}const Jn={...je,display:"block",x:PAGE_WIDTH,x2:Lt,y2:Mn,x3:cr,y3:In,x4:Zn,y4:$n,x5:Rn,y5:Dn};return!re&&$e&&(Qt.z1===1||Qt.z0===1)?{r:0,x:PAGE_WIDTH,y:0,x1:0,y1:0,x2:PAGE_WIDTH-ve.x2,y2:0,x3:PAGE_WIDTH-ve.x2,y3:BOOK_HEIGHT,x4:0,y4:BOOK_HEIGHT,x5:0,y5:BOOK_HEIGHT,immediate:!0}:Jn}else if(Bn===se+1){Qt.x3>Qt.x2&&(Be=-Be),we=PAGE_WIDTH-Qt.x2,De="block";const Gt={...je,z:1,...Qt,onRest:()=>nt()};return!re&&$e&&(Qt.z1===1||Qt.z0===1)?{r:0,x:BOOK_WIDTH-ve.x2*2,y:0,x1:0,y1:0,x2:ve.x2,y2:0,x3:ve.x2,y3:BOOK_HEIGHT,x4:0,y4:BOOK_HEIGHT,x5:0,y5:BOOK_HEIGHT,immediate:!0,onRest:()=>{I.start(Jn=>{if(Jn===se)return{x2:PAGE_WIDTH-ve.x2,x3:PAGE_WIDTH-ve.x2,immediate:!0,onRest:()=>{I.start(Nn=>{if(Nn===se)return{immediate:!1,config:ze,x2:0,x3:0}})}};if(Jn===se+1)return Gt})}}:Gt}else if(Bn===se+2)return{index:se,bgPos:we,bgPosY:Fe,bgRad:Be,bgHeight:Ge,bgDisplay:De,bgY2:Oe,display:"block",immediate:!0,x:PAGE_WIDTH}}),re)return Wt},onScroll:se=>se,onHover:()=>!1},{}),oe=G.map(({x:se,y:re,x1:fe,y1:ue,x2:ge,y2:ye,x3:be,y3:ve,x4:Me,y4:we,x5:Be,y5:De,z:Fe,display:Oe,r:Ge,scaleX:ze},je)=>jsxRuntimeExports.jsx(animated.div,{style:{display:Oe,zIndex:Fe,backgroundPositionX:0,WebkitClipPath:to$1([fe,ue,ge,ye,be,ve,Me,we,Be,De],(He,Xe,$e,We,nt,Qt,Wt,Bn,Lt,Mn)=>(Lt===void 0&&(Lt=Wt),Mn===void 0&&(Mn=Bn),`polygon(${He}px ${Xe}px, ${$e}px ${We}px, ${nt}px ${Qt}px, ${Wt}px ${Bn}px, ${Lt}px ${Mn}px )`)),transformOrigin:je%2===0?PAGE_WIDTH+"px 0px":"0px 0px",transform:to$1([se,re,Ge,ze],(He,Xe,$e,We)=>`translateX(${He}px) translateY(${Xe}px) rotate(${$e}rad) scaleX(${We})`)},className:`page page--${je} `,...ie(je),children:_},je));return jsxRuntimeExports.jsxs("div",{id:"book-container",style:{width:BOOK_WIDTH,height:BOOK_HEIGHT},className:v,children:[A?null:oe,R==="shop"&&!w&&jsxRuntimeExports.jsx("img",{className:"book-finger",src:fingerImage,alt:"finger"})]})},Button=({children:_,size:d="large",variant:v="primary",fullWidth:A,isLoading:C,color:w="red",className:T,onClick:R,...G})=>{const I=ee=>{!C&&!G.disabled&&R?.(ee)},z=G.disabled?"nonactive":v,H=getBaseGrade(w),Y=[T,"button",`button-size-${d}`,`button-type-${z}`,`button-color-${H}`];return A&&Y.push("button-full"),jsxRuntimeExports.jsx("button",{className:Y.join(" "),onClick:I,...G,children:C?jsxRuntimeExports.jsxs("div",{className:"button-loading",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]}):_})},PopupContext=reactExports.createContext({});class TutorialService{async checkPveHasEnoughCaps(d){if(!(d.length>=3)){var v=`Can't complete toturial: not enough READY caps:
`;for(const A of d)v+=`- ${A.collectionId} #${A.number} ${A.status} (${A.id})
`;capsService.clientCustomAlert(v,firebaseService.token)}}async completeTutorialStep(d,v,A){if(!(A&&A.completedTutorialSteps&&A.completedTutorialSteps.includes(d)))return fetch("/functions/complete-tutorial-step",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({step:d})})}}const tutorialService=new TutorialService,CAPS_COUNT=3,Pack=_=>{const{t:d}=useTranslation(),{setPopup:v}=reactExports.useContext(PopupContext),A=reactExports.useRef(null),[C]=useAtom(tutorialAtom),w=useAction(nextTutorialAction),{appState:T}=useAppState(),[R,G]=reactExports.useState({status:0,items:[],nextPacks:_.nextPacks}),I=useNavigate(),z=useLocation(),{onUserAndPendingPacksUpdate:H}=useAppState(),[Y,ee]=reactExports.useState([capImage$1,capImage$1,capImage$1]),[ie,oe]=reactExports.useState({cap1:!1,cap2:!1,cap3:!1}),se=firebaseService.getPackTopPartUrl(_.collectionId),re=firebaseService.getPackBottomPartUrl(_.collectionId),fe="/packs/bottom-bg.svg",ue=()=>{G({...R,status:1}),CapsWebApp.playSound("pack/open-finish.mp3");const Fe=capsService.openPack(_.id,firebaseService.token).then(async Ge=>{const ze=Ge.map(He=>firebaseService.getCollectionCapUrl(He.url)),je=Ge.map(He=>getCoverUrl(He.grade.toLowerCase()));try{await preloadPromise([...je,...ze])}catch(He){console.error(He,je,ze)}return _.category=="first"&&tutorialService.completeTutorialStep("onboarding_welcome_pack_opened",firebaseService.token),tutorialService.completeTutorialStep("shop_pack_opened",firebaseService.token,T.user),G({...R,status:2}),ee([...je,...ze]),Ge}),Oe=new Promise((Ge,ze)=>{if(!A.current)console.error("animation element error"),ze("animation element error reject");else{const je=()=>{A.current?.removeEventListener("transitionend",je),Ge(null)};A.current?.addEventListener("transitionend",je)}});Promise.all([Fe,Oe]).then(([Ge])=>{G({...R,status:3,items:Ge})}).catch(Ge=>{console.error(Ge),v({message:d("shop.problemsDuringPackOpening"),type:"error"}),I("/home")})},[ge,ye]=reactExports.useState(!1),be=reactExports.useCallback(async()=>{if(_.multipleOpen){CapsWebApp.playSound("pack/open-start.mp3"),ye(!0);try{const Fe=await capsService.openMultiplePacks(_.multipleOpen,firebaseService.token);H(),G({...R,status:4,items:Fe,nextPacks:[]})}catch(Fe){console.error(Fe)}finally{ye(!1)}}},[_.multipleOpen,R]),ve=Fe=>{ie[Fe]||CapsWebApp.playSound(`pack/flip/${Fe}.mp3`),oe({...ie,[Fe]:!0})},Me=()=>{Object.values(ie).every(Fe=>Fe)&&(H(),G({...R,status:4}))},we=reactExports.useMemo(()=>R.status===1?"opening":R.status===2?"opening move":R.status===3?"opening move opened":"",[R.status]),Be=reactExports.useCallback(Fe=>{let Oe=`pack__open-cap-wrapper pack__open-${Fe}`;return Oe+=` ${we}`,ie[Fe]&&R.items[parseInt(Fe[Fe.length-1])-1]?.grade&&(Oe+=` pack__open-cap-${getBaseGrade(R.items[parseInt(Fe[Fe.length-1])-1].grade).toLowerCase()} flip`),Oe},[we,ie,R.items]),De=reactExports.useCallback(()=>{z.pathname.includes("/pack/")?I("/home"):_.onFinished?_.onFinished?.():I("/home")},[z.pathname,I,_]);switch(R.status){case 0:case 1:case 2:case 3:return jsxRuntimeExports.jsxs("div",{className:`pack__open ${we}`,onClick:Me,children:[jsxRuntimeExports.jsx("div",{className:`pack__open-title ${we}`,children:d("shop.swipeToOpen")}),jsxRuntimeExports.jsx(Book,{onFinishFlip:ue,className:`pack__open-top-wrapper animate ${we}`,children:jsxRuntimeExports.jsx("img",{className:"pack__open-top",src:se,alt:"Top part"})}),jsxRuntimeExports.jsxs("div",{className:`pack__open-bottom-parts animate ${we}`,children:[jsxRuntimeExports.jsx("img",{src:re,alt:"Bottom part",className:`pack__open-bottom ${we}`}),jsxRuntimeExports.jsx("img",{src:fe,alt:"Bottom background",className:`pack__open-bottom-bg ${we}`})]}),jsxRuntimeExports.jsxs("button",{className:Be("cap1"),onClick:()=>ve("cap1"),children:[jsxRuntimeExports.jsx("img",{className:"pack__open-cap front",src:Y[0],alt:"Cap",onClick:()=>ve("cap1")}),jsxRuntimeExports.jsx("img",{className:"pack__open-cap back",src:Y[CAPS_COUNT],alt:"Back side"})]}),jsxRuntimeExports.jsxs("button",{className:Be("cap2"),onClick:()=>ve("cap2"),children:[jsxRuntimeExports.jsx("img",{className:"pack__open-cap front",src:Y[1],alt:"Cap",onClick:()=>ve("cap2")}),jsxRuntimeExports.jsx("img",{className:"pack__open-cap back",src:Y[1+CAPS_COUNT],alt:"Back side"})]}),jsxRuntimeExports.jsxs("button",{ref:A,className:Be("cap3"),onClick:()=>ve("cap3"),children:[jsxRuntimeExports.jsx("img",{className:"pack__open-cap front",src:Y[2],alt:"Cap",onClick:()=>ve("cap3")}),C==="shop"&&!Object.values(ie).some(Fe=>Fe)&&jsxRuntimeExports.jsx("img",{className:"pack__open-cap-finger",src:fingerImage,alt:"Finger"}),jsxRuntimeExports.jsx("img",{className:"pack__open-cap back",src:Y[2+CAPS_COUNT],alt:"Back side"})]}),_.multipleOpen&&_.multipleOpen.length>1&&jsxRuntimeExports.jsx(Button,{color:"red",isLoading:ge,className:`pack__bottom-button ${we}`,disabled:!1,onClick:be,children:d("shop.openAllPacks",{count:_.multipleOpen.length})})]});case 4:{if(R.nextPacks&&R.nextPacks.length>0){const Oe=Array.from(R.nextPacks),Ge=Oe.shift();if(Ge)return jsxRuntimeExports.jsx(Pack,{id:Ge.id,collectionId:Ge.collectionId,nextPacks:Oe,prevCaps:R.items.concat(_.prevCaps??[]),onFinished:De})}const Fe=R.items.concat(_.prevCaps??[]).map(Oe=>jsxRuntimeExports.jsx(CapElement,{cap:Oe,variant:"medium"},Oe.id));return jsxRuntimeExports.jsxs("div",{className:"pack__caps",children:[jsxRuntimeExports.jsx("div",{className:"pack__caps-list",children:Fe}),jsxRuntimeExports.jsxs("div",{className:"pack__caps-buttons",children:[jsxRuntimeExports.jsxs(Button,{fullWidth:!0,variant:"secondary",className:"pack__caps-button",onClick:()=>{C==="shop"&&w(),I("/profile/")},children:[C==="shop"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pack__finger",alt:"finger"}),d("shop.viewAllMyCaps")]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,disabled:C==="shop",onClick:De,children:d("ok")})]})]})}}},vsImage="/icons/vs.png",swapImage="/icons/swap.svg",ExchangeResult=({result:_,isOwner:d})=>{const{appState:v}=useAppState();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"caps-vs-list__caps",children:_.rounds.map((A,C)=>{const w=d?A.ownerCap:A.opponentCap,T=d?A.opponentCap:A.ownerCap;return jsxRuntimeExports.jsxs("div",{className:"caps-vs-list__row",children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:!0,cap:w,variant:"medium"}),jsxRuntimeExports.jsx(CapElement,{isNew:!0,cap:T,variant:"medium"}),jsxRuntimeExports.jsx("img",{className:"caps-vs-list__image",src:swapImage,alt:"vs"})]},"round"+C)})})})},PvpResult=({result:_,isOwner:d})=>{const{appState:v}=useAppState();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"caps-vs-list__caps",children:_.rounds.map((A,C)=>{const w=d?A.owner:A.opponent,T=d?A.opponent:A.owner,R=d&&A.winner==="owner"||!d&&A.winner==="opponent",G=!d&&A.winner==="owner"||d&&A.winner==="opponent",I=R?"green":G?"red":void 0,z=G?"green":R?"red":void 0;return jsxRuntimeExports.jsxs("div",{className:"caps-vs-list__row",children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:G,power:w.power,cap:w.cap,powerColor:I,variant:"medium"}),jsxRuntimeExports.jsx(CapElement,{isNew:R,power:T.power,powerColor:z,cap:T.cap,variant:"medium"}),jsxRuntimeExports.jsx("img",{className:"caps-vs-list__image",src:vsImage,alt:"vs"})]},"round"+C)})})})},GameResults=({game:_,onAgainClick:d})=>{const{onUserUpdate:v}=useAppState(),{t:A}=useTranslation(),C=useNavigate(),{setPopup:w}=reactExports.useContext(PopupContext),[T,R]=reactExports.useState(!1);reactExports.useEffect(()=>{v()},[]),_.caps.length!==_.bids?.[0]?.caps.length&&(w({message:"Invalid game",type:"error"}),C("/"));const G=_.owner.id.toString()==firebaseService.user?.uid,I=getName(G&&_.resultBid?_.resultBid.user:_.owner),z=async()=>{R(!0);try{await d()}finally{R(!1)}};return jsxRuntimeExports.jsxs("div",{className:"game__results",children:[jsxRuntimeExports.jsxs("div",{className:"game__results-first",children:[jsxRuntimeExports.jsx("div",{className:"game__results-title",children:A(_.mode=="pvp"?"game.yourGameIsOver":"game.yourExchangeIsOver")}),jsxRuntimeExports.jsxs("div",{className:"caps-vs-list__titles",children:[jsxRuntimeExports.jsx("div",{className:"caps-vs-list__title",children:A(_.mode=="pvp"?"game.yourBet":"game.yourExchangeCaps")}),jsxRuntimeExports.jsx("div",{children:I})]}),_.pvpResult&&jsxRuntimeExports.jsx(PvpResult,{result:_.pvpResult,isOwner:G}),_.exchangeResult&&jsxRuntimeExports.jsx(ExchangeResult,{result:_.exchangeResult,isOwner:G})]}),jsxRuntimeExports.jsxs("div",{className:"game__waiting-buttons",children:[jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:()=>C("/profile"),variant:"secondary",children:A("game.seeAllMyCaps")}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:z,isLoading:T,children:A("game.playAgain")})]})]})},explosionBgImage="/explosion-bg.png",logoImage="/logo.png",Loading=reactExports.forwardRef(({className:_},d)=>{const{t:v}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`loading ${_??""}`,ref:d,children:[jsxRuntimeExports.jsx("div",{className:"loading-logo-wrapper",children:jsxRuntimeExports.jsx("img",{src:logoImage,className:"loading-logo",alt:"Logo"})}),jsxRuntimeExports.jsx("div",{className:"loading__text",children:v("loading")})]})}),sadImage="/icons/sad.png",diamondImage="/icons/diamond.png",homeImage="/icons/home.png",shopImage$1="/icons/shop.png",stakingImage="/icons/staking.png",profileImage="/icons/profile.png",NavBar=({className:_})=>{const d=useNavigate(),{t:v}=useTranslation(),A=useLocation(),[C]=useAtom(tutorialAtom),w=useAction(nextTutorialAction),{appState:T}=useAppState(),[R]=useAtom(userAtom);return jsxRuntimeExports.jsxs("nav",{className:`nav ${_??""} ${C==="shop"&&!A.pathname.includes("/earn")||C==="upgraded"||C==="profile"&&!A.pathname.includes("/profile")?"tutorial__dimmer":""}`,children:[jsxRuntimeExports.jsxs("button",{className:`nav__item ${A.pathname.includes("/profile")?"nav__item--active":""} ${C==="profile"&&!A.pathname.includes("/profile")?"nav__item--tutorial":""}`,onClick:()=>d("/profile/"),children:[C==="profile"&&!A.pathname.includes("/profile")&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger nav__finger",alt:"finger"}),jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"tasks"}),jsxRuntimeExports.jsx("span",{children:R.caps_mycaps.count>10?R.caps_mycaps.count:v("nav.caps")})]}),jsxRuntimeExports.jsxs("button",{className:`nav__item ${A.pathname.includes("/tasks")?"nav__item--active":""}`,onClick:()=>d("/tasks/"),children:[jsxRuntimeExports.jsx("img",{src:diamondImage,alt:"tasks"}),jsxRuntimeExports.jsx("span",{children:v("nav.tasks")})]}),jsxRuntimeExports.jsxs("button",{className:`nav__item ${A.pathname.includes("/home")||A.pathname=="/"?"nav__item--active":""} ${C==="upgraded"?"nav__item--tutorial":""}`,onClick:()=>{d("/home/"),tutorialService.completeTutorialStep("profile_upgrade_finished",firebaseService.token,T.user),C=="upgraded"&&w()},children:[C==="upgraded"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger nav__finger",alt:"finger"}),jsxRuntimeExports.jsx("img",{src:homeImage,alt:"home"}),jsxRuntimeExports.jsx("span",{children:v("nav.home")})]}),jsxRuntimeExports.jsxs("button",{className:`nav__item ${A.pathname.includes("/earn")?"nav__item--active":""} ${C==="shop"&&!A.pathname.includes("/earn")?"nav__item--tutorial":""}`,onClick:()=>{d("/earn/"),tutorialService.completeTutorialStep("shop_opened",firebaseService.token,T.user)},children:[C==="shop"&&!A.pathname.includes("/earn")&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger nav__finger",alt:"finger"}),jsxRuntimeExports.jsx("img",{src:shopImage$1,alt:"earn"}),jsxRuntimeExports.jsx("span",{children:v("nav.shop")})]}),jsxRuntimeExports.jsxs("button",{className:`nav__item ${A.pathname.includes("/staking")?"nav__item--active":""}`,onClick:()=>d("/staking/"),children:[jsxRuntimeExports.jsx("img",{src:T.capsGd?.status.isTokenEnabled?stakingImage:profileImage,alt:"staking"}),jsxRuntimeExports.jsx("span",{children:T.capsGd?.status.isTokenEnabled?v("nav.token"):v("nav.profile")})]})]})},plusImage$2="/icons/plus-start.svg",GameComment=({comment:_,className:d=""})=>jsxRuntimeExports.jsx("div",{className:`game-comment ${d}`,children:_}),GameCapsListSkeleton=({className:_})=>jsxRuntimeExports.jsxs("div",{className:`game-caps-list game-caps-list--skeleton ${_??""}`,children:[jsxRuntimeExports.jsx("div",{className:"game-caps-list__first",children:jsxRuntimeExports.jsx("div",{className:"game-caps-list__title"})}),jsxRuntimeExports.jsxs("div",{className:"game-caps-list__caps",children:[jsxRuntimeExports.jsx(CapElementSkeleton,{size:"small"}),jsxRuntimeExports.jsx(CapElementSkeleton,{size:"small"}),jsxRuntimeExports.jsx(CapElementSkeleton,{size:"small"})]})]}),GameCapsListFirstSkeleton=({className:_})=>jsxRuntimeExports.jsxs("div",{className:`game-caps-list game-caps-list--skeleton ${_??""}`,children:[jsxRuntimeExports.jsx("div",{className:"game-caps-list__first",children:jsxRuntimeExports.jsx("div",{className:"game-caps-list__title"})}),jsxRuntimeExports.jsxs("div",{className:"game-caps-list__caps",children:[jsxRuntimeExports.jsx("div",{className:"cap__element--small game-caps-list__cap",children:jsxRuntimeExports.jsx("div",{className:"cap__img-wrapper ",children:jsxRuntimeExports.jsx("img",{src:plusImage$2,alt:"plus",className:"battle-games__cap--plus-skeleton cap__img"})})}),jsxRuntimeExports.jsx(CapElementSkeleton,{size:"small"})]})]}),GameCapsList=({game:_,showPreferences:d,onButtonClick:v,user:A,isCommentShow:C,bid:w})=>{const{t:T}=useTranslation(),R=_.owner.id.toString(),G=R==firebaseService.user.uid,I=_.bids?.find(oe=>oe.user.id.toString()==firebaseService.user?.uid&&oe.status=="READY"),z=_.bids?.filter(oe=>oe.status=="READY"),H=useAction(showLeaderboardUserIdAtom),Y=_.status=="FINISHED"&&_.result&&_.resultBid?calculateGameResults(_.result,G?_.caps:_.resultBid.caps,G?R:_.resultBid.user.id.toString()):{caps:w?w.caps:_.caps,newCapIds:new Map,lostCapIds:new Map},ee=reactExports.useMemo(()=>{if(_.status=="FINISHED")return T("battle.seeDetails");if(_.status==="WAITING"&&!G&&I)return T("game.waitingForOpponent");if(_.status=="WAITING"&&w)return T("game.openBet");if(G)return`${_.mode=="pvp"?T("battle.seeBets"):T("battle.seeOffers")} (${z&&z.length>0?z.length:"0"})`},[w,z,_.status,G,I,T]),ie=()=>_.status!=="FINISHED"?A:_.owner.id.toString()==firebaseService.user.uid&&_.resultBid?_.resultBid.user:_.owner;return jsxRuntimeExports.jsxs("div",{className:"game-caps-list",onClick:()=>v?.(_),children:[jsxRuntimeExports.jsxs("div",{className:"game-caps-list__first",children:[jsxRuntimeExports.jsx("button",{className:"game-caps-list__title",onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),H(ie().id)},children:getName(ie())}),_.type=="private"?jsxRuntimeExports.jsx("div",{className:"game-caps-list__private",children:T("battle.private")}):"",jsxRuntimeExports.jsxs("div",{className:"game-caps-list__created",children:[getDateString(_.finishedAt?_.finishedAt:_.createdAt)," "]}),jsxRuntimeExports.jsx("div",{className:"game-caps-list__text ",children:ee})]}),jsxRuntimeExports.jsx("div",{className:"game-caps-list__caps",children:Y.caps.map(oe=>jsxRuntimeExports.jsx(CapElement,{className:"game-caps-list__cap",isNew:Y.newCapIds.has(oe.id),isRemoved:Y.lostCapIds.has(oe.id),variant:"small",cap:oe},_.id+":"+oe.id+Math.random()))}),_.preferences&&d&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"game-caps-list__preferences-title",children:T(_.mode=="pvp"?"battle.acceptBets":"battle.acceptOffers")}),jsxRuntimeExports.jsx("div",{className:"game-caps-list__preferences",children:_.preferences.map(oe=>jsxRuntimeExports.jsx(PreferenceCaps,{preference:oe}))})]}),C&&_.comment&&jsxRuntimeExports.jsx(GameComment,{comment:_.comment})]})};function PreferenceCaps({preference:_}){const d=(v,A)=>{const C=`${A}.png`,w=`collections/${v}/${C}`;return{id:v+"/"+C,createdAt:Timestamp.now(),url:w,number:-1,collection:"",collectionId:v,collectionNumber:A,grade:"",gradeNumber:-1,owner:"",status:"READY",packId:"",isNft:!1}};return _.numbers?_.numbers.map(v=>{const A=d(_.collectionId,v);return jsxRuntimeExports.jsx("div",{className:"game-caps-list__preferences-cap",children:jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:A,className:""})},_.collectionId+v)}):jsxRuntimeExports.jsxs("div",{className:"game-caps-list__preferences-cap game-caps-list__preferences-cap--any",children:[jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:d(_.collectionId,1),className:""}),jsxRuntimeExports.jsx("div",{className:"game-caps-list__preferences-any",children:"Any"})]})}const useSkeletonLoading=({defaultState:_,skeletonRef:d}={defaultState:"initial"})=>{const[v,A]=reactExports.useState(_??"initial"),C=v==="loading"||v==="skeleton-to-data",w=v==="skeleton-to-data"||v==="loaded";return reactExports.useEffect(()=>{v==="loading"&&new Promise(R=>{const G=d?.current?d.current:document.querySelector(".skeleton"),I=()=>{G.removeEventListener("transitionend",I),R(null)};G.addEventListener("transitionend",I)}).then(()=>{A("loaded")})},[v]),{loadingState:v,setLoadingState:A,isSkeletonShow:C,isDataShow:w}},switchImage="/icons/switch-horizontal.svg",useClosing=({isShow:_=!1,onClose:d=()=>{},timeout:v=300})=>{const[A,C]=reactExports.useState(!1),w=()=>{_&&(C(!0),setTimeout(()=>{d()},v))};return reactExports.useEffect(()=>{_&&C(!1)},[_]),{isClosing:A,handleClose:w}},Select=({options:_,value:d=_[0].value,onChange:v,children:A,className:C,isLabelShow:w=!0})=>{const[T,R]=reactExports.useState(!1),G=()=>{R(!1)},{isClosing:I,handleClose:z}=useClosing({isShow:T,onClose:G});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`select ${C??""}`,onClick:()=>R(!0),children:[A,w&&_.find(H=>H.value===d)?.labelSelect]}),reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:`bottom-sheet__wrapper ${T?"visible":""} ${I?"closing":""} `,onClick:z,children:jsxRuntimeExports.jsxs("div",{className:`select__block ${T?"visible":""}  ${I?"closing":""} `,onClick:H=>{H.preventDefault(),H.stopPropagation()},children:[jsxRuntimeExports.jsx("div",{className:"select__options",children:_.map(H=>jsxRuntimeExports.jsx("div",{onClick:()=>{v(H.value),z()},className:`select__option ${d===H.value?"select__option--active":""}`,children:H.labelOption},H.value))}),jsxRuntimeExports.jsx("div",{className:"select__cancel",onClick:z,children:"Cancel"})]})}),document.getElementById("root"))]})},useStorage=(_,d=!1)=>{const[v,A]=reactExports.useState(()=>{try{const w=window.localStorage.getItem(_);return w?JSON.parse(w):d}catch(w){return console.error("useStorage init",w),!1}});return[v,w=>{try{A(w),window.localStorage.setItem(_,JSON.stringify(w))}catch(T){console.error("useStorage set",T)}}]},groupGradesMapLowestFirst$1=new Map([["common","Common & Common+"],["rare","Rare & Rare+"],["epic","Epic & Epic+"],["legend","Legend & Legend+"],["diamond","Diamond"]]),groupGradesMapHighestFirst$1=new Map([...groupGradesMapLowestFirst$1].reverse()),groupCapsByGrade$1=(_,d)=>{const v=new Map,A=d?groupGradesMapHighestFirst$1:groupGradesMapLowestFirst$1;for(const[,C]of A)v.set(C,[]);for(const C of _){const w=A.get(getBaseGrade(C.grade).toLowerCase());w&&(v.has(w)?v.get(w)?.push(C):v.set(w,[C]))}for(const C of v)C[1].length===0&&v.delete(C[0]);return v},getGroupByDate=_=>{if(!_)return instance.t("datetime.older");const d=Date.now()-6048e5;if(_.toMillis()>d)return instance.t("datetime.thisWeek");const v=Date.now()-2592e6;return _.toMillis()>v?instance.t("datetime.thisMonth"):instance.t("datetime.older")},groupCapsByDate=_=>_.reduce((d,v)=>{const A=getGroupByDate(v.lastChangedAt);return d.has(A)?d.get(A)?.push(v):d.set(A,[v]),d},new Map),convertGroupCapsByToBackend$1=_=>{switch(_){case"grade":return{orderByField:"gradeNumber",directionStr:"asc",onlyNfts:!1};case"grade-highest":return{orderByField:"gradeNumber",directionStr:"desc",onlyNfts:!1};case"nft":return{orderByField:"gradeNumber",directionStr:"desc",onlyNfts:!0};case"number":return{orderByField:"number",directionStr:"asc",onlyNfts:!1};case"upgrade":return{orderByField:"upgrade",directionStr:"desc",onlyNfts:!1};default:case"date":return{orderByField:"lastChangedAt",directionStr:"desc",onlyNfts:!1}}},useSortCaps$1=(_,d)=>{const{t:v}=useTranslation(),{appState:A}=useAppState(),[C,w]=reactExports.useState(!1),[T,R]=useStorage("capsSort","grade"),[G,I]=reactExports.useState(0),z=reactExports.useMemo(()=>[{labelOption:v("profile.gradeHighest"),labelSelect:v("profile.grade"),value:"grade-highest"},{labelOption:v("profile.gradeLowest"),labelSelect:v("profile.grade"),value:"grade"},{labelOption:v("profile.nftOnly"),labelSelect:v("profile.nftOnly"),value:"nft"},{labelOption:v("profile.date"),labelSelect:v("profile.date"),value:"date"},{labelOption:v("profile.number"),labelSelect:v("profile.number"),value:"number"},{labelOption:v("profile.upgradeAvailable"),labelSelect:v("profile.upgradeAvailableLabel"),value:"upgrade"}],[v,A]),H=reactExports.useCallback(async({lastCap:re,groupCapsBy:fe})=>{const{orderByField:ue,directionStr:ge,onlyNfts:ye}=convertGroupCapsByToBackend$1(fe??T),be=ue!=="upgrade"?await firebaseService.getMyCaps(ue,ge,ye,re):await(async()=>{const{caps:ve,lastDocument:Me,chunk:we}=await firebaseService.getMyCapsAvailableForUpgrade(A.user,re,G);return I(we),{caps:ve,lastDocument:Me}})();if(be.caps.length>0){const ve=be.caps.map(Me=>firebaseService.getCollectionCapUrl(Me.url));await preloadPromise(ve)}return be},[T,A,G]),Y=reactExports.useCallback(async({groupCapsBy:re})=>(I(0),R(re),await H({groupCapsBy:re})),[H,R]),ee=reactExports.useCallback(async({lastCap:re})=>{w(!0);const fe=await H({lastCap:re});return w(!1),fe},[H]),ie=reactExports.useMemo(()=>d==="loading"?new Map([["",_]]):T==="grade"?groupCapsByGrade$1(_,!1):T==="grade-highest"||T==="nft"?groupCapsByGrade$1(_,!0):T==="date"?groupCapsByDate(_):new Map([["",_]]),[T,d,_]),oe=reactExports.useMemo(()=>convertGroupCapsByToBackend$1(T),[T]),se=reactExports.useCallback(async()=>{const re=await firebaseService.getUser(firebaseService.user.uid.toString()),fe=new Map;for(const ue of re.caps_mycaps.collections){const ge=new Map;for(const ye of ue.caps)ge.set(ye.number,{count:ye.count,grades:ye.grades});fe.set(ue.collectionId,ge)}return{myCapsMap:fe,user:re}},[]);return{groupedCaps:[...ie],groupCapsBy:T,groupCapsByToBackend:oe,setGroupCapsBy:R,groupCapsOptions:z,loadCapsByGroup:Y,loadMoreCaps:ee,isMoreLoading:C,loadCaps:H,loadUserAndMyCapsMap:se}},SelectUpgradeResource=_=>{const{setPopup:d}=reactExports.useContext(PopupContext),v=reactExports.useRef(null),{loadingState:A,setLoadingState:C,isSkeletonShow:w}=useSkeletonLoading({defaultState:"initial",skeletonRef:v}),{t:T}=useTranslation(),{appState:R}=useAppState(),[G,I]=reactExports.useState({caps:[]}),z=useNavigate(),[H]=useAtom(tutorialAtom);return reactExports.useEffect(()=>{(async()=>{C("loading");const Y=await firebaseService.getMyCollectionCaps({collectionId:_.collectionId,number:_.number,grade:_.grade});I({...G,caps:Y.filter(_.filter)}),C("skeleton-to-data")})()},[]),jsxRuntimeExports.jsxs("div",{className:"upgrade__caps-list",children:[w&&jsxRuntimeExports.jsx("div",{ref:v,className:`upgrade__caps-list skeleton fade-out fade--long ${A==="skeleton-to-data"?"visible":""}`,children:[...Array(6)].map((Y,ee)=>jsxRuntimeExports.jsx(CapElementSkeleton,{size:"medium"},ee))}),A==="loaded"&&G.caps.length===0&&jsxRuntimeExports.jsxs("div",{className:"upgrade-no-resources",children:[jsxRuntimeExports.jsx("img",{src:sadImage,className:"upgrade-no-resources__image",alt:"sad"}),jsxRuntimeExports.jsx("div",{className:"upgrade-no-resources__text",children:T("upgrade.noUpgradeResources")}),jsxRuntimeExports.jsx(Button,{onClick:()=>{z("/earn")},children:T("upgrade.goToEarn")})]}),G.caps.map(Y=>jsxRuntimeExports.jsx(CapElement,{variant:"medium",cap:Y,onClickCallback:()=>{Y.status!="READY"?d({message:"The cap can't be used in the upgrade",type:"error"}):_.onSelected(Y)},children:H==="profile"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger upgrade__cap-finger",alt:"finger"})},Y.id))]})},arrowImage="/arrow.svg",plusImage$1="/icons/plus-red.svg",Upgrade$1=_=>{const{setPopup:d}=reactExports.useContext(PopupContext),{appState:v}=useAppState(),[A]=useAtom(tutorialAtom),[C,w]=reactExports.useState({selectingUpgradeResource:-1,upgradeResourcesCaps:new Map,upgradeProgress:!1}),T=reactExports.useCallback(()=>{C.selectingUpgradeResource>-1?w({...C,selectingUpgradeResource:-1}):_.onBackPressed()},[C,_]);useBackClick(T);const{t:R}=useTranslation(),G=async()=>{w({...C,upgradeProgress:!0});try{const oe=[];for(let se=0;se<_.upgradeResources.length;se++){const re=C.upgradeResourcesCaps.get(se);if(re)oe.push(re.id);else return}await capsService.upgradeCap(_.cap.id,oe,firebaseService.token),await _.onUpgrade(_.cap.id),CapsWebApp.playSound("caps-upgrade/finished.mp3")}catch{d({message:"Some problem occurred during burning",type:"error"})}w({...C,upgradeProgress:!1})},I=_.price>v.coinsBalance||_.upgradeResources.length!=C.upgradeResourcesCaps.size;if(C.selectingUpgradeResource>-1){const oe=_.upgradeResources[C.selectingUpgradeResource],se=re=>!(re.id==_.cap.id||[...C.upgradeResourcesCaps.values()].filter(fe=>fe.id===re.id).length!=0||re.status!="READY");return jsxRuntimeExports.jsx(SelectUpgradeResource,{collectionId:oe.equalCap||oe.equalCollection?_.cap.collectionId:void 0,grade:oe.grade?oe.grade:oe.equalCap?_.cap.grade:void 0,number:oe.equalCap?_.cap.collectionNumber:void 0,filter:se,onSelected:re=>{C.upgradeResourcesCaps.set(C.selectingUpgradeResource,re),w({...C,selectingUpgradeResource:-1})}})}const z=_.upgradeResources.map((oe,se)=>{const re={id:_.cap.id,createdAt:Timestamp.now(),url:_.cap.url,collection:_.cap.collection,collectionId:_.cap.collectionId,collectionNumber:_.cap.collectionNumber,grade:oe.grade?oe.grade:oe.equalCap?_.cap.grade:"",gradeNumber:-1,number:-1,owner:"",status:"READY",packId:"",isNft:!1},fe=C.upgradeResourcesCaps.get(se);return jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[!fe&&jsxRuntimeExports.jsx("img",{src:plusImage$1,className:"upgrade__resources-cap__plus",alt:"plus"}),A==="profile"&&I&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger upgrade__finger",alt:"finger"}),jsxRuntimeExports.jsx(CapElement,{variant:"small",className:fe?"":"upgrade__empty-slot",cap:fe||re,onClickCallback:()=>{w({...C,selectingUpgradeResource:se})}}),jsxRuntimeExports.jsxs("div",{className:"upgrade__resources-cap__description",children:[jsxRuntimeExports.jsx("b",{children:oe.equalCap||oe.equalCollection?_.cap.collection:R("upgrade.any")}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"upgrade__resources-cap__title",children:[R("profile.grade"),":"]})," ",oe.grade?getGradeTitle(oe.grade):oe.equalCap?getGradeTitle(_.cap.grade):R("upgrade.any"),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"upgrade__resources-cap__title",children:[R("profile.number"),":"]})," ",oe.equalCap?_.cap.collectionNumber:R("upgrade.any"),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"upgrade__resources-cap__number",children:["#",fe?fe.number:"000000"]})]})]},se)}),H={..._.cap,grade:UPGRADE_GRADE[_.cap.grade.toLowerCase()].toUpperCase()},Y=getCapGdGrade(_.cap,_.capsGd),ee=getCapGdGrade(H,_.capsGd),ie=_.cap?firebaseService.getCustomBackground(H,"upgrade",v.capsCollections):void 0;return jsxRuntimeExports.jsxs("div",{className:"upgrade",children:[jsxRuntimeExports.jsxs("div",{className:"upgrade__caps",style:ie?{"--cap-bg-url":`url(${ie})`}:void 0,children:[jsxRuntimeExports.jsxs("div",{className:"upgrade__cap",children:[jsxRuntimeExports.jsx(CapElement,{variant:"small",isBg:!0,cap:_.cap}),Y&&jsxRuntimeExports.jsxs("div",{className:"upgrade__power",children:[jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",R("profile.power"),":"," ",Y.from,"-",Y.to]})]}),jsxRuntimeExports.jsx("img",{src:arrowImage,alt:"arrow",className:"upgrade__arrow"}),jsxRuntimeExports.jsxs("div",{className:"upgrade__cap",children:[jsxRuntimeExports.jsx(CapElement,{variant:"small",isBg:!0,cap:H}),ee&&jsxRuntimeExports.jsxs("div",{className:"upgrade__power",children:[jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",R("profile.power"),":"," ",ee.from,"-",ee.to]})]})]}),jsxRuntimeExports.jsx("div",{className:"upgrade__title",children:R("upgrade.resourcesList")}),jsxRuntimeExports.jsx("div",{className:"upgrade__resources",children:z}),jsxRuntimeExports.jsxs("div",{className:"upgrade__button",children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[R("shop.yourBalance"),":"]})," ",formatNumber(v.coinsBalance),jsxRuntimeExports.jsx("img",{src:gumImage$2,className:"pack__balance-icon",alt:"gum icon"})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:C.upgradeProgress,disabled:I,className:"upgrade__button-btn",color:H.grade.toLowerCase(),onClick:()=>{CapsWebApp.playSound("caps-upgrade/upgrade.mp3"),CapsWebApp.showPopup({message:R("upgrade.upgradeConfirmation",{number:_.cap.collectionNumber,price:_.price}),buttons:[{id:"cancel",type:"cancel"},{id:"burn",type:"default",text:""}]}).then(oe=>{oe=="burn"&&(tutorialService.completeTutorialStep("profile_cap_upgraded",firebaseService.token,v.user),CapsWebApp.playSound("caps-upgrade/upgrade-fire.mp3"),G())})},children:[A==="profile"&&!I&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger upgrade__button-finger",alt:"finger"}),R("upgrade.upgradeForBtn",{price:formatNumber(_.price)})," ",jsxRuntimeExports.jsx("img",{className:"upgrade__gem",src:gumImage$2,alt:"gem image"})]})]})]})},nftImage="/icons/nft.png",fireImage="/icons/fire.png",sellImage="/icons/sell.png",Info=({isShow:_,children:d,buttons:v,bottom:A,onClose:C,className:w})=>{const{t:T}=useTranslation();return jsxRuntimeExports.jsx("div",{className:`info__wrapper ${_?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`info__container ${_?"visible":""} ${w||""}`,children:[C&&jsxRuntimeExports.jsx("button",{className:"bottom-sheet__hide",onClick:C,children:T("hide")}),d,v,A]})})},BuyCapSureInfo=({onComplete:_,isShow:d,cap:v,onClose:A})=>{const{t:C}=useTranslation(),[w,T]=reactExports.useState(!1),{setPopup:R}=reactExports.useContext(PopupContext),{onUserUpdate:G}=useAppState(),I=async()=>{T(!0);try{const H=await capsService.buyCap(v,firebaseService.token);await G(),_(H)}catch{R({message:C("shop.problemsBuyCap"),type:"error"})}finally{T(!1)}},z=()=>{w||A()};return jsxRuntimeExports.jsxs(Info,{isShow:d,onClose:z,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:z,fullWidth:!0,variant:"secondary",children:C("no")}),jsxRuntimeExports.jsx(Button,{onClick:I,fullWidth:!0,isLoading:w,children:C("yes")})]}),children:[jsxRuntimeExports.jsx("div",{className:"staking-confirm__cap",children:jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:v,isNumberShow:!0})}),jsxRuntimeExports.jsx("div",{className:"staking-confirm__description",children:C("shop.buyCapConfirmation",{price:v.price/1e9})})]})};function toFixedDown(_,d){const v=Math.pow(10,d),A=Math.floor(_*v)/v;return Number(A.toFixed(d))}const PriceInput=({price:_,onChange:d,description:v,maxBalance:A,currency:C="ton"})=>{const[w,T]=reactExports.useState(_>0?_.toString():"");reactExports.useEffect(()=>{parseFloat(w)!==_&&T(_===0?"":_.toString())},[_]);const R=G=>{let I=G.target.value.replace(",",".");I=I.replace(/[^0-9.]/g,"");let z="";if(C==="ton"){let Y=I.split(".");Y.length>2&&(Y=[Y[0],Y[1]]),Y[1]&&(Y[1]=Y[1].slice(0,2)),z=Y.join("."),z.startsWith(".")&&(z="0"+z)}else z=I.replace(/\..*/,"");if(/^0\d/.test(z)&&(z=z.replace(/^0+(?=\d)/,"")),z===""){T(""),_!==0&&d(0);return}const H=parseFloat(z);T(z),!isNaN(H)&&H!==_&&d(H)};return jsxRuntimeExports.jsxs("div",{className:"price-input",children:[jsxRuntimeExports.jsxs("div",{className:"price-input__wrapper",children:[jsxRuntimeExports.jsx("div",{className:"price-input__icon",children:jsxRuntimeExports.jsx("img",{className:`price-input__icon-img ${C==="gum"?"price-input__icon-img--gum":""}`,src:assetImage(C),alt:"ton"})}),jsxRuntimeExports.jsx("input",{type:"text",value:w,onChange:R,className:"price-input__input",placeholder:"0.00",inputMode:"decimal"})]}),jsxRuntimeExports.jsxs("div",{className:"price-input__bottom-row",children:[v&&jsxRuntimeExports.jsx("div",{className:"price-input__description",children:v}),A!==void 0&&jsxRuntimeExports.jsx("button",{type:"button",className:"price-input__max-button",onClick:()=>{d(toFixedDown(A,2))},children:"Max"})]})]})},MAX_PRICE=99,MIN_PRICE=.1,SellInfo=({onComplete:_,cap:d,isShow:v,onClose:A})=>{const{t:C}=useTranslation(),[w,T]=reactExports.useState(!1),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState(0),{appState:z}=useAppState(),H=Math.min(z.capsGd?.fees.marketplace??1,getSquadLevel(z.squad,z.capsGd)?.marketplaceFee??1),Y=G*(1-H),ee=()=>{w||(I(0),A())},ie=async()=>{T(!0);try{const oe=await capsService.sell(d,G*1e9,firebaseService.token);_(oe),T(!1)}catch{T(!1),R({message:C("shop.problemsSell"),type:"error"})}};return jsxRuntimeExports.jsxs(Info,{isShow:v,onClose:ee,buttons:jsxRuntimeExports.jsx(Button,{onClick:ie,fullWidth:!0,disabled:MIN_PRICE>G||MAX_PRICE<G,isLoading:w,children:C("info.sellButton")}),children:[jsxRuntimeExports.jsx("div",{className:"sell-info__title",children:C("info.sellTitle")}),jsxRuntimeExports.jsx("div",{className:"staking-confirm__description",children:C("info.sellDescription",{percent:H*100})}),jsxRuntimeExports.jsx(PriceInput,{description:C("info.sellFee",{fee:H*100}),price:G,onChange:I}),jsxRuntimeExports.jsx("div",{className:"sell-info__bottom",children:MIN_PRICE>G||MAX_PRICE<G?jsxRuntimeExports.jsx("div",{className:"sell-info__ton",children:C("settings.invalidAmount")}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"sell-info__receive",children:C("info.sellReceive")}),jsxRuntimeExports.jsx("div",{className:"sell-info__ton",children:`${roundNumber(Y)} TON`})]})})]})};function getApplySkinPrice(_,d,v){const A=v.skins.types[_];if(!A)return 0;const C=A.prices??v.skins.prices;if(!d.skin)return C[0].price;for(var w=C.length-1;w>=0;w--){const T=C[w];if(T.from<=d.skin.rerolls)return T.price}return C[v.skins.prices.length-1].price}function skinToText(_,d){const v=d?.skins.types[_.source];if(!v)return"";const A=[],C=v.meta?.title??v.title;return C.length>0&&A.push(C),_.shape&&A.push(prettyTextFromId(_.shape)),A.push(prettyTextFromId(_.skin)),A.push(prettyTextFromId(_.type)),A.join(", ")}function prettyTextFromId(_){return _.replace(/([a-z])([A-Z])/g,"$1 $2").split(" ").map(A=>capitalize$1(A)).join(" ")}const diskDriveImage="/icons/disk-drive.png",insertImage="/icons/insert.png",allSkinsAchievements=new Map([["collector",[{material:"bronze",req:10},{material:"silver",req:15},{material:"gold",req:20},{material:"black",req:30},{material:"blackGold",req:45}]],["dealMaker",[{material:"bronze",req:250},{material:"silver",req:500},{material:"gold",req:1e3},{material:"blackGold",req:5e3}]],["pvpChampion",[{material:"black",req:125},{material:"purple",req:250},{material:"orange",req:500},{material:"pink",req:2500}]],["marketMover",[{material:"bronze",req:15},{material:"silver",req:50},{material:"gold",req:150},{material:"black",req:250},{material:"blackGold",req:500}]],["cgHustler",[{material:"silver",req:3},{material:"gold",req:6},{material:"black",req:12},{material:"blackGold",req:20}]],["intoTheMadness",[{material:"gold",req:15},{material:"black",req:20},{material:"blackGold",req:25}]],["towerClimber",[{material:"bronze",req:50},{material:"silver",req:65},{material:"gold",req:75},{material:"black",req:90},{material:"blackGold",req:100}]],["gumTycoon",[{material:"cream",req:1e6},{material:"mint",req:2e6},{material:"pink",req:5e6}]],["betAndRegret",[{material:"gold",req:10}]],["rerollsMachine",[{material:"silver",req:15},{material:"gold",req:38},{material:"black",req:85},{material:"blackGold",req:126}]],["diamondDead",[{material:"bronze",req:1},{material:"silver",req:2},{material:"gold",req:4},{material:"black",req:8},{material:"blackGold",req:12}]]]);function getAchievementMaterialNumber(_,d){const v=allSkinsAchievements.get(_);if(!v)return-1;for(const A of v)if(A.material==d)return A.req;return-1}const getCollectionImageUrls=(_,d)=>(d&&d.length>0?d:[1]).map(A=>{const C=`${A}.png`,w=`collections/${_.id}/${C}`;return firebaseService.getCollectionCapUrl(w)}),CapCollectionImage=({collection:_,numbers:d,className:v})=>{const A=reactExports.useMemo(()=>getCollectionImageUrls(_,d),[_,d]);return jsxRuntimeExports.jsx("div",{className:`cap-collection-images ${v??""}`,children:A.map((C,w)=>jsxRuntimeExports.jsx("img",{src:C,className:"cap-collection-image",alt:`${_.title} cap ${w+1}`},w))})},BattleCapCollectionButton=({collection:_,preferences:d,onClick:v})=>{const A=d?.get(_.id),C=d?.has(_.id)??!1;return jsxRuntimeExports.jsxs("button",{className:`battle-cap-collection-button ${C?"battle-cap-collection-button--active":""}`,onClick:()=>v(_),children:[jsxRuntimeExports.jsx(CapCollectionImage,{collection:_,numbers:A,className:"battle-cap-collection-button__images"}),jsxRuntimeExports.jsxs("span",{children:[_.title," ",A?.length||""]})]})},BattleCapCollectionSection=({collections:_,preferences:d,onCollectionClick:v,title:A})=>jsxRuntimeExports.jsxs("div",{className:"battle-cap-collection-section",children:[jsxRuntimeExports.jsx("div",{className:"battle-cap-collection-section__title",children:A}),jsxRuntimeExports.jsx("div",{className:"battle-cap-collection-section__items",children:_?.map(C=>jsxRuntimeExports.jsx(BattleCapCollectionButton,{collection:C,preferences:d,onClick:v},C.id))})]}),FitCameraToBounds=({children:_})=>{const d=reactExports.useRef(null),{camera:v,size:A}=useThree(),C=v;return reactExports.useLayoutEffect(()=>{const w=new Box3().setFromObject(d.current),T=w.getSize(new Vector3),R=w.getCenter(new Vector3),I=Math.max(T.x,T.y,T.z)/(2*Math.atan(Math.PI*C.fov/360)),z=I/C.aspect,H=1*Math.max(I,z),Y=C.position.clone().sub(R).normalize();C.position.copy(Y.multiplyScalar(H).add(R)),C.near=H/100,C.far=H*100,C.updateProjectionMatrix(),C.lookAt(R)},[A,C]),jsxRuntimeExports.jsx("group",{ref:d,children:_})},AssetsContext=reactExports.createContext(null),AssetsProvider=AssetsContext.Provider,useAssets=()=>{const _=reactExports.useContext(AssetsContext);if(!_)throw new Error("useAssets must be used within <AssetsProvider>.");return _},DEFAULT_NOISE_THRESHOLD=.2,DEFAULT_NOISE_OFFSET={x:0,y:0},DEFAULT_NOISE_ROTATION=0,DEFAULT_MAP_SCALE={x:1,y:1},DEFAULT_MAP_STRETCH={x:1,y:1},DEFAULT_NOISE_NORMAL_SCALE={x:1,y:1},DEFAULT_METAL_COLOR=new Color("#ADADAD"),DEFAULT_FRONT_TEXTURE_ALPHA=1,DEFAULT_ROUGHNESS_MAP_STRENGTH=1,DEFAULT_SCRATCH_COLOR=new Color("#000000"),SHADER_UTILS_GLSL=`
  vec2 rotateUV(vec2 uv, float rotation, vec2 center) {
    vec2 translatedUv = uv - center;
    float cosR = cos(rotation);
    float sinR = sin(rotation);
    mat2 rotMatrix = mat2(cosR, -sinR, sinR, cosR);
    return rotMatrix * translatedUv + center;
  }

  vec2 transformNoiseUV(vec2 baseUv, vec2 offset, float rotation) {
    vec2 noiseUv = baseUv + offset - vec2(0.5);
    return rotateUV(noiseUv, rotation, vec2(0.0)) + vec2(0.5);
  }

  vec3 hardLightBlend(vec3 base, vec3 overlay) {
    return vec3(
      overlay.r < 0.5 ? (2.0 * overlay.r * base.r) : (1.0 - 2.0 * (1.0 - overlay.r) * (1.0 - base.r)),
      overlay.g < 0.5 ? (2.0 * overlay.g * base.g) : (1.0 - 2.0 * (1.0 - overlay.g) * (1.0 - base.g)),
      overlay.b < 0.5 ? (2.0 * overlay.b * base.b) : (1.0 - 2.0 * (1.0 - overlay.b) * (1.0 - base.b))
    );
  }
`,COMMON_UNIFORMS_GLSL=(_,d,v)=>`
uniform float frontTextureAlpha;
uniform vec3 metalColor;
uniform float roughnessMapStrength;

uniform sampler2D normalMap1;
${d?"uniform sampler2D normalMap2;":""}
uniform vec2 map1Scale;
uniform vec2 map1Stretch;
${d?"uniform vec2 map2Scale;":""}

${_?`
uniform sampler2D noiseMap;
uniform float noiseThreshold;
uniform vec2 noiseOffset;
uniform float noiseRotation;
uniform vec3 scratchColor;
${v?`
uniform sampler2D noiseNormalMap;
uniform vec2 noiseNormalScale;
`:""}
`:""}
`,NOISE_MAP_FRAGMENT_GLSL=`
  vec4 texelColor = texture2D(map, vMapUv);
  float effectiveAlpha = texelColor.a * frontTextureAlpha;

  vec3 hardLightBlend = hardLightBlend(metalColor, texelColor.rgb);
  vec3 surfaceRgb = mix(metalColor, hardLightBlend, effectiveAlpha);

  vec3 finalRgb;

  #ifdef USE_NOISE
    vec2 noiseUv = transformNoiseUV(vMapUv, noiseOffset, noiseRotation);
    float noiseVal = texture2D(noiseMap, noiseUv).r;
    finalRgb = mix(metalColor, surfaceRgb, step(noiseVal, noiseThreshold));
  #else
    finalRgb = surfaceRgb;
  #endif

  diffuseColor = vec4(finalRgb, texelColor.a);
`,FRAME_NOISE_FRAGMENT_GLSL=`
  vec3 baseMetal = metalColor;
  vec3 finalRgb;

  #ifdef USE_NOISE
    vec2 noiseUv = transformNoiseUV(vUv, noiseOffset, noiseRotation);
    float noiseVal = texture2D(noiseMap, noiseUv).r;
    finalRgb = mix(baseMetal, scratchColor, step(noiseThreshold, noiseVal));
  #else
    finalRgb = baseMetal;
  #endif

  diffuseColor = vec4(finalRgb, 1.0);
`,FRAME_NORMAL_FRAGMENT_GLSL=`
  #ifdef USE_NOISE_NORMAL
    vec2 noiseNormalUv = transformNoiseUV(vNormalMapUv, noiseOffset, noiseRotation);
    vec3 mapN = texture2D(noiseNormalMap, noiseNormalUv).xyz * 2.0 - 1.0;
    mapN.xy *= noiseNormalScale;
    normal = normalize(normal + mapN * 0.2);
  #endif
`,CAP_NORMAL_BLEND_FRAGMENT_GLSL=`
  vec3 mapN = vec3(0.0, 0.0, 1.0);
  
  #ifdef USE_NORMALMAP
    vec2 stretchedUv = vNormalMapUv / map1Stretch;
    mapN = texture2D(normalMap1, stretchedUv).xyz * 2.0 - 1.0;
    mapN.xy *= map1Scale;
  #endif

  #ifdef USE_DOUBLE_NORMAL
    vec3 n2 = texture2D(normalMap2, vNormalMapUv).xyz * 2.0 - 1.0;
    n2.xy *= -map2Scale;
    mapN.xy += n2.xy;
    mapN.z *= n2.z;
  #endif

  #ifdef USE_NOISE_NORMAL
    vec2 noiseNormalUv = transformNoiseUV(vNormalMapUv, noiseOffset, noiseRotation);
    vec3 n3 = texture2D(noiseNormalMap, noiseNormalUv).xyz * 2.0 - 1.0;
    n3.xy *= noiseNormalScale;
    mapN.xy += n3.xy;
    mapN.z *= n3.z;
  #endif

  normal = normalize(normal);
  
  #ifdef USE_NORMALMAP_TANGENTSPACE
    #ifdef USE_TANGENT
      vec3 objectTangent = normalize(transformedTangent);
      vec3 objectBitangent = normalize(cross(normal, objectTangent) * tangent.w);
      mat3 objectTBN = mat3(objectTangent, objectBitangent, normal);
      normal = normalize(objectTBN * mapN);
    #else
      vec3 dPdx = dFdx(vViewPosition);
      vec3 dPdy = dFdy(vViewPosition);
      vec2 dUVdx = dFdx(vNormalMapUv);
      vec2 dUVdy = dFdy(vNormalMapUv);
      vec3 N = normalize(normal);
      vec3 crossPdyN = cross(dPdy, N);
      vec3 crossNPdx = cross(N, dPdx);
      vec3 T = crossPdyN * dUVdx.x + crossNPdx * dUVdy.x;
      vec3 B = crossPdyN * dUVdx.y + crossNPdx * dUVdy.y;
      float det = max(dot(T, T), dot(B, B));
      float scale = (det == 0.0) ? 0.0 : faceDirection * inversesqrt(det);
      normal = normalize(T * (mapN.x * scale) + B * (mapN.y * scale) + N * mapN.z);
    #endif
  #else
    normal = normalize(normal + mapN * 0.3);
  #endif
`,ROUGHNESS_FRAGMENT_GLSL=`
  float roughnessFactor = roughness;

  #ifdef USE_ROUGHNESSMAP
    vec4 roughnessTex = texture2D(roughnessMap, vRoughnessMapUv);
    roughnessFactor *= mix(1.0, roughnessTex.g, roughnessMapStrength);
  #endif
`;function ensureColor(_){return _ instanceof Color?_:new Color(_)}function createShaderOptions(_,d={map1Scale:DEFAULT_MAP_SCALE,map1Stretch:DEFAULT_MAP_STRETCH,map2Scale:DEFAULT_MAP_SCALE,noiseNormalScale:DEFAULT_NOISE_NORMAL_SCALE,noiseThreshold:DEFAULT_NOISE_THRESHOLD,noiseOffset:DEFAULT_NOISE_OFFSET,noiseRotation:DEFAULT_NOISE_ROTATION,metalColor:DEFAULT_METAL_COLOR,frontTextureAlpha:DEFAULT_FRONT_TEXTURE_ALPHA,roughnessMapStrength:DEFAULT_ROUGHNESS_MAP_STRENGTH,scratchColor:DEFAULT_SCRATCH_COLOR}){const{frontNormalMaps:v,noiseTexture:A,noiseNormalMap:C,metalColor:w=d.metalColor,scratchColor:T=d.scratchColor,map2Scale:R=d.map2Scale,...G}={...d,..._};return{normalMap1:v?.[0],normalMap2:v?.[1],noiseTexture:A,noiseNormalMap:C,metalColor:ensureColor(w),scratchColor:ensureColor(T),map2Scale:v?.length===2?R:DEFAULT_MAP_SCALE,...G}}function determineShaderFeatures(_,d){const{normalMap1:v,normalMap2:A,noiseTexture:C,noiseNormalMap:w}=_;return{useDoubleNormal:!!(v&&A),useSingleNormal:!!(v&&!A),useNoise:!!C,useNoiseNormal:!!(C&&w),useMap:!!d.map}}function setupMaterialProperties(_,d,v){const{normalMap1:A,map1Scale:C}=d;_.normalMap=A??null,_.normalScale=v.useSingleNormal?new Vector2(C.x,C.y):new Vector2(1,1)}function setupShaderUniforms(_,d,v){const{map1Scale:A,map1Stretch:C,map2Scale:w,noiseNormalScale:T,noiseThreshold:R,noiseOffset:G,noiseRotation:I,metalColor:z,frontTextureAlpha:H,roughnessMapStrength:Y,scratchColor:ee,normalMap1:ie,normalMap2:oe,noiseTexture:se,noiseNormalMap:re}=d;Object.assign(_.uniforms,{map1Scale:{value:new Vector2(A.x,A.y)},map1Stretch:{value:new Vector2(C.x,C.y)},frontTextureAlpha:{value:H},metalColor:{value:z},roughnessMapStrength:{value:Y},normalMap1:{value:ie||null}}),ie&&(_.uniforms.normalMap1={value:ie}),v.useDoubleNormal&&oe&&Object.assign(_.uniforms,{normalMap2:{value:oe},map2Scale:{value:new Vector2(w.x,w.y)}}),v.useNoise&&se&&(Object.assign(_.uniforms,{noiseMap:{value:se},noiseThreshold:{value:R},noiseOffset:{value:new Vector2(G.x,G.y)},noiseRotation:{value:I},scratchColor:{value:ee}}),v.useNoiseNormal&&re&&Object.assign(_.uniforms,{noiseNormalMap:{value:re},noiseNormalScale:{value:new Vector2(T.x,T.y)}}))}function modifyVertexShader(_,d){if(d.useNoise&&!d.useMap&&(_.vertexShader=_.vertexShader.replace("#include <common>",`#include <common>
varying vec2 vUv;`),_.vertexShader=_.vertexShader.replace("#include <begin_vertex>",`#include <begin_vertex>
vUv = uv;`)),d.useNoiseNormal&&!d.useSingleNormal&&!d.useDoubleNormal){const v=C=>C.includes("varying vec2 vNormalMapUv;")?C:`${C}
varying vec2 vNormalMapUv;`,A=C=>C.includes("vNormalMapUv = uv;")?C:`${C}
vNormalMapUv = uv;`;_.vertexShader=_.vertexShader.replace("#include <common>",v),_.vertexShader=_.vertexShader.replace("#include <begin_vertex>",A),_.fragmentShader=_.fragmentShader.replace("#include <common>",v)}}function modifyFragmentShader(_,d,v){const A=[d.useNoise&&"#define USE_NOISE",d.useDoubleNormal&&"#define USE_DOUBLE_NORMAL",d.useNoiseNormal&&"#define USE_NOISE_NORMAL"].filter(Boolean).join(`
`);if(_.fragmentShader=_.fragmentShader.replace("#include <common>",`#include <common>
${A}
${d.useNoise&&!d.useMap?"varying vec2 vUv;":""}
${SHADER_UTILS_GLSL}
${COMMON_UNIFORMS_GLSL(d.useNoise,d.useDoubleNormal,d.useNoiseNormal)}`),d.useMap?_.fragmentShader=_.fragmentShader.replace("#include <map_fragment>",NOISE_MAP_FRAGMENT_GLSL):d.useNoise&&(_.fragmentShader=_.fragmentShader.replace("#include <color_fragment>",FRAME_NOISE_FRAGMENT_GLSL)),d.useSingleNormal||d.useDoubleNormal||d.useNoiseNormal){const T=!d.useSingleNormal&&!d.useDoubleNormal&&d.useNoiseNormal?FRAME_NORMAL_FRAGMENT_GLSL:CAP_NORMAL_BLEND_FRAGMENT_GLSL;_.fragmentShader=_.fragmentShader.replace("#include <normal_fragment_maps>",T)}v.roughnessMap&&(_.fragmentShader=_.fragmentShader.replace("#include <roughnessmap_fragment>",ROUGHNESS_FRAGMENT_GLSL))}function configureShaderMaterial(_,d){const v=determineShaderFeatures(d,_);_.customProgramCacheKey=()=>Object.keys(v).sort().map(C=>`${C}:${v[C]}`).join(","),setupMaterialProperties(_,d,v),_.onBeforeCompile=A=>{setupShaderUniforms(A,d,v),modifyVertexShader(A,v),modifyFragmentShader(A,v,_),_.userData.uniforms=A.uniforms},_.needsUpdate=!0}function applyNormalMapShader(_,d){const v=createShaderOptions(d);configureShaderMaterial(_,v)}function applyFrameShader(_,d){const v=createShaderOptions({...d,frontTextureAlpha:1},{map1Scale:DEFAULT_MAP_SCALE,map1Stretch:DEFAULT_MAP_STRETCH,map2Scale:DEFAULT_MAP_SCALE,noiseNormalScale:DEFAULT_NOISE_NORMAL_SCALE,noiseThreshold:DEFAULT_NOISE_THRESHOLD,noiseOffset:DEFAULT_NOISE_OFFSET,noiseRotation:DEFAULT_NOISE_ROTATION,metalColor:DEFAULT_METAL_COLOR,frontTextureAlpha:1,roughnessMapStrength:DEFAULT_ROUGHNESS_MAP_STRENGTH,scratchColor:DEFAULT_SCRATCH_COLOR});configureShaderMaterial(_,v)}function applyTextureTransform(_,d,v){_.offset.set(d.x,d.y),_.rotation=v*Math.PI/180,_.center.set(.5,.5),_.needsUpdate=!0}const configureFaceMaterial=(_,d,v,A,C,w,T)=>{const{metalColor:R,roughness:G,metalness:I,map1Scale:z,map1Stretch:H,map2Scale:Y,noiseThreshold:ee,noiseOffset:ie,noiseRotation:oe,noiseNormalScale:se,frontTextureAlpha:re,roughnessMapStrength:fe,roughnessOffset:ue,roughnessRotation:ge}=d;_.map=v||null,_.roughnessMap=A||null,_.roughness=G,_.metalness=I,A&&ue&&ge!==void 0&&applyTextureTransform(A,ue,ge),applyNormalMapShader(_,{frontNormalMaps:C||[],noiseTexture:w,noiseNormalMap:T,map1Scale:z,map1Stretch:H,map2Scale:Y,noiseNormalScale:se,noiseThreshold:ee,noiseOffset:ie,noiseRotation:oe*Math.PI/180,metalColor:R,frontTextureAlpha:re??1,roughnessMapStrength:fe??1}),_.needsUpdate=!0},configureBackMaterial=(_,d,v)=>{_.map=d||null,_.normalMap=v||null,v&&_.normalScale.set(1,1),_.needsUpdate=!0},TRANSFORM_CONFIG={version:"noise_uniqueness_v1.0",salts:{noise:{rotation:"CAPS_NOISE_ROTATION_SALT_V1.0",offsetX:"CAPS_NOISE_OFFSET_X_SALT_V1.0",offsetY:"CAPS_NOISE_OFFSET_Y_SALT_V1.0"},roughness:{rotation:"CAPS_ROUGHNESS_ROTATION_SALT_V1.0",offsetX:"CAPS_ROUGHNESS_OFFSET_X_SALT_V1.0",offsetY:"CAPS_ROUGHNESS_OFFSET_Y_SALT_V1.0"}},ranges:{noise:{rotation:{min:-180,max:180},offsetX:{min:-1,max:1},offsetY:{min:-1,max:1}},material:{rotation:{min:-30,max:30},offsetX:{min:-.2,max:.2},offsetY:{min:-.2,max:.2}},roughness:{rotation:{min:-180,max:180},offsetX:{min:-1,max:1},offsetY:{min:-1,max:1}}},hashMaxValue:4294967295};function fnv1a32Hash(_){let A=2166136261;const C=new TextEncoder().encode(_);for(const w of C)A=A^w,A=A*16777619&TRANSFORM_CONFIG.hashMaxValue;return A>>>0}function mapHashToRange(_,d,v){const A=_/TRANSFORM_CONFIG.hashMaxValue;return d+A*(v-d)}function createHashInput(_,d){return[TRANSFORM_CONFIG.version,_.collectionId,_.collectionNumber,_.materialId,d].join("|")}function generateTransformation(_,d,v){const A=TRANSFORM_CONFIG.salts[d],C=fnv1a32Hash(createHashInput(_,A.rotation)),w=fnv1a32Hash(createHashInput(_,A.offsetX)),T=fnv1a32Hash(createHashInput(_,A.offsetY));return{rotation:mapHashToRange(C,v.rotation.min,v.rotation.max),offset:{x:mapHashToRange(w,v.offsetX.min,v.offsetX.max),y:mapHashToRange(T,v.offsetY.min,v.offsetY.max)}}}function generateCapNoiseTransformation(_){return generateTransformation(_,"noise",TRANSFORM_CONFIG.ranges.noise)}function generateMaterialNoiseTransformation(_){return generateTransformation(_,"noise",TRANSFORM_CONFIG.ranges.material)}function generateRoughnessTextureTransformation(_){return generateTransformation(_,"roughness",TRANSFORM_CONFIG.ranges.roughness)}function applyTransformations(_,d,...v){const A=_.x+v.reduce((T,R)=>T+R.offset.x,0),C=_.y+v.reduce((T,R)=>T+R.offset.y,0),w=d+v.reduce((T,R)=>T+R.rotation,0);return{offset:{x:A,y:C},rotation:w}}function applyNoiseTransformations(_,d,v,A){const C=applyTransformations(_,d,v,A);return{noiseOffset:C.offset,noiseRotation:C.rotation}}function applyRoughnessTransformations(_,d,v){const A=applyTransformations(_,d,v);return{roughnessOffset:A.offset,roughnessRotation:A.rotation}}const DEFAULT_BASE_MATERIAL_PROPERTIES={metalColor:"#adadad",roughness:.4,metalness:.1,map1Scale:{x:.5,y:-.5},map1Stretch:{x:2.25,y:2.25},map2Scale:{x:.6,y:-1.1},noiseThreshold:.18,noiseNormalScale:{x:-4.1,y:2.25},frontTextureAlpha:1,noiseOffset:{x:0,y:0},noiseRotation:0,envmapIntensity:2.5,roughnessMapStrength:1,roughnessOffset:{x:0,y:0},roughnessRotation:0},DEFAULT_BASE_TEXTURE_URLS={frontNormalMapUrls:[firebaseService.getBaseImageUrl("3d/cap/base/normal.jpg")],roughnessMapUrl:firebaseService.getBaseImageUrl("3d/cap/base/roughness.jpg"),backNormalMapUrl:firebaseService.getBaseImageUrl("3d/cap/back/normal.png")},DEFAULT_CAP_MATERIAL_DATA={properties:{...DEFAULT_BASE_MATERIAL_PROPERTIES},textures:{...DEFAULT_BASE_TEXTURE_URLS}};function createTypeConfig(_,d,v,A){return{baseProperties:_,skins:d,textures:{roughnessMapUrl:v},usedTypeNoise:A}}const globalGenCommonProps={roughness:.65,metalness:.9,frontTextureAlpha:.9,map1Scale:{x:-.25,y:.25},map1Stretch:{x:1,y:1},map2Scale:{x:-.5,y:.5},noiseThreshold:.5,noiseNormalScale:{x:-.4,y:.4}},globalGenSkins={bronze:{metalColor:"#e48147",envmapIntensity:3.5},silver:{metalColor:"#e0e0e0",envmapIntensity:3.5},gold:{metalColor:"#ffcc4d",envmapIntensity:3.5}},backdropGenCommonProps={frontTextureAlpha:1,map1Scale:{x:1.5,y:-1.5},map1Stretch:{x:1,y:1},map2Scale:{x:-.5,y:.5},noiseThreshold:.4,noiseNormalScale:{x:-.11,y:.11}},CAP_MATERIAL_CONFIGS={globalGen1:{new:createTypeConfig(globalGenCommonProps,globalGenSkins,firebaseService.getBaseImageUrl("3d/cap/globalGen1/roughness.jpg")),used:createTypeConfig(globalGenCommonProps,globalGenSkins,firebaseService.getBaseImageUrl("3d/cap/globalGen1/roughness.jpg"),{noiseUrl:firebaseService.getBaseImageUrl("3d/cap/globalGen1/mask-low-damaged.jpg"),noiseNormalMapUrl:firebaseService.getBaseImageUrl("3d/cap/globalGen1/normal-low-damaged.jpg")})},backdropGen1:{new:createTypeConfig({...backdropGenCommonProps,roughness:.3,roughnessMapStrength:.5,metalness:.8,envmapIntensity:2.5},{bronze:{metalColor:"#e48147"},silver:{metalColor:"#e0e0e0"},gold:{metalColor:"#ffcc4d"}},firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")),used:createTypeConfig({...backdropGenCommonProps},{bronze:{metalColor:"#e48147",roughness:.7,metalness:.74,envmapIntensity:2.5,noiseThreshold:.65},silver:{metalColor:"#e0e0e0",roughness:.75,metalness:1,envmapIntensity:2.2,noiseThreshold:.4},gold:{metalColor:"#ffcc4d",roughness:.75,metalness:1,envmapIntensity:2.6,noiseThreshold:.4}},firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg"),{noiseUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/mask-damaged.jpg"),noiseNormalMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/normal-damaged.jpg")})}},GRADE_TO_TEXTURE_URL_MAP={COMMON:"/threejs/base-cap/back-common.png",COMMON_PLUS:"/threejs/base-cap/back-common.png",RARE:"/threejs/base-cap/back-rare.png",RARE_PLUS:"/threejs/base-cap/back-rare.png",EPIC:"/threejs/base-cap/back-epic.png",EPIC_PLUS:"/threejs/base-cap/back-epic.png",LEGEND:"/threejs/base-cap/back-gold.png",LEGEND_PLUS:"/threejs/base-cap/back-gold.png",DIAMOND:"/threejs/base-cap/back-diamond.png"},DEFAULT_BACK_TEXTURE_URL="/threejs/base-cap/back-common.png";function getBackTextureUrl(_){return _&&GRADE_TO_TEXTURE_URL_MAP[_]||DEFAULT_BACK_TEXTURE_URL}function getCapMaterialData(_){if(!_?.skin?.background?.source||!_.skin.background.type||!_.skin.background.skin)return{...DEFAULT_CAP_MATERIAL_DATA};const{source:d,type:v,skin:A}=_.skin.background,C=CAP_MATERIAL_CONFIGS[d];if(!C)return console.warn(`Unknown cap skin source: ${d}. Falling back to default materials.`),{...DEFAULT_CAP_MATERIAL_DATA};const w=C[v];if(!w)return console.warn(`Unknown cap type: ${v} for source: ${d}. Falling back to default materials.`),{...DEFAULT_CAP_MATERIAL_DATA};const T=A&&w.skins[A]?A:"bronze",R=w.skins[T],I={...{...DEFAULT_BASE_MATERIAL_PROPERTIES,...w.baseProperties},...R};if(_.collectionId&&_.collectionNumber){const Y={collectionId:_.collectionId,collectionNumber:_.collectionNumber.toString(),materialId:T},ee=generateCapNoiseTransformation(Y),ie=generateMaterialNoiseTransformation(Y),oe=applyNoiseTransformations(I.noiseOffset,I.noiseRotation,ee,ie);if(I.noiseOffset=oe.noiseOffset,I.noiseRotation=oe.noiseRotation,d==="backdropGen1"){const se=generateRoughnessTextureTransformation(Y),re=applyRoughnessTransformations(I.roughnessOffset||{x:0,y:0},I.roughnessRotation||0,se);I.roughnessOffset=re.roughnessOffset,I.roughnessRotation=re.roughnessRotation}}const H={frontNormalMapUrls:getFrontNormalMapUrls(_,d),roughnessMapUrl:w.textures.roughnessMapUrl,backNormalMapUrl:DEFAULT_BASE_TEXTURE_URLS.backNormalMapUrl};return v==="used"&&w.usedTypeNoise&&(H.noiseUrl=w.usedTypeNoise.noiseUrl,H.noiseNormalMapUrl=w.usedTypeNoise.noiseNormalMapUrl),{properties:I,textures:H}}function getFrontNormalMapUrls(_,d){if(!_.collectionId||!_.collectionNumber)return[...DEFAULT_BASE_TEXTURE_URLS.frontNormalMapUrls];const v=`collections/${_.collectionId}/3d/${d}/${_.collectionNumber}-normal.jpg`,A=[];switch(d){case"backdropGen1":A.push(firebaseService.getBaseImageUrl(v));break;case"globalGen1":A.push(firebaseService.getBaseImageUrl(v)),A.push(firebaseService.getBaseImageUrl("3d/cap/globalGen1/normal.jpg"));break}return A.length>0?A:DEFAULT_BASE_TEXTURE_URLS.frontNormalMapUrls}function getFrontTextureUrl(_){if(!_)return capImage$1;switch(_.skin?.background?.source){case"backdropGen1":return firebaseService.getBaseImageUrl(`collections/${_.collectionId}/3d/${_.skin?.background?.source}/${_.collectionNumber}.png`);case"globalGen1":return firebaseService.getBaseImageUrl(`collections/${_.collectionId}/${_.collectionNumber}.png`);default:return _.url?firebaseService.getCollectionCapUrl(_.url):capImage$1}}function patchTexture(_,d){return _&&(d?.colorSpace!==void 0&&(_.colorSpace=d.colorSpace),d?.flipY!==void 0&&(_.flipY=d.flipY),d?.wrapS!==void 0&&(_.wrapS=d.wrapS),d?.wrapT!==void 0&&(_.wrapT=d.wrapT),_.needsUpdate=!0),_}function createCapRenderData(_){const d=getCapMaterialData(_);return{materialProperties:d.properties,textures:d.textures,frontTextureUrl:getFrontTextureUrl(_),backTextureUrl:getBackTextureUrl(_?.grade)}}const useCapPreview=({cap:_})=>{const d=reactExports.useRef(null),{capGltf:v,textures:A}=useAssets(),C=reactExports.useMemo(()=>v?.nodes??{},[v]),w=reactExports.useMemo(()=>v?.materials??{},[v]),T=reactExports.useMemo(()=>createCapRenderData(_),[_]),R=reactExports.useMemo(()=>{const Y=ee=>ee?A[ee]??null:null;return{frontTexture:patchTexture(Y(T.frontTextureUrl),{colorSpace:SRGBColorSpace$1,flipY:!0}),roughnessMap:patchTexture(Y(T.textures.roughnessMapUrl),{colorSpace:LinearSRGBColorSpace$1,flipY:!1,wrapS:RepeatWrapping,wrapT:RepeatWrapping}),frontNormalMaps:T.textures.frontNormalMapUrls?.map(ee=>patchTexture(Y(ee),{flipY:!0})).filter(Boolean)??[],noiseTexture:patchTexture(Y(T.textures.noiseUrl),{colorSpace:LinearSRGBColorSpace$1,flipY:!1,wrapS:RepeatWrapping,wrapT:RepeatWrapping}),noiseNormalMap:patchTexture(Y(T.textures.noiseNormalMapUrl),{colorSpace:LinearSRGBColorSpace$1,flipY:!1,wrapS:RepeatWrapping,wrapT:RepeatWrapping}),backTexture:patchTexture(Y(T.backTextureUrl),{colorSpace:SRGBColorSpace$1,flipY:!1}),backNormalMap:patchTexture(Y(T.textures.backNormalMapUrl),{flipY:!1})}},[A,T]),G=reactExports.useMemo(()=>[R.frontTexture,R.roughnessMap,R.noiseTexture,R.noiseNormalMap,R.backTexture,R.backNormalMap,...R.frontNormalMaps].every(ee=>!ee||!!ee.image),[R]),I=reactExports.useMemo(()=>{if(!w.face)return null;const Y=w.face.clone();return configureFaceMaterial(Y,T.materialProperties,R.frontTexture||void 0,R.roughnessMap||void 0,R.frontNormalMaps,R.noiseTexture||void 0,R.noiseNormalMap||void 0),Y},[w.face,T.materialProperties,R]),z=reactExports.useMemo(()=>{if(!w.Material_1)return null;const Y=w.Material_1.clone();return configureBackMaterial(Y,R.backTexture||void 0,R.backNormalMap||void 0),Y},[w.Material_1,R.backTexture,R.backNormalMap]),H=reactExports.useMemo(()=>w.edge?.clone()??null,[w.edge]);return reactExports.useEffect(()=>()=>{[I,z,H].forEach(Y=>Y?.dispose()),Object.values(R).flat().forEach(Y=>Y?.dispose())},[I,z,H,R]),{modelGroupRef:d,nodes:C,materials:{face:I,Material_1:z,edge:H},materialsReady:G,faceMaterial:I,backMaterial:z,displayCapData:T}},Cap3DModel=React.memo(({cap:_})=>{const{modelGroupRef:d,nodes:v,materials:A,materialsReady:C}=useCapPreview({cap:_});return!v||!A||Object.keys(v).length===0||!C?null:jsxRuntimeExports.jsxs("group",{ref:d,dispose:null,children:[A.face&&v?.Cylinder003&&jsxRuntimeExports.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:v.Cylinder003.geometry,material:A.face,position:[0,0,.051],rotation:[Math.PI,0,0]}),A.Material_1&&v?.Cylinder003_1&&jsxRuntimeExports.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:v.Cylinder003_1.geometry,material:A.Material_1}),A.edge&&v?.Cylinder003_2&&jsxRuntimeExports.jsx("mesh",{castShadow:!0,receiveShadow:!0,geometry:v.Cylinder003_2.geometry,material:A.edge})]})}),DEFAULT_FRAME_MATERIAL_PROPERTIES={metalColor:"#adadad",roughness:.6,roughnessMapStrength:.85,metalness:.9,noiseThreshold:.6,noiseNormalScale:{x:-2,y:2},noiseOffset:{x:0,y:0},noiseRotation:0,scratchColor:"#000000"},DEFAULT_FRAME_TEXTURES={roughnessMapUrl:void 0},DEFAULT_FRAME_MATERIAL_DATA={properties:{default:{...DEFAULT_FRAME_MATERIAL_PROPERTIES}},textures:{...DEFAULT_FRAME_TEXTURES}};function createFrameTypeConfig({baseProperties:_,skins:d,textures:v}){return{baseProperties:_,skins:d,textures:{...v,targetMaterials:v?.targetMaterials??["default"]}}}const betAndRegretFrameConfig={new:createFrameTypeConfig({baseProperties:{roughness:.2},skins:{gold:{gold:{metalColor:"#ffcc4d"},gold_0:{metalColor:"#ffcc4d"}},black:{gold:{metalColor:"#3b3939"},gold_0:{metalColor:"#3b3939"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")}}}),used:createFrameTypeConfig({baseProperties:{metalness:.8,roughness:.4},skins:{gold:{gold:{metalColor:"#ffcc4d"},gold_0:{metalColor:"#ffcc4d"}},black:{gold:{metalColor:"#3b3939"},gold_0:{metalColor:"#3b3939"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},damage:{maskMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/mask-damaged.jpg"),normalMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/normal-damaged.jpg")}}})},cgHustlerFrameConfig={new:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d",metalness:1,roughness:.2},skins:{silver:{nail:{metalColor:"#e0e0e0"},text_cg:{metalColor:"#757575"}},gold:{nail:{metalColor:"#ffcc4d"},text_cg:{metalColor:"#856410"}},black:{nail:{metalColor:"#3b3939"},text_cg:{metalColor:"#a3a0a0"}},blackGold:{nail:{metalColor:"#3b3939"},text_cg:{metalColor:"#ffcc4d"},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["default","nail"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["default","text_cg"]}}),used:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d"},skins:{bronze:{base_mat:{metalColor:"#b8611a"},details:{metalColor:"#733909"}},silver:{base_mat:{metalColor:"#e0e0e0"},details:{metalColor:"#999999"}},gold:{base_mat:{metalColor:"#ffcc4d"},details:{metalColor:"#ffd978"}},blackGold:{base_mat:{metalColor:"#424242"},details:{metalColor:"#424242"}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"}}})},frameCommonProps$2={noiseThreshold:.4,noiseNormalScale:{x:-.2,y:.2}},collectorFrameConfig={new:createFrameTypeConfig({baseProperties:{...frameCommonProps$2,metalness:1,roughness:.2},skins:{bronze:{chain:{metalColor:"#b8611a"},text:{metalColor:"#daae8b"}},silver:{chain:{metalColor:"#e0e0e0"},text:{metalColor:"#757373"}},gold:{chain:{metalColor:"#ffcc4d"},text:{metalColor:"#757373"}},black:{chain:{metalColor:"#3b3939"}},blackGold:{chain:{metalColor:"#3b3939",scratchColor:"#fcba03"},text:{metalColor:"#ffcc4d"},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["chain"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")}}}),used:createFrameTypeConfig({baseProperties:{...frameCommonProps$2,metalness:1,roughness:.2},skins:{bronze:{default:{metalColor:"#b8611a",scratchColor:"#616161"}},silver:{default:{metalColor:"#a8a8a8",scratchColor:"#616161"}},gold:{chain:{metalColor:"#ffcc4d",scratchColor:"#6e5906"},text:{metalColor:"#1A1A1A",roughness:.8,metalness:.1,scratchColor:"#000000"}},black:{default:{metalColor:"#3b3939",scratchColor:"#616161"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},damage:{maskMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/mask-damaged.jpg"),normalMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/normal-damaged.jpg")}}})},dealMakerFrameConfig={new:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d",metalness:1,roughness:.2},skins:{bronze:{base_mat:{metalColor:"#b8611a"},details:{metalColor:"#733909"}},silver:{base_mat:{metalColor:"#e0e0e0"},details:{metalColor:"#999999"}},gold:{base_mat:{metalColor:"#ffcc4d"},details:{metalColor:"#ffd978"}},blackGold:{base_mat:{metalColor:"#424242"},details:{metalColor:"#ffcc4d"},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["base_mat"]}}}}),used:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d"},skins:{bronze:{base_mat:{metalColor:"#b8611a"},details:{metalColor:"#733909"}},silver:{base_mat:{metalColor:"#e0e0e0"},details:{metalColor:"#999999"}},gold:{base_mat:{metalColor:"#ffcc4d"},details:{metalColor:"#ffd978"}},blackGold:{base_mat:{metalColor:"#424242"},details:{metalColor:"#424242"}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["base_mat"]}})},diamondDeadFrameConfig={new:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d",metalness:1,roughness:.4},skins:{bronze:{skull:{metalColor:"#b8611a"}},silver:{skull:{metalColor:"#e0e0e0"}},gold:{skull:{metalColor:"#ffcc4d"}},black:{skull:{metalColor:"#3b3939"}},blackGold:{skull:{metalColor:"#3b3939"},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["skull"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["skull"]}}),used:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d"},skins:{bronze:{base_mat:{metalColor:"#b8611a"},details:{metalColor:"#733909"}},silver:{base_mat:{metalColor:"#e0e0e0"},details:{metalColor:"#999999"}},gold:{base_mat:{metalColor:"#ffcc4d"},details:{metalColor:"#ffd978"}},blackGold:{base_mat:{metalColor:"#424242"},details:{metalColor:"#424242"}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"}}})},gumTycoonFrameConfig={new:createFrameTypeConfig({baseProperties:{roughness:.7,metalness:0},skins:{bronze:{gum:{metalColor:"#F5F5DC"}},silver:{gum:{metalColor:"#b4f8b4"}},gold:{gum:{metalColor:"#EE548A"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")}}}),used:createFrameTypeConfig({baseProperties:{metalness:.8,roughness:.4},skins:{bronze:{gum:{metalColor:"#F5F5DC"}},silver:{gum:{metalColor:"#98FF98"}},gold:{gum:{metalColor:"#FFC0CB"}},black:{gum:{metalColor:"#000000"}},blackGold:{gum:{metalColor:"#000000"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},damage:{maskMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/mask-damaged.jpg"),normalMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/normal-damaged.jpg")}}})},frameCommonProps$1={roughness:.4,roughnessMapStrength:.85,noiseThreshold:.4},intoTheMadnessFrameConfig={new:createFrameTypeConfig({baseProperties:{...frameCommonProps$1},skins:{gold:{default:{metalColor:"#ffcc4d"}},black:{default:{metalColor:"#3b3939"}},blackGold:{default:{metalColor:"#3b3939",scratchColor:"#fcba03",roughness:.4,roughnessMapStrength:1,noiseThreshold:.4},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["feral_ring_outline"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["feral_ring_outline"]}}),used:createFrameTypeConfig({baseProperties:{...frameCommonProps$1,scratchColor:"#ffcc4d"},skins:{bronze:{default:{metalColor:"#b8611a",scratchColor:"#616161"}},silver:{default:{metalColor:"#a8a8a8",scratchColor:"#616161"}},gold:{default:{metalColor:"#ffcc4d",scratchColor:"#6e5906"}},black:{default:{metalColor:"#3b3939",scratchColor:"#616161"}},blackGold:{default:{metalColor:"#3b3939",scratchColor:"#fcba03",roughness:.4,roughnessMapStrength:1,noiseThreshold:.4}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["feral_ring_outline"]}})},marketMoverFrameConfig={new:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d",metalness:1,roughness:.2},skins:{bronze:{chain:{metalColor:"#b8611a"},ton:{metalColor:"#eb8736"}},silver:{chain:{metalColor:"#e0e0e0"},ton:{metalColor:"#999999"}},gold:{chain:{metalColor:"#ffcc4d"},ton:{metalColor:"#ffd978"}},black:{chain:{metalColor:"#3b3939"},ton:{metalColor:"#595757"}},blackGold:{chain:{metalColor:"#3b3939"},ton:{metalColor:"#595757"},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["default","chain","ton"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")}}}),used:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d"},skins:{bronze:{base_mat:{metalColor:"#b8611a"},details:{metalColor:"#733909"}},silver:{base_mat:{metalColor:"#e0e0e0"},details:{metalColor:"#999999"}},gold:{base_mat:{metalColor:"#ffcc4d"},details:{metalColor:"#ffd978"}},blackGold:{base_mat:{metalColor:"#424242"},details:{metalColor:"#424242"}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"}}})},pvpChampionFrameConfig={new:createFrameTypeConfig({baseProperties:{roughness:.15},skins:{black:{glass:{metalColor:"#D5D5D5",roughness:.2,roughnessMapStrength:1,metalness:.1},secondary:{metalColor:"#505050",roughness:0,roughnessMapStrength:.1,metalness:1}},bronze:{glass:{metalColor:"#E1ACDE",roughness:.3,roughnessMapStrength:1,metalness:.1},secondary:{metalColor:"#6F246A",roughness:.7,roughnessMapStrength:.8,metalness:1}},silver:{glass:{metalColor:"#fde6d4",metalness:.1},secondary:{metalColor:"#F9913C",roughness:.3}},gold:{glass:{metalColor:"#f5c1cf",metalness:.1},secondary:{metalColor:"#E66689",roughness:.3}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["default","glass","secondary"]}}),used:createFrameTypeConfig({baseProperties:{metalness:.8,roughness:.4},skins:{bronze:{glass:{metalColor:"#CD7F32"},secondary:{metalColor:"#A52A2A"}},silver:{glass:{metalColor:"#C0C0C0"},secondary:{metalColor:"#808080"}},gold:{glass:{metalColor:"#FFD700"},secondary:{metalColor:"#DAA520"}},black:{glass:{metalColor:"#000000",roughness:.1,metalness:.9},secondary:{metalColor:"#36454F"}},blackGold:{glass:{metalColor:"#000000"},secondary:{metalColor:"#FFD700"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},damage:{maskMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/mask-damaged.jpg"),normalMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/normal-damaged.jpg")}}})},rerollsMachineFrameConfig={new:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d",roughness:.4,roughnessMapStrength:.85},skins:{silver:{base_mat:{metalColor:"#C0C0C0"},hand:{metalColor:"#A4AEBF"},777:{metalColor:"#FF0000",roughness:.1}},gold:{base_mat:{metalColor:"#ffcc4d"},hand:{metalColor:"#ad8726"},777:{metalColor:"#FF0000",roughness:.1}},black:{base_mat:{metalColor:"#3b3939"},hand:{metalColor:"#4f4d4d"},777:{metalColor:"#FF0000",roughness:.1}},blackGold:{base_mat:{metalColor:"#3b3939"},hand:{metalColor:"#4f4d4d"},777:{metalColor:"#FF0000",roughness:.1},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["base_mat"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["default","base_mat","hand","777"]}}),used:createFrameTypeConfig({baseProperties:{metalness:.8,roughness:.4,scratchColor:"#FFD700"},skins:{bronze:{base_mat:{metalColor:"#CD7F32"},hand:{metalColor:"#8B4513"},777:{metalColor:"#FF0000"}},silver:{base_mat:{metalColor:"#C0C0C0"},hand:{metalColor:"#708090"},777:{metalColor:"#FF0000"}},gold:{base_mat:{metalColor:"#FFD700"},hand:{metalColor:"#DAA520"},777:{metalColor:"#FF0000"}},black:{base_mat:{metalColor:"#000000"},hand:{metalColor:"#2F4F4F"},777:{metalColor:"#FF0000"}},blackGold:{base_mat:{metalColor:"#000000"},hand:{metalColor:"#2F4F4F"},777:{metalColor:"#FF0000"}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"}}})},towerClimberFrameConfig={new:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d",metalness:1,roughness:.2},skins:{bronze:{barbed_ring_outline:{metalColor:"#b8611a"}},silver:{barbed_ring_outline:{metalColor:"#e0e0e0"}},gold:{barbed_ring_outline:{metalColor:"#ffcc4d"}},black:{barbed_ring_outline:{metalColor:"#3b3939"}},blackGold:{barbed_ring_outline:{metalColor:"#3b3939"},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"},targetMaterials:["default","barbed_ring_outline"]}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["default","text_cg"]}}),used:createFrameTypeConfig({baseProperties:{scratchColor:"#ffcc4d"},skins:{bronze:{base_mat:{metalColor:"#b8611a"},details:{metalColor:"#733909"}},silver:{base_mat:{metalColor:"#e0e0e0"},details:{metalColor:"#999999"}},gold:{base_mat:{metalColor:"#ffcc4d"},details:{metalColor:"#ffd978"}},blackGold:{base_mat:{metalColor:"#424242"},details:{metalColor:"#424242"}}},textures:{roughness:{mapUrl:"/threejs/golden/golde-marble-roughness-specular.jpeg"},damage:{maskMapUrl:"/threejs/golden/golden-marble-color.jpeg",normalMapUrl:"/threejs/golden/golden-marble-normal.jpeg"}}})},frameCommonProps={noiseThreshold:.4,noiseNormalScale:{x:-.2,y:.2}},baseframesGen1Config={new:createFrameTypeConfig({baseProperties:{...frameCommonProps},skins:{bronze:{default:{metalColor:"#b8611a"}},silver:{default:{metalColor:"#e0e0e0"}},gold:{default:{metalColor:"#ffcc4d"}},black:{default:{metalColor:"#3b3939"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},targetMaterials:["default","ring","wide_ring","split_ring"]}}),used:createFrameTypeConfig({baseProperties:{...frameCommonProps},skins:{bronze:{default:{metalColor:"#b8611a",scratchColor:"#616161"}},silver:{default:{metalColor:"#a8a8a8",scratchColor:"#616161"}},gold:{default:{metalColor:"#ffcc4d",scratchColor:"#6e5906"}},black:{default:{metalColor:"#3b3939",scratchColor:"#616161"}}},textures:{roughness:{mapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/roughness.jpg")},damage:{maskMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/mask-damaged.jpg"),normalMapUrl:firebaseService.getBaseImageUrl("3d/cap/backdropGen1/normal-damaged.jpg")},targetMaterials:["default","ring","wide_ring","split_ring"]}})},FRAME_SOURCES={baseframesGen1:{path:"/threejs/frames/",defaultShape:"ring",shapes:["ring","wideRing","splitRing"]},collector:{path:"/threejs/frames/achievements/",shapes:["chainOutline"]},dealMaker:{path:"/threejs/frames/achievements/",shapes:["coinOutline"]},pvpChampion:{path:"/threejs/frames/achievements/",shapes:["chipOutline"]},marketMover:{path:"/threejs/frames/achievements/",shapes:["ropeChainOutline"]},cgHustler:{path:"/threejs/frames/achievements/",shapes:["cartierOutline"]},intoTheMadness:{path:"/threejs/frames/achievements/",shapes:["feralRingOutline"]},towerClimber:{path:"/threejs/frames/achievements/",shapes:["barbedRingOutline"]},gumTycoon:{path:"/threejs/frames/achievements/",shapes:["gumRingOutline"]},betAndRegret:{path:"/threejs/frames/achievements/",shapes:["rouletteOutline"]},rerollsMachine:{path:"/threejs/frames/achievements/",shapes:["slotsRingOutline"]},diamondDead:{path:"/threejs/frames/achievements/",shapes:["skullRingOutline"]}},FRAME_SKINS=["bronze","silver","gold","black","blackGold"];Array.from(new Set(Object.values(FRAME_SOURCES).flatMap(_=>_.shapes)));function getFrameShape(_,d){const v=FRAME_SOURCES[_];return v?d&&v.shapes.includes(d)?d:("defaultShape"in v?v.defaultShape:void 0)??v.shapes[0]:FRAME_SOURCES.baseframesGen1.defaultShape}function getFrameModelUrl(_,d){if(!_)return;const v=FRAME_SOURCES[_]??FRAME_SOURCES.baseframesGen1,A=getFrameShape(_,d);return`${v.path}${camelToKebab(A)}.glb`}function isFrameSource(_){return Object.prototype.hasOwnProperty.call(FRAME_SOURCES,_)}function isFrameSkin(_){return FRAME_SKINS.includes(_)}const FRAME_MATERIAL_CONFIGS={baseframesGen1:baseframesGen1Config,collector:collectorFrameConfig,dealMaker:dealMakerFrameConfig,pvpChampion:pvpChampionFrameConfig,marketMover:marketMoverFrameConfig,cgHustler:cgHustlerFrameConfig,intoTheMadness:intoTheMadnessFrameConfig,towerClimber:towerClimberFrameConfig,gumTycoon:gumTycoonFrameConfig,betAndRegret:betAndRegretFrameConfig,rerollsMachine:rerollsMachineFrameConfig,diamondDead:diamondDeadFrameConfig};function getEffectiveFrameConfig(_,d){const v=_?.skin?.outline,A=d?.source??v?.source??"baseframesGen1",w=isFrameSource(A)?A:"baseframesGen1",R=(v?.type??"new")==="used"?"used":"new",G=d?.skin??v?.skin??"bronze",I=isFrameSkin(G)?G:"bronze",z=v?.shape;return{source:w,type:R,skin:I,shape:z}}function getFrameMaterialData(_,d){const{source:v,type:A,skin:C,shape:w}=getEffectiveFrameConfig(_,d);if(!v||!A)return{...DEFAULT_FRAME_MATERIAL_DATA};const T=FRAME_MATERIAL_CONFIGS[v];if(!T)return console.warn(`Unknown frame skin source: ${v}. Falling back to default materials.`),{...DEFAULT_FRAME_MATERIAL_DATA};const R=T[A];if(!R)return console.warn(`Unknown frame type: ${A} for source: ${v}. Falling back to default materials.`),{...DEFAULT_FRAME_MATERIAL_DATA};const G=R.skins[C];if(!G)return console.warn(`Skin definition for "${C}" not found.`),{...DEFAULT_FRAME_MATERIAL_DATA};const I={...DEFAULT_FRAME_MATERIAL_PROPERTIES,...R.baseProperties},z={};for(const oe in G){if(!Object.prototype.hasOwnProperty.call(G,oe)||oe==="textures")continue;const se=G[oe],re={...I,...se},fe=w||getFrameShape(v,w),ue=`${C}_${fe}`;if(v==="baseframesGen1"){const ge=generateCapNoiseTransformation({collectionId:"",collectionNumber:"",materialId:ue}),ye=generateMaterialNoiseTransformation({collectionId:"",collectionNumber:"",materialId:ue}),be=applyNoiseTransformations(re.noiseOffset,re.noiseRotation,ge,ye);re.noiseOffset=be.noiseOffset,re.noiseRotation=be.noiseRotation}z[oe]=re}const H=G.textures,Y=R.textures,ee={targetMaterials:H?.targetMaterials??Y?.targetMaterials,roughnessMapUrl:H?.roughness?.mapUrl??Y?.roughness?.mapUrl},ie=H?.damage??Y?.damage;return ie&&(ee.noiseUrl=ie.maskMapUrl,ee.noiseNormalMapUrl=ie.normalMapUrl),{properties:z,textures:ee}}function getFrameRenderData(_,d){const v=getFrameMaterialData(_,d),{source:A,shape:C}=getEffectiveFrameConfig(_,d),w=getFrameShape(A,C);return{source:A,shape:w,materialProperties:v.properties,textures:v.textures}}const configureFrameMaterial=(_,d,v,A,C)=>{d.metalColor&&_.color.set(d.metalColor),_.roughness=d.roughness,_.metalness=d.metalness,v&&(_.roughnessMap=v),C&&(_.normalMap=C,_.normalScale.set(d.noiseNormalScale.x,d.noiseNormalScale.y)),applyFrameShader(_,{noiseTexture:A??void 0,noiseNormalMap:C??void 0,noiseNormalScale:d.noiseNormalScale,noiseThreshold:d.noiseThreshold,noiseOffset:d.noiseOffset,noiseRotation:d.noiseRotation*Math.PI/180,metalColor:d.metalColor,roughnessMapStrength:d.roughnessMapStrength??1,scratchColor:d.scratchColor}),_.needsUpdate=!0},useFramePreview=({cap:_})=>{const d=reactExports.useRef(null),v=reactExports.useRef(null),A=reactExports.useRef({}),{frameGltf:C,textures:w}=useAssets(),T=reactExports.useMemo(()=>C?.scene??new Scene,[C]),R=reactExports.useMemo(()=>getFrameRenderData(_),[_]),G=reactExports.useMemo(()=>C?.nodes??{},[C]),I=reactExports.useMemo(()=>{const H=ee=>ee?w[ee]??null:null,Y={colorSpace:LinearSRGBColorSpace$1,flipY:!1,wrapS:RepeatWrapping,wrapT:RepeatWrapping};return{roughnessMap:patchTexture(H(R.textures.roughnessMapUrl),Y),noiseTexture:patchTexture(H(R.textures.noiseUrl),Y),noiseNormalMap:patchTexture(H(R.textures.noiseNormalMapUrl),Y)}},[w,R.textures]),z=reactExports.useMemo(()=>Object.values(I).every(H=>!H||!!H.image),[I]);return reactExports.useMemo(()=>{if(!C?.scene)return;const H=C.scene.clone(!0),{materialProperties:Y,textures:ee}=R,ie=ee.targetMaterials??["base_mat","default"];H.traverse(oe=>{if(!oe.isMesh)return;const se=oe,re=se.material,fe=re.name||"default",ue=Y[fe]??Y.default;if(ue){if(!A.current[re.uuid]){const ge=re.clone();ge.name=fe,A.current[re.uuid]=ge;const ye=ie.includes(fe);configureFrameMaterial(ge,ue,ye?I.roughnessMap:null,ye?I.noiseTexture:null,ye?I.noiseNormalMap:null)}se.material=A.current[re.uuid]}}),v.current=H},[C,R,I]),reactExports.useEffect(()=>()=>{Object.values(A.current).forEach(H=>H.dispose()),A.current={},Object.values(I).forEach(H=>H?.dispose())},[I]),{scene:v.current??T,nodes:G,materials:A.current,materialsReady:z,frameRenderData:R,modelGroupRef:d,isRendering:!1}},BaseFrameModel=React.memo(({cap:_,onRenderStateChange:d})=>{const{scene:v,modelGroupRef:A,isRendering:C,materialsReady:w}=useFramePreview({cap:_});return React.useEffect(()=>{d?.(C)},[C,d]),w?jsxRuntimeExports.jsx("group",{ref:A,dispose:null,children:jsxRuntimeExports.jsx("primitive",{object:v,dispose:null,scale:1})}):null});BaseFrameModel.displayName="BaseFrameModel";const cap3dLoadedAtom=atom(!1,"cap3dLoadedAtom");function preloadThreeAssets({capGltfUrl:_,frameGltfUrl:d,textureUrls:v,environmentUrls:A}){const C=[_,d].filter(Boolean),w=[...new Set(v.filter(Boolean))];C.length&&useGLTF.preload(C),w.length&&useLoader.preload(TextureLoader,w),A.length===6&&useLoader.preload(CubeTextureLoader,[A])}function useThreeAssets({capGltfUrl:_,frameGltfUrl:d,textureUrls:v,environmentUrls:A}){const C=reactExports.useMemo(()=>[_,d].filter(Boolean),[_,d]),w=useGLTF(C),[T,R]=w,G=reactExports.useMemo(()=>[...new Set(v.filter(Boolean))],[v]),I=useLoader(TextureLoader,G),z=reactExports.useMemo(()=>Object.fromEntries(G.map((ee,ie)=>[ee,I[ie]??null])),[I,G]),[H]=useLoader(CubeTextureLoader,[A]),Y=H??null;return Y&&(Y.colorSpace=SRGBColorSpace$1),{capGltf:T,frameGltf:R,textures:z,environmentMap:Y}}const AssetsProviderRenderer=({assetUrls:_,environmentIntensity:d,environmentRotation:v,children:A})=>{const{capGltf:C,frameGltf:w,textures:T,environmentMap:R}=useThreeAssets(_),G=I=>{I&&I.traverse(z=>{z.geometry?.dispose?.(),Array.isArray(z.material)?z.material.forEach(H=>H?.dispose?.()):z.material?.dispose?.()})};return reactExports.useEffect(()=>()=>{[_.capGltfUrl,_.frameGltfUrl].filter(Boolean).forEach(I=>useGLTF.clear(I)),G(C?.scene),G(w?.scene),Object.values(T).forEach(I=>I?.dispose?.()),R?.dispose?.()},[]),jsxRuntimeExports.jsxs(AssetsProvider,{value:{capGltf:C,frameGltf:w,textures:T,environmentMap:R},children:[A,R&&jsxRuntimeExports.jsx(Environment,{environmentIntensity:d,map:R,background:!1,environmentRotation:v})]})},CAP_GLTF_URL="/threejs/cap-model.glb",ENVIRONMENT_PATH="/threejs/cubemap/",ENVIRONMENT_FILES=["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"],DEFAULT_SETTINGS={ambientLightIntensity:1,envmapIntensity:2.5,environmentRotation:[20,12,0]},Cap3DViewer=({cap:_,frameOnly:d=!1})=>{const v=useAction(cap3dLoadedAtom),[A,C]=reactExports.useState(!1),w=reactExports.useMemo(()=>_?getFrameRenderData(_):null,[_]),T=reactExports.useMemo(()=>w?getFrameModelUrl(w.source,w.shape):null,[w]),R=reactExports.useMemo(()=>!!_?.skin?.outline,[_?.skin?.outline]),G=reactExports.useMemo(()=>{if(!_)return[];const{textures:oe}=getCapMaterialData(_),se=w?.textures,re=[getFrontTextureUrl(_),getBackTextureUrl(_.grade),oe.frontNormalMapUrls,oe.roughnessMapUrl,oe.noiseUrl,oe.noiseNormalMapUrl,oe.backNormalMapUrl];return se&&re.push(se.roughnessMapUrl,se.noiseUrl,se.noiseNormalMapUrl),[...new Set(re.flat().filter(Boolean))]},[_,w]),I=reactExports.useMemo(()=>ENVIRONMENT_FILES.map(oe=>`${ENVIRONMENT_PATH}${oe}`),[]),z=reactExports.useMemo(()=>({capGltfUrl:CAP_GLTF_URL,frameGltfUrl:R&&T?T:void 0,textureUrls:G,environmentUrls:I}),[R,T,G,I]),H=reactExports.useMemo(()=>DEFAULT_SETTINGS.environmentRotation.map(oe=>oe*(Math.PI/180)),[]);reactExports.useEffect(()=>{_&&G.length>0&&preloadThreeAssets(z)},[_,z,G]);const{active:Y,progress:ee}=useProgress(),ie=!Y&&ee===100;return reactExports.useEffect(()=>{ie&&v(!0)},[ie,v]),_?jsxRuntimeExports.jsxs("div",{className:"cap-3d-viewer",children:[jsxRuntimeExports.jsx(Cap3DLoader$1,{}),jsxRuntimeExports.jsx(Canvas,{camera:{fov:30},gl:{antialias:!0,toneMapping:ACESFilmicToneMapping,toneMappingExposure:1,outputColorSpace:SRGBColorSpace$1},children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:null,children:jsxRuntimeExports.jsx(AssetsProviderRenderer,{assetUrls:z,environmentIntensity:DEFAULT_SETTINGS.envmapIntensity,environmentRotation:H,children:ie&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PresentationControls,{global:!0,damping:.25,speed:1.3,snap:!1,rotation:[0,0,0],polar:[-Math.PI/6,Math.PI/6],azimuth:[-1/0,1/0],children:jsxRuntimeExports.jsxs(FitCameraToBounds,{children:[!d&&!A&&jsxRuntimeExports.jsx(Cap3DModel,{cap:_},`cap-${_.id}`),R&&jsxRuntimeExports.jsx(BaseFrameModel,{cap:_,onRenderStateChange:C},`frame-${_.id}`)]})}),jsxRuntimeExports.jsx("ambientLight",{intensity:DEFAULT_SETTINGS.ambientLightIntensity})]})},_.id)})})]}):null},SkinAchievementDetails=_=>{const{appState:d}=useAppState(),[v]=useAtom(userAtom),{t:A}=useTranslation();useBackClick(_.onBack);const C={id:`skin-preview-${_.skin.source}`,status:"READY",owner:"preview",isNft:!1,number:1,url:"",collectionId:"preview",collection:"",collectionNumber:0,grade:"COMMON",gradeNumber:1,skin:{outline:{source:_.skin.source,skin:_.skin.skin||"",type:_.skin.type||""},rerolls:0}},T=d.packCollections.find(R=>R.skin?.source===_.skin.source)?.skin?.skinApplicableFor?.map(R=>d.capsCollections.find(G=>G.id===R)).filter(R=>!!R);return jsxRuntimeExports.jsxs("div",{className:"pack",children:[jsxRuntimeExports.jsxs("div",{className:"pack__content",children:[jsxRuntimeExports.jsx("div",{className:"pack__gum-title",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"pack__skin-title--yellow",children:[A("achievement.achievement"),":"," "]}),prettyTextFromId(_.skin.source)]})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("div",{className:"pack__gum-image-wrapper",style:{height:"19rem"},children:jsxRuntimeExports.jsx(Cap3DViewer,{cap:C,frameOnly:!0})}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("div",{className:"pack__skin-description",children:[A("shop.skinType"),": ",A("profile.skinOutline")]}),jsxRuntimeExports.jsxs("div",{className:"pack__skin-description",children:[A("achievement.material"),": ",prettyTextFromId(_.skin.skin??"")]}),jsxRuntimeExports.jsxs("div",{className:"pack__skin-description",children:[A("achievement.unlockReq"),":"]}),jsxRuntimeExports.jsx("div",{className:"battle-cap-collection-section__title",children:A("achievement."+_.skin.source,{number:getAchievementMaterialNumber(_.skin.source,_.skin.skin??"")})}),jsxRuntimeExports.jsx("div",{className:"battle-cap-collections",children:T?jsxRuntimeExports.jsx(BattleCapCollectionSection,{title:A("shop.skinApplicableFor"),collections:T,onCollectionClick:()=>{}}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"battle-cap-collection-section__title",children:A("shop.skinApplicableFor")}),A("shop.skinApplicableForEverything")]})})]}),jsxRuntimeExports.jsx("div",{className:"pack__buy",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:_.onBack,children:"OK"})})]})},SkinSelector=({onBackPressed:_,filter:d,onChoose:v})=>{const[A]=useAtom(userAtom),{t:C}=useTranslation(),{appState:w}=useAppState(),T=useNavigate(),[R,G]=reactExports.useState({selected:void 0}),I=reactExports.useCallback(()=>{R.selected?G({selected:void 0}):_?.()},[_,R.selected]);useBackClick(I);const z=reactExports.useMemo(()=>(A.inventory?.skins??[]).filter(H=>{if(H.count<=0)return!1;if(!d)return!0;const Y=w.packCollections.find(ie=>ie.skin?.source==H.source),ee=w.capsGd.skins.types[H.source];return d.excludedSkins&&d.excludedSkins.find(oe=>ee.origin=="achievement"?oe.source==H.source&&oe.type==H.type&&oe.skin==H.skin:oe.source==H.source)?!1:!Y?.skin?.skinApplicableFor||Y?.skin?.skinApplicableFor.includes(d.collectionId)}),[A,d]);return R.selected?jsxRuntimeExports.jsx(SkinAchievementDetails,{skin:R.selected,onBack:()=>G({...R,selected:void 0})}):jsxRuntimeExports.jsx("div",{className:"skin-selector",children:jsxRuntimeExports.jsxs("div",{className:"skin-selector__skins",children:[z?.map(H=>{const Y=w.capsGd.skins.types[H.source];return jsxRuntimeExports.jsxs("button",{className:"skin-selector__skin",onClick:()=>{v?v(H.source,H.skin,H.type):T("/profile",{state:{skinSelection:{source:H.source,skin:H.skin,type:H.type}}})},children:[jsxRuntimeExports.jsx("img",{className:"skin-selector__skin-img",src:"/skins/skin-"+H.source+".png",alt:H.source}),jsxRuntimeExports.jsxs("div",{className:"skin-selector__skin-content",children:[jsxRuntimeExports.jsxs("div",{className:"skin-selector__skin-text",children:[jsxRuntimeExports.jsx("div",{className:"skin-selector__skin-title",children:Y?Y.meta?.titleForPack??H.source:H.source}),jsxRuntimeExports.jsx("div",{className:"skin-selector__skin-subtitle",children:Y.origin=="achievement"?`${prettyTextFromId(H.skin??"")}, ${prettyTextFromId(H.type??"")} x${H.count}`:`Floppy Disk x${H.count}`})]}),Y.origin=="achievement"&&jsxRuntimeExports.jsx("button",{className:"skin-selector__skin-question-btn",onClick:ee=>{ee.stopPropagation(),G({selected:H})},children:jsxRuntimeExports.jsx("span",{className:"skin-selector__skin-question-icon",children:"?"})})]})]},`${H.source}-${H.skin??"any"}-${H.type??"any"}`)}),z?.length===0&&jsxRuntimeExports.jsxs("div",{className:"upgrade-no-resources",children:[jsxRuntimeExports.jsx("img",{src:sadImage,className:"upgrade-no-resources__image",alt:"sad"}),jsxRuntimeExports.jsx("div",{className:"upgrade-no-resources__text",children:C("upgrade.noFloopy",{source:d?.collectionId})}),jsxRuntimeExports.jsx(Button,{onClick:()=>{T("/earn")},children:C("shop.goBuySkins")})]})]})})};var _baseRange,hasRequired_baseRange;function require_baseRange(){if(hasRequired_baseRange)return _baseRange;hasRequired_baseRange=1;var _=Math.ceil,d=Math.max;function v(A,C,w,T){for(var R=-1,G=d(_((C-A)/(w||1)),0),I=Array(G);G--;)I[T?G:++R]=A,A+=w;return I}return _baseRange=v,_baseRange}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;function _(d,v){return d===v||d!==d&&v!==v}return eq_1=_,eq_1}var _freeGlobal,hasRequired_freeGlobal;function require_freeGlobal(){if(hasRequired_freeGlobal)return _freeGlobal;hasRequired_freeGlobal=1;var _=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2;return _freeGlobal=_,_freeGlobal}var _root,hasRequired_root;function require_root(){if(hasRequired_root)return _root;hasRequired_root=1;var _=require_freeGlobal(),d=typeof self=="object"&&self&&self.Object===Object&&self,v=_||d||Function("return this")();return _root=v,_root}var _Symbol,hasRequired_Symbol;function require_Symbol(){if(hasRequired_Symbol)return _Symbol;hasRequired_Symbol=1;var _=require_root(),d=_.Symbol;return _Symbol=d,_Symbol}var _getRawTag,hasRequired_getRawTag;function require_getRawTag(){if(hasRequired_getRawTag)return _getRawTag;hasRequired_getRawTag=1;var _=require_Symbol(),d=Object.prototype,v=d.hasOwnProperty,A=d.toString,C=_?_.toStringTag:void 0;function w(T){var R=v.call(T,C),G=T[C];try{T[C]=void 0;var I=!0}catch{}var z=A.call(T);return I&&(R?T[C]=G:delete T[C]),z}return _getRawTag=w,_getRawTag}var _objectToString,hasRequired_objectToString;function require_objectToString(){if(hasRequired_objectToString)return _objectToString;hasRequired_objectToString=1;var _=Object.prototype,d=_.toString;function v(A){return d.call(A)}return _objectToString=v,_objectToString}var _baseGetTag,hasRequired_baseGetTag;function require_baseGetTag(){if(hasRequired_baseGetTag)return _baseGetTag;hasRequired_baseGetTag=1;var _=require_Symbol(),d=require_getRawTag(),v=require_objectToString(),A="[object Null]",C="[object Undefined]",w=_?_.toStringTag:void 0;function T(R){return R==null?R===void 0?C:A:w&&w in Object(R)?d(R):v(R)}return _baseGetTag=T,_baseGetTag}var isObject_1,hasRequiredIsObject;function requireIsObject(){if(hasRequiredIsObject)return isObject_1;hasRequiredIsObject=1;function _(d){var v=typeof d;return d!=null&&(v=="object"||v=="function")}return isObject_1=_,isObject_1}var isFunction_1,hasRequiredIsFunction;function requireIsFunction(){if(hasRequiredIsFunction)return isFunction_1;hasRequiredIsFunction=1;var _=require_baseGetTag(),d=requireIsObject(),v="[object AsyncFunction]",A="[object Function]",C="[object GeneratorFunction]",w="[object Proxy]";function T(R){if(!d(R))return!1;var G=_(R);return G==A||G==C||G==v||G==w}return isFunction_1=T,isFunction_1}var isLength_1,hasRequiredIsLength;function requireIsLength(){if(hasRequiredIsLength)return isLength_1;hasRequiredIsLength=1;var _=9007199254740991;function d(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=_}return isLength_1=d,isLength_1}var isArrayLike_1,hasRequiredIsArrayLike;function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike_1;hasRequiredIsArrayLike=1;var _=requireIsFunction(),d=requireIsLength();function v(A){return A!=null&&d(A.length)&&!_(A)}return isArrayLike_1=v,isArrayLike_1}var _isIndex,hasRequired_isIndex;function require_isIndex(){if(hasRequired_isIndex)return _isIndex;hasRequired_isIndex=1;var _=9007199254740991,d=/^(?:0|[1-9]\d*)$/;function v(A,C){var w=typeof A;return C=C??_,!!C&&(w=="number"||w!="symbol"&&d.test(A))&&A>-1&&A%1==0&&A<C}return _isIndex=v,_isIndex}var _isIterateeCall,hasRequired_isIterateeCall;function require_isIterateeCall(){if(hasRequired_isIterateeCall)return _isIterateeCall;hasRequired_isIterateeCall=1;var _=requireEq(),d=requireIsArrayLike(),v=require_isIndex(),A=requireIsObject();function C(w,T,R){if(!A(R))return!1;var G=typeof T;return(G=="number"?d(R)&&v(T,R.length):G=="string"&&T in R)?_(R[T],w):!1}return _isIterateeCall=C,_isIterateeCall}var _trimmedEndIndex,hasRequired_trimmedEndIndex;function require_trimmedEndIndex(){if(hasRequired_trimmedEndIndex)return _trimmedEndIndex;hasRequired_trimmedEndIndex=1;var _=/\s/;function d(v){for(var A=v.length;A--&&_.test(v.charAt(A)););return A}return _trimmedEndIndex=d,_trimmedEndIndex}var _baseTrim,hasRequired_baseTrim;function require_baseTrim(){if(hasRequired_baseTrim)return _baseTrim;hasRequired_baseTrim=1;var _=require_trimmedEndIndex(),d=/^\s+/;function v(A){return A&&A.slice(0,_(A)+1).replace(d,"")}return _baseTrim=v,_baseTrim}var isObjectLike_1,hasRequiredIsObjectLike;function requireIsObjectLike(){if(hasRequiredIsObjectLike)return isObjectLike_1;hasRequiredIsObjectLike=1;function _(d){return d!=null&&typeof d=="object"}return isObjectLike_1=_,isObjectLike_1}var isSymbol_1,hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol_1;hasRequiredIsSymbol=1;var _=require_baseGetTag(),d=requireIsObjectLike(),v="[object Symbol]";function A(C){return typeof C=="symbol"||d(C)&&_(C)==v}return isSymbol_1=A,isSymbol_1}var toNumber_1,hasRequiredToNumber;function requireToNumber(){if(hasRequiredToNumber)return toNumber_1;hasRequiredToNumber=1;var _=require_baseTrim(),d=requireIsObject(),v=requireIsSymbol(),A=NaN,C=/^[-+]0x[0-9a-f]+$/i,w=/^0b[01]+$/i,T=/^0o[0-7]+$/i,R=parseInt;function G(I){if(typeof I=="number")return I;if(v(I))return A;if(d(I)){var z=typeof I.valueOf=="function"?I.valueOf():I;I=d(z)?z+"":z}if(typeof I!="string")return I===0?I:+I;I=_(I);var H=w.test(I);return H||T.test(I)?R(I.slice(2),H?2:8):C.test(I)?A:+I}return toNumber_1=G,toNumber_1}var toFinite_1,hasRequiredToFinite;function requireToFinite(){if(hasRequiredToFinite)return toFinite_1;hasRequiredToFinite=1;var _=requireToNumber(),d=1/0,v=17976931348623157e292;function A(C){if(!C)return C===0?C:0;if(C=_(C),C===d||C===-d){var w=C<0?-1:1;return w*v}return C===C?C:0}return toFinite_1=A,toFinite_1}var _createRange,hasRequired_createRange;function require_createRange(){if(hasRequired_createRange)return _createRange;hasRequired_createRange=1;var _=require_baseRange(),d=require_isIterateeCall(),v=requireToFinite();function A(C){return function(w,T,R){return R&&typeof R!="number"&&d(w,T,R)&&(T=R=void 0),w=v(w),T===void 0?(T=w,w=0):T=v(T),R=R===void 0?w<T?1:-1:v(R),_(w,T,R,C)}}return _createRange=A,_createRange}var range_1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range_1;hasRequiredRange=1;var _=require_createRange(),d=_();return range_1=d,range_1}var rangeExports=requireRange();const range=getDefaultExportFromCjs(rangeExports);var toInteger_1,hasRequiredToInteger;function requireToInteger(){if(hasRequiredToInteger)return toInteger_1;hasRequiredToInteger=1;var _=requireToFinite();function d(v){var A=_(v),C=A%1;return A===A?C?A-C:A:0}return toInteger_1=d,toInteger_1}var _arrayMap,hasRequired_arrayMap;function require_arrayMap(){if(hasRequired_arrayMap)return _arrayMap;hasRequired_arrayMap=1;function _(d,v){for(var A=-1,C=d==null?0:d.length,w=Array(C);++A<C;)w[A]=v(d[A],A,d);return w}return _arrayMap=_,_arrayMap}var isArray_1,hasRequiredIsArray;function requireIsArray(){if(hasRequiredIsArray)return isArray_1;hasRequiredIsArray=1;var _=Array.isArray;return isArray_1=_,isArray_1}var _baseToString,hasRequired_baseToString;function require_baseToString(){if(hasRequired_baseToString)return _baseToString;hasRequired_baseToString=1;var _=require_Symbol(),d=require_arrayMap(),v=requireIsArray(),A=requireIsSymbol(),C=_?_.prototype:void 0,w=C?C.toString:void 0;function T(R){if(typeof R=="string")return R;if(v(R))return d(R,T)+"";if(A(R))return w?w.call(R):"";var G=R+"";return G=="0"&&1/R==-1/0?"-0":G}return _baseToString=T,_baseToString}var toString_1,hasRequiredToString;function requireToString(){if(hasRequiredToString)return toString_1;hasRequiredToString=1;var _=require_baseToString();function d(v){return v==null?"":_(v)}return toString_1=d,toString_1}var _createRound,hasRequired_createRound;function require_createRound(){if(hasRequired_createRound)return _createRound;hasRequired_createRound=1;var _=require_root(),d=requireToInteger(),v=requireToNumber(),A=requireToString(),C=_.isFinite,w=Math.min;function T(R){var G=Math[R];return function(I,z){if(I=v(I),z=z==null?0:w(d(z),292),z&&C(I)){var H=(A(I)+"e").split("e"),Y=G(H[0]+"e"+(+H[1]+z));return H=(A(Y)+"e").split("e"),+(H[0]+"e"+(+H[1]-z))}return G(I)}}return _createRound=T,_createRound}var round_1,hasRequiredRound;function requireRound(){if(hasRequiredRound)return round_1;hasRequiredRound=1;var _=require_createRound(),d=_("round");return round_1=d,round_1}var roundExports=requireRound();const round=getDefaultExportFromCjs(roundExports);var _listCacheClear,hasRequired_listCacheClear;function require_listCacheClear(){if(hasRequired_listCacheClear)return _listCacheClear;hasRequired_listCacheClear=1;function _(){this.__data__=[],this.size=0}return _listCacheClear=_,_listCacheClear}var _assocIndexOf,hasRequired_assocIndexOf;function require_assocIndexOf(){if(hasRequired_assocIndexOf)return _assocIndexOf;hasRequired_assocIndexOf=1;var _=requireEq();function d(v,A){for(var C=v.length;C--;)if(_(v[C][0],A))return C;return-1}return _assocIndexOf=d,_assocIndexOf}var _listCacheDelete,hasRequired_listCacheDelete;function require_listCacheDelete(){if(hasRequired_listCacheDelete)return _listCacheDelete;hasRequired_listCacheDelete=1;var _=require_assocIndexOf(),d=Array.prototype,v=d.splice;function A(C){var w=this.__data__,T=_(w,C);if(T<0)return!1;var R=w.length-1;return T==R?w.pop():v.call(w,T,1),--this.size,!0}return _listCacheDelete=A,_listCacheDelete}var _listCacheGet,hasRequired_listCacheGet;function require_listCacheGet(){if(hasRequired_listCacheGet)return _listCacheGet;hasRequired_listCacheGet=1;var _=require_assocIndexOf();function d(v){var A=this.__data__,C=_(A,v);return C<0?void 0:A[C][1]}return _listCacheGet=d,_listCacheGet}var _listCacheHas,hasRequired_listCacheHas;function require_listCacheHas(){if(hasRequired_listCacheHas)return _listCacheHas;hasRequired_listCacheHas=1;var _=require_assocIndexOf();function d(v){return _(this.__data__,v)>-1}return _listCacheHas=d,_listCacheHas}var _listCacheSet,hasRequired_listCacheSet;function require_listCacheSet(){if(hasRequired_listCacheSet)return _listCacheSet;hasRequired_listCacheSet=1;var _=require_assocIndexOf();function d(v,A){var C=this.__data__,w=_(C,v);return w<0?(++this.size,C.push([v,A])):C[w][1]=A,this}return _listCacheSet=d,_listCacheSet}var _ListCache,hasRequired_ListCache;function require_ListCache(){if(hasRequired_ListCache)return _ListCache;hasRequired_ListCache=1;var _=require_listCacheClear(),d=require_listCacheDelete(),v=require_listCacheGet(),A=require_listCacheHas(),C=require_listCacheSet();function w(T){var R=-1,G=T==null?0:T.length;for(this.clear();++R<G;){var I=T[R];this.set(I[0],I[1])}}return w.prototype.clear=_,w.prototype.delete=d,w.prototype.get=v,w.prototype.has=A,w.prototype.set=C,_ListCache=w,_ListCache}var _stackClear,hasRequired_stackClear;function require_stackClear(){if(hasRequired_stackClear)return _stackClear;hasRequired_stackClear=1;var _=require_ListCache();function d(){this.__data__=new _,this.size=0}return _stackClear=d,_stackClear}var _stackDelete,hasRequired_stackDelete;function require_stackDelete(){if(hasRequired_stackDelete)return _stackDelete;hasRequired_stackDelete=1;function _(d){var v=this.__data__,A=v.delete(d);return this.size=v.size,A}return _stackDelete=_,_stackDelete}var _stackGet,hasRequired_stackGet;function require_stackGet(){if(hasRequired_stackGet)return _stackGet;hasRequired_stackGet=1;function _(d){return this.__data__.get(d)}return _stackGet=_,_stackGet}var _stackHas,hasRequired_stackHas;function require_stackHas(){if(hasRequired_stackHas)return _stackHas;hasRequired_stackHas=1;function _(d){return this.__data__.has(d)}return _stackHas=_,_stackHas}var _coreJsData,hasRequired_coreJsData;function require_coreJsData(){if(hasRequired_coreJsData)return _coreJsData;hasRequired_coreJsData=1;var _=require_root(),d=_["__core-js_shared__"];return _coreJsData=d,_coreJsData}var _isMasked,hasRequired_isMasked;function require_isMasked(){if(hasRequired_isMasked)return _isMasked;hasRequired_isMasked=1;var _=require_coreJsData(),d=function(){var A=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return A?"Symbol(src)_1."+A:""}();function v(A){return!!d&&d in A}return _isMasked=v,_isMasked}var _toSource,hasRequired_toSource;function require_toSource(){if(hasRequired_toSource)return _toSource;hasRequired_toSource=1;var _=Function.prototype,d=_.toString;function v(A){if(A!=null){try{return d.call(A)}catch{}try{return A+""}catch{}}return""}return _toSource=v,_toSource}var _baseIsNative,hasRequired_baseIsNative;function require_baseIsNative(){if(hasRequired_baseIsNative)return _baseIsNative;hasRequired_baseIsNative=1;var _=requireIsFunction(),d=require_isMasked(),v=requireIsObject(),A=require_toSource(),C=/[\\^$.*+?()[\]{}|]/g,w=/^\[object .+?Constructor\]$/,T=Function.prototype,R=Object.prototype,G=T.toString,I=R.hasOwnProperty,z=RegExp("^"+G.call(I).replace(C,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function H(Y){if(!v(Y)||d(Y))return!1;var ee=_(Y)?z:w;return ee.test(A(Y))}return _baseIsNative=H,_baseIsNative}var _getValue,hasRequired_getValue;function require_getValue(){if(hasRequired_getValue)return _getValue;hasRequired_getValue=1;function _(d,v){return d?.[v]}return _getValue=_,_getValue}var _getNative,hasRequired_getNative;function require_getNative(){if(hasRequired_getNative)return _getNative;hasRequired_getNative=1;var _=require_baseIsNative(),d=require_getValue();function v(A,C){var w=d(A,C);return _(w)?w:void 0}return _getNative=v,_getNative}var _Map,hasRequired_Map;function require_Map(){if(hasRequired_Map)return _Map;hasRequired_Map=1;var _=require_getNative(),d=require_root(),v=_(d,"Map");return _Map=v,_Map}var _nativeCreate,hasRequired_nativeCreate;function require_nativeCreate(){if(hasRequired_nativeCreate)return _nativeCreate;hasRequired_nativeCreate=1;var _=require_getNative(),d=_(Object,"create");return _nativeCreate=d,_nativeCreate}var _hashClear,hasRequired_hashClear;function require_hashClear(){if(hasRequired_hashClear)return _hashClear;hasRequired_hashClear=1;var _=require_nativeCreate();function d(){this.__data__=_?_(null):{},this.size=0}return _hashClear=d,_hashClear}var _hashDelete,hasRequired_hashDelete;function require_hashDelete(){if(hasRequired_hashDelete)return _hashDelete;hasRequired_hashDelete=1;function _(d){var v=this.has(d)&&delete this.__data__[d];return this.size-=v?1:0,v}return _hashDelete=_,_hashDelete}var _hashGet,hasRequired_hashGet;function require_hashGet(){if(hasRequired_hashGet)return _hashGet;hasRequired_hashGet=1;var _=require_nativeCreate(),d="__lodash_hash_undefined__",v=Object.prototype,A=v.hasOwnProperty;function C(w){var T=this.__data__;if(_){var R=T[w];return R===d?void 0:R}return A.call(T,w)?T[w]:void 0}return _hashGet=C,_hashGet}var _hashHas,hasRequired_hashHas;function require_hashHas(){if(hasRequired_hashHas)return _hashHas;hasRequired_hashHas=1;var _=require_nativeCreate(),d=Object.prototype,v=d.hasOwnProperty;function A(C){var w=this.__data__;return _?w[C]!==void 0:v.call(w,C)}return _hashHas=A,_hashHas}var _hashSet,hasRequired_hashSet;function require_hashSet(){if(hasRequired_hashSet)return _hashSet;hasRequired_hashSet=1;var _=require_nativeCreate(),d="__lodash_hash_undefined__";function v(A,C){var w=this.__data__;return this.size+=this.has(A)?0:1,w[A]=_&&C===void 0?d:C,this}return _hashSet=v,_hashSet}var _Hash,hasRequired_Hash;function require_Hash(){if(hasRequired_Hash)return _Hash;hasRequired_Hash=1;var _=require_hashClear(),d=require_hashDelete(),v=require_hashGet(),A=require_hashHas(),C=require_hashSet();function w(T){var R=-1,G=T==null?0:T.length;for(this.clear();++R<G;){var I=T[R];this.set(I[0],I[1])}}return w.prototype.clear=_,w.prototype.delete=d,w.prototype.get=v,w.prototype.has=A,w.prototype.set=C,_Hash=w,_Hash}var _mapCacheClear,hasRequired_mapCacheClear;function require_mapCacheClear(){if(hasRequired_mapCacheClear)return _mapCacheClear;hasRequired_mapCacheClear=1;var _=require_Hash(),d=require_ListCache(),v=require_Map();function A(){this.size=0,this.__data__={hash:new _,map:new(v||d),string:new _}}return _mapCacheClear=A,_mapCacheClear}var _isKeyable,hasRequired_isKeyable;function require_isKeyable(){if(hasRequired_isKeyable)return _isKeyable;hasRequired_isKeyable=1;function _(d){var v=typeof d;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?d!=="__proto__":d===null}return _isKeyable=_,_isKeyable}var _getMapData,hasRequired_getMapData;function require_getMapData(){if(hasRequired_getMapData)return _getMapData;hasRequired_getMapData=1;var _=require_isKeyable();function d(v,A){var C=v.__data__;return _(A)?C[typeof A=="string"?"string":"hash"]:C.map}return _getMapData=d,_getMapData}var _mapCacheDelete,hasRequired_mapCacheDelete;function require_mapCacheDelete(){if(hasRequired_mapCacheDelete)return _mapCacheDelete;hasRequired_mapCacheDelete=1;var _=require_getMapData();function d(v){var A=_(this,v).delete(v);return this.size-=A?1:0,A}return _mapCacheDelete=d,_mapCacheDelete}var _mapCacheGet,hasRequired_mapCacheGet;function require_mapCacheGet(){if(hasRequired_mapCacheGet)return _mapCacheGet;hasRequired_mapCacheGet=1;var _=require_getMapData();function d(v){return _(this,v).get(v)}return _mapCacheGet=d,_mapCacheGet}var _mapCacheHas,hasRequired_mapCacheHas;function require_mapCacheHas(){if(hasRequired_mapCacheHas)return _mapCacheHas;hasRequired_mapCacheHas=1;var _=require_getMapData();function d(v){return _(this,v).has(v)}return _mapCacheHas=d,_mapCacheHas}var _mapCacheSet,hasRequired_mapCacheSet;function require_mapCacheSet(){if(hasRequired_mapCacheSet)return _mapCacheSet;hasRequired_mapCacheSet=1;var _=require_getMapData();function d(v,A){var C=_(this,v),w=C.size;return C.set(v,A),this.size+=C.size==w?0:1,this}return _mapCacheSet=d,_mapCacheSet}var _MapCache,hasRequired_MapCache;function require_MapCache(){if(hasRequired_MapCache)return _MapCache;hasRequired_MapCache=1;var _=require_mapCacheClear(),d=require_mapCacheDelete(),v=require_mapCacheGet(),A=require_mapCacheHas(),C=require_mapCacheSet();function w(T){var R=-1,G=T==null?0:T.length;for(this.clear();++R<G;){var I=T[R];this.set(I[0],I[1])}}return w.prototype.clear=_,w.prototype.delete=d,w.prototype.get=v,w.prototype.has=A,w.prototype.set=C,_MapCache=w,_MapCache}var _stackSet,hasRequired_stackSet;function require_stackSet(){if(hasRequired_stackSet)return _stackSet;hasRequired_stackSet=1;var _=require_ListCache(),d=require_Map(),v=require_MapCache(),A=200;function C(w,T){var R=this.__data__;if(R instanceof _){var G=R.__data__;if(!d||G.length<A-1)return G.push([w,T]),this.size=++R.size,this;R=this.__data__=new v(G)}return R.set(w,T),this.size=R.size,this}return _stackSet=C,_stackSet}var _Stack,hasRequired_Stack;function require_Stack(){if(hasRequired_Stack)return _Stack;hasRequired_Stack=1;var _=require_ListCache(),d=require_stackClear(),v=require_stackDelete(),A=require_stackGet(),C=require_stackHas(),w=require_stackSet();function T(R){var G=this.__data__=new _(R);this.size=G.size}return T.prototype.clear=d,T.prototype.delete=v,T.prototype.get=A,T.prototype.has=C,T.prototype.set=w,_Stack=T,_Stack}var _setCacheAdd,hasRequired_setCacheAdd;function require_setCacheAdd(){if(hasRequired_setCacheAdd)return _setCacheAdd;hasRequired_setCacheAdd=1;var _="__lodash_hash_undefined__";function d(v){return this.__data__.set(v,_),this}return _setCacheAdd=d,_setCacheAdd}var _setCacheHas,hasRequired_setCacheHas;function require_setCacheHas(){if(hasRequired_setCacheHas)return _setCacheHas;hasRequired_setCacheHas=1;function _(d){return this.__data__.has(d)}return _setCacheHas=_,_setCacheHas}var _SetCache,hasRequired_SetCache;function require_SetCache(){if(hasRequired_SetCache)return _SetCache;hasRequired_SetCache=1;var _=require_MapCache(),d=require_setCacheAdd(),v=require_setCacheHas();function A(C){var w=-1,T=C==null?0:C.length;for(this.__data__=new _;++w<T;)this.add(C[w])}return A.prototype.add=A.prototype.push=d,A.prototype.has=v,_SetCache=A,_SetCache}var _arraySome,hasRequired_arraySome;function require_arraySome(){if(hasRequired_arraySome)return _arraySome;hasRequired_arraySome=1;function _(d,v){for(var A=-1,C=d==null?0:d.length;++A<C;)if(v(d[A],A,d))return!0;return!1}return _arraySome=_,_arraySome}var _cacheHas,hasRequired_cacheHas;function require_cacheHas(){if(hasRequired_cacheHas)return _cacheHas;hasRequired_cacheHas=1;function _(d,v){return d.has(v)}return _cacheHas=_,_cacheHas}var _equalArrays,hasRequired_equalArrays;function require_equalArrays(){if(hasRequired_equalArrays)return _equalArrays;hasRequired_equalArrays=1;var _=require_SetCache(),d=require_arraySome(),v=require_cacheHas(),A=1,C=2;function w(T,R,G,I,z,H){var Y=G&A,ee=T.length,ie=R.length;if(ee!=ie&&!(Y&&ie>ee))return!1;var oe=H.get(T),se=H.get(R);if(oe&&se)return oe==R&&se==T;var re=-1,fe=!0,ue=G&C?new _:void 0;for(H.set(T,R),H.set(R,T);++re<ee;){var ge=T[re],ye=R[re];if(I)var be=Y?I(ye,ge,re,R,T,H):I(ge,ye,re,T,R,H);if(be!==void 0){if(be)continue;fe=!1;break}if(ue){if(!d(R,function(ve,Me){if(!v(ue,Me)&&(ge===ve||z(ge,ve,G,I,H)))return ue.push(Me)})){fe=!1;break}}else if(!(ge===ye||z(ge,ye,G,I,H))){fe=!1;break}}return H.delete(T),H.delete(R),fe}return _equalArrays=w,_equalArrays}var _Uint8Array,hasRequired_Uint8Array;function require_Uint8Array(){if(hasRequired_Uint8Array)return _Uint8Array;hasRequired_Uint8Array=1;var _=require_root(),d=_.Uint8Array;return _Uint8Array=d,_Uint8Array}var _mapToArray,hasRequired_mapToArray;function require_mapToArray(){if(hasRequired_mapToArray)return _mapToArray;hasRequired_mapToArray=1;function _(d){var v=-1,A=Array(d.size);return d.forEach(function(C,w){A[++v]=[w,C]}),A}return _mapToArray=_,_mapToArray}var _setToArray,hasRequired_setToArray;function require_setToArray(){if(hasRequired_setToArray)return _setToArray;hasRequired_setToArray=1;function _(d){var v=-1,A=Array(d.size);return d.forEach(function(C){A[++v]=C}),A}return _setToArray=_,_setToArray}var _equalByTag,hasRequired_equalByTag;function require_equalByTag(){if(hasRequired_equalByTag)return _equalByTag;hasRequired_equalByTag=1;var _=require_Symbol(),d=require_Uint8Array(),v=requireEq(),A=require_equalArrays(),C=require_mapToArray(),w=require_setToArray(),T=1,R=2,G="[object Boolean]",I="[object Date]",z="[object Error]",H="[object Map]",Y="[object Number]",ee="[object RegExp]",ie="[object Set]",oe="[object String]",se="[object Symbol]",re="[object ArrayBuffer]",fe="[object DataView]",ue=_?_.prototype:void 0,ge=ue?ue.valueOf:void 0;function ye(be,ve,Me,we,Be,De,Fe){switch(Me){case fe:if(be.byteLength!=ve.byteLength||be.byteOffset!=ve.byteOffset)return!1;be=be.buffer,ve=ve.buffer;case re:return!(be.byteLength!=ve.byteLength||!De(new d(be),new d(ve)));case G:case I:case Y:return v(+be,+ve);case z:return be.name==ve.name&&be.message==ve.message;case ee:case oe:return be==ve+"";case H:var Oe=C;case ie:var Ge=we&T;if(Oe||(Oe=w),be.size!=ve.size&&!Ge)return!1;var ze=Fe.get(be);if(ze)return ze==ve;we|=R,Fe.set(be,ve);var je=A(Oe(be),Oe(ve),we,Be,De,Fe);return Fe.delete(be),je;case se:if(ge)return ge.call(be)==ge.call(ve)}return!1}return _equalByTag=ye,_equalByTag}var _arrayPush,hasRequired_arrayPush;function require_arrayPush(){if(hasRequired_arrayPush)return _arrayPush;hasRequired_arrayPush=1;function _(d,v){for(var A=-1,C=v.length,w=d.length;++A<C;)d[w+A]=v[A];return d}return _arrayPush=_,_arrayPush}var _baseGetAllKeys,hasRequired_baseGetAllKeys;function require_baseGetAllKeys(){if(hasRequired_baseGetAllKeys)return _baseGetAllKeys;hasRequired_baseGetAllKeys=1;var _=require_arrayPush(),d=requireIsArray();function v(A,C,w){var T=C(A);return d(A)?T:_(T,w(A))}return _baseGetAllKeys=v,_baseGetAllKeys}var _arrayFilter,hasRequired_arrayFilter;function require_arrayFilter(){if(hasRequired_arrayFilter)return _arrayFilter;hasRequired_arrayFilter=1;function _(d,v){for(var A=-1,C=d==null?0:d.length,w=0,T=[];++A<C;){var R=d[A];v(R,A,d)&&(T[w++]=R)}return T}return _arrayFilter=_,_arrayFilter}var stubArray_1,hasRequiredStubArray;function requireStubArray(){if(hasRequiredStubArray)return stubArray_1;hasRequiredStubArray=1;function _(){return[]}return stubArray_1=_,stubArray_1}var _getSymbols,hasRequired_getSymbols;function require_getSymbols(){if(hasRequired_getSymbols)return _getSymbols;hasRequired_getSymbols=1;var _=require_arrayFilter(),d=requireStubArray(),v=Object.prototype,A=v.propertyIsEnumerable,C=Object.getOwnPropertySymbols,w=C?function(T){return T==null?[]:(T=Object(T),_(C(T),function(R){return A.call(T,R)}))}:d;return _getSymbols=w,_getSymbols}var _baseTimes,hasRequired_baseTimes;function require_baseTimes(){if(hasRequired_baseTimes)return _baseTimes;hasRequired_baseTimes=1;function _(d,v){for(var A=-1,C=Array(d);++A<d;)C[A]=v(A);return C}return _baseTimes=_,_baseTimes}var _baseIsArguments,hasRequired_baseIsArguments;function require_baseIsArguments(){if(hasRequired_baseIsArguments)return _baseIsArguments;hasRequired_baseIsArguments=1;var _=require_baseGetTag(),d=requireIsObjectLike(),v="[object Arguments]";function A(C){return d(C)&&_(C)==v}return _baseIsArguments=A,_baseIsArguments}var isArguments_1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments_1;hasRequiredIsArguments=1;var _=require_baseIsArguments(),d=requireIsObjectLike(),v=Object.prototype,A=v.hasOwnProperty,C=v.propertyIsEnumerable,w=_(function(){return arguments}())?_:function(T){return d(T)&&A.call(T,"callee")&&!C.call(T,"callee")};return isArguments_1=w,isArguments_1}var isBuffer={exports:{}},stubFalse_1,hasRequiredStubFalse;function requireStubFalse(){if(hasRequiredStubFalse)return stubFalse_1;hasRequiredStubFalse=1;function _(){return!1}return stubFalse_1=_,stubFalse_1}isBuffer.exports;var hasRequiredIsBuffer;function requireIsBuffer(){return hasRequiredIsBuffer||(hasRequiredIsBuffer=1,function(_,d){var v=require_root(),A=requireStubFalse(),C=d&&!d.nodeType&&d,w=C&&!0&&_&&!_.nodeType&&_,T=w&&w.exports===C,R=T?v.Buffer:void 0,G=R?R.isBuffer:void 0,I=G||A;_.exports=I}(isBuffer,isBuffer.exports)),isBuffer.exports}var _baseIsTypedArray,hasRequired_baseIsTypedArray;function require_baseIsTypedArray(){if(hasRequired_baseIsTypedArray)return _baseIsTypedArray;hasRequired_baseIsTypedArray=1;var _=require_baseGetTag(),d=requireIsLength(),v=requireIsObjectLike(),A="[object Arguments]",C="[object Array]",w="[object Boolean]",T="[object Date]",R="[object Error]",G="[object Function]",I="[object Map]",z="[object Number]",H="[object Object]",Y="[object RegExp]",ee="[object Set]",ie="[object String]",oe="[object WeakMap]",se="[object ArrayBuffer]",re="[object DataView]",fe="[object Float32Array]",ue="[object Float64Array]",ge="[object Int8Array]",ye="[object Int16Array]",be="[object Int32Array]",ve="[object Uint8Array]",Me="[object Uint8ClampedArray]",we="[object Uint16Array]",Be="[object Uint32Array]",De={};De[fe]=De[ue]=De[ge]=De[ye]=De[be]=De[ve]=De[Me]=De[we]=De[Be]=!0,De[A]=De[C]=De[se]=De[w]=De[re]=De[T]=De[R]=De[G]=De[I]=De[z]=De[H]=De[Y]=De[ee]=De[ie]=De[oe]=!1;function Fe(Oe){return v(Oe)&&d(Oe.length)&&!!De[_(Oe)]}return _baseIsTypedArray=Fe,_baseIsTypedArray}var _baseUnary,hasRequired_baseUnary;function require_baseUnary(){if(hasRequired_baseUnary)return _baseUnary;hasRequired_baseUnary=1;function _(d){return function(v){return d(v)}}return _baseUnary=_,_baseUnary}var _nodeUtil={exports:{}};_nodeUtil.exports;var hasRequired_nodeUtil;function require_nodeUtil(){return hasRequired_nodeUtil||(hasRequired_nodeUtil=1,function(_,d){var v=require_freeGlobal(),A=d&&!d.nodeType&&d,C=A&&!0&&_&&!_.nodeType&&_,w=C&&C.exports===A,T=w&&v.process,R=function(){try{var G=C&&C.require&&C.require("util").types;return G||T&&T.binding&&T.binding("util")}catch{}}();_.exports=R}(_nodeUtil,_nodeUtil.exports)),_nodeUtil.exports}var isTypedArray_1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray_1;hasRequiredIsTypedArray=1;var _=require_baseIsTypedArray(),d=require_baseUnary(),v=require_nodeUtil(),A=v&&v.isTypedArray,C=A?d(A):_;return isTypedArray_1=C,isTypedArray_1}var _arrayLikeKeys,hasRequired_arrayLikeKeys;function require_arrayLikeKeys(){if(hasRequired_arrayLikeKeys)return _arrayLikeKeys;hasRequired_arrayLikeKeys=1;var _=require_baseTimes(),d=requireIsArguments(),v=requireIsArray(),A=requireIsBuffer(),C=require_isIndex(),w=requireIsTypedArray(),T=Object.prototype,R=T.hasOwnProperty;function G(I,z){var H=v(I),Y=!H&&d(I),ee=!H&&!Y&&A(I),ie=!H&&!Y&&!ee&&w(I),oe=H||Y||ee||ie,se=oe?_(I.length,String):[],re=se.length;for(var fe in I)(z||R.call(I,fe))&&!(oe&&(fe=="length"||ee&&(fe=="offset"||fe=="parent")||ie&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||C(fe,re)))&&se.push(fe);return se}return _arrayLikeKeys=G,_arrayLikeKeys}var _isPrototype,hasRequired_isPrototype;function require_isPrototype(){if(hasRequired_isPrototype)return _isPrototype;hasRequired_isPrototype=1;var _=Object.prototype;function d(v){var A=v&&v.constructor,C=typeof A=="function"&&A.prototype||_;return v===C}return _isPrototype=d,_isPrototype}var _overArg,hasRequired_overArg;function require_overArg(){if(hasRequired_overArg)return _overArg;hasRequired_overArg=1;function _(d,v){return function(A){return d(v(A))}}return _overArg=_,_overArg}var _nativeKeys,hasRequired_nativeKeys;function require_nativeKeys(){if(hasRequired_nativeKeys)return _nativeKeys;hasRequired_nativeKeys=1;var _=require_overArg(),d=_(Object.keys,Object);return _nativeKeys=d,_nativeKeys}var _baseKeys,hasRequired_baseKeys;function require_baseKeys(){if(hasRequired_baseKeys)return _baseKeys;hasRequired_baseKeys=1;var _=require_isPrototype(),d=require_nativeKeys(),v=Object.prototype,A=v.hasOwnProperty;function C(w){if(!_(w))return d(w);var T=[];for(var R in Object(w))A.call(w,R)&&R!="constructor"&&T.push(R);return T}return _baseKeys=C,_baseKeys}var keys_1,hasRequiredKeys;function requireKeys(){if(hasRequiredKeys)return keys_1;hasRequiredKeys=1;var _=require_arrayLikeKeys(),d=require_baseKeys(),v=requireIsArrayLike();function A(C){return v(C)?_(C):d(C)}return keys_1=A,keys_1}var _getAllKeys,hasRequired_getAllKeys;function require_getAllKeys(){if(hasRequired_getAllKeys)return _getAllKeys;hasRequired_getAllKeys=1;var _=require_baseGetAllKeys(),d=require_getSymbols(),v=requireKeys();function A(C){return _(C,v,d)}return _getAllKeys=A,_getAllKeys}var _equalObjects,hasRequired_equalObjects;function require_equalObjects(){if(hasRequired_equalObjects)return _equalObjects;hasRequired_equalObjects=1;var _=require_getAllKeys(),d=1,v=Object.prototype,A=v.hasOwnProperty;function C(w,T,R,G,I,z){var H=R&d,Y=_(w),ee=Y.length,ie=_(T),oe=ie.length;if(ee!=oe&&!H)return!1;for(var se=ee;se--;){var re=Y[se];if(!(H?re in T:A.call(T,re)))return!1}var fe=z.get(w),ue=z.get(T);if(fe&&ue)return fe==T&&ue==w;var ge=!0;z.set(w,T),z.set(T,w);for(var ye=H;++se<ee;){re=Y[se];var be=w[re],ve=T[re];if(G)var Me=H?G(ve,be,re,T,w,z):G(be,ve,re,w,T,z);if(!(Me===void 0?be===ve||I(be,ve,R,G,z):Me)){ge=!1;break}ye||(ye=re=="constructor")}if(ge&&!ye){var we=w.constructor,Be=T.constructor;we!=Be&&"constructor"in w&&"constructor"in T&&!(typeof we=="function"&&we instanceof we&&typeof Be=="function"&&Be instanceof Be)&&(ge=!1)}return z.delete(w),z.delete(T),ge}return _equalObjects=C,_equalObjects}var _DataView,hasRequired_DataView;function require_DataView(){if(hasRequired_DataView)return _DataView;hasRequired_DataView=1;var _=require_getNative(),d=require_root(),v=_(d,"DataView");return _DataView=v,_DataView}var _Promise,hasRequired_Promise;function require_Promise(){if(hasRequired_Promise)return _Promise;hasRequired_Promise=1;var _=require_getNative(),d=require_root(),v=_(d,"Promise");return _Promise=v,_Promise}var _Set,hasRequired_Set;function require_Set(){if(hasRequired_Set)return _Set;hasRequired_Set=1;var _=require_getNative(),d=require_root(),v=_(d,"Set");return _Set=v,_Set}var _WeakMap,hasRequired_WeakMap;function require_WeakMap(){if(hasRequired_WeakMap)return _WeakMap;hasRequired_WeakMap=1;var _=require_getNative(),d=require_root(),v=_(d,"WeakMap");return _WeakMap=v,_WeakMap}var _getTag,hasRequired_getTag;function require_getTag(){if(hasRequired_getTag)return _getTag;hasRequired_getTag=1;var _=require_DataView(),d=require_Map(),v=require_Promise(),A=require_Set(),C=require_WeakMap(),w=require_baseGetTag(),T=require_toSource(),R="[object Map]",G="[object Object]",I="[object Promise]",z="[object Set]",H="[object WeakMap]",Y="[object DataView]",ee=T(_),ie=T(d),oe=T(v),se=T(A),re=T(C),fe=w;return(_&&fe(new _(new ArrayBuffer(1)))!=Y||d&&fe(new d)!=R||v&&fe(v.resolve())!=I||A&&fe(new A)!=z||C&&fe(new C)!=H)&&(fe=function(ue){var ge=w(ue),ye=ge==G?ue.constructor:void 0,be=ye?T(ye):"";if(be)switch(be){case ee:return Y;case ie:return R;case oe:return I;case se:return z;case re:return H}return ge}),_getTag=fe,_getTag}var _baseIsEqualDeep,hasRequired_baseIsEqualDeep;function require_baseIsEqualDeep(){if(hasRequired_baseIsEqualDeep)return _baseIsEqualDeep;hasRequired_baseIsEqualDeep=1;var _=require_Stack(),d=require_equalArrays(),v=require_equalByTag(),A=require_equalObjects(),C=require_getTag(),w=requireIsArray(),T=requireIsBuffer(),R=requireIsTypedArray(),G=1,I="[object Arguments]",z="[object Array]",H="[object Object]",Y=Object.prototype,ee=Y.hasOwnProperty;function ie(oe,se,re,fe,ue,ge){var ye=w(oe),be=w(se),ve=ye?z:C(oe),Me=be?z:C(se);ve=ve==I?H:ve,Me=Me==I?H:Me;var we=ve==H,Be=Me==H,De=ve==Me;if(De&&T(oe)){if(!T(se))return!1;ye=!0,we=!1}if(De&&!we)return ge||(ge=new _),ye||R(oe)?d(oe,se,re,fe,ue,ge):v(oe,se,ve,re,fe,ue,ge);if(!(re&G)){var Fe=we&&ee.call(oe,"__wrapped__"),Oe=Be&&ee.call(se,"__wrapped__");if(Fe||Oe){var Ge=Fe?oe.value():oe,ze=Oe?se.value():se;return ge||(ge=new _),ue(Ge,ze,re,fe,ge)}}return De?(ge||(ge=new _),A(oe,se,re,fe,ue,ge)):!1}return _baseIsEqualDeep=ie,_baseIsEqualDeep}var _baseIsEqual,hasRequired_baseIsEqual;function require_baseIsEqual(){if(hasRequired_baseIsEqual)return _baseIsEqual;hasRequired_baseIsEqual=1;var _=require_baseIsEqualDeep(),d=requireIsObjectLike();function v(A,C,w,T,R){return A===C?!0:A==null||C==null||!d(A)&&!d(C)?A!==A&&C!==C:_(A,C,w,T,v,R)}return _baseIsEqual=v,_baseIsEqual}var isEqual_1,hasRequiredIsEqual;function requireIsEqual(){if(hasRequiredIsEqual)return isEqual_1;hasRequiredIsEqual=1;var _=require_baseIsEqual();function d(v,A){return _(v,A)}return isEqual_1=d,isEqual_1}var isEqualExports=requireIsEqual();const isEqual=getDefaultExportFromCjs(isEqualExports);var __assign=function(){return __assign=Object.assign||function(d){for(var v,A=1,C=arguments.length;A<C;A++){v=arguments[A];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(d[w]=v[w])}return d},__assign.apply(this,arguments)};function __rest(_,d){var v={};for(var A in _)Object.prototype.hasOwnProperty.call(_,A)&&d.indexOf(A)<0&&(v[A]=_[A]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var C=0,A=Object.getOwnPropertySymbols(_);C<A.length;C++)d.indexOf(A[C])<0&&Object.prototype.propertyIsEnumerable.call(_,A[C])&&(v[A[C]]=_[A[C]]);return v}typeof SuppressedError=="function"&&SuppressedError;var mapRange=function(_,d,v,A,C){return(_-d)*(C-A)/(v-d)+A},rotate=function(_,d){var v=_+d;return v>360?v-360:v},coinFlip=function(){return Math.random()>.5},zAxisRotation=[0,0,1],rotationTransforms=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],zAxisRotation],shouldBeCircle=function(_){return!isEqual(rotationTransforms[_],zAxisRotation)&&coinFlip()},ROTATION_SPEED_MIN=200,ROTATION_SPEED_MAX=800,CRAZY_PARTICLES_FREQUENCY=.1,CRAZY_PARTICLE_CRAZINESS=.25,BEZIER_MEDIAN=.5,generateInstanceId=function(){var _=0;return function(){return"".concat(_++)}}(),generateStyles=function(_,d){var v=d.particles,A=d.duration,C=d.height,w=d.width,T=d.force,R=d.particleSize,G=rotationTransforms.map(function(ie,oe){return`
      @keyframes rotation-`.concat(_,"-").concat(oe,` {
        50% {
          transform: rotate3d(`).concat(ie.map(function(se){return se/2}).join(),`, 180deg);
        }
        100% {
          transform: rotate3d(`).concat(ie.join(),`, 360deg);
        }
      }
    `)}).join(`
`),I=typeof C=="string"?C:"".concat(C,"px"),z=`
    @keyframes y-axis-`.concat(_,` {
      to {
        transform: translateY(`).concat(I,`);
      }
    }
  `),H=v.map(function(ie,oe){var se=mapRange(Math.abs(rotate(ie.degree,90)-180),0,180,-w/2,w/2);return`
      @keyframes x-axis-`.concat(_,"-").concat(oe,` {
        to {
          transform: translateX(`).concat(se,`px);
        }
      }
    `)}).join(`
`),Y=v.map(function(ie,oe){var se=Math.round(Math.random()*(ROTATION_SPEED_MAX-ROTATION_SPEED_MIN)+ROTATION_SPEED_MIN),re=Math.round(Math.random()*(rotationTransforms.length-1)),fe=A-Math.round(Math.random()*1e3),ue=Math.random()<CRAZY_PARTICLES_FREQUENCY,ge=shouldBeCircle(re),ye=ue?round(Math.random()*CRAZY_PARTICLE_CRAZINESS,2):0,be=ye*-1,ve=ye,Me=round(Math.abs(mapRange(Math.abs(rotate(ie.degree,90)-180),0,180,-1,1)),4),we=round(Math.random()*BEZIER_MEDIAN,4),Be=round(Math.random()*T*(coinFlip()?1:-1),4),De=BEZIER_MEDIAN,Fe=round(Math.max(mapRange(Math.abs(ie.degree-180),0,180,T,-T),0),4);return`
      .confetti-explosion-particle-`.concat(_,"-").concat(oe,` {
        animation: x-axis-`).concat(_,"-").concat(oe," ").concat(fe,"ms forwards cubic-bezier(").concat(ye,", ").concat(be,", ").concat(ve,", ").concat(Me,`);
      }
      
      .confetti-explosion-particle-`).concat(_,"-").concat(oe,` > div {
        width: `).concat(ge?R:Math.round(Math.random()*4)+R/2,`px;
        height: `).concat(ge?R:Math.round(Math.random()*2)+R,`px;
        animation: y-axis-`).concat(_," ").concat(fe,"ms forwards cubic-bezier(").concat(we,", ").concat(Be,", ").concat(De,", ").concat(Fe,`);
      }
      
      .confetti-explosion-particle-`).concat(_,"-").concat(oe,` > div:after {
        background-color: `).concat(ie.color,`;
        animation: rotation-`).concat(_,"-").concat(re," ").concat(se,`ms infinite linear;
        `).concat(ge?"border-radius: 50%;":"",`
      }
    `)}).join(`
`),ee=`
    .confetti-explosion-container-`.concat(_,` {
      width: 0;
      height: 0;
      position: relative;
    }
    
    .confetti-explosion-screen-`).concat(_,` {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      overflow: hidden;
      pointer-events: none;
    }
    
    .confetti-explosion-particle-`).concat(_,` > div {
      position: absolute;
      left: 0;
      top: 0;
    }
    
    .confetti-explosion-particle-`).concat(_,` > div:after {
      content: '';
      display: block;
      width: 100%;
      height: 100%;
    }
  `);return`
    `.concat(G,`
    `).concat(z,`
    `).concat(H,`
    `).concat(ee,`
    `).concat(Y,`
  `)},appendStyles=function(_,d){var v=document.createElement("style");return v.id=d,v.textContent=_,document.head.appendChild(v),v},useConfettiStyles=function(_){var d=React.useRef(generateInstanceId()),v=d.current;return React.useEffect(function(){var A="confetti-style-".concat(v);return appendStyles(generateStyles(v,_),A),function(){var C=document.getElementById(A);C&&document.head.removeChild(C)}},[_.particles,_.duration,_.height,_.width,_.force,_.particleSize,v]),{container:"confetti-explosion-container-".concat(v),screen:"confetti-explosion-screen-".concat(v),particle:function(A){return"confetti-explosion-particle-".concat(v," confetti-explosion-particle-").concat(v,"-").concat(A)}}},FORCE=.5,SIZE=12,HEIGHT="120vh",WIDTH=1e3,PARTICLE_COUNT=100,DURATION=2200,COLORS=["#FFC700","#FF0000","#2E3191","#41BBC7"],createParticles=function(_,d){var v=360/_;return range(_).map(function(A){return{color:d[A%d.length],degree:v*A}})};function ConfettiExplosion(_){var d=_.particleCount,v=d===void 0?PARTICLE_COUNT:d,A=_.duration,C=A===void 0?DURATION:A,w=_.colors,T=w===void 0?COLORS:w,R=_.particleSize,G=R===void 0?SIZE:R,I=_.force,z=I===void 0?FORCE:I,H=_.height,Y=H===void 0?HEIGHT:H,ee=_.width,ie=ee===void 0?WIDTH:ee,oe=_.zIndex,se=_.onComplete,re=__rest(_,["particleCount","duration","colors","particleSize","force","height","width","zIndex","onComplete"]),fe=reactExports.useState(),ue=fe[0],ge=fe[1],ye=reactExports.useState(!0),be=ye[0],ve=ye[1],Me=reactExports.useMemo(function(){return createParticles(v,T)},[v,T]),we=useConfettiStyles({particles:Me,duration:C,particleSize:G,force:z,width:ie,height:Y}),Be=reactExports.useCallback(function(De){if(De){var Fe=De.getBoundingClientRect(),Oe=Fe.top,Ge=Fe.left;ge({top:Oe,left:Ge})}},[]);return reactExports.useEffect(function(){if(typeof se=="function"){var De=setTimeout(function(){ve(!1),se()},C);return function(){return clearTimeout(De)}}else{var Fe=setTimeout(function(){ve(!1)},C);return function(){return clearTimeout(Fe)}}},[C,se]),jsxRuntimeExports.jsx("div",__assign({ref:Be,className:we.container},re,{children:ue&&be&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",__assign({className:we.screen},oe?{style:{zIndex:oe}}:null,{children:jsxRuntimeExports.jsx("div",__assign({style:{position:"absolute",top:ue.top,left:ue.left}},{children:Me.map(function(De,Fe){return jsxRuntimeExports.jsx("div",__assign({className:we.particle(Fe)},{children:jsxRuntimeExports.jsx("div",{})}),De.degree)})}))})),document.body)}))}const confettiProps={force:.5,duration:2e3,particleCount:150,width:400,height:"100vh",zIndex:999},SkinApply=_=>{const{t:d}=useTranslation(),{appState:v}=useAppState(),[A]=useAtom(userAtom),{setPopup:C}=reactExports.useContext(PopupContext),[w,T]=useAtom(cap3dLoadedAtom),[R,G]=reactExports.useState({upgradeSkinProgress:!1,upgradeFrameProgress:!1,isSkinSelectorOpen:!1,source:_.initialSkinSelection?.source,skin:_.initialSkinSelection?.skin,type:_.initialSkinSelection?.type}),I=reactExports.useMemo(()=>{const Ge=R.source?v.capsGd.skins.types[R.source]:void 0;return R.source&&Ge&&Ge.type=="background"?getApplySkinPrice(R.source,_.cap,v.capsGd):_.cap.skin?.background?getApplySkinPrice(_.cap.skin.background.source,_.cap,v.capsGd):-1},[v.capsGd,_.cap,R.source]),z=reactExports.useMemo(()=>{const Ge=R.source?v.capsGd.skins.types[R.source]:void 0;return R.source&&Ge&&Ge.type=="outline"?getApplySkinPrice(R.source,_.cap,v.capsGd):_.cap.skin?.outline?getApplySkinPrice(_.cap.skin.outline.source,_.cap,v.capsGd):-1},[v.capsGd,_.cap,R.source]),[H,Y]=reactExports.useState(!1),ee=reactExports.useCallback(()=>{R.isSkinSelectorOpen||_.onBackPressed()},[_,R.isSkinSelectorOpen]);useBackClick(ee);const ie=R.source?v.capsGd.skins.types[R.source]:void 0,oe=_.cap.skin?.background,se=oe&&R.source&&ie?.type=="background"&&R.source!=_.cap.skin?.background?.source,re=I>A.tokens||!oe&&ie?.type!=="background",fe=_.cap.skin?.outline,ue=fe?v.capsGd.skins.types[fe.source]:void 0,ge=!!fe,ye=ie?.origin=="achievement"&&ue?.origin=="achievement",be=ge&&R.source&&ie&&ie?.type=="outline"&&(ye?R.source!=fe?.source||R.skin!=fe?.skin:R.source!=fe?.source),ve=!ge,Me=_.cap.skin?.outline?v.capsGd.skins.types[_.cap.skin?.outline.source]:void 0,we=Me?Me.origin=="achievement":!1,Be=z>A.tokens||ve&&ie?.type!="outline"||we&&!be,De=async Ge=>{T(!1);const ze=Ge=="outline"?_.cap.skin?.outline:_.cap.skin?.background,He=R.source&&v.capsGd.skins.types[R.source].type==Ge?R.source:ze?.source;if(!He){C({message:"Some problem occurred during apply",type:"error"});return}const Xe={...R};Ge=="outline"?Xe.upgradeFrameProgress=!0:Xe.upgradeSkinProgress=!0,G(Xe);try{await capsService.applySkin(_.cap.id,firebaseService.token,He,R.skin,R.type),await _.onApply(_.cap.id),CapsWebApp.handleVibration("medium"),CapsWebApp.playSound("caps-upgrade/finished.mp3"),Y(!0)}catch{C({message:"Some problem occurred during apply",type:"error"})}G({...R,upgradeFrameProgress:!1,upgradeSkinProgress:!1,source:void 0,type:void 0,skin:void 0})},Fe=Ge=>{CapsWebApp.playSound("caps-upgrade/upgrade.mp3");const ze=Ge=="outline"?_.cap.skin?.outline:_.cap.skin?.background,je=()=>!_.cap.skin?.rerolls||_.cap.skin?.rerolls==0?!1:R.source?ze?R.source==ze.source:!1:!0;CapsWebApp.showPopup({message:d(je()?"upgrade.rerollConfirmation":"upgrade.skinConfirmation",{number:_.cap.collectionNumber,price:Ge=="outline"?z:I}),buttons:[{id:"cancel",type:"cancel"},{id:"ok",type:"default",text:" Apply"}]}).then(He=>{He=="ok"&&(CapsWebApp.playSound("caps-upgrade/upgrade-fire.mp3"),De(Ge))})};if(R.isSkinSelectorOpen)return jsxRuntimeExports.jsx(SkinSelector,{filter:{collectionId:_.cap.collectionId,excludedSkins:[_.cap.skin?.background?{source:_.cap.skin?.background.source,skin:_.cap.skin?.background.skin,type:_.cap.skin?.background.type}:void 0,_.cap.skin?.outline?.source?{source:_.cap.skin?.outline?.source,skin:_.cap.skin?.outline?.skin,type:_.cap.skin?.outline?.type}:void 0].filter(Ge=>Ge!=null)},onChoose:(Ge,ze,je)=>{G({...R,source:Ge,skin:ze,type:je,isSkinSelectorOpen:!1})},onBackPressed:()=>{G({...R,isSkinSelectorOpen:!1})}});const Oe=R.upgradeSkinProgress||R.upgradeFrameProgress;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[H&&w&&jsxRuntimeExports.jsx("div",{className:"skin-apply__confetti",children:jsxRuntimeExports.jsx(ConfettiExplosion,{...confettiProps,onComplete:()=>{Y(!1),T(!1)}})}),jsxRuntimeExports.jsxs("button",{className:"skin-apply__activity",onClick:()=>{R.source||G({...R,isSkinSelectorOpen:!0})},children:[jsxRuntimeExports.jsx("img",{src:diskDriveImage,className:"skin-apply__disk-drive-img",alt:"disk drive"}),jsxRuntimeExports.jsx("img",{src:insertImage,className:`skin-apply__insert-img fade-in ${R.source?"":"visible"}`,alt:"insert"}),jsxRuntimeExports.jsx("div",{className:"skin-apply__disk-wrapper",children:R.source&&jsxRuntimeExports.jsx("img",{className:`skin-apply__disk ${Oe?"animate":""}`,src:"/skins/skin-flat-"+(R.source??"standard")+".png",alt:"skin"})})]}),jsxRuntimeExports.jsxs("div",{className:"skin-apply__buttons",children:[_.cap.skin&&_.cap.skin.rerolls>0&&jsxRuntimeExports.jsxs("div",{className:"skin-apply__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:["Rerolls: ",_.cap.skin?.rerolls,", ",d("shop.yourBalance"),":"]})," ",A.tokensStr," ",jsxRuntimeExports.jsx("img",{src:StakedCoin,className:"pack__balance-icon",alt:"token icon"})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,color:oe?"red":"gray",className:"upgrade__button-btn",isLoading:R.upgradeSkinProgress,disabled:re||R.upgradeFrameProgress,onClick:()=>Fe("background"),children:[d(se?"profile.skins.replaceSkin":oe?"profile.skins.rerollSkin":"profile.skins.addSkin",{price:formatNumber(I)})," ",oe&&jsxRuntimeExports.jsx("img",{className:"upgrade__gem",src:StakedCoin,alt:"gem image"})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:R.upgradeFrameProgress,disabled:Be||R.upgradeSkinProgress,className:"upgrade__button-btn",color:"blue",onClick:()=>Fe("outline"),children:[d(be?"profile.skins.replaceFrame":ge?"profile.skins.rerollFrame":"profile.skins.addFrame",{price:formatNumber(z)})," ",ge&&jsxRuntimeExports.jsx("img",{className:"upgrade__gem",src:StakedCoin,alt:"gem image"})]})]})]})},CapEditConfirmation=({mode:_,onConfirm:d,onClose:v,isShow:A,cap:C})=>{const{t:w}=useTranslation(),{appState:T}=useAppState(),R=()=>AppConfig.shopMode==ShopMode.STARS?`${T.capsGd.skins.editNft.forStars} `:`${T.capsGd.skins.editNft.forTon/1e9} `;return jsxRuntimeExports.jsxs(Info,{isShow:A,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>d(),fullWidth:!0,children:w("ok")}),jsxRuntimeExports.jsx(Button,{onClick:()=>v(),fullWidth:!0,variant:"secondary",children:w("info.cancel")})]}),children:[jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:[C.collection," #",C.number]}),jsxRuntimeExports.jsx("div",{className:"staking-info__description",children:_=="edit"?w("nft.editNftTxt",{price:R()}):w("nft.nftRemintConfirmation",{price:R()})})]})},useStakingActions=()=>{const[_,d]=reactExports.useState(!1),{onUserUpdate:v}=useAppState(),{t:A}=useTranslation(),{setPopup:C}=reactExports.useContext(PopupContext),w=reactExports.useCallback(async(R,G)=>{try{await capsService.stake(R,G,firebaseService.token),await v()}catch{C({message:A("staking.error"),type:"error"})}},[v,C,A]),T=reactExports.useCallback(async(R,G)=>{d(!0);try{const I=await capsService.unstake(R.id,firebaseService.token);return await v(),G?.(),I}finally{d(!1)}},[v]);return{stake:w,unStake:T,isUnstakeLoading:_}},CapInfo=_=>{const d=useLocation(),[v,A]=reactExports.useState({cap:_.cap,afterBurn:!1,isReloadNeeded:!1,isConvertNftLoading:!1,isEditNftLoading:!1,isFinishEditNftLoading:!1,isSellLoading:!1,isBuyCapSureInfoShow:!1,isSellInfoShow:!1,show:"initial",editConfirmation:void 0}),{appState:C,onUserUpdate:w}=useAppState(),T=reactExports.useMemo(()=>getCapGdGrade(v.cap,C.capsGd),[C.capsGd,v.cap]),R=useNavigate(),{setPopup:G}=reactExports.useContext(PopupContext),[I]=useAtom(tutorialAtom),z=useAction(nextTutorialAction),H=reactExports.useCallback(()=>{d.state?.skinSelection&&R(d.pathname,{replace:!0,state:void 0})},[d,R]),Y=reactExports.useCallback(()=>{v.show==="initial"&&(H(),_.onBackPressed?.(v.isReloadNeeded))},[_,v.isReloadNeeded,v.show,H]);useBackClick(Y);const[ee]=useTonConnectUI(),{t:ie}=useTranslation();reactExports.useEffect(()=>{v.afterBurn&&setTimeout(()=>{A({...v,afterBurn:!1})},2e3)},[v]);const{unStake:oe,isUnstakeLoading:se}=useStakingActions(),re=reactExports.useMemo(()=>v.cap.owner===C.user?.id.toString(),[C.user?.id,v.cap.owner]),fe=reactExports.useMemo(()=>d.state?.skinSelection,[d.state]);if(reactExports.useEffect(()=>{fe&&re&&!v.cap.isNft&&A(Oe=>({...Oe,show:"skinApply"}))},[fe,re,v.cap.isNft]),v.show==="upgrade"&&T?.upgrade)return jsxRuntimeExports.jsx(Upgrade$1,{cap:v.cap,price:T.upgrade.price,onUpgrade:async Oe=>{const Ge=await _.onCapUpgrade(Oe);z(),A({...v,cap:Ge,show:"initial",afterBurn:!0,isReloadNeeded:!0})},upgradeResources:T.upgrade.resources,onBackPressed:()=>{A({...v,show:"initial"})},capsGd:C.capsGd});const ue=()=>{if(!C.capsGd)return;if(!C.capsGd.status.isWithdrawAvailable){CapsWebApp.showPopup({message:ie("withdraw.withdrawIsDisabled"),buttons:[{id:"confirm",type:"ok"}]});return}const Oe=ee.account;if(!Oe){ee.openModal();return}CapsWebApp.showPopup({message:ie("withdraw.confirmWithdraw",{wallet:truncate(toUserFriendlyAddress(Oe.address),9)}),buttons:[{id:"cancel",type:"cancel"},{id:"confirm",type:"ok"}]}).then(Ge=>{Ge=="confirm"&&ee.account&&capsService.withdrawNft(v.cap.id,ee.account.address,firebaseService.token).then(()=>{CapsWebApp.showPopup({message:ie("withdraw.withdrawIsSuccessful"),buttons:[{id:"confirm",type:"ok"}]}).then(ze=>{w(),ze=="confirm"&&R("/home")})}).catch(ze=>{console.error(ze),CapsWebApp.showPopup({message:ie("withdraw.withdrawError"),buttons:[{id:"confirm",type:"ok"}]})})})},ge=Oe=>{if(C.capsGd){if(!C.capsGd.status.isMintAvailable){CapsWebApp.showPopup({message:ie("shop.mintIsDisabled"),buttons:[{id:"confirm",type:"ok"}]});return}CapsWebApp.showPopup({message:ie("nft.convertToNftTxt"),buttons:[{id:"cancel",type:"cancel"},{id:"confirm",type:"ok"}]}).then(async Ge=>{Ge=="confirm"&&(CapsWebApp.playSound("nft/confirm.mp3"),A({...v,isConvertNftLoading:!0}),AppConfig.shopMode==ShopMode.STARS?await ye(Oe):await be(Oe))})}},ye=async Oe=>{const Ge=Oe=="mint"?await capsService.convertToNft(v.cap.id,firebaseService.token):await capsService.editNft(v.cap.id,firebaseService.token);await CapsWebApp.openInvoice(Ge)=="paid"?CapsWebApp.showPopup({message:ie(Oe=="mint"?"nft.convertedToNft":"nft.editedToNft"),buttons:[{id:"ok",type:"ok"}]}).then(async()=>{const je=await _.onCapUpgrade(v.cap.id);CapsWebApp.playSound("nft/process.mp3"),Oe=="mint"?A({...v,cap:je,isConvertNftLoading:!1,editConfirmation:void 0}):Oe=="edit"&&A({...v,cap:je,isEditNftLoading:!1,editConfirmation:void 0})}):(G({message:ie(Oe=="mint"?"nft.convertToNftFailed":"nft.editNftFailed"),type:"error"}),Oe=="mint"?A({...v,isConvertNftLoading:!1,editConfirmation:void 0}):Oe=="edit"&&A({...v,isEditNftLoading:!1,editConfirmation:void 0}))},be=async Oe=>{if(!ee.account){await ee.openModal();return}const Ge=async(je,He)=>{const Xe={validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:"EQAaQqgAg72NwiPQ1mITLrg91lYOJ7PGbJzPwLECO_IECULy",amount:je,payload:He}]};try{await ee.sendTransaction(Xe),CapsWebApp.showPopup({message:ie(Oe=="mint"?"nft.tonConvertedToNft":"nft.tonEditedToNft"),buttons:[{id:"ok",type:"ok"}]});const $e=await _.onCapUpgrade(v.cap.id);CapsWebApp.playSound("nft/process.mp3"),A({...v,cap:$e,isConvertNftLoading:!0,editConfirmation:void 0})}catch{G({message:ie(Oe=="mint"?"nft.convertToNftFailed":"nft.editNftFailed"),type:"error"}),A({...v,isConvertNftLoading:!1,editConfirmation:void 0})}},ze=async()=>Oe=="mint"?await capsService.convertToNftPayload(v.cap.id,firebaseService.token):await capsService.editNftPayload(v.cap.id,firebaseService.token);if(C.capsGd){const je=Oe=="edit"?getEditPriceInTon(C.capsGd):getMintPriceInTon(C.capsGd);Ge(je.toString(),await ze())}},ve=async()=>{if(v.editConfirmation=="edit")A({...v,isEditNftLoading:!0,editConfirmation:void 0}),AppConfig.shopMode==ShopMode.STARS?await ye("edit"):await be("edit");else{A({...v,isFinishEditNftLoading:!0,editConfirmation:void 0});try{await capsService.finishEditing(v.cap.id,firebaseService.token);const Oe=await _.onCapUpgrade(v.cap.id);A({...v,cap:Oe,isFinishEditNftLoading:!1,editConfirmation:void 0})}catch{G({message:ie("nft.editNftFailed"),type:"error"}),A({...v,isFinishEditNftLoading:!1,editConfirmation:void 0})}}},Me=async Oe=>{A({...v,cap:Oe,isReloadNeeded:!0,isSellInfoShow:!1})},we=async()=>{A({...v,isSellLoading:!0});try{const Oe=await capsService.cancelSale(_.cap,firebaseService.token);A({...v,cap:Oe,isReloadNeeded:!0,isSellLoading:!1})}catch{A({...v,isSellLoading:!1}),G({message:ie("shop.problemsCancelSell"),type:"error"})}},Be=async Oe=>{A({...v,cap:Oe,isReloadNeeded:!0,isBuyCapSureInfoShow:!1}),CapsWebApp.showPopup({message:ie("shop.capIsSold"),buttons:[{id:"ok",type:"ok"}]})},De=v.cap.grade.toLowerCase(),Fe=()=>{const Oe=`https://t.me/share/url?url=https%3A%2F%2Ft.me%2FCapsGameBot%2Fplay?startapp=c_${v.cap.id}`;CapsWebApp.openTelegramLink(Oe)};return jsxRuntimeExports.jsxs("div",{className:`cap__info-wrapper ${I==="upgraded"?"tutorial__dimmer tutorial__dimmer--absolute":""}`,children:[I==="upgraded"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger upgrade__upgraded-finger",alt:"finger"}),jsxRuntimeExports.jsxs("div",{className:`cap__info ${re?"":"cap__info--not-owner"}`,children:[jsxRuntimeExports.jsx(CapElement,{variant:"large",pendingable:!0,cap:v.cap}),v.cap.owner!==""&&v.show==="initial"&&jsxRuntimeExports.jsxs("div",{className:"cap__info-nft",children:[jsxRuntimeExports.jsx("img",{src:nftImage,alt:"nft"}),jsxRuntimeExports.jsx("div",{className:"cap__info-nft-address",onClick:()=>{v.cap.nft&&CapsWebApp.openLink("https://tonscan.org/address/"+v.cap.nft.address)},children:v.cap.nft?getShortAddress$1(v.cap.nft.address):"0x00000000"}),v.cap.nft&&re&&jsxRuntimeExports.jsx(Button,{color:"blue",size:"small",onClick:ue,children:ie("withdraw.withdrawBtn")}),!v.cap.nft&&re&&jsxRuntimeExports.jsx(Button,{color:"blue",size:"small",disabled:v.cap.status!="READY",isLoading:v.isConvertNftLoading,onClick:()=>ge("mint"),children:v.cap.status=="MINTING"?ie("nft.convertInProgressBtn"):ie("nft.convertToNftBth")})]}),v.show==="initial"&&jsxRuntimeExports.jsxs("div",{className:"cap__info-text-wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"cap__info-text-first",children:[jsxRuntimeExports.jsxs("div",{className:"cap__info-title",children:[v.cap.collection," ",v.cap.number>0?`#${v.cap.number}`:""]}),v.cap.status=="READY"&&re&&v.cap.number>0&&jsxRuntimeExports.jsxs("button",{className:"cap__info-sell",onClick:()=>{ee.connected?A({...v,isSellInfoShow:!0}):ee.openModal()},children:[jsxRuntimeExports.jsx("img",{src:sellImage,alt:"sell"}),ie("profile.sell")]})]}),v.cap.number>0&&jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.number"),":"]})," ",v.cap.number]}),v.cap.grade&&jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.grade"),":"]})," ",getGradeTitle(v.cap.grade)]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.skinBkg"),":"]})," ",jsxRuntimeExports.jsx("span",{children:v.cap.skin?.background?skinToText(v.cap.skin?.background,C.capsGd):"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.skinOutline"),":"]})," ",jsxRuntimeExports.jsx("span",{children:v.cap.skin?.outline?skinToText(v.cap.skin?.outline,C.capsGd):"N/A"})]}),jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.skins.rerolls"),":"]})," ",jsxRuntimeExports.jsx("span",{children:v.cap.skin?.rerolls??0})]})]}),T&&jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.power"),":"]})," ",T.from,"-",T.to]}),jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.health"),":"]})," ",getCapPveHp(_.cap,C.pveGd)]}),v.cap.status=="SALE"&&jsxRuntimeExports.jsx("div",{className:"cap__info-text",children:jsxRuntimeExports.jsx("button",{className:"cap__info-text--title",onClick:Fe,children:"Share cap"})}),(v.cap.status=="PENDING"||v.cap.status=="MINTING")&&jsxRuntimeExports.jsxs("div",{className:"cap__info-text",children:[jsxRuntimeExports.jsxs("span",{className:"cap__info-text--title",children:[ie("profile.status"),":"]})," ",ie("profile.processing")]})]})]}),v.show==="skinApply"&&jsxRuntimeExports.jsx(SkinApply,{cap:v.cap,onApply:async Oe=>{await w();const Ge=await _.onCapUpgrade(Oe);A({...v,cap:Ge,isReloadNeeded:!0}),H()},onBackPressed:()=>{A({...v,show:"initial"}),H()},initialSkinSelection:fe}),v.afterBurn&&jsxRuntimeExports.jsxs("div",{className:"cap__info-upgraded",onClick:()=>A({...v,afterBurn:!1}),children:[jsxRuntimeExports.jsx("img",{src:fireImage,alt:"fire"}),ie("upgrade.upgraded")]}),v.show==="initial"&&(v.cap.status=="SALE"||["READY","NFT_EDITING","STAKED"].includes(v.cap.status)&&re)&&jsxRuntimeExports.jsxs("div",{className:"cap__info-buttons",children:[v.cap.status=="READY"&&C.capsGd&&T&&T.upgrade&&!v.afterBurn&&UPGRADE_GRADE[De]&&jsxRuntimeExports.jsxs(Button,{fullWidth:!0,className:"cap__info-button",color:UPGRADE_GRADE[De],onClick:()=>{tutorialService.completeTutorialStep("profile_cap_upgrade_selected",firebaseService.token,C.user),A({...v,show:"upgrade"})},children:[ie("profile.upgradeTo"),I==="profile"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger cap__finger",alt:"finger"})]}),v.cap.status=="NFT_EDITING"&&C.capsGd&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,color:"blue",isLoading:v.isFinishEditNftLoading,onClick:()=>A({...v,editConfirmation:"remint"}),children:ie("profile.finishEditing")}),(v.cap.status=="READY"||v.cap.status=="NFT_EDITING")&&v.cap.number>0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,color:"gray",isLoading:v.isEditNftLoading,onClick:()=>{!v.cap.isNft||v.cap.status=="NFT_EDITING"?A({...v,show:"skinApply"}):A({...v,editConfirmation:"edit"})},children:ie("profile.applySkin")}),v.cap.status=="SALE"&&jsxRuntimeExports.jsx(Button,{isLoading:v.isSellLoading,fullWidth:!0,color:"yellow",onClick:()=>{re?we():A({...v,isBuyCapSureInfoShow:!0})},children:ie(re?"profile.sellCancel":"shop.buyCap",{price:(v.cap.price??0)/1e9})}),v.cap.status=="STAKED"&&jsxRuntimeExports.jsx(Button,{isLoading:se,fullWidth:!0,color:"yellow",onClick:async()=>{const Oe=await oe(v.cap);A({...v,cap:Oe,isReloadNeeded:!0})},children:ie("profile.unstake")})]}),jsxRuntimeExports.jsx(BuyCapSureInfo,{onComplete:Be,isShow:v.isBuyCapSureInfoShow,cap:v.cap,onClose:()=>A({...v,isBuyCapSureInfoShow:!1})}),jsxRuntimeExports.jsx(SellInfo,{onComplete:Me,isShow:v.isSellInfoShow,cap:v.cap,onClose:()=>A({...v,isSellInfoShow:!1})}),jsxRuntimeExports.jsx(CapEditConfirmation,{mode:v.editConfirmation,onConfirm:ve,onClose:()=>{A({...v,editConfirmation:void 0})},isShow:v.editConfirmation!=null,cap:v.cap})]})};function getMintPriceInTon(_){return _.mintNft.forTon}function getEditPriceInTon(_){return _.skins.editNft.forTon}const CollectionCapsList=_=>{const[d,v]=reactExports.useState({caps:[]}),{appState:A,onUserUpdate:C}=useAppState(),w=reactExports.useRef(null),{loadingState:T,setLoadingState:R,isSkeletonShow:G}=useSkeletonLoading({skeletonRef:w});reactExports.useEffect(()=>{I()},[]);const I=async(ie,oe=!0)=>{oe&&R("loading");const se=await firebaseService.getMyCollectionCaps({collectionId:_.params.collection.id,number:_.params.number}),re=_.filter?se.filter(_.filter):se;v({...d,caps:re,selected:ie}),oe&&R("skeleton-to-data")},z=reactExports.useCallback(()=>{d.selected||_.onBackPressed?.()},[_,d.selected]);useBackClick(z);const H=async ie=>{const oe=await firebaseService.getCap(ie);return await I(oe,!1),await C(),await _.onCapsListUpdate?.(),oe};if(d.selected)return jsxRuntimeExports.jsx(CapInfo,{cap:d.selected,capsGd:A.capsGd,onCapUpgrade:H,onBackPressed:()=>{v({...d,selected:void 0})}});const Y=getFactionFromCollection(_.params.collection.title,A.pveGd),ee=Math.ceil((_.params.collection.burned??0)/_.params.collection.supply*100);return jsxRuntimeExports.jsxs("div",{className:`collection-caps-list ${_.className??""}`,children:[jsxRuntimeExports.jsxs("div",{className:"collection-caps-list__info",children:[jsxRuntimeExports.jsxs("div",{className:"collection-info__title",children:[Y&&jsxRuntimeExports.jsx("img",{className:"collection-info__faction",src:`/icons/${Y.icon}`,alt:"faction"}),jsxRuntimeExports.jsx("span",{className:"collection-info__name",children:_.params.collection.title})]}),jsxRuntimeExports.jsx("span",{className:"collection-info__left",children:`${(_.params.collection.used/1e3).toFixed(1)}k/${_.params.collection.supply/1e3}k  ${ee}%`})]}),jsxRuntimeExports.jsxs("div",{className:`collection-caps-list__caps ${_.className??""}`,children:[G&&jsxRuntimeExports.jsx("div",{ref:w,className:`collection-caps-list__caps collection-caps-list__caps-skeleton skeleton fade-out fade--long ${T==="skeleton-to-data"?"visible":""}`,children:[...Array(6)].map((ie,oe)=>jsxRuntimeExports.jsx(CapElementSkeleton,{size:"medium"},oe))}),d.caps.map(ie=>{const oe=_.selectedCaps?.findIndex(se=>se.id===ie.id)??-1;return jsxRuntimeExports.jsx(CapElement,{cap:ie,variant:_.isPve?"pve-medium":"medium",isStakingSpeedShow:_.isStakingSpeedShow,selectedNumber:oe>-1?oe+1:void 0,onClickCallback:()=>{_.mode==="select-number"&&_.onCapClick?.(ie),_.mode==="upgrade"&&v({...d,selected:ie})}},ie.id)})]})]})};var lib$5={},Parser={},Tokenizer={},decode={},decodeDataHtml={},hasRequiredDecodeDataHtml;function requireDecodeDataHtml(){return hasRequiredDecodeDataHtml||(hasRequiredDecodeDataHtml=1,Object.defineProperty(decodeDataHtml,"__esModule",{value:!0}),decodeDataHtml.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0p mp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(_){return _.charCodeAt(0)}))),decodeDataHtml}var decodeDataXml={},hasRequiredDecodeDataXml;function requireDecodeDataXml(){return hasRequiredDecodeDataXml||(hasRequiredDecodeDataXml=1,Object.defineProperty(decodeDataXml,"__esModule",{value:!0}),decodeDataXml.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(_){return _.charCodeAt(0)}))),decodeDataXml}var decode_codepoint={},hasRequiredDecode_codepoint;function requireDecode_codepoint(){return hasRequiredDecode_codepoint||(hasRequiredDecode_codepoint=1,function(_){var d;Object.defineProperty(_,"__esModule",{value:!0}),_.replaceCodePoint=_.fromCodePoint=void 0;var v=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);_.fromCodePoint=(d=String.fromCodePoint)!==null&&d!==void 0?d:function(w){var T="";return w>65535&&(w-=65536,T+=String.fromCharCode(w>>>10&1023|55296),w=56320|w&1023),T+=String.fromCharCode(w),T};function A(w){var T;return w>=55296&&w<=57343||w>1114111?65533:(T=v.get(w))!==null&&T!==void 0?T:w}_.replaceCodePoint=A;function C(w){return(0,_.fromCodePoint)(A(w))}_.default=C}(decode_codepoint)),decode_codepoint}var hasRequiredDecode;function requireDecode(){return hasRequiredDecode||(hasRequiredDecode=1,function(_){var d=decode&&decode.__createBinding||(Object.create?function(De,Fe,Oe,Ge){Ge===void 0&&(Ge=Oe);var ze=Object.getOwnPropertyDescriptor(Fe,Oe);(!ze||("get"in ze?!Fe.__esModule:ze.writable||ze.configurable))&&(ze={enumerable:!0,get:function(){return Fe[Oe]}}),Object.defineProperty(De,Ge,ze)}:function(De,Fe,Oe,Ge){Ge===void 0&&(Ge=Oe),De[Ge]=Fe[Oe]}),v=decode&&decode.__setModuleDefault||(Object.create?function(De,Fe){Object.defineProperty(De,"default",{enumerable:!0,value:Fe})}:function(De,Fe){De.default=Fe}),A=decode&&decode.__importStar||function(De){if(De&&De.__esModule)return De;var Fe={};if(De!=null)for(var Oe in De)Oe!=="default"&&Object.prototype.hasOwnProperty.call(De,Oe)&&d(Fe,De,Oe);return v(Fe,De),Fe},C=decode&&decode.__importDefault||function(De){return De&&De.__esModule?De:{default:De}};Object.defineProperty(_,"__esModule",{value:!0}),_.decodeXML=_.decodeHTMLStrict=_.decodeHTMLAttribute=_.decodeHTML=_.determineBranch=_.EntityDecoder=_.DecodingMode=_.BinTrieFlags=_.fromCodePoint=_.replaceCodePoint=_.decodeCodePoint=_.xmlDecodeTree=_.htmlDecodeTree=void 0;var w=C(requireDecodeDataHtml());_.htmlDecodeTree=w.default;var T=C(requireDecodeDataXml());_.xmlDecodeTree=T.default;var R=A(requireDecode_codepoint());_.decodeCodePoint=R.default;var G=requireDecode_codepoint();Object.defineProperty(_,"replaceCodePoint",{enumerable:!0,get:function(){return G.replaceCodePoint}}),Object.defineProperty(_,"fromCodePoint",{enumerable:!0,get:function(){return G.fromCodePoint}});var I;(function(De){De[De.NUM=35]="NUM",De[De.SEMI=59]="SEMI",De[De.EQUALS=61]="EQUALS",De[De.ZERO=48]="ZERO",De[De.NINE=57]="NINE",De[De.LOWER_A=97]="LOWER_A",De[De.LOWER_F=102]="LOWER_F",De[De.LOWER_X=120]="LOWER_X",De[De.LOWER_Z=122]="LOWER_Z",De[De.UPPER_A=65]="UPPER_A",De[De.UPPER_F=70]="UPPER_F",De[De.UPPER_Z=90]="UPPER_Z"})(I||(I={}));var z=32,H;(function(De){De[De.VALUE_LENGTH=49152]="VALUE_LENGTH",De[De.BRANCH_LENGTH=16256]="BRANCH_LENGTH",De[De.JUMP_TABLE=127]="JUMP_TABLE"})(H=_.BinTrieFlags||(_.BinTrieFlags={}));function Y(De){return De>=I.ZERO&&De<=I.NINE}function ee(De){return De>=I.UPPER_A&&De<=I.UPPER_F||De>=I.LOWER_A&&De<=I.LOWER_F}function ie(De){return De>=I.UPPER_A&&De<=I.UPPER_Z||De>=I.LOWER_A&&De<=I.LOWER_Z||Y(De)}function oe(De){return De===I.EQUALS||ie(De)}var se;(function(De){De[De.EntityStart=0]="EntityStart",De[De.NumericStart=1]="NumericStart",De[De.NumericDecimal=2]="NumericDecimal",De[De.NumericHex=3]="NumericHex",De[De.NamedEntity=4]="NamedEntity"})(se||(se={}));var re;(function(De){De[De.Legacy=0]="Legacy",De[De.Strict=1]="Strict",De[De.Attribute=2]="Attribute"})(re=_.DecodingMode||(_.DecodingMode={}));var fe=function(){function De(Fe,Oe,Ge){this.decodeTree=Fe,this.emitCodePoint=Oe,this.errors=Ge,this.state=se.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=re.Strict}return De.prototype.startEntity=function(Fe){this.decodeMode=Fe,this.state=se.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},De.prototype.write=function(Fe,Oe){switch(this.state){case se.EntityStart:return Fe.charCodeAt(Oe)===I.NUM?(this.state=se.NumericStart,this.consumed+=1,this.stateNumericStart(Fe,Oe+1)):(this.state=se.NamedEntity,this.stateNamedEntity(Fe,Oe));case se.NumericStart:return this.stateNumericStart(Fe,Oe);case se.NumericDecimal:return this.stateNumericDecimal(Fe,Oe);case se.NumericHex:return this.stateNumericHex(Fe,Oe);case se.NamedEntity:return this.stateNamedEntity(Fe,Oe)}},De.prototype.stateNumericStart=function(Fe,Oe){return Oe>=Fe.length?-1:(Fe.charCodeAt(Oe)|z)===I.LOWER_X?(this.state=se.NumericHex,this.consumed+=1,this.stateNumericHex(Fe,Oe+1)):(this.state=se.NumericDecimal,this.stateNumericDecimal(Fe,Oe))},De.prototype.addToNumericResult=function(Fe,Oe,Ge,ze){if(Oe!==Ge){var je=Ge-Oe;this.result=this.result*Math.pow(ze,je)+parseInt(Fe.substr(Oe,je),ze),this.consumed+=je}},De.prototype.stateNumericHex=function(Fe,Oe){for(var Ge=Oe;Oe<Fe.length;){var ze=Fe.charCodeAt(Oe);if(Y(ze)||ee(ze))Oe+=1;else return this.addToNumericResult(Fe,Ge,Oe,16),this.emitNumericEntity(ze,3)}return this.addToNumericResult(Fe,Ge,Oe,16),-1},De.prototype.stateNumericDecimal=function(Fe,Oe){for(var Ge=Oe;Oe<Fe.length;){var ze=Fe.charCodeAt(Oe);if(Y(ze))Oe+=1;else return this.addToNumericResult(Fe,Ge,Oe,10),this.emitNumericEntity(ze,2)}return this.addToNumericResult(Fe,Ge,Oe,10),-1},De.prototype.emitNumericEntity=function(Fe,Oe){var Ge;if(this.consumed<=Oe)return(Ge=this.errors)===null||Ge===void 0||Ge.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(Fe===I.SEMI)this.consumed+=1;else if(this.decodeMode===re.Strict)return 0;return this.emitCodePoint((0,R.replaceCodePoint)(this.result),this.consumed),this.errors&&(Fe!==I.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},De.prototype.stateNamedEntity=function(Fe,Oe){for(var Ge=this.decodeTree,ze=Ge[this.treeIndex],je=(ze&H.VALUE_LENGTH)>>14;Oe<Fe.length;Oe++,this.excess++){var He=Fe.charCodeAt(Oe);if(this.treeIndex=ge(Ge,ze,this.treeIndex+Math.max(1,je),He),this.treeIndex<0)return this.result===0||this.decodeMode===re.Attribute&&(je===0||oe(He))?0:this.emitNotTerminatedNamedEntity();if(ze=Ge[this.treeIndex],je=(ze&H.VALUE_LENGTH)>>14,je!==0){if(He===I.SEMI)return this.emitNamedEntityData(this.treeIndex,je,this.consumed+this.excess);this.decodeMode!==re.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},De.prototype.emitNotTerminatedNamedEntity=function(){var Fe,Oe=this,Ge=Oe.result,ze=Oe.decodeTree,je=(ze[Ge]&H.VALUE_LENGTH)>>14;return this.emitNamedEntityData(Ge,je,this.consumed),(Fe=this.errors)===null||Fe===void 0||Fe.missingSemicolonAfterCharacterReference(),this.consumed},De.prototype.emitNamedEntityData=function(Fe,Oe,Ge){var ze=this.decodeTree;return this.emitCodePoint(Oe===1?ze[Fe]&~H.VALUE_LENGTH:ze[Fe+1],Ge),Oe===3&&this.emitCodePoint(ze[Fe+2],Ge),Ge},De.prototype.end=function(){var Fe;switch(this.state){case se.NamedEntity:return this.result!==0&&(this.decodeMode!==re.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case se.NumericDecimal:return this.emitNumericEntity(0,2);case se.NumericHex:return this.emitNumericEntity(0,3);case se.NumericStart:return(Fe=this.errors)===null||Fe===void 0||Fe.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case se.EntityStart:return 0}},De}();_.EntityDecoder=fe;function ue(De){var Fe="",Oe=new fe(De,function(Ge){return Fe+=(0,R.fromCodePoint)(Ge)});return function(ze,je){for(var He=0,Xe=0;(Xe=ze.indexOf("&",Xe))>=0;){Fe+=ze.slice(He,Xe),Oe.startEntity(je);var $e=Oe.write(ze,Xe+1);if($e<0){He=Xe+Oe.end();break}He=Xe+$e,Xe=$e===0?He+1:He}var We=Fe+ze.slice(He);return Fe="",We}}function ge(De,Fe,Oe,Ge){var ze=(Fe&H.BRANCH_LENGTH)>>7,je=Fe&H.JUMP_TABLE;if(ze===0)return je!==0&&Ge===je?Oe:-1;if(je){var He=Ge-je;return He<0||He>=ze?-1:De[Oe+He]-1}for(var Xe=Oe,$e=Xe+ze-1;Xe<=$e;){var We=Xe+$e>>>1,nt=De[We];if(nt<Ge)Xe=We+1;else if(nt>Ge)$e=We-1;else return De[We+ze]}return-1}_.determineBranch=ge;var ye=ue(w.default),be=ue(T.default);function ve(De,Fe){return Fe===void 0&&(Fe=re.Legacy),ye(De,Fe)}_.decodeHTML=ve;function Me(De){return ye(De,re.Attribute)}_.decodeHTMLAttribute=Me;function we(De){return ye(De,re.Strict)}_.decodeHTMLStrict=we;function Be(De){return be(De,re.Strict)}_.decodeXML=Be}(decode)),decode}var hasRequiredTokenizer;function requireTokenizer(){return hasRequiredTokenizer||(hasRequiredTokenizer=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.QuoteType=void 0;var d=requireDecode(),v;(function(Y){Y[Y.Tab=9]="Tab",Y[Y.NewLine=10]="NewLine",Y[Y.FormFeed=12]="FormFeed",Y[Y.CarriageReturn=13]="CarriageReturn",Y[Y.Space=32]="Space",Y[Y.ExclamationMark=33]="ExclamationMark",Y[Y.Number=35]="Number",Y[Y.Amp=38]="Amp",Y[Y.SingleQuote=39]="SingleQuote",Y[Y.DoubleQuote=34]="DoubleQuote",Y[Y.Dash=45]="Dash",Y[Y.Slash=47]="Slash",Y[Y.Zero=48]="Zero",Y[Y.Nine=57]="Nine",Y[Y.Semi=59]="Semi",Y[Y.Lt=60]="Lt",Y[Y.Eq=61]="Eq",Y[Y.Gt=62]="Gt",Y[Y.Questionmark=63]="Questionmark",Y[Y.UpperA=65]="UpperA",Y[Y.LowerA=97]="LowerA",Y[Y.UpperF=70]="UpperF",Y[Y.LowerF=102]="LowerF",Y[Y.UpperZ=90]="UpperZ",Y[Y.LowerZ=122]="LowerZ",Y[Y.LowerX=120]="LowerX",Y[Y.OpeningSquareBracket=91]="OpeningSquareBracket"})(v||(v={}));var A;(function(Y){Y[Y.Text=1]="Text",Y[Y.BeforeTagName=2]="BeforeTagName",Y[Y.InTagName=3]="InTagName",Y[Y.InSelfClosingTag=4]="InSelfClosingTag",Y[Y.BeforeClosingTagName=5]="BeforeClosingTagName",Y[Y.InClosingTagName=6]="InClosingTagName",Y[Y.AfterClosingTagName=7]="AfterClosingTagName",Y[Y.BeforeAttributeName=8]="BeforeAttributeName",Y[Y.InAttributeName=9]="InAttributeName",Y[Y.AfterAttributeName=10]="AfterAttributeName",Y[Y.BeforeAttributeValue=11]="BeforeAttributeValue",Y[Y.InAttributeValueDq=12]="InAttributeValueDq",Y[Y.InAttributeValueSq=13]="InAttributeValueSq",Y[Y.InAttributeValueNq=14]="InAttributeValueNq",Y[Y.BeforeDeclaration=15]="BeforeDeclaration",Y[Y.InDeclaration=16]="InDeclaration",Y[Y.InProcessingInstruction=17]="InProcessingInstruction",Y[Y.BeforeComment=18]="BeforeComment",Y[Y.CDATASequence=19]="CDATASequence",Y[Y.InSpecialComment=20]="InSpecialComment",Y[Y.InCommentLike=21]="InCommentLike",Y[Y.BeforeSpecialS=22]="BeforeSpecialS",Y[Y.SpecialStartSequence=23]="SpecialStartSequence",Y[Y.InSpecialTag=24]="InSpecialTag",Y[Y.BeforeEntity=25]="BeforeEntity",Y[Y.BeforeNumericEntity=26]="BeforeNumericEntity",Y[Y.InNamedEntity=27]="InNamedEntity",Y[Y.InNumericEntity=28]="InNumericEntity",Y[Y.InHexEntity=29]="InHexEntity"})(A||(A={}));function C(Y){return Y===v.Space||Y===v.NewLine||Y===v.Tab||Y===v.FormFeed||Y===v.CarriageReturn}function w(Y){return Y===v.Slash||Y===v.Gt||C(Y)}function T(Y){return Y>=v.Zero&&Y<=v.Nine}function R(Y){return Y>=v.LowerA&&Y<=v.LowerZ||Y>=v.UpperA&&Y<=v.UpperZ}function G(Y){return Y>=v.UpperA&&Y<=v.UpperF||Y>=v.LowerA&&Y<=v.LowerF}var I;(function(Y){Y[Y.NoValue=0]="NoValue",Y[Y.Unquoted=1]="Unquoted",Y[Y.Single=2]="Single",Y[Y.Double=3]="Double"})(I=_.QuoteType||(_.QuoteType={}));var z={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},H=function(){function Y(ee,ie){var oe=ee.xmlMode,se=oe===void 0?!1:oe,re=ee.decodeEntities,fe=re===void 0?!0:re;this.cbs=ie,this.state=A.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=A.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=se,this.decodeEntities=fe,this.entityTrie=se?d.xmlDecodeTree:d.htmlDecodeTree}return Y.prototype.reset=function(){this.state=A.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=A.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},Y.prototype.write=function(ee){this.offset+=this.buffer.length,this.buffer=ee,this.parse()},Y.prototype.end=function(){this.running&&this.finish()},Y.prototype.pause=function(){this.running=!1},Y.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},Y.prototype.getIndex=function(){return this.index},Y.prototype.getSectionStart=function(){return this.sectionStart},Y.prototype.stateText=function(ee){ee===v.Lt||!this.decodeEntities&&this.fastForwardTo(v.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=A.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&ee===v.Amp&&(this.state=A.BeforeEntity)},Y.prototype.stateSpecialStartSequence=function(ee){var ie=this.sequenceIndex===this.currentSequence.length,oe=ie?w(ee):(ee|32)===this.currentSequence[this.sequenceIndex];if(!oe)this.isSpecial=!1;else if(!ie){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=A.InTagName,this.stateInTagName(ee)},Y.prototype.stateInSpecialTag=function(ee){if(this.sequenceIndex===this.currentSequence.length){if(ee===v.Gt||C(ee)){var ie=this.index-this.currentSequence.length;if(this.sectionStart<ie){var oe=this.index;this.index=ie,this.cbs.ontext(this.sectionStart,ie),this.index=oe}this.isSpecial=!1,this.sectionStart=ie+2,this.stateInClosingTagName(ee);return}this.sequenceIndex=0}(ee|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===z.TitleEnd?this.decodeEntities&&ee===v.Amp&&(this.state=A.BeforeEntity):this.fastForwardTo(v.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(ee===v.Lt)},Y.prototype.stateCDATASequence=function(ee){ee===z.Cdata[this.sequenceIndex]?++this.sequenceIndex===z.Cdata.length&&(this.state=A.InCommentLike,this.currentSequence=z.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=A.InDeclaration,this.stateInDeclaration(ee))},Y.prototype.fastForwardTo=function(ee){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===ee)return!0;return this.index=this.buffer.length+this.offset-1,!1},Y.prototype.stateInCommentLike=function(ee){ee===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===z.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=A.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):ee!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},Y.prototype.isTagStartChar=function(ee){return this.xmlMode?!w(ee):R(ee)},Y.prototype.startSpecial=function(ee,ie){this.isSpecial=!0,this.currentSequence=ee,this.sequenceIndex=ie,this.state=A.SpecialStartSequence},Y.prototype.stateBeforeTagName=function(ee){if(ee===v.ExclamationMark)this.state=A.BeforeDeclaration,this.sectionStart=this.index+1;else if(ee===v.Questionmark)this.state=A.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(ee)){var ie=ee|32;this.sectionStart=this.index,!this.xmlMode&&ie===z.TitleEnd[2]?this.startSpecial(z.TitleEnd,3):this.state=!this.xmlMode&&ie===z.ScriptEnd[2]?A.BeforeSpecialS:A.InTagName}else ee===v.Slash?this.state=A.BeforeClosingTagName:(this.state=A.Text,this.stateText(ee))},Y.prototype.stateInTagName=function(ee){w(ee)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=A.BeforeAttributeName,this.stateBeforeAttributeName(ee))},Y.prototype.stateBeforeClosingTagName=function(ee){C(ee)||(ee===v.Gt?this.state=A.Text:(this.state=this.isTagStartChar(ee)?A.InClosingTagName:A.InSpecialComment,this.sectionStart=this.index))},Y.prototype.stateInClosingTagName=function(ee){(ee===v.Gt||C(ee))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=A.AfterClosingTagName,this.stateAfterClosingTagName(ee))},Y.prototype.stateAfterClosingTagName=function(ee){(ee===v.Gt||this.fastForwardTo(v.Gt))&&(this.state=A.Text,this.baseState=A.Text,this.sectionStart=this.index+1)},Y.prototype.stateBeforeAttributeName=function(ee){ee===v.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=A.InSpecialTag,this.sequenceIndex=0):this.state=A.Text,this.baseState=this.state,this.sectionStart=this.index+1):ee===v.Slash?this.state=A.InSelfClosingTag:C(ee)||(this.state=A.InAttributeName,this.sectionStart=this.index)},Y.prototype.stateInSelfClosingTag=function(ee){ee===v.Gt?(this.cbs.onselfclosingtag(this.index),this.state=A.Text,this.baseState=A.Text,this.sectionStart=this.index+1,this.isSpecial=!1):C(ee)||(this.state=A.BeforeAttributeName,this.stateBeforeAttributeName(ee))},Y.prototype.stateInAttributeName=function(ee){(ee===v.Eq||w(ee))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=A.AfterAttributeName,this.stateAfterAttributeName(ee))},Y.prototype.stateAfterAttributeName=function(ee){ee===v.Eq?this.state=A.BeforeAttributeValue:ee===v.Slash||ee===v.Gt?(this.cbs.onattribend(I.NoValue,this.index),this.state=A.BeforeAttributeName,this.stateBeforeAttributeName(ee)):C(ee)||(this.cbs.onattribend(I.NoValue,this.index),this.state=A.InAttributeName,this.sectionStart=this.index)},Y.prototype.stateBeforeAttributeValue=function(ee){ee===v.DoubleQuote?(this.state=A.InAttributeValueDq,this.sectionStart=this.index+1):ee===v.SingleQuote?(this.state=A.InAttributeValueSq,this.sectionStart=this.index+1):C(ee)||(this.sectionStart=this.index,this.state=A.InAttributeValueNq,this.stateInAttributeValueNoQuotes(ee))},Y.prototype.handleInAttributeValue=function(ee,ie){ee===ie||!this.decodeEntities&&this.fastForwardTo(ie)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(ie===v.DoubleQuote?I.Double:I.Single,this.index),this.state=A.BeforeAttributeName):this.decodeEntities&&ee===v.Amp&&(this.baseState=this.state,this.state=A.BeforeEntity)},Y.prototype.stateInAttributeValueDoubleQuotes=function(ee){this.handleInAttributeValue(ee,v.DoubleQuote)},Y.prototype.stateInAttributeValueSingleQuotes=function(ee){this.handleInAttributeValue(ee,v.SingleQuote)},Y.prototype.stateInAttributeValueNoQuotes=function(ee){C(ee)||ee===v.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(I.Unquoted,this.index),this.state=A.BeforeAttributeName,this.stateBeforeAttributeName(ee)):this.decodeEntities&&ee===v.Amp&&(this.baseState=this.state,this.state=A.BeforeEntity)},Y.prototype.stateBeforeDeclaration=function(ee){ee===v.OpeningSquareBracket?(this.state=A.CDATASequence,this.sequenceIndex=0):this.state=ee===v.Dash?A.BeforeComment:A.InDeclaration},Y.prototype.stateInDeclaration=function(ee){(ee===v.Gt||this.fastForwardTo(v.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=A.Text,this.sectionStart=this.index+1)},Y.prototype.stateInProcessingInstruction=function(ee){(ee===v.Gt||this.fastForwardTo(v.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=A.Text,this.sectionStart=this.index+1)},Y.prototype.stateBeforeComment=function(ee){ee===v.Dash?(this.state=A.InCommentLike,this.currentSequence=z.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=A.InDeclaration},Y.prototype.stateInSpecialComment=function(ee){(ee===v.Gt||this.fastForwardTo(v.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=A.Text,this.sectionStart=this.index+1)},Y.prototype.stateBeforeSpecialS=function(ee){var ie=ee|32;ie===z.ScriptEnd[3]?this.startSpecial(z.ScriptEnd,4):ie===z.StyleEnd[3]?this.startSpecial(z.StyleEnd,4):(this.state=A.InTagName,this.stateInTagName(ee))},Y.prototype.stateBeforeEntity=function(ee){this.entityExcess=1,this.entityResult=0,ee===v.Number?this.state=A.BeforeNumericEntity:ee===v.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=A.InNamedEntity,this.stateInNamedEntity(ee))},Y.prototype.stateInNamedEntity=function(ee){if(this.entityExcess+=1,this.trieIndex=(0,d.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,ee),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var ie=this.trieCurrent&d.BinTrieFlags.VALUE_LENGTH;if(ie){var oe=(ie>>14)-1;if(!this.allowLegacyEntity()&&ee!==v.Semi)this.trieIndex+=oe;else{var se=this.index-this.entityExcess+1;se>this.sectionStart&&this.emitPartial(this.sectionStart,se),this.entityResult=this.trieIndex,this.trieIndex+=oe,this.entityExcess=0,this.sectionStart=this.index+1,oe===0&&this.emitNamedEntity()}}},Y.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var ee=(this.entityTrie[this.entityResult]&d.BinTrieFlags.VALUE_LENGTH)>>14;switch(ee){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~d.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},Y.prototype.stateBeforeNumericEntity=function(ee){(ee|32)===v.LowerX?(this.entityExcess++,this.state=A.InHexEntity):(this.state=A.InNumericEntity,this.stateInNumericEntity(ee))},Y.prototype.emitNumericEntity=function(ee){var ie=this.index-this.entityExcess-1,oe=ie+2+ +(this.state===A.InHexEntity);oe!==this.index&&(ie>this.sectionStart&&this.emitPartial(this.sectionStart,ie),this.sectionStart=this.index+Number(ee),this.emitCodePoint((0,d.replaceCodePoint)(this.entityResult))),this.state=this.baseState},Y.prototype.stateInNumericEntity=function(ee){ee===v.Semi?this.emitNumericEntity(!0):T(ee)?(this.entityResult=this.entityResult*10+(ee-v.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},Y.prototype.stateInHexEntity=function(ee){ee===v.Semi?this.emitNumericEntity(!0):T(ee)?(this.entityResult=this.entityResult*16+(ee-v.Zero),this.entityExcess++):G(ee)?(this.entityResult=this.entityResult*16+((ee|32)-v.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},Y.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===A.Text||this.baseState===A.InSpecialTag)},Y.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===A.Text||this.state===A.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===A.InAttributeValueDq||this.state===A.InAttributeValueSq||this.state===A.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},Y.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},Y.prototype.parse=function(){for(;this.shouldContinue();){var ee=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case A.Text:{this.stateText(ee);break}case A.SpecialStartSequence:{this.stateSpecialStartSequence(ee);break}case A.InSpecialTag:{this.stateInSpecialTag(ee);break}case A.CDATASequence:{this.stateCDATASequence(ee);break}case A.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(ee);break}case A.InAttributeName:{this.stateInAttributeName(ee);break}case A.InCommentLike:{this.stateInCommentLike(ee);break}case A.InSpecialComment:{this.stateInSpecialComment(ee);break}case A.BeforeAttributeName:{this.stateBeforeAttributeName(ee);break}case A.InTagName:{this.stateInTagName(ee);break}case A.InClosingTagName:{this.stateInClosingTagName(ee);break}case A.BeforeTagName:{this.stateBeforeTagName(ee);break}case A.AfterAttributeName:{this.stateAfterAttributeName(ee);break}case A.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(ee);break}case A.BeforeAttributeValue:{this.stateBeforeAttributeValue(ee);break}case A.BeforeClosingTagName:{this.stateBeforeClosingTagName(ee);break}case A.AfterClosingTagName:{this.stateAfterClosingTagName(ee);break}case A.BeforeSpecialS:{this.stateBeforeSpecialS(ee);break}case A.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(ee);break}case A.InSelfClosingTag:{this.stateInSelfClosingTag(ee);break}case A.InDeclaration:{this.stateInDeclaration(ee);break}case A.BeforeDeclaration:{this.stateBeforeDeclaration(ee);break}case A.BeforeComment:{this.stateBeforeComment(ee);break}case A.InProcessingInstruction:{this.stateInProcessingInstruction(ee);break}case A.InNamedEntity:{this.stateInNamedEntity(ee);break}case A.BeforeEntity:{this.stateBeforeEntity(ee);break}case A.InHexEntity:{this.stateInHexEntity(ee);break}case A.InNumericEntity:{this.stateInNumericEntity(ee);break}default:this.stateBeforeNumericEntity(ee)}this.index++}this.cleanup()},Y.prototype.finish=function(){this.state===A.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},Y.prototype.handleTrailingData=function(){var ee=this.buffer.length+this.offset;this.state===A.InCommentLike?this.currentSequence===z.CdataEnd?this.cbs.oncdata(this.sectionStart,ee,0):this.cbs.oncomment(this.sectionStart,ee,0):this.state===A.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===A.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===A.InTagName||this.state===A.BeforeAttributeName||this.state===A.BeforeAttributeValue||this.state===A.AfterAttributeName||this.state===A.InAttributeName||this.state===A.InAttributeValueSq||this.state===A.InAttributeValueDq||this.state===A.InAttributeValueNq||this.state===A.InClosingTagName||this.cbs.ontext(this.sectionStart,ee)},Y.prototype.emitPartial=function(ee,ie){this.baseState!==A.Text&&this.baseState!==A.InSpecialTag?this.cbs.onattribdata(ee,ie):this.cbs.ontext(ee,ie)},Y.prototype.emitCodePoint=function(ee){this.baseState!==A.Text&&this.baseState!==A.InSpecialTag?this.cbs.onattribentity(ee):this.cbs.ontextentity(ee)},Y}();_.default=H}(Tokenizer)),Tokenizer}var hasRequiredParser$1;function requireParser$1(){if(hasRequiredParser$1)return Parser;hasRequiredParser$1=1;var _=Parser&&Parser.__createBinding||(Object.create?function(se,re,fe,ue){ue===void 0&&(ue=fe);var ge=Object.getOwnPropertyDescriptor(re,fe);(!ge||("get"in ge?!re.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return re[fe]}}),Object.defineProperty(se,ue,ge)}:function(se,re,fe,ue){ue===void 0&&(ue=fe),se[ue]=re[fe]}),d=Parser&&Parser.__setModuleDefault||(Object.create?function(se,re){Object.defineProperty(se,"default",{enumerable:!0,value:re})}:function(se,re){se.default=re}),v=Parser&&Parser.__importStar||function(se){if(se&&se.__esModule)return se;var re={};if(se!=null)for(var fe in se)fe!=="default"&&Object.prototype.hasOwnProperty.call(se,fe)&&_(re,se,fe);return d(re,se),re};Object.defineProperty(Parser,"__esModule",{value:!0}),Parser.Parser=void 0;var A=v(requireTokenizer()),C=requireDecode(),w=new Set(["input","option","optgroup","select","button","datalist","textarea"]),T=new Set(["p"]),R=new Set(["thead","tbody"]),G=new Set(["dd","dt"]),I=new Set(["rt","rp"]),z=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",T],["h1",T],["h2",T],["h3",T],["h4",T],["h5",T],["h6",T],["select",w],["input",w],["output",w],["button",w],["datalist",w],["textarea",w],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",G],["dt",G],["address",T],["article",T],["aside",T],["blockquote",T],["details",T],["div",T],["dl",T],["fieldset",T],["figcaption",T],["figure",T],["footer",T],["form",T],["header",T],["hr",T],["main",T],["nav",T],["ol",T],["pre",T],["section",T],["table",T],["ul",T],["rt",I],["rp",I],["tbody",R],["tfoot",R]]),H=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),Y=new Set(["math","svg"]),ee=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),ie=/\s|\//,oe=function(){function se(re,fe){fe===void 0&&(fe={});var ue,ge,ye,be,ve;this.options=fe,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=re??{},this.lowerCaseTagNames=(ue=fe.lowerCaseTags)!==null&&ue!==void 0?ue:!fe.xmlMode,this.lowerCaseAttributeNames=(ge=fe.lowerCaseAttributeNames)!==null&&ge!==void 0?ge:!fe.xmlMode,this.tokenizer=new((ye=fe.Tokenizer)!==null&&ye!==void 0?ye:A.default)(this.options,this),(ve=(be=this.cbs).onparserinit)===null||ve===void 0||ve.call(be,this)}return se.prototype.ontext=function(re,fe){var ue,ge,ye=this.getSlice(re,fe);this.endIndex=fe-1,(ge=(ue=this.cbs).ontext)===null||ge===void 0||ge.call(ue,ye),this.startIndex=fe},se.prototype.ontextentity=function(re){var fe,ue,ge=this.tokenizer.getSectionStart();this.endIndex=ge-1,(ue=(fe=this.cbs).ontext)===null||ue===void 0||ue.call(fe,(0,C.fromCodePoint)(re)),this.startIndex=ge},se.prototype.isVoidElement=function(re){return!this.options.xmlMode&&H.has(re)},se.prototype.onopentagname=function(re,fe){this.endIndex=fe;var ue=this.getSlice(re,fe);this.lowerCaseTagNames&&(ue=ue.toLowerCase()),this.emitOpenTag(ue)},se.prototype.emitOpenTag=function(re){var fe,ue,ge,ye;this.openTagStart=this.startIndex,this.tagname=re;var be=!this.options.xmlMode&&z.get(re);if(be)for(;this.stack.length>0&&be.has(this.stack[this.stack.length-1]);){var ve=this.stack.pop();(ue=(fe=this.cbs).onclosetag)===null||ue===void 0||ue.call(fe,ve,!0)}this.isVoidElement(re)||(this.stack.push(re),Y.has(re)?this.foreignContext.push(!0):ee.has(re)&&this.foreignContext.push(!1)),(ye=(ge=this.cbs).onopentagname)===null||ye===void 0||ye.call(ge,re),this.cbs.onopentag&&(this.attribs={})},se.prototype.endOpenTag=function(re){var fe,ue;this.startIndex=this.openTagStart,this.attribs&&((ue=(fe=this.cbs).onopentag)===null||ue===void 0||ue.call(fe,this.tagname,this.attribs,re),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},se.prototype.onopentagend=function(re){this.endIndex=re,this.endOpenTag(!1),this.startIndex=re+1},se.prototype.onclosetag=function(re,fe){var ue,ge,ye,be,ve,Me;this.endIndex=fe;var we=this.getSlice(re,fe);if(this.lowerCaseTagNames&&(we=we.toLowerCase()),(Y.has(we)||ee.has(we))&&this.foreignContext.pop(),this.isVoidElement(we))!this.options.xmlMode&&we==="br"&&((ge=(ue=this.cbs).onopentagname)===null||ge===void 0||ge.call(ue,"br"),(be=(ye=this.cbs).onopentag)===null||be===void 0||be.call(ye,"br",{},!0),(Me=(ve=this.cbs).onclosetag)===null||Me===void 0||Me.call(ve,"br",!1));else{var Be=this.stack.lastIndexOf(we);if(Be!==-1)if(this.cbs.onclosetag)for(var De=this.stack.length-Be;De--;)this.cbs.onclosetag(this.stack.pop(),De!==0);else this.stack.length=Be;else!this.options.xmlMode&&we==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=fe+1},se.prototype.onselfclosingtag=function(re){this.endIndex=re,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=re+1):this.onopentagend(re)},se.prototype.closeCurrentTag=function(re){var fe,ue,ge=this.tagname;this.endOpenTag(re),this.stack[this.stack.length-1]===ge&&((ue=(fe=this.cbs).onclosetag)===null||ue===void 0||ue.call(fe,ge,!re),this.stack.pop())},se.prototype.onattribname=function(re,fe){this.startIndex=re;var ue=this.getSlice(re,fe);this.attribname=this.lowerCaseAttributeNames?ue.toLowerCase():ue},se.prototype.onattribdata=function(re,fe){this.attribvalue+=this.getSlice(re,fe)},se.prototype.onattribentity=function(re){this.attribvalue+=(0,C.fromCodePoint)(re)},se.prototype.onattribend=function(re,fe){var ue,ge;this.endIndex=fe,(ge=(ue=this.cbs).onattribute)===null||ge===void 0||ge.call(ue,this.attribname,this.attribvalue,re===A.QuoteType.Double?'"':re===A.QuoteType.Single?"'":re===A.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},se.prototype.getInstructionName=function(re){var fe=re.search(ie),ue=fe<0?re:re.substr(0,fe);return this.lowerCaseTagNames&&(ue=ue.toLowerCase()),ue},se.prototype.ondeclaration=function(re,fe){this.endIndex=fe;var ue=this.getSlice(re,fe);if(this.cbs.onprocessinginstruction){var ge=this.getInstructionName(ue);this.cbs.onprocessinginstruction("!".concat(ge),"!".concat(ue))}this.startIndex=fe+1},se.prototype.onprocessinginstruction=function(re,fe){this.endIndex=fe;var ue=this.getSlice(re,fe);if(this.cbs.onprocessinginstruction){var ge=this.getInstructionName(ue);this.cbs.onprocessinginstruction("?".concat(ge),"?".concat(ue))}this.startIndex=fe+1},se.prototype.oncomment=function(re,fe,ue){var ge,ye,be,ve;this.endIndex=fe,(ye=(ge=this.cbs).oncomment)===null||ye===void 0||ye.call(ge,this.getSlice(re,fe-ue)),(ve=(be=this.cbs).oncommentend)===null||ve===void 0||ve.call(be),this.startIndex=fe+1},se.prototype.oncdata=function(re,fe,ue){var ge,ye,be,ve,Me,we,Be,De,Fe,Oe;this.endIndex=fe;var Ge=this.getSlice(re,fe-ue);this.options.xmlMode||this.options.recognizeCDATA?((ye=(ge=this.cbs).oncdatastart)===null||ye===void 0||ye.call(ge),(ve=(be=this.cbs).ontext)===null||ve===void 0||ve.call(be,Ge),(we=(Me=this.cbs).oncdataend)===null||we===void 0||we.call(Me)):((De=(Be=this.cbs).oncomment)===null||De===void 0||De.call(Be,"[CDATA[".concat(Ge,"]]")),(Oe=(Fe=this.cbs).oncommentend)===null||Oe===void 0||Oe.call(Fe)),this.startIndex=fe+1},se.prototype.onend=function(){var re,fe;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var ue=this.stack.length;ue>0;this.cbs.onclosetag(this.stack[--ue],!0));}(fe=(re=this.cbs).onend)===null||fe===void 0||fe.call(re)},se.prototype.reset=function(){var re,fe,ue,ge;(fe=(re=this.cbs).onreset)===null||fe===void 0||fe.call(re),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(ge=(ue=this.cbs).onparserinit)===null||ge===void 0||ge.call(ue,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},se.prototype.parseComplete=function(re){this.reset(),this.end(re)},se.prototype.getSlice=function(re,fe){for(;re-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var ue=this.buffers[0].slice(re-this.bufferOffset,fe-this.bufferOffset);fe-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),ue+=this.buffers[0].slice(0,fe-this.bufferOffset);return ue},se.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},se.prototype.write=function(re){var fe,ue;if(this.ended){(ue=(fe=this.cbs).onerror)===null||ue===void 0||ue.call(fe,new Error(".write() after done!"));return}this.buffers.push(re),this.tokenizer.running&&(this.tokenizer.write(re),this.writeIndex++)},se.prototype.end=function(re){var fe,ue;if(this.ended){(ue=(fe=this.cbs).onerror)===null||ue===void 0||ue.call(fe,new Error(".end() after done!"));return}re&&this.write(re),this.ended=!0,this.tokenizer.end()},se.prototype.pause=function(){this.tokenizer.pause()},se.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},se.prototype.parseChunk=function(re){this.write(re)},se.prototype.done=function(re){this.end(re)},se}();return Parser.Parser=oe,Parser}var lib$4={},lib$3={},hasRequiredLib$5;function requireLib$5(){return hasRequiredLib$5||(hasRequiredLib$5=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.Doctype=_.CDATA=_.Tag=_.Style=_.Script=_.Comment=_.Directive=_.Text=_.Root=_.isTag=_.ElementType=void 0;var d;(function(A){A.Root="root",A.Text="text",A.Directive="directive",A.Comment="comment",A.Script="script",A.Style="style",A.Tag="tag",A.CDATA="cdata",A.Doctype="doctype"})(d=_.ElementType||(_.ElementType={}));function v(A){return A.type===d.Tag||A.type===d.Script||A.type===d.Style}_.isTag=v,_.Root=d.Root,_.Text=d.Text,_.Directive=d.Directive,_.Comment=d.Comment,_.Script=d.Script,_.Style=d.Style,_.Tag=d.Tag,_.CDATA=d.CDATA,_.Doctype=d.Doctype}(lib$3)),lib$3}var node$1={},hasRequiredNode$1;function requireNode$1(){if(hasRequiredNode$1)return node$1;hasRequiredNode$1=1;var _=node$1&&node$1.__extends||function(){var ye=function(be,ve){return ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Me,we){Me.__proto__=we}||function(Me,we){for(var Be in we)Object.prototype.hasOwnProperty.call(we,Be)&&(Me[Be]=we[Be])},ye(be,ve)};return function(be,ve){if(typeof ve!="function"&&ve!==null)throw new TypeError("Class extends value "+String(ve)+" is not a constructor or null");ye(be,ve);function Me(){this.constructor=be}be.prototype=ve===null?Object.create(ve):(Me.prototype=ve.prototype,new Me)}}(),d=node$1&&node$1.__assign||function(){return d=Object.assign||function(ye){for(var be,ve=1,Me=arguments.length;ve<Me;ve++){be=arguments[ve];for(var we in be)Object.prototype.hasOwnProperty.call(be,we)&&(ye[we]=be[we])}return ye},d.apply(this,arguments)};Object.defineProperty(node$1,"__esModule",{value:!0}),node$1.cloneNode=node$1.hasChildren=node$1.isDocument=node$1.isDirective=node$1.isComment=node$1.isText=node$1.isCDATA=node$1.isTag=node$1.Element=node$1.Document=node$1.CDATA=node$1.NodeWithChildren=node$1.ProcessingInstruction=node$1.Comment=node$1.Text=node$1.DataNode=node$1.Node=void 0;var v=requireLib$5(),A=function(){function ye(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(ye.prototype,"parentNode",{get:function(){return this.parent},set:function(be){this.parent=be},enumerable:!1,configurable:!0}),Object.defineProperty(ye.prototype,"previousSibling",{get:function(){return this.prev},set:function(be){this.prev=be},enumerable:!1,configurable:!0}),Object.defineProperty(ye.prototype,"nextSibling",{get:function(){return this.next},set:function(be){this.next=be},enumerable:!1,configurable:!0}),ye.prototype.cloneNode=function(be){return be===void 0&&(be=!1),ue(this,be)},ye}();node$1.Node=A;var C=function(ye){_(be,ye);function be(ve){var Me=ye.call(this)||this;return Me.data=ve,Me}return Object.defineProperty(be.prototype,"nodeValue",{get:function(){return this.data},set:function(ve){this.data=ve},enumerable:!1,configurable:!0}),be}(A);node$1.DataNode=C;var w=function(ye){_(be,ye);function be(){var ve=ye!==null&&ye.apply(this,arguments)||this;return ve.type=v.ElementType.Text,ve}return Object.defineProperty(be.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),be}(C);node$1.Text=w;var T=function(ye){_(be,ye);function be(){var ve=ye!==null&&ye.apply(this,arguments)||this;return ve.type=v.ElementType.Comment,ve}return Object.defineProperty(be.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),be}(C);node$1.Comment=T;var R=function(ye){_(be,ye);function be(ve,Me){var we=ye.call(this,Me)||this;return we.name=ve,we.type=v.ElementType.Directive,we}return Object.defineProperty(be.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),be}(C);node$1.ProcessingInstruction=R;var G=function(ye){_(be,ye);function be(ve){var Me=ye.call(this)||this;return Me.children=ve,Me}return Object.defineProperty(be.prototype,"firstChild",{get:function(){var ve;return(ve=this.children[0])!==null&&ve!==void 0?ve:null},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"childNodes",{get:function(){return this.children},set:function(ve){this.children=ve},enumerable:!1,configurable:!0}),be}(A);node$1.NodeWithChildren=G;var I=function(ye){_(be,ye);function be(){var ve=ye!==null&&ye.apply(this,arguments)||this;return ve.type=v.ElementType.CDATA,ve}return Object.defineProperty(be.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),be}(G);node$1.CDATA=I;var z=function(ye){_(be,ye);function be(){var ve=ye!==null&&ye.apply(this,arguments)||this;return ve.type=v.ElementType.Root,ve}return Object.defineProperty(be.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),be}(G);node$1.Document=z;var H=function(ye){_(be,ye);function be(ve,Me,we,Be){we===void 0&&(we=[]),Be===void 0&&(Be=ve==="script"?v.ElementType.Script:ve==="style"?v.ElementType.Style:v.ElementType.Tag);var De=ye.call(this,we)||this;return De.name=ve,De.attribs=Me,De.type=Be,De}return Object.defineProperty(be.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"tagName",{get:function(){return this.name},set:function(ve){this.name=ve},enumerable:!1,configurable:!0}),Object.defineProperty(be.prototype,"attributes",{get:function(){var ve=this;return Object.keys(this.attribs).map(function(Me){var we,Be;return{name:Me,value:ve.attribs[Me],namespace:(we=ve["x-attribsNamespace"])===null||we===void 0?void 0:we[Me],prefix:(Be=ve["x-attribsPrefix"])===null||Be===void 0?void 0:Be[Me]}})},enumerable:!1,configurable:!0}),be}(G);node$1.Element=H;function Y(ye){return(0,v.isTag)(ye)}node$1.isTag=Y;function ee(ye){return ye.type===v.ElementType.CDATA}node$1.isCDATA=ee;function ie(ye){return ye.type===v.ElementType.Text}node$1.isText=ie;function oe(ye){return ye.type===v.ElementType.Comment}node$1.isComment=oe;function se(ye){return ye.type===v.ElementType.Directive}node$1.isDirective=se;function re(ye){return ye.type===v.ElementType.Root}node$1.isDocument=re;function fe(ye){return Object.prototype.hasOwnProperty.call(ye,"children")}node$1.hasChildren=fe;function ue(ye,be){be===void 0&&(be=!1);var ve;if(ie(ye))ve=new w(ye.data);else if(oe(ye))ve=new T(ye.data);else if(Y(ye)){var Me=be?ge(ye.children):[],we=new H(ye.name,d({},ye.attribs),Me);Me.forEach(function(Oe){return Oe.parent=we}),ye.namespace!=null&&(we.namespace=ye.namespace),ye["x-attribsNamespace"]&&(we["x-attribsNamespace"]=d({},ye["x-attribsNamespace"])),ye["x-attribsPrefix"]&&(we["x-attribsPrefix"]=d({},ye["x-attribsPrefix"])),ve=we}else if(ee(ye)){var Me=be?ge(ye.children):[],Be=new I(Me);Me.forEach(function(Ge){return Ge.parent=Be}),ve=Be}else if(re(ye)){var Me=be?ge(ye.children):[],De=new z(Me);Me.forEach(function(Ge){return Ge.parent=De}),ye["x-mode"]&&(De["x-mode"]=ye["x-mode"]),ve=De}else if(se(ye)){var Fe=new R(ye.name,ye.data);ye["x-name"]!=null&&(Fe["x-name"]=ye["x-name"],Fe["x-publicId"]=ye["x-publicId"],Fe["x-systemId"]=ye["x-systemId"]),ve=Fe}else throw new Error("Not implemented yet: ".concat(ye.type));return ve.startIndex=ye.startIndex,ve.endIndex=ye.endIndex,ye.sourceCodeLocation!=null&&(ve.sourceCodeLocation=ye.sourceCodeLocation),ve}node$1.cloneNode=ue;function ge(ye){for(var be=ye.map(function(Me){return ue(Me,!0)}),ve=1;ve<be.length;ve++)be[ve].prev=be[ve-1],be[ve-1].next=be[ve];return be}return node$1}var hasRequiredLib$4;function requireLib$4(){return hasRequiredLib$4||(hasRequiredLib$4=1,function(_){var d=lib$4&&lib$4.__createBinding||(Object.create?function(R,G,I,z){z===void 0&&(z=I);var H=Object.getOwnPropertyDescriptor(G,I);(!H||("get"in H?!G.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return G[I]}}),Object.defineProperty(R,z,H)}:function(R,G,I,z){z===void 0&&(z=I),R[z]=G[I]}),v=lib$4&&lib$4.__exportStar||function(R,G){for(var I in R)I!=="default"&&!Object.prototype.hasOwnProperty.call(G,I)&&d(G,R,I)};Object.defineProperty(_,"__esModule",{value:!0}),_.DomHandler=void 0;var A=requireLib$5(),C=requireNode$1();v(requireNode$1(),_);var w={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},T=function(){function R(G,I,z){this.dom=[],this.root=new C.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof I=="function"&&(z=I,I=w),typeof G=="object"&&(I=G,G=void 0),this.callback=G??null,this.options=I??w,this.elementCB=z??null}return R.prototype.onparserinit=function(G){this.parser=G},R.prototype.onreset=function(){this.dom=[],this.root=new C.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},R.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},R.prototype.onerror=function(G){this.handleCallback(G)},R.prototype.onclosetag=function(){this.lastNode=null;var G=this.tagStack.pop();this.options.withEndIndices&&(G.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(G)},R.prototype.onopentag=function(G,I){var z=this.options.xmlMode?A.ElementType.Tag:void 0,H=new C.Element(G,I,void 0,z);this.addNode(H),this.tagStack.push(H)},R.prototype.ontext=function(G){var I=this.lastNode;if(I&&I.type===A.ElementType.Text)I.data+=G,this.options.withEndIndices&&(I.endIndex=this.parser.endIndex);else{var z=new C.Text(G);this.addNode(z),this.lastNode=z}},R.prototype.oncomment=function(G){if(this.lastNode&&this.lastNode.type===A.ElementType.Comment){this.lastNode.data+=G;return}var I=new C.Comment(G);this.addNode(I),this.lastNode=I},R.prototype.oncommentend=function(){this.lastNode=null},R.prototype.oncdatastart=function(){var G=new C.Text(""),I=new C.CDATA([G]);this.addNode(I),G.parent=I,this.lastNode=G},R.prototype.oncdataend=function(){this.lastNode=null},R.prototype.onprocessinginstruction=function(G,I){var z=new C.ProcessingInstruction(G,I);this.addNode(z)},R.prototype.handleCallback=function(G){if(typeof this.callback=="function")this.callback(G,this.dom);else if(G)throw G},R.prototype.addNode=function(G){var I=this.tagStack[this.tagStack.length-1],z=I.children[I.children.length-1];this.options.withStartIndices&&(G.startIndex=this.parser.startIndex),this.options.withEndIndices&&(G.endIndex=this.parser.endIndex),I.children.push(G),z&&(G.prev=z,z.next=G),G.parent=I,this.lastNode=null},R}();_.DomHandler=T,_.default=T}(lib$4)),lib$4}var lib$2={},stringify={},lib$1={},lib={},encode={},encodeHtml={},hasRequiredEncodeHtml;function requireEncodeHtml(){if(hasRequiredEncodeHtml)return encodeHtml;hasRequiredEncodeHtml=1,Object.defineProperty(encodeHtml,"__esModule",{value:!0});function _(d){for(var v=1;v<d.length;v++)d[v][0]+=d[v-1][0]+1;return d}return encodeHtml.default=new Map(_([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(_([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(_([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(_([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),encodeHtml}var _escape={},hasRequired_escape;function require_escape(){return hasRequired_escape||(hasRequired_escape=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.escapeText=_.escapeAttribute=_.escapeUTF8=_.escape=_.encodeXML=_.getCodePoint=_.xmlReplacer=void 0,_.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var d=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);_.getCodePoint=String.prototype.codePointAt!=null?function(C,w){return C.codePointAt(w)}:function(C,w){return(C.charCodeAt(w)&64512)===55296?(C.charCodeAt(w)-55296)*1024+C.charCodeAt(w+1)-56320+65536:C.charCodeAt(w)};function v(C){for(var w="",T=0,R;(R=_.xmlReplacer.exec(C))!==null;){var G=R.index,I=C.charCodeAt(G),z=d.get(I);z!==void 0?(w+=C.substring(T,G)+z,T=G+1):(w+="".concat(C.substring(T,G),"&#x").concat((0,_.getCodePoint)(C,G).toString(16),";"),T=_.xmlReplacer.lastIndex+=+((I&64512)===55296))}return w+C.substr(T)}_.encodeXML=v,_.escape=v;function A(C,w){return function(R){for(var G,I=0,z="";G=C.exec(R);)I!==G.index&&(z+=R.substring(I,G.index)),z+=w.get(G[0].charCodeAt(0)),I=G.index+1;return z+R.substring(I)}}_.escapeUTF8=A(/[&<>'"]/g,d),_.escapeAttribute=A(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),_.escapeText=A(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(_escape)),_escape}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode;hasRequiredEncode=1;var _=encode&&encode.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(encode,"__esModule",{value:!0}),encode.encodeNonAsciiHTML=encode.encodeHTML=void 0;var d=_(requireEncodeHtml()),v=require_escape(),A=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function C(R){return T(A,R)}encode.encodeHTML=C;function w(R){return T(v.xmlReplacer,R)}encode.encodeNonAsciiHTML=w;function T(R,G){for(var I="",z=0,H;(H=R.exec(G))!==null;){var Y=H.index;I+=G.substring(z,Y);var ee=G.charCodeAt(Y),ie=d.default.get(ee);if(typeof ie=="object"){if(Y+1<G.length){var oe=G.charCodeAt(Y+1),se=typeof ie.n=="number"?ie.n===oe?ie.o:void 0:ie.n.get(oe);if(se!==void 0){I+=se,z=R.lastIndex+=1;continue}}ie=ie.v}if(ie!==void 0)I+=ie,z=Y+1;else{var re=(0,v.getCodePoint)(G,Y);I+="&#x".concat(re.toString(16),";"),z=R.lastIndex+=+(re!==ee)}}return I+G.substr(z)}return encode}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.decodeXMLStrict=_.decodeHTML5Strict=_.decodeHTML4Strict=_.decodeHTML5=_.decodeHTML4=_.decodeHTMLAttribute=_.decodeHTMLStrict=_.decodeHTML=_.decodeXML=_.DecodingMode=_.EntityDecoder=_.encodeHTML5=_.encodeHTML4=_.encodeNonAsciiHTML=_.encodeHTML=_.escapeText=_.escapeAttribute=_.escapeUTF8=_.escape=_.encodeXML=_.encode=_.decodeStrict=_.decode=_.EncodingMode=_.EntityLevel=void 0;var d=requireDecode(),v=requireEncode(),A=require_escape(),C;(function(Y){Y[Y.XML=0]="XML",Y[Y.HTML=1]="HTML"})(C=_.EntityLevel||(_.EntityLevel={}));var w;(function(Y){Y[Y.UTF8=0]="UTF8",Y[Y.ASCII=1]="ASCII",Y[Y.Extensive=2]="Extensive",Y[Y.Attribute=3]="Attribute",Y[Y.Text=4]="Text"})(w=_.EncodingMode||(_.EncodingMode={}));function T(Y,ee){ee===void 0&&(ee=C.XML);var ie=typeof ee=="number"?ee:ee.level;if(ie===C.HTML){var oe=typeof ee=="object"?ee.mode:void 0;return(0,d.decodeHTML)(Y,oe)}return(0,d.decodeXML)(Y)}_.decode=T;function R(Y,ee){var ie;ee===void 0&&(ee=C.XML);var oe=typeof ee=="number"?{level:ee}:ee;return(ie=oe.mode)!==null&&ie!==void 0||(oe.mode=d.DecodingMode.Strict),T(Y,oe)}_.decodeStrict=R;function G(Y,ee){ee===void 0&&(ee=C.XML);var ie=typeof ee=="number"?{level:ee}:ee;return ie.mode===w.UTF8?(0,A.escapeUTF8)(Y):ie.mode===w.Attribute?(0,A.escapeAttribute)(Y):ie.mode===w.Text?(0,A.escapeText)(Y):ie.level===C.HTML?ie.mode===w.ASCII?(0,v.encodeNonAsciiHTML)(Y):(0,v.encodeHTML)(Y):(0,A.encodeXML)(Y)}_.encode=G;var I=require_escape();Object.defineProperty(_,"encodeXML",{enumerable:!0,get:function(){return I.encodeXML}}),Object.defineProperty(_,"escape",{enumerable:!0,get:function(){return I.escape}}),Object.defineProperty(_,"escapeUTF8",{enumerable:!0,get:function(){return I.escapeUTF8}}),Object.defineProperty(_,"escapeAttribute",{enumerable:!0,get:function(){return I.escapeAttribute}}),Object.defineProperty(_,"escapeText",{enumerable:!0,get:function(){return I.escapeText}});var z=requireEncode();Object.defineProperty(_,"encodeHTML",{enumerable:!0,get:function(){return z.encodeHTML}}),Object.defineProperty(_,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return z.encodeNonAsciiHTML}}),Object.defineProperty(_,"encodeHTML4",{enumerable:!0,get:function(){return z.encodeHTML}}),Object.defineProperty(_,"encodeHTML5",{enumerable:!0,get:function(){return z.encodeHTML}});var H=requireDecode();Object.defineProperty(_,"EntityDecoder",{enumerable:!0,get:function(){return H.EntityDecoder}}),Object.defineProperty(_,"DecodingMode",{enumerable:!0,get:function(){return H.DecodingMode}}),Object.defineProperty(_,"decodeXML",{enumerable:!0,get:function(){return H.decodeXML}}),Object.defineProperty(_,"decodeHTML",{enumerable:!0,get:function(){return H.decodeHTML}}),Object.defineProperty(_,"decodeHTMLStrict",{enumerable:!0,get:function(){return H.decodeHTMLStrict}}),Object.defineProperty(_,"decodeHTMLAttribute",{enumerable:!0,get:function(){return H.decodeHTMLAttribute}}),Object.defineProperty(_,"decodeHTML4",{enumerable:!0,get:function(){return H.decodeHTML}}),Object.defineProperty(_,"decodeHTML5",{enumerable:!0,get:function(){return H.decodeHTML}}),Object.defineProperty(_,"decodeHTML4Strict",{enumerable:!0,get:function(){return H.decodeHTMLStrict}}),Object.defineProperty(_,"decodeHTML5Strict",{enumerable:!0,get:function(){return H.decodeHTMLStrict}}),Object.defineProperty(_,"decodeXMLStrict",{enumerable:!0,get:function(){return H.decodeXML}})}(lib)),lib}var foreignNames={},hasRequiredForeignNames;function requireForeignNames(){return hasRequiredForeignNames||(hasRequiredForeignNames=1,Object.defineProperty(foreignNames,"__esModule",{value:!0}),foreignNames.attributeNames=foreignNames.elementNames=void 0,foreignNames.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(_){return[_.toLowerCase(),_]})),foreignNames.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(_){return[_.toLowerCase(),_]}))),foreignNames}var hasRequiredLib$2;function requireLib$2(){if(hasRequiredLib$2)return lib$1;hasRequiredLib$2=1;var _=lib$1&&lib$1.__assign||function(){return _=Object.assign||function(ge){for(var ye,be=1,ve=arguments.length;be<ve;be++){ye=arguments[be];for(var Me in ye)Object.prototype.hasOwnProperty.call(ye,Me)&&(ge[Me]=ye[Me])}return ge},_.apply(this,arguments)},d=lib$1&&lib$1.__createBinding||(Object.create?function(ge,ye,be,ve){ve===void 0&&(ve=be);var Me=Object.getOwnPropertyDescriptor(ye,be);(!Me||("get"in Me?!ye.__esModule:Me.writable||Me.configurable))&&(Me={enumerable:!0,get:function(){return ye[be]}}),Object.defineProperty(ge,ve,Me)}:function(ge,ye,be,ve){ve===void 0&&(ve=be),ge[ve]=ye[be]}),v=lib$1&&lib$1.__setModuleDefault||(Object.create?function(ge,ye){Object.defineProperty(ge,"default",{enumerable:!0,value:ye})}:function(ge,ye){ge.default=ye}),A=lib$1&&lib$1.__importStar||function(ge){if(ge&&ge.__esModule)return ge;var ye={};if(ge!=null)for(var be in ge)be!=="default"&&Object.prototype.hasOwnProperty.call(ge,be)&&d(ye,ge,be);return v(ye,ge),ye};Object.defineProperty(lib$1,"__esModule",{value:!0}),lib$1.render=void 0;var C=A(requireLib$5()),w=requireLib$3(),T=requireForeignNames(),R=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function G(ge){return ge.replace(/"/g,"&quot;")}function I(ge,ye){var be;if(ge){var ve=((be=ye.encodeEntities)!==null&&be!==void 0?be:ye.decodeEntities)===!1?G:ye.xmlMode||ye.encodeEntities!=="utf8"?w.encodeXML:w.escapeAttribute;return Object.keys(ge).map(function(Me){var we,Be,De=(we=ge[Me])!==null&&we!==void 0?we:"";return ye.xmlMode==="foreign"&&(Me=(Be=T.attributeNames.get(Me))!==null&&Be!==void 0?Be:Me),!ye.emptyAttrs&&!ye.xmlMode&&De===""?Me:"".concat(Me,'="').concat(ve(De),'"')}).join(" ")}}var z=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function H(ge,ye){ye===void 0&&(ye={});for(var be=("length"in ge)?ge:[ge],ve="",Me=0;Me<be.length;Me++)ve+=Y(be[Me],ye);return ve}lib$1.render=H,lib$1.default=H;function Y(ge,ye){switch(ge.type){case C.Root:return H(ge.children,ye);case C.Doctype:case C.Directive:return se(ge);case C.Comment:return ue(ge);case C.CDATA:return fe(ge);case C.Script:case C.Style:case C.Tag:return oe(ge,ye);case C.Text:return re(ge,ye)}}var ee=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),ie=new Set(["svg","math"]);function oe(ge,ye){var be;ye.xmlMode==="foreign"&&(ge.name=(be=T.elementNames.get(ge.name))!==null&&be!==void 0?be:ge.name,ge.parent&&ee.has(ge.parent.name)&&(ye=_(_({},ye),{xmlMode:!1}))),!ye.xmlMode&&ie.has(ge.name)&&(ye=_(_({},ye),{xmlMode:"foreign"}));var ve="<".concat(ge.name),Me=I(ge.attribs,ye);return Me&&(ve+=" ".concat(Me)),ge.children.length===0&&(ye.xmlMode?ye.selfClosingTags!==!1:ye.selfClosingTags&&z.has(ge.name))?(ye.xmlMode||(ve+=" "),ve+="/>"):(ve+=">",ge.children.length>0&&(ve+=H(ge.children,ye)),(ye.xmlMode||!z.has(ge.name))&&(ve+="</".concat(ge.name,">"))),ve}function se(ge){return"<".concat(ge.data,">")}function re(ge,ye){var be,ve=ge.data||"";return((be=ye.encodeEntities)!==null&&be!==void 0?be:ye.decodeEntities)!==!1&&!(!ye.xmlMode&&ge.parent&&R.has(ge.parent.name))&&(ve=ye.xmlMode||ye.encodeEntities!=="utf8"?(0,w.encodeXML)(ve):(0,w.escapeText)(ve)),ve}function fe(ge){return"<![CDATA[".concat(ge.children[0].data,"]]>")}function ue(ge){return"<!--".concat(ge.data,"-->")}return lib$1}var hasRequiredStringify$1;function requireStringify$1(){if(hasRequiredStringify$1)return stringify;hasRequiredStringify$1=1;var _=stringify&&stringify.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(stringify,"__esModule",{value:!0}),stringify.getOuterHTML=C,stringify.getInnerHTML=w,stringify.getText=T,stringify.textContent=R,stringify.innerText=G;var d=requireLib$4(),v=_(requireLib$2()),A=requireLib$5();function C(I,z){return(0,v.default)(I,z)}function w(I,z){return(0,d.hasChildren)(I)?I.children.map(function(H){return C(H,z)}).join(""):""}function T(I){return Array.isArray(I)?I.map(T).join(""):(0,d.isTag)(I)?I.name==="br"?`
`:T(I.children):(0,d.isCDATA)(I)?T(I.children):(0,d.isText)(I)?I.data:""}function R(I){return Array.isArray(I)?I.map(R).join(""):(0,d.hasChildren)(I)&&!(0,d.isComment)(I)?R(I.children):(0,d.isText)(I)?I.data:""}function G(I){return Array.isArray(I)?I.map(G).join(""):(0,d.hasChildren)(I)&&(I.type===A.ElementType.Tag||(0,d.isCDATA)(I))?G(I.children):(0,d.isText)(I)?I.data:""}return stringify}var traversal={},hasRequiredTraversal;function requireTraversal(){if(hasRequiredTraversal)return traversal;hasRequiredTraversal=1,Object.defineProperty(traversal,"__esModule",{value:!0}),traversal.getChildren=d,traversal.getParent=v,traversal.getSiblings=A,traversal.getAttributeValue=C,traversal.hasAttrib=w,traversal.getName=T,traversal.nextElementSibling=R,traversal.prevElementSibling=G;var _=requireLib$4();function d(I){return(0,_.hasChildren)(I)?I.children:[]}function v(I){return I.parent||null}function A(I){var z,H,Y=v(I);if(Y!=null)return d(Y);for(var ee=[I],ie=I.prev,oe=I.next;ie!=null;)ee.unshift(ie),z=ie,ie=z.prev;for(;oe!=null;)ee.push(oe),H=oe,oe=H.next;return ee}function C(I,z){var H;return(H=I.attribs)===null||H===void 0?void 0:H[z]}function w(I,z){return I.attribs!=null&&Object.prototype.hasOwnProperty.call(I.attribs,z)&&I.attribs[z]!=null}function T(I){return I.name}function R(I){for(var z,H=I.next;H!==null&&!(0,_.isTag)(H);)z=H,H=z.next;return H}function G(I){for(var z,H=I.prev;H!==null&&!(0,_.isTag)(H);)z=H,H=z.prev;return H}return traversal}var manipulation={},hasRequiredManipulation;function requireManipulation(){if(hasRequiredManipulation)return manipulation;hasRequiredManipulation=1,Object.defineProperty(manipulation,"__esModule",{value:!0}),manipulation.removeElement=_,manipulation.replaceElement=d,manipulation.appendChild=v,manipulation.append=A,manipulation.prependChild=C,manipulation.prepend=w;function _(T){if(T.prev&&(T.prev.next=T.next),T.next&&(T.next.prev=T.prev),T.parent){var R=T.parent.children,G=R.lastIndexOf(T);G>=0&&R.splice(G,1)}T.next=null,T.prev=null,T.parent=null}function d(T,R){var G=R.prev=T.prev;G&&(G.next=R);var I=R.next=T.next;I&&(I.prev=R);var z=R.parent=T.parent;if(z){var H=z.children;H[H.lastIndexOf(T)]=R,T.parent=null}}function v(T,R){if(_(R),R.next=null,R.parent=T,T.children.push(R)>1){var G=T.children[T.children.length-2];G.next=R,R.prev=G}else R.prev=null}function A(T,R){_(R);var G=T.parent,I=T.next;if(R.next=I,R.prev=T,T.next=R,R.parent=G,I){if(I.prev=R,G){var z=G.children;z.splice(z.lastIndexOf(I),0,R)}}else G&&G.children.push(R)}function C(T,R){if(_(R),R.parent=T,R.prev=null,T.children.unshift(R)!==1){var G=T.children[1];G.prev=R,R.next=G}else R.next=null}function w(T,R){_(R);var G=T.parent;if(G){var I=G.children;I.splice(I.indexOf(T),0,R)}T.prev&&(T.prev.next=R),R.parent=G,R.prev=T.prev,R.next=T,T.prev=R}return manipulation}var querying={},hasRequiredQuerying;function requireQuerying(){if(hasRequiredQuerying)return querying;hasRequiredQuerying=1,Object.defineProperty(querying,"__esModule",{value:!0}),querying.filter=d,querying.find=v,querying.findOneChild=A,querying.findOne=C,querying.existsOne=w,querying.findAll=T;var _=requireLib$4();function d(R,G,I,z){return I===void 0&&(I=!0),z===void 0&&(z=1/0),v(R,Array.isArray(G)?G:[G],I,z)}function v(R,G,I,z){for(var H=[],Y=[Array.isArray(G)?G:[G]],ee=[0];;){if(ee[0]>=Y[0].length){if(ee.length===1)return H;Y.shift(),ee.shift();continue}var ie=Y[0][ee[0]++];if(R(ie)&&(H.push(ie),--z<=0))return H;I&&(0,_.hasChildren)(ie)&&ie.children.length>0&&(ee.unshift(0),Y.unshift(ie.children))}}function A(R,G){return G.find(R)}function C(R,G,I){I===void 0&&(I=!0);for(var z=Array.isArray(G)?G:[G],H=0;H<z.length;H++){var Y=z[H];if((0,_.isTag)(Y)&&R(Y))return Y;if(I&&(0,_.hasChildren)(Y)&&Y.children.length>0){var ee=C(R,Y.children,!0);if(ee)return ee}}return null}function w(R,G){return(Array.isArray(G)?G:[G]).some(function(I){return(0,_.isTag)(I)&&R(I)||(0,_.hasChildren)(I)&&w(R,I.children)})}function T(R,G){for(var I=[],z=[Array.isArray(G)?G:[G]],H=[0];;){if(H[0]>=z[0].length){if(z.length===1)return I;z.shift(),H.shift();continue}var Y=z[0][H[0]++];(0,_.isTag)(Y)&&R(Y)&&I.push(Y),(0,_.hasChildren)(Y)&&Y.children.length>0&&(H.unshift(0),z.unshift(Y.children))}}return querying}var legacy={},hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1,Object.defineProperty(legacy,"__esModule",{value:!0}),legacy.testElement=T,legacy.getElements=R,legacy.getElementById=G,legacy.getElementsByTagName=I,legacy.getElementsByClassName=z,legacy.getElementsByTagType=H;var _=requireLib$4(),d=requireQuerying(),v={tag_name:function(Y){return typeof Y=="function"?function(ee){return(0,_.isTag)(ee)&&Y(ee.name)}:Y==="*"?_.isTag:function(ee){return(0,_.isTag)(ee)&&ee.name===Y}},tag_type:function(Y){return typeof Y=="function"?function(ee){return Y(ee.type)}:function(ee){return ee.type===Y}},tag_contains:function(Y){return typeof Y=="function"?function(ee){return(0,_.isText)(ee)&&Y(ee.data)}:function(ee){return(0,_.isText)(ee)&&ee.data===Y}}};function A(Y,ee){return typeof ee=="function"?function(ie){return(0,_.isTag)(ie)&&ee(ie.attribs[Y])}:function(ie){return(0,_.isTag)(ie)&&ie.attribs[Y]===ee}}function C(Y,ee){return function(ie){return Y(ie)||ee(ie)}}function w(Y){var ee=Object.keys(Y).map(function(ie){var oe=Y[ie];return Object.prototype.hasOwnProperty.call(v,ie)?v[ie](oe):A(ie,oe)});return ee.length===0?null:ee.reduce(C)}function T(Y,ee){var ie=w(Y);return ie?ie(ee):!0}function R(Y,ee,ie,oe){oe===void 0&&(oe=1/0);var se=w(Y);return se?(0,d.filter)(se,ee,ie,oe):[]}function G(Y,ee,ie){return ie===void 0&&(ie=!0),Array.isArray(ee)||(ee=[ee]),(0,d.findOne)(A("id",Y),ee,ie)}function I(Y,ee,ie,oe){return ie===void 0&&(ie=!0),oe===void 0&&(oe=1/0),(0,d.filter)(v.tag_name(Y),ee,ie,oe)}function z(Y,ee,ie,oe){return ie===void 0&&(ie=!0),oe===void 0&&(oe=1/0),(0,d.filter)(A("class",Y),ee,ie,oe)}function H(Y,ee,ie,oe){return ie===void 0&&(ie=!0),oe===void 0&&(oe=1/0),(0,d.filter)(v.tag_type(Y),ee,ie,oe)}return legacy}var helpers={},hasRequiredHelpers;function requireHelpers(){if(hasRequiredHelpers)return helpers;hasRequiredHelpers=1,Object.defineProperty(helpers,"__esModule",{value:!0}),helpers.DocumentPosition=void 0,helpers.removeSubsets=d,helpers.compareDocumentPosition=A,helpers.uniqueSort=C;var _=requireLib$4();function d(w){for(var T=w.length;--T>=0;){var R=w[T];if(T>0&&w.lastIndexOf(R,T-1)>=0){w.splice(T,1);continue}for(var G=R.parent;G;G=G.parent)if(w.includes(G)){w.splice(T,1);break}}return w}var v;(function(w){w[w.DISCONNECTED=1]="DISCONNECTED",w[w.PRECEDING=2]="PRECEDING",w[w.FOLLOWING=4]="FOLLOWING",w[w.CONTAINS=8]="CONTAINS",w[w.CONTAINED_BY=16]="CONTAINED_BY"})(v||(helpers.DocumentPosition=v={}));function A(w,T){var R=[],G=[];if(w===T)return 0;for(var I=(0,_.hasChildren)(w)?w:w.parent;I;)R.unshift(I),I=I.parent;for(I=(0,_.hasChildren)(T)?T:T.parent;I;)G.unshift(I),I=I.parent;for(var z=Math.min(R.length,G.length),H=0;H<z&&R[H]===G[H];)H++;if(H===0)return v.DISCONNECTED;var Y=R[H-1],ee=Y.children,ie=R[H],oe=G[H];return ee.indexOf(ie)>ee.indexOf(oe)?Y===T?v.FOLLOWING|v.CONTAINED_BY:v.FOLLOWING:Y===w?v.PRECEDING|v.CONTAINS:v.PRECEDING}function C(w){return w=w.filter(function(T,R,G){return!G.includes(T,R+1)}),w.sort(function(T,R){var G=A(T,R);return G&v.PRECEDING?-1:G&v.FOLLOWING?1:0}),w}return helpers}var feeds={},hasRequiredFeeds;function requireFeeds(){if(hasRequiredFeeds)return feeds;hasRequiredFeeds=1,Object.defineProperty(feeds,"__esModule",{value:!0}),feeds.getFeed=v;var _=requireStringify$1(),d=requireLegacy();function v(Y){var ee=G(H,Y);return ee?ee.name==="feed"?A(ee):C(ee):null}function A(Y){var ee,ie=Y.children,oe={type:"atom",items:(0,d.getElementsByTagName)("entry",ie).map(function(fe){var ue,ge=fe.children,ye={media:R(ge)};z(ye,"id","id",ge),z(ye,"title","title",ge);var be=(ue=G("link",ge))===null||ue===void 0?void 0:ue.attribs.href;be&&(ye.link=be);var ve=I("summary",ge)||I("content",ge);ve&&(ye.description=ve);var Me=I("updated",ge);return Me&&(ye.pubDate=new Date(Me)),ye})};z(oe,"id","id",ie),z(oe,"title","title",ie);var se=(ee=G("link",ie))===null||ee===void 0?void 0:ee.attribs.href;se&&(oe.link=se),z(oe,"description","subtitle",ie);var re=I("updated",ie);return re&&(oe.updated=new Date(re)),z(oe,"author","email",ie,!0),oe}function C(Y){var ee,ie,oe=(ie=(ee=G("channel",Y.children))===null||ee===void 0?void 0:ee.children)!==null&&ie!==void 0?ie:[],se={type:Y.name.substr(0,3),id:"",items:(0,d.getElementsByTagName)("item",Y.children).map(function(fe){var ue=fe.children,ge={media:R(ue)};z(ge,"id","guid",ue),z(ge,"title","title",ue),z(ge,"link","link",ue),z(ge,"description","description",ue);var ye=I("pubDate",ue)||I("dc:date",ue);return ye&&(ge.pubDate=new Date(ye)),ge})};z(se,"title","title",oe),z(se,"link","link",oe),z(se,"description","description",oe);var re=I("lastBuildDate",oe);return re&&(se.updated=new Date(re)),z(se,"author","managingEditor",oe,!0),se}var w=["url","type","lang"],T=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function R(Y){return(0,d.getElementsByTagName)("media:content",Y).map(function(ee){for(var ie=ee.attribs,oe={medium:ie.medium,isDefault:!!ie.isDefault},se=0,re=w;se<re.length;se++){var fe=re[se];ie[fe]&&(oe[fe]=ie[fe])}for(var ue=0,ge=T;ue<ge.length;ue++){var fe=ge[ue];ie[fe]&&(oe[fe]=parseInt(ie[fe],10))}return ie.expression&&(oe.expression=ie.expression),oe})}function G(Y,ee){return(0,d.getElementsByTagName)(Y,ee,!0,1)[0]}function I(Y,ee,ie){return ie===void 0&&(ie=!1),(0,_.textContent)((0,d.getElementsByTagName)(Y,ee,ie,1)).trim()}function z(Y,ee,ie,oe,se){se===void 0&&(se=!1);var re=I(ie,oe,se);re&&(Y[ee]=re)}function H(Y){return Y==="rss"||Y==="feed"||Y==="rdf:RDF"}return feeds}var hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,function(_){var d=lib$2&&lib$2.__createBinding||(Object.create?function(C,w,T,R){R===void 0&&(R=T);var G=Object.getOwnPropertyDescriptor(w,T);(!G||("get"in G?!w.__esModule:G.writable||G.configurable))&&(G={enumerable:!0,get:function(){return w[T]}}),Object.defineProperty(C,R,G)}:function(C,w,T,R){R===void 0&&(R=T),C[R]=w[T]}),v=lib$2&&lib$2.__exportStar||function(C,w){for(var T in C)T!=="default"&&!Object.prototype.hasOwnProperty.call(w,T)&&d(w,C,T)};Object.defineProperty(_,"__esModule",{value:!0}),_.hasChildren=_.isDocument=_.isComment=_.isText=_.isCDATA=_.isTag=void 0,v(requireStringify$1(),_),v(requireTraversal(),_),v(requireManipulation(),_),v(requireQuerying(),_),v(requireLegacy(),_),v(requireHelpers(),_),v(requireFeeds(),_);var A=requireLib$4();Object.defineProperty(_,"isTag",{enumerable:!0,get:function(){return A.isTag}}),Object.defineProperty(_,"isCDATA",{enumerable:!0,get:function(){return A.isCDATA}}),Object.defineProperty(_,"isText",{enumerable:!0,get:function(){return A.isText}}),Object.defineProperty(_,"isComment",{enumerable:!0,get:function(){return A.isComment}}),Object.defineProperty(_,"isDocument",{enumerable:!0,get:function(){return A.isDocument}}),Object.defineProperty(_,"hasChildren",{enumerable:!0,get:function(){return A.hasChildren}})}(lib$2)),lib$2}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,function(_){var d=lib$5&&lib$5.__createBinding||(Object.create?function(re,fe,ue,ge){ge===void 0&&(ge=ue);var ye=Object.getOwnPropertyDescriptor(fe,ue);(!ye||("get"in ye?!fe.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return fe[ue]}}),Object.defineProperty(re,ge,ye)}:function(re,fe,ue,ge){ge===void 0&&(ge=ue),re[ge]=fe[ue]}),v=lib$5&&lib$5.__setModuleDefault||(Object.create?function(re,fe){Object.defineProperty(re,"default",{enumerable:!0,value:fe})}:function(re,fe){re.default=fe}),A=lib$5&&lib$5.__importStar||function(re){if(re&&re.__esModule)return re;var fe={};if(re!=null)for(var ue in re)ue!=="default"&&Object.prototype.hasOwnProperty.call(re,ue)&&d(fe,re,ue);return v(fe,re),fe},C=lib$5&&lib$5.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(_,"__esModule",{value:!0}),_.DomUtils=_.parseFeed=_.getFeed=_.ElementType=_.Tokenizer=_.createDomStream=_.parseDOM=_.parseDocument=_.DefaultHandler=_.DomHandler=_.Parser=void 0;var w=requireParser$1(),T=requireParser$1();Object.defineProperty(_,"Parser",{enumerable:!0,get:function(){return T.Parser}});var R=requireLib$4(),G=requireLib$4();Object.defineProperty(_,"DomHandler",{enumerable:!0,get:function(){return G.DomHandler}}),Object.defineProperty(_,"DefaultHandler",{enumerable:!0,get:function(){return G.DomHandler}});function I(re,fe){var ue=new R.DomHandler(void 0,fe);return new w.Parser(ue,fe).end(re),ue.root}_.parseDocument=I;function z(re,fe){return I(re,fe).children}_.parseDOM=z;function H(re,fe,ue){var ge=new R.DomHandler(re,fe,ue);return new w.Parser(ge,fe)}_.createDomStream=H;var Y=requireTokenizer();Object.defineProperty(_,"Tokenizer",{enumerable:!0,get:function(){return C(Y).default}}),_.ElementType=A(requireLib$5());var ee=requireLib$1(),ie=requireLib$1();Object.defineProperty(_,"getFeed",{enumerable:!0,get:function(){return ie.getFeed}});var oe={xmlMode:!0};function se(re,fe){return fe===void 0&&(fe=oe),(0,ee.getFeed)(z(re,fe))}_.parseFeed=se,_.DomUtils=A(requireLib$1())}(lib$5)),lib$5}var escapeStringRegexp,hasRequiredEscapeStringRegexp;function requireEscapeStringRegexp(){return hasRequiredEscapeStringRegexp||(hasRequiredEscapeStringRegexp=1,escapeStringRegexp=_=>{if(typeof _!="string")throw new TypeError("Expected a string");return _.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}),escapeStringRegexp}var isPlainObject={},hasRequiredIsPlainObject;function requireIsPlainObject(){if(hasRequiredIsPlainObject)return isPlainObject;hasRequiredIsPlainObject=1,Object.defineProperty(isPlainObject,"__esModule",{value:!0});/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function _(v){return Object.prototype.toString.call(v)==="[object Object]"}function d(v){var A,C;return _(v)===!1?!1:(A=v.constructor,A===void 0?!0:(C=A.prototype,!(_(C)===!1||C.hasOwnProperty("isPrototypeOf")===!1)))}return isPlainObject.isPlainObject=d,isPlainObject}var parseSrcset$1={exports:{}},parseSrcset=parseSrcset$1.exports,hasRequiredParseSrcset;function requireParseSrcset(){return hasRequiredParseSrcset||(hasRequiredParseSrcset=1,function(_){(function(d,v){_.exports?_.exports=v():d.parseSrcset=v()})(parseSrcset,function(){return function(d){function v(ge){return ge===" "||ge==="	"||ge===`
`||ge==="\f"||ge==="\r"}function A(ge){var ye,be=ge.exec(d.substring(se));if(be)return ye=be[0],se+=ye.length,ye}for(var C=d.length,w=/^[ \t\n\r\u000c]+/,T=/^[, \t\n\r\u000c]+/,R=/^[^ \t\n\r\u000c]+/,G=/[,]+$/,I=/^\d+$/,z=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,H,Y,ee,ie,oe,se=0,re=[];;){if(A(T),se>=C)return re;H=A(R),Y=[],H.slice(-1)===","?(H=H.replace(G,""),ue()):fe()}function fe(){for(A(w),ee="",ie="in descriptor";;){if(oe=d.charAt(se),ie==="in descriptor")if(v(oe))ee&&(Y.push(ee),ee="",ie="after descriptor");else if(oe===","){se+=1,ee&&Y.push(ee),ue();return}else if(oe==="(")ee=ee+oe,ie="in parens";else if(oe===""){ee&&Y.push(ee),ue();return}else ee=ee+oe;else if(ie==="in parens")if(oe===")")ee=ee+oe,ie="in descriptor";else if(oe===""){Y.push(ee),ue();return}else ee=ee+oe;else if(ie==="after descriptor"&&!v(oe))if(oe===""){ue();return}else ie="in descriptor",se-=1;se+=1}}function ue(){var ge=!1,ye,be,ve,Me,we={},Be,De,Fe,Oe,Ge;for(Me=0;Me<Y.length;Me++)Be=Y[Me],De=Be[Be.length-1],Fe=Be.substring(0,Be.length-1),Oe=parseInt(Fe,10),Ge=parseFloat(Fe),I.test(Fe)&&De==="w"?((ye||be)&&(ge=!0),Oe===0?ge=!0:ye=Oe):z.test(Fe)&&De==="x"?((ye||be||ve)&&(ge=!0),Ge<0?ge=!0:be=Ge):I.test(Fe)&&De==="h"?((ve||be)&&(ge=!0),Oe===0?ge=!0:ve=Oe):ge=!0;ge?console&&console.log&&console.log("Invalid srcset descriptor found in '"+d+"' at '"+Be+"'."):(we.url=H,ye&&(we.w=ye),be&&(we.d=be),ve&&(we.h=ve),re.push(we))}}})}(parseSrcset$1)),parseSrcset$1.exports}var picocolors_browser={exports:{}},hasRequiredPicocolors_browser;function requirePicocolors_browser(){if(hasRequiredPicocolors_browser)return picocolors_browser.exports;hasRequiredPicocolors_browser=1;var _=String,d=function(){return{isColorSupported:!1,reset:_,bold:_,dim:_,italic:_,underline:_,inverse:_,hidden:_,strikethrough:_,black:_,red:_,green:_,yellow:_,blue:_,magenta:_,cyan:_,white:_,gray:_,bgBlack:_,bgRed:_,bgGreen:_,bgYellow:_,bgBlue:_,bgMagenta:_,bgCyan:_,bgWhite:_,blackBright:_,redBright:_,greenBright:_,yellowBright:_,blueBright:_,magentaBright:_,cyanBright:_,whiteBright:_,bgBlackBright:_,bgRedBright:_,bgGreenBright:_,bgYellowBright:_,bgBlueBright:_,bgMagentaBright:_,bgCyanBright:_,bgWhiteBright:_}};return picocolors_browser.exports=d(),picocolors_browser.exports.createColors=d,picocolors_browser.exports}var cssSyntaxError,hasRequiredCssSyntaxError;function requireCssSyntaxError(){if(hasRequiredCssSyntaxError)return cssSyntaxError;hasRequiredCssSyntaxError=1;let _=requirePicocolors_browser(),d=require$$2;class v extends Error{constructor(C,w,T,R,G,I){super(C),this.name="CssSyntaxError",this.reason=C,G&&(this.file=G),R&&(this.source=R),I&&(this.plugin=I),typeof w<"u"&&typeof T<"u"&&(typeof w=="number"?(this.line=w,this.column=T):(this.line=w.line,this.column=w.column,this.endLine=T.line,this.endColumn=T.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,v)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(C){if(!this.source)return"";let w=this.source;C==null&&(C=_.isColorSupported);let T=ee=>ee,R=ee=>ee,G=ee=>ee;if(C){let{bold:ee,gray:ie,red:oe}=_.createColors(!0);R=se=>ee(oe(se)),T=se=>ie(se),d&&(G=se=>d(se))}let I=w.split(/\r?\n/),z=Math.max(this.line-3,0),H=Math.min(this.line+2,I.length),Y=String(H).length;return I.slice(z,H).map((ee,ie)=>{let oe=z+1+ie,se=" "+(" "+oe).slice(-Y)+" | ";if(oe===this.line){if(ee.length>160){let fe=20,ue=Math.max(0,this.column-fe),ge=Math.max(this.column+fe,this.endColumn+fe),ye=ee.slice(ue,ge),be=T(se.replace(/\d/g," "))+ee.slice(0,Math.min(this.column-1,fe-1)).replace(/[^\t]/g," ");return R(">")+T(se)+G(ye)+`
 `+be+R("^")}let re=T(se.replace(/\d/g," "))+ee.slice(0,this.column-1).replace(/[^\t]/g," ");return R(">")+T(se)+G(ee)+`
 `+re+R("^")}return" "+T(se)+G(ee)}).join(`
`)}toString(){let C=this.showSourceCode();return C&&(C=`

`+C+`
`),this.name+": "+this.message+C}}return cssSyntaxError=v,v.default=v,cssSyntaxError}var stringifier,hasRequiredStringifier;function requireStringifier(){if(hasRequiredStringifier)return stringifier;hasRequiredStringifier=1;const _={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function d(A){return A[0].toUpperCase()+A.slice(1)}class v{constructor(C){this.builder=C}atrule(C,w){let T="@"+C.name,R=C.params?this.rawValue(C,"params"):"";if(typeof C.raws.afterName<"u"?T+=C.raws.afterName:R&&(T+=" "),C.nodes)this.block(C,T+R);else{let G=(C.raws.between||"")+(w?";":"");this.builder(T+R+G,C)}}beforeAfter(C,w){let T;C.type==="decl"?T=this.raw(C,null,"beforeDecl"):C.type==="comment"?T=this.raw(C,null,"beforeComment"):w==="before"?T=this.raw(C,null,"beforeRule"):T=this.raw(C,null,"beforeClose");let R=C.parent,G=0;for(;R&&R.type!=="root";)G+=1,R=R.parent;if(T.includes(`
`)){let I=this.raw(C,null,"indent");if(I.length)for(let z=0;z<G;z++)T+=I}return T}block(C,w){let T=this.raw(C,"between","beforeOpen");this.builder(w+T+"{",C,"start");let R;C.nodes&&C.nodes.length?(this.body(C),R=this.raw(C,"after")):R=this.raw(C,"after","emptyBody"),R&&this.builder(R),this.builder("}",C,"end")}body(C){let w=C.nodes.length-1;for(;w>0&&C.nodes[w].type==="comment";)w-=1;let T=this.raw(C,"semicolon");for(let R=0;R<C.nodes.length;R++){let G=C.nodes[R],I=this.raw(G,"before");I&&this.builder(I),this.stringify(G,w!==R||T)}}comment(C){let w=this.raw(C,"left","commentLeft"),T=this.raw(C,"right","commentRight");this.builder("/*"+w+C.text+T+"*/",C)}decl(C,w){let T=this.raw(C,"between","colon"),R=C.prop+T+this.rawValue(C,"value");C.important&&(R+=C.raws.important||" !important"),w&&(R+=";"),this.builder(R,C)}document(C){this.body(C)}raw(C,w,T){let R;if(T||(T=w),w&&(R=C.raws[w],typeof R<"u"))return R;let G=C.parent;if(T==="before"&&(!G||G.type==="root"&&G.first===C||G&&G.type==="document"))return"";if(!G)return _[T];let I=C.root();if(I.rawCache||(I.rawCache={}),typeof I.rawCache[T]<"u")return I.rawCache[T];if(T==="before"||T==="after")return this.beforeAfter(C,T);{let z="raw"+d(T);this[z]?R=this[z](I,C):I.walk(H=>{if(R=H.raws[w],typeof R<"u")return!1})}return typeof R>"u"&&(R=_[T]),I.rawCache[T]=R,R}rawBeforeClose(C){let w;return C.walk(T=>{if(T.nodes&&T.nodes.length>0&&typeof T.raws.after<"u")return w=T.raws.after,w.includes(`
`)&&(w=w.replace(/[^\n]+$/,"")),!1}),w&&(w=w.replace(/\S/g,"")),w}rawBeforeComment(C,w){let T;return C.walkComments(R=>{if(typeof R.raws.before<"u")return T=R.raws.before,T.includes(`
`)&&(T=T.replace(/[^\n]+$/,"")),!1}),typeof T>"u"?T=this.raw(w,null,"beforeDecl"):T&&(T=T.replace(/\S/g,"")),T}rawBeforeDecl(C,w){let T;return C.walkDecls(R=>{if(typeof R.raws.before<"u")return T=R.raws.before,T.includes(`
`)&&(T=T.replace(/[^\n]+$/,"")),!1}),typeof T>"u"?T=this.raw(w,null,"beforeRule"):T&&(T=T.replace(/\S/g,"")),T}rawBeforeOpen(C){let w;return C.walk(T=>{if(T.type!=="decl"&&(w=T.raws.between,typeof w<"u"))return!1}),w}rawBeforeRule(C){let w;return C.walk(T=>{if(T.nodes&&(T.parent!==C||C.first!==T)&&typeof T.raws.before<"u")return w=T.raws.before,w.includes(`
`)&&(w=w.replace(/[^\n]+$/,"")),!1}),w&&(w=w.replace(/\S/g,"")),w}rawColon(C){let w;return C.walkDecls(T=>{if(typeof T.raws.between<"u")return w=T.raws.between.replace(/[^\s:]/g,""),!1}),w}rawEmptyBody(C){let w;return C.walk(T=>{if(T.nodes&&T.nodes.length===0&&(w=T.raws.after,typeof w<"u"))return!1}),w}rawIndent(C){if(C.raws.indent)return C.raws.indent;let w;return C.walk(T=>{let R=T.parent;if(R&&R!==C&&R.parent&&R.parent===C&&typeof T.raws.before<"u"){let G=T.raws.before.split(`
`);return w=G[G.length-1],w=w.replace(/\S/g,""),!1}}),w}rawSemicolon(C){let w;return C.walk(T=>{if(T.nodes&&T.nodes.length&&T.last.type==="decl"&&(w=T.raws.semicolon,typeof w<"u"))return!1}),w}rawValue(C,w){let T=C[w],R=C.raws[w];return R&&R.value===T?R.raw:T}root(C){this.body(C),C.raws.after&&this.builder(C.raws.after)}rule(C){this.block(C,this.rawValue(C,"selector")),C.raws.ownSemicolon&&this.builder(C.raws.ownSemicolon,C,"end")}stringify(C,w){if(!this[C.type])throw new Error("Unknown AST node type "+C.type+". Maybe you need to change PostCSS stringifier.");this[C.type](C,w)}}return stringifier=v,v.default=v,stringifier}var stringify_1,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify_1;hasRequiredStringify=1;let _=requireStringifier();function d(v,A){new _(A).stringify(v)}return stringify_1=d,d.default=d,stringify_1}var symbols={},hasRequiredSymbols;function requireSymbols(){return hasRequiredSymbols||(hasRequiredSymbols=1,symbols.isClean=Symbol("isClean"),symbols.my=Symbol("my")),symbols}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;let _=requireCssSyntaxError(),d=requireStringifier(),v=requireStringify(),{isClean:A,my:C}=requireSymbols();function w(G,I){let z=new G.constructor;for(let H in G){if(!Object.prototype.hasOwnProperty.call(G,H)||H==="proxyCache")continue;let Y=G[H],ee=typeof Y;H==="parent"&&ee==="object"?I&&(z[H]=I):H==="source"?z[H]=Y:Array.isArray(Y)?z[H]=Y.map(ie=>w(ie,z)):(ee==="object"&&Y!==null&&(Y=w(Y)),z[H]=Y)}return z}function T(G,I){if(I&&typeof I.offset<"u")return I.offset;let z=1,H=1,Y=0;for(let ee=0;ee<G.length;ee++){if(H===I.line&&z===I.column){Y=ee;break}G[ee]===`
`?(z=1,H+=1):z+=1}return Y}class R{get proxyOf(){return this}constructor(I={}){this.raws={},this[A]=!1,this[C]=!0;for(let z in I)if(z==="nodes"){this.nodes=[];for(let H of I[z])typeof H.clone=="function"?this.append(H.clone()):this.append(H)}else this[z]=I[z]}addToError(I){if(I.postcssNode=this,I.stack&&this.source&&/\n\s{4}at /.test(I.stack)){let z=this.source;I.stack=I.stack.replace(/\n\s{4}at /,`$&${z.input.from}:${z.start.line}:${z.start.column}$&`)}return I}after(I){return this.parent.insertAfter(this,I),this}assign(I={}){for(let z in I)this[z]=I[z];return this}before(I){return this.parent.insertBefore(this,I),this}cleanRaws(I){delete this.raws.before,delete this.raws.after,I||delete this.raws.between}clone(I={}){let z=w(this);for(let H in I)z[H]=I[H];return z}cloneAfter(I={}){let z=this.clone(I);return this.parent.insertAfter(this,z),z}cloneBefore(I={}){let z=this.clone(I);return this.parent.insertBefore(this,z),z}error(I,z={}){if(this.source){let{end:H,start:Y}=this.rangeBy(z);return this.source.input.error(I,{column:Y.column,line:Y.line},{column:H.column,line:H.line},z)}return new _(I)}getProxyProcessor(){return{get(I,z){return z==="proxyOf"?I:z==="root"?()=>I.root().toProxy():I[z]},set(I,z,H){return I[z]===H||(I[z]=H,(z==="prop"||z==="value"||z==="name"||z==="params"||z==="important"||z==="text")&&I.markDirty()),!0}}}markClean(){this[A]=!0}markDirty(){if(this[A]){this[A]=!1;let I=this;for(;I=I.parent;)I[A]=!1}}next(){if(!this.parent)return;let I=this.parent.index(this);return this.parent.nodes[I+1]}positionBy(I={}){let z=this.source.start;if(I.index)z=this.positionInside(I.index);else if(I.word){let H="document"in this.source.input?this.source.input.document:this.source.input.css,ee=H.slice(T(H,this.source.start),T(H,this.source.end)).indexOf(I.word);ee!==-1&&(z=this.positionInside(ee))}return z}positionInside(I){let z=this.source.start.column,H=this.source.start.line,Y="document"in this.source.input?this.source.input.document:this.source.input.css,ee=T(Y,this.source.start),ie=ee+I;for(let oe=ee;oe<ie;oe++)Y[oe]===`
`?(z=1,H+=1):z+=1;return{column:z,line:H,offset:ie}}prev(){if(!this.parent)return;let I=this.parent.index(this);return this.parent.nodes[I-1]}rangeBy(I={}){let z="document"in this.source.input?this.source.input.document:this.source.input.css,H={column:this.source.start.column,line:this.source.start.line,offset:T(z,this.source.start)},Y=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:T(z,this.source.end)+1}:{column:H.column+1,line:H.line,offset:H.offset+1};if(I.word){let ie=z.slice(T(z,this.source.start),T(z,this.source.end)).indexOf(I.word);ie!==-1&&(H=this.positionInside(ie),Y=this.positionInside(ie+I.word.length))}else I.start?H={column:I.start.column,line:I.start.line,offset:T(z,I.start)}:I.index&&(H=this.positionInside(I.index)),I.end?Y={column:I.end.column,line:I.end.line,offset:T(z,I.end)}:typeof I.endIndex=="number"?Y=this.positionInside(I.endIndex):I.index&&(Y=this.positionInside(I.index+1));return(Y.line<H.line||Y.line===H.line&&Y.column<=H.column)&&(Y={column:H.column+1,line:H.line,offset:H.offset+1}),{end:Y,start:H}}raw(I,z){return new d().raw(this,I,z)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...I){if(this.parent){let z=this,H=!1;for(let Y of I)Y===this?H=!0:H?(this.parent.insertAfter(z,Y),z=Y):this.parent.insertBefore(z,Y);H||this.remove()}return this}root(){let I=this;for(;I.parent&&I.parent.type!=="document";)I=I.parent;return I}toJSON(I,z){let H={},Y=z==null;z=z||new Map;let ee=0;for(let ie in this){if(!Object.prototype.hasOwnProperty.call(this,ie)||ie==="parent"||ie==="proxyCache")continue;let oe=this[ie];if(Array.isArray(oe))H[ie]=oe.map(se=>typeof se=="object"&&se.toJSON?se.toJSON(null,z):se);else if(typeof oe=="object"&&oe.toJSON)H[ie]=oe.toJSON(null,z);else if(ie==="source"){if(oe==null)continue;let se=z.get(oe.input);se==null&&(se=ee,z.set(oe.input,ee),ee++),H[ie]={end:oe.end,inputId:se,start:oe.start}}else H[ie]=oe}return Y&&(H.inputs=[...z.keys()].map(ie=>ie.toJSON())),H}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(I=v){I.stringify&&(I=I.stringify);let z="";return I(this,H=>{z+=H}),z}warn(I,z,H={}){let Y={node:this};for(let ee in H)Y[ee]=H[ee];return I.warn(z,Y)}}return node=R,R.default=R,node}var comment,hasRequiredComment;function requireComment(){if(hasRequiredComment)return comment;hasRequiredComment=1;let _=requireNode();class d extends _{constructor(A){super(A),this.type="comment"}}return comment=d,d.default=d,comment}var declaration,hasRequiredDeclaration;function requireDeclaration(){if(hasRequiredDeclaration)return declaration;hasRequiredDeclaration=1;let _=requireNode();class d extends _{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(A){A&&typeof A.value<"u"&&typeof A.value!="string"&&(A={...A,value:String(A.value)}),super(A),this.type="decl"}}return declaration=d,d.default=d,declaration}var container,hasRequiredContainer;function requireContainer(){if(hasRequiredContainer)return container;hasRequiredContainer=1;let _=requireComment(),d=requireDeclaration(),v=requireNode(),{isClean:A,my:C}=requireSymbols(),w,T,R,G;function I(Y){return Y.map(ee=>(ee.nodes&&(ee.nodes=I(ee.nodes)),delete ee.source,ee))}function z(Y){if(Y[A]=!1,Y.proxyOf.nodes)for(let ee of Y.proxyOf.nodes)z(ee)}class H extends v{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...ee){for(let ie of ee){let oe=this.normalize(ie,this.last);for(let se of oe)this.proxyOf.nodes.push(se)}return this.markDirty(),this}cleanRaws(ee){if(super.cleanRaws(ee),this.nodes)for(let ie of this.nodes)ie.cleanRaws(ee)}each(ee){if(!this.proxyOf.nodes)return;let ie=this.getIterator(),oe,se;for(;this.indexes[ie]<this.proxyOf.nodes.length&&(oe=this.indexes[ie],se=ee(this.proxyOf.nodes[oe],oe),se!==!1);)this.indexes[ie]+=1;return delete this.indexes[ie],se}every(ee){return this.nodes.every(ee)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let ee=this.lastEach;return this.indexes[ee]=0,ee}getProxyProcessor(){return{get(ee,ie){return ie==="proxyOf"?ee:ee[ie]?ie==="each"||typeof ie=="string"&&ie.startsWith("walk")?(...oe)=>ee[ie](...oe.map(se=>typeof se=="function"?(re,fe)=>se(re.toProxy(),fe):se)):ie==="every"||ie==="some"?oe=>ee[ie]((se,...re)=>oe(se.toProxy(),...re)):ie==="root"?()=>ee.root().toProxy():ie==="nodes"?ee.nodes.map(oe=>oe.toProxy()):ie==="first"||ie==="last"?ee[ie].toProxy():ee[ie]:ee[ie]},set(ee,ie,oe){return ee[ie]===oe||(ee[ie]=oe,(ie==="name"||ie==="params"||ie==="selector")&&ee.markDirty()),!0}}}index(ee){return typeof ee=="number"?ee:(ee.proxyOf&&(ee=ee.proxyOf),this.proxyOf.nodes.indexOf(ee))}insertAfter(ee,ie){let oe=this.index(ee),se=this.normalize(ie,this.proxyOf.nodes[oe]).reverse();oe=this.index(ee);for(let fe of se)this.proxyOf.nodes.splice(oe+1,0,fe);let re;for(let fe in this.indexes)re=this.indexes[fe],oe<re&&(this.indexes[fe]=re+se.length);return this.markDirty(),this}insertBefore(ee,ie){let oe=this.index(ee),se=oe===0?"prepend":!1,re=this.normalize(ie,this.proxyOf.nodes[oe],se).reverse();oe=this.index(ee);for(let ue of re)this.proxyOf.nodes.splice(oe,0,ue);let fe;for(let ue in this.indexes)fe=this.indexes[ue],oe<=fe&&(this.indexes[ue]=fe+re.length);return this.markDirty(),this}normalize(ee,ie){if(typeof ee=="string")ee=I(T(ee).nodes);else if(typeof ee>"u")ee=[];else if(Array.isArray(ee)){ee=ee.slice(0);for(let se of ee)se.parent&&se.parent.removeChild(se,"ignore")}else if(ee.type==="root"&&this.type!=="document"){ee=ee.nodes.slice(0);for(let se of ee)se.parent&&se.parent.removeChild(se,"ignore")}else if(ee.type)ee=[ee];else if(ee.prop){if(typeof ee.value>"u")throw new Error("Value field is missed in node creation");typeof ee.value!="string"&&(ee.value=String(ee.value)),ee=[new d(ee)]}else if(ee.selector||ee.selectors)ee=[new G(ee)];else if(ee.name)ee=[new w(ee)];else if(ee.text)ee=[new _(ee)];else throw new Error("Unknown node type in node creation");return ee.map(se=>(se[C]||H.rebuild(se),se=se.proxyOf,se.parent&&se.parent.removeChild(se),se[A]&&z(se),se.raws||(se.raws={}),typeof se.raws.before>"u"&&ie&&typeof ie.raws.before<"u"&&(se.raws.before=ie.raws.before.replace(/\S/g,"")),se.parent=this.proxyOf,se))}prepend(...ee){ee=ee.reverse();for(let ie of ee){let oe=this.normalize(ie,this.first,"prepend").reverse();for(let se of oe)this.proxyOf.nodes.unshift(se);for(let se in this.indexes)this.indexes[se]=this.indexes[se]+oe.length}return this.markDirty(),this}push(ee){return ee.parent=this,this.proxyOf.nodes.push(ee),this}removeAll(){for(let ee of this.proxyOf.nodes)ee.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(ee){ee=this.index(ee),this.proxyOf.nodes[ee].parent=void 0,this.proxyOf.nodes.splice(ee,1);let ie;for(let oe in this.indexes)ie=this.indexes[oe],ie>=ee&&(this.indexes[oe]=ie-1);return this.markDirty(),this}replaceValues(ee,ie,oe){return oe||(oe=ie,ie={}),this.walkDecls(se=>{ie.props&&!ie.props.includes(se.prop)||ie.fast&&!se.value.includes(ie.fast)||(se.value=se.value.replace(ee,oe))}),this.markDirty(),this}some(ee){return this.nodes.some(ee)}walk(ee){return this.each((ie,oe)=>{let se;try{se=ee(ie,oe)}catch(re){throw ie.addToError(re)}return se!==!1&&ie.walk&&(se=ie.walk(ee)),se})}walkAtRules(ee,ie){return ie?ee instanceof RegExp?this.walk((oe,se)=>{if(oe.type==="atrule"&&ee.test(oe.name))return ie(oe,se)}):this.walk((oe,se)=>{if(oe.type==="atrule"&&oe.name===ee)return ie(oe,se)}):(ie=ee,this.walk((oe,se)=>{if(oe.type==="atrule")return ie(oe,se)}))}walkComments(ee){return this.walk((ie,oe)=>{if(ie.type==="comment")return ee(ie,oe)})}walkDecls(ee,ie){return ie?ee instanceof RegExp?this.walk((oe,se)=>{if(oe.type==="decl"&&ee.test(oe.prop))return ie(oe,se)}):this.walk((oe,se)=>{if(oe.type==="decl"&&oe.prop===ee)return ie(oe,se)}):(ie=ee,this.walk((oe,se)=>{if(oe.type==="decl")return ie(oe,se)}))}walkRules(ee,ie){return ie?ee instanceof RegExp?this.walk((oe,se)=>{if(oe.type==="rule"&&ee.test(oe.selector))return ie(oe,se)}):this.walk((oe,se)=>{if(oe.type==="rule"&&oe.selector===ee)return ie(oe,se)}):(ie=ee,this.walk((oe,se)=>{if(oe.type==="rule")return ie(oe,se)}))}}return H.registerParse=Y=>{T=Y},H.registerRule=Y=>{G=Y},H.registerAtRule=Y=>{w=Y},H.registerRoot=Y=>{R=Y},container=H,H.default=H,H.rebuild=Y=>{Y.type==="atrule"?Object.setPrototypeOf(Y,w.prototype):Y.type==="rule"?Object.setPrototypeOf(Y,G.prototype):Y.type==="decl"?Object.setPrototypeOf(Y,d.prototype):Y.type==="comment"?Object.setPrototypeOf(Y,_.prototype):Y.type==="root"&&Object.setPrototypeOf(Y,R.prototype),Y[C]=!0,Y.nodes&&Y.nodes.forEach(ee=>{H.rebuild(ee)})},container}var atRule,hasRequiredAtRule;function requireAtRule(){if(hasRequiredAtRule)return atRule;hasRequiredAtRule=1;let _=requireContainer();class d extends _{constructor(A){super(A),this.type="atrule"}append(...A){return this.proxyOf.nodes||(this.nodes=[]),super.append(...A)}prepend(...A){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...A)}}return atRule=d,d.default=d,_.registerAtRule(d),atRule}var document$1,hasRequiredDocument;function requireDocument(){if(hasRequiredDocument)return document$1;hasRequiredDocument=1;let _=requireContainer(),d,v;class A extends _{constructor(w){super({type:"document",...w}),this.nodes||(this.nodes=[])}toResult(w={}){return new d(new v,this,w).stringify()}}return A.registerLazyResult=C=>{d=C},A.registerProcessor=C=>{v=C},document$1=A,A.default=A,document$1}var nonSecure,hasRequiredNonSecure;function requireNonSecure(){if(hasRequiredNonSecure)return nonSecure;hasRequiredNonSecure=1;let _="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return nonSecure={nanoid:(A=21)=>{let C="",w=A|0;for(;w--;)C+=_[Math.random()*64|0];return C},customAlphabet:(A,C=21)=>(w=C)=>{let T="",R=w|0;for(;R--;)T+=A[Math.random()*A.length|0];return T}},nonSecure}var previousMap,hasRequiredPreviousMap;function requirePreviousMap(){if(hasRequiredPreviousMap)return previousMap;hasRequiredPreviousMap=1;let{existsSync:_,readFileSync:d}=require$$2,{dirname:v,join:A}=require$$2,{SourceMapConsumer:C,SourceMapGenerator:w}=require$$2;function T(G){return Buffer?Buffer.from(G,"base64").toString():window.atob(G)}class R{constructor(I,z){if(z.map===!1)return;this.loadAnnotation(I),this.inline=this.startWith(this.annotation,"data:");let H=z.map?z.map.prev:void 0,Y=this.loadMap(z.from,H);!this.mapFile&&z.from&&(this.mapFile=z.from),this.mapFile&&(this.root=v(this.mapFile)),Y&&(this.text=Y)}consumer(){return this.consumerCache||(this.consumerCache=new C(this.text)),this.consumerCache}decodeInline(I){let z=/^data:application\/json;charset=utf-?8;base64,/,H=/^data:application\/json;base64,/,Y=/^data:application\/json;charset=utf-?8,/,ee=/^data:application\/json,/,ie=I.match(Y)||I.match(ee);if(ie)return decodeURIComponent(I.substr(ie[0].length));let oe=I.match(z)||I.match(H);if(oe)return T(I.substr(oe[0].length));let se=I.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+se)}getAnnotationURL(I){return I.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(I){return typeof I!="object"?!1:typeof I.mappings=="string"||typeof I._mappings=="string"||Array.isArray(I.sections)}loadAnnotation(I){let z=I.match(/\/\*\s*# sourceMappingURL=/g);if(!z)return;let H=I.lastIndexOf(z.pop()),Y=I.indexOf("*/",H);H>-1&&Y>-1&&(this.annotation=this.getAnnotationURL(I.substring(H,Y)))}loadFile(I){if(this.root=v(I),_(I))return this.mapFile=I,d(I,"utf-8").toString().trim()}loadMap(I,z){if(z===!1)return!1;if(z){if(typeof z=="string")return z;if(typeof z=="function"){let H=z(I);if(H){let Y=this.loadFile(H);if(!Y)throw new Error("Unable to load previous source map: "+H.toString());return Y}}else{if(z instanceof C)return w.fromSourceMap(z).toString();if(z instanceof w)return z.toString();if(this.isMap(z))return JSON.stringify(z);throw new Error("Unsupported previous source map format: "+z.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let H=this.annotation;return I&&(H=A(v(I),H)),this.loadFile(H)}}}startWith(I,z){return I?I.substr(0,z.length)===z:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return previousMap=R,R.default=R,previousMap}var input,hasRequiredInput;function requireInput(){if(hasRequiredInput)return input;hasRequiredInput=1;let{nanoid:_}=requireNonSecure(),{isAbsolute:d,resolve:v}=require$$2,{SourceMapConsumer:A,SourceMapGenerator:C}=require$$2,{fileURLToPath:w,pathToFileURL:T}=require$$2,R=requireCssSyntaxError(),G=requirePreviousMap(),I=require$$2,z=Symbol("lineToIndexCache"),H=!!(A&&C),Y=!!(v&&d);function ee(oe){if(oe[z])return oe[z];let se=oe.css.split(`
`),re=new Array(se.length),fe=0;for(let ue=0,ge=se.length;ue<ge;ue++)re[ue]=fe,fe+=se[ue].length+1;return oe[z]=re,re}class ie{get from(){return this.file||this.id}constructor(se,re={}){if(se===null||typeof se>"u"||typeof se=="object"&&!se.toString)throw new Error(`PostCSS received ${se} instead of CSS string`);if(this.css=se.toString(),this.css[0]==="\uFEFF"||this.css[0]===""?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,re.document&&(this.document=re.document.toString()),re.from&&(!Y||/^\w+:\/\//.test(re.from)||d(re.from)?this.file=re.from:this.file=v(re.from)),Y&&H){let fe=new G(this.css,re);if(fe.text){this.map=fe;let ue=fe.consumer().file;!this.file&&ue&&(this.file=this.mapResolve(ue))}}this.file||(this.id="<input css "+_(6)+">"),this.map&&(this.map.file=this.from)}error(se,re,fe,ue={}){let ge,ye,be,ve,Me;if(re&&typeof re=="object"){let Be=re,De=fe;if(typeof Be.offset=="number"){ve=Be.offset;let Fe=this.fromOffset(ve);re=Fe.line,fe=Fe.col}else re=Be.line,fe=Be.column,ve=this.fromLineAndColumn(re,fe);if(typeof De.offset=="number"){be=De.offset;let Fe=this.fromOffset(be);ye=Fe.line,ge=Fe.col}else ye=De.line,ge=De.column,be=this.fromLineAndColumn(De.line,De.column)}else if(fe)ve=this.fromLineAndColumn(re,fe);else{ve=re;let Be=this.fromOffset(ve);re=Be.line,fe=Be.col}let we=this.origin(re,fe,ye,ge);return we?Me=new R(se,we.endLine===void 0?we.line:{column:we.column,line:we.line},we.endLine===void 0?we.column:{column:we.endColumn,line:we.endLine},we.source,we.file,ue.plugin):Me=new R(se,ye===void 0?re:{column:fe,line:re},ye===void 0?fe:{column:ge,line:ye},this.css,this.file,ue.plugin),Me.input={column:fe,endColumn:ge,endLine:ye,endOffset:be,line:re,offset:ve,source:this.css},this.file&&(T&&(Me.input.url=T(this.file).toString()),Me.input.file=this.file),Me}fromLineAndColumn(se,re){return ee(this)[se-1]+re-1}fromOffset(se){let re=ee(this),fe=re[re.length-1],ue=0;if(se>=fe)ue=re.length-1;else{let ge=re.length-2,ye;for(;ue<ge;)if(ye=ue+(ge-ue>>1),se<re[ye])ge=ye-1;else if(se>=re[ye+1])ue=ye+1;else{ue=ye;break}}return{col:se-re[ue]+1,line:ue+1}}mapResolve(se){return/^\w+:\/\//.test(se)?se:v(this.map.consumer().sourceRoot||this.map.root||".",se)}origin(se,re,fe,ue){if(!this.map)return!1;let ge=this.map.consumer(),ye=ge.originalPositionFor({column:re,line:se});if(!ye.source)return!1;let be;typeof fe=="number"&&(be=ge.originalPositionFor({column:ue,line:fe}));let ve;d(ye.source)?ve=T(ye.source):ve=new URL(ye.source,this.map.consumer().sourceRoot||T(this.map.mapFile));let Me={column:ye.column,endColumn:be&&be.column,endLine:be&&be.line,line:ye.line,url:ve.toString()};if(ve.protocol==="file:")if(w)Me.file=w(ve);else throw new Error("file: protocol is not available in this PostCSS build");let we=ge.sourceContentFor(ye.source);return we&&(Me.source=we),Me}toJSON(){let se={};for(let re of["hasBOM","css","file","id"])this[re]!=null&&(se[re]=this[re]);return this.map&&(se.map={...this.map},se.map.consumerCache&&(se.map.consumerCache=void 0)),se}}return input=ie,ie.default=ie,I&&I.registerInput&&I.registerInput(ie),input}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1;let _=requireContainer(),d,v;class A extends _{constructor(w){super(w),this.type="root",this.nodes||(this.nodes=[])}normalize(w,T,R){let G=super.normalize(w);if(T){if(R==="prepend")this.nodes.length>1?T.raws.before=this.nodes[1].raws.before:delete T.raws.before;else if(this.first!==T)for(let I of G)I.raws.before=T.raws.before}return G}removeChild(w,T){let R=this.index(w);return!T&&R===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[R].raws.before),super.removeChild(w)}toResult(w={}){return new d(new v,this,w).stringify()}}return A.registerLazyResult=C=>{d=C},A.registerProcessor=C=>{v=C},root=A,A.default=A,_.registerRoot(A),root}var list_1,hasRequiredList;function requireList(){if(hasRequiredList)return list_1;hasRequiredList=1;let _={comma(d){return _.split(d,[","],!0)},space(d){let v=[" ",`
`,"	"];return _.split(d,v)},split(d,v,A){let C=[],w="",T=!1,R=0,G=!1,I="",z=!1;for(let H of d)z?z=!1:H==="\\"?z=!0:G?H===I&&(G=!1):H==='"'||H==="'"?(G=!0,I=H):H==="("?R+=1:H===")"?R>0&&(R-=1):R===0&&v.includes(H)&&(T=!0),T?(w!==""&&C.push(w.trim()),w="",T=!1):w+=H;return(A||w!=="")&&C.push(w.trim()),C}};return list_1=_,_.default=_,list_1}var rule,hasRequiredRule;function requireRule(){if(hasRequiredRule)return rule;hasRequiredRule=1;let _=requireContainer(),d=requireList();class v extends _{get selectors(){return d.comma(this.selector)}set selectors(C){let w=this.selector?this.selector.match(/,\s*/):null,T=w?w[0]:","+this.raw("between","beforeOpen");this.selector=C.join(T)}constructor(C){super(C),this.type="rule",this.nodes||(this.nodes=[])}}return rule=v,v.default=v,_.registerRule(v),rule}var fromJSON_1,hasRequiredFromJSON;function requireFromJSON(){if(hasRequiredFromJSON)return fromJSON_1;hasRequiredFromJSON=1;let _=requireAtRule(),d=requireComment(),v=requireDeclaration(),A=requireInput(),C=requirePreviousMap(),w=requireRoot(),T=requireRule();function R(G,I){if(Array.isArray(G))return G.map(Y=>R(Y));let{inputs:z,...H}=G;if(z){I=[];for(let Y of z){let ee={...Y,__proto__:A.prototype};ee.map&&(ee.map={...ee.map,__proto__:C.prototype}),I.push(ee)}}if(H.nodes&&(H.nodes=G.nodes.map(Y=>R(Y,I))),H.source){let{inputId:Y,...ee}=H.source;H.source=ee,Y!=null&&(H.source.input=I[Y])}if(H.type==="root")return new w(H);if(H.type==="decl")return new v(H);if(H.type==="rule")return new T(H);if(H.type==="comment")return new d(H);if(H.type==="atrule")return new _(H);throw new Error("Unknown node type: "+G.type)}return fromJSON_1=R,R.default=R,fromJSON_1}var mapGenerator,hasRequiredMapGenerator;function requireMapGenerator(){if(hasRequiredMapGenerator)return mapGenerator;hasRequiredMapGenerator=1;let{dirname:_,relative:d,resolve:v,sep:A}=require$$2,{SourceMapConsumer:C,SourceMapGenerator:w}=require$$2,{pathToFileURL:T}=require$$2,R=requireInput(),G=!!(C&&w),I=!!(_&&v&&d&&A);class z{constructor(Y,ee,ie,oe){this.stringify=Y,this.mapOpts=ie.map||{},this.root=ee,this.opts=ie,this.css=oe,this.originalCSS=oe,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let Y;this.isInline()?Y="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?Y=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?Y=this.mapOpts.annotation(this.opts.to,this.root):Y=this.outputFile()+".map";let ee=`
`;this.css.includes(`\r
`)&&(ee=`\r
`),this.css+=ee+"/*# sourceMappingURL="+Y+" */"}applyPrevMaps(){for(let Y of this.previous()){let ee=this.toUrl(this.path(Y.file)),ie=Y.root||_(Y.file),oe;this.mapOpts.sourcesContent===!1?(oe=new C(Y.text),oe.sourcesContent&&(oe.sourcesContent=null)):oe=Y.consumer(),this.map.applySourceMap(oe,ee,this.toUrl(this.path(ie)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let Y;for(let ee=this.root.nodes.length-1;ee>=0;ee--)Y=this.root.nodes[ee],Y.type==="comment"&&Y.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(ee)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),I&&G&&this.isMap())return this.generateMap();{let Y="";return this.stringify(this.root,ee=>{Y+=ee}),[Y]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let Y=this.previous()[0].consumer();Y.file=this.outputFile(),this.map=w.fromSourceMap(Y,{ignoreInvalidMapping:!0})}else this.map=new w({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new w({file:this.outputFile(),ignoreInvalidMapping:!0});let Y=1,ee=1,ie="<no source>",oe={generated:{column:0,line:0},original:{column:0,line:0},source:""},se,re;this.stringify(this.root,(fe,ue,ge)=>{if(this.css+=fe,ue&&ge!=="end"&&(oe.generated.line=Y,oe.generated.column=ee-1,ue.source&&ue.source.start?(oe.source=this.sourcePath(ue),oe.original.line=ue.source.start.line,oe.original.column=ue.source.start.column-1,this.map.addMapping(oe)):(oe.source=ie,oe.original.line=1,oe.original.column=0,this.map.addMapping(oe))),re=fe.match(/\n/g),re?(Y+=re.length,se=fe.lastIndexOf(`
`),ee=fe.length-se):ee+=fe.length,ue&&ge!=="start"){let ye=ue.parent||{raws:{}};(!(ue.type==="decl"||ue.type==="atrule"&&!ue.nodes)||ue!==ye.last||ye.raws.semicolon)&&(ue.source&&ue.source.end?(oe.source=this.sourcePath(ue),oe.original.line=ue.source.end.line,oe.original.column=ue.source.end.column-1,oe.generated.line=Y,oe.generated.column=ee-2,this.map.addMapping(oe)):(oe.source=ie,oe.original.line=1,oe.original.column=0,oe.generated.line=Y,oe.generated.column=ee-1,this.map.addMapping(oe)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(Y=>Y.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let Y=this.mapOpts.annotation;return typeof Y<"u"&&Y!==!0?!1:this.previous().length?this.previous().some(ee=>ee.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(Y=>Y.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(Y){if(this.mapOpts.absolute||Y.charCodeAt(0)===60||/^\w+:\/\//.test(Y))return Y;let ee=this.memoizedPaths.get(Y);if(ee)return ee;let ie=this.opts.to?_(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(ie=_(v(ie,this.mapOpts.annotation)));let oe=d(ie,Y);return this.memoizedPaths.set(Y,oe),oe}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(Y=>{if(Y.source&&Y.source.input.map){let ee=Y.source.input.map;this.previousMaps.includes(ee)||this.previousMaps.push(ee)}});else{let Y=new R(this.originalCSS,this.opts);Y.map&&this.previousMaps.push(Y.map)}return this.previousMaps}setSourcesContent(){let Y={};if(this.root)this.root.walk(ee=>{if(ee.source){let ie=ee.source.input.from;if(ie&&!Y[ie]){Y[ie]=!0;let oe=this.usesFileUrls?this.toFileUrl(ie):this.toUrl(this.path(ie));this.map.setSourceContent(oe,ee.source.input.css)}}});else if(this.css){let ee=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(ee,this.css)}}sourcePath(Y){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(Y.source.input.from):this.toUrl(this.path(Y.source.input.from))}toBase64(Y){return Buffer?Buffer.from(Y).toString("base64"):window.btoa(unescape(encodeURIComponent(Y)))}toFileUrl(Y){let ee=this.memoizedFileURLs.get(Y);if(ee)return ee;if(T){let ie=T(Y).toString();return this.memoizedFileURLs.set(Y,ie),ie}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(Y){let ee=this.memoizedURLs.get(Y);if(ee)return ee;A==="\\"&&(Y=Y.replace(/\\/g,"/"));let ie=encodeURI(Y).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(Y,ie),ie}}return mapGenerator=z,mapGenerator}var tokenize,hasRequiredTokenize;function requireTokenize(){if(hasRequiredTokenize)return tokenize;hasRequiredTokenize=1;const _=39,d=34,v=92,A=47,C=10,w=32,T=12,R=9,G=13,I=91,z=93,H=40,Y=41,ee=123,ie=125,oe=59,se=42,re=58,fe=64,ue=/[\t\n\f\r "#'()/;[\\\]{}]/g,ge=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,ye=/.[\r\n"'(/\\]/,be=/[\da-f]/i;return tokenize=function(Me,we={}){let Be=Me.css.valueOf(),De=we.ignoreErrors,Fe,Oe,Ge,ze,je,He,Xe,$e,We,nt,Qt=Be.length,Wt=0,Bn=[],Lt=[];function Mn(){return Wt}function cr(Rn){throw Me.error("Unclosed "+Rn,Wt)}function In(){return Lt.length===0&&Wt>=Qt}function Zn(Rn){if(Lt.length)return Lt.pop();if(Wt>=Qt)return;let Dn=Rn?Rn.ignoreUnclosed:!1;switch(Fe=Be.charCodeAt(Wt),Fe){case C:case w:case R:case G:case T:{ze=Wt;do ze+=1,Fe=Be.charCodeAt(ze);while(Fe===w||Fe===C||Fe===R||Fe===G||Fe===T);He=["space",Be.slice(Wt,ze)],Wt=ze-1;break}case I:case z:case ee:case ie:case re:case oe:case Y:{let Gt=String.fromCharCode(Fe);He=[Gt,Gt,Wt];break}case H:{if(nt=Bn.length?Bn.pop()[1]:"",We=Be.charCodeAt(Wt+1),nt==="url"&&We!==_&&We!==d&&We!==w&&We!==C&&We!==R&&We!==T&&We!==G){ze=Wt;do{if(Xe=!1,ze=Be.indexOf(")",ze+1),ze===-1)if(De||Dn){ze=Wt;break}else cr("bracket");for($e=ze;Be.charCodeAt($e-1)===v;)$e-=1,Xe=!Xe}while(Xe);He=["brackets",Be.slice(Wt,ze+1),Wt,ze],Wt=ze}else ze=Be.indexOf(")",Wt+1),Oe=Be.slice(Wt,ze+1),ze===-1||ye.test(Oe)?He=["(","(",Wt]:(He=["brackets",Oe,Wt,ze],Wt=ze);break}case _:case d:{je=Fe===_?"'":'"',ze=Wt;do{if(Xe=!1,ze=Be.indexOf(je,ze+1),ze===-1)if(De||Dn){ze=Wt+1;break}else cr("string");for($e=ze;Be.charCodeAt($e-1)===v;)$e-=1,Xe=!Xe}while(Xe);He=["string",Be.slice(Wt,ze+1),Wt,ze],Wt=ze;break}case fe:{ue.lastIndex=Wt+1,ue.test(Be),ue.lastIndex===0?ze=Be.length-1:ze=ue.lastIndex-2,He=["at-word",Be.slice(Wt,ze+1),Wt,ze],Wt=ze;break}case v:{for(ze=Wt,Ge=!0;Be.charCodeAt(ze+1)===v;)ze+=1,Ge=!Ge;if(Fe=Be.charCodeAt(ze+1),Ge&&Fe!==A&&Fe!==w&&Fe!==C&&Fe!==R&&Fe!==G&&Fe!==T&&(ze+=1,be.test(Be.charAt(ze)))){for(;be.test(Be.charAt(ze+1));)ze+=1;Be.charCodeAt(ze+1)===w&&(ze+=1)}He=["word",Be.slice(Wt,ze+1),Wt,ze],Wt=ze;break}default:{Fe===A&&Be.charCodeAt(Wt+1)===se?(ze=Be.indexOf("*/",Wt+2)+1,ze===0&&(De||Dn?ze=Be.length:cr("comment")),He=["comment",Be.slice(Wt,ze+1),Wt,ze],Wt=ze):(ge.lastIndex=Wt+1,ge.test(Be),ge.lastIndex===0?ze=Be.length-1:ze=ge.lastIndex-2,He=["word",Be.slice(Wt,ze+1),Wt,ze],Bn.push(He),Wt=ze);break}}return Wt++,He}function $n(Rn){Lt.push(Rn)}return{back:$n,endOfFile:In,nextToken:Zn,position:Mn}},tokenize}var parser,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;let _=requireAtRule(),d=requireComment(),v=requireDeclaration(),A=requireRoot(),C=requireRule(),w=requireTokenize();const T={empty:!0,space:!0};function R(I){for(let z=I.length-1;z>=0;z--){let H=I[z],Y=H[3]||H[2];if(Y)return Y}}class G{constructor(z){this.input=z,this.root=new A,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:z,start:{column:1,line:1,offset:0}}}atrule(z){let H=new _;H.name=z[1].slice(1),H.name===""&&this.unnamedAtrule(H,z),this.init(H,z[2]);let Y,ee,ie,oe=!1,se=!1,re=[],fe=[];for(;!this.tokenizer.endOfFile();){if(z=this.tokenizer.nextToken(),Y=z[0],Y==="("||Y==="["?fe.push(Y==="("?")":"]"):Y==="{"&&fe.length>0?fe.push("}"):Y===fe[fe.length-1]&&fe.pop(),fe.length===0)if(Y===";"){H.source.end=this.getPosition(z[2]),H.source.end.offset++,this.semicolon=!0;break}else if(Y==="{"){se=!0;break}else if(Y==="}"){if(re.length>0){for(ie=re.length-1,ee=re[ie];ee&&ee[0]==="space";)ee=re[--ie];ee&&(H.source.end=this.getPosition(ee[3]||ee[2]),H.source.end.offset++)}this.end(z);break}else re.push(z);else re.push(z);if(this.tokenizer.endOfFile()){oe=!0;break}}H.raws.between=this.spacesAndCommentsFromEnd(re),re.length?(H.raws.afterName=this.spacesAndCommentsFromStart(re),this.raw(H,"params",re),oe&&(z=re[re.length-1],H.source.end=this.getPosition(z[3]||z[2]),H.source.end.offset++,this.spaces=H.raws.between,H.raws.between="")):(H.raws.afterName="",H.params=""),se&&(H.nodes=[],this.current=H)}checkMissedSemicolon(z){let H=this.colon(z);if(H===!1)return;let Y=0,ee;for(let ie=H-1;ie>=0&&(ee=z[ie],!(ee[0]!=="space"&&(Y+=1,Y===2)));ie--);throw this.input.error("Missed semicolon",ee[0]==="word"?ee[3]+1:ee[2])}colon(z){let H=0,Y,ee,ie;for(let[oe,se]of z.entries()){if(ee=se,ie=ee[0],ie==="("&&(H+=1),ie===")"&&(H-=1),H===0&&ie===":")if(!Y)this.doubleColon(ee);else{if(Y[0]==="word"&&Y[1]==="progid")continue;return oe}Y=ee}return!1}comment(z){let H=new d;this.init(H,z[2]),H.source.end=this.getPosition(z[3]||z[2]),H.source.end.offset++;let Y=z[1].slice(2,-2);if(/^\s*$/.test(Y))H.text="",H.raws.left=Y,H.raws.right="";else{let ee=Y.match(/^(\s*)([^]*\S)(\s*)$/);H.text=ee[2],H.raws.left=ee[1],H.raws.right=ee[3]}}createTokenizer(){this.tokenizer=w(this.input)}decl(z,H){let Y=new v;this.init(Y,z[0][2]);let ee=z[z.length-1];for(ee[0]===";"&&(this.semicolon=!0,z.pop()),Y.source.end=this.getPosition(ee[3]||ee[2]||R(z)),Y.source.end.offset++;z[0][0]!=="word";)z.length===1&&this.unknownWord(z),Y.raws.before+=z.shift()[1];for(Y.source.start=this.getPosition(z[0][2]),Y.prop="";z.length;){let fe=z[0][0];if(fe===":"||fe==="space"||fe==="comment")break;Y.prop+=z.shift()[1]}Y.raws.between="";let ie;for(;z.length;)if(ie=z.shift(),ie[0]===":"){Y.raws.between+=ie[1];break}else ie[0]==="word"&&/\w/.test(ie[1])&&this.unknownWord([ie]),Y.raws.between+=ie[1];(Y.prop[0]==="_"||Y.prop[0]==="*")&&(Y.raws.before+=Y.prop[0],Y.prop=Y.prop.slice(1));let oe=[],se;for(;z.length&&(se=z[0][0],!(se!=="space"&&se!=="comment"));)oe.push(z.shift());this.precheckMissedSemicolon(z);for(let fe=z.length-1;fe>=0;fe--){if(ie=z[fe],ie[1].toLowerCase()==="!important"){Y.important=!0;let ue=this.stringFrom(z,fe);ue=this.spacesFromEnd(z)+ue,ue!==" !important"&&(Y.raws.important=ue);break}else if(ie[1].toLowerCase()==="important"){let ue=z.slice(0),ge="";for(let ye=fe;ye>0;ye--){let be=ue[ye][0];if(ge.trim().startsWith("!")&&be!=="space")break;ge=ue.pop()[1]+ge}ge.trim().startsWith("!")&&(Y.important=!0,Y.raws.important=ge,z=ue)}if(ie[0]!=="space"&&ie[0]!=="comment")break}z.some(fe=>fe[0]!=="space"&&fe[0]!=="comment")&&(Y.raws.between+=oe.map(fe=>fe[1]).join(""),oe=[]),this.raw(Y,"value",oe.concat(z),H),Y.value.includes(":")&&!H&&this.checkMissedSemicolon(z)}doubleColon(z){throw this.input.error("Double colon",{offset:z[2]},{offset:z[2]+z[1].length})}emptyRule(z){let H=new C;this.init(H,z[2]),H.selector="",H.raws.between="",this.current=H}end(z){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(z[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(z)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(z){if(this.spaces+=z[1],this.current.nodes){let H=this.current.nodes[this.current.nodes.length-1];H&&H.type==="rule"&&!H.raws.ownSemicolon&&(H.raws.ownSemicolon=this.spaces,this.spaces="",H.source.end=this.getPosition(z[2]),H.source.end.offset+=H.raws.ownSemicolon.length)}}getPosition(z){let H=this.input.fromOffset(z);return{column:H.col,line:H.line,offset:z}}init(z,H){this.current.push(z),z.source={input:this.input,start:this.getPosition(H)},z.raws.before=this.spaces,this.spaces="",z.type!=="comment"&&(this.semicolon=!1)}other(z){let H=!1,Y=null,ee=!1,ie=null,oe=[],se=z[1].startsWith("--"),re=[],fe=z;for(;fe;){if(Y=fe[0],re.push(fe),Y==="("||Y==="[")ie||(ie=fe),oe.push(Y==="("?")":"]");else if(se&&ee&&Y==="{")ie||(ie=fe),oe.push("}");else if(oe.length===0)if(Y===";")if(ee){this.decl(re,se);return}else break;else if(Y==="{"){this.rule(re);return}else if(Y==="}"){this.tokenizer.back(re.pop()),H=!0;break}else Y===":"&&(ee=!0);else Y===oe[oe.length-1]&&(oe.pop(),oe.length===0&&(ie=null));fe=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(H=!0),oe.length>0&&this.unclosedBracket(ie),H&&ee){if(!se)for(;re.length&&(fe=re[re.length-1][0],!(fe!=="space"&&fe!=="comment"));)this.tokenizer.back(re.pop());this.decl(re,se)}else this.unknownWord(re)}parse(){let z;for(;!this.tokenizer.endOfFile();)switch(z=this.tokenizer.nextToken(),z[0]){case"space":this.spaces+=z[1];break;case";":this.freeSemicolon(z);break;case"}":this.end(z);break;case"comment":this.comment(z);break;case"at-word":this.atrule(z);break;case"{":this.emptyRule(z);break;default:this.other(z);break}this.endFile()}precheckMissedSemicolon(){}raw(z,H,Y,ee){let ie,oe,se=Y.length,re="",fe=!0,ue,ge;for(let ye=0;ye<se;ye+=1)ie=Y[ye],oe=ie[0],oe==="space"&&ye===se-1&&!ee?fe=!1:oe==="comment"?(ge=Y[ye-1]?Y[ye-1][0]:"empty",ue=Y[ye+1]?Y[ye+1][0]:"empty",!T[ge]&&!T[ue]?re.slice(-1)===","?fe=!1:re+=ie[1]:fe=!1):re+=ie[1];if(!fe){let ye=Y.reduce((be,ve)=>be+ve[1],"");z.raws[H]={raw:ye,value:re}}z[H]=re}rule(z){z.pop();let H=new C;this.init(H,z[0][2]),H.raws.between=this.spacesAndCommentsFromEnd(z),this.raw(H,"selector",z),this.current=H}spacesAndCommentsFromEnd(z){let H,Y="";for(;z.length&&(H=z[z.length-1][0],!(H!=="space"&&H!=="comment"));)Y=z.pop()[1]+Y;return Y}spacesAndCommentsFromStart(z){let H,Y="";for(;z.length&&(H=z[0][0],!(H!=="space"&&H!=="comment"));)Y+=z.shift()[1];return Y}spacesFromEnd(z){let H,Y="";for(;z.length&&(H=z[z.length-1][0],H==="space");)Y=z.pop()[1]+Y;return Y}stringFrom(z,H){let Y="";for(let ee=H;ee<z.length;ee++)Y+=z[ee][1];return z.splice(H,z.length-H),Y}unclosedBlock(){let z=this.current.source.start;throw this.input.error("Unclosed block",z.line,z.column)}unclosedBracket(z){throw this.input.error("Unclosed bracket",{offset:z[2]},{offset:z[2]+1})}unexpectedClose(z){throw this.input.error("Unexpected }",{offset:z[2]},{offset:z[2]+1})}unknownWord(z){throw this.input.error("Unknown word "+z[0][1],{offset:z[0][2]},{offset:z[0][2]+z[0][1].length})}unnamedAtrule(z,H){throw this.input.error("At-rule without name",{offset:H[2]},{offset:H[2]+H[1].length})}}return parser=G,parser}var parse_1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1;let _=requireContainer(),d=requireInput(),v=requireParser();function A(C,w){let T=new d(C,w),R=new v(T);try{R.parse()}catch(G){throw G}return R.root}return parse_1=A,A.default=A,_.registerParse(A),parse_1}var warning,hasRequiredWarning;function requireWarning(){if(hasRequiredWarning)return warning;hasRequiredWarning=1;class _{constructor(v,A={}){if(this.type="warning",this.text=v,A.node&&A.node.source){let C=A.node.rangeBy(A);this.line=C.start.line,this.column=C.start.column,this.endLine=C.end.line,this.endColumn=C.end.column}for(let C in A)this[C]=A[C]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return warning=_,_.default=_,warning}var result,hasRequiredResult;function requireResult(){if(hasRequiredResult)return result;hasRequiredResult=1;let _=requireWarning();class d{get content(){return this.css}constructor(A,C,w){this.processor=A,this.messages=[],this.root=C,this.opts=w,this.css="",this.map=void 0}toString(){return this.css}warn(A,C={}){C.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(C.plugin=this.lastPlugin.postcssPlugin);let w=new _(A,C);return this.messages.push(w),w}warnings(){return this.messages.filter(A=>A.type==="warning")}}return result=d,d.default=d,result}var lazyResult,hasRequiredLazyResult;function requireLazyResult(){if(hasRequiredLazyResult)return lazyResult;hasRequiredLazyResult=1;let _=requireContainer(),d=requireDocument(),v=requireMapGenerator(),A=requireParse(),C=requireResult(),w=requireRoot(),T=requireStringify(),{isClean:R,my:G}=requireSymbols();const I={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},z={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},H={Once:!0,postcssPlugin:!0,prepare:!0},Y=0;function ee(ue){return typeof ue=="object"&&typeof ue.then=="function"}function ie(ue){let ge=!1,ye=I[ue.type];return ue.type==="decl"?ge=ue.prop.toLowerCase():ue.type==="atrule"&&(ge=ue.name.toLowerCase()),ge&&ue.append?[ye,ye+"-"+ge,Y,ye+"Exit",ye+"Exit-"+ge]:ge?[ye,ye+"-"+ge,ye+"Exit",ye+"Exit-"+ge]:ue.append?[ye,Y,ye+"Exit"]:[ye,ye+"Exit"]}function oe(ue){let ge;return ue.type==="document"?ge=["Document",Y,"DocumentExit"]:ue.type==="root"?ge=["Root",Y,"RootExit"]:ge=ie(ue),{eventIndex:0,events:ge,iterator:0,node:ue,visitorIndex:0,visitors:[]}}function se(ue){return ue[R]=!1,ue.nodes&&ue.nodes.forEach(ge=>se(ge)),ue}let re={};class fe{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(ge,ye,be){this.stringified=!1,this.processed=!1;let ve;if(typeof ye=="object"&&ye!==null&&(ye.type==="root"||ye.type==="document"))ve=se(ye);else if(ye instanceof fe||ye instanceof C)ve=se(ye.root),ye.map&&(typeof be.map>"u"&&(be.map={}),be.map.inline||(be.map.inline=!1),be.map.prev=ye.map);else{let Me=A;be.syntax&&(Me=be.syntax.parse),be.parser&&(Me=be.parser),Me.parse&&(Me=Me.parse);try{ve=Me(ye,be)}catch(we){this.processed=!0,this.error=we}ve&&!ve[G]&&_.rebuild(ve)}this.result=new C(ge,ve,be),this.helpers={...re,postcss:re,result:this.result},this.plugins=this.processor.plugins.map(Me=>typeof Me=="object"&&Me.prepare?{...Me,...Me.prepare(this.result)}:Me)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(ge){return this.async().catch(ge)}finally(ge){return this.async().then(ge,ge)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(ge,ye){let be=this.result.lastPlugin;try{ye&&ye.addToError(ge),this.error=ge,ge.name==="CssSyntaxError"&&!ge.plugin?(ge.plugin=be.postcssPlugin,ge.setMessage()):be.postcssVersion}catch(ve){console&&console.error&&console.error(ve)}return ge}prepareVisitors(){this.listeners={};let ge=(ye,be,ve)=>{this.listeners[be]||(this.listeners[be]=[]),this.listeners[be].push([ye,ve])};for(let ye of this.plugins)if(typeof ye=="object")for(let be in ye){if(!z[be]&&/^[A-Z]/.test(be))throw new Error(`Unknown event ${be} in ${ye.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!H[be])if(typeof ye[be]=="object")for(let ve in ye[be])ve==="*"?ge(ye,be,ye[be][ve]):ge(ye,be+"-"+ve.toLowerCase(),ye[be][ve]);else typeof ye[be]=="function"&&ge(ye,be,ye[be])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let ge=0;ge<this.plugins.length;ge++){let ye=this.plugins[ge],be=this.runOnRoot(ye);if(ee(be))try{await be}catch(ve){throw this.handleError(ve)}}if(this.prepareVisitors(),this.hasListener){let ge=this.result.root;for(;!ge[R];){ge[R]=!0;let ye=[oe(ge)];for(;ye.length>0;){let be=this.visitTick(ye);if(ee(be))try{await be}catch(ve){let Me=ye[ye.length-1].node;throw this.handleError(ve,Me)}}}if(this.listeners.OnceExit)for(let[ye,be]of this.listeners.OnceExit){this.result.lastPlugin=ye;try{if(ge.type==="document"){let ve=ge.nodes.map(Me=>be(Me,this.helpers));await Promise.all(ve)}else await be(ge,this.helpers)}catch(ve){throw this.handleError(ve)}}}return this.processed=!0,this.stringify()}runOnRoot(ge){this.result.lastPlugin=ge;try{if(typeof ge=="object"&&ge.Once){if(this.result.root.type==="document"){let ye=this.result.root.nodes.map(be=>ge.Once(be,this.helpers));return ee(ye[0])?Promise.all(ye):ye}return ge.Once(this.result.root,this.helpers)}else if(typeof ge=="function")return ge(this.result.root,this.result)}catch(ye){throw this.handleError(ye)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let ge=this.result.opts,ye=T;ge.syntax&&(ye=ge.syntax.stringify),ge.stringifier&&(ye=ge.stringifier),ye.stringify&&(ye=ye.stringify);let ve=new v(ye,this.result.root,this.result.opts).generate();return this.result.css=ve[0],this.result.map=ve[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let ge of this.plugins){let ye=this.runOnRoot(ge);if(ee(ye))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let ge=this.result.root;for(;!ge[R];)ge[R]=!0,this.walkSync(ge);if(this.listeners.OnceExit)if(ge.type==="document")for(let ye of ge.nodes)this.visitSync(this.listeners.OnceExit,ye);else this.visitSync(this.listeners.OnceExit,ge)}return this.result}then(ge,ye){return this.async().then(ge,ye)}toString(){return this.css}visitSync(ge,ye){for(let[be,ve]of ge){this.result.lastPlugin=be;let Me;try{Me=ve(ye,this.helpers)}catch(we){throw this.handleError(we,ye.proxyOf)}if(ye.type!=="root"&&ye.type!=="document"&&!ye.parent)return!0;if(ee(Me))throw this.getAsyncError()}}visitTick(ge){let ye=ge[ge.length-1],{node:be,visitors:ve}=ye;if(be.type!=="root"&&be.type!=="document"&&!be.parent){ge.pop();return}if(ve.length>0&&ye.visitorIndex<ve.length){let[we,Be]=ve[ye.visitorIndex];ye.visitorIndex+=1,ye.visitorIndex===ve.length&&(ye.visitors=[],ye.visitorIndex=0),this.result.lastPlugin=we;try{return Be(be.toProxy(),this.helpers)}catch(De){throw this.handleError(De,be)}}if(ye.iterator!==0){let we=ye.iterator,Be;for(;Be=be.nodes[be.indexes[we]];)if(be.indexes[we]+=1,!Be[R]){Be[R]=!0,ge.push(oe(Be));return}ye.iterator=0,delete be.indexes[we]}let Me=ye.events;for(;ye.eventIndex<Me.length;){let we=Me[ye.eventIndex];if(ye.eventIndex+=1,we===Y){be.nodes&&be.nodes.length&&(be[R]=!0,ye.iterator=be.getIterator());return}else if(this.listeners[we]){ye.visitors=this.listeners[we];return}}ge.pop()}walkSync(ge){ge[R]=!0;let ye=ie(ge);for(let be of ye)if(be===Y)ge.nodes&&ge.each(ve=>{ve[R]||this.walkSync(ve)});else{let ve=this.listeners[be];if(ve&&this.visitSync(ve,ge.toProxy()))return}}warnings(){return this.sync().warnings()}}return fe.registerPostcss=ue=>{re=ue},lazyResult=fe,fe.default=fe,w.registerLazyResult(fe),d.registerLazyResult(fe),lazyResult}var noWorkResult,hasRequiredNoWorkResult;function requireNoWorkResult(){if(hasRequiredNoWorkResult)return noWorkResult;hasRequiredNoWorkResult=1;let _=requireMapGenerator(),d=requireParse();const v=requireResult();let A=requireStringify();class C{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let T,R=d;try{T=R(this._css,this._opts)}catch(G){this.error=G}if(this.error)throw this.error;return this._root=T,T}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(T,R,G){R=R.toString(),this.stringified=!1,this._processor=T,this._css=R,this._opts=G,this._map=void 0;let I,z=A;this.result=new v(this._processor,I,this._opts),this.result.css=R;let H=this;Object.defineProperty(this.result,"root",{get(){return H.root}});let Y=new _(z,I,this._opts,R);if(Y.isMap()){let[ee,ie]=Y.generate();ee&&(this.result.css=ee),ie&&(this.result.map=ie)}else Y.clearAnnotation(),this.result.css=Y.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(T){return this.async().catch(T)}finally(T){return this.async().then(T,T)}sync(){if(this.error)throw this.error;return this.result}then(T,R){return this.async().then(T,R)}toString(){return this._css}warnings(){return[]}}return noWorkResult=C,C.default=C,noWorkResult}var processor,hasRequiredProcessor;function requireProcessor(){if(hasRequiredProcessor)return processor;hasRequiredProcessor=1;let _=requireDocument(),d=requireLazyResult(),v=requireNoWorkResult(),A=requireRoot();class C{constructor(T=[]){this.version="8.5.6",this.plugins=this.normalize(T)}normalize(T){let R=[];for(let G of T)if(G.postcss===!0?G=G():G.postcss&&(G=G.postcss),typeof G=="object"&&Array.isArray(G.plugins))R=R.concat(G.plugins);else if(typeof G=="object"&&G.postcssPlugin)R.push(G);else if(typeof G=="function")R.push(G);else if(!(typeof G=="object"&&(G.parse||G.stringify)))throw new Error(G+" is not a PostCSS plugin");return R}process(T,R={}){return!this.plugins.length&&!R.parser&&!R.stringifier&&!R.syntax?new v(this,T,R):new d(this,T,R)}use(T){return this.plugins=this.plugins.concat(this.normalize([T])),this}}return processor=C,C.default=C,A.registerProcessor(C),_.registerProcessor(C),processor}var postcss_1,hasRequiredPostcss;function requirePostcss(){if(hasRequiredPostcss)return postcss_1;hasRequiredPostcss=1;var _={};let d=requireAtRule(),v=requireComment(),A=requireContainer(),C=requireCssSyntaxError(),w=requireDeclaration(),T=requireDocument(),R=requireFromJSON(),G=requireInput(),I=requireLazyResult(),z=requireList(),H=requireNode(),Y=requireParse(),ee=requireProcessor(),ie=requireResult(),oe=requireRoot(),se=requireRule(),re=requireStringify(),fe=requireWarning();function ue(...ge){return ge.length===1&&Array.isArray(ge[0])&&(ge=ge[0]),new ee(ge)}return ue.plugin=function(ye,be){let ve=!1;function Me(...Be){console&&console.warn&&!ve&&(ve=!0,console.warn(ye+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),_.LANG&&_.LANG.startsWith("cn")&&console.warn(ye+`:  postcss.plugin . :
https://www.w3ctech.com/topic/2226`));let De=be(...Be);return De.postcssPlugin=ye,De.postcssVersion=new ee().version,De}let we;return Object.defineProperty(Me,"postcss",{get(){return we||(we=Me()),we}}),Me.process=function(Be,De,Fe){return ue([Me(Fe)]).process(Be,De)},Me},ue.stringify=re,ue.parse=Y,ue.fromJSON=R,ue.list=z,ue.comment=ge=>new v(ge),ue.atRule=ge=>new d(ge),ue.decl=ge=>new w(ge),ue.rule=ge=>new se(ge),ue.root=ge=>new oe(ge),ue.document=ge=>new T(ge),ue.CssSyntaxError=C,ue.Declaration=w,ue.Container=A,ue.Processor=ee,ue.Document=T,ue.Comment=v,ue.Warning=fe,ue.AtRule=d,ue.Result=ie,ue.Input=G,ue.Rule=se,ue.Root=oe,ue.Node=H,I.registerPostcss(ue),postcss_1=ue,ue.default=ue,postcss_1}var sanitizeHtml_1,hasRequiredSanitizeHtml;function requireSanitizeHtml(){if(hasRequiredSanitizeHtml)return sanitizeHtml_1;hasRequiredSanitizeHtml=1;const _=requireLib(),d=requireEscapeStringRegexp(),{isPlainObject:v}=requireIsPlainObject(),A=requireCjs(),C=requireParseSrcset(),{parse:w}=requirePostcss(),T=["img","audio","video","picture","svg","object","map","iframe","embed"],R=["script","style"];function G(se,re){se&&Object.keys(se).forEach(function(fe){re(se[fe],fe)})}function I(se,re){return{}.hasOwnProperty.call(se,re)}function z(se,re){const fe=[];return G(se,function(ue){re(ue)&&fe.push(ue)}),fe}function H(se){for(const re in se)if(I(se,re))return!1;return!0}function Y(se){return se.map(function(re){if(!re.url)throw new Error("URL missing");return re.url+(re.w?` ${re.w}w`:"")+(re.h?` ${re.h}h`:"")+(re.d?` ${re.d}x`:"")}).join(", ")}sanitizeHtml_1=ie;const ee=/^[^\0\t\n\f\r /<=>]+$/;function ie(se,re,fe){if(se==null)return"";typeof se=="number"&&(se=se.toString());let ue="",ge="";function ye(Rn,Dn){const Gt=this;this.tag=Rn,this.attribs=Dn||{},this.tagPosition=ue.length,this.text="",this.openingTagLength=0,this.mediaChildren=[],this.updateParentNodeText=function(){if(je.length){const Jn=je[je.length-1];Jn.text+=Gt.text}},this.updateParentNodeMediaChildren=function(){je.length&&T.includes(this.tag)&&je[je.length-1].mediaChildren.push(this.tag)}}re=Object.assign({},ie.defaults,re),re.parser=Object.assign({},oe,re.parser);const be=function(Rn){return re.allowedTags===!1||(re.allowedTags||[]).indexOf(Rn)>-1};R.forEach(function(Rn){be(Rn)&&!re.allowVulnerableTags&&console.warn(`

 Your \`allowedTags\` option includes, \`${Rn}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const ve=re.nonTextTags||["script","style","textarea","option"];let Me,we;re.allowedAttributes&&(Me={},we={},G(re.allowedAttributes,function(Rn,Dn){Me[Dn]=[];const Gt=[];Rn.forEach(function(Jn){typeof Jn=="string"&&Jn.indexOf("*")>=0?Gt.push(d(Jn).replace(/\\\*/g,".*")):Me[Dn].push(Jn)}),Gt.length&&(we[Dn]=new RegExp("^("+Gt.join("|")+")$"))}));const Be={},De={},Fe={};G(re.allowedClasses,function(Rn,Dn){if(Me&&(I(Me,Dn)||(Me[Dn]=[]),Me[Dn].push("class")),Be[Dn]=Rn,Array.isArray(Rn)){const Gt=[];Be[Dn]=[],Fe[Dn]=[],Rn.forEach(function(Jn){typeof Jn=="string"&&Jn.indexOf("*")>=0?Gt.push(d(Jn).replace(/\\\*/g,".*")):Jn instanceof RegExp?Fe[Dn].push(Jn):Be[Dn].push(Jn)}),Gt.length&&(De[Dn]=new RegExp("^("+Gt.join("|")+")$"))}});const Oe={};let Ge;G(re.transformTags,function(Rn,Dn){let Gt;typeof Rn=="function"?Gt=Rn:typeof Rn=="string"&&(Gt=ie.simpleTransform(Rn)),Dn==="*"?Ge=Gt:Oe[Dn]=Gt});let ze,je,He,Xe,$e,We,nt=!1;Wt();const Qt=new _.Parser({onopentag:function(Rn,Dn){if(re.onOpenTag&&re.onOpenTag(Rn,Dn),re.enforceHtmlBoundary&&Rn==="html"&&Wt(),$e){We++;return}const Gt=new ye(Rn,Dn);je.push(Gt);let Jn=!1;const Nn=!!Gt.text;let Xn;if(I(Oe,Rn)&&(Xn=Oe[Rn](Rn,Dn),Gt.attribs=Dn=Xn.attribs,Xn.text!==void 0&&(Gt.innerText=Xn.text),Rn!==Xn.tagName&&(Gt.name=Rn=Xn.tagName,Xe[ze]=Xn.tagName)),Ge&&(Xn=Ge(Rn,Dn),Gt.attribs=Dn=Xn.attribs,Rn!==Xn.tagName&&(Gt.name=Rn=Xn.tagName,Xe[ze]=Xn.tagName)),(!be(Rn)||re.disallowedTagsMode==="recursiveEscape"&&!H(He)||re.nestingLimit!=null&&ze>=re.nestingLimit)&&(Jn=!0,He[ze]=!0,(re.disallowedTagsMode==="discard"||re.disallowedTagsMode==="completelyDiscard")&&ve.indexOf(Rn)!==-1&&($e=!0,We=1)),ze++,Jn){if(re.disallowedTagsMode==="discard"||re.disallowedTagsMode==="completelyDiscard"){if(Gt.innerText&&!Nn){const bn=Bn(Gt.innerText);re.textFilter?ue+=re.textFilter(bn,Rn):ue+=bn,nt=!0}return}ge=ue,ue=""}ue+="<"+Rn,Rn==="script"&&(re.allowedScriptHostnames||re.allowedScriptDomains)&&(Gt.innerText=""),Jn&&(re.disallowedTagsMode==="escape"||re.disallowedTagsMode==="recursiveEscape")&&re.preserveEscapedAttributes?G(Dn,function(bn,Kn){ue+=" "+Kn+'="'+Bn(bn||"",!0)+'"'}):(!Me||I(Me,Rn)||Me["*"])&&G(Dn,function(bn,Kn){if(!ee.test(Kn)){delete Gt.attribs[Kn];return}if(bn===""&&!re.allowedEmptyAttributes.includes(Kn)&&(re.nonBooleanAttributes.includes(Kn)||re.nonBooleanAttributes.includes("*"))){delete Gt.attribs[Kn];return}let Qn=!1;if(!Me||I(Me,Rn)&&Me[Rn].indexOf(Kn)!==-1||Me["*"]&&Me["*"].indexOf(Kn)!==-1||I(we,Rn)&&we[Rn].test(Kn)||we["*"]&&we["*"].test(Kn))Qn=!0;else if(Me&&Me[Rn]){for(const pr of Me[Rn])if(v(pr)&&pr.name&&pr.name===Kn){Qn=!0;let fn="";if(pr.multiple===!0){const Mt=bn.split(" ");for(const yn of Mt)pr.values.indexOf(yn)!==-1&&(fn===""?fn=yn:fn+=" "+yn)}else pr.values.indexOf(bn)>=0&&(fn=bn);bn=fn}}if(Qn){if(re.allowedSchemesAppliedToAttributes.indexOf(Kn)!==-1&&Lt(Rn,bn)){delete Gt.attribs[Kn];return}if(Rn==="script"&&Kn==="src"){let pr=!0;try{const fn=Mn(bn);if(re.allowedScriptHostnames||re.allowedScriptDomains){const Mt=(re.allowedScriptHostnames||[]).find(function(kn){return kn===fn.url.hostname}),yn=(re.allowedScriptDomains||[]).find(function(kn){return fn.url.hostname===kn||fn.url.hostname.endsWith(`.${kn}`)});pr=Mt||yn}}catch{pr=!1}if(!pr){delete Gt.attribs[Kn];return}}if(Rn==="iframe"&&Kn==="src"){let pr=!0;try{const fn=Mn(bn);if(fn.isRelativeUrl)pr=I(re,"allowIframeRelativeUrls")?re.allowIframeRelativeUrls:!re.allowedIframeHostnames&&!re.allowedIframeDomains;else if(re.allowedIframeHostnames||re.allowedIframeDomains){const Mt=(re.allowedIframeHostnames||[]).find(function(kn){return kn===fn.url.hostname}),yn=(re.allowedIframeDomains||[]).find(function(kn){return fn.url.hostname===kn||fn.url.hostname.endsWith(`.${kn}`)});pr=Mt||yn}}catch{pr=!1}if(!pr){delete Gt.attribs[Kn];return}}if(Kn==="srcset")try{let pr=C(bn);if(pr.forEach(function(fn){Lt("srcset",fn.url)&&(fn.evil=!0)}),pr=z(pr,function(fn){return!fn.evil}),pr.length)bn=Y(z(pr,function(fn){return!fn.evil})),Gt.attribs[Kn]=bn;else{delete Gt.attribs[Kn];return}}catch{delete Gt.attribs[Kn];return}if(Kn==="class"){const pr=Be[Rn],fn=Be["*"],Mt=De[Rn],yn=Fe[Rn],kn=Fe["*"],nr=De["*"],dr=[Mt,nr].concat(yn,kn).filter(function(Qr){return Qr});if(pr&&fn?bn=$n(bn,A(pr,fn),dr):bn=$n(bn,pr||fn,dr),!bn.length){delete Gt.attribs[Kn];return}}if(Kn==="style"){if(re.parseStyleAttributes)try{const pr=w(Rn+" {"+bn+"}",{map:!1}),fn=cr(pr,re.allowedStyles);if(bn=In(fn),bn.length===0){delete Gt.attribs[Kn];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+Rn+" {"+bn+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete Gt.attribs[Kn];return}else if(re.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}ue+=" "+Kn,bn&&bn.length?ue+='="'+Bn(bn,!0)+'"':re.allowedEmptyAttributes.includes(Kn)&&(ue+='=""')}else delete Gt.attribs[Kn]}),re.selfClosing.indexOf(Rn)!==-1?ue+=" />":(ue+=">",Gt.innerText&&!Nn&&!re.textFilter&&(ue+=Bn(Gt.innerText),nt=!0)),Jn&&(ue=ge+Bn(ue),ge=""),Gt.openingTagLength=ue.length-Gt.tagPosition},ontext:function(Rn){if($e)return;const Dn=je[je.length-1];let Gt;if(Dn&&(Gt=Dn.tag,Rn=Dn.innerText!==void 0?Dn.innerText:Rn),re.disallowedTagsMode==="completelyDiscard"&&!be(Gt))Rn="";else if((re.disallowedTagsMode==="discard"||re.disallowedTagsMode==="completelyDiscard")&&(Gt==="script"||Gt==="style"))ue+=Rn;else if(!nt){const Jn=Bn(Rn,!1);re.textFilter?ue+=re.textFilter(Jn,Gt):ue+=Jn}if(je.length){const Jn=je[je.length-1];Jn.text+=Rn}},onclosetag:function(Rn,Dn){if(re.onCloseTag&&re.onCloseTag(Rn,Dn),$e)if(We--,!We)$e=!1;else return;const Gt=je.pop();if(!Gt)return;if(Gt.tag!==Rn){je.push(Gt);return}$e=re.enforceHtmlBoundary?Rn==="html":!1,ze--;const Jn=He[ze];if(Jn){if(delete He[ze],re.disallowedTagsMode==="discard"||re.disallowedTagsMode==="completelyDiscard"){Gt.updateParentNodeText();return}ge=ue,ue=""}if(Xe[ze]&&(Rn=Xe[ze],delete Xe[ze]),re.exclusiveFilter){const Nn=re.exclusiveFilter(Gt);if(Nn==="excludeTag"){Jn&&(ue=ge,ge=""),ue=ue.substring(0,Gt.tagPosition)+ue.substring(Gt.tagPosition+Gt.openingTagLength);return}else if(Nn){ue=ue.substring(0,Gt.tagPosition);return}}if(Gt.updateParentNodeMediaChildren(),Gt.updateParentNodeText(),re.selfClosing.indexOf(Rn)!==-1||Dn&&!be(Rn)&&["escape","recursiveEscape"].indexOf(re.disallowedTagsMode)>=0){Jn&&(ue=ge,ge="");return}ue+="</"+Rn+">",Jn&&(ue=ge+Bn(ue),ge=""),nt=!1}},re.parser);return Qt.write(se),Qt.end(),ue;function Wt(){ue="",ze=0,je=[],He={},Xe={},$e=!1,We=0}function Bn(Rn,Dn){return typeof Rn!="string"&&(Rn=Rn+""),re.parser.decodeEntities&&(Rn=Rn.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Dn&&(Rn=Rn.replace(/"/g,"&quot;"))),Rn=Rn.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Dn&&(Rn=Rn.replace(/"/g,"&quot;")),Rn}function Lt(Rn,Dn){for(Dn=Dn.replace(/[\x00-\x20]+/g,"");;){const Nn=Dn.indexOf("<!--");if(Nn===-1)break;const Xn=Dn.indexOf("-->",Nn+4);if(Xn===-1)break;Dn=Dn.substring(0,Nn)+Dn.substring(Xn+3)}const Gt=Dn.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!Gt)return Dn.match(/^[/\\]{2}/)?!re.allowProtocolRelative:!1;const Jn=Gt[1].toLowerCase();return I(re.allowedSchemesByTag,Rn)?re.allowedSchemesByTag[Rn].indexOf(Jn)===-1:!re.allowedSchemes||re.allowedSchemes.indexOf(Jn)===-1}function Mn(Rn){if(Rn=Rn.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),Rn.startsWith("relative:"))throw new Error("relative: exploit attempt");let Dn="relative://relative-site";for(let Nn=0;Nn<100;Nn++)Dn+=`/${Nn}`;const Gt=new URL(Rn,Dn);return{isRelativeUrl:Gt&&Gt.hostname==="relative-site"&&Gt.protocol==="relative:",url:Gt}}function cr(Rn,Dn){if(!Dn)return Rn;const Gt=Rn.nodes[0];let Jn;return Dn[Gt.selector]&&Dn["*"]?Jn=A(Dn[Gt.selector],Dn["*"]):Jn=Dn[Gt.selector]||Dn["*"],Jn&&(Rn.nodes[0].nodes=Gt.nodes.reduce(Zn(Jn),[])),Rn}function In(Rn){return Rn.nodes[0].nodes.reduce(function(Dn,Gt){return Dn.push(`${Gt.prop}:${Gt.value}${Gt.important?" !important":""}`),Dn},[]).join(";")}function Zn(Rn){return function(Dn,Gt){return I(Rn,Gt.prop)&&Rn[Gt.prop].some(function(Nn){return Nn.test(Gt.value)})&&Dn.push(Gt),Dn}}function $n(Rn,Dn,Gt){return Dn?(Rn=Rn.split(/\s+/),Rn.filter(function(Jn){return Dn.indexOf(Jn)!==-1||Gt.some(function(Nn){return Nn.test(Jn)})}).join(" ")):Rn}}const oe={decodeEntities:!0};return ie.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","menu","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0,preserveEscapedAttributes:!1},ie.simpleTransform=function(se,re,fe){return fe=fe===void 0?!0:fe,re=re||{},function(ue,ge){let ye;if(fe)for(ye in re)ge[ye]=re[ye];else ge=re;return{tagName:se,attribs:ge}}},sanitizeHtml_1}var sanitizeHtmlExports=requireSanitizeHtml();const sanitizeHtml=getDefaultExportFromCjs(sanitizeHtmlExports),plainTextSanitizeConfig={allowedTags:[],allowedAttributes:{},disallowedTagsMode:"escape",allowVulnerableTags:!1,textFilter:function(_){return _.substring(0,90).trim()}},CommentPopup=reactExports.memo(({isOpen:_,initialValue:d,onSave:v,onClose:A,maxLength:C=90})=>{const{t:w}=useTranslation(),[T,R]=reactExports.useState(d);reactExports.useEffect(()=>{_&&R(d)},[d,_]);const G=reactExports.useCallback(H=>{R(H.target.value)},[]),I=reactExports.useCallback(()=>{const H=sanitizeHtml(T,plainTextSanitizeConfig);v(H),A()},[T,v,A]),z=reactExports.useCallback(H=>{H.key==="Enter"&&I()},[I]);return useBackClick(A,!0),_?jsxRuntimeExports.jsxs(Info,{isShow:_,onClose:A,className:"comment-popup",buttons:jsxRuntimeExports.jsx(Button,{onClick:I,fullWidth:!0,children:w("battle.confirmComment")}),children:[jsxRuntimeExports.jsx("div",{className:"comment-popup__header",children:w("battle.comment")}),jsxRuntimeExports.jsx("div",{className:"comment-popup__content",children:jsxRuntimeExports.jsx("input",{type:"text",className:"comment-popup__text-input",placeholder:w("battle.enterComment"),value:T,onChange:G,onKeyDown:z,maxLength:C,autoFocus:!0})})]}):null}),GameCommentField=reactExports.memo(({value:_,onChange:d,className:v="",maxLength:A=90})=>{const{t:C}=useTranslation(),[w,T]=React.useState(!1),R=reactExports.useCallback(G=>T(G),[]);return jsxRuntimeExports.jsxs("div",{className:`game-comment-field ${v||""}`,children:[jsxRuntimeExports.jsx("input",{type:"text",className:"game-comment-field__text-input",placeholder:C("battle.enterComment"),value:_,readOnly:!0,onClick:()=>R(!0),"aria-label":C("battle.enterComment")}),jsxRuntimeExports.jsx(CommentPopup,{isOpen:w,initialValue:_,onSave:d,onClose:()=>R(!1),maxLength:A})]})});GameCommentField.displayName="GameCommentField";const CollectionInfo=({faction:_,collection:d,userCollectionBonus:v})=>{const A=Math.ceil((d.burned??0)/d.supply*100);return jsxRuntimeExports.jsxs("div",{className:"collection-info",children:[jsxRuntimeExports.jsx(CapCollectionImage,{collection:d,numbers:[1],className:"collection-info__image"}),jsxRuntimeExports.jsxs("div",{className:"collection-info__title",children:[jsxRuntimeExports.jsx("span",{className:"collection-info__name",children:d.title}),_&&jsxRuntimeExports.jsx("img",{className:"collection-info__faction",src:`/icons/${_.icon}`,alt:"faction"}),v&&jsxRuntimeExports.jsxs("span",{className:"collection-info__leaderboard",children:["+",v,"% "]})]}),jsxRuntimeExports.jsx("span",{className:"collection-info__left",children:`${(d.used/1e3).toFixed(1)}k/${d.supply/1e3}k  ${A}%`})]})},CapCollections=({collections:_,myCapsMap:d,onSetParams:v,className:A,isCommunity:C,onFakeCapClick:w=()=>{}})=>{const{appState:T}=useAppState(),{t:R}=useTranslation(),[G,I]=useStorage("collectionOpenState",{}),z=reactExports.useRef(null),H=(Y,ee)=>{!G[ee]&&z.current&&z.current.scrollTo({top:Y.currentTarget.offsetTop-z.current.offsetTop,behavior:"smooth"}),I({...G,[ee]:!G[ee]})};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`cap-collections ${A??""}`,ref:z,children:_.filter(Y=>C?Y.isCommunity:!Y.isCommunity).map(Y=>{const ee=getFactionFromCollection(Y.title,T.pveGd),ie=T.user?.caps_mycaps?.collections.find(se=>se.collectionId==Y.id),oe=ie?.bonus&&ie.bonus>0&&T.capsGd?Math.floor(ie.bonus*T.capsGd.leaderboard.fullCollectionBonus*100):void 0;return jsxRuntimeExports.jsxs("div",{className:"cap-collections__item",onClick:se=>H(se,Y.id),children:[Y.status==="sold-out"&&jsxRuntimeExports.jsx("div",{className:"cap-collections__soldout",children:R("info.soldOut")}),jsxRuntimeExports.jsx(CollectionInfo,{faction:ee,collection:Y,userCollectionBonus:oe}),jsxRuntimeExports.jsx("div",{className:`cap-collections__caps-wrapper ${G[Y.id]?"opened":""}`,children:jsxRuntimeExports.jsx("div",{className:"cap-collections__caps",children:[...Array(Y.size)].map((se,re)=>{const fe=d.get(Y.id)?.get(re+1),ue=getMaxGrade(fe?.grades),ge=fe&&fe.count>0,ye={id:Y.id+"/"+(re+1),createdAt:Timestamp.now(),url:getCapUrl(ue!=""?ue:"COMMON",Y,re+1),number:-1,collection:Y.title,collectionId:Y.id,collectionNumber:re+1,grade:getMaxGrade(fe?.grades),gradeNumber:-1,owner:"",status:"READY",packId:"",isNft:!1};return jsxRuntimeExports.jsx("div",{className:`${ge?"":"profile__caps-non-exist"} ${Y.id==="notcoin"?"notcoin":""}`,children:jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:ye,collectionCounter:ge?fe.count:void 0,stopPropagation:!0,onClickCallback:()=>{ge?v({collection:Y,number:re+1}):w(ye)}})},ye.url)})})})]},Y.id)})})})},Caps=({isSkeletonShow:_,isDataShow:d,caps:v,lastCap:A,loadingState:C,setLoadingState:w,onCapClick:T,bid:R,onStateUpdate:G,isPve:I,isStakingChoose:z,isScoreChoose:H})=>{const{t:Y}=useTranslation(),{groupCapsBy:ee,groupCapsOptions:ie,groupedCaps:oe,isMoreLoading:se,loadMoreCaps:re,loadCapsByGroup:fe}=useSortCaps$1(v,C),[ue]=useAtom(tutorialAtom),ge=reactExports.useCallback(async be=>{const ve=await re({lastCap:be});G({caps:[...v,...ve.caps],lastCap:ve.lastDocument})},[v,re,G]),ye=reactExports.useCallback(async be=>{if(be===ee)return;w("loading");const ve=await fe({groupCapsBy:be});G({caps:ve.caps,lastCap:ve.lastDocument}),w("skeleton-to-data")},[ee,fe,G,w]);return jsxRuntimeExports.jsxs("div",{className:"game__caps-list-wrapper",children:[jsxRuntimeExports.jsx(Select,{className:"profile__select battle-game-bid__select",value:ee,options:ie,onChange:be=>ye(be),children:jsxRuntimeExports.jsx("img",{src:switchImage,alt:"switch"})}),_&&jsxRuntimeExports.jsxs("div",{className:`profile__caps-group skeleton fade-out fade--long ${C==="skeleton-to-data"?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"battle-game-bid__caps",children:jsxRuntimeExports.jsx("div",{className:"profile__group-caps-title profile__group-caps-title--skeleton"})}),jsxRuntimeExports.jsx("div",{className:"battle-game-bid__caps-list  ",children:[...Array(6)].map((be,ve)=>jsxRuntimeExports.jsx(CapElementSkeleton,{size:"medium"},ve))})]}),oe.map(([be,ve])=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"battle-game-bid__caps",children:jsxRuntimeExports.jsx("div",{className:"profile__group-caps-title",children:be})}),jsxRuntimeExports.jsx("div",{className:`battle-game-bid__caps-list fade-in ${d?"visible":""}`,children:ve.map((Me,we)=>{const Be=R.findIndex(De=>De.id===Me.id)+1;return jsxRuntimeExports.jsx(CapElement,{cap:Me,onClickCallback:T,className:`battle-game-bid__cap ${ue==="pve"&&[0,1,2].includes(we)&&R.length===we?"battle-game-bid__cap--tutorial":""}`,selectedNumber:Be,variant:I?"pve-medium":"medium",isStakingSpeedShow:z,isScoreShow:H,children:ue==="pve"&&[0,1,2].includes(we)&&R.length===we&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger battle-game-bid__finger",alt:"finger"})},Me.id)})})]},be)),A!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button battle-game-bid__button",color:"transparent",size:"small",onClick:()=>ge(A),isLoading:se,children:Y("battle.loadMore")})]})},BattleGameBid=_=>{const{loadingState:d,setLoadingState:v,isSkeletonShow:A,isDataShow:C}=useSkeletonLoading(),[w,T]=reactExports.useState({mode:"my-caps",caps:[],bid:[],isGameLoading:!1,myCapsMap:new Map,collections:[]}),[R,G]=reactExports.useState(""),{setPopup:I}=reactExports.useContext(PopupContext),{t:z}=useTranslation(),{loadCaps:H,loadUserAndMyCapsMap:Y}=useSortCaps$1(w.caps,d),{appState:ee,setAppState:ie}=useAppState(),oe=w.caps.filter(_.filter??(()=>!0)),[se]=useAtom(tutorialAtom),re=reactExports.useCallback(()=>{w.params||_.onBackPressed()},[_,w.params]);useBackClick(re),reactExports.useEffect(()=>{async function be(){v("loading");const{caps:ve,lastDocument:Me}=await H({}),{myCapsMap:we,user:Be}=await Y(),De=await firebaseService.getAllCollections(),Fe=await firebaseService.getCapsGD();ie({...ee,capsGd:Fe,capsNumber:Be.caps_mycaps.count,coinsBalance:Be.caps_coins_balance??0}),_.isPve&&ee.user?.caps_battle_level==-1&&tutorialService.checkPveHasEnoughCaps(ve),T({...w,caps:ve,lastCap:Me,myCapsMap:we,collections:De}),v("skeleton-to-data")}be()},[]);const fe=be=>{if(!(_.isPve?["READY","STAKED","SALE","WAITING","NFT_EDITING"]:["READY"]).includes(be.status)){I({message:z("game.capCantBePlayedPendingMsg"),type:"error"});return}const Me=w.bid.findIndex(we=>we.id===be.id);if(Me>-1){const we=[...w.bid];we.splice(Me,1),T({...w,caps:w.caps,bid:we})}else{if(_.maxBid&&w.bid.length>=_.maxBid){I({message:z("game.maxCapsBid"),type:"error"});return}const we=[...w.bid,be];if(ue(we)&&!ge(we)){I({message:z("game.wrongGrades"),type:"error"});return}if(_.capValidator&&!_.capValidator(be))return;T({...w,caps:w.caps,bid:w.bid.concat(be)})}},ue=be=>_.minBid&&_.maxBid?_.minBid<=be.length&&be.length<=_.maxBid:be.length>0,ge=be=>{if(_.requiredGrades){const ve=be.sort((Me,we)=>we.gradeNumber-Me.gradeNumber).map(Me=>Me.grade);return JSON.stringify(_.requiredGrades)==JSON.stringify(ve)}return!0},ye=!(ue(w.bid)&&ge(w.bid)&&(!_.mainActionValidator||_.mainActionValidator(w.bid)));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`battle-game-bid__filter fade-out ${w.params?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:"profile__caps-filter",children:[jsxRuntimeExports.jsx("button",{onClick:()=>T({...w,mode:"my-caps"}),className:`profile__caps-filters-item ${w.mode=="my-caps"?"profile__caps-filters-item--active":""}`,children:z("profile.myCaps")}),jsxRuntimeExports.jsx("button",{disabled:A,onClick:()=>T({...w,mode:"all-collections"}),className:`profile__caps-filters-item ${w.mode=="all-collections"?"profile__caps-filters-item--active":""}`,children:z("profile.collections")}),jsxRuntimeExports.jsx("button",{disabled:A,onClick:()=>T({...w,mode:"communities"}),className:`profile__caps-filters-item ${w.mode=="communities"?"profile__caps-filters-item--active":""}`,children:z("profile.communities")})]})}),w.mode==="my-caps"&&jsxRuntimeExports.jsx(Caps,{setLoadingState:v,caps:oe,lastCap:w.lastCap,bid:w.bid,onStateUpdate:be=>T({...w,...be}),isPve:!!_.isPve,isStakingChoose:!!_.isStakingChoose,loadingState:d,onCapClick:fe,isDataShow:C,isSkeletonShow:A,isScoreChoose:!!_.isScoreChoose}),["all-collections","communities"].includes(w.mode)&&jsxRuntimeExports.jsx(CapCollections,{collections:w.collections,myCapsMap:w.myCapsMap,isCommunity:w.mode==="communities",className:`fade-out ${w.params?"visible":""} battle-game-bid__collection`,onSetParams:be=>T({...w,params:be})}),w.params&&jsxRuntimeExports.jsx(CollectionCapsList,{params:w.params,mode:"select-number",onCapClick:fe,selectedCaps:w.bid,className:_.isPve?"battle-game-bid__collection-caps-pve":"battle-game-bid__collection-caps",isPve:!!_.isPve,isStakingSpeedShow:!!_.isStakingChoose,onBackPressed:()=>T({...w,params:void 0}),filter:_.filter}),_.isCommentShow&&jsxRuntimeExports.jsx(GameCommentField,{value:R,onChange:G}),jsxRuntimeExports.jsxs("div",{className:`game__button ${se==="pve"&&w.bid.length===3?"game__button--next":""}`,children:[se==="pve"&&w.bid.length===3&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger game__button--finger",alt:"finger"}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,isLoading:w.isGameLoading,disabled:ye,onClick:async()=>{T({...w,isGameLoading:!0}),await _.setBidCallback(w.bid,R),tutorialService.completeTutorialStep("pve_level_caps_selected",firebaseService.token,ee.user),T({...w,isGameLoading:!1})},children:_.mainActionGenerator?_.mainActionGenerator(w.bid):`${_.mainAction} ${w.bid.length?`(${w.bid.length})`:""}`})]})]})},CapsList=({caps:_})=>{const d=_.map(v=>jsxRuntimeExports.jsx(CapElement,{variant:"medium",cap:v},v.id));return jsxRuntimeExports.jsx("div",{className:"game__caps-list",children:d})},CapsVsList=({myBid:_,opponentBid:d,opponentName:v})=>{const{t:A}=useTranslation();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"caps-vs-list__titles",children:[jsxRuntimeExports.jsx("div",{className:"caps-vs-list__title",children:A("game.yourExchangeCaps")}),jsxRuntimeExports.jsx("div",{children:v})]}),jsxRuntimeExports.jsx("div",{className:"caps-vs-list__caps",children:_.map((C,w)=>jsxRuntimeExports.jsxs("div",{className:"caps-vs-list__row",children:[jsxRuntimeExports.jsx(CapElement,{variant:"medium",cap:C}),jsxRuntimeExports.jsx(CapElement,{variant:"medium",cap:d[w]}),jsxRuntimeExports.jsx("img",{className:"caps-vs-list__image",src:vsImage,alt:"vs"})]},C.id))})]})},MyCapsList=({caps:_})=>jsxRuntimeExports.jsx("div",{className:"game__my-caps-list",children:_.map(d=>jsxRuntimeExports.jsx(CapElement,{className:"game__my-caps-list-cap",variant:"small",cap:d},d.id))}),ListOfBids=({game:_,onSelected:d,onBackPressed:v})=>{const{t:A}=useTranslation(),C=useNavigate(),{appState:w}=useAppState(),[T,R]=reactExports.useState(!1),G=_.bids?.filter(H=>H.status=="READY"),I=!G||G.length==0,z=()=>{CapsWebApp.showPopup({message:A("game.deleteGameQuestion"),buttons:[{id:"delete",type:"destructive",text:A("game.deleteGameBtn")},{type:"cancel"}]}).then(H=>{H=="delete"&&(R(!0),capsService.deleteGame(_.id,firebaseService.token).then(async()=>{v?await v(!0):C("/home"),R(!1)}))})};return jsxRuntimeExports.jsxs("div",{className:"game__results",children:[jsxRuntimeExports.jsxs("div",{className:"game__list-bids",children:[jsxRuntimeExports.jsx("div",{className:"game__results-title",children:_.mode=="pvp"?A("game.pickTheBestBid"):A("game.pickTheBestOffer")}),jsxRuntimeExports.jsx("div",{className:"game__results-subtitle",children:_.mode=="pvp"?A("game.yourBid"):A("game.yourExchangeCaps")}),jsxRuntimeExports.jsx(MyCapsList,{caps:_.caps}),w.isCommentsEnabled&&_.comment&&jsxRuntimeExports.jsx(GameComment,{comment:_.comment,className:"game__results-comment"}),jsxRuntimeExports.jsxs("div",{className:"game__results-list",children:[G&&G.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"game__results-list-title",children:A(_.mode=="pvp"?"game.allBets":"game.allOffers")}),G.map(H=>jsxRuntimeExports.jsx(GameCapsList,{game:_,showPreferences:!1,bid:H,user:H.user,isCommentShow:!1,onButtonClick:()=>d(H)},_.id))]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,size:"small",color:"transparent",isLoading:T,onClick:()=>z(),children:_.mode=="pvp"?A("battle.cancelGameBtn"):A("battle.cancelSwapBtn")})]}),I&&jsxRuntimeExports.jsxs("div",{className:"game__no-bids",children:[jsxRuntimeExports.jsx("img",{src:sadImage,className:"upgrade-no-resources__image",alt:"sad"}),_.mode=="pvp"?A("game.noBidsYet"):A("game.noOffersYet")]})]}),jsxRuntimeExports.jsx(NavBar,{})]})},GameInProgress=({name:_,mode:d})=>{const{t:v}=useTranslation();return setTimeout(()=>{CapsWebApp.handleVibration("heavy")},600),reactExports.useEffect(()=>{CapsWebApp.playSound("pvp/progress.mp3")},[]),jsxRuntimeExports.jsxs("div",{className:"game__progress",children:[jsxRuntimeExports.jsxs("div",{className:"game__progress-title",children:[v(d=="pvp"?"game.inProgress":"game.inSwapProgress"),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"game__progress-title--color",children:_})]}),jsxRuntimeExports.jsx("img",{src:explosionBgImage,alt:"explosion bg",className:"game__progress-explosion-bg"}),jsxRuntimeExports.jsx("img",{src:explosionImage$1,alt:"explosion",className:"game__progress-explosion"}),jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"game__progress-cap-1"}),jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"game__progress-cap-2"})]})},Game=_=>{const{t:d}=useTranslation(),v=useNavigate(),[A,C]=reactExports.useState({isLoading:!1,setBid:!1,game:_.game}),{appState:w}=reactExports.useContext(AppContext),{setPopup:T}=reactExports.useContext(PopupContext),[R]=useSearchParams(),{onBalanceUpdate:G}=useAppState(),I=A.game,[z,H]=useAtom(showLeaderboardUserIdAtom),Y=reactExports.useCallback(()=>{A.result&&_.onBackPressed?_.onBackPressed(!0):A.selectedBid?C({...A,selectedBid:void 0}):_.onBackPressed&&!A.setBid&&!z?_.onBackPressed(!1):!A.setBid&&!z&&v("/home")},[A,_,z,v]);useBackClick(Y);const ee=ue=>{if(ue.status=="FINISHED"){const ge=firebaseService.user.uid,ye=ue.owner.id.toString()==ge,be=ue.resultBid&&ue.resultBid.user.id.toString()==ge;return ye||be}return ue.status=="WAITING"},ie=async()=>{try{const ue=await firebaseService.getGame(_.id);if(!ee(ue)){T({message:d("game.noAccessGame"),type:"error"}),v("/home");return}const ge=()=>{const be=R.get("bid");if(be&&ue.bids)return ue.bids.find(ve=>ve.user.id.toString()==be&&ve.status=="READY")},ye=[capImage$1,explosionImage$1,explosionBgImage];return ue.caps&&ye.push(...ue.caps.map(be=>firebaseService.getCollectionCapUrl(be.url))),ue.result&&ye.push(...ue.result.map(be=>firebaseService.getCollectionCapUrl(be.url))),ye.length>0?preloadPromise(ye).then(()=>{setTimeout(()=>{C({...A,isLoading:!1,game:ue,selectedBid:ge()})},300)}):C({...A,isLoading:!1,game:ue,selectedBid:ge()}),ue}catch{v("/home"),T({message:"Invalid game link",type:"error"}),C({...A,isLoading:!1})}};if(reactExports.useEffect(()=>{(()=>{if(_.game){ee(_.game)||(T({message:d("game.noAccessGame"),type:"error"}),v("/home")),C({...A,game:_.game});return}C({...A,isLoading:!0}),ie()})()},[]),reactExports.useEffect(()=>{if(A.isStarted&&A.selectedBid){const ue=new Promise(ye=>{const be=document.querySelector(".game__progress-cap-1"),ve=()=>{be.removeEventListener("animationend",ve),ye(null)};be.addEventListener("animationend",ve)}),ge=capsService.startGame(_.id,A.selectedBid.user.id.toString(),firebaseService.token);Promise.all([ge,ue]).then(([ye])=>{G(),C({...A,isStarted:!1,game:ye.game})}).catch(()=>{C({...A,isStarted:!1}),T({message:"Can't start the game",type:"error"})})}},[_.id,T,A,A.selectedBid]),!I||A.isLoading)return jsxRuntimeExports.jsx(Loading,{});const oe=I.owner.id.toString()==firebaseService.user?.uid,se=ue=>jsxRuntimeExports.jsxs("div",{className:"game__waiting",children:[jsxRuntimeExports.jsxs("div",{className:"game__waiting-first",children:[jsxRuntimeExports.jsxs("div",{className:"game__waiting-title",children:[jsxRuntimeExports.jsx("button",{className:"game__waiting-title--button game__title--yellow",onClick:()=>H(I?.owner.id),children:getName(I.owner)}),` ${d(I.mode=="pvp"?"game.challenged":"game.swapChallenged")}`,jsxRuntimeExports.jsxs("span",{className:"game__title--yellow",children:[" ",d(I.mode=="pvp"?"game.place":"game.placeOffer")]})]}),jsxRuntimeExports.jsx("div",{className:"game__waiting-bid",children:getName(I.owner)})]}),jsxRuntimeExports.jsx(CapsList,{caps:ue}),jsxRuntimeExports.jsxs("div",{className:"game__waiting-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{capsService.rejectGameInvite(I.id,firebaseService.token),A.selectedBid?C({...A,selectedBid:void 0}):_.onBackPressed?_.onBackPressed(!1):v("/battle")},variant:"secondary",fullWidth:!0,children:d("game.reject")}),jsxRuntimeExports.jsx(Button,{onClick:()=>{C({...A,setBid:!0})},fullWidth:!0,children:I.mode=="pvp"?d("game.counterBet"):d("game.counterOffer")})]})]}),re=jsxRuntimeExports.jsx("div",{className:"game",children:jsxRuntimeExports.jsx(BattleGameBid,{isCommentShow:!1,mainAction:d("game.setCounterBid"),minBid:Math.ceil(I.caps.length),maxBid:Math.min(I.caps.length,6),onBackPressed:()=>C({...A,setBid:!1}),requiredGrades:I.caps.map(ue=>ue.grade),mainActionValidator:ue=>{if(w.user?.isPvpDisabled&&I.mode=="pvp"){for(const ge of ue)if(ge.gradeNumber>=5)return!1}return!0},setBidCallback:async ue=>{try{await capsService.setCounterBid(_.id,ue,firebaseService.token);const ge=await ie();T({message:I.mode=="pvp"?d("battle.betIsPlaced"):d("battle.requestIsCreated"),type:"success"}),_.onBackPressed?_.onBackPressed(!0,ge):v("/home")}catch{T({message:d("game.failedToPlaceBetMsg"),type:"error"})}}})}),fe=(ue,ge,ye)=>{const be=oe?ge:ye,ve=oe?ye:ge;return oe?jsxRuntimeExports.jsxs("div",{className:"game__results",children:[jsxRuntimeExports.jsxs("div",{className:"game__results-first",children:[jsxRuntimeExports.jsxs("div",{className:"game__results-title ",children:[jsxRuntimeExports.jsx("span",{className:"game__title--yellow",children:getName(ue)})," ",I.mode=="pvp"?d("game.placedHisBid"):d("game.placedHisOffer")]}),jsxRuntimeExports.jsx(CapsVsList,{myBid:be,opponentBid:ve,opponentName:getName(ue)})]}),jsxRuntimeExports.jsxs("div",{className:"game__waiting-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:async()=>{A.selectedBid&&(A.selectedBid.status="REJECTED"),capsService.rejectBid(I.id,ue.id.toString(),firebaseService.token),C({...A,selectedBid:void 0})},variant:"secondary",fullWidth:!0,children:d("game.reject")}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:()=>{C({...A,isStarted:!0})},children:d(I.mode=="pvp"?"game.acceptAndStart":"game.acceptAndExchange")})]})]}):jsxRuntimeExports.jsxs("div",{className:"game__results game__ready",children:[jsxRuntimeExports.jsxs("div",{className:"game__results-first",children:[jsxRuntimeExports.jsxs("div",{className:"game__results-title ",children:[d("game.waiting1")," ",jsxRuntimeExports.jsxs("span",{className:"game__title--yellow",children:[" ",getName(I.owner)," "]})," ",I.mode=="pvp"?d("game.waiting2"):d("game.waitingOffer2")]}),jsxRuntimeExports.jsx(CapsVsList,{myBid:be,opponentBid:ve,opponentName:getName(I.owner)})]}),jsxRuntimeExports.jsx("div",{className:"game__waiting-buttons",children:jsxRuntimeExports.jsx(Button,{onClick:()=>{v("/home")},fullWidth:!0,children:d("game.goHome")})})]})};if(A.setBid)return re;if(A.isStarted&&A.selectedBid)return jsxRuntimeExports.jsx(GameInProgress,{name:getName(A.selectedBid.user),mode:I.mode});if(I.status=="FINISHED")return jsxRuntimeExports.jsx(GameResults,{game:I,onAgainClick:()=>_.onBackPressed?_.onBackPressed(!0):(v(I.mode=="pvp"?"/battle":"/exchange"),Promise.resolve())});if(oe)return A.selectedBid?fe(A.selectedBid.user,I.caps,A.selectedBid.caps):jsxRuntimeExports.jsx(ListOfBids,{game:I,onSelected:ue=>C({...A,selectedBid:ue}),onBackPressed:_.onBackPressed});{const ue=I.bids?.find(ge=>ge.user.id.toString()==firebaseService.user?.uid);return ue&&ue.status=="READY"?fe(ue.user,I.caps,ue.caps):se(I.caps)}},NotFound=()=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{children:"Nothing to see here!"}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(Link$1,{to:"/home",children:"Go to the home page"})})]}),notcoinImage="/icons/notcoin.png",battleImage="/icons/battle.png",robotImage="/icons/robot.png",exchangeImage="/icons/exchange.png",madnessImage="/icons/madness.png",energyFullImage="/icons/energy-full.png";function ClosableBottomSheet({children:_,onCloseAnimated:d,onClose:v,isShow:A,bgType:C="default"}){const{isClosing:w,handleClose:T}=useClosing({isShow:A,onClose:d}),{t:R}=useTranslation(),[{y:G},I]=useSpring(()=>({y:window.innerHeight})),z=()=>{v&&v(),T()},H=useDrag(({offset:[,Y],type:ee})=>{Y>50&&ee==="pointerup"&&z()},{from:()=>[G.get(),0],filterTaps:!0,preventDefault:!0});return reactExports.useEffect(()=>{A&&I.start({y:0,config:{duration:500}})},[A]),jsxRuntimeExports.jsx("div",{className:`bottom-sheet__wrapper ${A?"visible":""} ${w?"closing":""}`,onClick:z,children:jsxRuntimeExports.jsxs(animated.div,{...H(),className:`bottom-sheet__block ${A?"visible":""} ${w?"closing":""} ${C==="black"?"bottom-sheet__block--black":""}`,onClick:Y=>{Y.preventDefault(),Y.stopPropagation()},children:[jsxRuntimeExports.jsx("div",{className:"bottom-sheet__divider",onClick:z}),jsxRuntimeExports.jsx("div",{className:"bottom-sheet__hide",onClick:z,children:R("hide")}),_]})})}const getTimeFromDistance=_=>{const d=Math.floor(_/864e5),v=Math.floor(_%(1e3*60*60*24)/(1e3*60*60)),A=Math.floor(_%(1e3*60*60)/(1e3*60)),C=Math.floor(_%(1e3*60)/1e3);return{days:d,hours:v,minutes:A,seconds:C,distance:_}},getCountdown=_=>{const d=new Date().getTime(),A=_.toMillis()-d;return getTimeFromDistance(A)},getRepeatedCountdown=(_,d)=>{const v=new Date().getTime(),A=d-(v-_.toMillis())%d;return getTimeFromDistance(A)},getStopwatch=(_,d)=>{const v=new Date().getTime(),A=_.toMillis(),C=Math.min(v-A,d);return getTimeFromDistance(C)},getPaddedNumber=_=>_<10?`0${_}`:_,getTranslatedTime=({days:_,hours:d,minutes:v,seconds:A,distance:C},w,{isShort:T}={isShort:!1})=>T?C<0?`00${w("datetime.m")}:00${w("datetime.s")}`:_>1?`${getPaddedNumber(d)}${w("datetime.h")}:${getPaddedNumber(v)}${w("datetime.m")}`:`${getPaddedNumber(v)}${w("datetime.m")}:${getPaddedNumber(A)}${w("datetime.s")}`:C<0?`00${w("datetime.h")}:00${w("datetime.m")}:00${w("datetime.s")}`:_>1?`${getPaddedNumber(_)}${w("datetime.d")}:${getPaddedNumber(d)}${w("datetime.h")}:${getPaddedNumber(v)}${w("datetime.m")}`:`${getPaddedNumber(d)}${w("datetime.h")}:${getPaddedNumber(v)}${w("datetime.m")}:${getPaddedNumber(A)}${w("datetime.s")}`,useGetCountdown=_=>{const[d,v]=reactExports.useState(""),{t:A}=useTranslation(),C=reactExports.useCallback(w=>getTranslatedTime(getCountdown(w),A),[A]);return reactExports.useEffect(()=>{const w=setInterval(()=>{v(C(_))},1e3);return v(C(_)),()=>clearInterval(w)},[_,C]),_?d:""},useGetRepeatedCountdown=(_,d)=>{const[v,A]=reactExports.useState(""),{t:C}=useTranslation(),w=reactExports.useCallback(T=>getTranslatedTime(getRepeatedCountdown(T,d),C,{isShort:!0}),[d,C]);return reactExports.useEffect(()=>{const T=setInterval(()=>{A(w(_))},1e3);return A(w(_)),()=>clearInterval(T)},[_,w]),_?v:""},useGetStopwatch=(_,d)=>{const[v,A]=reactExports.useState(""),[C,w]=reactExports.useState(0),{t:T}=useTranslation(),R=reactExports.useCallback(G=>{const{days:I,hours:z,minutes:H,seconds:Y,distance:ee}=getStopwatch(G,d);return{translatedStopwatch:getTranslatedTime({days:I,hours:z,minutes:H,seconds:Y,distance:ee},T),distance:ee}},[d,T]);return reactExports.useEffect(()=>{const G=setInterval(()=>{const{translatedStopwatch:H,distance:Y}=R(_);A(H),w(Y)},1e3),{translatedStopwatch:I,distance:z}=R(_);return A(I),w(z),()=>clearInterval(G)},[_,R]),_?{stopwatch:v,distance:C}:{stopwatch:"",distance:0}},getSpentHours=(_,d)=>{const{distance:v}=getStopwatch(_,d);return Math.floor(v/1e3/60/60)},getSpeedInMilliseconds=_=>_*60*1e3,getIsLowEnergy=(_,d)=>_<d/4,useEnergy=({userEnergy:_={value:0,computedAt:new Timestamp(0,0)},energyGd:d={init:0,max:0,speed:0}})=>{const v=reactExports.useMemo(()=>getSpeedInMilliseconds(d.speed),[d.speed]),[A,C]=reactExports.useState(Math.max(0,_.value)),[w,T]=reactExports.useState(_.computedAt.toDate().getTime());return reactExports.useEffect(()=>{const R=setInterval(()=>{const G=Timestamp.now().toMillis(),I=G-w,z=Math.floor(I/v);z>0&&C(H=>{const Y=Math.min(H+z,d.max);return T(G),Y})},1e3);return()=>clearInterval(R)},[w,d.max,v]),{energy:A}},energyLowImage="/icons/energy-low.png",EnergyTimer$1=({startedAt:_,duration:d,isMax:v})=>{const{t:A}=useTranslation(),C=useGetRepeatedCountdown(_,d);return jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__energy ",children:[A("info.energyStorage"),jsxRuntimeExports.jsx("span",{children:v?`00${A("datetime.m")}:00${A("datetime.s")}`:C})]})},EnergyBlock=({energy:_,max:d=0})=>{const v=getIsLowEnergy(_,d),A=v?energyLowImage:energyFullImage;return jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__home-energy",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:`home-energy__num ${v?"home-energy__num-low":"home-energy__num-high"}`,children:_}),"/",d]}),jsxRuntimeExports.jsx("img",{src:A,alt:"energy"})]})},PlayBottomSheet=({onClose:_,isShow:d,energy:v})=>{const A=useNavigate(),{t:C}=useTranslation(),{appState:w,onCheckEnergyAndUserUpdate:T}=useAppState(),R=w.pveGd?.launchEnergyPrice??0,G=w.capsGd?.madness.basic.launchEnergyPrice??0,[I,z]=reactExports.useState(!1),[H]=useAtom(tutorialAtom),[Y]=useAtom(unfinishedGamesAtom),ee={madness:Y.filter(se=>se.mode==="madness")?.[0],pve:Y.filter(se=>se.mode==="pve")?.[0]},ie=async()=>{const se=ee?.madness;if(!I){z(!0);try{if(se)A(`/madness/${se.id}`,{state:se});else{const re=await capsService.newMadness(firebaseService.token),fe=await firebaseService.getBattle(re.id);await T(),A(`/madness/${re.id}`,{state:fe})}}finally{z(!1)}}},oe=reactExports.useMemo(()=>getSpeedInMilliseconds(w.capsGd?.energy.speed??0),[w]);return jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:_,isShow:d,children:jsxRuntimeExports.jsxs("div",{className:`play-bottom-sheet ${H==="pve"?"tutorial__dimmer":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__block",children:[jsxRuntimeExports.jsx(EnergyTimer$1,{startedAt:w.user.caps_energy.computedAt,duration:oe,isMax:v===w.capsGd?.energy.max}),jsxRuntimeExports.jsx(EnergyBlock,{energy:v,max:w.capsGd?.energy.max})]}),jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__block",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>A("/battle"),className:"play-bottom-sheet__button",children:[jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__title",children:[jsxRuntimeExports.jsx("img",{className:"play-bottom-sheet__image",alt:"pvp",src:battleImage}),C("nav.pvp")]}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:C("nav.pvpDescription")})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>A("/exchange"),className:"play-bottom-sheet__button",children:[jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__title",children:[jsxRuntimeExports.jsx("img",{className:"play-bottom-sheet__image",alt:"exchange",src:exchangeImage}),C("nav.exchange")]}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:C("nav.exchangeDescription")})]})]}),jsxRuntimeExports.jsxs("button",{onClick:async()=>A("/pve"),className:"play-bottom-sheet__button play-bottom-sheet__button--pve",disabled:!ee.pve&&v<R,children:[H==="pve"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger play-bottom-sheet__finger",alt:"finger"}),jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__title",children:[jsxRuntimeExports.jsx("img",{className:"play-bottom-sheet__image",alt:"exchange",src:robotImage}),C("nav.pve"),jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__fee",children:[ee.pve&&jsxRuntimeExports.jsx("span",{children:C("nav.continue")}),!ee.pve&&jsxRuntimeExports.jsxs("span",{children:[C("nav.for")," ",R,jsxRuntimeExports.jsx("img",{className:"",alt:"exchange",src:energyFullImage})]})]})]}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:C("nav.pveDescription")})]}),jsxRuntimeExports.jsxs("button",{onClick:ie,className:"play-bottom-sheet__button",disabled:!ee.madness&&v<G,children:[jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__title",children:[jsxRuntimeExports.jsx("img",{className:"play-bottom-sheet__image",alt:"exchange",src:madnessImage}),C("nav.madness"),jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet__fee",children:[ee.madness&&jsxRuntimeExports.jsx("span",{children:C("nav.continue")}),!ee.madness&&jsxRuntimeExports.jsxs("span",{children:[C("nav.for")," ",G,jsxRuntimeExports.jsx("img",{className:"",alt:"exchange",src:energyFullImage})]}),I&&jsxRuntimeExports.jsxs("div",{className:"button-loading",children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx("div",{})]})]})]}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:w.capsGd?.madness.basic.rewardMode=="new"&&w.user?.madnessRecord?C("nav.madnessDescriptionWithRecord",{record:w.user?.madnessRecord.round+1}):C("nav.madnessDescription")})]})]})})},walletImage="/icons/wallet.png",backpackImage="/icons/backpack.png",tonstationImage="/icons/tonstation.png",memhustleImage="/icons/memhustle.png",duckyImage="/icons/duckygram.png",nutsImage="/icons/nutsfarmTasks.png",trendingappsGif="/icons/tapps-double.webp",handsImage="/icons/hands.png",starImage="/icons/star.png",clockImage="/icons/clock.png",PrizeImage$1=({point:{points:_,isClaimed:d,isAvailable:v},isShowClaimButton:A,onAvailableClick:C,onClaimReward:w,styles:T})=>{const{t:R}=useTranslation(),[G,I]=reactExports.useState(!1),{setPopup:z}=reactExports.useContext(PopupContext),H=!d&&v,Y=async()=>{if(H){I(!0);try{await w()}catch{z({message:R("shop.claimFailed"),type:"error"})}I(!1)}},ee=()=>{H&&C()};return jsxRuntimeExports.jsxs("div",{className:"idle-mission-progress-bar__prize-wrapper",style:T,children:[jsxRuntimeExports.jsx("div",{className:`idle-mission-progress-bar__prize-bg ${v?"idle-mission-progress-bar__prize-bg--available":""}`,onClick:ee}),jsxRuntimeExports.jsx(Button,{className:`idle-mission-progress-bar__button-claim ${A?"idle-mission-progress-bar__button-claim--animate":""} ${H?"":"idle-mission-progress-bar__button-claim--gray"}`,color:"green",size:"small",isLoading:G,onClick:Y,children:R("tasks.claim")},_),jsxRuntimeExports.jsx("img",{onClick:ee,src:gumImage$1,alt:"prize",className:`idle-mission-progress-bar__prize ${d?"idle-mission-progress-bar__prize--gray":""}`})]})},IdleProgressBar=({value:_,max:d,onClaimReward:v})=>{const[A,C]=reactExports.useState(0),w=[25,50,75],T=_>d?d:_;return reactExports.useEffect(()=>{C(T===d?T:0)},[d,T]),jsxRuntimeExports.jsx("div",{className:"idle-mission-progress-bar",children:jsxRuntimeExports.jsxs("div",{className:"idle-mission-progress-bar__progress",children:[jsxRuntimeExports.jsx("div",{className:"idle-mission-progress-bar__progress idle-mission-progress-bar__fill",style:{width:T===0?0:`calc(${T/d*100}% + 6px)`}}),w.map(R=>jsxRuntimeExports.jsx("div",{className:"idle-mission-progress-bar__dot","data-percent":R+"%",style:{left:`${R}%`}},"idle"+R)),jsxRuntimeExports.jsx(PrizeImage$1,{point:{points:d,rewardId:"gum",isAvailable:A===d},isShowClaimButton:A===d,onAvailableClick:()=>C(d),styles:{left:"100%"},onClaimReward:async()=>{await v(_)}})]})})},GumReward=({reward:_,isShow:d,onClose:v})=>{const{t:A}=useTranslation(),{isClosing:C,handleClose:w}=useClosing({isShow:d,onClose:v});return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${d?"visible":""}  ${C?"closing":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${d?"visible":""} `,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-gems pve-battle__result-gems--3",children:jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumImage$1,alt:"gem"})}),_&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward game__title--yellow",children:[A("tasks.youReceived"),": ",formatNumber(_.value)," $GUM"]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-total",children:[A("tasks.yourBalance"),": ",formatNumber(_.balance)," $GUM"]})]}),jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,onClick:w,children:A("ok")})]})})},Idle=({onClose:_,isShow:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{setPopup:C}=reactExports.useContext(PopupContext),[w]=useTonConnectUI(),{t:T}=useTranslation(),[R,G]=reactExports.useState(),I=reactExports.useCallback(async()=>{await A()},[A]),z=v.user?.caps_idle,H=(z?.level??-1)+1,Y=z&&v.capsGd?v.capsGd.idle.levels[z?.level??-1]:void 0,ee=v.capsGd?.idle.levels[H],ie=ee?.earnPerHour&&Y?.earnPerHour?ee.earnPerHour-Y.earnPerHour:0,oe=ee?.maxHours&&Y?.maxHours?Math.floor(ee.maxHours-Y.maxHours):0,se=v.capsGd?.idle.levels.length??-1,re=Y?Y.maxHours*60*60*1e3:-1,fe=async()=>{if(v.capsGd){if(!v.capsGd.shopStatus.isEnabled){CapsWebApp.showPopup({message:T("shop.shopIsDisabled"),buttons:[{id:"confirm",type:"ok"}]});return}AppConfig.shopMode===ShopMode.STARS?ue():ge()}},ue=async()=>{const ye=await capsService.upgradeIdle(firebaseService.token);await CapsWebApp.openInvoice(ye)=="paid"?CapsWebApp.showPopup({message:T("shop.idleLevelUpedStars"),buttons:[{id:"ok",type:"ok"}]}).then(()=>{I()}):C({message:T("idle.problemsLevelPurchase"),type:"error"})},ge=async()=>{if(!Y||!Y.priceForUpgrade)return;if(!w.account){await w.openModal();return}const ye=async(ve,Me)=>{const we={validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:"EQAaQqgAg72NwiPQ1mITLrg91lYOJ7PGbJzPwLECO_IECULy",amount:ve,payload:Me}]};try{await w.sendTransaction(we),CapsWebApp.showPopup({message:T("shop.idleLevelUpedTon"),buttons:[{id:"ok",type:"ok"}]})}catch{C({message:T("idle.problemsLevelPurchase"),type:"error"})}},be=await capsService.upgradeIdlePayload(firebaseService.token);ye(getUpgradePriceInTon(Y).toString(),be)};return z&&Y&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:_,isShow:d,children:jsxRuntimeExports.jsxs("div",{className:"idle",children:[jsxRuntimeExports.jsx("div",{className:"idle__header",children:T("idle.reward")}),jsxRuntimeExports.jsx("div",{className:"idle__time",children:jsxRuntimeExports.jsx(IdleStopwatch,{startedAt:z.startedAt,maxDiff:re})}),jsxRuntimeExports.jsxs("div",{className:"idle__block",children:[jsxRuntimeExports.jsxs("div",{className:"idle__block-level",children:[T("idle.level")," ",H]}),jsxRuntimeExports.jsxs("div",{className:"idle__block-title",children:[jsxRuntimeExports.jsx("img",{src:gumImage$1,alt:"gums"})," ",Y.earnPerHour," $GUM"," ",T("idle.perHour")]}),jsxRuntimeExports.jsx("div",{className:"idle__block-description",children:T("idle.description",{hours:Y.maxHours})}),jsxRuntimeExports.jsxs("div",{className:"idle__block-bottom",children:[jsxRuntimeExports.jsxs(Button,{className:"idle__block-bottom-button",size:"small",disabled:se==H,onClick:fe,children:[T("idle.upgrade")," ",AppConfig.shopMode===ShopMode.STARS?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{children:getUpgradePriceInStars(Y)})," ",jsxRuntimeExports.jsx("img",{src:starImage,alt:"star"})]}):`${getUpgradePriceInTon(Y)/1e9} TON`]}),jsxRuntimeExports.jsxs("div",{className:"idle__block-bottom-description",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:gumImage$1,alt:"gums"})," +",ie," ",T("idle.perHour")]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{src:clockImage,alt:"clock"})," +",oe*60," ",T("datetime.minutes")]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"idle__extra",children:[jsxRuntimeExports.jsx("div",{className:"idle__extra-title",children:T("idle.extraReward")}),jsxRuntimeExports.jsx(IdleProgressBar,{onClaimReward:async()=>{const ye=await capsService.claimIdleBonus(firebaseService.token);await I(),G({value:Y.maxHours*Y.earnPerHour,balance:ye})},value:z.bonusProgress,max:Y.extraBonus}),jsxRuntimeExports.jsx("div",{className:"idle__extra-description",children:T("idle.extraDescription")})]}),jsxRuntimeExports.jsxs("div",{className:"idle__balance",children:[T("idle.totalScore"),":"," ",jsxRuntimeExports.jsxs("span",{children:[formatNumber(v.coinsBalance)," $GUM"]})]}),jsxRuntimeExports.jsx(ClaimButton,{className:"idle__claim",startedAt:z.startedAt,maxDiff:re,gumPerHour:Y.earnPerHour,onUpdate:I})]})}),jsxRuntimeExports.jsx(GumReward,{reward:R,isShow:!!R,onClose:()=>G(void 0)})]})},IdleStopwatch=({startedAt:_,maxDiff:d})=>{const{stopwatch:v,distance:A}=useGetStopwatch(_,d);return jsxRuntimeExports.jsx("div",{className:`idle-stopwatch ${A>=d?"idle-stopwatch--finish":""}`,children:v})},ClaimButton=({startedAt:_,maxDiff:d,gumPerHour:v,onUpdate:A,className:C})=>{const{t:w}=useTranslation(),[T,R]=reactExports.useState(!1),I=getSpentHours(_,d)*v,z=async()=>{CapsWebApp.playSound("idle/claim.mp3"),R(!0);try{await capsService.claimIdle(firebaseService.token),await A()}catch{console.error("Claim failed")}R(!1),CapsWebApp.playSound("idle/scale.mp3")};return jsxRuntimeExports.jsxs(Button,{className:C,isLoading:T,color:"green",disabled:I<=0,onClick:z,children:[w("idle.claim")," +",formatNumber(I)," $GUM"]})};function getUpgradePriceInTon(_){return _.priceForUpgrade?.ton??999999999999999}function getUpgradePriceInStars(_){return _.priceForUpgrade?.stars??999999999999999}const HomeEnergy=({energy:_,max:d=0,className:v,onClick:A})=>{const C=getIsLowEnergy(_,d),w=C?energyLowImage:energyFullImage;return jsxRuntimeExports.jsxs("button",{className:`home-energy ${v??""}`,onClick:A,children:[jsxRuntimeExports.jsx("img",{src:w,alt:"energy"}),jsxRuntimeExports.jsxs("div",{className:"home-energy__block",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:`home-energy__num ${C?"home-energy__num-low":"home-energy__num-high"}`,children:_}),"/",d]}),jsxRuntimeExports.jsx("div",{className:"home-energy__progress",children:jsxRuntimeExports.jsx("div",{style:{width:`${_/d*100}%`},className:`home-energy__progress-bar ${C?"home-energy__progress-bar--low":""}`})})]})]})},gumWinImage="/icons/gum-win.png",GumInfo$1=({balance:_,onComplete:d,isShow:v})=>{const{t:A}=useTranslation(),C=useNavigate();return jsxRuntimeExports.jsxs(Info,{isShow:v,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>C("/earn"),fullWidth:!0,children:A("info.goToShop")}),jsxRuntimeExports.jsx(Button,{onClick:()=>d(),fullWidth:!0,variant:"secondary",children:A("ok")})]}),children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-gems pve-battle__result-gems--3",children:jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumWinImage,alt:"gem"})}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:["$GUM: ",_?formatNumber(_):0," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsx("div",{className:"home-info-gum__description",children:A("info.gumDescription")})]})},EnergyTimer=({startedAt:_,duration:d,isMax:v})=>{const{t:A}=useTranslation(),C=useGetRepeatedCountdown(_,d);return jsxRuntimeExports.jsx("div",{className:"energy-info__timer ",children:v?`00${A("datetime.m")}:00${A("datetime.s")}`:C})},EnergyInfo=({onComplete:_,isShow:d,energy:v})=>{const{t:A}=useTranslation(),{appState:C}=useAppState(),w=reactExports.useMemo(()=>getSpeedInMilliseconds(C.capsGd?.energy.speed??0),[C]);return jsxRuntimeExports.jsxs(Info,{isShow:d,buttons:jsxRuntimeExports.jsx("div",{className:"pve-battle__result-buttons",children:jsxRuntimeExports.jsx(Button,{onClick:()=>_(),className:"energy-info__button",children:A("ok")})}),children:[jsxRuntimeExports.jsx("div",{className:"energy-info__title",children:A("info.energyTitle")}),jsxRuntimeExports.jsx("div",{className:"energy-info__energy",children:jsxRuntimeExports.jsx(HomeEnergy,{energy:v,max:C.capsGd?.energy.max})}),jsxRuntimeExports.jsx("div",{className:"home-info-gum__description",children:A("info.energyDescription")}),jsxRuntimeExports.jsx(EnergyTimer,{startedAt:C.user.caps_energy.computedAt,duration:w,isMax:v===C.capsGd?.energy.max})]})},NotcoinInfo=({isShow:_,onComplete:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{t:C}=useTranslation(),w=useNavigate(),[T,R]=reactExports.useState({}),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState({id:"-1",collectionId:""});useBackClick(()=>{H({id:"-1",collectionId:""})},z.id!=="-1");const ee=async(re,fe)=>{if(!Object.keys(T).some(ue=>T[ue])){R({...T,[re]:!0});try{const ue=await capsService.claimNotcoinReward(re,firebaseService.token);await A(),ue.gum&&I({value:ue.gum,balance:ue.balance}),ue.pack&&fe?.pack&&H({id:ue.pack,collectionId:fe.pack})}finally{R({...T,[re]:!1})}}},ie=reactExports.useCallback(re=>re?re.gum?`+${formatNumber(re.gum)} $GUM`:re.pack?`+1 ${capitalize$1(re.pack.replace("-caps",""))} ${C("info.pack")}`:"":"",[C]),oe=[{image:gobletBronzeImage,title:"Bronze",league:"bronze",isAvailable:v.user?.notcoinBonuses?.bronze.isAvailable&&!v.user?.notcoinBonuses.bronze.isClaimed,isClaimed:v.user?.notcoinBonuses?.bronze.isClaimed,bonus:v.user?.notcoinBonuses?.bronze},{image:gobletGoldImage,title:"Gold",league:"gold",isAvailable:v.user?.notcoinBonuses?.gold.isAvailable&&!v.user?.notcoinBonuses.gold.isClaimed,isClaimed:v.user?.notcoinBonuses?.gold.isClaimed,bonus:v.user?.notcoinBonuses?.gold},{image:gobletPlatinumImage,title:"Platinum",league:"platinum",isAvailable:v.user?.notcoinBonuses?.platinum.isAvailable&&!v.user?.notcoinBonuses.platinum.isClaimed,isClaimed:v.user?.notcoinBonuses?.platinum.isClaimed,bonus:v.user?.notcoinBonuses?.platinum}],se=()=>{const re=v.user?.notcoinLeague;return!re||re=="none"?"REWARD":re.toLocaleUpperCase()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Info,{isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>w("/earn"),fullWidth:!0,children:C("shop.buyPacks")}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>d(),fullWidth:!0,children:C("ok")})]}),children:jsxRuntimeExports.jsxs("div",{className:"notcoin-info",children:[jsxRuntimeExports.jsxs("div",{className:"notcoin-info__title",children:["NOTCOIN ",se()]}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__description",children:C("info.notcoinDescription")}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__blocks",children:oe.map(re=>jsxRuntimeExports.jsxs("div",{className:"notcoin-info__block",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__block-img",src:re.image,alt:re.title}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-league",children:re.title}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-bonus",children:ie(re.bonus)}),jsxRuntimeExports.jsx(Button,{disabled:!re.isAvailable,className:"notcoin-info__block-button",size:"small",isLoading:T[re.league],color:"green",onClick:()=>ee(re.league,re.bonus),children:re.isClaimed?"CLAIMED":"CLAIM"})]},re.title))})]})}),jsxRuntimeExports.jsx(GumReward,{onClose:()=>I(void 0),isShow:!!G,reward:G}),z.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...z,onFinished:()=>H({...z,id:"-1"})})]})},GumInfo=({onComplete:_,isShow:d})=>{const{t:v}=useTranslation(),{appState:A}=useAppState(),C=A.user?.caps_invited_rewards??-1,w=C>=(A.capsGd?.referralBonuses.invited.length??1e4)-1,T=w?void 0:A.capsGd?.referralBonuses.invited[C+1],R=T?.number??0,G=w?"":formatNumber(R),I=w?"":formatNumber(T?.reward.gum??0),z=async()=>{const ee=`https://t.me/share/url?text=Let%27s%20play%21&url=https%3A%2F%2Ft.me%2FCapsGameBot%2Fplay?startapp=r_${await(async()=>A.user?.caps_ref_code?A.user?.caps_ref_code:await capsService.requestRefLink(firebaseService.token))()}`;CapsWebApp.openTelegramLink(ee)};return jsxRuntimeExports.jsxs(Info,{isShow:d,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:z,color:"green",fullWidth:!0,children:v("info.invite")}),jsxRuntimeExports.jsx(Button,{onClick:()=>_(),fullWidth:!0,variant:"secondary",children:v("info.cancel")})]}),children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-gems ",children:jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:handsImage,alt:"gem"})}),jsxRuntimeExports.jsx("div",{className:"pve-battle__result-reward",children:v("info.inviteFriend")}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward game__title--yellow",children:["+",w?0:I," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsx("div",{className:"home-info-gum__description",children:v("info.inviteDescription",{friends:G,reward:I,friend:R==1?v("info.inviteFriendFriendSingle"):v("info.inviteFriendFriendPlural")})})]})},HomeLeaderboard=({className:_})=>{const d=useNavigate(),{appState:v}=useAppState();if(!v.user||!v.capsGd)return null;const A=getLeaderboardTo("user",v.capsGd.leagues.find(w=>w.name===v.user?.league)?.userScore.to),C=v.user.score>A?v.user.score:A;if(A)return jsxRuntimeExports.jsxs("button",{className:`home-energy ${_??""}`,onClick:()=>d("/leaderboard"),children:[jsxRuntimeExports.jsx("img",{src:getGobletImage(v.user.league),alt:"league"}),jsxRuntimeExports.jsxs("div",{className:"home-energy__block ",children:[jsxRuntimeExports.jsx("div",{className:"home-energy__num",children:formatNumberShort(v.user.score)}),jsxRuntimeExports.jsx("div",{className:"home-energy__progress",children:jsxRuntimeExports.jsx("div",{style:{width:`${v.user.score/C*100}%`},className:"home-energy__progress-bar "})})]})]})},FloppyIcon="/icons/floppy.png",TonStationInfo=({isShow:_,onComplete:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{t:C}=useTranslation(),[w,T]=reactExports.useState({}),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState({id:"-1",collectionId:""});useBackClick(()=>{H({id:"-1",collectionId:""})},z.id!=="-1");const ee=()=>{CapsWebApp.openTelegramLink("https://t.me/tonstationgames_bot/app?startapp=ref_qiem9bispsageq6cp7bvxa")},ie=async re=>{if(!Object.keys(w).some(fe=>w[fe])){T({...w,[re]:!0});try{const fe=await capsService.claimTask("tonstation",re,firebaseService.token);await A();const ue=fe.reward?.gum;ue&&I({value:ue.value,balance:ue.balance});const ge=fe.reward?.pack;ge&&H({id:ge.id,collectionId:ge.collectionId})}catch{ee()}finally{T({...w,[re]:!1})}}},oe=reactExports.useCallback(re=>re.reward?.rewardId=="gum"?`+${formatNumber(re.reward?.gum??0)} $GUM`:re.reward?.rewardId.endsWith("tonstation_pack")?`+${re.reward.count} TON Station`:re.reward?.rewardId.endsWith("tonsters_pack")?`+${re.reward.count} Tonsters ${C("info.pack")}`:"",[C]),se=re=>{switch(re){case"tonstation_spin_1":return gobletBronzeImage;case"tonstation_spin_2":return gobletGoldImage;case"tonstation_spin_3":return gobletPlatinumImage;default:return gobletBronzeImage}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Info,{isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>ee(),fullWidth:!0,children:C("tasks.spinLuckyWheel")}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>d(),fullWidth:!0,children:C("ok")})]}),children:jsxRuntimeExports.jsxs("div",{className:"notcoin-info",children:[jsxRuntimeExports.jsx("div",{className:"notcoin-info__title",children:"TON STATION"}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__description",children:C("info.tonstationDescription")}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__blocks",children:v.user?.caps_tasks?.tonstation.tasks.map(re=>jsxRuntimeExports.jsxs("div",{className:"notcoin-info__block",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__block-img",src:se(re.taskId),alt:re.taskId}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-league",children:C("tasks."+re.text)}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-bonus",children:oe(re)}),jsxRuntimeExports.jsx(Button,{disabled:re.isClaimed,className:"notcoin-info__block-button",size:"small",isLoading:w[re.taskId],color:"green",onClick:()=>{ie(re.taskId)},children:re.isClaimed?"CLAIMED":"CLAIM"})]},re.taskId))})]})}),jsxRuntimeExports.jsx(GumReward,{onClose:()=>I(void 0),isShow:!!G,reward:G}),z.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...z,onFinished:()=>H({...z,id:"-1"})})]})},BadgeIconButton=({icon:_,alt:d,ariaLabel:v,onClick:A,badge:C,badgePosition:w="top-right",className:T})=>jsxRuntimeExports.jsxs("button",{className:`badge-icon-button ${T||""}`,"aria-label":v,onClick:A,children:[jsxRuntimeExports.jsx("img",{src:_,alt:d,className:"badge-icon-button__icon"}),jsxRuntimeExports.jsx("div",{className:`badge-icon-button__badge badge-icon-button__badge--${w}`,children:C})]}),gumImage="/icons/gum-small.png",packImage$1="/packs/pack-memhustle.png",MemHustleInfo=({isShow:_,onComplete:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{t:C}=useTranslation(),[w,T]=reactExports.useState({}),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState({id:"-1",collectionId:""});useBackClick(()=>{H({id:"-1",collectionId:""})},z.id!=="-1");const ee=async se=>{if(!Object.keys(w).some(re=>w[re])){T({...w,[se]:!0});try{const re=await capsService.claimTask("memhustle",se,firebaseService.token);await A();const fe=re.reward?.gum;fe&&I({value:fe.value,balance:fe.balance});const ue=re.reward?.pack;ue&&H({id:ue.id,collectionId:ue.collectionId})}catch{se=="memhustle_follow"?CapsWebApp.openTelegramLink("https://t.me/+evumsN7syTtlMDUy"):CapsWebApp.openTelegramLink("https://t.me/MemHustle_bot/memHustle?startapp=0f588dbb83")}finally{T({...w,[se]:!1})}}},ie=reactExports.useCallback(se=>se.reward?.rewardId=="gum"?`+${formatNumber(se.reward?.gum??0)} $GUM`:se.reward?.rewardId.endsWith("memhustle_pack")?`+${se.reward.count} pack`:"",[C]),oe=se=>{switch(se){case"memhustle_all":return packImage$1;default:return gumImage}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Info,{className:"info__topcontainer bg-memhustle",isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{CapsWebApp.openTelegramLink("https://t.me/MemHustle_bot/memHustle?startapp=0f588dbb83")},fullWidth:!0,children:C("tasks.memhustle")}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>d(),fullWidth:!0,children:C("ok")})]}),children:jsxRuntimeExports.jsxs("div",{className:"notcoin-info",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__logo",src:"logo_memhustle.png",alt:"MemHustle"}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__blocks",children:v.user?.caps_tasks?.memhustle.tasks.map(se=>jsxRuntimeExports.jsxs("div",{className:"notcoin-info__block",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__block-img",src:oe(se.taskId),alt:se.taskId}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-league",children:C("tasks."+se.text)}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-bonus",children:ie(se)}),jsxRuntimeExports.jsx(Button,{disabled:se.isClaimed,className:"notcoin-info__block-button",size:"small",isLoading:w[se.taskId],color:"green",onClick:()=>{ee(se.taskId)},children:se.isClaimed?"CLAIMED":"CLAIM"})]},se.taskId))})]})}),jsxRuntimeExports.jsx(GumReward,{onClose:()=>I(void 0),isShow:!!G,reward:G}),z.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...z,onFinished:()=>H({...z,id:"-1"})})]})},duckygramPackImage="/packs/pack-duckygram.png",DuckygramTasks=({isShow:_,onComplete:d})=>{const{appState:v}=useAppState(),{t:A}=useTranslation(),[C,w]=reactExports.useState([]);reactExports.useEffect(()=>{(async()=>{if(v.user?.id)try{const I=await firebaseService.getDuckygram(v.user?.id);w(I?.levels||[])}catch(I){console.error("Failed fetching levels:",I)}})()},[]);const T=G=>{switch(G){case"common-caps":return commonPackImage;case"tonsters":return tonstersPackImage;case"duckygram":return duckygramPackImage;default:return gumImage}},R=[{taskId:"5",text:"Beat lvl.5",packId:"common-caps",prize:"x1 Common"},{taskId:"10",text:"Beat lvl.10",packId:"tonsters",prize:"x1 Tonsters"},{taskId:"20",text:"Beat lvl.20",packId:"tonsters",prize:"x1 Tonsters"},{taskId:"25",text:"Beat lvl.25",packId:"tonsters",prize:"x1 Tonsters"},{taskId:"35",text:"Beat lvl.35",packId:"duckygram",prize:"x1 Ducky"},{taskId:"40",text:"Beat lvl.40",packId:"tonsters",prize:"x1 Tonsters"},{taskId:"50",text:"Beat lvl.50",packId:"tonsters",prize:"x1 Tonsters"},{taskId:"55",text:"Beat lvl.55",packId:"duckygram",prize:"x1 Ducky"},{taskId:"65",text:"Beat lvl.65",packId:"tonsters",prize:"x1 Tonsters"},{taskId:"70",text:"Beat lvl.70",packId:"tonsters",prize:"x2 Tonsters"},{taskId:"80",text:"Beat lvl.80",packId:"tonsters",prize:"x3 Tonsters"},{taskId:"85",text:"Beat lvl.85",packId:"tonsters",prize:"x5 Tonsters"},{taskId:"95",text:"Beat lvl.95",packId:"duckygram",prize:"x1 Ducky"}];return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Info,{className:"info__topcontainer bg-duckygram",isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{CapsWebApp.openTelegramLink("https://t.me/duckygram_bot/play?startapp=ee916583-4ada-4e92-8ef9-ec0a63a166b2")},fullWidth:!0,children:A("tasks.duckygram")}),jsxRuntimeExports.jsx(Button,{onClick:()=>d(),fullWidth:!0,children:A("ok")})]}),children:jsxRuntimeExports.jsxs("div",{className:"notcoin-info",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__logo",src:"logo_duckygramTower.png",alt:"Duckygram"}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__blocks",children:R.map(G=>jsxRuntimeExports.jsxs("div",{className:"notcoin-info__block",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__block-img",src:T(G.packId),alt:G.taskId}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-league",children:A(G.text)}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-bonus",children:G.prize}),jsxRuntimeExports.jsx(Button,{disabled:C.includes(Number(G.taskId)),className:"notcoin-info__block-button",size:"small",color:"green",variant:"secondary",onClick:()=>{CapsWebApp.openTelegramLink("https://t.me/duckygram_bot/play?startapp=ee916583-4ada-4e92-8ef9-ec0a63a166b2")},children:C.includes(Number(G.taskId))?A("tasks.claimed"):A("tasks.claim")})]},G.taskId))})]})})})},NatsFarmTasks=({isShow:_,onComplete:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{t:C}=useTranslation(),[w,T]=reactExports.useState({}),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState({id:"-1",collectionId:""});useBackClick(()=>{H({id:"-1",collectionId:""})},z.id!=="-1");const ee=async se=>{if(!Object.keys(w).some(re=>w[re])){T({...w,[se]:!0});try{const re=await capsService.claimTask("nutsfarm",se,firebaseService.token);await A();const fe=re.reward?.gum;fe&&I({value:fe.value,balance:fe.balance});const ue=re.reward?.pack;ue&&H({id:ue.id,collectionId:ue.collectionId})}catch{se=="nutsfarm_follow"?CapsWebApp.openTelegramLink("https://t.me/+tRQU8VP3abYxNDMy"):CapsWebApp.openTelegramLink("https://t.me/nutsfarm_bot/nutscoin?startapp=ref_caps-utmSource_TG-utmMedium_Partners-utmCampaign_caps-utmContent_NutsFarm-utmTerm_Main")}finally{T({...w,[se]:!1})}}},ie=reactExports.useCallback(se=>se.reward?.rewardId=="gum"&&se.reward?.gum!==void 0?`+${formatNumber(se.reward?.gum/1e3)}k $GUM`:se.reward?.rewardId.endsWith("tonsters_pack")?`+${se.reward.count} Tonsters`:"",[C]),oe=se=>{switch(se){case"nutsfarm_reach_balance_30":return tonstersPackImage;default:return gumImage}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Info,{className:"bg-nutsfarm",isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{CapsWebApp.openTelegramLink("https://t.me/nutsfarm_bot/nutscoin?startapp=ref_caps-utmSource_TG-utmMedium_Partners-utmCampaign_caps-utmContent_NutsFarm-utmTerm_Main")},fullWidth:!0,children:C("tasks.nutsFarm")}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>d(),fullWidth:!0,children:C("ok")})]}),children:jsxRuntimeExports.jsxs("div",{className:"notcoin-info",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__logo",src:"logo_nutsFarm.png",alt:"Nuts Farm"}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__blocks",children:v.user?.caps_tasks?.nutsfarm.tasks.map(se=>jsxRuntimeExports.jsxs("div",{className:"notcoin-info__block",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__block-img",src:oe(se.taskId),alt:se.taskId}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-league",children:C("tasks."+se.text)}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-bonus",children:ie(se)}),jsxRuntimeExports.jsx(Button,{disabled:se.isClaimed,className:"notcoin-info__block-button",size:"small",isLoading:w[se.taskId],color:"green",onClick:()=>{ee(se.taskId)},children:se.isClaimed?"CLAIMED":"CLAIM"})]},se.taskId))})]})}),jsxRuntimeExports.jsx(GumReward,{onClose:()=>I(void 0),isShow:!!G,reward:G}),z.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...z,onFinished:()=>H({...z,id:"-1"})})]})},TrendingAppsInfo=({isShow:_,onComplete:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{t:C}=useTranslation(),[w,T]=reactExports.useState({}),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState({id:"-1",collectionId:""});useBackClick(()=>{H({id:"-1",collectionId:""})},z.id!=="-1");const ee=async se=>{if(!Object.keys(w).some(re=>w[re])){T({...w,[se]:!0});try{const re=await capsService.claimTask("trendingapps",se,firebaseService.token);await A();const fe=re.reward?.gum;fe&&I({value:fe.value,balance:fe.balance});const ue=re.reward?.pack;ue&&H({id:ue.id,collectionId:ue.collectionId})}catch{R({message:C("tasks.taskIsNotCompleted"),type:"error"})}finally{T({...w,[se]:!1})}}},ie=reactExports.useCallback(se=>se.reward?.rewardId=="gum"?`+${formatNumber(se.reward?.gum??0)} $GUM`:se.reward?.rewardId.endsWith("tonsters_pack")?`+${se.reward.count} Tonsters`:"",[C]),oe=se=>{switch(se){case"trendingapps_check_collection":return tonstersPackImage;default:return gumImage}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Info,{className:"bg-memhustle",isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>{CapsWebApp.openTelegramLink("https://t.me/tapps_bot/center?startapp=app_capsgame")},fullWidth:!0,children:C("tasks.trendingApps")}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>d(),fullWidth:!0,children:C("ok")})]}),children:jsxRuntimeExports.jsxs("div",{className:"notcoin-info",children:[jsxRuntimeExports.jsx("div",{className:"notcoin-info__title",children:C("tasks.trendingApps")}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__blocks",children:v.user?.caps_tasks?.trendingapps.tasks.map(se=>jsxRuntimeExports.jsxs("div",{className:"notcoin-info__block",children:[jsxRuntimeExports.jsx("img",{className:"notcoin-info__block-img",src:oe(se.taskId),alt:se.taskId}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-league",children:C("tasks."+se.text)}),jsxRuntimeExports.jsx("div",{className:"notcoin-info__block-bonus",children:ie(se)}),jsxRuntimeExports.jsx(Button,{disabled:se.isClaimed,className:"notcoin-info__block-button",size:"small",isLoading:w[se.taskId],color:"green",onClick:()=>{ee(se.taskId)},children:se.isClaimed?"CLAIMED":"CLAIM"})]},se.taskId))})]})}),jsxRuntimeExports.jsx(GumReward,{onClose:()=>I(void 0),isShow:!!G,reward:G}),z.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...z,onFinished:()=>H({...z,id:"-1"})})]})},starterPackIcon="/icons/starter-pack.png",PacksInventory=({packs:_,onBackPressed:d})=>{const{appState:v}=useAppState(),[A,C]=reactExports.useState({id:"-1",collectionId:""}),w=reactExports.useCallback(()=>{A.id!=="-1"?C({id:"-1",collectionId:""}):d()},[A]);useBackClick(w);const T=reactExports.useMemo(()=>getCollectionsPacksByFilter(v.packCollections,R=>_.some(G=>G.collectionId===R.id)).map(R=>{const G=_.filter(z=>z.collectionId===R.id).map(z=>z.id),I=_.filter(z=>z.collectionId===R.id).length;return{...R,collectionPackIds:G,length:I}}),[v.packCollections,_]);return T.length===0&&A.id==="-1"&&d(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"leaderboard-squad",children:jsxRuntimeExports.jsx("div",{className:"shop__group",children:jsxRuntimeExports.jsx("div",{className:"packs",children:T.map(R=>jsxRuntimeExports.jsxs("button",{className:"packs__item",onClick:()=>{C({id:R.collectionPackIds[0],collectionId:R.id,multipleOpen:R.collectionPackIds.length>50?R.collectionPackIds.slice(0,50):R.collectionPackIds,nextPacks:[]})},children:[jsxRuntimeExports.jsxs("div",{className:"packs-inventory__pack",children:[jsxRuntimeExports.jsx("img",{className:"packs__image",alt:"packs image",src:R.url}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad-reward-info__reward-count",children:["x",R.length]})]}),jsxRuntimeExports.jsx("div",{className:"packs__type",children:R.name})]},R.id))})})}),A.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...A,onFinished:async()=>{C({id:"-1",collectionId:""})}})]})},Home=()=>{const _=useNavigate(),{t:d}=useTranslation(),{appState:v,setAppState:A}=useAppState(),[C]=useAtom(userAtom),[w]=useAtom(pendingPacksAtom),T=useAction(updatePendingPacksAction),[R,G]=reactExports.useState(!1),[I,z]=reactExports.useState(!1),[H]=useAtom(tutorialAtom),[Y,ee]=reactExports.useState({on:!1,translateX:0,translateY:0}),oe=new URLSearchParams(location.search).get("play"),{loadingState:se,setLoadingState:re,isSkeletonShow:fe,isDataShow:ue}=useSkeletonLoading(v.isLoaded?{defaultState:"loaded"}:void 0),ge=w&&w[0]?.category==="first"?w[0]:void 0,[ye,be]=reactExports.useState(ge??{id:"-1",collectionId:""}),{energy:ve}=useEnergy({userEnergy:v.user?.caps_energy,energyGd:v.capsGd?.energy}),[Me,we]=reactExports.useState(!1),[Be,De]=reactExports.useState(!1),[Fe,Oe]=reactExports.useState(!1),[Ge,ze]=reactExports.useState(!1),[je,He]=reactExports.useState(!1),[Xe,$e]=reactExports.useState(!1),[We,nt]=reactExports.useState(!1),[Qt,Wt]=reactExports.useState(!1),[Bn,Lt]=reactExports.useState(!1),[Mn,cr]=reactExports.useState(!1),[In,Zn]=reactExports.useState(!1),[$n]=useTonConnectUI();reactExports.useEffect(()=>{v.isLoaded?(re("loaded"),oe&&G(!0)):(se==="initial"&&re("loading"),v.user&&(A({...v,isLoaded:!0}),re("skeleton-to-data")))},[v,se,A,re]);const Rn=reactExports.useCallback(()=>{be({...ye,id:"-1"})},[ye]);useBackClick(Rn,ye.id!=="-1");const Dn=reactExports.useCallback(()=>{if(v.isAprilFool){const Nn=Math.floor(Math.random()*401)-200,Xn=Math.floor(Math.random()*401)-200;ee({on:!0,translateX:Nn,translateY:Xn})}else CapsWebApp.playSound("idle/open.mp3"),z(!0)},[v]),Gt=reactExports.useMemo(()=>C.inventory?.skins?.reduce((Nn,Xn)=>Nn+Xn.count,0)??0,[C]),Jn=reactExports.useMemo(()=>C.caps_squad?getSquadImage(C.caps_squad):null,[C]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[fe&&jsxRuntimeExports.jsx(Loading,{className:`skeleton fade-out fade--long ${se==="skeleton-to-data"?"visible":""} `}),v.user&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:`home ${H==="pve"?"tutorial__dimmer":""} `,children:[jsxRuntimeExports.jsxs("div",{className:`home__title fade-in ${ue?"visible":""}`,children:[jsxRuntimeExports.jsxs("button",{className:`home__notcoin ${ue?"visible":""}`,onClick:()=>Oe(!0),children:[jsxRuntimeExports.jsx("img",{src:notcoinImage,alt:"notcoin"}),jsxRuntimeExports.jsx("span",{children:d("idle.claim")})]}),jsxRuntimeExports.jsx("img",{src:logoImage,className:"home__logo",alt:"Logo"}),jsxRuntimeExports.jsx("button",{className:`home__wallet ${ue?"visible":""}`,onClick:()=>$n.connected?_("/settings"):$n.openModal(),children:jsxRuntimeExports.jsx("img",{src:walletImage,alt:"notcoin"})})]}),jsxRuntimeExports.jsxs("div",{className:"home__profile-buttons",children:[jsxRuntimeExports.jsx(HomeLeaderboard,{className:`home__profile fade-in ${ue?"visible":""}`}),jsxRuntimeExports.jsxs("button",{className:`home__profile fade-in ${ue?"visible":""}`,onClick:()=>we(!0),children:[jsxRuntimeExports.jsx("img",{src:gumImage$2,alt:"caps"}),formatNumber(v.coinsBalance)]}),jsxRuntimeExports.jsx(HomeEnergy,{onClick:()=>De(!0),energy:ve,max:v.capsGd.energy.max,className:`home__profile fade-in ${ue?"visible":""}`})]}),jsxRuntimeExports.jsxs("div",{className:"home__bottom-container",children:[jsxRuntimeExports.jsxs("div",{className:"home__bottom-left",children:[getIsStarterPackAvailable(C)&&jsxRuntimeExports.jsxs("button",{className:"starter-pack",onClick:()=>_("/earn",{state:{packIdToOpen:"starter",returnTo:"/"}}),children:[jsxRuntimeExports.jsx("img",{className:"starter-pack__image",src:starterPackIcon,alt:"Starter pack"}),jsxRuntimeExports.jsx("div",{className:"starter-pack__label-container",children:jsxRuntimeExports.jsx("span",{className:"starter-pack__label",children:"Starter Pack"})})]}),Jn&&squadMode()=="v2"]}),jsxRuntimeExports.jsxs("div",{className:`home__bottom-right fade-in ${ue?"visible":""}`,children:[v.capsGd.status.isTonstationEnabled&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:tonstationImage,alt:"tonstation",ariaLabel:"Ton Station",badge:"SOON",badgePosition:"bottom-center",onClick:()=>nt(!0)}),v.capsGd.status.isMemhustleEnabled&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:memhustleImage,alt:"memhastle",ariaLabel:"MemHustle",badge:"MEMES",badgePosition:"bottom-center",onClick:()=>Wt(!0)}),v.capsGd.status.isDuckygramEnabled&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:duckyImage,alt:"duckygram",ariaLabel:"Duckygram",badge:"Beat Me!",badgePosition:"bottom-center",onClick:()=>cr(!0)}),v.capsGd.status.isNutsFarmEnabled&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:nutsImage,alt:"nutsfarm",ariaLabel:"NutsFarm",badge:"NUT",badgePosition:"bottom-center",onClick:()=>Zn(!0)}),v.capsGd.status.isTrendingAppsEnabled&&v.refCode=="nq2EbODMa4YKQHprVBsy"&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:trendingappsGif,alt:"trendingApps",ariaLabel:"TrendingApps",badge:"TApps",badgePosition:"bottom-center",onClick:()=>Lt(!0)}),Gt>0&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:FloppyIcon,alt:"floppy",ariaLabel:"Skins",badge:`x${Gt}`,onClick:()=>He(!0)}),w&&w[0]&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:commonPackImage,alt:"pack",ariaLabel:"Packs",badge:`x${w.length}`,onClick:()=>$e(!0)}),v.isSeasonEnabled&&v.capsGd?.seasons?.find(Nn=>Nn.id==v.capsGd?.season)?.isBalanceEnabled&&jsxRuntimeExports.jsx(BadgeIconButton,{icon:`/icons/${v.coinsSeasonIcon}`,alt:"season",ariaLabel:"Season coins",badge:`x${formatNumber(C.coinsSeasonBalance)}`,badgePosition:"bottom-center",onClick:()=>{v.capsGd?.seasons?.find(Nn=>Nn.id==v.capsGd?.season)?.isLeaderboardEnabled?_("/season-leaderboard"):_("/earn")}})]})]}),jsxRuntimeExports.jsxs("div",{className:"home__bottom",children:[jsxRuntimeExports.jsx("button",{className:`home__backpack fade-in ${ue?"visible":""}`,onClick:Dn,style:Y.on?{transform:`translate(${Y.translateX}%, ${Y.translateY}%)`,transition:"transform 0.3s ease-out"}:{},children:jsxRuntimeExports.jsx("img",{src:backpackImage,alt:"backpack"})}),jsxRuntimeExports.jsx(Button,{className:`${H==="pve"?"home__button--tutorial":""} fade-in ${ue?"visible":""}`,onClick:()=>{tutorialService.completeTutorialStep("pve_play_pressed",firebaseService.token,v.user),G(!0)},children:d("startGame")}),H==="pve"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger home__finger",alt:"finger"}),jsxRuntimeExports.jsx("button",{className:`home__invite fade-in ${ue?"visible":""}`,onClick:()=>ze(!0),children:jsxRuntimeExports.jsx("img",{src:handsImage,alt:"invite button"})})]}),jsxRuntimeExports.jsx("div",{className:"home__navbar-wrapper",children:jsxRuntimeExports.jsx(NavBar,{className:`fade-in ${ue?"visible":""}`})})]})}),!1,jsxRuntimeExports.jsx(PlayBottomSheet,{isShow:R,onClose:()=>G(!1),energy:ve}),v.user&&jsxRuntimeExports.jsx(Idle,{isShow:I,onClose:()=>z(!1)}),ye.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...ye,onFinished:async()=>{await T(C.id),be({...ye,id:"-1"})}}),jsxRuntimeExports.jsx(GumInfo$1,{onComplete:()=>we(!1),isShow:Me,balance:v.coinsBalance}),jsxRuntimeExports.jsx(EnergyInfo,{energy:ve,onComplete:()=>De(!1),isShow:Be}),jsxRuntimeExports.jsx(NotcoinInfo,{isShow:Fe,onComplete:()=>Oe(!1)}),jsxRuntimeExports.jsx(GumInfo,{onComplete:()=>ze(!1),isShow:Ge}),v.capsGd.status.isTonstationEnabled&&jsxRuntimeExports.jsx(TonStationInfo,{isShow:We,onComplete:()=>nt(!1)}),v.capsGd.status.isMemhustleEnabled&&jsxRuntimeExports.jsx(MemHustleInfo,{isShow:Qt,onComplete:()=>Wt(!1)}),v.capsGd.status.isDuckygramEnabled&&jsxRuntimeExports.jsx(DuckygramTasks,{isShow:Mn,onComplete:()=>cr(!1)}),v.capsGd.status.isNutsFarmEnabled&&jsxRuntimeExports.jsx(NatsFarmTasks,{isShow:In,onComplete:()=>Zn(!1)}),v.capsGd.status.isTrendingAppsEnabled&&jsxRuntimeExports.jsx(TrendingAppsInfo,{isShow:Bn,onComplete:()=>Lt(!1)}),je&&jsxRuntimeExports.jsx(SkinSelector,{onBackPressed:()=>He(!1)}),Xe&&jsxRuntimeExports.jsx(PacksInventory,{packs:w!==null?Array.from(w):[],onBackPressed:()=>$e(!1)})]})},PurchaseBoostersInfo$1=({onComplete:_,isShow:d,okText:v,userBoosters:A})=>{const{t:C}=useTranslation(),{appState:w}=useAppState(),T=A??w.user?.inventory?.boosters??[],R=ALL_BOOSTERS.map(G=>{const I=T.find(z=>z.boosterId==G);return{id:G,count:I?.count??0}});return jsxRuntimeExports.jsxs(Info,{isShow:d,buttons:jsxRuntimeExports.jsx("div",{className:"pve-battle__result-buttons",children:jsxRuntimeExports.jsx(Button,{onClick:()=>_(),fullWidth:!0,children:v??C("ok")})}),children:[jsxRuntimeExports.jsx("div",{className:"energy-info__title",children:C("shop.purchaseCompleted")}),jsxRuntimeExports.jsx("div",{className:"purchase-boosters-info__boosters",children:R.map(G=>jsxRuntimeExports.jsxs("div",{className:"purchase-boosters-info__item",children:[jsxRuntimeExports.jsx("img",{className:"purchase-boosters-info__img",src:"/icons/booster-"+G.id+".png",alt:G.id}),jsxRuntimeExports.jsxs("div",{className:"purchase-boosters-info__number",children:["x",G.count]})]},G.id))}),jsxRuntimeExports.jsx("div",{className:"purchase-boosters-info__description",children:C("shop.boosterPurchased")})]})},useBuy=({pack:_})=>{const{appState:d,onUserAndPendingPacksUpdate:v}=useAppState(),[A]=useTonConnectUI(),[C,w]=reactExports.useState(!1),{setPopup:T}=reactExports.useContext(PopupContext),[R,G]=reactExports.useState(null),{t:I}=useTranslation(),z=reactExports.useCallback(async(Y,ee)=>{if(!_)return;const ie={validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:"EQAaQqgAg72NwiPQ1mITLrg91lYOJ7PGbJzPwLECO_IECULy",amount:Y,payload:ee}]};try{await A.sendTransaction(ie)}catch{T({message:I("shop.problemsPackPurchase"),type:"error"})}},[_,I,A,T]);return{buyPack:reactExports.useCallback(async(Y,ee,ie,oe=1)=>{if(!d.capsGd||!_)return;if(!d.capsGd.shopStatus.isEnabled&&ie!=="forCoins"){CapsWebApp.showPopup({message:I("shop.shopIsDisabled"),buttons:[{id:"confirm",type:"ok"}]});return}CapsWebApp.playSound("pack/buy.mp3"),w(!0);const se=ee.toString();if(ie=="forTon"&&!A.account){await A.openModal();return}const re=ie=="forCoins"||ie=="forSeasonCoins"||ie=="forTokens";try{const fe=await capsService.requestPack(Y,ie,oe,firebaseService.token);if(ie==="forStars"){const ue=await capsService.requestInvoice(fe.id,firebaseService.token);if(await CapsWebApp.openInvoice(ue)!=="paid"){T({message:I("shop.problemsPackPurchase"),type:"error"});return}}else ie=="forTon"&&await z(se,fe.payload);if(_.type==="caps")if(ie=="forTon")await CapsWebApp.showPopup({message:I("shop.capsPurchased"),buttons:[{id:"ok",type:"ok"}]});else{const ue=firebaseService.getPackTopPartUrl(_.id),ge=firebaseService.getPackBottomPartUrl(_.id);await preloadPromise([ue,ge]),re&&await v();const ye=fe.subPacks.map(be=>({id:be,collectionId:_.id}));G({id:fe.id,collectionId:_.id,nextPacks:ye,multipleOpen:ye.length>0?[fe.id,...ye.map(be=>be.id)]:void 0})}else if(_.type==="coins")await CapsWebApp.showPopup({message:I("shop.gumPurchased"),buttons:[{id:"ok",type:"ok"}]}),re&&await v();else if(_.type=="boosters")ie==="forTon"&&await CapsWebApp.showPopup({message:I("shop.boostersTonPurchased"),buttons:[{id:"ok",type:"ok"}]}),re&&(await sleep(2e3),await v());else if(_.type=="skins")re&&await v(),G({skins:fe.skins});else if(_.type=="starter"&&_.starter){const ue=[];fe.subPacks&&fe.subPacks.length>0&&ue.push({type:"pack",packId:fe.subPacks[0],count:1}),ue.push({type:"gum",count:1,gum:_.starter.gum}),ue.push({type:"booster",count:_.starter.boosters}),G({collection:_,result:ue,isConfirmed:ie==="forStars"})}}catch{T({message:I("shop.problemsPackPurchase"),type:"error"})}finally{w(!1)}},[d.capsGd,v,_,z,T,I,A]),packProps:R,setPackProps:G,isLoading:C}},ticketImage="/icons/ticket.png";function getPurchasedSeasonPackData(_,d,v){if(!v||!v.season||!d)return{purchased:0,limit:-1};const A=v.seasons?.find(R=>R.id==v.season);if(!A||!A.limits)return{purchased:0,limit:-1};const C=A.limits[_];if(!C)return{purchased:0,limit:-1};const w=d.purchased;if(!w)return{purchased:0,limit:C};const T=w[_];return T?{purchased:T,limit:C}:{purchased:0,limit:C}}const PurchaseBoostersInfo=({onComplete:_,isShow:d,skinProps:v})=>{const{t:A}=useTranslation(),C=v&&v.skins.reduce((w,T)=>(w[T]?w[T]+=1:w[T]=1,w),{});return jsxRuntimeExports.jsxs(Info,{isShow:d,buttons:jsxRuntimeExports.jsx("div",{className:"pve-battle__result-buttons",children:jsxRuntimeExports.jsx(Button,{onClick:()=>_(),fullWidth:!0,children:A("shop.okBack")})}),children:[jsxRuntimeExports.jsx("div",{className:"energy-info__title",children:A("shop.purchaseCompleted")}),jsxRuntimeExports.jsx("div",{className:"purchase-boosters-info__boosters",children:C&&Object.keys(C).map(w=>jsxRuntimeExports.jsxs("div",{className:"purchase-boosters-info__item",children:[jsxRuntimeExports.jsx("img",{className:"purchase-boosters-info__img",src:"/skins/skin-"+w+".png",alt:"booster"}),jsxRuntimeExports.jsxs("div",{className:"purchase-boosters-info__number",children:["x",C[w]]})]},w))}),jsxRuntimeExports.jsx("div",{className:"purchase-boosters-info__description",children:A("shop.skinsPurchased")})]})},PurchaseStarterPackInfo=({onOpenPack:_,isShow:d,content:v})=>{const{t:A}=useTranslation(),C=w=>w.gum?"/packs/starter-gum.png":w.packId?"/packs/starter-pack.png":"/packs/starter-boosters.png";return jsxRuntimeExports.jsxs(Info,{isShow:d,buttons:jsxRuntimeExports.jsx("div",{className:"pve-battle__result-buttons",children:jsxRuntimeExports.jsx(Button,{onClick:()=>{_(v?.isConfirmed??!1,v?.result.find(w=>w.type=="pack")?.packId)},fullWidth:!0,children:v?.isConfirmed?A("shop.openStarterCapsPack"):A("shop.openStarterCapsPackLater")})}),children:[jsxRuntimeExports.jsx("div",{className:"energy-info__title",children:A("shop.purchaseCompleted")}),jsxRuntimeExports.jsx("div",{className:"purchase-boosters-info__boosters",children:v?.result&&v?.result.map(w=>jsxRuntimeExports.jsxs("div",{className:"purchase-boosters-info__item",children:[jsxRuntimeExports.jsx("img",{className:"purchase-boosters-info__img",src:C(w),alt:w.type}),jsxRuntimeExports.jsxs("div",{className:"purchase-boosters-info__number",children:["x",w.count]})]},w.type))}),jsxRuntimeExports.jsx("div",{className:"purchase-boosters-info__description",children:A(v?.isConfirmed?"shop.starterPurchased":"shop.starterPurchasedLater")})]})},PackCollection=_=>{const{appState:d}=useAppState(),[v]=useAtom(userAtom),{t:A}=useTranslation(),{buyPack:C,packProps:w,setPackProps:T,isLoading:R}=useBuy({pack:_.pack}),[G]=useAtom(tutorialAtom),I=_.pack,z=_.seasonPrice,H=firebaseService.getCollectionCapUrl(I.image),Y=getDiscount(_.pack,v),[ee,ie]=reactExports.useState(1),oe=[1,3,5,10],se=()=>{ie(oe[(oe.indexOf(ee)+1)%oe.length])},re=getPurchasedSeasonPackData(_.pack.id,d.seasonData,d.capsGd),fe=ye=>z&&re.limit>0||!z&&_.pack.hasSeasonLimit&&re.limit>0&&I.priceInTokens&&!I.priceInStars?`${re.purchased}/${re.limit}`:ye[0],ue=()=>I.type=="coins"?A("shop.buyTitle"):I.type=="starter"?A("shop.buyStarter"):A(`boosters.${I.booster?.id}`),ge=reactExports.useMemo(()=>{switch(_.pack.type){case"caps":{const ye=I.priceInCoins||I.priceInTokens&&!I.priceInStars,be=I.priceInCoins?formatNumber(d.coinsBalance):v.tokensStr??"",ve=I.priceInCoins?I.priceInCoins:I.priceInTokens??0,Me=I.priceInCoins?gumImage$2:StakedCoin,we=I.priceInCoins?"shop.buyPackForGum":"shop.buyPackForSeasonCoins",Be=I.priceInCoins?ee*I.priceInCoins>d.coinsBalance:I.priceInTokens?ee*I.priceInTokens>(d.user?.tokens??0):!0,De=_.pack.hasSeasonLimit&&re.limit>0&&re.purchased+ee>re.limit,Fe=I.priceInSeasonCoins?formatNumber(v.coinsSeasonBalance):v.tokensStr,Oe=I.priceInSeasonCoins?ticketImage:StakedCoin,Ge=I.priceInSeasonCoins??I.priceInTokens,ze=I.priceInSeasonCoins?"forSeasonCoins":"forTokens",je=I.priceInSeasonCoins?I.priceInSeasonCoins*ee>v.coinsSeasonBalance:I.priceInTokens?ee*I.priceInTokens>(d.user?.tokens??0):!0,He=()=>{I.priceInCoins?(tutorialService.completeTutorialStep("shop_pack_purchased",firebaseService.token,d.user),C(I.id,ee*I.priceInCoins,"forCoins",ee)):I.priceInTokens&&C(I.id,ee*I.priceInTokens,"forTokens",ee)};return jsxRuntimeExports.jsxs("div",{className:"pack",children:[jsxRuntimeExports.jsxs("div",{className:"pack__content",children:[jsxRuntimeExports.jsx("img",{src:H,className:"pack__image",alt:"pack"}),_.pack.properties&&!_.pack.community&&jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:fe(_.pack.properties)}),jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:_.pack.properties[1]}),jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:_.pack.properties[2]})]}),_.pack.properties&&_.pack.community&&jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:fe(_.pack.properties)}),jsxRuntimeExports.jsxs("button",{className:"pack__button pack__button--link",onClick:()=>CapsWebApp.openTelegramLink(`https://t.me/${_.pack.community?.link}`),children:[jsxRuntimeExports.jsx("img",{src:_.pack.community.image,alt:"star"}),"@",_.pack.community.link]})]}),I.id==="mystery"&&I.customCollections&&jsxRuntimeExports.jsx("div",{className:"pack__collections",children:jsxRuntimeExports.jsx(BattleCapCollectionSection,{title:A("shop.collectionsInsidePack")+":",collections:I.customCollections.map(Xe=>d.capsCollections.find($e=>$e.id==Xe)).filter(Xe=>Xe.status=="available"),onCollectionClick:()=>{}})})]}),jsxRuntimeExports.jsxs("div",{className:"pack__buy",children:[ye&&!z&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[A("shop.yourBalance"),":"]})," ",formatNumber(be),jsxRuntimeExports.jsx("img",{src:Me,className:"pack__balance-icon",alt:"gum icon"})]}),jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:R,className:"pack__button",disabled:Be||I.status!="sale"||De,onClick:()=>He(),children:[I.status=="sale"?A(we,{price:formatNumber(ee*ve)}):"SOLD OUT",I.priceInTokens&&jsxRuntimeExports.jsx("img",{src:StakedCoin,alt:"ticket",className:"packs__ticket-image"}),G==="shop"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pack__finger",alt:"finger"})]}),jsxRuntimeExports.jsxs("button",{className:"pack__quantity-button",onClick:se,children:["x",ee]})]})]}),AppConfig.shopMode==ShopMode.STARS&&I.priceInStars&&!z&&jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsx(Button,{fullWidth:!0,isLoading:R,disabled:I.status!="sale",onClick:()=>{C(I.id,ee*getPriceInStars(I,Y),"forStars",ee)},children:I.status=="sale"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[A("shop.buyPackForStars",{price:ee*getPriceInStars(I,Y)}),jsxRuntimeExports.jsx("img",{src:starImage,alt:"star"})]}):"SOLD OUT"}),jsxRuntimeExports.jsxs("button",{className:"pack__quantity-button",onClick:se,children:["x",ee]})]}),AppConfig.shopMode==ShopMode.TON&&I.priceInTon&&!z&&jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsx(Button,{fullWidth:!0,isLoading:R,disabled:I.status!="sale",onClick:()=>{C(I.id,ee*getPriceInTon(I,Y),"forTon",ee)},children:I.status=="sale"?A("shop.buyPackForTon",{price:ee*getPriceInTon(I,Y)/1e9}):"SOLD OUT"}),jsxRuntimeExports.jsxs("button",{className:"pack__quantity-button",onClick:se,children:["x",ee]})]}),z&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[A("shop.yourBalance"),":"]})," ",Fe," ",jsxRuntimeExports.jsx("img",{src:Oe,alt:"ticket"})]}),jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:R,disabled:je||I.status!="sale"||De,onClick:()=>C(I.id,ee*(Ge??0),ze,ee),children:[A("shop.buyPackForSeasonCoins",{price:formatNumber(ee*(Ge??-1))}),jsxRuntimeExports.jsx("img",{src:Oe,alt:"ticket",className:"packs__ticket-image"})]}),jsxRuntimeExports.jsxs("button",{className:"pack__quantity-button",onClick:se,children:["x",ee]})]})]})]})]})}case"skins":{const ye=()=>{const be=I.skin?.source;if(!be||!d.capsGd)return"";const ve=d.capsGd.skins.types[be];return ve?"shop.skinTypes."+ve.type:""};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pack",children:[jsxRuntimeExports.jsxs("div",{className:"pack__content",children:[jsxRuntimeExports.jsxs("div",{className:"pack__gum-title",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{className:"pack__skin-title--yellow",children:[A("shop.buySkins"),":"," "]}),I.title]}),jsxRuntimeExports.jsx("div",{className:"pack__booster-description",children:I.skin?.description[d.user?.caps_language??"en"]})]}),jsxRuntimeExports.jsx("div",{className:"pack__gum-image-wrapper",children:jsxRuntimeExports.jsx("img",{src:H,className:"pack__gum-image",alt:"pack"})}),jsxRuntimeExports.jsxs("div",{className:"pack__skin-description ",children:[A("shop.skinType"),": ",A(ye()),jsxRuntimeExports.jsxs("div",{className:"battle-cap-collections",children:[I.skin?.skinApplicableFor&&jsxRuntimeExports.jsx(BattleCapCollectionSection,{title:A("shop.skinApplicableFor"),collections:I.skin?.skinApplicableFor.map(be=>d.capsCollections.find(ve=>ve.id==be)),onCollectionClick:()=>{}}),!I.skin?.skinApplicableFor&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"battle-cap-collection-section__title",children:A("shop.skinApplicableFor")}),A("shop.skinApplicableForEverything")]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"pack__buy",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[A("shop.yourBalance"),":"]})," ",v.tokensStr," ",jsxRuntimeExports.jsx("img",{src:StakedCoin,alt:"ticket"})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:R,disabled:(I.priceInTokens??0)>v.tokens,onClick:()=>C(I.id,I.priceInTokens,"forTokens"),children:[A("shop.buyPackForSeasonCoins",{price:formatNumber(I.priceInTokens??-1)}),jsxRuntimeExports.jsx("img",{src:StakedCoin,alt:"ticket",className:"packs__ticket-image"})]})]})})]}),jsxRuntimeExports.jsx(PurchaseBoostersInfo,{isShow:!!w?.skins,skinProps:w,onComplete:()=>{T(null)}})]})}case"coins":default:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pack",children:[jsxRuntimeExports.jsxs("div",{className:"pack__gum-title",children:[ue(),I.type==="boosters"&&jsxRuntimeExports.jsx("div",{className:"pack__booster-description",children:A(`boosters.${I.booster?.id}-description`)}),I.type=="starter"&&jsxRuntimeExports.jsx("div",{className:"pack__booster-description",children:A("shop.starterDescription")})]}),jsxRuntimeExports.jsx("div",{className:"pack__gum-image-wrapper",children:jsxRuntimeExports.jsx("img",{src:H,className:"pack__gum-image",alt:"pack"})}),jsxRuntimeExports.jsxs("div",{className:"pack__buttons ",children:[z&&re.limit>0&&jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--gum",children:`${re.purchased}/${re.limit}`}),I.type=="starter"&&_.pack.properties&&I.starter&&jsxRuntimeExports.jsxs("div",{className:"pack__buttons",children:[jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:fe(_.pack.properties)}),jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:_.pack.properties[1]}),jsxRuntimeExports.jsx("div",{className:"pack__button pack__button--cap",children:_.pack.properties[2]})]}),I.type!="starter"&&jsxRuntimeExports.jsxs("div",{className:"pack__button pack__button--gum",children:["x",I.booster?.count,I.coins&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{className:"pack__gum-icon",src:gumImage$2,alt:"gum icon"})," ",I.coins?formatNumber(I.coins):0]})]})]}),jsxRuntimeExports.jsxs("div",{className:"pack__buy",children:[AppConfig.shopMode==ShopMode.STARS&&I.priceInStars&&!z&&jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:R,onClick:()=>C(I.id,getPriceInStars(I,Y),"forStars"),children:[A("shop.buyPackForStars",{price:getPriceInStars(I,Y)}),jsxRuntimeExports.jsx("img",{src:starImage,alt:"star"})]}),AppConfig.shopMode==ShopMode.TON&&I.priceInTon&&!z&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,isLoading:R,onClick:()=>C(I.id,getPriceInTon(I,Y),"forTon"),children:A("shop.buyPackForTon",{price:getPriceInTon(I,Y)/1e9})}),I.priceInCoins&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[A("shop.yourBalance"),":"]})," ",formatNumber(d.coinsBalance),jsxRuntimeExports.jsx("img",{src:gumImage$2,className:"pack__balance-icon",alt:"gum icon"})]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,isLoading:R,disabled:I.priceInCoins*ee>d.coinsBalance,onClick:()=>{C(I.id,ee*I.priceInCoins,"forCoins")},children:A("shop.buyPackForGum",{price:formatNumber(ee*I.priceInCoins)})})]}),z&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[A("shop.yourBalance"),":"]})," ",formatNumber(v.coinsSeasonBalance)," ",jsxRuntimeExports.jsx("img",{src:ticketImage,alt:"ticket"})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:R,disabled:(I.priceInSeasonCoins??-1)>v.coinsSeasonBalance||re.limit>0&&re.purchased+ee>re.limit,onClick:()=>C(I.id,I.priceInSeasonCoins,"forSeasonCoins"),children:[A("shop.buyPackForSeasonCoins",{price:formatNumber(I.priceInSeasonCoins??-1)}),jsxRuntimeExports.jsx("img",{src:ticketImage,alt:"ticket",className:"packs__ticket-image"})]})]})]})]}),jsxRuntimeExports.jsx(PurchaseBoostersInfo$1,{isShow:w==="booster",onComplete:()=>{T(null),_.onBack()},okText:A("shop.okBack")}),jsxRuntimeExports.jsx(PurchaseStarterPackInfo,{isShow:!!w,content:w,onOpenPack:(ye,be)=>{be&&I.starter?.pack&&ye?T({id:be,collectionId:I.starter.pack}):(T(null),_.onBack())}})]})}},[_,H,I,z,A,d.coinsBalance,v.coinsSeasonBalance,R,Y,C,ee,w]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ge,w?.id>"-1"&&jsxRuntimeExports.jsx(Pack,{...w,onFinished:()=>T(null)})]})},badgePackImage="/icons/badge-pack.png",discountImage="/icons/discount.png",soldoutImage="/icons/sold-out.png",useDragScroll=()=>{const _=React.useRef(null),d=React.useCallback(w=>{if(!_.current)return;const T={left:_.current.scrollLeft,top:_.current.scrollTop,x:w.clientX,y:w.clientY},R=I=>{const z=I.clientX-T.x,H=I.clientY-T.y;_.current&&(_.current.scrollTop=T.top-H,_.current.scrollLeft=T.left-z),A(_.current)},G=()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",G),C(_.current)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",G)},[]),v=React.useCallback(w=>{if(!_.current)return;const T=w.touches[0],R={left:_.current.scrollLeft,top:_.current.scrollTop,x:T.clientX,y:T.clientY},G=z=>{const H=z.touches[0],Y=H.clientX-R.x,ee=H.clientY-R.y;_.current&&(_.current.scrollTop=R.top-ee,_.current.scrollLeft=R.left-Y),A(_.current)},I=()=>{document.removeEventListener("touchmove",G),document.removeEventListener("touchend",I),C(_.current)};document.addEventListener("touchmove",G),document.addEventListener("touchend",I)},[]),A=w=>{w!==null&&(w.style.cursor="grabbing",w.style.userSelect="none")},C=w=>{w!==null&&(w.style.cursor="grab",w.style.removeProperty("user-select"))};return React.useEffect(()=>{if(!_.current)return;const w=_.current;return w.addEventListener("mousedown",d),w.addEventListener("touchstart",v),()=>{w.removeEventListener("mousedown",d),w.removeEventListener("touchstart",v)}},[_.current]),[_]},groupGradesMapLowestFirst=new Map([["common","Common & Common+"],["rare","Rare & Rare+"],["epic","Epic & Epic+"],["legend","Legend & Legend+"],["diamond","Diamond"]]),groupGradesMapHighestFirst=new Map([...groupGradesMapLowestFirst].reverse()),groupCapsByGrade=(_,d)=>{const v=new Map,A=d?groupGradesMapHighestFirst:groupGradesMapLowestFirst;for(const[,C]of A)v.set(C,[]);for(const C of _){const w=A.get(getBaseGrade(C.grade).toLowerCase());w&&(v.has(w)?v.get(w)?.push(C):v.set(w,[C]))}for(const C of v)C[1].length===0&&v.delete(C[0]);return v},convertGroupCapsByToBackend=_=>{switch(_){case"price-highest":return{orderByField:"price",directionStr:"desc"};case"number":return{orderByField:"number",directionStr:"asc"};default:return{orderByField:"price",directionStr:"asc"}}},useSortCaps=(_,d)=>{const{t:v}=useTranslation(),[A,C]=reactExports.useState(!1),[w,T]=useStorage("marketplaceSort","price"),R=reactExports.useMemo(()=>[{labelOption:v("profile.priceHighest"),labelSelect:v("profile.price"),value:"price-highest"},{labelOption:v("profile.priceLowest"),labelSelect:v("profile.price"),value:"price"},{labelOption:v("profile.number"),labelSelect:v("profile.number"),value:"number"}],[v]),G=reactExports.useCallback(async({lastCap:ee,groupCapsBy:ie,filter:oe})=>{const{orderByField:se,directionStr:re}=convertGroupCapsByToBackend(ie??w),{caps:fe,lastDocument:ue}=await firebaseService.getCapsForSale(se,re,oe,ee);if(fe.length>0){const ge=fe.map(ye=>firebaseService.getCollectionCapUrl(ye.url));await preloadPromise(ge)}return{caps:fe,lastDocument:ue}},[w]),I=reactExports.useCallback(async({groupCapsBy:ee,filter:ie})=>(T(ee),await G({groupCapsBy:ee,filter:ie})),[G,T]),z=reactExports.useCallback(async({lastCap:ee,filter:ie})=>{C(!0);const oe=await G({lastCap:ee,filter:ie});return C(!1),oe},[G]),H=reactExports.useMemo(()=>d==="loading"?new Map([["",_]]):w==="grade"?groupCapsByGrade(_,!1):w==="grade-highest"?groupCapsByGrade(_,!0):new Map([["",_]]),[w,d,_]),Y=reactExports.useMemo(()=>convertGroupCapsByToBackend(w),[w]);return{groupedCaps:[...H],groupCapsBy:w,groupCapsByToBackend:Y,setGroupCapsBy:T,groupCapsOptions:R,loadCapsByGroup:I,loadMoreCaps:z,isMoreLoading:A,loadCaps:G}},BattleCapCollections=({standardCollections:_,communityCollections:d,preferences:v,onCollectionClick:A})=>{const{t:C}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"battle-cap-collections",children:[jsxRuntimeExports.jsx(BattleCapCollectionSection,{title:C("battle.standard"),collections:_,preferences:v,onCollectionClick:A}),jsxRuntimeExports.jsx(BattleCapCollectionSection,{title:C("battle.communities"),collections:d,preferences:v,onCollectionClick:A})]})},BattleAnyCap=({isSelected:_,onClick:d})=>{const{t:v}=useTranslation();return jsxRuntimeExports.jsx("div",{className:`battle-any-caps ${_?"battle-any-caps--selected":""}`,onClick:d,children:v("battle.anyCaps")})},clearIcon="/icons/clear.svg",SearchInput=({defaultValue:_,placeholder:d,onSearch:v,pattern:A,icon:C})=>{const[w,T]=reactExports.useState(_||""),R=I=>{const z=I.target.value;(!A||A.test(z))&&(T(z),v&&v(z))},G=()=>{T(""),v&&v("")};return jsxRuntimeExports.jsxs("div",{className:"search-bar__container",children:[jsxRuntimeExports.jsx("input",{type:"number",pattern:"[0-9]",placeholder:d,value:w,onChange:R,className:"search-bar__input"}),jsxRuntimeExports.jsx("div",{className:"search-bar__search-icon-wrapper",children:C}),w&&jsxRuntimeExports.jsx("div",{className:"search-bar__clear-icon-wrapper",onClick:G,children:jsxRuntimeExports.jsx("img",{src:clearIcon,alt:"clear",width:20,height:20})})]})},hashTag="/icons/hashtag.svg",GRADES_IDS=Object.keys(GRADE_NAMES),MAX_FILTER=3,BattleFilters=({onApply:_,filter:d,mode:v="pvp",allowCollectionNumbers:A=!0,allowCapNumberSearch:C=!0})=>{const{appState:w}=useAppState(),{t:T}=useTranslation(),[R,G]=reactExports.useState({grades:new Set(d?.grades?.filter(ye=>GRADE_NAMES[ye])),collections:d?.collections||new Map,capNumber:d?.capNumber||0}),[I,z]=reactExports.useState(null),H=reactExports.useMemo(()=>I?R.collections.get(I.id)||[]:[],[R,I]),Y=reactExports.useMemo(()=>w.capsCollections.filter(ye=>["sold-out","available"].includes(ye.status)&&!ye.isCommunity),[w.capsCollections]),ee=reactExports.useMemo(()=>w.capsCollections.filter(ye=>["sold-out","available"].includes(ye.status)&&ye.isCommunity),[w.capsCollections]),ie=()=>{const ye=Array.from(R.grades).reduce((be,ve)=>(be.push(ve),be),[]);_({grades:ye.length>0?ye:void 0,collections:R.collections.size>0?R.collections:void 0,capNumber:R.capNumber!==0?R.capNumber:void 0})},oe=ye=>{G(be=>{const ve=new Set(be.grades);return ve.has(ye)?ve.delete(ye):ve.size<MAX_FILTER&&ve.add(ye),{...be,grades:ve}})},se=ye=>{if(R.collections.has(ye.id)){G(be=>{const ve={...be};return R.collections.delete(ye.id),ve});return}else{if(R.collections.size>=MAX_FILTER)return;G(be=>{const ve={...be};return be.collections.set(ye.id,[]),ve})}A&&z(ye)},re=ye=>{I!==null&&G(be=>{const ve=be.collections.get(I.id)??[],Me=new Map(be.collections);if(ve.includes(ye)){const we=ve.filter(Be=>Be!==ye);if(we.length===0)return Me.set(I.id,[]),{...be,collections:Me};Me.set(I.id,we)}else{if(ve.length>=MAX_FILTER)return be;Me.set(I.id,[...ve,ye])}return{...be,collections:Me}})},fe=()=>{I!==null&&G(ye=>{const be={...ye};return be.collections.set(I.id,[]),be})},ue=()=>{I!==null&&G(ye=>{const be={...ye};return be.collections.delete(I.id),be})},ge=ye=>{G(be=>{const ve={...be};return ve.capNumber=Number(ye),ve})};return jsxRuntimeExports.jsxs("div",{className:`battle-filters ${v==="exchange"?"battle-bg--exchange":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"battle-filters__content",children:[C&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"battle-filters__title",children:T("battle.filterByCapNumber")}),jsxRuntimeExports.jsx(SearchInput,{placeholder:T("battle.searchPlaceholder"),defaultValue:d?.capNumber?.toString(),onSearch:ge,pattern:/^\d*$/,icon:jsxRuntimeExports.jsx("img",{src:hashTag,alt:"Hashtag Icon",width:20,height:20})})]}),jsxRuntimeExports.jsxs("div",{className:"battle-filters__filter",children:[jsxRuntimeExports.jsxs("div",{className:"battle-filters__title",children:[T("battle.filterByGrade")," ",R.grades.size,"/",MAX_FILTER," "]}),jsxRuntimeExports.jsx("div",{className:"battle-filters__items",children:GRADES_IDS.map(ye=>jsxRuntimeExports.jsx("button",{className:`battle-filters__item-cap  ${R.grades.has(ye)?`battle-filters__item--${ye.toLocaleLowerCase()}`:""}`,onClick:()=>oe(ye),children:GRADE_NAMES[ye]},ye))})]}),jsxRuntimeExports.jsxs("div",{className:"battle-filters__title",children:[T("battle.filterByCollection")," ",R.collections.size,"/",MAX_FILTER]}),jsxRuntimeExports.jsx(BattleCapCollections,{standardCollections:Y,communityCollections:ee,preferences:R.collections,onCollectionClick:se})]}),jsxRuntimeExports.jsx("div",{className:"battle-filters__button-wrapper",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:ie,children:T("battle.apply")})}),jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:()=>z(null),onClose:ue,isShow:!!I,bgType:v==="exchange"?"black":"default",children:jsxRuntimeExports.jsx(BattleFilterClosableSheetContent,{selectedCollectionNumbers:H,selectedCollection:I,onSelect:()=>z(null),onAnyCapClick:fe,onCapClick:re})})]})},BattleFilterClosableSheetContent=({selectedCollectionNumbers:_,selectedCollection:d,onSelect:v,onAnyCapClick:A,onCapClick:C})=>{const{t:w}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"battle-preference__choose-number",children:[d&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"battle-preference__title",children:[w("battle.chooseNumber")," ",_.length?`${_.length}/${MAX_FILTER}`:""]}),jsxRuntimeExports.jsx("div",{className:"profile__collection",children:jsxRuntimeExports.jsx("div",{className:"profile__collection-item",children:jsxRuntimeExports.jsxs("div",{className:"battle-preference__caps",children:[jsxRuntimeExports.jsx(BattleAnyCap,{isSelected:_.length===0,onClick:A}),[...Array(d.size)].map((T,R)=>{const G=`${R+1}.png`,I=`collections/${d.id}/${G}`,z={id:d.id+"/"+G,createdAt:Timestamp.now(),url:I,number:-1,collection:d.title,collectionId:d.id,collectionNumber:R+1,grade:"",gradeNumber:-1,owner:"",status:"READY",packId:"",isNft:!1};return jsxRuntimeExports.jsx("div",{className:`${d.id==="notcoin"?"notcoin":""}`,children:jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:z,className:`${_.includes(R+1)?"battle-preference__cap--selected":""}`,onClickCallback:()=>C(R+1)})},G)})]})})})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,className:"battle-preference__choose-number-button",onClick:v,children:[w("battle.chooseCaps")," ",_.length===0?d?.size:_.length]})]})},settingsImage="/icons/settings.svg",plusIcon="/icons/plus.svg",TonBalanceBadge=()=>{const[_]=useAtom(userAtom),d=useNavigate(),[v]=useTonConnectUI(),A=()=>{v.connected?d("/settings"):v.openModal()};return jsxRuntimeExports.jsxs("div",{className:"ton-balance-badge",children:[jsxRuntimeExports.jsx("img",{src:tonImage,alt:"ton",className:"ton-balance-badge__img"}),jsxRuntimeExports.jsx("span",{className:"ton-balance-badge__balance",children:roundNumber(_.tonBalance/1e9).toFixed(2)}),jsxRuntimeExports.jsx("button",{onClick:A,className:"ton-balance-badge__button",children:jsxRuntimeExports.jsx("img",{src:plusIcon,alt:"more",width:14,height:14})})]})},ShopCaps=({onBack:_})=>{const{loadingState:d,setLoadingState:v,isSkeletonShow:A,isDataShow:C}=useSkeletonLoading(),{t:w}=useTranslation(),{appState:T,setAppState:R,onUserUpdate:G}=useAppState(),[I,z]=reactExports.useState({caps:[],selected:T.cap??null}),{groupCapsBy:H,groupCapsByToBackend:Y,groupCapsOptions:ee,groupedCaps:ie,loadMoreCaps:oe,loadCapsByGroup:se,isMoreLoading:re}=useSortCaps(I.caps,d),fe=reactExports.useCallback(()=>{I.selected?(z({...I,selected:null}),R({...T,cap:void 0})):I.isFilterShow?z({...I,isFilterShow:!1}):_&&_()},[I,_,T,R]);useBackClick(fe,!!I.isFilterShow||!!_||!!I.selected);const ue=reactExports.useCallback(async Me=>{const we=await oe({lastCap:Me,filter:I.filter});z({...I,caps:[...I.caps,...we.caps],lastCap:we.lastDocument})},[oe,I]),ge=reactExports.useCallback(async({value:Me,isLoadingChange:we=!0})=>{if(Me===H)return;we&&v("loading");const Be=await se({groupCapsBy:Me??H,filter:I.filter});z({...I,selected:null,caps:Be.caps,lastCap:Be.lastDocument}),we&&v("skeleton-to-data")},[H,se,v,I]),ye=async Me=>{v("loading");const{orderByField:we,directionStr:Be}=Y,De=await firebaseService.getCapsForSale(we,Be,Me),Fe=De.caps,Oe=De.lastDocument,Ge=await firebaseService.getAllCollections();if(Fe.length>0){const ze=Fe.map(Xe=>firebaseService.getCollectionCapUrl(Xe.url)),je=Ge.map(Xe=>[...Array(Xe.size)].map(($e,We)=>{const nt=`collections/${Xe.id}/${We+1}.png`;return firebaseService.getCollectionCapUrl(nt)})).flat(),He=ze.concat(...je);await preloadPromise(He)}z(ze=>({...ze,caps:Fe,lastCap:Oe,isFilterShow:!1,filter:Me})),v("skeleton-to-data")};reactExports.useEffect(()=>{ye()},[]);const be=async Me=>{const we=await firebaseService.getCap(Me);return await G(),z({...I,selected:we}),we},ve=async Me=>{z(we=>({...we,isFilterShow:!1})),await ye(Me?.filter)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"shop-caps",children:jsxRuntimeExports.jsxs("div",{className:"skeleton-wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"shop__title",children:[jsxRuntimeExports.jsx("div",{className:"shop__inner",children:jsxRuntimeExports.jsx(TonBalanceBadge,{})}),jsxRuntimeExports.jsxs("div",{className:"shop__inner",children:[jsxRuntimeExports.jsx(Select,{className:"shop-caps__select",value:H,options:ee,onChange:Me=>ge({value:Me}),children:jsxRuntimeExports.jsx("img",{src:switchImage,alt:"switch"})}),jsxRuntimeExports.jsx("button",{onClick:()=>z({...I,isFilterShow:!0}),className:"shop-caps__settings",children:jsxRuntimeExports.jsx("img",{src:settingsImage,alt:"settings"})})]})]}),A&&jsxRuntimeExports.jsx("div",{style:I.selected?{zIndex:-1}:{},className:`profile__caps-group skeleton fade-out fade--long ${d==="skeleton-to-data"?"visible":""}`,children:jsxRuntimeExports.jsx("div",{className:"profile__caps-list",children:[...Array(10)].map((Me,we)=>jsxRuntimeExports.jsx(CapElementSkeleton,{size:"medium"},we))})}),ie.map(([Me,we])=>jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:`profile__caps-list fade-in ${C?"visible":""}`,children:we.map(Be=>jsxRuntimeExports.jsx(CapElement,{isPriceShow:!0,variant:"medium",cap:Be,onClickCallback:()=>{z({...I,selected:Be})}},Be.id))})},Me)),I.lastCap!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button",color:"transparent",size:"small",onClick:()=>ue(I.lastCap),isLoading:re,children:w("battle.loadMore")})]})}),I.selected&&reactDomExports.createPortal(jsxRuntimeExports.jsx(CapInfo,{cap:I.selected,onCapUpgrade:be,capsGd:T.capsGd,onBackPressed:Me=>{z({...I,selected:null}),R({...T,cap:void 0}),Me&&ge({})}}),document.getElementById("root")),I.isFilterShow&&reactDomExports.createPortal(jsxRuntimeExports.jsx(BattleFilters,{filter:I.filter,onApply:Me=>ve({filter:Me})}),document.getElementById("root"))]})},capsCommonIcon="/icons/cap-common.png",capsRareIcon="/icons/cap-rare.png",capsEpicIcon="/icons/cap-epic.png",capsLegendIcon="/icons/cap-legend.png",capsDiamondIcon="/icons/cap-diamond.png",ShopBanner=({onClick:_,dealsToday:d})=>{const{t:v}=useTranslation(),A=[capsCommonIcon,capsRareIcon,capsEpicIcon,capsLegendIcon,capsDiamondIcon],C=d==null;return jsxRuntimeExports.jsxs("div",{className:"shop-banner",children:[jsxRuntimeExports.jsx("div",{className:"shop-banner__images",children:A.map((w,T)=>jsxRuntimeExports.jsx("img",{src:w,alt:"cap",className:"shop-banner__image",style:{zIndex:A.length-T}},T))}),jsxRuntimeExports.jsxs("div",{className:"shop-banner__info",children:[jsxRuntimeExports.jsx("div",{className:"shop-banner__title",children:v("shop.banner.buyCapsTitle")}),C?jsxRuntimeExports.jsx("div",{className:"shop-banner__subtitle shop-banner__subtitle--skeleton"}):jsxRuntimeExports.jsx("div",{className:"shop-banner__subtitle",children:v("shop.banner.dealsToday",{count:d})})]}),jsxRuntimeExports.jsx(Button,{size:"small",color:"green",onClick:_,children:v("shop.banner.viewButton")})]})},Shop=()=>{const{appState:_}=useAppState(),{t:d}=useTranslation(),v=useLocation(),A=useNavigate(),[C]=useAtom(userAtom),w=v.state,T=w?.packIdToOpen?_.packCollections.find(je=>je.id===w.packIdToOpen):void 0,[R,G]=reactExports.useState({mode:T?"packs":"all",isCapsWindowShow:!!_.cap,selected:T}),[I]=useDragScroll(),[z]=useAtom(tutorialAtom),[H,Y]=reactExports.useState();reactExports.useEffect(()=>{firebaseService.getTodaySalesCount().then(je=>Y(je)).catch(je=>console.error("Failed to load today sales count",je))},[]),reactExports.useEffect(()=>{w?.packIdToOpen&&A(v.pathname,{replace:!0,state:w.returnTo?{returnTo:w.returnTo}:void 0})},[A,v.pathname,w]);const ee=reactExports.useCallback(()=>{w?.returnTo?A(w.returnTo,{replace:!0}):G(je=>({...je,selected:void 0,isSelectedSeasonPrice:!1}))},[w?.returnTo,A]),ie=reactExports.useCallback(()=>{R.selected&&ee()},[R.selected,ee]);useBackClick(ie,!!R.selected);const oe=(je,He=!1)=>{const Xe=firebaseService.getCollectionCapUrl(je.image),$e=getDiscount(je,C),We=getDiscountImage($e),nt=He&&(je.priceInSeasonCoins||je.priceInTokens);return jsxRuntimeExports.jsxs("button",{className:`packs__item ${je.isTutorialShow?"packs__item--tutorial":""}`,onClick:()=>G({...R,selected:je,isSelectedSeasonPrice:He}),children:[je.isTutorialShow&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger shop__finger",alt:"finger"}),jsxRuntimeExports.jsxs("div",{className:"packs__image",children:[jsxRuntimeExports.jsx("img",{className:"packs__image",alt:"packs image",src:Xe}),je.grade==="Common"&&jsxRuntimeExports.jsx("img",{className:"packs__best-deal",src:badgePackImage,alt:"best deal image"}),je.id==="starter"&&jsxRuntimeExports.jsx("img",{className:"packs__discount",src:discountImage,alt:"discount image"}),je.status==="sold-out"&&jsxRuntimeExports.jsx("img",{className:"packs__sold-out",src:soldoutImage,alt:"sold out image"}),We&&jsxRuntimeExports.jsx("img",{className:"packs__discount",src:We,alt:"discount image"})]}),je.title&&jsxRuntimeExports.jsxs("div",{className:"packs__type",children:[je.title,je.booster?.count?` x${je.booster?.count}`:""]}),je.coins&&jsxRuntimeExports.jsxs("div",{className:"packs__type",children:[je.coins?formatNumber(je.coins):0," ",jsxRuntimeExports.jsx("img",{className:"packs__type-gum-icon",src:gumImage$2,alt:"gum icon"})]}),je.grade&&!je.title&&jsxRuntimeExports.jsxs("div",{className:"packs__type",children:[je.grade," ",d("pack")]}),nt&&je.priceInSeasonCoins&&jsxRuntimeExports.jsxs("div",{className:"packs__amount",children:[je.priceInSeasonCoins," ",jsxRuntimeExports.jsx("img",{src:ticketImage,alt:"ticket"})]}),je.priceInTokens&&(nt||!je.priceInStars)&&jsxRuntimeExports.jsxs("div",{className:"packs__amount",children:[je.priceInTokens," $CG"]}),je.priceInCoins&&!nt&&jsxRuntimeExports.jsxs("div",{className:"packs__amount",children:[je.priceInCoins," $GUM"]}),!je.priceInCoins&&je.priceInTon&&AppConfig.shopMode==ShopMode.TON&&!nt&&jsxRuntimeExports.jsxs("div",{className:"packs__amount",children:[getPriceInTon(je,$e)/1e9," TON"]}),!je.priceInCoins&&je.priceInStars&&AppConfig.shopMode==ShopMode.STARS&&!nt&&jsxRuntimeExports.jsxs("div",{className:"packs__amount",children:[getPriceInStars(je,$e)," ",jsxRuntimeExports.jsx("img",{src:starImage,alt:"star"})]})]},je.id)},se=[],re=_.packCollections.find(je=>je.type=="starter");re&&getIsStarterPackAvailable(C)&&se.push(oe(re));const fe=_.capsGd?.seasons?.find(je=>je.id==_.capsGd?.season);fe&&se.push(...fe.sessonPackCollections.map(je=>oe(_.packCollections.find(He=>He.id==je),fe.isShopEnabled)));const ue=_.packCollections.filter(je=>je.type=="caps"&&je.status!=="not-available"&&!je.community).sort((je,He)=>je.status==="sale"&&He.status!=="sale"?-1:je.status!=="sale"&&He.status==="sale"?1:je.order-He.order),ge=z==="shop"&&R.mode==="packs"?ue.map(je=>oe({...je,isTutorialShow:je.id==="common-caps"})):ue.map(je=>oe(je)),ye=ue.filter(je=>je.status=="sale").map(je=>oe(je)),be=ue.filter(je=>je.status=="sold-out").map(je=>oe(je)),ve=_.packCollections.filter(je=>je.type=="caps"&&je.status!=="not-available"&&je.community).sort((je,He)=>je.status==="sale"&&He.status!=="sale"?-1:je.status!=="sale"&&He.status==="sale"?1:je.order-He.order),Me=ve.map(je=>oe(je)),we=ve.filter(je=>je.status=="sale").map(je=>oe(je)),Be=ve.filter(je=>je.status=="sold-out").map(je=>oe(je)),Fe=_.packCollections.filter(je=>je.type=="boosters"&&je.status=="sale").sort((je,He)=>je.order-He.order).map(je=>oe(je)),Ge=_.packCollections.filter(je=>je.type=="skins"&&je.status=="sale").sort((je,He)=>je.order-He.order).map(je=>oe(je)),ze=_.packCollections.filter(je=>je.type=="coins"&&je.status=="sale").sort((je,He)=>je.order-He.order).map(je=>oe(je));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`shop ${z==="shop"&&!R.selected?"tutorial__dimmer":""}`,children:[jsxRuntimeExports.jsx(ShopBanner,{onClick:()=>G({...R,isCapsWindowShow:!0}),dealsToday:H}),jsxRuntimeExports.jsxs("div",{className:"shop__modes-filter",ref:I,children:[jsxRuntimeExports.jsx("button",{onClick:()=>G({...R,mode:"all"}),className:`profile__caps-filters-item ${R.mode=="all"?"profile__caps-filters-item--active":""}`,children:d("shop.all")}),jsxRuntimeExports.jsxs("button",{onClick:()=>{tutorialService.completeTutorialStep("shop_packs_opened",firebaseService.token,_.user),G({...R,mode:"packs"})},className:`profile__caps-filters-item ${R.mode=="packs"?"profile__caps-filters-item--active":""}  ${z==="shop"&&R.mode!=="packs"?"profile__caps-filters-item--tutorial":""}`,children:[d("shop.buyPacks"),z==="shop"&&R.mode!=="packs"&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger shop__finger",alt:"finger"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>G({...R,mode:"community"}),className:`profile__caps-filters-item ${R.mode=="community"?"profile__caps-filters-item--active":""}`,children:d("shop.buyCommunityPacks")}),jsxRuntimeExports.jsx("button",{onClick:()=>G({...R,mode:"coins"}),className:`profile__caps-filters-item ${R.mode=="coins"?"profile__caps-filters-item--active":""}`,children:d("shop.buyGum")}),jsxRuntimeExports.jsx("button",{onClick:()=>G({...R,mode:"skins"}),className:`profile__caps-filters-item ${R.mode=="skins"?"profile__caps-filters-item--active":""}`,children:d("shop.buySkins")}),jsxRuntimeExports.jsx("button",{onClick:()=>G({...R,mode:"boosters"}),className:`profile__caps-filters-item ${R.mode=="boosters"?"profile__caps-filters-item--active":""}`,children:d("shop.buyBoosters")})]}),R.mode=="all"&&jsxRuntimeExports.jsxs("div",{children:[se.length>0&&jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buySeason")}),jsxRuntimeExports.jsx("div",{className:"packs",children:se})]}),jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyPacks")}),jsxRuntimeExports.jsx("div",{className:"packs",children:ye})]}),jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyCommunityPacks")}),jsxRuntimeExports.jsx("div",{className:"packs",children:we})]}),jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyGum")}),jsxRuntimeExports.jsx("div",{className:"packs",children:ze})]}),jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buySkins")}),jsxRuntimeExports.jsx("div",{className:"packs",children:Ge})]}),jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyBoosters")}),jsxRuntimeExports.jsx("div",{className:"packs",children:Fe})]}),jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.soldOut")}),jsxRuntimeExports.jsx("div",{className:"packs",children:[...be,...Be]})]})]}),R.mode=="packs"&&jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyPacks")}),jsxRuntimeExports.jsx("div",{className:"packs",children:ge})]}),R.mode=="community"&&jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyCommunityPacks")}),jsxRuntimeExports.jsx("div",{className:"packs",children:Me})]}),R.mode=="coins"&&jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyGum")}),jsxRuntimeExports.jsx("div",{className:"packs",children:ze})]}),R.mode=="skins"&&jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buySkins")}),jsxRuntimeExports.jsx("div",{className:"packs",children:Ge})]}),R.mode=="boosters"&&jsxRuntimeExports.jsxs("div",{className:"shop__group",children:[jsxRuntimeExports.jsx("div",{className:"shop__title",children:d("shop.buyBoosters")}),jsxRuntimeExports.jsx("div",{className:"shop__description",children:d("shop.boosterDescription")}),jsxRuntimeExports.jsx("div",{className:"packs",children:Fe})]})]}),jsxRuntimeExports.jsx(NavBar,{}),R.isCapsWindowShow&&jsxRuntimeExports.jsx("div",{className:"shop__caps-window",children:jsxRuntimeExports.jsx(ShopCaps,{onBack:()=>G({...R,isCapsWindowShow:!1})})}),R.selected&&jsxRuntimeExports.jsx(PackCollection,{pack:R.selected,seasonPrice:R.isSelectedSeasonPrice??!1,onBack:ee})]})},Debug=()=>{const _=useNavigate(),{appState:d}=useAppState(),[v,A]=reactExports.useState({}),{onUserUpdate:C}=useAppState();reactExports.useEffect(()=>{T()},[]);async function w(ue,ge){await CapsWebApp.showPopup({message:ue,buttons:[{id:"confirm",type:"ok"},{id:"cancel",type:"cancel"}]})=="confirm"&&ge()}const T=async()=>{firebaseService.getUser(firebaseService.user.uid).then(ue=>{A({...v,user:ue})})};useBackClick(()=>{_("/home")});const G=async ue=>{const ge=await fetch("/functions/special-skin",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({id:ue})});return ge.status==200?(await C(),ge.json()):await Promise.reject()},I=async()=>{const ue=await fetch("/functions/parse-tearofnostalgia",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},z=async()=>{const ue=await fetch("/functions/reset-pve",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},H=async()=>{const ue=await fetch("/functions/reset-onboarding",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},Y=async()=>{const ue=await fetch("/functions/show-tutorial",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},ee=async()=>{const ue=await fetch("/functions/reset-tasks",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},ie=async()=>{const ue=await fetch("/functions/reset-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},oe=async()=>{const ue=await fetch("/functions/delete-user",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},se=async()=>{const ue=await fetch("/functions/become-millionaire",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},re=async()=>{const ue=await fetch("/functions/charge-energy",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()},fe=async()=>{const ue=await fetch("/functions/reset-madness-pr",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${firebaseService.token}`},body:JSON.stringify({})});return ue.status==200?ue.json():await Promise.reject()};return useEnergy({userEnergy:d.user?.caps_energy,energyGd:d.capsGd?.energy}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("h1",{children:"Debug"}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>_("/pve-new"),style:{color:"#FFF"},children:"PVE 2.0"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Get Bet and Regret?",()=>G("betAndRegret")),style:{color:"#FFF"},children:"Bet and Regret"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Get Diamond Dead?",()=>G("diamondDead")),style:{color:"#FFF"},children:"Diamond Dead"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Get Rerolls Machine?",()=>G("rerollsMachine")),style:{color:"#FFF"},children:"Get Rerolls Machine"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Reset Onboarding?",H),style:{color:"#FFF"},children:"Reset Onboarding"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Show tutorial?",Y),style:{color:"#FFF"},children:"Show tutorial"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Reset PVE Level?",z),style:{color:"#FFF"},children:"Reset PVE Level"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",style:{color:"#FFF"},children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Reset Tasks?",ee),style:{color:"#FFF"},children:"Reset TASKS"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Reset User?",ie),style:{color:"#FFF"},children:"Reset user"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Delete User?",oe),style:{color:"#FFF"},children:"Delete user"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Become Millionaire?",se),style:{color:"#FFF"},children:"Become $GUM Millionaire"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>_("/pve-campaign"),style:{color:"#FFF"},children:"play tearofnostalgia"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>w("Parse Config?",I),style:{color:"#FFF"},children:"Reload config tearofnostalgia"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>_("/upgrade"),style:{color:"#FFF"},children:"Upgrade 2.0"})}),v.user?.caps_energy?.computedAt&&!1,jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>fe(),style:{color:"#FFF"},children:"resetMadnessPR"})}),jsxRuntimeExports.jsx("div",{className:"pack-button",children:jsxRuntimeExports.jsx("button",{onClick:()=>re(),style:{color:"#FFF"},children:" Full energy"})})]})},getFirstDoubledCap=_=>_.findIndex((d,v)=>_.slice(v+1).some(A=>A.collectionNumber===d.collectionNumber&&A.collectionId===d.collectionId)),Profile=()=>{const{loadingState:_,setLoadingState:d,isSkeletonShow:v,isDataShow:A}=useSkeletonLoading(),C=useNavigate(),{t:w}=useTranslation(),{appState:T,setAppState:R,onUserUpdate:G}=useAppState(),I=useAction(stopTutorialAction),[z,H]=reactExports.useState({mode:"my-caps",myCaps:[],myCapsMap:new Map,collections:[],selected:null,selectedCollectionCap:null}),{groupCapsBy:Y,groupCapsByToBackend:ee,groupCapsOptions:ie,groupedCaps:oe,loadMoreCaps:se,loadCapsByGroup:re,isMoreLoading:fe}=useSortCaps$1(z.myCaps,_),[ue]=useAtom(tutorialAtom),ge=reactExports.useCallback(()=>{!z.selected&&!z.selectedCollectionCap&&C("/home")},[C,z.selected,z.selectedCollectionCap]);useBackClick(ge,!!(z.selected||z.selectedCollectionCap));const ye=reactExports.useCallback(async Fe=>{const Oe=await se({lastCap:Fe});H({...z,myCaps:[...z.myCaps,...Oe.caps],lastCap:Oe.lastDocument})},[se,z]),be=reactExports.useCallback(async({value:Fe,isLoadingChange:Oe=!0})=>{if(Fe===Y)return;Oe&&d("loading");const Ge=await re({groupCapsBy:Fe??Y});H({...z,selected:null,myCaps:Ge.caps,lastCap:Ge.lastDocument}),Oe&&d("skeleton-to-data")},[Y,re,d,z]);reactExports.useEffect(()=>{(async()=>{d("loading");const{orderByField:Fe,directionStr:Oe,onlyNfts:Ge}=ee,ze=Fe!=="upgrade"?await firebaseService.getMyCaps(Fe,Oe,Ge):await firebaseService.getMyCapsAvailableForUpgrade(T.user),je=ze.caps,He=ze.lastDocument,Xe=await firebaseService.getAllCollections();if(z.mode==="my-caps"&&je.length>0){const We=je.map(Wt=>firebaseService.getCollectionCapUrl(Wt.url)),nt=Xe.map(Wt=>[...Array(Wt.size)].map((Bn,Lt)=>{const Mn=`collections/${Wt.id}/${Lt+1}.png`;return firebaseService.getCollectionCapUrl(Mn)})).flat(),Qt=We.concat(...nt);await preloadPromise(Qt)}const $e=await ve();H({...z,myCaps:je,myCapsMap:$e.myCapsMap,collections:Xe,lastCap:He}),d("skeleton-to-data"),R({...T,capsNumber:$e.user.caps_mycaps.count,coinsBalance:$e.user.caps_coins_balance?$e.user.caps_coins_balance:0})})()},[]);const ve=async()=>{const Fe=await firebaseService.getUser(firebaseService.user.uid.toString()),Oe=new Map;for(const Ge of Fe.caps_mycaps.collections){const ze=new Map;for(const je of Ge.caps)ze.set(je.number,{count:je.count,grades:je.grades});Oe.set(Ge.collectionId,ze)}return{myCapsMap:Oe,user:Fe}},Me=async Fe=>{const Oe=await firebaseService.getCap(Fe);return await ve(),await G(),H({...z,selected:Oe}),Oe},we=async()=>{const Fe=await ve();H({...z,myCapsMap:Fe.myCapsMap}),R({...T,capsNumber:Fe.user.caps_mycaps.count,coinsBalance:Fe.user.caps_coins_balance?Fe.user.caps_coins_balance:0}),be({isLoadingChange:!1})},Be=oe?.[0]?.[1]?getFirstDoubledCap(oe[0][1]):-1;reactExports.useEffect(()=>{ue==="profile"&&A&&Be===-1&&I()},[A,Be]);const De=reactExports.useCallback(()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"skeleton-wrapper",children:[jsxRuntimeExports.jsx(Select,{className:"profile__select",value:Y,options:ie,onChange:Fe=>be({value:Fe}),children:jsxRuntimeExports.jsx("img",{src:switchImage,alt:"switch"})}),v&&jsxRuntimeExports.jsxs("div",{className:`profile__caps-group skeleton fade-out fade--long ${_==="skeleton-to-data"?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"profile__group-caps",children:jsxRuntimeExports.jsx("div",{className:"profile__group-caps-title profile__group-caps-title--skeleton"})}),jsxRuntimeExports.jsx("div",{className:"profile__caps-list",children:[...Array(10)].map((Fe,Oe)=>jsxRuntimeExports.jsx(CapElementSkeleton,{size:"medium"},Oe))})]}),oe.map(([Fe,Oe])=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"profile__group-caps",children:jsxRuntimeExports.jsx("div",{className:"profile__group-caps-title",children:Fe})}),jsxRuntimeExports.jsx("div",{className:`profile__caps-list fade-in ${A?"visible":""}`,children:Oe.map((Ge,ze)=>jsxRuntimeExports.jsx(CapElement,{pendingable:!0,variant:"medium",cap:Ge,onClickCallback:()=>{tutorialService.completeTutorialStep("profile_cap_selected",firebaseService.token,T.user),H({...z,selected:Ge})},className:Be===ze?"profile__caps-item--tutorial":"",children:ue==="profile"&&Be===ze&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger profile__finger",alt:"finger"})},Ge.id))})]},Fe)),z.lastCap!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button",color:"transparent",size:"small",onClick:()=>ye(z.lastCap),isLoading:fe,children:w("battle.loadMore")})]})}),[z,Y,ie,v,_,oe,fe,w,be,A,Be,ue,ye]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`profile__wrapper ${ue==="profile"&&!z.selected?"tutorial__dimmer":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"profile",children:[jsxRuntimeExports.jsx("div",{className:"profile__caps",children:jsxRuntimeExports.jsxs("div",{className:"profile__caps-filter",children:[jsxRuntimeExports.jsx("button",{onClick:()=>H({...z,mode:"my-caps"}),className:`profile__caps-filters-item ${z.mode=="my-caps"?"profile__caps-filters-item--active":""}`,children:w("profile.myCaps")}),jsxRuntimeExports.jsx("button",{disabled:v,onClick:()=>H({...z,mode:"all-collections"}),className:`profile__caps-filters-item ${z.mode=="all-collections"?"profile__caps-filters-item--active":""}`,children:w("profile.collections")}),jsxRuntimeExports.jsx("button",{disabled:v,onClick:()=>H({...z,mode:"communities"}),className:`profile__caps-filters-item ${z.mode=="communities"?"profile__caps-filters-item--active":""}`,children:w("profile.communities")})]})}),z.mode=="my-caps"&&De(),["all-collections","communities"].includes(z.mode)&&jsxRuntimeExports.jsx(CapCollections,{collections:z.collections,myCapsMap:z.myCapsMap,isCommunity:z.mode==="communities",className:`fade-out ${z.selectedCollectionCap?"visible":""}`,onSetParams:Fe=>H({...z,selectedCollectionCap:Fe}),onFakeCapClick:Fe=>H({...z,selected:Fe})})]}),jsxRuntimeExports.jsx(NavBar,{})]}),z.selected&&jsxRuntimeExports.jsx(CapInfo,{cap:z.selected,onCapUpgrade:Me,capsGd:T.capsGd,onBackPressed:Fe=>{H({...z,selected:null}),Fe&&be({})}}),z.selectedCollectionCap&&jsxRuntimeExports.jsx(CollectionCapsList,{params:z.selectedCollectionCap,mode:"upgrade",className:"profile__collection-caps-list",onBackPressed:()=>H({...z,selectedCollectionCap:null}),onCapsListUpdate:we})]})},MAX_PREFERENCE=3,BattlePreference=({mainActionText:_,onMainAction:d,gameMode:v="pvp"})=>{const{appState:A}=useAppState(),{t:C}=useTranslation(),[w,T]=reactExports.useState(null),[R,G]=reactExports.useState(!1),[I,z]=reactExports.useState(new Map),H=reactExports.useMemo(()=>w?I.get(w.id)||[]:[],[I,w]),Y=reactExports.useMemo(()=>A.capsCollections.filter(ge=>["sold-out","available"].includes(ge.status)&&!ge.isCommunity),[A.capsCollections]),ee=reactExports.useMemo(()=>A.capsCollections.filter(ge=>["sold-out","available"].includes(ge.status)&&ge.isCommunity),[A.capsCollections]),ie=reactExports.useMemo(()=>[...I.values()].filter(Boolean).length,[I]),oe=ge=>{if(I.has(ge.id)){z(ye=>{const be=new Map(ye);return be.delete(ge.id),be});return}ie>=MAX_PREFERENCE||(T(ge),z(ye=>{const be=new Map(ye);return be.set(ge.id,[]),be}))},se=()=>{w!==null&&z(ge=>{const ye=new Map(ge);return ye.set(w.id,[]),ye})},re=ge=>{w!==null&&z(ye=>{const be=new Map(ye),ve=ye.get(w.id)??[];if(ve.includes(ge)){const Me=ve.filter(we=>we!==ge);Me.length===0?be.set(w.id,[]):be.set(w.id,Me)}else ve.length<MAX_PREFERENCE&&be.set(w.id,[...ve,ge]);return be})},fe=async()=>{G(!0);const ge=Array.from(I).map(([ye,be])=>{if(be!==void 0)return{collectionId:ye,numbers:be.length===0?void 0:be}}).filter(Boolean);try{await d(ge)}finally{G(!1)}},ue=()=>{w!==null&&z(ge=>{const ye=new Map(ge);return ye.delete(w.id),ye})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`battle-preference ${v==="exchange"?"battle-bg--exchange":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"battle-preference__content",children:[jsxRuntimeExports.jsxs("div",{className:"battle-preference__title",children:[C("battle.preferenceTitle")," ",ie,"/",MAX_PREFERENCE]}),jsxRuntimeExports.jsx(BattleCapCollections,{standardCollections:Y,communityCollections:ee,preferences:I,onCollectionClick:oe})]}),jsxRuntimeExports.jsx("div",{className:"battle-preference__button-wrapper",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:fe,isLoading:R,children:_})})]}),jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:()=>T(null),onClose:ue,isShow:!!w,bgType:v==="exchange"?"black":"default",children:jsxRuntimeExports.jsx(BattleFilterClosableSheetContent,{selectedCollection:w,selectedCollectionNumbers:H,onSelect:()=>T(null),onAnyCapClick:se,onCapClick:re})})]})},BattleNew=()=>{const{t:_}=useTranslation(),{setPopup:d}=reactExports.useContext(PopupContext),{appState:v}=reactExports.useContext(AppContext),A=useNavigate(),[C]=useSearchParams(),w=C.get("type"),[T,R]=reactExports.useState({phase:"bid",gameMode:C.get("mode")=="exchange"?"exchange":"pvp",gameType:w=="public"||w=="private"?w:"private"}),G=async H=>{try{if(!T.bid)return;const Y=await capsService.createGame(T.bid,T.gameMode,T.gameType,firebaseService.token,H,T.comment);if(T.gameType=="private"){const ee=`https://t.me/share/url?text=Let%27s%20play%21&url=https%3A%2F%2Ft.me%2FCapsGameBot%2Fplay?startapp=g_${Y}`;CapsWebApp.openTelegramLink(ee),A(T.gameMode=="pvp"?"/battle":"/exchange")}else A(T.gameMode=="pvp"?"/battle":"/exchange")}catch{d({message:"Can't create game",type:"error"})}},I=reactExports.useMemo(()=>T.gameMode=="exchange"?_("game.createExchangeOffer"):T.gameType=="public"?_("game.createPublicGame"):_("game.chooseOpponent"),[T,_]),z=()=>{T.phase=="bid"?A(T.gameMode=="pvp"?"/battle":"/exchange"):R({...T,phase:"bid"})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`game ${T.gameMode==="exchange"?"battle-bg--exchange":""}`,children:jsxRuntimeExports.jsx(BattleGameBid,{maxBid:6,mainAction:_("battle.next"),onBackPressed:z,setBidCallback:(H,Y)=>R({...T,bid:H,phase:"preference",comment:Y}),isCommentShow:!!v.isCommentsEnabled,mainActionValidator:H=>{if(v.user?.isPvpDisabled&&T.gameMode=="pvp"){for(const Y of H)if(Y.gradeNumber>=5)return!1}return!0}})}),T.phase==="preference"&&jsxRuntimeExports.jsx(BattlePreference,{mainActionText:I,onMainAction:G,gameMode:T.gameMode})]})},NoAccess=_=>{const d="https://t.me/CapsGame";return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"home",style:{display:"flex",gap:"1rem"},children:[jsxRuntimeExports.jsx("div",{className:"earn__title",style:{fontSize:"2rem"},children:_.customMessage?_.customMessage:" CapsGame"}),jsxRuntimeExports.jsx("img",{className:"home__caps",src:capImage,alt:"Cap"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{CapsWebApp.openTelegramLink(d),CapsWebApp.closeApp()},children:"Check news"})]})})},InternalError=()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"home",children:[jsxRuntimeExports.jsx("div",{className:"home__title",children:" Come back a bit later!"}),jsxRuntimeExports.jsx("img",{className:"home__caps",src:capImage,alt:"Cap"})]})}),useCreateGame=_=>{const d=useNavigate(),{t:v}=useTranslation();return{createGame:reactExports.useCallback(()=>{CapsWebApp.showPopup({message:v("game.selectGameType"),buttons:[{id:"private",type:"default",text:v("game.privateGame")},{id:"public",type:"default",text:v("game.publicGame")}]}).then(C=>{C=="private"?d(`/new-game?mode=${_}&type=private`):C=="public"&&d(`/new-game?mode=${_}&type=public`)})},[_,d,v])}},ColorizeLastWord=({text:_,className:d})=>{const v=_.split(" "),A=v.pop(),C=v.join(" ");return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[C," ",jsxRuntimeExports.jsx("span",{className:d,children:A})]})},BattleGames=({mode:_,games:d,isShowEmptyStartGame:v,isShowStartGameCap:A,customButton:C,onButtonClick:w,className:T})=>{const{t:R}=useTranslation(),{createGame:G}=useCreateGame(_),[I,z]=reactExports.useState(!1),{appState:H}=reactExports.useContext(AppContext);return d.length===0&&v?jsxRuntimeExports.jsxs("div",{className:"battle-empty",children:[jsxRuntimeExports.jsx("img",{src:battleImage,alt:"battle",className:"battle-empty__image"}),jsxRuntimeExports.jsx("div",{className:"battle-empty__description",children:R("battle.noGames")}),jsxRuntimeExports.jsx(Button,{className:"battle-empty__button",onClick:G,children:R("startGame")})]}):jsxRuntimeExports.jsxs("div",{className:T,children:[A&&jsxRuntimeExports.jsxs("div",{className:"game-caps-list",onClick:G,children:[jsxRuntimeExports.jsx("div",{className:"game-caps-list__first",children:jsxRuntimeExports.jsx("div",{className:"game-caps-list__title",children:_==="pvp"?R("battle.startNewGame"):jsxRuntimeExports.jsx(ColorizeLastWord,{text:R("battle.startNewExchange"),className:"game__title--yellow"})})}),jsxRuntimeExports.jsxs("div",{className:"game-caps-list__caps",children:[jsxRuntimeExports.jsx("div",{className:"cap__element--small game-caps-list__cap",children:jsxRuntimeExports.jsx("div",{className:"cap__img-wrapper ",children:jsxRuntimeExports.jsx("img",{src:plusImage$2,alt:"plus",className:"battle-games__cap--plus cap__img"})})}),jsxRuntimeExports.jsx("div",{className:"cap__element--small game-caps-list__cap",children:jsxRuntimeExports.jsx("div",{className:"cap__img-wrapper ",children:jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"battle-games__cap--game cap__img"})})})]})]}),C&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,color:"transparent",size:"small",onClick:async()=>{C.confirmQuestion?CapsWebApp.showPopup({message:C.confirmQuestion,buttons:[{id:"delete",type:"destructive",text:R("game.deleteGameBtn")},{type:"cancel"}]}).then(async Y=>{Y=="delete"&&(z(!0),await C.onClick(),z(!1))}):(z(!0),await C.onClick(),z(!1))},isLoading:I,children:C.text}),d.map(Y=>jsxRuntimeExports.jsx(GameCapsList,{game:Y,showPreferences:!0,onButtonClick:w,user:Y.owner,isCommentShow:!!H.isCommentsEnabled},Y.id))]})},BattleGames$1=reactExports.memo(BattleGames),refreshImage="/icons/refresh.svg",xImage="/icons/x.svg",LeaderboardAvatar=({className:_})=>{const d=reactExports.useMemo(()=>getDiskImage(),[]);return jsxRuntimeExports.jsx("img",{className:_,src:d,alt:"avatar"})},LeaderboardProgressBar=({value:_,max:d})=>{const v=_>d?_:d;return jsxRuntimeExports.jsx("div",{className:"leaderboard-progress",children:jsxRuntimeExports.jsx("div",{className:"leaderboard-progress-bar",role:"progressbar",style:{width:`${_/v*100}%`}})})},lockImage$1="/icons/lock-grey.svg",telegramGiftsAtom=atom([],"telegramGiftsAtom"),telegramGiftsLoadedAtom=atom(!1,"telegramGiftsLoadedAtom"),getTelegramGiftsAction=action(async _=>(_.get(telegramGiftsLoadedAtom)||await _.schedule(async()=>{try{const v=await capsService.getGifts(firebaseService.token);telegramGiftsAtom(_,v),telegramGiftsLoadedAtom(_,!0)}catch{console.error("Failed to load telegram gifts")}}),_.get(telegramGiftsAtom)),"getTelegramGiftsAction"),GiftSelector=({onBackPressed:_,onChoose:d,onUnChoose:v,capGift:A})=>{const{t:C}=useTranslation(),{appState:w}=useAppState(),[T,R]=reactExports.useState({gifts:void 0}),[G,I]=reactExports.useState(!1),z=useAction(getTelegramGiftsAction),[H,Y]=reactExports.useState(null),[ee,ie]=reactExports.useState(!1),[oe,se]=reactExports.useState(!1),re=reactExports.useCallback(()=>{_?.()},[_]);useBackClick(re);const fe=async()=>{const ve=await z(),Me=w?.user?.staked?.map(we=>we.gifts??[]).flat();R({...T,gifts:ve.filter(we=>!Me?.find(Be=>Be.gift.address==we.address))})};reactExports.useEffect(()=>{I(!0),fe().finally(()=>I(!1))},[]);const ue=reactExports.useCallback(ve=>{const Me=ve.name.split("#");return Me[0].length>12?`${Me[0].substring(0,10)} #${Me[1]}`:ve.name},[]),ge=reactExports.useCallback(ve=>{H?.address===ve.address?Y(null):(ie(!1),Y(ve))},[H?.address]),ye=reactExports.useCallback(()=>{ee?ie(!1):(ie(!0),Y(null))},[ee]),be=reactExports.useCallback(async()=>{se(!0);try{ee&&A?await v(A):H&&await d(H)}finally{se(!1)}},[A,d,v,H,ee]);return jsxRuntimeExports.jsxs("div",{className:"gift-selector",children:[jsxRuntimeExports.jsxs("div",{className:"gift-selector__gifts",children:[G&&[...Array(6)].map((ve,Me)=>jsxRuntimeExports.jsxs("div",{className:"gift-selector__gift",children:[jsxRuntimeExports.jsx("div",{className:"gift-selector__gift-img gifts-selector__skeleton"}),jsxRuntimeExports.jsx("div",{className:"gift-selector__gift-title gifts-selector__skeleton"}),jsxRuntimeExports.jsx("div",{className:"gift-selector__gift-subtitle gifts-selector__skeleton"})]},"gift"+Me)),A&&!G&&jsxRuntimeExports.jsx("button",{className:`gift-selector__gift  ${ee?"gift-selector__gift--selected":""} `,onClick:ye,children:jsxRuntimeExports.jsx("div",{className:"gift-selector__nothing",children:C("staking.nothing")})}),T.gifts&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:T.gifts.map(ve=>{const Me=w.capsGd?.staking?.gifts.tiers[ve.collection],we=Me?w.capsGd?.staking?.gifts.bonuses[Me]:0;return jsxRuntimeExports.jsxs("button",{className:`gift-selector__gift ${H?.address===ve.address?"gift-selector__gift--selected":""}`,onClick:()=>ge(ve),children:[jsxRuntimeExports.jsx("img",{className:"gift-selector__gift-img",src:ve.image,alt:ve.name}),jsxRuntimeExports.jsx("div",{className:"gift-selector__gift-title",children:ue(ve)}),jsxRuntimeExports.jsxs("div",{className:"gift-selector__gift-subtitle",children:[C("staking.bonus"),": +",(we*100).toFixed(1),"%"," ",jsxRuntimeExports.jsx("img",{className:"cap__staking-img",src:StakedCoin,alt:"lightning"})]})]},ve.name)})}),T.gifts&&T.gifts.length===0&&!A&&jsxRuntimeExports.jsxs("div",{className:"upgrade-no-resources",children:[jsxRuntimeExports.jsx("img",{src:sadImage,className:"upgrade-no-resources__image",alt:"sad"}),jsxRuntimeExports.jsx("div",{className:"upgrade-no-resources__text",children:C("staking.noGifts")})]})]}),jsxRuntimeExports.jsx("div",{className:"gift-selector__button",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:be,isLoading:oe,disabled:!H&&!ee,children:C("staking.save")})})]})},TelegramGifts=({cap:_,slotsCount:d})=>{const{appState:v,onUserUpdate:A}=useAppState(),{setPopup:C}=reactExports.useContext(PopupContext),{t:w}=useTranslation(),[T,R]=reactExports.useState({cap:null,slot:-1}),G=T.cap?.gifts?.find(Y=>Y.slot==T.slot)?.gift,[I]=useTonConnectUI(),z=reactExports.useCallback(async(Y,ee,ie)=>{try{await capsService.stakeGift(Y,ee.cap.id,ie,firebaseService.token),await A(),R({cap:null,slot:-1})}catch{C({message:w("staking.error"),type:"error"})}},[A,C,w]),H=reactExports.useCallback(async(Y,ee)=>{try{await capsService.unstakeGift(Y,ee.cap.id,firebaseService.token),await A(),R({cap:null,slot:-1})}catch{C({message:w("staking.error"),type:"error"})}},[A,C,w]);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"telegram-gifts__divider"}),jsxRuntimeExports.jsx("div",{className:"telegram-gifts__title",children:"Telegram Gifts Boosters"}),jsxRuntimeExports.jsx("div",{className:"telegram-gifts__row",children:[...Array(d)].map((Y,ee)=>{const ie=_.gifts?.find(fe=>fe.slot==ee),oe=ie?.gift,se=oe?v.capsGd?.staking?.gifts.tiers[oe.collection]:void 0,re=se?v.capsGd?.staking?.gifts.bonuses[se]:0;return jsxRuntimeExports.jsxs("div",{className:"telegram-gifts__slot",children:[ie&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("button",{onClick:()=>{R({cap:_,slot:ee})},children:[jsxRuntimeExports.jsx("img",{className:"telegram-gifts__slot-img",src:ie.gift.image,alt:ie.gift.name}),jsxRuntimeExports.jsxs("div",{className:"telegram-gifts__slot-title",children:["+",(re*100).toFixed(1),"%"]})]})}),!ie&&jsxRuntimeExports.jsx("button",{className:"telegram-gifts__empty-slot",onClick:()=>{I.connected?R({cap:_,slot:ee}):I.openModal()},children:jsxRuntimeExports.jsx("img",{src:plusImage$1,className:"telegram-gifts__slot-plus",alt:"plus"})})]},ee)})}),T.cap&&jsxRuntimeExports.jsx(GiftSelector,{onChoose:async Y=>{await z(Y,T.cap,T.slot)},capGift:G,onUnChoose:async Y=>{await H(Y,T.cap)},onBackPressed:()=>{R({cap:null,slot:-1})}})]})},StakingConfirm=({isShow:_,onClose:d,cap:v,onChange:A})=>{const{appState:C}=useAppState(),{t:w}=useTranslation(),{unStake:T,isUnstakeLoading:R}=useStakingActions(),G=async()=>{v&&await T(v.cap,d)};return reactDomExports.createPortal(jsxRuntimeExports.jsxs(Info,{className:"staking-confirm",isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:G,fullWidth:!0,isLoading:R,children:w("staking.remove")}),jsxRuntimeExports.jsx(Button,{onClick:()=>{R||A?.()},fullWidth:!0,variant:"secondary",children:w("staking.replace")})]}),onClose:d,bottom:v&&jsxRuntimeExports.jsx(TelegramGifts,{cap:v,slotsCount:3}),children:[jsxRuntimeExports.jsx("div",{className:"staking-confirm__cap",children:v&&jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:v.cap,isCapNumberHide:!0,isNftHide:!0,isNumberShow:!0,children:C.capsGd?.status.isTokenEnabled&&C.capsGd?.status.isFarmingStarted&&jsxRuntimeExports.jsxs("div",{className:"staking-cap__speed",children:["+",getStakingSpeedWithBonus(v.cap,Timestamp.now(),C.userDiamondPosition??-1,C.user,C.squad,v,C.capsGd).toFixed(3),"/h"]})})}),jsxRuntimeExports.jsx("div",{className:"staking-confirm__description",children:w("staking.description")})]}),document.getElementById("root"))},UnlockConfirm=({isShow:_,onClose:d,slot:v,onBurnSlot:A})=>{const{appState:C}=useAppState(),{t:w}=useTranslation(),[T,R]=reactExports.useState(!1),{onUserUpdate:G}=useAppState(),I=async()=>{const H=v?findLockedSlot(v,C.capsGd):void 0;if(H?.tokens){R(!0);try{v!=null&&(await capsService.unlockSlot(v,firebaseService.token),await G()),d()}finally{R(!1)}}else H?.burn&&v&&(A(v),d())},z=v?findLockedSlot(v,C.capsGd):void 0;return reactDomExports.createPortal(jsxRuntimeExports.jsxs(Info,{className:"staking-confirm",isShow:_,buttons:jsxRuntimeExports.jsx("div",{className:"pve-battle__result-buttons",children:jsxRuntimeExports.jsxs(Button,{onClick:I,fullWidth:!0,isLoading:T,children:[z?.burn?w("staking.unlockForBurn"):w("staking.unlockForTokens",{tokens:z?.tokens})," ",jsxRuntimeExports.jsx("img",{className:"staking__tokens-img",src:StakedCoin,alt:"staked coin"})]})}),onClose:d,children:[jsxRuntimeExports.jsx("div",{className:"staking-confirm__cap",children:jsxRuntimeExports.jsx(CapElement,{variant:"small",isCapNumberHide:!0,isNftHide:!0,isNumberShow:!0})}),jsxRuntimeExports.jsx("div",{className:"staking-confirm__description",children:z?.burn?w("staking.unlockDescriptionForBurn",{score:z.burn}):w("staking.unlockDescription")})]}),document.getElementById("root"))},StakingCap=({cap:_,onCapClick:d,isOnlyShow:v,stakedCap:A})=>{const{appState:C}=useAppState();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:_,isCapNumberHide:!v,onClickCallback:d,isNftHide:!0,isNumberShow:!0,children:!v&&C.capsGd?.status.isTokenEnabled&&C.capsGd?.status.isFarmingStarted&&jsxRuntimeExports.jsxs("div",{className:"staking-cap__speed",children:["+",getStakingSpeedWithBonus(_,Timestamp.now(),C.userDiamondPosition??-1,C.user,C.squad,A,C.capsGd).toFixed(3),"/h"]})})})},StakingSlots=({slots:_,slottedCaps:d,onSlotClick:v=()=>{},onCapClick:A=()=>{},onBurnSlot:C=()=>{},isOnlyShow:w})=>{const{appState:T}=useAppState(),[R,G]=reactExports.useState(null),[I,z]=reactExports.useState(null),H=_.reduce((ee,ie,oe)=>(oe%3===0&&ee.push([]),ee[ee.length-1].push(ie),ee),[]),Y=()=>{const ee=getStakingConfig(Timestamp.now(),T.capsGd);if(!ee)return;const ie=ee.slots.filter(re=>re.isPaid);if(ie.length==0)return;const se=ie.filter(re=>!T.user?.stakedPurchasedSlots?.find(fe=>fe==re.index))[0];se.index&&z(se.index)};return jsxRuntimeExports.jsxs("div",{className:"staking-slots",children:[H.map((ee,ie)=>jsxRuntimeExports.jsxs("div",{className:"staking-slots__row",children:[ee.map((oe,se)=>{const re=ie*3+se,fe=d.get(re),ue=T.capsCollections.find(ve=>ve.id==oe.collectionId),ge={url:ue?getCapUrl(oe.grade??"COMMON",ue,1):"",grade:oe.grade},ye=oe.isPaid&&oe.index,be=ye&&oe.index?T.user?.stakedPurchasedSlots?.includes(oe.index):!0;return jsxRuntimeExports.jsx("div",{className:"staking-slots__slot",children:fe?jsxRuntimeExports.jsx(StakingCap,{cap:fe.cap,isOnlyShow:w,stakedCap:fe,onCapClick:ve=>{w?A(ve):G(re)}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[be&&jsxRuntimeExports.jsx("img",{src:plusImage$1,className:"staking-slots__slot-plus",alt:"plus"}),ye&&!be&&jsxRuntimeExports.jsx("img",{src:lockImage$1,className:"staking-slots__slot-lock",alt:"lock"}),jsxRuntimeExports.jsx(CapElement,{variant:"small",className:"cap__element--small staking-slots__slot-cap",cap:ge,isCapNumberHide:!0,onClickCallback:()=>{be?v(re):ye&&Y()}})]})},re)}),jsxRuntimeExports.jsx("div",{className:"staking-slots__rack"})]},ie)),!w&&jsxRuntimeExports.jsx(StakingConfirm,{isShow:R!==null,cap:d.get(R),onClose:()=>G(null),onChange:()=>{R!==null&&v(R)}}),!w&&jsxRuntimeExports.jsx(UnlockConfirm,{isShow:I!==null,slot:I,onBurnSlot:C,onClose:()=>z(null)})]})},StakeSlotsSkeleton=()=>jsxRuntimeExports.jsx("div",{className:"staking-slots",children:[1,2,3].map((_,d)=>jsxRuntimeExports.jsxs("div",{className:"staking-slots__row",children:[[1,2,3].map((v,A)=>jsxRuntimeExports.jsx("div",{className:"staking-slots__slot",children:jsxRuntimeExports.jsx(CapElementSkeleton,{size:"small"})},A)),jsxRuntimeExports.jsx("div",{className:"staking-slots__rack"})]},d))});function LeaderboardProfileSkeleton$1(){return jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar--squad leaderboard__league-avatar--squad--loading"})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-place leaderboard__profile-score--loading"})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-second",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-goblet leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-score leaderboard__profile-score--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-league leaderboard__profile-score--loading"})]}),jsxRuntimeExports.jsx("div",{className:"leaderboard__progress-bar--loading"})]})]})]})}const LeaderboardUser=({league:_,user:d,className:v,onBackClick:A=()=>{}})=>{const{t:C}=useTranslation(),{appState:w}=useAppState(),[T,R]=reactExports.useState({slots:[],slottedCaps:new Map});reactExports.useEffect(()=>{if(!d.staked)return;const Y=new Map,ee=getStakingConfig(Timestamp.now(),w.capsGd)?.slots;if(!ee)return;const ie=[],oe=[...d.staked];oe.sort((se,re)=>se.slot-re.slot),oe.forEach(se=>{ie.push(ee[se.slot]),Y.set(ie.length-1,se)}),R({slots:ie,slottedCaps:Y})},[]);const[G,I]=reactExports.useState({selectedCap:void 0}),z=useAction(showLeaderboardUserIdAtom),H=reactExports.useCallback(()=>{G.selectedCap||(A(),z(null))},[A,z,G.selectedCap]);return useBackClick(H),jsxRuntimeExports.jsxs("div",{className:`leaderboard-user ${v??""}`,children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:jsxRuntimeExports.jsx(LeaderboardAvatar,{})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-username",children:getName(d)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-place",children:[d.caps_mycaps.count," ",jsxRuntimeExports.jsx("img",{className:"leaderboard-user__caps-img",src:capsImage,alt:"caps"})]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-second",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",src:getGobletImage(_.name),alt:"goblet"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-score",children:formatNumber(d.score)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-league",children:[capitalize$1(_.name)," ",C("leaderboard.league")]})]}),jsxRuntimeExports.jsx(LeaderboardProgressBar,{value:d.score,max:getLeaderboardTo("user",_.userScore.to)})]})]})]}),T.slottedCaps.size>0&&jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"leaderboard-user__staking",children:jsxRuntimeExports.jsx(StakingSlots,{slots:T.slots,slottedCaps:T.slottedCaps,isOnlyShow:!0,onCapClick:Y=>{z(d.id),I({selectedCap:Y})}})})}),G.selectedCap&&reactDomExports.createPortal(jsxRuntimeExports.jsx(CapInfo,{cap:G.selectedCap,onCapUpgrade:async()=>G.selectedCap,onBackPressed:()=>{I({selectedCap:void 0})}}),document.getElementById("root"))]})},LeaderboardUserSkeleton=reactExports.forwardRef(({className:_},d)=>jsxRuntimeExports.jsxs("div",{className:`leaderboard-user ${_}`,ref:d,children:[jsxRuntimeExports.jsx(LeaderboardProfileSkeleton$1,{}),jsxRuntimeExports.jsx("div",{className:"leaderboard-user__staking",children:jsxRuntimeExports.jsx(StakeSlotsSkeleton,{})})]})),LeaderboardUserAsync=()=>{const[_]=useAtom(showLeaderboardUserIdAtom),d=reactExports.useRef(null),{loadingState:v,setLoadingState:A,isSkeletonShow:C,isDataShow:w}=useSkeletonLoading({skeletonRef:d}),{appState:T}=useAppState(),[R,G]=reactExports.useState(null),I=reactExports.useMemo(()=>T.capsGd?.leagues.find(z=>z.name===R?.league),[T.capsGd?.leagues,R]);return reactExports.useEffect(()=>{(async()=>{A("loading");try{if(_){const z=await firebaseService.getUser(_.toString());G(z)}}finally{A("skeleton-to-data")}})()},[]),jsxRuntimeExports.jsxs("div",{className:"skeleton-wrapper skeleton-wrapper--absolute",children:[C&&jsxRuntimeExports.jsx(LeaderboardUserSkeleton,{ref:d,className:`skeleton fade-out fade--long ${v==="skeleton-to-data"?"visible":""}`}),I&&R&&jsxRuntimeExports.jsx(LeaderboardUser,{league:I,user:R,className:`fade-in ${w?"visible":""}`})]})},Battle=_=>{const[d,v]=useStorage("pvp"),{setPopup:A}=reactExports.useContext(PopupContext),C=useNavigate(),{loadingState:w,setLoadingState:T,isSkeletonShow:R,isDataShow:G}=useSkeletonLoading(),[I,z]=reactExports.useState(!1),[H,Y]=reactExports.useState({mode:"all-games",myGames:{games:[],lastDocument:void 0},allGames:{games:[],lastDocument:void 0},playedGames:{games:[],lastDocument:void 0}}),{appState:ee}=useAppState(),[ie]=useAtom(showLeaderboardUserIdAtom),oe=reactExports.useCallback(()=>{H.selectedGame===void 0&&!H.isBattleFilterShow&&!ie?C("/home"):H.isBattleFilterShow&&Y({...H,isBattleFilterShow:!1})},[H,C,ie]);useBackClick(oe);const{t:se}=useTranslation(),re=reactExports.useCallback(async()=>{switch(z(!0),H.mode){case"all-games":{const ve=await firebaseService.getPublicGames(_.mode,{filter:H.filter,startAfterDoc:H.allGames.lastDocument});Y({...H,allGames:{games:[...H.allGames.games,...ve.games],lastDocument:ve.lastDocument}});break}case"my-games":{const ve=await firebaseService.getMyGames(_.mode,H.myGames.lastDocument);Y({...H,myGames:{games:[...H.myGames.games,...ve.games],lastDocument:ve.lastDocument}});break}case"history":{const ve=await firebaseService.getPlayedGames(_.mode,H.playedGames.lastDocument);Y({...H,playedGames:{games:[...H.playedGames.games,...ve.games],lastDocument:ve.lastDocument}});break}}z(!1)},[_.mode,H]),fe=async ve=>{T("loading");const Me=ve?.filter??void 0;Y({...H,isBattleFilterShow:!1,filter:Me});const we=await firebaseService.getPublicGames(_.mode,{filter:Me});let Be=[];if(we.games.length>0){const De=we.games.map(Fe=>Fe.caps.map(Oe=>firebaseService.getCollectionCapUrl(Oe.url))).flat();Be=Be.concat(...De)}await preloadPromise(Be),Y({...H,allGames:we,isBattleFilterShow:!1,filter:Me}),T("skeleton-to-data")},ue=async()=>{T("loading");const ve=H.filter,Me=await firebaseService.getPublicGames(_.mode,{filter:ve}),we=await firebaseService.getMyGames(_.mode),Be=await firebaseService.getPlayedGames(_.mode);let De=[];if(Me.games.length>0){const Fe=Me.games.map(Oe=>Oe.caps.map(Ge=>firebaseService.getCollectionCapUrl(Ge.url))).flat();De=De.concat(...Fe)}if(we.games.length>0){const Fe=we.games.map(Oe=>Oe.caps.map(Ge=>firebaseService.getCollectionCapUrl(Ge.url))).flat();De=De.concat(...Fe)}if(Be.games.length>0){const Fe=Be.games.map(Oe=>Oe.caps.map(Ge=>firebaseService.getCollectionCapUrl(Ge.url))).flat();De=De.concat(...Fe)}await preloadPromise(De),Y({...H,myGames:we,allGames:Me,playedGames:Be,selectedGame:void 0}),T("skeleton-to-data")};reactExports.useEffect(()=>{!d&&w==="loaded"&&_.mode=="pvp"&&(A({message:se("battle.firstMessage"),type:"confirm"}),v(!0))},[d,w,v,A,se]),reactExports.useEffect(()=>{ue()},[]);const ge=reactExports.useMemo(()=>{switch(H.mode){case"my-games":return H.myGames;case"all-games":return H.allGames;case"history":default:return H.playedGames}},[H]),ye=reactExports.useCallback(ve=>{Y({...H,selectedGame:ve})},[H]),be=reactExports.useMemo(()=>{const ve=[];if(H.filter?.grades){const Me=H.filter.grades.reduce((we,Be)=>(GRADE_NAMES[Be]&&we.push(GRADE_NAMES[Be]),we),[]);ve.push(...Me)}return H.filter?.collections&&ee.capsCollections.forEach(Me=>{H.filter.collections.has(Me.id)&&ve.push(Me.title)}),ve},[ee.capsCollections,H.filter]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`battle-bg ${_.mode==="exchange"?"battle-bg--exchange":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"battle",children:[jsxRuntimeExports.jsxs("div",{className:"profile__caps",children:[jsxRuntimeExports.jsxs("div",{className:"profile__caps-filter",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{Y({...H,mode:"all-games"})},className:`profile__caps-filters-item ${H.mode=="all-games"?"profile__caps-filters-item--active":""}`,children:se("battle.allGames")}),jsxRuntimeExports.jsx("button",{onClick:()=>{Y({...H,mode:"my-games"})},className:`profile__caps-filters-item ${H.mode=="my-games"?"profile__caps-filters-item--active":""}`,children:se("battle.myGames")}),jsxRuntimeExports.jsx("button",{onClick:()=>{Y({...H,mode:"history"})},className:`profile__caps-filters-item ${H.mode=="history"?"profile__caps-filters-item--active":""}`,children:se("battle.history")}),jsxRuntimeExports.jsx("button",{onClick:()=>ue(),className:"profile__caps-filters-item-refresh",children:jsxRuntimeExports.jsx("img",{src:refreshImage,alt:"refresh"})}),H.mode==="all-games"&&jsxRuntimeExports.jsx("button",{onClick:()=>Y({...H,isBattleFilterShow:!0}),className:"battle__caps-filters-item-settings",children:jsxRuntimeExports.jsx("img",{src:settingsImage,alt:"settings"})})]}),H.filter&&H.mode==="all-games"&&jsxRuntimeExports.jsxs("div",{className:"battle__filters battle-filters__items",children:[jsxRuntimeExports.jsx("button",{onClick:()=>fe(),className:"battle__filters-button",children:jsxRuntimeExports.jsx("img",{src:xImage,alt:"close filter"})}),be.map(ve=>jsxRuntimeExports.jsx("div",{className:"battle-filters__item battle-filters__item--active",children:ve}))]})]}),jsxRuntimeExports.jsxs("div",{className:"battle__game-caps",children:[R&&jsxRuntimeExports.jsxs("div",{className:`skeleton battle__game-block fade-out ${w==="skeleton-to-data"?"visible":""} `,children:[jsxRuntimeExports.jsx(GameCapsListFirstSkeleton,{}),[...Array(4)].map((ve,Me)=>jsxRuntimeExports.jsx(GameCapsListSkeleton,{},Me))]}),jsxRuntimeExports.jsx(BattleGames$1,{mode:_.mode,games:ge.games,isShowEmptyStartGame:H.mode==="my-games"&&!R,isShowStartGameCap:H.mode==="my-games"||H.mode==="all-games",customButton:H.mode=="my-games"?{confirmQuestion:_.mode=="pvp"?se("game.deleteBetsQuestion"):se("game.deleteOffersQuestion"),text:_.mode=="pvp"?se("game.removeAllBets"):se("game.removeAllOffers"),onClick:async()=>{await capsService.removeAllBets(_.mode,firebaseService.token),await ue()}}:void 0,className:`battle__game-block fade-in ${G?"visible":""}`,onButtonClick:ye}),ge.lastDocument!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button",color:"transparent",size:"small",onClick:re,isLoading:I,children:se("battle.loadMore")})]})]}),jsxRuntimeExports.jsx(NavBar,{})]}),H.selectedGame&&jsxRuntimeExports.jsx("div",{className:`battle__game ${_.mode==="exchange"?"battle-bg--exchange":""}`,children:jsxRuntimeExports.jsx(Game,{id:H.selectedGame.id,game:H.selectedGame,onBackPressed:async(ve,Me)=>{if(ve)if(Me){const we=H.allGames.games,Be=we.findIndex(De=>De.id===Me.id);Be!==-1&&(we[Be]=Me,Y({...H,allGames:{games:we,lastDocument:H.allGames.lastDocument},selectedGame:void 0}))}else await ue();else Y({...H,selectedGame:void 0})}})}),H.isBattleFilterShow&&jsxRuntimeExports.jsx(BattleFilters,{filter:H.filter,onApply:ve=>fe({filter:ve}),allowCollectionNumbers:!1,allowCapNumberSearch:!1,mode:_.mode}),ie&&jsxRuntimeExports.jsx(LeaderboardUserAsync,{})]})},Battle$1=reactExports.memo(Battle),TaskElementProgressBar=({value:_=0,max:d})=>jsxRuntimeExports.jsxs("div",{className:"task-element-progress-bar",children:[jsxRuntimeExports.jsx("div",{className:"task-element-progress-bar__progress",children:jsxRuntimeExports.jsx("div",{className:"task-element-progress-bar__progress tasks-mission-progress-bar__progress--fill ",style:{width:`${_/d*100}%`}})}),jsxRuntimeExports.jsxs("div",{className:"task-element-progress-bar__num",children:[_," / ",d]})]}),usersPlusImage="/icons/users-plus.svg",TaskElement=({item:_,onClaimTask:d,type:v,setIsShareTaskOpen:A,isLoading:C})=>{const w=useNavigate(),{t:T}=useTranslation(),{appState:R}=useAppState(),[G,I]=reactExports.useState(!1),z=reactExports.useMemo(()=>{if(!_.reward)return T("tasks.claim");switch(_.reward.rewardId){case"common_pack":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[`+${_.reward.count}`," ",jsxRuntimeExports.jsx("img",{src:commonPackImage,alt:"common pack"})]});case"epic_pack":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[`+${_.reward.count}`," ",jsxRuntimeExports.jsx("img",{src:epicPackImage,alt:"epic pack"})]});case"tonsters_pack":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[`+${_.reward.count}`," ",jsxRuntimeExports.jsx("img",{src:tonstersPackImage,alt:"tonsters pack"})]});case"rare_pack":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[`+${_.reward.count}`," ",jsxRuntimeExports.jsx("img",{src:rarePackImage,alt:"rare pack"})]});case"boosters":return`+${_.reward.count} Boosters`;case"gum":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[`+${_.reward.gum}`," ",jsxRuntimeExports.jsx("img",{src:gumImage$2,alt:"gum"})]})}},[_.reward,T]),H=()=>{capsService.taskLinkClicked(v,_.taskId,firebaseService.token),_.bot&&CapsWebApp.openTelegramLink(_.bot.link),setTimeout(()=>{I(!0)},5e3)},Y=reactExports.useMemo(()=>{if(_.taskId.startsWith("launch_bot"))return{item:z,action:()=>{H()}};switch(_.taskId){case"play_game":return{text:"startGame",action:()=>{w("/battle")}};case"play_swap":return{text:"startGame",action:()=>{w("/exchange")}};case"cap_upgrade":return{text:"upgrade.upgradeBtn",action:()=>{w("/profile")}};case"make_bet":return{text:"startGame",action:()=>{w("/battle")}};case"open_purchased_pack":return{text:"shop.shop",action:()=>{w("/earn")}};case"invite_friend":return{icon:usersPlusImage,action:async()=>{await capsService.requestRefLink(firebaseService.token),CapsWebApp.closeApp()}};case"subscribe_to_caps_channel":return{text:"tasks.subscribeTo",action:async()=>{}};case"join_caps_chat":return{text:"tasks.subscribeTo",action:async()=>{}};case"connect_wallet":return{item:z,action:()=>{w("/home")}};case"get_nft":return{text:"startGame",action:()=>{w("/battle")}};case"telegram_premium":return{text:"startGame",action:()=>{w("/battle")}};case"pass_pve_level":return{text:"startGame",action:()=>{w("/pve")}};case"pass_madness_round":return{text:"startGame",action:()=>{w("/home?play=true")}};case"share_story":return{item:z,action:()=>{A(!0)}};default:return{text:"startGame",action:()=>{w("/battle")}}}},[z,_.taskId,w]),ee=reactExports.useMemo(()=>{if(_.taskId.startsWith("launch_bot"))return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[_.textLocalized[R.user?.caps_language??"en"]," ",jsxRuntimeExports.jsx("span",{onClick:()=>{H()},children:jsxRuntimeExports.jsxs("span",{className:"tasks-element__link",children:["@",_.bot?.name]})})]});switch(_.taskId){case"subscribe_to_caps_channel":return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[T("tasks.subscribeTo")," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{onClick:()=>{CapsWebApp.openTelegramLink(T("tasks.capsChannel"))},children:jsxRuntimeExports.jsx("span",{className:"tasks-element__link",children:"@CapsGame"})})," ",T("tasks.subscribeChannel")]});case"join_caps_chat":return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[T("tasks.joinChat")," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{onClick:()=>{CapsWebApp.openTelegramLink(T("tasks.capsChat"))},children:jsxRuntimeExports.jsx("span",{className:"tasks-element__link",children:"@CapsGameChat"})})]});case"subscribe_brobot":return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[T("tasks.subscribeTo")," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{onClick:()=>{CapsWebApp.openTelegramLink(T("tasks.brobotChannel"))},children:jsxRuntimeExports.jsx("span",{className:"tasks-element__link",children:"@BroBot"})})," ",T("tasks.subscribeChannel")]});case"subscribe_trending":return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[T("tasks.subscribeTo")," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{onClick:()=>{CapsWebApp.openTelegramLink(T("tasks.trendingChannel"))},children:jsxRuntimeExports.jsx("span",{className:"tasks-element__link",children:"@Trending Apps"})})," ",T("tasks.subscribeChannel")]});case"explore_trending":return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[T("tasks.exploreTrending")," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{onClick:()=>{capsService.taskLinkClicked(v,_.taskId,firebaseService.token),_.link&&CapsWebApp.openTelegramLink(_.link)},children:jsxRuntimeExports.jsx("span",{className:"tasks-element__link",children:"Telegram Apps"})})]});default:if((_.link||_.linkLocalized)&&_.linkTitle){const ie=_.linkLocalized?_.linkLocalized[R.user?.caps_language??"en"]:_.link;return jsxRuntimeExports.jsxs("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:[_.textLocalized[R.user?.caps_language??"en"]," ",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{onClick:()=>{capsService.taskLinkClicked(v,_.taskId,firebaseService.token),ie&&CapsWebApp.openLink(ie)},children:jsxRuntimeExports.jsx("span",{className:"tasks-element__link",children:_.linkTitle})})]})}return jsxRuntimeExports.jsx("div",{className:`tasks-element__title ${_.isClaimed?"tasks-element__title--completed":""}`,children:T("tasks."+_.text,{repeat:_.repeat})})}},[_.isClaimed,_.taskId,_.text,T]);return jsxRuntimeExports.jsxs("div",{className:"tasks-element",children:[jsxRuntimeExports.jsxs("div",{className:"tasks-element__first",children:[ee,v!=="onboarding"&&jsxRuntimeExports.jsxs("div",{className:"tasks-element__achievement",children:["+",_.points]})]}),v!=="onboarding"&&jsxRuntimeExports.jsx("div",{className:"tasks-element__progress",children:jsxRuntimeExports.jsx(TaskElementProgressBar,{value:_.progress,max:_.repeat})}),_.isClaimed&&jsxRuntimeExports.jsx(Button,{className:"tasks-element__button",size:"small",disabled:!0,color:"green",onClick:()=>{Y.action()},children:T("tasks.done")}),(_.isCompleted||G)&&!_.isClaimed&&jsxRuntimeExports.jsx(Button,{className:"tasks-element__button",size:"small",color:"green",isLoading:C,onClick:()=>{d(v,_.taskId)},children:z}),!_.isCompleted&&!G&&jsxRuntimeExports.jsxs(Button,{className:"tasks-element__button",size:"small",color:"red",onClick:()=>{Y.action()},children:[Y.text&&T(Y.text),Y.item,Y.icon&&jsxRuntimeExports.jsx("img",{src:Y.icon,alt:"icon"})]})]},_.taskId)},dotImage="/icons/dot.svg",boostersImage="/icons/boosters-task.png",PrizeImage=({point:{points:_,rewardId:d,isClaimed:v,isAvailable:A,gum:C},isShowClaimButton:w,onAvailableClick:T,onClaimReward:R,styles:G})=>{const{t:I}=useTranslation(),[z,H]=reactExports.useState(!1),{setPopup:Y}=reactExports.useContext(PopupContext),ee=!v&&A,ie=async()=>{if(ee){H(!0);try{await R()}catch{Y({message:I("shop.claimFailed"),type:"error"})}H(!1)}},oe=()=>{T()},se=reactExports.useMemo(()=>{switch(d){case"rare_pack":return rarePackImage;case"epic_pack":return epicPackImage;case"common_pack":return commonPackImage;case"boosters":return boostersImage;case"tonsters_pack":return tonstersPackImage;case"gum":default:return gumImage$1}},[d]);return jsxRuntimeExports.jsxs("div",{className:"tasks-mission-progress-bar__prize-wrapper",style:G,children:[jsxRuntimeExports.jsx("div",{className:`tasks-mission-progress-bar__prize-bg ${A?"tasks-mission-progress-bar__prize-bg--available":""}`,onClick:oe}),jsxRuntimeExports.jsxs(Button,{className:`tasks__button-claim ${_===100?"tasks__button-claim--last":""} ${w?"tasks__button-claim--animate":""} ${ee?"":"tasks__button-claim--gray"}`,color:"green",size:"small",isLoading:z,onClick:ie,children:[I(v?"tasks.claimed":"tasks.claim"),d==="gum"?` ${C} $GUM`:""]},_),jsxRuntimeExports.jsx("img",{onClick:oe,src:se,alt:"prize",className:`tasks-mission-progress-bar__prize ${v?"tasks-mission-progress-bar__prize--gray":""}`})]})},MissionProgressBar=({value:_,max:d,points:v,onClaimReward:A})=>{const[C,w]=reactExports.useState(v.slice().reverse().find(G=>G.isAvailable&&!G.isClaimed)?.points),T=[];for(let G=0;G<=d;G+=d/10)T.push(G);const R=_===0?-10:_;return reactExports.useEffect(()=>{const G=v.slice().reverse().find(I=>I.isAvailable&&!I.isClaimed)?.points;C!==G&&(G===100?CapsWebApp.playSound("tasks/reward-ready-final.mp3"):G!==void 0&&CapsWebApp.playSound("tasks/reward-ready.mp3"),w(G))},[v]),jsxRuntimeExports.jsx("div",{className:"tasks-mission-progress-bar",children:jsxRuntimeExports.jsxs("div",{className:"tasks-mission-progress-bar__progress",children:[jsxRuntimeExports.jsx("div",{className:"tasks-mission-progress-bar__progress tasks-mission-progress-bar__fill",style:{width:`calc(${R/d*100}% + 6px)`}}),T.map(G=>jsxRuntimeExports.jsx("img",{className:"tasks-mission-progress-bar__dot ",src:dotImage,alt:"prize",style:{left:`${G/d*100}%`}},G)),v.map(G=>jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsx(PrizeImage,{point:G,isShowClaimButton:C===G.points,onAvailableClick:()=>(CapsWebApp.playSound("tasks/reward-click.mp3"),C===G.points?w(0):w(G.points)),styles:{left:`${G.points/d*100}%`},onClaimReward:async()=>{await A(G.points)}})},G.points))]})})};function isObject$2(_){return _!==null&&typeof _=="object"&&"constructor"in _&&_.constructor===Object}function extend$2(_,d){_===void 0&&(_={}),d===void 0&&(d={});const v=["__proto__","constructor","prototype"];Object.keys(d).filter(A=>v.indexOf(A)<0).forEach(A=>{typeof _[A]>"u"?_[A]=d[A]:isObject$2(d[A])&&isObject$2(_[A])&&Object.keys(d[A]).length>0&&extend$2(_[A],d[A])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const _=typeof document<"u"?document:{};return extend$2(_,ssrDocument),_}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function _(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(_){return typeof setTimeout>"u"?(_(),null):setTimeout(_,0)},cancelAnimationFrame(_){typeof setTimeout>"u"||clearTimeout(_)}};function getWindow(){const _=typeof window<"u"?window:{};return extend$2(_,ssrWindow),_}function classesToTokens(_){return _===void 0&&(_=""),_.trim().split(" ").filter(d=>!!d.trim())}function deleteProps(_){const d=_;Object.keys(d).forEach(v=>{try{d[v]=null}catch{}try{delete d[v]}catch{}})}function nextTick(_,d){return d===void 0&&(d=0),setTimeout(_,d)}function now(){return Date.now()}function getComputedStyle$1(_){const d=getWindow();let v;return d.getComputedStyle&&(v=d.getComputedStyle(_,null)),!v&&_.currentStyle&&(v=_.currentStyle),v||(v=_.style),v}function getTranslate(_,d){d===void 0&&(d="x");const v=getWindow();let A,C,w;const T=getComputedStyle$1(_);return v.WebKitCSSMatrix?(C=T.transform||T.webkitTransform,C.split(",").length>6&&(C=C.split(", ").map(R=>R.replace(",",".")).join(", ")),w=new v.WebKitCSSMatrix(C==="none"?"":C)):(w=T.MozTransform||T.OTransform||T.MsTransform||T.msTransform||T.transform||T.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),A=w.toString().split(",")),d==="x"&&(v.WebKitCSSMatrix?C=w.m41:A.length===16?C=parseFloat(A[12]):C=parseFloat(A[4])),d==="y"&&(v.WebKitCSSMatrix?C=w.m42:A.length===16?C=parseFloat(A[13]):C=parseFloat(A[5])),C||0}function isObject$1(_){return typeof _=="object"&&_!==null&&_.constructor&&Object.prototype.toString.call(_).slice(8,-1)==="Object"}function isNode(_){return typeof window<"u"&&typeof window.HTMLElement<"u"?_ instanceof HTMLElement:_&&(_.nodeType===1||_.nodeType===11)}function extend$1(){const _=Object(arguments.length<=0?void 0:arguments[0]),d=["__proto__","constructor","prototype"];for(let v=1;v<arguments.length;v+=1){const A=v<0||arguments.length<=v?void 0:arguments[v];if(A!=null&&!isNode(A)){const C=Object.keys(Object(A)).filter(w=>d.indexOf(w)<0);for(let w=0,T=C.length;w<T;w+=1){const R=C[w],G=Object.getOwnPropertyDescriptor(A,R);G!==void 0&&G.enumerable&&(isObject$1(_[R])&&isObject$1(A[R])?A[R].__swiper__?_[R]=A[R]:extend$1(_[R],A[R]):!isObject$1(_[R])&&isObject$1(A[R])?(_[R]={},A[R].__swiper__?_[R]=A[R]:extend$1(_[R],A[R])):_[R]=A[R])}}}return _}function setCSSProperty(_,d,v){_.style.setProperty(d,v)}function animateCSSModeScroll(_){let{swiper:d,targetPosition:v,side:A}=_;const C=getWindow(),w=-d.translate;let T=null,R;const G=d.params.speed;d.wrapperEl.style.scrollSnapType="none",C.cancelAnimationFrame(d.cssModeFrameID);const I=v>w?"next":"prev",z=(Y,ee)=>I==="next"&&Y>=ee||I==="prev"&&Y<=ee,H=()=>{R=new Date().getTime(),T===null&&(T=R);const Y=Math.max(Math.min((R-T)/G,1),0),ee=.5-Math.cos(Y*Math.PI)/2;let ie=w+ee*(v-w);if(z(ie,v)&&(ie=v),d.wrapperEl.scrollTo({[A]:ie}),z(ie,v)){d.wrapperEl.style.overflow="hidden",d.wrapperEl.style.scrollSnapType="",setTimeout(()=>{d.wrapperEl.style.overflow="",d.wrapperEl.scrollTo({[A]:ie})}),C.cancelAnimationFrame(d.cssModeFrameID);return}d.cssModeFrameID=C.requestAnimationFrame(H)};H()}function elementChildren(_,d){d===void 0&&(d="");const v=getWindow(),A=[..._.children];return v.HTMLSlotElement&&_ instanceof HTMLSlotElement&&A.push(..._.assignedElements()),d?A.filter(C=>C.matches(d)):A}function elementIsChildOfSlot(_,d){const v=[d];for(;v.length>0;){const A=v.shift();if(_===A)return!0;v.push(...A.children,...A.shadowRoot?A.shadowRoot.children:[],...A.assignedElements?A.assignedElements():[])}}function elementIsChildOf(_,d){const v=getWindow();let A=d.contains(_);return!A&&v.HTMLSlotElement&&d instanceof HTMLSlotElement&&(A=[...d.assignedElements()].includes(_),A||(A=elementIsChildOfSlot(_,d))),A}function showWarning(_){try{console.warn(_);return}catch{}}function createElement(_,d){d===void 0&&(d=[]);const v=document.createElement(_);return v.classList.add(...Array.isArray(d)?d:classesToTokens(d)),v}function elementPrevAll(_,d){const v=[];for(;_.previousElementSibling;){const A=_.previousElementSibling;d?A.matches(d)&&v.push(A):v.push(A),_=A}return v}function elementNextAll(_,d){const v=[];for(;_.nextElementSibling;){const A=_.nextElementSibling;d?A.matches(d)&&v.push(A):v.push(A),_=A}return v}function elementStyle(_,d){return getWindow().getComputedStyle(_,null).getPropertyValue(d)}function elementIndex(_){let d=_,v;if(d){for(v=0;(d=d.previousSibling)!==null;)d.nodeType===1&&(v+=1);return v}}function elementParents(_,d){const v=[];let A=_.parentElement;for(;A;)v.push(A),A=A.parentElement;return v}function elementOuterSize(_,d,v){const A=getWindow();return _[d==="width"?"offsetWidth":"offsetHeight"]+parseFloat(A.getComputedStyle(_,null).getPropertyValue(d==="width"?"margin-right":"margin-top"))+parseFloat(A.getComputedStyle(_,null).getPropertyValue(d==="width"?"margin-left":"margin-bottom"))}function setInnerHTML(_,d){d===void 0&&(d=""),typeof trustedTypes<"u"?_.innerHTML=trustedTypes.createPolicy("html",{createHTML:v=>v}).createHTML(d):_.innerHTML=d}let support;function calcSupport(){const _=getWindow(),d=getDocument();return{smoothScroll:d.documentElement&&d.documentElement.style&&"scrollBehavior"in d.documentElement.style,touch:!!("ontouchstart"in _||_.DocumentTouch&&d instanceof _.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(_){let{userAgent:d}=_===void 0?{}:_;const v=getSupport(),A=getWindow(),C=A.navigator.platform,w=d||A.navigator.userAgent,T={ios:!1,android:!1},R=A.screen.width,G=A.screen.height,I=w.match(/(Android);?[\s\/]+([\d.]+)?/);let z=w.match(/(iPad).*OS\s([\d_]+)/);const H=w.match(/(iPod)(.*OS\s([\d_]+))?/),Y=!z&&w.match(/(iPhone\sOS|iOS)\s([\d_]+)/),ee=C==="Win32";let ie=C==="MacIntel";const oe=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!z&&ie&&v.touch&&oe.indexOf(`${R}x${G}`)>=0&&(z=w.match(/(Version)\/([\d.]+)/),z||(z=[0,1,"13_0_0"]),ie=!1),I&&!ee&&(T.os="android",T.android=!0),(z||Y||H)&&(T.os="ios",T.ios=!0),T}function getDevice(_){return _===void 0&&(_={}),deviceCached||(deviceCached=calcDevice(_)),deviceCached}let browser$1;function calcBrowser(){const _=getWindow(),d=getDevice();let v=!1;function A(){const R=_.navigator.userAgent.toLowerCase();return R.indexOf("safari")>=0&&R.indexOf("chrome")<0&&R.indexOf("android")<0}if(A()){const R=String(_.navigator.userAgent);if(R.includes("Version/")){const[G,I]=R.split("Version/")[1].split(" ")[0].split(".").map(z=>Number(z));v=G<16||G===16&&I<2}}const C=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(_.navigator.userAgent),w=A(),T=w||C&&d.ios;return{isSafari:v||w,needPerspectiveFix:v,need3dFix:T,isWebView:C}}function getBrowser(){return browser$1||(browser$1=calcBrowser()),browser$1}function Resize(_){let{swiper:d,on:v,emit:A}=_;const C=getWindow();let w=null,T=null;const R=()=>{!d||d.destroyed||!d.initialized||(A("beforeResize"),A("resize"))},G=()=>{!d||d.destroyed||!d.initialized||(w=new ResizeObserver(H=>{T=C.requestAnimationFrame(()=>{const{width:Y,height:ee}=d;let ie=Y,oe=ee;H.forEach(se=>{let{contentBoxSize:re,contentRect:fe,target:ue}=se;ue&&ue!==d.el||(ie=fe?fe.width:(re[0]||re).inlineSize,oe=fe?fe.height:(re[0]||re).blockSize)}),(ie!==Y||oe!==ee)&&R()})}),w.observe(d.el))},I=()=>{T&&C.cancelAnimationFrame(T),w&&w.unobserve&&d.el&&(w.unobserve(d.el),w=null)},z=()=>{!d||d.destroyed||!d.initialized||A("orientationchange")};v("init",()=>{if(d.params.resizeObserver&&typeof C.ResizeObserver<"u"){G();return}C.addEventListener("resize",R),C.addEventListener("orientationchange",z)}),v("destroy",()=>{I(),C.removeEventListener("resize",R),C.removeEventListener("orientationchange",z)})}function Observer(_){let{swiper:d,extendParams:v,on:A,emit:C}=_;const w=[],T=getWindow(),R=function(z,H){H===void 0&&(H={});const Y=T.MutationObserver||T.WebkitMutationObserver,ee=new Y(ie=>{if(d.__preventObserver__)return;if(ie.length===1){C("observerUpdate",ie[0]);return}const oe=function(){C("observerUpdate",ie[0])};T.requestAnimationFrame?T.requestAnimationFrame(oe):T.setTimeout(oe,0)});ee.observe(z,{attributes:typeof H.attributes>"u"?!0:H.attributes,childList:d.isElement||(typeof H.childList>"u"?!0:H).childList,characterData:typeof H.characterData>"u"?!0:H.characterData}),w.push(ee)},G=()=>{if(d.params.observer){if(d.params.observeParents){const z=elementParents(d.hostEl);for(let H=0;H<z.length;H+=1)R(z[H])}R(d.hostEl,{childList:d.params.observeSlideChildren}),R(d.wrapperEl,{attributes:!1})}},I=()=>{w.forEach(z=>{z.disconnect()}),w.splice(0,w.length)};v({observer:!1,observeParents:!1,observeSlideChildren:!1}),A("init",G),A("destroy",I)}var eventsEmitter={on(_,d,v){const A=this;if(!A.eventsListeners||A.destroyed||typeof d!="function")return A;const C=v?"unshift":"push";return _.split(" ").forEach(w=>{A.eventsListeners[w]||(A.eventsListeners[w]=[]),A.eventsListeners[w][C](d)}),A},once(_,d,v){const A=this;if(!A.eventsListeners||A.destroyed||typeof d!="function")return A;function C(){A.off(_,C),C.__emitterProxy&&delete C.__emitterProxy;for(var w=arguments.length,T=new Array(w),R=0;R<w;R++)T[R]=arguments[R];d.apply(A,T)}return C.__emitterProxy=d,A.on(_,C,v)},onAny(_,d){const v=this;if(!v.eventsListeners||v.destroyed||typeof _!="function")return v;const A=d?"unshift":"push";return v.eventsAnyListeners.indexOf(_)<0&&v.eventsAnyListeners[A](_),v},offAny(_){const d=this;if(!d.eventsListeners||d.destroyed||!d.eventsAnyListeners)return d;const v=d.eventsAnyListeners.indexOf(_);return v>=0&&d.eventsAnyListeners.splice(v,1),d},off(_,d){const v=this;return!v.eventsListeners||v.destroyed||!v.eventsListeners||_.split(" ").forEach(A=>{typeof d>"u"?v.eventsListeners[A]=[]:v.eventsListeners[A]&&v.eventsListeners[A].forEach((C,w)=>{(C===d||C.__emitterProxy&&C.__emitterProxy===d)&&v.eventsListeners[A].splice(w,1)})}),v},emit(){const _=this;if(!_.eventsListeners||_.destroyed||!_.eventsListeners)return _;let d,v,A;for(var C=arguments.length,w=new Array(C),T=0;T<C;T++)w[T]=arguments[T];return typeof w[0]=="string"||Array.isArray(w[0])?(d=w[0],v=w.slice(1,w.length),A=_):(d=w[0].events,v=w[0].data,A=w[0].context||_),v.unshift(A),(Array.isArray(d)?d:d.split(" ")).forEach(G=>{_.eventsAnyListeners&&_.eventsAnyListeners.length&&_.eventsAnyListeners.forEach(I=>{I.apply(A,[G,...v])}),_.eventsListeners&&_.eventsListeners[G]&&_.eventsListeners[G].forEach(I=>{I.apply(A,v)})}),_}};function updateSize(){const _=this;let d,v;const A=_.el;typeof _.params.width<"u"&&_.params.width!==null?d=_.params.width:d=A.clientWidth,typeof _.params.height<"u"&&_.params.height!==null?v=_.params.height:v=A.clientHeight,!(d===0&&_.isHorizontal()||v===0&&_.isVertical())&&(d=d-parseInt(elementStyle(A,"padding-left")||0,10)-parseInt(elementStyle(A,"padding-right")||0,10),v=v-parseInt(elementStyle(A,"padding-top")||0,10)-parseInt(elementStyle(A,"padding-bottom")||0,10),Number.isNaN(d)&&(d=0),Number.isNaN(v)&&(v=0),Object.assign(_,{width:d,height:v,size:_.isHorizontal()?d:v}))}function updateSlides(){const _=this;function d(Be,De){return parseFloat(Be.getPropertyValue(_.getDirectionLabel(De))||0)}const v=_.params,{wrapperEl:A,slidesEl:C,size:w,rtlTranslate:T,wrongRTL:R}=_,G=_.virtual&&v.virtual.enabled,I=G?_.virtual.slides.length:_.slides.length,z=elementChildren(C,`.${_.params.slideClass}, swiper-slide`),H=G?_.virtual.slides.length:z.length;let Y=[];const ee=[],ie=[];let oe=v.slidesOffsetBefore;typeof oe=="function"&&(oe=v.slidesOffsetBefore.call(_));let se=v.slidesOffsetAfter;typeof se=="function"&&(se=v.slidesOffsetAfter.call(_));const re=_.snapGrid.length,fe=_.slidesGrid.length;let ue=v.spaceBetween,ge=-oe,ye=0,be=0;if(typeof w>"u")return;typeof ue=="string"&&ue.indexOf("%")>=0?ue=parseFloat(ue.replace("%",""))/100*w:typeof ue=="string"&&(ue=parseFloat(ue)),_.virtualSize=-ue,z.forEach(Be=>{T?Be.style.marginLeft="":Be.style.marginRight="",Be.style.marginBottom="",Be.style.marginTop=""}),v.centeredSlides&&v.cssMode&&(setCSSProperty(A,"--swiper-centered-offset-before",""),setCSSProperty(A,"--swiper-centered-offset-after",""));const ve=v.grid&&v.grid.rows>1&&_.grid;ve?_.grid.initSlides(z):_.grid&&_.grid.unsetSlides();let Me;const we=v.slidesPerView==="auto"&&v.breakpoints&&Object.keys(v.breakpoints).filter(Be=>typeof v.breakpoints[Be].slidesPerView<"u").length>0;for(let Be=0;Be<H;Be+=1){Me=0;let De;if(z[Be]&&(De=z[Be]),ve&&_.grid.updateSlide(Be,De,z),!(z[Be]&&elementStyle(De,"display")==="none")){if(v.slidesPerView==="auto"){we&&(z[Be].style[_.getDirectionLabel("width")]="");const Fe=getComputedStyle(De),Oe=De.style.transform,Ge=De.style.webkitTransform;if(Oe&&(De.style.transform="none"),Ge&&(De.style.webkitTransform="none"),v.roundLengths)Me=_.isHorizontal()?elementOuterSize(De,"width"):elementOuterSize(De,"height");else{const ze=d(Fe,"width"),je=d(Fe,"padding-left"),He=d(Fe,"padding-right"),Xe=d(Fe,"margin-left"),$e=d(Fe,"margin-right"),We=Fe.getPropertyValue("box-sizing");if(We&&We==="border-box")Me=ze+Xe+$e;else{const{clientWidth:nt,offsetWidth:Qt}=De;Me=ze+je+He+Xe+$e+(Qt-nt)}}Oe&&(De.style.transform=Oe),Ge&&(De.style.webkitTransform=Ge),v.roundLengths&&(Me=Math.floor(Me))}else Me=(w-(v.slidesPerView-1)*ue)/v.slidesPerView,v.roundLengths&&(Me=Math.floor(Me)),z[Be]&&(z[Be].style[_.getDirectionLabel("width")]=`${Me}px`);z[Be]&&(z[Be].swiperSlideSize=Me),ie.push(Me),v.centeredSlides?(ge=ge+Me/2+ye/2+ue,ye===0&&Be!==0&&(ge=ge-w/2-ue),Be===0&&(ge=ge-w/2-ue),Math.abs(ge)<1/1e3&&(ge=0),v.roundLengths&&(ge=Math.floor(ge)),be%v.slidesPerGroup===0&&Y.push(ge),ee.push(ge)):(v.roundLengths&&(ge=Math.floor(ge)),(be-Math.min(_.params.slidesPerGroupSkip,be))%_.params.slidesPerGroup===0&&Y.push(ge),ee.push(ge),ge=ge+Me+ue),_.virtualSize+=Me+ue,ye=Me,be+=1}}if(_.virtualSize=Math.max(_.virtualSize,w)+se,T&&R&&(v.effect==="slide"||v.effect==="coverflow")&&(A.style.width=`${_.virtualSize+ue}px`),v.setWrapperSize&&(A.style[_.getDirectionLabel("width")]=`${_.virtualSize+ue}px`),ve&&_.grid.updateWrapperSize(Me,Y),!v.centeredSlides){const Be=[];for(let De=0;De<Y.length;De+=1){let Fe=Y[De];v.roundLengths&&(Fe=Math.floor(Fe)),Y[De]<=_.virtualSize-w&&Be.push(Fe)}Y=Be,Math.floor(_.virtualSize-w)-Math.floor(Y[Y.length-1])>1&&Y.push(_.virtualSize-w)}if(G&&v.loop){const Be=ie[0]+ue;if(v.slidesPerGroup>1){const De=Math.ceil((_.virtual.slidesBefore+_.virtual.slidesAfter)/v.slidesPerGroup),Fe=Be*v.slidesPerGroup;for(let Oe=0;Oe<De;Oe+=1)Y.push(Y[Y.length-1]+Fe)}for(let De=0;De<_.virtual.slidesBefore+_.virtual.slidesAfter;De+=1)v.slidesPerGroup===1&&Y.push(Y[Y.length-1]+Be),ee.push(ee[ee.length-1]+Be),_.virtualSize+=Be}if(Y.length===0&&(Y=[0]),ue!==0){const Be=_.isHorizontal()&&T?"marginLeft":_.getDirectionLabel("marginRight");z.filter((De,Fe)=>!v.cssMode||v.loop?!0:Fe!==z.length-1).forEach(De=>{De.style[Be]=`${ue}px`})}if(v.centeredSlides&&v.centeredSlidesBounds){let Be=0;ie.forEach(Fe=>{Be+=Fe+(ue||0)}),Be-=ue;const De=Be>w?Be-w:0;Y=Y.map(Fe=>Fe<=0?-oe:Fe>De?De+se:Fe)}if(v.centerInsufficientSlides){let Be=0;ie.forEach(Fe=>{Be+=Fe+(ue||0)}),Be-=ue;const De=(v.slidesOffsetBefore||0)+(v.slidesOffsetAfter||0);if(Be+De<w){const Fe=(w-Be-De)/2;Y.forEach((Oe,Ge)=>{Y[Ge]=Oe-Fe}),ee.forEach((Oe,Ge)=>{ee[Ge]=Oe+Fe})}}if(Object.assign(_,{slides:z,snapGrid:Y,slidesGrid:ee,slidesSizesGrid:ie}),v.centeredSlides&&v.cssMode&&!v.centeredSlidesBounds){setCSSProperty(A,"--swiper-centered-offset-before",`${-Y[0]}px`),setCSSProperty(A,"--swiper-centered-offset-after",`${_.size/2-ie[ie.length-1]/2}px`);const Be=-_.snapGrid[0],De=-_.slidesGrid[0];_.snapGrid=_.snapGrid.map(Fe=>Fe+Be),_.slidesGrid=_.slidesGrid.map(Fe=>Fe+De)}if(H!==I&&_.emit("slidesLengthChange"),Y.length!==re&&(_.params.watchOverflow&&_.checkOverflow(),_.emit("snapGridLengthChange")),ee.length!==fe&&_.emit("slidesGridLengthChange"),v.watchSlidesProgress&&_.updateSlidesOffset(),_.emit("slidesUpdated"),!G&&!v.cssMode&&(v.effect==="slide"||v.effect==="fade")){const Be=`${v.containerModifierClass}backface-hidden`,De=_.el.classList.contains(Be);H<=v.maxBackfaceHiddenSlides?De||_.el.classList.add(Be):De&&_.el.classList.remove(Be)}}function updateAutoHeight(_){const d=this,v=[],A=d.virtual&&d.params.virtual.enabled;let C=0,w;typeof _=="number"?d.setTransition(_):_===!0&&d.setTransition(d.params.speed);const T=R=>A?d.slides[d.getSlideIndexByData(R)]:d.slides[R];if(d.params.slidesPerView!=="auto"&&d.params.slidesPerView>1)if(d.params.centeredSlides)(d.visibleSlides||[]).forEach(R=>{v.push(R)});else for(w=0;w<Math.ceil(d.params.slidesPerView);w+=1){const R=d.activeIndex+w;if(R>d.slides.length&&!A)break;v.push(T(R))}else v.push(T(d.activeIndex));for(w=0;w<v.length;w+=1)if(typeof v[w]<"u"){const R=v[w].offsetHeight;C=R>C?R:C}(C||C===0)&&(d.wrapperEl.style.height=`${C}px`)}function updateSlidesOffset(){const _=this,d=_.slides,v=_.isElement?_.isHorizontal()?_.wrapperEl.offsetLeft:_.wrapperEl.offsetTop:0;for(let A=0;A<d.length;A+=1)d[A].swiperSlideOffset=(_.isHorizontal()?d[A].offsetLeft:d[A].offsetTop)-v-_.cssOverflowAdjustment()}const toggleSlideClasses$1=(_,d,v)=>{d&&!_.classList.contains(v)?_.classList.add(v):!d&&_.classList.contains(v)&&_.classList.remove(v)};function updateSlidesProgress(_){_===void 0&&(_=this&&this.translate||0);const d=this,v=d.params,{slides:A,rtlTranslate:C,snapGrid:w}=d;if(A.length===0)return;typeof A[0].swiperSlideOffset>"u"&&d.updateSlidesOffset();let T=-_;C&&(T=_),d.visibleSlidesIndexes=[],d.visibleSlides=[];let R=v.spaceBetween;typeof R=="string"&&R.indexOf("%")>=0?R=parseFloat(R.replace("%",""))/100*d.size:typeof R=="string"&&(R=parseFloat(R));for(let G=0;G<A.length;G+=1){const I=A[G];let z=I.swiperSlideOffset;v.cssMode&&v.centeredSlides&&(z-=A[0].swiperSlideOffset);const H=(T+(v.centeredSlides?d.minTranslate():0)-z)/(I.swiperSlideSize+R),Y=(T-w[0]+(v.centeredSlides?d.minTranslate():0)-z)/(I.swiperSlideSize+R),ee=-(T-z),ie=ee+d.slidesSizesGrid[G],oe=ee>=0&&ee<=d.size-d.slidesSizesGrid[G],se=ee>=0&&ee<d.size-1||ie>1&&ie<=d.size||ee<=0&&ie>=d.size;se&&(d.visibleSlides.push(I),d.visibleSlidesIndexes.push(G)),toggleSlideClasses$1(I,se,v.slideVisibleClass),toggleSlideClasses$1(I,oe,v.slideFullyVisibleClass),I.progress=C?-H:H,I.originalProgress=C?-Y:Y}}function updateProgress(_){const d=this;if(typeof _>"u"){const z=d.rtlTranslate?-1:1;_=d&&d.translate&&d.translate*z||0}const v=d.params,A=d.maxTranslate()-d.minTranslate();let{progress:C,isBeginning:w,isEnd:T,progressLoop:R}=d;const G=w,I=T;if(A===0)C=0,w=!0,T=!0;else{C=(_-d.minTranslate())/A;const z=Math.abs(_-d.minTranslate())<1,H=Math.abs(_-d.maxTranslate())<1;w=z||C<=0,T=H||C>=1,z&&(C=0),H&&(C=1)}if(v.loop){const z=d.getSlideIndexByData(0),H=d.getSlideIndexByData(d.slides.length-1),Y=d.slidesGrid[z],ee=d.slidesGrid[H],ie=d.slidesGrid[d.slidesGrid.length-1],oe=Math.abs(_);oe>=Y?R=(oe-Y)/ie:R=(oe+ie-ee)/ie,R>1&&(R-=1)}Object.assign(d,{progress:C,progressLoop:R,isBeginning:w,isEnd:T}),(v.watchSlidesProgress||v.centeredSlides&&v.autoHeight)&&d.updateSlidesProgress(_),w&&!G&&d.emit("reachBeginning toEdge"),T&&!I&&d.emit("reachEnd toEdge"),(G&&!w||I&&!T)&&d.emit("fromEdge"),d.emit("progress",C)}const toggleSlideClasses=(_,d,v)=>{d&&!_.classList.contains(v)?_.classList.add(v):!d&&_.classList.contains(v)&&_.classList.remove(v)};function updateSlidesClasses(){const _=this,{slides:d,params:v,slidesEl:A,activeIndex:C}=_,w=_.virtual&&v.virtual.enabled,T=_.grid&&v.grid&&v.grid.rows>1,R=H=>elementChildren(A,`.${v.slideClass}${H}, swiper-slide${H}`)[0];let G,I,z;if(w)if(v.loop){let H=C-_.virtual.slidesBefore;H<0&&(H=_.virtual.slides.length+H),H>=_.virtual.slides.length&&(H-=_.virtual.slides.length),G=R(`[data-swiper-slide-index="${H}"]`)}else G=R(`[data-swiper-slide-index="${C}"]`);else T?(G=d.find(H=>H.column===C),z=d.find(H=>H.column===C+1),I=d.find(H=>H.column===C-1)):G=d[C];G&&(T||(z=elementNextAll(G,`.${v.slideClass}, swiper-slide`)[0],v.loop&&!z&&(z=d[0]),I=elementPrevAll(G,`.${v.slideClass}, swiper-slide`)[0],v.loop&&!I===0&&(I=d[d.length-1]))),d.forEach(H=>{toggleSlideClasses(H,H===G,v.slideActiveClass),toggleSlideClasses(H,H===z,v.slideNextClass),toggleSlideClasses(H,H===I,v.slidePrevClass)}),_.emitSlidesClasses()}const processLazyPreloader=(_,d)=>{if(!_||_.destroyed||!_.params)return;const v=()=>_.isElement?"swiper-slide":`.${_.params.slideClass}`,A=d.closest(v());if(A){let C=A.querySelector(`.${_.params.lazyPreloaderClass}`);!C&&_.isElement&&(A.shadowRoot?C=A.shadowRoot.querySelector(`.${_.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{A.shadowRoot&&(C=A.shadowRoot.querySelector(`.${_.params.lazyPreloaderClass}`),C&&C.remove())})),C&&C.remove()}},unlazy=(_,d)=>{if(!_.slides[d])return;const v=_.slides[d].querySelector('[loading="lazy"]');v&&v.removeAttribute("loading")},preload=_=>{if(!_||_.destroyed||!_.params)return;let d=_.params.lazyPreloadPrevNext;const v=_.slides.length;if(!v||!d||d<0)return;d=Math.min(d,v);const A=_.params.slidesPerView==="auto"?_.slidesPerViewDynamic():Math.ceil(_.params.slidesPerView),C=_.activeIndex;if(_.params.grid&&_.params.grid.rows>1){const T=C,R=[T-d];R.push(...Array.from({length:d}).map((G,I)=>T+A+I)),_.slides.forEach((G,I)=>{R.includes(G.column)&&unlazy(_,I)});return}const w=C+A-1;if(_.params.rewind||_.params.loop)for(let T=C-d;T<=w+d;T+=1){const R=(T%v+v)%v;(R<C||R>w)&&unlazy(_,R)}else for(let T=Math.max(C-d,0);T<=Math.min(w+d,v-1);T+=1)T!==C&&(T>w||T<C)&&unlazy(_,T)};function getActiveIndexByTranslate(_){const{slidesGrid:d,params:v}=_,A=_.rtlTranslate?_.translate:-_.translate;let C;for(let w=0;w<d.length;w+=1)typeof d[w+1]<"u"?A>=d[w]&&A<d[w+1]-(d[w+1]-d[w])/2?C=w:A>=d[w]&&A<d[w+1]&&(C=w+1):A>=d[w]&&(C=w);return v.normalizeSlideIndex&&(C<0||typeof C>"u")&&(C=0),C}function updateActiveIndex(_){const d=this,v=d.rtlTranslate?d.translate:-d.translate,{snapGrid:A,params:C,activeIndex:w,realIndex:T,snapIndex:R}=d;let G=_,I;const z=ee=>{let ie=ee-d.virtual.slidesBefore;return ie<0&&(ie=d.virtual.slides.length+ie),ie>=d.virtual.slides.length&&(ie-=d.virtual.slides.length),ie};if(typeof G>"u"&&(G=getActiveIndexByTranslate(d)),A.indexOf(v)>=0)I=A.indexOf(v);else{const ee=Math.min(C.slidesPerGroupSkip,G);I=ee+Math.floor((G-ee)/C.slidesPerGroup)}if(I>=A.length&&(I=A.length-1),G===w&&!d.params.loop){I!==R&&(d.snapIndex=I,d.emit("snapIndexChange"));return}if(G===w&&d.params.loop&&d.virtual&&d.params.virtual.enabled){d.realIndex=z(G);return}const H=d.grid&&C.grid&&C.grid.rows>1;let Y;if(d.virtual&&C.virtual.enabled&&C.loop)Y=z(G);else if(H){const ee=d.slides.find(oe=>oe.column===G);let ie=parseInt(ee.getAttribute("data-swiper-slide-index"),10);Number.isNaN(ie)&&(ie=Math.max(d.slides.indexOf(ee),0)),Y=Math.floor(ie/C.grid.rows)}else if(d.slides[G]){const ee=d.slides[G].getAttribute("data-swiper-slide-index");ee?Y=parseInt(ee,10):Y=G}else Y=G;Object.assign(d,{previousSnapIndex:R,snapIndex:I,previousRealIndex:T,realIndex:Y,previousIndex:w,activeIndex:G}),d.initialized&&preload(d),d.emit("activeIndexChange"),d.emit("snapIndexChange"),(d.initialized||d.params.runCallbacksOnInit)&&(T!==Y&&d.emit("realIndexChange"),d.emit("slideChange"))}function updateClickedSlide(_,d){const v=this,A=v.params;let C=_.closest(`.${A.slideClass}, swiper-slide`);!C&&v.isElement&&d&&d.length>1&&d.includes(_)&&[...d.slice(d.indexOf(_)+1,d.length)].forEach(R=>{!C&&R.matches&&R.matches(`.${A.slideClass}, swiper-slide`)&&(C=R)});let w=!1,T;if(C){for(let R=0;R<v.slides.length;R+=1)if(v.slides[R]===C){w=!0,T=R;break}}if(C&&w)v.clickedSlide=C,v.virtual&&v.params.virtual.enabled?v.clickedIndex=parseInt(C.getAttribute("data-swiper-slide-index"),10):v.clickedIndex=T;else{v.clickedSlide=void 0,v.clickedIndex=void 0;return}A.slideToClickedSlide&&v.clickedIndex!==void 0&&v.clickedIndex!==v.activeIndex&&v.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(_){_===void 0&&(_=this.isHorizontal()?"x":"y");const d=this,{params:v,rtlTranslate:A,translate:C,wrapperEl:w}=d;if(v.virtualTranslate)return A?-C:C;if(v.cssMode)return C;let T=getTranslate(w,_);return T+=d.cssOverflowAdjustment(),A&&(T=-T),T||0}function setTranslate(_,d){const v=this,{rtlTranslate:A,params:C,wrapperEl:w,progress:T}=v;let R=0,G=0;const I=0;v.isHorizontal()?R=A?-_:_:G=_,C.roundLengths&&(R=Math.floor(R),G=Math.floor(G)),v.previousTranslate=v.translate,v.translate=v.isHorizontal()?R:G,C.cssMode?w[v.isHorizontal()?"scrollLeft":"scrollTop"]=v.isHorizontal()?-R:-G:C.virtualTranslate||(v.isHorizontal()?R-=v.cssOverflowAdjustment():G-=v.cssOverflowAdjustment(),w.style.transform=`translate3d(${R}px, ${G}px, ${I}px)`);let z;const H=v.maxTranslate()-v.minTranslate();H===0?z=0:z=(_-v.minTranslate())/H,z!==T&&v.updateProgress(_),v.emit("setTranslate",v.translate,d)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(_,d,v,A,C){_===void 0&&(_=0),d===void 0&&(d=this.params.speed),v===void 0&&(v=!0),A===void 0&&(A=!0);const w=this,{params:T,wrapperEl:R}=w;if(w.animating&&T.preventInteractionOnTransition)return!1;const G=w.minTranslate(),I=w.maxTranslate();let z;if(A&&_>G?z=G:A&&_<I?z=I:z=_,w.updateProgress(z),T.cssMode){const H=w.isHorizontal();if(d===0)R[H?"scrollLeft":"scrollTop"]=-z;else{if(!w.support.smoothScroll)return animateCSSModeScroll({swiper:w,targetPosition:-z,side:H?"left":"top"}),!0;R.scrollTo({[H?"left":"top"]:-z,behavior:"smooth"})}return!0}return d===0?(w.setTransition(0),w.setTranslate(z),v&&(w.emit("beforeTransitionStart",d,C),w.emit("transitionEnd"))):(w.setTransition(d),w.setTranslate(z),v&&(w.emit("beforeTransitionStart",d,C),w.emit("transitionStart")),w.animating||(w.animating=!0,w.onTranslateToWrapperTransitionEnd||(w.onTranslateToWrapperTransitionEnd=function(Y){!w||w.destroyed||Y.target===this&&(w.wrapperEl.removeEventListener("transitionend",w.onTranslateToWrapperTransitionEnd),w.onTranslateToWrapperTransitionEnd=null,delete w.onTranslateToWrapperTransitionEnd,w.animating=!1,v&&w.emit("transitionEnd"))}),w.wrapperEl.addEventListener("transitionend",w.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(_,d){const v=this;v.params.cssMode||(v.wrapperEl.style.transitionDuration=`${_}ms`,v.wrapperEl.style.transitionDelay=_===0?"0ms":""),v.emit("setTransition",_,d)}function transitionEmit(_){let{swiper:d,runCallbacks:v,direction:A,step:C}=_;const{activeIndex:w,previousIndex:T}=d;let R=A;R||(w>T?R="next":w<T?R="prev":R="reset"),d.emit(`transition${C}`),v&&R==="reset"?d.emit(`slideResetTransition${C}`):v&&w!==T&&(d.emit(`slideChangeTransition${C}`),R==="next"?d.emit(`slideNextTransition${C}`):d.emit(`slidePrevTransition${C}`))}function transitionStart(_,d){_===void 0&&(_=!0);const v=this,{params:A}=v;A.cssMode||(A.autoHeight&&v.updateAutoHeight(),transitionEmit({swiper:v,runCallbacks:_,direction:d,step:"Start"}))}function transitionEnd(_,d){_===void 0&&(_=!0);const v=this,{params:A}=v;v.animating=!1,!A.cssMode&&(v.setTransition(0),transitionEmit({swiper:v,runCallbacks:_,direction:d,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(_,d,v,A,C){_===void 0&&(_=0),v===void 0&&(v=!0),typeof _=="string"&&(_=parseInt(_,10));const w=this;let T=_;T<0&&(T=0);const{params:R,snapGrid:G,slidesGrid:I,previousIndex:z,activeIndex:H,rtlTranslate:Y,wrapperEl:ee,enabled:ie}=w;if(!ie&&!A&&!C||w.destroyed||w.animating&&R.preventInteractionOnTransition)return!1;typeof d>"u"&&(d=w.params.speed);const oe=Math.min(w.params.slidesPerGroupSkip,T);let se=oe+Math.floor((T-oe)/w.params.slidesPerGroup);se>=G.length&&(se=G.length-1);const re=-G[se];if(R.normalizeSlideIndex)for(let ve=0;ve<I.length;ve+=1){const Me=-Math.floor(re*100),we=Math.floor(I[ve]*100),Be=Math.floor(I[ve+1]*100);typeof I[ve+1]<"u"?Me>=we&&Me<Be-(Be-we)/2?T=ve:Me>=we&&Me<Be&&(T=ve+1):Me>=we&&(T=ve)}if(w.initialized&&T!==H&&(!w.allowSlideNext&&(Y?re>w.translate&&re>w.minTranslate():re<w.translate&&re<w.minTranslate())||!w.allowSlidePrev&&re>w.translate&&re>w.maxTranslate()&&(H||0)!==T))return!1;T!==(z||0)&&v&&w.emit("beforeSlideChangeStart"),w.updateProgress(re);let fe;T>H?fe="next":T<H?fe="prev":fe="reset";const ue=w.virtual&&w.params.virtual.enabled;if(!(ue&&C)&&(Y&&-re===w.translate||!Y&&re===w.translate))return w.updateActiveIndex(T),R.autoHeight&&w.updateAutoHeight(),w.updateSlidesClasses(),R.effect!=="slide"&&w.setTranslate(re),fe!=="reset"&&(w.transitionStart(v,fe),w.transitionEnd(v,fe)),!1;if(R.cssMode){const ve=w.isHorizontal(),Me=Y?re:-re;if(d===0)ue&&(w.wrapperEl.style.scrollSnapType="none",w._immediateVirtual=!0),ue&&!w._cssModeVirtualInitialSet&&w.params.initialSlide>0?(w._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{ee[ve?"scrollLeft":"scrollTop"]=Me})):ee[ve?"scrollLeft":"scrollTop"]=Me,ue&&requestAnimationFrame(()=>{w.wrapperEl.style.scrollSnapType="",w._immediateVirtual=!1});else{if(!w.support.smoothScroll)return animateCSSModeScroll({swiper:w,targetPosition:Me,side:ve?"left":"top"}),!0;ee.scrollTo({[ve?"left":"top"]:Me,behavior:"smooth"})}return!0}const be=getBrowser().isSafari;return ue&&!C&&be&&w.isElement&&w.virtual.update(!1,!1,T),w.setTransition(d),w.setTranslate(re),w.updateActiveIndex(T),w.updateSlidesClasses(),w.emit("beforeTransitionStart",d,A),w.transitionStart(v,fe),d===0?w.transitionEnd(v,fe):w.animating||(w.animating=!0,w.onSlideToWrapperTransitionEnd||(w.onSlideToWrapperTransitionEnd=function(Me){!w||w.destroyed||Me.target===this&&(w.wrapperEl.removeEventListener("transitionend",w.onSlideToWrapperTransitionEnd),w.onSlideToWrapperTransitionEnd=null,delete w.onSlideToWrapperTransitionEnd,w.transitionEnd(v,fe))}),w.wrapperEl.addEventListener("transitionend",w.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(_,d,v,A){_===void 0&&(_=0),v===void 0&&(v=!0),typeof _=="string"&&(_=parseInt(_,10));const C=this;if(C.destroyed)return;typeof d>"u"&&(d=C.params.speed);const w=C.grid&&C.params.grid&&C.params.grid.rows>1;let T=_;if(C.params.loop)if(C.virtual&&C.params.virtual.enabled)T=T+C.virtual.slidesBefore;else{let R;if(w){const Y=T*C.params.grid.rows;R=C.slides.find(ee=>ee.getAttribute("data-swiper-slide-index")*1===Y).column}else R=C.getSlideIndexByData(T);const G=w?Math.ceil(C.slides.length/C.params.grid.rows):C.slides.length,{centeredSlides:I}=C.params;let z=C.params.slidesPerView;z==="auto"?z=C.slidesPerViewDynamic():(z=Math.ceil(parseFloat(C.params.slidesPerView,10)),I&&z%2===0&&(z=z+1));let H=G-R<z;if(I&&(H=H||R<Math.ceil(z/2)),A&&I&&C.params.slidesPerView!=="auto"&&!w&&(H=!1),H){const Y=I?R<C.activeIndex?"prev":"next":R-C.activeIndex-1<C.params.slidesPerView?"next":"prev";C.loopFix({direction:Y,slideTo:!0,activeSlideIndex:Y==="next"?R+1:R-G+1,slideRealIndex:Y==="next"?C.realIndex:void 0})}if(w){const Y=T*C.params.grid.rows;T=C.slides.find(ee=>ee.getAttribute("data-swiper-slide-index")*1===Y).column}else T=C.getSlideIndexByData(T)}return requestAnimationFrame(()=>{C.slideTo(T,d,v,A)}),C}function slideNext(_,d,v){d===void 0&&(d=!0);const A=this,{enabled:C,params:w,animating:T}=A;if(!C||A.destroyed)return A;typeof _>"u"&&(_=A.params.speed);let R=w.slidesPerGroup;w.slidesPerView==="auto"&&w.slidesPerGroup===1&&w.slidesPerGroupAuto&&(R=Math.max(A.slidesPerViewDynamic("current",!0),1));const G=A.activeIndex<w.slidesPerGroupSkip?1:R,I=A.virtual&&w.virtual.enabled;if(w.loop){if(T&&!I&&w.loopPreventsSliding)return!1;if(A.loopFix({direction:"next"}),A._clientLeft=A.wrapperEl.clientLeft,A.activeIndex===A.slides.length-1&&w.cssMode)return requestAnimationFrame(()=>{A.slideTo(A.activeIndex+G,_,d,v)}),!0}return w.rewind&&A.isEnd?A.slideTo(0,_,d,v):A.slideTo(A.activeIndex+G,_,d,v)}function slidePrev(_,d,v){d===void 0&&(d=!0);const A=this,{params:C,snapGrid:w,slidesGrid:T,rtlTranslate:R,enabled:G,animating:I}=A;if(!G||A.destroyed)return A;typeof _>"u"&&(_=A.params.speed);const z=A.virtual&&C.virtual.enabled;if(C.loop){if(I&&!z&&C.loopPreventsSliding)return!1;A.loopFix({direction:"prev"}),A._clientLeft=A.wrapperEl.clientLeft}const H=R?A.translate:-A.translate;function Y(fe){return fe<0?-Math.floor(Math.abs(fe)):Math.floor(fe)}const ee=Y(H),ie=w.map(fe=>Y(fe)),oe=C.freeMode&&C.freeMode.enabled;let se=w[ie.indexOf(ee)-1];if(typeof se>"u"&&(C.cssMode||oe)){let fe;w.forEach((ue,ge)=>{ee>=ue&&(fe=ge)}),typeof fe<"u"&&(se=oe?w[fe]:w[fe>0?fe-1:fe])}let re=0;if(typeof se<"u"&&(re=T.indexOf(se),re<0&&(re=A.activeIndex-1),C.slidesPerView==="auto"&&C.slidesPerGroup===1&&C.slidesPerGroupAuto&&(re=re-A.slidesPerViewDynamic("previous",!0)+1,re=Math.max(re,0))),C.rewind&&A.isBeginning){const fe=A.params.virtual&&A.params.virtual.enabled&&A.virtual?A.virtual.slides.length-1:A.slides.length-1;return A.slideTo(fe,_,d,v)}else if(C.loop&&A.activeIndex===0&&C.cssMode)return requestAnimationFrame(()=>{A.slideTo(re,_,d,v)}),!0;return A.slideTo(re,_,d,v)}function slideReset(_,d,v){d===void 0&&(d=!0);const A=this;if(!A.destroyed)return typeof _>"u"&&(_=A.params.speed),A.slideTo(A.activeIndex,_,d,v)}function slideToClosest(_,d,v,A){d===void 0&&(d=!0),A===void 0&&(A=.5);const C=this;if(C.destroyed)return;typeof _>"u"&&(_=C.params.speed);let w=C.activeIndex;const T=Math.min(C.params.slidesPerGroupSkip,w),R=T+Math.floor((w-T)/C.params.slidesPerGroup),G=C.rtlTranslate?C.translate:-C.translate;if(G>=C.snapGrid[R]){const I=C.snapGrid[R],z=C.snapGrid[R+1];G-I>(z-I)*A&&(w+=C.params.slidesPerGroup)}else{const I=C.snapGrid[R-1],z=C.snapGrid[R];G-I<=(z-I)*A&&(w-=C.params.slidesPerGroup)}return w=Math.max(w,0),w=Math.min(w,C.slidesGrid.length-1),C.slideTo(w,_,d,v)}function slideToClickedSlide(){const _=this;if(_.destroyed)return;const{params:d,slidesEl:v}=_,A=d.slidesPerView==="auto"?_.slidesPerViewDynamic():d.slidesPerView;let C=_.getSlideIndexWhenGrid(_.clickedIndex),w;const T=_.isElement?"swiper-slide":`.${d.slideClass}`,R=_.grid&&_.params.grid&&_.params.grid.rows>1;if(d.loop){if(_.animating)return;w=parseInt(_.clickedSlide.getAttribute("data-swiper-slide-index"),10),d.centeredSlides?_.slideToLoop(w):C>(R?(_.slides.length-A)/2-(_.params.grid.rows-1):_.slides.length-A)?(_.loopFix(),C=_.getSlideIndex(elementChildren(v,`${T}[data-swiper-slide-index="${w}"]`)[0]),nextTick(()=>{_.slideTo(C)})):_.slideTo(C)}else _.slideTo(C)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(_,d){const v=this,{params:A,slidesEl:C}=v;if(!A.loop||v.virtual&&v.params.virtual.enabled)return;const w=()=>{elementChildren(C,`.${A.slideClass}, swiper-slide`).forEach((ee,ie)=>{ee.setAttribute("data-swiper-slide-index",ie)})},T=()=>{const Y=elementChildren(C,`.${A.slideBlankClass}`);Y.forEach(ee=>{ee.remove()}),Y.length>0&&(v.recalcSlides(),v.updateSlides())},R=v.grid&&A.grid&&A.grid.rows>1;A.loopAddBlankSlides&&(A.slidesPerGroup>1||R)&&T();const G=A.slidesPerGroup*(R?A.grid.rows:1),I=v.slides.length%G!==0,z=R&&v.slides.length%A.grid.rows!==0,H=Y=>{for(let ee=0;ee<Y;ee+=1){const ie=v.isElement?createElement("swiper-slide",[A.slideBlankClass]):createElement("div",[A.slideClass,A.slideBlankClass]);v.slidesEl.append(ie)}};if(I){if(A.loopAddBlankSlides){const Y=G-v.slides.length%G;H(Y),v.recalcSlides(),v.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");w()}else if(z){if(A.loopAddBlankSlides){const Y=A.grid.rows-v.slides.length%A.grid.rows;H(Y),v.recalcSlides(),v.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");w()}else w();v.loopFix({slideRealIndex:_,direction:A.centeredSlides?void 0:"next",initial:d})}function loopFix(_){let{slideRealIndex:d,slideTo:v=!0,direction:A,setTranslate:C,activeSlideIndex:w,initial:T,byController:R,byMousewheel:G}=_===void 0?{}:_;const I=this;if(!I.params.loop)return;I.emit("beforeLoopFix");const{slides:z,allowSlidePrev:H,allowSlideNext:Y,slidesEl:ee,params:ie}=I,{centeredSlides:oe,initialSlide:se}=ie;if(I.allowSlidePrev=!0,I.allowSlideNext=!0,I.virtual&&ie.virtual.enabled){v&&(!ie.centeredSlides&&I.snapIndex===0?I.slideTo(I.virtual.slides.length,0,!1,!0):ie.centeredSlides&&I.snapIndex<ie.slidesPerView?I.slideTo(I.virtual.slides.length+I.snapIndex,0,!1,!0):I.snapIndex===I.snapGrid.length-1&&I.slideTo(I.virtual.slidesBefore,0,!1,!0)),I.allowSlidePrev=H,I.allowSlideNext=Y,I.emit("loopFix");return}let re=ie.slidesPerView;re==="auto"?re=I.slidesPerViewDynamic():(re=Math.ceil(parseFloat(ie.slidesPerView,10)),oe&&re%2===0&&(re=re+1));const fe=ie.slidesPerGroupAuto?re:ie.slidesPerGroup;let ue=oe?Math.max(fe,Math.ceil(re/2)):fe;ue%fe!==0&&(ue+=fe-ue%fe),ue+=ie.loopAdditionalSlides,I.loopedSlides=ue;const ge=I.grid&&ie.grid&&ie.grid.rows>1;z.length<re+ue||I.params.effect==="cards"&&z.length<re+ue*2?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):ge&&ie.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const ye=[],be=[],ve=ge?Math.ceil(z.length/ie.grid.rows):z.length,Me=T&&ve-se<re&&!oe;let we=Me?se:I.activeIndex;typeof w>"u"?w=I.getSlideIndex(z.find(je=>je.classList.contains(ie.slideActiveClass))):we=w;const Be=A==="next"||!A,De=A==="prev"||!A;let Fe=0,Oe=0;const ze=(ge?z[w].column:w)+(oe&&typeof C>"u"?-re/2+.5:0);if(ze<ue){Fe=Math.max(ue-ze,fe);for(let je=0;je<ue-ze;je+=1){const He=je-Math.floor(je/ve)*ve;if(ge){const Xe=ve-He-1;for(let $e=z.length-1;$e>=0;$e-=1)z[$e].column===Xe&&ye.push($e)}else ye.push(ve-He-1)}}else if(ze+re>ve-ue){Oe=Math.max(ze-(ve-ue*2),fe),Me&&(Oe=Math.max(Oe,re-ve+se+1));for(let je=0;je<Oe;je+=1){const He=je-Math.floor(je/ve)*ve;ge?z.forEach((Xe,$e)=>{Xe.column===He&&be.push($e)}):be.push(He)}}if(I.__preventObserver__=!0,requestAnimationFrame(()=>{I.__preventObserver__=!1}),I.params.effect==="cards"&&z.length<re+ue*2&&(be.includes(w)&&be.splice(be.indexOf(w),1),ye.includes(w)&&ye.splice(ye.indexOf(w),1)),De&&ye.forEach(je=>{z[je].swiperLoopMoveDOM=!0,ee.prepend(z[je]),z[je].swiperLoopMoveDOM=!1}),Be&&be.forEach(je=>{z[je].swiperLoopMoveDOM=!0,ee.append(z[je]),z[je].swiperLoopMoveDOM=!1}),I.recalcSlides(),ie.slidesPerView==="auto"?I.updateSlides():ge&&(ye.length>0&&De||be.length>0&&Be)&&I.slides.forEach((je,He)=>{I.grid.updateSlide(He,je,I.slides)}),ie.watchSlidesProgress&&I.updateSlidesOffset(),v){if(ye.length>0&&De){if(typeof d>"u"){const je=I.slidesGrid[we],Xe=I.slidesGrid[we+Fe]-je;G?I.setTranslate(I.translate-Xe):(I.slideTo(we+Math.ceil(Fe),0,!1,!0),C&&(I.touchEventsData.startTranslate=I.touchEventsData.startTranslate-Xe,I.touchEventsData.currentTranslate=I.touchEventsData.currentTranslate-Xe))}else if(C){const je=ge?ye.length/ie.grid.rows:ye.length;I.slideTo(I.activeIndex+je,0,!1,!0),I.touchEventsData.currentTranslate=I.translate}}else if(be.length>0&&Be)if(typeof d>"u"){const je=I.slidesGrid[we],Xe=I.slidesGrid[we-Oe]-je;G?I.setTranslate(I.translate-Xe):(I.slideTo(we-Oe,0,!1,!0),C&&(I.touchEventsData.startTranslate=I.touchEventsData.startTranslate-Xe,I.touchEventsData.currentTranslate=I.touchEventsData.currentTranslate-Xe))}else{const je=ge?be.length/ie.grid.rows:be.length;I.slideTo(I.activeIndex-je,0,!1,!0)}}if(I.allowSlidePrev=H,I.allowSlideNext=Y,I.controller&&I.controller.control&&!R){const je={slideRealIndex:d,direction:A,setTranslate:C,activeSlideIndex:w,byController:!0};Array.isArray(I.controller.control)?I.controller.control.forEach(He=>{!He.destroyed&&He.params.loop&&He.loopFix({...je,slideTo:He.params.slidesPerView===ie.slidesPerView?v:!1})}):I.controller.control instanceof I.constructor&&I.controller.control.params.loop&&I.controller.control.loopFix({...je,slideTo:I.controller.control.params.slidesPerView===ie.slidesPerView?v:!1})}I.emit("loopFix")}function loopDestroy(){const _=this,{params:d,slidesEl:v}=_;if(!d.loop||!v||_.virtual&&_.params.virtual.enabled)return;_.recalcSlides();const A=[];_.slides.forEach(C=>{const w=typeof C.swiperSlideIndex>"u"?C.getAttribute("data-swiper-slide-index")*1:C.swiperSlideIndex;A[w]=C}),_.slides.forEach(C=>{C.removeAttribute("data-swiper-slide-index")}),A.forEach(C=>{v.append(C)}),_.recalcSlides(),_.slideTo(_.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(_){const d=this;if(!d.params.simulateTouch||d.params.watchOverflow&&d.isLocked||d.params.cssMode)return;const v=d.params.touchEventsTarget==="container"?d.el:d.wrapperEl;d.isElement&&(d.__preventObserver__=!0),v.style.cursor="move",v.style.cursor=_?"grabbing":"grab",d.isElement&&requestAnimationFrame(()=>{d.__preventObserver__=!1})}function unsetGrabCursor(){const _=this;_.params.watchOverflow&&_.isLocked||_.params.cssMode||(_.isElement&&(_.__preventObserver__=!0),_[_.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",_.isElement&&requestAnimationFrame(()=>{_.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(_,d){d===void 0&&(d=this);function v(A){if(!A||A===getDocument()||A===getWindow())return null;A.assignedSlot&&(A=A.assignedSlot);const C=A.closest(_);return!C&&!A.getRootNode?null:C||v(A.getRootNode().host)}return v(d)}function preventEdgeSwipe(_,d,v){const A=getWindow(),{params:C}=_,w=C.edgeSwipeDetection,T=C.edgeSwipeThreshold;return w&&(v<=T||v>=A.innerWidth-T)?w==="prevent"?(d.preventDefault(),!0):!1:!0}function onTouchStart(_){const d=this,v=getDocument();let A=_;A.originalEvent&&(A=A.originalEvent);const C=d.touchEventsData;if(A.type==="pointerdown"){if(C.pointerId!==null&&C.pointerId!==A.pointerId)return;C.pointerId=A.pointerId}else A.type==="touchstart"&&A.targetTouches.length===1&&(C.touchId=A.targetTouches[0].identifier);if(A.type==="touchstart"){preventEdgeSwipe(d,A,A.targetTouches[0].pageX);return}const{params:w,touches:T,enabled:R}=d;if(!R||!w.simulateTouch&&A.pointerType==="mouse"||d.animating&&w.preventInteractionOnTransition)return;!d.animating&&w.cssMode&&w.loop&&d.loopFix();let G=A.target;if(w.touchEventsTarget==="wrapper"&&!elementIsChildOf(G,d.wrapperEl)||"which"in A&&A.which===3||"button"in A&&A.button>0||C.isTouched&&C.isMoved)return;const I=!!w.noSwipingClass&&w.noSwipingClass!=="",z=A.composedPath?A.composedPath():A.path;I&&A.target&&A.target.shadowRoot&&z&&(G=z[0]);const H=w.noSwipingSelector?w.noSwipingSelector:`.${w.noSwipingClass}`,Y=!!(A.target&&A.target.shadowRoot);if(w.noSwiping&&(Y?closestElement(H,G):G.closest(H))){d.allowClick=!0;return}if(w.swipeHandler&&!G.closest(w.swipeHandler))return;T.currentX=A.pageX,T.currentY=A.pageY;const ee=T.currentX,ie=T.currentY;if(!preventEdgeSwipe(d,A,ee))return;Object.assign(C,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),T.startX=ee,T.startY=ie,C.touchStartTime=now(),d.allowClick=!0,d.updateSize(),d.swipeDirection=void 0,w.threshold>0&&(C.allowThresholdMove=!1);let oe=!0;G.matches(C.focusableElements)&&(oe=!1,G.nodeName==="SELECT"&&(C.isTouched=!1)),v.activeElement&&v.activeElement.matches(C.focusableElements)&&v.activeElement!==G&&(A.pointerType==="mouse"||A.pointerType!=="mouse"&&!G.matches(C.focusableElements))&&v.activeElement.blur();const se=oe&&d.allowTouchMove&&w.touchStartPreventDefault;(w.touchStartForcePreventDefault||se)&&!G.isContentEditable&&A.preventDefault(),w.freeMode&&w.freeMode.enabled&&d.freeMode&&d.animating&&!w.cssMode&&d.freeMode.onTouchStart(),d.emit("touchStart",A)}function onTouchMove(_){const d=getDocument(),v=this,A=v.touchEventsData,{params:C,touches:w,rtlTranslate:T,enabled:R}=v;if(!R||!C.simulateTouch&&_.pointerType==="mouse")return;let G=_;if(G.originalEvent&&(G=G.originalEvent),G.type==="pointermove"&&(A.touchId!==null||G.pointerId!==A.pointerId))return;let I;if(G.type==="touchmove"){if(I=[...G.changedTouches].find(ye=>ye.identifier===A.touchId),!I||I.identifier!==A.touchId)return}else I=G;if(!A.isTouched){A.startMoving&&A.isScrolling&&v.emit("touchMoveOpposite",G);return}const z=I.pageX,H=I.pageY;if(G.preventedByNestedSwiper){w.startX=z,w.startY=H;return}if(!v.allowTouchMove){G.target.matches(A.focusableElements)||(v.allowClick=!1),A.isTouched&&(Object.assign(w,{startX:z,startY:H,currentX:z,currentY:H}),A.touchStartTime=now());return}if(C.touchReleaseOnEdges&&!C.loop)if(v.isVertical()){if(H<w.startY&&v.translate<=v.maxTranslate()||H>w.startY&&v.translate>=v.minTranslate()){A.isTouched=!1,A.isMoved=!1;return}}else{if(T&&(z>w.startX&&-v.translate<=v.maxTranslate()||z<w.startX&&-v.translate>=v.minTranslate()))return;if(!T&&(z<w.startX&&v.translate<=v.maxTranslate()||z>w.startX&&v.translate>=v.minTranslate()))return}if(d.activeElement&&d.activeElement.matches(A.focusableElements)&&d.activeElement!==G.target&&G.pointerType!=="mouse"&&d.activeElement.blur(),d.activeElement&&G.target===d.activeElement&&G.target.matches(A.focusableElements)){A.isMoved=!0,v.allowClick=!1;return}A.allowTouchCallbacks&&v.emit("touchMove",G),w.previousX=w.currentX,w.previousY=w.currentY,w.currentX=z,w.currentY=H;const Y=w.currentX-w.startX,ee=w.currentY-w.startY;if(v.params.threshold&&Math.sqrt(Y**2+ee**2)<v.params.threshold)return;if(typeof A.isScrolling>"u"){let ye;v.isHorizontal()&&w.currentY===w.startY||v.isVertical()&&w.currentX===w.startX?A.isScrolling=!1:Y*Y+ee*ee>=25&&(ye=Math.atan2(Math.abs(ee),Math.abs(Y))*180/Math.PI,A.isScrolling=v.isHorizontal()?ye>C.touchAngle:90-ye>C.touchAngle)}if(A.isScrolling&&v.emit("touchMoveOpposite",G),typeof A.startMoving>"u"&&(w.currentX!==w.startX||w.currentY!==w.startY)&&(A.startMoving=!0),A.isScrolling||G.type==="touchmove"&&A.preventTouchMoveFromPointerMove){A.isTouched=!1;return}if(!A.startMoving)return;v.allowClick=!1,!C.cssMode&&G.cancelable&&G.preventDefault(),C.touchMoveStopPropagation&&!C.nested&&G.stopPropagation();let ie=v.isHorizontal()?Y:ee,oe=v.isHorizontal()?w.currentX-w.previousX:w.currentY-w.previousY;C.oneWayMovement&&(ie=Math.abs(ie)*(T?1:-1),oe=Math.abs(oe)*(T?1:-1)),w.diff=ie,ie*=C.touchRatio,T&&(ie=-ie,oe=-oe);const se=v.touchesDirection;v.swipeDirection=ie>0?"prev":"next",v.touchesDirection=oe>0?"prev":"next";const re=v.params.loop&&!C.cssMode,fe=v.touchesDirection==="next"&&v.allowSlideNext||v.touchesDirection==="prev"&&v.allowSlidePrev;if(!A.isMoved){if(re&&fe&&v.loopFix({direction:v.swipeDirection}),A.startTranslate=v.getTranslate(),v.setTransition(0),v.animating){const ye=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});v.wrapperEl.dispatchEvent(ye)}A.allowMomentumBounce=!1,C.grabCursor&&(v.allowSlideNext===!0||v.allowSlidePrev===!0)&&v.setGrabCursor(!0),v.emit("sliderFirstMove",G)}if(new Date().getTime(),C._loopSwapReset!==!1&&A.isMoved&&A.allowThresholdMove&&se!==v.touchesDirection&&re&&fe&&Math.abs(ie)>=1){Object.assign(w,{startX:z,startY:H,currentX:z,currentY:H,startTranslate:A.currentTranslate}),A.loopSwapReset=!0,A.startTranslate=A.currentTranslate;return}v.emit("sliderMove",G),A.isMoved=!0,A.currentTranslate=ie+A.startTranslate;let ue=!0,ge=C.resistanceRatio;if(C.touchReleaseOnEdges&&(ge=0),ie>0?(re&&fe&&A.allowThresholdMove&&A.currentTranslate>(C.centeredSlides?v.minTranslate()-v.slidesSizesGrid[v.activeIndex+1]-(C.slidesPerView!=="auto"&&v.slides.length-C.slidesPerView>=2?v.slidesSizesGrid[v.activeIndex+1]+v.params.spaceBetween:0)-v.params.spaceBetween:v.minTranslate())&&v.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),A.currentTranslate>v.minTranslate()&&(ue=!1,C.resistance&&(A.currentTranslate=v.minTranslate()-1+(-v.minTranslate()+A.startTranslate+ie)**ge))):ie<0&&(re&&fe&&A.allowThresholdMove&&A.currentTranslate<(C.centeredSlides?v.maxTranslate()+v.slidesSizesGrid[v.slidesSizesGrid.length-1]+v.params.spaceBetween+(C.slidesPerView!=="auto"&&v.slides.length-C.slidesPerView>=2?v.slidesSizesGrid[v.slidesSizesGrid.length-1]+v.params.spaceBetween:0):v.maxTranslate())&&v.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:v.slides.length-(C.slidesPerView==="auto"?v.slidesPerViewDynamic():Math.ceil(parseFloat(C.slidesPerView,10)))}),A.currentTranslate<v.maxTranslate()&&(ue=!1,C.resistance&&(A.currentTranslate=v.maxTranslate()+1-(v.maxTranslate()-A.startTranslate-ie)**ge))),ue&&(G.preventedByNestedSwiper=!0),!v.allowSlideNext&&v.swipeDirection==="next"&&A.currentTranslate<A.startTranslate&&(A.currentTranslate=A.startTranslate),!v.allowSlidePrev&&v.swipeDirection==="prev"&&A.currentTranslate>A.startTranslate&&(A.currentTranslate=A.startTranslate),!v.allowSlidePrev&&!v.allowSlideNext&&(A.currentTranslate=A.startTranslate),C.threshold>0)if(Math.abs(ie)>C.threshold||A.allowThresholdMove){if(!A.allowThresholdMove){A.allowThresholdMove=!0,w.startX=w.currentX,w.startY=w.currentY,A.currentTranslate=A.startTranslate,w.diff=v.isHorizontal()?w.currentX-w.startX:w.currentY-w.startY;return}}else{A.currentTranslate=A.startTranslate;return}!C.followFinger||C.cssMode||((C.freeMode&&C.freeMode.enabled&&v.freeMode||C.watchSlidesProgress)&&(v.updateActiveIndex(),v.updateSlidesClasses()),C.freeMode&&C.freeMode.enabled&&v.freeMode&&v.freeMode.onTouchMove(),v.updateProgress(A.currentTranslate),v.setTranslate(A.currentTranslate))}function onTouchEnd(_){const d=this,v=d.touchEventsData;let A=_;A.originalEvent&&(A=A.originalEvent);let C;if(A.type==="touchend"||A.type==="touchcancel"){if(C=[...A.changedTouches].find(ye=>ye.identifier===v.touchId),!C||C.identifier!==v.touchId)return}else{if(v.touchId!==null||A.pointerId!==v.pointerId)return;C=A}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(A.type)&&!(["pointercancel","contextmenu"].includes(A.type)&&(d.browser.isSafari||d.browser.isWebView)))return;v.pointerId=null,v.touchId=null;const{params:T,touches:R,rtlTranslate:G,slidesGrid:I,enabled:z}=d;if(!z||!T.simulateTouch&&A.pointerType==="mouse")return;if(v.allowTouchCallbacks&&d.emit("touchEnd",A),v.allowTouchCallbacks=!1,!v.isTouched){v.isMoved&&T.grabCursor&&d.setGrabCursor(!1),v.isMoved=!1,v.startMoving=!1;return}T.grabCursor&&v.isMoved&&v.isTouched&&(d.allowSlideNext===!0||d.allowSlidePrev===!0)&&d.setGrabCursor(!1);const H=now(),Y=H-v.touchStartTime;if(d.allowClick){const ye=A.path||A.composedPath&&A.composedPath();d.updateClickedSlide(ye&&ye[0]||A.target,ye),d.emit("tap click",A),Y<300&&H-v.lastClickTime<300&&d.emit("doubleTap doubleClick",A)}if(v.lastClickTime=now(),nextTick(()=>{d.destroyed||(d.allowClick=!0)}),!v.isTouched||!v.isMoved||!d.swipeDirection||R.diff===0&&!v.loopSwapReset||v.currentTranslate===v.startTranslate&&!v.loopSwapReset){v.isTouched=!1,v.isMoved=!1,v.startMoving=!1;return}v.isTouched=!1,v.isMoved=!1,v.startMoving=!1;let ee;if(T.followFinger?ee=G?d.translate:-d.translate:ee=-v.currentTranslate,T.cssMode)return;if(T.freeMode&&T.freeMode.enabled){d.freeMode.onTouchEnd({currentPos:ee});return}const ie=ee>=-d.maxTranslate()&&!d.params.loop;let oe=0,se=d.slidesSizesGrid[0];for(let ye=0;ye<I.length;ye+=ye<T.slidesPerGroupSkip?1:T.slidesPerGroup){const be=ye<T.slidesPerGroupSkip-1?1:T.slidesPerGroup;typeof I[ye+be]<"u"?(ie||ee>=I[ye]&&ee<I[ye+be])&&(oe=ye,se=I[ye+be]-I[ye]):(ie||ee>=I[ye])&&(oe=ye,se=I[I.length-1]-I[I.length-2])}let re=null,fe=null;T.rewind&&(d.isBeginning?fe=T.virtual&&T.virtual.enabled&&d.virtual?d.virtual.slides.length-1:d.slides.length-1:d.isEnd&&(re=0));const ue=(ee-I[oe])/se,ge=oe<T.slidesPerGroupSkip-1?1:T.slidesPerGroup;if(Y>T.longSwipesMs){if(!T.longSwipes){d.slideTo(d.activeIndex);return}d.swipeDirection==="next"&&(ue>=T.longSwipesRatio?d.slideTo(T.rewind&&d.isEnd?re:oe+ge):d.slideTo(oe)),d.swipeDirection==="prev"&&(ue>1-T.longSwipesRatio?d.slideTo(oe+ge):fe!==null&&ue<0&&Math.abs(ue)>T.longSwipesRatio?d.slideTo(fe):d.slideTo(oe))}else{if(!T.shortSwipes){d.slideTo(d.activeIndex);return}d.navigation&&(A.target===d.navigation.nextEl||A.target===d.navigation.prevEl)?A.target===d.navigation.nextEl?d.slideTo(oe+ge):d.slideTo(oe):(d.swipeDirection==="next"&&d.slideTo(re!==null?re:oe+ge),d.swipeDirection==="prev"&&d.slideTo(fe!==null?fe:oe))}}function onResize(){const _=this,{params:d,el:v}=_;if(v&&v.offsetWidth===0)return;d.breakpoints&&_.setBreakpoint();const{allowSlideNext:A,allowSlidePrev:C,snapGrid:w}=_,T=_.virtual&&_.params.virtual.enabled;_.allowSlideNext=!0,_.allowSlidePrev=!0,_.updateSize(),_.updateSlides(),_.updateSlidesClasses();const R=T&&d.loop;(d.slidesPerView==="auto"||d.slidesPerView>1)&&_.isEnd&&!_.isBeginning&&!_.params.centeredSlides&&!R?_.slideTo(_.slides.length-1,0,!1,!0):_.params.loop&&!T?_.slideToLoop(_.realIndex,0,!1,!0):_.slideTo(_.activeIndex,0,!1,!0),_.autoplay&&_.autoplay.running&&_.autoplay.paused&&(clearTimeout(_.autoplay.resizeTimeout),_.autoplay.resizeTimeout=setTimeout(()=>{_.autoplay&&_.autoplay.running&&_.autoplay.paused&&_.autoplay.resume()},500)),_.allowSlidePrev=C,_.allowSlideNext=A,_.params.watchOverflow&&w!==_.snapGrid&&_.checkOverflow()}function onClick(_){const d=this;d.enabled&&(d.allowClick||(d.params.preventClicks&&_.preventDefault(),d.params.preventClicksPropagation&&d.animating&&(_.stopPropagation(),_.stopImmediatePropagation())))}function onScroll(){const _=this,{wrapperEl:d,rtlTranslate:v,enabled:A}=_;if(!A)return;_.previousTranslate=_.translate,_.isHorizontal()?_.translate=-d.scrollLeft:_.translate=-d.scrollTop,_.translate===0&&(_.translate=0),_.updateActiveIndex(),_.updateSlidesClasses();let C;const w=_.maxTranslate()-_.minTranslate();w===0?C=0:C=(_.translate-_.minTranslate())/w,C!==_.progress&&_.updateProgress(v?-_.translate:_.translate),_.emit("setTranslate",_.translate,!1)}function onLoad(_){const d=this;processLazyPreloader(d,_.target),!(d.params.cssMode||d.params.slidesPerView!=="auto"&&!d.params.autoHeight)&&d.update()}function onDocumentTouchStart(){const _=this;_.documentTouchHandlerProceeded||(_.documentTouchHandlerProceeded=!0,_.params.touchReleaseOnEdges&&(_.el.style.touchAction="auto"))}const events=(_,d)=>{const v=getDocument(),{params:A,el:C,wrapperEl:w,device:T}=_,R=!!A.nested,G=d==="on"?"addEventListener":"removeEventListener",I=d;!C||typeof C=="string"||(v[G]("touchstart",_.onDocumentTouchStart,{passive:!1,capture:R}),C[G]("touchstart",_.onTouchStart,{passive:!1}),C[G]("pointerdown",_.onTouchStart,{passive:!1}),v[G]("touchmove",_.onTouchMove,{passive:!1,capture:R}),v[G]("pointermove",_.onTouchMove,{passive:!1,capture:R}),v[G]("touchend",_.onTouchEnd,{passive:!0}),v[G]("pointerup",_.onTouchEnd,{passive:!0}),v[G]("pointercancel",_.onTouchEnd,{passive:!0}),v[G]("touchcancel",_.onTouchEnd,{passive:!0}),v[G]("pointerout",_.onTouchEnd,{passive:!0}),v[G]("pointerleave",_.onTouchEnd,{passive:!0}),v[G]("contextmenu",_.onTouchEnd,{passive:!0}),(A.preventClicks||A.preventClicksPropagation)&&C[G]("click",_.onClick,!0),A.cssMode&&w[G]("scroll",_.onScroll),A.updateOnWindowResize?_[I](T.ios||T.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):_[I]("observerUpdate",onResize,!0),C[G]("load",_.onLoad,{capture:!0}))};function attachEvents(){const _=this,{params:d}=_;_.onTouchStart=onTouchStart.bind(_),_.onTouchMove=onTouchMove.bind(_),_.onTouchEnd=onTouchEnd.bind(_),_.onDocumentTouchStart=onDocumentTouchStart.bind(_),d.cssMode&&(_.onScroll=onScroll.bind(_)),_.onClick=onClick.bind(_),_.onLoad=onLoad.bind(_),events(_,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(_,d)=>_.grid&&d.grid&&d.grid.rows>1;function setBreakpoint(){const _=this,{realIndex:d,initialized:v,params:A,el:C}=_,w=A.breakpoints;if(!w||w&&Object.keys(w).length===0)return;const T=getDocument(),R=A.breakpointsBase==="window"||!A.breakpointsBase?A.breakpointsBase:"container",G=["window","container"].includes(A.breakpointsBase)||!A.breakpointsBase?_.el:T.querySelector(A.breakpointsBase),I=_.getBreakpoint(w,R,G);if(!I||_.currentBreakpoint===I)return;const H=(I in w?w[I]:void 0)||_.originalParams,Y=isGridEnabled(_,A),ee=isGridEnabled(_,H),ie=_.params.grabCursor,oe=H.grabCursor,se=A.enabled;Y&&!ee?(C.classList.remove(`${A.containerModifierClass}grid`,`${A.containerModifierClass}grid-column`),_.emitContainerClasses()):!Y&&ee&&(C.classList.add(`${A.containerModifierClass}grid`),(H.grid.fill&&H.grid.fill==="column"||!H.grid.fill&&A.grid.fill==="column")&&C.classList.add(`${A.containerModifierClass}grid-column`),_.emitContainerClasses()),ie&&!oe?_.unsetGrabCursor():!ie&&oe&&_.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(be=>{if(typeof H[be]>"u")return;const ve=A[be]&&A[be].enabled,Me=H[be]&&H[be].enabled;ve&&!Me&&_[be].disable(),!ve&&Me&&_[be].enable()});const re=H.direction&&H.direction!==A.direction,fe=A.loop&&(H.slidesPerView!==A.slidesPerView||re),ue=A.loop;re&&v&&_.changeDirection(),extend$1(_.params,H);const ge=_.params.enabled,ye=_.params.loop;Object.assign(_,{allowTouchMove:_.params.allowTouchMove,allowSlideNext:_.params.allowSlideNext,allowSlidePrev:_.params.allowSlidePrev}),se&&!ge?_.disable():!se&&ge&&_.enable(),_.currentBreakpoint=I,_.emit("_beforeBreakpoint",H),v&&(fe?(_.loopDestroy(),_.loopCreate(d),_.updateSlides()):!ue&&ye?(_.loopCreate(d),_.updateSlides()):ue&&!ye&&_.loopDestroy()),_.emit("breakpoint",H)}function getBreakpoint(_,d,v){if(d===void 0&&(d="window"),!_||d==="container"&&!v)return;let A=!1;const C=getWindow(),w=d==="window"?C.innerHeight:v.clientHeight,T=Object.keys(_).map(R=>{if(typeof R=="string"&&R.indexOf("@")===0){const G=parseFloat(R.substr(1));return{value:w*G,point:R}}return{value:R,point:R}});T.sort((R,G)=>parseInt(R.value,10)-parseInt(G.value,10));for(let R=0;R<T.length;R+=1){const{point:G,value:I}=T[R];d==="window"?C.matchMedia(`(min-width: ${I}px)`).matches&&(A=G):I<=v.clientWidth&&(A=G)}return A||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(_,d){const v=[];return _.forEach(A=>{typeof A=="object"?Object.keys(A).forEach(C=>{A[C]&&v.push(d+C)}):typeof A=="string"&&v.push(d+A)}),v}function addClasses(){const _=this,{classNames:d,params:v,rtl:A,el:C,device:w}=_,T=prepareClasses(["initialized",v.direction,{"free-mode":_.params.freeMode&&v.freeMode.enabled},{autoheight:v.autoHeight},{rtl:A},{grid:v.grid&&v.grid.rows>1},{"grid-column":v.grid&&v.grid.rows>1&&v.grid.fill==="column"},{android:w.android},{ios:w.ios},{"css-mode":v.cssMode},{centered:v.cssMode&&v.centeredSlides},{"watch-progress":v.watchSlidesProgress}],v.containerModifierClass);d.push(...T),C.classList.add(...d),_.emitContainerClasses()}function removeClasses(){const _=this,{el:d,classNames:v}=_;!d||typeof d=="string"||(d.classList.remove(...v),_.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const _=this,{isLocked:d,params:v}=_,{slidesOffsetBefore:A}=v;if(A){const C=_.slides.length-1,w=_.slidesGrid[C]+_.slidesSizesGrid[C]+A*2;_.isLocked=_.size>w}else _.isLocked=_.snapGrid.length===1;v.allowSlideNext===!0&&(_.allowSlideNext=!_.isLocked),v.allowSlidePrev===!0&&(_.allowSlidePrev=!_.isLocked),d&&d!==_.isLocked&&(_.isEnd=!1),d!==_.isLocked&&_.emit(_.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(_,d){return function(A){A===void 0&&(A={});const C=Object.keys(A)[0],w=A[C];if(typeof w!="object"||w===null){extend$1(d,A);return}if(_[C]===!0&&(_[C]={enabled:!0}),C==="navigation"&&_[C]&&_[C].enabled&&!_[C].prevEl&&!_[C].nextEl&&(_[C].auto=!0),["pagination","scrollbar"].indexOf(C)>=0&&_[C]&&_[C].enabled&&!_[C].el&&(_[C].auto=!0),!(C in _&&"enabled"in w)){extend$1(d,A);return}typeof _[C]=="object"&&!("enabled"in _[C])&&(_[C].enabled=!0),_[C]||(_[C]={enabled:!1}),extend$1(d,A)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class bu{constructor(){let d,v;for(var A=arguments.length,C=new Array(A),w=0;w<A;w++)C[w]=arguments[w];C.length===1&&C[0].constructor&&Object.prototype.toString.call(C[0]).slice(8,-1)==="Object"?v=C[0]:[d,v]=C,v||(v={}),v=extend$1({},v),d&&!v.el&&(v.el=d);const T=getDocument();if(v.el&&typeof v.el=="string"&&T.querySelectorAll(v.el).length>1){const z=[];return T.querySelectorAll(v.el).forEach(H=>{const Y=extend$1({},v,{el:H});z.push(new bu(Y))}),z}const R=this;R.__swiper__=!0,R.support=getSupport(),R.device=getDevice({userAgent:v.userAgent}),R.browser=getBrowser(),R.eventsListeners={},R.eventsAnyListeners=[],R.modules=[...R.__modules__],v.modules&&Array.isArray(v.modules)&&R.modules.push(...v.modules);const G={};R.modules.forEach(z=>{z({params:v,swiper:R,extendParams:moduleExtendParams(v,G),on:R.on.bind(R),once:R.once.bind(R),off:R.off.bind(R),emit:R.emit.bind(R)})});const I=extend$1({},defaults,G);return R.params=extend$1({},I,extendedDefaults,v),R.originalParams=extend$1({},R.params),R.passedParams=extend$1({},v),R.params&&R.params.on&&Object.keys(R.params.on).forEach(z=>{R.on(z,R.params.on[z])}),R.params&&R.params.onAny&&R.onAny(R.params.onAny),Object.assign(R,{enabled:R.params.enabled,el:d,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return R.params.direction==="horizontal"},isVertical(){return R.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:R.params.allowSlideNext,allowSlidePrev:R.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:R.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:R.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),R.emit("_swiper"),R.params.init&&R.init(),R}getDirectionLabel(d){return this.isHorizontal()?d:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[d]}getSlideIndex(d){const{slidesEl:v,params:A}=this,C=elementChildren(v,`.${A.slideClass}, swiper-slide`),w=elementIndex(C[0]);return elementIndex(d)-w}getSlideIndexByData(d){return this.getSlideIndex(this.slides.find(v=>v.getAttribute("data-swiper-slide-index")*1===d))}getSlideIndexWhenGrid(d){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?d=Math.floor(d/this.params.grid.rows):this.params.grid.fill==="row"&&(d=d%Math.ceil(this.slides.length/this.params.grid.rows))),d}recalcSlides(){const d=this,{slidesEl:v,params:A}=d;d.slides=elementChildren(v,`.${A.slideClass}, swiper-slide`)}enable(){const d=this;d.enabled||(d.enabled=!0,d.params.grabCursor&&d.setGrabCursor(),d.emit("enable"))}disable(){const d=this;d.enabled&&(d.enabled=!1,d.params.grabCursor&&d.unsetGrabCursor(),d.emit("disable"))}setProgress(d,v){const A=this;d=Math.min(Math.max(d,0),1);const C=A.minTranslate(),T=(A.maxTranslate()-C)*d+C;A.translateTo(T,typeof v>"u"?0:v),A.updateActiveIndex(),A.updateSlidesClasses()}emitContainerClasses(){const d=this;if(!d.params._emitClasses||!d.el)return;const v=d.el.className.split(" ").filter(A=>A.indexOf("swiper")===0||A.indexOf(d.params.containerModifierClass)===0);d.emit("_containerClasses",v.join(" "))}getSlideClasses(d){const v=this;return v.destroyed?"":d.className.split(" ").filter(A=>A.indexOf("swiper-slide")===0||A.indexOf(v.params.slideClass)===0).join(" ")}emitSlidesClasses(){const d=this;if(!d.params._emitClasses||!d.el)return;const v=[];d.slides.forEach(A=>{const C=d.getSlideClasses(A);v.push({slideEl:A,classNames:C}),d.emit("_slideClass",A,C)}),d.emit("_slideClasses",v)}slidesPerViewDynamic(d,v){d===void 0&&(d="current"),v===void 0&&(v=!1);const A=this,{params:C,slides:w,slidesGrid:T,slidesSizesGrid:R,size:G,activeIndex:I}=A;let z=1;if(typeof C.slidesPerView=="number")return C.slidesPerView;if(C.centeredSlides){let H=w[I]?Math.ceil(w[I].swiperSlideSize):0,Y;for(let ee=I+1;ee<w.length;ee+=1)w[ee]&&!Y&&(H+=Math.ceil(w[ee].swiperSlideSize),z+=1,H>G&&(Y=!0));for(let ee=I-1;ee>=0;ee-=1)w[ee]&&!Y&&(H+=w[ee].swiperSlideSize,z+=1,H>G&&(Y=!0))}else if(d==="current")for(let H=I+1;H<w.length;H+=1)(v?T[H]+R[H]-T[I]<G:T[H]-T[I]<G)&&(z+=1);else for(let H=I-1;H>=0;H-=1)T[I]-T[H]<G&&(z+=1);return z}update(){const d=this;if(!d||d.destroyed)return;const{snapGrid:v,params:A}=d;A.breakpoints&&d.setBreakpoint(),[...d.el.querySelectorAll('[loading="lazy"]')].forEach(T=>{T.complete&&processLazyPreloader(d,T)}),d.updateSize(),d.updateSlides(),d.updateProgress(),d.updateSlidesClasses();function C(){const T=d.rtlTranslate?d.translate*-1:d.translate,R=Math.min(Math.max(T,d.maxTranslate()),d.minTranslate());d.setTranslate(R),d.updateActiveIndex(),d.updateSlidesClasses()}let w;if(A.freeMode&&A.freeMode.enabled&&!A.cssMode)C(),A.autoHeight&&d.updateAutoHeight();else{if((A.slidesPerView==="auto"||A.slidesPerView>1)&&d.isEnd&&!A.centeredSlides){const T=d.virtual&&A.virtual.enabled?d.virtual.slides:d.slides;w=d.slideTo(T.length-1,0,!1,!0)}else w=d.slideTo(d.activeIndex,0,!1,!0);w||C()}A.watchOverflow&&v!==d.snapGrid&&d.checkOverflow(),d.emit("update")}changeDirection(d,v){v===void 0&&(v=!0);const A=this,C=A.params.direction;return d||(d=C==="horizontal"?"vertical":"horizontal"),d===C||d!=="horizontal"&&d!=="vertical"||(A.el.classList.remove(`${A.params.containerModifierClass}${C}`),A.el.classList.add(`${A.params.containerModifierClass}${d}`),A.emitContainerClasses(),A.params.direction=d,A.slides.forEach(w=>{d==="vertical"?w.style.width="":w.style.height=""}),A.emit("changeDirection"),v&&A.update()),A}changeLanguageDirection(d){const v=this;v.rtl&&d==="rtl"||!v.rtl&&d==="ltr"||(v.rtl=d==="rtl",v.rtlTranslate=v.params.direction==="horizontal"&&v.rtl,v.rtl?(v.el.classList.add(`${v.params.containerModifierClass}rtl`),v.el.dir="rtl"):(v.el.classList.remove(`${v.params.containerModifierClass}rtl`),v.el.dir="ltr"),v.update())}mount(d){const v=this;if(v.mounted)return!0;let A=d||v.params.el;if(typeof A=="string"&&(A=document.querySelector(A)),!A)return!1;A.swiper=v,A.parentNode&&A.parentNode.host&&A.parentNode.host.nodeName===v.params.swiperElementNodeName.toUpperCase()&&(v.isElement=!0);const C=()=>`.${(v.params.wrapperClass||"").trim().split(" ").join(".")}`;let T=A&&A.shadowRoot&&A.shadowRoot.querySelector?A.shadowRoot.querySelector(C()):elementChildren(A,C())[0];return!T&&v.params.createElements&&(T=createElement("div",v.params.wrapperClass),A.append(T),elementChildren(A,`.${v.params.slideClass}`).forEach(R=>{T.append(R)})),Object.assign(v,{el:A,wrapperEl:T,slidesEl:v.isElement&&!A.parentNode.host.slideSlots?A.parentNode.host:T,hostEl:v.isElement?A.parentNode.host:A,mounted:!0,rtl:A.dir.toLowerCase()==="rtl"||elementStyle(A,"direction")==="rtl",rtlTranslate:v.params.direction==="horizontal"&&(A.dir.toLowerCase()==="rtl"||elementStyle(A,"direction")==="rtl"),wrongRTL:elementStyle(T,"display")==="-webkit-box"}),!0}init(d){const v=this;if(v.initialized||v.mount(d)===!1)return v;v.emit("beforeInit"),v.params.breakpoints&&v.setBreakpoint(),v.addClasses(),v.updateSize(),v.updateSlides(),v.params.watchOverflow&&v.checkOverflow(),v.params.grabCursor&&v.enabled&&v.setGrabCursor(),v.params.loop&&v.virtual&&v.params.virtual.enabled?v.slideTo(v.params.initialSlide+v.virtual.slidesBefore,0,v.params.runCallbacksOnInit,!1,!0):v.slideTo(v.params.initialSlide,0,v.params.runCallbacksOnInit,!1,!0),v.params.loop&&v.loopCreate(void 0,!0),v.attachEvents();const C=[...v.el.querySelectorAll('[loading="lazy"]')];return v.isElement&&C.push(...v.hostEl.querySelectorAll('[loading="lazy"]')),C.forEach(w=>{w.complete?processLazyPreloader(v,w):w.addEventListener("load",T=>{processLazyPreloader(v,T.target)})}),preload(v),v.initialized=!0,preload(v),v.emit("init"),v.emit("afterInit"),v}destroy(d,v){d===void 0&&(d=!0),v===void 0&&(v=!0);const A=this,{params:C,el:w,wrapperEl:T,slides:R}=A;return typeof A.params>"u"||A.destroyed||(A.emit("beforeDestroy"),A.initialized=!1,A.detachEvents(),C.loop&&A.loopDestroy(),v&&(A.removeClasses(),w&&typeof w!="string"&&w.removeAttribute("style"),T&&T.removeAttribute("style"),R&&R.length&&R.forEach(G=>{G.classList.remove(C.slideVisibleClass,C.slideFullyVisibleClass,C.slideActiveClass,C.slideNextClass,C.slidePrevClass),G.removeAttribute("style"),G.removeAttribute("data-swiper-slide-index")})),A.emit("destroy"),Object.keys(A.eventsListeners).forEach(G=>{A.off(G)}),d!==!1&&(A.el&&typeof A.el!="string"&&(A.el.swiper=null),deleteProps(A)),A.destroyed=!0),null}static extendDefaults(d){extend$1(extendedDefaults,d)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(d){bu.prototype.__modules__||(bu.prototype.__modules__=[]);const v=bu.prototype.__modules__;typeof d=="function"&&v.indexOf(d)<0&&v.push(d)}static use(d){return Array.isArray(d)?(d.forEach(v=>bu.installModule(v)),bu):(bu.installModule(d),bu)}};Object.keys(prototypes).forEach(_=>{Object.keys(prototypes[_]).forEach(d=>{Swiper$1.prototype[d]=prototypes[_][d]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject(_){return typeof _=="object"&&_!==null&&_.constructor&&Object.prototype.toString.call(_).slice(8,-1)==="Object"&&!_.__swiper__}function extend(_,d){const v=["__proto__","constructor","prototype"];Object.keys(d).filter(A=>v.indexOf(A)<0).forEach(A=>{typeof _[A]>"u"?_[A]=d[A]:isObject(d[A])&&isObject(_[A])&&Object.keys(d[A]).length>0?d[A].__swiper__?_[A]=d[A]:extend(_[A],d[A]):_[A]=d[A]})}function needsNavigation(_){return _===void 0&&(_={}),_.navigation&&typeof _.navigation.nextEl>"u"&&typeof _.navigation.prevEl>"u"}function needsPagination(_){return _===void 0&&(_={}),_.pagination&&typeof _.pagination.el>"u"}function needsScrollbar(_){return _===void 0&&(_={}),_.scrollbar&&typeof _.scrollbar.el>"u"}function uniqueClasses(_){_===void 0&&(_="");const d=_.split(" ").map(A=>A.trim()).filter(A=>!!A),v=[];return d.forEach(A=>{v.indexOf(A)<0&&v.push(A)}),v.join(" ")}function wrapperClass(_){return _===void 0&&(_=""),_?_.includes("swiper-wrapper")?_:`swiper-wrapper ${_}`:"swiper-wrapper"}function updateSwiper(_){let{swiper:d,slides:v,passedParams:A,changedParams:C,nextEl:w,prevEl:T,scrollbarEl:R,paginationEl:G}=_;const I=C.filter(we=>we!=="children"&&we!=="direction"&&we!=="wrapperClass"),{params:z,pagination:H,navigation:Y,scrollbar:ee,virtual:ie,thumbs:oe}=d;let se,re,fe,ue,ge,ye,be,ve;C.includes("thumbs")&&A.thumbs&&A.thumbs.swiper&&!A.thumbs.swiper.destroyed&&z.thumbs&&(!z.thumbs.swiper||z.thumbs.swiper.destroyed)&&(se=!0),C.includes("controller")&&A.controller&&A.controller.control&&z.controller&&!z.controller.control&&(re=!0),C.includes("pagination")&&A.pagination&&(A.pagination.el||G)&&(z.pagination||z.pagination===!1)&&H&&!H.el&&(fe=!0),C.includes("scrollbar")&&A.scrollbar&&(A.scrollbar.el||R)&&(z.scrollbar||z.scrollbar===!1)&&ee&&!ee.el&&(ue=!0),C.includes("navigation")&&A.navigation&&(A.navigation.prevEl||T)&&(A.navigation.nextEl||w)&&(z.navigation||z.navigation===!1)&&Y&&!Y.prevEl&&!Y.nextEl&&(ge=!0);const Me=we=>{d[we]&&(d[we].destroy(),we==="navigation"?(d.isElement&&(d[we].prevEl.remove(),d[we].nextEl.remove()),z[we].prevEl=void 0,z[we].nextEl=void 0,d[we].prevEl=void 0,d[we].nextEl=void 0):(d.isElement&&d[we].el.remove(),z[we].el=void 0,d[we].el=void 0))};C.includes("loop")&&d.isElement&&(z.loop&&!A.loop?ye=!0:!z.loop&&A.loop?be=!0:ve=!0),I.forEach(we=>{if(isObject(z[we])&&isObject(A[we]))Object.assign(z[we],A[we]),(we==="navigation"||we==="pagination"||we==="scrollbar")&&"enabled"in A[we]&&!A[we].enabled&&Me(we);else{const Be=A[we];(Be===!0||Be===!1)&&(we==="navigation"||we==="pagination"||we==="scrollbar")?Be===!1&&Me(we):z[we]=A[we]}}),I.includes("controller")&&!re&&d.controller&&d.controller.control&&z.controller&&z.controller.control&&(d.controller.control=z.controller.control),C.includes("children")&&v&&ie&&z.virtual.enabled?(ie.slides=v,ie.update(!0)):C.includes("virtual")&&ie&&z.virtual.enabled&&(v&&(ie.slides=v),ie.update(!0)),C.includes("children")&&v&&z.loop&&(ve=!0),se&&oe.init()&&oe.update(!0),re&&(d.controller.control=z.controller.control),fe&&(d.isElement&&(!G||typeof G=="string")&&(G=document.createElement("div"),G.classList.add("swiper-pagination"),G.part.add("pagination"),d.el.appendChild(G)),G&&(z.pagination.el=G),H.init(),H.render(),H.update()),ue&&(d.isElement&&(!R||typeof R=="string")&&(R=document.createElement("div"),R.classList.add("swiper-scrollbar"),R.part.add("scrollbar"),d.el.appendChild(R)),R&&(z.scrollbar.el=R),ee.init(),ee.updateSize(),ee.setTranslate()),ge&&(d.isElement&&((!w||typeof w=="string")&&(w=document.createElement("div"),w.classList.add("swiper-button-next"),setInnerHTML(w,d.hostEl.constructor.nextButtonSvg),w.part.add("button-next"),d.el.appendChild(w)),(!T||typeof T=="string")&&(T=document.createElement("div"),T.classList.add("swiper-button-prev"),setInnerHTML(T,d.hostEl.constructor.prevButtonSvg),T.part.add("button-prev"),d.el.appendChild(T))),w&&(z.navigation.nextEl=w),T&&(z.navigation.prevEl=T),Y.init(),Y.update()),C.includes("allowSlideNext")&&(d.allowSlideNext=A.allowSlideNext),C.includes("allowSlidePrev")&&(d.allowSlidePrev=A.allowSlidePrev),C.includes("direction")&&d.changeDirection(A.direction,!1),(ye||ve)&&d.loopDestroy(),(be||ve)&&d.loopCreate(),d.update()}function getParams(_,d){_===void 0&&(_={}),d===void 0&&(d=!0);const v={on:{}},A={},C={};extend(v,defaults),v._emitClasses=!0,v.init=!1;const w={},T=paramsList.map(G=>G.replace(/_/,"")),R=Object.assign({},_);return Object.keys(R).forEach(G=>{typeof _[G]>"u"||(T.indexOf(G)>=0?isObject(_[G])?(v[G]={},C[G]={},extend(v[G],_[G]),extend(C[G],_[G])):(v[G]=_[G],C[G]=_[G]):G.search(/on[A-Z]/)===0&&typeof _[G]=="function"?d?A[`${G[2].toLowerCase()}${G.substr(3)}`]=_[G]:v.on[`${G[2].toLowerCase()}${G.substr(3)}`]=_[G]:w[G]=_[G])}),["navigation","pagination","scrollbar"].forEach(G=>{v[G]===!0&&(v[G]={}),v[G]===!1&&delete v[G]}),{params:v,passedParams:C,rest:w,events:A}}function mountSwiper(_,d){let{el:v,nextEl:A,prevEl:C,paginationEl:w,scrollbarEl:T,swiper:R}=_;needsNavigation(d)&&A&&C&&(R.params.navigation.nextEl=A,R.originalParams.navigation.nextEl=A,R.params.navigation.prevEl=C,R.originalParams.navigation.prevEl=C),needsPagination(d)&&w&&(R.params.pagination.el=w,R.originalParams.pagination.el=w),needsScrollbar(d)&&T&&(R.params.scrollbar.el=T,R.originalParams.scrollbar.el=T),R.init(v)}function getChangedParams(_,d,v,A,C){const w=[];if(!d)return w;const T=G=>{w.indexOf(G)<0&&w.push(G)};if(v&&A){const G=A.map(C),I=v.map(C);G.join("")!==I.join("")&&T("children"),A.length!==v.length&&T("children")}return paramsList.filter(G=>G[0]==="_").map(G=>G.replace(/_/,"")).forEach(G=>{if(G in _&&G in d)if(isObject(_[G])&&isObject(d[G])){const I=Object.keys(_[G]),z=Object.keys(d[G]);I.length!==z.length?T(G):(I.forEach(H=>{_[G][H]!==d[G][H]&&T(G)}),z.forEach(H=>{_[G][H]!==d[G][H]&&T(G)}))}else _[G]!==d[G]&&T(G)}),w}const updateOnVirtualData=_=>{!_||_.destroyed||!_.params.virtual||_.params.virtual&&!_.params.virtual.enabled||(_.updateSlides(),_.updateProgress(),_.updateSlidesClasses(),_.emit("_virtualUpdated"),_.parallax&&_.params.parallax&&_.params.parallax.enabled&&_.parallax.setTranslate())};function _extends(){return _extends=Object.assign?Object.assign.bind():function(_){for(var d=1;d<arguments.length;d++){var v=arguments[d];for(var A in v)Object.prototype.hasOwnProperty.call(v,A)&&(_[A]=v[A])}return _},_extends.apply(this,arguments)}function isChildSwiperSlide(_){return _.type&&_.type.displayName&&_.type.displayName.includes("SwiperSlide")}function processChildren(_){const d=[];return React.Children.toArray(_).forEach(v=>{isChildSwiperSlide(v)?d.push(v):v.props&&v.props.children&&processChildren(v.props.children).forEach(A=>d.push(A))}),d}function getChildren(_){const d=[],v={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(_).forEach(A=>{if(isChildSwiperSlide(A))d.push(A);else if(A.props&&A.props.slot&&v[A.props.slot])v[A.props.slot].push(A);else if(A.props&&A.props.children){const C=processChildren(A.props.children);C.length>0?C.forEach(w=>d.push(w)):v["container-end"].push(A)}else v["container-end"].push(A)}),{slides:d,slots:v}}function renderVirtual(_,d,v){if(!v)return null;const A=z=>{let H=z;return z<0?H=d.length+z:H>=d.length&&(H=H-d.length),H},C=_.isHorizontal()?{[_.rtlTranslate?"right":"left"]:`${v.offset}px`}:{top:`${v.offset}px`},{from:w,to:T}=v,R=_.params.loop?-d.length:0,G=_.params.loop?d.length*2:d.length,I=[];for(let z=R;z<G;z+=1)z>=w&&z<=T&&I.push(d[A(z)]);return I.map((z,H)=>React.cloneElement(z,{swiper:_,style:C,key:z.props.virtualIndex||z.key||`slide-${H}`}))}function useIsomorphicLayoutEffect(_,d){return typeof window>"u"?reactExports.useEffect(_,d):reactExports.useLayoutEffect(_,d)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(_,d){let{className:v,tag:A="div",wrapperTag:C="div",children:w,onSwiper:T,...R}=_===void 0?{}:_,G=!1;const[I,z]=reactExports.useState("swiper"),[H,Y]=reactExports.useState(null),[ee,ie]=reactExports.useState(!1),oe=reactExports.useRef(!1),se=reactExports.useRef(null),re=reactExports.useRef(null),fe=reactExports.useRef(null),ue=reactExports.useRef(null),ge=reactExports.useRef(null),ye=reactExports.useRef(null),be=reactExports.useRef(null),ve=reactExports.useRef(null),{params:Me,passedParams:we,rest:Be,events:De}=getParams(R),{slides:Fe,slots:Oe}=getChildren(w),Ge=()=>{ie(!ee)};Object.assign(Me.on,{_containerClasses($e,We){z(We)}});const ze=()=>{Object.assign(Me.on,De),G=!0;const $e={...Me};if(delete $e.wrapperClass,re.current=new Swiper$1($e),re.current.virtual&&re.current.params.virtual.enabled){re.current.virtual.slides=Fe;const We={cache:!1,slides:Fe,renderExternal:Y,renderExternalUpdate:!1};extend(re.current.params.virtual,We),extend(re.current.originalParams.virtual,We)}};se.current||ze(),re.current&&re.current.on("_beforeBreakpoint",Ge);const je=()=>{G||!De||!re.current||Object.keys(De).forEach($e=>{re.current.on($e,De[$e])})},He=()=>{!De||!re.current||Object.keys(De).forEach($e=>{re.current.off($e,De[$e])})};reactExports.useEffect(()=>()=>{re.current&&re.current.off("_beforeBreakpoint",Ge)}),reactExports.useEffect(()=>{!oe.current&&re.current&&(re.current.emitSlidesClasses(),oe.current=!0)}),useIsomorphicLayoutEffect(()=>{if(d&&(d.current=se.current),!!se.current)return re.current.destroyed&&ze(),mountSwiper({el:se.current,nextEl:ge.current,prevEl:ye.current,paginationEl:be.current,scrollbarEl:ve.current,swiper:re.current},Me),T&&!re.current.destroyed&&T(re.current),()=>{re.current&&!re.current.destroyed&&re.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect(()=>{je();const $e=getChangedParams(we,fe.current,Fe,ue.current,We=>We.key);return fe.current=we,ue.current=Fe,$e.length&&re.current&&!re.current.destroyed&&updateSwiper({swiper:re.current,slides:Fe,passedParams:we,changedParams:$e,nextEl:ge.current,prevEl:ye.current,scrollbarEl:ve.current,paginationEl:be.current}),()=>{He()}}),useIsomorphicLayoutEffect(()=>{updateOnVirtualData(re.current)},[H]);function Xe(){return Me.virtual?renderVirtual(re.current,Fe,H):Fe.map(($e,We)=>React.cloneElement($e,{swiper:re.current,swiperSlideIndex:We}))}return React.createElement(A,_extends({ref:se,className:uniqueClasses(`${I}${v?` ${v}`:""}`)},Be),React.createElement(SwiperContext.Provider,{value:re.current},Oe["container-start"],React.createElement(C,{className:wrapperClass(Me.wrapperClass)},Oe["wrapper-start"],Xe(),Oe["wrapper-end"]),needsNavigation(Me)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:ye,className:"swiper-button-prev"}),React.createElement("div",{ref:ge,className:"swiper-button-next"})),needsScrollbar(Me)&&React.createElement("div",{ref:ve,className:"swiper-scrollbar"}),needsPagination(Me)&&React.createElement("div",{ref:be,className:"swiper-pagination"}),Oe["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(_,d){let{tag:v="div",children:A,className:C="",swiper:w,zoom:T,lazy:R,virtualIndex:G,swiperSlideIndex:I,...z}=_===void 0?{}:_;const H=reactExports.useRef(null),[Y,ee]=reactExports.useState("swiper-slide"),[ie,oe]=reactExports.useState(!1);function se(ge,ye,be){ye===H.current&&ee(be)}useIsomorphicLayoutEffect(()=>{if(typeof I<"u"&&(H.current.swiperSlideIndex=I),d&&(d.current=H.current),!(!H.current||!w)){if(w.destroyed){Y!=="swiper-slide"&&ee("swiper-slide");return}return w.on("_slideClass",se),()=>{w&&w.off("_slideClass",se)}}}),useIsomorphicLayoutEffect(()=>{w&&H.current&&!w.destroyed&&ee(w.getSlideClasses(H.current))},[w]);const re={isActive:Y.indexOf("swiper-slide-active")>=0,isVisible:Y.indexOf("swiper-slide-visible")>=0,isPrev:Y.indexOf("swiper-slide-prev")>=0,isNext:Y.indexOf("swiper-slide-next")>=0},fe=()=>typeof A=="function"?A(re):A,ue=()=>{oe(!0)};return React.createElement(v,_extends({ref:H,className:uniqueClasses(`${Y}${C?` ${C}`:""}`),"data-swiper-slide-index":G,onLoad:ue},z),T&&React.createElement(SwiperSlideContext.Provider,{value:re},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof T=="number"?T:void 0},fe(),R&&!ie&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!T&&React.createElement(SwiperSlideContext.Provider,{value:re},fe(),R&&!ie&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";var dist$1={},sdk={},telegramWebApps={},hasRequiredTelegramWebApps;function requireTelegramWebApps(){return hasRequiredTelegramWebApps||(hasRequiredTelegramWebApps=1,function(){var _={},d="";try{d=location.hash.toString()}catch{}var v=G(d),A=re("initParams");if(A)for(var C in A)typeof v[C]>"u"&&(v[C]=A[C]);se("initParams",v);var w=!1,T;try{if(w=window.parent!=null&&window!=window.parent,w){window.addEventListener("message",function(fe){if(fe.source===window.parent){try{var ue=JSON.parse(fe.data)}catch{return}if(!(!ue||!ue.eventType))if(ue.eventType=="set_custom_style")fe.origin==="https://web.telegram.org"&&(T.innerHTML=ue.eventData);else if(ue.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else Y(ue.eventType,ue.eventData)}}),T=document.createElement("style"),document.head.appendChild(T);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function R(fe){try{return fe=fe.replace(/\+/g,"%20"),decodeURIComponent(fe)}catch{return fe}}function G(fe){fe=fe.replace(/^#/,"");var ue={};if(!fe.length)return ue;if(fe.indexOf("=")<0&&fe.indexOf("?")<0)return ue._path=R(fe),ue;var ge=fe.indexOf("?");if(ge>=0){var ye=fe.substr(0,ge);ue._path=R(ye),fe=fe.substr(ge+1)}var be=I(fe);for(var ve in be)ue[ve]=be[ve];return ue}function I(fe){var ue={};if(!fe.length)return ue;var ge=fe.split("&"),ye,be,ve,Me;for(ye=0;ye<ge.length;ye++)be=ge[ye].split("="),ve=R(be[0]),Me=be[1]==null?null:R(be[1]),ue[ve]=Me;return ue}function z(fe,ue){var ge=fe.indexOf("#");if(ge<0)return fe+"#"+ue;var ye=fe.substr(ge+1);return ye.indexOf("=")>=0||ye.indexOf("?")>=0?fe+"&"+ue:ye.length>0?fe+"?"+ue:fe+ue}function H(fe,ue,ge){if(ue||(ue=function(){}),ge===void 0&&(ge=""),console.log("[Telegram.WebView] > postEvent",fe,ge),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(fe,JSON.stringify(ge)),ue();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:fe,eventData:ge})),ue();else if(w)try{var ye="https://web.telegram.org";ye="*",window.parent.postMessage(JSON.stringify({eventType:fe,eventData:ge}),ye),ue()}catch(be){ue(be)}else ue({notAvailable:!0})}function Y(fe,ue){console.log("[Telegram.WebView] < receiveEvent",fe,ue),ee(fe,function(ge){ge(fe,ue)})}function ee(fe,ue){var ge=_[fe];if(!(ge===void 0||!ge.length))for(var ye=0;ye<ge.length;ye++)try{ue(ge[ye])}catch{}}function ie(fe,ue){_[fe]===void 0&&(_[fe]=[]);var ge=_[fe].indexOf(ue);ge===-1&&_[fe].push(ue)}function oe(fe,ue){if(_[fe]!==void 0){var ge=_[fe].indexOf(ue);ge!==-1&&_[fe].splice(ge,1)}}function se(fe,ue){try{return window.sessionStorage.setItem("__telegram__"+fe,JSON.stringify(ue)),!0}catch{}return!1}function re(fe){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+fe))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:v,isIframe:w,onEvent:ie,offEvent:oe,postEvent:H,receiveEvent:Y,callEventCallbacks:ee},window.Telegram.Utils={urlSafeDecode:R,urlParseQueryString:I,urlParseHashParams:G,urlAppendHashParams:z,sessionStorageSet:se,sessionStorageGet:re},window.TelegramGameProxy_receiveEvent=Y,window.TelegramGameProxy={receiveEvent:Y}}(),function(){var _=window.Telegram.Utils,d=window.Telegram.WebView,v=d.initParams,A=d.isIframe,C={},w="",T={},R={},G="light",I="6.0",z="unknown",H=!0,Y=!1,ee=!1,ie="bg_color",oe="bg_color",se=null;if(v.tgWebAppData&&v.tgWebAppData.length){w=v.tgWebAppData,T=_.urlParseQueryString(w);for(var re in T){var fe=T[re];try{(fe.substr(0,1)=="{"&&fe.substr(-1)=="}"||fe.substr(0,1)=="["&&fe.substr(-1)=="]")&&(T[re]=JSON.parse(fe))}catch{}}}var ue=_.sessionStorageGet("themeParams");if(v.tgWebAppThemeParams&&v.tgWebAppThemeParams.length){var ge=v.tgWebAppThemeParams;try{var ye=JSON.parse(ge);ye&&Mn(ye)}catch{}}ue&&Mn(ue);var be=_.sessionStorageGet("defaultColors");if(v.tgWebAppDefaultColors&&v.tgWebAppDefaultColors.length){var ve=v.tgWebAppDefaultColors;try{var Me=JSON.parse(ve);Me&&cr(Me)}catch{}}be&&cr(be),v.tgWebAppVersion&&(I=v.tgWebAppVersion),v.tgWebAppPlatform&&(z=v.tgWebAppPlatform);var we=_.sessionStorageGet("isFullscreen");v.tgWebAppFullscreen&&Bn(!0),we&&Bn(we=="yes");var Be=_.sessionStorageGet("isOrientationLocked");Be&&Lt(Be=="yes");function De(vn,Ln){Ln.theme_params&&(Mn(Ln.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),Br(),br(),tr(),We("themeChanged"))}var Fe=window.innerHeight;function Oe(vn,Ln){Ln.height&&(window.removeEventListener("resize",Ge),Gt(Ln))}function Ge(vn){Fe!=window.innerHeight&&(Fe=window.innerHeight,We("viewportChanged",{isStateStable:!0}))}function ze(vn,Ln){Ln&&Nn(Ln)}function je(vn,Ln){Ln&&jn(Ln)}function He(vn,Ln){Ln.is_visible?(H=!0,We("activated")):(H=!1,We("deactivated"))}function Xe(vn){if(!(vn.metaKey||vn.ctrlKey)){for(var Ln=vn.target;Ln.tagName!="A"&&Ln.parentNode;)Ln=Ln.parentNode;Ln.tagName=="A"&&Ln.target!="_blank"&&(Ln.protocol=="http:"||Ln.protocol=="https:")&&Ln.hostname=="t.me"&&(C.openTgLink(Ln.href),vn.preventDefault())}}function $e(vn){return vn.toString().replace(/^\s+|\s+$/g,"")}function We(vn){var Ln=Array.prototype.slice.call(arguments);vn=Ln.shift(),d.callEventCallbacks("webview:"+vn,function(ar){ar.apply(C,Ln)})}function nt(vn,Ln){d.onEvent("webview:"+vn,Ln)}function Qt(vn,Ln){d.offEvent("webview:"+vn,Ln)}function Wt(vn,Ln){var ar=document.documentElement;ar&&ar.style&&ar.style.setProperty&&ar.style.setProperty("--tg-"+vn,Ln)}function Bn(vn){Y=!!vn,_.sessionStorageSet("isFullscreen",Y?"yes":"no")}function Lt(vn){ee=!!vn,_.sessionStorageSet("isOrientationLocked",ee?"yes":"no")}function Mn(vn){vn.bg_color=="#1c1c1d"&&vn.bg_color==vn.secondary_bg_color&&(vn.secondary_bg_color="#2c2c2e");var Ln;for(var ar in vn)(Ln=vr(vn[ar]))&&(R[ar]=Ln,ar=="bg_color"&&(G=Ar(Ln)?"dark":"light",Wt("color-scheme",G)),ar="theme-"+ar.split("_").join("-"),Wt(ar,Ln));_.sessionStorageSet("themeParams",R)}function cr(vn){G=="dark"?(vn.bg_dark_color&&(ie=vn.bg_dark_color),vn.header_dark_color&&(oe=null,se=vn.header_dark_color)):(vn.bg_color&&(ie=vn.bg_color),vn.header_color&&(oe=null,se=vn.header_color)),_.sessionStorageSet("defaultColors",vn)}var In={};function Zn(vn){for(var Ln=100;--Ln;){for(var ar="",Mr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",kr=Mr.length,gi=0;gi<vn;gi++)ar+=Mr[Math.floor(Math.random()*kr)];if(!In[ar])return In[ar]={},ar}throw Error("WebAppCallbackIdGenerateFailed")}var $n=!1,Rn=!1,Dn=!0;function Gt(vn){typeof vn<"u"&&(Dn=!!vn.is_expanded,$n=vn.height,vn.is_state_stable&&(Rn=vn.height),We("viewportChanged",{isStateStable:!!vn.is_state_stable}));var Ln,ar;$n!==!1?Ln=$n-sr+"px":Ln=sr?"calc(100vh - "+sr+"px)":"100vh",Rn!==!1?ar=Rn-sr+"px":ar=sr?"calc(100vh - "+sr+"px)":"100vh",Wt("viewport-height",Ln),Wt("viewport-stable-height",ar)}var Jn={top:0,bottom:0,left:0,right:0};function Nn(vn){typeof vn<"u"&&(typeof vn.top<"u"&&(Jn.top=vn.top),typeof vn.bottom<"u"&&(Jn.bottom=vn.bottom),typeof vn.left<"u"&&(Jn.left=vn.left),typeof vn.right<"u"&&(Jn.right=vn.right),We("safeAreaChanged")),Wt("safe-area-inset-top",Jn.top+"px"),Wt("safe-area-inset-bottom",Jn.bottom+"px"),Wt("safe-area-inset-left",Jn.left+"px"),Wt("safe-area-inset-right",Jn.right+"px")}var Xn={top:0,bottom:0,left:0,right:0};function jn(vn){typeof vn<"u"&&(typeof vn.top<"u"&&(Xn.top=vn.top),typeof vn.bottom<"u"&&(Xn.bottom=vn.bottom),typeof vn.left<"u"&&(Xn.left=vn.left),typeof vn.right<"u"&&(Xn.right=vn.right),We("contentSafeAreaChanged")),Wt("content-safe-area-inset-top",Xn.top+"px"),Wt("content-safe-area-inset-bottom",Xn.bottom+"px"),Wt("content-safe-area-inset-left",Xn.left+"px"),Wt("content-safe-area-inset-right",Xn.right+"px")}var Un=!1;function bn(vn){if(!tt("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+I);return}Un=!!vn,d.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:Un})}var Kn=!0;function Qn(vn){if(!tt("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+I);return}Kn=!!vn,d.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:Kn})}function pr(vn,Ln){Bn(Ln.is_fullscreen),We("fullscreenChanged")}function fn(vn,Ln){Ln.error=="ALREADY_FULLSCREEN"&&!Y&&Bn(!0),We("fullscreenFailed",{error:Ln.error})}function Mt(vn){if(!tt("8.0")){console.warn("[Telegram.WebApp] Orientation locking is not supported in version "+I);return}Lt(vn),d.postEvent("web_app_toggle_orientation_lock",!1,{locked:ee})}var yn=[];function kn(vn,Ln){We("homeScreenAdded")}function nr(vn,Ln){var ar=Ln.status||"unknown";if(yn.length>0){for(var Mr=0;Mr<yn.length;Mr++){var kr=yn[Mr];kr(ar)}yn=[]}We("homeScreenChecked",{status:ar})}var dr=!1;function Qr(vn,Ln){if(dr){var ar=dr;dr=!1,ar.callback&&ar.callback(!0),We("shareMessageSent")}}function Wr(vn,Ln){if(dr){var ar=dr;dr=!1,ar.callback&&ar.callback(!1),We("shareMessageFailed",{error:Ln.error})}}var Gr=!1;function Hr(vn,Ln){if(Gr){var ar=Gr;Gr=!1,ar.callback&&ar.callback(!0),We("emojiStatusSet")}}function Kr(vn,Ln){if(Gr){var ar=Gr;Gr=!1,ar.callback&&ar.callback(!1),We("emojiStatusFailed",{error:Ln.error})}}var ti=!1;function Mi(vn,Ln){if(ti){var ar=ti;ti=!1,ar.callback&&ar.callback(Ln.status=="allowed"),We("emojiStatusAccessRequested",{status:Ln.status})}}var Sr=!1;function Ci(){return oe=="secondary_bg_color"?R.secondary_bg_color:oe=="bg_color"?R.bg_color:se}function oi(vn){if(!tt("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+I);return}tt("6.9")||(R.bg_color&&R.bg_color==vn?vn="bg_color":R.secondary_bg_color&&R.secondary_bg_color==vn&&(vn="secondary_bg_color"));var Ln=null,ar=null;if(vn=="bg_color"||vn=="secondary_bg_color")ar=vn;else if(tt("6.9")&&(Ln=vr(vn),!Ln))throw console.error("[Telegram.WebApp] Header color format is invalid",vn),Error("WebAppHeaderColorInvalid");if(!tt("6.9")&&ar!="bg_color"&&ar!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",vn),Error("WebAppHeaderColorKeyInvalid");oe=ar,se=Ln,Br()}var Ii=null,wr=null;function Br(){(Ii!=oe||wr!=se)&&(Ii=oe,wr=se,wr?d.postEvent("web_app_set_header_color",!1,{color:se}):d.postEvent("web_app_set_header_color",!1,{color_key:oe}))}function ui(){return ie=="secondary_bg_color"?R.secondary_bg_color:ie=="bg_color"?R.bg_color:ie}function vi(vn){if(!tt("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+I);return}var Ln;if(vn=="bg_color"||vn=="secondary_bg_color")Ln=vn;else if(Ln=vr(vn),!Ln)throw console.error("[Telegram.WebApp] Background color format is invalid",vn),Error("WebAppBackgroundColorInvalid");ie=Ln,br()}var qr=null;function br(){var vn=ui();qr!=vn&&(qr=vn,d.postEvent("web_app_set_background_color",!1,{color:vn}))}var er="bottom_bar_bg_color";function Gn(){return er=="bottom_bar_bg_color"?R.bottom_bar_bg_color||R.secondary_bg_color||"#ffffff":er=="secondary_bg_color"?R.secondary_bg_color:er=="bg_color"?R.bg_color:er}function Er(vn){if(!tt("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+I);return}var Ln;if(vn=="bg_color"||vn=="secondary_bg_color"||vn=="bottom_bar_bg_color")Ln=vn;else if(Ln=vr(vn),!Ln)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",vn),Error("WebAppBottomBarColorInvalid");er=Ln,tr(),window.Telegram.WebApp.SecondaryButton.setParams({})}var mn=null;function tr(){var vn=Gn();mn!=vn&&(mn=vn,d.postEvent("web_app_set_bottom_bar_color",!1,{color:vn})),v.tgWebAppDebug&&An()}function vr(vn){vn+="";var Ln;if(Ln=/^\s*#([0-9a-f]{6})\s*$/i.exec(vn))return"#"+Ln[1].toLowerCase();if(Ln=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(vn))return("#"+Ln[1]+Ln[1]+Ln[2]+Ln[2]+Ln[3]+Ln[3]).toLowerCase();if(Ln=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(vn)){var ar=parseInt(Ln[1]),Mr=parseInt(Ln[2]),kr=parseInt(Ln[3]);return ar=(ar<16?"0":"")+ar.toString(16),Mr=(Mr<16?"0":"")+Mr.toString(16),kr=(kr<16?"0":"")+kr.toString(16),"#"+ar+Mr+kr}return!1}function Ar(vn){vn=vn.replace(/[\s#]/g,""),vn.length==3&&(vn=vn[0]+vn[0]+vn[1]+vn[1]+vn[2]+vn[2]);var Ln=parseInt(vn.substr(0,2),16),ar=parseInt(vn.substr(2,2),16),Mr=parseInt(vn.substr(4,2),16),kr=Math.sqrt(.299*(Ln*Ln)+.587*(ar*ar)+.114*(Mr*Mr));return kr<120}function Tn(vn,Ln){typeof vn!="string"&&(vn=""),typeof Ln!="string"&&(Ln=""),vn=vn.replace(/^\s+|\s+$/g,"").split("."),Ln=Ln.replace(/^\s+|\s+$/g,"").split(".");var ar=Math.max(vn.length,Ln.length),Mr,kr,gi;for(Mr=0;Mr<ar;Mr++)if(kr=parseInt(vn[Mr])||0,gi=parseInt(Ln[Mr])||0,kr!=gi)return kr>gi?1:-1;return 0}function tt(vn){return Tn(I,vn)>=0}function $t(vn){if(window.Blob)try{return new Blob([vn]).size}catch{}for(var Ln=vn.length,ar=vn.length-1;ar>=0;ar--){var Mr=vn.charCodeAt(ar);Mr>127&&Mr<=2047?Ln++:Mr>2047&&Mr<=65535&&(Ln+=2),Mr>=56320&&Mr<=57343&&ar--}return Ln}var dn=function(){var vn=!1,Ln={};Object.defineProperty(Ln,"isVisible",{set:function(fi){Hi({is_visible:fi})},get:function(){return vn},enumerable:!0});var ar=null;d.onEvent("back_button_pressed",Mr);function Mr(){We("backButtonClicked")}function kr(){return{is_visible:vn}}function gi(fi){return typeof fi>"u"&&(fi=kr()),JSON.stringify(fi)}function di(){return tt("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+I),!1)}function _i(){var fi=kr(),qi=gi(fi);ar!==qi&&(ar=qi,d.postEvent("web_app_setup_back_button",!1,fi))}function Hi(fi){return di()&&(typeof fi.is_visible<"u"&&(vn=!!fi.is_visible),_i()),Ln}return Ln.onClick=function(fi){return di()&&nt("backButtonClicked",fi),Ln},Ln.offClick=function(fi){return di()&&Qt("backButtonClicked",fi),Ln},Ln.show=function(){return Hi({is_visible:!0})},Ln.hide=function(){return Hi({is_visible:!1})},Ln}(),Qe=null,gn={},sr=0;if(v.tgWebAppDebug){Qe=document.createElement("tg-bottom-bar");var rr={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:Gn(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var it in rr)Qe.style[it]=rr[it];document.addEventListener("DOMContentLoaded",function vn(Ln){document.removeEventListener("DOMContentLoaded",vn),document.body.appendChild(Qe)});var At=document.createElement("style");At.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',Qe.appendChild(At)}function An(){var vn=gn.main._bottomButton,Ln=gn.secondary._bottomButton;vn.isVisible||Ln.isVisible?(Qe.style.display="flex",sr=58,vn.isVisible&&Ln.isVisible&&(Ln.position=="top"?(Qe.style.flexDirection="column-reverse",sr+=51):Ln.position=="bottom"?(Qe.style.flexDirection="column",sr+=51):Ln.position=="left"?Qe.style.flexDirection="row-reverse":Ln.position=="right"&&(Qe.style.flexDirection="row"))):(Qe.style.display="none",sr=0),Qe.style.background=Gn(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=sr+"px"),Gt()}var Ft=function(vn){var Ln=vn=="main";if(Ln)var ar="web_app_setup_main_button",Mr="main_button_pressed",kr="mainButtonClicked",gi="Continue",di=function(){return R.button_color||"#2481cc"},_i=function(){return R.button_text_color||"#ffffff"};else var ar="web_app_setup_secondary_button",Mr="secondary_button_pressed",kr="secondaryButtonClicked",gi="Cancel",di=function(){return Gn()},_i=function(){return R.button_color||"#2481cc"};var Hi=!1,fi=!0,qi=!1,Ki=!1,$i=vn,wi=gi,Oi=!1,Gi=!1,wa="left",Fi={};Object.defineProperty(Fi,"type",{get:function(){return $i},enumerable:!0}),Object.defineProperty(Fi,"text",{set:function(ji){Fi.setParams({text:ji})},get:function(){return wi},enumerable:!0}),Object.defineProperty(Fi,"color",{set:function(ji){Fi.setParams({color:ji})},get:function(){return Oi||di()},enumerable:!0}),Object.defineProperty(Fi,"textColor",{set:function(ji){Fi.setParams({text_color:ji})},get:function(){return Gi||_i()},enumerable:!0}),Object.defineProperty(Fi,"isVisible",{set:function(ji){Fi.setParams({is_visible:ji})},get:function(){return Hi},enumerable:!0}),Object.defineProperty(Fi,"isProgressVisible",{get:function(){return Ki},enumerable:!0}),Object.defineProperty(Fi,"isActive",{set:function(ji){Fi.setParams({is_active:ji})},get:function(){return fi},enumerable:!0}),Object.defineProperty(Fi,"hasShineEffect",{set:function(ji){Fi.setParams({has_shine_effect:ji})},get:function(){return qi},enumerable:!0}),Ln||Object.defineProperty(Fi,"position",{set:function(ji){Fi.setParams({position:ji})},get:function(){return wa},enumerable:!0});var Ba=null;d.onEvent(Mr,Gs);var ta=null;if(v.tgWebAppDebug){ta=document.createElement("tg-bottom-button");var Ua={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var Ss in Ua)ta.style[Ss]=Ua[Ss];Qe.appendChild(ta),ta.addEventListener("click",Gs,!1),ta._bottomButton=Fi,gn[vn]=ta}function Gs(){fi&&We(kr)}function Cs(){var ji=Fi.color,Da=Fi.textColor;if(Hi){var ha={is_visible:!0,is_active:fi,is_progress_visible:Ki,text:wi,color:ji,text_color:Da,has_shine_effect:qi&&fi&&!Ki};Ln||(ha.position=wa)}else var ha={is_visible:!1};return ha}function ko(ji){return typeof ji>"u"&&(ji=Cs()),JSON.stringify(ji)}function ws(){var ji=Cs(),Da=ko(ji);Ba!==Da&&(Ba=Da,d.postEvent(ar,!1,ji),v.tgWebAppDebug&&No(ji))}function No(ji){ji.is_visible?(ta.style.display="block",ta.style.opacity=ji.is_active?"1":"0.8",ta.style.cursor=ji.is_active?"pointer":"auto",ta.disabled=!ji.is_active,ta.innerText=ji.text,ta.className=ji.has_shine_effect?"shine":"",ta.style.backgroundImage=ji.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+ji.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",ta.style.backgroundColor=ji.color,ta.style.color=ji.text_color):ta.style.display="none",An()}function po(ji){if(typeof ji.text<"u"){var Da=$e(ji.text);if(!Da.length)throw console.error("[Telegram.WebApp] Bottom button text is required",ji.text),Error("WebAppBottomButtonParamInvalid");if(Da.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",Da),Error("WebAppBottomButtonParamInvalid");wi=Da}if(typeof ji.color<"u")if(ji.color===!1||ji.color===null)Oi=!1;else{var ha=vr(ji.color);if(!ha)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",ji.color),Error("WebAppBottomButtonParamInvalid");Oi=ha}if(typeof ji.text_color<"u")if(ji.text_color===!1||ji.text_color===null)Gi=!1;else{var ao=vr(ji.text_color);if(!ao)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",ji.text_color),Error("WebAppBottomButtonParamInvalid");Gi=ao}if(typeof ji.is_visible<"u"){if(ji.is_visible&&!Fi.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");Hi=!!ji.is_visible}if(typeof ji.has_shine_effect<"u"&&(qi=!!ji.has_shine_effect),!Ln&&typeof ji.position<"u"){if(ji.position!="left"&&ji.position!="right"&&ji.position!="top"&&ji.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",ji.position),Error("WebAppBottomButtonParamInvalid");wa=ji.position}return typeof ji.is_active<"u"&&(fi=!!ji.is_active),ws(),Fi}return Fi.setText=function(ji){return Fi.setParams({text:ji})},Fi.onClick=function(ji){return nt(kr,ji),Fi},Fi.offClick=function(ji){return Qt(kr,ji),Fi},Fi.show=function(){return Fi.setParams({is_visible:!0})},Fi.hide=function(){return Fi.setParams({is_visible:!1})},Fi.enable=function(){return Fi.setParams({is_active:!0})},Fi.disable=function(){return Fi.setParams({is_active:!1})},Fi.showProgress=function(ji){return fi=!!ji,Ki=!0,ws(),Fi},Fi.hideProgress=function(){return Fi.isActive||(fi=!0),Ki=!1,ws(),Fi},Fi.setParams=po,Fi},Hn=Ft("main"),wn=Ft("secondary"),lr=function(){var vn=!1,Ln={};Object.defineProperty(Ln,"isVisible",{set:function(fi){Hi({is_visible:fi})},get:function(){return vn},enumerable:!0});var ar=null;d.onEvent("settings_button_pressed",Mr);function Mr(){We("settingsButtonClicked")}function kr(){return{is_visible:vn}}function gi(fi){return typeof fi>"u"&&(fi=kr()),JSON.stringify(fi)}function di(){return tt("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+I),!1)}function _i(){var fi=kr(),qi=gi(fi);ar!==qi&&(ar=qi,d.postEvent("web_app_setup_settings_button",!1,fi))}function Hi(fi){return di()&&(typeof fi.is_visible<"u"&&(vn=!!fi.is_visible),_i()),Ln}return Ln.onClick=function(fi){return di()&&nt("settingsButtonClicked",fi),Ln},Ln.offClick=function(fi){return di()&&Qt("settingsButtonClicked",fi),Ln},Ln.show=function(){return Hi({is_visible:!0})},Ln.hide=function(){return Hi({is_visible:!1})},Ln}(),rt=function(){var vn={};function Ln(ar){if(!tt("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+I),vn;if(ar.type=="impact"){if(ar.impact_style!="light"&&ar.impact_style!="medium"&&ar.impact_style!="heavy"&&ar.impact_style!="rigid"&&ar.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",ar.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(ar.type=="notification"){if(ar.notification_type!="error"&&ar.notification_type!="success"&&ar.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",ar.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(ar.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",ar.type),Error("WebAppHapticFeedbackTypeInvalid");return d.postEvent("web_app_trigger_haptic_feedback",!1,ar),vn}return vn.impactOccurred=function(ar){return Ln({type:"impact",impact_style:ar})},vn.notificationOccurred=function(ar){return Ln({type:"notification",notification_type:ar})},vn.selectionChanged=function(){return Ln({type:"selection_change"})},vn}(),ln=function(){var vn={};function Ln(ar,Mr,kr){if(!tt("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+I),Error("WebAppMethodUnsupported");return bi(ar,Mr,kr),vn}return vn.setItem=function(ar,Mr,kr){return Ln("saveStorageValue",{key:ar,value:Mr},kr)},vn.getItem=function(ar,Mr){return vn.getItems([ar],Mr?function(kr,gi){kr?Mr(kr):Mr(null,gi[ar])}:null)},vn.getItems=function(ar,Mr){return Ln("getStorageValues",{keys:ar},Mr)},vn.removeItem=function(ar,Mr){return vn.removeItems([ar],Mr)},vn.removeItems=function(ar,Mr){return Ln("deleteStorageValues",{keys:ar},Mr)},vn.getKeys=function(ar){return Ln("getStorageKeys",{},ar)},vn}(),Cn=function(){var vn=!1,Ln=!1,ar="unknown",Mr=!1,kr=!1,gi=!1,di="",_i={};Object.defineProperty(_i,"isInited",{get:function(){return vn},enumerable:!0}),Object.defineProperty(_i,"isBiometricAvailable",{get:function(){return vn&&Ln},enumerable:!0}),Object.defineProperty(_i,"biometricType",{get:function(){return ar||"unknown"},enumerable:!0}),Object.defineProperty(_i,"isAccessRequested",{get:function(){return Mr},enumerable:!0}),Object.defineProperty(_i,"isAccessGranted",{get:function(){return Mr&&kr},enumerable:!0}),Object.defineProperty(_i,"isBiometricTokenSaved",{get:function(){return gi},enumerable:!0}),Object.defineProperty(_i,"deviceId",{get:function(){return di||""},enumerable:!0});var Hi={callbacks:[]},fi=!1,qi=!1,Ki=!1;d.onEvent("biometry_info_received",$i),d.onEvent("biometry_auth_requested",wi),d.onEvent("biometry_token_updated",Oi);function $i(Fi,Ba){if(vn=!0,Ba.available?(Ln=!0,ar=Ba.type||"unknown",Ba.access_requested?(Mr=!0,kr=!!Ba.access_granted,gi=!!Ba.token_saved):(Mr=!1,kr=!1,gi=!1)):(Ln=!1,ar="unknown",Mr=!1,kr=!1,gi=!1),di=Ba.device_id||"",Hi.callbacks.length>0){for(var ta=0;ta<Hi.callbacks.length;ta++){var Ua=Hi.callbacks[ta];Ua()}Hi.callbacks=[]}if(fi){var Ss=fi;fi=!1,Ss.callback&&Ss.callback(kr)}We("biometricManagerUpdated")}function wi(Fi,Ba){var ta=Ba.status=="authorized",Ua=Ba.token||"";if(qi){var Ss=qi;qi=!1,Ss.callback&&Ss.callback(ta,ta?Ua:null)}We("biometricAuthRequested",ta?{isAuthenticated:!0,biometricToken:Ua}:{isAuthenticated:!1})}function Oi(Fi,Ba){var ta=!1;if(Ln&&Mr&&(Ba.status=="updated"?(gi=!0,ta=!0):Ba.status=="removed"&&(gi=!1,ta=!0)),Ki){var Ua=Ki;Ki=!1,Ua.callback&&Ua.callback(ta)}We("biometricTokenUpdated",{isUpdated:ta})}function Gi(){return tt("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+I),!1)}function wa(){if(!vn)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return _i.init=function(Fi){return!Gi()||vn||(Fi&&Hi.callbacks.push(Fi),d.postEvent("web_app_biometry_get_info",!1)),_i},_i.requestAccess=function(Fi,Ba){if(!Gi())return _i;if(wa(),!Ln)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(fi)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var ta={};if(typeof Fi.reason<"u"){var Ua=$e(Fi.reason);if(Ua.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Ua),Error("WebAppBiometricRequestAccessParamInvalid");Ua.length>0&&(ta.reason=Ua)}return fi={callback:Ba},d.postEvent("web_app_biometry_request_access",!1,ta),_i},_i.authenticate=function(Fi,Ba){if(!Gi())return _i;if(wa(),!Ln)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!kr)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(qi)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var ta={};if(typeof Fi.reason<"u"){var Ua=$e(Fi.reason);if(Ua.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Ua),Error("WebAppBiometricRequestAccessParamInvalid");Ua.length>0&&(ta.reason=Ua)}return qi={callback:Ba},d.postEvent("web_app_biometry_request_auth",!1,ta),_i},_i.updateBiometricToken=function(Fi,Ba){if(!Gi())return _i;if(Fi=Fi||"",Fi.length>1024)throw console.error("[Telegram.WebApp] Token is too long",Fi),Error("WebAppBiometricManagerTokenInvalid");if(wa(),!Ln)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!kr)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(Ki)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return Ki={callback:Ba},d.postEvent("web_app_biometry_update_token",!1,{token:Fi}),_i},_i.openSettings=function(){if(!Gi())return _i;if(wa(),!Ln)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!Mr)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return kr?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),_i):(d.postEvent("web_app_biometry_open_settings",!1),_i)},_i}(),zn=function(){var vn=!1,Ln=!1,ar=!1,Mr=!1,kr={};Object.defineProperty(kr,"isInited",{get:function(){return vn},enumerable:!0}),Object.defineProperty(kr,"isLocationAvailable",{get:function(){return vn&&Ln},enumerable:!0}),Object.defineProperty(kr,"isAccessRequested",{get:function(){return ar},enumerable:!0}),Object.defineProperty(kr,"isAccessGranted",{get:function(){return ar&&Mr},enumerable:!0});var gi={callbacks:[]},di={callbacks:[]};d.onEvent("location_checked",_i),d.onEvent("location_requested",Hi);function _i($i,wi){if(vn=!0,wi.available?(Ln=!0,wi.access_requested?(ar=!0,Mr=!!wi.access_granted):(ar=!1,Mr=!1)):(Ln=!1,ar=!1,Mr=!1),gi.callbacks.length>0){for(var Oi=0;Oi<gi.callbacks.length;Oi++){var Gi=gi.callbacks[Oi];Gi()}gi.callbacks=[]}We("locationManagerUpdated")}function Hi($i,wi){if(!wi.available)Oi=null;else{var Oi={latitude:wi.latitude,longitude:wi.longitude,altitude:null,course:null,speed:null,horizontal_accuracy:null,vertical_accuracy:null,course_accuracy:null,speed_accuracy:null};typeof wi.altitude<"u"&&wi.altitude!==null&&(Oi.altitude=wi.altitude),typeof wi.course<"u"&&wi.course!==null&&(Oi.course=wi.course%360),typeof wi.speed<"u"&&wi.speed!==null&&(Oi.speed=wi.speed),typeof wi.horizontal_accuracy<"u"&&wi.horizontal_accuracy!==null&&(Oi.horizontal_accuracy=wi.horizontal_accuracy),typeof wi.vertical_accuracy<"u"&&wi.vertical_accuracy!==null&&(Oi.vertical_accuracy=wi.vertical_accuracy),typeof wi.course_accuracy<"u"&&wi.course_accuracy!==null&&(Oi.course_accuracy=wi.course_accuracy),typeof wi.speed_accuracy<"u"&&wi.speed_accuracy!==null&&(Oi.speed_accuracy=wi.speed_accuracy)}!wi.available||!Ln||!ar||!Mr?(gi.callbacks.push(function(){fi(Oi)}),d.postEvent("web_app_check_location",!1)):fi(Oi)}function fi($i){if(di.callbacks.length>0){for(var wi=0;wi<di.callbacks.length;wi++){var Oi=di.callbacks[wi];Oi($i)}di.callbacks=[]}$i!==null&&We("locationRequested",{locationData:$i})}function qi(){return tt("8.0")?!0:(console.warn("[Telegram.WebApp] LocationManager is not supported in version "+I),!1)}function Ki(){if(!vn)throw console.error("[Telegram.WebApp] LocationManager should be inited before using."),Error("WebAppLocationManagerNotInited");return!0}return kr.init=function($i){return!qi()||vn||($i&&gi.callbacks.push($i),d.postEvent("web_app_check_location",!1)),kr},kr.getLocation=function($i){if(!qi())return kr;if(Ki(),!Ln)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");return di.callbacks.push($i),d.postEvent("web_app_request_location"),kr},kr.openSettings=function(){if(!qi())return kr;if(Ki(),!Ln)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");if(!ar)throw console.error("[Telegram.WebApp] Location access was not requested yet."),Error("WebAppLocationManagerLocationAccessNotRequested");return Mr?(console.warn("[Telegram.WebApp] Location access was granted by the user, no need to go to settings."),kr):(d.postEvent("web_app_open_location_settings",!1),kr)},kr}(),Sn=function(){var vn=!1,Ln=null,ar=null,Mr=null,kr=[],gi=[],di={};Object.defineProperty(di,"isStarted",{get:function(){return vn},enumerable:!0}),Object.defineProperty(di,"x",{get:function(){return Ln},enumerable:!0}),Object.defineProperty(di,"y",{get:function(){return ar},enumerable:!0}),Object.defineProperty(di,"z",{get:function(){return Mr},enumerable:!0}),d.onEvent("accelerometer_started",_i),d.onEvent("accelerometer_stopped",Hi),d.onEvent("accelerometer_changed",fi),d.onEvent("accelerometer_failed",qi);function _i($i,wi){if(vn=!0,kr.length>0){for(var Oi=0;Oi<kr.length;Oi++){var Gi=kr[Oi];Gi(!0)}kr=[]}We("accelerometerStarted")}function Hi($i,wi){if(vn=!1,gi.length>0){for(var Oi=0;Oi<gi.length;Oi++){var Gi=gi[Oi];Gi(!0)}gi=[]}We("accelerometerStopped")}function fi($i,wi){Ln=wi.x,ar=wi.y,Mr=wi.z,We("accelerometerChanged")}function qi($i,wi){if(kr.length>0){for(var Oi=0;Oi<kr.length;Oi++){var Gi=kr[Oi];Gi(!1)}kr=[]}We("accelerometerFailed",{error:wi.error})}function Ki(){return tt("8.0")?!0:(console.warn("[Telegram.WebApp] Accelerometer is not supported in version "+I),!1)}return di.start=function($i,wi){if($i=$i||{},!Ki())return di;var Oi={},Gi=parseInt($i.refresh_rate||1e3);return isNaN(Gi)||Gi<20||Gi>1e3?console.warn("[Telegram.WebApp] Accelerometer refresh_rate is invalid",Gi):Oi.refresh_rate=Gi,wi&&kr.push(wi),d.postEvent("web_app_start_accelerometer",!1,Oi),di},di.stop=function($i){return Ki()&&($i&&gi.push($i),d.postEvent("web_app_stop_accelerometer")),di},di}(),yr=function(){var vn=!1,Ln=null,ar=null,Mr=null,kr=!1,gi=[],di=[],_i={};Object.defineProperty(_i,"isStarted",{get:function(){return vn},enumerable:!0}),Object.defineProperty(_i,"absolute",{get:function(){return kr},enumerable:!0}),Object.defineProperty(_i,"alpha",{get:function(){return Ln},enumerable:!0}),Object.defineProperty(_i,"beta",{get:function(){return ar},enumerable:!0}),Object.defineProperty(_i,"gamma",{get:function(){return Mr},enumerable:!0}),d.onEvent("device_orientation_started",Hi),d.onEvent("device_orientation_stopped",fi),d.onEvent("device_orientation_changed",qi),d.onEvent("device_orientation_failed",Ki);function Hi(wi,Oi){if(vn=!0,gi.length>0){for(var Gi=0;Gi<gi.length;Gi++){var wa=gi[Gi];wa(!0)}gi=[]}We("deviceOrientationStarted")}function fi(wi,Oi){if(vn=!1,di.length>0){for(var Gi=0;Gi<di.length;Gi++){var wa=di[Gi];wa(!0)}di=[]}We("deviceOrientationStopped")}function qi(wi,Oi){kr=!!Oi.absolute,Ln=Oi.alpha,ar=Oi.beta,Mr=Oi.gamma,We("deviceOrientationChanged")}function Ki(wi,Oi){if(gi.length>0){for(var Gi=0;Gi<gi.length;Gi++){var wa=gi[Gi];wa(!1)}gi=[]}We("deviceOrientationFailed",{error:Oi.error})}function $i(){return tt("8.0")?!0:(console.warn("[Telegram.WebApp] DeviceOrientation is not supported in version "+I),!1)}return _i.start=function(wi,Oi){if(wi=wi||{},!$i())return _i;var Gi={},wa=parseInt(wi.refresh_rate||1e3);return isNaN(wa)||wa<20||wa>1e3?console.warn("[Telegram.WebApp] DeviceOrientation refresh_rate is invalid",wa):Gi.refresh_rate=wa,Gi.need_absolute=!!wi.need_absolute,Oi&&gi.push(Oi),d.postEvent("web_app_start_device_orientation",!1,Gi),_i},_i.stop=function(wi){return $i()&&(wi&&di.push(wi),d.postEvent("web_app_stop_device_orientation")),_i},_i}(),ur=function(){var vn=!1,Ln=null,ar=null,Mr=null,kr=[],gi=[],di={};Object.defineProperty(di,"isStarted",{get:function(){return vn},enumerable:!0}),Object.defineProperty(di,"x",{get:function(){return Ln},enumerable:!0}),Object.defineProperty(di,"y",{get:function(){return ar},enumerable:!0}),Object.defineProperty(di,"z",{get:function(){return Mr},enumerable:!0}),d.onEvent("gyroscope_started",_i),d.onEvent("gyroscope_stopped",Hi),d.onEvent("gyroscope_changed",fi),d.onEvent("gyroscope_failed",qi);function _i($i,wi){if(vn=!0,kr.length>0){for(var Oi=0;Oi<kr.length;Oi++){var Gi=kr[Oi];Gi(!0)}kr=[]}We("gyroscopeStarted")}function Hi($i,wi){if(vn=!1,gi.length>0){for(var Oi=0;Oi<gi.length;Oi++){var Gi=gi[Oi];Gi(!0)}gi=[]}We("gyroscopeStopped")}function fi($i,wi){Ln=wi.x,ar=wi.y,Mr=wi.z,We("gyroscopeChanged")}function qi($i,wi){if(kr.length>0){for(var Oi=0;Oi<kr.length;Oi++){var Gi=kr[Oi];Gi(!1)}kr=[]}We("gyroscopeFailed",{error:wi.error})}function Ki(){return tt("8.0")?!0:(console.warn("[Telegram.WebApp] Gyroscope is not supported in version "+I),!1)}return di.start=function($i,wi){if($i=$i||{},!Ki())return di;var Oi={},Gi=parseInt($i.refresh_rate||1e3);return isNaN(Gi)||Gi<20||Gi>1e3?console.warn("[Telegram.WebApp] Gyroscope refresh_rate is invalid",Gi):Oi.refresh_rate=Gi,wi&&kr.push(wi),d.postEvent("web_app_start_gyroscope",!1,Oi),di},di.stop=function($i){return Ki()&&($i&&gi.push($i),d.postEvent("web_app_stop_gyroscope")),di},di}(),hr={};function fr(vn,Ln){if(Ln.slug&&hr[Ln.slug]){var ar=hr[Ln.slug];delete hr[Ln.slug],ar.callback&&ar.callback(Ln.status),We("invoiceClosed",{url:ar.url,status:Ln.status})}}var Sr=!1;function Lr(vn,Ln){if(Sr){var ar=Sr;Sr=!1;var Mr=null;typeof Ln.button_id<"u"&&(Mr=Ln.button_id),ar.callback&&ar.callback(Mr),We("popupClosed",{button_id:Mr})}}var Nr=!1;function xr(vn,Ln){if(Nr){var ar=Nr,Mr=null;typeof Ln.data<"u"&&(Mr=Ln.data),ar.callback&&ar.callback(Mr)&&(Nr=!1,d.postEvent("web_app_close_scan_qr_popup",!1)),We("qrTextReceived",{data:Mr})}}function Cr(vn,Ln){Nr=!1,We("scanQrPopupClosed")}function Or(vn,Ln){if(Ln.req_id&&In[Ln.req_id]){var ar=In[Ln.req_id];delete In[Ln.req_id];var Mr=null;typeof Ln.data<"u"&&(Mr=Ln.data),ar.callback&&ar.callback(Mr),We("clipboardTextReceived",{data:Mr})}}var Ur=!1;function Pr(vn,Ln){if(Ur){var ar=Ur;Ur=!1,ar.callback&&ar.callback(Ln.status=="allowed"),We("writeAccessRequested",{status:Ln.status})}}function Vr(vn,Ln){var ar,Mr,kr=0,gi=function(){bi("getRequestedContact",{},function(_i,Hi){Hi&&Hi.length?(clearTimeout(Mr),vn(Hi)):(kr+=50,ar=setTimeout(gi,kr))})},di=function(){clearTimeout(ar),vn("")};Mr=setTimeout(di,Ln),gi()}var xi=!1;function Ai(vn,Ln){if(xi){var ar=xi;xi=!1;var Mr=Ln.status=="sent",kr={status:Ln.status};Mr?Vr(function(gi){if(gi&&gi.length){kr.response=gi,kr.responseUnsafe=_.urlParseQueryString(gi);for(var di in kr.responseUnsafe){var _i=kr.responseUnsafe[di];try{(_i.substr(0,1)=="{"&&_i.substr(-1)=="}"||_i.substr(0,1)=="["&&_i.substr(-1)=="]")&&(kr.responseUnsafe[di]=JSON.parse(_i))}catch{}}}ar.callback&&ar.callback(Mr,kr),We("contactRequested",kr)},3e3):(ar.callback&&ar.callback(Mr,kr),We("contactRequested",kr))}}var Ti=!1;function Si(vn,Ln){if(Ti){var ar=Ti;Ti=!1;var Mr=Ln.status=="downloading";ar.callback&&ar.callback(Mr),We("fileDownloadRequested",{status:Mr?"downloading":"cancelled"})}}function ir(vn,Ln){if(Ln.req_id&&In[Ln.req_id]){var ar=In[Ln.req_id];delete In[Ln.req_id];var Mr=null,kr=null;typeof Ln.result<"u"&&(Mr=Ln.result),typeof Ln.error<"u"&&(kr=Ln.error),ar.callback&&ar.callback(kr,Mr)}}function bi(vn,Ln,ar){if(!tt("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+I),Error("WebAppMethodUnsupported");var Mr=Zn(16),kr={req_id:Mr,method:vn,params:Ln||{}};In[Mr]={callback:ar},d.postEvent("web_app_invoke_custom_method",!1,kr)}window.Telegram||(window.Telegram={}),Object.defineProperty(C,"initData",{get:function(){return w},enumerable:!0}),Object.defineProperty(C,"initDataUnsafe",{get:function(){return T},enumerable:!0}),Object.defineProperty(C,"version",{get:function(){return I},enumerable:!0}),Object.defineProperty(C,"platform",{get:function(){return z},enumerable:!0}),Object.defineProperty(C,"colorScheme",{get:function(){return G},enumerable:!0}),Object.defineProperty(C,"themeParams",{get:function(){return R},enumerable:!0}),Object.defineProperty(C,"isExpanded",{get:function(){return Dn},enumerable:!0}),Object.defineProperty(C,"viewportHeight",{get:function(){return($n===!1?window.innerHeight:$n)-sr},enumerable:!0}),Object.defineProperty(C,"viewportStableHeight",{get:function(){return(Rn===!1?window.innerHeight:Rn)-sr},enumerable:!0}),Object.defineProperty(C,"safeAreaInset",{get:function(){return Jn},enumerable:!0}),Object.defineProperty(C,"contentSafeAreaInset",{get:function(){return Xn},enumerable:!0}),Object.defineProperty(C,"isClosingConfirmationEnabled",{set:function(vn){bn(vn)},get:function(){return Un},enumerable:!0}),Object.defineProperty(C,"isVerticalSwipesEnabled",{set:function(vn){Qn(vn)},get:function(){return Kn},enumerable:!0}),Object.defineProperty(C,"isFullscreen",{get:function(){return Y},enumerable:!0}),Object.defineProperty(C,"isOrientationLocked",{set:function(vn){Mt(vn)},get:function(){return ee},enumerable:!0}),Object.defineProperty(C,"isActive",{get:function(){return H},enumerable:!0}),Object.defineProperty(C,"headerColor",{set:function(vn){oi(vn)},get:function(){return Ci()},enumerable:!0}),Object.defineProperty(C,"backgroundColor",{set:function(vn){vi(vn)},get:function(){return ui()},enumerable:!0}),Object.defineProperty(C,"bottomBarColor",{set:function(vn){Er(vn)},get:function(){return Gn()},enumerable:!0}),Object.defineProperty(C,"BackButton",{value:dn,enumerable:!0}),Object.defineProperty(C,"MainButton",{value:Hn,enumerable:!0}),Object.defineProperty(C,"SecondaryButton",{value:wn,enumerable:!0}),Object.defineProperty(C,"SettingsButton",{value:lr,enumerable:!0}),Object.defineProperty(C,"HapticFeedback",{value:rt,enumerable:!0}),Object.defineProperty(C,"CloudStorage",{value:ln,enumerable:!0}),Object.defineProperty(C,"BiometricManager",{value:Cn,enumerable:!0}),Object.defineProperty(C,"Accelerometer",{value:Sn,enumerable:!0}),Object.defineProperty(C,"DeviceOrientation",{value:yr,enumerable:!0}),Object.defineProperty(C,"Gyroscope",{value:ur,enumerable:!0}),Object.defineProperty(C,"LocationManager",{value:zn,enumerable:!0}),C.isVersionAtLeast=function(vn){return tt(vn)},C.setHeaderColor=function(vn){C.headerColor=vn},C.setBackgroundColor=function(vn){C.backgroundColor=vn},C.setBottomBarColor=function(vn){C.bottomBarColor=vn},C.enableClosingConfirmation=function(){C.isClosingConfirmationEnabled=!0},C.disableClosingConfirmation=function(){C.isClosingConfirmationEnabled=!1},C.enableVerticalSwipes=function(){C.isVerticalSwipesEnabled=!0},C.disableVerticalSwipes=function(){C.isVerticalSwipesEnabled=!1},C.lockOrientation=function(){C.isOrientationLocked=!0},C.unlockOrientation=function(){C.isOrientationLocked=!1},C.requestFullscreen=function(){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method requestFullscreen is not supported in version "+I),Error("WebAppMethodUnsupported");d.postEvent("web_app_request_fullscreen")},C.exitFullscreen=function(){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method exitFullscreen is not supported in version "+I),Error("WebAppMethodUnsupported");d.postEvent("web_app_exit_fullscreen")},C.addToHomeScreen=function(){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method addToHomeScreen is not supported in version "+I),Error("WebAppMethodUnsupported");d.postEvent("web_app_add_to_home_screen")},C.checkHomeScreenStatus=function(vn){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version "+I),Error("WebAppMethodUnsupported");vn&&yn.push(vn),d.postEvent("web_app_check_home_screen")},C.onEvent=function(vn,Ln){nt(vn,Ln)},C.offEvent=function(vn,Ln){Qt(vn,Ln)},C.sendData=function(vn){if(!vn||!vn.length)throw console.error("[Telegram.WebApp] Data is required",vn),Error("WebAppDataInvalid");if($t(vn)>4096)throw console.error("[Telegram.WebApp] Data is too long",vn),Error("WebAppDataInvalid");d.postEvent("web_app_data_send",!1,{data:vn})},C.switchInlineQuery=function(vn,Ln){if(!tt("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+I),Error("WebAppMethodUnsupported");if(!v.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(vn=vn||"",vn.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",vn),Error("WebAppInlineQueryInvalid");var ar=[];if(Ln){if(!Array.isArray(Ln))throw console.error("[Telegram.WebApp] Choose chat types should be an array",Ln),Error("WebAppInlineChooseChatTypesInvalid");for(var Mr={users:1,bots:1,groups:1,channels:1},kr=0;kr<Ln.length;kr++){var gi=Ln[kr];if(!Mr[gi])throw console.error("[Telegram.WebApp] Choose chat type is invalid",gi),Error("WebAppInlineChooseChatTypeInvalid");Mr[gi]!=2&&(Mr[gi]=2,ar.push(gi))}}d.postEvent("web_app_switch_inline_query",!1,{query:vn,chat_types:ar})},C.openLink=function(Mr,Ln){var ar=document.createElement("A");if(ar.href=Mr,ar.protocol!="http:"&&ar.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",Mr),Error("WebAppTgUrlInvalid");var Mr=ar.href;if(Ln=Ln||{},tt("6.1")){var kr={url:Mr};tt("6.4")&&Ln.try_instant_view&&(kr.try_instant_view=!0),tt("7.6")&&Ln.try_browser&&(kr.try_browser=Ln.try_browser),d.postEvent("web_app_open_link",!1,kr)}else window.open(Mr,"_blank")},C.openTelegramLink=function(vn,Ln){var ar=document.createElement("A");if(ar.href=vn,ar.protocol!="http:"&&ar.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",vn),Error("WebAppTgUrlInvalid");if(ar.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",vn),Error("WebAppTgUrlInvalid");var Mr=ar.pathname+ar.search;if(Ln=Ln||{},A||tt("6.1")){var kr={path_full:Mr};Ln.force_request&&(kr.force_request=!0),d.postEvent("web_app_open_tg_link",!1,kr)}else location.href="https://t.me"+Mr},C.openInvoice=function(vn,Ln){var ar=document.createElement("A"),Mr,kr;if(ar.href=vn,ar.protocol!="http:"&&ar.protocol!="https:"||ar.hostname!="t.me"||!(Mr=ar.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(kr=Mr[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",vn),Error("WebAppInvoiceUrlInvalid");if(!tt("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+I),Error("WebAppMethodUnsupported");if(hr[kr])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");hr[kr]={url:vn,callback:Ln},d.postEvent("web_app_open_invoice",!1,{slug:kr})},C.showPopup=function(vn,Ln){if(!tt("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+I),Error("WebAppMethodUnsupported");if(Sr)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var ar="",Mr="",kr=[],gi={};if(typeof vn.title<"u"){if(ar=$e(vn.title),ar.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",ar),Error("WebAppPopupParamInvalid");ar.length>0&&(gi.title=ar)}if(typeof vn.message<"u"&&(Mr=$e(vn.message)),!Mr.length)throw console.error("[Telegram.WebApp] Popup message is required",vn.message),Error("WebAppPopupParamInvalid");if(Mr.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",Mr),Error("WebAppPopupParamInvalid");if(gi.message=Mr,typeof vn.buttons<"u"){if(!Array.isArray(vn.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",vn.buttons),Error("WebAppPopupParamInvalid");for(var di=0;di<vn.buttons.length;di++){var _i=vn.buttons[di],Hi={},fi="";if(typeof _i.id<"u"&&(fi=_i.id.toString(),fi.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",fi),Error("WebAppPopupParamInvalid");Hi.id=fi;var qi=_i.type;if(typeof qi>"u"&&(qi="default"),Hi.type=qi,!(qi=="ok"||qi=="close"||qi=="cancel"))if(qi=="default"||qi=="destructive"){var Ki="";if(typeof _i.text<"u"&&(Ki=$e(_i.text)),!Ki.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+qi,_i.text),Error("WebAppPopupParamInvalid");if(Ki.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",Ki),Error("WebAppPopupParamInvalid");Hi.text=Ki}else throw console.error("[Telegram.WebApp] Popup button type is invalid",qi),Error("WebAppPopupParamInvalid");kr.push(Hi)}}else kr.push({id:"",type:"close"});if(kr.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(kr.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");gi.buttons=kr,Sr={callback:Ln},d.postEvent("web_app_open_popup",!1,gi)},C.showAlert=function(vn,Ln){C.showPopup({message:vn},Ln?function(){Ln()}:null)},C.showConfirm=function(vn,Ln){C.showPopup({message:vn,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},Ln?function(ar){Ln(ar=="ok")}:null)},C.showScanQrPopup=function(vn,Ln){if(!tt("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+I),Error("WebAppMethodUnsupported");if(Nr)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var ar="",Mr={};if(typeof vn.text<"u"){if(ar=$e(vn.text),ar.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",ar),Error("WebAppScanQrPopupParamInvalid");ar.length>0&&(Mr.text=ar)}Nr={callback:Ln},d.postEvent("web_app_open_scan_qr_popup",!1,Mr)},C.closeScanQrPopup=function(){if(!tt("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+I),Error("WebAppMethodUnsupported");Nr=!1,d.postEvent("web_app_close_scan_qr_popup",!1)},C.readTextFromClipboard=function(vn){if(!tt("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+I),Error("WebAppMethodUnsupported");var Ln=Zn(16),ar={req_id:Ln};In[Ln]={callback:vn},d.postEvent("web_app_read_text_from_clipboard",!1,ar)},C.requestWriteAccess=function(vn){if(!tt("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+I),Error("WebAppMethodUnsupported");if(Ur)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");Ur={callback:vn},d.postEvent("web_app_request_write_access")},C.requestContact=function(vn){if(!tt("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+I),Error("WebAppMethodUnsupported");if(xi)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");xi={callback:vn},d.postEvent("web_app_request_phone")},C.downloadFile=function(vn,Ln){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method downloadFile is not supported in version "+I),Error("WebAppMethodUnsupported");if(Ti)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppDownloadFilePopupOpened");var ar=document.createElement("A"),Mr={};if(!vn||!vn.url||!vn.url.length)throw console.error("[Telegram.WebApp] Url is required"),Error("WebAppDownloadFileParamInvalid");if(ar.href=vn.url,ar.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",url),Error("WebAppDownloadFileParamInvalid");if(Mr.url=ar.href,!vn||!vn.file_name||!vn.file_name.length)throw console.error("[Telegram.WebApp] File name is required"),Error("WebAppDownloadFileParamInvalid");Mr.file_name=vn.file_name,Ti={callback:Ln},d.postEvent("web_app_request_file_download",!1,Mr)},C.shareToStory=function(vn,Ln){if(Ln=Ln||{},!tt("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+I),Error("WebAppMethodUnsupported");var ar=document.createElement("A");if(ar.href=vn,ar.protocol!="http:"&&ar.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var Mr={};if(Mr.media_url=ar.href,typeof Ln.text<"u"){var kr=$e(Ln.text);if(kr.length>2048)throw console.error("[Telegram.WebApp] Text is too long",kr),Error("WebAppShareToStoryParamInvalid");kr.length>0&&(Mr.text=kr)}if(typeof Ln.widget_link<"u"){if(Ln.widget_link=Ln.widget_link||{},ar.href=Ln.widget_link.url,ar.protocol!="http:"&&ar.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var gi={url:ar.href};if(typeof Ln.widget_link.name<"u"){var di=$e(Ln.widget_link.name);if(di.length>48)throw console.error("[Telegram.WebApp] Link name is too long",di),Error("WebAppShareToStoryParamInvalid");di.length>0&&(gi.name=di)}Mr.widget_link=gi}d.postEvent("web_app_share_to_story",!1,Mr)},C.shareMessage=function(vn,Ln){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method shareMessage is not supported in version "+I),Error("WebAppMethodUnsupported");if(dr)throw console.error("[Telegram.WebApp] Share message is already opened"),Error("WebAppShareMessageOpened");dr={callback:Ln},d.postEvent("web_app_send_prepared_message",!1,{id:vn})},C.setEmojiStatus=function(vn,Ln,ar){if(Ln=Ln||{},!tt("8.0"))throw console.error("[Telegram.WebApp] Method setEmojiStatus is not supported in version "+I),Error("WebAppMethodUnsupported");var Mr={};if(Mr.custom_emoji_id=vn,typeof Ln.duration<"u"&&(Mr.duration=Ln.duration),Gr)throw console.error("[Telegram.WebApp] Emoji status is already requested"),Error("WebAppEmojiStatusRequested");Gr={callback:ar},d.postEvent("web_app_set_emoji_status",!1,Mr)},C.requestEmojiStatusAccess=function(vn){if(!tt("8.0"))throw console.error("[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version "+I),Error("WebAppMethodUnsupported");if(ti)throw console.error("[Telegram.WebApp] Emoji status permission is already requested"),Error("WebAppEmojiStatusAccessRequested");ti={callback:vn},d.postEvent("web_app_request_emoji_status_access")},C.invokeCustomMethod=function(vn,Ln,ar){bi(vn,Ln,ar)},C.ready=function(){d.postEvent("web_app_ready")},C.expand=function(){d.postEvent("web_app_expand")},C.close=function(vn){vn=vn||{};var Ln={};tt("7.6")&&vn.return_back&&(Ln.return_back=!0),d.postEvent("web_app_close",!1,Ln)},window.Telegram.WebApp=C,Br(),br(),tr(),Gt(),v.tgWebAppShowSettings&&lr.show(),window.addEventListener("resize",Ge),A&&document.addEventListener("click",Xe),d.onEvent("theme_changed",De),d.onEvent("viewport_changed",Oe),d.onEvent("safe_area_changed",ze),d.onEvent("content_safe_area_changed",je),d.onEvent("visibility_changed",He),d.onEvent("invoice_closed",fr),d.onEvent("popup_closed",Lr),d.onEvent("qr_text_received",xr),d.onEvent("scan_qr_popup_closed",Cr),d.onEvent("clipboard_text_received",Or),d.onEvent("write_access_requested",Pr),d.onEvent("phone_requested",Ai),d.onEvent("file_download_requested",Si),d.onEvent("custom_method_invoked",ir),d.onEvent("fullscreen_changed",pr),d.onEvent("fullscreen_failed",fn),d.onEvent("home_screen_added",kn),d.onEvent("home_screen_checked",nr),d.onEvent("prepared_message_sent",Qr),d.onEvent("prepared_message_failed",Wr),d.onEvent("emoji_status_set",Hr),d.onEvent("emoji_status_failed",Kr),d.onEvent("emoji_status_access_requested",Mi),d.postEvent("web_app_request_theme"),d.postEvent("web_app_request_viewport"),d.postEvent("web_app_request_safe_area"),d.postEvent("web_app_request_content_safe_area")}()),telegramWebApps}var hasRequiredSdk;function requireSdk(){if(hasRequiredSdk)return sdk;hasRequiredSdk=1,Object.defineProperty(sdk,"__esModule",{value:!0}),sdk.WebApp=void 0,requireTelegramWebApps();var _=window;return sdk.WebApp=_.Telegram.WebApp,sdk}var hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0});var _=requireSdk();return dist$1.default=_.WebApp,dist$1}var distExports$1=requireDist$1();const WebApp=getDefaultExportFromCjs(distExports$1),index$1=_mergeNamespaces({__proto__:null,default:WebApp},[distExports$1]),ShareStoryTask=({isShow:_,onComplete:d})=>{const{t:v}=useTranslation(),{appState:A}=useAppState(),[C,w]=reactExports.useState(!1),T=A.user?.caps_tasks?.onboarding.tasks.find(I=>I.taskId=="share_story"),R=I=>{const z=`https://t.me/CapsGameBot/play?startapp=r_${I}`;WebApp.shareToStory(`/telegramstory-${A.user?.caps_language??"en"}.mp4`,{text:z})},G=async()=>A.user?.caps_ref_code?A.user?.caps_ref_code:await capsService.requestRefLink(firebaseService.token);return jsxRuntimeExports.jsxs(Info,{isShow:_,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:async()=>{w(!0);try{capsService.taskLinkClicked("onboarding",T?.taskId??"",firebaseService.token);const I=await G();R(I)}catch(I){console.error(I)}w(!1),d()},fullWidth:!0,isLoading:C,children:v("tasks.publish")}),jsxRuntimeExports.jsx(Button,{onClick:()=>d(),fullWidth:!0,variant:"secondary",children:v("info.cancel")})]}),children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-gems pve-battle__result-gems--3",children:jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumWinImage,alt:"gem"})}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:["+",T?.reward?.gum," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsx("div",{className:"home-info-gum__description",children:v("tasks.storyConfirmation")})]})},TaskCountdown=({deadline:_})=>{const d=useGetCountdown(_);return jsxRuntimeExports.jsx("div",{className:"tasks__countdown",children:d})},TaskBlock=({title:_,type:d,tasksGd:v,onSetPackProps:A,onTaskClaimed:C,onSetGumReward:w,onSetBoosters:T,setIsShareTaskOpen:R})=>{const{t:G}=useTranslation(),{setPopup:I}=reactExports.useContext(PopupContext),{onBalanceUpdate:z,onUserUpdate:H}=useAppState(),[Y,ee]=reactExports.useState({}),ie=async(re,fe)=>{try{const ue=await capsService.claimReward(re,fe,firebaseService.token);await oe(ue),C()}catch{I({message:G("shop.claimFailed"),type:"error"})}await z()},oe=async re=>{if(CapsWebApp.playSound("tasks/claim-reward.mp3"),re.type=="pack"&&re.pack){const fe=firebaseService.getPackTopPartUrl(re.pack.collectionId),ue=firebaseService.getPackBottomPartUrl(re.pack.collectionId);await preloadPromise([fe,ue]),A({id:re.pack.id,collectionId:re.pack.collectionId})}else if(re.type=="gum"&&re.gum)w(re.gum);else if(re.type=="booster"&&re.booster){const fe=await H();fe.user?.inventory?.boosters&&T(fe.user?.inventory?.boosters)}},se=async(re,fe)=>{ee({...Y,[fe]:!0}),CapsWebApp.playSound("tasks/claim-task.mp3");try{const ue=await capsService.claimTask(re,fe,firebaseService.token);C(),ue.reward?await oe(ue.reward):CapsWebApp.playSound("tasks/scale.mp3")}catch{I({message:G("shop.claimFailed"),type:"error"})}ee({...Y,[fe]:!1})};return jsxRuntimeExports.jsxs("div",{className:"tasks__item",children:[jsxRuntimeExports.jsxs("div",{className:"tasks__mission",children:[jsxRuntimeExports.jsxs("div",{className:"tasks__title",children:[jsxRuntimeExports.jsx("div",{className:"tasks__title-first",children:G(_)}),jsxRuntimeExports.jsx("div",{className:"tasks__title-first",children:d!=="onboarding"&&jsxRuntimeExports.jsx(TaskCountdown,{deadline:v.deadline})})]}),d!=="onboarding"&&jsxRuntimeExports.jsx(MissionProgressBar,{value:v.rewards.value?v.rewards.value:0,max:v.rewards.maxPoints,points:v.rewards.checkPoints,onClaimReward:async re=>await ie(d,re)})]}),jsxRuntimeExports.jsx("div",{className:"tasks__element",children:v.tasks.map(re=>jsxRuntimeExports.jsx(TaskElement,{type:d,item:re,isLoading:Y[re.taskId],onClaimTask:()=>se(d,re.taskId),setIsShareTaskOpen:R},re.taskId))})]})},Tasks=()=>{const{t:_}=useTranslation(),[d,v]=reactExports.useState(),[A,C]=reactExports.useState({id:"-1",collectionId:""}),[w,T]=reactExports.useState(),[R,G]=reactExports.useState(),[I,z]=reactExports.useState(!1),{onUserUpdate:H}=useAppState(),Y=reactExports.useCallback(async()=>{const se=await firebaseService.getUser(firebaseService.user.uid);v(se.caps_tasks),await H()},[v,H]);useBackClick(()=>{C({id:"-1",collectionId:""})},A.id!=="-1"),reactExports.useEffect(()=>{Y()},[Y]);const ie=reactExports.useRef(null),oe=reactExports.useRef(null);return reactExports.useEffect(()=>{const se=ie.current;if(se===null||!oe.current)return;const re=throttle(()=>oe.current?.slideNext(),400),fe=throttle(()=>oe.current?.slidePrev(),400),ue=ge=>{const ye=ge.deltaX;Math.abs(ye)>10&&(ye>0?re():fe())};return se.addEventListener("wheel",ue),()=>{se.removeEventListener("wheel",ue)}},[ie.current]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"tasks",ref:ie,children:jsxRuntimeExports.jsxs(Swiper,{slidesPerView:"auto",onSwiper:se=>oe.current=se,children:[jsxRuntimeExports.jsx(SwiperSlide,{children:d?.daily&&jsxRuntimeExports.jsx(TaskBlock,{title:"tasks.daily",type:"daily",tasksGd:d.daily,onSetGumReward:T,onSetPackProps:C,onTaskClaimed:Y,onSetBoosters:G,setIsShareTaskOpen:z})}),jsxRuntimeExports.jsx(SwiperSlide,{children:d?.weekly&&jsxRuntimeExports.jsx(TaskBlock,{title:"tasks.weekly",type:"weekly",tasksGd:d.weekly,onSetGumReward:T,onSetPackProps:C,onTaskClaimed:Y,onSetBoosters:G,setIsShareTaskOpen:z})}),jsxRuntimeExports.jsx(SwiperSlide,{children:d?.onboarding&&jsxRuntimeExports.jsx(TaskBlock,{title:"tasks.onboarding",type:"onboarding",tasksGd:d?.onboarding,onSetGumReward:T,onSetPackProps:C,onTaskClaimed:Y,onSetBoosters:G,setIsShareTaskOpen:z})})]})}),jsxRuntimeExports.jsx(NavBar,{}),A.id!=="-1"&&jsxRuntimeExports.jsx(Pack,{...A,onFinished:()=>C({...A,id:"-1"})}),jsxRuntimeExports.jsx(GumReward,{isShow:!!w,reward:w,onClose:()=>T(void 0)}),jsxRuntimeExports.jsx(PurchaseBoostersInfo$1,{okText:_("tasks.okBack"),isShow:!!R,userBoosters:R,onComplete:()=>G(void 0)}),jsxRuntimeExports.jsx(ShareStoryTask,{onComplete:()=>z(!1),isShow:I})]})},lightningImage="/icons/lightning-color.png",gumLoseImage="/icons/gum-lose.png",PveResult=({result:_={isWin:!0,reward:{type:"coins",coins:200},newBalance:2e3},onComplete:d,onTryAgain:v,isShow:A,isEnergyEnough:C})=>{const{t:w}=useTranslation(),T=useNavigate(),{appState:R}=useAppState(),[G,I]=reactExports.useState(!1),{onUserUpdate:z}=useAppState(),[H]=useAtom(tutorialAtom),Y=useAction(nextTutorialAction),ee=useAction(fetchUnfinishedGamesAction),ie=async()=>{I(!0),await z(),await ee(),I(!1),d()},oe=()=>{tutorialService.completeTutorialStep("pve_level_completed",firebaseService.token,R.user),T("/home"),Y()};return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${A?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${A?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:w(_.isWin?"pve.win":"pve.lose")}),jsxRuntimeExports.jsx("div",{className:`pve-battle__result-gems ${_.isWin?"pve-battle__result-gems--3":"pve-battle__result-gems--1"}`,children:_.isWin?jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumWinImage,alt:"gem"}):jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gem",src:gumLoseImage,alt:"gem"})}),_.isWin?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:[w("pve.yourReward"),": +",_.reward?.coins?formatNumber(_.reward.coins):0," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-total",children:[w("pve.totalScore"),": ",formatNumber(_.newBalance)]}),C&&H===!1?jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,isLoading:G,onClick:ie,children:w("pve.nextLevel")}):jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,isLoading:G,onClick:oe,children:w("pve.goHome")})]}):jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:oe,variant:"secondary",fullWidth:!0,children:w("pve.goHome")}),C&&jsxRuntimeExports.jsx(Button,{onClick:()=>v(),fullWidth:!0,children:w("pve.tryAgain")})]})]})})},factionArrowsImage="/icons/faction-arrows.png",convertToPercent=_=>`+${(_??0)*100}%`,PveFactionsBottomSheet=({onClose:_,isShow:d})=>{const{t:v}=useTranslation(),{appState:A}=useAppState();return reactDomExports.createPortal(jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:_,isShow:d,children:jsxRuntimeExports.jsxs("div",{className:"pve-factions-bottom-sheet",children:[jsxRuntimeExports.jsxs("div",{className:"pve-factions-bottom-sheet__circle",children:[jsxRuntimeExports.jsx("img",{className:"pve-factions-bottom-sheet__arrows",src:factionArrowsImage,alt:"arrows"}),jsxRuntimeExports.jsxs("div",{className:"pve-factions-bottom-sheet__battle",children:[jsxRuntimeExports.jsx("img",{className:"pve-factions-bottom-sheet__battle-image",alt:"pvp",src:battleImage}),jsxRuntimeExports.jsx("div",{className:"pve-factions-bottom-sheet__battle-title",children:v("pve.factionsAttackBoost")})]}),A.pveGd?.factions.map((C,w)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`pve-factions-bottom-sheet__domination pve-factions-bottom-sheet__domination--${w+1}`,children:convertToPercent(C.dominations[0].domination)}),jsxRuntimeExports.jsx("div",{className:`pve-factions-bottom-sheet__faction-wrapper pve-factions-bottom-sheet__faction-wrapper--${w+1}`,children:jsxRuntimeExports.jsx("img",{className:"pve-factions-bottom-sheet__faction-img",src:`/icons/${C.icon}`,alt:"faction"})})]},"pve-factions-bottom-sheet"+w))]}),jsxRuntimeExports.jsx("div",{className:"pve-factions-bottom-sheet__title",children:v("pve.factionsTitle")}),jsxRuntimeExports.jsx("div",{className:"pve-factions-bottom-sheet__description",children:v("pve.factionsDescription1")}),jsxRuntimeExports.jsx("div",{className:"pve-factions-bottom-sheet__description",children:v("pve.factionsDescription2")})]})}),document.getElementById("root"))},PveFactionsBlock=({factions:_,isBuff:d})=>{const{t:v}=useTranslation(),{appState:A}=useAppState(),[C,w]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"pve-factions-block",onClick:()=>w(!0),children:[jsxRuntimeExports.jsx("div",{className:"pve-factions-block__images",children:_.map((T,R)=>T?jsxRuntimeExports.jsx("img",{className:"pve-factions-block__img",src:`/icons/${T.icon}`,alt:"faction"},T.icon+R):null)}),jsxRuntimeExports.jsx("div",{className:"pve-factions-block__title",children:d?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[v("pve.power"),jsxRuntimeExports.jsx("span",{children:convertToPercent(A.pveGd?.fullCollectionBuff)})]}):v("pve.factions")}),jsxRuntimeExports.jsx(PveFactionsBottomSheet,{isShow:C,onClose:()=>w(!1)})]})},PveExitDialog=({onNo:_,goToPve:d,isShow:v,isEnergyEnough:A,battleId:C})=>{const{t:w}=useTranslation(),[T,R]=reactExports.useState(!1),{onUserUpdate:G}=useAppState(),I=useNavigate(),z=useAction(fetchUnfinishedGamesAction),H=async()=>{R(!0),await capsService.endBattle(C,firebaseService.token),await G(),await z(),A?d():I("/home"),R(!1)};return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${v?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${v?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:w("pve.leaveQuestion")}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:H,variant:"secondary",fullWidth:!0,isLoading:T,className:"madness-exit-dialog__button",children:w("pve.yes")}),jsxRuntimeExports.jsx(Button,{onClick:_,fullWidth:!0,children:w("pve.no")})]})]})})},selectedCapStyle={scale:1.05,boxShadow:"rgb(255, 255, 255) 0px 0px 17px 3px",zIndex:4},initialCapStyle={scale:1,boxShadow:"0 0 0px 0 #fff"},rootEl=document.querySelector("#root"),offsets=[[0,-1,-1],[1,0,-1],[1,1,0]],getOffsetUp=(_,d,v)=>{const A=offsets[_][d]*60,C=v.left-rootEl.getBoundingClientRect().left+offsets[_][d]*v.width/3,w=-offsets[_][d]*45+"deg";return{x:A,left:C,rotate:w}},getOffsetDown=(_,d,v)=>{const A=offsets[_][d]*60,C=v.left-rootEl.getBoundingClientRect().left+offsets[_][d]*v.width/3,w=offsets[_][d]*45+"deg";return{x:A,left:C,rotate:w}},getDominationClass=(_,d,v)=>{const A=getFactionFromCap(_,v),C=A?.dominations[0].faction,w=getFactionFromCap(d,v)?.name;return C===w?A?.name?.toLowerCase():void 0};function showHeartDiff(_,d){d.start({from:{left:_.left-rootEl.getBoundingClientRect().left,top:`${_.top}px`,transform:"translateY(calc(-100% - 5px))"},to:async v=>{await v({opacity:1,transform:"translateY(calc(-100% - 30px))",config:{duration:700,easing:A=>A*(2-A)}}),await v({opacity:0,transform:"translateY(calc(-100% - 60px))",config:{duration:800}})}})}function getNextFromCap(_){return _.battle.state.caps.findIndex((d,v)=>d.health>0&&_.battle.state.attacked.indexOf(v)===-1)}function getNextToCap(_){return _.battle.state.enemies[_.attackTo]?.health>0?_.attackTo:_.battle.state.enemies.findIndex(d=>d.health>0)}const config={tension:280,friction:20,mass:.05,precision:1},useBattle=({battleState:_})=>{const[d,v]=useSprings(3,()=>({from:{...initialCapStyle,x:0,y:0,filter:"grayscale(0%)",zIndex:0},config}),[]),[A,C]=useSprings(3,()=>({from:{...initialCapStyle,x:0,y:0,filter:"grayscale(0%)",zIndex:0},to:{x:0,y:0,scale:1,filter:"grayscale(0%)"},config}),[]),[w,T]=useSprings(2,()=>({from:{left:0,top:0,scale:0,rotate:"0deg"}}),[]),[R,G]=reactExports.useState({value:0}),[I,z]=useSpring(()=>({from:{left:0,top:"25px",opacity:0,translateX:"-30%",transform:"translateY(calc(-100% - 10px))"},config:{duration:1e3}}));return reactExports.useEffect(()=>{CapsWebApp.playSound("pve/start.mp3")},[]),reactExports.useEffect(()=>{C.start(H=>({...initialCapStyle,...H===_.attackFrom?selectedCapStyle:{},immediate:!0})),v.start(H=>({...initialCapStyle,...H===_.attackTo?selectedCapStyle:{},immediate:!0}))},[_.attackFrom,_.attackTo]),{enemiesSprings:d,enemiesApi:v,mySprings:A,myApi:C,explosionSpring:w,explosionApi:T,healthDiff:R,setHealthDiff:G,healthDiffSpring:I,healthDiffApi:z}},PveBoostersBottomSheet=({isShow:_,onClose:d,onSelected:v,battleId:A})=>{const{t:C}=useTranslation(),{setPopup:w}=reactExports.useContext(PopupContext),{appState:T}=useAppState(),R=reactExports.useMemo(()=>{const ge=T.user?.inventory?.boosters??[],ye=T.packCollections.filter(be=>be.type=="boosters"&&be.status=="sale");return ALL_BOOSTERS.map(be=>{const ve=ge.find(Be=>Be.boosterId==be),Me=ye.find(Be=>Be.booster?.id==be),we=Me?getPrice(Me,0):null;return{id:be,count:ve?.count||null,boosterPack:Me,price:we,buyCount:Me?.booster?.count}})},[T.user,T.packCollections]),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState(!1),[Y,ee]=reactExports.useState(!1),{buyPack:ie}=useBuy({pack:G?.boosterPack}),oe=async()=>{if(H(!0),G?.count===null&&G.price)await ie(G.id,G.price.value,G.price.type),I({...G,count:G.price.value});else if(G)try{const ge=await capsService.applyBooster(A,G.id,firebaseService.token);H(!1),I(void 0),v(ge)}catch(ge){w({message:ge?.message??ge??"Error",type:"error"}),H(!1)}H(!1)},se=ge=>{!ge.count||ge.count<=0,I(ge)},re=reactExports.useMemo(()=>C(G?`boosters.${G.id}-description`:"boosters.description"),[G,C]),fe=reactExports.useMemo(()=>G?.count===null?C("pve.buyBoosterButton",{price:G.price?.text,count:G.buyCount}):C("madness.choose"),[G,C]),ue=reactExports.useMemo(()=>G?.count===null?G.price?.value&&T.coinsBalance&&G.price?.type==="forCoins"?G.price.value>=T.coinsBalance:!1:!G,[T.coinsBalance,G]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:d,isShow:_,children:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"pve-boosters-bottom-sheet__title",children:C("pve.boosters")}),jsxRuntimeExports.jsx("div",{className:"pve-boosters-bottom-sheet__description",children:re}),jsxRuntimeExports.jsx("div",{className:"pve-boosters-bottom-sheet__bonus-list",children:R.map(ge=>jsxRuntimeExports.jsxs("div",{onClick:()=>se(ge),className:`madness-bonus-select__wrapper ${G?.id===ge.id?"madness-bonus-select__cap-wrapper--select":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-boosters-bottom-sheet__bonus-wrapper-image",children:jsxRuntimeExports.jsx("img",{className:"pve-boosters-bottom-sheet__bonus-image",src:"/icons/booster-"+ge.id+".png",alt:ge.id})}),ge.count?jsxRuntimeExports.jsxs("div",{className:"pve-boosters-bottom-sheet__img pve-boosters-bottom-sheet__number",children:["x",ge.count]}):jsxRuntimeExports.jsx("img",{className:"pve-boosters-bottom-sheet__img",src:plusImage$1,alt:"plus"}),jsxRuntimeExports.jsx("div",{className:"pve-boosters-bottom-sheet__name",children:C(`boosters.${ge.id}`)})]},"booster"+ge.id))}),jsxRuntimeExports.jsx("div",{className:"pve-battle__button",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:oe,isLoading:z,disabled:ue,color:G?.count?"green":"red",children:fe})})]})}),Y&&G?.boosterPack&&jsxRuntimeExports.jsx(PackCollection,{pack:G.boosterPack,seasonPrice:!1,onBack:()=>ee(!1)})]})},PveBoostersBlock=({battleId:_,onBoosterSelected:d})=>{const{t:v}=useTranslation(),[A,C]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("div",{className:"pve-boosters-block",onClick:()=>C(!0),children:[jsxRuntimeExports.jsx("div",{className:"pve-factions-block__images",children:jsxRuntimeExports.jsx("img",{className:"pve-boosters-block__img",src:"/icons/boosters.png",alt:"booster"})}),jsxRuntimeExports.jsx("div",{className:"pve-factions-block__title",children:v("pve.boosters")}),jsxRuntimeExports.jsx(PveBoostersBottomSheet,{isShow:A,battleId:_,onClose:()=>C(!1),onSelected:w=>{C(!1),d(w)}})]})},pveBattleReducer$1=(_,d)=>{switch(d.type){case"attack-started":return{..._,phase:"attack-started"};case"attack":{const v=_.battle;v.state=d.payload.pendingAttack.newBattleState;const A=v.state.caps.filter(T=>T.health>0).length<=v.state.attacked.length,C=getNextFromCap(_),w=getNextToCap(_);return A&&(_.attackCapsSelected=[C,w]),{..._,battleResult:d.payload.battleResult,battle:v,attackFrom:getNextFromCap(_),attackTo:getNextToCap(_),phase:A?"attack-finished":"attack"}}case"before-counter-attack-started":{const v=_.battle;return v.state.attacked=[],{..._,battle:v,phase:"counter-attack-started"}}case"counter-attack-started":{const v=_.battle;return v.state=d.payload.newBattleState,{..._,battleResult:d.payload.battleResult,battle:v,phase:d.payload.battleResult?"finished":"counter-attack-started"}}case"counter-attack-finished":return _.attackFrom=_.attackCapsSelected[0],_.attackTo=_.attackCapsSelected[1],_.attackFrom=getNextFromCap(_),_.attackTo=getNextToCap(_),{..._,battleResult:d.payload.battleResult,phase:_.battleResult?"finished":"counter-attack-finished"};case"deselect-caps":return{..._,attackFrom:-1,attackTo:-1};case"attack-from":return{..._,attackFrom:d.cap};case"attack-to":return{..._,attackTo:d.cap};case"booster-selected":{const v=_.battle;return v.state=d.payload.afterBooster,v.status="attack",{..._,battle:v,attackTo:-1,attackFrom:-1,phase:"attack"}}default:return _}},PveBattle=({level:_,...d})=>{const{t:v}=useTranslation(),{appState:A,onUserUpdate:C}=useAppState(),{setPopup:w}=reactExports.useContext(PopupContext),T=reactExports.useRef([]),R=reactExports.useRef([]),[G]=useAtom(tutorialAtom),[I,z]=reactExports.useState(G==="pve"),[H,Y]=reactExports.useReducer(pveBattleReducer$1,{attackFrom:-1,attackTo:-1,battle:d.battle,phase:"initial",attackCapsSelected:[-1,-1]}),[ee,ie]=reactExports.useState(1),[oe,se]=reactExports.useState(!1),{energy:re}=useEnergy({userEnergy:A.user?.caps_energy,energyGd:A.capsGd?.energy}),fe=re>=(A.pveGd?.launchEnergyPrice??0),{enemiesSprings:ue,enemiesApi:ge,mySprings:ye,myApi:be,explosionSpring:ve,explosionApi:Me,healthDiff:we,setHealthDiff:Be,healthDiffSpring:De,healthDiffApi:Fe}=useBattle({battleState:H}),Oe=reactExports.useCallback(()=>{se(!0)},[se]);useBackClick(Oe);const Ge=(We,nt)=>{switch(We){case"enemy":{if(H.battle.state.enemies[nt].health<=0)return;const Qt=H.attackTo==nt?-1:nt;Y({type:"attack-to",cap:Qt});break}case"my":{if(H.battle.state.caps[nt].health<=0)return;const Qt=H.attackFrom==nt?-1:nt;Y({type:"attack-from",cap:Qt});break}}},ze=async()=>{I&&z(!1),Y({type:"attack-started"});const We=capsService.attack(d.battle.id,H.attackFrom,H.attackTo,firebaseService.token),nt=getDominationClass(H.battle.state.caps[H.attackFrom],H.battle.state.enemies[H.attackTo],A.pveGd),Qt=R.current[H.attackFrom].getBoundingClientRect(),Wt=T.current[H.attackTo].getBoundingClientRect(),Bn=document.querySelectorAll(".pve-level-caps-list__icon--heart")[H.attackTo].getBoundingClientRect(),Lt=Wt.left-Qt.left,Mn=Wt.bottom-Qt.top,{x:cr,left:In,rotate:Zn}=getOffsetUp(H.attackFrom,H.attackTo,Wt);be.start($n=>{if($n===H.attackFrom)return{to:async Rn=>{Me.start(Dn=>{if(Dn!==1)return{from:{left:In,top:Wt.height-Wt.width/4,scale:0,rotate:Zn},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await Rn({x:cr+Lt,y:Mn-Wt.height/3,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-my-to-enemy.mp3"),await Rn({x:0,y:0,scale:1,filter:"grayscale(100%)",boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),Me.start(Dn=>{if(Dn!==1)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),We.then(Dn=>{Be({value:Dn.attack.newHealth-H.battle.state.enemies[H.attackTo].health,dominationFaction:nt}),console.log("animation attack: "+Dn.attack.from+">>>"+Dn.attack.to),Dn.attack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),Dn.battleResult&&CapsWebApp.playSound("pve/win.mp3"),Y({type:"attack",payload:{pendingAttack:{attack:Dn.attack,newBattleState:Dn.afterAttack},battleResult:Dn.battleResult}}),Bn&&showHeartDiff(Bn,Fe),setTimeout(()=>{ge.start(Gt=>{if(Gt===H.attackTo)return{to:{zIndex:0}}})},1e3)})}}})};reactExports.useEffect(()=>{H.phase==="attack-finished"&&je()},[H.phase]);const je=async()=>{Y({type:"before-counter-attack-started"}),be.start({to:{filter:"grayscale(0%)"}});try{const We=await capsService.counterAttack(d.battle.id,firebaseService.token);if(We.attacks.length==0){Y({type:"counter-attack-finished",payload:{}});return}for(const[nt,Qt]of We.attacks.entries()){const Wt=getDominationClass(H.battle.state.enemies[Qt.counterAttack.from],H.battle.state.caps[Qt.counterAttack.to],A.pveGd);console.log("animation counter attack: "+Qt.counterAttack.from+">>>"+Qt.counterAttack.to);const Bn=Qt.counterAttack.from,Lt=Qt.counterAttack.to;Ge("enemy",Bn),Ge("my",Lt);const Mn=T.current[Bn].getBoundingClientRect(),cr=R.current[Lt].getBoundingClientRect(),In=document.querySelectorAll(".pve-level-caps-list__icon--heart")[H.battle.state.enemies.length+Lt].getBoundingClientRect(),Zn=cr.left-Mn.left,$n=cr.top-Mn.top,{x:Rn,left:Dn,rotate:Gt}=getOffsetDown(Bn,Lt,cr);ie(2),ge.start(Jn=>{if(Jn===Bn)return{to:async Nn=>{Me.start(Xn=>{if(Xn!==0)return{from:{left:Dn,top:cr.top,scale:0,rotate:Gt},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await Nn({x:Rn+Zn,y:$n-cr.height/2,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-enemy-to-my.mp3"),await Nn({x:0,y:0,scale:1,boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),Me.start(Xn=>{if(Xn!==0)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),Y({type:"deselect-caps"}),Be({value:Qt.counterAttack.newHealth-H.battle.state.caps[Lt].health,dominationFaction:Wt}),Qt.counterAttack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),Y({type:"counter-attack-started",payload:{newBattleState:Qt.afterCounterAttack}}),In&&showHeartDiff(In,Fe),be.start({to:{zIndex:0}}),ge.start({to:{zIndex:0}}),nt===We.attacks.length-1&&(We.battleResult&&CapsWebApp.playSound("pve/losing.mp3"),Y({type:"counter-attack-finished",payload:{battleResult:We.battleResult}}),ie(1))}}}),await wait(1e3)}}catch(We){console.error("counter-attack",We)}},He=We=>{["initial","attack","counter-attack-finished"].includes(H.phase)&&H.battle.state.enemies[We].health>0&&(Ge("enemy",We),CapsWebApp.playSound("pve/select-enemy-cap.mp3"))},Xe=We=>{["initial","attack","counter-attack-finished"].includes(H.phase)&&H.battle.state.attacked.indexOf(We)===-1&&(Ge("my",We),CapsWebApp.playSound("pve/select-my-cap.mp3"))},$e=We=>{C(),Y({type:"booster-selected",payload:We})};return jsxRuntimeExports.jsx("div",{className:`pve-level__wrapper ${I?"tutorial__dimmer tutorial__dimmer--absolute":"tutorial__dimmer--no-bg"}`,children:jsxRuntimeExports.jsxs("div",{className:"pve-battle",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level__title",children:[v("pve.enemyTitle"),jsxRuntimeExports.jsxs("span",{className:"pve-level__gems",children:["+",_.rewards.forWin.coins?formatNumber(_.rewards.forWin.coins):0,jsxRuntimeExports.jsx("img",{className:"pve-caps-block__gem",src:gumImage$2,alt:"gem"})]})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",style:{zIndex:ee},children:[H.battle.state.enemies.map((We,nt)=>jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${I&&nt===0&&H.attackFrom===0&&H.attackTo!==0?"pve-battle__cap-wrapper--tutorial":""}`,children:[I&&nt===0&&H.attackFrom===0&&H.attackTo!==0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-level-caps-list__finger",alt:"finger"}),jsxRuntimeExports.jsx(CapElement,{isRemoved:We.health<=0,variant:"pve-small",cap:We,selectedNumber:H.phase!=="attack-finished"&&H.attackTo==nt?1:void 0,ref:Qt=>{T.current[nt]=Qt},style:ue[nt],onClickCallback:()=>He(nt)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",We.health]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${d.isEnemyBuff?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom(We,A.capsGd,A.pveGd,d.isEnemyBuff),"-",getCapPvePowerTo(We,A.capsGd,A.pveGd,d.isEnemyBuff)]})]})]},"enemy"+We.url+nt)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:ve[0],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__center",children:[jsxRuntimeExports.jsx(PveBoostersBlock,{battleId:d.battle.id,onBoosterSelected:$e}),jsxRuntimeExports.jsx(PveFactionsBlock,{factions:H.battle.state.caps.map(We=>getFactionFromCap(We,A.pveGd)),isBuff:d.isBuff})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",children:[H.battle.state.caps.map((We,nt)=>jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${I&&nt===0&&H.attackFrom!==0?"pve-battle__cap-wrapper--tutorial":""}`,children:[I&&nt===0&&H.attackFrom!==0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-level-caps-list__finger",alt:"finger"}),jsxRuntimeExports.jsx(CapElement,{isRemoved:We.health<=0,variant:"pve-small",cap:We,style:ye[nt],ref:Qt=>{R.current[nt]=Qt},className:`${H.battle.state.attacked.indexOf(nt)!==-1?"cap__element--removed":""}`,selectedNumber:H.attackFrom==nt?1:void 0,onClickCallback:()=>Xe(nt)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",We.health]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${d.isBuff?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom(We,A.capsGd,A.pveGd,d.isBuff),"-",getCapPvePowerTo(We,A.capsGd,A.pveGd,d.isBuff)]})]})]},"my"+We.url+nt)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:ve[1],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsx(animated.div,{style:De,className:`pve-battle__health-tooltip ${we.dominationFaction?`pve-battle__health-tooltip--${we.dominationFaction}`:""}`,children:we.value}),jsxRuntimeExports.jsxs("div",{className:`pve-battle__button ${I&&H.attackFrom===0&&H.attackTo===0?"pve-battle__button--tutorial":""}`,children:[I&&H.attackFrom===0&&H.attackTo===0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-battle__finger",alt:"finger"}),(H.phase=="initial"||H.phase=="attack-started"||H.phase=="counter-attack-finished"||H.phase=="attack")&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:ze,disabled:H.phase=="attack-started"||H.attackFrom<0||H.attackTo<0,children:v("pve.battle")})]}),jsxRuntimeExports.jsx(PveResult,{result:H.battleResult,onComplete:d.onComplete,onTryAgain:d.onTryAgain,isShow:!!H.battleResult,isEnergyEnough:fe}),jsxRuntimeExports.jsx(PveExitDialog,{isShow:oe,onNo:()=>se(!1),goToPve:d.onBack,isEnergyEnough:fe,battleId:d.battle.id})]})})},PveLevelCapsList=({squadSize:_,battleCaps:d,selectedCaps:v,onSelect:A,isCollectionBuff:C})=>{const{appState:w}=useAppState(),[T]=useAtom(tutorialAtom),R=!v,G=Array(_).fill(0);return jsxRuntimeExports.jsx("div",{className:"pve-level-caps-list",children:G.map((I,z)=>{const H=z<d.length?d[z]:d[0],Y=!R&&v.get(z),ee=!R&&Y?Y:H,ie=ee?ee.health??getCapPveHp(ee,w.pveGd):-1;return jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${T==="pve"&&!Y&&!R&&z===0?"upgrade__resources-cap--my-first":""}`,children:[!R&&!Y&&jsxRuntimeExports.jsx("img",{src:plusImage$2,className:"upgrade__resources-cap__plus",alt:"plus"}),!R&&!Y?jsxRuntimeExports.jsx("div",{className:"cap__element--small pve-level-caps-list__cap",onClick:()=>A?.(z),children:jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"cap__img"})}):jsxRuntimeExports.jsx(CapElement,{variant:"pve-small",className:!Y&&!R?"upgrade__empty-slot":"",cap:ee,onClickCallback:()=>A?.(z)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[" ",T==="pve"&&!Y&&!R&&z===0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-level-caps-list__finger",alt:"finger"}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:heartImage,alt:"heart"}),R||!R&&Y?ie:"..."]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${C?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),R||!R&&Y?`${getCapPvePowerFrom(ee,w.capsGd,w.pveGd,C)}-${getCapPvePowerTo(ee,w.capsGd,w.pveGd,C)}`:"..."]})]})]},z)})})},MAX_CAPS$1=3,PveLevel=({level:_,...d})=>{const[v]=useAtom(unfinishedPveGameAtom),{t:A}=useTranslation(),{appState:C,onCheckEnergyAndUserUpdate:w}=useAppState(),[T,R]=reactExports.useState({selectingCap:-1,selectedCaps:new Map,battle:v}),[G,I]=reactExports.useState(!1),{setPopup:z}=reactExports.useContext(PopupContext),[H]=useAtom(tutorialAtom),Y=reactExports.useCallback(()=>{T.selectingCap===-1&&!T.battle&&d.onBackPressed()},[d,T.battle,T.selectingCap]);useBackClick(Y);const ee=reactExports.useCallback(async()=>{if(I(!0),tutorialService.completeTutorialStep("pve_level_game_started",firebaseService.token,C.user),C.user?.isDisabledForeignNfts&&!await checkMintersInNftCaps(C.user,Array.from(T.selectedCaps.values()))){I(!1),z({message:A("pve.onlyMinters"),type:"error"});return}const fe=await capsService.newBattle(_.levelNum-1,Array.from(T.selectedCaps.values()),firebaseService.token);await w(),R({...T,battle:fe}),I(!1)},[C.user,_.levelNum,T,w,z,A]);if(T.selectingCap>-1){const fe=["READY","STAKED","SALE","WAITING","NFT_EDITING"];return jsxRuntimeExports.jsx("div",{className:`game pve-level__select-cap-wrapper ${H==="pve"?"tutorial__dimmer tutorial__dimmer--absolute":""}`,children:jsxRuntimeExports.jsx(BattleGameBid,{mainAction:A("battle.next"),onBackPressed:()=>R({...T,selectingCap:-1}),filter:ue=>![...T.selectedCaps].find(ge=>ge[1].id===ue.id)&&fe.includes(ue.status),isPve:!0,maxBid:MAX_CAPS$1,setBidCallback:ue=>{const ge=T.selectedCaps;ue.forEach((ye,be)=>{ge.set((T.selectingCap+be)%MAX_CAPS$1,ye)}),R({...T,selectingCap:-1,selectedCaps:ge})}})})}const ie=isFullCollectionBuff({caps:_.enemies}),oe=isFullCollectionBuff({caps:T.selectedCaps&&Array.from(T.selectedCaps.values())});if(T.battle)return jsxRuntimeExports.jsx(PveBattle,{battle:T.battle,level:_,onComplete:d.onComplete,onTryAgain:()=>R({...T,battle:void 0}),isBuff:oe,isEnemyBuff:ie,onBack:d.onBackPressed});const se=[...T.selectedCaps.values()].map(fe=>getFactionFromCap(fe,C.pveGd)),re=T.selectedCaps.size!==3;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:`pve-level__wrapper ${H==="pve"?"tutorial__dimmer tutorial__dimmer--absolute":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"pve-level__title",children:[A("pve.enemyTitle"),jsxRuntimeExports.jsxs("span",{className:"pve-level__gems",children:["+",_.rewards.forWin.coins?formatNumber(_.rewards.forWin.coins):0,jsxRuntimeExports.jsx("img",{className:"pve-caps-block__gem",src:gumImage$2,alt:"gem"})]})]}),jsxRuntimeExports.jsx(PveLevelCapsList,{squadSize:_.enemies.length,battleCaps:_.enemies,isCollectionBuff:ie}),jsxRuntimeExports.jsx("div",{className:"pve-battle__center"}),jsxRuntimeExports.jsxs("div",{className:"pve-level__bottom",children:[jsxRuntimeExports.jsx("div",{className:"pve-level__battle",children:jsxRuntimeExports.jsx("img",{src:battleImage,alt:"battle"})}),jsxRuntimeExports.jsx("div",{className:"pve-level__bottom-title",children:C.pveGd&&jsxRuntimeExports.jsx(PveFactionsBlock,{factions:se.length>0?se:C.pveGd.factions,isBuff:oe})}),jsxRuntimeExports.jsx(PveLevelCapsList,{squadSize:USER_CAPS_COUNT,battleCaps:_.enemies,selectedCaps:T.selectedCaps,onSelect:fe=>R({...T,selectingCap:fe}),isCollectionBuff:oe}),jsxRuntimeExports.jsxs(Button,{isLoading:G,className:`pve-level__button ${H==="pve"&&!re?"pve-level__button--tutorial":""}`,onClick:ee,disabled:re,children:[A("pve.startBattle"),H==="pve"&&!re&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-level__finger",alt:"finger"})]})]})]})})},lockImage="/icons/lock.png",completedImage="/icons/completed.png",PveCapsBlockSkeleton=({className:_})=>jsxRuntimeExports.jsx("div",{className:`battle__game-caps pve-caps-block pve-caps-block--skeleton game-caps-list--skeleton ${_??""}`,children:jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__game-caps",children:[jsxRuntimeExports.jsxs("div",{className:"game-caps-list__first",children:[jsxRuntimeExports.jsx("div",{className:"game-caps-list__title"}),jsxRuntimeExports.jsx("div",{className:"pve-caps-block__gems"})]}),jsxRuntimeExports.jsxs("div",{className:"game-caps-list__caps",children:[jsxRuntimeExports.jsx(CapElementSkeleton,{className:"game-caps-list__cap",size:"small"}),jsxRuntimeExports.jsx(CapElementSkeleton,{className:"game-caps-list__cap",size:"small"}),jsxRuntimeExports.jsx(CapElementSkeleton,{className:"game-caps-list__cap",size:"small"})]})]})}),PveCapsBlock=({userLevel:_,level:d,onSelect:v,className:A})=>{const{appState:C}=useAppState(),{t:w}=useTranslation(),T=_<d.levelNum,R=_>d.levelNum,G=_===d.levelNum,[I]=useAtom(tutorialAtom);return jsxRuntimeExports.jsxs("div",{className:`battle__game-caps pve-caps-block ${G?"pve-caps-block--current":""} ${A??""}`,children:[I==="pve"&&G&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-caps-block__finger",alt:"finger"}),jsxRuntimeExports.jsxs("div",{className:`pve-caps-block__game-caps ${G?"pve-caps-block__game-caps--active":""} ${T?"pve-caps-block__game-caps--locked":""}`,onClick:v,children:[jsxRuntimeExports.jsxs("div",{className:`pve-caps-block__first ${G?"pve-caps-block__first--active":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__title",children:[w("pve.level")," ",d.levelNum,T?jsxRuntimeExports.jsx("img",{className:"pve-caps-block__lock",src:lockImage,alt:"lock"}):""," "]}),!R&&jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__gems",children:["+",d.rewards.forWin.coins?formatNumber(d.rewards.forWin.coins):0," ",jsxRuntimeExports.jsx("img",{className:"pve-caps-block__gem",src:gumImage$2,alt:"gem"})]})]}),jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__caps",children:[d.enemies.map((z,H)=>jsxRuntimeExports.jsx(CapElement,{className:R?"game-caps-list__cap pve-caps-block__cap--gray":"game-caps-list__cap",cap:z,variant:"pve-small"},`level-${d.levelNum}-${H}`)),R&&jsxRuntimeExports.jsx("img",{className:"pve-caps-block__completed",src:completedImage,alt:"completed"})]})]})]})},PveCapsBlock$1=reactExports.memo(PveCapsBlock),cassetteImage="/icons/cassette.png",PvE=()=>{const[_]=useAtom(unfinishedPveGameAtom),[d,v]=useStorage("pve"),{setPopup:A}=reactExports.useContext(PopupContext),{loadingState:C,isSkeletonShow:w,isDataShow:T}=useSkeletonLoading({defaultState:"loaded"}),[R,G]=reactExports.useState({selectedLevel:_?{..._.level,levelNum:_.levelNumber+1}:void 0}),{t:I}=useTranslation(),z=useNavigate(),{appState:H,onUserUpdate:Y}=useAppState(),[ee]=useAtom(tutorialAtom),ie=reactExports.useCallback(()=>{R.selectedLevel||z("/home")},[z,R.selectedLevel]);useBackClick(ie);const oe=reactExports.useMemo(()=>H.pveGd?.levels.map((ue,ge)=>({...ue,levelNum:ge+1})).reverse()||[],[H]),se=reactExports.useMemo(()=>H.user?.caps_battle_level==null||H.user.caps_battle_level==-1?1:H.user.caps_battle_level+2,[H]);reactExports.useEffect(()=>{!d&&C==="loaded"&&(A({message:I("pve.firstMessage"),type:"confirm"}),v(!0))},[d,C,v,A,I]),reactExports.useEffect(()=>{Y()},[]),reactExports.useEffect(()=>{if(oe.length>0){const ue=document.querySelector(".pve-caps-block--current"),ge=ue?.parentElement,ye=16;if(ge&&ue){const be=ue.clientHeight*2+ye*4;ge.scrollTo({top:ue.offsetTop-ge.offsetTop-ge.offsetHeight+be})}}},[oe,R]);const re=reactExports.useCallback(async()=>{await capsService.playMusic(firebaseService.token),CapsWebApp.closeApp()},[]),fe=reactExports.useCallback(ue=>{se==ue.levelNum&&G({...R,selectedLevel:ue})},[R,se]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`pve__wrapper ${ee==="pve"&&!R.selectedLevel?"tutorial__dimmer":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve__title",children:I("pve.title")}),jsxRuntimeExports.jsx("div",{className:"pve__cassette",onClick:re,children:jsxRuntimeExports.jsx("img",{src:cassetteImage,alt:"music"})}),jsxRuntimeExports.jsxs("div",{className:"skeleton-wrapper",children:[w&&jsxRuntimeExports.jsx("div",{className:`skeleton pve__levels pve__levels--skeleton battle__game-block fade-out ${C==="skeleton-to-data"?"visible":""} `,children:[...Array(4)].map((ue,ge)=>jsxRuntimeExports.jsx(PveCapsBlockSkeleton,{},ge))}),jsxRuntimeExports.jsx("div",{className:`pve__levels fade-in ${T?"visible":""}`,children:oe.map((ue,ge)=>jsxRuntimeExports.jsx(PveCapsBlock$1,{level:ue,userLevel:se,onSelect:()=>{tutorialService.completeTutorialStep("pve_level_selected",firebaseService.token,H.user),fe(ue)}},"pve-caps-block"+ge))})]})]}),R.selectedLevel&&jsxRuntimeExports.jsx(PveLevel,{level:R.selectedLevel,onBackPressed:()=>G({...R,selectedLevel:void 0}),onComplete:async()=>{G({...R,selectedLevel:void 0})}})]})};var dist={},ga4={},gtag={},hasRequiredGtag;function requireGtag(){return hasRequiredGtag||(hasRequiredGtag=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;var d=function(){for(var C=arguments.length,w=new Array(C),T=0;T<C;T++)w[T]=arguments[T];if(typeof window<"u"){var R;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(R=window).gtag.apply(R,w)}},v=d;_.default=v}(gtag)),gtag}var format={},hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=T;var d=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function v(R){return R.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(G,I,z){return I>0&&I+G.length!==z.length&&G.search(d)>-1&&z.charAt(I-2)!==":"&&(z.charAt(I+G.length)!=="-"||z.charAt(I-1)==="-")&&z.charAt(I-1).search(/[^\s-]/)<0?G.toLowerCase():G.substr(1).search(/[A-Z]|\../)>-1?G:G.charAt(0).toUpperCase()+G.substr(1)})}function A(R){return typeof R=="string"&&R.indexOf("@")!==-1}var C="REDACTED (Potential Email Address)";function w(R){return A(R)?(console.warn("This arg looks like an email address, redacting."),C):R}function T(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,z=R||"";return G&&(z=v(R)),I&&(z=w(z)),z}}(format)),format}var hasRequiredGa4;function requireGa4(){return hasRequiredGa4||(hasRequiredGa4=1,function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=_.GA4=void 0;var d=T(requireGtag()),v=T(requireFormat()),A=["eventCategory","eventAction","eventLabel","eventValue","hitType"],C=["title","location"],w=["page","hitType"];function T(Ge){return Ge&&Ge.__esModule?Ge:{default:Ge}}function R(Ge,ze){if(Ge==null)return{};var je=G(Ge,ze),He,Xe;if(Object.getOwnPropertySymbols){var $e=Object.getOwnPropertySymbols(Ge);for(Xe=0;Xe<$e.length;Xe++)He=$e[Xe],!(ze.indexOf(He)>=0)&&Object.prototype.propertyIsEnumerable.call(Ge,He)&&(je[He]=Ge[He])}return je}function G(Ge,ze){if(Ge==null)return{};var je={},He=Object.keys(Ge),Xe,$e;for($e=0;$e<He.length;$e++)Xe=He[$e],!(ze.indexOf(Xe)>=0)&&(je[Xe]=Ge[Xe]);return je}function I(Ge){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ze){return typeof ze}:function(ze){return ze&&typeof Symbol=="function"&&ze.constructor===Symbol&&ze!==Symbol.prototype?"symbol":typeof ze},I(Ge)}function z(Ge){return ee(Ge)||Y(Ge)||fe(Ge)||H()}function H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y(Ge){if(typeof Symbol<"u"&&Ge[Symbol.iterator]!=null||Ge["@@iterator"]!=null)return Array.from(Ge)}function ee(Ge){if(Array.isArray(Ge))return ue(Ge)}function ie(Ge,ze){var je=Object.keys(Ge);if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(Ge);ze&&(He=He.filter(function(Xe){return Object.getOwnPropertyDescriptor(Ge,Xe).enumerable})),je.push.apply(je,He)}return je}function oe(Ge){for(var ze=1;ze<arguments.length;ze++){var je=arguments[ze]!=null?arguments[ze]:{};ze%2?ie(Object(je),!0).forEach(function(He){we(Ge,He,je[He])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ge,Object.getOwnPropertyDescriptors(je)):ie(Object(je)).forEach(function(He){Object.defineProperty(Ge,He,Object.getOwnPropertyDescriptor(je,He))})}return Ge}function se(Ge,ze){return ye(Ge)||ge(Ge,ze)||fe(Ge,ze)||re()}function re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(Ge,ze){if(Ge){if(typeof Ge=="string")return ue(Ge,ze);var je=Object.prototype.toString.call(Ge).slice(8,-1);if(je==="Object"&&Ge.constructor&&(je=Ge.constructor.name),je==="Map"||je==="Set")return Array.from(Ge);if(je==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(je))return ue(Ge,ze)}}function ue(Ge,ze){(ze==null||ze>Ge.length)&&(ze=Ge.length);for(var je=0,He=new Array(ze);je<ze;je++)He[je]=Ge[je];return He}function ge(Ge,ze){var je=Ge==null?null:typeof Symbol<"u"&&Ge[Symbol.iterator]||Ge["@@iterator"];if(je!=null){var He,Xe,$e,We,nt=[],Qt=!0,Wt=!1;try{if($e=(je=je.call(Ge)).next,ze!==0)for(;!(Qt=(He=$e.call(je)).done)&&(nt.push(He.value),nt.length!==ze);Qt=!0);}catch(Bn){Wt=!0,Xe=Bn}finally{try{if(!Qt&&je.return!=null&&(We=je.return(),Object(We)!==We))return}finally{if(Wt)throw Xe}}return nt}}function ye(Ge){if(Array.isArray(Ge))return Ge}function be(Ge,ze){if(!(Ge instanceof ze))throw new TypeError("Cannot call a class as a function")}function ve(Ge,ze){for(var je=0;je<ze.length;je++){var He=ze[je];He.enumerable=He.enumerable||!1,He.configurable=!0,"value"in He&&(He.writable=!0),Object.defineProperty(Ge,Be(He.key),He)}}function Me(Ge,ze,je){return ze&&ve(Ge.prototype,ze),Object.defineProperty(Ge,"prototype",{writable:!1}),Ge}function we(Ge,ze,je){return ze=Be(ze),ze in Ge?Object.defineProperty(Ge,ze,{value:je,enumerable:!0,configurable:!0,writable:!0}):Ge[ze]=je,Ge}function Be(Ge){var ze=De(Ge,"string");return I(ze)==="symbol"?ze:String(ze)}function De(Ge,ze){if(I(Ge)!=="object"||Ge===null)return Ge;var je=Ge[Symbol.toPrimitive];if(je!==void 0){var He=je.call(Ge,ze);if(I(He)!=="object")return He;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ze==="string"?String:Number)(Ge)}var Fe=function(){function Ge(){var ze=this;be(this,Ge),we(this,"reset",function(){ze.isInitialized=!1,ze._testMode=!1,ze._currentMeasurementId,ze._hasLoadedGA=!1,ze._isQueuing=!1,ze._queueGtag=[]}),we(this,"_gtag",function(){for(var je=arguments.length,He=new Array(je),Xe=0;Xe<je;Xe++)He[Xe]=arguments[Xe];ze._testMode||ze._isQueuing?ze._queueGtag.push(He):d.default.apply(void 0,He)}),we(this,"_loadGA",function(je,He){var Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!ze._hasLoadedGA){var $e=document.createElement("script");$e.async=!0,$e.src="".concat(Xe,"?id=").concat(je),He&&$e.setAttribute("nonce",He),document.body.appendChild($e),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},ze._hasLoadedGA=!0}}),we(this,"_toGtagOptions",function(je){if(je){var He={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},Xe=Object.entries(je).reduce(function($e,We){var nt=se(We,2),Qt=nt[0],Wt=nt[1];return He[Qt]?$e[He[Qt]]=Wt:$e[Qt]=Wt,$e},{});return Xe}}),we(this,"initialize",function(je){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!je)throw new Error("Require GA_MEASUREMENT_ID");var Xe=typeof je=="string"?[{trackingId:je}]:je;ze._currentMeasurementId=Xe[0].trackingId;var $e=He.gaOptions,We=He.gtagOptions,nt=He.nonce,Qt=He.testMode,Wt=Qt===void 0?!1:Qt,Bn=He.gtagUrl;if(ze._testMode=Wt,Wt||ze._loadGA(ze._currentMeasurementId,nt,Bn),ze.isInitialized||(ze._gtag("js",new Date),Xe.forEach(function(cr){var In=oe(oe(oe({},ze._toGtagOptions(oe(oe({},$e),cr.gaOptions))),We),cr.gtagOptions);Object.keys(In).length?ze._gtag("config",cr.trackingId,In):ze._gtag("config",cr.trackingId)})),ze.isInitialized=!0,!Wt){var Lt=z(ze._queueGtag);for(ze._queueGtag=[],ze._isQueuing=!1;Lt.length;){var Mn=Lt.shift();ze._gtag.apply(ze,z(Mn)),Mn[0]==="get"&&(ze._isQueuing=!0)}}}),we(this,"set",function(je){if(!je){console.warn("`fieldsObject` is required in .set()");return}if(I(je)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(je).length===0&&console.warn("empty `fieldsObject` given to .set()"),ze._gaCommand("set",je)}),we(this,"_gaCommandSendEvent",function(je,He,Xe,$e,We){ze._gtag("event",He,oe(oe({event_category:je,event_label:Xe,value:$e},We&&{non_interaction:We.nonInteraction}),ze._toGtagOptions(We)))}),we(this,"_gaCommandSendEventParameters",function(){for(var je=arguments.length,He=new Array(je),Xe=0;Xe<je;Xe++)He[Xe]=arguments[Xe];if(typeof He[0]=="string")ze._gaCommandSendEvent.apply(ze,z(He.slice(1)));else{var $e=He[0],We=$e.eventCategory,nt=$e.eventAction,Qt=$e.eventLabel,Wt=$e.eventValue;$e.hitType;var Bn=R($e,A);ze._gaCommandSendEvent(We,nt,Qt,Wt,Bn)}}),we(this,"_gaCommandSendTiming",function(je,He,Xe,$e){ze._gtag("event","timing_complete",{name:He,value:Xe,event_category:je,event_label:$e})}),we(this,"_gaCommandSendPageview",function(je,He){if(He&&Object.keys(He).length){var Xe=ze._toGtagOptions(He),$e=Xe.title,We=Xe.location,nt=R(Xe,C);ze._gtag("event","page_view",oe(oe(oe(oe({},je&&{page_path:je}),$e&&{page_title:$e}),We&&{page_location:We}),nt))}else je?ze._gtag("event","page_view",{page_path:je}):ze._gtag("event","page_view")}),we(this,"_gaCommandSendPageviewParameters",function(){for(var je=arguments.length,He=new Array(je),Xe=0;Xe<je;Xe++)He[Xe]=arguments[Xe];if(typeof He[0]=="string")ze._gaCommandSendPageview.apply(ze,z(He.slice(1)));else{var $e=He[0],We=$e.page;$e.hitType;var nt=R($e,w);ze._gaCommandSendPageview(We,nt)}}),we(this,"_gaCommandSend",function(){for(var je=arguments.length,He=new Array(je),Xe=0;Xe<je;Xe++)He[Xe]=arguments[Xe];var $e=typeof He[0]=="string"?He[0]:He[0].hitType;switch($e){case"event":ze._gaCommandSendEventParameters.apply(ze,He);break;case"pageview":ze._gaCommandSendPageviewParameters.apply(ze,He);break;case"timing":ze._gaCommandSendTiming.apply(ze,z(He.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat($e));break;default:console.warn("Send command doesn't exist: ".concat($e))}}),we(this,"_gaCommandSet",function(){for(var je=arguments.length,He=new Array(je),Xe=0;Xe<je;Xe++)He[Xe]=arguments[Xe];typeof He[0]=="string"&&(He[0]=we({},He[0],He[1])),ze._gtag("set",ze._toGtagOptions(He[0]))}),we(this,"_gaCommand",function(je){for(var He=arguments.length,Xe=new Array(He>1?He-1:0),$e=1;$e<He;$e++)Xe[$e-1]=arguments[$e];switch(je){case"send":ze._gaCommandSend.apply(ze,Xe);break;case"set":ze._gaCommandSet.apply(ze,Xe);break;default:console.warn("Command doesn't exist: ".concat(je))}}),we(this,"ga",function(){for(var je=arguments.length,He=new Array(je),Xe=0;Xe<je;Xe++)He[Xe]=arguments[Xe];if(typeof He[0]=="string")ze._gaCommand.apply(ze,He);else{var $e=He[0];ze._gtag("get",ze._currentMeasurementId,"client_id",function(We){ze._isQueuing=!1;var nt=ze._queueGtag;for($e({get:function(Bn){return Bn==="clientId"?We:Bn==="trackingId"?ze._currentMeasurementId:Bn==="apiVersion"?"1":void 0}});nt.length;){var Qt=nt.shift();ze._gtag.apply(ze,z(Qt))}}),ze._isQueuing=!0}return ze.ga}),we(this,"event",function(je,He){if(typeof je=="string")ze._gtag("event",je,ze._toGtagOptions(He));else{var Xe=je.action,$e=je.category,We=je.label,nt=je.value,Qt=je.nonInteraction,Wt=je.transport;if(!$e||!Xe){console.warn("args.category AND args.action are required in event()");return}var Bn={hitType:"event",eventCategory:(0,v.default)($e),eventAction:(0,v.default)(Xe)};We&&(Bn.eventLabel=(0,v.default)(We)),typeof nt<"u"&&(typeof nt!="number"?console.warn("Expected `args.value` arg to be a Number."):Bn.eventValue=nt),typeof Qt<"u"&&(typeof Qt!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Bn.nonInteraction=Qt),typeof Wt<"u"&&(typeof Wt!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(Wt)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Bn.transport=Wt)),ze._gaCommand("send",Bn)}}),we(this,"send",function(je){ze._gaCommand("send",je)}),this.reset()}return Me(Ge,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Ge}();_.GA4=Fe;var Oe=new Fe;_.default=Oe}(ga4)),ga4}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(_){function d(R){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},d(R)}Object.defineProperty(_,"__esModule",{value:!0}),_.default=_.ReactGAImplementation=void 0;var v=C(requireGa4());function A(R){if(typeof WeakMap!="function")return null;var G=new WeakMap,I=new WeakMap;return(A=function(H){return H?I:G})(R)}function C(R,G){if(R&&R.__esModule)return R;if(R===null||d(R)!=="object"&&typeof R!="function")return{default:R};var I=A(G);if(I&&I.has(R))return I.get(R);var z={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in R)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(R,Y)){var ee=H?Object.getOwnPropertyDescriptor(R,Y):null;ee&&(ee.get||ee.set)?Object.defineProperty(z,Y,ee):z[Y]=R[Y]}return z.default=R,I&&I.set(R,z),z}var w=v.GA4;_.ReactGAImplementation=w;var T=v.default;_.default=T}(dist)),dist}var distExports=requireDist();const ReactGA=getDefaultExportFromCjs(distExports),_0x51c882=_0x5464;function _0x5464(_,d){const v=_0x3add();return _0x5464=function(A,C){return A=A-261,v[A]},_0x5464(_,d)}function _0x3add(){const _=["5664016CxgQFU","ObMke","MXctR","GzVao","PURCHASE_FAILED","INIT","MdqfD","refund-issued","WALLET_DISCONNECT","YSxuY","lCGvV","266LPnBZK","transaction-sent-for-signature","purchase-failed","ADDITIONAL_TASK_EVENT","hrbqV","Dchjn","BDwBz","uwCSS","app-hide","register-invoice","WALLET_CONNECT_ERROR","TRANSACTION_SIGNED","CUSTOM_EVENT","3KWoFJE","KwSKl","WsKzV","BJiKs","41lgfWdV","HhYSQ","JslcT","https://staging.tganalytics.xyz/","2259290lUbEcs","connection-restoring-completed","SUBSCRIPTION_RENEWED","PuYcK","12990SOgtnJ","jdGtB","PURCHASE_SUCCESS","WWNPk","JvqNS","38746BcxPVW","SUBSCRIPTION_CANCELLED","INVOICE_REGISTERED","transaction-signing-failed","purchase-init","WALLET_CONNECT_STARTED","connection-restoring-error","2034gbpakW","REFUND_ISSUED","subscription-cancelled","dhKRh","nNzLh","connection-error","CONNECTION_RESTORING_ERROR","connection-started","CONNECTION_RESTORING_STARTED","1071WFiMOu","RWzyE","connection-restoring-started","kNbCq","debpn","connection-completed","mgAhT","HDyIG","2932400GGzRoS","ZDFQr","DeJpt","purchase-success","gmVUr","TRANSACTION_SENT_FOR_SIGNATURE","PURCHASE_CANCELLED","purchase-cancelled","SUBSCRIPTION_STARTED","BCkwu","JehCM","app-init","212276bnqrQT"];return _0x3add=function(){return _},_0x3add()}(function(_,d){const v=_0x5464,A=_();for(;;)try{if(-parseInt(v(269))/1*(-parseInt(v(282))/2)+parseInt(v(265))/3*(-parseInt(v(318))/4)+-parseInt(v(306))/5+parseInt(v(289))/6*(-parseInt(v(330))/7)+parseInt(v(319))/8+-parseInt(v(298))/9*(parseInt(v(277))/10)+-parseInt(v(273))/11===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x3add,489893);const BACKEND_URL="https://tganalytics.xyz/",STAGING_BACKEND_URL=_0x51c882(272),BATCH_KEY="TGA-Batch-Requests";var Events=(_=>{const d=_0x51c882,v={RWzyE:d(324),KwSKl:d(317),BCkwu:d(338),nNzLh:"custom-event",HhYSQ:d(287),YSxuY:d(296),BDwBz:"WALLET_CONNECT_SUCCESS",IjbRp:d(262),PuYcK:d(294),uwCSS:d(297),CZpcx:d(300),ObMke:"CONNECTION_RESTORING_SUCCESS",zGYxp:d(274),DeJpt:d(295),BJiKs:d(288),kNbCq:d(311),ZDFQr:d(331),lCGvV:"transaction-signed",WsKzV:d(285),mgAhT:d(327),debpn:"disconnection",JvqNS:d(333),MXctR:"PURCHASE_INIT",zTPXp:d(286),HDyIG:d(279),Dchjn:d(309),jdGtB:d(323),hrbqV:d(332),veIwC:d(312),MdqfD:d(313),JehCM:d(290),irzzw:d(326),gmVUr:"subscription-started",GzVao:"subscription-renewed",JslcT:d(291),dhKRh:d(284),WWNPk:d(261)};return _[v[d(299)]]=v[d(266)],_.HIDE=v[d(315)],_[d(264)]=v[d(293)],_[v[d(270)]]=v[d(328)],_[v[d(336)]]=d(303),_[v.IjbRp]=v[d(276)],_[v[d(337)]]=v.CZpcx,_[v[d(320)]]=v.zGYxp,_[v[d(308)]]=v[d(268)],_[v[d(301)]]=v[d(307)],_[d(263)]=v[d(329)],_.TRANSACTION_SIGNING_FAILED=v[d(267)],_[v[d(304)]]=v[d(302)],_[v.JvqNS]=v[d(281)],_[v[d(321)]]=v.zTPXp,_[v[d(305)]]=v[d(335)],_[v[d(278)]]=v[d(334)],_[v.veIwC]=v[d(325)],_[v[d(316)]]=v.irzzw,_[d(314)]=v[d(310)],_[d(275)]=v[d(322)],_[d(283)]=v[d(271)],_[v[d(292)]]=v[d(280)],_})(Events||{});const _0x443f8c=_0x2a60;function _0x2a60(_,d){const v=_0x2507();return _0x2a60=function(A,C){return A=A-225,v[A]},_0x2a60(_,d)}(function(_,d){const v=_0x2a60,A=_();for(;;)try{if(-parseInt(v(250))/1+parseInt(v(248))/2+parseInt(v(234))/3*(parseInt(v(242))/4)+-parseInt(v(228))/5*(-parseInt(v(226))/6)+parseInt(v(257))/7+-parseInt(v(253))/8*(-parseInt(v(258))/9)+parseInt(v(245))/10*(-parseInt(v(229))/11)===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x2507,152370);class TonConnectObserver{constructor(d){const v=_0x2a60,A={rqtPt:"ton-connect-ui-",VBszy:v(259)};this[v(238)]=[Events[v(230)],Events.WALLET_CONNECT_SUCCESS,Events[v(241)],Events.CONNECTION_RESTORING_SUCCESS,Events[v(225)],Events[v(240)],Events[v(236)],Events[v(239)],Events[v(227)]],this[v(232)]=[Events[v(244)],Events.WALLET_CONNECT_ERROR,Events.TRANSACTION_SIGNING_FAILED],this[v(251)]=A.rqtPt,this[v(235)]=A.VBszy,this[v(255)]=d}init(){const d=_0x2a60;for(let v of this.events)console[d(252)](d(231)+v+d(249)),window[d(256)](v,A=>{const C=d;console[C(252)](C(243)+v+C(233),A[C(247)]);const{type:w,...T}=A[C(247)];this[C(255)][C(254)](A[C(247)].type,{...T})})}get[_0x443f8c(246)](){const d=_0x443f8c,v=this[d(232)].map(C=>""+this[d(251)]+C),A=this[d(238)][d(237)](C=>""+this[d(235)]+C);return[...v,...A]}}function _0x2507(){const _=["ton-connect-","CONNECTION_RESTORING_ERROR","6OlURlQ","WALLET_DISCONNECT","11370SpStMU","4999709CUNJnf","CUSTOM_EVENT","Attach ","tonConnectUiEvents"," received","169344qShqHx","sdkScope","TRANSACTION_SIGNED","map","tonConnectSdkEvents","TRANSACTION_SIGNING_FAILED","TRANSACTION_SENT_FOR_SIGNATURE","WALLET_CONNECT_ERROR","16pRVGLC","event ","WALLET_CONNECT_STARTED","10LTDjHY","events","detail","289486cDiRdG"," listener","110039jaFedL","uiScope","log","334392dFnRPt","collectEvent","analyticsController","addEventListener","1823647rnbJSq","18HRBLQU"];return _0x2507=function(){return _},_0x2507()}const _0x1fbfae=_0x22ec;(function(_,d){const v=_0x22ec,A=_();for(;;)try{if(-parseInt(v(424))/1*(parseInt(v(443))/2)+-parseInt(v(422))/3*(parseInt(v(436))/4)+-parseInt(v(425))/5*(parseInt(v(439))/6)+-parseInt(v(431))/7+-parseInt(v(442))/8*(-parseInt(v(434))/9)+-parseInt(v(420))/10+parseInt(v(432))/11*(parseInt(v(430))/12)===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x1ecc,263944);function _0x22ec(_,d){const v=_0x1ecc();return _0x22ec=function(A,C){return A=A-419,v[A]},_0x22ec(_,d)}function _0x1ecc(){const _=["init","3947980dzSofl","analyticsController","1292919rbCsuV","HIDE","205Lgjrhj","5315ZGsjMH","entries","GDbcb","WZRpt","mXGck","12lYShqm","645036GYUpXn","15965763VcHYvD","kzMSv","585XWknlj","documentEvents","4bXjYEw","THiFp","visibilityState","2040bjeTEO","qCshu","hidden","36384fFYZgF","1988yxDllU"];return _0x1ecc=function(){return _},_0x1ecc()}class DocumentObserver{constructor(d){const v=_0x22ec,A={THiFp:function(C,w){return C===w}};this[v(435)]={visibilitychange:()=>{const C=v;A[C(437)](document[C(438)],C(441))&&this[C(421)].collectEvent(Events[C(423)],void 0)}},this.analyticsController=d}[_0x1fbfae(419)](){const d=_0x1fbfae,v={kzMSv:function(A,C){return A===C},mXGck:d(428),GDbcb:d(440)};for(let[A,C]of Object[d(426)](this[d(435)]))if(v[d(433)](v[d(429)],v[d(427)]))for(let[w,T]of _0xe7e305[d(426)](this[d(435)]))_0x5c9c12.addEventListener(w,T);else document.addEventListener(A,C)}}function _0x1e4b(_,d){const v=_0x42e5();return _0x1e4b=function(A,C){return A=A-112,v[A]},_0x1e4b(_,d)}const _0x269072=_0x1e4b;(function(_,d){const v=_0x1e4b,A=_();for(;;)try{if(-parseInt(v(114))/1*(-parseInt(v(129))/2)+-parseInt(v(123))/3+-parseInt(v(112))/4+parseInt(v(128))/5+parseInt(v(120))/6+parseInt(v(127))/7*(-parseInt(v(134))/8)+parseInt(v(116))/9*(-parseInt(v(133))/10)===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x42e5,294140);function _0x42e5(){const _=["Telegram","219164dqIHlF","call","4197uXtkRd","startsWith","18MdFUus","undefined","eFqgJ","split","1348980WFtILV","uzXEa","pop","988266DVONNA","PURCHASE_INIT","analyticsController","slice","91EkTbKK","2256405AbLwEQ","246kxCVcN","openInvoice","init","WebApp","521210lRbODk","252152QyumqQ","webApp"];return _0x42e5=function(){return _},_0x42e5()}class WebAppObserver{constructor(d){var v;const A=_0x1e4b,C={eFqgJ:A(117)};this[A(135)]=typeof window!==C[A(118)]&&((v=window?.[A(136)])!=null&&v[A(132)])?window[A(136)][A(132)]:null,this[A(125)]=d}[_0x269072(131)](){var d,v;const A=_0x269072,C={uzXEa:"FTgAg"};if(this.webApp&&((d=this[A(135)])!=null&&d[A(130)]))if(C.uzXEa!==C[A(121)]){if(this.webApp&&((v=this[A(135)])!=null&&v[A(130)])){const w=this[A(135)][A(130)];this[A(135)].openInvoice=(T,R)=>{const G=A;let I=T[G(119)]("/").pop()||"";return I[G(115)]("$")&&(I=I[G(126)](1)),this[G(125)].collectEvent(_0x1fdc8f.PURCHASE_INIT,{slug:I}),w[G(113)](this[G(135)],T,R)}}}else{const w=this[A(135)][A(130)];this[A(135)][A(130)]=(T,R)=>{const G=A;let I=T[G(119)]("/")[G(122)]()||"";return I[G(115)]("$")&&(I=I[G(126)](1)),this.analyticsController.collectEvent(Events[G(124)],{slug:I}),w.call(this[G(135)],T,R)}}}}const _0x344464=_0x3a26;function _0x3a26(_,d){const v=_0x46af();return _0x3a26=function(A,C){return A=A-492,v[A]},_0x3a26(_,d)}(function(_,d){const v=_0x3a26,A=_();for(;;)try{if(parseInt(v(513))/1*(-parseInt(v(492))/2)+-parseInt(v(495))/3+-parseInt(v(496))/4+-parseInt(v(497))/5*(parseInt(v(515))/6)+parseInt(v(508))/7*(parseInt(v(523))/8)+-parseInt(v(516))/9*(parseInt(v(522))/10)+parseInt(v(526))/11===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x46af,138364);class WebViewObserver{constructor(d){const v=_0x3a26;this[v(494)]={paid:Events[v(503)],cancelled:Events[v(501)],failed:Events[v(504)]},this[v(524)]=d}[_0x344464(517)](){const d=_0x344464;window[d(527)](d(514),({data:v})=>{const A=d;try{const{eventType:C,eventData:w}=JSON[A(506)](v);this[A(493)](C,w)}catch{}}),this[d(521)](window[d(507)]),this[d(521)](window[d(525)].WebView),this[d(521)](window[d(509)])}[_0x344464(521)](d){const v=_0x344464;if(!d)return;let A;d?.receiveEvent?A=d[v(528)]:(A=d,d=window);const C=this;d.receiveEvent=(w,T)=>(C[v(493)](w,T),A.call(d,w,T))}[_0x344464(493)](d,v){const A=_0x344464,C={msGDM:function(w,T){return w===T},gJwHj:A(510),yGceZ:function(w,T){return w===T},GpFIJ:A(511),EhsHA:function(w,T){return w===T},TIPSZ:"caQMo"};if(C[A(518)](d,C[A(512)]))if(C[A(500)](C[A(499)],C[A(499)])){if(this[A(494)][v[A(502)]])if(C[A(498)](C.TIPSZ,A(519)))this.analyticsController[A(520)](this.eventStatusMap[v.status],{slug:v[A(505)]});else try{const{eventType:w,eventData:T}=_0x344dfb[A(506)](_0x1ae194);this[A(493)](w,T)}catch{}}else this[A(494)][_0x391c4e[A(502)]]&&this[A(524)][A(520)](this.eventStatusMap[_0x150baa[A(502)]],{slug:_0x499470.slug})}}function _0x46af(){const _=["79194Sdsfbk","4725QsGNOv","init","msGDM","caQMo","collectEvent","handlePlatformListener","4670ENqKCh","152XpFmSQ","analyticsController","Telegram","7827501jOPXbU","addEventListener","receiveEvent","10VRxXGO","handleEvents","eventStatusMap","222186GWkreL","996204azYVSk","20HBCadM","EhsHA","GpFIJ","yGceZ","PURCHASE_CANCELLED","status","PURCHASE_SUCCESS","PURCHASE_FAILED","slug","parse","TelegramGameProxy","98826zMiglF","TelegramGameProxy_receiveEvent","invoice_closed","XGoVy","gJwHj","44077klOmpb","message"];return _0x46af=function(){return _},_0x46af()}var _0x392f2a=_0x4a6c;(function(_,d){for(var v=_0x4a6c,A=_();;)try{var C=-parseInt(v(438))/1*(parseInt(v(417))/2)+parseInt(v(432))/3*(-parseInt(v(431))/4)+parseInt(v(442))/5+-parseInt(v(437))/6+-parseInt(v(420))/7*(parseInt(v(439))/8)+parseInt(v(415))/9*(parseInt(v(433))/10)+parseInt(v(425))/11*(parseInt(v(440))/12);if(C===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x88b4,877446);function _0x88b4(){var _=["nqCEq","AaGTj","PRcFM","9OoQMnb","oSoEF","727144NgmZSn","XrtaU","appModule","7nPGUgK","STG","events/threshold","init","wuCdd","20185330HbBoos","timeout","catch","recordEvent","wqaOi","collectEvent","4AgMUSM","3609183XJrrAj","14961730ZdGsFP","qmRnM","env","webViewObserver","6094110uufLWH","1mgUYlG","11760656dwiNrK","12klkhQB","eventsThreshold","7993215UVkPyK","AyDpj","documentObserver"];return _0x88b4=function(){return _},_0x88b4()}function _0x4a6c(_,d){var v=_0x88b4();return _0x4a6c=function(A,C){A=A-411;var w=v[A];return w},_0x4a6c(_,d)}class AnalyticsController{constructor(d){var v=_0x4a6c;this[v(441)]={"app-hide":3},this[v(419)]=d,this[v(411)]=new DocumentObserver(this),this.tonConnectObserver=new TonConnectObserver(this),this.webAppObserver=new WebAppObserver(this),this[v(436)]=new WebViewObserver(this)}async[_0x392f2a(423)](){var d=_0x392f2a,v={RwOLz:function(A,C){return A===C},qmRnM:function(A,C,w){return A(C,w)},AaGTj:function(A,C){return A+C},CcMMy:function(A,C){return A===C},wuCdd:d(421),PRcFM:function(A,C){return A!==C},nqCEq:d(418)};this.documentObserver.init(),this.tonConnectObserver[d(423)](),this.webAppObserver.init(),this[d(436)].init();try{this.eventsThreshold=await(await v[d(434)](fetch,v[d(413)](v.CcMMy(this[d(419)][d(435)],v[d(424)])?STAGING_BACKEND_URL:BACKEND_URL,d(422)),{signal:AbortSignal[d(426)](2e3)})).json()}catch(A){if(v[d(414)](v[d(412)],v.nqCEq)){if(v.RwOLz(this[d(441)][_0x35441f],0))return;this[d(419)][d(430)](_0x1e7b2b,_0x9e0b6d),this[d(441)][_0x2bed95]&&this[d(441)][_0x349fe8]--}else console.error(A)}}[_0x392f2a(428)](d,v){var A=_0x392f2a;this[A(419)][A(428)](d,v)[A(427)](C=>console.error(C))}[_0x392f2a(430)](d,v){var A=_0x392f2a,C={AyDpj:function(w,T){return w===T},eLlOX:function(w,T){return w!==T},wqaOi:A(416)};C[A(443)](this[A(441)][d],0)||(this[A(419)].collectEvent(d,v),this[A(441)][d]&&(C.eLlOX(C.wqaOi,C[A(429)])?_0x5ba19f.error(_0x65d469):this[A(441)][d]--))}}(function(_,d){const v=_0x5a10,A=_();for(;;)try{if(parseInt(v(462))/1*(-parseInt(v(457))/2)+-parseInt(v(459))/3*(parseInt(v(454))/4)+-parseInt(v(453))/5*(-parseInt(v(451))/6)+parseInt(v(463))/7*(parseInt(v(466))/8)+-parseInt(v(461))/9+-parseInt(v(455))/10+parseInt(v(464))/11===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x381b,907241);function _0x381b(){const _=["26lvBqJR","DfIhD","855723mcxwdd","USER_DATA_IS_NOT_PROVIDED","5515344KmwMCc","68783YDkOTG","7kZpQRy","33022682DiHdOs","sNerK","6058896MZsxbn","6iddFMY","Telegram User data is not provided.","450005sOFJai","4bsqIHv","11499480PPSgTq","Token is not provided."];return _0x381b=function(){return _},_0x381b()}const throwError=_=>{throw new Error(_)};function _0x5a10(_,d){const v=_0x381b();return _0x5a10=function(A,C){return A=A-451,v[A]},_0x5a10(_,d)}var Errors=(_=>{const d=_0x5a10,v={sNerK:"TOKEN_IS_NOT_PROVIDED",jkvGW:d(456),DfIhD:d(460)};return _[v[d(465)]]=v.jkvGW,_[v[d(458)]]=d(452),_})(Errors||{});(function(_,d){const v=_0x273d,A=_();for(;;)try{if(parseInt(v(238))/1+parseInt(v(239))/2+parseInt(v(243))/3*(parseInt(v(235))/4)+-parseInt(v(236))/5+parseInt(v(241))/6+parseInt(v(246))/7+-parseInt(v(244))/8===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x252e,425809);function _0x252e(){const _=["433418ijZdhm","pipeThrough","4226790MeYQnE","gzip","114LKoPmI","10055456ZjjXMN","stringify","5405085HzSCOn","stream","53972Olshth","4067485XGZqQh","blob","290175qUhgaf"];return _0x252e=function(){return _},_0x252e()}function _0x273d(_,d){const v=_0x252e();return _0x273d=function(A,C){return A=A-234,v[A]},_0x273d(_,d)}async function compressData(_){const d=_0x273d,v=new Blob([JSON[d(245)](_)])[d(234)](),A=v[d(240)](new CompressionStream(d(242)));return await new Response(A)[d(237)]()}function _0x3394(_,d){const v=_0x7bbd();return _0x3394=function(A,C){return A=A-252,v[A]},_0x3394(_,d)}const _0x544091=_0x3394;(function(_,d){const v=_0x3394,A=_();for(;;)try{if(parseInt(v(314))/1*(-parseInt(v(283))/2)+-parseInt(v(260))/3+-parseInt(v(252))/4*(parseInt(v(256))/5)+-parseInt(v(312))/6+parseInt(v(280))/7+parseInt(v(315))/8*(parseInt(v(263))/9)+parseInt(v(266))/10===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x7bbd,113964);function _0x7bbd(){const _=["Content","PTvAr","ZaNzk","GCqRK","kKAfm","sJOnE","TOKEN_IS_NOT_PROVIDED","IEfIz","EAeaq","cOVia","application/json","DnSWg","getApiToken","884156OnYXpG","gzip","generateHeaders","66dONiKA","json","recordEvents","stringify","custom_data","kpaQo","recordEvent","OkIrU","BACKEND_URL","jsLFu","jDSnl","solveTask","responseToParams","dFgJA","WPqBQ","STG","appModule","clone","POST","yxKZR","thDis","env","Jyiim","HWlOH","mNkZK","UzeXf","assembleEventSession","Content-Encoding","taskSolution","92586CcLCFV","SoEvF","652IhMebq","4344FvkfFK","3440hQNWJA","WVPgK","events","UKFFz","230InTUvr","qHeqU","scYJP","CbeFT","507501RxtBai","HpDAk","RFBZL","1269EGlGhy","assign","yknet","1567670zfLvcL"];return _0x7bbd=function(){return _},_0x7bbd()}class NetworkController{constructor(d){const v=_0x3394,A={DnSWg:function(C,w){return C===w},slKKA:function(C,w){return C===w},HWlOH:"iQEED",jDSnl:v(281),CbeFT:function(C,w){return C!==w},jsLFu:"EtDWf",eghdh:v(255),HpDAk:v(267),qHeqU:v(290),NGqMu:v(310),dFgJA:v(277),PTvAr:function(C,w){return C(w)},WVPgK:v(298),EAeaq:"WaUaG",thDis:v(307),kGtnK:v(288)};this[v(291)]=BACKEND_URL,this[v(295)]=async C=>{const w=v,T=C[w(300)]();if(A[w(278)](String(T.status)[0],"2")||A.slKKA(T.status,429))if(A[w(306)]!=="iQEED")this.BACKEND_URL=_0x24c90b;else{const R=await T[w(284)]();this[w(299)].setNewArgs(R[w(267)])}return C},this[v(282)]=C=>{const w=v;if(A[w(259)](A[w(292)],A.eghdh)){this.appModule[w(294)]();const T={};return this[w(299)][w(311)]&&(T[A[w(261)]]=this[w(299)][w(311)]),C&&(A[w(278)](A[w(257)],w(302))?_0x36ae28[w(310)]=A[w(293)]:T[A.NGqMu]=A[w(293)]),{"TGA-Auth-Token":this[w(299)][w(279)](),"Content-Type":A[w(296)],...T}}else _0x67a712[w(267)]=this[w(299)][w(311)]},this[v(299)]=d,A.DnSWg(this[v(299)][v(304)],A[v(253)])&&(A[v(275)]===A[v(275)]?this[v(291)]=STAGING_BACKEND_URL:_0xbff08f?_0x478443=_0xef483d[v(264)](_0x40f6b6[v(287)],_0x51a26c):_0x16323d=_0x2aa41a.custom_data),!this[v(299)][v(279)]()&&(A[v(303)]===A.kGtnK?A[v(268)](_0x239d44,_0x35804f[v(273)]):throwError(Errors[v(273)]))}init(){}async[_0x544091(285)](d,v=!0){const A=_0x544091,C={Jyiim:function(w,T,R){return w(T,R)},SoEvF:function(w,T){return w+T},cOVia:A(254),UzeXf:function(w,T){return w(T)}};return await C[A(305)](fetch,C[A(313)](this.BACKEND_URL,C[A(276)]),{method:A(301),headers:this[A(282)](v),body:v?await C[A(308)](compressData,d):JSON[A(286)](d)}).then(this[A(295)],this.responseToParams)}async[_0x544091(289)](d,v,A,C=!0){const w=_0x544091,T={IEfIz:w(267),RFBZL:w(281),HBjpq:w(277),GCqRK:function(G,I){return G===I},scYJP:w(271),sJOnE:function(G,I,z){return G(I,z)},yknet:function(G,I){return G+I},ZaNzk:"events",bWlpj:w(301),WPqBQ:function(G,I){return G(I)}};if(v?.[w(287)])if(A)A=Object[w(264)](v.custom_data,A);else if(T[w(270)]("cVceF",T[w(258)])){this[w(299)][w(294)]();const G={};return this[w(299)][w(311)]&&(G[T[w(274)]]=this[w(299)].taskSolution),_0x5c20a4&&(G[w(310)]=T[w(262)]),{"TGA-Auth-Token":this[w(299)][w(279)](),"Content-Type":T.HBjpq,...G}}else A=v[w(287)];const R={...v,event_name:d,custom_data:A,...this.appModule[w(309)]()};await T[w(272)](fetch,T[w(265)](this[w(291)],T[w(269)]),{method:T.bWlpj,headers:this[w(282)](!0),body:C?await T[w(297)](compressData,R):JSON[w(286)](R)}).then(this[w(295)],this[w(295)])}}class V extends Error{constructor(d,v,A){super(v,{cause:A}),this.type=d,Object.setPrototypeOf(this,V.prototype)}}function f(_,d,v){return new V(_,d,v)}const Ye="ERR_UNEXPECTED_TYPE",ce="ERR_PARSE";function E(){return f(Ye,"Value has unexpected type")}class D{constructor(d,v,A){this.parser=d,this.isOptional=v,this.type=A}parse(d){if(!(this.isOptional&&d===void 0))try{return this.parser(d)}catch(v){throw f(ce,`Unable to parse value${this.type?` as ${this.type}`:""}`,v)}}optional(){return this.isOptional=!0,this}}function S(_,d){return()=>new D(_,!1,d)}const b=S(_=>{if(typeof _=="boolean")return _;const d=String(_);if(d==="1"||d==="true")return!0;if(d==="0"||d==="false")return!1;throw E()},"boolean");function pe(_,d){const v={};for(const A in _){const C=_[A];if(!C)continue;let w,T;if(typeof C=="function"||"parse"in C)w=A,T=typeof C=="function"?C:C.parse.bind(C);else{const{type:R}=C;w=C.from||A,T=typeof R=="function"?R:R.parse.bind(R)}try{const R=T(d(w));R!==void 0&&(v[A]=R)}catch(R){throw f(ce,`Unable to parse field "${A}"`,R)}}return v}function he(_){let d=_;if(typeof d=="string"&&(d=JSON.parse(d)),typeof d!="object"||d===null||Array.isArray(d))throw E();return d}function g(_,d){return new D(v=>{const A=he(v);return pe(_,C=>A[C])},!1,d)}const y=S(_=>{if(typeof _=="number")return _;if(typeof _=="string"){const d=Number(_);if(!Number.isNaN(d))return d}throw E()},"number"),h=S(_=>{if(typeof _=="string"||typeof _=="number")return _.toString();throw E()},"string");g({req_id:h(),result:_=>_,error:h().optional()});function Q(_){return/^#[\da-f]{6}$/i.test(_)}function ht(_){return/^#[\da-f]{3}$/i.test(_)}function me(_){const d=_.replace(/\s/g,"").toLowerCase();if(Q(d))return d;if(ht(d)){let A="#";for(let C=0;C<3;C+=1)A+=d[1+C].repeat(2);return A}const v=d.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||d.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!v)throw new Error(`Value "${_}" does not satisfy any of known RGB formats.`);return v.slice(1).reduce((A,C)=>{const w=parseInt(C,10).toString(16);return A+(w.length===1?"0":"")+w},"#")}const Ee=S(_=>_ instanceof Date?_:new Date(y().parse(_)*1e3),"Date");function K(_,d){return new D(v=>{if(typeof v!="string"&&!(v instanceof URLSearchParams))throw E();const A=typeof v=="string"?new URLSearchParams(v):v;return pe(_,C=>{const w=A.get(C);return w===null?void 0:w})},!1,d)}const dt=g({id:y(),type:h(),title:h(),photoUrl:{type:h().optional(),from:"photo_url"},username:h().optional()},"Chat").optional(),ne=g({addedToAttachmentMenu:{type:b().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:b().optional(),from:"allows_write_to_pm"},firstName:{type:h(),from:"first_name"},id:y(),isBot:{type:b().optional(),from:"is_bot"},isPremium:{type:b().optional(),from:"is_premium"},languageCode:{type:h().optional(),from:"language_code"},lastName:{type:h().optional(),from:"last_name"},photoUrl:{type:h().optional(),from:"photo_url"},username:h().optional()},"User").optional();function Se(){return K({authDate:{type:Ee(),from:"auth_date"},canSendAfter:{type:y().optional(),from:"can_send_after"},chat:dt,chatInstance:{type:h().optional(),from:"chat_instance"},chatType:{type:h().optional(),from:"chat_type"},hash:h(),queryId:{type:h().optional(),from:"query_id"},receiver:ne,startParam:{type:h().optional(),from:"start_param"},user:ne},"InitData")}const _t=S(_=>me(h().parse(_)),"rgb");function ft(_){return _.replace(/_[a-z]/g,d=>d[1].toUpperCase())}function gt(_){return _.replace(/[A-Z]/g,d=>`_${d.toLowerCase()}`)}const Pe=S(_=>{const d=_t().optional();return Object.entries(he(_)).reduce((v,[A,C])=>(v[ft(A)]=d.parse(C),v),{})},"ThemeParams");function X(_){return K({botInline:{type:b().optional(),from:"tgWebAppBotInline"},initData:{type:Se().optional(),from:"tgWebAppData"},initDataRaw:{type:h().optional(),from:"tgWebAppData"},platform:{type:h(),from:"tgWebAppPlatform"},showSettings:{type:b().optional(),from:"tgWebAppShowSettings"},startParam:{type:h().optional(),from:"tgWebAppStartParam"},themeParams:{type:Pe(),from:"tgWebAppThemeParams"},version:{type:h(),from:"tgWebAppVersion"}}).parse(_)}function xe(_){return X(_.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function wt(){return xe(window.location.href)}function Ce(){return performance.getEntriesByType("navigation")[0]}function bt(){const _=Ce();if(!_)throw new Error("Unable to get first navigation entry.");return xe(_.name)}function Te(_){return`telegram-apps/${_.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}`}function Re(_,d){sessionStorage.setItem(Te(_),JSON.stringify(d))}function Ae(_){const d=sessionStorage.getItem(Te(_));try{return d?JSON.parse(d):void 0}catch{}}function mt(){return X(Ae("launchParams")||"")}function Ie(_){return JSON.stringify(Object.fromEntries(Object.entries(_).map(([d,v])=>[gt(d),v])))}function yt(_){const{initDataRaw:d,themeParams:v,platform:A,version:C,showSettings:w,startParam:T,botInline:R}=_,G=new URLSearchParams;return G.set("tgWebAppPlatform",A),G.set("tgWebAppThemeParams",Ie(v)),G.set("tgWebAppVersion",C),d&&G.set("tgWebAppData",d),T&&G.set("tgWebAppStartParam",T),typeof w=="boolean"&&G.set("tgWebAppShowSettings",w?"1":"0"),typeof R=="boolean"&&G.set("tgWebAppBotInline",R?"1":"0"),G.toString()}function qe(_){Re("launchParams",yt(_))}function vt(){const _=[];for(const d of[wt,bt,mt])try{const v=d();return qe(v),v}catch(v){_.push(v instanceof Error?v.message:JSON.stringify(v))}throw new Error([`Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?
`," Refer to docs for more information:",`https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment
`,"Collected errors:",_.map(d=>` ${d}`)].join(`
`))}function _0x53af(){const _=["39135490EmjJpW","toString","6bigQvS","slice","kQKZY","getTime","2EggKXM","sjxZF","rfZCd","cuhXO","RkMJO","yvTfP","3223791oGmurO","length","667894HpAoLQ","replace","4479041iQsBKX","7150305PfytZs","Jseyd","oNkUF","24dPCqmg","vodIg","zkRsd","ArAXv","2606463IKxmEA","tKgFg","5163864phnDoK"];return _0x53af=function(){return _},_0x53af()}(function(_,d){const v=_0x2a73,A=_();for(;;)try{if(-parseInt(v(289))/1*(-parseInt(v(281))/2)+parseInt(v(299))/3+parseInt(v(274))/4+parseInt(v(292))/5*(parseInt(v(277))/6)+-parseInt(v(291))/7+-parseInt(v(295))/8*(-parseInt(v(287))/9)+-parseInt(v(275))/10===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x53af,778927);function _0x2a73(_,d){const v=_0x53af();return _0x2a73=function(A,C){return A=A-274,v[A]},_0x2a73(_,d)}function generateUUID(_){const d=_0x2a73,v={cuhXO:function(I,z){return I+z},tKgFg:function(I,z){return I-z},Jseyd:function(I,z){return I<<z},kQKZY:function(I,z){return I%z},sjxZF:function(I,z){return I+z},oNkUF:function(I,z,H){return I(z,H)},RkMJO:function(I,z){return I/z},ArAXv:function(I,z){return I|z},zkRsd:function(I,z){return I&z},vodIg:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",yvTfP:function(I,z){return I+z},rfZCd:function(I,z){return I<z}};let A=v[d(296)],C=new Date()[d(280)]();const w=v[d(286)](_,C);function T(I){const z=d;let H=0;for(let Y=0;Y<I[z(288)];Y++){const ee=I.charCodeAt(Y);H=v[z(284)](v[z(300)](v[z(293)](H,5),H),ee),H|=0}return H}let R=T(w)[d(276)](16);for(;v[d(283)](R[d(288)],32);)R+=R;R=R[d(278)](0,32);let G=0;return A[d(290)](/[xy]/g,function(I){const z=d,H=v[z(279)](v[z(282)](C,v[z(294)](parseInt,R[G],16)),16)|0;return C=Math.floor(v[z(285)](C,16)),G++,(I=="x"?H:v[z(298)](v[z(297)](H,3),8))[z(276)](16)})}const _0x3227c2=_0x2a2a;(function(_,d){const v=_0x2a2a,A=_();for(;;)try{if(parseInt(v(439))/1+-parseInt(v(424))/2*(-parseInt(v(428))/3)+-parseInt(v(436))/4+parseInt(v(418))/5+parseInt(v(433))/6*(-parseInt(v(420))/7)+parseInt(v(429))/8+-parseInt(v(445))/9*(parseInt(v(440))/10)===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x48d9,790590);function _0x48d9(){const _=["getUserLocale","isBot","9LsWsWY","sessionId","getWebAppStartParam","userData","IDyfu","getAppName","appModule","userId","162750sAgnLy","languageCode","5334441RTSkul","userLocale","dfEuB","username","7186qMekLW","getUserData","user","now","1266pffFef","2922336nXPlZM","init","lastName","getPlatform","6xiJuEn","platform","startParam","865776uJWBqD","initData","isPremium","656455DRvSmK","8014460HXvLXh","getUserId","getSessionId"];return _0x48d9=function(){return _},_0x48d9()}function _0x2a2a(_,d){const v=_0x48d9();return _0x2a2a=function(A,C){return A=A-415,v[A]},_0x2a2a(_,d)}class SessionController{constructor(d){const v=_0x2a2a;this[v(416)]=d}[_0x3227c2(430)](){var d;const v=_0x3227c2,A={JmkVz:function(R){return R()},dfEuB:function(R,G){return R(G)},IDyfu:function(R,G){return R(G)}},C=A.JmkVz(vt),w=C[v(437)],T=(d=C[v(437)])==null?void 0:d[v(426)];!T&&A[v(422)](throwError,Errors.USER_DATA_IS_NOT_PROVIDED),this.userData={id:T.id,is_premium:T[v(438)],first_name:T.firstName,is_bot:T[v(444)],last_name:T[v(431)],language_code:T[v(419)],photo_url:T.photoUrl,username:T[v(423)]},this[v(417)]=T.id,this[v(421)]=T[v(419)],this.webAppStartParam=w[v(435)],this[v(434)]=C[v(434)],this.sessionId=A[v(422)](generateUUID,A[v(449)](String,this[v(441)]()))}[_0x3227c2(442)](){return this[_0x3227c2(446)]}[_0x3227c2(441)](){return this[_0x3227c2(417)]}[_0x3227c2(447)](){return this.webAppStartParam}[_0x3227c2(432)](){return this.platform}[_0x3227c2(443)](){return this[_0x3227c2(421)]}getUserData(){return this[_0x3227c2(448)]}getUserIsPremium(){const d=_0x3227c2,v={SGrIh:function(C,w){return C(w)}},A=this[d(425)]();return v.SGrIh(Boolean,A?.is_premium)}assembleEventSession(){const d=_0x3227c2;return{session_id:this[d(442)](),user_id:this[d(441)](),app_name:this[d(416)][d(415)](),is_premium:this.getUserIsPremium(),platform:this.getPlatform(),locale:this[d(443)](),start_param:this.getWebAppStartParam(),client_timestamp:String(Date[d(427)]())}}}const _0xd24b0f=_0x5f56;function _0x5f56(_,d){const v=_0x1955();return _0x5f56=function(A,C){return A=A-198,v[A]},_0x5f56(_,d)}(function(_,d){const v=_0x5f56,A=_();for(;;)try{if(-parseInt(v(204))/1+-parseInt(v(220))/2+parseInt(v(201))/3+parseInt(v(213))/4*(-parseInt(v(210))/5)+-parseInt(v(215))/6+parseInt(v(200))/7+parseInt(v(198))/8*(parseInt(v(212))/9)===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x1955,822277);function _0x1955(){const _=["32zEzunD","stringify","7783384segcFV","4897608osaqPD","getBatch","setItem","605657hjywYq","parse","VIFcl","localStorage","addToStorage","sessionStorage","35uFKvpq","null","4238649tRtSWr","557596dPvtGy","filter","9329016PRnBfo","key","includes","findIndex","getItem","1339458xdoDOa"];return _0x1955=function(){return _},_0x1955()}class BatchStorage{constructor(d){const v=_0x5f56;this[v(209)]=window[v(209)],this.localStorage=window[v(207)],this[v(216)]=d}[_0xd24b0f(202)](){const d=_0xd24b0f;return[null,{VIFcl:d(211)}[d(206)]].includes(this.sessionStorage.getItem(this[d(216)]))&&[null,d(211)][d(217)](this.localStorage.getItem(this.key))?this[d(203)]([]):this[d(203)](JSON[d(205)](this[d(207)].getItem(this[d(216)]))),this[d(203)]([...JSON[d(205)](this[d(209)][d(219)](this[d(216)])),...JSON[d(205)](this[d(207)][d(219)](this[d(216)]))][d(214)]((A,C,w)=>w[d(218)](T=>JSON[d(199)](T)===JSON.stringify(A))===C)),JSON[d(205)](this[d(209)].getItem(this[d(216)]))}[_0xd24b0f(208)](d,v){const A=_0xd24b0f,C=this[A(202)]();C.push({event_name:d,...v}),this[A(203)](C)}[_0xd24b0f(203)](d){const v=_0xd24b0f;this[v(207)][v(203)](this.key,JSON[v(199)](d)),this[v(209)].setItem(this.key,JSON[v(199)](d))}}function _0x1957(_,d){const v=_0x2ee1();return _0x1957=function(A,C){return A=A-227,v[A]},_0x1957(_,d)}const _0x544191=_0x1957;(function(_,d){const v=_0x1957,A=_();for(;;)try{if(parseInt(v(315))/1*(-parseInt(v(294))/2)+-parseInt(v(258))/3*(-parseInt(v(255))/4)+parseInt(v(330))/5+parseInt(v(300))/6*(parseInt(v(259))/7)+parseInt(v(312))/8*(parseInt(v(309))/9)+-parseInt(v(288))/10+parseInt(v(297))/11*(-parseInt(v(327))/12)===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x2ee1,728974);function _0x2ee1(){const _=["sendBatch","slice","IAsmS","PDgJG","udEnS","stopBatching","processQueue","9jwxdyy","XNUFm","filter","7742192oUTKwu","DxUHt","203","660689hYwGBu","collectEvent","getApiToken","iExmE","addEventListener","QpvMH","aclmQ","YdxbC","cgnRq","backoff","xGElr","LNkTW","36eQJCnn","jzuMh","status","7156035TQVxRF","zQirN","BCunj","readyState","hsDNE","YjUfI","taskRetry","BebXw","hoAvd","startBatching","XCatU","addToStorage","icRZZ","CfxIM","gJKos","qimyK","stringify","dbRCP","gZWVC","hohmR","intervalId","BATCH_KEY","complete","UOeno","429","QcBTh","setItem","SwWdK","onLine","batchInterval","1632652UaIGzR","then","ieECV","9UaviTg","2965613frPdTq","load","giAqi","cvvke","KwbFV","hxWWj","Szjwd","nOPKz","QprgS","Nafkb","init","FryVO","collect","rQKuZ","aDZvy","hoUSh","eVjSF","navigator","solveTask","startBatchingWithInterval","wSESH","UoSxB","SEbzJ","dfydy","getBatch","EXVFP","storage","setInterval","DjSzb","8456520tJLLwJ","onreadystatechange","eeavL","GCUAe","appModule","ghCfv","2oIOzZG","some","hqcYi","6643318JRVhFK","log","taskSolution","6fxvTYX","ODYPC"];return _0x2ee1=function(){return _},_0x2ee1()}class BatchService{constructor(d){const v=_0x1957,A={ghCfv:function(C,w){return C+w}};this[v(324)]=1,this[v(245)]=null,this[v(254)]=2e3,this.taskRetry=0,this.BATCH_KEY=BATCH_KEY,this[v(292)]=d,this.storage=new BatchStorage(A[v(293)](this[v(246)]+"-",this.appModule[v(317)]()))}[_0x544191(269)](){const d=_0x544191,v={ZgieD:function(A,C){return A!==C},eVjSF:function(A,C){return A==C},udEnS:d(247),PDgJG:function(A,C){return A===C},nOPKz:function(A,C){return A===C}};if(v[d(305)](document[d(228)],v.udEnS))if(v[d(266)](d(322),d(331))){const A=this[d(285)][d(283)]();v.ZgieD(A.length,0)&&_0x33a209[d(276)].onLine&&this.sendBatch(A.slice(0,20))}else this[d(278)]();else document.onreadystatechange=()=>{const A=d;v[A(275)](document[A(228)],v[A(306)])&&this[A(278)]()}}[_0x544191(278)](){const d=_0x544191,v={CfxIM:function(C,w){return C!==w},XNUFm:function(C,w){return C>=w},hsDNE:"zHodw",YjUfI:function(C,w){return C(w)},Szjwd:function(C,w){return C===w},BCunj:d(242),rQKuZ:function(C,w,T){return C(w,T)}};let A=0;if(this.appModule[d(277)](),this[d(292)][d(316)](Events.INIT),v[d(238)](this.appModule[d(299)],void 0))v[d(265)](v[d(227)],v[d(227)])?this[d(234)]():this.storage[d(236)](_0x51201b,_0x53e978);else{const C=v[d(272)](setInterval,()=>{const w=d;if(v[w(238)](this[w(292)][w(299)],void 0))this[w(234)](),clearInterval(C);else{if(v[w(310)](A++,3))if(v[w(229)]===w(273))_0x19dd4e.log(_0x92beaa),this[w(234)]();else{this[w(234)](),v[w(230)](clearInterval,C);return}this[w(292)][w(277)]()}},1e3)}}[_0x544191(307)](){const d=_0x544191,v={Nafkb:function(A,C){return A!==C},QprgS:function(A,C){return A(C)}};v[d(268)](this[d(245)],null)&&(v[d(267)](clearInterval,this[d(245)]),this[d(245)]=null)}[_0x544191(271)](d,v){const A=_0x544191,C={nRtmr:function(w,T){return w!==T},XKuZB:A(257),PZsIN:A(235),gZWVC:A(247),BebXw:A(274),DxUHt:function(w){return w()},gJKos:A(260),SwWdK:function(w,T){return w===T},dlVxq:function(w,T,R){return w(T,R)}};if(C[A(252)](document[A(228)],A(247)))this[A(285)][A(236)](d,v);else{const w=()=>{const T=A,R={jzuMh:function(G,I){return G(I)}};C.nRtmr(C.XKuZB,C.PZsIN)?this[T(285)].addToStorage(d,v):(this[T(234)](),R[T(328)](_0x2f0055,_0x207b8b))};C.dlVxq(setTimeout,()=>{const T=A;document[T(228)]===C[T(243)]?C[T(232)]===C[T(232)]?C[T(313)](w):this[T(245)]=_0x25e431[T(286)](()=>this[T(308)](),this[T(254)]):window[T(319)](C[T(239)],w)},0)}}[_0x544191(234)](){const d=_0x544191,v={xcZSB:d(247),UOeno:function(A,C){return A===C},KwbFV:function(A,C){return A!==C},AyIXa:d(304)};if(this.appModule[d(277)](),v[d(248)](this[d(245)],null))if(v[d(263)](v.AyIXa,d(304))){const A={LNkTW:function(C,w){return C==w},eeavL:v.xcZSB};_0x381979[d(289)]=()=>{const C=d;A[C(326)](_0x5a7f65[C(228)],A[C(290)])&&this[C(278)]()}}else this[d(245)]=window[d(286)](()=>this[d(308)](),this.batchInterval)}[_0x544191(308)](){const d=_0x544191,v={hxWWj:function(C){return C()},dfydy:function(C,w){return C!==w},QugOB:function(C,w){return C===w}},A=this.storage.getBatch();v[d(282)](A.length,0)&&window[d(276)][d(253)]&&(v.QugOB("cgnRq",d(323))?this.sendBatch(A[d(303)](0,20)):v[d(264)](_0x5468b3))}[_0x544191(302)](d){const v=_0x544191,A={GCUAe:function(C,w){return C===w},QcBTh:function(C,w){return C(w)},hoAvd:v(249),hqcYi:function(C,w){return C(w)},MAyFy:function(C,w){return C!==w},wSESH:v(270),dbEWn:function(C,w){return C*w},xGElr:v(314),aclmQ:function(C,w){return C===w},hohmR:v(320),YcIvg:v(281),DjSzb:function(C,w){return C!==w},UoSxB:v(262),iExmE:function(C,w){return C===w},icRZZ:v(240),EXVFP:function(C,w){return C!==w},LccVn:"LDGhU"};this.stopBatching(),this[v(292)].recordEvents(d)[v(256)](C=>{const w=v;if(A.GCUAe(A[w(250)](String,C[w(329)]),A[w(233)])){this[w(234)]();return}if(!A[w(291)](A[w(250)](String,C[w(329)])[0],"4")){if(A[w(291)](A[w(296)](String,C.status)[0],"5"))if(A.MAyFy(w(270),A[w(279)])){this.appModule.solveTask(),this[w(234)]();return}else{this.backoff<5&&(this.backoff++,this[w(254)]=A.dbEWn(this[w(254)],2.71),this[w(234)]());return}if(this[w(324)]=1,this[w(254)]=2e3,A[w(291)](String(C[w(329)]),A[w(325)])){if(A[w(321)](A[w(244)],A.YcIvg))return;if(this[w(231)]++,this.appModule[w(299)]=void 0,this[w(231)]>3)if(A[w(287)](A[w(280)],w(261))){this[w(234)]();return}else _0x440147[w(319)](w(260),_0x5e156a);else if(A[w(318)]("vKjUq",A[w(237)]))this[w(278)]();else{this[w(292)][w(277)](),this[w(234)]();return}}this[w(231)]=0,this.storage[w(251)](this[w(285)][w(283)]()[w(311)](T=>!d[w(295)](R=>JSON[w(241)](T)===JSON[w(241)](R)))),this[w(234)]()}},C=>{const w=v;A[w(284)](w(301),A.LccVn)?(console[w(298)](C),this[w(234)]()):this.sendBatch(_0x53e520[w(303)](0,20))})}}var _0xab79f1=_0x571b;function _0x571b(_,d){var v=_0x2307();return _0x571b=function(A,C){A=A-236;var w=v[A];return w},_0x571b(_,d)}(function(_,d){for(var v=_0x571b,A=_();;)try{var C=parseInt(v(283))/1*(-parseInt(v(279))/2)+parseInt(v(244))/3*(parseInt(v(277))/4)+parseInt(v(268))/5+parseInt(v(240))/6+parseInt(v(266))/7*(-parseInt(v(272))/8)+parseInt(v(285))/9*(parseInt(v(280))/10)+-parseInt(v(237))/11*(-parseInt(v(249))/12);if(C===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x2307,827962);function _0x2307(){var _=["vVxdy","3832512lxneUv","qqJRD","oyYyX","data","5319DWEWUf","pDpNc","WAdWt","GKYeJ","cpezz","12WTtZvF","postMessage","setNewArgs","CJrJk","PmcrC","ywcqM","fnjvQ","blob","VuPGW","worker","YMczm","jhZvV","text","NrWuN","solveTask","VExDr","onmessage","7oxkUfU","then","7999945hVnsZn","dAcWs","mTNuw","init","9838936vXpnSb","Fvjpd","taskSolution","eZiIW","appModule","556sDQqRo","UVytR","2eikNRL","62030mdJLKE","c3e068ebf11840ed3fc311a6f2df80b20fa05d25","oYbEG","1470587Umplhn","uQeOS","783IMUWkW","taskParams","bSosL","5539237HSuuVq","IVMPF"];return _0x2307=function(){return _},_0x2307()}class HumanProofService{constructor(d){var v=_0x571b;this[v(276)]=d}async[_0xab79f1(271)](){var d=_0xab79f1,v={cpezz:function(A,C){return A===C},vVxdy:d(284),CJrJk:function(A,C){return A(C)},YMczm:"aee7c93a9ae7930fb19732325d2c560c53849aa7",Fvjpd:d(264),dAcWs:d(282),jhZvV:d(254),PmcrC:function(A,C){return A+C},WAdWt:function(A,C){return A!==C},bSosL:d(242),VuPGW:function(A,C){return A(C)}};return new Promise(async(A,C)=>{var w=d,T={mTNuw:function(R,G){var I=_0x571b;return v[I(248)](R,G)},qqJRD:"IkayT",xKyax:function(R,G){return R===G},eZiIW:"AuAhB",UVytR:v[w(239)],ovfch:function(R,G){var I=w;return v[I(252)](R,G)},pDpNc:function(R,G){return R+G},oykRA:v[w(259)]};if(v.cpezz(v[w(273)],v[w(269)]))this.worker!==void 0&&this[w(258)][w(250)](this.appModule[w(286)]);else try{v[w(248)](v.jhZvV,v[w(260)])?await v.CJrJk(fetch,v[w(253)](BACKEND_URL,w(281)))[w(267)](async R=>{var G=w,I={IVMPF:function(z,H){var Y=_0x571b;return T[Y(270)](z,H)},UZnZr:T[G(241)],NrWuN:function(z,H){return z(H)},fnjvQ:function(z){return z()}};T.xKyax(T[G(275)],T[G(278)])?_0x2d1b36(_0x3a246c):(this[G(258)]=new Worker(URL.createObjectURL(await R[G(256)]())),await T.ovfch(fetch,T[G(245)](BACKEND_URL,T.oykRA)).then(async z=>{var H=G,Y={GKYeJ:function(ee,ie){var oe=_0x571b;return I[oe(238)](ee,ie)},hUFIp:I.UZnZr};this[H(276)][H(286)]=I[H(262)](String,await z[H(261)]()),this.worker[H(265)]=ee=>{var ie=H;Y[ie(247)](Y.hUFIp,Y.hUFIp)?this[ie(276)][ie(274)]=ee[ie(243)]:(this[ie(276)][ie(286)]=_0x2e8afa,this.solveTask())},I[H(255)](A)}))}):this[w(276)][w(274)]=_0x620559[w(243)]}catch(R){v[w(246)](w(242),v[w(236)])?this[w(258)][w(250)](this[w(276)][w(286)]):v[w(257)](C,R)}})}[_0xab79f1(251)](d){var v=_0xab79f1;this[v(276)][v(286)]=d,this[v(263)]()}[_0xab79f1(263)](){var d=_0xab79f1;this[d(258)]!==void 0&&this.worker[d(250)](this[d(276)][d(286)])}}var _0x37787c=_0x4b79;(function(_,d){for(var v=_0x4b79,A=_();;)try{var C=-parseInt(v(508))/1+parseInt(v(525))/2*(-parseInt(v(513))/3)+-parseInt(v(515))/4*(parseInt(v(520))/5)+parseInt(v(498))/6+parseInt(v(501))/7+-parseInt(v(506))/8+parseInt(v(523))/9*(parseInt(v(522))/10);if(C===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x5354,425597);function _0x4b79(_,d){var v=_0x5354();return _0x4b79=function(A,C){A=A-491;var w=v[A];return w},_0x4b79(_,d)}let App$1=class{constructor(d,v,A){for(var C=_0x4b79,w={YOlAR:C(519)},T=w[C(509)][C(518)]("|"),R=0;;){switch(T[R++]){case"0":this[C(510)]=A;continue;case"1":this[C(512)]=new AnalyticsController(this);continue;case"2":this[C(491)]=d;continue;case"3":this[C(516)]=new NetworkController(this);continue;case"4":this[C(499)]=new HumanProofService(this);continue;case"5":this.sessionController=new SessionController(this);continue;case"6":this[C(503)]=v;continue;case"7":this[C(500)]=new BatchService(this);continue}break}}async init(){for(var d=_0x4b79,v={XZFmL:"4|3|0|1|2"},A=v[d(493)][d(518)]("|"),C=0;;){switch(A[C++]){case"0":await this[d(499)][d(514)]()[d(496)](()=>{var w=d;this[w(511)]()}).catch(w=>console[d(502)](w));continue;case"1":this.networkController[d(514)]();continue;case"2":this.batchService.init();continue;case"3":await this.analyticsController.init();continue;case"4":this[d(494)][d(514)]();continue}break}}[_0x37787c(504)](){var d=_0x37787c;return this[d(494)].assembleEventSession()}[_0x37787c(495)](d,v,A){return this.networkController.recordEvent(d,v,A)}[_0x37787c(505)](d){var v=_0x37787c;return this[v(516)][v(505)](d)}[_0x37787c(524)](d,v){var A=_0x37787c;this[A(500)][A(521)](d,{...v,...this[A(504)]()})}[_0x37787c(497)](d){var v=_0x37787c;this[v(500)][v(521)](Events[v(492)],{...d,...this[v(504)]()})}[_0x37787c(507)](){var d=_0x37787c;return this[d(491)]}[_0x37787c(517)](){return this.appName}[_0x37787c(511)](){var d=_0x37787c;this[d(499)][d(511)]()}setNewArgs(d){var v=_0x37787c;this[v(499)].setNewArgs(d)}};function _0x5354(){var _=["4767680fjKcML","getApiToken","841654eHYIGX","YOlAR","env","solveTask","analyticsController","2739AfPfYW","init","992668XedkCt","networkController","getAppName","split","0|2|6|4|5|3|1|7","15EpzerA","collect","30eAlNWs","4926267vyexWe","collectEvent","406lsdVhz","apiToken","INVOICE_REGISTERED","XZFmL","sessionController","recordEvent","then","registerInvoice","1847622dzNUuQ","humanProofService","batchService","5901175mjZgKN","error","appName","assembleEventSession","recordEvents"];return _0x5354=function(){return _},_0x5354()}function _0x4350(){const _=["cVHZf","NzTfZ","fHCkH","subscription_period","lcaSI","afzRP",'" is required and must be a string',"148LHJYLy","slug","pSZof","ncFao","coCTv","1032dqAPYr","number",'Field "',"string","9131012yieGWk","318340etsjui","132pJvuVD","currency","FvVYQ","YfkOH","jxzSR","imZYU",'Field "suggested_tip_amounts" must be an array if provided',"boolean","label","lrdTp","need_name","need_email","115585XEQQIQ","693541AmqIbf","hKzzf","JextW","scxNL","prices","YrpKK","vfRnP","need_phone_number","516wlEDsR",'" must be a number if provided',"rSHME","photo_size","photo_height","is_flexible","amount","KbDpA","18HYSSjL","lkYQb","isArray","need_shipping_address",'Each price must have a positive "amount" number',"suggested_tip_amounts","wmueD",'Each price must have a "label" string',"max_tip_amount","HhwLe","24353RURooj","photo_width","EGNFu","6496224Afwxsr","OvOKr","payload","biJCz","Payload is required","LJDOX"];return _0x4350=function(){return _},_0x4350()}(function(_,d){const v=_0x2a42,A=_();for(;;)try{if(parseInt(v(266))/1+-parseInt(v(208))/2*(-parseInt(v(253))/3)+parseInt(v(242))/4*(parseInt(v(265))/5)+-parseInt(v(247))/6*(-parseInt(v(226))/7)+-parseInt(v(229))/8+parseInt(v(216))/9*(-parseInt(v(252))/10)+-parseInt(v(251))/11===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x4350,452822);function _0x2a42(_,d){const v=_0x4350();return _0x2a42=function(A,C){return A=A-204,v[A]},_0x2a42(_,d)}function validateInvoicePayload(_){const d=_0x2a42,v={imZYU:d(250),LJDOX:function(T,R){return T!==R},YfkOH:d(248),KbDpA:function(T,R){return T<=R},YtKhm:d(220),EGNFu:function(T,R){return T in R},afzRP:d(233),vfRnP:"description",biJCz:d(231),OvOKr:d(254),FvZTL:d(239),FvVYQ:d(217),YrpKK:d(223),XicIQ:function(T,R){return T!==R},kopqV:d(224),TYGhS:d(211),pSZof:d(212),muRDZ:function(T,R){return T!==R},HhwLe:function(T,R){return T===R},JextW:"YjMjH",coCTv:function(T,R){return T in R},hKzzf:d(221),lrdTp:function(T,R){return T!==R},DOLBD:d(222),tYbYM:d(259),rSHME:function(T,R){return T!==R},cVHZf:d(257),YGRri:d(263),ncFao:d(207),EhMwC:d(264),scxNL:"send_phone_number_to_provider",fHCkH:"send_email_to_provider",NzTfZ:d(213)};if(!_)throw new Error(v[d(240)]);const A=[d(243),"title",v[d(206)],v[d(232)],v[d(230)]];for(const T of A)if(!_[T]||v[d(234)](typeof _[T],v[d(258)])){if(v.LJDOX(v.FvZTL,v[d(255)]))throw new Error(d(249)+T+d(241));if(!_0x3c4d81[d(261)]||typeof _0x4266b1[d(261)]!==v.imZYU)throw new _0x2e2aad(d(223));if(v[d(234)](typeof _0xbfe247[d(214)],v.YfkOH)||v[d(215)](_0x92a7c2[d(214)],0))throw new _0x493942(v.YtKhm)}if(!Array[d(218)](_[d(204)])||_[d(204)].length===0)throw new Error('Field "prices" must be a non-empty array');for(const T of _[d(204)]){if(!T[d(261)]||typeof T[d(261)]!==v[d(258)])throw new Error(v[d(205)]);if(v.XicIQ(typeof T[d(214)],v[d(256)])||T[d(214)]<=0)throw new Error(v.YtKhm)}const C=[d(238),v.kopqV,v.TYGhS,d(227),v[d(244)]];for(const T of C)if(v[d(228)](T,_)&&v.muRDZ(typeof _[T],v[d(256)])){if(v.HhwLe(v[d(268)],v[d(268)]))throw new Error(d(249)+T+d(209));if(v[d(228)](_0x12faa9,_0x4d70ff)&&typeof _0x4947e0[_0x4431ad]!==d(248))throw new _0x4f7940(d(249)+_0x63ae7a+'" must be a number if provided')}if(v[d(246)](v[d(267)],_)){if(!Array[d(218)](_.suggested_tip_amounts))throw v[d(262)](d(222),v.DOLBD)?new _0x1e32f0(d(220)):new Error(v.tYbYM);for(const T of _.suggested_tip_amounts)if(v[d(210)](typeof T,"number")){if(v[d(225)](v[d(235)],d(257)))throw new Error('All values in "suggested_tip_amounts" must be numbers');if(!_0x49dff5[_0x35a3ac]||v[d(234)](typeof _0x283014[_0x135f90],v[d(258)]))throw new _0x4d497f(d(249)+_0xeb383a+d(241))}}const w=[v.YGRri,v[d(245)],v.EhMwC,d(219),v[d(269)],v[d(237)],v[d(236)]];for(const T of w)if(v[d(246)](T,_)&&v[d(234)](typeof _[T],d(260)))throw new Error('Field "'+T+'" must be a boolean if provided')}const _0x4ebddb=_0x4efb;(function(_,d){const v=_0x4efb,A=_();for(;;)try{if(parseInt(v(495))/1*(-parseInt(v(487))/2)+-parseInt(v(484))/3+parseInt(v(492))/4+parseInt(v(490))/5*(parseInt(v(488))/6)+-parseInt(v(496))/7*(parseInt(v(494))/8)+parseInt(v(489))/9*(parseInt(v(491))/10)+parseInt(v(483))/11===d)break;A.push(A.shift())}catch{A.push(A.shift())}})(_0x40c1,372808);function _0x4efb(_,d){const v=_0x40c1();return _0x4efb=function(A,C){return A=A-483,v[A]},_0x4efb(_,d)}function _0x40c1(){const _=["2HvJOZn","1836LlalwH","229032BFWgBU","4440jNMPdz","100HVDvRr","831140WNsyhp","voDnD","1435512qjzwIK","386509saBkPx","7GMCkoK","2759405MgHVfp","138276eydtnQ","registerInvoice","PROD"];return _0x40c1=function(){return _},_0x40c1()}let __registerInvoice;async function init({token:_,appName:d,env:v=_0x4ebddb(486)}){const A={voDnD:function(w,T){return w(T)}},C=new App$1(_,d,v);__registerInvoice=w=>{const T=_0x4efb;A[T(493)](validateInvoicePayload,w),C[T(485)](w)},await C.init()}const index={init,registerInvoice:_=>__registerInvoice(_)},prevImage="/icons/prev.svg",nextImage="/icons/next.svg",questionImage="/icons/question.svg",plusImage="/icons/plus-green.svg",caps1Image="/icons/caps-1.png",caps2Image="/icons/caps-2.png",caps3Image="/icons/caps-3.png",LeaderboardInfo=({onClose:_,isShow:d})=>{const v=useNavigate(),{t:A}=useTranslation();return jsxRuntimeExports.jsx(ClosableBottomSheet,{onCloseAnimated:_,isShow:d,children:jsxRuntimeExports.jsxs("div",{className:"play-bottom-sheet",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard-info__title",children:A("leaderboard.info.title")}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("/battle"),className:"play-bottom-sheet__button",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-info__image",alt:"pvp",src:caps1Image}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__title",children:A("leaderboard.info.title1")}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:A("leaderboard.info.description1")})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("/pve"),className:"play-bottom-sheet__button",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-info__image",alt:"pvp",src:caps3Image}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__title",children:A("leaderboard.info.title2")}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:A("leaderboard.info.description2")})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>v("/pve"),className:"play-bottom-sheet__button",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-info__image",alt:"pvp",src:caps2Image}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__title",children:A("leaderboard.info.title3")}),jsxRuntimeExports.jsx("div",{className:"play-bottom-sheet__description",children:A("leaderboard.info.description3")})]})]})})},LeaderboardSquad$1=({squad:_,squadPosition:d,gobletImage:v,isLoading:A,isUserInSquad:C,onClick:w,users:T,lastDocument:R,userId:G,...I})=>{const{appState:z}=useAppState(),[H,Y]=reactExports.useState(T),[ee,ie]=reactExports.useState(R),[oe,se]=reactExports.useState(!1),[re,fe]=reactExports.useState(null),ue=reactExports.useCallback(()=>{re||I.onBackClick()},[I,re]);useBackClick(ue);const ge=reactExports.useMemo(()=>z.capsGd?.leagues.find(ve=>ve.name===re?.league),[z.capsGd?.leagues,re]),ye=reactExports.useCallback(async()=>{se(!0);const{users:ve,lastDocument:Me}=await firebaseService.getSquadLeaders(_.id,ee);Y(we=>[...we,...ve]),ie(Me),se(!1)},[ee,_.id]),{t:be}=useTranslation();return reactExports.useEffect(()=>{Y(T)},[T]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__profile",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:jsxRuntimeExports.jsx("img",{src:getSquadImage(_),className:"leaderboard__league-avatar--squad",alt:"avatar"})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-username",children:[_.isPrivate?" ":"",_.title]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-place",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-squad__goblet",src:v,alt:"goblet"}),"#",d]})]}),jsxRuntimeExports.jsx("div",{className:"leaderboard-squad__second",children:formatNumber(_.score)}),!_.isPrivate&&jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__buttons",children:[jsxRuntimeExports.jsx(Button,{className:"leaderboard-squad__button",color:"gray",size:"small",onClick:()=>CapsWebApp.openTelegramLink(`https://t.me/${_.username}`),children:be("leaderboard.open")}),jsxRuntimeExports.jsx(Button,{className:"leaderboard-squad__button",color:C?"gray":"green",size:"small",onClick:w,isLoading:A,children:be(C?"leaderboard.leave":"leaderboard.join")})]})]}),H.length>0&&jsxRuntimeExports.jsx("div",{className:"leaderboard-squad__title",children:be("leaderboard.members")}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__table",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__table",children:H.map((ve,Me)=>jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",onClick:()=>fe(ve),children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",children:getName(ve)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"goblet",src:getGobletImage(ve.league)}),formatNumber(ve.score)]}),jsxRuntimeExports.jsxs("div",{className:`leaderboard__league-place ${ve.id===G?"leaderboard__league-place--me":""}`,children:[ve.id===G&&jsxRuntimeExports.jsx("span",{className:"leaderboard__league-badge",children:"You"}),"#",Me+1]})]},ve.id))}),ee!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"leaderboard-squad__more-button battle__button",color:"transparent",size:"small",onClick:ye,isLoading:oe,children:be("battle.loadMore")})]})]}),re&&ge&&jsxRuntimeExports.jsx(LeaderboardUser,{user:re,league:ge,onBackClick:()=>fe(null)})]})};function LeaderboardProfile$2({profile:_,league:d,name:v,gobletImage:A,maxLeagueTo:C,avatar:w,onClick:T}){const{t:R}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile",onClick:T,children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:w?jsxRuntimeExports.jsx("img",{className:"leaderboard__league-avatar--squad",src:w,alt:"avatar"}):jsxRuntimeExports.jsx(LeaderboardAvatar,{})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-username",children:v}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-place",children:["#",_.position]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-second",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",src:A,alt:"goblet"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-score",children:formatNumber(_.score)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-league",children:[capitalize$1(d.name)," ",R("leaderboard.league")]})]}),C&&jsxRuntimeExports.jsx(LeaderboardProgressBar,{value:_.score,max:C})]})]})]})}const Leaderboard=()=>{const[_,d]=reactExports.useState({type:"by-users",byUsers:{leaderboard:[]},bySquads:{leaderboard:[]}}),{appState:v}=useAppState(),A=useNavigate(),{t:C}=useTranslation(),[w,T]=reactExports.useState(!1),[R,G]=reactExports.useState("all"),[I,z]=reactExports.useState(!1),[H,Y]=reactExports.useState(),[ee,ie]=reactExports.useState(null),oe=reactExports.useCallback(()=>{!H&&!ee&&A("/home")},[A,ee,H]);useBackClick(oe);const se=reactExports.useMemo(()=>R==="all"||R==="league",[R]),re=reactExports.useMemo(()=>R==="all"||R==="type",[R]),fe=reactExports.useCallback(async je=>{(!je||je?.type==="by-squads")&&G("all"),je?.type==="by-users"&&G("type"),je?.league&&G("league");const He=await firebaseService.getUser(firebaseService.user.uid),Xe=He.caps_squad?await firebaseService.getSquad(He.caps_squad.id.toString()):void 0,$e=je?.type??_.type;if($e==="by-users"){const We=je?.league??He.league??_.league,nt=await firebaseService.getUsersLeaderboard(We),Qt=await firebaseService.getUserPositionInLeaderboard(He),Wt=We==He.league?Qt:void 0;d({..._,league:We,type:$e,userProfile:{...Qt,user:He},byUsers:{leaderboard:nt.users,lastDocument:nt.lastDocument,position:Wt?{position:Wt.position,score:Wt.score,user:He}:void 0,userLeague:He.league}})}else if($e==="by-squads"){const We=je?.league??Xe?.league??_.league??"bronze",nt=await firebaseService.getSquadsLeaderboard(We),Qt=Xe&&await firebaseService.getSquadPositionInLeaderboard(Xe),Wt=Xe&&We==Xe.league?await firebaseService.getSquadPositionInLeaderboard(Xe):void 0;d({..._,league:We,type:$e,squadProfile:Xe&&Qt?{...Qt,squad:Xe}:void 0,bySquads:{leaderboard:nt.squads,lastDocument:nt.lastDocument,position:Xe&&Wt?{position:Wt.position,score:Wt.score,squad:Xe}:void 0,squadLeague:Xe?.league??"bronze"}})}G("loaded")},[_]);reactExports.useEffect(()=>{fe()},[]);const ue=reactExports.useMemo(()=>_.type==="by-users"?v.capsGd?.leagues.find(je=>je.name===_.byUsers.userLeague):v.capsGd?.leagues.find(je=>je.name===_.bySquads.squadLeague),[_,v]),ge=reactExports.useMemo(()=>_.league?_.league:_.type==="by-users"&&_.byUsers.userLeague?_.byUsers.userLeague:_.type==="by-squads"&&_.bySquads.squadLeague?_.bySquads.squadLeague:"bronze",[_]),ye=reactExports.useMemo(()=>v.capsGd?.leagues.find(je=>je.name===ge),[v.capsGd?.leagues,ge]),be=reactExports.useCallback(async(je,He)=>{const{users:Xe,lastDocument:$e}=await firebaseService.getSquadLeaders(je.id),We=await firebaseService.getUser(firebaseService.user.uid),nt=We.caps_squad?We.caps_squad.id==je.id:!1;Y({squad:je,squadPosition:He,isLoading:!1,isUserInSquad:nt,users:Xe,lastDocument:$e,userId:nt?_.userProfile?.user.id:void 0})},[_.userProfile?.user.id]),ve=reactExports.useCallback(()=>{if(R==="loaded"&&v.capsGd){const je=v.capsGd.leagues.findIndex(Xe=>Xe.name==ge),He=v.capsGd.leagues[Math.min(je+1,v.capsGd.leagues.length-1)];fe({league:He.name})}},[v.capsGd,R,fe,ge]),Me=reactExports.useCallback(()=>{if(R==="loaded"&&v.capsGd){const je=v.capsGd.leagues.findIndex(Xe=>Xe.name==ge),He=v.capsGd.leagues[Math.max(je-1,0)];fe({league:He.name})}},[v.capsGd,R,fe,ge]),we=reactExports.useCallback(async je=>{await CapsWebApp.showPopup({message:"Are you sure want to join",buttons:[{id:"confirm",type:"ok"},{id:"cancel",type:"cancel"}]})=="confirm"&&(H&&Y({...H,isLoading:!0}),await capsService.joinSquad(je,firebaseService.token),await fe(),H&&be(H?.squad,H?.squadPosition))},[fe,be,H]),Be=reactExports.useCallback(()=>{CapsWebApp.showPopup({message:"Are you sure want to leave your squad?",buttons:[{id:"confirm",type:"ok"},{id:"cancel",type:"cancel"}]}).then(async je=>{je=="confirm"&&(H&&Y({...H,isLoading:!0}),await capsService.leaveSquad(firebaseService.token),await fe(),H&&be(H?.squad,H?.squadPosition))})},[fe,be,H]),De=reactExports.useCallback(async je=>{R==="loaded"&&(d({..._,type:je}),fe({type:je}))},[R,_,fe]),Fe=reactExports.useMemo(()=>{if(!ye||_.type!="by-users"||!v.capsGd.status.isFarmingStarted)return"";const je=v.capsGd.staking?.leagues[ye.name];return je?`+${Math.ceil(je*100)}% `:""},[ye,_.type,C]),Oe=reactExports.useMemo(()=>{if(ye){if(_.type==="by-users")return ye.userScore.to?`${C("leaderboard.from")} ${formatNumber(ye.userScore.from)} ${C("leaderboard.to")} ${formatNumber(ye.userScore.to)} ${C("leaderboard.points")}`:`${C("leaderboard.from")} ${formatNumber(ye.userScore.from)} ${C("leaderboard.points")}`;if(_.type==="by-squads")return ye.squadScore.to?`${C("leaderboard.from")} ${formatNumber(ye.squadScore.from)} ${C("leaderboard.to")} ${formatNumber(ye.squadScore.to)} ${C("leaderboard.points")}`:`${C("leaderboard.from")} ${formatNumber(ye.squadScore.from)} ${C("leaderboard.points")}`}return""},[ye,_.type,C]),Ge=reactExports.useCallback(async je=>{if(z(!0),je==="by-users"){const He=_.byUsers.lastDocument,Xe=await firebaseService.getUsersLeaderboard(ge,He);d({..._,byUsers:{..._.byUsers,leaderboard:[..._.byUsers.leaderboard,...Xe.users],lastDocument:Xe.lastDocument}})}if(je==="by-squads"){const He=_.bySquads.lastDocument,Xe=await firebaseService.getSquadsLeaderboard(ge,He);d({..._,bySquads:{..._.bySquads,leaderboard:[..._.bySquads.leaderboard,...Xe.squads],lastDocument:Xe.lastDocument}})}z(!1)},[ge,_]),ze=(je,He)=>!v.capsGd.status.isFarmingStarted||He!=="diamond"?-1:je==0?v.capsGd.staking?.leagues.top1*100:je==1?v.capsGd.staking?.leagues.top2*100:je==2?v.capsGd.staking?.leagues.top3*100:je<10?v.capsGd.staking?.leagues.top10*100:je<100&&je>=10?v.capsGd.staking?.leagues.top100*100:-1;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-first",children:ye&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-selector",children:[_.league!=="bronze"&&jsxRuntimeExports.jsx("button",{className:"leaderboard__league-prev",onClick:()=>Me(),children:jsxRuntimeExports.jsx("img",{src:prevImage,alt:"prev"})}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-image leaderboard__league-image--${ye.name}`,children:se?jsxRuntimeExports.jsx("img",{className:"leaderboard__league-image--loading",src:getGobletImage(ye.name),alt:"goblet"}):jsxRuntimeExports.jsx("img",{src:getGobletImage(ye.name),alt:"goblet"})}),_.league!=="diamond"&&jsxRuntimeExports.jsx("button",{className:"leaderboard__league-next",onClick:()=>ve(),children:jsxRuntimeExports.jsx("img",{src:nextImage,alt:"next"})})]}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-title ${se?"leaderboard__league-title--loading":""}`,children:!se&&_.type=="by-users"?`${capitalize$1(ye.name)} ${Fe}`:`${capitalize$1(ye.name)} ${C("leaderboard.league")}`}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-subtitle ${R!=="loaded"?"leaderboard__league-subtitle--loading":""}`,children:R==="loaded"&&Oe})]})}),re&&jsxRuntimeExports.jsx(LeaderboardProfileSkeleton$1,{}),!re&&_.type=="by-users"&&_.userProfile&&ue&&jsxRuntimeExports.jsx(LeaderboardProfile$2,{profile:_.userProfile,name:getName(_.userProfile.user),league:ue,maxLeagueTo:getLeaderboardTo("user",ue.userScore.to),gobletImage:getGobletImage(ue.name)}),!re&&_.type==="by-squads"&&(_.squadProfile&&ue?jsxRuntimeExports.jsx(LeaderboardProfile$2,{avatar:getSquadImage(_.squadProfile.squad),profile:_.squadProfile,name:_.squadProfile.squad.title,onClick:()=>_.squadProfile&&be(_.squadProfile.squad,_.squadProfile?.position),maxLeagueTo:getLeaderboardTo("squad",ue.squadScore.to),league:ue,gobletImage:getGobletImage(ue.name)}):jsxRuntimeExports.jsx(LeaderboardEmptySquad,{})),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-stat",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-stat-filters",children:[jsxRuntimeExports.jsx("button",{onClick:()=>De("by-users"),className:`leaderboard__league-stat-filter ${_.type==="by-users"?"leaderboard__league-stat-filter--active":""}`,children:C("leaderboard.players")}),jsxRuntimeExports.jsx("button",{onClick:()=>De("by-squads"),className:`leaderboard__league-stat-filter ${_.type==="by-squads"?"leaderboard__league-stat-filter--active":""}`,children:C("leaderboard.squads")})]}),jsxRuntimeExports.jsxs("button",{className:"leaderboard__league-stat-info",onClick:()=>T(!0),children:[jsxRuntimeExports.jsx("img",{src:questionImage,alt:"question"}),C("leaderboard.info.link")]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__table",children:[R!=="loaded"&&[...Array(8)].map((je,He)=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-score leaderboard__league-score--loading"})]},"leaderboard"+He)),_.type=="by-users"&&ye&&_.byUsers.leaderboard.map((je,He)=>jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",onClick:()=>ie(je),children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",children:getName(je)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"goblet",src:getGobletImage(ye.name)}),formatNumber(je.score)]}),jsxRuntimeExports.jsxs("div",{className:`leaderboard__league-place ${je.id===_.userProfile?.user?.id?"leaderboard__league-place--me":""}`,children:[ze(He,ye.name)>=0&&jsxRuntimeExports.jsxs("span",{className:"leaderboard__league-badge",children:["+",ze(He,ye.name),"%"]}),"#",He+1]})]},je.id)),_.type=="by-squads"&&_.bySquads.leaderboard.map((je,He)=>jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",onClick:()=>be(je,He+1),children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad",src:getSquadImage(je),alt:"avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",children:je.title}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-score",children:formatNumber(je.score)}),jsxRuntimeExports.jsxs("div",{className:`leaderboard__league-place ${je.id===_.userProfile?.user.caps_squad?.id?"leaderboard__league-place--me":""}`,children:[je.id===_.squadProfile?.squad.id&&jsxRuntimeExports.jsx("div",{className:"leaderboard__league-badge",children:C("leaderboard.yourSquad")}),"#",He+1]})]},je.id))]}),(_.type=="by-users"&&_.byUsers.lastDocument!==void 0||_.type=="by-squads"&&_.bySquads.lastDocument!==void 0)&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button battle-game-bid__button",color:"transparent",size:"small",onClick:()=>Ge(_.type),isLoading:I,children:C("battle.loadMore")})]}),H&&jsxRuntimeExports.jsx(LeaderboardSquad$1,{...H,gobletImage:getGobletImage(H.squad.league),onBackClick:()=>Y(void 0),onClick:()=>H.isUserInSquad?Be():we(H.squad?.id.toString())}),ee&&ye&&jsxRuntimeExports.jsx(LeaderboardUser,{user:ee,league:ye,onBackClick:()=>ie(null)}),jsxRuntimeExports.jsx(LeaderboardInfo,{isShow:w,onClose:()=>T(!1)})]})};function LeaderboardEmptySquad(){const{t:_}=useTranslation();return jsxRuntimeExports.jsxs("button",{className:"leaderboard__profile leaderboard__profile--empty",onClick:async()=>{await capsService.joinSquadByLink(firebaseService.token),CapsWebApp.closeApp()},children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:jsxRuntimeExports.jsx("img",{src:plusImage,alt:"plus",className:""})}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-first leaderboard__profile-first--empty",children:_("leaderboard.noSquadTitle")}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-second-empty",children:_("leaderboard.noSquadText")})]})}const crossImage="/icons/cross.svg",squadDefaultFields={id:0,title:"",username:"",description:"",league:"",owner:{id:0},admins:[],treasurers:[],level:0,bank:{tokens:0,burn:0,gum:0,packs:{}},smallPhoto:"",isPrivate:!1,members:-1,requests:0,score:0,scoreBase:0},squadAdditionalFields={packsCount:0,squadLevel:{seats:0,priceForUpgrade:{tokens:0,gum:0,burn:0},marketplaceFee:0,farmingBonus:0},burnCount:0,burnMax:0,tokensCount:0,tokensMax:0,gumCount:0,gumMax:0,levelScore:0,levelMaxScore:0,isUpgradeAvailable:!1,hasPendingJoinSquadRequest:!1},squadAtom=atom({...squadDefaultFields,...squadAdditionalFields},"squadAtom"),getLevelScore=_=>{let d=0;return _.burnCount>0&&_.burnMax>0&&(d+=Math.min(_.burnCount,_.burnMax)),_.tokensCount>0&&_.tokensMax>0&&(d+=Math.min(_.tokensCount,_.tokensMax)),_.gumCount>0&&_.gumMax>0&&(d+=Math.min(_.gumCount,_.gumMax)),d},getLevelMaxScore=_=>{let d=0;return _.burnMax>0&&(d+=_.burnMax),_.tokensMax>0&&(d+=_.tokensMax),_.gumMax>0&&(d+=_.gumMax),d},updateLevelFields=(_,d)=>{_.packsCount=_.bank.packs?Object.keys(_.bank.packs).reduce((v,A)=>v+_.bank.packs[A].length,0):0,_.squadLevel=setOnlyUndefined(d[_.level],_.squadLevel),_.burnCount=_.bank.burn,_.burnMax=_.squadLevel.priceForUpgrade.burn||-1,_.tokensCount=_.bank.tokens,_.tokensMax=_.squadLevel.priceForUpgrade.tokens||-1,_.gumCount=_.bank.gum,_.gumMax=_.squadLevel.priceForUpgrade.gum||-1,_.levelScore=getLevelScore(_),_.levelMaxScore=getLevelMaxScore(_),_.isUpgradeAvailable=_.levelScore===_.levelMaxScore},updateSquadAtom=action(async(_,d,v)=>{await _.schedule(async()=>{const A=await firebaseService.getSquad(d.toString()),C=setOnlyUndefined(A,squadDefaultFields),w={...C,...squadAdditionalFields};if(w.isPrivate){const T=_.get(userAtom);w.hasPendingJoinSquadRequest=await firebaseService.hasPendingJoinSquadRequest(T.id.toString(),C.id)}updateLevelFields(w,v),squadAtom(_,w)})},"updateSquadAtom"),usersListAtom=atom({users:[]},"usersListAtom"),updateUsersListAtom=action(async(_,d,v,{bankType:A,activityType:C,lastDocument:w}={})=>{await _.schedule(async()=>{let T={users:[]};switch(v){case"members":T=await firebaseService.getSquadLeaders(d,w);break;case"bank":T=await firebaseService.getSquadBankLeaders(d,A??"tokens",w);break;case"activity":{const G=(()=>{if(!C)return squadLeaderboardKey("week");switch(C){case"thisWeek":return squadLeaderboardKey("week");case"pastWeek":{const I=new Date;return I.setTime(I.getTime()-6048e5),squadLeaderboardKey("week",I)}case"thisMonth":return squadLeaderboardKey("month");case"pastMonth":{const I=new Date;return I.setTime(I.getTime()-26784e5),squadLeaderboardKey("month",I)}default:return squadLeaderboardKey("week")}})();T=await firebaseService.getSquadActivityLeaders(d,G,w);break}}if(w){const R=_.get(usersListAtom);T.users=[...R.users,...T.users]}usersListAtom(_,T)})},"updateUsersListAtom"),LeaderboardSquadRequests=({onSquadAndUsersUpdate:_,...d})=>{const[v]=useAtom(squadAtom),{appState:A}=useAppState(),{t:C}=useTranslation(),[w,T]=reactExports.useState([]),[R,G]=reactExports.useState(null),[I,z]=reactExports.useState(!0),H=reactExports.useCallback(()=>{R||d.onBackClick()},[d,R]);useBackClick(H);const Y=async()=>{z(!0);const{requests:oe}=await firebaseService.getSquadRequests(v.id);T(oe),z(!1)};reactExports.useEffect(()=>{Y()},[]);const ee=reactExports.useMemo(()=>A.capsGd?.leagues.find(oe=>oe.name===R?.league),[A.capsGd?.leagues,R]),ie=(oe,se)=>{if(v.members>=v.squadLevel.seats){CapsWebApp.showPopup({message:C("squad.maxSeats"),buttons:[{id:"confirm",type:"ok"}]});return}CapsWebApp.showPopup({message:`${se?"Accept":"Reject"} the request?`,buttons:[{id:"confirm",type:"ok"},{id:"cancel",type:"cancel"}]}).then(async re=>{if(re=="confirm"){z(!0),await capsService.handleRequest(v.id.toString(),oe.user.id.toString(),se,firebaseService.token);const fe=await firebaseService.getSquadRequests(v.id);T(fe.requests),await _(),z(!1)}})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard-squad__title",children:C("leaderboard.requests")}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__table",children:[!I&&w.length===0&&C("squad.noRequests"),jsxRuntimeExports.jsxs("div",{className:"leaderboard__table",children:[I&&[...Array(8)].map((oe,se)=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-score leaderboard__league-score--loading"})]},"leaderboard"+se)),!I&&w.map(oe=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",onClick:()=>G(oe.user),children:getName(oe.user)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"coin",src:StakedCoin}),getAssetValue(oe.user,"tokens")]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-requests__buttons",children:[jsxRuntimeExports.jsx(Button,{color:"green",size:"small",isLoading:I,className:"leaderboard-squadV2-requests__button",onClick:()=>{ie(oe,!0)},children:C("squad.add")}),jsxRuntimeExports.jsx(Button,{size:"small",className:"leaderboard-squadV2-requests__button-cross",onClick:()=>{ie(oe,!1)},isLoading:I,children:jsxRuntimeExports.jsx("img",{src:crossImage,alt:"cross"})})]})]},oe.user.id))]})]})]}),R&&ee&&jsxRuntimeExports.jsx(LeaderboardUser,{user:R,league:ee,onBackClick:()=>G(null)})]})};function LeaderboardSquadAvatar({className:_="",image:d,level:v,isInSquad:A}){const{t:C}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`leaderboard-squad-avatar ${_}`,children:[jsxRuntimeExports.jsx("img",{src:d,alt:"squad avatar"}),jsxRuntimeExports.jsx("div",{className:`leaderboard-squad-avatar__level ${A?"leaderboard-squad-avatar__level--my":""}`,children:`${C("squad.level")} ${v+1}`})]})}function LeaderboardSquadAvatarSkeleton({className:_=""}){return jsxRuntimeExports.jsxs("div",{className:`leaderboard-squad-avatar ${_}`,children:[jsxRuntimeExports.jsx("div",{className:"leaderboard-squad-avatar--skeleton"}),jsxRuntimeExports.jsx("div",{className:"leaderboard-squad-avatar__level leaderboard-squad-avatar__level--skeleton"})]})}const withdrawImage$1="/icons/withdraw.svg",capBurnedImage="/icons/cap-burned.png",packImage="/icons/packs.png",TreasuryInfo=({isShow:_,squadId:d,type:v,onClose:A,onSquadUpdate:C,description:w,onWithdrawAmount:T,isWithdraw:R})=>{const{t:G}=useTranslation(),[I,z]=reactExports.useState(!1),{setPopup:H}=reactExports.useContext(PopupContext),[Y,ee]=reactExports.useState(0),{onUserUpdate:ie}=useAppState(),[oe]=useAtom(userAtom),[se]=useAtom(squadAtom),re=reactExports.useMemo(()=>v=="gum"&&!R?Y>0&&oe.caps_coins_balance>=Y:v=="tokens"&&!R?Y>0&&oe.tokens>=Y:v=="gum"&&R?Y>0&&se.bank.gum>=Y:v=="tokens"&&R?Y>0&&se.bank.tokens>=Y:!0,[v,R,Y,oe.caps_coins_balance,oe.tokens,se.bank.gum,se.bank.tokens]),fe=()=>{I||(ee(0),A())};reactExports.useEffect(()=>{ee(0)},[]);const ue=async()=>{if(R){T(Y);return}z(!0);try{await capsService.topupSquad(d.toString(),Y,v,[],firebaseService.token),await ie(),await C(),A(),z(!1)}catch{z(!1),H({message:"Error",type:"error"})}};return jsxRuntimeExports.jsxs(Info,{isShow:_,onClose:fe,className:"settings-info__settings-wallet-info",buttons:jsxRuntimeExports.jsx(Button,{onClick:ue,fullWidth:!0,disabled:!re,isLoading:I,children:G("squad.send")}),children:[jsxRuntimeExports.jsx("div",{className:"sell-info__title",children:G("settings.walletEnterAmount")}),jsxRuntimeExports.jsx("div",{className:"staking-confirm__description",children:w}),jsxRuntimeExports.jsx(PriceInput,{price:Y,onChange:ee,currency:v})]})},LeaderboardSquadV2MemberSelect=({squad:_,onUserClick:d,type:v,...A})=>{const{t:C}=useTranslation(),[w,T]=reactExports.useState(!0),[R,G]=reactExports.useState({users:[]}),I=reactExports.useCallback(()=>{A.onBackClick()},[A]);useBackClick(I);const z=async()=>{T(!0);const H=await firebaseService.getSquadLeaders(_.id);G(H),T(!1)};return reactExports.useEffect(()=>{z()},[]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard-squad__title",children:C("leaderboard.members")}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__table",children:[!w&&R.users.length===0&&C("squad.noRequests"),jsxRuntimeExports.jsxs("div",{className:"leaderboard__table",children:[w&&[...Array(8)].map((H,Y)=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username leaderboard__profile-username--loading"})]},"leaderboard"+Y)),!w&&R.users.map(H=>jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",onClick:()=>d(H),children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",children:getName(H)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"coin",src:assetImage(v)}),getAssetValue(H,v)]})]},H.id))]})]})]})})},style={position:"relative",width:"auto",maxWidth:"60%",margin:"0 auto"},PackSelect=({onPackSelect:_,onBackClick:d})=>{const[v]=useAtom(squadAtom),{appState:A}=useAppState();useBackClick(d);const C=getCollectionsPacksByFilter(A.packCollections,w=>!!v.bank.packs[w.id]);return jsxRuntimeExports.jsx("div",{className:"leaderboard-squad",children:jsxRuntimeExports.jsx("div",{className:"shop__group",children:jsxRuntimeExports.jsx("div",{className:"packs",children:C.map(w=>jsxRuntimeExports.jsxs("button",{className:"packs__item",onClick:()=>_({id:w.id,name:w.name}),children:[jsxRuntimeExports.jsxs("div",{style,children:[jsxRuntimeExports.jsx("img",{className:"packs__image",alt:"packs image",src:w.url}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad-reward-info__reward-count",children:["x",v.bank.packs[w.id].length]})]}),jsxRuntimeExports.jsx("div",{className:"packs__type",children:w.name})]},w.id))})})})},LeaderboardSquadV2Bank=({isTreasurerOrOwner:_,isRoleExist:d,onSquadUpdate:v,...A})=>{const[C]=useAtom(squadAtom),{t:w}=useTranslation(),[T,R]=reactExports.useState({mode:"initial",type:"gum",withdrawAmount:0}),[G,I]=reactExports.useState(!1),{setPopup:z}=reactExports.useContext(PopupContext),H=reactExports.useCallback(()=>{T.mode==="initial"&&A.onBackClick()},[T.mode,A]);useBackClick(H);const Y=reactExports.useCallback(async()=>{I(!0);try{await capsService.squadUpgrade(C.id.toString(),firebaseService.token),await v()}catch{z({message:w("squad.upgradeError"),type:"error"})}I(!1)},[v,z,C.id,w]);return T.mode==="burn"?jsxRuntimeExports.jsx(LeaderboardSquadV2Burn,{onSquadUpdate:v,onBackPressed:()=>R({...T,mode:"initial"})}):T.mode==="withdraw-end"?jsxRuntimeExports.jsx(LeaderboardSquadV2Withdraw,{onSquadUpdate:v,withdrawAmount:T.withdrawAmount,onBackClick:()=>R({...T,mode:"initial"}),type:T.type}):T.mode==="pack-show"?jsxRuntimeExports.jsx(PackSelect,{onPackSelect:()=>{},onBackClick:()=>R({...T,mode:"initial"})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad",children:[jsxRuntimeExports.jsxs("div",{className:`leaderboard-squadV2-bank__block ${d?"leaderboard-squadV2-bank__block--role-exist":""} `,children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__title",children:[w("squad.bank"),jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2-bank__title-level",children:w("squad.level")+" "+((C.level??0)+1)})]}),jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2-bank__progress-bar",children:jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2-bank__progress-fill",style:{width:`${C.levelMaxScore?C.levelScore/C.levelMaxScore*100:0}%`}})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__item",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-squadV2-bank__image",src:capBurnedImage,alt:"burned caps"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__text",children:[w("squad.caps"),":",jsxRuntimeExports.jsx("br",{}),formatNumber(C.burnCount),C.burnMax>0&&jsxRuntimeExports.jsxs("span",{className:"leaderboard-squadV2-bank__text--gray",children:["/",C.burnMax]})]}),jsxRuntimeExports.jsx(Button,{className:"leaderboard-squadV2-bank__button  ",size:"small",disabled:G,onClick:()=>R({...T,mode:"burn"}),children:w("squad.burn")})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__item",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-squadV2-bank__image",src:StakedCoin,alt:"tokens"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__text",children:[w("nav.token"),":",jsxRuntimeExports.jsx("br",{}),formatNumber(C.tokensCount),C.tokensMax>0&&jsxRuntimeExports.jsxs("span",{className:"leaderboard-squadV2-bank__text--gray",children:["/",C.tokensMax]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__buttons",children:[_&&jsxRuntimeExports.jsx("button",{onClick:()=>{R({...T,mode:"withdraw-number",type:"tokens"})},className:"leaderboard-squad__ton-button-withdraw",children:jsxRuntimeExports.jsx("img",{src:withdrawImage$1,alt:"withdraw"})}),jsxRuntimeExports.jsx(Button,{className:"leaderboard-squadV2-bank__button",color:"green",size:"small",disabled:G,onClick:()=>{R({...T,mode:"top-up",type:"tokens"})},children:w("squad.topup")})]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__item",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-squadV2-bank__image",src:gumImage$1,alt:"gums"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__text",children:["$GUM:",jsxRuntimeExports.jsx("br",{}),formatNumber(C.gumCount),C.gumMax>0&&jsxRuntimeExports.jsxs("span",{className:"leaderboard-squadV2-bank__text--gray",children:["/",C.gumMax]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__buttons",children:[_&&jsxRuntimeExports.jsx("button",{onClick:()=>{R({...T,mode:"withdraw-number",type:"gum"})},className:"leaderboard-squad__ton-button-withdraw",children:jsxRuntimeExports.jsx("img",{src:withdrawImage$1,alt:"withdraw"})}),jsxRuntimeExports.jsx(Button,{className:"leaderboard-squadV2-bank__button",color:"green",size:"small",disabled:G,onClick:()=>{R({...T,mode:"top-up",type:"gum"})},children:w("squad.topup")})]})]}),C.packsCount>0&&jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__item",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard-squadV2-bank__image",src:packImage,alt:"gums"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squadV2-bank__text",children:[w("squad.packs"),":",jsxRuntimeExports.jsx("br",{}),formatNumber(C.packsCount)]}),jsxRuntimeExports.jsx("div",{className:"leaderboard-squad__buttons",children:jsxRuntimeExports.jsx(Button,{className:"leaderboard-squadV2-bank__button",color:"green",size:"small",disabled:G,onClick:()=>{R({...T,mode:_?"withdraw-end":"pack-show",type:"packs"})},children:w(_?"squad.send":"leaderboard.open")})})]})]}),d&&C.levelMaxScore>0&&jsxRuntimeExports.jsx(Button,{className:"leaderboard-squadV2-bank__update",color:"green",size:"small",fullWidth:!0,onClick:Y,isLoading:G,disabled:!C.isUpgradeAvailable,children:w("squad.upgrade",{level:(C.level??0)+2})})]}),(T.type==="gum"||T.type==="tokens")&&jsxRuntimeExports.jsx(TreasuryInfo,{isShow:T.mode==="top-up"||T.mode==="withdraw-number",isWithdraw:T.mode==="withdraw-number",squadId:C.id,onSquadUpdate:v,type:T.type,onClose:()=>R({...T,mode:"initial"}),onWithdrawAmount:ee=>R({...T,withdrawAmount:ee,mode:"withdraw-end"}),description:T.mode==="top-up"?w(T.type==="gum"?"squad.topupGum":"squad.topupTokens"):w(T.type==="gum"?"squad.withdrawGum":"squad.withdrawTokens")})]})};function LeaderboardSquadV2Withdraw({onSquadUpdate:_,onBackClick:d,type:v,withdrawAmount:A}){const[C]=useAtom(squadAtom),{t:w}=useTranslation(),[T,R]=reactExports.useState(null),[G,I]=reactExports.useState(!1),{onUserUpdate:z}=useAppState(),{setPopup:H}=reactExports.useContext(PopupContext),[Y,ee]=reactExports.useState(null),[ie,oe]=reactExports.useState(v==="packs"?"packs":"user"),se=async()=>{if(T){I(!0);try{await capsService.withdrawFromSquadBank(C.id.toString(),v,T.id.toString(),firebaseService.token,Y?1:A,Y?C.bank.packs[Y.id][0]:void 0),await z(),await _(),d(),I(!1)}catch{I(!1),H({message:"Error",type:"error"})}}},re=reactExports.useCallback(()=>{G||R(null)},[G]),fe=reactExports.useMemo(()=>v==="gum"?`${A} GUM`:v==="tokens"?`${A} $CG`:Y?.name,[v,A,Y]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ie==="user"&&jsxRuntimeExports.jsx(LeaderboardSquadV2MemberSelect,{squad:C,onSquadUpdate:_,type:v,onBackClick:()=>{v==="packs"?oe("packs"):d()},onUserClick:R}),jsxRuntimeExports.jsx(Info,{isShow:!!T,onClose:re,buttons:jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:se,fullWidth:!0,isLoading:G,children:w("yes")}),jsxRuntimeExports.jsx(Button,{onClick:re,fullWidth:!0,disabled:G,children:w("no")})]}),children:jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2-withdraw__confirm-title",children:T&&w("squad.sendQuestion",{userName:getName(T),name:fe})})}),v==="packs"&&ie==="packs"&&jsxRuntimeExports.jsx(PackSelect,{onPackSelect:ue=>{ee(ue),oe("user")},onBackClick:d})]})}function LeaderboardSquadV2Burn({onSquadUpdate:_,onBackPressed:d}){const[v]=useAtom(squadAtom),{appState:A,onUserUpdate:C}=useAppState(),{t:w}=useTranslation(),{setPopup:T}=reactExports.useContext(PopupContext),R=reactExports.useCallback(async G=>{await CapsWebApp.showPopup({message:w("squad.burnConfirmation",{}),buttons:[{id:"cancel",type:"cancel"},{id:"burn",type:"default",text:""}]}).then(async I=>{if(I=="burn"){try{await capsService.topupSquad(v.id.toString(),0,"burn",G.map(z=>z.id),firebaseService.token),await C(),await _()}catch{T({message:w("squad.burnError"),type:"error"})}d(),CapsWebApp.playSound("caps-upgrade/finished.mp3")}})},[d,_,C,T,v.id,w]);return jsxRuntimeExports.jsx("div",{className:"leaderboard-squad",children:jsxRuntimeExports.jsx("div",{className:"game",children:jsxRuntimeExports.jsx(BattleGameBid,{isCommentShow:!1,mainAction:w("squad.burn"),maxBid:20,isScoreChoose:!0,onBackPressed:d,filter:G=>G.status=="READY",setBidCallback:R,mainActionGenerator:G=>w("squad.burnMainAction",{score:G.reduce((I,z)=>I+(getCapGdGrade(z,A.capsGd)?.score??0),0)})})})})}const getIsOwner=(_,d)=>_?.id===d.id,getIsRole=(_,d)=>!d||d.length===0?!1:!!d.find(v=>v.id===_.id),LeaderboardSquad=({squadId:_,onUpdate:d,...v})=>{const{appState:A,onUserUpdate:C}=useAppState(),[w]=useAtom(userAtom),[T]=useAtom(squadAtom),R=useAction(updateSquadAtom),G=useAction(updateUsersListAtom),{t:I}=useTranslation(),z=reactExports.useMemo(()=>w.caps_squad?.id.toString()==_.toString(),[_,w.caps_squad?.id]),[H,Y]=reactExports.useState("all"),[ee,ie]=reactExports.useState(null),[oe,se]=reactExports.useState(!1),[re,fe]=reactExports.useState({type:"members"}),ue=reactExports.useCallback(async()=>{Y("all"),await R(_,A.capsGd.squads.levels),await G(_,"members"),Y("loaded")},[A.capsGd.squads.levels,_,R,G]),ge=getIsRole(w,T.admins),ye=getIsOwner(T.owner,w),be=getIsRole(w,T.treasurers)||getIsOwner(T.owner,w),ve=ge||ye||be,[Me,we]=reactExports.useState(!1),Be=reactExports.useCallback(()=>{!ee&&!oe&&!Me&&v.onBackClick()},[ee,oe,Me,v]);useBackClick(Be);const De=reactExports.useCallback(async(je,He)=>{Y("members");const Xe=je==="bank"?He:void 0,$e=je==="activity"?He:void 0;fe(We=>({...We,type:je,bankType:Xe,activityType:$e})),await G(_,je,{bankType:Xe,activityType:$e}),Y("loaded")},[_,G]);reactExports.useEffect(()=>{ue()},[]);const Fe=reactExports.useCallback(async()=>{await R(_,A.capsGd.squads.levels),await d()},[A.capsGd.squads.levels,d,_,R]),Oe=reactExports.useCallback(async()=>{await Fe(),await C(),await G(T.id,"members")},[Fe,C,T.id,G]),Ge=reactExports.useCallback(je=>{ie({user:je,league:A.capsGd.leagues.find(He=>He.name===je.league)})},[]),ze=reactExports.useCallback(()=>{T.requests>0&&se(!0)},[T.requests]);return Me?jsxRuntimeExports.jsx(LeaderboardSquadV2Bank,{isRoleExist:ve,onSquadUpdate:Fe,isTreasurerOrOwner:be,onBackClick:()=>we(!1)}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad",children:[jsxRuntimeExports.jsx(LeaderboardSquadV2Head,{isUserInSquad:z,loadingState:H,setLoadingState:Y,isRoleExist:ve,onSquadRequestsClick:ze,onSquadAndUsersUpdate:Oe,onSquadUpdate:Fe}),z&&jsxRuntimeExports.jsx(LeaderboardSquadTreasure,{onClick:()=>we(!0)}),jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2__members",children:I("leaderboard.members")}),z&&jsxRuntimeExports.jsx(LeaderboardSquadV2Types,{type:re.type,setType:De}),jsxRuntimeExports.jsx(LeaderboardSquadV2Members,{loadingState:H,onClickUserRow:Ge,type:re.type,bankType:re.bankType,activityType:re.activityType,isOwner:ye,isRoleExist:ve,onSquadAndUsersUpdate:Oe,setLoadingState:Y})]}),oe&&jsxRuntimeExports.jsx(LeaderboardSquadRequests,{onSquadAndUsersUpdate:Oe,onBackClick:()=>se(!1)}),ee&&jsxRuntimeExports.jsx(LeaderboardUser,{user:ee.user,league:ee.league,onBackClick:()=>ie(null)})]})},LeaderboardSquadV2Head=({isUserInSquad:_,isRoleExist:d,onSquadRequestsClick:v,onSquadUpdate:A,onSquadAndUsersUpdate:C,loadingState:w,setLoadingState:T})=>{const[R]=useAtom(squadAtom),{t:G}=useTranslation(),[I,z]=reactExports.useState(!1),H=reactExports.useMemo(()=>getSquadImage(R),[R]),Y=reactExports.useCallback(()=>{CapsWebApp.openTelegramLink(`https://t.me/${R.username}`)},[R.username]),ee=reactExports.useCallback(()=>{const re=`https://t.me/share/url?url=https%3A%2F%2Ft.me%2FCapsGameBot%2Fplay?startapp=s_${R.id}`;CapsWebApp.openTelegramLink(re)},[R.id]),ie=reactExports.useMemo(()=>{const re=[{labelOption:G("leaderboard.share"),value:"share"}];return d&&re.push({labelOption:R.isPrivate?G("leaderboard.makePublic"):G("leaderboard.makePrivate"),value:"visibility"}),re},[d,R.isPrivate,G]),oe=async re=>{re==="share"?ee():re==="visibility"&&(T("all"),await capsService.squadVisibility(R.id.toString(),!R.isPrivate,firebaseService.token),await A(),T("loaded"))},se=reactExports.useCallback(async()=>{await CapsWebApp.showPopup({message:_?"Are you sure want to leave your squad?":"Are you sure want to join",buttons:[{id:"confirm",type:"ok"},{id:"cancel",type:"cancel"}]})==="confirm"&&(T("all"),z(!0),_?await capsService.leaveSquad(firebaseService.token):await capsService.joinSquad(R.id.toString(),firebaseService.token),await C(),T("loaded"),z(!1))},[_,C,T,R.id]);return jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__profile",children:[w==="all"?jsxRuntimeExports.jsx(LeaderboardSquadAvatarSkeleton,{}):jsxRuntimeExports.jsx(LeaderboardSquadAvatar,{className:"leaderboard__profile-avatar",isInSquad:_,image:H,level:R.level}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[w==="all"?jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV4-head__title--skeleton"}):jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-username",children:[R.title,R.isPrivate?" ":""]}),jsxRuntimeExports.jsx(Select,{className:"leaderboard-squadV2-head__select",options:ie,onChange:oe,isLabelShow:!1,children:"..."})]}),w==="all"?jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2-head__members--skeleton"}):jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__second",children:[G("leaderboard.members"),": ",formatNumber(R.members),"/",R.squadLevel.seats]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__buttons",children:[(!d||!R.isPrivate)&&jsxRuntimeExports.jsx(Button,{className:"leaderboard-squad__button",color:"gray",size:"small",onClick:Y,disabled:w==="all",children:G("leaderboard.open")}),d&&R.isPrivate&&jsxRuntimeExports.jsx(Button,{className:"leaderboard-squad__button",color:"yellow",size:"small",onClick:v,disabled:w==="all",children:`${G("leaderboard.requests")} (${R.requests})`}),jsxRuntimeExports.jsx(Button,{className:"leaderboard-squad__button",color:_?"gray":"green",size:"small",onClick:se,isLoading:I||w==="all",disabled:R.hasPendingJoinSquadRequest,children:G(_?"leaderboard.leave":R.isPrivate?R.hasPendingJoinSquadRequest?"leaderboard.sentRequest":"leaderboard.sendRequest":"leaderboard.join")})]})]})};function LeaderboardSquadTreasure({onClick:_}){const{t:d}=useTranslation(),[v]=useAtom(squadAtom);return jsxRuntimeExports.jsxs("button",{className:"leaderboard-squad-treasure",onClick:_,children:[jsxRuntimeExports.jsx("div",{className:"leaderboard-squad-treasure__title",children:d("squad.bank")}),jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad-treasure__stats",children:[formatNumber(v.bank.tokens)," $CG | ",v.bank.gum," GUM |"," ",formatNumber(v.packsCount)," Packs"]})]})}function LeaderboardSquadV2Types({type:_,setType:d}){const{t:v}=useTranslation(),A=reactExports.useMemo(()=>[{labelOption:v("nav.token"),labelSelect:v("nav.token"),value:"tokens"},{labelOption:v("squad.caps"),labelSelect:v("squad.caps"),value:"burn"}],[v]),C=reactExports.useMemo(()=>[{labelOption:v("squad.squadActivity.thisWeek"),labelSelect:v("squad.squadActivity.thisWeek"),value:"thisWeek"},{labelOption:v("squad.squadActivity.thisMonth"),labelSelect:v("squad.squadActivity.thisMonth"),value:"thisMonth"},{labelOption:v("squad.squadActivity.pastWeek"),labelSelect:v("squad.squadActivity.pastWeek"),value:"pastWeek"},{labelOption:v("squad.squadActivity.pastMonth"),labelSelect:v("squad.squadActivity.pastMonth"),value:"pastMonth"}],[v]),w=reactExports.useMemo(()=>{switch(_){case"activity":return C;case"bank":return A;default:return[]}},[C,A,_]),T=R=>{_=="bank"?d("bank",R):_=="activity"&&d("activity",R)};return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-stat",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-stat-filters",children:[jsxRuntimeExports.jsx("button",{onClick:()=>d("members"),className:`leaderboard__league-stat-filter ${_==="members"?"leaderboard__league-stat-filter--active":""}`,children:v("squad.allMembers")}),jsxRuntimeExports.jsx("button",{onClick:()=>d("bank"),className:`leaderboard__league-stat-filter ${_==="bank"?"leaderboard__league-stat-filter--active":""}`,children:v("squad.bank")}),jsxRuntimeExports.jsx("button",{onClick:()=>d("activity"),className:`leaderboard__league-stat-filter ${_==="activity"?"leaderboard__league-stat-filter--active":""}`,children:v("squad.activity")})]}),w.length>0&&jsxRuntimeExports.jsx(Select,{className:"shop-caps__select",value:"",options:w,onChange:T,children:jsxRuntimeExports.jsx("img",{src:settingsImage,alt:"switch"})})]})})}function LeaderboardSquadV2Members({loadingState:_,setLoadingState:d,onClickUserRow:v,type:A,bankType:C,activityType:w,isOwner:T,isRoleExist:R,onSquadAndUsersUpdate:G}){const[I]=useAtom(squadAtom),[{users:z,lastDocument:H}]=useAtom(usersListAtom),Y=useAction(updateUsersListAtom),{t:ee}=useTranslation(),[ie]=useAtom(userAtom),oe=reactExports.useCallback(async()=>{d("more"),await Y(I.id,A,{bankType:C,activityType:w,lastDocument:H}),d("loaded")},[w,C,H,d,I.id,A,Y]),se=reactExports.useCallback(fe=>{const ue=getIsRole(fe,I.admins),ge=getIsRole(fe,I.treasurers),ye=[{labelOption:ee("leaderboard.kick"),value:"kick"}];return T&&(!ge&&!ue&&ye.push({labelOption:ee("leaderboard.promote"),value:"admin"},{labelOption:ee("leaderboard.treasurer"),value:"treasurer"}),ue&&ye.push({labelOption:ee("leaderboard.downgrade"),value:"admin"}),ge&&ye.push({labelOption:ee("leaderboard.treasurerRevoke"),value:"treasurer"})),ye},[T,I.admins,I.treasurers,ee]),re=async(fe,ue)=>{if(d("all"),fe=="kick")await capsService.kick(I.id.toString(),ue.id.toString(),firebaseService.token);else if(fe=="admin"||fe=="treasurer"){const ge=fe==="treasurer"?"treasurer":"admin",ye=fe==="treasurer"?!getIsRole(ue,I.treasurers):!getIsRole(ue,I.admins);await capsService.promote(I.id.toString(),ue.id.toString(),ge,ye,firebaseService.token)}await G(),d("loaded")};return jsxRuntimeExports.jsxs("div",{className:"leaderboard-squad__table",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__table",children:[(_==="members"||_==="all")&&[...Array(6)].map((fe,ue)=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-score leaderboard__league-score--loading"})]},"leaderboard"+ue)),z.map(fe=>{const ue=getIsRole(fe,I.admins),ge=getIsRole(fe,I.treasurers),ye=getIsOwner(I.owner,fe),be=fe.id===ie.id,ve=ye?ee("squad.role.owner"):ue?ee("squad.role.admin"):ge?ee("squad.role.treasurer"):void 0;return jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",onClick:()=>v(fe),children:getName(fe)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",onClick:()=>v(fe),children:[A=="members"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"goblet",src:getGobletImage(fe.league)}),formatNumber(fe.score)]}),A=="bank"&&jsxRuntimeExports.jsxs("div",{children:[formatNumber(fe.amount??0)," ",C=="tokens"||!C?"$CG":""]}),A=="activity"&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"goblet",src:getGobletImage(fe.league)}),formatNumber(fe.score??0)," "]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-place",children:[ve&&jsxRuntimeExports.jsx("div",{className:"leaderboard-squadV2-members__role",children:ve}),R&&!be&&!ye&&jsxRuntimeExports.jsx(Select,{className:"leaderboard-squadV2-head__select",options:se(fe),onChange:Me=>re(Me,fe),isLabelShow:!1,children:"..."})]})]},fe.id)})]}),H!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"leaderboard-squad__more-button battle__button",color:"transparent",size:"small",onClick:oe,isLoading:_==="more",children:ee("battle.loadMore")})]})}const stakingInfo="/icons/staking-info.png";var esm={},LoginButton={},createScript={},hasRequiredCreateScript;function requireCreateScript(){if(hasRequiredCreateScript)return createScript;hasRequiredCreateScript=1,Object.defineProperty(createScript,"__esModule",{value:!0}),createScript.createScript=_;function _({authCallbackUrl:d,botUsername:v,buttonSize:A="large",cornerRadius:C,lang:w="en",onAuthCallback:T,requestAccess:R="write",showAvatar:G=!0,widgetVersion:I=21}){const z=document.createElement("script");return z.async=!0,z.src=`https://telegram.org/js/telegram-widget.js?${I}`,z.setAttribute("data-telegram-login",v),z.setAttribute("data-size",A),C&&z.setAttribute("data-radius",`${C}`),R&&z.setAttribute("data-request-access",R),z.setAttribute("data-userpic",JSON.stringify(!!G)),z.setAttribute("data-lang",w),d?z.setAttribute("data-auth-url",d):T&&z.setAttribute("data-onauth","TelegramAuthLogin.onAuthCallback(user)"),z}return createScript}var hasRequiredLoginButton;function requireLoginButton(){if(hasRequiredLoginButton)return LoginButton;hasRequiredLoginButton=1;var _=LoginButton&&LoginButton.__createBinding||(Object.create?function(R,G,I,z){z===void 0&&(z=I);var H=Object.getOwnPropertyDescriptor(G,I);(!H||("get"in H?!G.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return G[I]}}),Object.defineProperty(R,z,H)}:function(R,G,I,z){z===void 0&&(z=I),R[z]=G[I]}),d=LoginButton&&LoginButton.__setModuleDefault||(Object.create?function(R,G){Object.defineProperty(R,"default",{enumerable:!0,value:G})}:function(R,G){R.default=G}),v=LoginButton&&LoginButton.__importStar||function(R){if(R&&R.__esModule)return R;var G={};if(R!=null)for(var I in R)I!=="default"&&Object.prototype.hasOwnProperty.call(R,I)&&_(G,R,I);return d(G,R),G};Object.defineProperty(LoginButton,"__esModule",{value:!0}),LoginButton.LoginButton=T;const A=v(requireReact()),C=requireCreateScript();function w(R){window.TelegramAuthLogin=R}function T(R){const G=(0,A.useRef)(null),I=(0,A.useRef)();return(0,A.useEffect)(()=>{I.current?.remove(),w({onAuthCallback:R.onAuthCallback}),I.current=(0,C.createScript)(R),G.current?.after(I.current);const z=G.current?.parentElement?.children||[];return()=>{I.current?.remove();for(const H of z)if(H instanceof HTMLIFrameElement&&H.src.includes("oauth.telegram.org")){H.remove();break}}},[R]),A.default.createElement("div",{ref:G,hidden:!0})}return LoginButton}var types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}var hasRequiredEsm;function requireEsm(){return hasRequiredEsm||(hasRequiredEsm=1,function(_){var d=esm&&esm.__createBinding||(Object.create?function(A,C,w,T){T===void 0&&(T=w);var R=Object.getOwnPropertyDescriptor(C,w);(!R||("get"in R?!C.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return C[w]}}),Object.defineProperty(A,T,R)}:function(A,C,w,T){T===void 0&&(T=w),A[T]=C[w]}),v=esm&&esm.__exportStar||function(A,C){for(var w in A)w!=="default"&&!Object.prototype.hasOwnProperty.call(C,w)&&d(C,A,w)};Object.defineProperty(_,"__esModule",{value:!0}),v(requireLoginButton(),_),v(requireCreateScript(),_),v(requireTypes(),_)}(esm)),esm}var esmExports=requireEsm();const Login=_=>{const d=async v=>{const A=await capsService.getWebToken(v);_.onLogin(A)};return jsxRuntimeExports.jsx("div",{className:"login",children:jsxRuntimeExports.jsxs("div",{className:"loading-logo-wrapper",children:[jsxRuntimeExports.jsx("img",{src:logoImage,className:"loading-logo",alt:"Logo"}),jsxRuntimeExports.jsx("div",{className:"login-button",children:jsxRuntimeExports.jsx(esmExports.LoginButton,{botUsername:"CapsGameBot",onAuthCallback:d})})]})})},MadnessExitDialog=({onYes:_,onNo:d,isShow:v,battleId:A})=>{const{t:C}=useTranslation(),[w,T]=reactExports.useState(!1),{setPopup:R}=reactExports.useContext(PopupContext),G=async()=>{T(!0);try{const I=await capsService.endBattle(A,firebaseService.token);_(I)}catch(I){R({message:I?.message??I??"Error",type:"error"}),T(!1)}};return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${v?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${v?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:C("madness.leaveQuestion")}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:G,variant:"secondary",fullWidth:!0,isLoading:w,className:"madness-exit-dialog__button",children:C("madness.yes")}),jsxRuntimeExports.jsx(Button,{onClick:d,fullWidth:!0,children:C("madness.no")})]})]})})};function BottomSheet({children:_,isShow:d,isClosing:v}){const{isClosing:A,handleClose:C}=useClosing({isShow:d,onClose:()=>{}}),[,w]=useSpring(()=>({y:window.innerHeight}));return reactExports.useEffect(()=>{d&&w.start({y:0,config:{duration:500}})},[d]),reactExports.useEffect(()=>{v&&C()},[v]),jsxRuntimeExports.jsx("div",{className:`bottom-sheet__wrapper ${d?"visible":""} ${A?"closing":""} `,children:jsxRuntimeExports.jsx(animated.div,{className:`bottom-sheet__block ${d?"visible":""}  ${A?"closing":""} `,onClick:T=>{T.preventDefault(),T.stopPropagation()},children:_})})}const CapItem$1=({cap:_,isSelected:d,onClick:v,isBuff:A,className:C})=>{const{appState:w}=useAppState();return jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${C??""}`,onClick:v,children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:_.health<=0,variant:"pve-small",cap:_,className:`pve-level-caps-list__item ${d?"pve-level-caps-list__item--selected":""}`,selectedNumber:d?1:void 0,onClickCallback:v}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",_.health,"/",_.maxHealth]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${A?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom(_,w.capsGd,w.pveGd,A),"-",getCapPvePowerTo(_,w.capsGd,w.pveGd,A)]})]})]})},ALL$1=10,MadnessBonusSelect=({isShow:_,bonuses:d,onSelected:v,caps:A,battleId:C,isBuff:w})=>{const{t:T}=useTranslation(),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState(-1),[z,H]=reactExports.useState(void 0),[Y,ee]=reactExports.useState(!1),[ie,oe]=reactExports.useState(!1),se=ue=>{ue.id==="heal"?I(ALL$1):G===ALL$1&&I(-1),H(ue)},re=ue=>{z?.id==="heal"&&G===-1?I(ALL$1):z?.id==="heal"&&G===ALL$1?I(-1):I(ue)},fe=async()=>{if(z&&G>-1){oe(!0);const ue=d.indexOf(z);try{const ge=await capsService.selectBonus(C,ue,firebaseService.token,G===ALL$1?void 0:G);ee(!0),oe(!1),I(-1),H(void 0),v(ge)}catch(ge){R({message:ge?.message??ge??"Error",type:"error"}),oe(!1)}}};return jsxRuntimeExports.jsx(BottomSheet,{isClosing:Y,isShow:_,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__bonus-list",children:d.map((ue,ge)=>ue.cap?jsxRuntimeExports.jsx(CapItem$1,{cap:ue.cap,isSelected:z?.id===ue.id,onClick:()=>se(ue),isBuff:!1,className:`madness-bonus-select__cap-wrapper ${z?.id===ue.id?"madness-bonus-select__cap-wrapper--select":""}`},"bonus"+ue.id):jsxRuntimeExports.jsxs("div",{onClick:()=>se(ue),className:`madness-bonus-select__wrapper ${z?.id===ue.id?"madness-bonus-select__cap-wrapper--select":""}`,children:[jsxRuntimeExports.jsx("div",{className:"madness-bonus-select__bonus-wrapper-image",children:jsxRuntimeExports.jsx("img",{className:"madness-bonus-select__bonus-image",src:"/icons/bonus-"+ue.id+".png",alt:ue.id})}),jsxRuntimeExports.jsxs("div",{className:"madness-bonus-select__description",children:[jsxRuntimeExports.jsx("div",{className:"madness-bonus-select__description-first",children:T(`madness.${ue.id}`)}),jsxRuntimeExports.jsxs("div",{className:"madness-bonus-select__description-second",children:["+",ue.id=="heal"?`${(ue.value??0)*100}%`:ue.value]})]})]},"bonus"+ue.id+ge))}),jsxRuntimeExports.jsx("div",{className:"madness-bonus-select__title",children:T("madness.selectBoost")}),jsxRuntimeExports.jsx("div",{className:"pve-battle__caps-list",children:A.map((ue,ge)=>jsxRuntimeExports.jsx(CapItem$1,{cap:ue,isSelected:G==ge||G===ALL$1,onClick:()=>re(ge),isBuff:w,className:` ${G==ge||G===ALL$1?"madness-bonus-select__cap-wrapper--select":""}`},"cap"+ue.url+ge))}),jsxRuntimeExports.jsx("div",{className:"pve-battle__button",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:fe,isLoading:ie,disabled:!z||G===-1,children:T("madness.choose")})})]})})},madnessBattleReducer$1=(_,d)=>{switch(d.type){case"attack-started":return{..._,phase:"attack-started"};case"attack-reset":return{..._,phase:"attack"};case"counter-attack-reset":return{..._,phase:"attack-finished"};case"attack":{const v=_.battle;v.state=d.payload.pendingAttack.newBattleState,v.status=d.payload.status,console.log("attacked="+v.state.attacked),d.payload.round&&(v.round=d.payload.round);const A=v.state.caps.filter(C=>C.health>0).length<=v.state.attacked.length;return _.attackFrom=getNextFromCap(_),_.attackTo=getNextToCap(_),A&&(_.attackCapsSelected=[_.attackFrom,_.attackTo]),v.status==="next-round"&&(_.attackTo=-1,_.attackFrom=-1),{..._,battleResult:d.payload.battleResult,battle:v,phase:A?"attack-finished":"attack",bonuses:d.payload.bonuses}}case"before-counter-attack-started":{const v=_.battle;return v.state.attacked=[],{..._,battle:v,phase:"counter-attack-started"}}case"counter-attack-started":{const v=_.battle;return v.state=d.payload.newBattleState,{..._,battleResult:d.payload.battleResult,battle:v,phase:d.payload.battleResult?"finished":"counter-attack-started"}}case"counter-attack-finished":{_.attackFrom=_.attackCapsSelected[0],_.attackTo=_.attackCapsSelected[1],_.attackFrom=getNextFromCap(_),_.attackTo=getNextToCap(_),(_.attackFrom==-1||_.attackTo==-1)&&(_.attackFrom=-1,_.attackTo=-1);const v=_.battle;return v.status=d.payload.status,{..._,battle:v,battleResult:d.payload.battleResult,phase:_.battleResult?"finished":"counter-attack-finished"}}case"finish":{const v=_.battle;return v.status="finished",{..._,battle:v,battleResult:d.payload.battleResult,phase:"finished"}}case"deselect-caps":return{..._,attackFrom:-1,attackTo:-1};case"attack-from":return{..._,attackFrom:d.cap};case"attack-to":return{..._,attackTo:d.cap};case"bonus-selected":{const v=_.battle;return v.state=d.payload.afterBonus,v.status="attack",{..._,battle:v,bonuses:[],phase:"attack"}}case"booster-selected":{const v=_.battle;return v.state=d.payload.afterBooster,v.status="attack",{..._,battle:v,bonuses:[],attackTo:-1,attackFrom:-1,phase:"attack"}}default:return _}},getPhaseFromBattleStatus$1=_=>{switch(_){case"attack":return"attack";case"counter-attack":return"attack-finished";case"next-round":return"attack";case"finished":return"finished";default:return"initial"}},MadnessBattle=_=>{const{t:d}=useTranslation(),{setPopup:v}=reactExports.useContext(PopupContext),[A,C]=reactExports.useState(!1),w=reactExports.useCallback(()=>{C(!0)},[]);useBackClick(w),useAction(fetchUnfinishedGamesAction);const{appState:T,onUserUpdate:R}=useAppState();reactExports.useEffect(()=>{R()},[]),useNavigate();const G=reactExports.useRef([]),I=reactExports.useRef([]),[z,H]=reactExports.useReducer(madnessBattleReducer$1,{attackFrom:-1,attackTo:-1,battle:_.battle,phase:getPhaseFromBattleStatus$1(_.battle.status),attackCapsSelected:[-1,-1]}),[Y,ee]=reactExports.useState(1),{enemiesSprings:ie,enemiesApi:oe,mySprings:se,myApi:re,explosionSpring:fe,explosionApi:ue,healthDiff:ge,setHealthDiff:ye,healthDiffSpring:be,healthDiffApi:ve}=useBattle({battleState:z}),Me=($e,We)=>{switch($e){case"enemy":{if(z.battle.state.enemies[We].health<=0)return;const nt=z.attackTo==We?-1:We;H({type:"attack-to",cap:nt});break}case"my":{if(z.battle.state.caps[We].health<=0)return;const nt=z.attackFrom==We?-1:We;H({type:"attack-from",cap:nt});break}}},we=async()=>{H({type:"attack-started"});const $e=capsService.attack(_.battle.id,z.attackFrom,z.attackTo,firebaseService.token),We=getDominationClass(z.battle.state.caps[z.attackFrom],z.battle.state.enemies[z.attackTo],T.pveGd),nt=I.current[z.attackFrom].getBoundingClientRect(),Qt=G.current[z.attackTo].getBoundingClientRect(),Wt=document.querySelectorAll(".pve-level-caps-list__icon--heart")[z.attackTo].getBoundingClientRect(),Bn=Qt.left-nt.left,Lt=Qt.bottom-nt.top,{x:Mn,left:cr,rotate:In}=getOffsetUp(z.attackFrom,z.attackTo,Qt);re.start(Zn=>{if(Zn===z.attackFrom)return{to:async $n=>{ue.start(Rn=>{if(Rn!==1)return{from:{left:cr,top:Qt.height-Qt.width/4,scale:0,rotate:In},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await $n({x:Mn+Bn,y:Lt-Qt.height/3,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-my-to-enemy.mp3"),await $n({x:0,y:0,scale:1,filter:"grayscale(100%)",boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),ue.start(Rn=>{if(Rn!==1)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),await $e.then(Rn=>{ye({value:Rn.attack.newHealth-z.battle.state.enemies[z.attackTo].health,dominationFaction:We}),console.log("animation attack: "+Rn.attack.from+">>>"+Rn.attack.to,Rn.afterAttack.caps),Rn.attack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),Rn.battleResult&&CapsWebApp.playSound("pve/win.mp3"),H({type:"attack",payload:{pendingAttack:{attack:Rn.attack,newBattleState:Rn.afterAttack},status:Rn.status,battleResult:Rn.battleResult,bonuses:Rn.bonuses?Rn.bonuses:[],round:Rn.round}}),Wt&&showHeartDiff(Wt,ve),setTimeout(()=>{oe.start(Dn=>{if(Dn===z.attackTo)return{to:{zIndex:0}}})},1e3)}).catch(Rn=>{console.error("attack error",Rn),v({message:Rn?.message??Rn??"Error",type:"error"}),H({type:"attack-reset"}),$n({zIndex:0,filter:"grayscale(0%)"}).catch(Dn=>{console.error("attack error next",Dn)})})}}})};reactExports.useEffect(()=>{z.phase==="attack-finished"&&Be()},[z.phase]);const Be=async()=>{H({type:"before-counter-attack-started"}),re.start({to:{filter:"grayscale(0%)"}});try{const $e=await capsService.counterAttack(_.battle.id,firebaseService.token);if($e.attacks.length==0){H({type:"counter-attack-finished",payload:{status:$e.status,battleResult:$e.battleResult}});return}for(const[We,nt]of $e.attacks.entries()){const Qt=getDominationClass(z.battle.state.enemies[nt.counterAttack.from],z.battle.state.caps[nt.counterAttack.to],T.pveGd);console.log("animation counter attack: "+nt.counterAttack.from+">>>"+nt.counterAttack.to,nt.afterCounterAttack.caps);const Wt=nt.counterAttack.from,Bn=nt.counterAttack.to;Me("enemy",Wt),Me("my",Bn);const Lt=G.current[Wt].getBoundingClientRect(),Mn=I.current[Bn].getBoundingClientRect(),cr=document.querySelectorAll(".pve-level-caps-list__icon--heart")[z.battle.state.enemies.length+Bn].getBoundingClientRect(),In=Mn.left-Lt.left,Zn=Mn.top-Lt.top,{x:$n,left:Rn,rotate:Dn}=getOffsetDown(Wt,Bn,Mn);ee(2),oe.start(Gt=>{if(Gt===Wt)return{to:async Jn=>{ue.start(Nn=>{if(Nn!==0)return{from:{left:Rn,top:Mn.top,scale:0,rotate:Dn},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await Jn({x:$n+In,y:Zn-Mn.height/2,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-enemy-to-my.mp3"),await Jn({x:0,y:0,scale:1,boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),ue.start(Nn=>{if(Nn!==0)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),H({type:"deselect-caps"}),ye({value:nt.counterAttack.newHealth-z.battle.state.caps[Bn].health,dominationFaction:Qt}),nt.counterAttack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),H({type:"counter-attack-started",payload:{newBattleState:nt.afterCounterAttack}}),cr&&showHeartDiff(cr,ve),re.start({to:{zIndex:0}}),oe.start({to:{zIndex:0}}),We===$e.attacks.length-1&&($e.battleResult&&_.onSetBattleResult($e.battleResult),H({type:"counter-attack-finished",payload:{status:$e.status,battleResult:$e.battleResult}}),ee(1))}}}),await wait(1e3)}}catch($e){v({message:$e?.message??$e??"Error",type:"error"}),H({type:"counter-attack-reset"}),re.start({to:{zIndex:0,filter:"grayscale(100%)"}}),console.error("counter-attack",$e)}},De=$e=>{["initial","attack","counter-attack-finished"].includes(z.phase)&&z.battle.state.enemies[$e].health>0&&(Me("enemy",$e),CapsWebApp.playSound("pve/select-enemy-cap.mp3"))},Fe=$e=>{["initial","attack","counter-attack-finished"].includes(z.phase)&&z.battle.state.attacked.indexOf($e)===-1&&(Me("my",$e),CapsWebApp.playSound("pve/select-my-cap.mp3"))},Oe=$e=>{H({type:"bonus-selected",payload:$e}),re.start({to:{zIndex:0,filter:"grayscale(0%)"}})},Ge=$e=>{R(),H({type:"booster-selected",payload:$e})},ze=z.battle.status==="next-round"&&["attack-finished","attack"].includes(z.phase),je=isFullCollectionBuff({caps:z.battle.state.caps}),He=isFullCollectionBuff({caps:z.battle.state.enemies});function Xe($e){if(!T.capsGd||!T.user)return-1;const We=T.capsGd,nt=T.user,Qt=(Wt,Bn)=>{if(!We.madness.basic.rewards||We.madness.basic.rewards.length==0)return Bn?z.battle.round*We.madness.basic.gumPerLevel:We.madness.basic.gumPerLevel;if(Bn){let Lt=0;for(let Mn=nt.madnessRecord?.round??0;Mn<Wt;Mn++){const cr=Mn<We.madness.basic.rewards.length?We.madness.basic.rewards[Mn]:We.madness.basic.gumPerLevel;Lt+=cr}return Lt}else return Wt<We.madness.basic.rewards.length?We.madness.basic.rewards[Wt]:We.madness.basic.gumPerLevel};return We.madness.basic.rewardMode=="all"||!nt.madnessRecord||nt.madnessRecord.deadline<Timestamp.now()?Qt(z.battle.round,$e):nt.madnessRecord.round>z.battle.round?0:Math.max(0,Qt(z.battle.round,$e))}return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"pve-level__select-cap-wrapper",children:jsxRuntimeExports.jsxs("div",{className:"pve-battle",children:[jsxRuntimeExports.jsxs("div",{className:"madness-battle__title",children:[jsxRuntimeExports.jsxs("span",{className:"madness-battle__title--round",children:[d("madness.round")," ",z.battle.round+1,":"]}),`+${Xe(!1)} (${d("madness.total")}: ${Xe(!0)})`,jsxRuntimeExports.jsx("img",{className:"madness-battle__title--gum",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",style:{zIndex:Y},children:[z.battle.state.enemies.map(($e,We)=>jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:$e.health<=0,variant:"pve-small",cap:$e,selectedNumber:z.phase!=="attack-finished"&&z.attackTo==We?1:void 0,ref:nt=>{G.current[We]=nt},style:ie[We],onClickCallback:()=>De(We)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",$e.health,"/",$e.maxHealth]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${He?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom($e,T.capsGd,T.pveGd,He),"-",getCapPvePowerTo($e,T.capsGd,T.pveGd,He)]})]})]},"enemy"+$e.url+We)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:fe[0],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__center",children:[jsxRuntimeExports.jsx(PveBoostersBlock,{battleId:_.battle.id,onBoosterSelected:Ge}),jsxRuntimeExports.jsx(PveFactionsBlock,{factions:z.battle.state.caps.map($e=>getFactionFromCap($e,T.pveGd)),isBuff:je})]}),!1,jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",children:[z.battle.state.caps.map(($e,We)=>jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:$e.health<=0,variant:"pve-small",cap:$e,style:se[We],ref:nt=>{I.current[We]=nt},className:`${z.battle.state.attacked.indexOf(We)!==-1?"cap__element--removed":""}`,selectedNumber:z.attackFrom==We?1:void 0,onClickCallback:()=>Fe(We)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",$e.health,"/",$e.maxHealth]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${je?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom($e,T.capsGd,T.pveGd,je),"-",getCapPvePowerTo($e,T.capsGd,T.pveGd,je)]})]})]},"cap"+$e.url+We)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:fe[1],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsx(animated.div,{style:be,className:`pve-battle__health-tooltip ${ge.dominationFaction?`pve-battle__health-tooltip--${ge.dominationFaction}`:""}`,children:ge.value}),jsxRuntimeExports.jsx("div",{className:"pve-battle__button",children:(z.phase=="initial"||z.phase=="attack-started"||z.phase=="counter-attack-finished"||z.phase=="attack")&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:we,disabled:z.phase=="attack-started"||z.attackFrom<0||z.attackTo<0,children:d("pve.battle")})}),jsxRuntimeExports.jsx(MadnessExitDialog,{onYes:$e=>{C(!1),$e.battleResult&&_.onSetBattleResult($e.battleResult)},onNo:()=>C(!1),isShow:A,battleId:_.battle.id}),jsxRuntimeExports.jsx(MadnessBonusSelect,{isShow:ze,bonuses:z.bonuses??z.battle.state.bonuses??[],caps:z.battle.state.caps,battleId:_.battle.id,onSelected:Oe,isBuff:je})]})})})},MadnessResult=({result:_={isWin:!0,reward:{type:"coins",coins:200},newBalance:2e3},isShow:d})=>{const{t:v}=useTranslation(),[A,C]=reactExports.useState(!1),{onUserUpdate:w}=useAppState(),T=useNavigate(),[R,G]=reactExports.useState(!1),I=useAction(fetchUnfinishedGamesAction);reactExports.useEffect(()=>{R&&T("/",{replace:!0})},[R,T]),reactExports.useEffect(()=>{d&&CapsWebApp.playSound("pve/win.mp3")},[d]);const z=reactExports.useCallback(async()=>{C(!0);try{await w(),await I(),C(!1),G(!0)}catch{C(!1)}},[I,w]);return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${d?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${d?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:v(_.isWin?"pve.win":"pve.lose")}),jsxRuntimeExports.jsx("div",{className:`pve-battle__result-gems ${_.isWin?"pve-battle__result-gems--3":"pve-battle__result-gems--1"}`,children:_.isWin?jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumWinImage,alt:"gem"}):jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gem",src:gumLoseImage,alt:"gem"})}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:[v("pve.yourReward"),": +",_.reward?.coins?formatNumber(_.reward.coins):0," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-total",children:[v("pve.totalScore"),": ",formatNumber(_.newBalance)]}),jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,isLoading:A,onClick:z,children:v("madness.finish")})]})})},Madness=()=>{const _=useLocation(),{id:d}=useParams(),[v,A]=reactExports.useState(void 0),[C,w]=reactExports.useState(!1),[T,R]=reactExports.useState(_.state);return reactExports.useEffect(()=>{!_.state&&d?(w(!0),firebaseService.getBattle(d).then(G=>{R(G),w(!1)})):window.history.replaceState({},"")},[d,_.state]),C||!T?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MadnessBattle,{battle:T,onSetBattleResult:A}),jsxRuntimeExports.jsx(MadnessResult,{result:v,isShow:!!v})]})},cap1Image$1="/onboarding/onboarding-cap1.png",cap2Image$1="/onboarding/onboarding-cap2.png",cap3Image$1="/onboarding/onboarding-cap3.png",StepPack=({className:_})=>{const d=firebaseService.getPackTopPartUrl(COMMON_COLLECTION_ID),v=firebaseService.getPackBottomPartUrl(COMMON_COLLECTION_ID),[A,C]=reactExports.useState(""),w=()=>{C(A==="open"?"":"open")},{t:T}=useTranslation();return reactExports.useEffect(()=>{setTimeout(()=>{w()},1e3)},[]),jsxRuntimeExports.jsxs("div",{className:`onboarding-step-pack ${_??""}`,onClick:w,children:[jsxRuntimeExports.jsx("div",{className:"onboarding__title",children:T("onboarding.steppack")}),jsxRuntimeExports.jsxs("div",{className:"onboarding-step-pack__pack",children:[jsxRuntimeExports.jsx("img",{className:`onboarding-step-pack__top ${A}`,src:d,alt:"Top part"}),jsxRuntimeExports.jsxs("div",{className:`onboarding-step-pack__pack-bottom-parts ${A}`,children:[jsxRuntimeExports.jsx("img",{src:cap3Image$1,alt:"cap3",className:`onboarding-step-pack__cap onboarding-step-pack__cap3 ${A}`}),jsxRuntimeExports.jsx("img",{src:cap2Image$1,alt:"cap2",className:`onboarding-step-pack__cap onboarding-step-pack__cap2 ${A}`}),jsxRuntimeExports.jsx("img",{src:cap1Image$1,alt:"cap1",className:`onboarding-step-pack__cap onboarding-step-pack__cap1 ${A}`}),jsxRuntimeExports.jsx("img",{src:v,alt:"Bottom part",className:`onboarding-step-pack__pack-bottom ${A}`})]})]})]})},StepCaps=({className:_,isStart:d})=>{const{t:v}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`onboarding-step-caps ${_??""}`,children:[jsxRuntimeExports.jsx("div",{className:"onboarding__title",children:v("onboarding.stepcaps")}),jsxRuntimeExports.jsxs("div",{className:`${d?"game__progress":"onboarding__step--hide"} onboarding-step-caps__progress`,children:[jsxRuntimeExports.jsx("img",{src:explosionImage$1,alt:"explosion",className:`onboarding-step-caps__explosion ${d?"game__progress-explosion":""}`}),jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:`onboarding-step-caps__cap-1 ${d?"game__progress-cap-1":""} `}),jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:`onboarding-step-caps__cap-2 ${d?"game__progress-cap-2":""} `})]})]})},shopImage="/onboarding/onboarding-shop.png",StepGum=({className:_,isStart:d,isNext:v})=>{const A=firebaseService.getCollectionCapUrl("packs/small.png"),{t:C}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`onboarding-step-gum ${_??""} `,children:[jsxRuntimeExports.jsxs("div",{className:`onboarding__title onboarding-step-gum--transition ${v?"onboarding__step--hide":""}`,children:[C("onboarding.stepgum")," ",jsxRuntimeExports.jsx("span",{className:"onboarding__title--yellow",children:"$GUM"})]}),jsxRuntimeExports.jsx("img",{src:shopImage,alt:"shop",className:`onboarding-step-gum__shop onboarding-step-gum--transition ${v?"onboarding__step--hide":""}`}),jsxRuntimeExports.jsx("img",{src:A,alt:"gum",className:`onboarding-step-gum__gum onboarding-step-gum__gum1 ${d?"down":"onboarding__step--hide"} ${v?"next":""}`}),jsxRuntimeExports.jsx("img",{src:A,alt:"gum",className:`onboarding-step-gum__gum onboarding-step-gum__gum2 ${d?"down":"onboarding__step--hide"} ${v?"next":""}`})]})},upgradeImage="/onboarding/onboarding-upgrade.png",StepUpgrade=({className:_})=>{const{t:d}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`onboarding-step-upgrade  ${_??""}`,children:[jsxRuntimeExports.jsxs("div",{className:"onboarding__title",children:[d("onboarding.stepupgrade1")," ",jsxRuntimeExports.jsx("span",{className:"onboarding__title--yellow",children:"$GUM"})," ",d("onboarding.stepupgrade2")]}),jsxRuntimeExports.jsx("img",{src:upgradeImage,alt:"shop",className:"onboarding-step-upgrade__img"})]})},cap1Image="/onboarding/onboarding-finish-cap1.png",cap2Image="/onboarding/onboarding-finish-cap2.png",cap3Image="/onboarding/onboarding-finish-cap3.png",cap5Image="/onboarding/onboarding-finish-cap5.png",cap6Image="/onboarding/onboarding-finish-cap6.png",cap7Image="/onboarding/onboarding-finish-cap7.png",cap8Image="/onboarding/onboarding-finish-cap8.png",cap9Image="/onboarding/onboarding-finish-cap9.png",cap10Image="/onboarding/onboarding-finish-cap10.png",cap11Image="/onboarding/onboarding-finish-cap11.png",cap12Image="/onboarding/onboarding-finish-cap12.png",StepFinish=({className:_,isStart:d})=>{const{t:v}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`onboarding-step-finish ${_??""}`,children:[jsxRuntimeExports.jsx("div",{className:"onboarding__title",children:v("onboarding.stepfinish")}),jsxRuntimeExports.jsxs("div",{className:`onboarding-step-finish__caps ${d?"move":""}`,children:[jsxRuntimeExports.jsx("img",{src:cap12Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-12"}),jsxRuntimeExports.jsx("img",{src:cap11Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-11"}),jsxRuntimeExports.jsx("img",{src:cap10Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-10"}),jsxRuntimeExports.jsx("img",{src:cap9Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-9"}),jsxRuntimeExports.jsx("img",{src:cap7Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-7"}),jsxRuntimeExports.jsx("img",{src:cap5Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-5"}),jsxRuntimeExports.jsx("img",{src:cap1Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-1"}),jsxRuntimeExports.jsx("img",{src:cap2Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-2"}),jsxRuntimeExports.jsx("img",{src:cap3Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-3"}),jsxRuntimeExports.jsx("img",{src:cap6Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-6"}),jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-4"}),jsxRuntimeExports.jsx("img",{src:cap8Image,alt:"cap",className:"onboarding-step-finish__cap onboarding-step-finish__cap-8"})]})]})},Onboarding=()=>{const[_,d]=reactExports.useState(1),{onUserAndPendingPacksUpdate:v}=useAppState(),A=useNavigate();reactExports.useEffect(()=>{tutorialService.completeTutorialStep("onboarding_started",firebaseService.token)},[]);const C=_===5,w=async()=>{_===2&&await capsService.completeOnboarding(firebaseService.token),C&&(await v(),A("/home")),tutorialService.completeTutorialStep(`onboarding_step_finished_${_}`,firebaseService.token),d(_+1)};return jsxRuntimeExports.jsxs("div",{className:"onboarding",children:[jsxRuntimeExports.jsx(StepPack,{className:`onboarding__step ${_!==1?"onboarding__step--hide":""}`}),jsxRuntimeExports.jsx(StepCaps,{isStart:_>=2,className:`onboarding__step ${_!==2?"onboarding__step--hide":""}`}),jsxRuntimeExports.jsx(StepGum,{isStart:_>=3,isNext:_>3,className:`onboarding__step ${_!==3&&_!==4?"onboarding__step--hide":""}`}),jsxRuntimeExports.jsx(StepUpgrade,{className:`onboarding__step ${_!==4?"onboarding__step--hide":""}`}),jsxRuntimeExports.jsx(StepFinish,{isStart:_>=5,className:`onboarding__step ${_!==5?"onboarding__step--hide":""}`}),jsxRuntimeExports.jsxs("div",{className:`onboarding__footer ${C?"onboarding__step--hide":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"onboarding__step-counters",children:[jsxRuntimeExports.jsx("div",{className:`onboarding__step-counter ${_>=1?"onboarding__step-counter--active":""}`}),jsxRuntimeExports.jsx("div",{className:`onboarding__step-counter ${_>=2?"onboarding__step-counter--active":""}`}),jsxRuntimeExports.jsx("div",{className:`onboarding__step-counter ${_>=3?"onboarding__step-counter--active":""}`}),jsxRuntimeExports.jsx("div",{className:`onboarding__step-counter ${_>=4?"onboarding__step-counter--active":""}`})]}),jsxRuntimeExports.jsx(Button,{color:"yellow",onClick:w,children:"Next"})]}),jsxRuntimeExports.jsx("div",{className:"onboarding__footer onboarding__footer--finish",children:jsxRuntimeExports.jsx(Button,{color:"yellow",className:`onboarding__button-finish ${C?"onboarding__button-finish--show":""} `,onClick:w,children:"Start"})})]})},LeaderboardSeason=()=>{const[_,d]=reactExports.useState({byUsers:{leaderboard:[]}}),{appState:v}=useAppState(),{t:A}=useTranslation(),[C,w]=reactExports.useState("all"),[T,R]=reactExports.useState(!1),G=useNavigate(),[I,z]=useAtom(showLeaderboardUserIdAtom),H=reactExports.useCallback(()=>{I||G("/home")},[G,I]);useBackClick(H);const Y=reactExports.useMemo(()=>C==="all"||C==="type",[C]),ee=reactExports.useMemo(()=>C==="all"||C==="league",[C]),ie=reactExports.useMemo(()=>{const ve=v.capsGd?.seasons?.find(we=>we.id==v.capsGd?.season)?.seasonLeagues,Me=v.seasonData?v.seasonData.score??0:0;return ve?.find(we=>we.from<=Me&&(we.to?Me<=we.to:!0))},[_,v]),oe=reactExports.useMemo(()=>v.capsGd?.seasons?.find(ve=>ve.id==v.capsGd?.season)?.seasonLeagues,[_,v]),se=reactExports.useMemo(()=>{if(_.league)return _.league;const ve=v.seasonData?v.seasonData.score??0:0,Me=oe?.findIndex(we=>{we.from>=ve&&(we.to&&ve<=we.to)});return Me&&Me>=0?Me:0},[_]),re=reactExports.useMemo(()=>oe?oe[se]:void 0,[v.capsGd?.leagues,oe,se]),fe=()=>{C==="loaded"&&v.capsGd&&ge({league:Math.min(se+1,v.capsGd.leagues.length-1)})},ue=()=>{C==="loaded"&&v.capsGd&&(d({..._,league:Math.max(se-1,0)}),ge({league:Math.max(se-1,0)}))},ge=reactExports.useCallback(async ve=>{ve||w("all"),ve?.league&&w("league");const Me=v.capsGd?.seasons?.find(we=>we.id==v.capsGd?.season);if(v.capsGd?.season&&Me&&Me.seasonLeagues){const we=v.seasonData&&v.seasonData.score>0?v.seasonData:{...v.user,score:0},Be=Me.seasonLeagues.findIndex(He=>He.from<=we.score&&(He.to?we.score<=He.to:!0))??-1,De=Be>=0?Me.seasonLeagues[Be]:void 0,Fe=ve?ve.league:Be>=0?Be:_.league??0,Oe=Me.seasonLeagues[Fe],Ge=v.capsGd.season,ze=await firebaseService.getUsersSeasonLeaderboard(Ge,Oe.from,Oe.to),je=await firebaseService.getUserPositionInSeasonLeaderboard(we,Ge,De?.to??Me.seasonLeagues[0].to);d({..._,userProfile:{...je,userRating:we},byUsers:{leaderboard:ze.users,lastDocument:ze.lastDocument,position:je?{position:je.position,score:je.score,userRating:we}:void 0},league:Fe})}w("loaded")},[_]);reactExports.useEffect(()=>{ge()},[]);const ye=reactExports.useCallback(async()=>{R(!0);const ve=_.byUsers.lastDocument,Me=oe?oe[se]:void 0,we=await firebaseService.getUsersSeasonLeaderboard(v.capsGd?.season??"",Me?.from??-1,Me?.to??-1,ve);d({..._,byUsers:{..._.byUsers,leaderboard:[..._.byUsers.leaderboard,...we.users],lastDocument:we.lastDocument}}),R(!1)},[_]),be=reactExports.useMemo(()=>re?re.to?`${A("leaderboard.from")} ${formatNumber(re.from)} ${A("leaderboard.to")} ${formatNumber(re.to)} ${A("leaderboard.points")}`:`${A("leaderboard.from")} ${formatNumber(re.from)} ${A("leaderboard.points")}`:"",[re,A]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-first",children:re&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-selector",children:[_.league!==0&&jsxRuntimeExports.jsx("button",{className:"leaderboard__league-prev",onClick:()=>ue(),children:jsxRuntimeExports.jsx("img",{src:prevImage,alt:"prev"})}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-image leaderboard__league-image--${re.title}`,children:ee?jsxRuntimeExports.jsx("img",{className:"leaderboard__league-image--loading",src:getGobletImage(re.image),alt:"goblet"}):jsxRuntimeExports.jsx("img",{src:getGobletImage(re.image),alt:"goblet"})}),_.league!==(oe?.length??0)-1&&jsxRuntimeExports.jsx("button",{className:"leaderboard__league-next",onClick:()=>fe(),children:jsxRuntimeExports.jsx("img",{src:nextImage,alt:"next"})})]}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-title ${ee?"leaderboard__league-title--loading":""}`,children:!ee&&`${re.title} ${A("leaderboard.league")}`}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-subtitle ${C!=="loaded"?"leaderboard__league-subtitle--loading":""}`,children:C==="loaded"&&be})]})}),Y&&jsxRuntimeExports.jsx(LeaderboardProfileSkeleton,{}),!Y&&_.userProfile&&jsxRuntimeExports.jsx(LeaderboardProfile$1,{profile:_.userProfile,league:_.userProfile.userRating.league,gobletImage:getGobletImage(ie?.image??"bronze"),name:getName(_.userProfile.userRating)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__table",children:[C!=="loaded"&&[...Array(6)].map((ve,Me)=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-score leaderboard__league-score--loading"})]},"leaderboard"+Me)),_.byUsers.leaderboard.map((ve,Me)=>jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",onClick:()=>z(ve.id),children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",children:getName(ve)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"goblet",src:getGobletImage(ve.league)}),formatNumber(ve.score??0)]}),jsxRuntimeExports.jsxs("div",{className:`leaderboard__league-place ${ve.id===_.userProfile?.userRating?.id?"leaderboard__league-place--me":""}`,children:[ve.id===_.userProfile?.userRating.id&&jsxRuntimeExports.jsx("span",{className:"leaderboard__league-badge",children:A("leaderboard.you")}),"#",Me+1]})]},ve.id))]}),_.byUsers.lastDocument!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button battle-game-bid__button",color:"transparent",size:"small",onClick:()=>ye(),isLoading:T,children:A("battle.loadMore")})]}),I&&jsxRuntimeExports.jsx(LeaderboardUserAsync,{}),jsxRuntimeExports.jsx(NavBar,{})]})};function LeaderboardProfileSkeleton(){return jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar--squad leaderboard__league-avatar--squad--loading"})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-place"})]}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-second",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-stats",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-stats-first",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-score leaderboard__profile-score--loading"})})})})]})}function LeaderboardProfile$1({profile:_,name:d,gobletImage:v,onClick:A}){return jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile",onClick:A,children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:jsxRuntimeExports.jsx(LeaderboardAvatar,{})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-username",children:d}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-place",children:["#",_.position]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-second",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",src:v,alt:"goblet"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-stats",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-stats-first",children:jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-score",children:formatNumber(_.score??0)})})})]})]})}const StakingInfo=({isShow:_,onClose:d,sumSpeed:v})=>{const[A]=useAtom(userAtom),{t:C}=useTranslation(),{appState:w,onUserUpdate:T}=useAppState();return jsxRuntimeExports.jsx(Info,{isShow:_,buttons:jsxRuntimeExports.jsx(Button,{onClick:d,children:C("ok")}),children:jsxRuntimeExports.jsxs("div",{className:"staking-info",children:[jsxRuntimeExports.jsx("img",{src:stakingInfo,alt:"staking info",className:"staking-info__img"}),w.capsGd?.status.isFarmingStarted&&jsxRuntimeExports.jsxs("div",{className:"staking-info__speed",children:["+",v," $CG ",C("staking.perDay")]}),jsxRuntimeExports.jsxs("div",{className:"staking-info__tokens",children:[A.tokensStr," $CG"," ",jsxRuntimeExports.jsx("img",{className:"staking-info__tokens-img",src:StakedCoin,alt:"staked coin"})]}),jsxRuntimeExports.jsx("div",{className:"staking-info__description",children:C("staking.info")})]})})},SelectCap=({onSelected:_,filterFrontend:d,filterBackend:v,caps:A,isStakingChoose:C,className:w="",...T})=>{const{setPopup:R}=reactExports.useContext(PopupContext),G=reactExports.useRef(null),{loadingState:I,setLoadingState:z,isSkeletonShow:H}=useSkeletonLoading({defaultState:"initial",skeletonRef:G}),[Y,ee]=reactExports.useState(!1),{t:ie}=useTranslation(),{appState:oe}=useAppState(),[se,re]=reactExports.useState({caps:[]}),fe=useNavigate(),[ue,ge]=reactExports.useState(null),ye=reactExports.useCallback(()=>{T.onBackPressed?.()},[T]);return useBackClick(ye),reactExports.useEffect(()=>{(async()=>{z("loading"),A&&await sleep(500);const be=A??await firebaseService.getMyCollectionCaps(v);re({...se,caps:be}),z("skeleton-to-data")})()},[A]),jsxRuntimeExports.jsxs("div",{className:`select-caps ${w}`,children:[jsxRuntimeExports.jsxs("div",{className:"select-caps__main",children:[H&&jsxRuntimeExports.jsx("div",{ref:G,className:`upgrade__caps-list skeleton fade-out fade--long ${I==="skeleton-to-data"?"visible":""}`,children:[...Array(6)].map((be,ve)=>jsxRuntimeExports.jsx(CapElementSkeleton,{size:"medium"},ve))}),I==="loaded"&&se.caps.length===0&&jsxRuntimeExports.jsxs("div",{className:"upgrade-no-resources",children:[jsxRuntimeExports.jsx("img",{src:sadImage,className:"upgrade-no-resources__image",alt:"sad"}),jsxRuntimeExports.jsx("div",{className:"upgrade-no-resources__text",children:ie("upgrade.noUpgradeResources")}),jsxRuntimeExports.jsx(Button,{onClick:()=>{fe("/earn")},children:ie("upgrade.goToEarn")})]}),se.caps.map(be=>jsxRuntimeExports.jsx(CapElement,{variant:"medium",cap:be,isStakingSpeedShow:C,onClickCallback:()=>{be.status!="READY"&&R({message:"The cap can't be used",type:"error"}),ge(be)},selectedNumber:ue?.id===be.id?1:0},be.id))]}),jsxRuntimeExports.jsx(Button,{isLoading:Y,disabled:!ue,fullWidth:!0,className:"select-caps__button",onClick:async()=>{ee(!0),ue&&await _(ue),ee(!1)},children:ie("battle.next")})]})},Staking=()=>{const{appState:_,onUserUpdate:d}=useAppState(),[v]=useAtom(userAtom),[A]=useAtom(slottedCapsAtom),[C,w]=reactExports.useState(-1),[T,R]=reactExports.useState(-1),[G,I]=reactExports.useState(!1),{setPopup:z}=reactExports.useContext(PopupContext),H=useNavigate();reactExports.useEffect(()=>{w(-1),R(-1)},[A]);const Y=reactExports.useMemo(()=>getStakingConfig(Timestamp.now(),_.capsGd),[]),ee=reactExports.useMemo(()=>Y?Array.from(A.values()).reduce((re,fe)=>re+getStakingSpeedWithBonus(fe.cap,Timestamp.now(),_.userDiamondPosition??-1,v,_.squad,fe,_.capsGd),0).toFixed(3):"0",[A]),{t:ie}=useTranslation(),{stake:oe}=useStakingActions(),se=reactExports.useCallback(async(re,fe)=>{try{await capsService.unlockSlot(re,firebaseService.token,fe.map(ue=>ue.id)),await d()}catch{z({message:ie("staking.unlockError"),type:"error"})}},[]);return C>-1?Y?.slots[C]&&(Y.slots[C].collectionId||Y.slots[C].grade)?jsxRuntimeExports.jsx(SelectCap,{isStakingChoose:_.capsGd?.status.isTokenEnabled&&_.capsGd?.status.isFarmingStarted,onBackPressed:()=>w(-1),filterBackend:{collectionId:Y.slots[C].collectionId,grade:Y.slots[C].grade},filterFrontend:fe=>![...A].find(ue=>ue[1].cap.id===fe.id)&&fe.status=="READY",onSelected:async fe=>await oe(fe,C)}):jsxRuntimeExports.jsx("div",{className:"game",children:jsxRuntimeExports.jsx(BattleGameBid,{isCommentShow:!1,mainAction:ie("battle.next"),maxBid:1,isStakingChoose:_.capsGd?.status.isTokenEnabled&&_.capsGd?.status.isFarmingStarted,onBackPressed:()=>w(-1),filter:fe=>![...A].find(ue=>ue[1].cap.id===fe.id)&&fe.status=="READY",setBidCallback:async fe=>await oe(fe[0],C)})}):T>-1?jsxRuntimeExports.jsx("div",{className:"game",children:jsxRuntimeExports.jsx(BattleGameBid,{isCommentShow:!1,mainAction:ie("staking.unlockMainAction"),maxBid:20,isScoreChoose:!0,onBackPressed:()=>R(-1),filter:re=>![...A].find(fe=>fe[1].cap.id===re.id)&&re.status=="READY",setBidCallback:async re=>{await CapsWebApp.showPopup({message:ie("staking.burnConfirmation",{slot:T+1}),buttons:[{id:"cancel",type:"cancel"},{id:"burn",type:"default",text:""}]}).then(async fe=>{fe=="burn"&&(await se(T,re),CapsWebApp.playSound("caps-upgrade/finished.mp3"))})},mainActionGenerator:re=>ie("staking.unlockMainAction",{score:re.reduce((fe,ue)=>fe+(getCapGdGrade(ue,_.capsGd)?.score??0),0),target:findLockedSlot(T,_.capsGd)?.burn}),mainActionValidator:re=>re.reduce((fe,ue)=>fe+(getCapGdGrade(ue,_.capsGd)?.score??0),0)>=(findLockedSlot(T,_.capsGd)?.burn??-1),capValidator:re=>re.gradeNumber<4?(z({message:ie("staking.onlyEpicCanBeBurned"),type:"error"}),!1):!0})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"staking",children:[getIsStarterPackAvailable(v)&&jsxRuntimeExports.jsxs("div",{className:"staking-banner",onClick:()=>H("/earn",{state:{packIdToOpen:"starter",returnTo:"/staking"}}),children:[jsxRuntimeExports.jsx("div",{className:"staking-banner__glow-wrapper",children:jsxRuntimeExports.jsx("div",{className:"staking-banner__glow"})}),jsxRuntimeExports.jsxs("div",{className:"staking-banner__content",children:[jsxRuntimeExports.jsx("div",{className:"staking-banner__title",children:jsxRuntimeExports.jsx(Trans,{i18nKey:"staking.banner.title",components:{1:jsxRuntimeExports.jsx("span",{className:"staking-banner__title-highlight"})}})}),jsxRuntimeExports.jsx("div",{className:"staking-banner__subtitle",children:ie("staking.banner.subtitle",{defaultValue:" -  "})})]}),jsxRuntimeExports.jsx("div",{className:"staking-banner__media",children:jsxRuntimeExports.jsx("img",{className:"staking-banner__image",src:starterPackIcon,alt:"Starter pack"})})]}),jsxRuntimeExports.jsxs("div",{className:"staking__first",children:[jsxRuntimeExports.jsx("div",{className:"staking__title",children:_.capsGd?.status.isTokenEnabled?ie("staking.title"):ie("staking.profile")}),jsxRuntimeExports.jsx("div",{className:"staking__buttons",children:_.capsGd?.status.isFarmingStarted&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{className:"staking__leaderboard",onClick:()=>{H("/staking-leaderboard")},children:""}),Y&&jsxRuntimeExports.jsx("button",{className:"staking__speed-btn",onClick:()=>{H("/staking-speed")},children:""})]})})]}),_.capsGd?.status.isTokenEnabled&&jsxRuntimeExports.jsxs("div",{className:"staking__farming",children:[jsxRuntimeExports.jsx("button",{className:"staking__farming-btn",onClick:()=>I(!0),children:_.capsGd?.status.isFarmingStarted?`+${ee} $CG ${ie("staking.perDay")}`:""}),jsxRuntimeExports.jsxs("button",{className:"staking__tokens",onClick:()=>I(!0),children:[v.tokensStr," $CG"," ",jsxRuntimeExports.jsx("img",{className:"staking__tokens-img",src:StakedCoin,alt:"staked coin"})]})]}),Y?.slots&&jsxRuntimeExports.jsx(StakingSlots,{onSlotClick:w,onBurnSlot:R,slots:Y?.slots,slottedCaps:A})]}),jsxRuntimeExports.jsx(StakingInfo,{isShow:G,onClose:()=>I(!1),sumSpeed:ee}),jsxRuntimeExports.jsx(NavBar,{})]})},getCharacterImg=(_,d)=>d?firebaseService.getPveCampaignCharacter(_,d):"",PveCampaignDialog=({level:_,onClose:d})=>{const[v]=useAtom(pveCampaignAtom),{i18n:A}=useTranslation(),[C,w]=reactExports.useState(0),T=_.dialog?.[A.language]||[],R=()=>{C<T.length-1?w(C+1):d()};return jsxRuntimeExports.jsxs("div",{className:"pve-campaign-dialog",onClick:R,children:[jsxRuntimeExports.jsxs("div",{className:`pve-campaign-dialog__content ${T[C].character==="hero"?"pve-campaign-dialog__content--hero":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-campaign-dialog__text",children:T[C].text}),jsxRuntimeExports.jsx("div",{className:"pve-campaign-dialog__character ",children:jsxRuntimeExports.jsx("img",{src:getCharacterImg(v.id,T[C].character),alt:"Character"})})]}),jsxRuntimeExports.jsx("div",{className:"pve-campaign-dialog__instruction",children:"Tap to continue"})]})},getPositionStyles=(_,d)=>{switch(_){case"top":return{top:`calc(${d.y*100}% - 25px)`,left:`${d.x*100}%`};case"bottom":return{top:`${d.y*100}%`,left:`${d.x*100}%`};case"left":return{top:`${d.y*100}%`,left:`${d.x*100}%`};case"right":return{top:`${d.y*100}%`,left:`${d.x*100}%`};case"right-down":return{top:`${d.y*100}%`,left:`${d.x*100}%`};case"right-up":return{top:`${d.y*100}%`,left:`${d.x*100}%`};case"left-down":return{top:`${d.y*100}%`,left:`${d.x*100}%`};case"left-up":return{top:`${d.y*100}%`,left:`${d.x*100}%`}}},getPosition=(_,d,v)=>{if(!v.current)return{name:"top",style:getPositionStyles("top",_.position)};const A=v.current,C=_.position.x*A.scrollWidth,w=_.position.y*A.scrollHeight,T=C-A.scrollLeft+A.getBoundingClientRect().left,R=w-A.scrollTop+A.getBoundingClientRect().top,G=R,I=window.innerHeight-R,z=T,H=window.innerWidth-T;let Y="top";const ee=300,ie=d.current?.offsetHeight||490;return I>=ie+30&&(Y="bottom"),G>=ie+30&&(Y="top"),H>=ee+30?G>=ie/2&&I>=ie/2?Y="right":I>G?Y="right-down":Y="right-up":z>=ee+30&&(G>=ie/2&&I>=ie/2?Y="left":I>G?Y="left-down":Y="left-up"),{name:Y,style:getPositionStyles(Y,_.position)}},PveCampaignLevelTooltip=({level:_,onClose:d,onStart:v,campaignRef:A})=>{const C=reactExports.useRef(null),w=getPosition(_,C,A);return jsxRuntimeExports.jsxs("div",{className:`pve-campaign-level-tooltip pve-campaign-level-tooltip--${w.name}`,ref:C,style:w.style,children:[jsxRuntimeExports.jsx("button",{className:"pve-campaign-level-tooltip__close",onClick:d,"aria-label":"Close",children:""}),jsxRuntimeExports.jsx("h4",{children:"Battle"}),jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__content",children:[jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__row",children:[jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__column",children:[jsxRuntimeExports.jsx("h4",{children:"You"}),jsxRuntimeExports.jsx("div",{className:"pve-campaign-level-tooltip__caps",children:_.caps?.map((T,R)=>{const G={id:T.collectionId,isGradeDependent:!1},I={url:T.collectionId?getCapUrl(T.grade??"COMMON",G,1):"",grade:T.grade};return jsxRuntimeExports.jsx(CapElement,{cap:I,isCapNumberHide:!0,variant:"small"},`cap-${R}`)})})]}),jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__column",children:[jsxRuntimeExports.jsx("h4",{children:"Enemies"}),jsxRuntimeExports.jsx("div",{className:"pve-campaign-level-tooltip__enemies",children:_.enemies?.map((T,R)=>jsxRuntimeExports.jsx(CapElement,{cap:T,variant:"small"},`enemy-${R}`))})]})]}),jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__rewards",children:[jsxRuntimeExports.jsx("h4",{children:"Rewards"}),jsxRuntimeExports.jsx("div",{className:"pve-campaign-level-tooltip__rewards-items",children:_.rewards?.map((T,R)=>jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__reward",children:[jsxRuntimeExports.jsx("img",{src:getReward(T).image,alt:T.type}),jsxRuntimeExports.jsx("span",{children:getReward(T).text})]},`reward-${R}`))})]}),_.opened&&jsxRuntimeExports.jsx(Button,{size:"small",onClick:v,children:"Start Game"})]})]})},PveCampaignResult=({result:_={isWin:!0,reward:{type:"coins",coins:200},newBalance:2e3},onComplete:d,onTryAgain:v,isShow:A,isEnergyEnough:C})=>{const{t:w}=useTranslation(),T=useNavigate(),[R,G]=reactExports.useState(!1),{onUserUpdate:I}=useAppState(),[z]=useAtom(tutorialAtom),H=useAction(nextTutorialAction),Y=useAction(fetchUnfinishedGamesAction),ee=async()=>{G(!0),await I(),await Y(),G(!1),d()},ie=()=>{T("/home"),H()};return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${A?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${A?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:w(_.isWin?"pve.win":"pve.lose")}),_.reward&&jsxRuntimeExports.jsx("div",{className:`pve-battle__result-gems ${_.isWin?"pve-battle__result-gems--3":"pve-battle__result-gems--1"}`,children:_.isWin?jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumWinImage,alt:"gem"}):jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gem",src:gumLoseImage,alt:"gem"})}),_.isWin?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_.reward&&jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:[w("pve.yourReward"),": +",_.reward.coins?formatNumber(_.reward.coins):0," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),_.rewards&&jsxRuntimeExports.jsx("div",{className:"pve-battle__result-reward",children:_.rewards?.map((oe,se)=>jsxRuntimeExports.jsxs("div",{className:"pve-campaign-level-tooltip__reward",children:[jsxRuntimeExports.jsx("img",{src:getReward(oe).image,alt:oe.type}),jsxRuntimeExports.jsx("span",{children:getReward(oe).text})]},`reward-${se}`))}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-total",children:[w("pve.totalScore"),": ",formatNumber(_.newBalance)]}),C&&z===!1?jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,isLoading:R,onClick:ee,children:w("pve.nextLevel")}):jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,isLoading:R,onClick:ie,children:w("pve.goHome")})]}):jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:ie,variant:"secondary",fullWidth:!0,children:w("pve.goHome")}),C&&jsxRuntimeExports.jsx(Button,{onClick:()=>v(),fullWidth:!0,children:w("pve.tryAgain")})]})]})})},pveBattleReducer=(_,d)=>{switch(d.type){case"attack-started":return{..._,phase:"attack-started"};case"attack":{const v=_.battle;v.state=d.payload.pendingAttack.newBattleState;const A=v.state.caps.filter(T=>T.health>0).length<=v.state.attacked.length,C=getNextFromCap(_),w=getNextToCap(_);return A&&(_.attackCapsSelected=[C,w]),{..._,battleResult:d.payload.battleResult,battle:v,attackFrom:getNextFromCap(_),attackTo:getNextToCap(_),phase:A?"attack-finished":"attack"}}case"before-counter-attack-started":{const v=_.battle;return v.state.attacked=[],{..._,battle:v,phase:"counter-attack-started"}}case"counter-attack-started":{const v=_.battle;return v.state=d.payload.newBattleState,{..._,battleResult:d.payload.battleResult,battle:v,phase:d.payload.battleResult?"finished":"counter-attack-started"}}case"counter-attack-finished":return _.attackFrom=_.attackCapsSelected[0],_.attackTo=_.attackCapsSelected[1],_.attackFrom=getNextFromCap(_),_.attackTo=getNextToCap(_),{..._,battleResult:d.payload.battleResult,phase:_.battleResult?"finished":"counter-attack-finished"};case"deselect-caps":return{..._,attackFrom:-1,attackTo:-1};case"attack-from":return{..._,attackFrom:d.cap};case"attack-to":return{..._,attackTo:d.cap};case"booster-selected":{const v=_.battle;return v.state=d.payload.afterBooster,v.status="attack",{..._,battle:v,attackTo:-1,attackFrom:-1,phase:"attack"}}default:return _}},PveCampaignBattle=({level:_,...d})=>{const{t:v}=useTranslation(),{appState:A,onUserUpdate:C}=useAppState(),w=reactExports.useRef([]),T=reactExports.useRef([]),[R]=useAtom(tutorialAtom),[G,I]=reactExports.useState(R==="pve"),[z,H]=reactExports.useReducer(pveBattleReducer,{attackFrom:-1,attackTo:-1,battle:d.battle,phase:"initial",attackCapsSelected:[-1,-1]}),[Y,ee]=reactExports.useState(1),[ie,oe]=reactExports.useState(!1),{energy:se}=useEnergy({userEnergy:A.user?.caps_energy,energyGd:A.capsGd?.energy}),re=se>=(A.pveGd?.launchEnergyPrice??0),{enemiesSprings:fe,enemiesApi:ue,mySprings:ge,myApi:ye,explosionSpring:be,explosionApi:ve,healthDiff:Me,setHealthDiff:we,healthDiffSpring:Be,healthDiffApi:De}=useBattle({battleState:z}),Fe=reactExports.useCallback(()=>{oe(!0)},[oe]);useBackClick(Fe);const Oe=($e,We)=>{switch($e){case"enemy":{if(z.battle.state.enemies[We].health<=0)return;const nt=z.attackTo==We?-1:We;H({type:"attack-to",cap:nt});break}case"my":{if(z.battle.state.caps[We].health<=0)return;const nt=z.attackFrom==We?-1:We;H({type:"attack-from",cap:nt});break}}},Ge=async()=>{G&&I(!1),H({type:"attack-started"});const $e=capsService.attack(d.battle.id,z.attackFrom,z.attackTo,firebaseService.token),We=getDominationClass(z.battle.state.caps[z.attackFrom],z.battle.state.enemies[z.attackTo],A.pveGd),nt=T.current[z.attackFrom].getBoundingClientRect(),Qt=w.current[z.attackTo].getBoundingClientRect(),Wt=document.querySelectorAll(".pve-level-caps-list__icon--heart")[z.attackTo].getBoundingClientRect(),Bn=Qt.left-nt.left,Lt=Qt.bottom-nt.top,{x:Mn,left:cr,rotate:In}=getOffsetUp(z.attackFrom,z.attackTo,Qt);ye.start(Zn=>{if(Zn===z.attackFrom)return{to:async $n=>{ve.start(Rn=>{if(Rn!==1)return{from:{left:cr,top:Qt.height-Qt.width/4,scale:0,rotate:In},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await $n({x:Mn+Bn,y:Lt-Qt.height/3,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-my-to-enemy.mp3"),await $n({x:0,y:0,scale:1,filter:"grayscale(100%)",boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),ve.start(Rn=>{if(Rn!==1)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),$e.then(Rn=>{we({value:Rn.attack.newHealth-z.battle.state.enemies[z.attackTo].health,dominationFaction:We}),console.log("animation attack: "+Rn.attack.from+">>>"+Rn.attack.to),Rn.attack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),Rn.battleResult&&CapsWebApp.playSound("pve/win.mp3"),H({type:"attack",payload:{pendingAttack:{attack:Rn.attack,newBattleState:Rn.afterAttack},battleResult:Rn.battleResult}}),Wt&&showHeartDiff(Wt,De),setTimeout(()=>{ue.start(Dn=>{if(Dn===z.attackTo)return{to:{zIndex:0}}})},1e3)})}}})};reactExports.useEffect(()=>{z.phase==="attack-finished"&&ze()},[z.phase]);const ze=async()=>{H({type:"before-counter-attack-started"}),ye.start({to:{filter:"grayscale(0%)"}});try{const $e=await capsService.counterAttack(d.battle.id,firebaseService.token);if($e.attacks.length==0){H({type:"counter-attack-finished",payload:{}});return}for(const[We,nt]of $e.attacks.entries()){const Qt=getDominationClass(z.battle.state.enemies[nt.counterAttack.from],z.battle.state.caps[nt.counterAttack.to],A.pveGd);console.log("animation counter attack: "+nt.counterAttack.from+">>>"+nt.counterAttack.to);const Wt=nt.counterAttack.from,Bn=nt.counterAttack.to;Oe("enemy",Wt),Oe("my",Bn);const Lt=w.current[Wt].getBoundingClientRect(),Mn=T.current[Bn].getBoundingClientRect(),cr=document.querySelectorAll(".pve-level-caps-list__icon--heart")[z.battle.state.enemies.length+Bn].getBoundingClientRect(),In=Mn.left-Lt.left,Zn=Mn.top-Lt.top,{x:$n,left:Rn,rotate:Dn}=getOffsetDown(Wt,Bn,Mn);ee(2),ue.start(Gt=>{if(Gt===Wt)return{to:async Jn=>{ve.start(Nn=>{if(Nn!==0)return{from:{left:Rn,top:Mn.top,scale:0,rotate:Dn},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await Jn({x:$n+In,y:Zn-Mn.height/2,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-enemy-to-my.mp3"),await Jn({x:0,y:0,scale:1,boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),ve.start(Nn=>{if(Nn!==0)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),H({type:"deselect-caps"}),we({value:nt.counterAttack.newHealth-z.battle.state.caps[Bn].health,dominationFaction:Qt}),nt.counterAttack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),H({type:"counter-attack-started",payload:{newBattleState:nt.afterCounterAttack}}),cr&&showHeartDiff(cr,De),ye.start({to:{zIndex:0}}),ue.start({to:{zIndex:0}}),We===$e.attacks.length-1&&($e.battleResult&&CapsWebApp.playSound("pve/losing.mp3"),H({type:"counter-attack-finished",payload:{battleResult:$e.battleResult}}),ee(1))}}}),await wait(1e3)}}catch($e){console.error("counter-attack",$e)}},je=$e=>{["initial","attack","counter-attack-finished"].includes(z.phase)&&z.battle.state.enemies[$e].health>0&&(Oe("enemy",$e),CapsWebApp.playSound("pve/select-enemy-cap.mp3"))},He=$e=>{["initial","attack","counter-attack-finished"].includes(z.phase)&&z.battle.state.attacked.indexOf($e)===-1&&(Oe("my",$e),CapsWebApp.playSound("pve/select-my-cap.mp3"))},Xe=$e=>{C(),H({type:"booster-selected",payload:$e})};return jsxRuntimeExports.jsx("div",{className:`pve-level__wrapper ${G?"tutorial__dimmer tutorial__dimmer--absolute":"tutorial__dimmer--no-bg"}`,children:jsxRuntimeExports.jsxs("div",{className:"pve-battle",children:[jsxRuntimeExports.jsx("div",{className:"pve-level__title",children:v("pve.enemyTitle")}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",style:{zIndex:Y},children:[z.battle.state.enemies.map(($e,We)=>jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${G&&We===0&&z.attackFrom===0&&z.attackTo!==0?"pve-battle__cap-wrapper--tutorial":""}`,children:[G&&We===0&&z.attackFrom===0&&z.attackTo!==0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-level-caps-list__finger",alt:"finger"}),jsxRuntimeExports.jsx(CapElement,{isRemoved:$e.health<=0,variant:"pve-small",cap:$e,selectedNumber:z.phase!=="attack-finished"&&z.attackTo==We?1:void 0,ref:nt=>{w.current[We]=nt},style:fe[We],onClickCallback:()=>je(We)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",$e.health]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${d.isEnemyBuff?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom($e,A.capsGd,A.pveGd,d.isEnemyBuff),"-",getCapPvePowerTo($e,A.capsGd,A.pveGd,d.isEnemyBuff)]})]})]},"enemy"+$e.url+We)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:be[0],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__center",children:[jsxRuntimeExports.jsx(PveBoostersBlock,{battleId:d.battle.id,onBoosterSelected:Xe}),jsxRuntimeExports.jsx(PveFactionsBlock,{factions:z.battle.state.caps.map($e=>getFactionFromCap($e,A.pveGd)),isBuff:d.isBuff})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",children:[z.battle.state.caps.map(($e,We)=>jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${G&&We===0&&z.attackFrom!==0?"pve-battle__cap-wrapper--tutorial":""}`,children:[G&&We===0&&z.attackFrom!==0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-level-caps-list__finger",alt:"finger"}),jsxRuntimeExports.jsx(CapElement,{isRemoved:$e.health<=0,variant:"pve-small",cap:$e,style:ge[We],ref:nt=>{T.current[We]=nt},className:`${z.battle.state.attacked.indexOf(We)!==-1?"cap__element--removed":""}`,selectedNumber:z.attackFrom==We?1:void 0,onClickCallback:()=>He(We)}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon pve-level-caps-list__icon--heart",src:heartImage,alt:"heart"})," ",$e.health]}),jsxRuntimeExports.jsxs("div",{className:`pve-level-caps-list__item ${d.isBuff?"pve-level-caps-list__item--buffed":""}`,children:[jsxRuntimeExports.jsx("img",{className:"pve-level-caps-list__icon",src:lightningImage,alt:"lightning"}),getCapPvePowerFrom($e,A.capsGd,A.pveGd,d.isBuff),"-",getCapPvePowerTo($e,A.capsGd,A.pveGd,d.isBuff)]})]})]},"my"+$e.url+We)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:be[1],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsx(animated.div,{style:Be,className:`pve-battle__health-tooltip ${Me.dominationFaction?`pve-battle__health-tooltip--${Me.dominationFaction}`:""}`,children:Me.value}),jsxRuntimeExports.jsxs("div",{className:`pve-battle__button ${G&&z.attackFrom===0&&z.attackTo===0?"pve-battle__button--tutorial":""}`,children:[G&&z.attackFrom===0&&z.attackTo===0&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-battle__finger",alt:"finger"}),(z.phase=="initial"||z.phase=="attack-started"||z.phase=="counter-attack-finished"||z.phase=="attack")&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:Ge,disabled:z.phase=="attack-started"||z.attackFrom<0||z.attackTo<0,children:v("pve.battle")})]}),jsxRuntimeExports.jsx(PveCampaignResult,{result:z.battleResult,onComplete:d.onComplete,onTryAgain:d.onTryAgain,isShow:!!z.battleResult,isEnergyEnough:re}),jsxRuntimeExports.jsx(PveExitDialog,{isShow:ie,onNo:()=>oe(!1),goToPve:d.onBack,isEnergyEnough:re,battleId:d.battle.id})]})})},MAX_CAPS=3,PveCampaignLevel=({level:_,...d})=>{const{t:v}=useTranslation(),{appState:A,onCheckEnergyAndUserUpdate:C}=useAppState(),[w]=useAtom(unfinishedCampaignGameAtom),[T,R]=reactExports.useState({selectingCap:-1,selectedCaps:new Map,battle:w}),[G,I]=reactExports.useState(!1),{setPopup:z}=reactExports.useContext(PopupContext),[H]=useAtom(pveCampaignAtom),Y=reactExports.useCallback(()=>{T.selectingCap===-1&&!T.battle&&d.onBackPressed()},[d,T.battle,T.selectingCap]);useBackClick(Y);const ee=reactExports.useCallback(async()=>{if(I(!0),A.user?.isDisabledForeignNfts&&!await checkMintersInNftCaps(A.user,Array.from(T.selectedCaps.values()))){I(!1),z({message:v("pve.onlyMinters"),type:"error"});return}const fe=await capsService.newCampaignBattle(_.id,H.id,Array.from(T.selectedCaps.values()),firebaseService.token);await C(),R({...T,battle:fe}),I(!1)},[A.user,_.id,H,T,C,z,v]);if(T.selectingCap>-1)return _.caps.some(ue=>ue.grade||ue.collectionId)?jsxRuntimeExports.jsx(SelectCap,{className:"pve-level__wrapper",onBackPressed:()=>R({...T,selectingCap:-1}),filterBackend:{collectionId:_.caps[0].collectionId,grade:_.caps[0].grade},filterFrontend:ue=>![...T.selectedCaps].find(ge=>ge[1].id===ue.id)&&ue.status=="READY",onSelected:async ue=>{const ge=T.selectedCaps;ge.set(T.selectingCap,ue),R({...T,selectingCap:-1,selectedCaps:ge})}}):jsxRuntimeExports.jsx("div",{className:"game pve-level__select-cap-wrapper",children:jsxRuntimeExports.jsx(BattleGameBid,{mainAction:v("battle.next"),onBackPressed:()=>R({...T,selectingCap:-1}),filter:ue=>![...T.selectedCaps].find(ge=>ge[1].id===ue.id)&&ue.status=="READY",isPve:!0,maxBid:MAX_CAPS,setBidCallback:ue=>{const ge=T.selectedCaps;ue.forEach((ye,be)=>{ge.set((T.selectingCap+be)%MAX_CAPS,ye)}),R({...T,selectingCap:-1,selectedCaps:ge})}})});const ie=isFullCollectionBuff({caps:_.enemies}),oe=isFullCollectionBuff({caps:T.selectedCaps&&Array.from(T.selectedCaps.values())});if(T.battle)return jsxRuntimeExports.jsx(PveCampaignBattle,{battle:T.battle,level:_,onComplete:d.onComplete,onTryAgain:()=>R({...T,battle:void 0}),isBuff:oe,isEnemyBuff:ie,onBack:d.onBackPressed});const se=[...T.selectedCaps.values()].map(fe=>getFactionFromCap(fe,A.pveGd)),re=T.selectedCaps.size!==3;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"pve-level__wrapper ",children:[jsxRuntimeExports.jsx("div",{className:"pve-level__title",children:v("pve.enemyTitle")}),jsxRuntimeExports.jsx(PveLevelCapsList,{squadSize:_.enemies.length,battleCaps:_.enemies,isCollectionBuff:ie}),jsxRuntimeExports.jsx("div",{className:"pve-battle__center"}),jsxRuntimeExports.jsxs("div",{className:"pve-level__bottom",children:[jsxRuntimeExports.jsx("div",{className:"pve-level__battle",children:jsxRuntimeExports.jsx("img",{src:battleImage,alt:"battle"})}),jsxRuntimeExports.jsx("div",{className:"pve-level__bottom-title",children:A.pveGd&&jsxRuntimeExports.jsx(PveFactionsBlock,{factions:se.length>0?se:A.pveGd.factions,isBuff:oe})}),jsxRuntimeExports.jsx(PveLevelCapsList,{squadSize:USER_CAPS_COUNT,battleCaps:_.enemies,selectedCaps:T.selectedCaps,onSelect:fe=>R({...T,selectingCap:fe}),isCollectionBuff:oe}),jsxRuntimeExports.jsx(Button,{isLoading:G,className:"pve-level__button ",onClick:ee,disabled:re,children:v("pve.startBattle")})]})]})})},PveCampaign=()=>{const _=useNavigate(),[d]=useAtom(pveCampaignAtom),[v]=useAtom(pveCampaignLevelsAtom),[A]=useAtom(unfinishedCampaignGameAtom),C=reactExports.useMemo(()=>firebaseService.getPveCampaignBackground(d.id),[d]),[w,T]=reactExports.useState(A?.level??null),[R,G]=reactExports.useState(A?.level?"level":null),I=reactExports.useCallback(()=>{!w&&!R&&_("/home")},[_,w,R]);useBackClick(I);const z=ve=>{T(Me=>Me?.id===ve.id?null:ve)},H=reactExports.useRef(null),Y=reactExports.useRef(!1),ee=reactExports.useRef(0),ie=reactExports.useRef(0),oe=reactExports.useRef(0),se=reactExports.useRef(0),re=reactExports.useCallback(ve=>{H.current&&(Y.current=!0,H.current.classList.add("dragging"),ee.current=ve.pageX-H.current.offsetLeft,ie.current=ve.pageY-H.current.offsetTop,oe.current=H.current.scrollLeft,se.current=H.current.scrollTop)},[]),fe=reactExports.useCallback(ve=>{!H.current||ve.touches.length!==1||(Y.current=!0,H.current.classList.add("dragging"),ee.current=ve.touches[0].pageX-H.current.offsetLeft,ie.current=ve.touches[0].pageY-H.current.offsetTop,oe.current=H.current.scrollLeft,se.current=H.current.scrollTop)},[]),ue=reactExports.useCallback(ve=>{if(!Y.current||!H.current)return;ve.preventDefault();const Me=ve.pageX-H.current.offsetLeft,we=ve.pageY-H.current.offsetTop,Be=Me-ee.current,De=we-ie.current;H.current.scrollLeft=oe.current-Be,H.current.scrollTop=se.current-De},[]),ge=reactExports.useCallback(ve=>{if(!Y.current||!H.current||ve.touches.length!==1)return;ve.preventDefault();const Me=ve.touches[0].pageX-H.current.offsetLeft,we=ve.touches[0].pageY-H.current.offsetTop,Be=Me-ee.current,De=we-ie.current;H.current.scrollLeft=oe.current-Be,H.current.scrollTop=se.current-De},[]),ye=()=>{Y.current=!1,H.current&&H.current.classList.remove("dragging")};reactExports.useEffect(()=>(H.current&&(document.addEventListener("mousemove",ue),document.addEventListener("mouseup",ye),document.addEventListener("touchmove",ge,{passive:!1}),document.addEventListener("touchend",ye)),()=>{document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",ye),document.removeEventListener("touchmove",ge),document.removeEventListener("touchend",ye)}),[]);const be=reactExports.useCallback(()=>{if(H.current&&d){const ve=d.levels[0],Me=H.current,we=Me.querySelector(".pve-campaign__levels");if(we){const Be=ve.position.x*we.offsetWidth,De=ve.position.y*we.offsetHeight,Fe=Be-Me.offsetWidth/2,Oe=De-Me.offsetHeight/2;Me.scrollTo({left:Fe,top:Oe,behavior:"smooth"})}}},[d]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pve-campaign",ref:H,onMouseDown:re,onTouchStart:fe,children:[jsxRuntimeExports.jsx("img",{src:C,alt:"bg",className:"pve-campaign__bg",onLoad:ve=>{const Me=ve.target,we=Me.naturalWidth,Be=Me.naturalHeight,De=H.current?.querySelector(".pve-campaign__levels");De&&(De.style.width=`${we}px`,De.style.height=`${Be}px`),be()}}),jsxRuntimeExports.jsxs("div",{className:"pve-campaign__levels",children:[jsxRuntimeExports.jsx("svg",{className:"pve-campaign__level-paths",children:d?.levels.map(ve=>!ve.next||ve.next.length===0?null:ve.next.map(Me=>{const we=v[Me];if(!we)return null;const Be=ve.position.x*100+"%",De=ve.position.y*100+"%",Fe=we.position.x*100+"%",Oe=we.position.y*100+"%";return jsxRuntimeExports.jsx("line",{x1:Be,y1:De,x2:Fe,y2:Oe,stroke:"#69595b",strokeWidth:"10",strokeLinecap:"round"},`${ve.id}-${Me}`)}))}),Object.values(v).map((ve,Me)=>jsxRuntimeExports.jsx("button",{style:{top:`${ve.position.y*100}%`,left:`${ve.position.x*100}%`},className:`pve-campaign__level-dot ${ve.opened?"pve-campaign__level-dot--opened":""} ${ve.completed?"pve-campaign__level-dot--completed":""} `,onClick:()=>z(ve),disabled:ve.completed,children:Me+1},ve.id)),w&&jsxRuntimeExports.jsx(PveCampaignLevelTooltip,{level:w,onClose:()=>T(null),onStart:()=>{w?.dialog?G("dialog"):G("level")},campaignRef:H})]})]}),w&&R==="dialog"&&jsxRuntimeExports.jsx(PveCampaignDialog,{level:w,onClose:()=>G("level")}),w&&R==="level"&&jsxRuntimeExports.jsx(PveCampaignLevel,{level:w,onBackPressed:()=>{G(null),T(null)},onComplete:()=>{G(null),T(null)}})]})},LeaderboardSquadWrapper=()=>{const{squadId:_}=useParams(),d=useNavigate();return jsxRuntimeExports.jsx(LeaderboardSquad,{squadId:Number(_),onBackClick:()=>d("/home"),onUpdate:async()=>{}})},StakingLeaderboard=()=>{const[_,d]=reactExports.useState({byUsers:{leaderboard:[]}}),{appState:v}=useAppState(),A=useNavigate(),{t:C}=useTranslation(),[w,T]=reactExports.useState("all"),[R,G]=reactExports.useState(!1),[I,z]=reactExports.useState(null),H=reactExports.useCallback(()=>{I?z(null):A("/staking")},[A,I]);useBackClick(H);const Y=reactExports.useMemo(()=>w==="all"||w==="league",[w]),ee=reactExports.useMemo(()=>w==="all"||w==="type",[w]),ie=reactExports.useCallback(async ve=>{ve||T("all"),T("type"),ve?.league&&T("league");const Me=await firebaseService.getUser(firebaseService.user.uid),we=ve?.league??Me.league??_.league,Be=await firebaseService.getUsersLeaderboardBySpeed(we),De=await firebaseService.getUserPositionBySpeedInLeaderboard(Me),Fe=we==Me.league?De:void 0;d({..._,league:we,userProfile:{...De,user:Me,score:Me.stakingSpeed??0},byUsers:{leaderboard:Be.users,lastDocument:Be.lastDocument,position:Fe?{position:Fe.position,score:Me.stakingSpeed??0,user:Me}:void 0,userLeague:Me.league}}),T("loaded")},[_]);reactExports.useEffect(()=>{ie()},[]);const oe=reactExports.useMemo(()=>v.capsGd?.leagues.find(ve=>ve.name===_.byUsers.userLeague),[_,v]),se=reactExports.useMemo(()=>_.league?_.league:_.byUsers.userLeague?_.byUsers.userLeague:"bronze",[_]),re=reactExports.useMemo(()=>v.capsGd?.leagues.find(ve=>ve.name===se),[v.capsGd?.leagues,se]),fe=reactExports.useCallback(()=>{if(w==="loaded"&&v.capsGd){const ve=v.capsGd.leagues.findIndex(we=>we.name==se),Me=v.capsGd.leagues[Math.min(ve+1,v.capsGd.leagues.length-1)];ie({league:Me.name})}},[v.capsGd,w,ie,se]),ue=reactExports.useCallback(()=>{if(w==="loaded"&&v.capsGd){const ve=v.capsGd.leagues.findIndex(we=>we.name==se),Me=v.capsGd.leagues[Math.max(ve-1,0)];ie({league:Me.name})}},[v.capsGd,w,ie,se]),ge=reactExports.useMemo(()=>re?re.userScore.to?`${C("leaderboard.from")} ${formatNumber(re.userScore.from)} ${C("leaderboard.to")} ${formatNumber(re.userScore.to)} ${C("leaderboard.points")}`:`${C("leaderboard.from")} ${formatNumber(re.userScore.from)} ${C("leaderboard.points")}`:"",[re,C]),ye=reactExports.useCallback(async()=>{G(!0);const ve=_.byUsers.lastDocument,Me=await firebaseService.getUsersLeaderboardBySpeed(se,ve);d({..._,byUsers:{..._.byUsers,leaderboard:[..._.byUsers.leaderboard,...Me.users],lastDocument:Me.lastDocument}}),G(!1)},[se,_]),be=reactExports.useMemo(()=>{if(!re||!v.capsGd.status.isFarmingStarted)return"";const ve=v.capsGd.staking?.leagues[re.name];return ve?`+${Math.ceil(ve*100)}% `:""},[re,C]);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-first",children:re&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-selector",children:[_.league!=="bronze"&&jsxRuntimeExports.jsx("button",{className:"leaderboard__league-prev",onClick:()=>ue(),children:jsxRuntimeExports.jsx("img",{src:prevImage,alt:"prev"})}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-image leaderboard__league-image--${re.name}`,children:Y?jsxRuntimeExports.jsx("img",{className:"leaderboard__league-image--loading",src:getGobletImage(re.name),alt:"goblet"}):jsxRuntimeExports.jsx("img",{src:getGobletImage(re.name),alt:"goblet"})}),_.league!=="diamond"&&jsxRuntimeExports.jsx("button",{className:"leaderboard__league-next",onClick:()=>fe(),children:jsxRuntimeExports.jsx("img",{src:nextImage,alt:"next"})})]}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-title ${Y?"leaderboard__league-title--loading":""}`,children:!Y&&`${capitalize$1(re.name)} ${be}`}),jsxRuntimeExports.jsx("div",{className:`leaderboard__league-subtitle ${w!=="loaded"?"leaderboard__league-subtitle--loading":""}`,children:w==="loaded"&&ge})]})}),ee&&jsxRuntimeExports.jsx(LeaderboardProfileSkeleton$1,{}),!ee&&_.userProfile&&oe&&jsxRuntimeExports.jsx(LeaderboardProfile,{profile:_.userProfile,name:getName(_.userProfile.user),league:oe,maxLeagueTo:getLeaderboardTo("user",oe.userScore.to)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__table",children:[w!=="loaded"&&[...Array(8)].map((ve,Me)=>jsxRuntimeExports.jsxs("div",{className:"leaderboard__row",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__league-avatar leaderboard__league-avatar--squad--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username leaderboard__profile-username--loading"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-score leaderboard__league-score--loading"})]},"leaderboard"+Me)),re&&_.byUsers.leaderboard.map((ve,Me)=>jsxRuntimeExports.jsxs("button",{className:"leaderboard__row",onClick:()=>z(ve),children:[jsxRuntimeExports.jsx(LeaderboardAvatar,{className:"leaderboard__league-avatar"}),jsxRuntimeExports.jsx("div",{className:"leaderboard__league-username",children:getName(ve)}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__league-score",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",alt:"goblet",src:StakedCoin}),"+",(ve.stakingSpeed??0).toFixed(2)]}),jsxRuntimeExports.jsxs("div",{className:`leaderboard__league-place ${ve.id===_.userProfile?.user?.id?"leaderboard__league-place--me":""}`,children:["#",Me+1]})]},ve.id))]}),_.byUsers.lastDocument!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button battle-game-bid__button",color:"transparent",size:"small",onClick:()=>ye(),isLoading:R,children:C("battle.loadMore")})]}),I&&re&&jsxRuntimeExports.jsx(LeaderboardUser,{user:I,league:re})]})};function LeaderboardProfile({profile:_,league:d,name:v,maxLeagueTo:A,avatar:C,onClick:w}){const{t:T}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile",onClick:w,children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-avatar",children:C?jsxRuntimeExports.jsx("img",{className:"leaderboard__league-avatar--squad",src:C,alt:"avatar"}):jsxRuntimeExports.jsx(LeaderboardAvatar,{})}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-first",children:[jsxRuntimeExports.jsx("div",{className:"leaderboard__profile-username",children:v}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-place",children:["#",_.position]})]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-second",children:[jsxRuntimeExports.jsx("img",{className:"leaderboard__profile-goblet",src:StakedCoin,alt:"goblet"}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-stats-first",children:[jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-score",children:["+",_.score.toFixed(2)]}),jsxRuntimeExports.jsxs("div",{className:"leaderboard__profile-league",children:[capitalize$1(d.name)," ",T("leaderboard.league")]})]}),A&&jsxRuntimeExports.jsx(LeaderboardProgressBar,{value:_.score,max:A})]})]})]})}const FarmSpeed=()=>{const{t:_}=useTranslation(),d=useNavigate(),{appState:v}=useAppState(),A=reactExports.useCallback(()=>{d("/staking")},[d]);useBackClick(A);const C=v.capsCollections||[],w=reactExports.useMemo(()=>getStakingConfig(Timestamp.now(),v.capsGd),[]),T=v.capsGd.staking?.speeds;if(!w||!T)return null;const R=C.filter(H=>H.status!="not-available").sort((H,Y)=>(T[w.speed][Y.id]?.diamond||0)-(T[w.speed][H.id]?.diamond||0)),G=H=>({id:`${H.id}/1`,createdAt:Timestamp.now(),url:getCapUrl("COMMON",H,1),number:-1,collection:H.title,collectionId:H.id,collectionNumber:1,grade:"COMMON",gradeNumber:-1,owner:"",status:"READY",packId:"",isNft:!1}),I=T[w.speed],z=H=>I[H]?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"diamond",children:I[H].diamond?.toFixed(3)}),"/",jsxRuntimeExports.jsx("span",{className:"legend",children:I[H].legend?.toFixed(3)}),"/",jsxRuntimeExports.jsx("span",{className:"epic",children:I[H].epic?.toFixed(3)}),"/",jsxRuntimeExports.jsx("span",{className:"rare",children:I[H].rare?.toFixed(3)}),"/",jsxRuntimeExports.jsx("span",{className:"common",children:I[H].common?.toFixed(3)})]}):jsxRuntimeExports.jsx("div",{children:_("staking.noFarmSpeed")});return jsxRuntimeExports.jsxs("div",{className:"farm-speed",children:[jsxRuntimeExports.jsx("div",{className:"staking__first",children:jsxRuntimeExports.jsx("div",{className:"staking__title",children:_("staking.farmSpeed")})}),jsxRuntimeExports.jsx("div",{className:"farm-speed__collections",children:R.map(H=>{const Y=G(H),ee=I[H.id]?.diff===0||I[H.id]?.diff==null?"":I[H.id]?.diff>0?"farm-speed__collection-diff--positive":"farm-speed__collection-diff--negative";return jsxRuntimeExports.jsxs("div",{className:"farm-speed__collection-item",children:[jsxRuntimeExports.jsx("div",{className:"farm-speed__collection-image",children:jsxRuntimeExports.jsx("img",{src:firebaseService.getCollectionCapUrl(Y.url),alt:H.title,className:"farm-speed__cap-image"})}),jsxRuntimeExports.jsxs("div",{className:`farm-speed__collection-diff ${ee}`,children:[I[H.id]?.diff?(I[H.id].diff*100).toFixed(1):0,"%"]}),jsxRuntimeExports.jsxs("div",{className:"farm-speed__collection-info",children:[jsxRuntimeExports.jsx("div",{className:"farm-speed__collection-name",children:H.title}),jsxRuntimeExports.jsx("div",{className:"farm-speed__collection-description",children:jsxRuntimeExports.jsx("div",{className:"farm-speed__speed-info",children:z(H.id)})})]})]},H.id)})})]})},russianImage="/icons/ru.png",englishImage="/icons/en.png",soundOnImage="/icons/sound-on.png",soundOffImage="/icons/sound-off.png",SettingWalletInfo=({type:_,onClose:d})=>{const{t:v}=useTranslation(),[A,C]=reactExports.useState(!1),{setPopup:w}=reactExports.useContext(PopupContext),[T,R]=reactExports.useState(0),{appState:G,onUserUpdate:I}=useAppState(),z=(G.capsGd?.fees.withdrawTon??1)/1e9,H=reactExports.useMemo(()=>{const ue=T-z;return ue<0?0:ue},[T,z]),[Y]=useTonConnectUI(),[ee]=useAtom(userAtom),ie=reactExports.useMemo(()=>ee.tonBalance/1e9>=T&&T>z,[ee.tonBalance,T,z]),oe=()=>{A||(R(0),d())},se=async()=>{if(!Y.account){await Y.openModal();return}const ue={validUntil:Math.floor(Date.now()/1e3)+600,messages:[{address:"EQAaQqgAg72NwiPQ1mITLrg91lYOJ7PGbJzPwLECO_IECULy",amount:(T*1e9).toString(),payload:G.topupPayload}]};try{await Y.sendTransaction(ue),CapsWebApp.showPopup({message:v("settings.topupFinished"),buttons:[{id:"ok",type:"ok"}]})}catch{w({message:v("settings.topupFailed"),type:"error"})}},re=async()=>{try{await capsService.withdrawTon(T*1e9,firebaseService.token),CapsWebApp.showPopup({message:v("settings.withdrawFinished"),buttons:[{id:"ok",type:"ok"}]})}catch{w({message:v("settings.withdrawTonFailed"),type:"error"})}},fe=async()=>{C(!0);try{_==="topup"?await se():_==="withdraw"&&await re(),await I(),d(),C(!1)}catch{C(!1),w({message:v("shop.problemsSell"),type:"error"})}};return jsxRuntimeExports.jsxs(Info,{isShow:!!_,onClose:oe,className:"settings-info__settings-wallet-info",buttons:jsxRuntimeExports.jsx(Button,{onClick:fe,fullWidth:!0,disabled:_=="withdraw"&&!ie||T<=0,isLoading:A,children:v(`settings.${_}`)}),children:[jsxRuntimeExports.jsx("div",{className:"sell-info__title",children:v(_==="topup"?"settings.topupAmountPrompt":"settings.withdrawAmountPrompt")}),jsxRuntimeExports.jsx("div",{className:"staking-confirm__description",children:v(_==="topup"?"settings.topupDescription":"settings.withdrawDescription")}),jsxRuntimeExports.jsx(PriceInput,{description:_==="withdraw"?v("settings.withdrawFee",{fee:z}):void 0,price:T,onChange:R,maxBalance:_==="withdraw"?ee.tonBalance/1e9:void 0}),_==="withdraw"&&jsxRuntimeExports.jsx("div",{className:"sell-info__bottom",children:ee.tonBalance<T?jsxRuntimeExports.jsx("div",{className:"sell-info__ton",children:v("settings.invalidAmount")}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"sell-info__receive",children:v("info.sellReceive")}),jsxRuntimeExports.jsx("div",{className:"sell-info__ton",children:`${roundNumber(H)} TON`})]})})]})},SettingsItems=()=>{const{t:_,i18n:d}=useTranslation(),v=useNavigate(),[A]=useTonConnectUI(),[C,w]=reactExports.useState(CapsWebApp.isSoundEnabled),[T,R]=reactExports.useState({}),G=useTonAddress(),[I,z]=reactExports.useState(null),[H]=useAtom(userAtom),Y=()=>{w(!C),CapsWebApp.updateSoundEnabled(!C)},ee=()=>{A.disconnect(),v("/home")},ie=async()=>{R({...T,language:!0});try{const oe=d.language==="en"?"ru":"en";await capsService.changeLanguage(oe,firebaseService.token),await d.changeLanguage(oe)}finally{R({...T,language:!1})}};return jsxRuntimeExports.jsxs("div",{className:"settings-items",children:[jsxRuntimeExports.jsxs("div",{className:"settings-items__item",children:[jsxRuntimeExports.jsx("img",{className:"settings-items__item-img",src:walletImage,alt:""}),jsxRuntimeExports.jsx("div",{className:"settings-items__item-name",children:G&&getShortAddress(G)}),jsxRuntimeExports.jsx(Button,{variant:"secondary",color:"red",onClick:ee,className:"settings-items__item-button",children:_("settings.disconnect")})]}),jsxRuntimeExports.jsxs("div",{className:"settings-items__item settings-items__item-img-ton",children:[jsxRuntimeExports.jsx("img",{className:"settings-items__item-img",src:tonImage,alt:"ton"}),jsxRuntimeExports.jsx("div",{className:"settings-items__item-name",children:roundNumber(H.tonBalance/1e9)}),jsxRuntimeExports.jsx("button",{onClick:()=>z("withdraw"),className:"settings-items__ton-button-withdraw",children:jsxRuntimeExports.jsx("img",{src:withdrawImage$1,alt:"withdraw"})}),jsxRuntimeExports.jsx(Button,{variant:"secondary",color:"green",onClick:()=>z("topup"),className:"settings-items__item-button",children:_("settings.topup")})]}),jsxRuntimeExports.jsxs("div",{className:"settings-items__item",children:[jsxRuntimeExports.jsx("img",{className:"settings-items__item-img",src:C?soundOnImage:soundOffImage,alt:""}),jsxRuntimeExports.jsx("div",{className:"settings-items__item-name",children:_("settings.sound")}),jsxRuntimeExports.jsx(Button,{variant:"secondary",color:"gray",onClick:Y,className:"settings-items__item-button",children:_(C?"settings.off":"settings.on")})]}),jsxRuntimeExports.jsxs("div",{className:"settings-items__item",children:[jsxRuntimeExports.jsx("img",{className:"settings-items__item-img",src:d.language==="en"?englishImage:russianImage,alt:""}),jsxRuntimeExports.jsx("div",{className:"settings-items__item-name",children:d.language==="en"?"English":""}),jsxRuntimeExports.jsx(Button,{variant:"secondary",color:"gray",onClick:ie,isLoading:T.language,className:"settings-items__item-button",children:_("settings.change")})]}),reactDomExports.createPortal(jsxRuntimeExports.jsx(SettingWalletInfo,{type:I,onClose:()=>z(null)}),document.getElementById("root"))]})},withdrawImage="/icons/withdraw-transaction.svg",topupImage="/icons/topup.svg",TransactionInfoSkeleton=()=>jsxRuntimeExports.jsxs("div",{className:"transaction-info transaction-info--skeleton",children:[jsxRuntimeExports.jsx("div",{className:"transaction-info__avatar"}),jsxRuntimeExports.jsx("div",{className:"transaction-info__description"}),jsxRuntimeExports.jsx("div",{className:"transaction-info__last"})]}),SettingsTransactionInfo=({transaction:_,onButtonClick:d})=>{const{t:v}=useTranslation(),[A]=useAtom(userAtom),C=reactExports.useMemo(()=>{switch(_.source){case"cap-sale":return _.sale&&(_.sale?.from===A.id||_.sale?.from?.id===A.id)?v("settings.transaction.sale"):v("settings.transaction.buy");case"topup":return v("settings.transaction.topup");case"withdraw":return v("settings.transaction.withdraw");default:return"Error"}},[_,A.id,v]);return jsxRuntimeExports.jsxs("div",{className:"transaction-info",children:[jsxRuntimeExports.jsxs("div",{className:"transaction-info__avatar",children:[_.source=="cap-sale"&&_.sale&&jsxRuntimeExports.jsx(CapElement,{variant:"small",cap:_.sale.cap,onClickCallback:d,isGradeHide:!0},_.sale.cap.id),_.source=="topup"&&jsxRuntimeExports.jsx("div",{className:"transaction-info__avatar-wrapper",children:jsxRuntimeExports.jsx("img",{src:topupImage,alt:"Top Up"})}),_.source=="withdraw"&&jsxRuntimeExports.jsx("div",{className:"transaction-info__avatar-wrapper",children:jsxRuntimeExports.jsx("img",{src:withdrawImage,alt:"Top Up"})})]}),jsxRuntimeExports.jsxs("div",{className:"transaction-info__description",children:[C,_.source=="topup"&&_.transaction&&jsxRuntimeExports.jsx("div",{className:"transaction-info__description--link",onClick:()=>{CapsWebApp.openLink(_.transaction.link)},children:getShortAddress(_.transaction.hash)}),_.source=="withdraw"&&_.wallet&&jsxRuntimeExports.jsx("div",{className:"transaction-info__description--link",onClick:()=>_.wallet&&CapsWebApp.openLink("https://tonscan.org/address/"+toUserFriendlyAddress(_.wallet)),children:getShortAddress(toUserFriendlyAddress(_.wallet))})]}),jsxRuntimeExports.jsxs("div",{className:"transaction-info__last",children:[jsxRuntimeExports.jsxs("div",{className:`transaction-info__amount ${_.amount>0?"transaction-info__amount--positive":""}`,children:[_.amount<0?"-":"+",Math.abs(_.amount/1e9)," TON"]}),jsxRuntimeExports.jsx("div",{className:"transaction-info__date",children:getDateString(_.createdAt)})]})]})},SettingsTransactions=()=>{const _=useNavigate(),[d]=useAtom(userAtom),{t:v}=useTranslation(),{onUserUpdate:A}=useAppState(),[C,w]=reactExports.useState({myTransactions:{transactions:[],lastDocument:void 0}}),T=reactExports.useCallback(()=>{C.selectedCap||_("/home")},[C,_]);useBackClick(T);const{loadingState:R,setLoadingState:G,isSkeletonShow:I,isDataShow:z}=useSkeletonLoading(),[H,Y]=reactExports.useState(!1),ee=reactExports.useCallback(async()=>{Y(!0);const re=await firebaseService.getUserTransactions(d.id.toString(),["cap-sale","topup","withdraw"],C.myTransactions.lastDocument);w({...C,myTransactions:{transactions:[...C.myTransactions.transactions,...re.transactions],lastDocument:re.lastDocument}}),Y(!1)},[C,d.id]),ie=reactExports.useCallback(async()=>{G("loading");const re=await firebaseService.getUserTransactions(d.id.toString(),["cap-sale","topup","withdraw"]);w({...C,myTransactions:re}),G("skeleton-to-data")},[]);reactExports.useEffect(()=>{ie()},[]);const oe=reactExports.useCallback(re=>{w({...C,selectedCap:re})},[C]),se=reactExports.useCallback(async re=>{const fe=await firebaseService.getCap(re);return await A(),w({...C,selectedCap:fe}),fe},[C,A]);return!I&&C.myTransactions.transactions.length===0?jsxRuntimeExports.jsx("div",{className:"battle-empty",children:jsxRuntimeExports.jsx("div",{className:"battle-empty__description",children:v("settings.noTransactions")})}):jsxRuntimeExports.jsxs("div",{className:"battle__game-caps",children:[I&&jsxRuntimeExports.jsx("div",{className:`skeleton battle__game-block fade-out ${R==="skeleton-to-data"?"visible":""} `,children:[...Array(6)].map((re,fe)=>jsxRuntimeExports.jsx(TransactionInfoSkeleton,{},fe))}),jsxRuntimeExports.jsx("div",{className:`battle__game-block fade-in ${z?"visible":""}`,children:C.myTransactions.transactions.map(re=>jsxRuntimeExports.jsx(SettingsTransactionInfo,{transaction:re,showPreferences:!0,onButtonClick:oe},re.id))}),C.myTransactions.lastDocument!==void 0&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button",color:"transparent",size:"small",onClick:ee,isLoading:H,children:v("battle.loadMore")}),C.selectedCap&&reactDomExports.createPortal(jsxRuntimeExports.jsx(CapInfo,{cap:C.selectedCap,onCapUpgrade:se,onBackPressed:()=>{w({...C,selectedCap:void 0})}}),document.getElementById("root"))]})},Settings=()=>{const _=useNavigate(),[d,v]=reactExports.useState({mode:"wallet"}),A=reactExports.useCallback(()=>{d.mode==="wallet"&&_("/home")},[d,_]);useBackClick(A);const{t:C}=useTranslation();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"battle-bg",children:[jsxRuntimeExports.jsxs("div",{className:"battle",children:[jsxRuntimeExports.jsx("div",{className:"profile__caps",children:jsxRuntimeExports.jsxs("div",{className:"profile__caps-filter",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{v({...d,mode:"wallet"})},className:`profile__caps-filters-item ${d.mode=="wallet"?"profile__caps-filters-item--active":""}`,children:C("settings.wallet")}),jsxRuntimeExports.jsx("button",{onClick:()=>{v({...d,mode:"transactions"})},className:`profile__caps-filters-item ${d.mode=="transactions"?"profile__caps-filters-item--active":""}`,children:C("settings.transactions")})]})}),d.mode==="wallet"&&jsxRuntimeExports.jsx(SettingsItems,{}),d.mode==="transactions"&&jsxRuntimeExports.jsx(SettingsTransactions,{})]}),jsxRuntimeExports.jsx(NavBar,{})]})})},Settings$1=reactExports.memo(Settings),PveNewExitDialog=({onYes:_,onNo:d,isShow:v,battleId:A})=>{const{t:C}=useTranslation(),[w,T]=reactExports.useState(!1),{setPopup:R}=reactExports.useContext(PopupContext),G=async()=>{T(!0);try{const I=await capsService.endBattle(A,firebaseService.token);_(I)}catch(I){R({message:I?.message??I??"Error",type:"error"}),T(!1)}};return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${v?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${v?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:C("madness.leaveQuestion")}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-buttons",children:[jsxRuntimeExports.jsx(Button,{onClick:G,variant:"secondary",fullWidth:!0,isLoading:w,className:"madness-exit-dialog__button",children:C("madness.yes")}),jsxRuntimeExports.jsx(Button,{onClick:d,fullWidth:!0,children:C("madness.no")})]})]})})},PveNewAbilitiesCapsList=({abilities:_,selectedCaps:d,onSelect:v})=>{const{appState:A}=useAppState(),{t:C}=useTranslation();return jsxRuntimeExports.jsx("div",{className:"pvenew-abilities-level-caps-list",children:_.map((w,T)=>{const R=d?.find(G=>G.ability==w.id);return jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[!R&&jsxRuntimeExports.jsx("img",{src:plusImage$2,className:"upgrade__resources-cap__plus",alt:"plus"}),R?jsxRuntimeExports.jsx(CapElement,{variant:"pvenew-small",className:R?"":"upgrade__empty-slot",cap:R.cap,onClickCallback:()=>v?.(T)}):jsxRuntimeExports.jsx("div",{className:"cap__element--small pve-level-caps-list__cap",onClick:()=>v?.(T),children:jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"cap__img"})}),jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__description",children:[" ",jsxRuntimeExports.jsxs("div",{className:"pve-level-caps-list__item",children:[getAbilityIcon(w.id)," ",w.id]}),jsxRuntimeExports.jsx("div",{className:"pve-level-caps-list__item",children:C(w.description[A.user?.caps_language??"en"],{value:w.value})})]})]},T)})})};function getAbilityIcon(_){switch(_){case"attack-all":return"";case"attack-random":return"";case"heal-all":return"";case"heal-random":return"";case"freeze":return"";case"shield":return"";default:return""}}const CapItem=({cap:_,isSelected:d,onClick:v,className:A})=>{const{appState:C}=useAppState();return jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${A??""}`,onClick:v,children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:_.health<=0,variant:"pvenew-small",cap:_,className:`pve-level-caps-list__item ${d?"pve-level-caps-list__item--selected":""}`,selectedNumber:d?1:void 0,onClickCallback:v}),_.ability&&getAbilityIcon(_.ability)]})},ALL=10,PveNewDeckCapSelect=({isShow:_,bonuses:d,onSelected:v,battleId:A})=>{const{t:C}=useTranslation(),{setPopup:w}=reactExports.useContext(PopupContext),[T,R]=reactExports.useState(-1),[G,I]=reactExports.useState(void 0),[z,H]=reactExports.useState(!1),[Y,ee]=reactExports.useState(!1),ie=se=>{se.id==="heal"?R(ALL):T===ALL&&R(-1),I(se)},oe=async()=>{if(G){ee(!0);const se=d.indexOf(G);try{const re=await capsService.addCapToBattle(A,se,firebaseService.token,T===ALL?void 0:T);H(!0),ee(!1),R(-1),I(void 0),v(re)}catch(re){w({message:re?.message??re??"Error",type:"error"}),ee(!1)}}};return jsxRuntimeExports.jsx(BottomSheet,{isClosing:z,isShow:_,children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__bonus-list",children:d.map((se,re)=>se.cap?jsxRuntimeExports.jsx(CapItem,{cap:se.cap,isSelected:G===se,onClick:()=>ie(se),isBuff:!1,className:`madness-bonus-select__cap-wrapper ${G===se?"madness-bonus-select__cap-wrapper--select":""}`},"bonus"+se.id+re):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}))}),jsxRuntimeExports.jsx("div",{className:"pve-battle__caps-list"}),jsxRuntimeExports.jsx("div",{className:"pve-battle__button",children:jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:oe,isLoading:Y,disabled:!G,children:C("madness.choose")})})]})})},madnessBattleReducer=(_,d)=>{switch(console.log("action="+d.type),d.type){case"attack-started":return{..._,phase:"attack-started"};case"attack-reset":return{..._,phase:"attack"};case"counter-attack-reset":return{..._,phase:"attack-finished"};case"attack":{const v=_.battle;v.state=d.payload.pendingAttack.newBattleState,v.status=d.payload.status,d.payload.round&&(v.round=d.payload.round);const A=v.state.caps.filter(C=>C.health>0).length<=v.state.attacked.length;return _.attackFrom=getNextFromCap(_),_.attackTo=getNextToCap(_),A&&(_.attackCapsSelected=[_.attackFrom,_.attackTo]),v.status==="next-round"&&(_.attackTo=-1,_.attackFrom=-1),{..._,battleResult:d.payload.battleResult,battle:v,phase:A?"attack-finished":"attack",bonuses:d.payload.bonuses}}case"before-counter-attack-started":{const v=_.battle;return v.state.attacked=[],{..._,battle:v,phase:"counter-attack-started"}}case"counter-attack-started":{const v=_.battle;return v.state=d.payload.newBattleState,{..._,battleResult:d.payload.battleResult,battle:v,phase:d.payload.battleResult?"finished":"counter-attack-started"}}case"counter-attack-finished":{_.attackFrom=_.attackCapsSelected[0],_.attackTo=_.attackCapsSelected[1],_.attackFrom=getNextFromCap(_),_.attackTo=getNextToCap(_),(_.attackFrom==-1||_.attackTo==-1)&&(_.attackFrom=-1,_.attackTo=-1);const v=_.battle;return v.status=d.payload.status,v.state=d.payload.newState,{..._,battle:v,battleResult:d.payload.battleResult,phase:_.battleResult?"finished":"counter-attack-finished"}}case"finish":{const v=_.battle;return v.status="finished",{..._,battle:v,battleResult:d.payload.battleResult,phase:"finished"}}case"deselect-caps":return{..._,attackFrom:-1,attackTo:-1};case"attack-from":return{..._,attackFrom:d.cap};case"attack-to":return{..._,attackTo:d.cap};case"bonus-selected":{const v=_.battle;v.state=d.payload.afterBonus,v.status="attack";const A=v.state.caps.filter(C=>C.health>0).length<=v.state.attacked.length;return{..._,battle:v,bonuses:[],phase:A?"attack-finished":"attack"}}case"booster-selected":{const v=_.battle;return v.state=d.payload.afterBooster,v.status="attack",{..._,battle:v,bonuses:[],attackTo:-1,attackFrom:-1,phase:"attack"}}default:return _}},getPhaseFromBattleStatus=_=>{switch(_){case"attack":return"attack";case"counter-attack":return"attack-finished";case"next-round":return"attack";case"finished":return"finished";default:return"initial"}},PveNewBattle=_=>{const{t:d}=useTranslation(),{setPopup:v}=reactExports.useContext(PopupContext),[A,C]=reactExports.useState(!1),w=reactExports.useCallback(()=>{C(!0)},[]);useBackClick(w),useAction(fetchUnfinishedGamesAction);const{appState:T,onUserUpdate:R}=useAppState();reactExports.useEffect(()=>{R()},[]),useNavigate();const G=reactExports.useRef([]),I=reactExports.useRef([]),[z,H]=reactExports.useReducer(madnessBattleReducer,{attackFrom:-1,attackTo:-1,battle:_.battle,phase:getPhaseFromBattleStatus(_.battle.status),attackCapsSelected:[-1,-1],bonuses:[]}),[Y,ee]=reactExports.useState(1),{enemiesSprings:ie,enemiesApi:oe,mySprings:se,myApi:re,explosionSpring:fe,explosionApi:ue,healthDiff:ge,setHealthDiff:ye,healthDiffSpring:be,healthDiffApi:ve}=useBattle({battleState:z}),Me=(je,He)=>{switch(je){case"enemy":{const Xe=z.attackTo==He?-1:He;H({type:"attack-to",cap:Xe});break}case"my":{const Xe=z.attackFrom==He?-1:He;H({type:"attack-from",cap:Xe});break}}},we=async()=>{H({type:"attack-started"});const je=capsService.attack(_.battle.id,z.attackFrom,z.attackTo,firebaseService.token),He=getDominationClass(z.battle.state.caps[z.attackFrom],z.battle.state.enemies[z.attackTo],T.pveGd),Xe=I.current[z.attackFrom].getBoundingClientRect(),$e=G.current[z.attackTo].getBoundingClientRect(),We=document.querySelectorAll(".pve-battle__cap-wrapper")[z.attackTo].getBoundingClientRect(),nt=$e.left-Xe.left,Qt=$e.bottom-Xe.top,{x:Wt,left:Bn,rotate:Lt}=getOffsetUp(z.attackFrom,z.attackTo,$e);re.start(Mn=>{if(Mn===z.attackFrom)return{to:async cr=>{ue.start(In=>{if(In!==1)return{from:{left:Bn,top:$e.height-$e.width/4,scale:0,rotate:Lt},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await cr({x:Wt+nt,y:Qt-$e.height/3,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-my-to-enemy.mp3"),await cr({x:0,y:0,scale:1,filter:"grayscale(100%)",boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),ue.start(In=>{if(In!==1)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),await je.then(In=>{ye({value:In.attack.newHealth-z.battle.state.enemies[z.attackTo].health,dominationFaction:He}),console.log("animation attack: "+In.attack.from+">>>"+In.attack.to,In.afterAttack.caps),In.attack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),In.battleResult&&(_.onSetBattleResult(In.battleResult),CapsWebApp.playSound("pve/win.mp3")),H({type:"attack",payload:{pendingAttack:{attack:In.attack,newBattleState:In.afterAttack},status:In.status,battleResult:In.battleResult,bonuses:In.bonuses?In.bonuses:[],round:In.round}}),We&&showHeartDiff(We,ve),setTimeout(()=>{oe.start(Zn=>{if(Zn===z.attackTo)return{to:{zIndex:0}}})},1e3)}).catch(In=>{console.error("attack error",In),v({message:In?.message??In??"Error",type:"error"}),H({type:"attack-reset"}),cr({zIndex:0,filter:"grayscale(0%)"}).catch(Zn=>{console.error("attack error next",Zn)})})}}})};reactExports.useEffect(()=>{console.log("phase="+z.phase),z.phase==="attack-finished"&&!z.battleResult&&Be()},[z.phase]);const Be=async()=>{H({type:"before-counter-attack-started"}),re.start({to:{filter:"grayscale(0%)"}});try{const je=await capsService.counterAttack(_.battle.id,firebaseService.token);if(je.attacks.filter(Xe=>Xe.counterAttack.to>=0).length==0){for(const Xe of je.attacks)for(const $e of Xe.effects??[])if($e.ability=="unfreeze"&&$e.source=="enemies"){const We=z.battle.state.enemies[Xe.counterAttack.from];v({message:`Enemy ${We.collectionId} #${We.collectionNumber} is unfreezed`,type:"confirm"})}else if($e.ability=="unshield"&&$e.source=="caps"){const We=z.battle.state.caps[Xe.counterAttack.from];v({message:`Cap ${We.collectionId} #${We.collectionNumber} is unshield now`,type:"confirm"})}H({type:"counter-attack-finished",payload:{status:je.status,battleResult:je.battleResult,newState:je.newState}});return}for(const[Xe,$e]of je.attacks.entries()){if($e.counterAttack.to<0)continue;const We=getDominationClass(z.battle.state.enemies[$e.counterAttack.from],z.battle.state.caps[$e.counterAttack.to],T.pveGd);console.log("animation counter attack: "+$e.counterAttack.from+">>>"+$e.counterAttack.to,$e.afterCounterAttack.caps);const nt=$e.counterAttack.from,Qt=$e.counterAttack.to;Me("enemy",nt),Me("my",Qt);const Wt=G.current[nt].getBoundingClientRect(),Bn=I.current[Qt].getBoundingClientRect(),Lt=document.querySelectorAll(".pve-battle__cap-wrapper")[z.battle.state.enemies.length+Qt].getBoundingClientRect(),Mn=Bn.left-Wt.left,cr=Bn.top-Wt.top,{x:In,left:Zn,rotate:$n}=getOffsetDown(nt,Qt,Bn);ee(2),oe.start(Rn=>{if(Rn===nt)return{to:async Dn=>{ue.start(Gt=>{if(Gt!==0)return{from:{left:Zn,top:Bn.top,scale:0,rotate:$n},to:{scale:1},config:{tension:20,friction:1,precision:.2}}}),await Dn({x:In+Mn,y:cr-Bn.height/2,immediate:!0}),CapsWebApp.handleVibration("rigid"),CapsWebApp.playSound("pve/beat-enemy-to-my.mp3"),await Dn({x:0,y:0,scale:1,boxShadow:"0 0 0px 0 #fff",delay:500,zIndex:0,immediate:!0}),ue.start(Gt=>{if(Gt!==0)return{to:{scale:0},config:{tension:15,friction:3,precision:.5,easing:easings.easeOutCubic}}}),H({type:"deselect-caps"}),ye({value:$e.counterAttack.newHealth-z.battle.state.caps[Qt].health,dominationFaction:We}),$e.counterAttack.newHealth<=0&&CapsWebApp.playSound("pve/cap-dead.mp3"),H({type:"counter-attack-started",payload:{newBattleState:$e.afterCounterAttack}}),Lt&&showHeartDiff(Lt,ve),re.start({to:{zIndex:0}}),oe.start({to:{zIndex:0}}),Xe===je.attacks.length-1&&(je.battleResult&&_.onSetBattleResult(je.battleResult),H({type:"counter-attack-finished",payload:{status:je.status,battleResult:je.battleResult,newState:je.newState}}),ee(1))}}}),await wait(1e3)}}catch(je){v({message:je?.message??je??"Error",type:"error"}),H({type:"counter-attack-reset"}),re.start({to:{zIndex:0,filter:"grayscale(100%)"}}),console.error("counter-attack",je)}},De=je=>{["initial","attack","counter-attack-finished"].includes(z.phase)&&(Me("enemy",je),CapsWebApp.playSound("pve/select-enemy-cap.mp3"))},Fe=je=>{["initial","attack","counter-attack-finished"].includes(z.phase)&&z.battle.state.attacked.indexOf(je)===-1&&(Me("my",je),CapsWebApp.playSound("pve/select-my-cap.mp3"))},Oe=je=>{H({type:"bonus-selected",payload:je}),re.start({to:{zIndex:0,filter:"grayscale(0%)"}})},Ge=z.battle.status==="next-round"&&["attack-finished","attack","counter-attack-finished"].includes(z.phase),ze=isFullCollectionBuff({caps:z.battle.state.caps});return isFullCollectionBuff({caps:z.battle.state.enemies}),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"pve-level__select-cap-wrapper",children:jsxRuntimeExports.jsxs("div",{className:"pve-battle",children:[jsxRuntimeExports.jsxs("div",{className:"madness-battle__title",children:[jsxRuntimeExports.jsx("span",{className:"madness-battle__title--round",children:d("pvenew.enemyTitle",{health:z.battle.state.enemyHealth})}),"+100",jsxRuntimeExports.jsx("img",{className:"madness-battle__title--gum",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",style:{zIndex:Y},children:[z.battle.state.enemies.map((je,He)=>jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:je.health<=0,variant:"pvenew-small",cap:je,selectedNumber:z.phase!=="attack-finished"&&z.attackTo==He?1:void 0,ref:Xe=>{G.current[He]=Xe},style:ie[He],onClickCallback:()=>De(He)}),je.isFreezed&&"",je.hasShield&&""]},"enemy"+je.url+He)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:fe[0],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsx("div",{className:"pve-battle__center",children:jsxRuntimeExports.jsx("span",{className:"madness-battle__title--round",children:d("pvenew.health",{health:z.battle.state.health})})}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__caps-list",children:[z.battle.state.caps.map((je,He)=>jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[jsxRuntimeExports.jsx(CapElement,{isRemoved:je.health<=0,variant:"pvenew-small",cap:je,style:se[He],ref:Xe=>{I.current[He]=Xe},className:`${z.battle.state.attacked.indexOf(He)!==-1?"cap__element--removed":""}`,selectedNumber:z.attackFrom==He?1:void 0,onClickCallback:()=>Fe(He)}),je.isFreezed&&"",je.hasShield&&""]},"cap"+je.url+He)),jsxRuntimeExports.jsx(animated.img,{src:explosionImage,style:fe[1],alt:"explosion",className:"pve-battle__explosion"})]}),jsxRuntimeExports.jsx(animated.div,{style:be,className:`pve-battle__health-tooltip ${ge.dominationFaction?`pve-battle__health-tooltip--${ge.dominationFaction}`:""}`,children:ge.value}),jsxRuntimeExports.jsx("div",{className:"pve-battle__button",children:(z.phase=="initial"||z.phase=="attack-started"||z.phase=="counter-attack-finished"||z.phase=="attack")&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:we,disabled:z.phase=="attack-started"||z.attackFrom<0||z.attackTo<0,children:d("pve.battle")})}),jsxRuntimeExports.jsx(PveNewExitDialog,{onYes:je=>{C(!1),je.battleResult&&_.onSetBattleResult(je.battleResult)},onNo:()=>C(!1),isShow:A,battleId:_.battle.id}),jsxRuntimeExports.jsx(PveNewDeckCapSelect,{isShow:Ge,bonuses:_.battle.state.deck?.map(je=>({id:"new-cap",cap:je}))??[],caps:z.battle.state.caps,battleId:_.battle.id,onSelected:Oe,isBuff:ze})]})})})},PveNewLevelCapsList=({squadSize:_,battleCaps:d,selectedCaps:v,onSelect:A})=>{const{appState:C}=useAppState(),[w]=useAtom(tutorialAtom),T=!v,R=Array(_).fill(0);return jsxRuntimeExports.jsx("div",{className:"pve-level-caps-list",children:R.map((G,I)=>{const z=I<d.length?d[I]:d[0],H=!T&&v.get(I),Y=!T&&H?H:z;return Y&&(Y.health??getCapPveHp(Y,C.pveGd)),jsxRuntimeExports.jsxs("div",{className:`pve-battle__cap-wrapper ${w==="pve"&&!H&&!T&&I===0?"upgrade__resources-cap--my-first":""}`,children:[!T&&!H&&jsxRuntimeExports.jsx("img",{src:plusImage$2,className:"upgrade__resources-cap__plus",alt:"plus"}),!T&&!H?jsxRuntimeExports.jsx("div",{className:"cap__element--small pve-level-caps-list__cap",onClick:()=>A?.(I),children:jsxRuntimeExports.jsx("img",{src:capImage$1,alt:"cap",className:"cap__img"})}):jsxRuntimeExports.jsx(CapElement,{variant:"pvenew-small",className:!H&&!T?"upgrade__empty-slot":"",cap:Y,onClickCallback:()=>A?.(I)}),z.ability&&getAbilityIcon(z.ability)]},I)})})},PveNewResult=({result:_={isWin:!0,reward:{type:"coins",coins:200},newBalance:2e3},isShow:d})=>{const{t:v}=useTranslation(),[A,C]=reactExports.useState(!1),{onUserUpdate:w}=useAppState(),T=useNavigate(),[R,G]=reactExports.useState(!1),I=useAction(fetchUnfinishedGamesAction);reactExports.useEffect(()=>{R&&T("/",{replace:!0})},[R,T]),reactExports.useEffect(()=>{d&&CapsWebApp.playSound("pve/win.mp3")},[d]);const z=reactExports.useCallback(async()=>{C(!0);try{await w(),await I(),C(!1),G(!0)}catch{C(!1)}},[I,w]);return jsxRuntimeExports.jsx("div",{className:`pve-battle__result-wrapper ${d?"visible":""}`,children:jsxRuntimeExports.jsxs("div",{className:`pve-battle__result ${d?"visible":""}`,children:[jsxRuntimeExports.jsx("div",{className:"pve-battle__result-title",children:v(_.isWin?"pve.win":"pve.lose")}),jsxRuntimeExports.jsx("div",{className:`pve-battle__result-gems ${_.isWin?"pve-battle__result-gems--3":"pve-battle__result-gems--1"}`,children:_.isWin?jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gems-image",src:gumWinImage,alt:"gem"}):jsxRuntimeExports.jsx("img",{className:"pve-battle__result-gem",src:gumLoseImage,alt:"gem"})}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-reward",children:[v("pve.yourReward"),": +",_.reward?.coins?formatNumber(_.reward.coins):0," ",jsxRuntimeExports.jsx("img",{className:"pve-battle__result-reward-gem",src:gumImage$2,alt:"gem"})]}),jsxRuntimeExports.jsxs("div",{className:"pve-battle__result-total",children:[v("pve.totalScore"),": ",formatNumber(_.newBalance)]}),jsxRuntimeExports.jsx(Button,{className:"pve-battle__result-button",fullWidth:!0,isLoading:A,onClick:z,children:v("madness.finish")})]})})},PveNewLevel=({level:_,...d})=>{const{t:v}=useTranslation(),{appState:A,onCheckEnergyAndUserUpdate:C}=useAppState(),[w,T]=reactExports.useState(!1),{setPopup:R}=reactExports.useContext(PopupContext),[G,I]=reactExports.useState({battle:void 0}),[z,H]=reactExports.useState(void 0),Y=reactExports.useCallback(()=>{d.onBackPressed()},[d]);useBackClick(Y);const ee=reactExports.useCallback(async()=>{T(!0);const ie=await capsService.newPveNewBattle(_.levelNum-1,d.deckId,firebaseService.token);await C(),I({...G,battle:ie}),T(!1)},[A.user,_.levelNum,C,R,v]);return G.battle?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(PveNewBattle,{battle:G.battle,onSetBattleResult:H}),";",jsxRuntimeExports.jsx(PveNewResult,{result:z,isShow:!!z})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"pve-level__wrapper",children:[jsxRuntimeExports.jsxs("div",{className:"pve-level__title",children:[v("pve.enemyTitle"),jsxRuntimeExports.jsxs("span",{className:"pve-level__gems",children:["+",_.rewards.forWin.coins?formatNumber(_.rewards.forWin.coins):0,jsxRuntimeExports.jsx("img",{className:"pve-caps-block__gem",src:gumImage$2,alt:"gem"})]})]}),jsxRuntimeExports.jsx(PveNewLevelCapsList,{squadSize:_.enemies.length,battleCaps:_.enemies,isCollectionBuff:!1}),jsxRuntimeExports.jsx("div",{className:"pve-battle__center"}),jsxRuntimeExports.jsxs("div",{className:"pve-level__bottom",children:[jsxRuntimeExports.jsx("div",{className:"pve-level__battle",children:jsxRuntimeExports.jsx("img",{src:battleImage,alt:"battle"})}),jsxRuntimeExports.jsx(Button,{isLoading:w,className:"pve-level__button",onClick:ee,disabled:!1,children:v("pve.startBattle")})]})]})})},DeckCap=({cap:_,onCapClick:d})=>{const{appState:v}=useAppState();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CapElement,{variant:"pvenew-small",cap:_.cap,isCapNumberHide:!0,onClickCallback:d,isNftHide:!0}),_.ability&&getAbilityIcon(_.ability)]})},PveDeckSlots=({slots:_,slottedCaps:d,onSlotClick:v=()=>{}})=>{const{appState:A}=useAppState(),C=_.reduce((w,T,R)=>(R%3===0&&w.push([]),w[w.length-1].push(T),w),[]);return jsxRuntimeExports.jsx("div",{className:"staking-slots",children:C.map((w,T)=>jsxRuntimeExports.jsxs("div",{className:"staking-slots__row",children:[w.map((R,G)=>{const I=T*3+G,z=d.get(I),H=A.capsCollections.find(ee=>ee.id==R.collectionId),Y={url:H?getCapUrl(R.grade??"COMMON",H,1):"",grade:R.grade};return jsxRuntimeExports.jsx("div",{className:"staking-slots__slot",children:z?jsxRuntimeExports.jsx(DeckCap,{cap:z,onCapClick:ee=>{v(I)}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("img",{src:plusImage$1,className:"staking-slots__slot-plus",alt:"plus"}),jsxRuntimeExports.jsx(CapElement,{variant:"small",className:"cap__element--small staking-slots__slot-cap",cap:Y,isCapNumberHide:!0,onClickCallback:()=>{v(I)}})]})},I)}),jsxRuntimeExports.jsx("div",{className:"staking-slots__rack"})]},T))})},PveDeck=({..._})=>{const{appState:d,onUserUpdate:v}=useAppState(),[A]=useAtom(userAtom),[C,w]=reactExports.useState([]),[T,R]=reactExports.useState(-1),[G,I]=reactExports.useState(-1),[z,H]=reactExports.useState("caps"),Y=new Map;for(const be of C)Y.set(be.slot,be);const ee=reactExports.useCallback(()=>{T>=0?R(-1):G>=0?I(-1):_.onBackPressed()},[_,T]);useBackClick(ee);const{t:ie}=useTranslation(),oe=async be=>{if(be){const ve=await firebaseService.getDeck(be);w(ve.caps)}};reactExports.useEffect(()=>{(async()=>await oe(A.selectedDeck))()},[]);const se=(be,ve,Me)=>{const we=[];for(const De of Me)we.push(De);for(var Be=0;Be<be.length;Be++){const De=Be+ve,Fe=we.find(Oe=>Oe.slot==De);Fe?Fe.cap=be[Be]:we.push({slot:De,cap:be[Be]})}return we},re=reactExports.useCallback(async(be,ve,Me)=>{const we=se(be,ve,Me);fe(we)},[]),fe=async be=>{const ve=await capsService.setDeck(be,firebaseService.token,A.selectedDeck);await v(),await oe(ve),R(-1),I(-1)};if(G>-1)return jsxRuntimeExports.jsx(SelectCap,{isStakingChoose:!1,onBackPressed:()=>I(-1),filterBackend:{},filterFrontend:be=>be.status=="READY",caps:C.map(be=>be.cap),onSelected:async be=>{const Me=(d.pveGd?.pvenew.abilities??[])[G],we=C.find(De=>De.ability==Me.id);we&&(we.ability=void 0);const Be=C.find(De=>De.cap.id==be.id);Me&&Be?(Be.ability=Me.id,await fe(C)):I(-1)}});if(T>-1)return jsxRuntimeExports.jsx("div",{className:"game",children:jsxRuntimeExports.jsx(BattleGameBid,{isCommentShow:!1,mainAction:ie("battle.next"),maxBid:20,isPve:!0,onBackPressed:()=>R(-1),filter:be=>![...C].find(ve=>ve.cap.id===be.id)&&be.status=="READY",setBidCallback:async be=>await re(be,T,C),mainActionValidator:be=>se(be,T,C).length<=20})});const ue=20,ge=[];for(var ye=0;ye<=ue;ye++)ge.push({});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"staking",children:[jsxRuntimeExports.jsx("div",{className:"staking__first",children:jsxRuntimeExports.jsx("div",{className:"staking__title",children:ie("pvenew.mydeck")})}),jsxRuntimeExports.jsxs("div",{className:"shop__modes-filter",children:[jsxRuntimeExports.jsx("button",{onClick:()=>H("caps"),className:`profile__caps-filters-item ${z=="caps"?"profile__caps-filters-item--active":""}`,children:ie("nav.caps")}),jsxRuntimeExports.jsx("button",{onClick:()=>H("abilities"),className:`profile__caps-filters-item ${z=="abilities"?"profile__caps-filters-item--active":""}`,children:ie("pvenew.abilities")})]}),z=="caps"&&jsxRuntimeExports.jsx(PveDeckSlots,{onSlotClick:R,slots:ge,slottedCaps:Y}),z=="abilities"&&jsxRuntimeExports.jsx(PveNewAbilitiesCapsList,{abilities:d.pveGd?.pvenew.abilities??[],selectedCaps:C,onSelect:be=>{I(be)}})]}),jsxRuntimeExports.jsx(NavBar,{})]})},PveNewCapsBlock=({userLevel:_,level:d,onSelect:v,className:A})=>{const{appState:C}=useAppState(),{t:w}=useTranslation(),T=_<d.levelNum,R=_>d.levelNum,G=_===d.levelNum,[I]=useAtom(tutorialAtom);return jsxRuntimeExports.jsxs("div",{className:`battle__game-caps pve-caps-block ${G?"pve-caps-block--current":""} ${A??""}`,children:[I==="pve"&&G&&jsxRuntimeExports.jsx("img",{src:fingerImage,className:"tutorial__finger pve-caps-block__finger",alt:"finger"}),jsxRuntimeExports.jsxs("div",{className:`pve-caps-block__game-caps ${G?"pve-caps-block__game-caps--active":""} ${T?"pve-caps-block__game-caps--locked":""}`,onClick:v,children:[jsxRuntimeExports.jsxs("div",{className:`pve-caps-block__first ${G?"pve-caps-block__first--active":""}`,children:[jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__title",children:[w("pve.level")," ",d.levelNum,T?jsxRuntimeExports.jsx("img",{className:"pve-caps-block__lock",src:lockImage,alt:"lock"}):""," "]}),!R&&jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__gems",children:["+",d.rewards.forWin.coins?formatNumber(d.rewards.forWin.coins):0," ",jsxRuntimeExports.jsx("img",{className:"pve-caps-block__gem",src:gumImage$2,alt:"gem"})]})]}),jsxRuntimeExports.jsxs("div",{className:"pve-caps-block__caps",children:[d.enemies.map((z,H)=>jsxRuntimeExports.jsx(CapElement,{className:R?"game-caps-list__cap pve-caps-block__cap--gray":"game-caps-list__cap",cap:z,variant:"pvenew-small"},`level-${d.levelNum}-${H}`)),R&&jsxRuntimeExports.jsx("img",{className:"pve-caps-block__completed",src:completedImage,alt:"completed"})]})]})]})},PveNewCapsBlock$1=reactExports.memo(PveNewCapsBlock),PveNew=()=>{const[_]=useAtom(unfinishedPveGameAtom),{loadingState:d,isSkeletonShow:v,isDataShow:A}=useSkeletonLoading({defaultState:"loaded"}),[C,w]=reactExports.useState({selectedLevel:_?{..._.level,levelNum:_.levelNumber+1}:void 0}),[T,R]=reactExports.useState([]),{t:G}=useTranslation(),I=useNavigate(),{appState:z,onUserUpdate:H}=useAppState(),Y=reactExports.useCallback(()=>{!C.selectedLevel&&!C.isInEditDeck&&I("/home")},[I,C.selectedLevel,C.isInEditDeck]);useBackClick(Y);const ee=reactExports.useMemo(()=>z.pveGd?.pvenew.levels.map((ue,ge)=>({...ue,levelNum:ge+1})).reverse()||[],[z]),ie=reactExports.useMemo(()=>z.user?.caps_battle_pvenew_level==null||z.user.caps_battle_pvenew_level==-1?1:z.user.caps_battle_pvenew_level+2,[z]);reactExports.useEffect(()=>{H()},[]),reactExports.useEffect(()=>{if(ee.length>0){const ue=document.querySelector(".pve-caps-block--current"),ge=ue?.parentElement,ye=16;if(ge&&ue){const be=ue.clientHeight*2+ye*4;ge.scrollTo({top:ue.offsetTop-ge.offsetTop-ge.offsetHeight+be})}}},[ee,C]);const oe=reactExports.useCallback(ue=>{ie==ue.levelNum&&z.user?.selectedDeck&&w({...C,selectedLevel:ue})},[C,ie]),se=z.user?.selectedDeck,re=[capsCommonIcon,capsRareIcon,capsEpicIcon,capsLegendIcon,capsDiamondIcon,capsCommonIcon,capsRareIcon,capsEpicIcon,capsLegendIcon,capsDiamondIcon],fe=async()=>{if(z.user?.selectedDeck){const ue=await firebaseService.getDeck(z.user.selectedDeck);R(ue.caps)}};return reactExports.useEffect(()=>{(async()=>await fe())()},[]),C.isInEditDeck?jsxRuntimeExports.jsx(PveDeck,{onBackPressed:()=>{w({...C,isInEditDeck:!1})}}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"pve__wrapper",children:[jsxRuntimeExports.jsx("div",{className:"pve__title",children:G("pvenew.mydeck")}),jsxRuntimeExports.jsxs("div",{className:"pvenew-deck",children:[jsxRuntimeExports.jsxs("div",{className:"pvenew-deck__images",children:[T.length>0&&T.map((ue,ge)=>jsxRuntimeExports.jsx("img",{src:firebaseService.getCollectionCapUrl(ue.cap.url),alt:"cap",className:"pvenew-deck__image",style:{zIndex:re.length-ge}},ge)),T.length==0&&re.map((ue,ge)=>jsxRuntimeExports.jsx("img",{src:ue,alt:"cap",className:"pvenew-deck__image",style:{zIndex:re.length-ge}},ge))]}),jsxRuntimeExports.jsxs("div",{className:"pvenew-deck__info",children:["x",T.length,"/20"]}),jsxRuntimeExports.jsx(Button,{size:"small",color:"green",onClick:async()=>{w({...C,isInEditDeck:!0})},children:G(se?"pvenew.editDeck":"pvenew.createDeck")})]}),jsxRuntimeExports.jsxs("div",{className:"skeleton-wrapper",children:[v&&jsxRuntimeExports.jsx("div",{className:`skeleton pve__levels pve__levels--skeleton battle__game-block fade-out ${d==="skeleton-to-data"?"visible":""} `,children:[...Array(4)].map((ue,ge)=>jsxRuntimeExports.jsx(PveCapsBlockSkeleton,{},ge))}),jsxRuntimeExports.jsx("div",{className:`pve__levels fade-in ${A?"visible":""}`,children:ee.map((ue,ge)=>jsxRuntimeExports.jsx(PveNewCapsBlock$1,{level:ue,userLevel:ie,onSelect:()=>oe(ue)},"pve-caps-block"+ge))})]})]}),C.selectedLevel&&jsxRuntimeExports.jsx(PveNewLevel,{level:C.selectedLevel,deckId:z.user?.selectedDeck,onBackPressed:()=>w({...C,selectedLevel:void 0}),onComplete:async()=>{w({...C,selectedLevel:void 0})}})]})},Upgrade=_=>{const{appState:d}=useAppState(),{t:v}=useTranslation(),[A,C]=reactExports.useState({upgradeResourcesCaps:new Map,upgradeProgress:!1,candidates:[]}),w=reactExports.useCallback(()=>{},[A,_]);useBackClick(w);const{setPopup:T}=reactExports.useContext(PopupContext),[R,G]=reactExports.useState(!1),I=async()=>{const ve=await firebaseService.getMyCapsAvailableForUpgrade(d.user);C({...A,candidates:ve.caps,lastDocument:ve.lastDocument,cap:void 0,upgradeResourcesCaps:new Map})},z=async()=>{G(!0);try{const ve=await firebaseService.getMyCapsAvailableForUpgrade(d.user,A.lastDocument);C({...A,candidates:[...A.candidates,...ve.caps],lastDocument:ve.lastDocument})}finally{G(!1)}};reactExports.useEffect(()=>{(async()=>await I())()},[]);const H=async ve=>{const Me=getCapGdGrade(ve,d.capsGd),we=Me?.upgrade?Me.upgrade.resources:[],Be=we.length>0?we[0]:void 0,De=Be&&(Be.equalCap||Be.equalCollection)?ve.collectionId:void 0,Fe=Be&&Be.grade?Be.grade:Be&&Be.equalCap?ve.grade:void 0;return(await firebaseService.getMyCollectionCaps({collectionId:De,grade:Fe,number:Be&&Be.equalCap?ve.collectionNumber:void 0})).filter(Ge=>Ge.id!==ve.id)},Y=getCapGdGrade(A.cap,d.capsGd),ee=Y?.upgrade?Y.upgrade.resources:[],ie=ee.map((ve,Me)=>{const we={id:A.cap.id,createdAt:Timestamp.now(),url:A.cap.url,collection:A.cap.collection,collectionId:A.cap.collectionId,collectionNumber:A.cap.collectionNumber,grade:ve.grade?ve.grade:ve.equalCap?A.cap.grade:"",gradeNumber:-1,number:-1,owner:"",status:"READY",packId:"",isNft:!1},Be=A.upgradeResourcesCaps.get(Me);return jsxRuntimeExports.jsxs("div",{className:"pve-battle__cap-wrapper",children:[!Be&&jsxRuntimeExports.jsx("img",{src:plusImage$1,className:"upgrade__resources-cap__plus",alt:"plus"}),jsxRuntimeExports.jsx(CapElement,{variant:"small",className:Be?"":"upgrade__empty-slot",cap:Be||we,onClickCallback:async()=>{}}),jsxRuntimeExports.jsxs("div",{className:"upgrade__resources-cap__description",children:[jsxRuntimeExports.jsx("b",{children:ve.equalCap||ve.equalCollection?A.cap.collection:v("upgrade.any")}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"upgrade__resources-cap__title",children:[v("profile.grade"),":"]})," ",ve.grade?getGradeTitle(ve.grade):ve.equalCap?getGradeTitle(A.cap.grade):v("upgrade.any"),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"upgrade__resources-cap__title",children:[v("profile.number"),":"]})," ",ve.equalCap?A.cap.collectionNumber:v("upgrade.any"),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"upgrade__resources-cap__number",children:["#",Be?Be.number:"000000"]})]})]},Me)}),oe=async()=>{C({...A,upgradeProgress:!0});try{const ve=[];for(let we=0;we<ee.length;we++){const Be=A.upgradeResourcesCaps.get(we);if(Be)ve.push(Be.id);else return}await capsService.upgradeCap(A.cap.id,ve,firebaseService.token);const Me=await firebaseService.getCap(A.cap.id);CapsWebApp.playSound("caps-upgrade/finished.mp3"),C({...A,upgradeProgress:!1,cap:Me,upgradeResourcesCaps:new Map,candidates:await H(Me)})}catch{T({message:"Some problem occurred during burning",type:"error"}),C({...A,upgradeProgress:!1})}},se=Y?.upgrade?Y?.upgrade.price>d.coinsBalance||ee.length!=A.upgradeResourcesCaps.size:!0,re={id:"",createdAt:Timestamp.now(),url:"",collection:"",collectionId:"",collectionNumber:-1,grade:"",gradeNumber:-1,number:-1,owner:"",status:"READY",packId:"",isNft:!1},fe=A.cap?{...A.cap,grade:UPGRADE_GRADE[A.cap.grade.toLowerCase()].toUpperCase()}:re,ue=A.cap?getCapGdGrade(A.cap,d.capsGd):void 0,ge=A.cap?getCapGdGrade(fe,d.capsGd):void 0,ye=A.cap?firebaseService.getCustomBackground(fe,"upgrade",d.capsCollections):void 0,be=Y?.upgrade?.price??0;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"upgrade",children:[jsxRuntimeExports.jsxs("div",{className:"upgrade__caps",style:ye?{"--cap-bg-url":`url(${ye})`}:void 0,children:[jsxRuntimeExports.jsxs("div",{className:"upgrade__cap",children:[jsxRuntimeExports.jsx("div",{className:"staking-slots__slot",children:jsxRuntimeExports.jsx(CapElement,{variant:"small",isBg:!0,cap:A.cap??re,className:A.cap?"":"upgrade__empty-slot",onClickCallback:async()=>{await I()}})},0),ue&&jsxRuntimeExports.jsxs("div",{className:"upgrade__power",children:[jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",v("profile.power"),": ",ue.from,"-",ue.to]})]}),jsxRuntimeExports.jsx("img",{src:arrowImage,alt:"arrow",className:"upgrade__arrow"}),jsxRuntimeExports.jsxs("div",{className:"upgrade__cap",children:[fe&&jsxRuntimeExports.jsx(CapElement,{variant:"small",isBg:!0,cap:fe,className:A.cap?"":"upgrade__empty-slot"}),ge&&jsxRuntimeExports.jsxs("div",{className:"upgrade__power",children:[jsxRuntimeExports.jsx("img",{src:lightningImage$1,alt:"lightning"})," ",v("profile.power"),": ",ge.from,"-",ge.to]})]})]}),ie.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"upgrade__title",children:v("upgrade.resourcesList")}),jsxRuntimeExports.jsx("div",{className:"upgrade__resources",children:ie})]}),jsxRuntimeExports.jsxs("div",{className:"upgrade__button",children:[jsxRuntimeExports.jsxs("div",{className:"pack__balance",children:[jsxRuntimeExports.jsxs("span",{className:"pack__balance-text",children:[v("shop.yourBalance"),":"]})," ",formatNumber(d.coinsBalance),jsxRuntimeExports.jsx("img",{src:gumImage$2,className:"pack__balance-icon",alt:"gum icon"})]}),jsxRuntimeExports.jsxs(Button,{fullWidth:!0,isLoading:A.upgradeProgress,disabled:se,className:"upgrade__button-btn",color:fe.grade.toLowerCase(),onClick:()=>{CapsWebApp.playSound("caps-upgrade/upgrade.mp3"),CapsWebApp.showPopup({message:v("upgrade.upgradeConfirmation",{number:A.cap.collectionNumber,price:be}),buttons:[{id:"cancel",type:"cancel"},{id:"burn",type:"default",text:""}]}).then(ve=>{ve=="burn"&&(CapsWebApp.playSound("caps-upgrade/upgrade-fire.mp3"),oe())})},children:[v("upgrade.upgradeForBtn",{price:formatNumber(Y?.upgrade?.price??0)})," ",jsxRuntimeExports.jsx("img",{className:"upgrade__gem",src:gumImage$2,alt:"gem image"})]}),jsxRuntimeExports.jsx("div",{className:"collection-caps-list__caps",children:A.candidates.map(ve=>{let Me=-1;for(const[we,Be]of A.upgradeResourcesCaps.entries())if(Be.id===ve.id){Me=we;break}return jsxRuntimeExports.jsx(CapElement,{variant:"medium",cap:ve,selectedNumber:Me+1,onClickCallback:async()=>{if(!A.cap){C({...A,cap:ve,candidates:await H(ve)});return}if(Me>=0)A.upgradeResourcesCaps.delete(Me);else for(let we=0;we<ee.length;we++)if(!A.upgradeResourcesCaps.has(we)){A.upgradeResourcesCaps.set(we,ve);break}C({...A,upgradeResourcesCaps:A.upgradeResourcesCaps})}},ve.id)})}),A.lastDocument!==void 0&&!A.cap&&jsxRuntimeExports.jsx(Button,{fullWidth:!0,className:"battle__button",color:"transparent",size:"small",onClick:z,isLoading:R,children:v("battle.loadMore")})]})]})})};ReactGA.initialize("G-JGQR2P1EY6");index.init({token:"eyJhcHBfbmFtZSI6IkNhcHNHYW1lIiwiYXBwX3VybCI6Imh0dHBzLy90Lm1lL0NhcHNHYW1lQm90IiwiYXBwX2RvbWFpbiI6Imh0dHBzOi8vY2Fwc2dhbWUtcHJvZC53ZWIuYXBwIn0=!dwhN7MuXbFXoKRFneXNFpHhWupSG4Eb/gRIsCoD2aeg=",appName:"CapsGame"});const PackWrapper=()=>{const{collectionId:_,id:d}=useParams();return jsxRuntimeExports.jsx(Pack,{id:d,collectionId:_})},GameWrapper=()=>{const{id:_}=useParams();return jsxRuntimeExports.jsx(Game,{id:_})};function createRouter(_){const d=!_.user?.isOnboardingComplete,v=_.duckygramRewards&&_.duckygramRewards.length>0?Array.from(_.duckygramRewards):[],A=v&&!d?v.shift():void 0;return createBrowserRouter(createRoutesFromElements(jsxRuntimeExports.jsxs(Route,{path:"/",errorElement:jsxRuntimeExports.jsx(InternalError,{}),children:[jsxRuntimeExports.jsx(Route,{index:!0,element:d&&jsxRuntimeExports.jsx(Onboarding,{})||_.cap&&jsxRuntimeExports.jsx(Navigate,{to:"earn",replace:!0})||_.pendingGameId&&jsxRuntimeExports.jsx(Game,{id:_.pendingGameId})||A&&jsxRuntimeExports.jsx(Pack,{collectionId:A.collectionId,id:A.id,nextPacks:v})||_.pendingSquadId&&jsxRuntimeExports.jsx(Navigate,{to:`squad/${_.pendingSquadId}`,replace:!0})||jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"home",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"new-game",element:jsxRuntimeExports.jsx(BattleNew,{})}),jsxRuntimeExports.jsx(Route,{path:"profile",element:jsxRuntimeExports.jsx(Profile,{})}),jsxRuntimeExports.jsx(Route,{path:"battle",element:jsxRuntimeExports.jsx(Battle$1,{mode:"pvp"})}),jsxRuntimeExports.jsx(Route,{path:"exchange",element:jsxRuntimeExports.jsx(Battle$1,{mode:"exchange"})}),jsxRuntimeExports.jsx(Route,{path:"earn",element:jsxRuntimeExports.jsx(Shop,{})}),jsxRuntimeExports.jsx(Route,{path:"tasks",element:jsxRuntimeExports.jsx(Tasks,{})}),jsxRuntimeExports.jsx(Route,{path:"debug",element:jsxRuntimeExports.jsx(Debug,{})}),jsxRuntimeExports.jsx(Route,{path:"leaderboard",element:jsxRuntimeExports.jsx(Leaderboard,{})}),jsxRuntimeExports.jsx(Route,{path:"season-leaderboard",element:jsxRuntimeExports.jsx(LeaderboardSeason,{})}),jsxRuntimeExports.jsx(Route,{path:"staking-leaderboard",element:jsxRuntimeExports.jsx(StakingLeaderboard,{})}),jsxRuntimeExports.jsx(Route,{path:"staking-speed",element:jsxRuntimeExports.jsx(FarmSpeed,{})}),jsxRuntimeExports.jsx(Route,{path:"pack/:collectionId/:id",element:jsxRuntimeExports.jsx(PackWrapper,{})}),jsxRuntimeExports.jsx(Route,{path:"game/:id",element:jsxRuntimeExports.jsx(GameWrapper,{})}),jsxRuntimeExports.jsx(Route,{path:"squad/:squadId",element:jsxRuntimeExports.jsx(LeaderboardSquadWrapper,{})}),jsxRuntimeExports.jsx(Route,{path:"pve",element:jsxRuntimeExports.jsx(PvE,{})}),jsxRuntimeExports.jsx(Route,{path:"pve-new",element:jsxRuntimeExports.jsx(PveNew,{})}),jsxRuntimeExports.jsx(Route,{path:"pve-campaign",element:jsxRuntimeExports.jsx(PveCampaign,{})}),jsxRuntimeExports.jsx(Route,{path:"madness",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"madness/:id",element:jsxRuntimeExports.jsx(Madness,{})}),jsxRuntimeExports.jsx(Route,{path:"onboarding",element:jsxRuntimeExports.jsx(Onboarding,{})}),jsxRuntimeExports.jsx(Route,{path:"staking",element:jsxRuntimeExports.jsx(Staking,{})}),jsxRuntimeExports.jsx(Route,{path:"upgrade",element:jsxRuntimeExports.jsx(Upgrade,{})}),jsxRuntimeExports.jsx(Route,{path:"settings",element:jsxRuntimeExports.jsx(Settings$1,{})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(NotFound,{})})]})))}function App(){const{appState:_,setAppState:d,initialLoad:v}=useAppState(),[A]=useTonConnectUI(),C=async T=>{d({..._,authState:AuthState.LOADING}),await loadCapsWebApp(),await v(T)},w=async()=>{try{if(AppConfig.mode==AppMode.MINIAPP){const T=await loadCapsWebApp();T.initWebApp();const R=await capsService.getToken(T.initData);await v(R)}else AppConfig.mode===AppMode.WEB&&capsService.getWebToken().then(T=>{C(T)}).catch(()=>{d({..._,authState:AuthState.NEED_AUTH})})}catch(T){console.error(T),d({..._,authState:AuthState.FAILED})}};switch(reactExports.useEffect(()=>{A.connector.restoreConnection().catch(()=>{}),ReactGA.send({hitType:"pageview",page:window.location.pathname+window.location.search}),w()},[]),_.authState){case AuthState.INIT:return jsxRuntimeExports.jsx(Loading,{});case AuthState.NEED_AUTH:return jsxRuntimeExports.jsx(Login,{onLogin:C});case AuthState.LOADING:return jsxRuntimeExports.jsx(Loading,{});case AuthState.NO_ACCESS:return jsxRuntimeExports.jsx(NoAccess,{customMessage:_.errorMessage});case AuthState.FAILED:return jsxRuntimeExports.jsx(InternalError,{});case AuthState.SUCCESS:return jsxRuntimeExports.jsx(RouterProvider2,{router:createRouter(_)})}}const icons=new Map([["success",""],["error",""]]);function PopupContextProvider({children:_}){const[d,v]=reactExports.useState({message:null,type:"success"});return reactExports.useEffect(()=>{if(d.message!==null&&["error","success"].includes(d.type)){const A=setTimeout(()=>{v(C=>({...C,message:null}))},3e3);return()=>clearTimeout(A)}},[d]),jsxRuntimeExports.jsxs(PopupContext.Provider,{value:{popup:d,setPopup:v},children:[_,d&&d.message&&["error","success"].includes(d.type)&&jsxRuntimeExports.jsx("div",{className:"jw-modal open",children:jsxRuntimeExports.jsxs("button",{className:"jw-modal-body",onClick:()=>v({...d,message:null}),children:[jsxRuntimeExports.jsx("div",{className:"icon",children:icons.get(d.type)}),jsxRuntimeExports.jsxs("div",{className:"text",children:[" ",d.message]})]})}),d&&d.message&&d.type==="confirm"&&jsxRuntimeExports.jsx("div",{className:"jw-modal open",children:jsxRuntimeExports.jsxs("div",{className:"jw-modal-confirm-body",children:[jsxRuntimeExports.jsxs("div",{className:"text",children:[" ",d.message]}),jsxRuntimeExports.jsx("button",{className:"jw-modal-button",onClick:()=>{v({...d,message:null,value:"OK"})},children:"OK"})]})})]})}const Modal=({title:_,message:d,buttons:v,onClose:A,isShow:C})=>jsxRuntimeExports.jsx(Info,{isShow:C,buttons:jsxRuntimeExports.jsx("div",{className:"pve-battle__result-buttons",children:v?v.reverse().map(w=>jsxRuntimeExports.jsx(Button,{onClick:()=>A(w.id),fullWidth:!0,className:"modal__button",children:w.type==="default"||w.type==="destructive"?w.text:w.type},w.id)):jsxRuntimeExports.jsx(Button,{onClick:()=>A(),fullWidth:!0,children:"OK"})}),children:jsxRuntimeExports.jsxs("div",{className:"modal__title",children:[_," ",d]})});function eventbus(_){const d={},v=(T,R)=>(d[T]===void 0&&(d[T]=[]),d[T]?.push(R),()=>{A(T,R)}),A=(T,R)=>{const G=d[T]?.indexOf(R)??-1;d[T]?.splice(G>>>0,1)};return{on:v,off:A,once:(T,R)=>{const G=I=>{R(I),A(T,G)};v(T,G)},emit:(T,R)=>{d[T]?.forEach(G=>{try{G(R)}catch{}})}}}const modalEventChannel=eventbus(),ModalProvider=({children:_})=>{const[d,v]=reactExports.useState({message:""}),A=C=>{v({message:""}),modalEventChannel.emit("close",C)};return reactExports.useEffect(()=>{const C=modalEventChannel.on("open",w=>{v(w)});return()=>{C()}},[]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_,jsxRuntimeExports.jsx(Modal,{...d,isShow:!!d.message,onClose:A})]})},backButtonEventChannel=eventbus(),BackButtonProvider=()=>{const[_,d]=reactExports.useState(!1),v=()=>{_&&backButtonEventChannel.emit("clickFn")};return reactExports.useEffect(()=>{const A=backButtonEventChannel.on("setBackButtonVisible",C=>{d(C)});return()=>{A()}},[]),_?jsxRuntimeExports.jsx("button",{className:"back-button",onClick:v,children:"<-"}):null},tonManifestUrl="https://capsgame-prod.web.app/tonconnect-manifest-caps-prod.json",domNode=document.getElementById("root");async function initializeApp(){AppConfig.mode===AppMode.MINIAPP&&(await __vitePreload(()=>Promise.resolve().then(()=>index$1),void 0)).default.expand()}const ctx=createCtx();(async()=>(globalThis.DEVTOOLS=null,await initializeApp(),clientExports.createRoot(domNode).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(reatomContext.Provider,{value:ctx,children:jsxRuntimeExports.jsx(TonConnectUIProvider$1,{manifestUrl:tonManifestUrl,children:jsxRuntimeExports.jsx(PopupContextProvider,{children:jsxRuntimeExports.jsx(AppStateProvider,{children:jsxRuntimeExports.jsxs(ModalProvider,{children:[jsxRuntimeExports.jsx(BackButtonProvider,{}),jsxRuntimeExports.jsx(App,{})]})})})})})}))))();export{Cap3DViewer as C,WebApp as W,backButtonEventChannel as b,jsxRuntimeExports as j,modalEventChannel as m,reactExports as r};
//# sourceMappingURL=index-PURV_Cp6.js.map
